function xQ(p,g){return function(){return p.apply(g,arguments)}}const{toString:Hee}=Object.prototype,{getPrototypeOf:MK}=Object,d7=(p=>g=>{const w=Hee.call(g);return p[w]||(p[w]=w.slice(8,-1).toLowerCase())})(Object.create(null)),Bg=p=>(p=p.toLowerCase(),g=>d7(g)===p),f7=p=>g=>typeof g===p,{isArray:zk}=Array,V5=f7("undefined");function zee(p){return p!==null&&!V5(p)&&p.constructor!==null&&!V5(p.constructor)&&Nm(p.constructor.isBuffer)&&p.constructor.isBuffer(p)}const EQ=Bg("ArrayBuffer");function Vee(p){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(p):g=p&&p.buffer&&EQ(p.buffer),g}const Uee=f7("string"),Nm=f7("function"),_Q=f7("number"),m7=p=>p!==null&&typeof p=="object",Wee=p=>p===!0||p===!1,P$=p=>{if(d7(p)!=="object")return!1;const g=MK(p);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in p)&&!(Symbol.iterator in p)},Zee=Bg("Date"),jee=Bg("File"),qee=Bg("Blob"),Gee=Bg("FileList"),Kee=p=>m7(p)&&Nm(p.pipe),Yee=p=>{let g;return p&&(typeof FormData=="function"&&p instanceof FormData||Nm(p.append)&&((g=d7(p))==="formdata"||g==="object"&&Nm(p.toString)&&p.toString()==="[object FormData]"))},Xee=Bg("URLSearchParams"),[Jee,Qee,ete,tte]=["ReadableStream","Request","Response","Headers"].map(Bg),nte=p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function G5(p,g,{allOwnKeys:w=!1}={}){if(p===null||typeof p>"u")return;let E,N;if(typeof p!="object"&&(p=[p]),zk(p))for(E=0,N=p.length;E<N;E++)g.call(null,p[E],E,p);else{const V=w?Object.getOwnPropertyNames(p):Object.keys(p),K=V.length;let j;for(E=0;E<K;E++)j=V[E],g.call(null,p[j],j,p)}}function TQ(p,g){g=g.toLowerCase();const w=Object.keys(p);let E=w.length,N;for(;E-- >0;)if(N=w[E],g===N.toLowerCase())return N;return null}const lS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kQ=p=>!V5(p)&&p!==lS;function vK(){const{caseless:p}=kQ(this)&&this||{},g={},w=(E,N)=>{const V=p&&TQ(g,N)||N;P$(g[V])&&P$(E)?g[V]=vK(g[V],E):P$(E)?g[V]=vK({},E):zk(E)?g[V]=E.slice():g[V]=E};for(let E=0,N=arguments.length;E<N;E++)arguments[E]&&G5(arguments[E],w);return g}const ote=(p,g,w,{allOwnKeys:E}={})=>(G5(g,(N,V)=>{w&&Nm(N)?p[V]=xQ(N,w):p[V]=N},{allOwnKeys:E}),p),ste=p=>(p.charCodeAt(0)===65279&&(p=p.slice(1)),p),rte=(p,g,w,E)=>{p.prototype=Object.create(g.prototype,E),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:g.prototype}),w&&Object.assign(p.prototype,w)},ate=(p,g,w,E)=>{let N,V,K;const j={};if(g=g||{},p==null)return g;do{for(N=Object.getOwnPropertyNames(p),V=N.length;V-- >0;)K=N[V],(!E||E(K,p,g))&&!j[K]&&(g[K]=p[K],j[K]=!0);p=w!==!1&&MK(p)}while(p&&(!w||w(p,g))&&p!==Object.prototype);return g},ite=(p,g,w)=>{p=String(p),(w===void 0||w>p.length)&&(w=p.length),w-=g.length;const E=p.indexOf(g,w);return E!==-1&&E===w},cte=p=>{if(!p)return null;if(zk(p))return p;let g=p.length;if(!_Q(g))return null;const w=new Array(g);for(;g-- >0;)w[g]=p[g];return w},lte=(p=>g=>p&&g instanceof p)(typeof Uint8Array<"u"&&MK(Uint8Array)),ute=(p,g)=>{const E=(p&&p[Symbol.iterator]).call(p);let N;for(;(N=E.next())&&!N.done;){const V=N.value;g.call(p,V[0],V[1])}},dte=(p,g)=>{let w;const E=[];for(;(w=p.exec(g))!==null;)E.push(w);return E},fte=Bg("HTMLFormElement"),mte=p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(w,E,N){return E.toUpperCase()+N}),qX=(({hasOwnProperty:p})=>(g,w)=>p.call(g,w))(Object.prototype),hte=Bg("RegExp"),AQ=(p,g)=>{const w=Object.getOwnPropertyDescriptors(p),E={};G5(w,(N,V)=>{let K;(K=g(N,V,p))!==!1&&(E[V]=K||N)}),Object.defineProperties(p,E)},gte=p=>{AQ(p,(g,w)=>{if(Nm(p)&&["arguments","caller","callee"].indexOf(w)!==-1)return!1;const E=p[w];if(Nm(E)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+w+"'")})}})},pte=(p,g)=>{const w={},E=N=>{N.forEach(V=>{w[V]=!0})};return zk(p)?E(p):E(String(p).split(g)),w},bte=()=>{},vte=(p,g)=>p!=null&&Number.isFinite(p=+p)?p:g,rK="abcdefghijklmnopqrstuvwxyz",GX="0123456789",OQ={DIGIT:GX,ALPHA:rK,ALPHA_DIGIT:rK+rK.toUpperCase()+GX},yte=(p=16,g=OQ.ALPHA_DIGIT)=>{let w="";const{length:E}=g;for(;p--;)w+=g[Math.random()*E|0];return w};function wte(p){return!!(p&&Nm(p.append)&&p[Symbol.toStringTag]==="FormData"&&p[Symbol.iterator])}const Cte=p=>{const g=new Array(10),w=(E,N)=>{if(m7(E)){if(g.indexOf(E)>=0)return;if(!("toJSON"in E)){g[N]=E;const V=zk(E)?[]:{};return G5(E,(K,j)=>{const ue=w(K,N+1);!V5(ue)&&(V[j]=ue)}),g[N]=void 0,V}}return E};return w(p,0)},Ste=Bg("AsyncFunction"),xte=p=>p&&(m7(p)||Nm(p))&&Nm(p.then)&&Nm(p.catch),DQ=((p,g)=>p?setImmediate:g?((w,E)=>(lS.addEventListener("message",({source:N,data:V})=>{N===lS&&V===w&&E.length&&E.shift()()},!1),N=>{E.push(N),lS.postMessage(w,"*")}))(`axios@${Math.random()}`,[]):w=>setTimeout(w))(typeof setImmediate=="function",Nm(lS.postMessage)),Ete=typeof queueMicrotask<"u"?queueMicrotask.bind(lS):typeof process<"u"&&process.nextTick||DQ,Rt={isArray:zk,isArrayBuffer:EQ,isBuffer:zee,isFormData:Yee,isArrayBufferView:Vee,isString:Uee,isNumber:_Q,isBoolean:Wee,isObject:m7,isPlainObject:P$,isReadableStream:Jee,isRequest:Qee,isResponse:ete,isHeaders:tte,isUndefined:V5,isDate:Zee,isFile:jee,isBlob:qee,isRegExp:hte,isFunction:Nm,isStream:Kee,isURLSearchParams:Xee,isTypedArray:lte,isFileList:Gee,forEach:G5,merge:vK,extend:ote,trim:nte,stripBOM:ste,inherits:rte,toFlatObject:ate,kindOf:d7,kindOfTest:Bg,endsWith:ite,toArray:cte,forEachEntry:ute,matchAll:dte,isHTMLForm:fte,hasOwnProperty:qX,hasOwnProp:qX,reduceDescriptors:AQ,freezeMethods:gte,toObjectSet:pte,toCamelCase:mte,noop:bte,toFiniteNumber:vte,findKey:TQ,global:lS,isContextDefined:kQ,ALPHABET:OQ,generateString:yte,isSpecCompliantForm:wte,toJSONObject:Cte,isAsyncFn:Ste,isThenable:xte,setImmediate:DQ,asap:Ete};function As(p,g,w,E,N){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=p,this.name="AxiosError",g&&(this.code=g),w&&(this.config=w),E&&(this.request=E),N&&(this.response=N,this.status=N.status?N.status:null)}Rt.inherits(As,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.status}}});const RQ=As.prototype,MQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{MQ[p]={value:p}});Object.defineProperties(As,MQ);Object.defineProperty(RQ,"isAxiosError",{value:!0});As.from=(p,g,w,E,N,V)=>{const K=Object.create(RQ);return Rt.toFlatObject(p,K,function(ue){return ue!==Error.prototype},j=>j!=="isAxiosError"),As.call(K,p.message,g,w,E,N),K.cause=p,K.name=p.name,V&&Object.assign(K,V),K};const _te=null;function yK(p){return Rt.isPlainObject(p)||Rt.isArray(p)}function NQ(p){return Rt.endsWith(p,"[]")?p.slice(0,-2):p}function KX(p,g,w){return p?p.concat(g).map(function(N,V){return N=NQ(N),!w&&V?"["+N+"]":N}).join(w?".":""):g}function Tte(p){return Rt.isArray(p)&&!p.some(yK)}const kte=Rt.toFlatObject(Rt,{},null,function(g){return/^is[A-Z]/.test(g)});function h7(p,g,w){if(!Rt.isObject(p))throw new TypeError("target must be an object");g=g||new FormData,w=Rt.toFlatObject(w,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ct,Ne){return!Rt.isUndefined(Ne[Ct])});const E=w.metaTokens,N=w.visitor||Ce,V=w.dots,K=w.indexes,ue=(w.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(g);if(!Rt.isFunction(N))throw new TypeError("visitor must be a function");function ge(Pt){if(Pt===null)return"";if(Rt.isDate(Pt))return Pt.toISOString();if(!ue&&Rt.isBlob(Pt))throw new As("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(Pt)||Rt.isTypedArray(Pt)?ue&&typeof Blob=="function"?new Blob([Pt]):Buffer.from(Pt):Pt}function Ce(Pt,Ct,Ne){let ln=Pt;if(Pt&&!Ne&&typeof Pt=="object"){if(Rt.endsWith(Ct,"{}"))Ct=E?Ct:Ct.slice(0,-2),Pt=JSON.stringify(Pt);else if(Rt.isArray(Pt)&&Tte(Pt)||(Rt.isFileList(Pt)||Rt.endsWith(Ct,"[]"))&&(ln=Rt.toArray(Pt)))return Ct=NQ(Ct),ln.forEach(function(ce,Je){!(Rt.isUndefined(ce)||ce===null)&&g.append(K===!0?KX([Ct],Je,V):K===null?Ct:Ct+"[]",ge(ce))}),!1}return yK(Pt)?!0:(g.append(KX(Ne,Ct,V),ge(Pt)),!1)}const Xe=[],Lt=Object.assign(kte,{defaultVisitor:Ce,convertValue:ge,isVisitable:yK});function Zt(Pt,Ct){if(!Rt.isUndefined(Pt)){if(Xe.indexOf(Pt)!==-1)throw Error("Circular reference detected in "+Ct.join("."));Xe.push(Pt),Rt.forEach(Pt,function(ln,xt){(!(Rt.isUndefined(ln)||ln===null)&&N.call(g,ln,Rt.isString(xt)?xt.trim():xt,Ct,Lt))===!0&&Zt(ln,Ct?Ct.concat(xt):[xt])}),Xe.pop()}}if(!Rt.isObject(p))throw new TypeError("data must be an object");return Zt(p),g}function YX(p){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(E){return g[E]})}function NK(p,g){this._pairs=[],p&&h7(p,this,g)}const PQ=NK.prototype;PQ.append=function(g,w){this._pairs.push([g,w])};PQ.toString=function(g){const w=g?function(E){return g.call(this,E,YX)}:YX;return this._pairs.map(function(N){return w(N[0])+"="+w(N[1])},"").join("&")};function Ate(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function IQ(p,g,w){if(!g)return p;const E=w&&w.encode||Ate;Rt.isFunction(w)&&(w={serialize:w});const N=w&&w.serialize;let V;if(N?V=N(g,w):V=Rt.isURLSearchParams(g)?g.toString():new NK(g,w).toString(E),V){const K=p.indexOf("#");K!==-1&&(p=p.slice(0,K)),p+=(p.indexOf("?")===-1?"?":"&")+V}return p}class XX{constructor(){this.handlers=[]}use(g,w,E){return this.handlers.push({fulfilled:g,rejected:w,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){Rt.forEach(this.handlers,function(E){E!==null&&g(E)})}}const BQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ote=typeof URLSearchParams<"u"?URLSearchParams:NK,Dte=typeof FormData<"u"?FormData:null,Rte=typeof Blob<"u"?Blob:null,Mte={isBrowser:!0,classes:{URLSearchParams:Ote,FormData:Dte,Blob:Rte},protocols:["http","https","file","blob","url","data"]},PK=typeof window<"u"&&typeof document<"u",wK=typeof navigator=="object"&&navigator||void 0,Nte=PK&&(!wK||["ReactNative","NativeScript","NS"].indexOf(wK.product)<0),Pte=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ite=PK&&window.location.href||"http://localhost",Bte=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:PK,hasStandardBrowserEnv:Nte,hasStandardBrowserWebWorkerEnv:Pte,navigator:wK,origin:Ite},Symbol.toStringTag,{value:"Module"})),sd={...Bte,...Mte};function Lte(p,g){return h7(p,new sd.classes.URLSearchParams,Object.assign({visitor:function(w,E,N,V){return sd.isNode&&Rt.isBuffer(w)?(this.append(E,w.toString("base64")),!1):V.defaultVisitor.apply(this,arguments)}},g))}function Fte(p){return Rt.matchAll(/\w+|\[(\w*)]/g,p).map(g=>g[0]==="[]"?"":g[1]||g[0])}function $te(p){const g={},w=Object.keys(p);let E;const N=w.length;let V;for(E=0;E<N;E++)V=w[E],g[V]=p[V];return g}function LQ(p){function g(w,E,N,V){let K=w[V++];if(K==="__proto__")return!0;const j=Number.isFinite(+K),ue=V>=w.length;return K=!K&&Rt.isArray(N)?N.length:K,ue?(Rt.hasOwnProp(N,K)?N[K]=[N[K],E]:N[K]=E,!j):((!N[K]||!Rt.isObject(N[K]))&&(N[K]=[]),g(w,E,N[K],V)&&Rt.isArray(N[K])&&(N[K]=$te(N[K])),!j)}if(Rt.isFormData(p)&&Rt.isFunction(p.entries)){const w={};return Rt.forEachEntry(p,(E,N)=>{g(Fte(E),N,w,0)}),w}return null}function Hte(p,g,w){if(Rt.isString(p))try{return(g||JSON.parse)(p),Rt.trim(p)}catch(E){if(E.name!=="SyntaxError")throw E}return(0,JSON.stringify)(p)}const K5={transitional:BQ,adapter:["xhr","http","fetch"],transformRequest:[function(g,w){const E=w.getContentType()||"",N=E.indexOf("application/json")>-1,V=Rt.isObject(g);if(V&&Rt.isHTMLForm(g)&&(g=new FormData(g)),Rt.isFormData(g))return N?JSON.stringify(LQ(g)):g;if(Rt.isArrayBuffer(g)||Rt.isBuffer(g)||Rt.isStream(g)||Rt.isFile(g)||Rt.isBlob(g)||Rt.isReadableStream(g))return g;if(Rt.isArrayBufferView(g))return g.buffer;if(Rt.isURLSearchParams(g))return w.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let j;if(V){if(E.indexOf("application/x-www-form-urlencoded")>-1)return Lte(g,this.formSerializer).toString();if((j=Rt.isFileList(g))||E.indexOf("multipart/form-data")>-1){const ue=this.env&&this.env.FormData;return h7(j?{"files[]":g}:g,ue&&new ue,this.formSerializer)}}return V||N?(w.setContentType("application/json",!1),Hte(g)):g}],transformResponse:[function(g){const w=this.transitional||K5.transitional,E=w&&w.forcedJSONParsing,N=this.responseType==="json";if(Rt.isResponse(g)||Rt.isReadableStream(g))return g;if(g&&Rt.isString(g)&&(E&&!this.responseType||N)){const K=!(w&&w.silentJSONParsing)&&N;try{return JSON.parse(g)}catch(j){if(K)throw j.name==="SyntaxError"?As.from(j,As.ERR_BAD_RESPONSE,this,null,this.response):j}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sd.classes.FormData,Blob:sd.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],p=>{K5.headers[p]={}});const zte=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vte=p=>{const g={};let w,E,N;return p&&p.split(`
`).forEach(function(K){N=K.indexOf(":"),w=K.substring(0,N).trim().toLowerCase(),E=K.substring(N+1).trim(),!(!w||g[w]&&zte[w])&&(w==="set-cookie"?g[w]?g[w].push(E):g[w]=[E]:g[w]=g[w]?g[w]+", "+E:E)}),g},JX=Symbol("internals");function N5(p){return p&&String(p).trim().toLowerCase()}function I$(p){return p===!1||p==null?p:Rt.isArray(p)?p.map(I$):String(p)}function Ute(p){const g=Object.create(null),w=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=w.exec(p);)g[E[1]]=E[2];return g}const Wte=p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim());function aK(p,g,w,E,N){if(Rt.isFunction(E))return E.call(this,g,w);if(N&&(g=w),!!Rt.isString(g)){if(Rt.isString(E))return g.indexOf(E)!==-1;if(Rt.isRegExp(E))return E.test(g)}}function Zte(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,w,E)=>w.toUpperCase()+E)}function jte(p,g){const w=Rt.toCamelCase(" "+g);["get","set","has"].forEach(E=>{Object.defineProperty(p,E+w,{value:function(N,V,K){return this[E].call(this,g,N,V,K)},configurable:!0})})}class Ff{constructor(g){g&&this.set(g)}set(g,w,E){const N=this;function V(j,ue,ge){const Ce=N5(ue);if(!Ce)throw new Error("header name must be a non-empty string");const Xe=Rt.findKey(N,Ce);(!Xe||N[Xe]===void 0||ge===!0||ge===void 0&&N[Xe]!==!1)&&(N[Xe||ue]=I$(j))}const K=(j,ue)=>Rt.forEach(j,(ge,Ce)=>V(ge,Ce,ue));if(Rt.isPlainObject(g)||g instanceof this.constructor)K(g,w);else if(Rt.isString(g)&&(g=g.trim())&&!Wte(g))K(Vte(g),w);else if(Rt.isHeaders(g))for(const[j,ue]of g.entries())V(ue,j,E);else g!=null&&V(w,g,E);return this}get(g,w){if(g=N5(g),g){const E=Rt.findKey(this,g);if(E){const N=this[E];if(!w)return N;if(w===!0)return Ute(N);if(Rt.isFunction(w))return w.call(this,N,E);if(Rt.isRegExp(w))return w.exec(N);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,w){if(g=N5(g),g){const E=Rt.findKey(this,g);return!!(E&&this[E]!==void 0&&(!w||aK(this,this[E],E,w)))}return!1}delete(g,w){const E=this;let N=!1;function V(K){if(K=N5(K),K){const j=Rt.findKey(E,K);j&&(!w||aK(E,E[j],j,w))&&(delete E[j],N=!0)}}return Rt.isArray(g)?g.forEach(V):V(g),N}clear(g){const w=Object.keys(this);let E=w.length,N=!1;for(;E--;){const V=w[E];(!g||aK(this,this[V],V,g,!0))&&(delete this[V],N=!0)}return N}normalize(g){const w=this,E={};return Rt.forEach(this,(N,V)=>{const K=Rt.findKey(E,V);if(K){w[K]=I$(N),delete w[V];return}const j=g?Zte(V):String(V).trim();j!==V&&delete w[V],w[j]=I$(N),E[j]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const w=Object.create(null);return Rt.forEach(this,(E,N)=>{E!=null&&E!==!1&&(w[N]=g&&Rt.isArray(E)?E.join(", "):E)}),w}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,w])=>g+": "+w).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...w){const E=new this(g);return w.forEach(N=>E.set(N)),E}static accessor(g){const E=(this[JX]=this[JX]={accessors:{}}).accessors,N=this.prototype;function V(K){const j=N5(K);E[j]||(jte(N,K),E[j]=!0)}return Rt.isArray(g)?g.forEach(V):V(g),this}}Ff.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(Ff.prototype,({value:p},g)=>{let w=g[0].toUpperCase()+g.slice(1);return{get:()=>p,set(E){this[w]=E}}});Rt.freezeMethods(Ff);function iK(p,g){const w=this||K5,E=g||w,N=Ff.from(E.headers);let V=E.data;return Rt.forEach(p,function(j){V=j.call(w,V,N.normalize(),g?g.status:void 0)}),N.normalize(),V}function FQ(p){return!!(p&&p.__CANCEL__)}function Vk(p,g,w){As.call(this,p??"canceled",As.ERR_CANCELED,g,w),this.name="CanceledError"}Rt.inherits(Vk,As,{__CANCEL__:!0});function $Q(p,g,w){const E=w.config.validateStatus;!w.status||!E||E(w.status)?p(w):g(new As("Request failed with status code "+w.status,[As.ERR_BAD_REQUEST,As.ERR_BAD_RESPONSE][Math.floor(w.status/100)-4],w.config,w.request,w))}function qte(p){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return g&&g[1]||""}function Gte(p,g){p=p||10;const w=new Array(p),E=new Array(p);let N=0,V=0,K;return g=g!==void 0?g:1e3,function(ue){const ge=Date.now(),Ce=E[V];K||(K=ge),w[N]=ue,E[N]=ge;let Xe=V,Lt=0;for(;Xe!==N;)Lt+=w[Xe++],Xe=Xe%p;if(N=(N+1)%p,N===V&&(V=(V+1)%p),ge-K<g)return;const Zt=Ce&&ge-Ce;return Zt?Math.round(Lt*1e3/Zt):void 0}}function Kte(p,g){let w=0,E=1e3/g,N,V;const K=(ge,Ce=Date.now())=>{w=Ce,N=null,V&&(clearTimeout(V),V=null),p.apply(null,ge)};return[(...ge)=>{const Ce=Date.now(),Xe=Ce-w;Xe>=E?K(ge,Ce):(N=ge,V||(V=setTimeout(()=>{V=null,K(N)},E-Xe)))},()=>N&&K(N)]}const H$=(p,g,w=3)=>{let E=0;const N=Gte(50,250);return Kte(V=>{const K=V.loaded,j=V.lengthComputable?V.total:void 0,ue=K-E,ge=N(ue),Ce=K<=j;E=K;const Xe={loaded:K,total:j,progress:j?K/j:void 0,bytes:ue,rate:ge||void 0,estimated:ge&&j&&Ce?(j-K)/ge:void 0,event:V,lengthComputable:j!=null,[g?"download":"upload"]:!0};p(Xe)},w)},QX=(p,g)=>{const w=p!=null;return[E=>g[0]({lengthComputable:w,total:p,loaded:E}),g[1]]},eJ=p=>(...g)=>Rt.asap(()=>p(...g)),Yte=sd.hasStandardBrowserEnv?((p,g)=>w=>(w=new URL(w,sd.origin),p.protocol===w.protocol&&p.host===w.host&&(g||p.port===w.port)))(new URL(sd.origin),sd.navigator&&/(msie|trident)/i.test(sd.navigator.userAgent)):()=>!0,Xte=sd.hasStandardBrowserEnv?{write(p,g,w,E,N,V){const K=[p+"="+encodeURIComponent(g)];Rt.isNumber(w)&&K.push("expires="+new Date(w).toGMTString()),Rt.isString(E)&&K.push("path="+E),Rt.isString(N)&&K.push("domain="+N),V===!0&&K.push("secure"),document.cookie=K.join("; ")},read(p){const g=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Jte(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}function Qte(p,g){return g?p.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):p}function HQ(p,g){return p&&!Jte(g)?Qte(p,g):g}const tJ=p=>p instanceof Ff?{...p}:p;function fS(p,g){g=g||{};const w={};function E(ge,Ce,Xe,Lt){return Rt.isPlainObject(ge)&&Rt.isPlainObject(Ce)?Rt.merge.call({caseless:Lt},ge,Ce):Rt.isPlainObject(Ce)?Rt.merge({},Ce):Rt.isArray(Ce)?Ce.slice():Ce}function N(ge,Ce,Xe,Lt){if(Rt.isUndefined(Ce)){if(!Rt.isUndefined(ge))return E(void 0,ge,Xe,Lt)}else return E(ge,Ce,Xe,Lt)}function V(ge,Ce){if(!Rt.isUndefined(Ce))return E(void 0,Ce)}function K(ge,Ce){if(Rt.isUndefined(Ce)){if(!Rt.isUndefined(ge))return E(void 0,ge)}else return E(void 0,Ce)}function j(ge,Ce,Xe){if(Xe in g)return E(ge,Ce);if(Xe in p)return E(void 0,ge)}const ue={url:V,method:V,data:V,baseURL:K,transformRequest:K,transformResponse:K,paramsSerializer:K,timeout:K,timeoutMessage:K,withCredentials:K,withXSRFToken:K,adapter:K,responseType:K,xsrfCookieName:K,xsrfHeaderName:K,onUploadProgress:K,onDownloadProgress:K,decompress:K,maxContentLength:K,maxBodyLength:K,beforeRedirect:K,transport:K,httpAgent:K,httpsAgent:K,cancelToken:K,socketPath:K,responseEncoding:K,validateStatus:j,headers:(ge,Ce,Xe)=>N(tJ(ge),tJ(Ce),Xe,!0)};return Rt.forEach(Object.keys(Object.assign({},p,g)),function(Ce){const Xe=ue[Ce]||N,Lt=Xe(p[Ce],g[Ce],Ce);Rt.isUndefined(Lt)&&Xe!==j||(w[Ce]=Lt)}),w}const zQ=p=>{const g=fS({},p);let{data:w,withXSRFToken:E,xsrfHeaderName:N,xsrfCookieName:V,headers:K,auth:j}=g;g.headers=K=Ff.from(K),g.url=IQ(HQ(g.baseURL,g.url),p.params,p.paramsSerializer),j&&K.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):"")));let ue;if(Rt.isFormData(w)){if(sd.hasStandardBrowserEnv||sd.hasStandardBrowserWebWorkerEnv)K.setContentType(void 0);else if((ue=K.getContentType())!==!1){const[ge,...Ce]=ue?ue.split(";").map(Xe=>Xe.trim()).filter(Boolean):[];K.setContentType([ge||"multipart/form-data",...Ce].join("; "))}}if(sd.hasStandardBrowserEnv&&(E&&Rt.isFunction(E)&&(E=E(g)),E||E!==!1&&Yte(g.url))){const ge=N&&V&&Xte.read(V);ge&&K.set(N,ge)}return g},ene=typeof XMLHttpRequest<"u",tne=ene&&function(p){return new Promise(function(w,E){const N=zQ(p);let V=N.data;const K=Ff.from(N.headers).normalize();let{responseType:j,onUploadProgress:ue,onDownloadProgress:ge}=N,Ce,Xe,Lt,Zt,Pt;function Ct(){Zt&&Zt(),Pt&&Pt(),N.cancelToken&&N.cancelToken.unsubscribe(Ce),N.signal&&N.signal.removeEventListener("abort",Ce)}let Ne=new XMLHttpRequest;Ne.open(N.method.toUpperCase(),N.url,!0),Ne.timeout=N.timeout;function ln(){if(!Ne)return;const ce=Ff.from("getAllResponseHeaders"in Ne&&Ne.getAllResponseHeaders()),Dn={data:!j||j==="text"||j==="json"?Ne.responseText:Ne.response,status:Ne.status,statusText:Ne.statusText,headers:ce,config:p,request:Ne};$Q(function(oe){w(oe),Ct()},function(oe){E(oe),Ct()},Dn),Ne=null}"onloadend"in Ne?Ne.onloadend=ln:Ne.onreadystatechange=function(){!Ne||Ne.readyState!==4||Ne.status===0&&!(Ne.responseURL&&Ne.responseURL.indexOf("file:")===0)||setTimeout(ln)},Ne.onabort=function(){Ne&&(E(new As("Request aborted",As.ECONNABORTED,p,Ne)),Ne=null)},Ne.onerror=function(){E(new As("Network Error",As.ERR_NETWORK,p,Ne)),Ne=null},Ne.ontimeout=function(){let Je=N.timeout?"timeout of "+N.timeout+"ms exceeded":"timeout exceeded";const Dn=N.transitional||BQ;N.timeoutErrorMessage&&(Je=N.timeoutErrorMessage),E(new As(Je,Dn.clarifyTimeoutError?As.ETIMEDOUT:As.ECONNABORTED,p,Ne)),Ne=null},V===void 0&&K.setContentType(null),"setRequestHeader"in Ne&&Rt.forEach(K.toJSON(),function(Je,Dn){Ne.setRequestHeader(Dn,Je)}),Rt.isUndefined(N.withCredentials)||(Ne.withCredentials=!!N.withCredentials),j&&j!=="json"&&(Ne.responseType=N.responseType),ge&&([Lt,Pt]=H$(ge,!0),Ne.addEventListener("progress",Lt)),ue&&Ne.upload&&([Xe,Zt]=H$(ue),Ne.upload.addEventListener("progress",Xe),Ne.upload.addEventListener("loadend",Zt)),(N.cancelToken||N.signal)&&(Ce=ce=>{Ne&&(E(!ce||ce.type?new Vk(null,p,Ne):ce),Ne.abort(),Ne=null)},N.cancelToken&&N.cancelToken.subscribe(Ce),N.signal&&(N.signal.aborted?Ce():N.signal.addEventListener("abort",Ce)));const xt=qte(N.url);if(xt&&sd.protocols.indexOf(xt)===-1){E(new As("Unsupported protocol "+xt+":",As.ERR_BAD_REQUEST,p));return}Ne.send(V||null)})},nne=(p,g)=>{const{length:w}=p=p?p.filter(Boolean):[];if(g||w){let E=new AbortController,N;const V=function(ge){if(!N){N=!0,j();const Ce=ge instanceof Error?ge:this.reason;E.abort(Ce instanceof As?Ce:new Vk(Ce instanceof Error?Ce.message:Ce))}};let K=g&&setTimeout(()=>{K=null,V(new As(`timeout ${g} of ms exceeded`,As.ETIMEDOUT))},g);const j=()=>{p&&(K&&clearTimeout(K),K=null,p.forEach(ge=>{ge.unsubscribe?ge.unsubscribe(V):ge.removeEventListener("abort",V)}),p=null)};p.forEach(ge=>ge.addEventListener("abort",V));const{signal:ue}=E;return ue.unsubscribe=()=>Rt.asap(j),ue}},one=function*(p,g){let w=p.byteLength;if(w<g){yield p;return}let E=0,N;for(;E<w;)N=E+g,yield p.slice(E,N),E=N},sne=async function*(p,g){for await(const w of rne(p))yield*one(w,g)},rne=async function*(p){if(p[Symbol.asyncIterator]){yield*p;return}const g=p.getReader();try{for(;;){const{done:w,value:E}=await g.read();if(w)break;yield E}}finally{await g.cancel()}},nJ=(p,g,w,E)=>{const N=sne(p,g);let V=0,K,j=ue=>{K||(K=!0,E&&E(ue))};return new ReadableStream({async pull(ue){try{const{done:ge,value:Ce}=await N.next();if(ge){j(),ue.close();return}let Xe=Ce.byteLength;if(w){let Lt=V+=Xe;w(Lt)}ue.enqueue(new Uint8Array(Ce))}catch(ge){throw j(ge),ge}},cancel(ue){return j(ue),N.return()}},{highWaterMark:2})},g7=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",VQ=g7&&typeof ReadableStream=="function",ane=g7&&(typeof TextEncoder=="function"?(p=>g=>p.encode(g))(new TextEncoder):async p=>new Uint8Array(await new Response(p).arrayBuffer())),UQ=(p,...g)=>{try{return!!p(...g)}catch{return!1}},ine=VQ&&UQ(()=>{let p=!1;const g=new Request(sd.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),oJ=64*1024,CK=VQ&&UQ(()=>Rt.isReadableStream(new Response("").body)),z$={stream:CK&&(p=>p.body)};g7&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!z$[g]&&(z$[g]=Rt.isFunction(p[g])?w=>w[g]():(w,E)=>{throw new As(`Response type '${g}' is not supported`,As.ERR_NOT_SUPPORT,E)})})})(new Response);const cne=async p=>{if(p==null)return 0;if(Rt.isBlob(p))return p.size;if(Rt.isSpecCompliantForm(p))return(await new Request(sd.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(p)||Rt.isArrayBuffer(p))return p.byteLength;if(Rt.isURLSearchParams(p)&&(p=p+""),Rt.isString(p))return(await ane(p)).byteLength},lne=async(p,g)=>{const w=Rt.toFiniteNumber(p.getContentLength());return w??cne(g)},une=g7&&(async p=>{let{url:g,method:w,data:E,signal:N,cancelToken:V,timeout:K,onDownloadProgress:j,onUploadProgress:ue,responseType:ge,headers:Ce,withCredentials:Xe="same-origin",fetchOptions:Lt}=zQ(p);ge=ge?(ge+"").toLowerCase():"text";let Zt=nne([N,V&&V.toAbortSignal()],K),Pt;const Ct=Zt&&Zt.unsubscribe&&(()=>{Zt.unsubscribe()});let Ne;try{if(ue&&ine&&w!=="get"&&w!=="head"&&(Ne=await lne(Ce,E))!==0){let Dn=new Request(g,{method:"POST",body:E,duplex:"half"}),Gt;if(Rt.isFormData(E)&&(Gt=Dn.headers.get("content-type"))&&Ce.setContentType(Gt),Dn.body){const[oe,Xt]=QX(Ne,H$(eJ(ue)));E=nJ(Dn.body,oJ,oe,Xt)}}Rt.isString(Xe)||(Xe=Xe?"include":"omit");const ln="credentials"in Request.prototype;Pt=new Request(g,{...Lt,signal:Zt,method:w.toUpperCase(),headers:Ce.normalize().toJSON(),body:E,duplex:"half",credentials:ln?Xe:void 0});let xt=await fetch(Pt);const ce=CK&&(ge==="stream"||ge==="response");if(CK&&(j||ce&&Ct)){const Dn={};["status","statusText","headers"].forEach(In=>{Dn[In]=xt[In]});const Gt=Rt.toFiniteNumber(xt.headers.get("content-length")),[oe,Xt]=j&&QX(Gt,H$(eJ(j),!0))||[];xt=new Response(nJ(xt.body,oJ,oe,()=>{Xt&&Xt(),Ct&&Ct()}),Dn)}ge=ge||"text";let Je=await z$[Rt.findKey(z$,ge)||"text"](xt,p);return!ce&&Ct&&Ct(),await new Promise((Dn,Gt)=>{$Q(Dn,Gt,{data:Je,headers:Ff.from(xt.headers),status:xt.status,statusText:xt.statusText,config:p,request:Pt})})}catch(ln){throw Ct&&Ct(),ln&&ln.name==="TypeError"&&/fetch/i.test(ln.message)?Object.assign(new As("Network Error",As.ERR_NETWORK,p,Pt),{cause:ln.cause||ln}):As.from(ln,ln&&ln.code,p,Pt)}}),SK={http:_te,xhr:tne,fetch:une};Rt.forEach(SK,(p,g)=>{if(p){try{Object.defineProperty(p,"name",{value:g})}catch{}Object.defineProperty(p,"adapterName",{value:g})}});const sJ=p=>`- ${p}`,dne=p=>Rt.isFunction(p)||p===null||p===!1,WQ={getAdapter:p=>{p=Rt.isArray(p)?p:[p];const{length:g}=p;let w,E;const N={};for(let V=0;V<g;V++){w=p[V];let K;if(E=w,!dne(w)&&(E=SK[(K=String(w)).toLowerCase()],E===void 0))throw new As(`Unknown adapter '${K}'`);if(E)break;N[K||"#"+V]=E}if(!E){const V=Object.entries(N).map(([j,ue])=>`adapter ${j} `+(ue===!1?"is not supported by the environment":"is not available in the build"));let K=g?V.length>1?`since :
`+V.map(sJ).join(`
`):" "+sJ(V[0]):"as no adapter specified";throw new As("There is no suitable adapter to dispatch the request "+K,"ERR_NOT_SUPPORT")}return E},adapters:SK};function cK(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new Vk(null,p)}function rJ(p){return cK(p),p.headers=Ff.from(p.headers),p.data=iK.call(p,p.transformRequest),["post","put","patch"].indexOf(p.method)!==-1&&p.headers.setContentType("application/x-www-form-urlencoded",!1),WQ.getAdapter(p.adapter||K5.adapter)(p).then(function(E){return cK(p),E.data=iK.call(p,p.transformResponse,E),E.headers=Ff.from(E.headers),E},function(E){return FQ(E)||(cK(p),E&&E.response&&(E.response.data=iK.call(p,p.transformResponse,E.response),E.response.headers=Ff.from(E.response.headers))),Promise.reject(E)})}const ZQ="1.7.9",p7={};["object","boolean","number","function","string","symbol"].forEach((p,g)=>{p7[p]=function(E){return typeof E===p||"a"+(g<1?"n ":" ")+p}});const aJ={};p7.transitional=function(g,w,E){function N(V,K){return"[Axios v"+ZQ+"] Transitional option '"+V+"'"+K+(E?". "+E:"")}return(V,K,j)=>{if(g===!1)throw new As(N(K," has been removed"+(w?" in "+w:"")),As.ERR_DEPRECATED);return w&&!aJ[K]&&(aJ[K]=!0,console.warn(N(K," has been deprecated since v"+w+" and will be removed in the near future"))),g?g(V,K,j):!0}};p7.spelling=function(g){return(w,E)=>(console.warn(`${E} is likely a misspelling of ${g}`),!0)};function fne(p,g,w){if(typeof p!="object")throw new As("options must be an object",As.ERR_BAD_OPTION_VALUE);const E=Object.keys(p);let N=E.length;for(;N-- >0;){const V=E[N],K=g[V];if(K){const j=p[V],ue=j===void 0||K(j,V,p);if(ue!==!0)throw new As("option "+V+" must be "+ue,As.ERR_BAD_OPTION_VALUE);continue}if(w!==!0)throw new As("Unknown option "+V,As.ERR_BAD_OPTION)}}const B$={assertOptions:fne,validators:p7},w1=B$.validators;class uS{constructor(g){this.defaults=g,this.interceptors={request:new XX,response:new XX}}async request(g,w){try{return await this._request(g,w)}catch(E){if(E instanceof Error){let N={};Error.captureStackTrace?Error.captureStackTrace(N):N=new Error;const V=N.stack?N.stack.replace(/^.+\n/,""):"";try{E.stack?V&&!String(E.stack).endsWith(V.replace(/^.+\n.+\n/,""))&&(E.stack+=`
`+V):E.stack=V}catch{}}throw E}}_request(g,w){typeof g=="string"?(w=w||{},w.url=g):w=g||{},w=fS(this.defaults,w);const{transitional:E,paramsSerializer:N,headers:V}=w;E!==void 0&&B$.assertOptions(E,{silentJSONParsing:w1.transitional(w1.boolean),forcedJSONParsing:w1.transitional(w1.boolean),clarifyTimeoutError:w1.transitional(w1.boolean)},!1),N!=null&&(Rt.isFunction(N)?w.paramsSerializer={serialize:N}:B$.assertOptions(N,{encode:w1.function,serialize:w1.function},!0)),B$.assertOptions(w,{baseUrl:w1.spelling("baseURL"),withXsrfToken:w1.spelling("withXSRFToken")},!0),w.method=(w.method||this.defaults.method||"get").toLowerCase();let K=V&&Rt.merge(V.common,V[w.method]);V&&Rt.forEach(["delete","get","head","post","put","patch","common"],Pt=>{delete V[Pt]}),w.headers=Ff.concat(K,V);const j=[];let ue=!0;this.interceptors.request.forEach(function(Ct){typeof Ct.runWhen=="function"&&Ct.runWhen(w)===!1||(ue=ue&&Ct.synchronous,j.unshift(Ct.fulfilled,Ct.rejected))});const ge=[];this.interceptors.response.forEach(function(Ct){ge.push(Ct.fulfilled,Ct.rejected)});let Ce,Xe=0,Lt;if(!ue){const Pt=[rJ.bind(this),void 0];for(Pt.unshift.apply(Pt,j),Pt.push.apply(Pt,ge),Lt=Pt.length,Ce=Promise.resolve(w);Xe<Lt;)Ce=Ce.then(Pt[Xe++],Pt[Xe++]);return Ce}Lt=j.length;let Zt=w;for(Xe=0;Xe<Lt;){const Pt=j[Xe++],Ct=j[Xe++];try{Zt=Pt(Zt)}catch(Ne){Ct.call(this,Ne);break}}try{Ce=rJ.call(this,Zt)}catch(Pt){return Promise.reject(Pt)}for(Xe=0,Lt=ge.length;Xe<Lt;)Ce=Ce.then(ge[Xe++],ge[Xe++]);return Ce}getUri(g){g=fS(this.defaults,g);const w=HQ(g.baseURL,g.url);return IQ(w,g.params,g.paramsSerializer)}}Rt.forEach(["delete","get","head","options"],function(g){uS.prototype[g]=function(w,E){return this.request(fS(E||{},{method:g,url:w,data:(E||{}).data}))}});Rt.forEach(["post","put","patch"],function(g){function w(E){return function(V,K,j){return this.request(fS(j||{},{method:g,headers:E?{"Content-Type":"multipart/form-data"}:{},url:V,data:K}))}}uS.prototype[g]=w(),uS.prototype[g+"Form"]=w(!0)});class IK{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let w;this.promise=new Promise(function(V){w=V});const E=this;this.promise.then(N=>{if(!E._listeners)return;let V=E._listeners.length;for(;V-- >0;)E._listeners[V](N);E._listeners=null}),this.promise.then=N=>{let V;const K=new Promise(j=>{E.subscribe(j),V=j}).then(N);return K.cancel=function(){E.unsubscribe(V)},K},g(function(V,K,j){E.reason||(E.reason=new Vk(V,K,j),w(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const w=this._listeners.indexOf(g);w!==-1&&this._listeners.splice(w,1)}toAbortSignal(){const g=new AbortController,w=E=>{g.abort(E)};return this.subscribe(w),g.signal.unsubscribe=()=>this.unsubscribe(w),g.signal}static source(){let g;return{token:new IK(function(N){g=N}),cancel:g}}}function mne(p){return function(w){return p.apply(null,w)}}function hne(p){return Rt.isObject(p)&&p.isAxiosError===!0}const xK={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xK).forEach(([p,g])=>{xK[g]=p});function jQ(p){const g=new uS(p),w=xQ(uS.prototype.request,g);return Rt.extend(w,uS.prototype,g,{allOwnKeys:!0}),Rt.extend(w,g,null,{allOwnKeys:!0}),w.create=function(N){return jQ(fS(p,N))},w}const Zc=jQ(K5);Zc.Axios=uS;Zc.CanceledError=Vk;Zc.CancelToken=IK;Zc.isCancel=FQ;Zc.VERSION=ZQ;Zc.toFormData=h7;Zc.AxiosError=As;Zc.Cancel=Zc.CanceledError;Zc.all=function(g){return Promise.all(g)};Zc.spread=mne;Zc.isAxiosError=hne;Zc.mergeConfig=fS;Zc.AxiosHeaders=Ff;Zc.formToJSON=p=>LQ(Rt.isHTMLForm(p)?new FormData(p):p);Zc.getAdapter=WQ.getAdapter;Zc.HttpStatusCode=xK;Zc.default=Zc;window.axios=Zc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var gne=function(){function p(g,w){w===void 0&&(w=[]),this._eventType=g,this._eventFunctions=w}return p.prototype.init=function(){var g=this;this._eventFunctions.forEach(function(w){typeof window<"u"&&window.addEventListener(g._eventType,w)})},p}(),pne=function(){function p(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return p.prototype.addInstance=function(g,w,E,N){if(N===void 0&&(N=!1),!this._instances[g])return console.warn("Flowbite: Component ".concat(g," does not exist.")),!1;if(this._instances[g][E]&&!N){console.warn("Flowbite: Instance with ID ".concat(E," already exists."));return}N&&this._instances[g][E]&&this._instances[g][E].destroyAndRemoveInstance(),this._instances[g][E||this._generateRandomId()]=w},p.prototype.getAllInstances=function(){return this._instances},p.prototype.getInstances=function(g){return this._instances[g]?this._instances[g]:(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p.prototype.getInstance=function(g,w){if(this._componentAndInstanceCheck(g,w)){if(!this._instances[g][w]){console.warn("Flowbite: Instance with ID ".concat(w," does not exist."));return}return this._instances[g][w]}},p.prototype.destroyAndRemoveInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&(this.destroyInstanceObject(g,w),this.removeInstance(g,w))},p.prototype.removeInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&delete this._instances[g][w]},p.prototype.destroyInstanceObject=function(g,w){this._componentAndInstanceCheck(g,w)&&this._instances[g][w].destroy()},p.prototype.instanceExists=function(g,w){return!(!this._instances[g]||!this._instances[g][w])},p.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},p.prototype._componentAndInstanceCheck=function(g,w){return this._instances[g]?this._instances[g][w]?!0:(console.warn("Flowbite: Instance with ID ".concat(w," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p}(),Xs=new pne;typeof window<"u"&&(window.FlowbiteInstances=Xs);var V$=function(){return V$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},V$.apply(this,arguments)},U$={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},bne={id:null,override:!0},qQ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=U$),N===void 0&&(N=bne),this._instanceId=N.id?N.id:g.id,this._accordionEl=g,this._items=w,this._options=V$(V$({},U$),E),this._initialized=!1,this.init(),Xs.addInstance("Accordion",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.forEach(function(w){w.active&&g.open(w.id);var E=function(){g.toggle(w.id)};w.triggerEl.addEventListener("click",E),w.clickHandler=E}),this._initialized=!0)},p.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(g){g.triggerEl.removeEventListener("click",g.clickHandler),delete g.clickHandler}),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Accordion",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.open=function(g){var w,E,N=this,V=this.getItem(g);this._options.alwaysOpen||this._items.map(function(K){var j,ue;K!==V&&((j=K.triggerEl.classList).remove.apply(j,N._options.activeClasses.split(" ")),(ue=K.triggerEl.classList).add.apply(ue,N._options.inactiveClasses.split(" ")),K.targetEl.classList.add("hidden"),K.triggerEl.setAttribute("aria-expanded","false"),K.active=!1,K.iconEl&&K.iconEl.classList.add("rotate-180"))}),(w=V.triggerEl.classList).add.apply(w,this._options.activeClasses.split(" ")),(E=V.triggerEl.classList).remove.apply(E,this._options.inactiveClasses.split(" ")),V.triggerEl.setAttribute("aria-expanded","true"),V.targetEl.classList.remove("hidden"),V.active=!0,V.iconEl&&V.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,V)},p.prototype.toggle=function(g){var w=this.getItem(g);w.active?this.close(g):this.open(g),this._options.onToggle(this,w)},p.prototype.close=function(g){var w,E,N=this.getItem(g);(w=N.triggerEl.classList).remove.apply(w,this._options.activeClasses.split(" ")),(E=N.triggerEl.classList).add.apply(E,this._options.inactiveClasses.split(" ")),N.targetEl.classList.add("hidden"),N.triggerEl.setAttribute("aria-expanded","false"),N.active=!1,N.iconEl&&N.iconEl.classList.add("rotate-180"),this._options.onClose(this,N)},p.prototype.updateOnOpen=function(g){this._options.onOpen=g},p.prototype.updateOnClose=function(g){this._options.onClose=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function BK(){document.querySelectorAll("[data-accordion]").forEach(function(p){var g=p.getAttribute("data-accordion"),w=p.getAttribute("data-active-classes"),E=p.getAttribute("data-inactive-classes"),N=[];p.querySelectorAll("[data-accordion-target]").forEach(function(V){if(V.closest("[data-accordion]")===p){var K={id:V.getAttribute("data-accordion-target"),triggerEl:V,targetEl:document.querySelector(V.getAttribute("data-accordion-target")),iconEl:V.querySelector("[data-accordion-icon]"),active:V.getAttribute("aria-expanded")==="true"};N.push(K)}}),new qQ(p,N,{alwaysOpen:g==="open",activeClasses:w||U$.activeClasses,inactiveClasses:E||U$.inactiveClasses})})}typeof window<"u"&&(window.Accordion=qQ,window.initAccordions=BK);var W$=function(){return W$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},W$.apply(this,arguments)},iJ={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},vne={id:null,override:!0},EK=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=iJ),N===void 0&&(N=vne),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=W$(W$({},iJ),E),this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Collapse",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){g.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Collapse",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},p.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},p.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},p.prototype.updateOnCollapse=function(g){this._options.onCollapse=g},p.prototype.updateOnExpand=function(g){this._options.onExpand=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function LK(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(p){var g=p.getAttribute("data-collapse-toggle"),w=document.getElementById(g);w?Xs.instanceExists("Collapse",w.getAttribute("id"))?new EK(w,p,{},{id:w.getAttribute("id")+"_"+Xs._generateRandomId()}):new EK(w,p):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=EK,window.initCollapses=LK);var iS=function(){return iS=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},iS.apply(this,arguments)},L$={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},yne={id:null,override:!0},GQ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=L$),N===void 0&&(N=yne),this._instanceId=N.id?N.id:g.id,this._carouselEl=g,this._items=w,this._options=iS(iS(iS({},L$),E),{indicators:iS(iS({},L$.indicators),E.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Xs.addInstance("Carousel",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.map(function(w){w.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(w,E){w.el.addEventListener("click",function(){g.slideTo(E)})}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Carousel",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items[g]},p.prototype.slideTo=function(g){var w=this._items[g],E={left:w.position===0?this._items[this._items.length-1]:this._items[w.position-1],middle:w,right:w.position===this._items.length-1?this._items[0]:this._items[w.position+1]};this._rotate(E),this._setActiveItem(w),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},p.prototype.next=function(){var g=this.getActiveItem(),w=null;g.position===this._items.length-1?w=this._items[0]:w=this._items[g.position+1],this.slideTo(w.position),this._options.onNext(this)},p.prototype.prev=function(){var g=this.getActiveItem(),w=null;g.position===0?w=this._items[this._items.length-1]:w=this._items[g.position-1],this.slideTo(w.position),this._options.onPrev(this)},p.prototype._rotate=function(g){if(this._items.map(function(w){w.el.classList.add("hidden")}),this._items.length===1){g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-20");return}g.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),g.left.el.classList.add("-translate-x-full","z-10"),g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-30"),g.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),g.right.el.classList.add("translate-x-full","z-20")},p.prototype.cycle=function(){var g=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){g.next()},this._intervalDuration))},p.prototype.pause=function(){clearInterval(this._intervalInstance)},p.prototype.getActiveItem=function(){return this._activeItem},p.prototype._setActiveItem=function(g){var w,E,N=this;this._activeItem=g;var V=g.position;this._indicators.length&&(this._indicators.map(function(K){var j,ue;K.el.setAttribute("aria-current","false"),(j=K.el.classList).remove.apply(j,N._options.indicators.activeClasses.split(" ")),(ue=K.el.classList).add.apply(ue,N._options.indicators.inactiveClasses.split(" "))}),(w=this._indicators[V].el.classList).add.apply(w,this._options.indicators.activeClasses.split(" ")),(E=this._indicators[V].el.classList).remove.apply(E,this._options.indicators.inactiveClasses.split(" ")),this._indicators[V].el.setAttribute("aria-current","true"))},p.prototype.updateOnNext=function(g){this._options.onNext=g},p.prototype.updateOnPrev=function(g){this._options.onPrev=g},p.prototype.updateOnChange=function(g){this._options.onChange=g},p}();function FK(){document.querySelectorAll("[data-carousel]").forEach(function(p){var g=p.getAttribute("data-carousel-interval"),w=p.getAttribute("data-carousel")==="slide",E=[],N=0;p.querySelectorAll("[data-carousel-item]").length&&Array.from(p.querySelectorAll("[data-carousel-item]")).map(function(ge,Ce){E.push({position:Ce,el:ge}),ge.getAttribute("data-carousel-item")==="active"&&(N=Ce)});var V=[];p.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(p.querySelectorAll("[data-carousel-slide-to]")).map(function(ge){V.push({position:parseInt(ge.getAttribute("data-carousel-slide-to")),el:ge})});var K=new GQ(p,E,{defaultPosition:N,indicators:{items:V},interval:g||L$.interval});w&&K.cycle();var j=p.querySelector("[data-carousel-next]"),ue=p.querySelector("[data-carousel-prev]");j&&j.addEventListener("click",function(){K.next()}),ue&&ue.addEventListener("click",function(){K.prev()})})}typeof window<"u"&&(window.Carousel=GQ,window.initCarousels=FK);var Z$=function(){return Z$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Z$.apply(this,arguments)},cJ={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},wne={id:null,override:!0},KQ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=cJ),N===void 0&&(N=wne),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Z$(Z$({},cJ),E),this._initialized=!1,this.init(),Xs.addInstance("Dismiss",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){g.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Dismiss",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){g._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function $K(){document.querySelectorAll("[data-dismiss-target]").forEach(function(p){var g=p.getAttribute("data-dismiss-target"),w=document.querySelector(g);w?new KQ(w,p):console.error('The dismiss element with id "'.concat(g,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=KQ,window.initDismisses=$K);var $f="top",Dh="bottom",Rh="right",Hf="left",HK="auto",Y5=[$f,Dh,Rh,Hf],Bk="start",U5="end",Cne="clippingParents",YQ="viewport",P5="popper",Sne="reference",lJ=Y5.reduce(function(p,g){return p.concat([g+"-"+Bk,g+"-"+U5])},[]),XQ=[].concat(Y5,[HK]).reduce(function(p,g){return p.concat([g,g+"-"+Bk,g+"-"+U5])},[]),xne="beforeRead",Ene="read",_ne="afterRead",Tne="beforeMain",kne="main",Ane="afterMain",One="beforeWrite",Dne="write",Rne="afterWrite",Mne=[xne,Ene,_ne,Tne,kne,Ane,One,Dne,Rne];function S1(p){return p?(p.nodeName||"").toLowerCase():null}function Im(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var g=p.ownerDocument;return g&&g.defaultView||window}return p}function mS(p){var g=Im(p).Element;return p instanceof g||p instanceof Element}function Oh(p){var g=Im(p).HTMLElement;return p instanceof g||p instanceof HTMLElement}function zK(p){if(typeof ShadowRoot>"u")return!1;var g=Im(p).ShadowRoot;return p instanceof g||p instanceof ShadowRoot}function Nne(p){var g=p.state;Object.keys(g.elements).forEach(function(w){var E=g.styles[w]||{},N=g.attributes[w]||{},V=g.elements[w];!Oh(V)||!S1(V)||(Object.assign(V.style,E),Object.keys(N).forEach(function(K){var j=N[K];j===!1?V.removeAttribute(K):V.setAttribute(K,j===!0?"":j)}))})}function Pne(p){var g=p.state,w={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,w.popper),g.styles=w,g.elements.arrow&&Object.assign(g.elements.arrow.style,w.arrow),function(){Object.keys(g.elements).forEach(function(E){var N=g.elements[E],V=g.attributes[E]||{},K=Object.keys(g.styles.hasOwnProperty(E)?g.styles[E]:w[E]),j=K.reduce(function(ue,ge){return ue[ge]="",ue},{});!Oh(N)||!S1(N)||(Object.assign(N.style,j),Object.keys(V).forEach(function(ue){N.removeAttribute(ue)}))})}}const Ine={name:"applyStyles",enabled:!0,phase:"write",fn:Nne,effect:Pne,requires:["computeStyles"]};function C1(p){return p.split("-")[0]}var dS=Math.max,j$=Math.min,Lk=Math.round;function _K(){var p=navigator.userAgentData;return p!=null&&p.brands&&Array.isArray(p.brands)?p.brands.map(function(g){return g.brand+"/"+g.version}).join(" "):navigator.userAgent}function JQ(){return!/^((?!chrome|android).)*safari/i.test(_K())}function Fk(p,g,w){g===void 0&&(g=!1),w===void 0&&(w=!1);var E=p.getBoundingClientRect(),N=1,V=1;g&&Oh(p)&&(N=p.offsetWidth>0&&Lk(E.width)/p.offsetWidth||1,V=p.offsetHeight>0&&Lk(E.height)/p.offsetHeight||1);var K=mS(p)?Im(p):window,j=K.visualViewport,ue=!JQ()&&w,ge=(E.left+(ue&&j?j.offsetLeft:0))/N,Ce=(E.top+(ue&&j?j.offsetTop:0))/V,Xe=E.width/N,Lt=E.height/V;return{width:Xe,height:Lt,top:Ce,right:ge+Xe,bottom:Ce+Lt,left:ge,x:ge,y:Ce}}function VK(p){var g=Fk(p),w=p.offsetWidth,E=p.offsetHeight;return Math.abs(g.width-w)<=1&&(w=g.width),Math.abs(g.height-E)<=1&&(E=g.height),{x:p.offsetLeft,y:p.offsetTop,width:w,height:E}}function QQ(p,g){var w=g.getRootNode&&g.getRootNode();if(p.contains(g))return!0;if(w&&zK(w)){var E=g;do{if(E&&p.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function p0(p){return Im(p).getComputedStyle(p)}function Bne(p){return["table","td","th"].indexOf(S1(p))>=0}function o2(p){return((mS(p)?p.ownerDocument:p.document)||window.document).documentElement}function b7(p){return S1(p)==="html"?p:p.assignedSlot||p.parentNode||(zK(p)?p.host:null)||o2(p)}function uJ(p){return!Oh(p)||p0(p).position==="fixed"?null:p.offsetParent}function Lne(p){var g=/firefox/i.test(_K()),w=/Trident/i.test(_K());if(w&&Oh(p)){var E=p0(p);if(E.position==="fixed")return null}var N=b7(p);for(zK(N)&&(N=N.host);Oh(N)&&["html","body"].indexOf(S1(N))<0;){var V=p0(N);if(V.transform!=="none"||V.perspective!=="none"||V.contain==="paint"||["transform","perspective"].indexOf(V.willChange)!==-1||g&&V.willChange==="filter"||g&&V.filter&&V.filter!=="none")return N;N=N.parentNode}return null}function X5(p){for(var g=Im(p),w=uJ(p);w&&Bne(w)&&p0(w).position==="static";)w=uJ(w);return w&&(S1(w)==="html"||S1(w)==="body"&&p0(w).position==="static")?g:w||Lne(p)||g}function UK(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function L5(p,g,w){return dS(p,j$(g,w))}function Fne(p,g,w){var E=L5(p,g,w);return E>w?w:E}function eee(){return{top:0,right:0,bottom:0,left:0}}function tee(p){return Object.assign({},eee(),p)}function nee(p,g){return g.reduce(function(w,E){return w[E]=p,w},{})}var $ne=function(g,w){return g=typeof g=="function"?g(Object.assign({},w.rects,{placement:w.placement})):g,tee(typeof g!="number"?g:nee(g,Y5))};function Hne(p){var g,w=p.state,E=p.name,N=p.options,V=w.elements.arrow,K=w.modifiersData.popperOffsets,j=C1(w.placement),ue=UK(j),ge=[Hf,Rh].indexOf(j)>=0,Ce=ge?"height":"width";if(!(!V||!K)){var Xe=$ne(N.padding,w),Lt=VK(V),Zt=ue==="y"?$f:Hf,Pt=ue==="y"?Dh:Rh,Ct=w.rects.reference[Ce]+w.rects.reference[ue]-K[ue]-w.rects.popper[Ce],Ne=K[ue]-w.rects.reference[ue],ln=X5(V),xt=ln?ue==="y"?ln.clientHeight||0:ln.clientWidth||0:0,ce=Ct/2-Ne/2,Je=Xe[Zt],Dn=xt-Lt[Ce]-Xe[Pt],Gt=xt/2-Lt[Ce]/2+ce,oe=L5(Je,Gt,Dn),Xt=ue;w.modifiersData[E]=(g={},g[Xt]=oe,g.centerOffset=oe-Gt,g)}}function zne(p){var g=p.state,w=p.options,E=w.element,N=E===void 0?"[data-popper-arrow]":E;N!=null&&(typeof N=="string"&&(N=g.elements.popper.querySelector(N),!N)||QQ(g.elements.popper,N)&&(g.elements.arrow=N))}const Vne={name:"arrow",enabled:!0,phase:"main",fn:Hne,effect:zne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $k(p){return p.split("-")[1]}var Une={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wne(p,g){var w=p.x,E=p.y,N=g.devicePixelRatio||1;return{x:Lk(w*N)/N||0,y:Lk(E*N)/N||0}}function dJ(p){var g,w=p.popper,E=p.popperRect,N=p.placement,V=p.variation,K=p.offsets,j=p.position,ue=p.gpuAcceleration,ge=p.adaptive,Ce=p.roundOffsets,Xe=p.isFixed,Lt=K.x,Zt=Lt===void 0?0:Lt,Pt=K.y,Ct=Pt===void 0?0:Pt,Ne=typeof Ce=="function"?Ce({x:Zt,y:Ct}):{x:Zt,y:Ct};Zt=Ne.x,Ct=Ne.y;var ln=K.hasOwnProperty("x"),xt=K.hasOwnProperty("y"),ce=Hf,Je=$f,Dn=window;if(ge){var Gt=X5(w),oe="clientHeight",Xt="clientWidth";if(Gt===Im(w)&&(Gt=o2(w),p0(Gt).position!=="static"&&j==="absolute"&&(oe="scrollHeight",Xt="scrollWidth")),Gt=Gt,N===$f||(N===Hf||N===Rh)&&V===U5){Je=Dh;var In=Xe&&Gt===Dn&&Dn.visualViewport?Dn.visualViewport.height:Gt[oe];Ct-=In-E.height,Ct*=ue?1:-1}if(N===Hf||(N===$f||N===Dh)&&V===U5){ce=Rh;var en=Xe&&Gt===Dn&&Dn.visualViewport?Dn.visualViewport.width:Gt[Xt];Zt-=en-E.width,Zt*=ue?1:-1}}var Fe=Object.assign({position:j},ge&&Une),ve=Ce===!0?Wne({x:Zt,y:Ct},Im(w)):{x:Zt,y:Ct};if(Zt=ve.x,Ct=ve.y,ue){var so;return Object.assign({},Fe,(so={},so[Je]=xt?"0":"",so[ce]=ln?"0":"",so.transform=(Dn.devicePixelRatio||1)<=1?"translate("+Zt+"px, "+Ct+"px)":"translate3d("+Zt+"px, "+Ct+"px, 0)",so))}return Object.assign({},Fe,(g={},g[Je]=xt?Ct+"px":"",g[ce]=ln?Zt+"px":"",g.transform="",g))}function Zne(p){var g=p.state,w=p.options,E=w.gpuAcceleration,N=E===void 0?!0:E,V=w.adaptive,K=V===void 0?!0:V,j=w.roundOffsets,ue=j===void 0?!0:j,ge={placement:C1(g.placement),variation:$k(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:N,isFixed:g.options.strategy==="fixed"};g.modifiersData.popperOffsets!=null&&(g.styles.popper=Object.assign({},g.styles.popper,dJ(Object.assign({},ge,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:K,roundOffsets:ue})))),g.modifiersData.arrow!=null&&(g.styles.arrow=Object.assign({},g.styles.arrow,dJ(Object.assign({},ge,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ue})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})}const jne={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Zne,data:{}};var A$={passive:!0};function qne(p){var g=p.state,w=p.instance,E=p.options,N=E.scroll,V=N===void 0?!0:N,K=E.resize,j=K===void 0?!0:K,ue=Im(g.elements.popper),ge=[].concat(g.scrollParents.reference,g.scrollParents.popper);return V&&ge.forEach(function(Ce){Ce.addEventListener("scroll",w.update,A$)}),j&&ue.addEventListener("resize",w.update,A$),function(){V&&ge.forEach(function(Ce){Ce.removeEventListener("scroll",w.update,A$)}),j&&ue.removeEventListener("resize",w.update,A$)}}const Gne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:qne,data:{}};var Kne={left:"right",right:"left",bottom:"top",top:"bottom"};function F$(p){return p.replace(/left|right|bottom|top/g,function(g){return Kne[g]})}var Yne={start:"end",end:"start"};function fJ(p){return p.replace(/start|end/g,function(g){return Yne[g]})}function WK(p){var g=Im(p),w=g.pageXOffset,E=g.pageYOffset;return{scrollLeft:w,scrollTop:E}}function ZK(p){return Fk(o2(p)).left+WK(p).scrollLeft}function Xne(p,g){var w=Im(p),E=o2(p),N=w.visualViewport,V=E.clientWidth,K=E.clientHeight,j=0,ue=0;if(N){V=N.width,K=N.height;var ge=JQ();(ge||!ge&&g==="fixed")&&(j=N.offsetLeft,ue=N.offsetTop)}return{width:V,height:K,x:j+ZK(p),y:ue}}function Jne(p){var g,w=o2(p),E=WK(p),N=(g=p.ownerDocument)==null?void 0:g.body,V=dS(w.scrollWidth,w.clientWidth,N?N.scrollWidth:0,N?N.clientWidth:0),K=dS(w.scrollHeight,w.clientHeight,N?N.scrollHeight:0,N?N.clientHeight:0),j=-E.scrollLeft+ZK(p),ue=-E.scrollTop;return p0(N||w).direction==="rtl"&&(j+=dS(w.clientWidth,N?N.clientWidth:0)-V),{width:V,height:K,x:j,y:ue}}function jK(p){var g=p0(p),w=g.overflow,E=g.overflowX,N=g.overflowY;return/auto|scroll|overlay|hidden/.test(w+N+E)}function oee(p){return["html","body","#document"].indexOf(S1(p))>=0?p.ownerDocument.body:Oh(p)&&jK(p)?p:oee(b7(p))}function F5(p,g){var w;g===void 0&&(g=[]);var E=oee(p),N=E===((w=p.ownerDocument)==null?void 0:w.body),V=Im(E),K=N?[V].concat(V.visualViewport||[],jK(E)?E:[]):E,j=g.concat(K);return N?j:j.concat(F5(b7(K)))}function TK(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function Qne(p,g){var w=Fk(p,!1,g==="fixed");return w.top=w.top+p.clientTop,w.left=w.left+p.clientLeft,w.bottom=w.top+p.clientHeight,w.right=w.left+p.clientWidth,w.width=p.clientWidth,w.height=p.clientHeight,w.x=w.left,w.y=w.top,w}function mJ(p,g,w){return g===YQ?TK(Xne(p,w)):mS(g)?Qne(g,w):TK(Jne(o2(p)))}function eoe(p){var g=F5(b7(p)),w=["absolute","fixed"].indexOf(p0(p).position)>=0,E=w&&Oh(p)?X5(p):p;return mS(E)?g.filter(function(N){return mS(N)&&QQ(N,E)&&S1(N)!=="body"}):[]}function toe(p,g,w,E){var N=g==="clippingParents"?eoe(p):[].concat(g),V=[].concat(N,[w]),K=V[0],j=V.reduce(function(ue,ge){var Ce=mJ(p,ge,E);return ue.top=dS(Ce.top,ue.top),ue.right=j$(Ce.right,ue.right),ue.bottom=j$(Ce.bottom,ue.bottom),ue.left=dS(Ce.left,ue.left),ue},mJ(p,K,E));return j.width=j.right-j.left,j.height=j.bottom-j.top,j.x=j.left,j.y=j.top,j}function see(p){var g=p.reference,w=p.element,E=p.placement,N=E?C1(E):null,V=E?$k(E):null,K=g.x+g.width/2-w.width/2,j=g.y+g.height/2-w.height/2,ue;switch(N){case $f:ue={x:K,y:g.y-w.height};break;case Dh:ue={x:K,y:g.y+g.height};break;case Rh:ue={x:g.x+g.width,y:j};break;case Hf:ue={x:g.x-w.width,y:j};break;default:ue={x:g.x,y:g.y}}var ge=N?UK(N):null;if(ge!=null){var Ce=ge==="y"?"height":"width";switch(V){case Bk:ue[ge]=ue[ge]-(g[Ce]/2-w[Ce]/2);break;case U5:ue[ge]=ue[ge]+(g[Ce]/2-w[Ce]/2);break}}return ue}function W5(p,g){g===void 0&&(g={});var w=g,E=w.placement,N=E===void 0?p.placement:E,V=w.strategy,K=V===void 0?p.strategy:V,j=w.boundary,ue=j===void 0?Cne:j,ge=w.rootBoundary,Ce=ge===void 0?YQ:ge,Xe=w.elementContext,Lt=Xe===void 0?P5:Xe,Zt=w.altBoundary,Pt=Zt===void 0?!1:Zt,Ct=w.padding,Ne=Ct===void 0?0:Ct,ln=tee(typeof Ne!="number"?Ne:nee(Ne,Y5)),xt=Lt===P5?Sne:P5,ce=p.rects.popper,Je=p.elements[Pt?xt:Lt],Dn=toe(mS(Je)?Je:Je.contextElement||o2(p.elements.popper),ue,Ce,K),Gt=Fk(p.elements.reference),oe=see({reference:Gt,element:ce,strategy:"absolute",placement:N}),Xt=TK(Object.assign({},ce,oe)),In=Lt===P5?Xt:Gt,en={top:Dn.top-In.top+ln.top,bottom:In.bottom-Dn.bottom+ln.bottom,left:Dn.left-In.left+ln.left,right:In.right-Dn.right+ln.right},Fe=p.modifiersData.offset;if(Lt===P5&&Fe){var ve=Fe[N];Object.keys(en).forEach(function(so){var at=[Rh,Dh].indexOf(so)>=0?1:-1,it=[$f,Dh].indexOf(so)>=0?"y":"x";en[so]+=ve[it]*at})}return en}function noe(p,g){g===void 0&&(g={});var w=g,E=w.placement,N=w.boundary,V=w.rootBoundary,K=w.padding,j=w.flipVariations,ue=w.allowedAutoPlacements,ge=ue===void 0?XQ:ue,Ce=$k(E),Xe=Ce?j?lJ:lJ.filter(function(Pt){return $k(Pt)===Ce}):Y5,Lt=Xe.filter(function(Pt){return ge.indexOf(Pt)>=0});Lt.length===0&&(Lt=Xe);var Zt=Lt.reduce(function(Pt,Ct){return Pt[Ct]=W5(p,{placement:Ct,boundary:N,rootBoundary:V,padding:K})[C1(Ct)],Pt},{});return Object.keys(Zt).sort(function(Pt,Ct){return Zt[Pt]-Zt[Ct]})}function ooe(p){if(C1(p)===HK)return[];var g=F$(p);return[fJ(p),g,fJ(g)]}function soe(p){var g=p.state,w=p.options,E=p.name;if(!g.modifiersData[E]._skip){for(var N=w.mainAxis,V=N===void 0?!0:N,K=w.altAxis,j=K===void 0?!0:K,ue=w.fallbackPlacements,ge=w.padding,Ce=w.boundary,Xe=w.rootBoundary,Lt=w.altBoundary,Zt=w.flipVariations,Pt=Zt===void 0?!0:Zt,Ct=w.allowedAutoPlacements,Ne=g.options.placement,ln=C1(Ne),xt=ln===Ne,ce=ue||(xt||!Pt?[F$(Ne)]:ooe(Ne)),Je=[Ne].concat(ce).reduce(function(fn,io){return fn.concat(C1(io)===HK?noe(g,{placement:io,boundary:Ce,rootBoundary:Xe,padding:ge,flipVariations:Pt,allowedAutoPlacements:Ct}):io)},[]),Dn=g.rects.reference,Gt=g.rects.popper,oe=new Map,Xt=!0,In=Je[0],en=0;en<Je.length;en++){var Fe=Je[en],ve=C1(Fe),so=$k(Fe)===Bk,at=[$f,Dh].indexOf(ve)>=0,it=at?"width":"height",M=W5(g,{placement:Fe,boundary:Ce,rootBoundary:Xe,altBoundary:Lt,padding:ge}),Hn=at?so?Rh:Hf:so?Dh:$f;Dn[it]>Gt[it]&&(Hn=F$(Hn));var ft=F$(Hn),xo=[];if(V&&xo.push(M[ve]<=0),j&&xo.push(M[Hn]<=0,M[ft]<=0),xo.every(function(fn){return fn})){In=Fe,Xt=!1;break}oe.set(Fe,xo)}if(Xt)for(var yn=Pt?3:1,Ae=function(io){var $e=Je.find(function(pt){var W=oe.get(pt);if(W)return W.slice(0,io).every(function(Us){return Us})});if($e)return In=$e,"break"},wt=yn;wt>0;wt--){var Mn=Ae(wt);if(Mn==="break")break}g.placement!==In&&(g.modifiersData[E]._skip=!0,g.placement=In,g.reset=!0)}}const roe={name:"flip",enabled:!0,phase:"main",fn:soe,requiresIfExists:["offset"],data:{_skip:!1}};function hJ(p,g,w){return w===void 0&&(w={x:0,y:0}),{top:p.top-g.height-w.y,right:p.right-g.width+w.x,bottom:p.bottom-g.height+w.y,left:p.left-g.width-w.x}}function gJ(p){return[$f,Rh,Dh,Hf].some(function(g){return p[g]>=0})}function aoe(p){var g=p.state,w=p.name,E=g.rects.reference,N=g.rects.popper,V=g.modifiersData.preventOverflow,K=W5(g,{elementContext:"reference"}),j=W5(g,{altBoundary:!0}),ue=hJ(K,E),ge=hJ(j,N,V),Ce=gJ(ue),Xe=gJ(ge);g.modifiersData[w]={referenceClippingOffsets:ue,popperEscapeOffsets:ge,isReferenceHidden:Ce,hasPopperEscaped:Xe},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":Ce,"data-popper-escaped":Xe})}const ioe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:aoe};function coe(p,g,w){var E=C1(p),N=[Hf,$f].indexOf(E)>=0?-1:1,V=typeof w=="function"?w(Object.assign({},g,{placement:p})):w,K=V[0],j=V[1];return K=K||0,j=(j||0)*N,[Hf,Rh].indexOf(E)>=0?{x:j,y:K}:{x:K,y:j}}function loe(p){var g=p.state,w=p.options,E=p.name,N=w.offset,V=N===void 0?[0,0]:N,K=XQ.reduce(function(Ce,Xe){return Ce[Xe]=coe(Xe,g.rects,V),Ce},{}),j=K[g.placement],ue=j.x,ge=j.y;g.modifiersData.popperOffsets!=null&&(g.modifiersData.popperOffsets.x+=ue,g.modifiersData.popperOffsets.y+=ge),g.modifiersData[E]=K}const uoe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:loe};function doe(p){var g=p.state,w=p.name;g.modifiersData[w]=see({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})}const foe={name:"popperOffsets",enabled:!0,phase:"read",fn:doe,data:{}};function moe(p){return p==="x"?"y":"x"}function hoe(p){var g=p.state,w=p.options,E=p.name,N=w.mainAxis,V=N===void 0?!0:N,K=w.altAxis,j=K===void 0?!1:K,ue=w.boundary,ge=w.rootBoundary,Ce=w.altBoundary,Xe=w.padding,Lt=w.tether,Zt=Lt===void 0?!0:Lt,Pt=w.tetherOffset,Ct=Pt===void 0?0:Pt,Ne=W5(g,{boundary:ue,rootBoundary:ge,padding:Xe,altBoundary:Ce}),ln=C1(g.placement),xt=$k(g.placement),ce=!xt,Je=UK(ln),Dn=moe(Je),Gt=g.modifiersData.popperOffsets,oe=g.rects.reference,Xt=g.rects.popper,In=typeof Ct=="function"?Ct(Object.assign({},g.rects,{placement:g.placement})):Ct,en=typeof In=="number"?{mainAxis:In,altAxis:In}:Object.assign({mainAxis:0,altAxis:0},In),Fe=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,ve={x:0,y:0};if(Gt){if(V){var so,at=Je==="y"?$f:Hf,it=Je==="y"?Dh:Rh,M=Je==="y"?"height":"width",Hn=Gt[Je],ft=Hn+Ne[at],xo=Hn-Ne[it],yn=Zt?-Xt[M]/2:0,Ae=xt===Bk?oe[M]:Xt[M],wt=xt===Bk?-Xt[M]:-oe[M],Mn=g.elements.arrow,fn=Zt&&Mn?VK(Mn):{width:0,height:0},io=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:eee(),$e=io[at],pt=io[it],W=L5(0,oe[M],fn[M]),Us=ce?oe[M]/2-yn-W-$e-en.mainAxis:Ae-W-$e-en.mainAxis,no=ce?-oe[M]/2+yn+W+pt+en.mainAxis:wt+W+pt+en.mainAxis,_o=g.elements.arrow&&X5(g.elements.arrow),zo=_o?Je==="y"?_o.clientTop||0:_o.clientLeft||0:0,pi=(so=Fe==null?void 0:Fe[Je])!=null?so:0,et=Hn+Us-pi-zo,_t=Hn+no-pi,dt=L5(Zt?j$(ft,et):ft,Hn,Zt?dS(xo,_t):xo);Gt[Je]=dt,ve[Je]=dt-Hn}if(j){var xe,Ao=Je==="x"?$f:Hf,Oo=Je==="x"?Dh:Rh,Kt=Gt[Dn],is=Dn==="y"?"height":"width",Fo=Kt+Ne[Ao],zr=Kt-Ne[Oo],Vo=[$f,Hf].indexOf(ln)!==-1,Ws=(xe=Fe==null?void 0:Fe[Dn])!=null?xe:0,oi=Vo?Fo:Kt-oe[is]-Xt[is]-Ws+en.altAxis,_s=Vo?Kt+oe[is]+Xt[is]-Ws-en.altAxis:zr,Ss=Zt&&Vo?Fne(oi,Kt,_s):L5(Zt?oi:Fo,Kt,Zt?_s:zr);Gt[Dn]=Ss,ve[Dn]=Ss-Kt}g.modifiersData[E]=ve}}const goe={name:"preventOverflow",enabled:!0,phase:"main",fn:hoe,requiresIfExists:["offset"]};function poe(p){return{scrollLeft:p.scrollLeft,scrollTop:p.scrollTop}}function boe(p){return p===Im(p)||!Oh(p)?WK(p):poe(p)}function voe(p){var g=p.getBoundingClientRect(),w=Lk(g.width)/p.offsetWidth||1,E=Lk(g.height)/p.offsetHeight||1;return w!==1||E!==1}function yoe(p,g,w){w===void 0&&(w=!1);var E=Oh(g),N=Oh(g)&&voe(g),V=o2(g),K=Fk(p,N,w),j={scrollLeft:0,scrollTop:0},ue={x:0,y:0};return(E||!E&&!w)&&((S1(g)!=="body"||jK(V))&&(j=boe(g)),Oh(g)?(ue=Fk(g,!0),ue.x+=g.clientLeft,ue.y+=g.clientTop):V&&(ue.x=ZK(V))),{x:K.left+j.scrollLeft-ue.x,y:K.top+j.scrollTop-ue.y,width:K.width,height:K.height}}function woe(p){var g=new Map,w=new Set,E=[];p.forEach(function(V){g.set(V.name,V)});function N(V){w.add(V.name);var K=[].concat(V.requires||[],V.requiresIfExists||[]);K.forEach(function(j){if(!w.has(j)){var ue=g.get(j);ue&&N(ue)}}),E.push(V)}return p.forEach(function(V){w.has(V.name)||N(V)}),E}function Coe(p){var g=woe(p);return Mne.reduce(function(w,E){return w.concat(g.filter(function(N){return N.phase===E}))},[])}function Soe(p){var g;return function(){return g||(g=new Promise(function(w){Promise.resolve().then(function(){g=void 0,w(p())})})),g}}function xoe(p){var g=p.reduce(function(w,E){var N=w[E.name];return w[E.name]=N?Object.assign({},N,E,{options:Object.assign({},N.options,E.options),data:Object.assign({},N.data,E.data)}):E,w},{});return Object.keys(g).map(function(w){return g[w]})}var pJ={placement:"bottom",modifiers:[],strategy:"absolute"};function bJ(){for(var p=arguments.length,g=new Array(p),w=0;w<p;w++)g[w]=arguments[w];return!g.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function Eoe(p){p===void 0&&(p={});var g=p,w=g.defaultModifiers,E=w===void 0?[]:w,N=g.defaultOptions,V=N===void 0?pJ:N;return function(j,ue,ge){ge===void 0&&(ge=V);var Ce={placement:"bottom",orderedModifiers:[],options:Object.assign({},pJ,V),modifiersData:{},elements:{reference:j,popper:ue},attributes:{},styles:{}},Xe=[],Lt=!1,Zt={state:Ce,setOptions:function(ln){var xt=typeof ln=="function"?ln(Ce.options):ln;Ct(),Ce.options=Object.assign({},V,Ce.options,xt),Ce.scrollParents={reference:mS(j)?F5(j):j.contextElement?F5(j.contextElement):[],popper:F5(ue)};var ce=Coe(xoe([].concat(E,Ce.options.modifiers)));return Ce.orderedModifiers=ce.filter(function(Je){return Je.enabled}),Pt(),Zt.update()},forceUpdate:function(){if(!Lt){var ln=Ce.elements,xt=ln.reference,ce=ln.popper;if(bJ(xt,ce)){Ce.rects={reference:yoe(xt,X5(ce),Ce.options.strategy==="fixed"),popper:VK(ce)},Ce.reset=!1,Ce.placement=Ce.options.placement,Ce.orderedModifiers.forEach(function(en){return Ce.modifiersData[en.name]=Object.assign({},en.data)});for(var Je=0;Je<Ce.orderedModifiers.length;Je++){if(Ce.reset===!0){Ce.reset=!1,Je=-1;continue}var Dn=Ce.orderedModifiers[Je],Gt=Dn.fn,oe=Dn.options,Xt=oe===void 0?{}:oe,In=Dn.name;typeof Gt=="function"&&(Ce=Gt({state:Ce,options:Xt,name:In,instance:Zt})||Ce)}}}},update:Soe(function(){return new Promise(function(Ne){Zt.forceUpdate(),Ne(Ce)})}),destroy:function(){Ct(),Lt=!0}};if(!bJ(j,ue))return Zt;Zt.setOptions(ge).then(function(Ne){!Lt&&ge.onFirstUpdate&&ge.onFirstUpdate(Ne)});function Pt(){Ce.orderedModifiers.forEach(function(Ne){var ln=Ne.name,xt=Ne.options,ce=xt===void 0?{}:xt,Je=Ne.effect;if(typeof Je=="function"){var Dn=Je({state:Ce,name:ln,instance:Zt,options:ce}),Gt=function(){};Xe.push(Dn||Gt)}})}function Ct(){Xe.forEach(function(Ne){return Ne()}),Xe=[]}return Zt}}var _oe=[Gne,foe,jne,Ine,uoe,roe,goe,Vne,ioe],qK=Eoe({defaultModifiers:_oe}),Xy=function(){return Xy=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Xy.apply(this,arguments)},O$=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,V;E<N;E++)(V||!(E in g))&&(V||(V=Array.prototype.slice.call(g,0,E)),V[E]=g[E]);return p.concat(V||Array.prototype.slice.call(g))},Jy={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},Toe={id:null,override:!0},ree=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=Jy),N===void 0&&(N=Toe),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Xy(Xy({},Jy),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Dropdown",this,this._instanceId,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},p.prototype.destroy=function(){var g=this,w=this._getTriggerEvents();this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._clickHandler)}),this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.removeEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverHideHandler),g._targetEl.removeEventListener(E,g._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},p.prototype.removeInstance=function(){Xs.removeInstance("Dropdown",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._clickHandler=function(){g.toggle()},this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._clickHandler)}),this._hoverShowTriggerElHandler=function(E){E.type==="click"?g.toggle():setTimeout(function(){g.show()},g._options.delay)},this._hoverShowTargetElHandler=function(){g.show()},this._hoverHideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},g._options.delay)},this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.addEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverHideHandler),g._targetEl.addEventListener(E,g._hoverHideHandler)}))},p.prototype._createPopperInstance=function(){return qK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target,N=this._options.ignoreClickOutsideClass,V=!1;if(N){var K=document.querySelectorAll(".".concat(N));K.forEach(function(j){if(j.contains(E)){V=!0;return}})}E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&!V&&this.isVisible()&&this.hide()},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.isVisible=function(){return this._visible},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._targetEl.removeAttribute("aria-hidden"),this._popperInstance.setOptions(function(g){return Xy(Xy({},g),{modifiers:O$(O$([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._targetEl.setAttribute("aria-hidden","true"),this._popperInstance.setOptions(function(g){return Xy(Xy({},g),{modifiers:O$(O$([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function GK(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(p){var g=p.getAttribute("data-dropdown-toggle"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-dropdown-placement"),N=p.getAttribute("data-dropdown-offset-skidding"),V=p.getAttribute("data-dropdown-offset-distance"),K=p.getAttribute("data-dropdown-trigger"),j=p.getAttribute("data-dropdown-delay"),ue=p.getAttribute("data-dropdown-ignore-click-outside-class");new ree(w,p,{placement:E||Jy.placement,triggerType:K||Jy.triggerType,offsetSkidding:N?parseInt(N):Jy.offsetSkidding,offsetDistance:V?parseInt(V):Jy.offsetDistance,delay:j?parseInt(j):Jy.delay,ignoreClickOutsideClass:ue||Jy.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(g,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=ree,window.initDropdowns=GK);var q$=function(){return q$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},q$.apply(this,arguments)},G$={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},koe={id:null,override:!0},aee=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=G$),E===void 0&&(E=koe),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=q$(q$({},G$),w),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Xs.addInstance("Modal",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(w){g._targetEl.classList.add(w)}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Modal",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._createBackdrop=function(){var g;if(this._isHidden){var w=document.createElement("div");(g=w.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(w),this._backdropEl=w}},p.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},p.prototype._setupModalCloseEventListeners=function(){var g=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(w){g._handleOutsideClick(w.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._handleOutsideClick=function(g){(g===this._targetEl||g===this._backdropEl&&this.isVisible())&&this.hide()},p.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},p.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},p.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},p.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},p.prototype.isVisible=function(){return!this._isHidden},p.prototype.isHidden=function(){return this._isHidden},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function KK(){document.querySelectorAll("[data-modal-target]").forEach(function(p){var g=p.getAttribute("data-modal-target"),w=document.getElementById(g);if(w){var E=w.getAttribute("data-modal-placement"),N=w.getAttribute("data-modal-backdrop");new aee(w,{placement:E||G$.placement,backdrop:N||G$.backdrop})}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(p){var g=p.getAttribute("data-modal-toggle"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Modal",g);if(E){var N=function(){E.toggle()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(p){var g=p.getAttribute("data-modal-show"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Modal",g);if(E){var N=function(){E.show()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(p){var g=p.getAttribute("data-modal-hide"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Modal",g);if(E){var N=function(){E.hide()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=aee,window.initModals=KK);var K$=function(){return K$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},K$.apply(this,arguments)},cS={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},Aoe={id:null,override:!0},iee=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=cS),E===void 0&&(E=Aoe),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=K$(K$({},cS),w),this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Drawer",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(w){g._targetEl.classList.add(w)}),this._handleEscapeKey=function(w){w.key==="Escape"&&g.isVisible()&&g.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Drawer",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.add(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.add(w)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.remove(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.remove(w)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype._createBackdrop=function(){var g,w=this;if(!this._visible){var E=document.createElement("div");E.setAttribute("drawer-backdrop",""),(g=E.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(E),E.addEventListener("click",function(){w.hide()})}},p.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},p.prototype._getPlacementClasses=function(g){switch(g){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function YK(){document.querySelectorAll("[data-drawer-target]").forEach(function(p){var g=p.getAttribute("data-drawer-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-drawer-placement"),N=p.getAttribute("data-drawer-body-scrolling"),V=p.getAttribute("data-drawer-backdrop"),K=p.getAttribute("data-drawer-edge"),j=p.getAttribute("data-drawer-edge-offset");new iee(w,{placement:E||cS.placement,bodyScrolling:N?N==="true":cS.bodyScrolling,backdrop:V?V==="true":cS.backdrop,edge:K?K==="true":cS.edge,edgeOffset:j||cS.edgeOffset})}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(p){var g=p.getAttribute("data-drawer-toggle"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Drawer",g);if(E){var N=function(){E.toggle()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(p){var g=p.getAttribute("data-drawer-dismiss")?p.getAttribute("data-drawer-dismiss"):p.getAttribute("data-drawer-hide"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Drawer",g);if(E){var N=function(){E.hide()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(p){var g=p.getAttribute("data-drawer-show"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Drawer",g);if(E){var N=function(){E.show()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=iee,window.initDrawers=YK);var Y$=function(){return Y$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Y$.apply(this,arguments)},X$={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},Ooe={id:null,override:!0},cee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=X$),N===void 0&&(N=Ooe),this._instanceId=N.id?N.id:g.id,this._tabsEl=g,this._items=w,this._activeTab=E?this.getTab(E.defaultTabId):null,this._options=Y$(Y$({},X$),E),this._initialized=!1,this.init(),Xs.addInstance("Tabs",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(w){w.triggerEl.addEventListener("click",function(E){E.preventDefault(),g.show(w.id)})}))},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){this.destroy(),Xs.removeInstance("Tabs",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getActiveTab=function(){return this._activeTab},p.prototype.setActiveTab=function(g){this._activeTab=g},p.prototype.getTab=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.show=function(g,w){var E,N,V=this;w===void 0&&(w=!1);var K=this.getTab(g);K===this._activeTab&&!w||(this._items.map(function(j){var ue,ge;j!==K&&((ue=j.triggerEl.classList).remove.apply(ue,V._options.activeClasses.split(" ")),(ge=j.triggerEl.classList).add.apply(ge,V._options.inactiveClasses.split(" ")),j.targetEl.classList.add("hidden"),j.triggerEl.setAttribute("aria-selected","false"))}),(E=K.triggerEl.classList).add.apply(E,this._options.activeClasses.split(" ")),(N=K.triggerEl.classList).remove.apply(N,this._options.inactiveClasses.split(" ")),K.triggerEl.setAttribute("aria-selected","true"),K.targetEl.classList.remove("hidden"),this.setActiveTab(K),this._options.onShow(this,K))},p.prototype.updateOnShow=function(g){this._options.onShow=g},p}();function XK(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(p){var g=[],w=p.getAttribute("data-tabs-active-classes"),E=p.getAttribute("data-tabs-inactive-classes"),N=null;p.querySelectorAll('[role="tab"]').forEach(function(V){var K=V.getAttribute("aria-selected")==="true",j={id:V.getAttribute("data-tabs-target"),triggerEl:V,targetEl:document.querySelector(V.getAttribute("data-tabs-target"))};g.push(j),K&&(N=j.id)}),new cee(p,g,{defaultTabId:N,activeClasses:w||X$.activeClasses,inactiveClasses:E||X$.inactiveClasses})})}typeof window<"u"&&(window.Tabs=cee,window.initTabs=XK);var Qy=function(){return Qy=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Qy.apply(this,arguments)},D$=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,V;E<N;E++)(V||!(E in g))&&(V||(V=Array.prototype.slice.call(g,0,E)),V[E]=g[E]);return p.concat(V||Array.prototype.slice.call(g))},J$={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Doe={id:null,override:!0},lee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=J$),N===void 0&&(N=Doe),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Qy(Qy({},J$),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Tooltip",this,this._instanceId,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Xs.removeInstance("Tooltip",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){g.hide()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return qK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Qy(Qy({},g),{modifiers:D$(D$([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Qy(Qy({},g),{modifiers:D$(D$([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function JK(){document.querySelectorAll("[data-tooltip-target]").forEach(function(p){var g=p.getAttribute("data-tooltip-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-tooltip-trigger"),N=p.getAttribute("data-tooltip-placement");new lee(w,p,{placement:N||J$.placement,triggerType:E||J$.triggerType})}else console.error('The tooltip element with id "'.concat(g,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=lee,window.initTooltips=JK);var e2=function(){return e2=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},e2.apply(this,arguments)},R$=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,V;E<N;E++)(V||!(E in g))&&(V||(V=Array.prototype.slice.call(g,0,E)),V[E]=g[E]);return p.concat(V||Array.prototype.slice.call(g))},$5={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Roe={id:null,override:!0},uee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=$5),N===void 0&&(N=Roe),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=e2(e2({},$5),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Popover",this,N.id?N.id:this._targetEl.id,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler),g._targetEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler),g._targetEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Xs.removeInstance("Popover",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},100)},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler),g._targetEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler),g._targetEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return qK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return e2(e2({},g),{modifiers:R$(R$([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return e2(e2({},g),{modifiers:R$(R$([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function QK(){document.querySelectorAll("[data-popover-target]").forEach(function(p){var g=p.getAttribute("data-popover-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-popover-trigger"),N=p.getAttribute("data-popover-placement"),V=p.getAttribute("data-popover-offset");new uee(w,p,{placement:N||$5.placement,offset:V?parseInt(V):$5.offset,triggerType:E||$5.triggerType})}else console.error('The popover element with id "'.concat(g,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=uee,window.initPopovers=QK);var Q$=function(){return Q$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Q$.apply(this,arguments)},kK={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Moe={id:null,override:!0},dee=function(){function p(g,w,E,N,V){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),N===void 0&&(N=kK),V===void 0&&(V=Moe),this._instanceId=V.id?V.id:E.id,this._parentEl=g,this._triggerEl=w,this._targetEl=E,this._options=Q$(Q$({},kK),N),this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Dial",this,this._instanceId,V.override)}return p.prototype.init=function(){var g=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){g.show()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showEventHandler),g._targetEl.addEventListener(E,g._showEventHandler)}),this._hideEventHandler=function(){g._parentEl.matches(":hover")||g.hide()},w.hideEvents.forEach(function(E){g._parentEl.addEventListener(E,g._hideEventHandler)}),this._initialized=!0}},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showEventHandler),g._targetEl.removeEventListener(E,g._showEventHandler)}),w.hideEvents.forEach(function(E){g._parentEl.removeEventListener(E,g._hideEventHandler)}),this._initialized=!1}},p.prototype.removeInstance=function(){Xs.removeInstance("Dial",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this._visible?this.hide():this.show()},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype._getTriggerEventTypes=function(g){switch(g){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function eY(){document.querySelectorAll("[data-dial-init]").forEach(function(p){var g=p.querySelector("[data-dial-toggle]");if(g){var w=g.getAttribute("data-dial-toggle"),E=document.getElementById(w);if(E){var N=g.getAttribute("data-dial-trigger");new dee(p,g,E,{triggerType:N||kK.triggerType})}else console.error("Dial with id ".concat(w," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(p.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=dee,window.initDials=eY);var e7=function(){return e7=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},e7.apply(this,arguments)},vJ={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},Noe={id:null,override:!0},fee=function(){function p(g,w,E,N,V){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),N===void 0&&(N=vJ),V===void 0&&(V=Noe),this._instanceId=V.id?V.id:g.id,this._targetEl=g,this._incrementEl=w,this._decrementEl=E,this._options=e7(e7({},vJ),N),this._initialized=!1,this.init(),Xs.addInstance("InputCounter",this,this._instanceId,V.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(w){{var E=w.target;/^\d*$/.test(E.value)||(E.value=E.value.replace(/[^\d]/g,"")),g._options.maxValue!==null&&parseInt(E.value)>g._options.maxValue&&(E.value=g._options.maxValue.toString()),g._options.minValue!==null&&parseInt(E.value)<g._options.minValue&&(E.value=g._options.minValue.toString())}},this._incrementClickHandler=function(){g.increment()},this._decrementClickHandler=function(){g.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("InputCounter",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},p.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},p.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},p.prototype.updateOnIncrement=function(g){this._options.onIncrement=g},p.prototype.updateOnDecrement=function(g){this._options.onDecrement=g},p}();function tY(){document.querySelectorAll("[data-input-counter]").forEach(function(p){var g=p.id,w=document.querySelector('[data-input-counter-increment="'+g+'"]'),E=document.querySelector('[data-input-counter-decrement="'+g+'"]'),N=p.getAttribute("data-input-counter-min"),V=p.getAttribute("data-input-counter-max");p?Xs.instanceExists("InputCounter",p.getAttribute("id"))||new fee(p,w||null,E||null,{minValue:N?parseInt(N):null,maxValue:V?parseInt(V):null}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=fee,window.initInputCounters=tY);var t7=function(){return t7=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},t7.apply(this,arguments)},n7={htmlEntities:!1,contentType:"input",onCopy:function(){}},Poe={id:null,override:!0},mee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=n7),N===void 0&&(N=Poe),this._instanceId=N.id?N.id:w.id,this._triggerEl=g,this._targetEl=w,this._options=t7(t7({},n7),E),this._initialized=!1,this.init(),Xs.addInstance("CopyClipboard",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){g.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("CopyClipboard",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},p.prototype.copy=function(){var g=this.getTargetValue();this._options.htmlEntities&&(g=this.decodeHTML(g));var w=document.createElement("textarea");return w.value=g,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),this._options.onCopy(this),g},p.prototype.decodeHTML=function(g){var w=document.createElement("textarea");return w.innerHTML=g,w.textContent},p.prototype.updateOnCopyCallback=function(g){this._options.onCopy=g},p}();function nY(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(p){var g=p.getAttribute("data-copy-to-clipboard-target"),w=document.getElementById(g),E=p.getAttribute("data-copy-to-clipboard-content-type"),N=p.getAttribute("data-copy-to-clipboard-html-entities");w?Xs.instanceExists("CopyClipboard",w.getAttribute("id"))||new mee(p,w,{htmlEntities:N&&N==="true"?!0:n7.htmlEntities,contentType:E||n7.contentType}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=mee,window.initClipboards=nY);function AK(p,g){(g==null||g>p.length)&&(g=p.length);for(var w=0,E=Array(g);w<g;w++)E[w]=p[w];return E}function Ioe(p){if(Array.isArray(p))return p}function Boe(p){if(Array.isArray(p))return AK(p)}function Loe(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function oY(p,g,w){return g=n2(g),Voe(p,hee()?Reflect.construct(g,w||[],n2(p).constructor):g.apply(p,w))}function gS(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function yJ(p,g){for(var w=0;w<g.length;w++){var E=g[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,Zoe(E.key),E)}}function pS(p,g,w){return g&&yJ(p.prototype,g),w&&yJ(p,w),Object.defineProperty(p,"prototype",{writable:!1}),p}function Z5(){return Z5=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(p,g,w){var E=Uoe(p,g);if(E){var N=Object.getOwnPropertyDescriptor(E,g);return N.get?N.get.call(arguments.length<3?p:w):N.value}},Z5.apply(null,arguments)}function n2(p){return n2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},n2(p)}function sY(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),g&&OK(p,g)}function hee(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hee=function(){return!!p})()}function Foe(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function $oe(p,g){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var E,N,V,K,j=[],ue=!0,ge=!1;try{if(V=(w=w.call(p)).next,g===0){if(Object(w)!==w)return;ue=!1}else for(;!(ue=(E=V.call(w)).done)&&(j.push(E.value),j.length!==g);ue=!0);}catch(Ce){ge=!0,N=Ce}finally{try{if(!ue&&w.return!=null&&(K=w.return(),Object(K)!==K))return}finally{if(ge)throw N}}return j}}function Hoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Voe(p,g){if(g&&(typeof g=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Loe(p)}function OK(p,g){return OK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w},OK(p,g)}function Pm(p,g){return Ioe(p)||$oe(p,g)||gee(p,g)||Hoe()}function Uoe(p,g){for(;!{}.hasOwnProperty.call(p,g)&&(p=n2(p))!==null;);return p}function J5(p){return Boe(p)||Foe(p)||gee(p)||zoe()}function Woe(p,g){if(typeof p!="object"||!p)return p;var w=p[Symbol.toPrimitive];if(w!==void 0){var E=w.call(p,g);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}function Zoe(p){var g=Woe(p,"string");return typeof g=="symbol"?g:g+""}function o7(p){"@babel/helpers - typeof";return o7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o7(p)}function gee(p,g){if(p){if(typeof p=="string")return AK(p,g);var w={}.toString.call(p).slice(8,-1);return w==="Object"&&p.constructor&&(w=p.constructor.name),w==="Map"||w==="Set"?Array.from(p):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?AK(p,g):void 0}}function b0(p,g){return Object.prototype.hasOwnProperty.call(p,g)}function rY(p){return p[p.length-1]}function hS(p){for(var g=arguments.length,w=new Array(g>1?g-1:0),E=1;E<g;E++)w[E-1]=arguments[E];return w.forEach(function(N){p.includes(N)||p.push(N)}),p}function lK(p,g){return p?p.split(g):[]}function aY(p,g,w){var E=g===void 0||p>=g,N=w===void 0||p<=w;return E&&N}function pee(p,g,w){return p<g?g:p>w?w:p}function Hk(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",V=Object.keys(w).reduce(function(j,ue){var ge=w[ue];return typeof ge=="function"&&(ge=ge(E)),"".concat(j," ").concat(ue,'="').concat(ge,'"')},p);N+="<".concat(V,"></").concat(p,">");var K=E+1;return K<g?Hk(p,g,w,K,N):N}function iY(p){return p.replace(/>\s+/g,">").replace(/\s+</,"<")}function DK(p){return new Date(p).setHours(0,0,0,0)}function bS(){return new Date().setHours(0,0,0,0)}function t2(){switch(arguments.length){case 0:return bS();case 1:return DK(arguments.length<=0?void 0:arguments[0])}var p=new Date(0);return p.setFullYear.apply(p,arguments),p.setHours(0,0,0,0)}function Nk(p,g){var w=new Date(p);return w.setDate(w.getDate()+g)}function joe(p,g){return Nk(p,g*7)}function s7(p,g){var w=new Date(p),E=w.getMonth()+g,N=E%12;N<0&&(N+=12);var V=w.setMonth(E);return w.getMonth()!==N?w.setDate(0):V}function Pk(p,g){var w=new Date(p),E=w.getMonth(),N=w.setFullYear(w.getFullYear()+g);return E===1&&w.getMonth()===2?w.setDate(0):N}function wJ(p,g){return(p-g+7)%7}function r7(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=new Date(p).getDay();return Nk(p,wJ(g,w)-wJ(E,w))}function qoe(p){var g=r7(p,4,1),w=r7(new Date(g).setMonth(0,4),4,1);return Math.round((g-w)/6048e5)+1}function aS(p,g){var w=new Date(p).getFullYear();return Math.floor(w/g)*g}var RK=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Goe=/[\s!-/:-@[-`{-~年月日]+/,uK={},CJ={y:function(g,w){return new Date(g).setFullYear(parseInt(w,10))},m:function(g,w,E){var N=new Date(g),V=parseInt(w,10)-1;if(isNaN(V)){if(!w)return NaN;var K=w.toLowerCase(),j=function(ge){return ge.toLowerCase().startsWith(K)};if(V=E.monthsShort.findIndex(j),V<0&&(V=E.months.findIndex(j)),V<0)return NaN}return N.setMonth(V),N.getMonth()!==bee(V)?N.setDate(0):N.getTime()},d:function(g,w){return new Date(g).setDate(parseInt(w,10))}},Koe={d:function(g){return g.getDate()},dd:function(g){return M$(g.getDate(),2)},D:function(g,w){return w.daysShort[g.getDay()]},DD:function(g,w){return w.days[g.getDay()]},m:function(g){return g.getMonth()+1},mm:function(g){return M$(g.getMonth()+1,2)},M:function(g,w){return w.monthsShort[g.getMonth()]},MM:function(g,w){return w.months[g.getMonth()]},y:function(g){return g.getFullYear()},yy:function(g){return M$(g.getFullYear(),2).slice(-2)},yyyy:function(g){return M$(g.getFullYear(),4)}};function bee(p){return p>-1?p%12:bee(p+12)}function M$(p,g){return p.toString().padStart(g,"0")}function vee(p){if(typeof p!="string")throw new Error("Invalid date format.");if(p in uK)return uK[p];var g=p.split(RK),w=p.match(new RegExp(RK,"g"));if(g.length===0||!w)throw new Error("Invalid date format.");var E=w.map(function(V){return Koe[V]}),N=Object.keys(CJ).reduce(function(V,K){var j=w.find(function(ue){return ue[0]!=="D"&&ue[0].toLowerCase()===K});return j&&V.push(K),V},[]);return uK[p]={parser:function(K,j){var ue=K.split(Goe).reduce(function(ge,Ce,Xe){if(Ce.length>0&&w[Xe]){var Lt=w[Xe][0];Lt==="M"?ge.m=Ce:Lt!=="D"&&(ge[Lt]=Ce)}return ge},{});return N.reduce(function(ge,Ce){var Xe=CJ[Ce](ge,ue[Ce],j);return isNaN(Xe)?ge:Xe},bS())},formatter:function(K,j){var ue=E.reduce(function(ge,Ce,Xe){return ge+="".concat(g[Xe]).concat(Ce(K,j))},"");return ue+=rY(g)}}}function j5(p,g,w){if(p instanceof Date||typeof p=="number"){var E=DK(p);return isNaN(E)?void 0:E}if(p){if(p==="today")return bS();if(g&&g.toValue){var N=g.toValue(p,g,w);return isNaN(N)?void 0:DK(N)}return vee(g).parser(p,w)}}function q5(p,g,w){if(isNaN(p)||!p&&p!==0)return"";var E=typeof p=="number"?new Date(p):p;return g.toDisplay?g.toDisplay(E,g,w):vee(g).formatter(E,w)}var a7=new WeakMap,yee=EventTarget.prototype,SJ=yee.addEventListener,xJ=yee.removeEventListener;function cY(p,g){var w=a7.get(p);w||(w=[],a7.set(p,w)),g.forEach(function(E){SJ.call.apply(SJ,J5(E)),w.push(E)})}function wee(p){var g=a7.get(p);g&&(g.forEach(function(w){xJ.call.apply(xJ,J5(w))}),a7.delete(p))}if(!Event.prototype.composedPath){var Yoe=function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];w.push(g);var E;return g.parentNode?E=g.parentNode:g.host?E=g.host:g.defaultView&&(E=g.defaultView),E?p(E,w):w};Event.prototype.composedPath=function(){return Yoe(this.target)}}function Cee(p,g,w){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=p[E];return g(N)?N:N===w||!N.parentElement?void 0:Cee(p,g,w,E+1)}function See(p,g){var w=typeof g=="function"?g:function(E){return E.matches(g)};return Cee(p.composedPath(),w,p.currentTarget)}var I5={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Q5={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},dK=null;function v0(p){return dK==null&&(dK=document.createRange()),dK.createContextualFragment(p)}function H5(p){p.style.display!=="none"&&(p.style.display&&(p.dataset.styleDisplay=p.style.display),p.style.display="none")}function z5(p){p.style.display==="none"&&(p.dataset.styleDisplay?(p.style.display=p.dataset.styleDisplay,delete p.dataset.styleDisplay):p.style.display="")}function i7(p){p.firstChild&&(p.removeChild(p.firstChild),i7(p))}function Xoe(p,g){i7(p),g instanceof DocumentFragment?p.appendChild(g):typeof g=="string"?p.appendChild(v0(g)):typeof g.forEach=="function"&&g.forEach(function(w){p.appendChild(w)})}var fK=Q5.language,Joe=Q5.format,Qoe=Q5.weekStart;function EJ(p,g){return p.length<6&&g>=0&&g<7?hS(p,g):p}function _J(p){return(p+6)%7}function TJ(p,g,w,E){var N=j5(p,g,w);return N!==void 0?N:E}function mK(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,E=parseInt(p,10);return E>=0&&E<=w?E:g}function hK(p,g){var w=Object.assign({},p),E={},N=g.constructor.locales,V=g.config||{},K=V.format,j=V.language,ue=V.locale,ge=V.maxDate,Ce=V.maxView,Xe=V.minDate,Lt=V.pickLevel,Zt=V.startView,Pt=V.weekStart;if(w.language){var Ct;if(w.language!==j&&(N[w.language]?Ct=w.language:(Ct=w.language.split("-")[0],N[Ct]===void 0&&(Ct=!1))),delete w.language,Ct){j=E.language=Ct;var Ne=ue||N[fK];ue=Object.assign({format:Joe,weekStart:Qoe},N[fK]),j!==fK&&Object.assign(ue,N[j]),E.locale=ue,K===Ne.format&&(K=E.format=ue.format),Pt===Ne.weekStart&&(Pt=E.weekStart=ue.weekStart,E.weekEnd=_J(ue.weekStart))}}if(w.format){var ln=typeof w.format.toDisplay=="function",xt=typeof w.format.toValue=="function",ce=RK.test(w.format);(ln&&xt||ce)&&(K=E.format=w.format),delete w.format}var Je=Xe,Dn=ge;if(w.minDate!==void 0&&(Je=w.minDate===null?t2(0,0,1):TJ(w.minDate,K,ue,Je),delete w.minDate),w.maxDate!==void 0&&(Dn=w.maxDate===null?void 0:TJ(w.maxDate,K,ue,Dn),delete w.maxDate),Dn<Je?(Xe=E.minDate=Dn,ge=E.maxDate=Je):(Xe!==Je&&(Xe=E.minDate=Je),ge!==Dn&&(ge=E.maxDate=Dn)),w.datesDisabled&&(E.datesDisabled=w.datesDisabled.reduce(function(it,M){var Hn=j5(M,K,ue);return Hn!==void 0?hS(it,Hn):it},[]),delete w.datesDisabled),w.defaultViewDate!==void 0){var Gt=j5(w.defaultViewDate,K,ue);Gt!==void 0&&(E.defaultViewDate=Gt),delete w.defaultViewDate}if(w.weekStart!==void 0){var oe=Number(w.weekStart)%7;isNaN(oe)||(Pt=E.weekStart=oe,E.weekEnd=_J(oe)),delete w.weekStart}if(w.daysOfWeekDisabled&&(E.daysOfWeekDisabled=w.daysOfWeekDisabled.reduce(EJ,[]),delete w.daysOfWeekDisabled),w.daysOfWeekHighlighted&&(E.daysOfWeekHighlighted=w.daysOfWeekHighlighted.reduce(EJ,[]),delete w.daysOfWeekHighlighted),w.maxNumberOfDates!==void 0){var Xt=parseInt(w.maxNumberOfDates,10);Xt>=0&&(E.maxNumberOfDates=Xt,E.multidate=Xt!==1),delete w.maxNumberOfDates}w.dateDelimiter&&(E.dateDelimiter=String(w.dateDelimiter),delete w.dateDelimiter);var In=Lt;w.pickLevel!==void 0&&(In=mK(w.pickLevel,2),delete w.pickLevel),In!==Lt&&(Lt=E.pickLevel=In);var en=Ce;w.maxView!==void 0&&(en=mK(w.maxView,Ce),delete w.maxView),en=Lt>en?Lt:en,en!==Ce&&(Ce=E.maxView=en);var Fe=Zt;if(w.startView!==void 0&&(Fe=mK(w.startView,Fe),delete w.startView),Fe<Lt?Fe=Lt:Fe>Ce&&(Fe=Ce),Fe!==Zt&&(E.startView=Fe),w.prevArrow){var ve=v0(w.prevArrow);ve.childNodes.length>0&&(E.prevArrow=ve.childNodes),delete w.prevArrow}if(w.nextArrow){var so=v0(w.nextArrow);so.childNodes.length>0&&(E.nextArrow=so.childNodes),delete w.nextArrow}if(w.disableTouchKeyboard!==void 0&&(E.disableTouchKeyboard="ontouchstart"in document&&!!w.disableTouchKeyboard,delete w.disableTouchKeyboard),w.orientation){var at=w.orientation.toLowerCase().split(/\s+/g);E.orientation={x:at.find(function(it){return it==="left"||it==="right"})||"auto",y:at.find(function(it){return it==="top"||it==="bottom"})||"auto"},delete w.orientation}if(w.todayBtnMode!==void 0){switch(w.todayBtnMode){case 0:case 1:E.todayBtnMode=w.todayBtnMode}delete w.todayBtnMode}return Object.keys(w).forEach(function(it){w[it]!==void 0&&b0(Q5,it)&&(E[it]=w[it])}),E}var ese=iY(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),tse=iY(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(Hk("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(Hk("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),nse=iY(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(Hk("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),lY=function(){function p(g,w){gS(this,p),Object.assign(this,w,{picker:g,element:v0('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return pS(p,[{key:"init",value:function(w){w.pickLevel!==void 0&&(this.isMinView=this.id===w.pickLevel),this.setOptions(w),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(w,E,N){var V=this.beforeShow(new Date(N));switch(o7(V)){case"boolean":V={enabled:V};break;case"string":V={classes:V}}if(V){if(V.enabled===!1&&(w.classList.add("disabled"),hS(this.disabled,E)),V.classes){var K,j=V.classes.split(/\s+/);(K=w.classList).add.apply(K,J5(j)),j.includes("disabled")&&hS(this.disabled,E)}V.content&&Xoe(w,V.content)}}}])}(),ose=function(p){function g(w){return gS(this,g),oY(this,g,[w,{id:0,name:"days",cellClass:"day"}])}return sY(g,p),pS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(N){var V=v0(tse).firstChild;this.dow=V.firstChild,this.grid=V.lastChild,this.element.appendChild(V)}Z5(n2(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){var N=this,V;if(b0(E,"minDate")&&(this.minDate=E.minDate),b0(E,"maxDate")&&(this.maxDate=E.maxDate),E.datesDisabled&&(this.datesDisabled=E.datesDisabled),E.daysOfWeekDisabled&&(this.daysOfWeekDisabled=E.daysOfWeekDisabled,V=!0),E.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=E.daysOfWeekHighlighted),E.todayHighlight!==void 0&&(this.todayHighlight=E.todayHighlight),E.weekStart!==void 0&&(this.weekStart=E.weekStart,this.weekEnd=E.weekEnd,V=!0),E.locale){var K=this.locale=E.locale;this.dayNames=K.daysMin,this.switchLabelFormat=K.titleFormat,V=!0}if(E.beforeShowDay!==void 0&&(this.beforeShow=typeof E.beforeShowDay=="function"?E.beforeShowDay:void 0),E.calendarWeeks!==void 0)if(E.calendarWeeks&&!this.calendarWeeks){var j=v0(nse).firstChild;this.calendarWeeks={element:j,dow:j.firstChild,weeks:j.lastChild},this.element.insertBefore(j,this.element.firstChild)}else this.calendarWeeks&&!E.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);E.showDaysOfWeek!==void 0&&(E.showDaysOfWeek?(z5(this.dow),this.calendarWeeks&&z5(this.calendarWeeks.dow)):(H5(this.dow),this.calendarWeeks&&H5(this.calendarWeeks.dow))),V&&Array.from(this.dow.children).forEach(function(ue,ge){var Ce=(N.weekStart+ge)%7;ue.textContent=N.dayNames[Ce],ue.className=N.daysOfWeekDisabled.includes(Ce)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),N=E.getFullYear(),V=E.getMonth(),K=t2(N,V,1),j=r7(K,this.weekStart,this.weekStart);this.first=K,this.last=t2(N,V+1,0),this.start=j,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,N=E.dates,V=E.rangepicker;this.selected=N,V&&(this.range=V.dates)}},{key:"render",value:function(){var E=this;this.today=this.todayHighlight?bS():void 0,this.disabled=J5(this.datesDisabled);var N=q5(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(N),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var V=r7(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(K,j){K.textContent=qoe(joe(V,j))})}Array.from(this.grid.children).forEach(function(K,j){var ue=K.classList,ge=Nk(E.start,j),Ce=new Date(ge),Xe=Ce.getDay();if(K.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),K.dataset.date=ge,K.textContent=Ce.getDate(),ge<E.first?ue.add("prev","text-gray-500","dark:text-white"):ge>E.last&&ue.add("next","text-gray-500","dark:text-white"),E.today===ge&&ue.add("today","bg-gray-100","dark:bg-gray-600"),(ge<E.minDate||ge>E.maxDate||E.disabled.includes(ge))&&(ue.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),ue.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),E.daysOfWeekDisabled.includes(Xe)&&(ue.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),ue.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),hS(E.disabled,ge)),E.daysOfWeekHighlighted.includes(Xe)&&ue.add("highlighted"),E.range){var Lt=Pm(E.range,2),Zt=Lt[0],Pt=Lt[1];ge>Zt&&ge<Pt&&(ue.add("range","bg-gray-200","dark:bg-gray-600"),ue.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),ge===Zt&&(ue.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),ue.remove("rounded-lg","rounded-r-lg")),ge===Pt&&(ue.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),ue.remove("rounded-lg","rounded-l-lg"))}E.selected.includes(ge)&&(ue.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),ue.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),ge===E.focused&&ue.add("focused"),E.beforeShow&&E.performBeforeHook(K,ge,ge)})}},{key:"refresh",value:function(){var E=this,N=this.range||[],V=Pm(N,2),K=V[0],j=V[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ue){ue.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),ue.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(ue){var ge=Number(ue.dataset.date),Ce=ue.classList;Ce.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),ge>K&&ge<j&&(Ce.add("range","bg-gray-200","dark:bg-gray-600"),Ce.remove("rounded-lg")),ge===K&&(Ce.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),Ce.remove("rounded-lg")),ge===j&&(Ce.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),Ce.remove("rounded-lg")),E.selected.includes(ge)&&(Ce.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ce.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),ge===E.focused&&Ce.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(N){N.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(lY);function kJ(p,g){if(!(!p||!p[0]||!p[1])){var w=Pm(p,2),E=Pm(w[0],2),N=E[0],V=E[1],K=Pm(w[1],2),j=K[0],ue=K[1];if(!(N>g||j<g))return[N===g?V:-1,j===g?ue:12]}}var sse=function(p){function g(w){return gS(this,g),oY(this,g,[w,{id:1,name:"months",cellClass:"month"}])}return sY(g,p),pS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;N&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(v0(Hk("span",12,{"data-month":function(K){return K}})))),Z5(n2(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(E.locale&&(this.monthNames=E.locale.monthsShort),b0(E,"minDate"))if(E.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var N=new Date(E.minDate);this.minYear=N.getFullYear(),this.minMonth=N.getMonth(),this.minDate=N.setDate(1)}if(b0(E,"maxDate"))if(E.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var V=new Date(E.maxDate);this.maxYear=V.getFullYear(),this.maxMonth=V.getMonth(),this.maxDate=t2(this.maxYear,this.maxMonth+1,0)}E.beforeShowMonth!==void 0&&(this.beforeShow=typeof E.beforeShowMonth=="function"?E.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate);this.year=E.getFullYear(),this.focused=E.getMonth()}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,N=E.dates,V=E.rangepicker;this.selected=N.reduce(function(K,j){var ue=new Date(j),ge=ue.getFullYear(),Ce=ue.getMonth();return K[ge]===void 0?K[ge]=[Ce]:hS(K[ge],Ce),K},{}),V&&V.dates&&(this.range=V.dates.map(function(K){var j=new Date(K);return isNaN(j)?void 0:[j.getFullYear(),j.getMonth()]}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var N=this.selected[this.year]||[],V=this.year<this.minYear||this.year>this.maxYear,K=this.year===this.minYear,j=this.year===this.maxYear,ue=kJ(this.range,this.year);Array.from(this.grid.children).forEach(function(ge,Ce){var Xe=ge.classList,Lt=t2(E.year,Ce,1);if(ge.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(ge.dataset.date=Lt),ge.textContent=E.monthNames[Ce],(V||K&&Ce<E.minMonth||j&&Ce>E.maxMonth)&&Xe.add("disabled"),ue){var Zt=Pm(ue,2),Pt=Zt[0],Ct=Zt[1];Ce>Pt&&Ce<Ct&&Xe.add("range"),Ce===Pt&&Xe.add("range-start"),Ce===Ct&&Xe.add("range-end")}N.includes(Ce)&&(Xe.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Xe.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Ce===E.focused&&Xe.add("focused"),E.beforeShow&&E.performBeforeHook(ge,Ce,Lt)})}},{key:"refresh",value:function(){var E=this,N=this.selected[this.year]||[],V=kJ(this.range,this.year)||[],K=Pm(V,2),j=K[0],ue=K[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ge){ge.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),ge.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(ge,Ce){var Xe=ge.classList;Ce>j&&Ce<ue&&Xe.add("range"),Ce===j&&Xe.add("range-start"),Ce===ue&&Xe.add("range-end"),N.includes(Ce)&&(Xe.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Xe.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Ce===E.focused&&Xe.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(E){E.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(lY);function rse(p){return J5(p).reduce(function(g,w,E){return g+=E?w:w.toUpperCase()},"")}var AJ=function(p){function g(w,E){return gS(this,g),oY(this,g,[w,E])}return sY(g,p),pS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;N&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(rse(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(v0(Hk("span",12)))),Z5(n2(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(b0(E,"minDate")&&(E.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=aS(E.minDate,this.step),this.minDate=t2(this.minYear,0,1))),b0(E,"maxDate")&&(E.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=aS(E.maxDate,this.step),this.maxDate=t2(this.maxYear,11,31))),E[this.beforeShowOption]!==void 0){var N=E[this.beforeShowOption];this.beforeShow=typeof N=="function"?N:void 0}}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),N=aS(E,this.navStep),V=N+9*this.step;this.first=N,this.last=V,this.start=N-this.step,this.focused=aS(E,this.step)}},{key:"updateSelection",value:function(){var E=this,N=this.picker.datepicker,V=N.dates,K=N.rangepicker;this.selected=V.reduce(function(j,ue){return hS(j,aS(ue,E.step))},[]),K&&K.dates&&(this.range=K.dates.map(function(j){if(j!==void 0)return aS(j,E.step)}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(N,V){var K=N.classList,j=E.start+V*E.step,ue=t2(j,0,1);if(N.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(N.dataset.date=ue),N.textContent=N.dataset.year=j,V===0?K.add("prev"):V===11&&K.add("next"),(j<E.minYear||j>E.maxYear)&&K.add("disabled"),E.range){var ge=Pm(E.range,2),Ce=ge[0],Xe=ge[1];j>Ce&&j<Xe&&K.add("range"),j===Ce&&K.add("range-start"),j===Xe&&K.add("range-end")}E.selected.includes(j)&&(K.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),K.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),j===E.focused&&K.add("focused"),E.beforeShow&&E.performBeforeHook(N,j,ue)})}},{key:"refresh",value:function(){var E=this,N=this.range||[],V=Pm(N,2),K=V[0],j=V[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ue){ue.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(ue){var ge=Number(ue.textContent),Ce=ue.classList;ge>K&&ge<j&&Ce.add("range"),ge===K&&Ce.add("range-start"),ge===j&&Ce.add("range-end"),E.selected.includes(ge)&&(Ce.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ce.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),ge===E.focused&&Ce.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(N){N.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(lY);function Ik(p,g){var w={date:p.getDate(),viewDate:new Date(p.picker.viewDate),viewId:p.picker.currentView.id,datepicker:p};p.element.dispatchEvent(new CustomEvent(g,{detail:w}))}function c7(p,g){var w=p.config,E=w.minDate,N=w.maxDate,V=p.picker,K=V.currentView,j=V.viewDate,ue;switch(K.id){case 0:ue=s7(j,g);break;case 1:ue=Pk(j,g);break;default:ue=Pk(j,g*K.navStep)}ue=pee(ue,E,N),p.picker.changeFocus(ue).render()}function xee(p){var g=p.picker.currentView.id;g!==p.config.maxView&&p.picker.changeView(g+1).render()}function Eee(p){p.config.updateOnBlur?p.update({autohide:!0}):(p.refresh("input"),p.hide())}function OJ(p,g){var w=p.picker,E=new Date(w.viewDate),N=w.currentView.id,V=N===1?s7(E,g-E.getMonth()):Pk(E,g-E.getFullYear());w.changeFocus(V).changeView(N-1).render()}function ase(p){var g=p.picker,w=bS();if(p.config.todayBtnMode===1){if(p.config.autohide){p.setDate(w);return}p.setDate(w,{render:!1}),g.update()}g.viewDate!==w&&g.changeFocus(w),g.changeView(0).render()}function ise(p){p.setDate({clear:!0})}function cse(p){xee(p)}function lse(p){c7(p,-1)}function use(p){c7(p,1)}function dse(p,g){var w=See(g,".datepicker-cell");if(!(!w||w.classList.contains("disabled"))){var E=p.picker.currentView,N=E.id,V=E.isMinView;V?p.setDate(Number(w.dataset.date)):N===1?OJ(p,Number(w.dataset.month)):OJ(p,Number(w.dataset.year))}}function fse(p){!p.inline&&!p.config.disableTouchKeyboard&&p.inputField.focus()}function DJ(p,g){if(g.title!==void 0&&(g.title?(p.controls.title.textContent=g.title,z5(p.controls.title)):(p.controls.title.textContent="",H5(p.controls.title))),g.prevArrow){var w=p.controls.prevBtn;i7(w),g.prevArrow.forEach(function(j){w.appendChild(j.cloneNode(!0))})}if(g.nextArrow){var E=p.controls.nextBtn;i7(E),g.nextArrow.forEach(function(j){E.appendChild(j.cloneNode(!0))})}if(g.locale&&(p.controls.todayBtn.textContent=g.locale.today,p.controls.clearBtn.textContent=g.locale.clear),g.todayBtn!==void 0&&(g.todayBtn?z5(p.controls.todayBtn):H5(p.controls.todayBtn)),b0(g,"minDate")||b0(g,"maxDate")){var N=p.datepicker.config,V=N.minDate,K=N.maxDate;p.controls.todayBtn.disabled=!aY(bS(),V,K)}g.clearBtn!==void 0&&(g.clearBtn?z5(p.controls.clearBtn):H5(p.controls.clearBtn))}function RJ(p){var g=p.dates,w=p.config,E=g.length>0?rY(g):w.defaultViewDate;return pee(E,w.minDate,w.maxDate)}function MJ(p,g){var w=new Date(p.viewDate),E=new Date(g),N=p.currentView,V=N.id,K=N.year,j=N.first,ue=N.last,ge=E.getFullYear();switch(p.viewDate=g,ge!==w.getFullYear()&&Ik(p.datepicker,"changeYear"),E.getMonth()!==w.getMonth()&&Ik(p.datepicker,"changeMonth"),V){case 0:return g<j||g>ue;case 1:return ge!==K;default:return ge<j||ge>ue}}function gK(p){return window.getComputedStyle(p).direction}var mse=function(){function p(g){gS(this,p),this.datepicker=g;var w=ese.replace(/%buttonClass%/g,g.config.buttonClass),E=this.element=v0(w).firstChild,N=Pm(E.firstChild.children,3),V=N[0],K=N[1],j=N[2],ue=V.firstElementChild,ge=Pm(V.lastElementChild.children,3),Ce=ge[0],Xe=ge[1],Lt=ge[2],Zt=Pm(j.firstChild.children,2),Pt=Zt[0],Ct=Zt[1],Ne={title:ue,prevBtn:Ce,viewSwitch:Xe,nextBtn:Lt,todayBtn:Pt,clearBtn:Ct};this.main=K,this.controls=Ne;var ln=g.inline?"inline":"dropdown";E.classList.add("datepicker-".concat(ln)),ln==="dropdown"&&E.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),DJ(this,g.config),this.viewDate=RJ(g),cY(g,[[E,"click",fse.bind(null,g),{capture:!0}],[K,"click",dse.bind(null,g)],[Ne.viewSwitch,"click",cse.bind(null,g)],[Ne.prevBtn,"click",lse.bind(null,g)],[Ne.nextBtn,"click",use.bind(null,g)],[Ne.todayBtn,"click",ase.bind(null,g)],[Ne.clearBtn,"click",ise.bind(null,g)]]),this.views=[new ose(this),new sse(this),new AJ(this,{id:2,name:"years",cellClass:"year",step:1}),new AJ(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[g.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),g.config.container.appendChild(this.element)}return pS(p,[{key:"setOptions",value:function(w){DJ(this,w),this.views.forEach(function(E){E.init(w,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var w=this.datepicker;if(!w.inline){var E=gK(w.inputField);E!==gK(w.config.container)?this.element.dir=E:this.element.dir&&this.element.removeAttribute("dir"),this.place(),w.config.disableTouchKeyboard&&w.inputField.blur()}Ik(w,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,Ik(this.datepicker,"hide"))}},{key:"place",value:function(){var w=this.element,E=w.classList,N=w.style,V=this.datepicker,K=V.config,j=V.inputField,ue=K.container,ge=this.element.getBoundingClientRect(),Ce=ge.width,Xe=ge.height,Lt=ue.getBoundingClientRect(),Zt=Lt.left,Pt=Lt.top,Ct=Lt.width,Ne=j.getBoundingClientRect(),ln=Ne.left,xt=Ne.top,ce=Ne.width,Je=Ne.height,Dn=K.orientation,Gt=Dn.x,oe=Dn.y,Xt,In,en;ue===document.body?(Xt=window.scrollY,In=ln+window.scrollX,en=xt+Xt):(Xt=ue.scrollTop,In=ln-Zt,en=xt-Pt+Xt),Gt==="auto"&&(In<0?(Gt="left",In=10):In+Ce>Ct?Gt="right":Gt=gK(j)==="rtl"?"right":"left"),Gt==="right"&&(In-=Ce-ce),oe==="auto"&&(oe=en-Xe<Xt?"bottom":"top"),oe==="top"?en-=Xe:en+=Je,E.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),E.add("datepicker-orient-".concat(oe),"datepicker-orient-".concat(Gt)),N.top=en&&"".concat(en,"px"),N.left=In&&"".concat(In,"px")}},{key:"setViewSwitchLabel",value:function(w){this.controls.viewSwitch.textContent=w}},{key:"setPrevBtnDisabled",value:function(w){this.controls.prevBtn.disabled=w}},{key:"setNextBtnDisabled",value:function(w){this.controls.nextBtn.disabled=w}},{key:"changeView",value:function(w){var E=this.currentView,N=this.views[w];return N.id!==E.id&&(this.currentView=N,this._renderMethod="render",Ik(this.datepicker,"changeView"),this.main.replaceChild(N.element,E.element)),this}},{key:"changeFocus",value:function(w){return this._renderMethod=MJ(this,w)?"render":"refreshFocus",this.views.forEach(function(E){E.updateFocus()}),this}},{key:"update",value:function(){var w=RJ(this.datepicker);return this._renderMethod=MJ(this,w)?"render":"refresh",this.views.forEach(function(E){E.updateFocus(),E.updateSelection()}),this}},{key:"render",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,E=w&&this._renderMethod||"render";delete this._renderMethod,this.currentView[E]()}}])}();function _ee(p,g,w,E,N,V){if(aY(p,N,V)){if(E(p)){var K=g(p,w);return _ee(K,g,w,E,N,V)}return p}}function N$(p,g,w,E){var N=p.picker,V=N.currentView,K=V.step||1,j=N.viewDate,ue,ge;switch(V.id){case 0:E?j=Nk(j,w*7):g.ctrlKey||g.metaKey?j=Pk(j,w):j=Nk(j,w),ue=Nk,ge=function(Xe){return V.disabled.includes(Xe)};break;case 1:j=s7(j,E?w*4:w),ue=s7,ge=function(Xe){var Lt=new Date(Xe),Zt=V.year,Pt=V.disabled;return Lt.getFullYear()===Zt&&Pt.includes(Lt.getMonth())};break;default:j=Pk(j,w*(E?4:1)*K),ue=Pk,ge=function(Xe){return V.disabled.includes(aS(Xe,K))}}j=_ee(j,ue,w<0?-K:K,ge,V.minDate,V.maxDate),j!==void 0&&N.changeFocus(j).render()}function hse(p,g){if(g.key==="Tab"){Eee(p);return}var w=p.picker,E=w.currentView,N=E.id,V=E.isMinView;if(w.active)if(p.editMode)switch(g.key){case"Escape":w.hide();break;case"Enter":p.exitEditMode({update:!0,autohide:p.config.autohide});break;default:return}else switch(g.key){case"Escape":w.hide();break;case"ArrowLeft":if(g.ctrlKey||g.metaKey)c7(p,-1);else if(g.shiftKey){p.enterEditMode();return}else N$(p,g,-1,!1);break;case"ArrowRight":if(g.ctrlKey||g.metaKey)c7(p,1);else if(g.shiftKey){p.enterEditMode();return}else N$(p,g,1,!1);break;case"ArrowUp":if(g.ctrlKey||g.metaKey)xee(p);else if(g.shiftKey){p.enterEditMode();return}else N$(p,g,-1,!0);break;case"ArrowDown":if(g.shiftKey&&!g.ctrlKey&&!g.metaKey){p.enterEditMode();return}N$(p,g,1,!0);break;case"Enter":V?p.setDate(w.viewDate):w.changeView(N-1).render();break;case"Backspace":case"Delete":p.enterEditMode();return;default:g.key.length===1&&!g.ctrlKey&&!g.metaKey&&p.enterEditMode();return}else switch(g.key){case"ArrowDown":case"Escape":w.show();break;case"Enter":p.update();break;default:return}g.preventDefault(),g.stopPropagation()}function gse(p){p.config.showOnFocus&&!p._showing&&p.show()}function pse(p,g){var w=g.target;(p.picker.active||p.config.showOnClick)&&(w._active=w===document.activeElement,w._clicking=setTimeout(function(){delete w._active,delete w._clicking},2e3))}function bse(p,g){var w=g.target;w._clicking&&(clearTimeout(w._clicking),delete w._clicking,w._active&&p.enterEditMode(),delete w._active,p.config.showOnClick&&p.show())}function vse(p,g){g.clipboardData.types.includes("text/plain")&&p.enterEditMode()}function yse(p,g){var w=p.element;if(w===document.activeElement){var E=p.picker.element;See(g,function(N){return N===w||N===E})||Eee(p)}}function Tee(p,g){return p.map(function(w){return q5(w,g.format,g.locale)}).join(g.dateDelimiter)}function kee(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,E=p.config,N=p.dates,V=p.rangepicker;if(g.length===0)return w?[]:void 0;var K=V&&p===V.datepickers[1],j=g.reduce(function(ue,ge){var Ce=j5(ge,E.format,E.locale);if(Ce===void 0)return ue;if(E.pickLevel>0){var Xe=new Date(Ce);E.pickLevel===1?Ce=K?Xe.setMonth(Xe.getMonth()+1,0):Xe.setDate(1):Ce=K?Xe.setFullYear(Xe.getFullYear()+1,0,0):Xe.setMonth(0,1)}return aY(Ce,E.minDate,E.maxDate)&&!ue.includes(Ce)&&!E.datesDisabled.includes(Ce)&&!E.daysOfWeekDisabled.includes(new Date(Ce).getDay())&&ue.push(Ce),ue},[]);if(j.length!==0)return E.multidate&&!w&&(j=j.reduce(function(ue,ge){return N.includes(ge)||ue.push(ge),ue},N.filter(function(ue){return!j.includes(ue)}))),E.maxNumberOfDates&&j.length>E.maxNumberOfDates?j.slice(E.maxNumberOfDates*-1):j}function l7(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=p.config,N=p.picker,V=p.inputField;if(g&2){var K=N.active?E.pickLevel:E.startView;N.update().changeView(K).render(w)}g&1&&V&&(V.value=Tee(p.dates,E))}function NJ(p,g,w){var E=w.clear,N=w.render,V=w.autohide;N===void 0&&(N=!0),N?V===void 0&&(V=p.config.autohide):V=!1;var K=kee(p,g,E);K&&(K.toString()!==p.dates.toString()?(p.dates=K,l7(p,N?3:1),Ik(p,"changeDate")):l7(p,1),V&&p.hide())}var $$=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;gS(this,p),g.datepicker=this,this.element=g;var N=this.config=Object.assign({buttonClass:w.buttonClass&&String(w.buttonClass)||"button",container:document.body,defaultViewDate:bS(),maxDate:void 0,minDate:void 0},hK(Q5,this));this._options=w,Object.assign(N,hK(w,this));var V=this.inline=g.tagName!=="INPUT",K,j;if(V)N.container=g,j=lK(g.dataset.date,N.dateDelimiter),delete g.dataset.date;else{var ue=w.container?document.querySelector(w.container):null;ue&&(N.container=ue),K=this.inputField=g,K.classList.add("datepicker-input"),j=lK(K.value,N.dateDelimiter)}if(E){var ge=E.inputs.indexOf(K),Ce=E.datepickers;if(ge<0||ge>1||!Array.isArray(Ce))throw Error("Invalid rangepicker object.");Ce[ge]=this,Object.defineProperty(this,"rangepicker",{get:function(){return E}})}this.dates=[];var Xe=kee(this,j);Xe&&Xe.length>0&&(this.dates=Xe),K&&(K.value=Tee(this.dates,N));var Lt=this.picker=new mse(this);if(V)this.show();else{var Zt=yse.bind(null,this),Pt=[[K,"keydown",hse.bind(null,this)],[K,"focus",gse.bind(null,this)],[K,"mousedown",pse.bind(null,this)],[K,"click",bse.bind(null,this)],[K,"paste",vse.bind(null,this)],[document,"mousedown",Zt],[document,"touchstart",Zt],[window,"resize",Lt.place.bind(Lt)]];cY(this,Pt)}}return pS(p,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(w){var E=this.picker,N=hK(w,this);Object.assign(this._options,w),Object.assign(this.config,N),E.setOptions(N),l7(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),wee(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,N=E?function(V){return q5(V,E,w.config.locale)}:function(V){return new Date(V)};if(this.config.multidate)return this.dates.map(N);if(this.dates.length>0)return N(this.dates[0])}},{key:"setDate",value:function(){for(var w=arguments.length,E=new Array(w),N=0;N<w;N++)E[N]=arguments[N];var V=[].concat(E),K={},j=rY(E);o7(j)==="object"&&!Array.isArray(j)&&!(j instanceof Date)&&j&&Object.assign(K,V.pop());var ue=Array.isArray(V[0])?V[0]:V;NJ(this,ue,K)}},{key:"update",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var E={clear:!0,autohide:!!(w&&w.autohide)},N=lK(this.inputField.value,this.config.dateDelimiter);NJ(this,N,E)}}},{key:"refresh",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;w&&typeof w!="string"&&(E=w,w=void 0);var N;w==="picker"?N=2:w==="input"?N=1:N=3,l7(this,N,!E)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var E=Object.assign({update:!1},w);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),E.update&&this.update(E)}}}],[{key:"formatDate",value:function(w,E,N){return q5(w,E,N&&I5[N]||I5.en)}},{key:"parseDate",value:function(w,E,N){return j5(w,E,N&&I5[N]||I5.en)}},{key:"locales",get:function(){return I5}}])}();function PJ(p){var g=Object.assign({},p);return delete g.inputs,delete g.allowOneSidedRange,delete g.maxNumberOfDates,g}function IJ(p,g,w,E){cY(p,[[w,"changeDate",g]]),new $$(w,E,p)}function B5(p,g){if(!p._updating){p._updating=!0;var w=g.target;if(w.datepicker!==void 0){var E=p.datepickers,N={render:!1},V=p.inputs.indexOf(w),K=V===0?1:0,j=E[V].dates[0],ue=E[K].dates[0];j!==void 0&&ue!==void 0?V===0&&j>ue?(E[0].setDate(ue,N),E[1].setDate(j,N)):V===1&&j<ue&&(E[0].setDate(j,N),E[1].setDate(ue,N)):p.allowOneSidedRange||(j!==void 0||ue!==void 0)&&(N.clear=!0,E[K].setDate(E[V].dates,N)),E[0].picker.update().render(),E[1].picker.update().render(),delete p._updating}}}var pK=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gS(this,p);var E=Array.isArray(w.inputs)?w.inputs:Array.from(g.querySelectorAll("input"));if(!(E.length<2)){g.rangepicker=this,this.element=g,this.inputs=E.slice(0,2),this.allowOneSidedRange=!!w.allowOneSidedRange;var N=B5.bind(null,this),V=PJ(w),K=[];Object.defineProperty(this,"datepickers",{get:function(){return K}}),IJ(this,N,this.inputs[0],V),IJ(this,N,this.inputs[1],V),Object.freeze(K),K[0].dates.length>0?B5(this,{target:this.inputs[0]}):K[1].dates.length>0&&B5(this,{target:this.inputs[1]})}}return pS(p,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(w){this.allowOneSidedRange=!!w.allowOneSidedRange;var E=PJ(w);this.datepickers[0].setOptions(E),this.datepickers[1].setOptions(E)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),wee(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,N=E?function(V){return q5(V,E,w.datepickers[0].config.locale)}:function(V){return new Date(V)};return this.dates.map(function(V){return V===void 0?V:N(V)})}},{key:"setDates",value:function(w,E){var N=Pm(this.datepickers,2),V=N[0],K=N[1],j=this.dates;this._updating=!0,V.setDate(w),K.setDate(E),delete this._updating,K.dates[0]!==j[1]?B5(this,{target:this.inputs[1]}):V.dates[0]!==j[0]&&B5(this,{target:this.inputs[0]})}}])}(),u7=function(){return u7=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},u7.apply(this,arguments)},Ah={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},wse={id:null,override:!0},Aee=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=Ah),E===void 0&&(E=wse),this._instanceId=E.id?E.id:g.id,this._datepickerEl=g,this._datepickerInstance=null,this._options=u7(u7({},Ah),w),this._initialized=!1,this.init(),Xs.addInstance("Datepicker",this,this._instanceId,E.override)}return p.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new pK(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new $$(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},p.prototype.removeInstance=function(){this.destroy(),Xs.removeInstance("Datepicker",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getDatepickerInstance=function(){return this._datepickerInstance},p.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof pK)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof $$)return this._datepickerInstance.getDate()},p.prototype.setDate=function(g){if(this._options.rangePicker&&this._datepickerInstance instanceof pK)return this._datepickerInstance.setDates(g);if(!this._options.rangePicker&&this._datepickerInstance instanceof $$)return this._datepickerInstance.setDate(g)},p.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},p.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},p.prototype._getDatepickerOptions=function(g){var w={};return g.buttons&&(w.todayBtn=!0,w.clearBtn=!0,g.autoSelectToday&&(w.todayBtnMode=1)),g.autohide&&(w.autohide=!0),g.format&&(w.format=g.format),g.maxDate&&(w.maxDate=g.maxDate),g.minDate&&(w.minDate=g.minDate),g.orientation&&(w.orientation=g.orientation),g.title&&(w.title=g.title),g.language&&(w.language=g.language),w},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function uY(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(p){if(p){var g=p.hasAttribute("datepicker-buttons"),w=p.hasAttribute("datepicker-autoselect-today"),E=p.hasAttribute("datepicker-autohide"),N=p.getAttribute("datepicker-format"),V=p.getAttribute("datepicker-max-date"),K=p.getAttribute("datepicker-min-date"),j=p.getAttribute("datepicker-orientation"),ue=p.getAttribute("datepicker-title"),ge=p.getAttribute("datepicker-language"),Ce=p.hasAttribute("date-rangepicker");new Aee(p,{buttons:g||Ah.buttons,autoSelectToday:w||Ah.autoSelectToday,autohide:E||Ah.autohide,format:N||Ah.format,maxDate:V||Ah.maxDate,minDate:K||Ah.minDate,orientation:j||Ah.orientation,title:ue||Ah.title,language:ge||Ah.language,rangePicker:Ce||Ah.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=Aee,window.initDatepickers=uY);function Cse(){BK(),LK(),FK(),$K(),GK(),KK(),YK(),XK(),JK(),QK(),eY(),tY(),nY(),uY()}typeof window<"u"&&(window.initFlowbite=Cse);var Sse=new gne("load",[BK,LK,FK,$K,GK,KK,YK,XK,JK,QK,eY,tY,nY,uY]);Sse.init();var bK={exports:{}},BJ;function xse(){return BJ||(BJ=1,function(p){(function(){var g=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},w=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},E=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},N=function(e,n){return V(function(o,r){return e.eq(n(o),n(r))})},V=function(e){return{eq:e}},K=V(function(e,n){return e===n}),j=K,ue=function(e){return V(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},ge=function(e,n){return N(ue(e),function(o){return E(o,n)})},Ce=function(e){return V(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!ge(j).eq(r,i))return!1;for(var u=r.length,m=0;m<u;m++){var y=r[m];if(!e.eq(n[y],o[y]))return!1}return!0})},Xe=V(function(e,n){if(e===n)return!0;var o=g(e),r=g(n);return o!==r?!1:w(o)?e===n:o==="array"?ue(Xe).eq(e,n):o==="object"?Ce(Xe).eq(e,n):!1});const Lt=Object.getPrototypeOf,Zt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Pt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Zt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Ct=e=>n=>Pt(n)===e,Ne=e=>n=>typeof n===e,ln=e=>n=>e===n,xt=(e,n)=>Je(e)&&Zt(e,n,(o,r)=>Lt(o)===r),ce=Ct("string"),Je=Ct("object"),Dn=e=>xt(e,Object),Gt=Ct("array"),oe=ln(null),Xt=Ne("boolean"),In=ln(void 0),en=e=>e==null,Fe=e=>!en(e),ve=Ne("function"),so=Ne("number"),at=(e,n)=>{if(Gt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},it=()=>{},M=(e,n)=>(...o)=>e(n.apply(null,o)),Hn=(e,n)=>o=>e(n(o)),ft=e=>()=>e,xo=e=>e,yn=(e,n)=>e===n;function Ae(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const wt=e=>n=>!e(n),Mn=e=>()=>{throw new Error(e)},fn=e=>e(),io=e=>{e()},$e=ft(!1),pt=ft(!0);class W{constructor(n,o){this.tag=n,this.value=o}static some(n){return new W(!0,n)}static none(){return W.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?W.some(n(this.value)):W.none()}bind(n){return this.tag?n(this.value):W.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:W.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Fe(n)?W.some(n):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const Us=Array.prototype.slice,no=Array.prototype.indexOf,_o=Array.prototype.push,zo=(e,n)=>no.call(e,n),pi=(e,n)=>{const o=zo(e,n);return o===-1?W.none():W.some(o)},et=(e,n)=>zo(e,n)>-1,_t=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},dt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},xe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},Ao=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Oo=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const m=e[i];(n(m,i)?o:r).push(m)}return{pass:o,fail:r}},Kt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},is=(e,n,o)=>(Ao(e,(r,i)=>{o=n(o,r,i)}),o),Fo=(e,n,o)=>(xe(e,(r,i)=>{o=n(o,r,i)}),o),zr=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return W.some(u);if(o(u,r))break}return W.none()},Vo=(e,n)=>zr(e,n,$e),Ws=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return W.some(o)}return W.none()},oi=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Gt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);_o.apply(n,e[o])}return n},_s=(e,n)=>oi(dt(e,n)),Ss=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},xs=e=>{const n=Us.call(e,0);return n.reverse(),n},Gr=(e,n)=>Kt(e,o=>!et(n,o)),Ts=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Ko=(e,n)=>{const o=Us.call(e,0);return o.sort(n),o},Mc=(e,n)=>n>=0&&n<e.length?W.some(e[n]):W.none(),lo=e=>Mc(e,0),hs=e=>Mc(e,e.length-1),Rr=ve(Array.from)?Array.from:e=>Us.call(e),Li=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return W.none()},Ki=(e,n)=>{const o=[],r=ve(n)?i=>_t(o,u=>n(u,i)):i=>et(o,i);for(let i=0,u=e.length;i<u;i++){const m=e[i];r(m)||o.push(m)}return o},ts=Object.keys,jc=Object.hasOwnProperty,Tt=(e,n)=>{const o=ts(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],m=e[u];n(m,u)}},go=(e,n)=>Vr(e,(o,r)=>({k:r,v:n(o,r)})),Vr=(e,n)=>{const o={};return Tt(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Ur=e=>(n,o)=>{e[o]=n},La=(e,n,o,r)=>{Tt(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},si=(e,n)=>{const o={},r={};return La(e,n,Ur(o),Ur(r)),{t:o,f:r}},Qo=(e,n)=>{const o={};return La(e,n,Ur(o),it),o},Fa=(e,n)=>{const o=[];return Tt(e,(r,i)=>{o.push(n(r,i))}),o},Fi=e=>Fa(e,xo),Yo=(e,n)=>En(e,n)?W.from(e[n]):W.none(),En=(e,n)=>jc.call(e,n),sr=(e,n)=>En(e,n)&&e[n]!==void 0&&e[n]!==null,ri=(e,n,o=Xe)=>Ce(o).eq(e,n),fl=e=>{const n={};return xe(e,o=>{n[o]={}}),ts(n)},ml=e=>e.length!==void 0,vs=Array.isArray,Cr=e=>{if(vs(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Zs=(e,n,o)=>{if(!e)return!1;if(o=o||e,ml(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(En(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ea=(e,n)=>{const o=[];return Zs(e,(r,i)=>{o.push(n(r,i,e))}),o},Nc=(e,n)=>{const o=[];return Zs(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},Mr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},pe=(e,n,o,r)=>{let i=In(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},fe=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Ve=e=>e[e.length-1],Ge=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Cn=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,m=e.isiOS()||e.isAndroid(),y=m||r("(pointer:coarse)"),x=i||!u&&m&&r("(min-device-width:768px)"),A=u||m&&!x,L=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,$=!A&&!x&&!L;return{isiPad:ft(i),isiPhone:ft(u),isTablet:ft(x),isPhone:ft(A),isTouch:ft(y),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ft(L),isDesktop:ft($)}},Fn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Qn=(e,n)=>{const o=Fn(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return Ke(r(1),r(2))},Os=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?lt():Qn(e,o)},lt=()=>Ke(0,0),Ke=(e,n)=>({major:e,minor:n}),rr={nu:Ke,detect:Os,unknown:lt},Sr=(e,n)=>Li(n.brands,o=>{const r=o.brand.toLowerCase();return Vo(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:rr.nu(parseInt(o.version,10),0)}))}),pa=(e,n)=>{const o=String(n).toLowerCase();return Vo(e,r=>r.search(o))},es=(e,n)=>pa(e,n).map(o=>{const r=rr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),qc=(e,n)=>pa(e,n).map(o=>{const r=rr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Kr=(e,n)=>e.substring(n),_a=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ms=(e,n)=>cs(e,n)?Kr(e,n.length):e,ns=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?In(r)?!0:i+n.length<=r:!1},cs=(e,n)=>_a(e,n,0),Wr=(e,n)=>_a(e,n,e.length-n.length),hc=e=>n=>n.replace(e,""),Ns=hc(/^\s+|\s+$/g),hl=hc(/^\s+/g),ai=hc(/\s+$/g),ls=e=>e.length>0,lr=e=>!ls(e),ar=(e,n)=>n<=0?"":new Array(n+1).join(e),gc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?W.none():W.some(o)},bi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ba=e=>n=>ns(n,e),ys=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ns(e,"edge/")&&ns(e,"chrome")&&ns(e,"safari")&&ns(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bi],search:e=>ns(e,"chrome")&&!ns(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ns(e,"msie")||ns(e,"trident")},{name:"Opera",versionRegexes:[bi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ba("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ba("firefox")},{name:"Safari",versionRegexes:[bi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ns(e,"safari")||ns(e,"mobile/"))&&ns(e,"applewebkit")}],Gd=[{name:"Windows",search:ba("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ns(e,"iphone")||ns(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ba("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ba("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ba("linux"),versionRegexes:[]},{name:"Solaris",search:ba("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ba("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ba("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pc={browsers:ft(ys),oses:ft(Gd)},vu="Edge",yo="Chromium",bc="IE",Ps="Opera",Fl="Firefox",$i="Safari",Pc=()=>Nr({current:void 0,version:rr.unknown()}),Nr=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(vu),isChromium:r(yo),isIE:r(bc),isOpera:r(Ps),isFirefox:r(Fl),isSafari:r($i)}},rd={unknown:Pc,nu:Nr,edge:ft(vu),chromium:ft(yo),ie:ft(bc),opera:ft(Ps),firefox:ft(Fl),safari:ft($i)},ii="Windows",ad="iOS",Gc="Android",id="Linux",pr="macOS",Yi="Solaris",Kc="FreeBSD",yu="ChromeOS",gl=()=>Yc({current:void 0,version:rr.unknown()}),Yc=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(ii),isiOS:r(ad),isAndroid:r(Gc),isMacOS:r(pr),isLinux:r(id),isSolaris:r(Yi),isFreeBSD:r(Kc),isChromeOS:r(yu)}},br={unknown:gl,nu:Yc,windows:ft(ii),ios:ft(ad),android:ft(Gc),linux:ft(id),macos:ft(pr),solaris:ft(Yi),freebsd:ft(Kc),chromeos:ft(yu)},vi={detect:(e,n,o)=>{const r=pc.browsers(),i=pc.oses(),u=n.bind(x=>Sr(r,x)).orThunk(()=>es(r,e)).fold(rd.unknown,rd.nu),m=qc(i,e).fold(br.unknown,br.nu),y=Cn(m,u,e,o);return{browser:u,os:m,deviceType:y}}},$l=e=>window.matchMedia(e).matches;let wu=Ge(()=>vi.detect(window.navigator.userAgent,W.from(window.navigator.userAgentData),$l));const Y=()=>wu(),me=window.navigator.userAgent,ke=Y(),Ye=ke.browser,kt=ke.os,nn=ke.deviceType,$t=me.indexOf("Windows Phone")!==-1,Nn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ye.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ye.isIE(),windowsPhone:$t,browser:{current:Ye.current,version:Ye.version,isChromium:Ye.isChromium,isEdge:Ye.isEdge,isFirefox:Ye.isFirefox,isIE:Ye.isIE,isOpera:Ye.isOpera,isSafari:Ye.isSafari},os:{current:kt.current,version:kt.version,isAndroid:kt.isAndroid,isChromeOS:kt.isChromeOS,isFreeBSD:kt.isFreeBSD,isiOS:kt.isiOS,isLinux:kt.isLinux,isMacOS:kt.isMacOS,isSolaris:kt.isSolaris,isWindows:kt.isWindows},deviceType:{isDesktop:nn.isDesktop,isiPad:nn.isiPad,isiPhone:nn.isiPhone,isPhone:nn.isPhone,isTablet:nn.isTablet,isTouch:nn.isTouch,isWebView:nn.isWebView}},Vn=/^\s*|\s*$/g,To=e=>en(e)?"":(""+e).replace(Vn,""),H=(e,n)=>n?n==="array"&&vs(e)?!0:typeof e===n:e!==void 0,ee=(e,n,o={})=>{const r=ce(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ye=En,Be=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(En(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},cn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Zs(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(cn(i,n,o,r),!0)))},ut={trim:To,isArray:vs,is:H,toArray:Cr,makeMap:ee,each:Zs,map:Ea,grep:Nc,inArray:Mr,hasOwn:ye,extend:Be,walk:cn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Gt(e)?e:e===""?[]:Ea(e.split(n||","),To),_addCacheSuffix:e=>{const n=Nn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ci=(e,n,o=yn)=>e.exists(r=>o(r,n)),us=(e,n,o=yn)=>ur(e,n,o).getOr(e.isNone()&&n.isNone()),Xc=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},ur=(e,n,o)=>e.isSome()&&n.isSome()?W.some(o(e.getOrDie(),n.getOrDie())):W.none(),uo=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?W.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):W.none(),yi=(e,n)=>e?W.some(n):W.none(),Yr=typeof window<"u"?window:Function("return this;")(),wi=(e,n)=>{let o=n??Yr;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},xr=(e,n)=>{const o=e.split(".");return wi(o,n)},Hl=(e,n)=>xr(e,n),Lg=(e,n)=>{const o=Hl(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},x1=Object.getPrototypeOf,Ds=e=>Lg("HTMLElement",e),zl=e=>{const n=xr("ownerDocument.defaultView",e);return Je(e)&&(Ds(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(x1(e).constructor.name))},Xr=8,Ta=9,Ci=11,Cu=1,Bm=3,oo=e=>e.dom.nodeName.toLowerCase(),pl=e=>e.dom.nodeType,Vl=e=>n=>pl(n)===e,Ul=e=>pl(e)===Xr||oo(e)==="#comment",Lm=e=>Is(e)&&zl(e.dom),Is=Vl(Cu),na=Vl(Bm),cd=Vl(Ta),Mh=Vl(Ci),Su=e=>n=>Is(n)&&oo(n)===e,Si=(e,n,o)=>{if(ce(o)||Xt(o)||so(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},oa=(e,n,o)=>{Si(e.dom,n,o)},$a=(e,n)=>{const o=e.dom;Tt(n,(r,i)=>{Si(o,i,r)})},li=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Er=(e,n)=>W.from(li(e,n)),ld=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Bs=(e,n)=>{e.dom.removeAttribute(n)},Kd=e=>{const n=e.dom.attributes;return n==null||n.length===0},zf=e=>Fo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Wl=(e,n)=>{const o=li(e,n);return o===void 0||o===""?[]:o.split(" ")},ud=(e,n,o)=>{const i=Wl(e,n).concat([o]);return oa(e,n,i.join(" ")),!0},dd=(e,n,o)=>{const r=Kt(Wl(e,n),i=>i!==o);return r.length>0?oa(e,n,r.join(" ")):Bs(e,n),!1},xu=e=>e.dom.classList!==void 0,Eu=e=>Wl(e,"class"),Xi=(e,n)=>ud(e,"class",n),Ha=(e,n)=>dd(e,"class",n),Fg=(e,n)=>et(Eu(e),n)?Ha(e,n):Xi(e,n),bl=(e,n)=>{xu(e)?e.dom.classList.add(n):Xi(e,n)},Fm=e=>{(xu(e)?e.dom.classList:Eu(e)).length===0&&Bs(e,"class")},fd=(e,n)=>{xu(e)?e.dom.classList.remove(n):Ha(e,n),Fm(e)},$m=(e,n)=>{const o=xu(e)?e.dom.classList.toggle(n):Fg(e,n);return Fm(e),o},Vf=(e,n)=>xu(e)&&e.dom.classList.contains(n),md=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return _u(r.childNodes[0])},Uf=(e,n)=>{const r=(n||document).createElement(e);return _u(r)},Hm=(e,n)=>{const r=(n||document).createTextNode(e);return _u(r)},_u=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},be={fromHtml:md,fromTag:Uf,fromText:Hm,fromDom:_u,fromPoint:(e,n,o)=>W.from(e.dom.elementFromPoint(n,o)).map(_u)},hd=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},xi=(e,n)=>{const o=e.dom;if(o.nodeType!==Cu)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},E1=e=>e.nodeType!==Cu&&e.nodeType!==Ta&&e.nodeType!==Ci||e.childElementCount===0,$g=(e,n)=>{const o=n===void 0?document:n.dom;return E1(o)?[]:dt(o.querySelectorAll(e),be.fromDom)},Tu=(e,n)=>{const o=n===void 0?document:n.dom;return E1(o)?W.none():W.from(o.querySelector(e)).map(be.fromDom)},No=(e,n)=>e.dom===n.dom,dr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ka=e=>be.fromDom(e.dom.ownerDocument),Zl=e=>cd(e)?e:ka(e),Nh=e=>be.fromDom(Zl(e).dom.documentElement),gd=e=>be.fromDom(Zl(e).dom.defaultView),za=e=>W.from(e.dom.parentNode).map(be.fromDom),Wf=e=>W.from(e.dom.parentElement).map(be.fromDom),Zf=(e,n)=>{const o=ve(n)?n:$e;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=be.fromDom(u);if(i.push(m),o(m)===!0)break;r=u}return i},jl=e=>{const n=o=>Kt(o,r=>!No(e,r));return za(e).map(va).map(n).getOr([])},ql=e=>W.from(e.dom.previousSibling).map(be.fromDom),Yd=e=>W.from(e.dom.nextSibling).map(be.fromDom),vc=e=>xs(hd(e,ql)),jf=e=>hd(e,Yd),va=e=>dt(e.dom.childNodes,be.fromDom),Gl=(e,n)=>{const o=e.dom.childNodes;return W.from(o[n]).map(be.fromDom)},Ic=e=>Gl(e,0),Va=e=>Gl(e,e.dom.childNodes.length-1),ku=e=>e.dom.childNodes.length,Hg=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return be.fromDom(n)},qf=e=>Mh(e)&&Fe(e.dom.host),Jc=e=>be.fromDom(e.dom.getRootNode()),pd=e=>qf(e)?e:Hg(Zl(e)),zg=e=>qf(e)?e:be.fromDom(Zl(e).dom.body),Vm=e=>{const n=Jc(e);return qf(n)?W.some(n):W.none()},Vg=e=>be.fromDom(e.dom.host),Ug=e=>{if(Fe(e.target)){const n=be.fromDom(e.target);if(Is(n)&&Um(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return lo(o)}}return W.from(e.target)},Um=e=>Fe(e.dom.shadowRoot),Kl=e=>{const n=na(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Vm(be.fromDom(n)).fold(()=>o.body.contains(n),Hn(Kl,Vg))};var Gf=(e,n,o,r,i)=>e(o,r)?W.some(o):ve(i)&&i(o)?W.none():n(o,r,i);const vl=(e,n,o)=>{let r=e.dom;const i=ve(o)?o:$e;for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r);if(n(u))return W.some(u);if(i(u))break}return W.none()},Js=(e,n,o)=>Gf((i,u)=>u(i),vl,e,n,o),Jr=(e,n)=>{const o=e.dom;return o.parentNode?Ei(be.fromDom(o.parentNode),r=>!No(e,r)&&n(r)):W.none()},Ei=(e,n)=>{const o=i=>n(be.fromDom(i));return Vo(e.dom.childNodes,o).map(be.fromDom)},Kf=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=be.fromDom(r.childNodes[i]);if(n(u))return W.some(u);const m=o(r.childNodes[i]);if(m.isSome())return m}return W.none()};return o(e.dom)},Xd=(e,n,o)=>vl(e,r=>xi(r,n),o),Qr=(e,n)=>Tu(n,e),gn=(e,n,o)=>Gf((i,u)=>xi(i,u),Xd,e,n,o),Yf=e=>gn(e,"[contenteditable]"),Au=(e,n=!1)=>Kl(e)?e.dom.isContentEditable:Yf(e).fold(ft(n),o=>_i(o)==="true"),_i=e=>e.dom.contentEditable,Xo=(e,n)=>{e.dom.contentEditable=n?"true":"false"},bd=e=>e.style!==void 0&&ve(e.style.getPropertyValue),Xf=(e,n,o)=>{if(!ce(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);bd(e)&&e.style.setProperty(n,o)},Wm=(e,n)=>{bd(e)&&e.style.removeProperty(n)},Ph=(e,n,o)=>{const r=e.dom;Xf(r,n,o)},Xn=(e,n)=>{const o=e.dom;Tt(n,(r,i)=>{Xf(o,i,r)})},vr=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!Kl(e)?Ou(o,n):i},Ou=(e,n)=>bd(e)?e.style.getPropertyValue(n):"",Hi=(e,n)=>{const o=e.dom,r=Ou(o,n);return W.from(r).filter(i=>i.length>0)},Ti=e=>{const n={},o=e.dom;if(bd(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},Ji=(e,n)=>{const o=e.dom;Wm(o,n),ci(Er(e,"style").map(Ns),"")&&Bs(e,"style")},sa=e=>e.dom.offsetWidth,ui=(e,n)=>{za(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},yc=(e,n)=>{Yd(e).fold(()=>{za(e).each(i=>{Ls(i,n)})},r=>{ui(r,n)})},Zm=(e,n)=>{Ic(e).fold(()=>{Ls(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Ls=(e,n)=>{e.dom.appendChild(n.dom)},jm=(e,n)=>{ui(e,n),Ls(n,e)},_r=(e,n)=>{xe(n,(o,r)=>{const i=r===0?e:n[r-1];yc(i,o)})},Du=(e,n)=>{xe(n,o=>{Ls(e,o)})},yl=e=>{e.dom.textContent="",xe(va(e),n=>{ws(n)})},ws=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Qc=e=>{const n=va(e);n.length>0&&_r(e,n),ws(e)},Jd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,va(be.fromDom(r))},Ru=e=>dt(e,be.fromDom),Fs=e=>e.dom.innerHTML,Yl=(e,n)=>{const r=ka(e).dom,i=be.fromDom(r.createDocumentFragment()),u=Jd(n,r);Du(i,u),yl(e),Ls(e,i)},wc=e=>{const n=be.fromTag("div"),o=be.fromDom(e.dom.cloneNode(!0));return Ls(n,o),Fs(n)},po=(e,n,o,r,i,u,m)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:m}),vd=e=>{const n=be.fromDom(Ug(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=M(r,o);return po(n,e.clientX,e.clientY,o,r,i,e)},qm=(e,n)=>o=>{e(o)&&n(vd(o))},k=(e,n,o,r,i)=>{const u=qm(o,r);return e.dom.addEventListener(n,u,i),{unbind:Ae(q,e,n,u,i)}},B=(e,n,o,r)=>k(e,n,o,r,!1),q=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},he=(e,n)=>({left:e,top:n,translate:(r,i)=>he(e+r,n+i)}),Se=he,gt=e=>{const n=e.getBoundingClientRect();return Se(n.left,n.top)},kn=(e,n)=>e!==void 0?e:n!==void 0?n:0,eo=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return Se(o.offsetLeft,o.offsetTop);const u=kn(r==null?void 0:r.pageYOffset,i.scrollTop),m=kn(r==null?void 0:r.pageXOffset,i.scrollLeft),y=kn(i.clientTop,o.clientTop),x=kn(i.clientLeft,o.clientLeft);return Gn(e).translate(m-x,u-y)},Gn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Se(r.offsetLeft,r.offsetTop):Kl(e)?gt(n):Se(0,0)},pn=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Se(o,r)},Qs=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},Tr=(e,n)=>{Y().browser.isSafari()&&ve(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},ki=e=>{const n=e===void 0?window:e;return Y().browser.isFirefox()?W.none():W.from(n.visualViewport)},Mu=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),_1=e=>{const n=e===void 0?window:e,o=n.document,r=pn(be.fromDom(o));return ki(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,m=i.clientHeight;return Mu(r.left,r.top,u,m)},i=>Mu(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},Qd=(e,n)=>Kt(va(e),n),Wg=(e,n)=>{let o=[];return xe(va(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Wg(r,n))}),o},Ua=(e,n)=>$g(n,e),Zg=(e,n,o)=>vl(e,n,o).isSome(),y0=(e,n)=>Jr(e,n).isSome(),T1=(e,n)=>Kf(e,n).isSome();class Wa{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const jg="\uFEFF",ea=" ",k1=e=>e===jg,Za=e=>e.replace(/\uFEFF/g,""),Bn=/^[ \t\r\n]*$/,el=e=>Bn.test(e),Jf=e=>{for(const n of e)if(!k1(n))return!1;return!0},Gm=e=>" \f	\v".indexOf(e)!==-1,w0=e=>e===`
`||e==="\r",qg=(e,n)=>n<e.length&&n>=0?w0(e[n]):!1,wl=(e,n=4,o=!0,r=!0)=>{const i=ar(" ",n),u=e.replace(/\t/g,i);return Fo(u,(y,x)=>Gm(x)||x===ea?y.pcIsSpace||y.str===""&&o||y.str.length===u.length-1&&r||qg(u,y.str.length+1)?{pcIsSpace:!1,str:y.str+ea}:{pcIsSpace:!0,str:y.str+" "}:{pcIsSpace:w0(x),str:y.str+x},{pcIsSpace:!1,str:""}).str},Nu=e=>n=>!!n&&n.nodeType===e,ef=e=>!!e&&!Object.getPrototypeOf(e),Wt=Nu(1),tl=e=>Wt(e)&&Lm(be.fromDom(e)),A1=e=>Wt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Qf=e=>{const n=e.toLowerCase();return o=>Fe(o)&&o.nodeName.toLowerCase()===n},Cl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return et(n,r)}return!1}},Ih=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Wt(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const m=i.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},tf=e=>n=>Wt(n)&&n.hasAttribute(e),em=e=>Wt(e)&&e.hasAttribute("data-mce-bogus"),Bh=e=>Wt(e)&&e.getAttribute("data-mce-bogus")==="all",Xl=e=>Wt(e)&&e.tagName==="TABLE",C0=e=>n=>!!(tl(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),fr=Cl(["textarea","input"]),bt=Nu(3),zi=Nu(4),Jl=Nu(7),ra=Nu(8),Km=Nu(9),aa=Nu(11),qo=Qf("br"),Gg=Qf("img"),rt=C0("true"),Uo=C0("false"),Kg=Cl(["td","th"]),ia=Cl(["td","th","caption"]),ya=Cl(["video","audio","object","embed"]),Sl=Qf("li"),O1=Qf("details"),nf=Qf("summary"),D1={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Cc=(e,n,o)=>{const r=be.fromDom(n),i=be.fromDom(e),u=o.getWhitespaceElements();return Zg(i,y=>En(u,oo(y)),Ae(No,r))},Wo=e=>Wt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Pu=(e,n)=>Wt(e)&&En(n.getNonEmptyElements(),e.nodeName),Lh=tf("data-mce-bookmark"),yr=e=>Wf(be.fromDom(e)).exists(n=>!Au(n)),Fh=(e,n,o)=>el(e.data)&&!Cc(e,n,o),yd=(e,n,o,r)=>bt(e)&&!Fh(e,n,o)&&(!r.includeZwsp||!Jf(e.data)),Yg=(e,n,o,r)=>ve(r.isContent)&&r.isContent(n)||Pu(n,e)||Lh(n)||Wo(n)||yd(n,o,e,r)||Uo(n)||rt(n)&&yr(n),ca=(e,n,o)=>{const r={...D1,...o};if(r.checkRootAsContent&&Yg(e,n,n,r))return!1;let i=n.firstChild,u=0;if(!i)return!0;const m=new Wa(i,n);do{if(r.skipBogus&&Wt(i)){const y=i.getAttribute("data-mce-bogus");if(y){i=m.next(y==="all");continue}}if(ra(i)){i=m.next(!0);continue}if(qo(i)){u++,i=m.next();continue}if(Yg(e,i,n,r))return!1;i=m.next()}while(i);return u<=1},la=(e,n,o)=>ca(e,n.dom,{checkRootAsContent:!0,...o}),Pe=(e,n,o)=>Yg(e,n,n,{includeZwsp:D1.includeZwsp,...o}),$s=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},R1=e=>{const n=$s(W.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(y))}}},er=e=>{const n=$s(W.none()),o=()=>n.get().each(y=>clearInterval(y));return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(setInterval(y,e)))}}},Aa=()=>{const e=R1(it);return{...e,on:o=>e.get().each(o)}},Oa=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},os=e=>Oa(e)!=="html",M1=e=>os(e.nodeName),_=e=>Oa(e.nodeName),R=["svg","math"],Z=()=>{const e=Aa(),n=()=>e.get().map(_).getOr("html");return{track:i=>(M1(i)?e.set(i):e.get().exists(u=>!u.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},ne="data-mce-block",_e=e=>Kt(ts(e),n=>!/[A-Z]/.test(n)),st=e=>dt(_e(e),n=>{const o=CSS.escape(n);return`${o}:`+dt(R,r=>`not(${r} ${o})`).join(":")}).join(","),At=(e,n)=>Fe(n.querySelector(e))?(n.setAttribute(ne,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(ne),!1),un=(e,n)=>{const o=st(e.getTransparentElements()),r=st(e.getBlockElements());return Kt(n.querySelectorAll(o),i=>At(r,i))},jn=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let u=n[i];u;u=u[i])if(ca(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},to=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();jn(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const m=r.extractContents();jn(e,m,!1),ca(e,u,{checkRootAsContent:!0})||i.insertBefore(u,n),ca(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),ca(e,m,{checkRootAsContent:!0})||i.insertBefore(m,n),i.removeChild(n)}},gs=(e,n,o)=>{const r=e.getBlockElements(),i=be.fromDom(n),u=y=>oo(y)in r,m=y=>No(y,i);xe(Ru(o),y=>{vl(y,u,m).each(x=>{const A=Qd(y,L=>u(L)&&!e.isValidChild(oo(x),oo(L)));if(A.length>0){const L=Wf(x);xe(A,$=>{vl($,u,m).each(z=>{to(e,z.dom,$.dom)})}),L.each($=>un(e,$.dom))}})})},ds=(e,n,o)=>{xe([...o,...Iu(e,n)?[n]:[]],r=>xe(Ua(be.fromDom(r),r.nodeName.toLowerCase()),i=>{eu(e,i.dom)&&Qc(i)}))},Hs=(e,n)=>{const o=un(e,n);gs(e,n,o),ds(e,n,o)},Sc=(e,n)=>{if(Ym(e,n)){const o=st(e.getBlockElements());At(o,n)}},Ql=(e,n,o)=>{const r=u=>No(u,be.fromDom(n)),i=Zf(be.fromDom(o),r);Mc(i,i.length-2).filter(Is).fold(()=>Hs(e,n),u=>Hs(e,u.dom))},Ai=e=>e.hasAttribute(ne),xl=(e,n)=>En(e.getTransparentElements(),n),Ym=(e,n)=>Wt(n)&&xl(e,n.nodeName),Iu=(e,n)=>Ym(e,n)&&Ai(n),eu=(e,n)=>Ym(e,n)&&!Ai(n),of=(e,n)=>n.type===1&&xl(e,n.name)&&ce(n.attr(ne)),Xg=Y().browser,$h=e=>Vo(e,Is),Jg=e=>Xg.isFirefox()&&oo(e)==="table"?$h(va(e)).filter(n=>oo(n)==="caption").bind(n=>$h(jf(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,ua=(e,n)=>e.children&&et(e.children,n),tu=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&vr(be.fromDom(e),"position")==="static"){const y=n.getBoundingClientRect();return r=y.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=y.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let m=n;for(;m&&m!==o&&m.nodeType&&!ua(m,o);){const y=m;r+=y.offsetLeft||0,i+=y.offsetTop||0,m=y.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!ua(m,o);)r-=m.scrollLeft||0,i-=m.scrollTop||0,m=m.parentNode;i+=Jg(be.fromDom(n))}return{x:r,y:i}},Ro=(e,n={})=>{let o=0;const r={},i=be.fromDom(e),u=Zl(i),m=Ee=>{n.referrerPolicy=Ee},y=Ee=>{n.contentCssCors=Ee},x=Ee=>{Ls(pd(i),Ee)},A=Ee=>{const Re=pd(i);Qr(Re,"#"+Ee).each(ws)},L=Ee=>Yo(r,Ee).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),$=Ee=>new Promise((Re,Me)=>{let Ie;const ct=ut._addCacheSuffix(Ee),Ot=L(ct);r[ct]=Ot,Ot.count++;const Qt=(sn,_n)=>{xe(sn,io),Ot.status=_n,Ot.passed=[],Ot.failed=[],Ie&&(Ie.onload=null,Ie.onerror=null,Ie=null)},tt=()=>Qt(Ot.passed,2),Ze=()=>Qt(Ot.failed,3);if(Re&&Ot.passed.push(Re),Me&&Ot.failed.push(Me),Ot.status===1)return;if(Ot.status===2){tt();return}if(Ot.status===3){Ze();return}Ot.status=1;const ht=be.fromTag("link",u.dom);$a(ht,{rel:"stylesheet",type:"text/css",id:Ot.id}),n.contentCssCors&&oa(ht,"crossOrigin","anonymous"),n.referrerPolicy&&oa(ht,"referrerpolicy",n.referrerPolicy),Ie=ht.dom,Ie.onload=tt,Ie.onerror=Ze,x(ht),oa(ht,"href",ct)}),z=(Ee,Re)=>{const Me=L(Ee);r[Ee]=Me,Me.count++;const Ie=be.fromTag("style",u.dom);$a(Ie,{rel:"stylesheet",type:"text/css",id:Me.id,"data-mce-key":Ee}),Ie.dom.innerHTML=Re,x(Ie)},X=Ee=>Promise.allSettled(dt(Ee,Me=>$(Me).then(ft(Me)))).then(Me=>{const Ie=Oo(Me,ct=>ct.status==="fulfilled");return Ie.fail.length>0?Promise.reject(dt(Ie.fail,ct=>ct.reason)):dt(Ie.pass,ct=>ct.value)}),se=Ee=>{const Re=ut._addCacheSuffix(Ee);Yo(r,Re).each(Me=>{--Me.count===0&&(delete r[Re],A(Me.id))})};return{load:$,loadRawCss:z,loadAll:X,unload:se,unloadRawCss:Ee=>{Yo(r,Ee).each(Re=>{--Re.count===0&&(delete r[Ee],A(Re.id))})},unloadAll:Ee=>{xe(Ee,Re=>{se(Re)})},_setReferrerPolicy:m,_setContentCssCors:y}},Oi=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Jc(o).dom;return W.from(e.get(u)).getOrThunk(()=>{const m=Ro(u,r);return e.set(u,m),m})}}})(),Ir=e=>e.nodeName.toLowerCase()==="span",Hh=(e,n)=>Fe(e)&&(Pe(n,e)||n.isInline(e.nodeName.toLowerCase())),Qg=(e,n,o)=>{const r=new Wa(e,n).prev(!1),i=new Wa(e,n).next(!1),u=In(r)||Hh(r,o),m=In(i)||Hh(i,o);return u&&m},wd=e=>Ir(e)&&e.getAttribute("data-mce-type")==="bookmark",Bc=(e,n,o)=>bt(e)&&e.data.length>0&&Qg(e,n,o),Cd=e=>Wt(e)?e.childNodes.length>0:!1,vS=e=>aa(e)||Km(e),Vi=(e,n,o,r)=>{var i;const u=r||n;if(Wt(n)&&wd(n))return n;const m=n.childNodes;for(let y=m.length-1;y>=0;y--)Vi(e,m[y],o,u);if(Wt(n)){const y=n.childNodes;y.length===1&&wd(y[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(y[0],n))}return!vS(n)&&!Pe(o,n)&&!Cd(n)&&!Bc(n,u,o)&&e.remove(n),n},yS=ut.makeMap,nu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zh=/[<>&\"\']/g,Uk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ep={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Vh={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},wS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Br=e=>{const n=be.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},s2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!Vh[u]){const m="&"+r[i+1]+";";o[u]=m,o[m]=u}}return o}else return},Sd=s2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xm=(e,n)=>e.replace(n?nu:tm,o=>Vh[o]||o),tp=e=>(""+e).replace(zh,n=>Vh[n]||n),ou=(e,n)=>e.replace(n?nu:tm,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Vh[o]||"&#"+o.charCodeAt(0)+";"),Di=(e,n,o)=>{const r=o||Sd;return e.replace(n?nu:tm,i=>Vh[i]||r[i]||i)},Uh={encodeRaw:Xm,encodeAllRaw:tp,encodeNumeric:ou,encodeNamed:Di,getEncodeFunc:(e,n)=>{const o=s2(n)||Sd,r=(m,y)=>m.replace(y?nu:tm,x=>Vh[x]!==void 0?Vh[x]:o[x]!==void 0?o[x]:x.length>1?"&#"+((x.charCodeAt(0)-55296)*1024+(x.charCodeAt(1)-56320)+65536)+";":"&#"+x.charCodeAt(0)+";"),i=(m,y)=>Di(m,y,o),u=yS(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:Di:u.numeric?ou:Xm},decode:e=>e.replace(Uk,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):ep[o]||String.fromCharCode(o)):wS[n]||Sd[n]||Br(n))},ja=(e,n)=>(e=ut.trim(e),e?e.split(n||" "):[]),x0=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),E0=e=>Je(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",CS=e=>{const n=o=>Gt(o)?dt(o,n):E0(o)?new RegExp(o.source,o.flags):Je(o)?go(o,n):o;return n(e)},P1=e=>{const n=/^(~)?(.+)$/;return _s(ja(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",m=r[2];return[{cloneName:u,name:m}]}else return[]})},I1=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),nm=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Qi=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=nm(e),i=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},Lc={html4:Ge(()=>Qi("html4")),html5:Ge(()=>Qi("html5")),"html5-strict":Ge(()=>Qi("html5-strict"))},xd=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=Lc[e]();return n==="blocks"?W.some(o):n==="phrasing"?W.some(r):n==="flow"?W.some(i):W.none()},r2=e=>{const n=I1(e),{phrasingContent:o,flowContent:r}=nm(e),i={},u=(x,A,L)=>{i[x]={attributes:Ts(A,ft({})),attributesOrder:A,children:Ts(L,ft({}))}},m=(x,A="",L="")=>{const $=ja(L),z=ja(x);let X=z.length;const se=[...n,...ja(A)];for(;X--;)u(z[X],se.slice(),$)},y=(x,A)=>{const L=ja(x),$=ja(A);let z=L.length;for(;z--;){const X=i[L[z]];for(let se=0,te=$.length;se<te;se++)X.attributes[$[se]]={},X.attributesOrder.push($[se])}};return e!=="html5-strict"&&(xe(ja("acronym applet basefont big font strike tt"),L=>{m(L,"",o)}),xe(ja("center dir isindex noframes"),L=>{m(L,"",r)})),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),m("dd div","",r),m("address dt caption","",e==="html4"?o:r),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),m("blockquote","cite",r),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",r),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?o:r),m("q","cite",o),m("ins del","cite datetime",r),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",r),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),m("param","name value"),m("map","name",[r,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",r),m("th","colspan rowspan headers scope abbr",r),m("form","accept-charset action autocomplete enctype method name novalidate target",r),m("fieldset","disabled form name",[r,"legend"].join(" ")),m("label","form for",o),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[r,"li"].join(" ")),m("noscript","",r),e!=="html4"&&(m("wbr"),m("ruby","",[o,"rt rp"].join(" ")),m("figcaption","",r),m("mark rt rp bdi","",o),m("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),m("canvas","width height",r),m("data","value",o),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[o,"option"].join(" ")),m("article section nav aside main header footer","",r),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[r,"figcaption"].join(" ")),m("time","datetime",o),m("dialog","open",r),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",o),m("progress","value max",o),m("meter","value min max low high optimum",o),m("details","open",[r,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),e!=="html4"&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&xe([i.video,i.audio],x=>{delete x.children.audio,delete x.children.video}),xe(ja("a form meter progress dfn"),x=>{i[x]&&delete i[x].children[x]}),delete i.caption.children.table,delete i.script,i},B1=e=>e==="-"?"remove":"add",np=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return W.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},SS=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return _s(ja(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?B1(i):"replace",m=r[2],y=_s(ja(r[3],"|"),x=>np(x).toArray());return[{operation:u,name:m,validChildren:y}]}else return[]})},xS=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return xe(ja(e,"|"),m=>{const y=o.exec(m);if(y){const x={},A=y[1],L=y[2].replace(/[\\:]:/g,":"),$=y[3],z=y[4];if(A==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(L),x.required=!0),A==="-"){delete i[L],u.splice(ut.inArray(u,L),1);return}if($&&($==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:L,value:z}),x.defaultValue=z):$==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:L,value:z}),x.forcedValue=z):$==="<"&&(x.validValues=ut.makeMap(z,"?"))),r.test(L)){const X=x;n.attributePatterns=n.attributePatterns||[],X.pattern=x0(L),n.attributePatterns.push(X)}else i[L]||u.push(L),i[L]=x}})},ES=(e,n)=>{Tt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},a2=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return _s(ja(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],m=i[2],y=i[3],x=i[4],A=i[5],L={attributes:{},attributesOrder:[]};if(e.each($=>ES($,L)),u==="#"?L.paddEmpty=!0:u==="-"&&(L.removeEmpty=!0),x==="!"&&(L.removeEmptyAttrs=!0),A&&xS(A,L),y&&(L.outputName=m),m==="@")if(e.isNone())e=W.some(L);else return[];return[y?{name:m,element:L,aliasName:y}:{name:m,element:L}]}else return[]})},Jm={},bo=ut.makeMap,bn=ut.each,Qm=ut.extend,_0=ut.explode,L1=(e,n={})=>{const o=bo(e," ",bo(e.toUpperCase()," "));return Qm(o,n)},_S=e=>L1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),T0=(e,n)=>{if(e){const o={};return ce(e)&&(e={"*":e}),bn(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?bo(r,/[, ]/):_0(r,/[, ]/)}),o}else return},fs=(e={})=>{var n;const o={},r={};let i=[];const u={},m={},y=(wn,Lo,qr)=>{const Ia=e[wn];if(Ia)return bo(Ia,/[, ]/,bo(Ia.toUpperCase(),/[, ]/));{let gi=Jm[wn];return gi||(gi=L1(Lo,qr),Jm[wn]=gi),gi}},x=(n=e.schema)!==null&&n!==void 0?n:"html5",A=r2(x);e.verify_html===!1&&(e.valid_elements="*[*]");const L=T0(e.valid_styles),$=T0(e.invalid_styles,"map"),z=T0(e.valid_classes,"map"),X=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),se=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),te=y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ie=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Ee="td th iframe video audio object script code",Re=y("non_empty_elements",Ee+" pre svg textarea summary",te),Me=y("move_caret_before_on_enter_elements",Ee+" table",te),Ie="h1 h2 h3 h4 h5 h6",ct=y("text_block_elements",Ie+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ot=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ct),Qt=y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),tt=y("transparent_elements","a ins del canvas map"),Ze=y("wrap_block_elements","pre "+Ie);bn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),wn=>{m[wn]=new RegExp("</"+wn+"[^>]*>","gi")});const ht=wn=>{const Lo=W.from(o["@"]),qr=/[*?+]/;xe(a2(Lo,wn??""),({name:Ia,element:gi,aliasName:Ba})=>{if(Ba&&(o[Ba]=gi),qr.test(Ia)){const Or=gi;Or.pattern=x0(Ia),i.push(Or)}else o[Ia]=gi})},sn=wn=>{i=[],xe(ts(o),Lo=>{delete o[Lo]}),ht(wn)},_n=(wn,Lo)=>{var qr,Ia;delete Jm.text_block_elements,delete Jm.block_elements;const gi=Lo.extends?!mu(Lo.extends):!1,Ba=Lo.extends;if(r[wn]=Ba?r[Ba]:{},u[wn]=Ba??wn,Re[wn.toUpperCase()]={},Re[wn]={},gi||(Ot[wn.toUpperCase()]={},Ot[wn]={}),Ba&&!o[wn]&&o[Ba]){const Or=CS(o[Ba]);delete Or.removeEmptyAttrs,delete Or.removeEmpty,o[wn]=Or}else o[wn]={attributesOrder:[],attributes:{}};if(Gt(Lo.attributes)){const Or=Vc=>{Dr.attributesOrder.push(Vc),Dr.attributes[Vc]={}},Dr=(qr=o[wn])!==null&&qr!==void 0?qr:{};delete Dr.attributesDefault,delete Dr.attributesForced,delete Dr.attributePatterns,delete Dr.attributesRequired,Dr.attributesOrder=[],Dr.attributes={},xe(Lo.attributes,Vc=>{const Zd=I1(x);np(Vc).each(({preset:Rm,name:If})=>{Rm?If==="global"&&xe(Zd,Or):Or(If)})}),o[wn]=Dr}if(Xt(Lo.padEmpty)){const Or=(Ia=o[wn])!==null&&Ia!==void 0?Ia:{};Or.paddEmpty=Lo.padEmpty,o[wn]=Or}if(Gt(Lo.children)){const Or={},Dr=Zd=>{Or[Zd]={}},Vc=Zd=>{xd(x,Zd).each(Rm=>{xe(Rm,Dr)})};xe(Lo.children,Zd=>{np(Zd).each(({preset:Rm,name:If})=>{Rm?Vc(If):Dr(If)})}),r[wn]=Or}Ba&&Tt(r,(Or,Dr)=>{Or[Ba]&&(r[Dr]=Or=Qm({},r[Dr]),Or[wn]=Or[Ba])})},Zn=wn=>{xe(P1(wn??""),({name:Lo,cloneName:qr})=>{_n(Lo,{extends:qr})})},ho=wn=>{Je(wn)?Tt(wn,(Lo,qr)=>_n(qr,Lo)):ce(wn)&&Zn(wn)},as=wn=>{xe(SS(wn??""),({operation:Lo,name:qr,validChildren:Ia})=>{const gi=Lo==="replace"?{"#comment":{}}:r[qr],Ba=Dr=>{Lo==="remove"?delete gi[Dr]:gi[Dr]={}},Or=Dr=>{xd(x,Dr).each(Vc=>{xe(Vc,Ba)})};xe(Ia,({preset:Dr,name:Vc})=>{Dr?Or(Vc):Ba(Vc)}),r[qr]=gi})},Cs=wn=>{const Lo=o[wn];if(Lo)return Lo;let qr=i.length;for(;qr--;){const Ia=i[qr];if(Ia.pattern.test(wn))return Ia}},jr=()=>{e.valid_elements?(sn(e.valid_elements),bn(A,(wn,Lo)=>{r[Lo]=wn.children})):(bn(A,(wn,Lo)=>{o[Lo]={attributes:wn.attributes,attributesOrder:wn.attributesOrder},r[Lo]=wn.children}),bn(ja("strong/b em/i"),wn=>{const Lo=ja(wn,"/");o[Lo[1]].outputName=Lo[0]}),bn(Qt,(wn,Lo)=>{o[Lo]&&(e.padd_empty_block_inline_children&&(o[Lo].paddInEmptyBlock=!0),o[Lo].removeEmpty=!0)}),bn(ja("ol ul blockquote a table tbody"),wn=>{o[wn]&&(o[wn].removeEmpty=!0)}),bn(ja("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),wn=>{o[wn]&&(o[wn].paddEmpty=!0)}),bn(ja("span"),wn=>{o[wn].removeEmptyAttrs=!0})),delete o.svg,ho(e.custom_elements),as(e.valid_children),ht(e.extended_valid_elements),as("+ol[ul|ol],+ul[ul|ol]"),bn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(wn,Lo)=>{o[Lo]&&(o[Lo].parentsRequired=ja(wn))}),e.invalid_elements&&bn(_0(e.invalid_elements),wn=>{o[wn]&&delete o[wn]}),Cs("span")||ht("span[!data-mce-type|*]")},qi=ft(L),hi=ft($),Ft=ft(z),xn=ft(ie),Zo=ft(Ot),Yt=ft(ct),Ln=ft(Qt),zn=ft(Object.seal(te)),qt=ft(se),vo=ft(Re),Eo=ft(Me),Pa=ft(X),ms=ft(tt),dc=ft(Ze),Nl=ft(Object.seal(m)),Dm=(wn,Lo)=>{const qr=r[wn.toLowerCase()];return!!(qr&&qr[Lo.toLowerCase()])},Rc=(wn,Lo)=>{const qr=Cs(wn);if(qr)if(Lo){if(qr.attributes[Lo])return!0;const Ia=qr.attributePatterns;if(Ia){let gi=Ia.length;for(;gi--;)if(Ia[gi].pattern.test(Lo))return!0}}else return!0;return!1},mu=wn=>En(Zo(),wn),hu=wn=>!cs(wn,"#")&&Rc(wn)&&!mu(wn),Gi=wn=>En(dc(),wn)||hu(wn),gu=ft(u);return jr(),{type:x,children:r,elements:o,getValidStyles:qi,getValidClasses:Ft,getBlockElements:Zo,getInvalidStyles:hi,getVoidElements:zn,getTextBlockElements:Yt,getTextInlineElements:Ln,getBoolAttrs:xn,getElementRule:Cs,getSelfClosingElements:qt,getNonEmptyElements:vo,getMoveCaretBeforeOnEnterElements:Eo,getWhitespaceElements:Pa,getTransparentElements:ms,getSpecialElements:Nl,isValidChild:Dm,isValid:Rc,isBlock:mu,isInline:hu,isWrapper:Gi,getCustomElements:gu,addValidElements:ht,setValidElements:sn,addCustomElements:ho,addValidChildren:as}},i2=e=>({value:Wk(e)}),Wk=e=>Ms(e,"#").toUpperCase(),c2=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},ot=e=>{const n=c2(e.red)+c2(e.green)+c2(e.blue);return i2(n)},k0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,F1=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,A0=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),$1=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),y=parseFloat(r);return A0(i,u,m,y)},op=e=>k0.test(e)?"rgb":F1.test(e)?"rgba":"other",O0=e=>{const n=k0.exec(e);if(n!==null)return W.some($1(n[1],n[2],n[3],"1"));const o=F1.exec(e);return o!==null?W.some($1(o[1],o[2],o[3],o[4])):W.none()},Wh=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,H1=e=>O0(e).map(ot).map(n=>"#"+n.value).getOr(e),eh=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let m,y;const x=jg;n&&(m=n.getValidStyles(),y=n.getInvalidStyles());const A=(`\\" \\' \\; \\: ; : `+x).split(" ");for(let $=0;$<A.length;$++)u[A[$]]=x+$,u[x+$]=A[$];const L={parse:$=>{const z={};let X=!1;const se=e.url_converter,te=e.url_converter_scope||L,ie=(tt,Ze,ht)=>{const sn=z[tt+"-top"+Ze];if(!sn)return;const _n=z[tt+"-right"+Ze];if(!_n)return;const Zn=z[tt+"-bottom"+Ze];if(!Zn)return;const ho=z[tt+"-left"+Ze];if(!ho)return;const as=[sn,_n,Zn,ho];let Cs=as.length-1;for(;Cs--&&as[Cs]===as[Cs+1];);Cs>-1&&ht||(z[tt+Ze]=Cs===-1?as[0]:as.join(" "),delete z[tt+"-top"+Ze],delete z[tt+"-right"+Ze],delete z[tt+"-bottom"+Ze],delete z[tt+"-left"+Ze])},Ee=tt=>{const Ze=z[tt];if(!Ze)return;const ht=Ze.indexOf(",")>-1?[Ze]:Ze.split(" ");let sn=ht.length;for(;sn--;)if(ht[sn]!==ht[0])return!1;return z[tt]=ht[0],!0},Re=(tt,Ze,ht,sn)=>{Ee(Ze)&&Ee(ht)&&Ee(sn)&&(z[tt]=z[Ze]+" "+z[ht]+" "+z[sn],delete z[Ze],delete z[ht],delete z[sn])},Me=tt=>(X=!0,u[tt]),Ie=(tt,Ze)=>(X&&(tt=tt.replace(/\uFEFF[0-9]/g,ht=>u[ht])),Ze||(tt=tt.replace(/\\([\'\";:])/g,"$1")),tt),ct=tt=>String.fromCharCode(parseInt(tt.slice(1),16)),Ot=tt=>tt.replace(/\\[0-9a-f]+/gi,ct),Qt=(tt,Ze,ht,sn,_n,Zn)=>{if(_n=_n||Zn,_n)return _n=Ie(_n),"'"+_n.replace(/\'/g,"\\'")+"'";if(Ze=Ie(Ze||ht||sn||""),!e.allow_script_urls){const ho=Ze.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ho)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ho))return""}return se&&(Ze=se.call(te,Ze,"style")),"url('"+Ze.replace(/\'/g,"\\'")+"')"};if($){$=$.replace(/[\u0000-\u001F]/g,""),$=$.replace(/\\[\"\';:\uFEFF]/g,Me).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ze=>Ze.replace(/[;:]/g,Me));let tt;for(;tt=r.exec($);){r.lastIndex=tt.index+tt[0].length;let Ze=tt[1].replace(i,"").toLowerCase(),ht=tt[2].replace(i,"");if(Ze&&ht){if(Ze=Ot(Ze),ht=Ot(ht),Ze.indexOf(x)!==-1||Ze.indexOf('"')!==-1||!e.allow_script_urls&&(Ze==="behavior"||/expression\s*\(|\/\*|\*\//.test(ht)))continue;Ze==="font-weight"&&ht==="700"?ht="bold":(Ze==="color"||Ze==="background-color")&&(ht=ht.toLowerCase()),op(ht)==="rgb"&&O0(ht).each(sn=>{ht=H1(Wh(sn)).toLowerCase()}),ht=ht.replace(o,Qt),z[Ze]=X?Ie(ht,!0):ht}}ie("border","",!0),ie("border","-width"),ie("border","-color"),ie("border","-style"),ie("padding",""),ie("margin",""),Re("border","border-width","border-style","border-color"),z.border==="medium none"&&delete z.border,z["border-image"]==="none"&&delete z["border-image"]}return z},serialize:($,z)=>{let X="";const se=(ie,Ee)=>{const Re=Ee[ie];if(Re)for(let Me=0,Ie=Re.length;Me<Ie;Me++){const ct=Re[Me],Ot=$[ct];Ot&&(X+=(X.length>0?" ":"")+ct+": "+Ot+";")}},te=(ie,Ee)=>{if(!y||!Ee)return!0;let Re=y["*"];return Re&&Re[ie]?!1:(Re=y[Ee],!(Re&&Re[ie]))};return z&&m?(se("*",m),se(z,m)):Tt($,(ie,Ee)=>{ie&&te(Ee,z)&&(X+=(X.length>0?" ":"")+Ee+": "+ie+";")}),X}};return L},tr={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},sf=e=>e instanceof Event||ve(e.initEvent),TS=e=>e.isDefaultPrevented===pt||e.isDefaultPrevented===$e,rf=e=>en(e.preventDefault)||sf(e),D0=(e,n)=>{const o=n??{};for(const r in e)En(tr,r)||(o[r]=e[r]);return Fe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Fe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Fe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},z1=(e,n,o,r)=>{var i;const u=D0(n,r);return u.type=e,en(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),rf(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=pt,ve(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=pt,ve(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=pt,u.stopPropagation()},TS(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?pt:$e,u.isPropagationStopped=u.cancelBubble===!0?pt:$e,u.isImmediatePropagationStopped=$e)),u},V1="mce-data-",R0=/^(?:mouse|contextmenu)|click/,Fc=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},M0=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},kS=e=>Fe(e)&&R0.test(e.type),Zh=(e,n)=>{const o=z1(e.type,e,document,n);if(kS(e)&&In(e.pageX)&&!In(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},Zk=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{M0(e,"DOMContentLoaded",m),M0(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?m():Fc(e,"DOMContentLoaded",m),o.domLoaded||Fc(e,"load",m)};class th{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=V1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let m;const y=window,x=z=>{u.executeHandlers(Zh(z||y.event),A)};if(!n||bt(n)||ra(n))return r;let A;n[u.expando]?A=n[u.expando]:(A=u.count++,n[u.expando]=A,u.events[A]={}),i=i||n;const L=o.split(" ");let $=L.length;for(;$--;){let z=L[$],X=x,se=!1,te=!1;if(z==="DOMContentLoaded"&&(z="ready"),u.domLoaded&&z==="ready"&&n.readyState==="complete"){r.call(i,Zh({type:z}));continue}!u.hasFocusIn&&(z==="focusin"||z==="focusout")&&(se=!0,te=z==="focusin"?"focus":"blur",X=ie=>{const Ee=Zh(ie||y.event);Ee.type=Ee.type==="focus"?"focusin":"focusout",u.executeHandlers(Ee,A)}),m=u.events[A][z],m?z==="ready"&&u.domLoaded?r(Zh({type:z})):m.push({func:r,scope:i}):(u.events[A][z]=m=[{func:r,scope:i}],m.fakeName=te,m.capture=se,m.nativeHandler=X,z==="ready"?Zk(n,X,u):Fc(n,te||z,X,se))}return n=m=null,r}unbind(n,o,r){if(!n||bt(n)||ra(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const m=o.split(" ");let y=m.length;for(;y--;){const x=m[y],A=u[x];if(A){if(r){let L=A.length;for(;L--;)if(A[L].func===r){const $=A.nativeHandler,z=A.fakeName,X=A.capture,se=A.slice(0,L).concat(A.slice(L+1));se.nativeHandler=$,se.fakeName=z,se.capture=X,u[x]=se}}(!r||A.length===0)&&(delete u[x],M0(n,A.fakeName||x,A.nativeHandler,A.capture))}}}else Tt(u,(m,y)=>{M0(n,m.fakeName||y,m.nativeHandler,m.capture)}),u={};for(const m in u)if(En(u,m))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||bt(n)||ra(n))return this;const i=Zh({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||bt(n)||ra(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,m=i.length;u<m;u++){const y=i[u];if(y&&y.func.call(y.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}th.Event=new th;const l2=ut.each,AS=ut.grep,N0="data-mce-style",Ed=ut.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),di=(e,n,o)=>{en(o)||o===""?Bs(e,n):oa(e,n,o)},Et=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),sp=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&bt(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},wa=(e,n)=>{const o=li(n,"style"),r=e.serialize(e.parse(o),oo(n));di(n,N0,r)},jk=(e,n)=>so(e)?En(Ed,n)?e+"":e+"px":e,U1=(e,n,o)=>{const r=Et(n);en(o)||o===""?Ji(e,r):Ph(e,r,jk(o,r))},qk=(e,n,o)=>{const r=n.keep_values,i={set:(m,y,x)=>{const A=be.fromDom(m);ve(n.url_converter)&&Fe(y)&&(y=n.url_converter.call(n.url_converter_scope||o(),String(y),x,m));const L="data-mce-"+x;di(A,L,y),di(A,x,y)},get:(m,y)=>{const x=be.fromDom(m);return li(x,"data-mce-"+y)||li(x,y)}},u={style:{set:(m,y)=>{const x=be.fromDom(m);r&&di(x,N0,y),Bs(x,"style"),ce(y)&&Xn(x,e.parse(y))},get:m=>{const y=be.fromDom(m),x=li(y,N0)||li(y,"style");return e.serialize(e.parse(x),oo(y))}}};return r&&(u.href=u.src=i),u},Vs=(e,n={})=>{const o={},r=window,i={};let u=0;const m=!0,y=!0,x=Oi.forElement(be.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),A=[],L=n.schema?n.schema:fs({}),$=eh({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),z=n.ownEvents?new th:th.Event,X=L.getBlockElements(),se=He=>ce(He)?En(X,He):Wt(He)&&(En(X,He.nodeName)||Iu(L,He)),te=He=>He&&e&&ce(He)?e.getElementById(He):He,ie=He=>{const Ue=te(He);return Fe(Ue)?be.fromDom(Ue):null},Ee=(He,Ue,Bt="")=>{let Dt;const Pn=ie(He);if(Fe(Pn)&&Is(Pn)){const jo=Ky[Ue];jo&&jo.get?Dt=jo.get(Pn.dom,Ue):Dt=li(Pn,Ue)}return Fe(Dt)?Dt:Bt},Re=He=>{const Ue=te(He);return en(Ue)?[]:Ue.attributes},Me=(He,Ue,Bt)=>{xn(He,Dt=>{if(Wt(Dt)){const Pn=be.fromDom(Dt),jo=Bt===""?null:Bt,Hr=li(Pn,Ue),Mm=Ky[Ue];Mm&&Mm.set?Mm.set(Pn.dom,jo,Ue):di(Pn,Ue,jo),Hr!==jo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Pn.dom,attrName:Ue,attrValue:jo})}})},Ie=(He,Ue)=>He.cloneNode(Ue),ct=()=>n.root_element||e.body,Ot=He=>{const Ue=_1(He);return{x:Ue.x,y:Ue.y,w:Ue.width,h:Ue.height}},Qt=(He,Ue)=>tu(e.body,te(He),Ue),tt=(He,Ue,Bt)=>{xn(He,Dt=>{const Pn=be.fromDom(Dt);U1(Pn,Ue,Bt),n.update_styles&&wa($,Pn)})},Ze=(He,Ue)=>{xn(He,Bt=>{const Dt=be.fromDom(Bt);Tt(Ue,(Pn,jo)=>{U1(Dt,jo,Pn)}),n.update_styles&&wa($,Dt)})},ht=(He,Ue,Bt)=>{const Dt=te(He);if(!(en(Dt)||!tl(Dt)&&!A1(Dt)))return Bt?vr(be.fromDom(Dt),Et(Ue)):(Ue=Ue.replace(/-(\D)/g,(Pn,jo)=>jo.toUpperCase()),Ue==="float"&&(Ue="cssFloat"),Dt.style?Dt.style[Ue]:void 0)},sn=He=>{const Ue=te(He);if(!Ue)return{w:0,h:0};let Bt=ht(Ue,"width"),Dt=ht(Ue,"height");return(!Bt||Bt.indexOf("px")===-1)&&(Bt="0"),(!Dt||Dt.indexOf("px")===-1)&&(Dt="0"),{w:parseInt(Bt,10)||Ue.offsetWidth||Ue.clientWidth,h:parseInt(Dt,10)||Ue.offsetHeight||Ue.clientHeight}},_n=He=>{const Ue=te(He),Bt=Qt(Ue),Dt=sn(Ue);return{x:Bt.x,y:Bt.y,w:Dt.w,h:Dt.h}},Zn=(He,Ue)=>{if(!He)return!1;const Bt=Gt(He)?He:[He];return _t(Bt,Dt=>xi(be.fromDom(Dt),Ue))},ho=(He,Ue,Bt,Dt)=>{const Pn=[];let jo=te(He);Dt=Dt===void 0;const Hr=Bt||(ct().nodeName!=="BODY"?ct().parentNode:null);if(ce(Ue))if(Ue==="*")Ue=Wt;else{const Mm=Ue;Ue=qd=>Zn(qd,Mm)}for(;jo&&!(jo===Hr||en(jo.nodeType)||Km(jo)||aa(jo));){if(!Ue||Ue(jo))if(Dt)Pn.push(jo);else return[jo];jo=jo.parentNode}return Dt?Pn:null},as=(He,Ue,Bt)=>{const Dt=ho(He,Ue,Bt,!1);return Dt&&Dt.length>0?Dt[0]:null},Cs=(He,Ue,Bt)=>{let Dt=Ue;if(He){ce(Ue)&&(Dt=Pn=>Zn(Pn,Ue));for(let Pn=He[Bt];Pn;Pn=Pn[Bt])if(ve(Dt)&&Dt(Pn))return Pn}return null},jr=(He,Ue)=>Cs(He,Ue,"nextSibling"),qi=(He,Ue)=>Cs(He,Ue,"previousSibling"),hi=He=>ve(He.querySelectorAll),Ft=(He,Ue)=>{var Bt,Dt;const Pn=(Dt=(Bt=te(Ue))!==null&&Bt!==void 0?Bt:n.root_element)!==null&&Dt!==void 0?Dt:e;return hi(Pn)?Rr(Pn.querySelectorAll(He)):[]},xn=function(He,Ue,Bt){const Dt=Bt??this;if(Gt(He)){const Pn=[];return l2(He,(jo,Hr)=>{const Mm=te(jo);Mm&&Pn.push(Ue.call(Dt,Mm,Hr))}),Pn}else{const Pn=te(He);return Pn?Ue.call(Dt,Pn):!1}},Zo=(He,Ue)=>{xn(He,Bt=>{Tt(Ue,(Dt,Pn)=>{Me(Bt,Pn,Dt)})})},Yt=(He,Ue)=>{xn(He,Bt=>{const Dt=be.fromDom(Bt);Yl(Dt,Ue)})},Ln=(He,Ue,Bt,Dt,Pn)=>xn(He,jo=>{const Hr=ce(Ue)?e.createElement(Ue):Ue;return Fe(Bt)&&Zo(Hr,Bt),Dt&&(!ce(Dt)&&Dt.nodeType?Hr.appendChild(Dt):ce(Dt)&&Yt(Hr,Dt)),Pn?Hr:jo.appendChild(Hr)}),zn=(He,Ue,Bt)=>Ln(e.createElement(He),He,Ue,Bt,!0),qt=Uh.decode,vo=Uh.encodeAllRaw,Eo=(He,Ue,Bt="")=>{let Dt="<"+He;for(const Pn in Ue)sr(Ue,Pn)&&(Dt+=" "+Pn+'="'+vo(Ue[Pn])+'"');return lr(Bt)&&En(L.getVoidElements(),He)?Dt+" />":Dt+">"+Bt+"</"+He+">"},Pa=He=>{const Ue=e.createElement("div"),Bt=e.createDocumentFragment();Bt.appendChild(Ue),He&&(Ue.innerHTML=He);let Dt;for(;Dt=Ue.firstChild;)Bt.appendChild(Dt);return Bt.removeChild(Ue),Bt},ms=(He,Ue)=>xn(He,Bt=>{const Dt=be.fromDom(Bt);return Ue&&xe(va(Dt),Pn=>{na(Pn)&&Pn.dom.length===0?ws(Pn):ui(Dt,Pn)}),ws(Dt),Dt.dom}),dc=He=>xn(He,Ue=>{const Bt=Ue.attributes;for(let Dt=Bt.length-1;Dt>=0;Dt--)Ue.removeAttributeNode(Bt.item(Dt))}),Nl=He=>$.parse(He),Dm=(He,Ue)=>$.serialize(He,Ue),Rc=He=>{if(pu!==Vs.DOM&&e===document){if(o[He])return;o[He]=!0}let Ue=e.getElementById("mceDefaultStyles");if(!Ue){Ue=e.createElement("style"),Ue.id="mceDefaultStyles",Ue.type="text/css";const Bt=e.head;Bt.firstChild?Bt.insertBefore(Ue,Bt.firstChild):Bt.appendChild(Ue)}Ue.styleSheet?Ue.styleSheet.cssText+=He:Ue.appendChild(e.createTextNode(He))},mu=He=>{He||(He=""),xe(He.split(","),Ue=>{i[Ue]=!0,x.load(Ue).catch(it)})},hu=(He,Ue,Bt)=>{xn(He,Dt=>{if(Wt(Dt)){const Pn=be.fromDom(Dt),jo=Ue.split(" ");xe(jo,Hr=>{Fe(Bt)?(Bt?bl:fd)(Pn,Hr):$m(Pn,Hr)})}})},Gi=(He,Ue)=>{hu(He,Ue,!0)},gu=(He,Ue)=>{hu(He,Ue,!1)},wn=(He,Ue)=>{const Bt=ie(He),Dt=Ue.split(" ");return Fe(Bt)&&Ss(Dt,Pn=>Vf(Bt,Pn))},Lo=He=>{xn(He,Ue=>Ji(be.fromDom(Ue),"display"))},qr=He=>{xn(He,Ue=>Ph(be.fromDom(Ue),"display","none"))},Ia=He=>{const Ue=ie(He);return Fe(Ue)&&ci(Hi(Ue,"display"),"none")},gi=He=>(He||"mce_")+u++,Ba=He=>{const Ue=ie(He);return Fe(Ue)?Wt(Ue.dom)?Ue.dom.outerHTML:wc(Ue):""},Or=(He,Ue)=>{xn(He,Bt=>{Wt(Bt)&&(Bt.outerHTML=Ue)})},Dr=(He,Ue)=>{const Bt=te(Ue);return xn(He,Dt=>{const Pn=Bt==null?void 0:Bt.parentNode,jo=Bt==null?void 0:Bt.nextSibling;return Pn&&(jo?Pn.insertBefore(Dt,jo):Pn.appendChild(Dt)),Dt})},Vc=(He,Ue,Bt)=>xn(Ue,Dt=>{var Pn;const jo=Gt(Ue)?He.cloneNode(!0):He;return Bt&&l2(AS(Dt.childNodes),Hr=>{jo.appendChild(Hr)}),(Pn=Dt.parentNode)===null||Pn===void 0||Pn.replaceChild(jo,Dt),Dt}),Zd=(He,Ue)=>{if(He.nodeName!==Ue.toUpperCase()){const Bt=zn(Ue);return l2(Re(He),Dt=>{Me(Bt,Dt.nodeName,Ee(He,Dt.nodeName))}),Vc(Bt,He,!0),Bt}else return He},Rm=(He,Ue)=>{let Bt=He;for(;Bt;){let Dt=Ue;for(;Dt&&Bt!==Dt;)Dt=Dt.parentNode;if(Bt===Dt)break;Bt=Bt.parentNode}return!Bt&&He.ownerDocument?He.ownerDocument.documentElement:Bt},If=(He,Ue,Bt)=>Dn(Ue)?ca(L,He,{...Bt,isContent:Pn=>{const jo=Pn.nodeName.toLowerCase();return!!Ue[jo]}}):ca(L,He,Bt),u0=()=>e.createRange(),d0=(He,Ue,Bt)=>{let Dt=u0(),Pn,jo;if(He&&Ue&&He.parentNode&&Ue.parentNode){const Hr=He.parentNode;return Dt.setStart(Hr,sp(He)),Dt.setEnd(Ue.parentNode,sp(Ue)),Pn=Dt.extractContents(),Dt=u0(),Dt.setStart(Ue.parentNode,sp(Ue)+1),Dt.setEnd(Hr,sp(He)+1),jo=Dt.extractContents(),Hr.insertBefore(Vi(pu,Pn,L),He),Bt?Hr.insertBefore(Bt,He):Hr.insertBefore(Ue,He),Hr.insertBefore(Vi(pu,jo,L),He),ms(He),Bt||Ue}else return},Pg=(He,Ue,Bt,Dt)=>{if(Gt(He)){let Pn=He.length;const jo=[];for(;Pn--;)jo[Pn]=Pg(He[Pn],Ue,Bt,Dt);return jo}else return n.collect&&(He===e||He===r)&&A.push([He,Ue,Bt,Dt]),z.bind(He,Ue,Bt,Dt||pu)},jd=(He,Ue,Bt)=>{if(Gt(He)){let Dt=He.length;const Pn=[];for(;Dt--;)Pn[Dt]=jd(He[Dt],Ue,Bt);return Pn}else{if(A.length>0&&(He===e||He===r)){let Dt=A.length;for(;Dt--;){const[Pn,jo,Hr]=A[Dt];He===Pn&&(!Ue||Ue===jo)&&(!Bt||Bt===Hr)&&z.unbind(Pn,jo,Hr)}}return z.unbind(He,Ue,Bt)}},Ig=(He,Ue,Bt)=>z.dispatch(He,Ue,Bt),qy=(He,Ue,Bt)=>z.dispatch(He,Ue,Bt),Gy=He=>{if(He&&tl(He)){const Ue=He.getAttribute("data-mce-contenteditable");return Ue&&Ue!=="inherit"?Ue:He.contentEditable!=="inherit"?He.contentEditable:null}else return null},pu={doc:e,settings:n,win:r,files:i,stdMode:m,boxModel:y,styleSheetLoader:x,boundEvents:A,styles:$,schema:L,events:z,isBlock:se,root:null,clone:Ie,getRoot:ct,getViewPort:Ot,getRect:_n,getSize:sn,getParent:as,getParents:ho,get:te,getNext:jr,getPrev:qi,select:Ft,is:Zn,add:Ln,create:zn,createHTML:Eo,createFragment:Pa,remove:ms,setStyle:tt,getStyle:ht,setStyles:Ze,removeAllAttribs:dc,setAttrib:Me,setAttribs:Zo,getAttrib:Ee,getPos:Qt,parseStyle:Nl,serializeStyle:Dm,addStyle:Rc,loadCSS:mu,addClass:Gi,removeClass:gu,hasClass:wn,toggleClass:hu,show:Lo,hide:qr,isHidden:Ia,uniqueId:gi,setHTML:Yt,getOuterHTML:Ba,setOuterHTML:Or,decode:qt,encode:vo,insertAfter:Dr,replace:Vc,rename:Zd,findCommonAncestor:Rm,run:xn,getAttribs:Re,isEmpty:If,createRng:u0,nodeIndex:sp,split:d0,bind:Pg,unbind:jd,fire:qy,dispatch:Ig,getContentEditable:Gy,getContentEditableParent:He=>{const Ue=ct();let Bt=null;for(let Dt=He;Dt&&Dt!==Ue&&(Bt=Gy(Dt),Bt===null);Dt=Dt.parentNode);return Bt},isEditable:He=>{if(Fe(He)){const Ue=Wt(He)?He:He.parentElement;return Fe(Ue)&&tl(Ue)&&Au(be.fromDom(Ue))}else return!1},destroy:()=>{if(A.length>0){let He=A.length;for(;He--;){const[Ue,Bt,Dt]=A[He];z.unbind(Ue,Bt,Dt)}}Tt(i,(He,Ue)=>{x.unload(Ue),delete i[Ue]})},isChildOf:(He,Ue)=>He===Ue||Ue.contains(He),dumpRng:He=>"startContainer: "+He.startContainer.nodeName+", startOffset: "+He.startOffset+", endContainer: "+He.endContainer.nodeName+", endOffset: "+He.endOffset},Ky=qk($,n,ft(pu));return pu};Vs.DOM=Vs(document),Vs.nodeIndex=sp;const jh=Vs.DOM,P0=0,rp=1,ap=2,u2=3;class _d{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=jh;let u;const m=()=>{i.remove(A),u&&(u.onerror=u.onload=u=null)},y=()=>{m(),o()},x=()=>{m(),r("Failed to load script: "+n)},A=i.uniqueId();u=document.createElement("script"),u.id=A,u.type="text/javascript",u.src=ut._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=y,u.onerror=x,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===ap}markDone(n){this.states[n]=ap}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=P0),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(x,A)=>{Yo(o.scriptLoadedCallbacks,A).each(L=>{xe(L,$=>$[x](A))}),delete o.scriptLoadedCallbacks[A]},i=x=>{const A=Kt(x,L=>L.status==="rejected");return A.length>0?Promise.reject(_s(A,({reason:L})=>Gt(L)?L:[L])):Promise.resolve()},u=x=>Promise.allSettled(dt(x,A=>o.states[A]===ap?(r("resolve",A),Promise.resolve()):o.states[A]===u2?(r("reject",A),Promise.reject(A)):(o.states[A]=rp,o.loadScript(A).then(()=>{o.states[A]=ap,r("resolve",A);const L=o.queue;return L.length>0?(o.queue=[],u(L).then(i)):Promise.resolve()},()=>(o.states[A]=u2,r("reject",A),Promise.reject(A)))))),m=x=>(o.loading=!0,u(x).then(A=>{o.loading=!1;const L=o.queueLoadedCallbacks.shift();return W.from(L).each(io),i(A)})),y=fl(n);return o.loading?new Promise((x,A)=>{o.queueLoadedCallbacks.push(()=>{m(y).then(x,A)})}):m(y)}}_d.ScriptLoader=new _d;const Gk=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Lr=e=>Je(e)&&En(e,"raw"),Td=e=>Gt(e)&&e.length>1,mr={},d2=$s("en"),xc=()=>Yo(mr,d2.get()),Od={getData:()=>go(mr,e=>({...e})),setCode:e=>{e&&d2.set(e)},getCode:()=>d2.get(),add:(e,n)=>{let o=mr[e];o||(mr[e]=o={});const r=dt(ts(n),i=>i.toLowerCase());Tt(n,(i,u)=>{const m=u.toLowerCase();m!==u&&Gk(r,m)?(En(n,m)||(o[m]=i),o[u]=i):o[m]=i})},translate:e=>{const n=xc().getOr({}),o=m=>ve(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,i=m=>{const y=o(m);return En(n,y)?o(n[y]):Yo(n,y.toLowerCase()).map(o).getOr(y)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(Lr(e))return o(e.raw);if(Td(e)){const m=e.slice(1),y=i(e[0]).replace(/\{([0-9]+)\}/g,(x,A)=>En(m,A)?o(m[A]):x);return u(y)}return u(i(e))},isRtl:()=>xc().bind(e=>Yo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>En(mr,e)},ec=()=>{const e=[],n={},o={},r=[],i=(te,ie)=>{const Ee=Kt(r,Re=>Re.name===te&&Re.state===ie);xe(Ee,Re=>Re.resolve())},u=te=>En(n,te),m=te=>En(o,te),y=te=>{if(o[te])return o[te].instance},x=(te,ie)=>{const Ee=Od.getCode(),Re=","+(ie||"")+",";!Ee||ie&&Re.indexOf(","+Ee+",")===-1||_d.ScriptLoader.add(n[te]+"/langs/"+Ee+".js")},A=(te,ie)=>{ec.languageLoad!==!1&&(u(te)?x(te,ie):se(te,"loaded").then(()=>x(te,ie)))},L=(te,ie)=>(e.push(ie),o[te]={instance:ie},i(te,"added"),ie),$=te=>{delete n[te],delete o[te]},z=(te,ie)=>ce(ie)?ce(te)?{prefix:"",resource:ie,suffix:""}:{prefix:te.prefix,resource:ie,suffix:te.suffix}:ie,X=(te,ie)=>{if(n[te])return Promise.resolve();let Ee=ce(ie)?ie:ie.prefix+ie.resource+ie.suffix;Ee.indexOf("/")!==0&&Ee.indexOf("://")===-1&&(Ee=ec.baseURL+"/"+Ee),n[te]=Ee.substring(0,Ee.lastIndexOf("/"));const Re=()=>(i(te,"loaded"),Promise.resolve());return o[te]?Re():_d.ScriptLoader.add(Ee).then(Re)},se=(te,ie="added")=>ie==="added"&&m(te)||ie==="loaded"&&u(te)?Promise.resolve():new Promise(Ee=>{r.push({name:te,state:ie,resolve:Ee})});return{items:e,urls:n,lookup:o,get:y,requireLangPack:A,add:L,remove:$,createUrl:z,load:X,waitFor:se}};ec.languageLoad=!0,ec.baseURL="",ec.PluginManager=ec(),ec.ThemeManager=ec(),ec.ModelManager=ec();const cp=(e,n)=>{let o=null;return{cancel:()=>{oe(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{oe(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},qh=(e,n)=>{let o=null;const r=()=>{oe(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},DS=(e,n,o)=>Xd(e,n,o).isSome(),lp=ft("mce-annotation"),af=ft("data-mce-annotation"),Gh=ft("data-mce-annotation-uid"),Kh=ft("data-mce-annotation-active"),om=ft("data-mce-annotation-classes"),cf=ft("data-mce-annotation-attrs"),Yh=e=>n=>No(n,e),W1=(e,n)=>{const o=e.selection.getRng(),r=be.fromDom(o.startContainer),i=be.fromDom(e.getBody()),u=n.fold(()=>"."+lp(),x=>`[${af()}="${x}"]`),m=Gl(r,o.startOffset).getOr(r);return gn(m,u,Yh(i)).bind(x=>Er(x,`${Gh()}`).bind(A=>Er(x,`${af()}`).map(L=>{const $=B0(e,A);return{uid:A,name:L,elements:$}})))},Xk=e=>Is(e)&&Vf(e,lp()),f2=(e,n)=>ld(e,"data-mce-bogus")||DS(e,'[data-mce-bogus="all"]',Yh(n)),B0=(e,n)=>{const o=be.fromDom(e.getBody()),r=Ua(o,`[${Gh()}="${n}"]`);return Kt(r,i=>!f2(i,o))},L0=(e,n)=>{const o=be.fromDom(e.getBody()),r=Ua(o,`[${af()}="${n}"]`),i={};return xe(r,u=>{if(!f2(u,o)){const m=li(u,Gh()),y=Yo(i,m).getOr([]);i[m]=y.concat([u])}}),i},RS=(e,n)=>{const o=$s({}),r=()=>({listeners:[],previous:Aa()}),i=($,z)=>{u($,X=>(z(X),X))},u=($,z)=>{const X=o.get(),se=Yo(X,$).getOrThunk(r),te=z(se);X[$]=te,o.set(X)},m=($,z,X)=>{i($,se=>{xe(se.listeners,te=>te(!0,$,{uid:z,nodes:dt(X,ie=>ie.dom)}))})},y=$=>{i($,z=>{xe(z.listeners,X=>X(!1,$))})},x=($,z)=>{xe(B0(e,$),X=>{z?oa(X,Kh(),"true"):Bs(X,Kh())})},A=qh(()=>{const $=Ko(n.getNames());xe($,z=>{u(z,X=>{const se=X.previous.get();return W1(e,W.some(z)).fold(()=>{se.each(te=>{y(z),X.previous.clear(),x(te,!1)})},({uid:te,name:ie,elements:Ee})=>{ci(se,te)||(se.each(Re=>x(Re,!1)),m(ie,te,Ee),X.previous.set(te),x(te,!0))}),{previous:X.previous,listeners:X.listeners}})})},30);return e.on("remove",()=>{A.cancel()}),e.on("NodeChange",()=>{A.throttle()}),{addListener:($,z)=>{u($,X=>({previous:X.previous,listeners:X.listeners.concat([z])}))}}},m2=(e,n)=>{const o=af(),r=u=>W.from(u.attr(o)).bind(n.lookup),i=u=>{var m,y;u.attr(Gh(),null),u.attr(af(),null),u.attr(Kh(),null);const x=W.from(u.attr(cf())).map(z=>z.split(",")).getOr([]),A=W.from(u.attr(om())).map(z=>z.split(",")).getOr([]);xe(x,z=>u.attr(z,null));const L=(y=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&y!==void 0?y:[],$=Gr(L,[lp()].concat(A));u.attr("class",$.length>0?$.join(" "):null),u.attr(om(),null),u.attr(cf(),null)};e.serializer.addTempAttr(Kh()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(y=>{y.persistent===!1&&(m.name==="span"?m.unwrap():i(m))})})},F0=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>Yo(e,i).map(u=>u.settings),getNames:()=>ts(e)}},MS=(e,n,o)=>Math.min(Math.max(e,n),o),Z1=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let h2=0;const $0=e=>{const o=new Date().getTime(),r=Math.floor(Z1()*1e9);return h2++,e+"_"+r+h2+String(o)},eM=(e,n)=>{xe(n,o=>{bl(e,o)})},j1=(e,n)=>{xe(n,o=>{fd(e,o)})},up=(e,n)=>be.fromDom(e.dom.cloneNode(n)),sm=e=>up(e,!1),H0=e=>up(e,!0),NS=(e,n)=>{const o=be.fromTag(n),r=zf(e);return $a(o,r),o},PS=(e,n)=>{const o=NS(e,n);yc(e,o);const r=va(e);return Du(o,r),ws(e),o},IS=(e,n,o=$e)=>{const r=new Wa(e,n),i=u=>{let m;do m=r[u]();while(m&&!bt(m)&&!o(m));return W.from(m).filter(bt)};return{current:()=>W.from(r.current()).filter(bt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Xh=(e,n)=>{const o=n||(m=>e.isBlock(m)||qo(m)||Uo(m)),r=(m,y,x,A)=>{if(bt(m)){const L=A(m,y,m.data);if(L!==-1)return W.some({container:m,offset:L})}return x().bind(L=>r(L.container,L.offset,x,A))};return{backwards:(m,y,x,A)=>{const L=IS(m,A??e.getRoot(),o);return r(m,y,()=>L.prev().map($=>({container:$,offset:$.length})),x).getOrNull()},forwards:(m,y,x,A)=>{const L=IS(m,A??e.getRoot(),o);return r(m,y,()=>L.next().map($=>({container:$,offset:0})),x).getOrNull()}}},dp=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?W.from(u.dom.nodeValue):W.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(na,"text"),fp=e=>dp.get(e),mp=e=>dp.getOption(e),BS=(e,n)=>dp.set(e,n),z0=["td","th"],LS=["thead","tbody","tfoot"],FS=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Ui=["li","dd","dt"],Qk=["ul","ol","dl"],$S=["pre","script","textarea","style"],hp=e=>{let n;return o=>(n=n||Ts(e,pt),En(n,oo(o)))},e4=e=>oo(e)==="table",Ri=e=>Is(e)&&oo(e)==="br",Bu=hp(FS),g2=hp(Qk),nh=hp(Ui),t4=hp(LS),q1=hp(z0),V0=hp($S),rm=e=>{const n=[];let o=e.dom;for(;o;)n.push(be.fromDom(o)),o=o.lastChild;return n},HS=e=>{const n=Ua(e,"br"),o=Kt(rm(e).slice(-1),Ri);n.length===o.length&&xe(o,ws)},Dd=()=>{const e=be.fromTag("br");return oa(e,"data-mce-bogus","1"),e},lf=e=>{yl(e),Ls(e,Dd())},zS=(e,n)=>{Va(e).each(o=>{ql(o).each(r=>{n.isBlock(oo(e))&&Ri(o)&&n.isBlock(oo(r))&&ws(o)})})},Da=jg,p2=k1,Ec=Za,n4=e=>e.insertContent(Da,{preserve_zwsp:!0}),U0=Wt,Jh=bt,am=e=>(Jh(e)&&(e=e.parentNode),U0(e)&&e.hasAttribute("data-mce-caret")),uf=e=>Jh(e)&&p2(e.data),su=e=>am(e)||uf(e),VS=e=>e.firstChild!==e.lastChild||!qo(e.firstChild),G1=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Da),u=e.parentNode;if(n){const m=e.previousSibling;if(Jh(m)){if(su(m))return m;if(tc(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(i,e)}else{const m=e.nextSibling;if(Jh(m)){if(su(m))return m;if(ko(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},gp=e=>{const n=e.container();return bt(n)?n.data.charAt(e.offset())===Da||e.isAtStart()&&uf(n.previousSibling):!1},im=e=>{const n=e.container();return bt(n)?n.data.charAt(e.offset()-1)===Da||e.isAtEnd()&&uf(n.nextSibling):!1},W0=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Dd().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},ko=e=>Jh(e)&&e.data[0]===Da,tc=e=>Jh(e)&&e.data[e.data.length-1]===Da,oh=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];em(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},pp=e=>e&&e.hasAttribute("data-mce-caret")?(oh(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,nr=e=>am(e.startContainer),sh=Math.round,rh=e=>e?{left:sh(e.left),top:sh(e.top),bottom:sh(e.bottom),right:sh(e.right),width:sh(e.width),height:sh(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},b2=(e,n)=>(e=rh(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),tM=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,US=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,js=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:US(n.top-e.bottom,e,n)},K1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:US(n.bottom-e.top,e,n),WS=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,o4=e=>Fo(e,(n,o)=>n.fold(()=>W.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),y=Math.max(o.bottom,r.bottom);return W.some({top:u,right:m,bottom:y,left:i,width:m-i,height:y-u})}),W.none()),Qh=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},ru=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Z0=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},cm=(e,n)=>{if(Wt(e)&&e.hasChildNodes()){const o=e.childNodes,r=MS(n,0,o.length-1);return o[r]}else return e},on=(e,n)=>{if(!(n<0&&Wt(e)&&e.hasChildNodes()))return cm(e,n)},v2=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),y2=e=>ce(e)&&e.charCodeAt(0)>=768&&v2.test(e),s4=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},w2=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},ZS=rt,j0=Uo,q0=qo,Lu=bt,nM=Cl(["script","style","textarea"]),df=Cl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),r4=Cl(["table"]),G0=su,Fu=e=>G0(e)?!1:Lu(e)?!nM(e.parentNode):df(e)||q0(e)||r4(e)||K0(e),a4=e=>Wt(e)&&e.getAttribute("unselectable")==="true",K0=e=>!a4(e)&&j0(e),Y0=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(K0(o))return!1;if(ZS(o))return!0}return!0},i4=e=>K0(e)?!Fo(Rr(e.getElementsByTagName("*")),(n,o)=>n||ZS(o),!1):!1,c4=e=>df(e)||i4(e),X0=(e,n)=>Fu(e)&&Y0(e,n),J0=Wt,jS=Fu,qS=Ih("display","block table"),l4=Ih("float","left right"),ff=w2(J0,jS,wt(l4)),GS=wt(Ih("white-space","pre pre-line pre-wrap")),ah=bt,Q0=qo,KS=Vs.nodeIndex,ev=on,C2=e=>e?e.createRange():Vs.DOM.createRng(),tv=e=>ce(e)&&/[\r\n\t ]/.test(e),u4=e=>!!e.setStart&&!!e.setEnd,_c=e=>{const n=e.startContainer,o=e.startOffset;if(tv(e.toString())&&GS(n.parentNode)&&bt(n)){const r=n.data;if(tv(r[o-1])||tv(r[o+1]))return!0}return!1},d4=e=>{const n=e.ownerDocument,o=C2(n),r=n.createTextNode(ea),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=rh(o.getBoundingClientRect());return i.removeChild(r),u},eg=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&bt(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),ih(u)}else return null},YS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ih=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=rh(r[0]):o=rh(e.getBoundingClientRect()),!u4(e)&&Q0(e)&&YS(o)?d4(e):YS(o)&&u4(e)&&(n=eg(e))!==null&&n!==void 0?n:o},lm=(e,n)=>{const o=b2(e,n);return o.width=1,o.right=o.left+1,o},S2=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&tM(m,n[n.length-1])||n.push(m))},r=(m,y)=>{const x=C2(m.ownerDocument);if(y<m.data.length){if(y2(m.data[y]))return;if(y2(m.data[y-1])&&(x.setStart(m,y),x.setEnd(m,y+1),!_c(x))){o(lm(ih(x),!1));return}}y>0&&(x.setStart(m,y-1),x.setEnd(m,y),_c(x)||o(lm(ih(x),!1))),y<m.data.length&&(x.setStart(m,y),x.setEnd(m,y+1),_c(x)||o(lm(ih(x),!0)))},i=e.container(),u=e.offset();if(ah(i))return r(i,u),n;if(J0(i))if(e.isAtEnd()){const m=ev(i,u);ah(m)&&r(m,m.data.length),ff(m)&&!Q0(m)&&o(lm(ih(m),!1))}else{const m=ev(i,u);if(ah(m)&&r(m,0),ff(m)&&e.isAtEnd())return o(lm(ih(m),!1)),n;const y=ev(e.container(),e.offset()-1);ff(y)&&!Q0(y)&&(qS(y)||qS(m)||!ff(m))&&o(lm(ih(y),!1)),ff(m)&&o(lm(ih(m),!0))}return n},Qe=(e,n,o)=>{const r=()=>(ah(e),n===0),i=()=>ah(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const L=C2(e.ownerDocument);return L.setStart(e,n),L.setEnd(e,n),L},m=()=>(o||(o=S2(Qe(e,n))),o),y=()=>m().length>0,x=L=>L&&e===L.container()&&n===L.offset(),A=L=>ev(e,L?n-1:n);return{container:ft(e),offset:ft(n),toRange:u,getClientRects:m,isVisible:y,isAtStart:r,isAtEnd:i,isEqual:x,getNode:A}};Qe.fromRangeStart=e=>Qe(e.startContainer,e.startOffset),Qe.fromRangeEnd=e=>Qe(e.endContainer,e.endOffset),Qe.after=e=>Qe(e.parentNode,KS(e)+1),Qe.before=e=>Qe(e.parentNode,KS(e)),Qe.isAbove=(e,n)=>ur(lo(n.getClientRects()),hs(e.getClientRects()),js).getOr(!1),Qe.isBelow=(e,n)=>ur(hs(n.getClientRects()),lo(e.getClientRects()),K1).getOr(!1),Qe.isAtStart=e=>e?e.isAtStart():!1,Qe.isAtEnd=e=>e?e.isAtEnd():!1,Qe.isTextPosition=e=>e?bt(e.container()):!1,Qe.isElementPosition=e=>!Qe.isTextPosition(e);const $u=(e,n)=>{bt(n)&&n.data.length===0&&e.remove(n)},tg=(e,n,o)=>{n.insertNode(o),$u(e,o.previousSibling),$u(e,o.nextSibling)},XS=(e,n,o)=>{const r=W.from(o.firstChild),i=W.from(o.lastChild);n.insertNode(o),r.each(u=>$u(e,u.previousSibling)),i.each(u=>$u(e,u.nextSibling))},Y1=(e,n,o)=>{aa(o)?XS(e,n,o):tg(e,n,o)},nl=bt,x2=em,JS=Vs.nodeIndex,Tc=e=>{const n=e.parentNode;return x2(n)?Tc(n):n},ng=e=>e?pe(e.childNodes,(n,o)=>(x2(o)&&o.nodeName!=="BR"?n=n.concat(ng(o)):n.push(o),n),[]):[],f4=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&nl(o);)n+=o.data.length;return n},QS=e=>n=>e===n,m4=e=>{let n,o;n=ng(Tc(e)),o=fe(n,QS(e),e),n=n.slice(0,o+1);const r=pe(n,(i,u,m)=>(nl(u)&&nl(n[m-1])&&i++,i),0);return n=Nc(n,Cl([e.nodeName])),o=fe(n,QS(e),e),o-r},ex=e=>(nl(e)?"text()":e.nodeName.toLowerCase())+"["+m4(e)+"]",h4=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},tx=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(nl(r))u=f4(r,i);else{const y=r.childNodes;i>=y.length?(u="after",i=y.length-1):u="before",r=y[i]}o.push(ex(r));let m=h4(e,r);return m=Nc(m,wt(em)),o=o.concat(Ea(m,y=>ex(y))),o.reverse().join("/")+","+u},g4=(e,n,o)=>{let r=ng(e);return r=Nc(r,(i,u)=>!nl(i)||!nl(r[u-1])),r=Nc(r,Cl([n])),r[o]},p4=(e,n)=>{let o=e,r=0;for(;nl(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!nl(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return nl(e)&&n>e.data.length&&(n=e.data.length),Qe(e,n)},nv=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=pe(r,(m,y)=>{const x=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(y);return x?(x[1]==="text()"&&(x[1]="#text"),g4(m,x[1],parseInt(x[2],10))):null},e);if(!u)return null;if(!nl(u)&&u.parentNode){let m;return i==="after"?m=JS(u)+1:m=JS(u),Qe(u.parentNode,m)}return p4(u,parseInt(i,10))},ov=Uo,b4=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&bt(i);i=i.previousSibling)r+=e(i.data).length;return r},nx=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let m=i?r.startOffset:r.endOffset;const y=[],x=e.getRoot();if(bt(u))y.push(o?b4(n,u,m):m);else{let A=0;const L=u.childNodes;m>=L.length&&L.length&&(A=1,m=Math.max(0,L.length-1)),y.push(e.nodeIndex(L[m],o)+A)}for(let A=u;A&&A!==x;A=A.parentNode)y.push(e.nodeIndex(A,o));return y},v4=(e,n,o,r)=>{const i=n.dom,u=nx(i,e,o,r,!0),m=n.isForward(),y=nr(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...y};{const x=nx(i,e,o,r,!1);return{start:u,end:x,forward:m,...y}}},or=(e,n,o)=>{let r=0;return ut.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},E2=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Wt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},ox=e=>(E2(e,!0),E2(e,!1),e),sx=(e,n)=>{if(Wt(e)&&(e=cm(e,n),ov(e)))return e;if(su(e)){bt(e)&&am(e)&&(e=e.parentNode);let o=e.previousSibling;if(ov(o)||(o=e.nextSibling,ov(o)))return o}},bp=e=>sx(e.startContainer,e.startOffset)||sx(e.endContainer,e.endOffset),Mi=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||ov(r)){const m=r.nodeName;return{name:m,index:or(o.dom,m,r)}}const u=bp(i);if(u){const m=u.tagName;return{name:m,index:or(o.dom,m,u)}}return v4(e,o,n,i)},El=e=>{const n=e.getRng();return{start:tx(e.dom.getRoot(),Qe.fromRangeStart(n)),end:tx(e.dom.getRoot(),Qe.fromRangeEnd(n)),forward:e.isForward()}},rx=e=>({rng:e.getRng(),forward:e.isForward()}),_2=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},T2=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),y=m.nodeName,x=e.isForward();if(y==="IMG")return{name:y,index:or(o,y,m)};const A=ox(r.cloneRange());if(!u){A.collapse(!1);const $=_2(o,i+"_end",n);Y1(o,A,$)}r=ox(r),r.collapse(!0);const L=_2(o,i+"_start",n);return Y1(o,r,L),e.moveToBookmark({id:i,keep:!0,forward:x}),{id:i,forward:x}},y4=(e,n,o=!1)=>n===2?Mi(Ec,o,e):n===3?El(e):n?rx(e):T2(e,!1),sv=Ae(Mi,xo,!0),rv=e=>{const n=u=>u(e),o=ft(e),r=()=>i,i={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:pt,isError:$e,map:u=>da.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>W.some(e)};return i},X1=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:$e,isError:pt,map:n,mapError:r=>da.error(r(e)),bind:n,exists:$e,forall:pt,getOr:xo,or:xo,getOrThunk:fn,orThunk:fn,getOrDie:Mn(String(e)),each:it,toOptional:W.none};return o},da={value:rv,error:X1,fromOption:(e,n)=>e.fold(()=>X1(n),rv)},au={generate:e=>{if(!Gt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return xe(e,(r,i)=>{const u=ts(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],y=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Gt(y))throw new Error("case arguments must be an array");n.push(m),o[m]=(...x)=>{const A=x.length;if(A!==y.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+y.length+" ("+y+"), got "+A);return{fold:(...$)=>{if($.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+$.length);return $[i].apply(null,x)},match:$=>{const z=ts($);if(n.length!==z.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+z.join(","));if(!Ss(n,se=>et(z,se)))throw new Error("Not all branches were specified when using match. Specified: "+z.join(", ")+`
Required: `+n.join(", "));return $[m].apply(null,x)},log:$=>{console.log($,{constructors:n,constructor:m,params:x})}}}}),o}};au.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ir=e=>{const n=[],o=[];return xe(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},Rd=e=>e.type==="inline-command"||e.type==="inline-format",og=e=>e.type==="block-command"||e.type==="block-format",av=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,ax=e=>{var n;const o=i=>da.error({message:i,pattern:e}),r=(i,u,m)=>{if(e.format!==void 0){let y;if(Gt(e.format)){if(!Ss(e.format,ce))return o(i+" pattern has non-string items in the `format` array");y=e.format}else if(ce(e.format))y=[e.format];else return o(i+" pattern has non-string `format` parameter");return da.value(u(y))}else return e.cmd!==void 0?ce(e.cmd)?da.value(m(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!Je(e))return o("Raw pattern is not an object");if(!ce(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ce(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,u=e.end;return u.length===0&&(u=i,i=""),r("Inline",m=>({type:"inline-format",start:i,end:u,format:m}),(m,y)=>({type:"inline-command",start:i,end:u,cmd:m,value:y}))}else{if(e.replacement!==void 0)return ce(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):da.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:i}),(u,m)=>({type:"block-command",start:e.start,cmd:u,value:m,trigger:i}))}}},ix=e=>Kt(e,og),ch=e=>Kt(e,Rd),Ni=(e,n)=>({inlinePatterns:ch(e),blockPatterns:ix(e),dynamicPatternsLookup:n}),mf=(e,n)=>({...e,blockPatterns:Kt(e.blockPatterns,o=>av(o,n))}),cx=e=>{const n=ir(dt(e,ax));return xe(n.errors,o=>console.error(o.message,o.pattern)),n.values},S4=e=>n=>{const o=e(n);return cx(o)},x4=(e,n)=>e.dispatch("PreProcess",n),iv=(e,n)=>e.dispatch("PostProcess",n),k2=e=>{e.dispatch("remove")},A2=e=>{e.dispatch("detach")},O2=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},lx=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},ux=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},dx=e=>{e.dispatch("PreInit")},fx=e=>{e.dispatch("PostRender")},E4=e=>{e.dispatch("Init")},Pi=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},mx=(e,n,o)=>{e.dispatch(n,o)},um=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},D2=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},hx=(e,n)=>e.dispatch("BeforeSetContent",n),R2=(e,n)=>e.dispatch("SetContent",n),cv=(e,n)=>e.dispatch("BeforeGetContent",n),J1=(e,n)=>e.dispatch("GetContent",n),lh=(e,n)=>{e.dispatch("AutocompleterStart",n)},_4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},M2=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Ca=e=>{e.dispatch("AutocompleterEnd")},Sa=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Ra=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ps=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),qa=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),fa=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),Q1=Y().deviceType,lv=Q1.isTouch(),N2=Vs.DOM,gx=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Fo(n,(o,r)=>{const i=r.split("="),u=i[0],m=i.length>1?i[1]:u;return o[Ns(u)]=Ns(m),o},{})},P2=e=>xt(e,RegExp),rn=e=>n=>n.options.get(e),vp=e=>ce(e)||Je(e),uh=(e,n="")=>o=>{const r=ce(o);if(r)if(o.indexOf("=")!==-1){const i=gx(o);return{value:Yo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},px=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:uh(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:uh(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ce(o)&&ls(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=et(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Xt(o)?{valid:!0,value:o}:ce(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ce(o)||at(o,ce);return r?ce(o)?{value:dt(o.split(","),Ns),valid:r}:Gt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:hv(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ce(o)||at(o,ce);return r?{value:Gt(o)?o:dt(o.split(","),Ns),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Xt(o)||ce(o);return r?o===!1||Q1.isiPhone()||Q1.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!lv}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ce(o)||ve(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ce(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>Xt(o)?(e.initialized&&ab(e)!==o&&Promise.resolve().then(()=>{fa(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=at(o,ce);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:vp}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:vp}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:vp}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:vp}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ce(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>at(o,Je)||o===!1?{value:cx(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ve(o)?{value:S4(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>at(o,P2)?{value:o,valid:!0}:P2(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Od.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:N2.getAttrib(e.getElement(),"placeholder")})})},v7=rn("iframe_attrs"),sg=rn("doctype"),bx=rn("document_base_url"),ol=rn("body_id"),oM=rn("body_class"),vx=rn("content_security_policy"),$c=rn("br_in_pre"),Ga=rn("forced_root_block"),hf=rn("forced_root_block_attrs"),dm=rn("newline_behavior"),nc=rn("br_newline_selector"),I2=rn("no_newline_selector"),B2=rn("keep_styles"),yx=rn("end_container_on_empty_block"),L2=rn("automatic_uploads"),uv=rn("images_reuse_filename"),F2=rn("images_replace_blob_uris"),dv=rn("icons"),wx=rn("icons_url"),Cx=rn("images_upload_url"),eb=rn("images_upload_base_path"),tb=rn("images_upload_credentials"),$2=rn("images_upload_handler"),H2=rn("content_css_cors"),fv=rn("referrer_policy"),z2=rn("language"),T4=rn("language_url"),nb=rn("indent_use_margin"),k4=rn("indentation"),A4=rn("content_css"),O4=rn("content_style"),V2=rn("font_css"),D4=rn("directionality"),Sx=rn("inline_boundaries_selector"),oc=rn("object_resizing"),U2=rn("resize_img_proportional"),xx=rn("placeholder"),W2=rn("event_root"),mv=rn("service_message"),yp=rn("theme"),R4=rn("theme_url"),wp=rn("model"),Ex=rn("model_url"),rg=rn("inline_boundaries"),Z2=rn("formats"),_x=rn("preview_styles"),j2=rn("format_empty_lines"),Tx=rn("format_noneditable_selector"),kx=rn("custom_ui_selector"),hv=rn("inline"),M4=rn("hidden_input"),Ax=rn("submit_patch"),Ox=rn("add_form_submit_trigger"),Dx=rn("add_unload_trigger"),gv=rn("custom_undo_redo_levels"),Cp=rn("disable_nodechange"),q2=rn("readonly"),N4=rn("editable_root"),pv=rn("content_css_cors"),bv=rn("plugins"),Hu=rn("external_plugins"),vv=rn("block_unsupported_drop"),yv=rn("visual"),G2=rn("visual_table_class"),sc=rn("visual_anchor_class"),fm=rn("iframe_aria_text"),dh=rn("setup"),P4=rn("init_instance_callback"),fh=rn("urlconverter_callback"),wv=rn("auto_focus"),I4=rn("browser_spellcheck"),B4=rn("protect"),Rx=rn("paste_block_drop"),Sp=rn("paste_data_images"),Mx=rn("paste_preprocess"),L4=rn("paste_postprocess"),ob=rn("newdocument_content"),K2=rn("paste_webkit_styles"),F4=rn("paste_remove_styles_if_webkit"),Nx=rn("paste_merge_formats"),Px=rn("smart_paste"),Y2=rn("paste_as_text"),sM=rn("paste_tab_spaces"),xp=rn("allow_html_data_urls"),Ix=rn("text_patterns"),X2=rn("text_patterns_lookup"),J2=rn("noneditable_class"),Cv=rn("editable_class"),$4=rn("noneditable_regexp"),Bx=rn("preserve_cdata"),rM=rn("highlight_on_focus"),ag=rn("xss_sanitization"),Sv=rn("init_content_sync"),Ep=e=>e.options.isSet("text_patterns_lookup"),sb=e=>ut.explode(e.options.get("font_size_style_values")),H4=e=>ut.explode(e.options.get("font_size_classes")),Lx=e=>e.options.get("encoding")==="xml",z4=e=>ut.explode(e.options.get("images_file_types")),aM=rn("table_tab_navigation"),rb=rn("details_initial_state"),Q2=rn("details_serialized_state"),Fx=rn("sandbox_iframes"),ew=e=>e.options.get("sandbox_iframes_exclusions"),$x=rn("convert_unsafe_embeds"),V4=rn("license_key"),U4=rn("api_key"),ab=rn("disabled"),_p=Wt,ib=bt,tw=e=>{const n=e.parentNode;n&&n.removeChild(e)},xv=e=>{const n=Ec(e);return{count:e.length-n.length,text:n}},nw=e=>{let n;for(;(n=e.data.lastIndexOf(Da))!==-1;)e.deleteData(n,1)},ow=(e,n)=>(Tp(e),n),W4=(e,n)=>{const o=xv(e.data.substr(0,n.offset())),r=xv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(nw(e),Qe(e,n.offset()-o.count)):n},Ev=(e,n)=>{const o=n.container(),r=pi(Rr(o.childNodes),e).map(i=>i<n.offset()?Qe(o,n.offset()-1):n).getOr(n);return Tp(e),r},cb=(e,n)=>ib(e)&&n.container()===e?W4(e,n):ow(e,n),Hx=(e,n)=>n.container()===e.parentNode?Ev(e,n):ow(e,n),iM=(e,n)=>Qe.isTextPosition(n)?cb(e,n):Hx(e,n),Tp=e=>{_p(e)&&su(e)&&(VS(e)?e.removeAttribute("data-mce-caret"):tw(e)),ib(e)&&(nw(e),e.data.length===0&&tw(e))},kp=Uo,zx=ya,Vx=Kg,kc="*[contentEditable=false],video,audio,embed,object",_v=(e,n,o)=>{const r=b2(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const y=e.ownerDocument.documentElement;i=e.scrollLeft||y.scrollLeft,u=e.scrollTop||y.scrollTop}else{const y=e.getBoundingClientRect();i=e.scrollLeft-y.left,u=e.scrollTop-y.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},sw=e=>{var n,o;const r=Ua(be.fromDom(e),kc);for(let i=0;i<r.length;i++){const u=r[i].dom;let m=u.previousSibling;if(tc(m)){const y=m.data;y.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(y.length-1,1)}m=u.nextSibling,ko(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},Z4=(e,n,o,r)=>{const i=Aa();let u,m;const y=Ga(e),x=e.dom,A=(te,ie)=>{let Ee;if(L(),Vx(ie))return null;if(o(ie)){const Re=W0(y,ie,te),Me=_v(n,ie,te);x.setStyle(Re,"top",Me.top),x.setStyle(Re,"caret-color","transparent"),m=Re;const Ie=x.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});x.setStyles(Ie,{...Me}),x.add(n,Ie),i.set({caret:Ie,element:ie,before:te}),te&&x.addClass(Ie,"mce-visual-caret-before"),$(),Ee=ie.ownerDocument.createRange(),Ee.setStart(Re,0),Ee.setEnd(Re,0)}else return m=G1(ie,te),Ee=ie.ownerDocument.createRange(),lb(m.nextSibling)?(Ee.setStart(m,0),Ee.setEnd(m,0)):(Ee.setStart(m,1),Ee.setEnd(m,1)),Ee;return Ee},L=()=>{sw(n),m&&(Tp(m),m=null),i.on(te=>{x.remove(te.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},$=()=>{u=setInterval(()=>{i.on(te=>{r()?x.toggleClass(te.caret,"mce-visual-caret-hidden"):x.addClass(te.caret,"mce-visual-caret-hidden")})},500)};return{show:A,hide:L,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(te=>{const ie=_v(n,te.element,te.before);x.setStyles(te.caret,{...ie})})},destroy:()=>clearInterval(u)}},rw=()=>Nn.browser.isFirefox(),lb=e=>kp(e)||zx(e),ub=e=>(lb(e)||Xl(e)&&rw())&&Wf(be.fromDom(e)).exists(Au),Ux=rt,Ap=Uo,aw=ya,iw=Ih("display","block table table-cell table-row table-caption list-item"),Wx=su,db=am,j4=Wt,fb=bt,Tv=Fu,mh=e=>e>0,hh=e=>e<0,gf=(e,n)=>{let o;for(;o=e(n);)if(!db(o))return o;return null},gh=(e,n,o,r,i)=>{const u=new Wa(e,r),m=Ap(e)||db(e);let y;if(hh(n)){if(m&&(y=gf(u.prev.bind(u),!0),o(y)))return y;for(;y=gf(u.prev.bind(u),i);)if(o(y))return y}if(mh(n)){if(m&&(y=gf(u.next.bind(u),!0),o(y)))return y;for(;y=gf(u.next.bind(u),i);)if(o(y))return y}return null},Md=(e,n)=>{const o=i=>Ux(i.dom),r=i=>i.dom===n;return vl(be.fromDom(e),o,r).map(i=>i.dom).getOr(n)},mm=(e,n)=>{for(;e&&e!==n;){if(iw(e))return e;e=e.parentNode}return null},zu=(e,n,o)=>mm(e.container(),o)===mm(n.container(),o),kv=(e,n)=>{if(!n)return W.none();const o=n.container(),r=n.offset();return j4(o)?W.from(o.childNodes[r+e]):W.none()},Zx=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},jx=(e,n,o)=>mm(n,e)===mm(o,e),cw=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&Wx(u)&&(u=u[r]),Ap(u)||aw(u)){if(jx(n,u,i))return u;break}if(Tv(u))break;i=i.parentNode}return null},Op=Ae(Zx,!0),Dp=Ae(Zx,!1),Rp=(e,n,o)=>{let r;const i=Ae(cw,!0,n),u=Ae(cw,!1,n),m=o.startContainer,y=o.startOffset;if(am(m)){const x=fb(m)?m.parentNode:m,A=x.getAttribute("data-mce-caret");if(A==="before"&&(r=x.nextSibling,ub(r)))return Op(r);if(A==="after"&&(r=x.previousSibling,ub(r)))return Dp(r)}if(!o.collapsed)return o;if(bt(m)){if(Wx(m)){if(e===1){if(r=u(m),r)return Op(r);if(r=i(m),r)return Dp(r)}if(e===-1){if(r=i(m),r)return Dp(r);if(r=u(m),r)return Op(r)}return o}if(tc(m)&&y>=m.data.length-1)return e===1&&(r=u(m),r)?Op(r):o;if(ko(m)&&y<=1)return e===-1&&(r=i(m),r)?Dp(r):o;if(y===m.data.length)return r=u(m),r?Op(r):o;if(y===0)return r=i(m),r?Dp(r):o}return o},qx=(e,n)=>kv(e?0:-1,n).filter(Ap),Mp=(e,n,o)=>{const r=Rp(e,n,o);return e===-1?Qe.fromRangeStart(r):Qe.fromRangeEnd(r)},Np=e=>W.from(e.getNode()).map(be.fromDom),q4=e=>W.from(e.getNode(!0)).map(be.fromDom),lw=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Pp=(e,n)=>{const o=zu(e,n);return!o&&qo(e.getNode())?!0:o};var Ka;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ka||(Ka={}));const Gx=Uo,pf=bt,Kx=Wt,Av=qo,Ip=Fu,Yx=c4,Ov=X0,cM=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},uw=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Ya=(e,n)=>{if(mh(e)){if(Ip(n.previousSibling)&&!pf(n.previousSibling))return Qe.before(n);if(pf(n))return Qe(n,0)}if(hh(e)){if(Ip(n.nextSibling)&&!pf(n.nextSibling))return Qe.after(n);if(pf(n))return Qe(n,n.data.length)}return hh(e)?Av(n)?Qe.before(n):Qe.after(n):Qe.before(n)},dw=(e,n)=>{const o=n.nextSibling;return o&&Ip(o)?pf(o)?Qe(o,0):Qe.before(o):bf(Ka.Forwards,Qe.after(n),e)},bf=(e,n,o)=>{let r,i,u,m;if(!Kx(o)||!n)return null;if(n.isEqual(Qe.after(o))&&o.lastChild){if(m=Qe.after(o.lastChild),hh(e)&&Ip(o.lastChild)&&Kx(o.lastChild))return Av(o.lastChild)?Qe.before(o.lastChild):m}else m=n;const y=m.container();let x=m.offset();if(pf(y)){if(hh(e)&&x>0)return Qe(y,--x);if(mh(e)&&x<y.length)return Qe(y,++x);r=y}else{if(hh(e)&&x>0&&(i=uw(y,x-1),Ip(i)))return!Yx(i)&&(u=gh(i,e,Ov,i),u)?pf(u)?Qe(u,u.data.length):Qe.after(u):pf(i)?Qe(i,i.data.length):Qe.before(i);if(mh(e)&&x<y.childNodes.length&&(i=uw(y,x),Ip(i)))return Av(i)?dw(o,i):!Yx(i)&&(u=gh(i,e,Ov,i),u)?pf(u)?Qe(u,0):Qe.before(u):pf(i)?Qe(i,0):Qe.after(i);r=i||m.getNode()}if(r&&(mh(e)&&m.isAtEnd()||hh(e)&&m.isAtStart())&&(r=gh(r,e,pt,o,!0),Ov(r,o)))return Ya(e,r);i=r&&gh(r,e,Ov,o);const A=Ve(Kt(cM(y,o),Gx));return A&&(!i||!A.contains(i))?(mh(e)?m=Qe.after(A):m=Qe.before(A),m):i?Ya(e,i):null},sl=e=>({next:n=>bf(Ka.Forwards,n,e),prev:n=>bf(Ka.Backwards,n,e)}),Xx=(e,n,o)=>{const r=e?Qe.before(o):Qe.after(o);return Wi(e,n,r)},fw=e=>qo(e)?Qe.before(e):Qe.after(e),Dv=e=>Qe.isTextPosition(e)?e.offset()===0:Fu(e.getNode()),mw=e=>{if(Qe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Fu(e.getNode(!0))},ig=(e,n)=>!Qe.isTextPosition(e)&&!Qe.isTextPosition(n)&&e.getNode()===n.getNode(!0),hw=e=>!Qe.isTextPosition(e)&&qo(e.getNode()),vf=(e,n,o)=>e?!ig(n,o)&&!hw(n)&&mw(n)&&Dv(o):!ig(o,n)&&Dv(n)&&mw(o),Wi=(e,n,o)=>{const r=sl(n);return W.from(e?r.next(o):r.prev(o))},cg=(e,n,o)=>Wi(e,n,o).bind(r=>zu(o,r,n)&&vf(e,o,r)?Wi(e,n,r):W.some(r)),yf=(e,n,o,r)=>cg(e,n,o).bind(i=>r(i)?yf(e,n,i,r):W.some(i)),lg=(e,n)=>{const o=e?n.firstChild:n.lastChild;return bt(o)?W.some(Qe(o,e?0:o.data.length)):o?Fu(o)?W.some(e?Qe.before(o):fw(o)):Xx(e,n,o):W.none()},rc=Ae(Wi,!0),fi=Ae(Wi,!1),Zi=Ae(lg,!0),Vu=Ae(lg,!1),Rv="_mce_caret",_l=e=>Wt(e)&&e.id===Rv,ug=(e,n)=>{let o=n;for(;o&&o!==e;){if(_l(o))return o;o=o.parentNode}return null},G4=e=>ce(e.start),Jx=e=>En(e,"rng"),dg=e=>En(e,"id"),Qx=e=>En(e,"name"),eE=e=>ut.isArray(e.start),Mv=e=>!Qx(e)&&Xt(e.forward)?e.forward:!0,tE=(e,n)=>(Wt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),mb=(e,n)=>{const o=W.from(nv(e.getRoot(),n.start)),r=W.from(nv(e.getRoot(),n.end));return ur(o,r,(i,u)=>{const m=e.createRng();return m.setStart(i.container(),i.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:Mv(n)}})},K4=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Da);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},nE=e=>!e.hasChildNodes(),Y4=(e,n)=>Vu(e).fold($e,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),X4=(e,n,o)=>nE(n)&&ug(e,n)?(K4(n,o),!0):!1,hb=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let m=u,y=i[0];for(let x=i.length-1;m&&x>=1;x--){const A=m.childNodes;if(X4(u,m,r))return!0;if(i[x]>A.length-1)return X4(u,m,r)?!0:Y4(m,r);m=A[i[x]]}bt(m)&&(y=Math.min(i[0],m.data.length)),Wt(m)&&(y=Math.min(i[0],m.childNodes.length)),n?r.setStart(m,y):r.setEnd(m,y)}return!0},Nv=e=>bt(e)&&e.data.length>0,gw=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let m,y;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,y=1):Nv(r.nextSibling)?(m=r.nextSibling,y=0):Nv(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)+1):(m=i,y=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,y=1):Nv(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)):(m=i,y=e.nodeIndex(r)),!u){const x=r.previousSibling,A=r.nextSibling;ut.each(ut.grep(r.childNodes),$=>{bt($)&&($.data=$.data.replace(/\uFEFF/g,""))});let L;for(;L=e.get(o.id+"_"+n);)e.remove(L,!0);if(bt(A)&&bt(x)&&!Nn.browser.isOpera()){const $=x.data.length;x.appendData(A.data),e.remove(A),m=x,y=$}}return W.some(Qe(m,y))}else return W.none()},J4=(e,n)=>{const o=e.createRng();return hb(e,!0,n,o)&&hb(e,!1,n,o)?W.some({range:o,forward:Mv(n)}):W.none()},Po=(e,n)=>{const o=gw(e,"start",n),r=gw(e,"end",n);return ur(o,r.or(o),(i,u)=>{const m=e.createRng();return m.setStart(tE(e,i.container()),i.offset()),m.setEnd(tE(e,u.container()),u.offset()),{range:m,forward:Mv(n)}})},hm=(e,n)=>W.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),fg=(e,n)=>{const o=e.dom;if(n){if(eE(n))return J4(o,n);if(G4(n))return mb(o,n);if(dg(n))return Po(o,n);if(Qx(n))return hm(o,n);if(Jx(n))return W.some({range:n.rng,forward:Mv(n)})}return W.none()},Pv=(e,n,o)=>y4(e,n,o),Q4=(e,n)=>{fg(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Hc=e=>Wt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",mg=(e=>n=>e===n)(ea),gm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Iv=e=>!gm(e)&&!mg(e)&&!k1(e),oE=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},sE=e=>_s(e,n=>{const o=Z0(n);return o?[be.fromDom(o)]:[]}),gb=e=>oE(e).length>1,e3=e=>Kt(sE(e),q1),t3=e=>Ua(e,"td[data-mce-selected],th[data-mce-selected]"),Bv=(e,n)=>{const o=t3(n);return o.length>0?o:e3(e)},hg=e=>Bv(oE(e.selection.getSel()),be.fromDom(e.getBody())),pb=(e,n)=>Xd(e,"table",n),Lv=e=>{const n=e.startContainer,o=e.startOffset;return bt(n)?o===0?W.some(be.fromDom(n)):W.none():W.from(n.childNodes[o]).map(be.fromDom)},uM=e=>{const n=e.endContainer,o=e.endOffset;return bt(n)?o===n.data.length?W.some(be.fromDom(n)):W.none():W.from(n.childNodes[o-1]).map(be.fromDom)},rE=e=>Ic(e).fold(ft([e]),n=>[e].concat(rE(n))),gg=e=>Va(e).fold(ft([e]),n=>oo(n)==="br"?ql(n).map(o=>[e].concat(gg(o))).getOr([]):[e].concat(gg(n))),pw=(e,n)=>ur(Lv(n),uM(n),(o,r)=>{const i=Vo(rE(e),Ae(No,o)),u=Vo(gg(e),Ae(No,r));return i.isSome()&&u.isSome()}).getOr(!1),bw=(e,n,o,r)=>{const i=o,u=new Wa(o,i),m=Qo(e.schema.getMoveCaretBeforeOnEnterElements(),(x,A)=>!et(["td","th","table"],A.toLowerCase()));let y=o;do{if(bt(y)&&ut.trim(y.data).length!==0){r?n.setStart(y,0):n.setEnd(y,y.data.length);return}if(m[y.nodeName]){r?n.setStartBefore(y):y.nodeName==="BR"?n.setEndBefore(y):n.setEndAfter(y);return}}while(y=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Fv=e=>{const n=e.selection.getSel();return Fe(n)&&n.rangeCount>0},Nd=(e,n)=>{const o=hg(e);o.length>0?xe(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},aE=(e,n,o)=>{const r=T2(e,n);o(r),e.moveToBookmark(r)},bb=e=>so(e==null?void 0:e.nodeType),vb=e=>Wt(e)&&!Hc(e)&&!_l(e)&&!em(e),n3=(e,n)=>{if(vb(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},iE=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),m=Uo(u);aE(r,!0,()=>{n()}),m&&Uo(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&o3(i,r)},o3=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:m}=i,y=n.getNode();if(!n3(e,y)&&Wt(u)){const x=u.childNodes,A=e.getRoot();let L;if(m<x.length){const $=x[m];L=new Wa($,(o=e.getParent($,e.isBlock))!==null&&o!==void 0?o:A)}else{const $=x[x.length-1];L=new Wa($,(r=e.getParent($,e.isBlock))!==null&&r!==void 0?r:A),L.next(!0)}for(let $=L.current();$;$=L.next()){if(e.getContentEditable($)==="false")return;if(bt($)&&!vw($)){i.setStart($,0),n.setRng(i);return}}}},s3=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Wt(e)||!vw(e))return e}},cE=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Iu(e,n),Bp=(e,n,o)=>e.schema.isValidChild(n,o),vw=(e,n=!1)=>{if(Fe(e)&&bt(e)){const o=n?e.data.replace(/ /g," "):e.data;return el(o)}else return!1},Jt=e=>Fe(e)&&bt(e)&&e.length===0,Xa=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Tx(e),i=lr(r)?o:`${o},${r}`;return xi(be.fromDom(n),i)},yb=(e,n)=>{const o=e.dom;return vb(n)&&o.getContentEditable(n)==="false"&&Xa(e,n)&&o.select('[contenteditable="true"]',n).length===0},Fr=(e,n)=>ve(e)?e(n):(Fe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Tl=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),$v=(e,n)=>{if(en(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=H1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},pg=(e,n,o)=>{const r=e.getStyle(n,o);return $v(r,o)},Hv=(e,n)=>{let o;return e.getParent(n,r=>Wt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},wb=(e,n,o)=>e.getParents(n,o,e.getRoot()),yw=(e,n,o)=>{const r=e.formatter.get(n);return Fe(r)&&_t(r,o)},lE=(e,n)=>yw(e,n,r=>{const i=u=>ve(u)||u.length>1&&u.charAt(0)==="%";return _t(["styles","attributes"],u=>Yo(r,u).exists(m=>{const y=Gt(m)?m:Fi(m);return _t(y,i)}))}),r3=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>Qo(u,(m,y)=>_t(r,x=>x===y));return yw(e,n,u=>{const m=i(u);return yw(e,o,y=>{const x=i(y);return ri(m,x)})})},wf=e=>sr(e,"block"),a3=e=>wf(e)&&e.wrapper===!0,bg=e=>wf(e)&&e.wrapper!==!0,Ac=e=>sr(e,"selector"),ma=e=>sr(e,"inline"),zv=e=>Ac(e)&&ma(e)&&ci(Yo(e,"mixed"),!0),Oc=e=>Ac(e)&&e.expand!==!1&&!ma(e),pm=e=>{const n=[];let o=e;for(;o;){if(bt(o)&&o.data!==Da||o.childNodes.length>1)return[];Wt(o)&&n.push(o),o=o.firstChild}return n},Cb=e=>pm(e).length>0,bm=e=>_l(e.dom)&&Cb(e.dom),Lp=Hc,Sb=wb,xb=vw,i3=cE,c3=e=>qo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,uE=(e,n)=>{let o=n;for(;o;){if(Wt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},dE=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},fE=(e,n,o)=>dE(e,n,o,r=>mg(r)||gm(r)),Vv=(e,n,o)=>dE(e,n,o,Iv),mE=(e,n,o,r,i,u)=>{let m;const y=e.getParent(o,e.isBlock)||n,x=(L,$,z)=>{const X=Xh(e),se=i?X.backwards:X.forwards;return W.from(se(L,$,(te,ie)=>Lp(te.parentNode)?-1:(m=te,z(i,te,ie)),y))};return x(o,r,fE).bind(L=>u?x(L.container,L.offset+(i?-1:0),Vv):W.some(L)).orThunk(()=>m?W.some({container:m,offset:i?0:m.length}):W.none())},Eb=(e,n,o,r,i)=>{const u=r[i];bt(r)&&lr(r.data)&&u&&(r=u);const m=Sb(e,r);for(let y=0;y<m.length;y++)for(let x=0;x<n.length;x++){const A=n[x];if(!(Fe(A.collapsed)&&A.collapsed!==o.collapsed)&&Ac(A)&&e.is(m[y],A.selector))return m[y]}return r},Ii=(e,n,o,r)=>{var i;let u=o;const m=e.getRoot(),y=n[0];if(wf(y)&&(u=y.wrapper?null:e.getParent(o,y.block,m)),!u){const x=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:m;u=e.getParent(bt(o)?o.parentNode:o,A=>A!==m&&i3(e.schema,A),x)}if(u&&wf(y)&&y.wrapper&&(u=Sb(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Tl(u,"br")););return u||o},iu=(e,n,o,r)=>{const i=o.parentNode;return Fe(o[r])?!1:i===n||en(i)||e.isBlock(i)?!0:iu(e,n,i,r)},zc=(e,n,o,r,i)=>{let u=o;const m=i?"previousSibling":"nextSibling",y=e.getRoot();if(bt(o)&&!xb(o)&&(i?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let x=u[m];x;x=x[m]){const A=bt(x)&&!iu(e,y,x,m);if(!Lp(x)&&!c3(x)&&!xb(x,A))return u}if(u===y||u.parentNode===y){o=u;break}u=u.parentNode}return o},_b=e=>Lp(e.parentNode)||Lp(e),vm=(e,n,o,r=!1)=>{let{startContainer:i,startOffset:u,endContainer:m,endOffset:y}=n;const x=o[0];return Wt(i)&&i.hasChildNodes()&&(i=cm(i,u),bt(i)&&(u=0)),Wt(m)&&m.hasChildNodes()&&(m=cm(m,n.collapsed?y:y-1),bt(m)&&(y=m.data.length)),i=uE(e,i),m=uE(e,m),_b(i)&&(i=Lp(i)?i:i.parentNode,n.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,bt(i)&&(u=n.collapsed?i.length:0)),_b(m)&&(m=Lp(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,bt(m)&&(y=n.collapsed?0:m.length)),n.collapsed&&(mE(e,e.getRoot(),i,u,!0,r).each(({container:$,offset:z})=>{i=$,u=z}),mE(e,e.getRoot(),m,y,!1,r).each(({container:$,offset:z})=>{m=$,y=z})),(ma(x)||x.block_expand)&&((!ma(x)||!bt(i)||u===0)&&(i=zc(e,o,i,u,!0)),(!ma(x)||!bt(m)||y===m.data.length)&&(m=zc(e,o,m,y,!1))),Oc(x)&&(i=Eb(e,o,n,i,"previousSibling"),m=Eb(e,o,n,m,"nextSibling")),(wf(x)||Ac(x))&&(i=Ii(e,o,i,"previousSibling"),m=Ii(e,o,m,"nextSibling"),wf(x)&&(e.isBlock(i)||(i=zc(e,o,i,u,!0),bt(i)&&(u=0)),e.isBlock(m)||(m=zc(e,o,m,y,!1),bt(m)&&(y=m.data.length)))),Wt(i)&&i.parentNode&&(u=e.nodeIndex(i),i=i.parentNode),Wt(m)&&m.parentNode&&(y=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:i,startOffset:u,endContainer:m,endOffset:y}},Fp=(e,n,o)=>{var r;const i=n.startOffset,u=cm(n.startContainer,i),m=n.endOffset,y=cm(n.endContainer,m-1),x=ie=>{const Ee=ie[0];bt(Ee)&&Ee===u&&i>=Ee.data.length&&ie.splice(0,1);const Re=ie[ie.length-1];return m===0&&ie.length>0&&Re===y&&bt(Re)&&ie.splice(ie.length-1,1),ie},A=(ie,Ee,Re)=>{const Me=[];for(;ie&&ie!==Re;ie=ie[Ee])Me.push(ie);return Me},L=(ie,Ee)=>e.getParent(ie,Re=>Re.parentNode===Ee,Ee),$=(ie,Ee,Re)=>{const Me=Re?"nextSibling":"previousSibling";for(let Ie=ie,ct=Ie.parentNode;Ie&&Ie!==Ee;Ie=ct){ct=Ie.parentNode;const Ot=A(Ie===ie?Ie:Ie[Me],Me);Ot.length&&(Re||Ot.reverse(),o(x(Ot)))}};if(u===y)return o(x([u]));const z=(r=e.findCommonAncestor(u,y))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,y))return $(u,z,!0);if(e.isChildOf(y,u))return $(y,z);const X=L(u,z)||u,se=L(y,z)||y;$(u,X,!0);const te=A(X===u?X:X.nextSibling,"nextSibling",se===y?se.nextSibling:se);te.length&&o(x(te)),$(y,se)},hE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],gE=e=>na(e)&&fp(e)===Da,ww=(e,n,o,r)=>za(n).fold(()=>"skipping",i=>r==="br"||gE(n)?"valid":Xk(n)?"existing":_l(n.dom)?"caret":_t(hE,u=>xi(n,u))?"valid-block":!Bp(e,o,r)||!Bp(e,oo(i),o)?"invalid-child":"valid"),dM=(e,n)=>{const o=vm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Cw=(e,n,o,r,i,u)=>{const{uid:m=n,...y}=o;bl(e,lp()),oa(e,`${Gh()}`,m),oa(e,`${af()}`,r);const{attributes:x={},classes:A=[]}=i(m,y);if($a(e,x),eM(e,A),u){A.length>0&&oa(e,`${om()}`,A.join(","));const L=ts(x);L.length>0&&oa(e,`${cf()}`,L.join(","))}},l3=e=>{fd(e,lp()),Bs(e,`${Gh()}`),Bs(e,`${af()}`),Bs(e,`${Kh()}`);const n=Er(e,`${cf()}`).map(r=>r.split(",")).getOr([]),o=Er(e,`${om()}`).map(r=>r.split(",")).getOr([]);xe(n,r=>Bs(e,r)),j1(e,o),Bs(e,`${om()}`),Bs(e,`${cf()}`)},pE=(e,n,o,r,i)=>{const u=be.fromTag("span",e);return Cw(u,n,o,r,i,!1),u},Sw=(e,n,o,r,i,u)=>{const m=[],y=pE(e.getDoc(),o,u,r,i),x=Aa(),A=()=>{x.clear()},L=()=>x.get().getOrThunk(()=>{const se=sm(y);return m.push(se),x.set(se),se}),$=se=>{xe(se,z)},z=se=>{switch(ww(e,se,"span",oo(se))){case"invalid-child":{A();const ie=va(se);$(ie),A();break}case"valid-block":{A(),Cw(se,o,u,r,i,!0);break}case"valid":{const ie=L();jm(se,ie);break}}},X=se=>{const te=dt(se,be.fromDom);$(te)};return Fp(e.dom,n,se=>{A(),X(se)}),m},xw=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),m=hg(e).length>0,y=$0("mce-annotation");if(u.collapsed&&!m&&dM(e,u),i.getRng().collapsed&&!m){const x=pE(e.getDoc(),y,r,n,o.decorate);Yl(x,ea),i.getRng().insertNode(x.dom),i.select(x.dom)}else aE(i,!1,()=>{Nd(e,x=>{Sw(e,x,y,n,o.decorate,r)})})})},Rs=e=>{const n=F0();m2(e,n);const o=RS(e,n),r=Su("span"),i=u=>{xe(u,m=>{r(m)?Qc(m):l3(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(y=>{xw(e,u,y,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{W1(e,W.some(u)).each(({elements:m})=>{const y=e.selection.getBookmark();i(m),e.selection.moveToBookmark(y)})},removeAll:u=>{const m=e.selection.getBookmark();Tt(L0(e,u),(y,x)=>{i(y)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=L0(e,u);return go(m,y=>dt(y,x=>x.dom))}}},rl=e=>({getBookmark:Ae(Pv,e),moveToBookmark:Ae(Q4,e)});rl.isBookmarkNode=Hc;const Ew=(e,n,o)=>o.collapsed?!1:_t(o.getClientRects(),r=>WS(r,e,n)),_w=()=>be.fromDom(document),Tw=(e,n=!1)=>e.dom.focus({preventScroll:n}),Uv=e=>{const n=Jc(e).dom;return e.dom===n.activeElement},$p=(e=_w())=>W.from(e.dom.activeElement).map(be.fromDom),Wv=e=>$p(Jc(e)).filter(n=>e.dom.contains(n.dom)),kw={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Zv=au.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),d3=(e,n,o,r)=>e.fold(n,o,r),Tb=e=>e.fold(xo,xo,xo),bE=Zv.before,vE=Zv.on,f3=Zv.after,ym={before:bE,on:vE,after:f3,cata:d3,getStart:Tb},Hp=au.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),al=e=>Hp.exact(e.start,e.soffset,e.finish,e.foffset),ac=e=>e.match({domRange:n=>be.fromDom(n.startContainer),relative:(n,o)=>ym.getStart(n),exact:(n,o,r,i)=>n}),zp=Hp.domRange,fM=Hp.relative,m3=Hp.exact,h3=e=>{const n=ac(e);return gd(n)},Mo=kw.create,kb={domRange:zp,relative:fM,exact:m3,exactFromRange:al,getWin:h3,range:Mo},Aw=(e,n)=>{const o=na(n)?fp(n).length:va(n).length+1;return e>o?o:e<0?0:e},yE=e=>kb.range(e.start,Aw(e.soffset,e.start),e.finish,Aw(e.foffset,e.finish)),g3=(e,n)=>!ef(n.dom)&&(dr(e,n)||No(e,n)),p3=e=>n=>g3(e,n.start)&&g3(e,n.finish),wE=e=>e.inline||Nn.browser.isFirefox(),b3=e=>kb.range(be.fromDom(e.startContainer),e.startOffset,be.fromDom(e.endContainer),e.endOffset),v3=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?W.none():W.from(n.getRangeAt(0))).map(b3)},y3=e=>{const n=gd(e);return v3(n.dom).filter(p3(e))},jv=(e,n)=>W.from(n).filter(p3(e)).map(yE),Ab=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),W.some(n)}catch{return W.none()}},Ob=e=>{const n=wE(e)?y3(be.fromDom(e.getBody())):W.none();e.bookmark=n.isSome()?n:e.bookmark},CE=e=>(e.bookmark?e.bookmark:W.none()).bind(o=>jv(be.fromDom(e.getBody()),o)).bind(Ab),w3=e=>{CE(e).each(n=>e.selection.setRng(n))},C3={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},S3=(e,n)=>(so(n)||(n=0),setTimeout(e,n)),x3=(e,n)=>(so(n)||(n=0),setInterval(e,n)),vn={setEditorTimeout:(e,n,o)=>S3(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=x3(()=>{e.removed?clearInterval(r):n()},o);return r}},l=e=>e.type==="nodechange"&&e.selectionChange,f=(e,n)=>{const o=()=>{n.throttle()};Vs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Vs.DOM.unbind(document,"mouseup",o)})},v=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},C=(e,n)=>{v(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{l(o)||Ob(e)})},O=e=>{const n=cp(()=>{Ob(e)},0);e.on("init",()=>{e.inline&&f(e,n),C(e,n)}),e.on("remove",()=>{n.cancel()})};let I;const U=Vs.DOM,Q=e=>Wt(e)&&C3.isEditorUIElement(e),ae=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},we=(e,n)=>{const o=kx(e);return U.getParent(n,i=>Q(i)||(o?e.dom.is(i,o):!1))!==null},Le=e=>{try{const n=Jc(be.fromDom(e.getElement()));return $p(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},St=(e,n)=>{const o=n.editor;O(o);const r=(i,u)=>{if(rM(i)&&i.inline!==!0){const m=be.fromDom(i.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;ae(Le(o))&&r(o,bl),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{vn.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!ae(Le(o))||i!==o)&&r(o,fd),!we(o,Le(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),I||(I=i=>{const u=e.activeEditor;u&&Ug(i).each(m=>{const y=m;y.ownerDocument===document&&y!==document.body&&!we(u,y)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},U.bind(document,"focusin",I))},jt=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&I&&(U.unbind(document,"focusin",I),I=null)},zt=e=>{e.on("AddEditor",Ae(St,e)),e.on("RemoveEditor",Ae(jt,e))},Nt=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),mn=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,yt=e=>e.collapsed?W.from(cm(e.startContainer,e.startOffset)).map(be.fromDom):W.none(),Rn=(e,n)=>yt(n).bind(o=>t4(o)?W.some(o):dr(e,o)?W.none():W.some(e)),ro=(e,n)=>{Rn(be.fromDom(e.getBody()),n).bind(o=>Zi(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},mt=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},rs=e=>Uv(e)||Wv(e).isSome(),Io=e=>Fe(e.iframeElement)&&Uv(be.fromDom(e.iframeElement)),Bo=e=>{const n=e.getBody();return n&&rs(be.fromDom(n))},$r=e=>{const n=Jc(be.fromDom(e.getElement()));return $p(n).filter(o=>!ae(o.dom)&&we(e,o.dom)).isSome()},hr=e=>e.inline?Bo(e):Io(e),Uu=e=>hr(e)||$r(e),Wu=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=m=>{CE(m).each(y=>{m.selection.setRng(y),r=y})};!hr(e)&&e.hasEditableRoot()&&i(e);const u=Nt(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){mn(e,u)||mt(o),mt(u),e.hasEditableRoot()||i(e),ro(e,r),Zu(e);return}e.inline||(Nn.browser.isOpera()||mt(o),e.getWin().focus()),(Nn.browser.isFirefox()||e.inline)&&(mt(o),ro(e,r)),Zu(e)},Zu=e=>e.editorManager.setActive(e),ss=(e,n)=>{e.removed||(n?Zu(e):Wu(e))},Ht={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ht.metaKeyPressed(e),metaKeyPressed:e=>Nn.os.isMacOS()||Nn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ma="data-mce-selected",ju="table,img,figure.image,hr,video,span.mce-preview-object,details",kl=Math.abs,fo=Math.round,kr={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},wm=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Vp=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let m,y,x,A,L,$,z,X,se,te,ie,Ee,Re,Me,Ie,ct,Ot;const Qt=qt=>Fe(qt)&&(Gg(qt)||o.is(qt,"figure.image")),tt=qt=>ya(qt)||o.hasClass(qt,"mce-preview-object"),Ze=(qt,vo)=>{if(wm(qt)){const Eo=qt.touches[0];return Qt(qt.target)&&!Ew(Eo.clientX,Eo.clientY,vo)}else return Qt(qt.target)&&!Ew(qt.clientX,qt.clientY,vo)},ht=qt=>{const vo=qt.target;Ze(qt,n.selection.getRng())&&!qt.isDefaultPrevented()&&n.selection.select(vo)},sn=qt=>o.hasClass(qt,"mce-preview-object")&&Fe(qt.firstElementChild)?[qt,qt.firstElementChild]:o.is(qt,"figure.image")?[qt.querySelector("img")]:[qt],_n=qt=>{const vo=oc(n);return!vo||n.mode.isReadOnly()||qt.getAttribute("data-mce-resize")==="false"||qt===n.getBody()?!1:o.hasClass(qt,"mce-preview-object")&&Fe(qt.firstElementChild)?xi(be.fromDom(qt.firstElementChild),vo):xi(be.fromDom(qt),vo)},Zn=(qt,vo)=>{if(tt(vo))return qt.create("img",{src:Nn.transparentSrc});if(Xl(vo)){const Pa=cs(A.name,"n")?lo:hs,ms=vo.cloneNode(!0);return Pa(qt.select("tr",ms)).each(dc=>{const Nl=qt.select("td,th",dc);qt.setStyle(dc,"height",null),xe(Nl,Dm=>qt.setStyle(Dm,"height",null))}),ms}else return vo.cloneNode(!0)},ho=(qt,vo,Eo)=>{if(Fe(Eo)){const Pa=sn(qt);xe(Pa,ms=>{ms.style[vo]||!n.schema.isValid(ms.nodeName.toLowerCase(),vo)?o.setStyle(ms,vo,Eo):o.setAttrib(ms,vo,""+Eo)})}},as=(qt,vo,Eo)=>{ho(qt,"width",vo),ho(qt,"height",Eo)},Cs=qt=>{let vo,Eo,Pa,ms,dc;vo=qt.screenX-$,Eo=qt.screenY-z,Me=vo*A[2]+te,Ie=Eo*A[3]+ie,Me=Me<5?5:Me,Ie=Ie<5?5:Ie,(Qt(m)||tt(m))&&U2(n)!==!1?Pa=!Ht.modifierPressed(qt):Pa=Ht.modifierPressed(qt),Pa&&(kl(vo)>kl(Eo)?(Ie=fo(Me*Ee),Me=fo(Ie/Ee)):(Me=fo(Ie/Ee),Ie=fo(Me*Ee))),as(y,Me,Ie),ms=A.startPos.x+vo,dc=A.startPos.y+Eo,ms=ms>0?ms:0,dc=dc>0?dc:0,o.setStyles(x,{left:ms,top:dc,display:"block"}),x.innerHTML=Me+" &times; "+Ie,A[2]<0&&y.clientWidth<=Me&&o.setStyle(y,"left",X+(te-Me)),A[3]<0&&y.clientHeight<=Ie&&o.setStyle(y,"top",se+(ie-Ie)),vo=u.scrollWidth-ct,Eo=u.scrollHeight-Ot,vo+Eo!==0&&o.setStyles(x,{left:ms-vo,top:dc-Eo}),Re||(lx(n,m,te,ie,"corner-"+A.name),Re=!0)},jr=()=>{const qt=Re;Re=!1,qt&&(ho(m,"width",Me),ho(m,"height",Ie)),o.unbind(r,"mousemove",Cs),o.unbind(r,"mouseup",jr),i!==r&&(o.unbind(i,"mousemove",Cs),o.unbind(i,"mouseup",jr)),o.remove(y),o.remove(x),o.remove(L),qi(m),qt&&(ux(n,m,Me,Ie,"corner-"+A.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},qi=qt=>{Yt();const vo=o.getPos(qt,u),Eo=vo.x,Pa=vo.y,ms=qt.getBoundingClientRect(),dc=ms.width||ms.right-ms.left,Nl=ms.height||ms.bottom-ms.top;m!==qt&&(Ft(),m=qt,Me=Ie=0);const Dm=n.dispatch("ObjectSelected",{target:qt});_n(qt)&&!Dm.isDefaultPrevented()?Tt(kr,(Rc,mu)=>{const hu=gu=>{const wn=sn(m)[0];$=gu.screenX,z=gu.screenY,te=wn.clientWidth,ie=wn.clientHeight,Ee=ie/te,A=Rc,A.name=mu,A.startPos={x:dc*Rc[0]+Eo,y:Nl*Rc[1]+Pa},ct=u.scrollWidth,Ot=u.scrollHeight,L=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(L,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),y=Zn(o,m),o.addClass(y,"mce-clonedresizable"),o.setAttrib(y,"data-mce-bogus","all"),y.contentEditable="false",o.setStyles(y,{left:Eo,top:Pa,margin:0}),as(y,dc,Nl),y.removeAttribute(Ma),u.appendChild(y),o.bind(r,"mousemove",Cs),o.bind(r,"mouseup",jr),i!==r&&(o.bind(i,"mousemove",Cs),o.bind(i,"mouseup",jr)),x=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},te+" &times; "+ie)};let Gi=o.get("mceResizeHandle"+mu);Gi&&o.remove(Gi),Gi=o.add(u,"div",{id:"mceResizeHandle"+mu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+mu+"-resize; margin:0; padding:0"}),o.bind(Gi,"mousedown",gu=>{gu.stopImmediatePropagation(),gu.preventDefault(),hu(gu)}),Rc.elm=Gi,o.setStyles(Gi,{left:dc*Rc[0]+Eo-Gi.offsetWidth/2,top:Nl*Rc[1]+Pa-Gi.offsetHeight/2})}):Ft(!1)},hi=cp(qi,0),Ft=(qt=!0)=>{hi.cancel(),Yt(),m&&qt&&m.removeAttribute(Ma),Tt(kr,(vo,Eo)=>{const Pa=o.get("mceResizeHandle"+Eo);Pa&&(o.unbind(Pa),o.remove(Pa))})},xn=(qt,vo)=>o.isChildOf(qt,vo),Zo=qt=>{if(Re||n.removed||n.composing)return;const vo=qt.type==="mousedown"?qt.target:e.getNode(),Eo=gn(be.fromDom(vo),ju).map(ms=>ms.dom).filter(ms=>o.isEditable(ms.parentElement)||ms.nodeName==="IMG"&&o.isEditable(ms)).getOrUndefined(),Pa=Fe(Eo)?o.getAttrib(Eo,Ma,"1"):"1";if(xe(o.select(`img[${Ma}],hr[${Ma}]`),ms=>{ms.removeAttribute(Ma)}),Fe(Eo)&&xn(Eo,u)&&Uu(n)){Ln();const ms=e.getStart(!0);if(xn(ms,Eo)&&xn(e.getEnd(!0),Eo)){o.setAttrib(Eo,Ma,Pa),hi.throttle(Eo);return}}Ft()},Yt=()=>{Tt(kr,qt=>{qt.elm&&(o.unbind(qt.elm),delete qt.elm)})},Ln=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Ln(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Zo),n.on("keyup compositionend",qt=>{m&&m.nodeName==="TABLE"&&Zo(qt)}),n.on("hide blur",Ft),n.on("contextmenu longpress",ht,!0)}),n.on("remove",Yt),{isResizable:_n,showResizeRect:qi,hideResizeRect:Ft,updateResizeRect:Zo,destroy:()=>{hi.cancel(),m=y=L=null}}},Al=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Jn=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},SE=(e,n,o)=>{const r=e.document.createRange();return Al(r,n),Jn(r,o),r},qv=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},vg=au.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xE=(e,n,o)=>n(be.fromDom(o.startContainer),o.startOffset,be.fromDom(o.endContainer),o.endOffset),yg=(e,n)=>n.match({domRange:o=>({ltr:ft(o),rtl:W.none}),relative:(o,r)=>({ltr:Ge(()=>SE(e,o,r)),rtl:Ge(()=>W.some(SE(e,r,o)))}),exact:(o,r,i,u)=>({ltr:Ge(()=>qv(e,o,r,i,u)),rtl:Ge(()=>W.some(qv(e,i,u,o,r)))})}),Cm=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>vg.rtl(be.fromDom(i.endContainer),i.endOffset,be.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>xE(e,vg.ltr,o)):xE(e,vg.ltr,o)},EE=(e,n)=>{const o=yg(e,n);return Cm(e,o)};vg.ltr,vg.rtl;const Db=(e,n,o)=>{var r;return W.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return W.none();const u=e.createRange();return u.setStart(i.offsetNode,i.offset),u.collapse(),W.some(u)})},w7=(e,n,o)=>{var r;return W.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},C7=(e,n,o)=>e.caretPositionFromPoint?Db(e,n,o):e.caretRangeFromPoint?w7(e,n,o):W.none(),Ow=(e,n,o)=>{const r=e.document;return C7(r,n,o).map(i=>kw.create(be.fromDom(i.startContainer),i.startOffset,be.fromDom(i.endContainer),i.endOffset))},wg=(e,n)=>{const o=oo(e);return o==="input"?ym.after(e):et(["br","img"],o)?n===0?ym.before(e):ym.after(e):ym.on(e,n)},S7=(e,n)=>{const o=e.fold(ym.before,wg,ym.after),r=n.fold(ym.before,wg,ym.after);return kb.relative(o,r)},E3=(e,n,o,r)=>{const i=wg(e,n),u=wg(o,r);return kb.relative(i,u)},x7=e=>e.match({domRange:n=>{const o=be.fromDom(n.startContainer),r=be.fromDom(n.endContainer);return E3(o,n.startOffset,r,n.endOffset)},relative:S7,exact:E3}),_3=(e,n)=>{const r=document.createDocumentFragment();return xe(e,i=>{r.appendChild(i.dom)}),be.fromDom(r)},E7=e=>{const n=kb.getWin(e).dom,o=(i,u,m,y)=>qv(n,i,u,m,y),r=x7(e);return EE(n,r).match({ltr:o,rtl:o})},mM=(e,n,o)=>Ow(e,n,o),_7=(e,n,o)=>{const r=gd(be.fromDom(o));return mM(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},T3=(e,n)=>Fe(e)&&Fe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,hM=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},_E=(e,n,o)=>hM(e,n,o)!==null,k3=(e,n,o)=>_E(e,n,r=>r.nodeName===o),A3=(e,n)=>su(e)&&!_E(e,n,_l),O3=(e,n,o)=>{const r=n.parentNode;if(r){const i=new Wa(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(qo(u))return!0}return!1},gM=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},pM=(e,n)=>{let o=n;for(;o&&o!==e;){if(Uo(o))return!0;o=o.parentNode}return!1},Gv=(e,n,o,r,i)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),y=i.parentNode;let x,A;if(!y)return W.none();const L=e.getParent(y,e.isBlock)||u;if(r&&qo(i)&&n&&e.isEmpty(L))return W.some(Qe(y,e.nodeIndex(i)));const $=new Wa(i,L);for(;A=$[r?"prev":"next"]();){if(e.getContentEditableParent(A)==="false"||A3(A,u))return W.none();if(bt(A)&&A.data.length>0)return k3(A,u,"A")?W.none():W.some(Qe(A,r?A.data.length:0));if(e.isBlock(A)||m[A.nodeName.toLowerCase()])return W.none();x=A}return ra(x)?W.none():o&&x?W.some(Qe(x,0)):W.none()},bM=(e,n,o,r)=>{const i=e.getRoot();let u,m=!1,y=o?r.startContainer:r.endContainer,x=o?r.startOffset:r.endOffset;const A=Wt(y)&&x===y.childNodes.length,L=e.schema.getNonEmptyElements();let $=o;if(su(y))return W.none();if(Wt(y)&&x>y.childNodes.length-1&&($=!1),Km(y)&&(y=i,x=0),y===i){if($&&(u=y.childNodes[x>0?x-1:0],u&&(su(u)||L[u.nodeName]||Xl(u))))return W.none();if(y.hasChildNodes()){if(x=Math.min(!$&&x>0?x-1:x,y.childNodes.length-1),y=y.childNodes[x],x=bt(y)&&A?y.data.length:0,!n&&y===i.lastChild&&Xl(y)||pM(i,y)||su(y)||O1(y))return W.none();if(y.hasChildNodes()&&!Xl(y)){u=y;const z=new Wa(y,i);do{if(Uo(u)||su(u)){m=!1;break}if(bt(u)&&u.data.length>0){x=$?0:u.data.length,y=u,m=!0;break}if(L[u.nodeName.toLowerCase()]&&!ia(u)){x=e.nodeIndex(u),y=u.parentNode,$||x++,m=!0;break}}while(u=$?z.next():z.prev())}}}return n&&(bt(y)&&x===0&&Gv(e,A,n,!0,y).each(z=>{y=z.container(),x=z.offset(),m=!0}),Wt(y)&&(u=y.childNodes[x],u||(u=y.childNodes[x-1]),u&&qo(u)&&!gM(u,"A")&&!O3(e,u,!1)&&!O3(e,u,!0)&&Gv(e,A,n,!0,u).each(z=>{y=z.container(),x=z.offset(),m=!0}))),$&&!n&&bt(y)&&x===y.data.length&&Gv(e,A,n,!1,y).each(z=>{y=z.container(),x=z.offset(),m=!0}),m&&y?W.some(Qe(y,x)):W.none()},Dw=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Qe.fromRangeStart(n);return bM(e,o,!0,r).each(u=>{(!o||!Qe.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||bM(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),T3(n,r)?W.none():W.some(r)},TE=(e,n)=>e.splitText(n),Rw=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&bt(n)){if(o>0&&o<n.data.length)if(r=TE(n,o),n=r.previousSibling,i>o){i=i-o;const u=TE(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(bt(n)&&o>0&&o<n.data.length&&(n=TE(n,o),o=0),bt(r)&&i>0&&i<r.data.length){const u=TE(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},Up=e=>({walk:(u,m)=>Fp(e,u,m),split:Rw,expand:(u,m={type:"word"})=>{if(m.type==="word"){const y=vm(e,u,[{inline:"span"}]),x=e.createRng();return x.setStart(y.startContainer,y.startOffset),x.setEnd(y.endContainer,y.endOffset),x}return u},normalize:u=>Dw(e,u).fold($e,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});Up.compareRanges=T3,Up.getCaretRangeFromPoint=_7,Up.getSelectedNode=Z0,Up.getNode=cm;const vM=((e,n)=>{const o=(y,x)=>{if(!so(x)&&!x.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+x);const A=y.dom;bd(A)&&(A.style[e]=x+"px")},r=y=>{const x=n(y);if(x<=0||x===null){const A=vr(y,e);return parseFloat(A)||0}return x},i=r,u=(y,x)=>Fo(x,(A,L)=>{const $=vr(y,L),z=$===void 0?0:parseInt($,10);return isNaN(z)?A:A+z},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(y,x,A)=>{const L=u(y,A);return x>L?x-L:0}}})("height",e=>{const n=e.dom;return Kl(e)?n.getBoundingClientRect().height:n.offsetHeight}),yM=e=>vM.get(e),wM=(e,n)=>e.view(n).fold(ft([]),r=>{const i=e.owner(r),u=wM(e,i);return[r].concat(u)}),k7=(e,n)=>{const o=n.owner(e);return wM(n,o)};var A7=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?W.none():W.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(be.fromDom)},owner:e=>Zl(e)});const O7=e=>{const n=_w(),o=pn(n),r=k7(e,A7),i=Gn(e),u=is(r,(m,y)=>{const x=Gn(y);return{left:m.left+x.left,top:m.top+x.top}},{left:0,top:0});return Se(u.left+i.left+o.left,u.top+i.top+o.top)},D3=e=>oo(e)==="textarea",D7=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),kE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},CM=(e,n)=>{const o=va(e);if(o.length===0||D3(e))return{element:e,offset:n};if(n<o.length&&!D3(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return D3(r)?{element:e,offset:n}:oo(r)==="img"?{element:r,offset:1}:na(r)?{element:r,offset:fp(r).length}:{element:r,offset:va(r).length}}},SM=(e,n)=>{const o=eo(e),r=yM(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},xM=(e,n)=>{const o=CM(e,n),r=be.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Da+"</span>");return ui(o.element,r),SM(r,()=>ws(r))},EM=e=>SM(be.fromDom(e),it),_M=(e,n,o,r)=>{M7(e,(i,u)=>R7(e,n,o,r),o)},TM=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(D7(e,u))return;const m=pn(n).top;o(e,n,m,r,i),kE(e,u)},R7=(e,n,o,r)=>{const i=be.fromDom(e.getBody()),u=be.fromDom(e.getDoc());sa(i);const m=xM(be.fromDom(o.startContainer),o.startOffset);TM(e,u,n,m,r),m.cleanup()},kM=(e,n,o,r)=>{const i=be.fromDom(e.getDoc());TM(e,i,o,EM(n),r)},M7=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,m=o.endOffset;n(be.fromDom(r),be.fromDom(u));const y=e.dom.createRng();y.setStart(r,i),y.setEnd(u,m),e.selection.setRng(o)},AE=(e,n,o,r,i)=>{const u=n.pos;if(r)Qs(u.left,u.top,i);else{const m=u.top-o+n.height;Qs(-e.getBody().getBoundingClientRect().left,m,i)}},R3=(e,n,o,r,i,u)=>{const m=r+o,y=i.pos.top,x=i.bottom,A=x-y>=r;y<o?AE(e,i,r,u!==!1,n):y>m?AE(e,i,r,A?u!==!1:u===!0,n):x>m&&!A&&AE(e,i,r,u===!0,n)},Mw=(e,n,o,r,i)=>{const u=gd(n).dom.innerHeight;R3(e,n,o,u,r,i)},AM=(e,n,o,r,i)=>{const u=gd(n).dom.innerHeight;R3(e,n,o,u,r,i);const m=O7(r.element),y=_1(window);m.top<y.y?Tr(r.element,i!==!1):m.top>y.bottom&&Tr(r.element,i===!0)},N7=(e,n,o)=>_M(e,Mw,n,o),M3=(e,n,o)=>kM(e,n,Mw,o),P7=(e,n,o)=>_M(e,AM,n,o),OM=(e,n,o)=>kM(e,n,AM,o),DM=(e,n,o)=>{(e.inline?M3:OM)(e,n,o)},Kv=(e,n,o)=>{(e.inline?N7:P7)(e,n,o)},RM=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),MM=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return W.from(u).map(be.fromDom).map(y=>!r||!n.collapsed?Gl(y,i(y,m)).getOr(y):y).bind(y=>Is(y)?W.some(y):za(y).filter(Is)).map(y=>y.dom).getOr(e)},NM=(e,n,o=!1)=>MM(e,n,!0,o,(r,i)=>Math.min(ku(r),i)),PM=(e,n,o=!1)=>MM(e,n,!1,o,(r,i)=>i>0?i-1:i),Nw=(e,n)=>{const o=e;for(;e&&bt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},IM=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(m=o.childNodes[i]),bt(o)&&bt(r)&&(o.length===i?o=Nw(o.nextSibling,!0):o=o.parentNode,u===0?r=Nw(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const y=bt(m)?m.parentNode:m;return tl(y)?y:e},BM=(e,n,o,r)=>{const i=[],u=e.getRoot(),m=e.getParent(o||NM(u,n,n.collapsed),e.isBlock),y=e.getParent(r||PM(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&i.push(m),m&&y&&m!==y){let x;const A=new Wa(m,u);for(;(x=A.next())&&x!==y;)e.isBlock(x)&&i.push(x)}return y&&m!==y&&y!==u&&i.push(y),i},LM=(e,n,o)=>W.from(n).bind(r=>W.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(i,u),m.setEnd(i,u+1),o&&(bw(e,m,r,!0),bw(e,m,r,!1)),m})),OE=(e,n)=>dt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),I7={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},DE=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[i],u)return u}},B7=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!el(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},FM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class il{static create(n,o){const r=new il(n,I7[n]||1);return o&&Tt(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ce(n))return Fe(n)&&Tt(n,(u,m)=>{r.attr(m,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new il(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,m=r.length;u<m;u++){const y=r[u];y.name!=="id"&&(i[i.length]={name:y.name,value:y.value},i.map[y.name]=y.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=DE(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=DE(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let m=u.firstChild;if(FM(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||FM(m))return!1}if(m.type===8||m.type===3&&!B7(m)||m.type===3&&m.parent&&o[m.parent.name]&&el((i=m.value)!==null&&i!==void 0?i:"")||r&&r(m))return!1}while(m=DE(m,u));return!0}walk(n){return DE(this,null,n)}}const L7=ut.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),$M=e=>ce(e.nodeValue)&&e.nodeValue.includes(Da),HM=e=>`${e.length===0?"":`${dt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,F7=(e,n)=>n.querySelectorAll(HM(e)),zM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>$M(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),VM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if($M(n)){const o=n.parentNode;return o&&En(L7,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),$7=e=>zM(e).nextNode()!==null,RE=e=>VM(e).nextNode()!==null,UM=(e,n)=>n.querySelector(HM(e))!==null,WM=(e,n)=>{xe(F7(e,n),o=>{const r=be.fromDom(o);li(r,"data-mce-bogus")==="all"?ws(r):xe(e,i=>{ld(r,i)&&Bs(r,i)})})},ZM=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},H7=M(ZM,zM),z7=M(ZM,VM),jM=(e,n)=>{const o=[{condition:Ae(UM,n),action:Ae(WM,n)},{condition:$7,action:H7},{condition:RE,action:z7}];let r=e,i=!1;return xe(o,({condition:u,action:m})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),m(r))}),r},qM=e=>{const n=Ua(e,"[data-mce-bogus]");xe(n,o=>{li(o,"data-mce-bogus")==="all"?ws(o):Ri(o)?(ui(o,be.fromText(jg)),ws(o)):Qc(o)})},GM=e=>{const n=Ua(e,"input");xe(n,o=>{Bs(o,"name")})},KM=(e,n)=>{const o=Ga(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},V7=(e,n)=>{const o=e.getDoc(),r=Jc(be.fromDom(e.getBody())),i=be.fromTag("div",o);oa(i,"data-mce-bogus","all"),Xn(i,{position:"fixed",left:"-9999999px",top:"0"}),Yl(i,n.innerHTML),qM(i),GM(i);const u=zg(r);Ls(u,i);const m=Ec(i.dom.innerText);return ws(i),m},YM=(e,n,o)=>{let r;return n.format==="raw"?r=ut.trim(Ec(jM(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=V7(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=KM(e,e.serializer.serialize(o,n)),n.format!=="text"&&!V0(be.fromDom(o))&&ce(r)?ut.trim(r):r},XM=(e,n)=>W.from(e.getBody()).fold(ft(n.format==="tree"?new il("body",11):""),o=>YM(e,n,o)),JM=ut.makeMap,QM=e=>{const n=[];e=e||{};const o=e.indent,r=JM(e.indent_before||""),i=JM(e.indent_after||""),u=Uh.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(y,x,A)=>{if(o&&r[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}if(n.push("<",y),x)for(let L=0,$=x.length;L<$;L++){const z=x[L];n.push(" ",z.name,'="',u(z.value,!0),'"')}if(!A||m?n[n.length]=">":n[n.length]=" />",A&&o&&i[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}},end:y=>{let x;n.push("</",y,">"),o&&i[y]&&n.length>0&&(x=n[n.length-1],x.length>0&&x!==`
`&&n.push(`
`))},text:(y,x)=>{y.length>0&&(n[n.length]=x?y:u(y))},cdata:y=>{n.push("<![CDATA[",y,"]]>")},comment:y=>{n.push("<!--",y,"-->")},pi:(y,x)=>{x?n.push("<?",y," ",u(x),"?>"):n.push("<?",y,"?>"),o&&n.push(`
`)},doctype:y=>{n.push("<!DOCTYPE",y,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Wp=(e={},n=fs())=>{const o=QM(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,m={3:x=>{var A;o.text((A=x.value)!==null&&A!==void 0?A:"",x.raw)},8:x=>{var A;o.comment((A=x.value)!==null&&A!==void 0?A:"")},7:x=>{o.pi(x.name,x.value)},10:x=>{var A;o.doctype((A=x.value)!==null&&A!==void 0?A:"")},4:x=>{var A;o.cdata((A=x.value)!==null&&A!==void 0?A:"")},11:x=>{let A=x;if(A=A.firstChild)do y(A);while(A=A.next)}};o.reset();const y=x=>{var A;const L=m[x.type];if(L)L(x);else{const $=x.name,z=$ in n.getVoidElements();let X=x.attributes;if(u&&X&&X.length>1){const se=[];se.map={};const te=n.getElementRule(x.name);if(te){for(let ie=0,Ee=te.attributesOrder.length;ie<Ee;ie++){const Re=te.attributesOrder[ie];if(Re in X.map){const Me=X.map[Re];se.map[Re]=Me,se.push({name:Re,value:Me})}}for(let ie=0,Ee=X.length;ie<Ee;ie++){const Re=X[ie].name;if(!(Re in se.map)){const Me=X.map[Re];se.map[Re]=Me,se.push({name:Re,value:Me})}}X=se}}if(o.start($,X,z),os($))ce(x.value)&&o.text(x.value,!0),o.end($);else if(!z){let se=x.firstChild;if(se){($==="pre"||$==="textarea")&&se.type===3&&((A=se.value)===null||A===void 0?void 0:A[0])===`
`&&o.text(`
`,!0);do y(se);while(se=se.next)}o.end($)}}};return i.type===1&&!e.inner?y(i):i.type===3?m[3](i):m[11](i),o.getContent()}}},eN=new Set;xe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{eN.add(n)});const tN=new Set;xe(["background-color"],n=>{tN.add(n)});const nN=["font","text-decoration","text-emphasis"],U7=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Yv=(e,n)=>ts(U7(e,n)),W7=e=>eN.has(e),Z7=e=>tN.has(e),oN=(e,n)=>_t(Yv(e,n),o=>W7(o)),j7=(e,n)=>oN(e,n)&&_t(Yv(e,n),o=>Z7(o)),q7=e=>Kt(e,n=>_t(nN,o=>cs(n,o))),G7=(e,n,o)=>{const r=Yv(e,n),i=Yv(e,o),u=m=>{var y,x;const A=(y=e.getStyle(n,m))!==null&&y!==void 0?y:"",L=(x=e.getStyle(o,m))!==null&&x!==void 0?x:"";return ls(A)&&ls(L)&&A!==L};return _t(r,m=>{const y=x=>_t(x,A=>A===m);if(!y(i)&&y(nN)){const x=q7(i);return _t(x,u)}else return u(m)})},sN=(e,n,o)=>W.from(o.container()).filter(bt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),N3=Ae(sN,!0,gm),P3=Ae(sN,!1,gm),K7=e=>{const n=e.container();return bt(n)&&(n.data.length===0||p2(n.data)&&rl.isBookmarkNode(n.parentNode))},Zp=(e,n)=>o=>kv(e?0:-1,o).filter(n).isSome(),Sn=e=>Gg(e)&&vr(be.fromDom(e),"display")==="block",I3=e=>Uo(e)&&!Bh(e),rN=Zp(!0,Sn),Y7=Zp(!1,Sn),Rb=Zp(!0,ya),Pw=Zp(!1,ya),aN=Zp(!0,Xl),B3=Zp(!1,Xl),jp=Zp(!0,I3),qp=Zp(!1,I3),ME=e=>e.slice(0,-1),iN=(e,n,o)=>dr(n,e)?ME(Zf(e,r=>o(r)||No(r,n))):[],X7=(e,n)=>iN(e,n,$e),Cg=(e,n)=>[e].concat(X7(e,n)),Wn=(e,n,o)=>yf(e,n,o,K7),J7=e=>n=>e.isBlock(oo(n)),Kn=(e,n,o)=>Vo(Cg(be.fromDom(n.container()),e),J7(o)),L3=(e,n,o,r)=>Wn(e,n.dom,o).forall(i=>Kn(n,o,r).fold(()=>!zu(i,o,n.dom),u=>!zu(i,o,n.dom)&&dr(u,be.fromDom(i.container())))),Q7=(e,n,o,r)=>Kn(n,o,r).fold(()=>Wn(e,n.dom,o).forall(i=>!zu(i,o,n.dom)),i=>Wn(e,i.dom,o).isNone()),cN=Ae(Q7,!1),lN=Ae(Q7,!0),mY=Ae(L3,!1),hY=Ae(L3,!0),eH=e=>Np(e).exists(Ri),NE=(e,n,o,r)=>{const i=Kt(Cg(be.fromDom(o.container()),n),m=>r.isBlock(oo(m))),u=lo(i).getOr(n);return Wi(e,u.dom,o).filter(eH)},$n=(e,n,o)=>Np(n).exists(Ri)||NE(!0,e,n,o).isSome(),PE=(e,n,o)=>q4(n).exists(Ri)||NE(!1,e,n,o).isSome(),uN=Ae(NE,!1),tH=Ae(NE,!0),Xv=e=>Qe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),F3=(e,n,o)=>{const r=Kt(Cg(be.fromDom(n.container()),e),i=>o.isBlock(oo(i)));return lo(r).getOr(e)},dN=(e,n,o)=>Xv(n)?P3(n):P3(n)||fi(F3(e,n,o).dom,n).exists(P3),fN=(e,n,o)=>Xv(n)?N3(n):N3(n)||rc(F3(e,n,o).dom,n).exists(N3),nH=e=>et(["pre","pre-wrap"],e),IE=e=>Np(e).bind(n=>Js(n,Is)).exists(n=>nH(vr(n,"white-space"))),oH=(e,n)=>fi(e.dom,n).isNone(),gY=(e,n)=>rc(e.dom,n).isNone(),pY=(e,n,o)=>oH(e,n)||gY(e,n)||cN(e,n,o)||lN(e,n,o)||PE(e,n,o)||$n(e,n,o),sH=e=>Fe(e)&&Uo(e)&&iw(e),mN=(e,n)=>o=>sH(new Wa(o,e)[n]()),rH=(e,n)=>{const o=rc(e.dom,n).getOr(n),r=mN(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},aH=(e,n)=>{const o=fi(e.dom,n).getOr(n),r=mN(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},$3=(e,n,o)=>IE(n)?!1:pY(e,n,o)||dN(e,n,o)||fN(e,n,o),Iw=(e,n,o)=>IE(n)?!1:cN(e,n,o)||mY(e,n,o)||PE(e,n,o)||dN(e,n,o)||aH(e,n),mo=e=>{const n=e.container(),o=e.offset();return bt(n)&&o<n.data.length?Qe(n,o+1):e},Jv=(e,n,o)=>IE(n)?!1:lN(e,n,o)||hY(e,n,o)||$n(e,n,o)||fN(e,n,o)||rH(e,n),Qv=(e,n,o)=>Iw(e,n,o)||Jv(e,mo(n),o),H3=(e,n)=>mg(e.charAt(n)),z3=(e,n)=>gm(e.charAt(n)),hN=e=>{const n=e.container();return bt(n)&&ns(n.data,ea)},gN=e=>{const n=e.split("");return dt(n,(o,r)=>mg(o)&&r>0&&r<n.length-1&&Iv(n[r-1])&&Iv(n[r+1])?" ":o).join("")},V3=(e,n,o,r)=>{const i=n.data,u=Qe(n,0);return!o&&H3(i,0)&&!Qv(e,u,r)?(n.data=" "+i.slice(1),!0):o&&z3(i,0)&&Iw(e,u,r)?(n.data=ea+i.slice(1),!0):!1},iH=e=>{const n=e.data,o=gN(n);return o!==n?(e.data=o,!0):!1},U3=(e,n,o,r)=>{const i=n.data,u=Qe(n,i.length-1);return!o&&H3(i,i.length-1)&&!Qv(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&z3(i,i.length-1)&&Jv(e,u,r)?(n.data=i.slice(0,-1)+ea,!0):!1},cH=(e,n,o)=>{const r=n.container();if(!bt(r))return W.none();if(hN(n)){const i=V3(e,r,!1,o)||iH(r)||U3(e,r,!1,o);return yi(i,n)}else if(Qv(e,n,o)){const i=V3(e,r,!0,o)||U3(e,r,!0,o);return yi(i,n)}else return W.none()},lH=e=>{const n=be.fromDom(e.getBody());e.selection.isCollapsed()&&cH(n,Qe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},pN=(e,n,o,r)=>{if(o===0)return;const i=be.fromDom(e),u=vl(i,A=>r.isBlock(oo(A))).getOr(i),m=e.data.slice(n,n+o),y=n+o>=e.data.length&&Jv(u,Qe(e,e.data.length),r),x=n===0&&Iw(u,Qe(e,0),r);e.replaceData(n,o,wl(m,4,x,y))},BE=(e,n,o)=>{const r=e.data.slice(n),i=r.length-hl(r).length;pN(e,n,i,o)},W3=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-ai(r).length;pN(e,n-i,i,o)},Z3=(e,n,o,r,i=!0)=>{const u=ai(e.data).length,m=i?e:n,y=i?n:e;return i?m.appendData(y.data):m.insertData(0,y.data),ws(be.fromDom(y)),r&&BE(m,u,o),m},uH=(e,n)=>{const o=e.container(),r=e.offset();return!Qe.isTextPosition(e)&&o===n.parentNode&&r>Qe.before(n).offset()},dH=(e,n)=>uH(n,e)?Qe(n.container(),n.offset()-1):n,j3=e=>bt(e)?Qe(e,0):Qe.before(e),q3=e=>bt(e)?Qe(e,e.data.length):Qe.after(e),bN=e=>Fu(e.previousSibling)?W.some(q3(e.previousSibling)):e.previousSibling?Vu(e.previousSibling):W.none(),vN=e=>Fu(e.nextSibling)?W.some(j3(e.nextSibling)):e.nextSibling?Zi(e.nextSibling):W.none(),fH=(e,n)=>W.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>fi(e,Qe.before(o))).orThunk(()=>rc(e,Qe.after(n))),mH=(e,n)=>rc(e,Qe.after(n)).orThunk(()=>fi(e,Qe.before(n))),hH=(e,n)=>bN(n).orThunk(()=>vN(n)).orThunk(()=>fH(e,n)),gH=(e,n)=>vN(n).orThunk(()=>bN(n)).orThunk(()=>mH(e,n)),pH=(e,n,o)=>e?gH(n,o):hH(n,o),bH=(e,n,o)=>pH(e,n,o).map(Ae(dH,o)),G3=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},vH=e=>n=>n.dom===e,yH=(e,n)=>n&&En(e.schema.getBlockElements(),oo(n)),Mb=(e,n,o)=>{if(la(e,n)){const r=be.fromHtml('<br data-mce-bogus="1">');return o?xe(va(n),i=>{bm(i)||ws(i)}):yl(n),Ls(n,r),W.some(Qe.before(r.dom))}else return W.none()},wH=(e,n,o,r)=>{const i=ql(e).filter(na),u=Yd(e).filter(na);return ws(e),uo(i,u,n,(m,y,x)=>{const A=m.dom,L=y.dom,$=A.data.length;return Z3(A,L,o,r),x.container()===L?Qe(A,$):x}).orThunk(()=>(r&&(i.each(m=>W3(m.dom,m.dom.length,o)),u.each(m=>BE(m.dom,0,o))),n))},yN=(e,n)=>En(e.schema.getTextInlineElements(),oo(n)),Nb=(e,n,o,r=!0,i=!1)=>{const u=bH(n,e.getBody(),o.dom),m=vl(o,Ae(yH,e),vH(e.getBody())),y=wH(o,u,e.schema,yN(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):m.bind(x=>Mb(e.schema,x,i)).fold(()=>{r&&G3(e,n,y)},x=>{r&&G3(e,n,W.some(x))})},CH=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,wN=e=>CH.test(e),Gp=(e,n)=>xi(be.fromDom(n),Sx(e))&&!Iu(e.schema,n)&&e.dom.isEditable(n),K3=e=>{var n;return Vs.DOM.getStyle(e,"direction",!0)==="rtl"||wN((n=e.textContent)!==null&&n!==void 0?n:"")},CN=(e,n,o)=>Kt(Vs.DOM.getParents(o.container(),"*",n),e),Ja=(e,n,o)=>{const r=CN(e,n,o);return W.from(r[r.length-1])},SH=(e,n,o)=>{const r=mm(n,e),i=mm(o,e);return Fe(r)&&r===i},xH=e=>gp(e)||im(e),Pd=(e,n)=>{const o=n.container(),r=n.offset();return e?uf(o)?bt(o.nextSibling)?Qe(o.nextSibling,0):Qe.after(o):gp(n)?Qe(o,r+1):n:uf(o)?bt(o.previousSibling)?Qe(o.previousSibling,o.previousSibling.data.length):Qe.before(o):im(n)?Qe(o,r-1):n},SN=Ae(Pd,!0),xN=Ae(Pd,!1),Kp=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},EH=e=>{e.execCommand("delete")},LE=e=>Kp(e,"Delete"),gr=e=>Kp(e,"ForwardDelete"),FE=e=>n=>ci(za(n),e,No),Bw=e=>Bu(e)||nh(e),$E=(e,n)=>dr(e,n)?Js(n,Bw,FE(e)):W.none(),Yp=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},qu=(e,n,o)=>ur(Zi(o),Vu(o),(r,i)=>{const u=Pd(!0,r),m=Pd(!1,i),y=Pd(!1,n);return e?rc(o,y).exists(x=>x.isEqual(m)&&n.isEqual(u)):fi(o,y).exists(x=>x.isEqual(u)&&n.isEqual(m))}).getOr(!0),ey=e=>(Ul(e)?ql(e):Va(e)).bind(ey).orThunk(()=>W.some(e)),Es=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=ey(o).getOr(o),m=be.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(m.dom===e.getBody()?Yp(e,r):la(e.schema,m,{checkRootAsContent:!1})&&(lf(m),r&&e.selection.setCursorLocation(m.dom,0)),!No(o,m)){const y=ci(za(m),o)?[]:jl(m);xe(y.concat(va(o)),x=>{!No(x,m)&&!dr(x,m)&&la(e.schema,x)&&ws(x)})}},Lw=e=>n=>No(e,n),HE=e=>Ua(e,"td,th"),Y3=(e,n)=>pb(be.fromDom(e),n),zE=e=>ur(e.startTable,e.endTable,(n,o)=>{const r=T1(n,u=>No(u,o)),i=T1(o,u=>No(u,n));return!r&&!i?e:{...e,startTable:r?W.none():e.startTable,endTable:i?W.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),X3=e=>zE(e),J3=(e,n)=>{const o=Y3(e.startContainer,n),r=Y3(e.endContainer,n),i=o.isSome(),u=r.isSome(),m=ur(o,r,No).getOr(!1);return X3({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:m,isMultiTable:!m&&i&&u})},Fw=(e,n)=>({start:e,end:n}),Q3=(e,n,o)=>({rng:e,table:n,cells:o}),Xp=au.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ty=(e,n)=>gn(be.fromDom(e),"td,th",n),eA=e=>!No(e.start,e.end),tA=(e,n)=>pb(e.start,n).bind(o=>pb(e.end,n).bind(r=>yi(No(o,r),o))),EN=(e,n)=>!eA(e)&&tA(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),_N=(e,n)=>{const o=ty(e.startContainer,n),r=ty(e.endContainer,n);return ur(o,r,Fw)},TN=e=>n=>pb(n,e).bind(o=>hs(HE(o)).map(r=>Fw(n,r))),ny=e=>n=>pb(n,e).bind(o=>lo(HE(o)).map(r=>Fw(r,n))),VE=e=>n=>tA(n,e).map(o=>Q3(n,o,HE(o))),UE=(e,n,o,r)=>{if(o.collapsed||!e.forall(eA))return W.none();if(n.isSameTable){const i=e.bind(VE(r));return W.some({start:i,end:i})}else{const i=ty(o.startContainer,r),u=ty(o.endContainer,r),m=i.bind(TN(r)).bind(VE(r)),y=u.bind(ny(r)).bind(VE(r));return W.some({start:m,end:y})}},kN=(e,n)=>Ws(e,o=>No(o,n)),nA=e=>ur(kN(e.cells,e.rng.start),kN(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),AN=(e,n,o)=>e.exists(r=>EN(r,o)&&pw(r.start,n)),oA=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},ON=(e,n,o,r)=>UE(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,m=nA(i).getOr([]);if(u&&i.cells.length===m.length)return W.some(Xp.fullTable(i.table));if(m.length>0){if(u)return W.some(Xp.partialTable(m,W.none()));{const y=oA(o,n);return W.some(Xp.partialTable(m,W.some({...n,rng:y})))}}else return W.none()}),WE=(e,n,o,r)=>UE(e,n,o,r).bind(({start:i,end:u})=>{const m=i.bind(nA).getOr([]),y=u.bind(nA).getOr([]);if(m.length>0&&y.length>0){const x=oA(o,n);return W.some(Xp.multiTable(m,y,x))}else return W.none()}),DN=(e,n)=>{const o=Lw(e),r=_N(n,o),i=J3(n,o);return AN(r,n,o)?r.map(u=>Xp.singleCellTable(n,u.start)):i.isMultiTable?WE(r,i,n,o):ON(r,i,n,o)},sA=e=>xe(e,n=>{Bs(n,"contenteditable"),lf(n)}),RN=(e,n)=>W.from(e.dom.getParent(n,e.dom.isBlock)).map(be.fromDom),MN=(e,n,o)=>{o.each(r=>{n?ws(r):(lf(r),e.selection.setCursorLocation(r.dom,0))})},ZE=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),jE(e,i,n,!1).each(u=>u())},rA=e=>{const n=hg(e),o=be.fromDom(e.selection.getNode());Kg(o.dom)&&la(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&_t(n,r=>No(r,o))&&oa(o,"data-mce-selected","1")},aA=(e,n,o)=>W.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:m})=>{const y=RN(e,m?u.endContainer:u.startContainer);u.deleteContents(),MN(e,m,y.filter(Ae(la,e.schema)));const x=m?n[0]:n[n.length-1];return ZE(e,x,r,m),la(e.schema,x)?W.none():W.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);sA(i),rA(e)}),NN=(e,n,o,r)=>W.some(()=>{const i=e.selection.getRng(),u=n[0],m=o[o.length-1];ZE(e,u,i,!0),ZE(e,m,i,!1);const y=la(e.schema,u)?n:n.slice(1),x=la(e.schema,m)?o:o.slice(0,-1);sA(y.concat(x)),r.deleteContents(),rA(e)}),jE=(e,n,o,r=!0)=>W.some(()=>{Es(e,n,o,r)}),PN=(e,n)=>W.some(()=>Nb(e,!1,n)),iA=(e,n,o)=>DN(n,o).bind(r=>r.fold(Ae(jE,e),Ae(PN,e),Ae(aA,e),Ae(NN,e))),IN=(e,n)=>$w(e,n),BN=(e,n,o,r)=>qE(n,r).fold(()=>iA(e,n,o),i=>IN(e,i)),LN=(e,n,o)=>{const r=be.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?aA(e,o,W.none()):BN(e,r,i,n)},cA=(e,n)=>Vo(Cg(n,e),q1),qE=(e,n)=>Vo(Cg(n,e),Su("caption")),FN=(e,n,o,r,i)=>cg(o,e.getBody(),i).bind(u=>cA(n,be.fromDom(u.getNode())).bind(m=>No(m,r)?W.none():W.some(it))),$w=(e,n)=>W.some(()=>{lf(n),e.selection.setCursorLocation(n.dom,0)}),lA=(e,n,o,r)=>Zi(e.dom).bind(i=>Vu(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),GE=(e,n)=>$w(e,n),$N=(e,n,o)=>qE(e,be.fromDom(o.getNode())).fold(()=>W.some(it),r=>yi(!No(r,n),it)),_H=(e,n,o,r,i)=>cg(o,e.getBody(),i).fold(()=>W.some(it),u=>lA(r,o,i,u)?GE(e,r):$N(n,r,u)),HN=(e,n,o,r)=>{const i=Qe.fromRangeStart(e.selection.getRng());return cA(o,r).bind(u=>la(e.schema,u,{checkRootAsContent:!1})?$w(e,u):FN(e,o,n,u,i))},KE=(e,n,o,r)=>{const i=Qe.fromRangeStart(e.selection.getRng());return la(e.schema,r)?$w(e,r):_H(e,o,n,r,i)},YE=(e,n)=>e?aN(n):B3(n),Hw=(e,n)=>{const o=Qe.fromRangeStart(e.selection.getRng());return YE(n,o)||Wi(n,e.getBody(),o).exists(r=>YE(n,r))},uA=(e,n,o)=>{const r=be.fromDom(e.getBody());return qE(r,o).fold(()=>HN(e,n,r,o).orThunk(()=>yi(Hw(e,n),it)),i=>KE(e,n,r,i))},XE=(e,n)=>{const o=be.fromDom(e.selection.getStart(!0)),r=hg(e);return e.selection.isCollapsed()&&r.length===0?uA(e,n,o):LN(e,o,r)},Cf=(e,n)=>{let o=n;for(;o&&o!==e;){if(rt(o)||Uo(o))return o;o=o.parentNode}return null},dA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],fA=ut.each,Jp=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const y=A=>{const L={};return fA(n.getAttribs(A),$=>{const z=$.nodeName.toLowerCase();z!=="style"&&!i(z)&&(L[z]=n.getAttrib(A,z))}),L},x=(A,L)=>{for(const $ in A)if(En(A,$)){const z=L[$];if(In(z)||A[$]!==z)return!1;delete L[$]}for(const $ in L)if(En(L,$))return!1;return!0};return Wt(u)&&Wt(m)&&(!x(y(u),y(m))||!x(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!Hc(u)&&!Hc(m)},i=u=>_t(dA,m=>cs(u,m))||o.has(u);return{compare:r,isAttributeInternal:i}},Sg=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),zN=e=>e.name==="summary",TH=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},VN=(e,n,o,r)=>{const i=o.name;for(let u=0,m=e.length;u<m;u++){const y=e[u];if(y.name===i){const x=r.nodes[i];x?x.nodes.push(o):r.nodes[i]={filter:y,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const y=n[u],x=y.name;if(x in o.attributes.map){const A=r.attributes[x];A?A.nodes.push(o):r.attributes[x]={filter:y,nodes:[o]}}}},UN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&TH(o,i=>{VN(e,n,i,r)}),r},mA=(e,n)=>{const o=(r,i)=>{Tt(r,u=>{const m=Rr(u.nodes);xe(u.filter.callbacks,y=>{for(let x=m.length-1;x>=0;x--){const A=m[x];(!(i?A.attr(u.filter.name)!==void 0:A.name===u.filter.name)||en(A.parent))&&m.splice(x,1)}m.length>0&&y(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},hA=(e,n,o,r={})=>{const i=UN(e,n,o);mA(i,r)},gA=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new il("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new il("#text",3)).value=ea},Qp=e=>{var n;return e1(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ea},e1=(e,n)=>{const o=e==null?void 0:e.firstChild;return Fe(o)&&o===e.lastChild&&o.name===n},bY=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Na=(e,n,o,r)=>r.isEmpty(n,o,i=>bY(e,i)),kH=(e,n)=>Fe(e)&&(n(e)||e.name==="br"),AH=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return W.from(n)},Sm=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&Sm(i,n,o);e.unwrap()}},Jo=(e,n,o,r=it)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=ut.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),x=new Set,A=L=>L!==o&&!y[L.name];for(let L=0;L<e.length;L++){const $=e[L];let z,X,se;if(!$.parent||x.has($))continue;if(i[$.name]&&$.parent.name==="li"){let ie=$.next;for(;ie&&i[ie.name];){ie.name="li",x.add(ie),$.parent.insert(ie,$.parent);ie=ie.next}$.unwrap();continue}const te=[$];for(z=$.parent;z&&!n.isValidChild(z.name,$.name)&&A(z);z=z.parent)te.push(z);if(z&&te.length>1)if(pA(n,$,z))Sm($,n);else{te.reverse(),X=te[0].clone(),r(X);let ie=X;for(let Ee=0;Ee<te.length-1;Ee++){n.isValidChild(ie.name,te[Ee].name)&&Ee>0?(se=te[Ee].clone(),r(se),ie.append(se)):se=ie;for(let Re=te[Ee].firstChild;Re&&Re!==te[Ee+1];){const Me=Re.next;se.append(Re),Re=Me}ie=se}Na(n,u,m,X)?z.insert($,te[0],!0):(z.insert(X,te[0],!0),z.insert($,X)),z=te[0],(Na(n,u,m,z)||e1(z,"br"))&&z.empty().remove()}else if($.parent){if($.name==="li"){let ie=$.prev;if(ie&&(ie.name==="ul"||ie.name==="ol")){ie.append($);continue}if(ie=$.next,ie&&(ie.name==="ul"||ie.name==="ol")&&ie.firstChild){ie.insert($,ie.firstChild,!0);continue}const Ee=new il("ul",1);r(Ee),$.wrap(Ee);continue}if(n.isValidChild($.parent.name,"div")&&n.isValidChild("div",$.name)){const ie=new il("div",1);r(ie),$.wrap(ie)}else Sm($,n)}}},vY=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},pA=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&vY(o,"a")?!0:zN(o)&&Sg(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,OH=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},cr=e=>{const n=Qe.fromRangeStart(e),o=Qe.fromRangeEnd(e),r=e.commonAncestorContainer;return Wi(!1,r,o).map(i=>!zu(n,o,r)&&zu(n,i,r)?OH(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},JE=e=>e.collapsed?e:cr(e),zw=e=>Fe(e.firstChild)&&e.firstChild===e.lastChild,Vw=e=>e.name==="br"||e.value===ea,Uw=(e,n)=>e.getBlockElements()[n.name]&&zw(n)&&Vw(n.firstChild),Ww=(e,n)=>{const o=e.getNonEmptyElements();return Fe(n)&&(n.isEmpty(o)||Uw(e,n))},WN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),Ww(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},yY=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},wY=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return yY(i)},CY=e=>{var n;return Kt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},SY=e=>e.data===ea||qo(e),DH=e=>Fe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&SY(e.firstChild),xY=e=>!e.firstChild||DH(e),RH=e=>e.length>0&&xY(e[e.length-1])?e.slice(0,-1):e,bA=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},EY=(e,n)=>!!bA(e,n),MH=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Ar=(e,n)=>{const o=Qe.before(e),i=sl(n).next(o);return i?i.toRange():null},vA=(e,n)=>{const o=Qe.after(e),i=sl(n).prev(o);return i?i.toRange():null},ZN=(e,n,o,r)=>{const i=MH(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),ut.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(i[1],e),u.removeChild(e)),vA(n[n.length-1],o)},NH=(e,n,o)=>{const r=e.parentNode;return r&&ut.each(n,i=>{r.insertBefore(i,e)}),Ar(e,o)},PH=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),vA(n[0],o)),IH=(e,n,o,r)=>{const i=wY(n,e,r),u=bA(n,o.startContainer),m=RH(CY(i.firstChild)),y=1,x=2,A=n.getRoot(),L=$=>{const z=Qe.fromRangeStart(o),X=sl(n.getRoot()),se=$===y?X.prev(z):X.next(z),te=se==null?void 0:se.getNode();return te?bA(n,te)!==u:!0};return u?L(y)?NH(u,m,A):L(x)?PH(u,m,A,n):ZN(u,m,A,o):null},cu=["pre"],Sf=(e,n,o,r)=>{var i;const u=n.firstChild,m=n.lastChild,y=m.attr("data-mce-type")==="bookmark"?m.prev:m,x=u===y,A=et(cu,u.name);if(x&&A){const L=u.attr("contenteditable")!=="false",$=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,z=W.from(Cf(r,o)).forall(rt);return L&&$&&z}else return!1},QE=Kg,yA=(e,n,o)=>{if(Fe(o)){const r=e.getParent(n.endContainer,QE);return o===r&&pw(be.fromDom(o),n)}else return!1},wA=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const i=o.firstChild,u=o.lastChild;!i||i===u&&i.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},e_=(e,n,o)=>{W.from(e.getParent(n,"td,th")).map(be.fromDom).each(r=>zS(r,o))},jN=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=Jp(e),m="*[data-mce-fragment]",y=r.select(m);ut.each(y,x=>{const A=z=>Fe(o[z.nodeName.toLowerCase()]),L=z=>z.childNodes.length===1;if((z=>!(oN(r,z)||j7(r,z)))(x)&&A(x)&&L(x)){const z=Yv(r,x),X=(Ee,Re)=>Ss(Ee,Me=>et(Re,Me)),se=Ee=>L(x)&&r.is(Ee,m)&&A(Ee)&&(Ee.nodeName===x.nodeName&&X(z,Yv(r,Ee))||se(Ee.children[0])),te=Ee=>Fe(Ee)&&Ee!==i&&(u.compare(x,Ee)||te(Ee.parentElement)),ie=Ee=>Fe(Ee)&&Ee!==i&&r.is(Ee,m)&&(G7(r,x,Ee)||ie(Ee.parentElement));(se(x.children[0])||te(x.parentElement)&&!ie(x.parentElement))&&r.remove(x,!0)}})}},Zw=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},t_=e=>{ut.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},CA=e=>!!e.getAttribute("data-mce-fragment"),qN=(e,n)=>Fe(n)&&!e.schema.getVoidElements()[n.nodeName],jw=(e,n)=>{var o,r,i;let u;const m=e.dom,y=e.selection;if(!n)return;y.scrollIntoView(n);const x=Cf(e.getBody(),n);if(x&&m.getContentEditable(x)==="false"){m.remove(n),y.select(x);return}let A=m.createRng();const L=n.previousSibling;if(bt(L)){A.setStart(L,(r=(o=L.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const X=n.nextSibling;bt(X)&&(L.appendData(X.data),(i=X.parentNode)===null||i===void 0||i.removeChild(X))}else A.setStartBefore(n),A.setEndBefore(n);const $=X=>{let se=Qe.fromRangeStart(X);return se=sl(e.getBody()).next(se),se==null?void 0:se.toRange()},z=m.getParent(n,m.isBlock);if(m.remove(n),z&&m.isEmpty(z)){const X=QE(z);yl(be.fromDom(z)),A.setStart(z,0),A.setEnd(z,0),!X&&!CA(z)&&(u=$(A))?(A=u,m.remove(z)):m.add(z,m.create("br",X?{}:{"data-mce-bogus":"1"}))}y.setRng(A)},BH=e=>{const n=e.dom,o=JE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,QE);yA(n,o,r)?jE(e,o,be.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&bt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},LH=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return W.some(n);return W.none()},xm=(e,n,o)=>{var r;return _t(o.children(),Sg)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},lu=(e,n,o)=>{var r,i;const u=e.selection,m=e.dom,y=e.parser,x=o.merge,A=Wp({validate:!0},e.schema),L='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Ec(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,L);let $=u.getRng();const z=$.startContainer,X=e.getBody();z===X&&u.isCollapsed()&&m.isBlock(X.firstChild)&&qN(e,X.firstChild)&&m.isEmpty(X.firstChild)&&($=m.createRng(),$.setStart(X.firstChild,0),$.setEnd(X.firstChild,0),u.setRng($)),u.isCollapsed()||BH(e);const se=u.getNode(),te={context:se.nodeName.toLowerCase(),data:o.data,insert:!0},ie=y.parse(n,te);if(o.paste===!0&&WN(e.schema,ie)&&EY(m,se))return $=IH(A,m,u.getRng(),ie),$&&u.setRng($),n;o.paste===!0&&Sf(m,ie,se,e.getBody())&&((r=ie.firstChild)===null||r===void 0||r.unwrap()),Zw(ie);let Ee=ie.lastChild;if(Ee&&Ee.attr("id")==="mce_marker"){const Re=Ee;for(Ee=Ee.prev;Ee&&Ee.name!=="table";Ee=Ee.walk(!0))if(Ee.type===3||!m.isBlock(Ee.name)){Ee.parent&&e.schema.isValidChild(Ee.parent.name,"span")&&Ee.parent.insert(Re,Ee,Ee.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(se),!te.invalid&&!xm(m,se,ie))n=A.serialize(ie),wA(e,n,se);else{e.selection.setContent(L);let Re=u.getNode(),Me;const Ie=e.getBody();for(Km(Re)?Re=Me=Ie:Me=Re;Me&&Me!==Ie;)Re=Me,Me=Me.parentNode;n=Re===Ie?Ie.innerHTML:m.getOuterHTML(Re);const ct=y.parse(n),Ot=LH(ct),Qt=Ot.bind(AH).getOr(ct);Ot.each(sn=>sn.replace(ie));const tt=ie.children(),Ze=(i=ie.parent)!==null&&i!==void 0?i:ct;ie.unwrap();const ht=Kt(tt,sn=>pA(e.schema,sn,Ze));Jo(ht,e.schema,Qt),hA(y.getNodeFilters(),y.getAttributeFilters(),ct),n=A.serialize(ct),Re===Ie?m.setHTML(Ie,n):m.setOuterHTML(Re,n)}return jN(e,x),jw(e,m.get("mce_marker")),t_(e.getBody()),e_(m,u.getStart(),e.schema),Ql(e.schema,e.getBody(),u.getStart()),n},t1=e=>e instanceof il,Id=e=>{hr(e)&&Zi(e.getBody()).each(n=>{const o=n.getNode(),r=Xl(o)?Zi(o).getOr(n):n;e.selection.setRng(r.toRange())})},SA=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Id(e)},qs=(e,n,o,r)=>{if(o=Ec(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=Ga(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,hf(e),o)):o||(o=i),SA(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Wp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=V0(be.fromDom(n))?o:ut.trim(o);return SA(e,i,r.no_selection),{content:i,html:i}}},FH=(e,n,o,r)=>{hA(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Wp({validate:!1},e.schema).serialize(o),u=Ec(V0(be.fromDom(n))?i:ut.trim(i));return SA(e,u,r.no_selection),{content:o,html:u}},Pb=(e,n,o)=>W.from(e.getBody()).map(r=>t1(n)?FH(e,r,n,o):qs(e,r,n,o)).getOr({content:n,html:t1(o.content)?"":o.content}),oy=e=>ve(e)?e:$e,GN=(e,n,o)=>{let r=e.dom;const i=oy(o);for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r),m=n(u);if(m.isSome())return m;if(i(u))break}return W.none()},qw=(e,n,o)=>{const r=n(e),i=oy(o);return r.orThunk(()=>i(e)?W.none():GN(e,n,i))},Gw=Tl,KN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(Ac(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Kw=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,y=>KN(e,y,o)?!0:y.parentNode===u||!!Em(e,y,o,r,!0));return!!Em(e,m,o,r,i)},n_=(e,n,o)=>ma(o)&&Gw(n,o.inline)||wf(o)&&Gw(n,o.block)?!0:Ac(o)?Wt(n)&&e.is(n,o.selector):!1,xA=(e,n,o,r,i,u)=>{const m=o[r],y=r==="attributes";if(ve(o.onmatch))return o.onmatch(n,o,r);if(m){if(ml(m)){for(let x=0;x<m.length;x++)if(y?e.getAttrib(n,m[x]):pg(e,n,m[x]))return!0}else for(const x in m)if(En(m,x)){const A=y?e.getAttrib(n,x):pg(e,n,x),L=Fr(m[x],u),$=en(A)||lr(A);if($&&en(L))continue;if(i&&$&&!o.exact||(!i||o.exact)&&!Gw(A,$v(L,x)))return!1}}return!0},Em=(e,n,o,r,i)=>{const u=e.formatter.get(o),m=e.dom;if(u&&Wt(n))for(let y=0;y<u.length;y++){const x=u[y];if(n_(e.dom,n,x)&&xA(m,n,x,"attributes",i,r)&&xA(m,n,x,"styles",i,r)){const A=x.classes;if(A){for(let L=0;L<A.length;L++)if(!e.dom.hasClass(n,Fr(A[L],r)))return}return x}}},Yw=(e,n,o,r,i)=>{if(r)return Kw(e,r,n,o,i);if(r=e.selection.getNode(),Kw(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&Kw(e,u,n,o,i))},YN=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let y=0;y<n.length;y++){const x=n[y];!i[x]&&Em(e,m,x,o)&&(i[x]=!0,r.push(x))}},e.dom.getRoot()),r},o_=(e,n)=>{const o=i=>No(i,be.fromDom(e.getBody())),r=(i,u)=>Em(e,i.dom,u)?W.some(u):W.none();return W.from(e.selection.getStart(!0)).bind(i=>qw(be.fromDom(i),u=>Li(n,m=>r(u,m)),o)).getOrNull()},$H=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=wb(r,i);for(let m=o.length-1;m>=0;m--){const y=o[m];if(!Ac(y))return!0;for(let x=u.length-1;x>=0;x--)if(r.is(u[x],y.selector))return!0}}return!1},HH=(e,n,o)=>Fo(o,(r,i)=>{const u=lE(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),Xw=Da,zH=(e,n)=>e.importNode(n,!0),XN=e=>{if(e){const n=new Wa(e,e);for(let o=n.current();o;o=n.next())if(bt(o))return o}return null},s_=e=>{const n=be.fromTag("span");return $a(n,{id:Rv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ls(n,be.fromText(Xw)),n},VH=e=>{const n=XN(e);return n&&n.data.charAt(0)===Xw&&n.deleteData(0,1),n},EA=(e,n,o)=>{const r=e.dom,i=e.selection;if(Cb(n))Nb(e,!1,be.fromDom(n),o,!0);else{const u=i.getRng(),m=r.getParent(n,r.isBlock),y=u.startContainer,x=u.startOffset,A=u.endContainer,L=u.endOffset,$=VH(n);r.remove(n,!0),y===$&&x>0&&u.setStart($,x-1),A===$&&L>0&&u.setEnd($,L-1),m&&r.isEmpty(m)&&lf(be.fromDom(m)),i.setRng(u)}},r_=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)EA(e,n,o);else if(n=ug(e.getBody(),i.getStart()),!n)for(;n=r.get(Rv);)EA(e,n,o)},UH=(e,n,o)=>{var r,i;const u=e.dom,m=u.getParent(o,Ae(cE,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(HS(be.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},_A=(e,n)=>(e.appendChild(n),n),sy=(e,n)=>{var o;const r=is(e,(u,m)=>_A(u,m.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return _A(r,i.createTextNode(Xw))},WH=(e,n,o,r,i,u)=>{const m=e.formatter,y=e.dom,x=Kt(ts(m.get()),$=>$!==r&&!ns($,"removeformat")),A=HH(e,o,x);if(Kt(A,$=>!r3(e,$,r)).length>0){const $=o.cloneNode(!1);return y.add(n,$),m.remove(r,i,$,u),y.remove($),W.some($)}else return W.none()},JN=e=>BS(e,fp(e).replace(new RegExp(`${ea}$`)," ")),TA=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&ql(be.fromDom(n)).each(r=>{na(r)?JN(r):Kf(r,i=>na(i)).each(i=>{na(i)&&JN(i)})})};e.once("input",r=>{r.data&&!gm(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},ZH=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const m=i.getRng();let y=m.startOffset;const A=m.startContainer.nodeValue;r=ug(e.getBody(),i.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(A&&y>0&&y<A.length&&L.test(A.charAt(y))&&L.test(A.charAt(y-1))){const $=i.getBookmark();m.collapse(!0);let z=vm(e.dom,m,u);z=Rw(z),e.formatter.apply(n,o,z),i.moveToBookmark($)}else{let $=r?XN(r):null;(!r||($==null?void 0:$.data)!==Xw)&&(r=zH(e.getDoc(),s_(!0).dom),$=r.firstChild,m.insertNode(r),y=1,TA(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation($,y)}},QN=(e,n,o,r)=>{const i=e.dom,u=e.selection;let m=!1;const y=e.formatter.get(n);if(!y)return;const x=u.getRng(),A=x.startContainer,L=x.startOffset;let $=A;bt(A)&&(L!==A.data.length&&(m=!0),$=$.parentNode);const z=[];let X;for(;$;){if(Em(e,$,n,o,r)){X=$;break}$.nextSibling&&(m=!0),z.push($),$=$.parentNode}if(X)if(m){const se=u.getBookmark();x.collapse(!0);let te=vm(i,x,y,!0);te=Rw(te),e.formatter.remove(n,o,te,r),u.moveToBookmark(se)}else{const se=ug(e.getBody(),X),te=Fe(se)?i.getParents(X.parentNode,pt,se):[],ie=s_(!1).dom;UH(e,ie,se??X);const Ee=WH(e,ie,X,n,o,r),Re=sy([...z,...Ee.toArray(),...te],ie);se&&EA(e,se,Fe(se)),u.setCursorLocation(Re,1),TA(e,ie),i.isEmpty(X)&&i.remove(X)}},Bd=(e,n,o)=>{const r=e.selection,i=e.getBody();r_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Xw&&r_(e,ug(i,r.getStart()),!0),(n===37||n===39)&&r_(e,ug(i,r.getStart()),!0)},jH=e=>bt(e)&&Wr(e.data,ea),eP=e=>{e.on("mouseup keydown",n=>{Bd(e,n.keyCode,jH(e.selection.getRng().endContainer))})},a_=e=>{const n=s_(!1),o=sy(e,n.dom);return{caretContainer:n,caretPosition:Qe(o,0)}},i_=(e,n)=>{const{caretContainer:o,caretPosition:r}=a_(n);return ui(be.fromDom(e),o),ws(be.fromDom(e)),r},tP=(e,n)=>{const{caretContainer:o,caretPosition:r}=a_(n);return e.insertNode(o.dom),r},kA=(e,n)=>{if(_l(n.dom))return!1;const o=e.schema.getTextInlineElements();return En(o,oo(n))&&!_l(n.dom)&&!em(n.dom)},Jw={},nP=Cl(["pre"]),oP=(e,n)=>{Jw[e]||(Jw[e]=[]),Jw[e].push(n)},sP=(e,n)=>{En(Jw,e)&&xe(Jw[e],o=>{o(n)})};oP("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const m=u.previousSibling;return nP(m)&&et(i,m)},r=(i,u)=>{const m=be.fromDom(u),y=Zl(m).dom;ws(m),Du(be.fromDom(i),[be.fromTag("br",y),be.fromTag("br",y),...va(m)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=Kt(Kt(i,nP),o(i));xe(u,m=>{r(m.previousSibling,m)})}});const Gu=["fontWeight","fontStyle","color","fontSize","fontFamily"],qH=e=>Je(e.styles)&&_t(ts(e.styles),n=>et(Gu,n)),GH=e=>Vo(e,n=>ma(n)&&n.inline==="span"&&qH(n)),KH=(e,n)=>{const o=e.get(n);return Gt(o)?GH(o):W.none()},c_=(e,n)=>fi(n,Qe.fromRangeStart(e)).isNone(),rP=(e,n)=>rc(n,Qe.fromRangeEnd(e)).exists(o=>!qo(o.getNode())||rc(n,o).isSome())===!1,YH=e=>n=>Sl(n)&&e.isEditable(n),XH=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return c_(o,n[0])&&rP(o,n[0])?n:[];{const r=lo(n).filter(m=>c_(o,m)).toArray(),i=hs(n).filter(m=>rP(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},AA=e=>Kt(XH(e),YH(e.dom)),xf=e=>Kt(e.getSelectedBlocks(),YH(e.dom)),Qw=ut.each,ry=e=>Wt(e)&&!Hc(e)&&!_l(e)&&!em(e),l_=(e,n)=>{for(let o=e;o;o=o[n]){if(bt(o)&&ls(o.data))return e;if(Wt(o)&&!Hc(o))return o}return e},aP=(e,n,o)=>{const r=Jp(e),i=tl(n)&&e.dom.isEditable(n),u=tl(o)&&e.dom.isEditable(o);if(i&&u){const m=l_(n,"previousSibling"),y=l_(o,"nextSibling");if(r.compare(m,y)){for(let x=m.nextSibling;x&&x!==y;){const A=x;x=x.nextSibling,m.appendChild(A)}return e.dom.remove(y),ut.each(ut.grep(y.childNodes),x=>{m.appendChild(x)}),m}}return o},OA=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=aP(e,s3(r),r))!==null&&i!==void 0?i:r;aP(e,u,s3(u,!0))}},JH=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Qw(e.select(r,o),i=>{ry(i)&&e.isEditable(i)&&Qw(n.styles,(u,m)=>{e.setStyle(i,m,"")})})}},u_=(e,n,o)=>{Qw(e.childNodes,r=>{ry(r)&&(n(r)&&o(r),r.hasChildNodes()&&u_(r,n,o))})},DA=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},iP=(e,n)=>o=>!!(o&&pg(e,o,n)),RA=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),DA(e,r)},Ib=au.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Bb=/^(src|href|style)$/,d_=ut.each,f_=Tl,cP=e=>/^(TR|TH|TD)$/.test(e.nodeName),lP=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),uP=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Wt(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return bt(r)&&o&&i>=r.data.length&&(r=new Wa(r,e.getBody()).next()||r),bt(r)&&!o&&i===0&&(r=new Wa(r,e.getBody()).prev()||r),r},dP=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return cP(e)&&r?e.nodeName==="TR"&&r[o]||r:e},MA=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},fP=(e,n,o,r,i)=>{const u=be.fromDom(n),m=be.fromDom(e.create(r,i)),y=o?jf(u):vc(u);return Du(m,y),o?(ui(u,m),Zm(m,u)):(yc(u,m),Ls(m,u)),m.dom},mP=(e,n)=>n.links&&e.nodeName==="A",hP=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,m=Ga(e);wf(o)&&r===u.getRoot()&&(!o.list_block||!f_(n,o.list_block))&&xe(Rr(n.childNodes),y=>{Bp(e,m,y.nodeName.toLowerCase())?i?i.appendChild(y):(i=MA(u,y,m),u.setAttribs(i,hf(e))):i=null}),!(zv(o)&&!f_(o.inline,n))&&u.remove(n,!0)},m_=(e,n,o)=>so(e)?{name:n,value:null}:{name:e,value:Fr(n,o)},n1=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},gP=(e,n,o,r,i)=>{let u=!1;d_(o.styles,(m,y)=>{const{name:x,value:A}=m_(y,m,r),L=$v(A,x);(o.remove_similar||oe(A)||!Wt(i)||f_(pg(e,i,x),L))&&e.setStyle(n,x,""),u=!0}),u&&n1(e,n)},QH=(e,n,o)=>{n==="removeformat"?xe(xf(e.selection),r=>{xe(Gu,i=>e.dom.setStyle(r,i,"")),n1(e.dom,r)}):KH(e.formatter,n).each(r=>{xe(xf(e.selection),i=>gP(e.dom,i,r,o,null))})},eC=(e,n,o,r,i)=>{const u=e.dom,m=Jp(e),y=e.schema;if(ma(n)&&xl(y,n.inline)&&Iu(y,r)&&r.parentElement===e.getBody())return hP(e,r,n),Ib.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!n_(u,r,n)&&!mP(r,n))return Ib.keep();const x=r,A=n.preserve_attributes;if(ma(n)&&n.remove==="all"&&Gt(A)){const L=Kt(u.getAttribs(x),$=>et(A,$.name.toLowerCase()));if(u.removeAllAttribs(x),xe(L,$=>u.setAttrib(x,$.name,$.value)),L.length>0)return Ib.rename("span")}if(n.remove!=="all"){gP(u,x,n,o,i),d_(n.attributes,($,z)=>{const{name:X,value:se}=m_(z,$,o);if(n.remove_similar||oe(se)||!Wt(i)||f_(u.getAttrib(i,X),se)){if(X==="class"){const te=u.getAttrib(x,X);if(te){let ie="";if(xe(te.split(/\s+/),Ee=>{/mce\-\w+/.test(Ee)&&(ie+=(ie?" ":"")+Ee)}),ie){u.setAttrib(x,X,ie);return}}}if(Bb.test(X)&&x.removeAttribute("data-mce-"+X),X==="style"&&Cl(["li"])(x)&&u.getStyle(x,"list-style-type")==="none"){x.removeAttribute(X),u.setStyle(x,"list-style-type","none");return}X==="class"&&x.removeAttribute("className"),x.removeAttribute(X)}}),d_(n.classes,$=>{$=Fr($,o),(!Wt(i)||u.hasClass(i,$))&&u.removeClass(x,$)});const L=u.getAttribs(x);for(let $=0;$<L.length;$++){const z=L[$].nodeName;if(!m.isAttributeInternal(z))return Ib.keep()}}return n.remove!=="none"?(hP(e,x,n),Ib.removed()):Ib.keep()},pP=(e,n,o,r,i)=>{let u;return n.parentNode&&xe(wb(e.dom,n.parentNode).reverse(),m=>{if(!u&&Wt(m)&&m.id!=="_start"&&m.id!=="_end"){const y=Em(e,m,o,r,i);y&&y.split!==!1&&(u=m)}}),u},bP=(e,n,o,r)=>eC(e,n,o,r,r).fold(ft(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),ft(null)),e9=(e,n,o,r,i,u,m,y)=>{var x,A;let L,$;const z=e.dom;if(o){const X=o.parentNode;for(let se=r.parentNode;se&&se!==X;se=se.parentNode){let te=z.clone(se,!1);for(let ie=0;ie<n.length&&(te=bP(e,n[ie],y,te),te!==null);ie++);te&&(L&&te.appendChild(L),$||($=te),L=te)}(!m.mixed||!z.isBlock(o))&&(r=(x=z.split(o,r))!==null&&x!==void 0?x:r),L&&$&&((A=i.parentNode)===null||A===void 0||A.insertBefore(L,i),$.appendChild(i),ma(m)&&OA(e,m,y,L))}return r},vP=(e,n,o,r,i)=>{const u=e.formatter.get(n),m=u[0],y=e.dom,x=e.selection,A=te=>{const ie=pP(e,te,n,o,i);return e9(e,u,ie,te,te,!0,m,o)},L=te=>Hc(te)&&Wt(te)&&(te.id==="_start"||te.id==="_end"),$=te=>_t(u,ie=>Ef(e,ie,o,te,te)),z=te=>{const ie=Rr(te.childNodes),Re=$(te)||_t(u,ct=>n_(y,te,ct)),Me=te.parentNode;if(!Re&&Fe(Me)&&Oc(m)&&$(Me),m.deep&&ie.length)for(let ct=0;ct<ie.length;ct++)z(ie[ct]);xe(["underline","line-through","overline"],ct=>{Wt(te)&&e.dom.getStyle(te,"text-decoration")===ct&&te.parentNode&&Hv(y,te.parentNode)===ct&&Ef(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ct}},void 0,te)})},X=te=>{const ie=y.get(te?"_start":"_end");if(ie){let Ee=ie[te?"firstChild":"lastChild"];return L(Ee)&&(Ee=Ee[te?"firstChild":"lastChild"]),bt(Ee)&&Ee.data.length===0&&(Ee=te?ie.previousSibling||ie.nextSibling:ie.nextSibling||ie.previousSibling),y.remove(ie,!0),Ee}else return null},se=te=>{let ie,Ee,Re=vm(y,te,u,te.collapsed);if(m.split){if(Re=Rw(Re),ie=uP(e,Re,!0),Ee=uP(e,Re),ie!==Ee){if(ie=dP(ie,!0),Ee=dP(Ee,!1),lP(y,ie,Ee)){const Ie=W.from(ie.firstChild).getOr(ie);A(fP(y,Ie,!0,"span",{id:"_start","data-mce-type":"bookmark"})),X(!0);return}if(lP(y,Ee,ie)){const Ie=W.from(Ee.lastChild).getOr(Ee);A(fP(y,Ie,!1,"span",{id:"_end","data-mce-type":"bookmark"})),X(!1);return}ie=MA(y,ie,"span",{id:"_start","data-mce-type":"bookmark"}),Ee=MA(y,Ee,"span",{id:"_end","data-mce-type":"bookmark"});const Me=y.createRng();Me.setStartAfter(ie),Me.setEndBefore(Ee),Fp(y,Me,Ie=>{xe(Ie,ct=>{!Hc(ct)&&!Hc(ct.parentNode)&&A(ct)})}),A(ie),A(Ee),ie=X(!0),Ee=X()}else ie=Ee=A(ie);Re.startContainer=ie.parentNode?ie.parentNode:ie,Re.startOffset=y.nodeIndex(ie),Re.endContainer=Ee.parentNode?Ee.parentNode:Ee,Re.endOffset=y.nodeIndex(Ee)+1}Fp(y,Re,Me=>{xe(Me,z)})};if(r){if(bb(r)){const te=y.createRng();te.setStartBefore(r),te.setEndAfter(r),se(te)}else se(r);D2(e,n,r,o);return}!x.isCollapsed()||!ma(m)||hg(e).length?(iE(e,()=>Nd(e,se),te=>ma(m)&&Yw(e,n,o,te)),e.nodeChanged()):QN(e,n,o,i),QH(e,n,o),D2(e,n,r,o)},yP=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&vP(e,n,o,r,i)},Ef=(e,n,o,r,i)=>eC(e,n,o,r,i).fold($e,u=>(e.dom.rename(r,u),!0),pt),NA=ut.each,wP=(e,n,o,r)=>{const i=u=>{if(tl(u)&&Wt(u.parentNode)&&e.isEditable(u)){const m=Hv(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(ut.walk(r,i,"childNodes"),i(r))},CP=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=iP(e,"fontSize");u_(r,u=>i(u)&&e.isEditable(u),RA(e,"backgroundColor",Fr(n.styles.backgroundColor,o)))}},h_=(e,n,o,r)=>{if(ma(n)&&(n.inline==="sub"||n.inline==="sup")){const i=iP(e,"fontSize");u_(r,m=>i(m)&&e.isEditable(m),RA(e,"fontSize",""));const u=Kt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},SP=(e,n,o,r)=>{NA(n,i=>{ma(i)&&NA(e.dom.select(i.inline,r),u=>{ry(u)&&Ef(e,i,o,u,i.exact?u:null)}),JH(e.dom,i,r)})},t9=(e,n,o,r,i)=>{const u=i.parentNode;Em(e,u,o,r)&&Ef(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>Em(e,m,o,r)?(Ef(e,n,r,i),!0):!1)},tC=ut.each,n9=(e,n,o,r)=>{if(j2(e)&&ma(n)&&o.parentNode){const i=_S(e.schema),u=y0(be.fromDom(o),m=>_l(m.dom));return sr(i,r)&&ca(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},xP=(e,n,o,r)=>{if(tC(o.styles,(i,u)=>{e.setStyle(n,u,Fr(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},g_=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],m=!r&&e.selection.isCollapsed(),y=e.dom,x=e.selection,A=(se,te=u)=>{ve(te.onformat)&&te.onformat(se,te,o,r),xP(y,se,te,o),tC(te.attributes,(ie,Ee)=>{y.setAttrib(se,Ee,Fr(ie,o))}),tC(te.classes,ie=>{const Ee=Fr(ie,o);y.hasClass(se,Ee)||y.addClass(se,Ee)})},L=(se,te)=>{let ie=!1;return tC(se,Ee=>Ac(Ee)?y.getContentEditable(te)==="false"&&!Ee.ceFalseOverride||Fe(Ee.collapsed)&&Ee.collapsed!==m?!0:y.is(te,Ee.selector)&&!_l(te)?(A(te,Ee),ie=!0,!1):!0:!1),ie},$=se=>{if(ce(se)){const te=y.create(se);return A(te),te}else return null},z=(se,te,ie)=>{const Ee=[];let Re=!0;const Me=u.inline||u.block,Ie=$(Me),ct=tt=>a3(u)&&Em(e,tt,n,o),Ot=(tt,Ze,ht)=>{const sn=bg(u)&&cE(e.schema,tt)&&Bp(e,Ze,Me);return ht&&sn},Qt=(tt,Ze,ht,sn)=>{const _n=tt.nodeName.toLowerCase(),Zn=Bp(e,Me,_n)&&Bp(e,Ze,Me),ho=!ie&&bt(tt)&&p2(tt.data),as=_l(tt),Cs=!ma(u)||!se.isBlock(tt);return(ht||sn)&&Zn&&!ho&&!as&&Cs};Fp(se,te,tt=>{let Ze;const ht=sn=>{let _n=!1,Zn=Re,ho=!1;const as=sn.parentNode,Cs=as.nodeName.toLowerCase(),jr=se.getContentEditable(sn);Fe(jr)&&(Zn=Re,Re=jr==="true",_n=!0,ho=yb(e,sn));const qi=Re&&!_n;if(qo(sn)&&!n9(e,u,sn,Cs)){Ze=null,wf(u)&&se.remove(sn);return}if(ct(sn)){Ze=null;return}if(Ot(sn,Cs,qi)){const hi=se.rename(sn,Me);A(hi),Ee.push(hi),Ze=null;return}if(Ac(u)){let hi=L(i,sn);if(!hi&&Fe(as)&&Oc(u)&&(hi=L(i,as)),!ma(u)||hi){Ze=null;return}}Fe(Ie)&&Qt(sn,Cs,qi,ho)?(Ze||(Ze=se.clone(Ie,!1),as.insertBefore(Ze,sn),Ee.push(Ze)),ho&&_n&&(Re=Zn),Ze.appendChild(sn)):(Ze=null,xe(Rr(sn.childNodes),ht),_n&&(Re=Zn),Ze=null)};xe(tt,ht)}),u.links===!0&&xe(Ee,tt=>{const Ze=ht=>{ht.nodeName==="A"&&A(ht,u),xe(Rr(ht.childNodes),Ze)};Ze(tt)}),xe(Ee,tt=>{const Ze=_n=>{let Zn=0;return xe(_n.childNodes,ho=>{!Jt(ho)&&!Hc(ho)&&Zn++}),Zn},ht=_n=>Vo(_n.childNodes,vb).filter(ho=>se.getContentEditable(ho)!=="false"&&n_(se,ho,u)).map(ho=>{const as=se.clone(ho,!1);return A(as),se.replace(as,_n,!0),se.remove(ho,!0),as}).getOr(_n),sn=Ze(tt);if((Ee.length>1||!se.isBlock(tt))&&sn===0){se.remove(tt,!0);return}(ma(u)||wf(u)&&u.wrapper)&&(!u.exact&&sn===1&&(tt=ht(tt)),SP(e,i,o,tt),t9(e,u,n,o,tt),CP(se,u,o,tt),wP(se,u,o,tt),h_(se,u,o,tt),OA(e,u,o,tt))})},X=bb(r)?r:x.getNode();if(y.getContentEditable(X)==="false"&&!yb(e,X)){r=X,L(i,r),um(e,n,r,o);return}if(u){if(r)if(bb(r)){if(!L(i,r)){const se=y.createRng();se.setStartBefore(r),se.setEndAfter(r),z(y,vm(y,se,i),!0)}}else z(y,r,!0);else!m||!ma(u)||hg(e).length?(x.setRng(JE(x.getRng())),iE(e,()=>{Nd(e,(se,te)=>{const ie=te?se:vm(y,se,i);z(y,ie,!1)})},pt),e.nodeChanged()):ZH(e,n,o),KH(e.formatter,n).each(se=>{xe(AA(e.selection),te=>xP(y,te,se,o))});sP(n,e)}um(e,n,r,o)},PA=(e,n,o,r)=>{(r||e.selection.isEditable())&&g_(e,n,o,r)},p_=e=>En(e,"vars"),o9=(e,n)=>{e.set({}),n.on("NodeChange",o=>{BA(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=W.from(o.node).map(i=>bb(i)?i:i.startContainer).bind(i=>Wt(i)?W.some(i):W.from(i.parentElement)).getOrThunk(()=>EP(n));BA(n,r,e.get())})},EP=e=>e.selection.getStart(),IA=(e,n,o,r,i)=>zr(n,y=>{const x=e.formatter.matchNode(y,o,i??{},r);return!In(x)},y=>KN(e,y,o)?!0:r?!1:Fe(e.formatter.matchNode(y,o,i,!0))),b_=(e,n)=>{const o=n??EP(e);return Kt(wb(e.dom,o),r=>Wt(r)&&!em(r))},BA=(e,n,o)=>{const r=b_(e,n);Tt(o,(i,u)=>{const m=y=>{const x=IA(e,r,u,y.similar,p_(y)?y.vars:void 0),A=x.isSome();if(y.state.get()!==A){y.state.set(A);const L=x.getOr(n);p_(y)?y.callback(A,{node:L,format:u,parents:r}):xe(y.callbacks,$=>$(A,{node:L,format:u,parents:r}))}};xe([i.withSimilar,i.withoutSimilar],m),xe(i.withVars,m)})},s9=(e,n,o,r,i,u)=>{const m=n.get();xe(o.split(","),y=>{const x=Yo(m,y).getOrThunk(()=>{const L={withSimilar:{state:$s(!1),similar:!0,callbacks:[]},withoutSimilar:{state:$s(!1),similar:!1,callbacks:[]},withVars:[]};return m[y]=L,L}),A=()=>{const L=b_(e);return IA(e,L,y,i,u).isSome()};if(In(u)){const L=i?x.withSimilar:x.withoutSimilar;L.callbacks.push(r),L.callbacks.length===1&&L.state.set(A())}else x.withVars.push({state:$s(A()),similar:i,vars:u,callback:r})}),n.set(m)},r9=(e,n,o)=>{const r=e.get();xe(n.split(","),i=>Yo(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:Kt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Kt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Kt(u.withVars,m=>m.callback!==o)}})),e.set(r)},a9=(e,n,o,r,i,u)=>(s9(e,n,o,r,i,u),{unbind:()=>r9(n,o,r)}),v_=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(Yw(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?yP(e,n,o,r):PA(e,n,o,r))},ph=ut.explode,_P=()=>{const e={};return{addFilter:(i,u)=>{xe(ph(i),m=>{En(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>Fi(e),removeFilter:(i,u)=>{xe(ph(i),m=>{if(En(e,m))if(Fe(u)){const y=e[m],x=Kt(y.callbacks,A=>A!==u);x.length>0?y.callbacks=x:delete e[m]}else delete e[m]})}}},LA=(e,n)=>{xe(n,o=>{e.attr(o,null)})},ha=(e,n,o)=>{e.addNodeFilter("font",r=>{xe(r,i=>{const u=n.parse(i.attr("style")),m=i.attr("color"),y=i.attr("face"),x=i.attr("size");m&&(u.color=m),y&&(u["font-family"]=y),x&&gc(x).each(A=>{u["font-size"]=o[A-1]}),i.name="span",i.attr("style",n.serialize(u)),LA(i,["color","face","size"])})})},FA=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";xe(r,u=>{if(i)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},$A=(e,n,o)=>{var r;const i=eh();n.convert_fonts_to_spans&&ha(e,i,ut.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),FA(e,o,i)},xg=(e,n,o)=>{n.inline_styles&&$A(e,n,o)},TP=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),kP=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},nC=e=>{try{return decodeURIComponent(e)}catch{return e}},HA=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",m=nC(r),y=u?kP(m):m;return W.some({type:i[1],data:y,base64Encoded:u})}else return W.none()},AP=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return W.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return W.some(new Blob([i],{type:e}))},ay=e=>new Promise((n,o)=>{HA(e).bind(({type:r,data:i,base64Encoded:u})=>AP(r,i,u)).fold(()=>o("Invalid data URI"),n)}),i9=e=>cs(e,"blob:")?TP(e):cs(e,"data:")?ay(e):Promise.reject("Unknown URI format"),o1=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let c9=0;const s1=e=>"blobid"+c9++,OP=(e,n,o)=>HA(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return W.none();{const m=u?r:btoa(r);return o(m,i)}}),Ku=(e,n,o)=>{const r=e.create(s1(),n,o);return e.add(r),r},iy=(e,n,o=!1)=>OP(n,o,(r,i)=>W.from(e.getByData(r,i)).orThunk(()=>AP(i,r).map(u=>Ku(e,u,r)))),zA=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(cs(n,"blob:")){const r=e.getByUri(n);return Fe(r)?Promise.resolve(r):i9(n).then(i=>o1(i).then(u=>OP(u,!1,m=>W.some(Ku(e,i,m))).getOrThunk(o)))}else return cs(n,"data:")?iy(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},VA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,l9=e=>W.from(e.match(VA)).bind(n=>Mc(n,1)).map(n=>cs(n,"www.")?n.substring(4):n),oC=(e,n)=>{W.from(e.attr("src")).bind(l9).forall(o=>!et(n,o))&&e.attr("sandbox","")},UA=(e,n)=>cs(e,`${n}/`),_f=e=>In(e)?"iframe":UA(e,"image")?"img":UA(e,"video")?"video":UA(e,"audio")?"audio":"iframe",y_=({type:e,src:n,width:o,height:r}={},i,u)=>{const m=_f(e),y=new il(m,1);return y.attr(m==="audio"?{src:n}:{src:n,width:o,height:r}),(m==="audio"||m==="video")&&y.attr("controls",""),m==="iframe"&&i&&oC(y,u),y},DP=e=>Fe(e.attr("data-mce-bogus")),WA=e=>e.attr("src")===Nn.transparentSrc||Fe(e.attr("data-mce-placeholder")),ZA=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");WA(i)||DP(i)||en(u)||iy(o,u,!0).each(m=>{i.attr("src",m.blobUri())})};e.addAttributeFilter("src",i=>xe(i,r))}},cy=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",x=>{let A=x.length;const L=z=>z.split(" ").filter(se=>se.length>0).concat(["noopener"]).sort().join(" "),$=z=>{const X=z?ut.trim(z):"";return/\b(noopener)\b/g.test(X)?X:L(X)};if(!n.allow_unsafe_link_target)for(;A--;){const z=x[A];z.name==="a"&&z.attr("target")==="_blank"&&z.attr("rel",$(z.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",x=>{let A=x.length,L,$,z,X;for(;A--;)if(X=x[A],X.name==="a"&&X.firstChild&&!X.attr("href"))for(z=X.parent,L=X.lastChild;L&&z;)$=L.prev,z.insert(L,X),L=$}),n.fix_list_elements&&e.addNodeFilter("ul,ol",x=>{let A=x.length,L,$;for(;A--;)if(L=x[A],$=L.parent,$&&($.name==="ul"||$.name==="ol"))if(L.prev&&L.prev.name==="li")L.prev.append(L);else{const z=new il("li",1);z.attr("style","list-style-type: none"),L.wrap(z)}});const u=i.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",x=>{var A;let L=x.length;for(;L--;){const $=x[L],z=(A=$.attr("class"))!==null&&A!==void 0?A:"",X=ut.explode(z," ");let se="";for(let te=0;te<X.length;te++){const ie=X[te];let Ee=!1,Re=u["*"];Re&&Re[ie]&&(Ee=!0),Re=u[$.name],!Ee&&Re&&Re[ie]&&(Ee=!0),Ee&&(se&&(se+=" "),se+=ie)}se.length||(se=null),$.attr("class",se)}}),ZA(e,n);const m=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,y=Ki((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",x=>xe(x,A=>{A.replace(y_({type:A.attr("type"),src:A.name==="object"?A.attr("data"):A.attr("src"),width:A.attr("width"),height:A.attr("height")},m,y))})),m&&e.addNodeFilter("iframe",x=>xe(x,A=>oC(A,y)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:w_,setPrototypeOf:RP,isFrozen:MP,getPrototypeOf:u9,getOwnPropertyDescriptor:d9}=Object;let{freeze:uu,seal:Tf,create:ly}=Object,{apply:jA,construct:C_}=typeof Reflect<"u"&&Reflect;uu||(uu=function(n){return n}),Tf||(Tf=function(n){return n}),jA||(jA=function(n,o,r){return n.apply(o,r)}),C_||(C_=function(n,o){return new n(...o)});const uy=Fd(Array.prototype.forEach),NP=Fd(Array.prototype.pop),dy=Fd(Array.prototype.push),Lb=Fd(String.prototype.toLowerCase),qA=Fd(String.prototype.toString),PP=Fd(String.prototype.match),sC=Fd(String.prototype.replace),f9=Fd(String.prototype.indexOf),m9=Fd(String.prototype.trim),Ld=Fd(Object.prototype.hasOwnProperty),du=Fd(RegExp.prototype.test),rC=h9(TypeError);function Fd(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return jA(e,n,r)}}function h9(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return C_(e,o)}}function Gs(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lb;RP&&RP(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const u=o(i);u!==i&&(MP(n)||(n[r]=u),i=u)}e[i]=!0}return e}function g9(e){for(let n=0;n<e.length;n++)Ld(e,n)||(e[n]=null);return e}function Fb(e){const n=ly(null);for(const[o,r]of w_(e))Ld(e,o)&&(Array.isArray(r)?n[o]=g9(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Fb(r):n[o]=r);return n}function aC(e,n){for(;e!==null;){const r=d9(e,n);if(r){if(r.get)return Fd(r.get);if(typeof r.value=="function")return Fd(r.value)}e=u9(e)}function o(){return null}return o}const IP=uu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),GA=uu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),KA=uu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),p9=uu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),YA=uu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),BP=uu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),LP=uu(["#text"]),$b=uu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),XA=uu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),FP=uu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),S_=uu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),b9=Tf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$P=Tf(/<%[\w\W]*|[\w\W]*%>/gm),v9=Tf(/\${[\w\W]*}/gm),y9=Tf(/^data-[\-\w.\u00B7-\uFFFF]/),w9=Tf(/^aria-[\-\w]+$/),HP=Tf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),C9=Tf(/^(?:\w+script|data):/i),S9=Tf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zP=Tf(/^html$/i),x9=Tf(/^[a-z][.\w]*(-[.\w]+)+$/i);var VP=Object.freeze({__proto__:null,MUSTACHE_EXPR:b9,ERB_EXPR:$P,TMPLIT_EXPR:v9,DATA_ATTR:y9,ARIA_ATTR:w9,IS_ALLOWED_URI:HP,IS_SCRIPT_OR_DATA:C9,ATTR_WHITESPACE:S9,DOCTYPE_NAME:zP,CUSTOM_ELEMENT:x9});const iC={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},JA=function(){return typeof window>"u"?null:window},UP=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function E9(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JA();const n=wo=>E9(wo);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==iC.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:m,Node:y,Element:x,NodeFilter:A,NamedNodeMap:L=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:$,DOMParser:z,trustedTypes:X}=e,se=x.prototype,te=aC(se,"cloneNode"),ie=aC(se,"remove"),Ee=aC(se,"nextSibling"),Re=aC(se,"childNodes"),Me=aC(se,"parentNode");if(typeof m=="function"){const wo=o.createElement("template");wo.content&&wo.content.ownerDocument&&(o=wo.content.ownerDocument)}let Ie,ct="";const{implementation:Ot,createNodeIterator:Qt,createDocumentFragment:tt,getElementsByTagName:Ze}=o,{importNode:ht}=r;let sn={};n.isSupported=typeof w_=="function"&&typeof Me=="function"&&Ot&&Ot.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_n,ERB_EXPR:Zn,TMPLIT_EXPR:ho,DATA_ATTR:as,ARIA_ATTR:Cs,IS_SCRIPT_OR_DATA:jr,ATTR_WHITESPACE:qi,CUSTOM_ELEMENT:hi}=VP;let{IS_ALLOWED_URI:Ft}=VP,xn=null;const Zo=Gs({},[...IP,...GA,...KA,...YA,...LP]);let Yt=null;const Ln=Gs({},[...$b,...XA,...FP,...S_]);let zn=Object.seal(ly(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),qt=null,vo=null,Eo=!0,Pa=!0,ms=!1,dc=!0,Nl=!1,Dm=!0,Rc=!1,mu=!1,hu=!1,Gi=!1,gu=!1,wn=!1,Lo=!0,qr=!1;const Ia="user-content-";let gi=!0,Ba=!1,Or={},Dr=null;const Vc=Gs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Zd=null;const Rm=Gs({},["audio","video","img","source","image","track"]);let If=null;const u0=Gs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),d0="http://www.w3.org/1998/Math/MathML",Pg="http://www.w3.org/2000/svg",jd="http://www.w3.org/1999/xhtml";let Ig=jd,qy=!1,Gy=null;const g$=Gs({},[d0,Pg,jd],qA);let f0=null;const x5=["application/xhtml+xml","text/html"],E5="text/html";let fc=null,pu=null;const Ky=o.createElement("form"),He=function(je){return je instanceof RegExp||je instanceof Function},Ue=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(pu&&pu===je)){if((!je||typeof je!="object")&&(je={}),je=Fb(je),f0=x5.indexOf(je.PARSER_MEDIA_TYPE)===-1?E5:je.PARSER_MEDIA_TYPE,fc=f0==="application/xhtml+xml"?qA:Lb,xn=Ld(je,"ALLOWED_TAGS")?Gs({},je.ALLOWED_TAGS,fc):Zo,Yt=Ld(je,"ALLOWED_ATTR")?Gs({},je.ALLOWED_ATTR,fc):Ln,Gy=Ld(je,"ALLOWED_NAMESPACES")?Gs({},je.ALLOWED_NAMESPACES,qA):g$,If=Ld(je,"ADD_URI_SAFE_ATTR")?Gs(Fb(u0),je.ADD_URI_SAFE_ATTR,fc):u0,Zd=Ld(je,"ADD_DATA_URI_TAGS")?Gs(Fb(Rm),je.ADD_DATA_URI_TAGS,fc):Rm,Dr=Ld(je,"FORBID_CONTENTS")?Gs({},je.FORBID_CONTENTS,fc):Vc,qt=Ld(je,"FORBID_TAGS")?Gs({},je.FORBID_TAGS,fc):{},vo=Ld(je,"FORBID_ATTR")?Gs({},je.FORBID_ATTR,fc):{},Or=Ld(je,"USE_PROFILES")?je.USE_PROFILES:!1,Eo=je.ALLOW_ARIA_ATTR!==!1,Pa=je.ALLOW_DATA_ATTR!==!1,ms=je.ALLOW_UNKNOWN_PROTOCOLS||!1,dc=je.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Nl=je.SAFE_FOR_TEMPLATES||!1,Dm=je.SAFE_FOR_XML!==!1,Rc=je.WHOLE_DOCUMENT||!1,Gi=je.RETURN_DOM||!1,gu=je.RETURN_DOM_FRAGMENT||!1,wn=je.RETURN_TRUSTED_TYPE||!1,hu=je.FORCE_BODY||!1,Lo=je.SANITIZE_DOM!==!1,qr=je.SANITIZE_NAMED_PROPS||!1,gi=je.KEEP_CONTENT!==!1,Ba=je.IN_PLACE||!1,Ft=je.ALLOWED_URI_REGEXP||HP,Ig=je.NAMESPACE||jd,zn=je.CUSTOM_ELEMENT_HANDLING||{},je.CUSTOM_ELEMENT_HANDLING&&He(je.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zn.tagNameCheck=je.CUSTOM_ELEMENT_HANDLING.tagNameCheck),je.CUSTOM_ELEMENT_HANDLING&&He(je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zn.attributeNameCheck=je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),je.CUSTOM_ELEMENT_HANDLING&&typeof je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zn.allowCustomizedBuiltInElements=je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Nl&&(Pa=!1),gu&&(Gi=!0),Or&&(xn=Gs({},LP),Yt=[],Or.html===!0&&(Gs(xn,IP),Gs(Yt,$b)),Or.svg===!0&&(Gs(xn,GA),Gs(Yt,XA),Gs(Yt,S_)),Or.svgFilters===!0&&(Gs(xn,KA),Gs(Yt,XA),Gs(Yt,S_)),Or.mathMl===!0&&(Gs(xn,YA),Gs(Yt,FP),Gs(Yt,S_))),je.ADD_TAGS&&(xn===Zo&&(xn=Fb(xn)),Gs(xn,je.ADD_TAGS,fc)),je.ADD_ATTR&&(Yt===Ln&&(Yt=Fb(Yt)),Gs(Yt,je.ADD_ATTR,fc)),je.ADD_URI_SAFE_ATTR&&Gs(If,je.ADD_URI_SAFE_ATTR,fc),je.FORBID_CONTENTS&&(Dr===Vc&&(Dr=Fb(Dr)),Gs(Dr,je.FORBID_CONTENTS,fc)),gi&&(xn["#text"]=!0),Rc&&Gs(xn,["html","head","body"]),xn.table&&(Gs(xn,["tbody"]),delete qt.tbody),je.TRUSTED_TYPES_POLICY){if(typeof je.TRUSTED_TYPES_POLICY.createHTML!="function")throw rC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof je.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw rC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ie=je.TRUSTED_TYPES_POLICY,ct=Ie.createHTML("")}else Ie===void 0&&(Ie=UP(X,i)),Ie!==null&&typeof ct=="string"&&(ct=Ie.createHTML(""));uu&&uu(je),pu=je}},Bt=Gs({},["mi","mo","mn","ms","mtext"]),Dt=Gs({},["annotation-xml"]),Pn=Gs({},["title","style","font","a","script"]),jo=Gs({},[...GA,...KA,...p9]),Hr=Gs({},[...YA,...BP]),Mm=function(je){let An=Me(je);(!An||!An.tagName)&&(An={namespaceURI:Ig,tagName:"template"});const co=Lb(je.tagName),xa=Lb(An.tagName);return Gy[je.namespaceURI]?je.namespaceURI===Pg?An.namespaceURI===jd?co==="svg":An.namespaceURI===d0?co==="svg"&&(xa==="annotation-xml"||Bt[xa]):!!jo[co]:je.namespaceURI===d0?An.namespaceURI===jd?co==="math":An.namespaceURI===Pg?co==="math"&&Dt[xa]:!!Hr[co]:je.namespaceURI===jd?An.namespaceURI===Pg&&!Dt[xa]||An.namespaceURI===d0&&!Bt[xa]?!1:!Hr[co]&&(Pn[co]||!jo[co]):!!(f0==="application/xhtml+xml"&&Gy[je.namespaceURI]):!1},qd=function(je){dy(n.removed,{element:je});try{Me(je).removeChild(je)}catch{ie(je)}},oS=function(je,An){try{dy(n.removed,{attribute:An.getAttributeNode(je),from:An})}catch{dy(n.removed,{attribute:null,from:An})}if(An.removeAttribute(je),je==="is"&&!Yt[je])if(Gi||gu)try{qd(An)}catch{}else try{An.setAttribute(je,"")}catch{}},p$=function(je){let An=null,co=null;if(hu)je="<remove></remove>"+je;else{const Uc=PP(je,/^[\r\n\t ]+/);co=Uc&&Uc[0]}f0==="application/xhtml+xml"&&Ig===jd&&(je='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+je+"</body></html>");const xa=Ie?Ie.createHTML(je):je;if(Ig===jd)try{An=new z().parseFromString(xa,f0)}catch{}if(!An||!An.documentElement){An=Ot.createDocument(Ig,"template",null);try{An.documentElement.innerHTML=qy?ct:xa}catch{}}const Pl=An.body||An.documentElement;return je&&co&&Pl.insertBefore(o.createTextNode(co),Pl.childNodes[0]||null),Ig===jd?Ze.call(An,Rc?"html":"body")[0]:Rc?An.documentElement:Pl},b$=function(je){return Qt.call(je.ownerDocument||je,je,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},_5=function(je){return je instanceof $&&(typeof je.nodeName!="string"||typeof je.textContent!="string"||typeof je.removeChild!="function"||!(je.attributes instanceof L)||typeof je.removeAttribute!="function"||typeof je.setAttribute!="function"||typeof je.namespaceURI!="string"||typeof je.insertBefore!="function"||typeof je.hasChildNodes!="function")},v$=function(je){return typeof y=="function"&&je instanceof y},_h=function(je,An,co){sn[je]&&uy(sn[je],xa=>{xa.call(n,An,co,pu)})},sS=function(je){let An=null;if(_h("beforeSanitizeElements",je,null),_5(je))return qd(je),!0;const co=fc(je.nodeName);if(_h("uponSanitizeElement",je,{tagName:co,allowedTags:xn}),je.hasChildNodes()&&!v$(je.firstElementChild)&&du(/<[/\w]/g,je.innerHTML)&&du(/<[/\w]/g,je.textContent)||je.nodeType===iC.progressingInstruction||Dm&&je.nodeType===iC.comment&&du(/<[/\w]/g,je.data))return qd(je),!0;if(!xn[co]||qt[co]){if(!qt[co]&&T5(co)&&(zn.tagNameCheck instanceof RegExp&&du(zn.tagNameCheck,co)||zn.tagNameCheck instanceof Function&&zn.tagNameCheck(co)))return!1;if(gi&&!Dr[co]){const xa=Me(je)||je.parentNode,Pl=Re(je)||je.childNodes;if(Pl&&xa){const Uc=Pl.length;for(let Qu=Uc-1;Qu>=0;--Qu){const Th=te(Pl[Qu],!0);Th.__removalCount=(je.__removalCount||0)+1,xa.insertBefore(Th,Ee(je))}}}return qd(je),!0}return je instanceof x&&!Mm(je)||(co==="noscript"||co==="noembed"||co==="noframes")&&du(/<\/no(script|embed|frames)/i,je.innerHTML)?(qd(je),!0):(Nl&&je.nodeType===iC.text&&(An=je.textContent,uy([_n,Zn,ho],xa=>{An=sC(An,xa," ")}),je.textContent!==An&&(dy(n.removed,{element:je.cloneNode()}),je.textContent=An)),_h("afterSanitizeElements",je,null),!1)},y$=function(je,An,co){if(Lo&&(An==="id"||An==="name")&&(co in o||co in Ky))return!1;if(!(Pa&&!vo[An]&&du(as,An))){if(!(Eo&&du(Cs,An))){if(!Yt[An]||vo[An]){if(!(T5(je)&&(zn.tagNameCheck instanceof RegExp&&du(zn.tagNameCheck,je)||zn.tagNameCheck instanceof Function&&zn.tagNameCheck(je))&&(zn.attributeNameCheck instanceof RegExp&&du(zn.attributeNameCheck,An)||zn.attributeNameCheck instanceof Function&&zn.attributeNameCheck(An))||An==="is"&&zn.allowCustomizedBuiltInElements&&(zn.tagNameCheck instanceof RegExp&&du(zn.tagNameCheck,co)||zn.tagNameCheck instanceof Function&&zn.tagNameCheck(co))))return!1}else if(!If[An]){if(!du(Ft,sC(co,qi,""))){if(!((An==="src"||An==="xlink:href"||An==="href")&&je!=="script"&&f9(co,"data:")===0&&Zd[je])){if(!(ms&&!du(jr,sC(co,qi,"")))){if(co)return!1}}}}}}return!0},T5=function(je){return je!=="annotation-xml"&&PP(je,hi)},w$=function(je){_h("beforeSanitizeAttributes",je,null);const{attributes:An}=je;if(!An)return;const co={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Yt};let xa=An.length;for(;xa--;){const Pl=An[xa],{name:Uc,namespaceURI:Qu,value:Th}=Pl,Yy=fc(Uc);let Wc=Uc==="value"?Th:m9(Th);const JG=Wc;if(co.attrName=Yy,co.attrValue=Wc,co.keepAttr=!0,co.forceKeepAttr=void 0,_h("uponSanitizeAttribute",je,co),Wc=co.attrValue,co.forceKeepAttr)continue;if(!co.keepAttr){oS(Uc,je);continue}if(!dc&&du(/\/>/i,Wc)){oS(Uc,je);continue}Nl&&uy([_n,Zn,ho],x$=>{Wc=sC(Wc,x$," ")});const S$=fc(je.nodeName);if(!y$(S$,Yy,Wc)){oS(Uc,je);continue}if(qr&&(Yy==="id"||Yy==="name")&&(oS(Uc,je),Wc=Ia+Wc),Dm&&du(/((--!?|])>)|<\/(style|title)/i,Wc)){oS(Uc,je);continue}if(Ie&&typeof X=="object"&&typeof X.getAttributeType=="function"&&!Qu)switch(X.getAttributeType(S$,Yy)){case"TrustedHTML":{Wc=Ie.createHTML(Wc);break}case"TrustedScriptURL":{Wc=Ie.createScriptURL(Wc);break}}if(Wc!==JG)try{Qu?je.setAttributeNS(Qu,Uc,Wc):je.setAttribute(Uc,Wc),_5(je)?qd(je):NP(n.removed)}catch{}}_h("afterSanitizeAttributes",je,null)},C$=function wo(je){let An=null;const co=b$(je);for(_h("beforeSanitizeShadowDOM",je,null);An=co.nextNode();)_h("uponSanitizeShadowNode",An,null),!sS(An)&&(An.content instanceof u&&wo(An.content),w$(An));_h("afterSanitizeShadowDOM",je,null)};return n.sanitize=function(wo){let je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},An=null,co=null,xa=null,Pl=null;if(qy=!wo,qy&&(wo="<!-->"),typeof wo!="string"&&!v$(wo))if(typeof wo.toString=="function"){if(wo=wo.toString(),typeof wo!="string")throw rC("dirty is not a string, aborting")}else throw rC("toString is not a function");if(!n.isSupported)return wo;if(mu||Ue(je),n.removed=[],typeof wo=="string"&&(Ba=!1),Ba){if(wo.nodeName){const Th=fc(wo.nodeName);if(!xn[Th]||qt[Th])throw rC("root node is forbidden and cannot be sanitized in-place")}}else if(wo instanceof y)An=p$("<!---->"),co=An.ownerDocument.importNode(wo,!0),co.nodeType===iC.element&&co.nodeName==="BODY"||co.nodeName==="HTML"?An=co:An.appendChild(co);else{if(!Gi&&!Nl&&!Rc&&wo.indexOf("<")===-1)return Ie&&wn?Ie.createHTML(wo):wo;if(An=p$(wo),!An)return Gi?null:wn?ct:""}An&&hu&&qd(An.firstChild);const Uc=b$(Ba?wo:An);for(;xa=Uc.nextNode();)sS(xa)||(xa.content instanceof u&&C$(xa.content),w$(xa));if(Ba)return wo;if(Gi){if(gu)for(Pl=tt.call(An.ownerDocument);An.firstChild;)Pl.appendChild(An.firstChild);else Pl=An;return(Yt.shadowroot||Yt.shadowrootmode)&&(Pl=ht.call(r,Pl,!0)),Pl}let Qu=Rc?An.outerHTML:An.innerHTML;return Rc&&xn["!doctype"]&&An.ownerDocument&&An.ownerDocument.doctype&&An.ownerDocument.doctype.name&&du(zP,An.ownerDocument.doctype.name)&&(Qu="<!DOCTYPE "+An.ownerDocument.doctype.name+`>
`+Qu),Nl&&uy([_n,Zn,ho],Th=>{Qu=sC(Qu,Th," ")}),Ie&&wn?Ie.createHTML(Qu):Qu},n.setConfig=function(){let wo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue(wo),mu=!0},n.clearConfig=function(){pu=null,mu=!1},n.isValidAttribute=function(wo,je,An){pu||Ue({});const co=fc(wo),xa=fc(je);return y$(co,xa,An)},n.addHook=function(wo,je){typeof je=="function"&&(sn[wo]=sn[wo]||[],dy(sn[wo],je))},n.removeHook=function(wo){if(sn[wo])return NP(sn[wo])},n.removeHooks=function(wo){sn[wo]&&(sn[wo]=[])},n.removeAllHooks=function(){sn={}},n}var Hb=E9();const WP=ut.each,_Y=ut.trim,TY=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],kY={ftp:21,http:80,https:443,mailto:25},AY=["img","video"],$d=(e,n)=>Fe(e)?!e:Fe(n)?!et(AY,n):!0,x_=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},kf=(e,n,o)=>{const r=x_(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?$d(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Bi{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=Uh.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!kf(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=_Y(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const y=r?r.path:new Bi(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(y,n);else{const x=/([^#?]*)([#?]?.*)/.exec(n);x&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(y,x[1])+x[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&WP(TY,(y,x)=>{let A=m[x];A&&(A=A.replace(/\(mce_at\)/g,"@@")),i[y]=A}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Bi(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Bi(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?kY[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,m;const y=n.substring(0,n.lastIndexOf("/")).split("/"),x=o.split("/");if(y.length>=x.length){for(u=0,m=y.length;u<m;u++)if(u>=x.length||y[u]!==x[u]){r=u+1;break}}if(y.length<x.length){for(u=0,m=x.length;u<m;u++)if(u>=y.length||y[u]!==x[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=y.length-(r-1);u<m;u++)i+="../";for(u=r-1,m=x.length;u<m;u++)u!==r-1?i+="/"+x[u]:i+=x[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),y=[];WP(u,$=>{$&&y.push($)});const x=[];for(let $=m.length-1;$>=0;$--)if(!(m[$].length===0||m[$]===".")){if(m[$]===".."){r++;continue}if(r>0){r--;continue}x.push(m[$])}const A=y.length-r;let L;return A<=0?L=xs(x).join("/"):L=y.slice(0,A).join("/")+"/"+xs(x).join("/"),L.indexOf("/")!==0&&(L="/"+L),i&&L.lastIndexOf("/")!==L.length-1&&(L+=i),L}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const ZP=ut.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),zb="data-mce-type";let jP=0;const QA=(e,n,o,r,i)=>{var u,m,y,x;const A=n.validate,L=o.getSpecialElements();e.nodeType===Xr&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const $=(m=i==null?void 0:i.tagName)!==null&&m!==void 0?m:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Fe(i)&&(i.allowedTags[$]=!0);return}if(e.nodeType!==Cu||$==="body")return;const z=be.fromDom(e),X=ld(z,zb),se=li(z,"data-mce-bogus");if(!X&&ce(se)){se==="all"?ws(z):Qc(z);return}const te=o.getElementRule($);if(A&&!te){En(L,$)?ws(z):Qc(z);return}else Fe(i)&&(i.allowedTags[$]=!0);if(A&&te&&!X){if(xe((y=te.attributesForced)!==null&&y!==void 0?y:[],ie=>{oa(z,ie.name,ie.value==="{$uid}"?`mce_${jP++}`:ie.value)}),xe((x=te.attributesDefault)!==null&&x!==void 0?x:[],ie=>{ld(z,ie.name)||oa(z,ie.name,ie.value==="{$uid}"?`mce_${jP++}`:ie.value)}),te.attributesRequired&&!_t(te.attributesRequired,ie=>ld(z,ie))){Qc(z);return}if(te.removeEmptyAttrs&&Kd(z)){Qc(z);return}te.outputName&&te.outputName!==$&&PS(z,te.outputName)}},OY=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:m,attrValue:y}=i;i.keepAttr=qP(n,o,r,u,m,y),i.keepAttr?(i.allowedAttributes[m]=!0,eO(m,o)&&(i.attrValue=m),n.allow_svg_data_urls&&cs(y,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):fy(e,m)&&(i.forceKeepAttr=!0)},qP=(e,n,o,r,i,u)=>o!=="html"&&!os(r)?!0:!(i in ZP&&kf(e,u,r))&&(!e.validate||n.isValid(r,i)||cs(i,"data-")||cs(i,"aria-")),fy=(e,n)=>e.hasAttribute(zb)&&(n==="id"||n==="class"||n==="style"),eO=(e,n)=>e in n.getBoolAttrs(),ga=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const m=i[u],y=m.name,x=m.value;!qP(n,o,r,e.tagName.toLowerCase(),y,x)&&!fy(e,y)?e.removeAttribute(y):eO(y,o)&&e.setAttribute(y,y)}},_9=(e,n,o)=>{const r=Hb();return r.addHook("uponSanitizeElement",(i,u)=>{QA(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{OY(i,e,n,o.current(),u)}),r},T9=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},my=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};Hb().sanitize(e,o)},hy=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=Hb();r.addHook("uponSanitizeElement",(i,u)=>{var m;const y=(m=u.tagName)!==null&&m!==void 0?m:i.nodeName.toLowerCase(),x=n.allow_mathml_annotation_encodings;if(y==="annotation"&&Gt(x)&&x.length>0){const A=i.getAttribute("encoding");ce(A)&&et(x,A)&&(u.allowedTags[y]=!0)}}),r.sanitize(e,o)},gy=e=>n=>{const o=_(n);if(o==="svg")my(n);else if(o==="math")hy(n,e);else throw new Error("Not a namespace element")},tO=(e,n)=>{const o=Z();if(e.sanitize){const r=_9(e,n,o);return{sanitizeHtmlElement:(u,m)=>{r.sanitize(u,T9(e,m)),r.removed=[],o.reset()},sanitizeNamespaceElement:gy(e)}}else return{sanitizeHtmlElement:(u,m)=>{const y=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let x;for(;x=y.nextNode();){const A=o.track(x);QA(x,e,n,A),Wt(x)&&ga(x,e,n,A)}o.reset()},sanitizeNamespaceElement:it}},E_=ut.makeMap,nO=ut.extend,oO=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",m=n.childNodes;for(let y=0,x=m.length;y<x;y++){const A=m[y],L=new il(A.nodeName.toLowerCase(),A.nodeType);if(Wt(A)){const $=A.attributes;for(let z=0,X=$.length;z<X;z++){const se=$[z];L.attr(se.name,se.value)}os(L.name)&&(r(A),L.value=A.innerHTML)}else bt(A)?(L.value=A.data,u&&(L.raw=!0)):(ra(A)||zi(A)||Jl(A))&&(L.value=A.data);os(L.name)||oO(L,A,o,r),e.append(L)}},k9=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const m=i;xe(n,y=>y(m)),en(m.parent)&&m!==e?i=u:r.push(m)}for(let i=r.length-1;i>=0;i--){const u=r[i];xe(o,m=>m(u))}},A9=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=nO(E_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),x=_S(n),A=/[ \t\r\n]+/g,L=/^[ \t\r\n]+/,$=/[ \t\r\n]+$/,z=Re=>{let Me=Re.parent;for(;Fe(Me);){if(Me.name in m)return!0;Me=Me.parent}return!1},X=Re=>{let Me=Re;for(;Fe(Me);){if(Me.name in x)return Na(n,u,m,Me);Me=Me.parent}return!1},se=Re=>Re.name in y||of(n,Re)||os(Re.name)&&Re.parent===e,te=(Re,Me)=>{const Ie=Me?Re.prev:Re.next;return Fe(Ie)||en(Re.parent)?!1:se(Re.parent)&&(Re.parent!==e||r.isRootContent===!0)};return[Re=>{var Me;if(Re.type===3&&!z(Re)){let Ie=(Me=Re.value)!==null&&Me!==void 0?Me:"";Ie=Ie.replace(A," "),(kH(Re.prev,se)||te(Re,!0))&&(Ie=Ie.replace(L,"")),Ie.length===0||Ie===" "&&Re.prev&&Re.prev.type===Xr&&Re.next&&Re.next.type===Xr?Re.remove():Re.value=Ie}},Re=>{var Me;if(Re.type===1){const Ie=n.getElementRule(Re.name);if(i&&Ie){const ct=Na(n,u,m,Re);Ie.paddInEmptyBlock&&ct&&X(Re)?gA(o,r,se,Re):Ie.removeEmpty&&ct?se(Re)?Re.remove():Re.unwrap():Ie.paddEmpty&&(ct||Qp(Re))&&gA(o,r,se,Re)}}else if(Re.type===3&&!z(Re)){let Ie=(Me=Re.value)!==null&&Me!==void 0?Me:"";(Re.next&&se(Re.next)||te(Re,!1))&&(Ie=Ie.replace($,"")),Ie.length===0?Re.remove():Re.value=Ie}}]},GP=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},py=(e={},n=fs())=>{const o=_P(),r=_P(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=tO(i,n),y=(Me,Ie,ct="html")=>{const Ot=ct==="xhtml"?"application/xhtml+xml":"text/html",Qt=En(n.getSpecialElements(),Ie.toLowerCase()),tt=Qt?`<${Ie}>${Me}</${Ie}>`:Me,Ze=()=>ct==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${tt}</body></html>`:/^[\s]*<head/i.test(Me)||/^[\s]*<html/i.test(Me)||/^[\s]*<!DOCTYPE/i.test(Me)?`<html>${tt}</html>`:`<body>${tt}</body>`,ht=u.parseFromString(Ze(),Ot).body;return m.sanitizeHtmlElement(ht,Ot),Qt?ht.firstChild:ht},x=o.addFilter,A=o.getFilters,L=o.removeFilter,$=r.addFilter,z=r.getFilters,X=r.removeFilter,se=(Me,Ie)=>{pA(n,Me)&&Ie.push(Me)},te=(Me,Ie)=>{const ct=ce(Ie.attr(zb)),Ot=Ie.type===1&&!En(Me,Ie.name)&&!of(n,Ie)&&!os(Ie.name);return Ie.type===3||Ot&&!ct},ie=(Me,Ie)=>{const ct=nO(E_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ot=/^[ \t\r\n]+/,Qt=/[ \t\r\n]+$/;let tt=Me.firstChild,Ze=null;const ht=sn=>{var _n,Zn;sn&&(tt=sn.firstChild,tt&&tt.type===3&&(tt.value=(_n=tt.value)===null||_n===void 0?void 0:_n.replace(Ot,"")),tt=sn.lastChild,tt&&tt.type===3&&(tt.value=(Zn=tt.value)===null||Zn===void 0?void 0:Zn.replace(Qt,"")))};if(n.isValidChild(Me.name,Ie.toLowerCase())){for(;tt;){const sn=tt.next;te(ct,tt)?(Ze||(Ze=new il(Ie,1),Ze.attr(i.forced_root_block_attrs),Me.insert(Ze,tt)),Ze.append(tt)):(ht(Ze),Ze=null),tt=sn}ht(Ze)}},Re={schema:n,addAttributeFilter:$,getAttributeFilters:z,removeAttributeFilter:X,addNodeFilter:x,getNodeFilters:A,removeNodeFilter:L,parse:(Me,Ie={})=>{var ct;const Ot=i.validate,Qt=(ct=Ie.context)!==null&&ct!==void 0?ct:i.root_name,tt=y(Me,Qt,Ie.format);Hs(n,tt);const Ze=new il(Qt,11);oO(Ze,tt,n.getSpecialElements(),m.sanitizeNamespaceElement),tt.innerHTML="";const[ht,sn]=A9(Ze,n,i,Ie),_n=[],Zn=Ot?jr=>se(jr,_n):it,ho={nodes:{},attributes:{}},as=jr=>VN(A(),z(),jr,ho);if(k9(Ze,[ht,as],[sn,Zn]),_n.reverse(),Ot&&_n.length>0)if(Ie.context){const{pass:jr,fail:qi}=Oo(_n,hi=>hi.parent===Ze);Jo(qi,n,Ze,as),Ie.invalid=jr.length>0}else Jo(_n,n,Ze,as);const Cs=GP(i,Ie);return Cs&&(Ze.name==="body"||Ie.isRootContent)&&ie(Ze,Cs),Ie.invalid||mA(ho,Ie),Ze}};return cy(Re,i),xg(Re,i,n),Re},O9=e=>t1(e)?Wp({validate:!1}).serialize(e):e,KP=(e,n,o)=>{const r=O9(e),i=n(r);if(i.isDefaultPrevented())return i;if(t1(e))if(i.content!==r){const u=py({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},YP=e=>({sanitize:ag(e),sandbox_iframes:Fx(e),sandbox_iframes_exclusions:ew(e)}),XP=(e,n)=>{if(n.no_events)return da.value(n);{const o=cv(e,n);return o.isDefaultPrevented()?da.error(J1(e,{content:"",...o}).content):da.value(o)}},sO=(e,n,o)=>o.no_events?n:KP(n,i=>J1(e,{...o,content:i}),YP(e)).content,rO=(e,n)=>{if(n.no_events)return da.value(n);{const o=KP(n.content,r=>hx(e,{...n,content:r}),YP(e));return o.isDefaultPrevented()?(R2(e,o),da.error(void 0)):da.value(o)}},Vb=(e,n,o)=>{o.no_events||R2(e,{...o,content:n})},__=(e,n,o)=>({element:e,width:n,rows:o}),JP=(e,n)=>({element:e,cells:n}),QP=(e,n)=>({x:e,y:n}),eI=(e,n)=>Er(e,n).bind(gc).getOr(1),tI=(e,n,o,r,i)=>{const u=eI(i,"rowspan"),m=eI(i,"colspan"),y=e.rows;for(let x=o;x<o+u;x++){y[x]||(y[x]=JP(H0(r),[]));for(let A=n;A<n+m;A++){const L=y[x].cells;L[A]=x===o&&A===n?i:sm(i)}}},D9=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},R9=(e,n,o)=>{for(;D9(e,n,o);)n++;return n},aO=e=>Fo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),iO=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(No(i[u],n))return W.some(QP(u,r))}return W.none()},cO=(e,n,o,r,i)=>{const u=[],m=e.rows;for(let y=o;y<=i;y++){const x=m[y].cells,A=n<r?x.slice(n,r+1):x.slice(r,n+1);u.push(JP(m[y].element,A))}return u},nI=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,m=o.y,y=i<m?cO(e,r,i,u,m):cO(e,r,m,u,i);return __(e.element,aO(y),y)},oI=(e,n)=>{const o=sm(e.element),r=be.fromTag("tbody");return Du(r,n),Ls(o,r),o},sI=e=>dt(e.rows,n=>{const o=dt(n.cells,i=>{const u=H0(i);return Bs(u,"colspan"),Bs(u,"rowspan"),u}),r=sm(n.element);return Du(r,o),r}),M9=e=>{const n=__(sm(e),0,[]);return xe(Ua(e,"tr"),(o,r)=>{xe(Ua(o,"td,th"),(i,u)=>{tI(n,R9(n,u,r),r,o,i)})}),__(n.element,aO(n.rows),n.rows)},N9=e=>oI(e,sI(e)),P9=(e,n,o)=>iO(e,n).bind(r=>iO(e,o).map(i=>nI(e,r,i))),lO=e=>Vo(e,n=>oo(n)==="ul"||oo(n)==="ol"),cC=(e,n)=>Vo(e,o=>oo(o)==="li"&&pw(o,n)).fold(ft([]),o=>lO(e).map(r=>{const i=be.fromTag(oo(r)),u=Qo(Ti(r),(m,y)=>cs(y,"list-style"));return Xn(i,u),[be.fromTag("li"),i]}).getOr([])),rI=(e,n)=>{const o=Fo(n,(r,i)=>(Ls(i,r),i),e);return n.length>0?_3([o]):o},aI=e=>nh(e)?za(e).filter(g2).fold(ft([]),n=>[e,n]):g2(e)?[e]:[],T_=(e,n,o)=>{const r=be.fromDom(n.commonAncestorContainer),i=Cg(r,e),u=Kt(i,x=>o.isWrapper(oo(x))),m=cC(i,n),y=u.concat(m.length?m:aI(r));return dt(y,sm)},iI=()=>_3([]),I9=(e,n,o)=>rI(be.fromDom(n.cloneContents()),T_(e,n,o)),Ub=(e,n)=>Xd(n,"table",Ae(No,e)),uO=(e,n)=>Ub(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=M9(o);return P9(u,r,i).map(m=>_3([N9(m)]))}).getOrThunk(iI),cI=(e,n,o)=>n.length>0&&n[0].collapsed?iI():I9(e,n[0],o),lC=(e,n,o)=>{const r=Bv(n,e);return r.length>0?uO(e,r):cI(e,n,o)},uC=(e,n)=>n>=0&&n<e.length&&gm(e.charAt(n)),k_=e=>Ec(e.innerText),lI=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),uI=e=>W.from(e.selection.getRng()).map(n=>{var o;const r=W.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=lI(r),m=be.fromDom(n.cloneContents());qM(m),GM(m);const y=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),x=k_(y),A=Ec((o=y.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(y),uC(A,0)||uC(A,A.length-1)){const L=r.getOr(i),$=k_(L),z=$.indexOf(x);if(z===-1)return x;{const X=uC($,z-1),se=uC($,z+x.length);return(X?" ":"")+x+(se?" ":"")}}else return x}).getOr(""),B9=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=OE(e,oE(i)),m=n.contextual?lC(be.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},L9=(e,n)=>{if(n.format==="text")return uI(e);{const o=B9(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},F9=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),dO=(e,n,o={})=>{const r=F9(o,n);return XP(e,r).fold(xo,i=>{const u=L9(e,i);return sO(e,u,i)})},fO=0,mO=1,dI=2,$9=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(L,$,z)=>({start:L,end:$,diag:z}),m=(L,$,z,X,se)=>{const te=x(L,$,z,X);if(te===null||te.start===$&&te.diag===$-X||te.end===L&&te.diag===L-z){let ie=L,Ee=z;for(;ie<$||Ee<X;)ie<$&&Ee<X&&e[ie]===n[Ee]?(se.push([fO,e[ie]]),++ie,++Ee):$-L>X-z?(se.push([dI,e[ie]]),++ie):(se.push([mO,n[Ee]]),++Ee)}else{m(L,te.start,z,te.start-te.diag,se);for(let ie=te.start;ie<te.end;++ie)se.push([fO,e[ie]]);m(te.end,$,te.end-te.diag,X,se)}},y=(L,$,z,X)=>{let se=L;for(;se-$<X&&se<z&&e[se]===n[se-$];)++se;return u(L,se,$)},x=(L,$,z,X)=>{const se=$-L,te=X-z;if(se===0||te===0)return null;const ie=se-te,Ee=te+se,Re=(Ee%2===0?Ee:Ee+1)/2;r[1+Re]=L,i[1+Re]=$+1;let Me,Ie,ct,Ot,Qt;for(Me=0;Me<=Re;++Me){for(Ie=-Me;Ie<=Me;Ie+=2){for(ct=Ie+Re,Ie===-Me||Ie!==Me&&r[ct-1]<r[ct+1]?r[ct]=r[ct+1]:r[ct]=r[ct-1]+1,Ot=r[ct],Qt=Ot-L+z-Ie;Ot<$&&Qt<X&&e[Ot]===n[Qt];)r[ct]=++Ot,++Qt;if(ie%2!==0&&ie-Me<=Ie&&Ie<=ie+Me&&i[ct-ie]<=r[ct])return y(i[ct-ie],Ie+L-z,$,X)}for(Ie=ie-Me;Ie<=ie+Me;Ie+=2){for(ct=Ie+Re-ie,Ie===ie-Me||Ie!==ie+Me&&i[ct+1]<=i[ct-1]?i[ct]=i[ct+1]-1:i[ct]=i[ct-1],Ot=i[ct]-1,Qt=Ot-L+z-Ie;Ot>=L&&Qt>=z&&e[Ot]===n[Qt];)i[ct]=Ot--,Qt--;if(ie%2===0&&-Me<=Ie&&Ie<=Me&&i[ct]<=r[ct+ie])return y(i[ct],Ie+L-z,$,X)}}return null},A=[];return m(0,e.length,0,n.length,A),A},fI=e=>Wt(e)?e.outerHTML:bt(e)?Uh.encodeRaw(e.data,!1):ra(e)?"<!--"+e.data+"-->":"",H9=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},z9=(e,n,o)=>{const r=H9(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},V9=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},U9=(e,n)=>{let o=0;xe(e,r=>{r[0]===fO?o++:r[0]===mO?(z9(n,r[1],o),o++):r[0]===dI&&V9(n,o)})},W9=(e,n)=>Kt(dt(Rr(e.childNodes),M(Ec,fI)),o=>o.length>0),Z9=(e,n)=>{const o=dt(Rr(n.childNodes),fI);return U9($9(o,e),n),n},j9=Ge(()=>document.implementation.createHTMLDocument("undo")),q9=e=>e.querySelector("iframe")!==null,mI=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),G9=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Wb=e=>{const n=e.serializer.getTempAttrs(),o=jM(e.getBody(),n);return q9(o)?mI(W9(o)):G9(Ec(o.innerHTML))},ic=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Z9(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Fe(r)&&eE(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},hO=e=>e.type==="fragmented"?e.fragments.join(""):e.content,dC=e=>{const n=be.fromTag("body",j9());return Yl(n,hO(e)),xe(Ua(n,"*[data-mce-bogus]"),Qc),Fs(n)},Zb=(e,n)=>hO(e)===hO(n),hI=(e,n)=>dC(e)===dC(n),cl=(e,n)=>!e||!n?!1:Zb(e,n)?!0:hI(e,n),Eg=e=>e.get()===0,fC=(e,n,o)=>{Eg(o)&&(e.typing=n)},gI=(e,n)=>{e.typing&&(fC(e,!1,n),e.add())},pI=e=>{e.typing&&(e.typing=!1,e.add())},K9=(e,n,o)=>{Eg(n)&&o.set(sv(e.selection))},bI=(e,n,o,r,i,u,m)=>{const y=Wb(e),x=ut.extend(u||{},y);if(!Eg(r)||e.removed)return null;const A=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:x,lastLevel:A,originalEvent:m}).isDefaultPrevented()||A&&cl(A,x))return null;n.data[o.get()]&&i.get().each(z=>{n.data[o.get()].beforeBookmark=z});const L=gv(e);if(L&&n.data.length>L){for(let z=0;z<n.data.length-1;z++)n.data[z]=n.data[z+1];n.data.length--,o.set(n.data.length)}x.bookmark=sv(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(x),o.set(n.data.length-1);const $={level:x,lastLevel:A,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",$),e.dispatch("change",$)):e.dispatch("AddUndo",$),x},mC=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},gO=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];ic(e,m,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},Y9=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],ic(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},vI=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,fC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],ic(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},X9=e=>{e.clear(),e.add()},pO=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!cl(Wb(e),n.data[0]),bO=(e,n)=>n.get()<e.data.length-1&&!e.typing,J9=(e,n,o)=>(gI(e,n),e.beforeChange(),e.ignore(o),e.add()),Q9=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},yI=(e,n)=>{const o=e.dom,r=Fe(n)?n:e.getBody();xe(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=G2(e),m=o.getAttrib(i,"border");(!m||m==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const y=o.getAttrib(i,"name")||i.id,x=sc(e);y&&e.hasVisual?o.addClass(i,x):o.removeClass(i,x)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Af=e=>({init:{bindEvents:it},undoManager:{beforeChange:(n,o)=>K9(e,n,o),add:(n,o,r,i,u,m)=>bI(e,n,o,r,i,u,m),undo:(n,o,r)=>vI(e,n,o,r),redo:(n,o)=>Y9(e,n,o),clear:(n,o)=>mC(e,n,o),reset:n=>X9(n),hasUndo:(n,o)=>pO(e,n,o),hasRedo:(n,o)=>bO(n,o),transact:(n,o,r)=>J9(n,o,r),ignore:(n,o)=>Q9(n,o),extra:(n,o,r,i)=>gO(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>Yw(e,n,o,r,i),matchAll:(n,o)=>YN(e,n,o),matchNode:(n,o,r,i)=>Em(e,n,o,r,i),canApply:n=>$H(e,n),closest:n=>o_(e,n),apply:(n,o,r)=>PA(e,n,o,r),remove:(n,o,r,i)=>yP(e,n,o,r,i),toggle:(n,o,r)=>v_(e,n,o,r),formatChanged:(n,o,r,i,u)=>a9(e,n,o,r,i,u)},editor:{getContent:n=>XM(e,n),setContent:(n,o)=>Pb(e,n,o),insertContent:(n,o)=>lu(e,n,o),addVisual:n=>yI(e,n)},selection:{getContent:(n,o)=>dO(e,n,o)},autocompleter:{addDecoration:it,removeDecoration:it},raw:{getModel:()=>W.none()}}),vO=e=>{const n=A=>Je(A)?A:{},{init:o,undoManager:r,formatter:i,editor:u,selection:m,autocompleter:y,raw:x}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(A,L,$)=>r.transact($),ignore:(A,L)=>r.ignore(L),extra:(A,L,$,z)=>r.extra($,z)},formatter:{match:(A,L,$,z)=>i.match(A,n(L),z),matchAll:i.matchAll,matchNode:i.matchNode,canApply:A=>i.canApply(A),closest:A=>i.closest(A),apply:(A,L,$)=>i.apply(A,n(L)),remove:(A,L,$,z)=>i.remove(A,n(L)),toggle:(A,L,$)=>i.toggle(A,n(L)),formatChanged:(A,L,$,z,X)=>i.formatChanged(L,$,z,X)},editor:{getContent:A=>u.getContent(A),setContent:(A,L)=>({content:u.setContent(A,L),html:""}),insertContent:(A,L)=>(u.insertContent(A),""),addVisual:u.addVisual},selection:{getContent:(A,L)=>m.getContent(L)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>W.some(x.getRawModel())}}},ez=()=>{const e=ft(null),n=ft("");return{init:{bindEvents:it},undoManager:{beforeChange:it,add:e,undo:e,redo:e,clear:it,reset:it,hasUndo:$e,hasRedo:$e,transact:e,ignore:it,extra:it},formatter:{match:$e,matchAll:ft([]),matchNode:ft(void 0),canApply:$e,closest:n,apply:it,remove:it,toggle:it,formatChanged:ft({unbind:it})},editor:{getContent:n,setContent:ft({content:"",html:""}),insertContent:ft(""),addVisual:it},selection:{getContent:n},autocompleter:{addDecoration:it,removeDecoration:it},raw:{getModel:ft(W.none())}}},Hd=e=>En(e.plugins,"rtc"),yO=e=>Yo(e.plugins,"rtc").bind(n=>W.from(n.setup)),wI=e=>{const n=e;return yO(e).fold(()=>(n.rtcInstance=Af(e),W.none()),o=>(n.rtcInstance=ez(),W.some(()=>o().then(r=>(n.rtcInstance=vO(r),r.rtc.isRemote)))))},A_=e=>e.rtcInstance?e.rtcInstance:Af(e),Qa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},tz=(e,n,o)=>{Qa(e).undoManager.beforeChange(n,o)},nz=(e,n,o,r,i,u,m)=>Qa(e).undoManager.add(n,o,r,i,u,m),oz=(e,n,o,r)=>Qa(e).undoManager.undo(n,o,r),sz=(e,n,o)=>Qa(e).undoManager.redo(n,o),rz=(e,n,o)=>{Qa(e).undoManager.clear(n,o)},CI=(e,n)=>{Qa(e).undoManager.reset(n)},az=(e,n,o)=>Qa(e).undoManager.hasUndo(n,o),iz=(e,n,o)=>Qa(e).undoManager.hasRedo(n,o),cz=(e,n,o,r)=>Qa(e).undoManager.transact(n,o,r),SI=(e,n,o)=>{Qa(e).undoManager.ignore(n,o)},wO=(e,n,o,r,i)=>{Qa(e).undoManager.extra(n,o,r,i)},CO=(e,n,o,r,i)=>Qa(e).formatter.match(n,o,r,i),xI=(e,n,o)=>Qa(e).formatter.matchAll(n,o),SO=(e,n,o,r,i)=>Qa(e).formatter.matchNode(n,o,r,i),EI=(e,n)=>Qa(e).formatter.canApply(n),_I=(e,n)=>Qa(e).formatter.closest(n),xO=(e,n,o,r)=>{Qa(e).formatter.apply(n,o,r)},TI=(e,n,o,r,i)=>{Qa(e).formatter.remove(n,o,r,i)},kI=(e,n,o,r)=>{Qa(e).formatter.toggle(n,o,r)},AI=(e,n,o,r,i,u)=>Qa(e).formatter.formatChanged(n,o,r,i,u),lz=(e,n)=>A_(e).editor.getContent(n),EO=(e,n,o)=>A_(e).editor.setContent(n,o),uz=(e,n,o)=>A_(e).editor.insertContent(n,o),O_=(e,n,o)=>Qa(e).selection.getContent(n,o),dz=(e,n)=>Qa(e).editor.addVisual(n),OI=e=>Qa(e).init.bindEvents(),fz=(e,n={})=>{const o=n.format?n.format:"html";return O_(e,o,n)},_O=e=>e.dom.length===0?(ws(e),W.none()):W.some(e),DI=(e,n)=>e.filter(o=>rl.isBookmarkNode(o.dom)).bind(n?Yd:ql),mz=(e,n,o,r,i)=>{const u=e.dom,m=n.dom,y=r?u.length:m.length;r?(Z3(u,m,i,!1,!r),o.setStart(m,y)):(Z3(m,u,i,!1,!r),o.setEnd(m,y))},hz=(e,n,o)=>{za(e).each(r=>{const i=e.dom;n&&Iw(r,Qe(i,0),o)?BE(i,0,o):!n&&Jv(r,Qe(i,i.length),o)&&W3(i,i.length,o)})},RI=(e,n,o,r,i)=>{e.bind(u=>((r?W3:BE)(u.dom,r?u.dom.length:0,i),n.filter(na).map(y=>mz(u,y,o,r,i)))).orThunk(()=>DI(n,r).or(n).filter(na).map(m=>hz(m,r,i)))},gz=(e,n,o)=>{const r=W.from(n.firstChild).map(be.fromDom),i=W.from(n.lastChild).map(be.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(ql).filter(na).bind(_O),m=i.bind(Yd).filter(na).bind(_O);RI(u,r,e,!0,o),RI(m,i,e,!1,o),e.collapse(!1)},pz=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),MI=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Wp({validate:!1},e.schema).serialize(u)}else return n.content},DY=(e,n,o={})=>{const r=pz(o,n);rO(e,r).each(i=>{const u=MI(e,i),m=e.selection.getRng();gz(m,m.createContextualFragment(u),e.schema),e.selection.setRng(m),Kv(e,m),Vb(e,u,i)})},NI=(e,n,o)=>{if(En(e,n)){const r=Kt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var bz=(e,n)=>{let o,r;const i=(y,x)=>Vo(x,A=>e.is(A,y)),u=y=>e.getParents(y,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",y=>{const x=y.element,A=u(x),L={};Tt(o,($,z)=>{i(z,A).each(X=>{r[z]||(xe($,se=>{se(!0,{node:X,selector:z,parents:A})}),r[z]=$),L[z]=$})}),Tt(r,($,z)=>{L[z]||(delete r[z],xe($,X=>{X(!1,{node:x,selector:z,parents:A})}))})})};return{selectorChangedWithUnbind:(y,x)=>(o||m(),o[y]||(o[y]=[]),o[y].push(x),i(y,u(n.selection.getStart())).each(()=>{r[y]=o[y]}),{unbind:()=>{NI(o,y,x),NI(r,y,x)}})}};const PI=e=>!!(e&&e.ownerDocument)&&dr(be.fromDom(e.ownerDocument),be.fromDom(e)),vz=e=>e?PI(e.startContainer)&&PI(e.endContainer):!1,II=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:m}=bz(e,r),y=(Ft,xn)=>{const Zo=e.createRng();Fe(Ft)&&Fe(xn)?(Zo.setStart(Ft,xn),Zo.setEnd(Ft,xn),Ie(Zo),Ee(!1)):(bw(e,Zo,r.getBody(),!0),Ie(Zo))},x=Ft=>fz(r,Ft),A=(Ft,xn)=>DY(r,Ft,xn),L=Ft=>NM(r.getBody(),Me(),Ft),$=Ft=>PM(r.getBody(),Me(),Ft),z=(Ft,xn)=>qi.getBookmark(Ft,xn),X=Ft=>qi.moveToBookmark(Ft),se=(Ft,xn)=>(LM(e,Ft,xn).each(Ie),Ft),te=()=>{const Ft=Me(),xn=Re();return!Ft||Ft.item?!1:Ft.compareEndPoints?Ft.compareEndPoints("StartToEnd",Ft)===0:!xn||Ft.collapsed},ie=()=>{if(r.mode.isReadOnly())return!1;const Ft=Me(),xn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return xn.length>0?Ss(xn,Zo=>e.isEditable(Zo.parentElement)):RM(e,Ft)},Ee=Ft=>{const xn=Me();xn.collapse(!!Ft),Ie(xn)},Re=()=>n.getSelection?n.getSelection():n.document.selection,Me=()=>{let Ft;const xn=(Yt,Ln,zn)=>{try{return Ln.compareBoundaryPoints(Yt,zn)}catch{return-1}},Zo=n.document;if(Fe(r.bookmark)&&!hr(r)){const Yt=CE(r);if(Yt.isSome())return Yt.map(Ln=>OE(r,[Ln])[0]).getOr(Zo.createRange())}try{const Yt=Re();Yt&&!ef(Yt.anchorNode)&&(Yt.rangeCount>0?Ft=Yt.getRangeAt(0):Ft=Zo.createRange(),Ft=OE(r,[Ft])[0])}catch{}if(Ft||(Ft=Zo.createRange()),Km(Ft.startContainer)&&Ft.collapsed){const Yt=e.getRoot();Ft.setStart(Yt,0),Ft.setEnd(Yt,0)}return i&&u&&(xn(Ft.START_TO_START,Ft,i)===0&&xn(Ft.END_TO_END,Ft,i)===0?Ft=u:(i=null,u=null)),Ft},Ie=(Ft,xn)=>{if(!vz(Ft))return;const Zo=Re();if(Ft=r.dispatch("SetSelectionRange",{range:Ft,forward:xn}).range,Zo){u=Ft;try{Zo.removeAllRanges(),Zo.addRange(Ft)}catch{}xn===!1&&Zo.extend&&(Zo.collapse(Ft.endContainer,Ft.endOffset),Zo.extend(Ft.startContainer,Ft.startOffset)),i=Zo.rangeCount>0?Zo.getRangeAt(0):null}if(!Ft.collapsed&&Ft.startContainer===Ft.endContainer&&(Zo!=null&&Zo.setBaseAndExtent)&&Ft.endOffset-Ft.startOffset<2&&Ft.startContainer.hasChildNodes()){const Ln=Ft.startContainer.childNodes[Ft.startOffset];Ln&&Ln.nodeName==="IMG"&&(Zo.setBaseAndExtent(Ft.startContainer,Ft.startOffset,Ft.endContainer,Ft.endOffset),(Zo.anchorNode!==Ft.startContainer||Zo.focusNode!==Ft.endContainer)&&Zo.setBaseAndExtent(Ln,0,Ln,1))}r.dispatch("AfterSetSelectionRange",{range:Ft,forward:xn})},ct=Ft=>(A(e.getOuterHTML(Ft)),Ft),Ot=()=>IM(r.getBody(),Me()),Qt=(Ft,xn)=>BM(e,Me(),Ft,xn),tt=()=>{const Ft=Re(),xn=Ft==null?void 0:Ft.anchorNode,Zo=Ft==null?void 0:Ft.focusNode;if(!Ft||!xn||!Zo||ef(xn)||ef(Zo))return!0;const Yt=e.createRng(),Ln=e.createRng();try{Yt.setStart(xn,Ft.anchorOffset),Yt.collapse(!0),Ln.setStart(Zo,Ft.focusOffset),Ln.collapse(!0)}catch{return!0}return Yt.compareBoundaryPoints(Yt.START_TO_START,Ln)<=0},jr={dom:e,win:n,serializer:o,editor:r,expand:(Ft={type:"word"})=>Ie(Up(e).expand(Me(),Ft)),collapse:Ee,setCursorLocation:y,getContent:x,setContent:A,getBookmark:z,moveToBookmark:X,select:se,isCollapsed:te,isEditable:ie,isForward:tt,setNode:ct,getNode:Ot,getSel:Re,setRng:Ie,getRng:Me,getStart:L,getEnd:$,getSelectedBlocks:Qt,normalize:()=>{const Ft=Me(),xn=Re();if(!gb(xn)&&Fv(r)){const Zo=Dw(e,Ft);return Zo.each(Yt=>{Ie(Yt,tt())}),Zo.getOr(Ft)}return Ft},selectorChanged:(Ft,xn)=>(m(Ft,xn),jr),selectorChangedWithUnbind:m,getScrollContainer:()=>{let Ft,xn=e.getRoot();for(;xn&&xn.nodeName!=="BODY";){if(xn.scrollHeight>xn.clientHeight){Ft=xn;break}xn=xn.parentNode}return Ft},scrollIntoView:(Ft,xn)=>{Fe(Ft)?DM(r,Ft,xn):Kv(r,Me(),xn)},placeCaretAt:(Ft,xn)=>Ie(_7(Ft,xn,r.getDoc())),getBoundingClientRect:()=>{const Ft=Me();return Ft.collapsed?Qe.fromRangeStart(Ft).getClientRects()[0]:Ft.getBoundingClientRect()},destroy:()=>{n=i=u=null,hi.destroy()}},qi=rl(jr),hi=Vp(jr,r);return jr.bookmarkManager=qi,jr.controlSelection=hi,jr},yz=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const m=ut.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();m.body=1;const A=L=>L.name in m||of(o,L);for(let L=0,$=r.length;L<$;L++){let z=r[L],X=z.parent;if(X&&A(X)&&z===X.lastChild){let se=z.prev;for(;se;){const te=se.name;if(te!=="span"||se.attr("data-mce-type")!=="bookmark"){te==="br"&&(z=null);break}se=se.prev}if(z&&(z.remove(),Na(o,y,x,X))){const te=o.getElementRule(X.name);te&&(te.removeEmpty?X.remove():te.paddEmpty&&gA(e,u,A,X))}}else{let se=z;for(;X&&X.firstChild===se&&X.lastChild===se&&(se=X,!m[X.name]);)X=X.parent;if(se===X){const te=new il("#text",3);te.value=ea,z.replace(te)}}}})},wz=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,m=n.url_converter,y=n.url_converter_scope;let x=r.length;for(;x--;){const A=r[x];let L=A.attr(u);L!==void 0?(A.attr(i,L.length>0?L:null),A.attr(u,null)):(L=A.attr(i),i==="style"?L=o.serializeStyle(o.parseStyle(L),A.name):m&&(L=m.call(y,L,i,A.name)),A.attr(i,L.length>0?L:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let m=r.length;for(;m--;){const y=r[m];y.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(W.from(y.firstChild).exists(A=>{var L;return!p2((L=A.value)!==null&&L!==void 0?L:"")})?y.unwrap():y.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const m=x=>x.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=r.length;for(;y--;){const x=r[y],A=x.firstChild,L=(u=A==null?void 0:A.value)!==null&&u!==void 0?u:"";if(i==="script"){const $=x.attr("type");$&&x.attr("type",$==="mce-no/type"?null:$.replace(/^mce\-/,"")),n.element_format==="xhtml"&&A&&L.length>0&&(A.value=`// <![CDATA[
`+m(L)+`
// ]]>`)}else n.element_format==="xhtml"&&A&&L.length>0&&(A.value=`<!--
`+m(L)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&i==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{xe(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&yz(n,e,e.schema)},BI=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Cz=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const y=m.createHTMLDocument("");ut.each(u.nodeName==="BODY"?u.childNodes:[u],x=>{y.body.appendChild(y.importNode(x,!0))}),u.nodeName!=="BODY"?u=y.body.firstChild:u=y.body,r=i.doc,i.doc=y}return x4(e,{...o,node:u}),r&&(i.doc=r),u},Sz=(e,n)=>Fe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,xz=(e,n,o)=>Sz(e,o)?Cz(e,n,o):n,Ez=(e,n,o)=>{ut.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},_z=(e,n,o)=>!n.no_events&&e?iv(e,{...n,content:o}).content:o,RY=(e,n,o)=>{const r=Ec(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||V0(be.fromDom(n))?r:ut.trim(r)},MY=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return BI(i),i},Tz=(e,n,o)=>Wp(e,n).serialize(o),kz=(e,n,o,r,i)=>{const u=Tz(n,o,r);return _z(e,i,u)},NY=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Vs.DOM,u=n&&n.schema?n.schema:fs(r),m=py(r,u);wz(m,r,i);const y=(x,A={})=>{const L={format:"html",...A},$=xz(n,x,L),z=RY(i,$,L),X=MY(m,z,L);return L.format==="tree"?X:kz(n,r,u,X,L)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:y,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ae(Ez,m,o),getTempAttrs:ft(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},LI=(e,n)=>{const o=NY(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},Zr="html",TO=(e,n)=>({...e,format:n,get:!0,getInner:!0}),PY=(e,n={})=>{const o=n.format?n.format:Zr,r=TO(n,o);return XP(e,r).fold(xo,i=>{const u=lz(e,i);return sO(e,u,i)})},Az="html",Oz=(e,n)=>({format:Az,...e,set:!0,content:n}),r1=(e,n,o={})=>{const r=Oz(o,n);return rO(e,r).map(i=>{const u=EO(e,i.content,i);return Vb(e,u.html,i),u.content}).getOr(n)},IY="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),BY=[],cc="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),kO=[],AO=(e,n)=>{const o=Kt(n,r=>En(e,r));return Ko(o)},FI=e=>{const n=AO(e,IY),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Ko(n)},Dz=e=>AO(e,BY),$I=(e,n)=>{const o=ut.makeMap(e.plugins," "),i=Kt(n,u=>En(o,u));return Ko(i)},D_=e=>$I(e,cc),Rz=e=>$I(e,kO.map(n=>n.name)),OO=(e,n)=>{const o=FI(e),r=D_(n),i=r.length>0,u=o.length>0,m=n.theme==="mobile";if(i||u||m){const y=`
- `,x=m?`

Themes:${y}mobile`:"",A=i?`

Plugins:${y}${r.join(y)}`:"",L=u?`

Options:${y}${o.join(y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+x+A+L)}},Mz=e=>Vo(kO,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),HI=(e,n)=>{const o=Dz(e),r=Rz(n),i=r.length>0,u=o.length>0;if(i||u){const m=`
- `,y=i?`

Plugins:${m}${r.map(Mz).join(m)}`:"",x=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+y+x)}},zI=(e,n)=>{OO(e,n),HI(e,n)},by=Vs.DOM,VI=e=>{by.setStyle(e.id,"display",e.orgDisplay)},vy=e=>W.from(e).each(n=>n.destroy()),Nz=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},Pz=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),by.unbind(n,"submit reset",e.formEventDelegate))},Iz=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Fe(i==null?void 0:i.nextSibling)&&by.remove(i.nextSibling),k2(e),e.editorManager.remove(e),!e.inline&&r&&VI(e),A2(e),by.remove(e.getContainer()),vy(n),vy(o),e.destroy()}},Yu=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),vy(o),vy(r)),Pz(e),Nz(e),e.destroyed=!0}},R_=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>En(e,i)}})(),yy=ec.ModelManager,UI=(e,n)=>n.dom[e],WI=(e,n)=>parseInt(vr(n,e),10),ZI=Ae(UI,"clientWidth"),Bz=Ae(UI,"clientHeight"),Lz=Ae(WI,"margin-top"),Fz=Ae(WI,"margin-left"),M_=e=>e.dom.getBoundingClientRect(),$z=(e,n,o)=>{const r=ZI(e),i=Bz(e);return n>=0&&o>=0&&n<=r&&o<=i},Hz=(e,n,o,r)=>{const i=M_(n),u=e?i.left+n.dom.clientLeft+Fz(n):0,m=e?i.top+n.dom.clientTop+Lz(n):0,y=o-u,x=r-m;return{x:y,y:x}},jI=(e,n,o)=>{const r=be.fromDom(e.getBody()),i=e.inline?r:Nh(r),u=Hz(e.inline,i,n,o);return $z(i,u.x,u.y)},DO=e=>W.from(e).map(be.fromDom),zz=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return DO(n).map(Kl).getOr(!1)};var Vz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const Uz=e=>{const n=[],o=()=>{const z=e.theme;return z&&z.getNotificationManagerImpl?z.getNotificationManagerImpl():Vz()},r=()=>W.from(n[0]),i=(z,X)=>z.type===X.type&&z.text===X.text&&!z.progressBar&&!z.timeout&&!X.progressBar&&!X.timeout,u=()=>{r().each(z=>{z.reposition()})},m=z=>{n.push(z)},y=z=>{Ws(n,X=>X===z).each(X=>{n.splice(X,1)})},x=(z,X=!0)=>e.removed||!zz(e)?{}:(X&&e.dispatch("BeforeOpenNotification",{notification:z}),Vo(n,se=>i(o().getArgs(se),z)).getOrThunk(()=>{e.editorManager.setActive(e);const se=o().open(z,()=>{y(se)},()=>Uu(e));return m(se),u(),e.dispatch("OpenNotification",{notification:{...se}}),se})),A=()=>{r().each(z=>{o().close(z),y(z),u()})},L=ft(n);return(z=>{z.on("SkinLoaded",()=>{const X=mv(z);X&&x({text:X,type:"warning",timeout:0},!1),u()}),z.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),z.on("remove",()=>{xe(n.slice(),X=>{o().close(X)})}),z.on("keydown",X=>{var se;const te=((se=X.key)===null||se===void 0?void 0:se.toLowerCase())==="f12"||X.keyCode===123;X.altKey&&te&&(X.preventDefault(),r().map(ie=>be.fromDom(ie.getEl())).each(ie=>Tw(ie)))})})(e),{open:x,close:A,getNotifications:L}},wy=ec.PluginManager,_m=ec.ThemeManager;var qI=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const RO=e=>{let n=[];const o=()=>{const te=e.theme;return te&&te.getWindowManagerImpl?te.getWindowManagerImpl():qI()},r=(te,ie)=>(...Ee)=>ie?ie.apply(te,Ee):void 0,i=te=>{e.dispatch("OpenWindow",{dialog:te})},u=te=>{e.dispatch("CloseWindow",{dialog:te})},m=te=>{n.push(te),i(te)},y=te=>{u(te),n=Kt(n,ie=>ie!==te),n.length===0&&e.focus()},x=()=>W.from(n[n.length-1]),A=te=>{e.editorManager.setActive(e),Ob(e),e.ui.show();const ie=te();return m(ie),ie},L=(te,ie)=>A(()=>o().open(te,ie,y)),$=te=>A(()=>o().openUrl(te,y)),z=(te,ie,Ee)=>{const Re=o();Re.alert(te,r(Ee||Re,ie))},X=(te,ie,Ee)=>{const Re=o();Re.confirm(te,r(Ee||Re,ie))},se=()=>{x().each(te=>{o().close(te),y(te)})};return e.on("remove",()=>{xe(n,te=>{o().close(te)})}),{open:L,openUrl:$,alert:z,confirm:X,close:se}},GI=(e,n)=>{e.notificationManager.open({type:"error",text:n})},hC=(e,n)=>{e._skinLoaded?GI(e,n):e.on("SkinLoaded",()=>{GI(e,n)})},Wz=(e,n)=>{hC(e,Od.translate(["Failed to upload image: {0}",n]))},gC=(e,n,o)=>{mx(e,n,{message:o}),console.error(o)},pC=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,Zz=(e,n,o)=>{gC(e,"PluginLoadError",pC("plugin",n,o))},KI=(e,n,o)=>{gC(e,"IconsLoadError",pC("icons",n,o))},jz=(e,n,o)=>{gC(e,"LanguageLoadError",pC("language",n,o))},qz=(e,n,o)=>{gC(e,"ThemeLoadError",pC("theme",n,o))},bC=(e,n,o)=>{gC(e,"ModelLoadError",pC("model",n,o))},YI=(e,n,o)=>{const r=Od.translate(["Failed to initialize plugin: {0}",n]);mx(e,"PluginLoadError",{message:r}),vC(r,o),hC(e,r)},vC=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},Gz=e=>{W.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},MO=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Kz=(e,n)=>{MO(e,"StyleWithCSS",n),MO(e,"enableInlineTableEditing",n),MO(e,"enableObjectResizing",n)},XI=e=>{e.selection.setRng(e.selection.getRng())},JI=(e,n,o)=>{Vf(e,n)&&!o?fd(e,n):o&&bl(e,n)},QI=e=>{const n=be.fromDom(e.getBody());JI(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Gz(e)},e6=e=>{const n=be.fromDom(e.getBody());JI(n,"mce-content-readonly",!1),e.hasEditableRoot()&&Xo(n,!0),Kz(e,!1),Uu(e)&&e.focus(),XI(e),e.nodeChanged()},_g=e=>ab(e),Cy="data-mce-contenteditable",Tm=e=>{xe(Ua(e,'*[contenteditable="true"]'),n=>{oa(n,Cy,"true"),Xo(n,!1)})},NO=e=>{xe(Ua(e,`*[${Cy}="true"]`),n=>{Bs(n,Cy),Xo(n,!0)})},t6=(e,n)=>{const o=be.fromDom(e.getBody());n?(QI(e),Xo(o,!1),Tm(o)):(NO(o),e6(e))},Yz=e=>{e.serializer?n6(e):e.on("PreInit",()=>{n6(e)})},n6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{_g(e)&&xe(n,o=>{o.attr(Cy,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Cy,n=>{_g(e)&&xe(n,o=>{o.attr("contenteditable",o.attr(Cy))})}),e.serializer.addTempAttr(Cy)},Xz=e=>e.type==="click",Ho=["copy"],Jz=e=>et(Ho,e.type),yC=(e,n)=>gn(n,"a",r=>No(r,be.fromDom(e.getBody()))).bind(r=>Er(r,"href")),Qz=(e,n)=>{if(Xz(n)&&!Ht.metaKeyPressed(n)){const o=be.fromDom(n.target);yC(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Ms(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Jz(n)&&e.dispatch(n.type,n)},eV=e=>{e.on("ShowCaret ObjectSelected",n=>{_g(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||t6(e,n.state)})},tV=e=>{Yz(e),eV(e)},o6=e=>/^[a-z0-9\-]+$/i.test(e),bh=e=>"content/"+e+"/content.css",Ol=e=>tinymce.Resource.has(bh(e)),s6=e=>Tg(e,A4(e)),wC=e=>Tg(e,V2(e)),Tg=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return dt(n,u=>Ol(u)?u:o6(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},vh=e=>{e.contentCSS=e.contentCSS.concat(s6(e),wC(e))},CC=e=>e?Rr(e.getElementsByTagName("img")):[],PO=(e,n)=>{const o={};return{findAll:(i,u=pt)=>{const m=Kt(CC(i),x=>{const A=x.src;return x.hasAttribute("data-mce-bogus")||x.hasAttribute("data-mce-placeholder")||!A||A===Nn.transparentSrc?!1:cs(A,"blob:")?!e.isUploaded(A)&&u(x):cs(A,"data:")?u(x):!1}),y=dt(m,x=>{const A=x.src;if(En(o,A))return o[A].then(L=>ce(L)?L:{image:x,blobInfo:L.blobInfo});{const L=zA(n,A).then($=>(delete o[A],{image:x,blobInfo:$})).catch($=>(delete o[A],$));return o[A]=L,L}});return Promise.all(y)}}},N_=()=>{let o={};const r=(z,X)=>({status:z,resultUri:X}),i=z=>z in o;return{hasBlobUri:i,getResultUri:z=>{const X=o[z];return X?X.resultUri:null},isPending:z=>i(z)?o[z].status===1:!1,isUploaded:z=>i(z)?o[z].status===2:!1,markPending:z=>{o[z]=r(1,null)},markUploaded:(z,X)=>{o[z]=r(2,X)},removeFailed:z=>{delete o[z]},destroy:()=>{o={}}}};let r6=0;const a6=()=>{const e=()=>Math.round(Z1()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},nV=e=>e+r6+++a6(),oV=()=>{let e=[];const n=$=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[$.toLowerCase()]||"dat",o=($,z,X,se,te)=>{if(ce($))return r({id:$,name:se,filename:te,blob:z,base64:X});if(Je($))return r($);throw new Error("Unknown input type")},r=$=>{if(!$.blob||!$.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const z=$.id||nV("blobid"),X=$.name||z,se=$.blob;return{id:ft(z),name:ft(X),filename:ft($.filename||X+"."+n(se.type)),blob:ft(se),base64:ft($.base64),blobUri:ft($.blobUri||URL.createObjectURL(se)),uri:ft($.uri)}},i=$=>{m($.id())||e.push($)},u=$=>Vo(e,$).getOrUndefined(),m=$=>u(z=>z.id()===$);return{create:o,add:i,get:m,getByUri:$=>u(z=>z.blobUri()===$),getByData:($,z)=>u(X=>X.base64()===$&&X.blob().type===z),findFirst:u,removeByUri:$=>{e=Kt(e,z=>z.blobUri()===$?(URL.revokeObjectURL(z.blobUri()),!1):!0)},destroy:()=>{xe(e,$=>{URL.revokeObjectURL($.blobUri())}),e=[]}}},i6=(e,n)=>{const o={},r=(te,ie)=>te?te.replace(/\/$/,"")+"/"+ie.replace(/^\//,""):ie,i=(te,ie)=>new Promise((Ee,Re)=>{const Me=new XMLHttpRequest;Me.open("POST",n.url),Me.withCredentials=n.credentials,Me.upload.onprogress=ct=>{ie(ct.loaded/ct.total*100)},Me.onerror=()=>{Re("Image upload failed due to a XHR Transport error. Code: "+Me.status)},Me.onload=()=>{if(Me.status<200||Me.status>=300){Re("HTTP Error: "+Me.status);return}const ct=JSON.parse(Me.responseText);if(!ct||!ce(ct.location)){Re("Invalid JSON: "+Me.responseText);return}Ee(r(n.basePath,ct.location))};const Ie=new FormData;Ie.append("file",te.blob(),te.filename()),Me.send(Ie)}),u=ve(n.handler)?n.handler:i,m=()=>new Promise(te=>{te([])}),y=(te,ie)=>({url:ie,blobInfo:te,status:!0}),x=(te,ie)=>({url:"",blobInfo:te,status:!1,error:ie}),A=(te,ie)=>{ut.each(o[te],Ee=>{Ee(ie)}),delete o[te]},L=(te,ie,Ee)=>(e.markPending(te.blobUri()),new Promise(Re=>{let Me,Ie;try{const ct=()=>{Me&&(Me.close(),Ie=it)},Ot=tt=>{ct(),e.markUploaded(te.blobUri(),tt),A(te.blobUri(),y(te,tt)),Re(y(te,tt))},Qt=tt=>{ct(),e.removeFailed(te.blobUri()),A(te.blobUri(),x(te,tt)),Re(x(te,tt))};Ie=tt=>{tt<0||tt>100||W.from(Me).orThunk(()=>W.from(Ee).map(fn)).each(Ze=>{Me=Ze,Ze.progressBar.value(tt)})},ie(te,Ie).then(Ot,tt=>{Qt(ce(tt)?{message:tt}:tt)})}catch(ct){Re(x(te,ct))}})),$=te=>te===i,z=te=>{const ie=te.blobUri();return new Promise(Ee=>{o[ie]=o[ie]||[],o[ie].push(Ee)})},X=(te,ie)=>(te=ut.grep(te,Ee=>!e.isUploaded(Ee.blobUri())),Promise.all(ut.map(te,Ee=>e.isPending(Ee.blobUri())?z(Ee):L(Ee,u,ie))));return{upload:(te,ie)=>!n.url&&$(u)?m():X(te,ie)}},IO=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),BO=(e,n)=>i6(n,{url:Cx(e),basePath:eb(e),credentials:tb(e),handler:$2(e)}),c6=e=>{const n=N_(),o=BO(e,n);return{upload:(r,i=!0)=>o.upload(r,i?IO(e):void 0)}},LO=(e,n)=>e.dom.isEmpty(n.dom)&&Fe(e.schema.getTextBlockElements()[oo(n)]),FY=e=>n=>{LO(e,n)&&Ls(n,be.fromHtml('<br data-mce-bogus="1" />'))},sV=e=>{const n=oV();let o,r;const i=N_(),u=[],m=Me=>Ie=>e.selection?Me(Ie):[],y=Me=>Me+(Me.indexOf("?")===-1?"?":"&")+new Date().getTime(),x=(Me,Ie,ct)=>{let Ot=0;do Ot=Me.indexOf(Ie,Ot),Ot!==-1&&(Me=Me.substring(0,Ot)+ct+Me.substr(Ot+Ie.length),Ot+=ct.length-Ie.length+1);while(Ot!==-1);return Me},A=(Me,Ie,ct)=>{const Ot=`src="${ct}"${ct===Nn.transparentSrc?' data-mce-placeholder="1"':""}`;return Me=x(Me,`src="${Ie}"`,Ot),Me=x(Me,'data-mce-src="'+Ie+'"','data-mce-src="'+ct+'"'),Me},L=(Me,Ie)=>{xe(e.undoManager.data,ct=>{ct.type==="fragmented"?ct.fragments=dt(ct.fragments,Ot=>A(Ot,Me,Ie)):ct.content=A(ct.content,Me,Ie)})},$=(Me,Ie)=>{const ct=e.convertURL(Ie,"src");L(Me.src,Ie),$a(be.fromDom(Me),{src:uv(e)?y(Ie):Ie,"data-mce-src":ct})},z=()=>(o||(o=BO(e,i)),ie().then(m(Me=>{const Ie=dt(Me,ct=>ct.blobInfo);return o.upload(Ie,IO(e)).then(m(ct=>{const Ot=[];let Qt=!1;const tt=dt(ct,(Ze,ht)=>{const{blobInfo:sn,image:_n}=Me[ht];let Zn=!1;return Ze.status&&F2(e)?(Ze.url&&!ns(_n.src,Ze.url)&&(Qt=!0),n.removeByUri(_n.src),Hd(e)||$(_n,Ze.url)):Ze.error&&(Ze.error.remove&&(L(_n.src,Nn.transparentSrc),Ot.push(_n),Zn=!0),Wz(e,Ze.error.message)),{element:_n,status:Ze.status,uploadUri:Ze.url,blobInfo:sn,removed:Zn}});return Ot.length>0&&!Hd(e)?e.undoManager.transact(()=>{xe(Ru(Ot),Ze=>{const ht=za(Ze);ws(Ze),ht.each(FY(e)),n.removeByUri(Ze.dom.src)})}):Qt&&e.undoManager.dispatchChange(),tt}))}))),X=()=>L2(e)?z():Promise.resolve([]),se=Me=>Ss(u,Ie=>Ie(Me)),te=Me=>{u.push(Me)},ie=()=>(r||(r=PO(i,n)),r.findAll(e.getBody(),se).then(m(Me=>{const Ie=Kt(Me,ct=>ce(ct)?(hC(e,ct),!1):ct.uriType!=="blob");return Hd(e)||xe(Ie,ct=>{L(ct.image.src,ct.blobInfo.blobUri()),ct.image.src=ct.blobInfo.blobUri(),ct.image.removeAttribute("data-mce-src")}),Ie}))),Ee=()=>{n.destroy(),i.destroy(),r=o=null},Re=Me=>Me.replace(/src="(blob:[^"]+)"/g,(Ie,ct)=>{const Ot=i.getResultUri(ct);if(Ot)return'src="'+Ot+'"';let Qt=n.getByUri(ct);return Qt||(Qt=Fo(e.editorManager.get(),(tt,Ze)=>tt||Ze.editorUpload&&Ze.editorUpload.blobCache.getByUri(ct),void 0)),Qt?'src="data:'+Qt.blob().type+";base64,"+Qt.base64()+'"':Ie});return e.on("SetContent",()=>{L2(e)?X():ie()}),e.on("RawSaveContent",Me=>{Me.content=Re(Me.content)}),e.on("GetContent",Me=>{Me.source_view||Me.format==="raw"||Me.format==="tree"||(Me.content=Re(Me.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Me=>{xe(Me,Ie=>{const ct=Ie.attr("src");if(!ct||n.getByUri(ct))return;const Ot=i.getResultUri(ct);Ot&&Ie.attr("src",Ot)})})}),{blobCache:n,addFilter:te,uploadImages:z,uploadImagesAuto:X,scanForImages:ie,destroy:Ee}},$Y=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,i,u]:[i,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,m)=>Wt(i)&&i.hasAttribute("href"),onformat:(i,u,m)=>{ut.each(m,(y,x)=>{n.setAttrib(i,x,y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ut.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},l6={remove_similar:!0,inherit:!1},Sy={selector:"td,th",...l6},yh={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Sy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Sy},tablecellbordercolor:{styles:{borderColor:"%value"},...Sy},tablecellclass:{classes:["%value"],...Sy},tableclass:{selector:"table",classes:["%value"],...l6},tablecellborderstyle:{styles:{borderStyle:"%value"},...Sy},tablecellborderwidth:{styles:{borderWidth:"%value"},...Sy}},HY=ft(yh),zY=e=>{const n={},o=m=>Fe(m)?n[m]:n,r=m=>En(n,m),i=(m,y)=>{m&&(ce(m)?(Gt(y)||(y=[y]),xe(y,x=>{In(x.deep)&&(x.deep=!Ac(x)),In(x.split)&&(x.split=!Ac(x)||ma(x)),In(x.remove)&&Ac(x)&&!ma(x)&&(x.remove="none"),Ac(x)&&ma(x)&&(x.mixed=!0,x.block_expand=!0),ce(x.classes)&&(x.classes=x.classes.split(/\s+/))}),n[m]=y):Tt(m,(x,A)=>{i(A,x)}))},u=m=>(m&&n[m]&&delete n[m],n);return i($Y(e)),i(HY()),i(Z2(e)),{get:o,has:r,register:i,unregister:u}},P_=ut.each,ll=Vs.DOM,FO=e=>Fe(e)&&Je(e),$O=(e,n)=>{const o=n&&n.schema||fs({}),r=(x,A)=>{A.classes.length>0&&ll.addClass(x,A.classes.join(" ")),ll.setAttribs(x,A.attrs)},i=x=>{const A=ce(x)?{name:x,classes:[],attrs:{}}:x,L=ll.create(A.name);return r(L,A),L},u=(x,A)=>{const L=o.getElementRule(x.nodeName.toLowerCase()),$=L==null?void 0:L.parentsRequired;return $&&$.length?A&&et($,A)?A:$[0]:!1},m=(x,A,L)=>{let $;const z=A[0],X=FO(z)?z.name:void 0,se=u(x,X);if(se)X===se?($=z,A=A.slice(1)):$=se;else if(z)$=z,A=A.slice(1);else if(!L)return x;const te=$?i($):ll.create("div");te.appendChild(x),L&&ut.each(L,Ee=>{const Re=i(Ee);te.insertBefore(Re,x)});const ie=FO($)?$.siblings:void 0;return m(te,A,ie)},y=ll.create("div");if(e.length>0){const x=e[0],A=i(x),L=FO(x)?x.siblings:void 0;y.appendChild(m(A,e.slice(1),L))}return y},u6=e=>{e=ut.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,m,y)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":ut.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const x=y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);x&&(o.attrs[x[1]]=x[2])}return""})),o.name=n||"div",o},d6=e=>ce(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ut.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=ut.map(n.split(/(?:~\+|~|\+)/),u6),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],rV=(e,n)=>{let o="",r=_x(e);if(r==="")return"";const i=z=>ce(z)?z.replace(/%(\w+)/g,""):"",u=(z,X)=>ll.getStyle(X??e.getBody(),z,!0);if(ce(n)){const z=e.formatter.get(n);if(!z)return"";n=z[0]}if("preview"in n){const z=n.preview;if(z===!1)return"";r=z||r}let m=n.block||n.inline||"span",y;const x=d6(n.selector);x.length>0?(x[0].name||(x[0].name=m),m=n.selector,y=$O(x,e)):y=$O([m],e);const A=ll.select(m,y)[0]||y.firstChild;P_(n.styles,(z,X)=>{const se=i(z);se&&ll.setStyle(A,X,se)}),P_(n.attributes,(z,X)=>{const se=i(z);se&&ll.setAttrib(A,X,se)}),P_(n.classes,z=>{const X=i(z);ll.hasClass(A,X)||ll.addClass(A,X)}),e.dispatch("PreviewFormats"),ll.setStyles(y,{position:"absolute",left:-65535}),e.getBody().appendChild(y);const L=u("fontSize"),$=/px$/.test(L)?parseInt(L,10):0;return P_(r.split(" "),z=>{let X=u(z,A);if(!(z==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(X)&&(X=u(z),H1(X).toLowerCase()==="#ffffff"))&&!(z==="color"&&H1(X).toLowerCase()==="#000000")){if(z==="font-size"&&/em|%$/.test(X)){if($===0)return;X=parseFloat(X)/(/%$/.test(X)?100:1)*$+"px"}z==="border"&&X&&(o+="padding:0 2px;"),o+=z+":"+X+";"}}),e.dispatch("AfterPreviewFormats"),ll.remove(y),o},aV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},kg=e=>{const n=zY(e),o=$s({});return aV(e),eP(e),Hd(e)||o9(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{xO(e,r,i,u)},remove:(r,i,u,m)=>{TI(e,r,i,u,m)},toggle:(r,i,u)=>{kI(e,r,i,u)},match:(r,i,u,m)=>CO(e,r,i,u,m),closest:r=>_I(e,r),matchAll:(r,i)=>xI(e,r,i),matchNode:(r,i,u,m)=>SO(e,r,i,u,m),canApply:r=>EI(e,r),formatChanged:(r,i,u,m)=>AI(e,o,r,i,u,m),getCssText:Ae(rV,e)}},f6=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},iV=(e,n,o)=>{const r=$s(!1),i=x=>{fC(n,!1,o),n.add({},x)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",x=>{const A=x.command;f6(A)||(gI(n,o),n.beforeChange())}),e.on("ExecCommand",x=>{const A=x.command;f6(A)||i(x)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;const L=Nn.os.isMacOS()&&x.key==="Meta";(A>=33&&A<=36||A>=37&&A<=40||A===45||x.ctrlKey||L)&&(i(),e.nodeChanged()),(A===46||A===8)&&e.nodeChanged(),r.get()&&n.typing&&!cl(Wb(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;if(A>=33&&A<=36||A>=37&&A<=40||A===45){n.typing&&i(x);return}const L=x.ctrlKey&&!x.altKey||x.metaKey;if((A<16||A>20)&&A!==224&&A!==91&&!n.typing&&!L){n.beforeChange(),fC(n,!0,o),n.add({},x),r.set(!0);return}(Nn.os.isMacOS()?x.metaKey:x.ctrlKey&&!x.altKey)&&n.beforeChange()}),e.on("mousedown",x=>{n.typing&&i(x)});const u=x=>x.inputType==="insertReplacementText",m=x=>x.inputType==="insertText"&&x.data===null,y=x=>x.inputType==="insertFromPaste"||x.inputType==="insertFromDrop";e.on("input",x=>{x.inputType&&(u(x)||m(x)||y(x))&&i(x)}),e.on("AddUndo Undo Redo ClearUndos",x=>{x.isDefaultPrevented()||e.nodeChanged()})},cV=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},m6=e=>{const n=Aa(),o=$s(0),r=$s(0),i={data:[],typing:!1,beforeChange:()=>{tz(e,o,n)},add:(u,m)=>nz(e,i,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=Wb(e);u.bookmark=sv(e.selection),e.dispatch("change",{level:u,lastLevel:Mc(i.data,r.get()).getOrUndefined()})},undo:()=>oz(e,i,o,r),redo:()=>sz(e,r,i.data),clear:()=>{rz(e,i,r)},reset:()=>{CI(e,i)},hasUndo:()=>az(e,i,r),hasRedo:()=>iz(e,i,r),transact:u=>cz(e,i,o,u),ignore:u=>{SI(e,o,u)},extra:(u,m)=>{wO(e,i,r,u,m)}};return Hd(e)||iV(e,i,o),cV(e),i},lV=[9,27,Ht.HOME,Ht.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ht.DOWN,Ht.UP,Ht.LEFT,Ht.RIGHT].concat(Nn.browser.isFirefox()?[224]:[]),h6="data-mce-placeholder",g6=e=>e.type==="keydown"||e.type==="keyup",p6=e=>{const n=e.keyCode;return n===Ht.BACKSPACE||n===Ht.DELETE},uV=e=>{if(g6(e)){const n=e.keyCode;return!p6(e)&&(Ht.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||et(lV,n))}else return!1},I_=e=>g6(e)&&!(p6(e)||e.type==="keyup"&&e.keyCode===229),dV=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},fV=e=>{var n;const o=e.dom,r=Ga(e),i=(n=xx(e))!==null&&n!==void 0?n:"",u=(m,y)=>{if(uV(m))return;const x=e.getBody(),A=I_(m)?!1:dV(o,x,r);(o.getAttrib(x,h6)!==""!==A||y)&&(o.setAttrib(x,h6,A?i:null),Pi(e,A),e.on(A?"keydown":"keyup",u),e.off(A?"keyup":"keydown",u))};ls(i)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",y=>vn.setEditorTimeout(e,()=>u(y)))})},VY=(e,n)=>({block:e,position:n}),SC=(e,n)=>({from:e,to:n}),HO=(e,n)=>{const o=be.fromDom(e),r=be.fromDom(n.container());return $E(o,r).map(i=>VY(i,n))},zO=e=>!(dr(e.to.block,e.from.block)||dr(e.from.block,e.to.block)),mV=e=>!No(e.from.block,e.to.block),b6=(e,n)=>Js(n,i=>q1(i)||rt(i.dom),i=>No(i,e)).filter(Is).getOr(e),hV=(e,n)=>{const o=be.fromDom(e);return No(b6(o,n.from.block),b6(o,n.to.block))},gV=e=>Uo(e.from.block.dom)===!1&&Uo(e.to.block.dom)===!1,jb=e=>{const n=o=>Bu(o)||Ai(o.dom)||nh(o);return n(e.from.block)&&n(e.to.block)},qb=(e,n,o,r)=>qo(r.position.getNode())&&!la(e,r.block)?lg(!1,r.block.dom).bind(i=>i.isEqual(r.position)?Wi(o,n,i).bind(u=>HO(n,u)):W.some(r)).getOr(r):r,B_=(e,n,o,r)=>{const i=HO(n,Qe.fromRangeStart(r)),u=i.bind(m=>Wi(o,n,m.position).bind(y=>HO(n,y).map(x=>qb(e,n,o,x))));return ur(i,u,SC).filter(m=>mV(m)&&hV(n,m)&&gV(m)&&jb(m)&&zO(m))},L_=(e,n,o,r)=>r.collapsed?B_(e,n,o,r):W.none(),Gb=(e,n)=>{const o=va(e);return Ws(o,r=>n.isBlock(oo(r))).fold(ft(o),r=>o.slice(0,r))},a1=(e,n)=>{const o=Gb(e,n);return xe(o,ws),o},xC=(e,n,o)=>{const r=Cg(o,n);return Vo(r.reverse(),i=>la(e,i)).each(ws)},F_=(e,n)=>Kt(vc(n),o=>!la(e,o)).length===0,v6=(e,n,o,r,i)=>{if(la(r,o))return lf(o),Zi(o.dom);F_(r,i)&&la(r,n)&&ui(i,be.fromTag("br"));const u=fi(o.dom,Qe.before(i.dom));return xe(a1(n,r),m=>{ui(i,m)}),xC(r,e,n),u},VO=(e,n)=>e.isInline(oo(n)),UO=(e,n,o,r)=>{if(la(r,o)){if(la(r,n)){const m=is((y=>{const x=(A,L)=>Ic(A).fold(()=>L,$=>VO(r,$)?x($,L.concat(sm($))):L);return x(y,[])})(o),(y,x)=>(jm(y,x),x),Dd());yl(n),Ls(n,m)}return ws(o),Zi(n.dom)}const i=Vu(o.dom);return xe(a1(n,r),u=>{Ls(o,u)}),xC(r,e,n),i},y6=(e,n)=>{const o=Cg(n,e);return W.from(o[o.length-1])},w6=(e,n)=>dr(n,e)?y6(n,e):W.none(),Kb=(e,n)=>{lg(e,n.dom).bind(o=>W.from(o.getNode())).map(be.fromDom).filter(Ri).each(ws)},WO=(e,n,o,r)=>(Kb(!0,n),Kb(!1,o),w6(n,o).fold(Ae(UO,e,n,o,r),Ae(v6,e,n,o,r))),ZO=(e,n,o,r,i)=>n?WO(e,r,o,i):WO(e,o,r,i),$_=(e,n)=>{const o=be.fromDom(e.getBody());return L_(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{ZO(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},H_=(e,n,o)=>{const r=n.getRng();return ur($E(e,be.fromDom(r.startContainer)),$E(e,be.fromDom(r.endContainer)),(i,u)=>No(i,u)?W.none():W.some(()=>{r.deleteContents(),ZO(e,!0,i,u,o).each(m=>{n.setRng(m.toRange())})})).getOr(W.none())},jO=(e,n)=>{const o=be.fromDom(n),r=Ae(No,e);return vl(o,q1,r).isSome()},C6=(e,n)=>jO(e,n.startContainer)||jO(e,n.endContainer),S6=(e,n)=>{const o=fi(e.dom,Qe.fromRangeStart(n)).isNone(),r=rc(e.dom,Qe.fromRangeEnd(n)).isNone();return!C6(e,n)&&o&&r},x6=e=>W.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Ag=e=>{const n=be.fromDom(e.getBody()),o=e.selection.getRng();return S6(n,o)?x6(e):H_(n,e.selection,e.schema)},wh=(e,n)=>e.selection.isCollapsed()?W.none():Ag(e),lc=(e,n,o,r,i)=>W.from(n._selectionOverrides.showCaret(e,o,r,i)),pV=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},EC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?W.none():W.some(pV(n)),bV=(e,n,o)=>{const r=Rp(1,e.getBody(),n),i=Qe.fromRangeStart(r),u=i.getNode();if(lb(u))return lc(1,e,u,!i.isAtEnd(),!1);const m=i.getNode(!0);if(lb(m))return lc(1,e,m,!1,!1);const y=Cf(e.dom.getRoot(),i.getNode());return lb(y)?lc(1,e,y,!1,o):W.none()},qO=(e,n,o)=>n.collapsed?bV(e,n,o).getOr(n):n,vV=e=>jp(e)||Rb(e),yV=e=>qp(e)||Pw(e),wV=(e,n)=>{bt(n)&&n.data.length===0&&e.remove(n)},E6=(e,n,o,r,i,u)=>{lc(r,e,u.getNode(!i),i,!0).each(m=>{if(n.collapsed){const y=n.cloneRange();i?y.setEnd(m.startContainer,m.startOffset):y.setStart(m.endContainer,m.endOffset),y.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),wV(e.dom,o)},CV=(e,n)=>{const o=e.selection.getRng();if(!bt(o.commonAncestorContainer))return W.none();const r=n?Ka.Forwards:Ka.Backwards,i=sl(e.getBody()),u=Ae(lw,n?i.next:i.prev),m=n?vV:yV,y=Mp(r,e.getBody(),o),x=u(y),A=x&&Pd(n,x);if(!A||!Pp(y,A))return W.none();if(m(A))return W.some(()=>E6(e,o,y.getNode(),r,n,A));const L=u(A);return L&&m(L)&&Pp(A,L)?W.some(()=>E6(e,o,y.getNode(),r,n,L)):W.none()},GO=(e,n)=>CV(e,n),KO=(e,n)=>{const o=e.getBody();return n?Zi(o).filter(jp):Vu(o).filter(qp)},YO=e=>{const n=e.selection.getRng();return!n.collapsed&&(KO(e,!0).exists(o=>o.isEqual(Qe.fromRangeStart(n)))||KO(e,!1).exists(o=>o.isEqual(Qe.fromRangeEnd(n))))},XO=e=>Fe(e)&&(q1(be.fromDom(e))||nh(be.fromDom(e))),Dl=au.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),_6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Wt(o)&&o.getAttribute("data-mce-caret")===r},SV=(e,n,o,r,i)=>{const u=m=>i.isInline(m.nodeName.toLowerCase())&&!zu(o,r,e);return qx(!n,o).fold(()=>qx(n,r).fold($e,u),u)},T6=(e,n,o,r,i)=>{const u=i.getNode(!o);return $E(be.fromDom(n),be.fromDom(r.getNode())).map(m=>la(e,m)?Dl.remove(m.dom):Dl.moveToElement(u)).orThunk(()=>W.some(Dl.moveToElement(u)))},JO=(e,n,o,r)=>Wi(n,e,o).bind(i=>XO(i.getNode())||SV(e,n,o,i,r)?W.none():n&&Uo(i.getNode())||!n&&Uo(i.getNode(!0))?T6(r,e,n,o,i):n&&qp(o)||!n&&jp(o)?W.some(Dl.moveToPosition(i)):W.none()),k6=(e,n)=>en(n)?W.none():e&&Uo(n.nextSibling)?W.some(Dl.moveToElement(n.nextSibling)):!e&&Uo(n.previousSibling)?W.some(Dl.moveToElement(n.previousSibling)):W.none(),QO=(e,n,o)=>o.fold(r=>W.some(Dl.remove(r)),r=>W.some(Dl.moveToElement(r)),r=>zu(n,r,e)?W.none():W.some(Dl.moveToPosition(r))),A6=(e,n,o,r)=>_6(n,o)?k6(n,o.getNode(!n)).orThunk(()=>JO(e,n,o,r)):JO(e,n,o,r).bind(i=>QO(e,o,i)),O6=(e,n,o,r)=>{const i=Rp(n?1:-1,e,o),u=Qe.fromRangeStart(i),m=be.fromDom(e);return!n&&qp(u)?W.some(Dl.remove(u.getNode(!0))):n&&jp(u)?W.some(Dl.remove(u.getNode())):!n&&jp(u)&&PE(m,u,r)?uN(m,u,r).map(y=>Dl.remove(y.getNode())):n&&qp(u)&&$n(m,u,r)?tH(m,u,r).map(y=>Dl.remove(y.getNode())):A6(e,n,u,r)},eD=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Nb(e,n,be.fromDom(o)),!0),xV=(e,n)=>o=>{const r=n?Qe.before(o):Qe.after(o);return e.selection.setRng(r.toRange()),!0},EV=e=>n=>(e.selection.setRng(n.toRange()),!0),km=(e,n)=>W.from(Cf(e.getBody(),n)),Of=(e,n)=>{const o=e.selection.getNode();return km(e,o).filter(Uo).fold(()=>O6(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(eD(e,n),xV(e,n),EV(e))),()=>W.some(it))},z_=e=>{xe(Ua(e,".mce-offscreen-selection"),ws)},D6=(e,n)=>{const o=e.selection.getNode();return Uo(o)&&!Kg(o)?km(e,o.parentNode).filter(Uo).fold(()=>W.some(()=>{z_(be.fromDom(e.getBody())),Nb(e,n,be.fromDom(e.selection.getNode())),Yp(e)}),()=>W.some(it)):YO(e)?W.some(()=>{Es(e,e.selection.getRng(),be.fromDom(e.getBody()))}):W.none()},_C=e=>{const n=e.dom,o=e.selection,r=Cf(e.getBody(),o.getNode());if(rt(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Qe.before(i).toRange())}return!0},V_=(e,n)=>e.selection.isCollapsed()?Of(e,n):D6(e,n),tD=e=>e.hasOwnProperty("text"),nD=e=>e.hasOwnProperty("marker"),oD=(e,n)=>{const o=(u,m)=>{if(bt(u))return{text:u,offset:m};{const y=n(),x=u.childNodes;return m<x.length?(u.insertBefore(y,x[m]),{marker:y,before:!0}):(u.appendChild(y),{marker:y,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},sD=e=>{var n,o;const{start:r,end:i}=e,u=new window.Range;return tD(r)?u.setStart(r.text,r.offset):nD(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),tD(i)?u.setEnd(i.text,i.offset):nD(i)&&(i.before?u.setEndBefore(i.marker):u.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),u},U_=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),m=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&u&&i===m.firstChild&&u===m.lastChild&&!r.isEmpty(m)){const x=i.cloneNode(!1),A=()=>{if(n?gr(e):LE(e),m.firstChild!==i){const L=oD(e.selection.getRng(),()=>document.createElement("span"));Array.from(m.childNodes).forEach($=>x.appendChild($)),m.appendChild(x),e.selection.setRng(sD(L))}};return W.some(A)}return W.none()},W_=(e,n)=>{const o=Qe.fromRangeStart(e.selection.getRng());return Wi(n,e.getBody(),o).filter(r=>n?rN(r):Y7(r)).bind(r=>kv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},TC=(e,n)=>e.selection.isCollapsed()?W_(e,n):W.none(),xy=bt,R6=e=>xy(e)&&e.data[0]===Da,M6=e=>xy(e)&&e.data[e.data.length-1]===Da,N6=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Da)},P6=e=>{var n;if(xy(e.previousSibling))return M6(e.previousSibling)||e.previousSibling.appendData(Da),e.previousSibling;if(xy(e))return R6(e)||e.insertData(0,Da),e;{const o=N6(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},_V=e=>{var n,o;if(xy(e.nextSibling))return R6(e.nextSibling)||e.nextSibling.insertData(0,Da),e.nextSibling;if(xy(e))return M6(e)||e.appendData(Da),e;{const r=N6(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Z_=(e,n)=>e?P6(n):_V(n),rD=Ae(Z_,!0),TV=Ae(Z_,!1),I6=(e,n)=>bt(e.container())?Z_(n,e.container()):Z_(n,e.getNode()),B6=(e,n)=>{const o=n.get();return o&&e.container()===o&&uf(o)},aD=(e,n)=>n.fold(o=>{Tp(e.get());const r=rD(o);return e.set(r),W.some(Qe(r,r.length-1))},o=>Zi(o).map(r=>{if(B6(r,e)){const i=e.get();return Qe(i,1)}else{Tp(e.get());const i=I6(r,!0);return e.set(i),Qe(i,1)}}),o=>Vu(o).map(r=>{if(B6(r,e)){const i=e.get();return Qe(i,i.length-1)}else{Tp(e.get());const i=I6(r,!1);return e.set(i),Qe(i,i.length-1)}}),o=>{Tp(e.get());const r=TV(o);return e.set(r),W.some(Qe(r,1))}),L6=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return W.none()},ul=au.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),F6=(e,n)=>{const o=mm(n,e);return o||e},j_=(e,n,o)=>{const r=SN(o),i=F6(n,r.container());return Ja(e,i,r).fold(()=>rc(i,r).bind(Ae(Ja,e,i)).map(u=>ul.before(u)),W.none)},iD=(e,n)=>ug(e,n)===null,$6=(e,n,o)=>Ja(e,n,o).filter(Ae(iD,n)),kV=(e,n,o)=>{const r=xN(o);return $6(e,n,r).bind(i=>fi(i,r).isNone()?W.some(ul.start(i)):W.none())},AV=(e,n,o)=>{const r=SN(o);return $6(e,n,r).bind(i=>rc(i,r).isNone()?W.some(ul.end(i)):W.none())},OV=(e,n,o)=>{const r=xN(o),i=F6(n,r.container());return Ja(e,i,r).fold(()=>fi(i,r).bind(Ae(Ja,e,i)).map(u=>ul.after(u)),W.none)},cD=e=>!K3(lD(e)),Ch=(e,n,o)=>L6([j_,kV,AV,OV],[e,n,o]).filter(cD),lD=e=>e.fold(xo,xo,xo,xo),q_=e=>e.fold(ft("before"),ft("start"),ft("end"),ft("after")),G_=e=>e.fold(ul.before,ul.before,ul.after,ul.after),uD=e=>e.fold(ul.start,ul.start,ul.end,ul.end),DV=(e,n)=>q_(e)===q_(n)&&lD(e)===lD(n),RV=(e,n,o,r,i,u)=>ur(Ja(n,o,r),Ja(n,o,i),(m,y)=>m!==y&&SH(o,m,y)?ul.after(e?m:y):u).getOr(u),MV=(e,n)=>e.fold(pt,o=>!DV(o,n)),NV=(e,n,o,r,i)=>{const u=Pd(e,i);return Wi(e,o,u).map(Ae(Pd,e)).fold(()=>r.map(G_),x=>Ch(n,o,x).map(Ae(RV,e,n,o,u,x)).filter(Ae(MV,r))).filter(cD)},PV=(e,n)=>e?n.fold(M(W.some,ul.start),W.none,M(W.some,ul.after),W.none):n.fold(W.none,M(W.some,ul.before),W.none,M(W.some,ul.end)),K_=(e,n,o,r)=>{const i=Pd(e,r),u=Ch(n,o,i);return Ch(n,o,i).bind(Ae(PV,e)).orThunk(()=>NV(e,n,o,u,r))},Y_=e=>ve(e.selection.getSel().modify),H6=(e,n,o)=>{const r=e?1:-1;return n.setRng(Qe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},IV=(e,n)=>{const o=n.selection.getRng(),r=e?Qe.fromRangeEnd(o):Qe.fromRangeStart(o);return Y_(n)?e&&gp(r)?H6(!0,n.selection,r):!e&&im(r)?H6(!1,n.selection,r):!1:!1};var zd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(zd||(zd={}));const X_=(e,n)=>e===Ka.Backwards?xs(n):n,BV=(e,n,o)=>e===Ka.Forwards?n.next(o):n.prev(o),LV=(e,n,o,r)=>qo(r.getNode(n===Ka.Forwards))?zd.Br:zu(o,r)===!1?zd.Block:zd.Wrap,z6=(e,n,o,r)=>{const i=sl(o);let u=r;const m=[];for(;u;){const y=BV(n,i,u);if(!y)break;if(qo(y.getNode(!1)))return n===Ka.Forwards?{positions:X_(n,m).concat([y]),breakType:zd.Br,breakAt:W.some(y)}:{positions:X_(n,m),breakType:zd.Br,breakAt:W.some(y)};if(!y.isVisible()){u=y;continue}if(e(u,y)){const x=LV(o,n,u,y);return{positions:X_(n,m),breakType:x,breakAt:W.some(y)}}m.push(y),u=y}return{positions:X_(n,m),breakType:zd.Eol,breakAt:W.none()}},V6=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===Ka.Backwards?u.concat(i):[i].concat(u)}).getOr([]),dD=(e,n)=>Fo(e,(o,r)=>o.fold(()=>W.some(r),i=>ur(lo(i.getClientRects()),lo(r.getClientRects()),(u,m)=>{const y=Math.abs(n-u.left);return Math.abs(n-m.left)<=y?r:i}).or(o)),W.none()),J_=(e,n)=>lo(n.getClientRects()).bind(o=>dD(e,o.left)),kC=Ae(z6,Qe.isAbove,-1),AC=Ae(z6,Qe.isBelow,1),U6=Ae(V6,-1,kC),W6=Ae(V6,1,AC),FV=(e,n)=>kC(e,n).breakAt.isNone(),Vd=(e,n)=>AC(e,n).breakAt.isNone(),fD=e=>Zi(e).map(n=>[n].concat(AC(e,n).positions)).getOr([]),Z6=e=>Vu(e).map(n=>kC(e,n).positions.concat(n)).getOr([]),j6=(e,n)=>J_(U6(e,n),n),$V=(e,n)=>J_(W6(e,n),n),q6=Uo,G6=(e,n)=>Math.abs(e.left-n),mD=(e,n)=>Math.abs(e.right-n),HV=e=>sr(e,"node"),K6=(e,n)=>pe(e,(o,r)=>{const i=Math.min(G6(o,n),mD(o,n)),u=Math.min(G6(r,n),mD(r,n));return u===i&&HV(r)&&q6(r.node)||u<i?r:o}),zV=e=>{const n=o=>dt(o,r=>{const i=rh(r);return i.node=e,i});if(Wt(e))return n(e.getClientRects());if(bt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Yb=e=>_s(e,zV);var Ey;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ey||(Ey={}));const Y6=(e,n,o,r)=>{let i=r;for(;i=gh(i,e,X0,n);)if(o(i))return},hD=(e,n,o,r,i,u)=>{let m=0;const y=[],x=$=>{let z=Yb([$]);e===-1&&(z=z.reverse());for(let X=0;X<z.length;X++){const se=z[X];if(!o(se,A)){if(y.length>0&&n(se,Ve(y))&&m++,se.line=m,i(se))return!0;y.push(se)}}return!1},A=Ve(u.getClientRects());if(!A)return y;const L=u.getNode();return L&&(x(L),Y6(e,r,x,L)),y},gD=(e,n)=>n.line>e,VV=(e,n)=>n.line===e,UV=Ae(hD,Ey.Up,js,K1),WV=Ae(hD,Ey.Down,K1,js),X6=e=>Ve(e.getClientRects()),UY=(e,n,o,r)=>{const i=sl(n);let u,m,y,x;const A=[];let L=0;e===1?(u=i.next,m=K1,y=js,x=Qe.after(r)):(u=i.prev,m=js,y=K1,x=Qe.before(r));const $=X6(x);do{if(!x.isVisible())continue;const z=X6(x);if(y(z,$))continue;A.length>0&&m(z,Ve(A))&&L++;const X=rh(z);if(X.position=x,X.line=L,o(X))return A;A.push(X)}while(x=u(x));return A},ZV=e=>n=>gD(e,n),J6=e=>n=>VV(e,n),uc=(e,n)=>{e.selection.setRng(n),Kv(e,e.selection.getRng())},pD=(e,n,o)=>W.some(qO(e,n,o)),Q6=(e,n,o,r,i,u)=>{const m=n===Ka.Forwards,y=sl(e.getBody()),x=Ae(lw,m?y.next:y.prev),A=m?r:i;if(!o.collapsed){const se=Z0(o);if(u(se))return lc(n,e,se,n===Ka.Backwards,!1);if(YO(e)){const te=o.cloneRange();return te.collapse(n===Ka.Backwards),W.from(te)}}const L=Mp(n,e.getBody(),o);if(A(L))return EC(e,L.getNode(!m));let $=x(L);const z=nr(o);if($)$=Pd(m,$);else return z?W.some(o):W.none();if(A($))return lc(n,e,$.getNode(!m),m,!1);const X=x($);return X&&A(X)&&Pp($,X)?lc(n,e,X.getNode(!m),m,!1):z?pD(e,$.toRange(),!1):W.none()},i1=(e,n,o,r,i,u)=>{const m=Mp(n,e.getBody(),o),y=Ve(m.getClientRects()),x=n===Ey.Down,A=e.getBody();if(!y)return W.none();if(YO(e)){const ie=x?Qe.fromRangeEnd(o):Qe.fromRangeStart(o);return(x?$V:j6)(A,ie).orThunk(()=>W.from(ie)).map(Re=>Re.toRange())}const $=(x?WV:UV)(A,ZV(1),m),z=Kt($,J6(1)),X=y.left,se=K6(z,X);if(se&&u(se.node)){const ie=Math.abs(X-se.left),Ee=Math.abs(X-se.right);return lc(n,e,se.node,ie<Ee,!1)}let te;if(r(m)?te=m.getNode():i(m)?te=m.getNode(!0):te=Z0(o),te){const ie=UY(n,A,ZV(1),te);let Ee=K6(Kt(ie,J6(1)),X);if(Ee||(Ee=Ve(Kt(ie,J6(0))),Ee))return pD(e,Ee.position.toRange(),!1)}return z.length===0?Q_(e,x).filter(x?i:r).map(ie=>qO(e,ie.toRange(),!1)):W.none()},Q_=(e,n)=>{const o=e.selection.getRng(),r=n?Qe.fromRangeEnd(o):Qe.fromRangeStart(o),i=Md(r.container(),e.getBody());if(n){const u=AC(i,r);return hs(u.positions)}else{const u=kC(i,r);return lo(u.positions)}},eB=(e,n,o)=>Q_(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Xb=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},tB=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},nB=(e,n,o)=>aD(n,o).map(r=>(Xb(e,r),o)),jV=(e,n,o)=>{const r=Qe.fromRangeStart(e);if(e.collapsed)return r;{const i=Qe.fromRangeEnd(e);return o?fi(n,i).getOr(i):rc(n,r).getOr(r)}},qV=(e,n,o)=>{const r=e.getBody(),i=jV(e.selection.getRng(),r,o),u=Ae(Gp,e);return K_(o,u,r,i).bind(y=>nB(e,n,y))},oB=(e,n,o)=>{const r=dt(Ua(be.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),i=Kt(r,e),u=Kt(o,e);xe(Gr(i,u),Ae(tB,!1)),xe(Gr(u,i),Ae(tB,!0))},GV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Qe.fromRangeStart(e.selection.getRng());Qe.isTextPosition(r)&&!xH(r)&&(Xb(e,iM(o,r)),n.set(null))}},Og=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Kt(r,e);xe(i,u=>{const m=Qe.fromRangeStart(n.selection.getRng());Ch(e,n.getBody(),m).bind(y=>nB(n,o,y))})}},eT=(e,n,o)=>rg(e)?qV(e,n,o).isSome():!1,sB=(e,n,o)=>rg(n)?IV(e,n):!1,KV=e=>{const n=$s(null),o=Ae(Gp,e);return e.on("NodeChange",r=>{rg(e)&&(oB(o,e.dom,r.parents),GV(e,n),Og(o,e,n,r.parents))}),n},YV=Ae(sB,!0),XV=Ae(sB,!1),tT=(e,n,o)=>{if(rg(e)){const r=Q_(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Qe.fromRangeEnd(i):Qe.fromRangeStart(i)});return Ch(Ae(Gp,e),e.getBody(),r).exists(i=>{const u=G_(i);return aD(o,u).exists(m=>(Xb(e,m),!0))})}else return!1},bD=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},vD=e=>ur(Zi(e),Vu(e),(n,o)=>{const r=Pd(!0,n),i=Pd(!1,o);return rc(e,r).forall(u=>u.isEqual(i))}).getOr(!0),nT=(e,n)=>o=>aD(n,o).map(r=>()=>Xb(e,r)),yD=(e,n,o,r)=>{const i=e.getBody(),u=Ae(Gp,e);e.undoManager.ignore(()=>{e.selection.setRng(bD(o,r)),LE(e),Ch(u,i,Qe.fromRangeStart(e.selection.getRng())).map(uD).bind(nT(e,n)).each(io)}),e.nodeChanged()},rB=(e,n)=>{const o=mm(n,e);return o||e},aB=(e,n,o,r)=>{const i=rB(e.getBody(),r.container()),u=Ae(Gp,e),m=Ch(u,i,r);return m.bind(x=>o?x.fold(ft(W.some(uD(x))),W.none,ft(W.some(G_(x))),W.none):x.fold(W.none,ft(W.some(G_(x))),W.none,ft(W.some(uD(x))))).map(nT(e,n)).getOrThunk(()=>{const x=cg(o,i,r),A=x.bind(L=>Ch(u,i,L));return ur(m,A,()=>Ja(u,i,r).bind(L=>vD(L)?W.some(()=>{Nb(e,o,be.fromDom(L))}):W.none())).getOrThunk(()=>A.bind(()=>x.map(L=>()=>{o?yD(e,n,r,L):yD(e,n,L,r)})))})},wD=(e,n,o)=>{if(e.selection.isCollapsed()&&rg(e)){const r=Qe.fromRangeStart(e.selection.getRng());return aB(e,n,o,r)}return W.none()},OC=e=>ku(e)>1,DC=(e,n)=>{const o=be.fromDom(e.getBody()),r=be.fromDom(e.selection.getStart()),i=Cg(r,o);return Ws(i,n).fold(ft(i),u=>i.slice(0,u))},iB=e=>ku(e)===1,cB=e=>DC(e,n=>e.schema.isBlock(oo(n))||OC(n)),lB=e=>DC(e,n=>e.schema.isBlock(oo(n))),CD=(e,n)=>{const o=Ae(kA,e);return _s(n,r=>o(r)?[r.dom]:[])},RC=e=>{const n=lB(e);return CD(e,n)},SD=(e,n,o,r)=>{const i=CD(n,r);if(i.length===0)Nb(n,e,o);else{const u=i_(o.dom,i);n.selection.setRng(u.toRange())}},MC=(e,n)=>{const o=Kt(cB(e),iB);return hs(o).bind(r=>{const i=Qe.fromRangeStart(e.selection.getRng());return qu(n,i,r.dom)&&!bm(r)?W.some(()=>SD(n,e,r,o)):W.none()})},JV=(e,n)=>{const o=n.parentElement;return qo(n)&&!oe(o)&&e.dom.isEmpty(o)},uB=e=>bm(be.fromDom(e)),dB=(e,n)=>{const o=e.selection.getStart(),r=JV(e,o)||uB(o)?i_(o,n):tP(e.selection.getRng(),n);e.selection.setRng(r.toRange())},QV=(e,n)=>{const o=Gr(n,RC(e));o.length>0&&dB(e,o)},xD=e=>bt(e.startContainer),eU=e=>e.startOffset===0&&xD(e),fB=(e,n)=>{const o=n.startContainer.parentElement;return!oe(o)&&kA(e,be.fromDom(o))},WY=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!oe(n)&&!oe(o)&&n.isEqualNode(o)},tU=e=>{const n=e.endContainer;return e.endOffset===(bt(n)?n.length:n.childNodes.length)},nU=e=>WY(e)&&tU(e),oU=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),sU=e=>nU(e)||oU(e),rU=e=>{const n=e.selection.getRng();return eU(n)&&fB(e,n)&&sU(n)},aU=e=>{if(rU(e)){const n=RC(e);return W.some(()=>{LE(e),QV(e,n)})}else return W.none()},ED=(e,n)=>e.selection.isCollapsed()?MC(e,n):aU(e),iU=(e,n)=>Zg(e,o=>_l(o.dom),o=>n.isBlock(oo(o))),mB=e=>iU(be.fromDom(e.selection.getStart()),e.schema),cU=e=>{const n=e.selection.getRng();return n.collapsed&&(xD(n)||e.dom.isEmpty(n.startContainer))&&!mB(e)},Df=e=>(cU(e)&&dB(e,[]),!0),oT=(e,n,o)=>Fe(o)?W.some(()=>{e._selectionOverrides.hideFakeCaret(),Nb(e,n,be.fromDom(o))}):W.none(),_D=(e,n)=>{const o=n?Rb:Pw,r=n?Ka.Forwards:Ka.Backwards,i=Mp(r,e.getBody(),e.selection.getRng());return o(i)?oT(e,n,i.getNode(!n)):W.from(Pd(n,i)).filter(u=>o(u)&&Pp(i,u)).bind(u=>oT(e,n,u.getNode(!n)))},hB=(e,n)=>{const o=e.selection.getNode();return ya(o)?oT(e,n,o):W.none()},NC=(e,n)=>e.selection.isCollapsed()?_D(e,n):hB(e,n),c1=e=>Js(e,n=>rt(n.dom)||Uo(n.dom)).exists(n=>rt(n.dom)),sT=e=>gc(e??"").getOr(0),Xu=(e,n)=>{const o=e||e4(n)?"margin":"padding",r=vr(n,"direction")==="rtl"?"-right":"-left";return o+r},Jb=(e,n,o,r,i,u)=>{const m=Xu(o,be.fromDom(u)),y=sT(e.getStyle(u,m));if(n==="outdent"){const x=Math.max(0,y-r);e.setStyle(u,m,x?x+i:"")}else{const x=y+r+i;e.setStyle(u,m,x)}},TD=(e,n)=>Ss(n,o=>{const r=Xu(nb(e),o),i=Hi(o,r).map(sT).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),gB=e=>{const n=pB(e);return!e.mode.isReadOnly()&&(n.length>1||TD(e,n))},kD=e=>g2(e)||nh(e),lU=e=>za(e).exists(kD),pB=e=>Kt(Ru(e.selection.getSelectedBlocks()),n=>!kD(n)&&!lU(n)&&c1(n)),bB=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:i}=e,u=k4(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",y=sT(u),x=nb(e);xe(pB(e),A=>{Jb(i,n,x,y,m,A.dom)})},uU=e=>bB(e,"indent"),vB=e=>bB(e,"outdent"),AD=e=>{if(e.selection.isCollapsed()&&gB(e)){const n=e.dom,o=e.selection.getRng(),r=Qe.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&cN(be.fromDom(i),r,e.schema))return W.some(()=>vB(e))}return W.none()},yB=(e,n,o)=>Li([AD,V_,GO,(r,i)=>wD(r,n,i),$_,XE,TC,NC,wh,ED,U_],r=>r(e,o)).filter(r=>e.selection.isEditable()),dU=(e,n)=>{yB(e,n,!1).fold(()=>{e.selection.isEditable()&&(LE(e),Yp(e))},io)},_y=(e,n)=>{yB(e,n,!0).fold(()=>{e.selection.isEditable()&&gr(e)},io)},rT=(e,n)=>{e.addCommand("delete",()=>{dU(e,n)}),e.addCommand("forwardDelete",()=>{_y(e,n)})},OD=5,wB=400,aT=e=>e.touches===void 0||e.touches.length!==1?W.none():W.some(e.touches[0]),fU=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>OD||r>OD},mU=e=>{const n=Aa(),o=$s(!1),r=qh(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},wB);e.on("touchstart",i=>{aT(i).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(m)})},!0),e.on("touchmove",i=>{r.cancel(),aT(i).each(u=>{n.on(m=>{fU(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},DD=(e,n)=>En(e,n.nodeName),hU=(e,n)=>bt(n)?!0:Wt(n)?!DD(e.getBlockElements(),n)&&!Hc(n)&&!Iu(e,n)&&!M1(n):!1,gU=(e,n,o)=>_t(X7(be.fromDom(o),be.fromDom(n)),r=>DD(e,r.dom)),pU=(e,n)=>{if(bt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||DD(e,n.nextSibling)||M1(n.nextSibling)}return!1},RD=e=>e.dom.create(Ga(e),hf(e)),CB=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),m=e.getBody();let y,x,A=null;const L=Ga(e);if(!u||!Wt(u))return;const $=m.nodeName.toLowerCase();if(!r.isValidChild($,L.toLowerCase())||gU(i,m,u))return;if(m.firstChild===m.lastChild&&qo(m.firstChild)){y=RD(e),y.appendChild(Dd().dom),m.replaceChild(y,m.firstChild),e.selection.setCursorLocation(y,0),e.nodeChanged();return}let z=m.firstChild;for(;z;)if(Wt(z)&&Sc(r,z),hU(r,z)){if(pU(i,z)){x=z,z=z.nextSibling,n.remove(x);continue}if(!y){if(!A&&e.hasFocus()&&(A=oD(e.selection.getRng(),()=>document.createElement("span"))),!z.parentNode){z=null;break}y=RD(e),m.insertBefore(y,z)}x=z,z=z.nextSibling,y.appendChild(x)}else y=null,z=z.nextSibling;A&&(e.selection.setRng(sD(A)),e.nodeChanged())},SB=(e,n,o)=>{const r=be.fromDom(RD(e)),i=Dd();Ls(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},bU=e=>{e.on("NodeChange",()=>CB(e))},fu=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,vU=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const y=n.lastIndexOf("<",u);if(y!==-1&&n.substring(y,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},MD=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],vU(e,i,J2(e)));o.content=i}},xB=(e,n)=>Ss(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),ND=e=>{const n="contenteditable",o=" "+ut.trim(Cv(e))+" ",r=" "+ut.trim(J2(e))+" ",i=fu(o),u=fu(r),m=$4(e);m.length>0&&e.on("BeforeSetContent",y=>{MD(e,m,y)}),e.parser.addAttributeFilter("class",y=>{let x=y.length;for(;x--;){const A=y[x];i(A)?A.attr(n,"true"):u(A)&&A.attr(n,"false")}}),e.serializer.addAttributeFilter(n,y=>{let x=y.length;for(;x--;){const A=y[x];if(!i(A)&&!u(A))continue;const L=A.attr("data-mce-content");m.length>0&&L?xB(m,L)?(A.name="#text",A.type=3,A.raw=!0,A.value=L):A.remove():A.attr(n,null)}})},yU=e=>Qr(be.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),EB=(e,n)=>{n.hasAttribute("data-mce-caret")&&(pp(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},_B=(e,n)=>{const o=yU(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),EB(e,o);return}VS(o)&&(EB(e,o),e.undoManager.add())}},wU=e=>{e.on("keyup compositionstart",Ae(_B,e))},TB=Uo,CU=(e,n,o)=>Q6(n,e,o,jp,qp,TB),kB=(e,n,o)=>i1(n,e,o,u=>jp(u)||aN(u),u=>qp(u)||B3(u),TB),SU=e=>{const n=e.dom.create(Ga(e));return n.innerHTML='<br data-mce-bogus="1">',n},AB=(e,n,o)=>{const r=sl(e.getBody()),i=Ae(lw,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(Qe.fromRangeStart(o))){const y=be.fromDom(SU(e));n===1?yc(be.fromDom(u),y):ui(be.fromDom(u),y),e.selection.select(y.dom,!0),e.selection.collapse()}}},PC=(e,n)=>{const o=n?Ka.Forwards:Ka.Backwards,r=e.selection.getRng();return CU(o,e,r).orThunk(()=>(AB(e,o,r),W.none()))},Dg=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return kB(o,e,r).orThunk(()=>(AB(e,o,r),W.none()))},Qb=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return K3(o)?!n:n},IC=(e,n)=>PC(e,Qb(e.selection,n)).exists(o=>(uc(e,o),!0)),iT=(e,n)=>Dg(e,n).exists(o=>(uc(e,o),!0)),cT=(e,n)=>eB(e,n,n?qp:jp),BC=(e,n)=>KO(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(uc(e,o),!0)),xU=e=>et(["figcaption"],oo(e)),OB=(e,n,o)=>{const r=Ae(No,n);return Js(be.fromDom(e.container()),i=>o.isBlock(oo(i)),r).filter(xU)},DB=(e,n,o)=>n?Vd(e.dom,o):FV(e.dom,o),EU=(e,n)=>{const o=be.fromDom(e.getBody()),r=Qe.fromRangeStart(e.selection.getRng());return OB(r,o,e.schema).exists(()=>{if(DB(o,n,r)){const u=SB(e,o,n?Ls:Zm);return e.selection.setRng(u),!0}else return!1})},RB=(e,n)=>e.selection.isCollapsed()?EU(e,n):!1,_U=(e,n,o)=>{const r=e.selection.getRng(),i=Qe.fromRangeStart(r);return e.getBody().firstChild===n&&FV(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},TU=(e,n)=>{const o=e.selection.getRng(),r=Qe.fromRangeStart(o);return e.getBody().lastChild===n&&Vd(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},kU=(e,n)=>n?W.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>TU(e,o)).getOr(!1):W.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>W.from(e.dom.getParent(o,"details")).map(r=>_U(e,r,o))).getOr(!1),MB=(e,n)=>kU(e,n),PD={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},NB=e=>dt(e,n=>({...PD,...n})),ZY=e=>dt(e,n=>({...PD,...n})),AU=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,jY=(e,n)=>_s(NB(e),o=>AU(o,n)?[o]:[]),OU=(e,n)=>_s(ZY(e),o=>AU(o,n)?[o]:[]),qn=(e,...n)=>()=>e.apply(null,n),lT=(e,n)=>Vo(jY(e,n),o=>o.action()),PB=(e,n)=>Li(OU(e,n),o=>o.action()),IB=(e,n)=>{const o=n?Ka.Forwards:Ka.Backwards,r=e.selection.getRng();return Q6(e,o,r,Rb,Pw,ya).exists(i=>(uc(e,i),!0))},DU=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return i1(e,o,r,Rb,Pw,ya).exists(i=>(uc(e,i),!0))},BB=(e,n)=>eB(e,n,n?Pw:Rb),dl=au.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Rg={...dl,none:e=>dl.none(e)},MU=(e,n)=>ID(e,n,pt),ID=(e,n,o)=>_s(va(e),r=>xi(r,n)?o(r)?[r]:[]:ID(r,n,o)),LB=(e,n,o=$e)=>{if(o(n))return W.none();if(et(e,oo(n)))return W.some(n);const r=i=>xi(i,"table")||o(i);return Xd(n,e.join(","),r)},FB=(e,n)=>LB(["td","th"],e,n),BD=e=>MU(e,"th,td"),LD=(e,n)=>gn(e,"table",n),FD=(e,n,o,r,i=pt)=>{const u=r===1;if(!u&&o<=0)return Rg.first(e[0]);if(u&&o>=e.length-1)return Rg.last(e[e.length-1]);{const m=o+r,y=e[m];return i(y)?Rg.middle(n,y):FD(e,n,m,r,i)}},$D=(e,n)=>LD(e,n).bind(o=>{const r=BD(o);return Ws(r,u=>No(e,u)).map(u=>({index:u,all:r}))}),NU=(e,n,o)=>$D(e,o).fold(()=>Rg.none(e),i=>FD(i.all,e,i.index,1,n)),PU=(e,n,o)=>$D(e,o).fold(()=>Rg.none(),i=>FD(i.all,e,i.index,-1,n)),IU=e=>mp(e).filter(n=>n.trim().length!==0||n.indexOf(ea)>-1).isSome(),HD=e=>Lm(e)&&li(e,"contenteditable")==="false",BU=["img","br"],LU=e=>IU(e)||et(BU,oo(e))||HD(e),qY=e=>Kf(e,LU),FU=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),$B=(e,n)=>_s(n,o=>{const r=FU(rh(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),GY=(e,n,o)=>Fo(e,(r,i)=>r.fold(()=>W.some(i),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),y=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return W.some(y<m?i:u)}),W.none()),HB=(e,n,o,r,i)=>{const u=Ua(be.fromDom(o),"td,th,caption").map(y=>y.dom),m=Kt($B(e,u),y=>n(y,i));return GY(m,r,i).map(y=>y.cell)},$U=e=>e.bottom,HU=e=>e.top,zD=(e,n)=>e.y<n,uT=(e,n)=>e.y>n,zB=Ae(HB,$U,zD),VB=Ae(HB,HU,uT),zU=(e,n)=>lo(n.getClientRects()).bind(o=>zB(e,o.left,o.top)).bind(o=>J_(Z6(o),n)),VU=(e,n)=>hs(n.getClientRects()).bind(o=>VB(e,o.left,o.top)).bind(o=>J_(fD(o),n)),VD=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),UU=e=>e.breakType===zd.Wrap&&e.positions.length===0,WU=e=>e.breakType===zd.Br&&e.positions.length===1,UB=(e,n,o)=>{const r=e(n,o);return UU(r)||!qo(o.getNode())&&WU(r)?!VD(e,n,r):r.breakAt.isNone()},ZU=Ae(UB,kC),Rf=Ae(UB,AC),WB=(e,n,o)=>{const r=Qe.fromRangeStart(n);return lg(!e,o).exists(i=>i.isEqual(r))},ZB=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return rw()&&WB(n,i,o)?(lc(u,e,o,!n,!1).each(m=>{uc(e,m)}),!0):!1},KY=(e,n,o)=>zU(n,o).orThunk(()=>lo(o.getClientRects()).bind(r=>dD(U6(e,Qe.before(n)),r.left))).getOr(Qe.before(n)),YY=(e,n,o)=>VU(n,o).orThunk(()=>lo(o.getClientRects()).bind(r=>dD(W6(e,Qe.after(n)),r.left))).getOr(Qe.after(n)),jU=(e,n)=>{const o=n.getNode(e);return Xl(o)?W.some(o):W.none()},XY=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?yc:ui,i=SB(n,be.fromDom(o),r);uc(n,i)})},jB=(e,n,o)=>{const r=jU(!!n,o),i=n===!1;r.fold(()=>uc(e,o.toRange()),u=>lg(i,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>uc(e,o.toRange()),m=>XY(n,e,u)))},dT=(e,n,o,r)=>{const i=e.selection.getRng(),u=Qe.fromRangeStart(i),m=e.getBody();if(!n&&ZU(r,u)){const y=KY(m,o,u);return jB(e,n,y),!0}else if(n&&Rf(r,u)){const y=YY(m,o,u);return jB(e,n,y),!0}else return!1},qB=(e,n,o)=>W.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>W.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),fT=(e,n)=>qB(e,n,ZB),mT=(e,n)=>qB(e,n,dT),GB=e=>{const n=kb.exact(e,0,e,0);return E7(n)},UD=(e,n,o)=>o.fold(W.none,W.none,(r,i)=>qY(i).map(u=>GB(u)),r=>e.mode.isReadOnly()?W.none():(e.execCommand("mceTableInsertRowAfter"),KB(e,n,r))),KB=(e,n,o)=>UD(e,n,NU(o,Au)),qU=(e,n,o)=>UD(e,n,PU(o,Au)),YB=(e,n)=>{const o=["table","li","dl"],r=be.fromDom(e.getBody()),i=y=>{const x=oo(y);return No(y,r)||et(o,x)},u=e.selection.getRng(),m=be.fromDom(n?u.endContainer:u.startContainer);return FB(m,i).map(y=>(LD(y,i).each(L=>{e.model.table.clearSelectedCells(L.dom)}),e.selection.collapse(!n),(n?KB:qU)(e,i,y).each(L=>{e.selection.setRng(L)}),!0)).getOr(!1)},GU=(e,n,o)=>{const r=Nn.os.isMacOS()||Nn.os.isiOS();lT([{keyCode:Ht.RIGHT,action:qn(IC,e,!0)},{keyCode:Ht.LEFT,action:qn(IC,e,!1)},{keyCode:Ht.UP,action:qn(iT,e,!1)},{keyCode:Ht.DOWN,action:qn(iT,e,!0)},...r?[{keyCode:Ht.UP,action:qn(BC,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ht.DOWN,action:qn(BC,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ht.RIGHT,action:qn(fT,e,!0)},{keyCode:Ht.LEFT,action:qn(fT,e,!1)},{keyCode:Ht.UP,action:qn(mT,e,!1)},{keyCode:Ht.DOWN,action:qn(mT,e,!0)},{keyCode:Ht.UP,action:qn(mT,e,!1)},{keyCode:Ht.UP,action:qn(MB,e,!1)},{keyCode:Ht.DOWN,action:qn(MB,e,!0)},{keyCode:Ht.RIGHT,action:qn(IB,e,!0)},{keyCode:Ht.LEFT,action:qn(IB,e,!1)},{keyCode:Ht.UP,action:qn(DU,e,!1)},{keyCode:Ht.DOWN,action:qn(DU,e,!0)},{keyCode:Ht.RIGHT,action:qn(eT,e,n,!0)},{keyCode:Ht.LEFT,action:qn(eT,e,n,!1)},{keyCode:Ht.RIGHT,ctrlKey:!r,altKey:r,action:qn(YV,e,n)},{keyCode:Ht.LEFT,ctrlKey:!r,altKey:r,action:qn(XV,e,n)},{keyCode:Ht.UP,action:qn(RB,e,!1)},{keyCode:Ht.DOWN,action:qn(RB,e,!0)}],o).each(i=>{o.preventDefault()})},hT=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||GU(e,n,o)})},Am=(e,n)=>({container:e,offset:n}),gT=Vs.DOM,pT=e=>n=>e===n?-1:0,WD=e=>n=>e.isBlock(n)||et(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",ZD=(e,n,o)=>{if(bt(e)&&n>=0)return W.some(Am(e,n));{const r=Xh(gT);return W.from(r.backwards(e,n,pT(e),o)).map(i=>Am(i.container,i.container.data.length))}},KU=(e,n,o)=>{if(bt(e)&&n>=e.length)return W.some(Am(e,n));{const r=Xh(gT);return W.from(r.forwards(e,n,pT(e),o)).map(i=>Am(i.container,0))}},bT=(e,n,o)=>{if(!bt(e))return W.none();const r=e.data;if(n>=0&&n<=r.length)return W.some(Am(e,n));{const i=Xh(gT);return W.from(i.backwards(e,n,pT(e),o)).bind(u=>{const m=u.container.data;return bT(u.container,n+m.length,o)})}},XB=(e,n,o)=>{if(!bt(e))return W.none();const r=e.data;if(n<=r.length)return W.some(Am(e,n));{const i=Xh(gT);return W.from(i.forwards(e,n,pT(e),o)).bind(u=>XB(u.container,n-r.length,o))}},jD=(e,n,o,r,i)=>{const u=Xh(e,WD(e));return W.from(u.backwards(n,o,r,i))},YU=e=>e.collapsed&&bt(e.startContainer),XU=e=>Ec(e.toString().replace(/\u00A0/g," ")),JB=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,JU=(e,n)=>e.substring(n.length),qD=(e,n,o,r=!1)=>{let i;const u=o.charAt(0);for(i=n-1;i>=0;i--){const m=e.charAt(i);if(!r&&JB(m))return W.none();if(u===m&&ns(e,o,i,n))break}return W.some(i)},GD=(e,n,o,r=!1)=>{if(!YU(n))return W.none();const i={text:"",offset:0},u=(y,x,A)=>(i.text=A+i.text,i.offset+=x,qD(i.text,i.offset,o,r).getOr(x)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return jD(e,n.startContainer,n.startOffset,u,m).bind(y=>{const x=n.cloneRange();if(x.setStart(y.container,y.offset),x.setEnd(n.endContainer,n.endOffset),x.collapsed)return W.none();const A=XU(x);return A.lastIndexOf(o)!==0?W.none():W.some({text:JU(A,o),range:x,trigger:o})})},QB=e=>e.nodeType===Bm,QU=e=>e.nodeType===Cu,eL=e=>{if(QB(e))return Am(e,e.data.length);{const n=e.childNodes;return n.length>0?eL(n[n.length-1]):Am(e,n.length)}},tL=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?tL(o[n],0):o.length>0&&QU(e)&&o.length===n?eL(o[o.length-1]):Am(e,n)},eW=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return jD(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!JB(u)}).isSome()},tW=e=>n=>{const o=tL(n.startContainer,n.startOffset);return!eW(e,o)},nW=(e,n,o)=>Li(o.triggers,r=>GD(e,n,r)),ei=(e,n)=>{const o=n(),r=e.selection.getRng();return nW(e.dom,r,o).bind(i=>nL(e,n,i))},nL=(e,n,o,r={})=>{var i;const u=n(),y=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",x=Kt(u.lookupByTrigger(o.trigger),L=>o.text.length>=L.minChars&&L.matches.getOrThunk(()=>tW(e.dom))(o.range,y,o.text));if(x.length===0)return W.none();const A=Promise.all(dt(x,L=>L.fetch(o.text,L.maxResults,r).then(z=>({matchText:o.text,items:z,columns:L.columns,onAction:L.onAction,highlightOn:L.highlightOn}))));return W.some({lookupData:A,context:o})};var Ud;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Ud||(Ud={}));const KD=(e,n,o)=>e.stype===Ud.Error?n(e.serror):o(e.svalue),oL=e=>{const n=[],o=[];return xe(e,r=>{KD(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},YD=(e,n)=>e.stype===Ud.Error?{stype:Ud.Error,serror:n(e.serror)}:e,sL=(e,n)=>e.stype===Ud.Value?{stype:Ud.Value,svalue:n(e.svalue)}:e,l1=(e,n)=>e.stype===Ud.Value?n(e.svalue):e,XD=(e,n)=>e.stype===Ud.Error?n(e.serror):e,JD=e=>({stype:Ud.Value,svalue:e}),vT=e=>({stype:Ud.Error,serror:e}),ji={fromResult:e=>e.fold(vT,JD),toResult:e=>KD(e,da.error,da.value),svalue:JD,partition:oL,serror:vT,bind:l1,bindError:XD,map:sL,mapError:YD,fold:KD},Ty=e=>Je(e)&&ts(e).length>100?" removed due to size":JSON.stringify(e,null,2),yT=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ft("... (only showing first ten failures)")}]):e;return dt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},u1=(e,n)=>ji.serror([{path:e,getErrorInfo:n}]),LC=(e,n,o)=>u1(e,()=>'Could not find valid *required* value for "'+n+'" in '+Ty(o)),Mf=(e,n)=>u1(e,()=>'Choice schema did not contain choice key: "'+n+'"'),FC=(e,n,o)=>u1(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Ty(n)),iL=(e,n)=>u1(e,ft(n)),cL=(e,n,o,r)=>Yo(o,r).fold(()=>FC(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),oW=(e,n)=>({extract:(i,u)=>Yo(u,e).fold(()=>Mf(i,e),y=>cL(i,u,n,y)),toString:()=>"chooseOn("+e+"). Possible values: "+ts(n)}),lL=(e,n)=>n,sW=(e,n)=>Dn(e)&&Dn(n)?d1(e,n):n,uL=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)En(i,u)&&(o[u]=e(o[u],i[u]))}return o},d1=uL(sW),dL=uL(lL),QD=()=>({tag:"required",process:{}}),rW=e=>({tag:"defaultedThunk",process:e}),fL=e=>rW(ft(e)),aW=()=>({tag:"option",process:{}}),iW=(e,n)=>e.length>0?ji.svalue(d1(n,dL.apply(void 0,e))):ji.svalue(n),mL=e=>M(ji.serror,oi)(e),hL={consolidateObj:(e,n)=>{const o=ji.partition(e);return o.errors.length>0?mL(o.errors):iW(o.values,n)},consolidateArr:e=>{const n=ji.partition(e);return n.errors.length>0?mL(n.errors):ji.svalue(n.values)}},cW=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),lW=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),gL=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},eR=e=>{const n=(r,i)=>ji.bindError(e(i),u=>iL(r,u)),o=ft("val");return{extract:n,toString:o}},pL=eR(ji.svalue),bL=(e,n,o,r)=>Yo(n,o).fold(()=>LC(e,o,n),r),tR=(e,n,o,r)=>{const i=Yo(e,n).getOrThunk(()=>o(e));return r(i)},uW=(e,n,o)=>o(Yo(e,n)),dW=(e,n,o,r)=>{const i=Yo(e,n).map(u=>u===!0?o(e):u);return r(i)},fW=(e,n,o,r,i)=>{const u=y=>i.extract(n.concat([r]),y),m=y=>y.fold(()=>ji.svalue(W.none()),x=>{const A=i.extract(n.concat([r]),x);return ji.map(A,W.some)});switch(e.tag){case"required":return bL(n,o,r,u);case"defaultedThunk":return tR(o,r,e.process,u);case"option":return uW(o,r,m);case"defaultedOptionThunk":return dW(o,r,e.process,m);case"mergeWithThunk":return tR(o,r,ft({}),y=>{const x=d1(e.process(o),y);return u(x)})}},mW=(e,n,o)=>{const r={},i=[];for(const u of o)gL(u,(m,y,x,A)=>{const L=fW(x,e,n,m,A);ji.fold(L,$=>{i.push(...$)},$=>{r[y]=$})},(m,y)=>{r[m]=y(n)});return i.length>0?ji.serror(i):ji.svalue(r)},$C=e=>({extract:(r,i)=>mW(r,i,e),toString:()=>`obj{
`+dt(e,i=>gL(i,(u,m,y,x)=>u+" -> "+x.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),nR=e=>({extract:(r,i)=>{const u=dt(i,(m,y)=>e.extract(r.concat(["["+y+"]"]),m));return hL.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),vL=(e,n)=>{const o=xo;return{extract:(u,m)=>{const y=[];for(const x of e){const A=x.extract(u,m);if(A.stype===Ud.Value)return{stype:Ud.Value,svalue:o(A.svalue)};y.push(A)}return hL.consolidateArr(y)},toString:()=>"oneOf("+dt(e,u=>u.toString()).join(", ")+")"}},hW=M(nR,$C),yL=e=>eR(n=>e(n).fold(ji.serror,ji.svalue)),wL=(e,n,o)=>{const r=n.extract([e],o);return ji.mapError(r,i=>({input:o,errors:i}))},gW=(e,n,o)=>ji.toResult(wL(e,n,o)),pW=e=>`Errors: 
`+yT(e.errors).join(`
`)+`

Input object: `+Ty(e.input),oR=(e,n)=>oW(e,go(n,$C)),bW=ft(pL),HC=(e,n)=>eR(o=>{const r=typeof o;return e(o)?ji.svalue(o):ji.serror(`Expected type: ${n} but got: ${r}`)}),vW=HC(so,"number"),ky=HC(ce,"string"),CL=HC(Xt,"boolean"),sR=HC(ve,"function"),Ay=cW,rR=lW,SL=e=>yL(n=>et(e,n)?da.value(n):da.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),aR=(e,n)=>Ay(e,e,QD(),n),xL=e=>aR(e,ky),wT=(e,n)=>Ay(e,e,QD(),SL(n)),iR=e=>aR(e,sR),EL=(e,n)=>Ay(e,e,QD(),nR(n)),cR=(e,n)=>Ay(e,e,aW(),n),e0=e=>cR(e,ky),yW=e=>cR(e,sR),wW=(e,n)=>Ay(e,e,fL(n),bW()),Oy=(e,n,o)=>Ay(e,e,fL(n),o),_L=(e,n)=>Oy(e,n,vW),CT=(e,n)=>Oy(e,n,ky),CW=(e,n,o)=>Oy(e,n,SL(o)),lR=(e,n)=>Oy(e,n,CL),Nf=(e,n)=>Oy(e,n,sR),TL=(e,n,o)=>Oy(e,n,nR(o)),kL=xL("type"),SW=iR("fetch"),ST=iR("onAction"),AL=Nf("onSetup",()=>it),xW=e0("text"),EW=e0("icon"),_W=e0("tooltip"),OL=e0("label"),TW=lR("active",!1),uR=lR("enabled",!0),DL=lR("primary",!1),kW=e=>wW("columns",e),zC=e=>CT("type",e),RL=$C([kL,xL("trigger"),_L("minChars",1),kW(1),_L("maxResults",10),yW("matches"),SW,ST,TL("highlightOn",[],ky)]),AW=e=>gW("Autocompleter",RL,e),dR=[uR,_W,EW,xW,AL,CT("context","mode:design")],ML=[TW].concat(dR),xT=[Nf("predicate",$e),CW("scope","node",["node","editor"]),CW("position","selection",["node","selection","line"])],OW=dR.concat([zC("contextformbutton"),CT("align","end"),DL,ST,rR("original",xo)]),mi=ML.concat([zC("contextformbutton"),CT("align","end"),DL,ST,rR("original",xo)]),Sh=dR.concat([zC("contextformbutton")]),DW=ML.concat([zC("contextformtogglebutton")]),eX=oR("type",{contextformbutton:OW,contextformtogglebutton:mi}),fR=[OL,EL("commands",eX),cR("launch",oR("type",{contextformbutton:Sh,contextformtogglebutton:DW})),Nf("onInput",it),Nf("onSetup",it)],RW=[...xT,...fR,wT("type",["contextform"]),Nf("initValue",ft("")),e0("placeholder")],MW=[...xT,...fR,wT("type",["contextsliderform"]),Nf("initValue",ft(0)),Nf("min",ft(0)),Nf("max",ft(100))],NW=[...xT,...fR,wT("type",["contextsizeinputform"]),Nf("initValue",ft({width:"",height:""}))];oR("type",{contextform:RW,contextsliderform:MW,contextsizeinputform:NW}),$C([zC("contexttoolbar"),aR("items",vL([ky,hW([e0("name"),e0("label"),EL("items",ky)])]))].concat(xT));const NL=e=>{const n=e.ui.registry.getAll().popups,o=go(n,m=>AW(m).fold(y=>{throw new Error(pW(y))},xo)),r=fl(Fa(o,m=>m.trigger)),i=Fi(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Kt(i,y=>y.trigger===m)}},Dy=(e,n)=>{const o=qh(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},tX=e=>{const n=Aa(),o=$s(!1),r=n.isSet,i=()=>{r()&&(Ca(e),o.set(!1),n.clear())},u=$=>{r()||n.set({trigger:$.trigger,matchLength:$.text.length})},m=Ge(()=>NL(e)),y=$=>n.get().map(z=>GD(e.dom,e.selection.getRng(),z.trigger,!0).bind(X=>nL(e,m,X,$))).getOrThunk(()=>ei(e,m)),x=$=>{y($).fold(i,z=>{u(z.context),z.lookupData.then(X=>{n.get().map(se=>{const te=z.context;se.trigger===te.trigger&&(n.set({...se,matchLength:te.text.length}),o.get()?(M2(e,{range:te.range}),_4(e,{lookupData:X})):(o.set(!0),M2(e,{range:te.range}),lh(e,{lookupData:X})))})})})},A=($,z)=>{const X=$.compareBoundaryPoints(window.Range.START_TO_START,z),se=$.compareBoundaryPoints(window.Range.END_TO_END,z);return X>=0&&se<=0},L=()=>n.get().bind(({trigger:$})=>{const z=e.selection.getRng();return GD(e.dom,z,$,o.get()).filter(({range:X})=>A(z,X)).map(({range:X})=>X)});e.addCommand("mceAutocompleterReload",($,z)=>{const X=Je(z)?z.fetchOptions:{};x(X)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{L().each($=>{M2(e,{range:$})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>L().isSome()),Dy(e,{cancelIfNecessary:i,load:x})},PW=Y().browser.isSafari(),Pf=e=>lf(be.fromDom(e)),PL=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},ET=(e,n)=>W.from(e.getParent(n.container(),"details")),mR=(e,n)=>ET(e,n).isSome(),IW=(e,n)=>{const o=W.from(e.getParent(n.startContainer,"details")),r=W.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>W.from(e.select("summary",u)[0]));return W.some({startSummary:i,startDetails:o,endDetails:r})}else return W.none()},hR=(e,n)=>Zi(n).exists(o=>o.isEqual(e)),xh=(e,n)=>Vu(n).exists(o=>qo(o.getNode())&&fi(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),IL=(e,n)=>n.startSummary.exists(o=>hR(e,o)),BL=(e,n)=>n.startSummary.exists(o=>xh(e,o)),BW=(e,n)=>n.startDetails.exists(o=>fi(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),_T=(e,n,o)=>o.startDetails.exists(r=>rc(e,n).forall(i=>!r.contains(i.container()))),TT=(e,n)=>{const o=n.getNode();In(o)||e.selection.setCursorLocation(o,n.offset())},gR=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?Zi(i):Vu(i)).each(m=>TT(e,m))}else TT(e,n)},LL=(e,n)=>{const o=x=>x.contains(e.startContainer),r=x=>x.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(x=>n.endDetails.forall(A=>x!==A));return(i||u)&&!(i&&u)||m},FL=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const m=Qe.fromRangeStart(i.getRng()),y=r.getParent(m.container(),r.isBlock),x=ET(r,m),A=y&&r.isEmpty(y),L=oe(y==null?void 0:y.previousSibling),$=oe(y==null?void 0:y.nextSibling);return A&&(n?$:L)&&cg(!n,u,m).exists(se=>mR(r,se)&&!us(x,ET(r,se)))?!0:cg(n,u,m).fold($e,z=>{const X=ET(r,z);if(mR(r,z)&&!us(x,X)){if(n||gR(e,z,!1),y&&A){if(n&&L)return!0;if(!n&&$)return!0;gR(e,z,n),e.dom.remove(y)}return!0}else return!1})}else return!1},LW=(e,n,o,r)=>{const u=e.selection.getRng(),m=Qe.fromRangeStart(u),y=e.getBody();return r==="selection"?LL(u,n):o?BL(m,n)||_T(y,m,n):IL(m,n)||BW(m,n)},FW=(e,n,o)=>IW(e.dom,e.selection.getRng()).fold(()=>FL(e,n,o),r=>LW(e,r,n,o)||FL(e,n,o)),$W=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),m=Qe.fromRangeStart(u);return nf(i)?(o==="selection"&&PL(u,i)||qu(n,m,i)?Pf(i):e.undoManager.transact(()=>{const y=r.getSel();let{anchorNode:x,anchorOffset:A,focusNode:L,focusOffset:$}=y??{};const z=()=>{Fe(x)&&Fe(A)&&Fe(L)&&Fe($)&&(y==null||y.setBaseAndExtent(x,A,L,$))},X=()=>{x=y==null?void 0:y.anchorNode,A=y==null?void 0:y.anchorOffset,L=y==null?void 0:y.focusNode,$=y==null?void 0:y.focusOffset},se=(ie,Ee)=>{xe(ie.childNodes,Re=>{bb(Re)&&Ee.appendChild(Re)})},te=e.dom.create("span",{"data-mce-bogus":"1"});se(i,te),i.appendChild(te),z(),(o==="word"||o==="line")&&(y==null||y.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&PL(r.getRng(),te)?Pf(i):(e.execCommand(n?"ForwardDelete":"Delete"),X(),se(te,i),z()),e.dom.remove(te)}),!0):!1},t0=(e,n,o)=>FW(e,n,o)||PW&&$W(e,n,o)?W.some(it):W.none(),pR=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:it,inputType:o},m=D0(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},VC=pR("input"),kT=pR("beforeinput"),$L=Y(),HL=$L.os,zL=HL.isMacOS()||HL.isiOS(),VL=$L.browser.isFirefox(),zW=(e,n,o)=>{const r=o.keyCode===Ht.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",m=y=>i?y?"word":"line":"selection";PB([{keyCode:Ht.BACKSPACE,action:qn(AD,e)},{keyCode:Ht.BACKSPACE,action:qn(V_,e,!1)},{keyCode:Ht.DELETE,action:qn(V_,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(GO,e,!1)},{keyCode:Ht.DELETE,action:qn(GO,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(wD,e,n,!1)},{keyCode:Ht.DELETE,action:qn(wD,e,n,!0)},{keyCode:Ht.BACKSPACE,action:qn(XE,e,!1)},{keyCode:Ht.DELETE,action:qn(XE,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(t0,e,!1,u)},{keyCode:Ht.DELETE,action:qn(t0,e,!0,u)},...zL?[{keyCode:Ht.BACKSPACE,altKey:!0,action:qn(t0,e,!1,m(!0))},{keyCode:Ht.DELETE,altKey:!0,action:qn(t0,e,!0,m(!0))},{keyCode:Ht.BACKSPACE,metaKey:!0,action:qn(t0,e,!1,m(!1))}]:[{keyCode:Ht.BACKSPACE,ctrlKey:!0,action:qn(t0,e,!1,m(!0))},{keyCode:Ht.DELETE,ctrlKey:!0,action:qn(t0,e,!0,m(!0))}],{keyCode:Ht.BACKSPACE,action:qn(TC,e,!1)},{keyCode:Ht.DELETE,action:qn(TC,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(NC,e,!1)},{keyCode:Ht.DELETE,action:qn(NC,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(wh,e,!1)},{keyCode:Ht.DELETE,action:qn(wh,e,!0)},{keyCode:Ht.BACKSPACE,action:qn($_,e,!1)},{keyCode:Ht.DELETE,action:qn($_,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(ED,e,!1)},{keyCode:Ht.DELETE,action:qn(ED,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(U_,e,!1)},{keyCode:Ht.DELETE,action:qn(U_,e,!0)}],o).filter(y=>e.selection.isEditable()).each(y=>{o.preventDefault(),kT(e,r).isDefaultPrevented()||(y(),VC(e,r))})},VW=(e,n,o)=>lT([{keyCode:Ht.BACKSPACE,action:qn(_C,e)},{keyCode:Ht.DELETE,action:qn(_C,e)},...zL?[{keyCode:Ht.BACKSPACE,altKey:!0,action:qn(Df,e)},{keyCode:Ht.DELETE,altKey:!0,action:qn(Df,e)},...o?[{keyCode:VL?224:91,action:qn(Df,e)}]:[]]:[{keyCode:Ht.BACKSPACE,ctrlKey:!0,action:qn(Df,e)},{keyCode:Ht.DELETE,ctrlKey:!0,action:qn(Df,e)}]],n),oX=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Ht.BACKSPACE,r.isDefaultPrevented()||zW(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||VW(e,r,o),o=!1})},bR=e=>{for(;e;){if(Wt(e)||bt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Ry=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=bR(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(ea),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Wa(n,n);let m=n,y;for(;y=u.current();){if(bt(y)){i.setStart(y,0),i.setEnd(y,0);break}if(r[y.nodeName.toLowerCase()]){i.setStartBefore(y),i.setEndBefore(y);break}m=y,y=u.next()}y||(i.setStart(m,0),i.setEnd(m,0))}else qo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),Kv(e,i)},UC=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},vR=e=>W.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),UL=e=>vR(e).fold(ft(""),n=>n.nodeName.toUpperCase()),UW=e=>vR(e).filter(n=>nh(be.fromDom(n))).isSome(),AT=e=>{e.innerHTML='<br data-mce-bogus="1">'},WW=(e,n,o)=>{const r=e.dom;W.from(o.style).map(r.parseStyle).each(x=>{const L={...Ti(be.fromDom(n)),...x};r.setStyles(n,L)});const i=W.from(o.class).map(x=>x.split(/\s+/)),u=W.from(n.className).map(x=>Kt(x.split(/\s+/),A=>A!==""));ur(i,u,(x,A)=>{const L=Kt(A,z=>!et(x,z)),$=[...x,...L];r.setAttrib(n,"class",$.join(" "))});const m=["style","class"],y=Qo(o,(x,A)=>!et(m,A));r.setAttribs(n,y)},WC=(e,n)=>{if(Ga(e).toLowerCase()===n.tagName.toLowerCase()){const r=hf(e);WW(e,n,r)}},ZW=(e,n,o,r,i=!0,u,m)=>{const y=e.dom,x=e.schema,A=Ga(e),L=o?o.nodeName.toUpperCase():"";let $=n;const z=x.getTextInlineElements();let X;u||L==="TABLE"||L==="HR"?X=y.create(u||A,m||{}):X=o.cloneNode(!1);let se=X;if(!i)y.setAttrib(X,"style",null),y.setAttrib(X,"class",null);else do if(z[$.nodeName]){if(_l($)||Hc($))continue;const te=$.cloneNode(!1);y.setAttrib(te,"id",""),X.hasChildNodes()?(te.appendChild(X.firstChild),X.appendChild(te)):(se=te,X.appendChild(te))}while(($=$.parentNode)&&$!==r);return WC(e,X),AT(se),X},Dc=(e,n)=>e.dom.getParent(n,O1),jW=(e,n,o)=>{let r=n;for(;r&&r!==e&&oe(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return O1(i);r=i}return!1},qW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Ga(e)&&e.dom.isEmpty(o)&&jW(e.getBody(),o,r=>En(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),GW=(e,n,o)=>{var r,i,u;const m=n(Ga(e)),y=Dc(e,o);y&&(e.dom.insertAfter(m,y),Ry(e,m),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},KW=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,YW=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},WL=(e,n)=>{const o=e==null?void 0:e.parentNode;return Fe(o)&&o.nodeName===n},ZL=e=>Fe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),My=e=>Fe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),XW=e=>ZL(e)&&ZL(e.parentNode),OT=e=>{const n=e.parentNode;return My(n)?n:e},Ny=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Wt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},DT=e=>Fo(Fa(Ti(be.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),JW=(e,n,o,r,i)=>{const u=e.dom,m=e.selection.getRng(),y=o.parentNode;if(o===e.getBody()||!y)return;XW(o)&&(i="LI");const x=My(r)?DT(r):void 0;let A=My(r)&&x?n(i,{style:DT(r)}):n(i);if(Ny(o,r,!0)&&Ny(o,r,!1))if(WL(o,"LI")){const L=OT(o);u.insertAfter(A,L),YW(o)?u.remove(L):u.remove(o)}else u.replace(A,o);else if(Ny(o,r,!0))WL(o,"LI")?(u.insertAfter(A,OT(o)),A.appendChild(u.doc.createTextNode(" ")),A.appendChild(o)):y.insertBefore(A,o),u.remove(r);else if(Ny(o,r,!1))u.insertAfter(A,OT(o)),u.remove(r);else{o=OT(o);const L=m.cloneRange();L.setStartAfter(r),L.setEndAfter(o);const $=L.extractContents();if(i==="LI"&&KW($,"LI")){const z=Kt(dt(A.children,be.fromDom),wt(Su("br")));A=$.firstChild,u.insertAfter($,o),xe(z,X=>Zm(be.fromDom(A),X)),x&&A.setAttribute("style",x)}else u.insertAfter($,o),u.insertAfter(A,o);u.remove(r)}Ry(e,A)},sX=e=>{xe(Wg(be.fromDom(e),na),n=>{const o=n.dom;o.nodeValue=Ec(o.data)})},rX=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},aX=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),yR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,QW=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,jL=(e,n)=>Fe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",eZ=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Wt(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let m=i.length;for(;m--;)u=i[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||aX(e,u))&&e.remove(u)},Wd=(e,n,o)=>bt(n)?e?o===1&&n.data.charAt(o-1)===Da?0:o:o===n.data.length-1&&n.data.charAt(o)===Da?n.data.length:o:o,tZ=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Wd(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Wd(!1,e.endContainer,e.endOffset)),n},qL=e=>{let n=e;do bt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},nZ=(e,n,o,r,i)=>{var u,m;const y=e.dom,x=(u=UC(y,r))!==null&&u!==void 0?u:y.getRoot();let A=y.getParent(r,y.isBlock);if(!A||!jL(y,A)){if(A=A||x,!A.hasChildNodes()){const X=y.create(n);return WC(e,X),A.appendChild(X),o.setStart(X,0),o.setEnd(X,0),X}let L=r;for(;L&&L.parentNode!==A;)L=L.parentNode;let $;for(;L&&!y.isBlock(L);)$=L,L=L.previousSibling;const z=(m=$==null?void 0:$.parentElement)===null||m===void 0?void 0:m.nodeName;if($&&z&&e.schema.isValidChild(z,n.toLowerCase())){const X=$.parentNode,se=y.create(n);for(WC(e,se),X.insertBefore(se,$),L=$;L&&!y.isBlock(L);){const te=L.nextSibling;se.appendChild(L),L=te}o.setStart(r,i),o.setEnd(r,i)}}return r},oZ=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Wt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},sZ=(e,n)=>{const o=yx(e);return en(n)?!1:ce(o)?et(ut.explode(o),n.nodeName.toLowerCase()):o},GL={insert:(e,n)=>{let o,r,i,u,m=!1;const y=e.dom,x=e.schema,A=x.getNonEmptyElements(),L=e.selection.getRng(),$=Ga(e),z=be.fromDom(L.startContainer),X=Gl(z,L.startOffset),se=X.exists(ht=>Lm(ht)&&!Au(ht)),te=L.collapsed&&se,ie=(ht,sn)=>ZW(e,o,Ot,ct,B2(e),ht,sn),Ee=ht=>{const sn=Wd(ht,o,r);if(bt(o)&&(ht?sn>0:sn<o.data.length))return!1;if((o.parentNode===Ot||o===Ot)&&m&&!ht||ht&&Wt(o)&&o===Ot.firstChild)return!0;if(yR(o,"TABLE")||yR(o,"HR"))return QW(o,"BR")?!ht:m&&!ht||!m&&ht;const _n=new Wa(o,Ot);bt(o)&&(ht&&sn===0?_n.prev():!ht&&sn===o.data.length&&_n.next());let Zn;for(;Zn=_n.current();){if(Wt(Zn)){if(!Zn.getAttribute("data-mce-bogus")){const ho=Zn.nodeName.toLowerCase();if(A[ho]&&ho!=="br")return!1}}else if(bt(Zn)&&!el(Zn.data))return!1;ht?_n.prev():_n.next()}return!0},Re=()=>{let ht;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Qt!=="HGROUP"?ht=ie($):ht=ie(),sZ(e,u)&&jL(y,u)&&y.isEmpty(Ot,void 0,{includeZwsp:!0})?ht=y.split(u,Ot):y.insertAfter(ht,Ot),Ry(e,ht),ht};Dw(y,L).each(ht=>{L.setStart(ht.startContainer,ht.startOffset),L.setEnd(ht.endContainer,ht.endOffset)}),o=L.startContainer,r=L.startOffset;const Me=!!(n&&n.shiftKey),Ie=!!(n&&n.ctrlKey);Wt(o)&&o.hasChildNodes()&&!te&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&bt(o)?r=o.data.length:r=0);const ct=UC(y,o);if(!ct||rX(e,o))return;Me||(o=nZ(e,$,L,o,r));let Ot=y.getParent(o,y.isBlock)||y.getRoot();u=Fe(Ot==null?void 0:Ot.parentNode)?y.getParent(Ot.parentNode,y.isBlock):null,i=Ot?Ot.nodeName.toUpperCase():"";const Qt=u?u.nodeName.toUpperCase():"";if(Qt==="LI"&&!Ie){const ht=u;Ot=ht,u=ht.parentNode,i=Qt}if(Wt(u)&&qW(e,Me,Ot))return GW(e,ie,Ot);if(/^(LI|DT|DD)$/.test(i)&&Wt(u)&&y.isEmpty(Ot)){JW(e,ie,u,Ot,$);return}if(!te&&(Ot===e.getBody()||!jL(y,Ot)))return;const tt=Ot.parentNode;let Ze;if(te)Ze=ie($),X.fold(()=>{Ls(z,be.fromDom(Ze))},ht=>{ui(ht,be.fromDom(Ze))}),e.selection.setCursorLocation(Ze,0);else if(am(Ot))Ze=pp(Ot),y.isEmpty(Ot)&&AT(Ot),WC(e,Ze),Ry(e,Ze);else if(Ee(!1))Ze=Re();else if(Ee(!0)&&tt){const ht=Qe.fromRangeStart(L),sn=B3(ht),_n=be.fromDom(Ot),ho=PE(_n,ht,e.schema)?uN(_n,ht,e.schema).bind(Cs=>W.from(Cs.getNode())):W.none();Ze=tt.insertBefore(ie(),Ot);const as=yR(Ot,"HR")||sn?Ze:ho.getOr(Ot);Ry(e,as)}else{const ht=tZ(L).cloneRange();ht.setEndAfter(Ot);const sn=ht.extractContents();sX(sn),qL(sn),Ze=sn.firstChild,y.insertAfter(sn,Ot),eZ(y,A,Ze),oZ(y,Ot),y.isEmpty(Ot)&&AT(Ot),Ze.normalize(),y.isEmpty(Ze)?(y.remove(Ze),Re()):(WC(e,Ze),Ry(e,Ze))}y.setAttrib(Ze,"id",""),e.dispatch("NewBlock",{newBlock:Ze})},fakeEventName:"insertParagraph"},rZ=(e,n,o)=>{const r=new Wa(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||bt(i)&&i.length>0)return!0;return!1},RT=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Kv(e,r)},KL=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,m=!1;Dw(r,i).each(X=>{i.setStart(X.startContainer,X.startOffset),i.setEnd(X.endContainer,X.endOffset)});let y=i.startOffset,x=i.startContainer;if(Wt(x)&&x.hasChildNodes()){const X=y>x.childNodes.length-1;x=x.childNodes[Math.min(y,x.childNodes.length-1)]||x,X&&bt(x)?y=x.data.length:y=0}let A=r.getParent(x,r.isBlock);const L=A&&A.parentNode?r.getParent(A.parentNode,r.isBlock):null,$=L?L.nodeName.toUpperCase():"",z=!!(n&&n.ctrlKey);$==="LI"&&!z&&(A=L),bt(x)&&y>=x.data.length&&(rZ(e.schema,x,A||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),m=!0)),u=r.create("br"),Y1(r,i,u),RT(e,u,m),e.undoManager.add()},MT=(e,n)=>{const o=be.fromTag("br");ui(be.fromDom(n),o),e.undoManager.add()},aZ=(e,n)=>{cZ(e.getBody(),n)||yc(be.fromDom(n),be.fromTag("br"));const o=be.fromTag("br");yc(be.fromDom(n),o),RT(e,o.dom,!1),e.undoManager.add()},iZ=e=>qo(e.getNode()),cZ=(e,n)=>iZ(Qe.after(n))?!0:rc(e,Qe.after(n)).map(o=>qo(o.getNode())).getOr(!1),YL=e=>e&&e.nodeName==="A"&&"href"in e,lZ=e=>e.fold($e,YL,YL,$e),XL=e=>{const n=Ae(Gp,e),o=Qe.fromRangeStart(e.selection.getRng());return Ch(n,e.getBody(),o).filter(lZ)},uZ=(e,n)=>{n.fold(it,Ae(MT,e),Ae(aZ,e),it)},JL={insert:(e,n)=>{const o=XL(e);o.isSome()?o.each(Ae(uZ,e)):KL(e,n)},fakeEventName:"insertLineBreak"},QL=(e,n)=>vR(e).filter(o=>n.length>0&&xi(be.fromDom(o),n)).isSome(),wR=e=>QL(e,nc(e)),mZ=e=>QL(e,I2(e)),Ju=au.generate([{br:[]},{block:[]},{none:[]}]),NT=(e,n)=>mZ(e),e8=e=>(n,o)=>UW(n)===e,PT=(e,n)=>(o,r)=>UL(o)===e.toUpperCase()===n,CR=e=>{const n=UC(e.dom,e.selection.getStart());return en(n)},Py=e=>PT("pre",e),hZ=()=>PT("summary",!0),SR=e=>(n,o)=>$c(n)===e,f1=(e,n)=>wR(e),IT=(e,n)=>n,gZ=e=>{const n=Ga(e),o=UC(e.dom,e.selection.getStart());return Fe(o)&&e.schema.isValidChild(o.nodeName,n)},pZ=e=>{const n=e.selection.getRng(),o=be.fromDom(n.startContainer),i=Gl(o,n.startOffset).map(u=>Lm(u)&&!Au(u));return n.collapsed&&i.getOr(!0)},Rl=(e,n)=>(o,r)=>Fo(e,(u,m)=>u&&m(o,r),!0)?W.some(n):W.none(),t8=(e,n)=>L6([Rl([NT],Ju.none()),Rl([Py(!0),CR],Ju.none()),Rl([hZ()],Ju.br()),Rl([Py(!0),SR(!1),IT],Ju.br()),Rl([Py(!0),SR(!1)],Ju.block()),Rl([Py(!0),SR(!0),IT],Ju.block()),Rl([Py(!0),SR(!0)],Ju.br()),Rl([e8(!0),IT],Ju.br()),Rl([e8(!0)],Ju.block()),Rl([f1],Ju.br()),Rl([IT],Ju.br()),Rl([gZ],Ju.block()),Rl([pZ],Ju.block())],[e,!!(n&&n.shiftKey)]).getOr(Ju.none()),ZC=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||EH(n),!(Fe(o)&&kT(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Fe(o)&&VC(n,e.fakeEventName)))},n8=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>ZC(JL,e,n),r=()=>ZC(GL,e,n),i=t8(e,n);switch(dm(e)){case"linebreak":i.fold(o,o,it);break;case"block":i.fold(r,r,it);break;case"invert":i.fold(r,o,it);break;default:i.fold(o,r,it);break}},xR=Y(),bZ=xR.os.isiOS()&&xR.browser.isSafari(),o8=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),pI(e.undoManager),e.undoManager.transact(()=>{n8(e,n)}))},vZ=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(bt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},ER=e=>{let n=W.none();const o=i=>{n=W.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(it,m=>i.selection.moveToBookmark(m)),o8(i,u),n=W.none()};e.on("keydown",i=>{i.keyCode===Ht.ENTER&&(bZ&&vZ(e.selection.getRng())?o(e):o8(e,i))}),e.on("keyup",i=>{i.keyCode===Ht.ENTER&&n.each(()=>r(e,i))})},_R=(e,n,o)=>{const r=Nn.os.isMacOS()||Nn.os.isiOS();lT([{keyCode:Ht.END,action:qn(cT,e,!0)},{keyCode:Ht.HOME,action:qn(cT,e,!1)},...r?[]:[{keyCode:Ht.HOME,action:qn(BC,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ht.END,action:qn(BC,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ht.END,action:qn(BB,e,!0)},{keyCode:Ht.HOME,action:qn(BB,e,!1)},{keyCode:Ht.END,action:qn(tT,e,!0,n)},{keyCode:Ht.HOME,action:qn(tT,e,!1,n)}],o).each(i=>{o.preventDefault()})},yZ=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||_R(e,n,o)})},TR=e=>{e.on("input",n=>{n.isComposing||lH(e)})},s8=Y(),BT=(e,n,o)=>{lT([{keyCode:Ht.PAGE_UP,action:qn(tT,e,!1,n)},{keyCode:Ht.PAGE_DOWN,action:qn(tT,e,!0,n)}],o)},kR=e=>e.stopImmediatePropagation(),AR=e=>e.keyCode===Ht.PAGE_UP||e.keyCode===Ht.PAGE_DOWN,r8=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",kR,!0):!o&&e.get()&&n.off("NodeChange",kR),e.set(o)},wZ=(e,n)=>{if(s8.os.isMacOS())return;const o=$s(!1);e.on("keydown",r=>{AR(r)&&r8(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||BT(e,n,r),AR(r)&&o.get()&&(r8(o,e,!1),e.nodeChanged())})},LT=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||_t(n.getTargetRanges(),o=>!RM(e.dom,o)))&&n.preventDefault()})},OR=(e,n)=>{const o=n.container(),r=n.offset();return bt(o)?(o.insertData(r,e),W.some(Qe(o,r+e.length))):Np(n).map(i=>{const u=be.fromText(e);return n.isAtEnd()?yc(i,u):ui(i,u),Qe(u.dom,e.length)})},a8=Ae(OR,ea),i8=Ae(OR," "),c8=(e,n,o)=>$3(e,n,o)?a8(n):i8(n),CZ=e=>n=>n.fold(o=>fi(e.dom,Qe.before(o)),o=>Zi(o),o=>Vu(o),o=>rc(e.dom,Qe.after(o))),SZ=(e,n,o)=>r=>$3(e,r,o)?a8(n):i8(n),l8=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},xZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),EZ=e=>{const n=Qe.fromRangeStart(e.selection.getRng()),o=be.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ae(Gp,e),i=Qe.fromRangeStart(e.selection.getRng());return Ch(r,e.getBody(),i).bind(CZ(o)).map(u=>()=>SZ(o,n,e.schema)(u).each(l8(e)))}else return W.none()},u8=e=>{const n=()=>{const o=be.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Qe.fromRangeStart(e.selection.getRng());c8(o,r,e.schema).each(l8(e))};return yi(Nn.browser.isFirefox()&&e.selection.isEditable()&&xZ(e.dom,e.selection.getRng().startContainer),n)},_Z=(e,n)=>{PB([{keyCode:Ht.SPACEBAR,action:qn(EZ,e)},{keyCode:Ht.SPACEBAR,action:qn(u8,e)}],n).each(o=>{n.preventDefault(),kT(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),VC(e,"insertText",{data:" "}))})},d8=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||_Z(e,n)})},TZ=e=>aM(e)?[{keyCode:Ht.TAB,action:qn(YB,e,!0)},{keyCode:Ht.TAB,shiftKey:!0,action:qn(YB,e,!1)}]:[],kZ=(e,n)=>{lT([...TZ(e)],n).each(o=>{n.preventDefault()})},AZ=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||kZ(e,n)})},OZ=e=>{if(e.addShortcut("Meta+P","","mcePrint"),tX(e),Hd(e))return $s(null);{const n=KV(e);return LT(e),wU(e),hT(e,n),oX(e,n),ER(e),d8(e),TR(e),AZ(e),yZ(e,n),wZ(e,n),n}};class DZ{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!T3(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{Ob(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Fv(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Fv(n)&&(n.selection.getNode().nodeName==="IMG"?vn.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let i;if(o.initialized&&r&&!Cp(o)&&!ab(o)){const u=o.getBody();i=r.getStart(!0)||u,(i.ownerDocument!==o.getDoc()||!o.dom.isChildOf(i,u))&&(i=u);const m=[];o.dom.getParent(i,y=>y===u?!0:(m.push(y),!1)),o.dispatch("NodeChange",{...n,element:i,parents:m})}}isSameElementPath(n){let o;const r=this.editor,i=xs(r.dom.getParents(n,pt,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const n0=$0("image"),RZ=e=>{const n=e;return W.from(n[n0])},MZ=(e,n)=>{const o=e;o[n0]=n},FT=$0("event"),NZ=e=>{const n=e;return W.from(n[FT])},$T=e=>n=>{const o=n;o[FT]=e},PZ=(e,n)=>$T(n)(e),DR=$T(0),IZ=$T(2),BZ=$T(1),HT=(e=>n=>{const o=n;return W.from(o[FT]).exists(r=>r===e)})(0),LZ=()=>Object.freeze({length:0,item:e=>null}),RR=$0("mode"),FZ=e=>{const n=e;return W.from(n[RR])},zT=e=>n=>{const o=n;o[RR]=e},f8=(e,n)=>zT(n)(e),m8=zT(0),MR=zT(2),$Z=zT(1),h8=e=>n=>{const o=n;return W.from(o[RR]).exists(r=>r===e)},Iy=h8(0),g8=h8(1),HZ=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Iy(e))if(ce(o)){if(!In(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Iy(e)&&n.remove(o)},clear:()=>{Iy(e)&&n.clear()}}),zZ=["none","copy","link","move"],Ks=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],NR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){et(zZ,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){HT(r)&&et(Ks,i)&&(o=i)},get items(){return HZ(r,e.items)},get files(){return g8(r)?LZ():e.files},get types(){return e.types},setDragImage:(i,u,m)=>{Iy(r)&&(MZ(r,{image:i,x:u,y:m}),e.setDragImage(i,u,m))},getData:i=>g8(r)?"":e.getData(i),setData:(i,u)=>{Iy(r)&&e.setData(i,u)},clearData:i=>{Iy(r)&&e.clearData(i)}};return m8(r),r},p8=e=>{const n=NR(),o=FZ(e);return MR(e),DR(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,RZ(e).each(r=>n.setDragImage(r.image,r.x,r.y)),xe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),xe(e.files,r=>n.items.add(r)),NZ(e).each(r=>{PZ(n,r)}),o.each(r=>{f8(e,r),f8(n,r)}),n},VZ=e=>{const n=e.getData("text/html");return n===""?W.none():W.some(n)},VT=(e,n)=>e.setData("text/html",n),PR="x-tinymce/html",UT=ft(PR),IR="<!-- "+PR+" -->",UZ=e=>IR+e,b8=e=>e.replace(IR,""),jC=e=>e.indexOf(IR)!==-1,WZ=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),ZZ=(e,n)=>{let o="<"+e;const r=Fa(n,(i,u)=>u+'="'+Uh.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},BR=(e,n,o)=>{const r=e.split(/\n\n/),i=ZZ(n,o),u="</"+n+">",m=dt(r,x=>x.split(/\n/).join("<br />")),y=x=>i+x+u;return m.length===1?m[0]:dt(m,y).join("")},v8="%MCEPASTEBIN%",jZ=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},v8);Nn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},qZ=(e,n)=>{const o=e.dom;if(LR(e)){let r;const i=n.get();for(;r=LR(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},LR=e=>e.dom.get("mcepastebin"),y8=e=>Fe(e)&&e.id==="mcepastebin",GZ=e=>{const n=e.dom,o=(m,y)=>{m.appendChild(y),n.remove(y,!0)},[r,...i]=Kt(e.getBody().childNodes,y8);xe(i,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const y=n.create("div");r.insertBefore(y,u[m]),o(y,u[m])}return r?r.innerHTML:""},w8=e=>e===v8,By=e=>{const n=$s(null);return{create:()=>jZ(e,n),remove:()=>qZ(e,n),getEl:()=>LR(e),getHtml:()=>GZ(e),getLastRng:n.get}},C8=(e,n)=>(ut.each(n,o=>{xt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),Ly=e=>{const n=fs(),o=py({},n);let r="";const i=n.getVoidElements(),u=ut.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),y=x=>{const A=x.name,L=x;if(A==="br"){r+=`
`;return}if(A!=="wbr"){if(i[A]&&(r+=" "),u[A]){r+=" ";return}if(x.type===3&&(r+=x.value),!(x.name in n.getVoidElements())){let $=x.firstChild;if($)do y($);while($=$.next)}m[A]&&L.next&&(r+=`
`,A==="p"&&(r+=`
`))}};return e=C8(e,[/<!\[[^\]]+\]>/g]),y(o.parse(e)),r},Fy=e=>(e=C8(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":ea],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),KZ=e=>{let n=0;return()=>e+n++},YZ=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ut.hasOwn(o,n)?"image/"+o[n]:"image/"+n},$y=(e,n)=>{const o=py({sanitize:ag(e),sandbox_iframes:Fx(e),sandbox_iframes_exclusions:ew(e),convert_unsafe_embeds:$x(e)},e.schema);o.addNodeFilter("meta",i=>{ut.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Wp({validate:!0},e.schema).serialize(r)},S8=(e,n)=>({content:e,cancelled:n}),FR=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=Ra(e,r,o);return S8(i.node.innerHTML,i.isDefaultPrevented())},XZ=(e,n,o)=>{const r=Sa(e,n,o),i=$y(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?FR(e,i,o):S8(i,r.isDefaultPrevented())},x8=(e,n,o)=>XZ(e,n,o),WT=(e,n)=>(e.insertContent(n,{merge:Nx(e),paste:!0}),!0),qC=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),E8=(e,n)=>qC(n)&&_t(z4(e),o=>Wr(n.toLowerCase(),`.${o.toLowerCase()}`)),JZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),QZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),_8=(e,n,o)=>!e.selection.isCollapsed()&&qC(n)?QZ(e,n,o):!1,ej=(e,n,o)=>E8(e,n)?JZ(e,n,o):!1,T8=(e,n)=>{ut.each([_8,ej,WT],o=>!o(e,n,WT))},$R=(e,n,o)=>{o||!Px(e)?WT(e,n):T8(e,n)},k8=KZ("mceclip"),tj=e=>{const n=NR();return VT(n,e),MR(n),n},A8=(e,n,o,r,i)=>{const u=x8(e,n,o);if(!u.cancelled){const m=u.content,y=()=>$R(e,m,r);i?kT(e,"insertFromPaste",{dataTransfer:tj(m)}).isDefaultPrevented()||(y(),VC(e,"insertFromPaste")):y()}},ZT=(e,n,o,r)=>{const i=o||jC(n);A8(e,b8(n),i,!1,r)},jT=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=wl(r,sM(e)),u=BR(i,Ga(e),hf(e));A8(e,u,!1,!0,o)},qT=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},m1=(e,n)=>n in e&&e[n].length>0,HR=e=>m1(e,"text/html")||m1(e,"text/plain"),O8=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Fe(o)?e.dom.encode(o[1]):void 0},nj=(e,n,o,r)=>{const i=k8(),u=uv(e)&&Fe(o.name),m=u?O8(e,o.name):i,y=u?o.name:void 0,x=n.create(i,o,r,m,y);return n.add(x),x},D8=(e,n)=>{HA(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),m=n.file,y=e.editorUpload.blobCache,x=y.getByData(u,r),A=x??nj(e,y,m,u);ZT(e,`<img src="${A.blobUri()}">`,!1,!0)})},oj=e=>e.type==="paste",sj=e=>Promise.all(dt(e,n=>o1(n).then(o=>({file:n,uri:o})))),rj=e=>{const n=z4(e);return o=>cs(o.type,"image/")&&_t(n,r=>YZ(r)===o.type)},aj=(e,n)=>{const o=n.items?_s(Rr(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Rr(n.files):[];return Kt(o.length>0?o:r,rj(e))},R8=(e,n,o)=>{const r=oj(n)?n.clipboardData:n.dataTransfer;if(Sp(e)&&r){const i=aj(e,r);if(i.length>0)return n.preventDefault(),sj(i).then(u=>{o&&e.selection.setRng(o),xe(u,m=>{D8(e,m)})}),!0}return!1},GT=e=>{var n,o;return Nn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},ij=e=>Ht.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,KT=(e,n,o,r,i)=>{let u=Fy(o);const m=m1(n,UT())||jC(o),y=!m&&WZ(u),x=qC(u);(w8(u)||!u.length||y&&!x)&&(r=!0),(r||x)&&(m1(n,"text/plain")&&y?u=n["text/plain"]:u=Ly(u)),!w8(u)&&(r?jT(e,u,i):ZT(e,u,m,i))},cj=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{ij(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||GT(u))return;const m=o.get()==="text"||r;r=!1;const y=qT(u.clipboardData);!HR(y)&&R8(e,u,i())||(m1(y,"text/html")?(u.preventDefault(),KT(e,y,y["text/html"],m,!0)):m1(y,"text/plain")&&m1(y,"text/uri-list")?(u.preventDefault(),KT(e,y,y["text/plain"],m,!0)):(n.create(),vn.setEditorTimeout(e,()=>{const x=n.getHtml();n.remove(),KT(e,y,x,m,!1)},0)))})},lj=e=>{const n=i=>cs(i,"webkit-fake-url"),o=i=>cs(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,m)=>{if(!Sp(e)&&r(m))for(const y of i){const x=y.attr("src");ce(x)&&!y.attr("data-mce-object")&&x!==Nn.transparentSrc&&(n(x)||!xp(e)&&o(x))&&y.remove()}})},M8=(e,n,o)=>{cj(e,n,o),lj(e)},N8=(e,n)=>{n.get()==="text"?(n.set("html"),ps(e,!1)):(n.set("text"),ps(e,!0)),e.focus()},uj=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{N8(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ZT(e,r.html,r.internal,!1),r.text&&jT(e,r.text,!1)})},dj=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(UT(),n),!0}catch{return!1}else return!1},P8=(e,n,o,r)=>{dj(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},I8=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const y=i.getRng();m.focus();const x=r.createRng();x.selectNodeContents(m),i.setRng(x),vn.setEditorTimeout(e,()=>{i.setRng(y),r.remove(u),o()},0)},B8=e=>({html:UZ(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),L8=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),F8=e=>!e.selection.isCollapsed()||L8(e),fj=e=>n=>{!n.isDefaultPrevented()&&F8(e)&&e.selection.isEditable()&&P8(n,B8(e),I8(e),()=>{if(Nn.browser.isChromium()||Nn.browser.isFirefox()){const o=e.selection.getRng();vn.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},mj=e=>n=>{!n.isDefaultPrevented()&&F8(e)&&P8(n,B8(e),I8(e),it)},hj=e=>{e.on("cut",fj(e)),e.on("copy",mj(e))},$8=(e,n)=>{var o,r;return Up.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},gj=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},H8=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},pj=e=>_t(e.files,n=>/^image\//.test(n.type)),z8=(e,n,o,r)=>{const i=e.getParent(o,m=>Iu(n,m));if(!oe(e.getParent(o,"summary")))return!0;if(i&&En(r,"text/html")){const m=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!oe(m.querySelector(i.nodeName.toLowerCase()))}else return!1},V8=e=>{e.on("input",n=>{const o=r=>oe(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Kt(e.dom.select("details"),o);xe(r,i=>{qo(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Dd().dom),i.prepend(u)})}})},bj=(e,n)=>{Rx(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Sp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&pj(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=$8(e,o);if(en(r))return;const i=qT(o.dataTransfer),u=m1(i,UT());if((!HR(i)||gj(i))&&R8(e,o,r))return;const m=i[UT()],y=m||i["text/html"]||i["text/plain"],x=z8(e.dom,e.schema,r.startContainer,i),A=n.get();A&&!x||y&&(o.preventDefault(),vn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(m||A&&x)&&e.execCommand("Delete"),H8(e,r);const L=Fy(y);i["text/html"]?ZT(e,L,u,!0):jT(e,L,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Sp(e)&&!n.get()&&(o.preventDefault(),H8(e,$8(e,o))),o.type==="dragend"&&n.set(!1)}),V8(e)},vj=e=>{const n=i=>u=>{i(e,u)},o=Mx(e);ve(o)&&e.on("PastePreProcess",n(o));const r=L4(e);ve(r)&&e.on("PastePostProcess",n(r))},yj=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},wj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,U8=e=>ut.trim(e).replace(wj,H1).toLowerCase(),Cj=(e,n,o)=>{const r=K2(e);if(o||r==="all"||!F4(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(y,x,A,L)=>{const $=u.parseStyle(u.decode(A)),z={};for(let se=0;se<i.length;se++){const te=$[i[se]];let ie=te,Ee=u.getStyle(m,i[se],!0);/color/.test(i[se])&&(ie=U8(ie),Ee=U8(Ee)),Ee!==ie&&(z[i[se]]=te)}const X=u.serializeStyle(z,"span");return X?x+' style="'+X+'"'+L:x+L})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,y,x)=>m+' style="'+y+'"'+x),n},Sj=e=>{(Nn.browser.isChromium()||Nn.browser.isSafari())&&yj(e,Cj)},YT=e=>{const n=$s(!1),o=$s(Y2(e)?"text":"html"),r=By(e);Sj(e),uj(e,o),vj(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{hj(e),bj(e,n),M8(e,r,o)})},W8=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},xj=e=>{e.parser.addNodeFilter("details",n=>{const o=rb(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Q2(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},Z8=e=>{W8(e),xj(e)},j8=qo,XT=bt,Ej=e=>Uo(e.dom),q8=e=>rt(e.dom),G8=e=>n=>No(be.fromDom(e),n),K8=(e,n,o)=>Js(be.fromDom(e),r=>q8(r)||o.isBlock(oo(r)),G8(n)).getOr(be.fromDom(n)).dom,Y8=(e,n)=>Js(be.fromDom(e),Ej,G8(n)),zR=(e,n,o)=>{const r=new Wa(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:i();m&&!j8(m);m=i())Fu(m)&&(u=m);return u},_j=(e,n,o)=>{const i=Qe.fromRangeStart(e).getNode(),u=K8(i,n,o),m=zR(i,u,!1),y=zR(i,u,!0),x=document.createRange();return Y8(m,u).fold(()=>{XT(m)?x.setStart(m,0):x.setStartBefore(m)},A=>x.setStartBefore(A.dom)),Y8(y,u).fold(()=>{XT(y)?x.setEnd(y,y.data.length):x.setEndAfter(y)},A=>x.setEndAfter(A.dom)),x},Tj=e=>{const n=_j(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(JE(n))},kj=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Tj(e))})};var Eh;(function(e){e.Before="before",e.After="after"})(Eh||(Eh={}));const Aj=(e,n)=>Math.abs(e.left-n),Oj=(e,n)=>Math.abs(e.right-n),X8=(e,n)=>e>=n.top&&e<=n.bottom,Dj=(e,n)=>e.top<n.bottom&&e.bottom>n.top,Rj=(e,n)=>{const o=ru(e,n)/Math.min(e.height,n.height);return Dj(e,n)&&o>.5},Mj=(e,n)=>{const o=Kt(e,r=>X8(n,r));return o4(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=Oo(e,m=>Rj(m,r));return[i,u]})},Nj=(e,n)=>({node:e.node,position:Aj(e,n)<Oj(e,n)?Eh.Before:Eh.After}),Pj=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),Hy=(e,n,o,r)=>{const i=$=>Fu($.node)?W.some($):Wt($.node)?Hy(Rr($.node.childNodes),n,o,!1):W.none(),u=($,z,X)=>i(z).filter(se=>Math.abs(X($,n,o)-X(se,n,o))<2&&bt(se.node)),m=($,z)=>{const X=Ko($,(se,te)=>z(se,n,o)-z(te,n,o));return Li(X,i).map(se=>r&&!bt(se.node)&&X.length>1?u(se,X[1],z).getOr(se):se)},[y,x]=Mj(Yb(e),o),{pass:A,fail:L}=Oo(x,$=>$.top<o);return m(y,Pj).orThunk(()=>m(L,Qh)).orThunk(()=>m(A,Qh))},J8=(e,n,o,r)=>{const i=(u,m)=>{const y=A=>Wt(A)&&A.classList.contains("mce-drag-container"),x=Kt(u.dom.childNodes,wt(y));return m.fold(()=>Hy(x,o,r,!0),A=>{const L=Kt(x,$=>$!==A.dom);return Hy(L,o,r,!0)}).orThunk(()=>(No(u,e)?W.none():Wf(u)).bind(L=>i(L,W.some(u))))};return i(n,W.none())},Q8=(e,n,o)=>{const r=be.fromDom(e),i=Zl(r),m=be.fromPoint(i,n,o).filter(y=>dr(r,y)).getOr(r);return J8(r,m,n,o)},eF=(e,n,o)=>Q8(e,n,o).filter(r=>ub(r.node)).map(r=>Nj(r,n)),tF=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,m=i.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},Ij=e=>e.inline?tF(e.getBody()):{left:0,top:0},lX=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Bj=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},nF=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=tF(e.getContentAreaContainer()),r=Bj(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},VR=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),JT=(e,n)=>VR(Ij(e),lX(e),nF(e,n)),oF=e=>({target:e,srcElement:e}),Lj=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...oF(o)}),sF=(e,n,o)=>{const r=Mn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:it,stopImmediatePropagation:it,stopPropagation:it,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...oF(n)}},Fj=(e,n)=>{const o=p8(e);return n==="dragstart"?(DR(o),m8(o)):n==="drop"?(IZ(o),MR(o)):(BZ(o),$Z(o)),o},UR=(e,n,o,r)=>{const i=Fj(o,e);return In(r)?sF(e,n,i):Lj(e,r,n,i)},WR=32,$j=100,QT=8,GC=16,rF=Uo,uX=s4(rF,rt),Hj=(e,n,o)=>rF(o)&&o!==n&&e.isEditable(o.parentElement),zj=(e,n,o)=>en(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Vj=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const m=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},aF=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},ek=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},tk=ek("left",-32),ZR=ek("left",WR),jR=ek("top",-32),nk=ek("top",WR),qR=(e,n,o,r,i,u,m,y,x,A,L,$)=>{let z=0,X=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(z=n.pageX+o-i),n.pageY+r>u&&(X=n.pageY+r-u),e.style.width=o-z+"px",e.style.height=r-X+"px";const se=x.clientHeight,te=x.clientWidth,ie=m+x.getBoundingClientRect().top,Ee=y+x.getBoundingClientRect().left;L.on(Re=>{Re.intervalId.clear(),Re.dragging&&$&&(m+QT>=se?Re.intervalId.set(nk(A)):m-QT<=0?Re.intervalId.set(jR(A)):y+QT>=te?Re.intervalId.set(ZR(A)):y-QT<=0?Re.intervalId.set(tk(A)):ie+GC>=window.innerHeight?Re.intervalId.set(nk(window)):ie-GC<=0?Re.intervalId.set(jR(window)):Ee+GC>=window.innerWidth?Re.intervalId.set(ZR(window)):Ee-GC<=0&&Re.intervalId.set(tk(window)))})},ok=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Uj=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);ok(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&lf(be.fromDom(o))},Mg=e=>e.button===0,iF=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Wj=(e,n)=>o=>{if(Mg(o)){const r=Vo(n.dom.getParents(o.target),uX).getOr(null);if(Fe(r)&&Hj(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:NR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Vj(n,r,r.offsetWidth,r.offsetHeight),intervalId:er($j)})}}},Zj=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),eF(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===Eh.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},KC=(e,n,o,r,i)=>{n==="dragstart"&&VT(r,e.dom.getOuterHTML(o));const u=UR(n,o,r,i);return e.dispatch(n,u)},jj=(e,n)=>{const o=cp((i,u)=>Zj(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const m=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&m>10){const y=KC(n,"dragstart",u.element,u.dataTransfer,i);if(Fe(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const y=i.currentTarget===n.getDoc().documentElement,x=iF(u,JT(n,i));aF(u.ghost,n.getBody()),qR(u.ghost,x,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,y),o.throttle(i.clientX,i.clientY)}})},cF=e=>{const n=e.getSel();if(Fe(n)){const r=n.getRangeAt(0).startContainer;return bt(r)?r.parentNode:r}else return null},qj=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(zj(n,cF(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();KC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{Uj(n.dom,r.element),VZ(r.dataTransfer).each(y=>n.insertContent(y)),n._selectionOverrides.hideFakeCaret()})}KC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),lF(e)},GR=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>KC(n,"dragend",r.element,r.dataTransfer),i=>KC(n,"dragend",r.element,r.dataTransfer,i))}),lF(e)},Gj=(e,n)=>o=>GR(e,n,W.some(o)),lF=e=>{e.on(n=>{n.intervalId.clear(),ok(n.ghost)}),e.clear()},KR=e=>{const n=Aa(),o=Vs.DOM,r=document,i=Wj(n,e),u=jj(n,e),m=qj(n,e),y=Gj(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",y),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",y)}),e.on("keydown",x=>{x.keyCode===Ht.ESC&&GR(n,e,W.none())})},uF=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(et(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&hC(e,"Dropped file type is not supported"))}},o=i=>{we(e,i.target)&&n(i)},r=()=>{const i=Vs.DOM,u=e.dom,m=document,y=e.inline?e.getBody():e.getDoc(),x=["drop","dragover"];xe(x,A=>{i.bind(m,A,o),u.bind(y,A,n)}),e.on("remove",()=>{xe(x,A=>{i.unbind(m,A,o),u.unbind(y,A,n)})})};e.on("init",()=>{vn.setEditorTimeout(e,r,0)})},dX=e=>{KR(e),vv(e)&&uF(e)},Kj=e=>{const n=cp(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=qO(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},dF=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(ya(o)){const r=Cf(e.getBody(),o),i=Uo(r)?r:o;e.selection.getNode()!==i&&EC(e,i).each(u=>e.selection.setRng(u))}})})},YC=Uo,sk=(e,n)=>Cf(e.getBody(),n),Yj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=Z4(e,r,o.isBlock,()=>hr(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let y;const x=Qt=>Fe(Qt)&&o.hasClass(Qt,"mce-offscreen-selection"),A=Qt=>Qt!==r&&(YC(Qt)||ya(Qt))&&o.isChildOf(Qt,r)&&o.isEditable(Qt.parentNode),L=Qt=>{Qt&&n.setRng(Qt)},$=(Qt,tt,Ze,ht=!0)=>e.dispatch("ShowCaret",{target:tt,direction:Qt,before:Ze}).isDefaultPrevented()?null:(ht&&n.scrollIntoView(tt,Qt===-1),i.show(Ze,tt)),z=Qt=>{Qt.hasAttribute("data-mce-caret")&&(pp(Qt),n.scrollIntoView(Qt))},X=()=>{e.on("click",tt=>{o.isEditable(tt.target)||(tt.preventDefault(),e.focus())}),e.on("blur NewBlock",Ie),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",tt=>{const Ze=tt.target,ht=sk(e,Ze);YC(ht)?(tt.preventDefault(),EC(e,ht).each(Me)):A(Ze)&&EC(e,Ze).each(Me)},!0),e.on("mousedown",tt=>{const Ze=tt.target;if(Ze!==r&&Ze.nodeName!=="HTML"&&!o.isChildOf(Ze,r)||!jI(e,tt.clientX,tt.clientY))return;Ie(),Ot();const ht=sk(e,Ze);YC(ht)?(tt.preventDefault(),EC(e,ht).each(Me)):eF(r,tt.clientX,tt.clientY).each(sn=>{tt.preventDefault();const _n=$(1,sn.node,sn.position===Eh.Before,!1);L(_n),tl(ht)?ht.focus():e.getBody().focus()})}),e.on("keypress",tt=>{Ht.modifierPressed(tt)||YC(n.getNode())&&tt.preventDefault()}),e.on("GetSelectionRange",tt=>{let Ze=tt.range;if(y){if(!y.parentNode){y=null;return}Ze=Ze.cloneRange(),Ze.selectNode(y),tt.range=Ze}}),e.on("SetSelectionRange",tt=>{tt.range=ie(tt.range);const Ze=Me(tt.range,tt.forward);Ze&&(tt.range=Ze)});const Qt=tt=>Wt(tt)&&tt.id==="mcepastebin";e.on("AfterSetSelectionRange",tt=>{const Ze=tt.range,ht=Ze.startContainer.parentElement;!te(Ze)&&!Qt(ht)&&Ot(),x(ht)||Ie()}),dX(e),Kj(e),dF(e)},se=Qt=>su(Qt)||ko(Qt)||tc(Qt),te=Qt=>se(Qt.startContainer)||se(Qt.endContainer),ie=Qt=>{const tt=e.schema.getVoidElements(),Ze=o.createRng(),ht=Qt.startContainer,sn=Qt.startOffset,_n=Qt.endContainer,Zn=Qt.endOffset;return En(tt,ht.nodeName.toLowerCase())?sn===0?Ze.setStartBefore(ht):Ze.setStartAfter(ht):Ze.setStart(ht,sn),En(tt,_n.nodeName.toLowerCase())?Zn===0?Ze.setEndBefore(_n):Ze.setEndAfter(_n):Ze.setEnd(_n,Zn),Ze},Ee=(Qt,tt)=>{const Ze=be.fromDom(e.getBody()),ht=e.getDoc(),sn=Qr(Ze,"#"+u).getOrThunk(()=>{const ho=be.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ht);return oa(ho,"id",u),Ls(Ze,ho),ho}),_n=o.createRng();yl(sn),Du(sn,[be.fromText(ea,ht),be.fromDom(tt),be.fromText(ea,ht)]),_n.setStart(sn.dom.firstChild,1),_n.setEnd(sn.dom.lastChild,0),Xn(sn,{top:o.getPos(Qt,e.getBody()).y+"px"}),Tw(sn);const Zn=n.getSel();return Zn&&(Zn.removeAllRanges(),Zn.addRange(_n)),_n},Re=Qt=>{const tt=Qt.cloneNode(!0),Ze=e.dispatch("ObjectSelected",{target:Qt,targetClone:tt});if(Ze.isDefaultPrevented())return null;const ht=Ee(Qt,Ze.targetClone),sn=be.fromDom(Qt);return xe(Ua(be.fromDom(e.getBody()),`*[${m}]`),_n=>{No(sn,_n)||Bs(_n,m)}),o.getAttrib(Qt,m)||Qt.setAttribute(m,"1"),y=Qt,Ot(),ht},Me=(Qt,tt)=>{if(!Qt)return null;if(Qt.collapsed){if(!te(Qt)){const _n=tt?1:-1,Zn=Mp(_n,r,Qt),ho=Zn.getNode(!tt);if(Fe(ho)){if(ub(ho))return $(_n,ho,tt?!Zn.isAtEnd():!1,!1);if(uf(ho)&&Uo(ho.nextSibling)){const Cs=o.createRng();return Cs.setStart(ho,0),Cs.setEnd(ho,0),Cs}}const as=Zn.getNode(tt);if(Fe(as)){if(ub(as))return $(_n,as,tt?!1:!Zn.isAtEnd(),!1);if(uf(as)&&Uo(as.previousSibling)){const Cs=o.createRng();return Cs.setStart(as,1),Cs.setEnd(as,1),Cs}}}return null}let Ze=Qt.startContainer,ht=Qt.startOffset;const sn=Qt.endOffset;if(bt(Ze)&&ht===0&&YC(Ze.parentNode)&&(Ze=Ze.parentNode,ht=o.nodeIndex(Ze),Ze=Ze.parentNode),!Wt(Ze))return null;if(sn===ht+1&&Ze===Qt.endContainer){const _n=Ze.childNodes[ht];if(A(_n))return Re(_n)}return null},Ie=()=>{y&&y.removeAttribute(m),Qr(be.fromDom(e.getBody()),"#"+u).each(ws),y=null},ct=()=>{i.destroy(),y=null},Ot=()=>{i.hide()};return Hd(e)||X(),{showCaret:$,showBlockCaretContainer:z,hideFakeCaret:Ot,destroy:ct}},Xj=(e,n)=>{let o=n;for(let r=e.previousSibling;bt(r);r=r.previousSibling)o+=r.data.length;return o},fF=(e,n,o,r,i)=>{if(bt(o)&&(r<0||r>o.data.length))return[];const u=i&&bt(o)?[Xj(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,i)),m=m.parentNode;return m===n?u.reverse():[]},rk=(e,n,o,r,i,u,m=!1)=>{const y=fF(e,n,o,r,m),x=fF(e,n,i,u,m);return{start:y,end:x}},XC=(e,n)=>{const o=n.slice(),r=o.pop();return so(r)?Fo(o,(u,m)=>u.bind(y=>W.from(y.childNodes[m])),W.some(e)).bind(u=>bt(u)&&(r<0||r>u.data.length)?W.none():W.some({node:u,offset:r})):W.none()},YR=(e,n)=>XC(e,n.start).bind(({node:o,offset:r})=>XC(e,n.end).map(({node:i,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(i,u),m})),mF=(e,n,o,r=!1)=>rk(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),zy=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,bt(n.firstChild)&&el(n.firstChild.data)),zy(e,r,o)}},ak=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(bt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),bt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),zy(e,i,o),i!==u&&zy(e,u,o))},JC=(e,n)=>W.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),XR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:ix(r).concat(e.blockPatterns),inlinePatterns:ch(r).concat(e.inlinePatterns)}},JR=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},hF=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Vy=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},gF=(e,n,o)=>{const r=YR(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),y=r.startOffset===0?i:i.splitText(r.startOffset),x=y.parentNode,A=m.parentNode;return{prefix:n,end:A.insertBefore(hF(e,n+"-end"),m),start:x.insertBefore(hF(e,n+"-start"),y)}},pF=(e,n,o)=>{zy(e,e.get(n.prefix+"-end"),o),zy(e,e.get(n.prefix+"-start"),o)},QR=e=>e.start.length===0,Jj=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),m=i.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},bF=(e,n,o,r)=>{const i=n.start;return jD(e,r.container,r.offset,Jj(i),o).bind(m=>{var y,x;const A=(x=(y=o.textContent)===null||y===void 0?void 0:y.indexOf(i))!==null&&x!==void 0?x:-1;if(A!==-1&&m.offset>=A+i.length){const $=e.createRng();return $.setStart(m.container,m.offset-i.length),$.setEnd(m.container,m.offset),W.some($)}else{const $=m.offset-i.length;return bT(m.container,$,o).map(z=>{const X=e.createRng();return X.setStart(z.container,z.offset),X.setEnd(m.container,m.offset),X}).filter(z=>z.toString()===i).orThunk(()=>bF(e,n,o,Am(m.container,0)))}})},Qj=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),W.some(m)}return ZD(o,r,i).bind(m=>bF(e,n,i,m).bind(x=>{var A;if(u){if(x.endContainer===m.container&&x.endOffset===m.offset)return W.none();if(m.offset===0&&((A=x.endContainer.textContent)===null||A===void 0?void 0:A.length)===x.endOffset)return W.none()}return W.some(x)}))},e5=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),m=o.pattern,y=o.position.container,x=o.position.offset;return bT(y,x-o.pattern.end.length,n).bind(A=>{const L=rk(i,u,A.container,A.offset,y,x,r);if(QR(m))return W.some({matches:[{pattern:m,startRng:L,endRng:L}],position:A});{const $=ik(e,o.remainingPatterns,A.container,A.offset,n,r),z=$.getOr({matches:[],position:A}),X=z.position;return Qj(i,m,X.container,X.offset,n,$.isNone()).map(te=>{const ie=mF(i,u,te,r);return{matches:z.matches.concat([{pattern:m,startRng:ie,endRng:L}]),position:Am(te.startContainer,te.startOffset)}})}})},ik=(e,n,o,r,i,u)=>{const m=e.dom;return ZD(o,r,m.getRoot()).bind(y=>{const x=JR(m,i,o,r);for(let A=0;A<n.length;A++){const L=n[A];if(!Wr(x,L.end))continue;const $=n.slice();$.splice(A,1);const z=e5(e,i,{pattern:L,remainingPatterns:$,position:y},u);if(z.isNone()&&r>0)return ik(e,n,o,r-1,i,u);if(z.isSome())return z}return W.none()})},vF=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?xe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},yF=(e,n,o,r)=>{const i=Vy(e.dom,o);ak(e.dom,i,r),vF(e,n,i)},eq=(e,n,o,r,i)=>{const u=e.dom,m=Vy(u,r),y=Vy(u,o);ak(u,y,i),ak(u,m,i);const x={prefix:o.prefix,start:o.end,end:r.start},A=Vy(u,x);vF(e,n,A)},tq=(e,n)=>{const o=$0("mce_textpattern"),r=is(n,(i,u)=>{const m=gF(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:m}])},[]);return is(r,(i,u)=>{const m=r.length-i.length-1,y=QR(u.pattern)?u.endMarker:gF(e,o+`_start${m}`,u.startRng);return i.concat([{...u,startMarker:y}])},[])},nq=e=>Ko(e,(n,o)=>o.end.length-n.end.length),oq=(e,n)=>{const o=Ss(e,r=>_t(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},wF=(e,n,o,r,i,u)=>{const m=ik(e,i.inlinePatterns,o,r,n,u).fold(()=>[],x=>x.matches),y=ik(e,nq(i.inlinePatterns),o,r,n,u).fold(()=>[],x=>x.matches);return oq(m,y)},CF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=tq(o,n);xe(i,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),y=x=>x===m;QR(u.pattern)?yF(e,u.pattern,u.endMarker,y):eq(e,u.pattern,u.startMarker,u.endMarker,y),pF(o,u.endMarker,y),pF(o,u.startMarker,y)}),e.selection.moveToBookmark(r)},SF=(e,n,o)=>KU(n,0,n).map(r=>{const i=r.container;return XB(i,o.start.length,n).each(u=>{const m=e.createRng();m.setStart(i,0),m.setEnd(u.container,u.offset),ak(e,m,y=>y===n)}),i}),xF=e=>(n,o)=>{const r=n.dom,i=o.pattern,u=YR(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),m=(y,x)=>{const A=x.get(y);return Gt(A)&&lo(A).exists(L=>En(L,"block"))};return JC(n,u).each(y=>{i.type==="block-format"?m(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,y,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,y,i),n.execCommand(i.cmd,!1,i.value)})}),!0},EF=e=>Ko(e,(n,o)=>o.start.length-n.start.length),_F=e=>(n,o)=>{const r=EF(n),i=o.replace(ea," ");return Vo(r,u=>e(u,o,i))},ck=(e,n)=>(o,r,i,u,m)=>{var y;m===void 0&&(m=(y=r.textContent)!==null&&y!==void 0?y:"");const x=o.dom,A=Ga(o);return x.is(r,A)?e(i.blockPatterns,m).map(L=>n&&ut.trim(m).length===L.start.length?[]:[{pattern:L,range:rk(x,x.getRoot(),r,0,r,0,u)}]).getOr([]):[]},sq=e=>/^\s[^\s]/.test(e),rq=xF((e,n,o)=>{SF(e,n,o).each(r=>{const i=be.fromDom(r),u=fp(i);sq(u)&&BS(i,u.slice(1))})}),aq=_F((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),iq=ck(aq,!0),cq=(e,n)=>{const o=e.selection.getRng();return JC(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),m=XR(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),y=wF(e,r,o.startContainer,u,m,!0),x=iq(e,r,m,!0);return{inlineMatches:y,blockMatches:x}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},lk=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();xe(n,r=>rq(e,r)),e.selection.moveToBookmark(o)},lq=xF(SF),uq=_F((e,n,o)=>n===e.start||o===e.start),dq=ck(uq,!1),fq=(e,n)=>{const o=e.selection.getRng();return JC(e,o).map(r=>{const i=Math.max(0,o.startOffset),u=JR(e.dom,r,o.startContainer,i),m=XR(n,r,u);return dq(e,r,m,!1,u)}).filter(r=>r.length>0)},mq=(e,n)=>{xe(n,o=>lq(e,o))},hq=(e,n)=>cq(e,n).fold($e,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{n4(e),CF(e,o),lk(e,r);const i=e.selection.getRng(),u=ZD(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(m=>{const y=m.container;y.data.charAt(m.offset-1)===jg&&(y.deleteData(m.offset-1,1),zy(e.dom,y.parentNode,x=>x===e.dom.getRoot()))})}),!0)),gq=(e,n)=>{const o=e.selection.getRng();JC(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=JR(e.dom,r,o.startContainer,i),m=XR(n,r,u),y=wF(e,r,o.startContainer,i,m,!1);y.length>0&&e.undoManager.transact(()=>{CF(e,y)})})},pq=(e,n)=>fq(e,n).fold($e,o=>(e.undoManager.transact(()=>{mq(e,o)}),!0)),TF=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},kF=(e,n)=>TF(e,n,(o,r)=>o===r.keyCode&&!Ht.modifierPressed(r)),bq=(e,n)=>TF(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),AF=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Ni(Ix(e).filter(m=>m.type==="inline-command"||m.type==="block-command"?e.queryCommandSupported(m.cmd):!0),X2(e)),i=()=>Ep(e);e.on("keydown",m=>{if(m.keyCode===13&&!Ht.modifierPressed(m)&&e.selection.isCollapsed()&&e.selection.isEditable()){const y=mf(r(),"enter");(y.inlinePatterns.length>0||y.blockPatterns.length>0||i())&&hq(e,y)&&m.preventDefault()}},!0),e.on("keydown",m=>{if(m.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const y=mf(r(),"space");(y.blockPatterns.length>0||i())&&pq(e,y)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const m=mf(r(),"space");(m.inlinePatterns.length>0||i())&&gq(e,m)}};e.on("keyup",m=>{kF(o,m)&&u()}),e.on("keypress",m=>{bq(n,m)&&vn.setEditorTimeout(e,u)})},vq=e=>{AF(e)},yq=e=>{const n=ut.each,o=Ht.BACKSPACE,r=Ht.DELETE,i=e.dom,u=e.selection,m=e.parser,y=Nn.browser,x=y.isFirefox(),A=y.isChromium()||y.isSafari(),L=Nn.deviceType.isiPhone()||Nn.deviceType.isiPad(),$=Nn.os.isMacOS()||Nn.os.isiOS(),z=(Yt,Ln)=>{try{e.getDoc().execCommand(Yt,!1,String(Ln))}catch{}},X=Yt=>Yt.isDefaultPrevented(),se=()=>{const Yt=zn=>{const qt=i.create("body"),vo=zn.cloneContents();return qt.appendChild(vo),u.serializer.serialize(qt,{format:"html"})},Ln=zn=>{const qt=Yt(zn),vo=i.createRng();vo.selectNode(e.getBody());const Eo=Yt(vo);return qt===Eo};e.on("keydown",zn=>{const qt=zn.keyCode;if(!X(zn)&&(qt===r||qt===o)&&e.selection.isEditable()){const vo=e.selection.isCollapsed(),Eo=e.getBody();if(vo&&!ca(e.schema,Eo)||!vo&&!Ln(e.selection.getRng()))return;zn.preventDefault(),e.setContent(""),Eo.firstChild&&i.isBlock(Eo.firstChild)?e.selection.setCursorLocation(Eo.firstChild,0):e.selection.setCursorLocation(Eo,0),e.nodeChanged()}})},te=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ie=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Yt=>{let Ln;if(Yt.target===e.getDoc().documentElement)if(Ln=u.getRng(),e.getBody().focus(),Yt.type==="mousedown"){if(su(Ln.startContainer))return;u.placeCaretAt(Yt.clientX,Yt.clientY)}else u.setRng(Ln)})},Ee=()=>{e.on("keydown",Yt=>{if(!X(Yt)&&Yt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ln=u.getNode(),zn=Ln.previousSibling;if(Ln.nodeName==="HR"){i.remove(Ln),Yt.preventDefault();return}zn&&zn.nodeName&&zn.nodeName.toLowerCase()==="hr"&&(i.remove(zn),Yt.preventDefault())}}})},Re=()=>{Range.prototype.getClientRects||e.on("mousedown",Yt=>{if(!X(Yt)&&Yt.target.nodeName==="HTML"){const Ln=e.getBody();Ln.blur(),vn.setEditorTimeout(e,()=>{Ln.focus()})}})},Me=()=>{const Yt=sc(e);e.on("click",Ln=>{const zn=Ln.target;/^(IMG|HR)$/.test(zn.nodeName)&&i.isEditable(zn)&&(Ln.preventDefault(),e.selection.select(zn),e.nodeChanged()),zn.nodeName==="A"&&i.hasClass(zn,Yt)&&zn.childNodes.length===0&&i.isEditable(zn.parentNode)&&(Ln.preventDefault(),u.select(zn))})},Ie=()=>{const Yt=()=>{const zn=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const qt=u.getStart();qt!==e.getBody()&&(i.setAttrib(qt,"style",null),n(zn,vo=>{qt.setAttributeNode(vo.cloneNode(!0))}))}},Ln=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",zn=>{let qt;return!X(zn)&&(zn.keyCode===8||zn.keyCode===46)&&Ln()?(qt=Yt(),e.getDoc().execCommand("delete",!1),qt(),zn.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",zn=>{if(!X(zn)&&Ln()){const qt=Yt();vn.setEditorTimeout(e,()=>{qt()})}})},ct=()=>{e.on("keydown",Yt=>{if(!X(Yt)&&Yt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ln=u.getNode().previousSibling;if(Ln&&Ln.nodeName&&Ln.nodeName.toLowerCase()==="table")return Yt.preventDefault(),!1}return!0})},Ot=()=>{e.on("keydown",Yt=>{if(X(Yt)||Yt.keyCode!==Ht.BACKSPACE)return;let Ln=u.getRng();const zn=Ln.startContainer,qt=Ln.startOffset,vo=i.getRoot();let Eo=zn;if(!(!Ln.collapsed||qt!==0)){for(;Eo.parentNode&&Eo.parentNode.firstChild===Eo&&Eo.parentNode!==vo;)Eo=Eo.parentNode;Eo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Eo),Ln=i.createRng(),Ln.setStart(zn,0),Ln.setEnd(zn,0),u.setRng(Ln))}})},Qt=()=>{const Yt=()=>{z("StyleWithCSS",!1),z("enableInlineTableEditing",!1),oc(e)||z("enableObjectResizing",!1)};q2(e)||e.on("BeforeExecCommand mousedown",Yt)},tt=()=>{const Yt=()=>{n(i.select("a:not([data-mce-block])"),Ln=>{var zn;let qt=Ln.parentNode;const vo=i.getRoot();if((qt==null?void 0:qt.lastChild)===Ln){for(;qt&&!i.isBlock(qt);){if(((zn=qt.parentNode)===null||zn===void 0?void 0:zn.lastChild)!==qt||qt===vo)return;qt=qt.parentNode}i.add(qt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ln=>{(Ln.type==="setcontent"||Ln.command==="mceInsertLink")&&Yt()})},Ze=()=>{e.on("init",()=>{z("DefaultParagraphSeparator",Ga(e))})},ht=Yt=>{const Ln=Yt.getBody(),zn=Yt.selection.getRng();return zn.startContainer===zn.endContainer&&zn.startContainer===Ln&&zn.startOffset===0&&zn.endOffset===Ln.childNodes.length},sn=()=>{e.on("keyup focusin mouseup",Yt=>{!Ht.modifierPressed(Yt)&&!ht(e)&&u.normalize()},!0)},_n=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Zn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ho=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Yt=>{let Ln;Yt.target.nodeName==="HTML"&&(Ln=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ln),e.selection.normalize(),e.nodeChanged())}))},as=()=>{$&&e.on("keydown",Yt=>{Ht.metaKeyPressed(Yt)&&!Yt.shiftKey&&(Yt.keyCode===37||Yt.keyCode===39)&&(Yt.preventDefault(),e.selection.getSel().modify("move",Yt.keyCode===37?"backward":"forward","lineboundary"))})},Cs=()=>{e.on("click",Yt=>{let Ln=Yt.target;do if(Ln.tagName==="A"){Yt.preventDefault();return}while(Ln=Ln.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},jr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Yt=>{Yt.preventDefault()})})},qi=()=>{m.addNodeFilter("br",Yt=>{let Ln=Yt.length;for(;Ln--;)Yt[Ln].attr("class")==="Apple-interchange-newline"&&Yt[Ln].remove()})},hi=it,Ft=()=>{if(!x||e.removed)return!1;const Yt=e.selection.getSel();return!Yt||!Yt.rangeCount||Yt.rangeCount===0},xn=()=>{A&&(ie(),Me(),jr(),te(),L&&(Zn(),ho(),Cs())),x&&(Re(),Qt(),_n(),as())},Zo=()=>{Ot(),se(),Nn.windowsPhone||sn(),A&&(ie(),Me(),Ze(),jr(),ct(),qi(),L?(Zn(),ho(),Cs()):te()),x&&(Ee(),Re(),Ie(),Qt(),tt(),_n(),as(),ct())};return Hd(e)?xn():Zo(),{refreshContentEditable:hi,isHidden:Ft}},OF=e=>e.toLowerCase()==="gpl",QC=e=>e.length>=64&&e.length<=255,wq=e=>OF(e)||QC(e)?"VALID":"INVALID",DF=e=>{const n=V4(e);!ce(U4(e))&&(In(n)||wq(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},t5=Vs.DOM,Cq=(e,n)=>{const o=be.fromDom(e.getBody()),r=pd(Jc(o)),i=be.fromTag("style");oa(i,"type","text/css"),Ls(i,be.fromText(n)),Ls(r,i),e.on("remove",()=>{ws(i)})},Sq=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,n5=e=>Qo(e,n=>In(n)===!1),o5=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return n5({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Sq(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:ew(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},RF=e=>{const n=e.options.get;return n5({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},MF=e=>{const n=e.options.get;return{...o5(e),...RF(e),...n5({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},xq=e=>{const n=py(o5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const y=o[m];let x=y.attr(r);if(x&&!y.attr(u)){if(x.indexOf("data:")===0||x.indexOf("blob:")===0)continue;r==="style"?(x=i.serializeStyle(i.parseStyle(x),y.name),x.length||(x=null),y.attr(u,x),y.attr(r,x)):r==="tabindex"?(y.attr(u,x),y.attr(r,null)):y.attr(u,e.convertURL(x,r,y.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),Bx(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new il("br",1))}}),n},Eq=e=>{const n=wv(e);n&&vn.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},_q=e=>{const n=e.dom.getRoot();!e.inline&&(!Fv(e)||e.selection.getStart(!0)===n)&&Zi(n).each(o=>{const r=o.getNode(),i=Xl(r)?Zi(r).getOr(o):o;e.selection.setRng(i.toRange())})},Tq=e=>{e.bindPendingEventDelegates(),e.initialized=!0,E4(e),e.focus(!0),_q(e),e.nodeChanged({initial:!0});const n=P4(e);ve(n)&&n.call(e,e),Eq(e),_g(e)&&t6(e,!0)},s5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,kq=(e,n,o)=>{const{pass:r,fail:i}=Oo(n,y=>tinymce.Resource.has(bh(y))),m=[...r.map(y=>{const x=tinymce.Resource.get(bh(y));return ce(x)?Promise.resolve(s5(e).loadRawCss(y,x)):Promise.resolve()}),s5(e).loadAll(i)];return e.inline?m:m.concat([e.ui.styleSheetLoader.loadAll(o)])},NF=e=>{const n=s5(e),o=V2(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let x="";ut.each(e.contentStyles,A=>{x+=A+`\r
`}),e.dom.addStyle(x)}const m=Promise.all(kq(e,r,o)).then(u).catch(u),y=O4(e);return y&&Cq(e,y),m},Aq=e=>{const n=e.getDoc(),o=e.getBody();dx(e),I4(e)||(n.body.spellcheck=!1,t5.setAttrib(o,"spellcheck","false")),e.quirks=yq(e),fx(e);const r=D4(e);r!==void 0&&(o.dir=r);const i=B4(e);i&&e.on("BeforeSetContent",u=>{ut.each(i,m=>{u.content=u.content.replace(m,y=>"<!--mce:protected "+escape(y)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},Oq=e=>{Hd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},uk=e=>{e.removed!==!0&&(Oq(e),Tq(e))},r5=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},a5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(t5.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=q2(e),e._editableRoot=N4(e),!ab(e)&&e.hasEditableRoot()&&(e.inline&&t5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=sV(e),e.schema=fs(RF(e)),e.dom=Vs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:H2(e),referrerPolicy:fv(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=xq(e),e.serializer=LI(MF(e),e),e.selection=II(e.dom,e.getWin(),e.serializer,e),e.annotator=Rs(e),e.formatter=kg(e),e.undoManager=m6(e),e._nodeChangeDispatcher=new DZ(e),e._selectionOverrides=Yj(e),mU(e),Z8(e),ND(e),Hd(e)||(kj(e),vq(e));const i=OZ(e);rT(e,i),bU(e),fV(e),YT(e);const u=wI(e);Aq(e),DF(e),u.fold(()=>{const m=r5(e);NF(e).then(()=>{uk(e),m()})},m=>{e.setProgressState(!0),NF(e).then(()=>{m().then(y=>{e.setProgressState(!1),uk(e),OI(e)},y=>{e.notificationManager.open({type:"error",text:String(y)}),uk(e),OI(e)})})})},PF=pt,Dq=(e,n,o)=>B(e,n,PF,o),i5=Vs.DOM,Rq=(e,n,o,r)=>{const i=be.fromTag("iframe");return r.each(u=>oa(i,"tabindex",u)),$a(i,o),$a(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),bl(i,"tox-edit-area__iframe"),i},IF=e=>{let n=sg(e)+"<html><head>";bx(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=ol(e),r=oM(e),i=e.translate(fm(e));return vx(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+vx(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},BF=(e,n)=>{const o=Nn.browser.isFirefox()?fm(e):"Rich Text Area",r=e.translate(o),i=Er(be.fromDom(e.getElement()),"tabindex").bind(gc),u=Rq(e.id,r,v7(e),i).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=IF(e),i5.add(n.iframeContainer,u)},Mq=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,a5(e)};if(Sv(e)||Nn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=Dq(be.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Nq=(e,n)=>{BF(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=i5.isHidden(n.editorContainer)),e.getElement().style.display="none",i5.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,Mq(e)},dk=Vs.DOM,fk=(e,n,o)=>{const r=wy.get(o),i=wy.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=ut.trim(o),r&&ut.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,ve(u.init)&&(u.init(e,i),n.push(o))}catch(u){YI(e,o,u)}}},mk=e=>e.replace(/^\-/,""),Ng=e=>{const n=[];xe(bv(e),o=>{fk(e,n,mk(o))})},hk=e=>{const n=ut.trim(dv(e)),o=e.ui.registry.getAll().icons,r={...R_.get("default").icons,...R_.get(n).icons};Tt(r,(i,u)=>{En(o,u)||e.ui.registry.addIcon(u,i)})},Uy=e=>{const n=yp(e);if(ce(n)){const o=_m.get(n);e.theme=o(e,_m.urls[n])||{},ve(e.theme.init)&&e.theme.init(e,_m.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},LF=e=>{const n=wp(e),o=yy.get(n);e.model=o(e,yy.urls[n])},Pq=e=>{const n=e.theme.renderUI;return n?n():gk(e)},Iq=e=>{const n=e.getElement(),r=yp(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},c5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Bq=e=>{const n=dk.create("div");return dk.insertAfter(n,e),c5(n,n)},gk=e=>{const n=e.getElement();return e.inline?c5(null):Bq(n)},pk=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ce(yp(e))?Pq(e):ve(yp(e))?Iq(e):gk(e)},h1=(e,n)=>{const o={show:W.from(n.show).getOr(it),hide:W.from(n.hide).getOr(it),isEnabled:W.from(n.isEnabled).getOr(pt),setEnabled:r=>{r&&(e.mode.get()==="readonly"||_g(e))||W.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},o0=async e=>{e.dispatch("ScriptsLoaded"),hk(e),Uy(e),LF(e),Ng(e);const n=await pk(e);h1(e,W.from(n.api).getOr({})),e.editorContainer=n.editorContainer,vh(e),e.inline?a5(e):Nq(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},g1=Vs.DOM,FF=e=>e.charAt(0)==="-",Lq=(e,n)=>{const o=z2(n),r=T4(n);if(!Od.hasCode(o)&&o!=="en"){const i=ls(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{jz(n,i,o)})}},Fq=(e,n)=>{const o=yp(e);if(ce(o)&&!FF(o)&&!En(_m.urls,o)){const r=R4(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;_m.load(o,i).catch(()=>{qz(e,i,o)})}},$q=(e,n)=>{const o=wp(e);if(o!=="plugin"&&!En(yy.urls,o)){const r=Ex(e),i=ce(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;yy.load(o,i).catch(()=>{bC(e,i,o)})}},Hq=e=>W.from(wx(e)).filter(ls).map(n=>({url:n,name:W.none()})),$F=(e,n,o)=>W.from(n).filter(r=>ls(r)&&!R_.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:W.some(r)})),HF=(e,n,o)=>{const r=$F(n,"default",o),i=Hq(n).orThunk(()=>$F(n,dv(n),""));xe(Xc([r,i]),u=>{e.add(u.url).catch(()=>{KI(n,u.url,u.name.getOrUndefined())})})},zq=(e,n)=>{const o=(r,i)=>{wy.load(r,i).catch(()=>{Zz(e,i,r)})};Tt(Hu(e),(r,i)=>{o(i,r),e.options.set("plugins",bv(e).concat(i))}),xe(bv(e),r=>{r=ut.trim(r),r&&!wy.urls[r]&&!FF(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},Vq=e=>{const n=yp(e);return!ce(n)||Fe(_m.get(n))},Uq=e=>{const n=wp(e);return Fe(yy.get(n))},mX=(e,n)=>{const o=_d.ScriptLoader,r=()=>{!e.removed&&Vq(e)&&Uq(e)&&o0(e)};Fq(e,n),$q(e,n),Lq(o,e),HF(o,e,n),zq(e,n),o.loadQueue().then(r,r)},Wq=(e,n)=>Oi.forElement(e,{contentCssCors:pv(n),referrerPolicy:fv(n)}),l5=e=>{const n=e.id;Od.setCode(z2(e));const o=()=>{g1.unbind(window,"ready",o),e.render()};if(!th.Event.domLoaded){g1.bind(window,"ready",o);return}if(!e.getElement())return;const r=be.fromDom(e.getElement()),i=zf(r);e.on("remove",()=>{Ao(r.dom.attributes,m=>Bs(r,m.name)),$a(r,i)}),e.ui.styleSheetLoader=Wq(r,e),hv(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||g1.getParent(n,"form");u&&(e.formElement=u,M4(e)&&!fr(e.getElement())&&(g1.insertAfter(g1.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},g1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Ax(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=RO(e),e.notificationManager=Uz(e),Lx(e)&&e.on("GetContent",m=>{m.save&&(m.content=g1.encode(m.content))}),Ox(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Dx(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),mX(e,e.suffix)},Zq=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,_g(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),qa(e,n))},jq=e=>e._editableRoot,zF=(e,n)=>({sections:ft(e),options:ft(n)}),VF=Y().deviceType,u5=VF.isPhone(),qq=VF.isTablet(),s0=e=>{if(en(e))return[];{const n=Gt(e)?e:e.split(/[ ,]/),o=dt(n,Ns);return Kt(o,ls)}},Gq=(e,n)=>{const o=si(n,(r,i)=>et(e,i));return zF(o.t,o.f)},Kq=(e,n,o={})=>{const r=e.sections(),i=Yo(r,n).getOr({});return ut.extend({},o,i)},d5=(e,n)=>En(e.sections(),n),Yq=(e,n)=>d5(e,n)?e.sections()[n]:{},UF=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Yo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),f5=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?ut.extend({},e.external_plugins,r):r},WF=(e,n)=>[...s0(e),...s0(n)],m5=(e,n,o,r)=>e&&d5(n,"mobile")?r:o,Xq=(e,n,o,r)=>{const i=s0(o.forced_plugins),u=s0(r.plugins),m=Yq(n,"mobile"),y=m.plugins?s0(m.plugins):u,x=m5(e,n,u,y),A=WF(i,x);return ut.extend(r,{forced_plugins:i,plugins:A})},hX=(e,n)=>e&&d5(n,"mobile"),gX=(e,n,o,r,i)=>{var u;const m=e?{mobile:UF((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},y=Gq(["mobile"],d1(m,i)),x=ut.extend(o,r,y.options(),hX(e,y)?Kq(y,"mobile"):{},{external_plugins:f5(r,y.options())});return Xq(e,y,r,x)},Jq=(e,n)=>{const o=dL(n);return gX(u5||qq,u5,o,e,o)},ZF=(e,n)=>dz(e,n),Qq=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{xe("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},eG=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return _t(i,u=>Fe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},tG=e=>{Qq(e),eG(e)},pX=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Nn.os.isMacOS()||Nn.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},bX=(e,n,o,r)=>{const i=be.fromDom(e.getRoot());return Iw(i,Qe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Jv(i,Qe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},jF=e=>{if(typeof e!="string"){const n=ut.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},qF=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?bX(r,o.getRng(),n,e.schema):n},bk=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=jF(n);rO(e,{...r,content:qF(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=uz(e,i.content,r);Vb(e,u,i),e.addVisual()})}},nG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{bk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{bk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{bk(e,r)},mceInsertContent:(n,o,r)=>{bk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(ob(e))}})},oG={"font-size":"size","font-family":"face"},vX=Su("font"),yX=(e,n,o)=>{const r=u=>Hi(u,e).orThunk(()=>vX(u)?Yo(oG,e).bind(m=>Er(u,m)):W.none()),i=u=>No(be.fromDom(n),u);return qw(be.fromDom(o),u=>r(u),i)},wX=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),sG=(e,n)=>W.from(Vs.DOM.getStyle(n,e,!0)),rG=e=>(n,o)=>W.from(o).map(be.fromDom).filter(Is).bind(r=>yX(e,n,r.dom).or(sG(e,r.dom))).getOr(""),aG=rG("font-size"),r0=M(wX,rG("font-family")),h5=e=>Zi(e.getBody()).bind(n=>{const o=n.container();return W.from(bt(o)?o.parentNode:o)}),vk=e=>W.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?W.none():W.from(e.selection.getStart(!0))}),GF=(e,n)=>vk(e).orThunk(Ae(h5,e)).map(be.fromDom).filter(Is).bind(n),yk=(e,n)=>GF(e,Hn(W.some,n)),g5=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=sb(e),i=H4(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},iG=e=>{const n=e.split(/\s*,\s*/);return dt(n,o=>o.indexOf(" ")!==-1&&!(cs(o,'"')||cs(o,"'"))?`'${o}'`:o).join(",")},cG=(e,n)=>{const o=g5(e,n);e.formatter.toggle("fontname",{value:iG(o)}),e.nodeChanged()},lG=e=>yk(e,n=>r0(e.getBody(),n.dom)).getOr(""),uG=(e,n)=>{e.formatter.toggle("fontsize",{value:g5(e,n)}),e.nodeChanged()},dG=e=>yk(e,n=>aG(e.getBody(),n.dom)).getOr(""),fG=e=>yk(e,n=>{const o=be.fromDom(e.getBody()),r=qw(n,u=>Hi(u,"line-height"),Ae(No,o)),i=()=>{const u=parseFloat(vr(n,"line-height")),m=parseFloat(vr(n,"font-size"));return String(u/m)};return r.getOrThunk(i)}).getOr(""),p1=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},mG=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{cG(e,i)},FontSize:(o,r,i)=>{uG(e,i)},LineHeight:(o,r,i)=>{p1(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(ce(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},KF=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>lG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>dG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>fG(e))},hG=e=>{mG(e),KF(e)},wk=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},gG=e=>{e.editorCommands.addCommands({Indent:()=>{uU(e)},Outdent:()=>{vB(e)}}),e.editorCommands.addCommands({Outdent:()=>gB(e)},"state")},pG=e=>{const n=(o,r,i)=>{if(e.mode.isReadOnly())return;const u=ce(i)?{href:i}:i,m=e.dom.getParent(e.selection.getNode(),"a");Je(u)&&ce(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},bG=(e,n,o,r)=>{const i=e.dom,u=y=>i.isBlock(y)&&y.parentElement===o,m=u(n)?n:i.getParent(r,u,o);return W.from(m).map(be.fromDom)},p5=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,m=UC(o,u);if(!m||!m.isContentEditable)return;const y=n?ui:yc,x=Ga(e);bG(e,i,m,u).each(A=>{const L=ZW(e,u,A.dom,m,!1,x);y(A,be.fromDom(L)),e.selection.setCursorLocation(L,0),e.dispatch("NewBlock",{newBlock:L}),VC(e,"insertParagraph")})},vG=e=>p5(e,!0),yG=e=>p5(e,!1),wG=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{vG(e)},InsertNewBlockAfter:()=>{yG(e)}})},CG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{ZC(GL,e)},mceInsertNewLine:(n,o,r)=>{n8(e,r)},InsertLineBreak:(n,o,r)=>{ZC(JL,e)}})},b5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>Wt(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),rt);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},SG=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{ss(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},xG=e=>{tG(e),pX(e),wk(e),b5(e),nG(e),pG(e),gG(e),wG(e),CG(e),hG(e),SG(e)},ti=["toggleview"],YF=e=>et(ti,e.toLowerCase());class XF{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,m=n.toLowerCase(),y=i==null?void 0:i.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!y?u.focus():w3(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const A=this.commands.exec[m];return ve(A)?(A(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!YF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ve(r)?r(o):!1}queryCommandValue(n){if(!YF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ve(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Tt(n,(i,u)=>{xe(u.toLowerCase().split(","),m=>{r[o][m]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,m,y)=>o.call(r??this.editor,m,y)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const v5=ut.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ck{static isNative(n){return!!v5[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||$e}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=z1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let m=0,y=u.length;m<y;m++){const x=u[m];if(!x.removed){if(x.once&&this.off(r,x.func),i.isImmediatePropagationStopped())return i;if(x.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=$e),o){const u={func:o,removed:!1};i&&ut.extend(u,i);const m=n.toLowerCase().split(" ");let y=m.length;for(;y--;){const x=m[y];let A=this.bindings[x];A||(A=[],this.toggleEvent(x,!0)),r?A=[u,...A]:A=[...A,u],this.bindings[x]=A}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let m=this.bindings[u];if(!u)return Tt(this.bindings,(y,x)=>{this.toggleEvent(x,!1),delete this.bindings[x]}),this;if(m){if(!o)m.length=0;else{const y=Oo(m,x=>x.func===o);m=y.fail,this.bindings[u]=m,xe(y.pass,x=>{x.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Tt(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const a0=e=>(e._eventDispatcher||(e._eventDispatcher=new Ck({scope:e,toggleEvent:(n,o)=>{Ck.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),y5={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return z1(e.toLowerCase(),n??{},r);const i=a0(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return a0(this).on(e,n,o)},off(e,n){return a0(this).off(e,n)},once(e,n){return a0(this).once(e,n)},hasEventListeners(e){return a0(this).has(e)}},Sk=Vs.DOM;let i0;const xk=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=W2(e);return o?(e.eventRoot||(e.eventRoot=Sk.select(o)[0]),e.eventRoot):e.getBody()},EG=e=>!e.hidden&&!_g(e),JF=(e,n,o)=>{EG(e)?e.dispatch(n,o):_g(e)&&Qz(e,o)},QF=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=xk(e,n);if(W2(e)){if(i0||(i0={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||i0&&(Tt(i0,(i,u)=>{e.dom.unbind(xk(e,u))}),i0=null)})),i0[n])return;const r=i=>{const u=i.target,m=e.editorManager.get();let y=m.length;for(;y--;){const x=m[y].getBody();(x===u||Sk.isChildOf(u,x))&&JF(m[y],n,i)}};i0[n]=r,Sk.bind(o,n,r)}else{const r=i=>{JF(e,n,i)};Sk.bind(o,n,r),e.delegates[n]=r}},e$={...y5,bindPendingEventDelegates(){const e=this;ut.each(e._pendingNativeEvents,n=>{QF(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?QF(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(xk(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Tt(e.delegates,(r,i)=>{e.dom.unbind(xk(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},Wy=e=>ce(e)?{value:e.split(/[ ,]/),valid:!0}:at(e,ce)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Om=e=>{const n=(()=>{switch(e){case"array":return Gt;case"boolean":return Xt;case"function":return ve;case"number":return so;case"object":return Je;case"string":return ce;case"string[]":return Wy;case"object[]":return o=>at(o,Je);case"regexp":return o=>xt(o,RegExp);default:return pt}})();return o=>w5(o,n,`The value must be a ${e}.`)},_G=e=>ce(e.processor),t$=(e,n)=>{const o=lr(n.message)?"":`. ${n.message}`;return e+o},n$=e=>e.valid,w5=(e,n,o="")=>{const r=n(e);return Xt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},TG=(e,n,o)=>{if(!In(n)){const r=w5(n,o);if(n$(r))return r.value;console.error(t$(`Invalid default value passed for the "${e}" option`,r))}},kG=(e,n,o=n)=>{const r={},i={},u=(X,se,te)=>{const ie=w5(se,te);return n$(ie)?(i[X]=ie.value,!0):(console.warn(t$(`Invalid value passed for the ${X} option`,ie)),!1)},m=(X,se)=>{const te=_G(se)?Om(se.processor):se.processor,ie=TG(X,se.default,te);r[X]={...se,default:ie,processor:te},Yo(i,X).orThunk(()=>Yo(n,X)).each(Re=>u(X,Re,te))},y=X=>En(r,X);return{register:m,isRegistered:y,get:X=>Yo(i,X).orThunk(()=>Yo(r,X).map(se=>se.default)).getOrUndefined(),set:(X,se)=>{if(y(X)){const te=r[X];return te.immutable?(console.error(`"${X}" is an immutable option and cannot be updated`),!1):u(X,se,te.processor)}else return console.warn(`"${X}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:X=>{const se=y(X);return se&&delete i[X],se},isSet:X=>En(i,X),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(X,se)=>Xt(se)||so(se)||ce(se)||oe(se)||Gt(se)||Dn(se)?se:Object.prototype.toString.call(se))))}catch(X){console.error(X)}}}},AG=(e,n)=>{e.dom.contentEditable="true"},OG=(e,n)=>{const o=be.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&AG(o),QI(e)):(e.readonly=!1,e6(e))},eS=e=>e.readonly,CX=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{eS(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&eS(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&eS(e)){const o=e.undoManager.add();Fe(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(eS(e)){const n=e.undoManager.add();Fe(n)&&e.undoManager.undo()}})},DG=["design","readonly"],o$=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&OG(e,u.editorReadOnly),n.set(r),O2(e,r)},RG=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&_g(e))){if(!En(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?o$(e,o,n,r):e.on("init",()=>o$(e,o,n,r))}},MG=(e,n,o)=>{if(et(DG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},NG=e=>{const n=$s("design"),o=$s({design:{activate:it,deactivate:it,editorReadOnly:!1},readonly:{activate:it,deactivate:it,editorReadOnly:!0}});return CX(e),tV(e),{isReadOnly:()=>eS(e),set:r=>RG(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(MG(o.get(),r,i))}}},C5=ut.each,S5=ut.explode,PG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},s$=ut.makeMap("alt,ctrl,shift,meta,access"),IG=e=>e in s$,BG=e=>{const n={},o=Nn.os.isMacOS()||Nn.os.isiOS();C5(S5(e.toLowerCase(),"+"),u=>{IG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=PG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in s$)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class r${constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(C5(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,m=u.normalizeCommandFunc(r);return C5(S5(ut.trim(n)),y=>{const x=u.createShortcut(y,o,m,i);u.shortcuts[x.id]=x}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:ut.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=ut.map(S5(n,">"),BG);return u[u.length-1]=ut.extend(u[u.length-1],{func:r,scope:i||this.editor}),ut.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const LG=()=>{const e={},n={},o={},r={},i={},u={},m={},y={},x={},A=(X,se)=>(te,ie)=>{X[te.toLowerCase()]={...ie,type:se}},L=(X,se)=>(te,ie)=>{X[te.toLowerCase()]={type:se,...ie}},$=(X,se)=>r[X.toLowerCase()]=se,z=(X,se)=>m[X.toLowerCase()]=se;return{addButton:A(e,"button"),addGroupToolbarButton:A(e,"grouptoolbarbutton"),addToggleButton:A(e,"togglebutton"),addMenuButton:A(e,"menubutton"),addSplitButton:A(e,"splitbutton"),addMenuItem:A(n,"menuitem"),addNestedMenuItem:A(n,"nestedmenuitem"),addToggleMenuItem:A(n,"togglemenuitem"),addAutocompleter:A(o,"autocompleter"),addContextMenu:A(i,"contextmenu"),addContextToolbar:A(u,"contexttoolbar"),addContextForm:L(u,"contextform"),addSidebar:A(y,"sidebar"),addView:A(x,"views"),addIcon:$,addContext:z,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:y,views:x,contexts:m})}},FG=()=>{const e=LG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},c0=Vs.DOM,a$=ut.extend,$G=ut.each;class Ek{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,a$(this,e$);const i=this;this.id=n,this.hidden=!1;const u=Jq(r.defaultOptions,o);this.options=kG(i,u,o),px(i);const m=this.options.get;m("deprecation_warnings")&&zI(o,u);const y=m("suffix");y&&(r.suffix=y),this.suffix=r.suffix;const x=m("base_url");x&&r._setBaseUrl(x),this.baseUri=r.baseURI;const A=fv(i);A&&(_d.ScriptLoader._setReferrerPolicy(A),Vs.DOM.styleSheetLoader._setReferrerPolicy(A));const L=pv(i);Fe(L)&&Vs.DOM.styleSheetLoader._setContentCssCors(L),ec.languageLoad=m("language_load"),ec.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Bi(bx(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=hv(i),this.hasVisual=yv(i),this.shortcuts=new r$(this),this.editorCommands=new XF(this),xG(this);const $=m("cache_suffix");$&&(Nn.cacheSuffix=$.replace(/^[\?\&]+/,"")),this.ui={registry:FG(),styleSheetLoader:void 0,show:it,hide:it,setEnabled:it,isEnabled:pt},this.mode=NG(i),r.dispatch("SetupEditor",{editor:this});const z=dh(i);ve(z)&&z.call(i,i)}render(){l5(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return hr(this)}translate(n){return Od.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Fe(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:pt,default:o})),!i.isSet(n)&&!In(o)?o:i.get(n)}hasPlugin(n,o){return et(bv(this),n)?o?wy.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(c0.show(n.getContainer()),c0.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(c0.hide(n.getContainer()),c0.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=fr(r)?r.value:r.innerHTML,m=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const m={...i,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,fr(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const y=c0.getParent(o.id,"form");y&&$G(y.elements,x=>x.name===o.id?(x.value=u,!1):!0)}return m.element=i.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return r1(this,n,o)}getContent(n){return PY(this,n)}insertContent(n,o){o&&(n=a$({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?r1(this,this.startContent,{format:"raw"}):r1(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||c0.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=c0.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,m=fh(i);if(ve(m))return m.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||Je(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const y=new Bi(n);return y.protocol!=="http"&&y.protocol!=="https"&&y.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){ZF(this,n)}setEditableRoot(n){Zq(this,n)}hasEditableRoot(){return jq(this)}remove(){Iz(this)}destroy(n){Yu(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Zy=Vs.DOM,_k=ut.each;let i$=!1,Tk,Ml=[];const tS=e=>{const n=e.type;_k(b1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},c$=e=>{if(e!==i$){const n=Vs.DOM;e?(n.bind(window,"resize",tS),n.bind(window,"scroll",tS)):(n.unbind(window,"resize",tS),n.unbind(window,"scroll",tS)),i$=e}},l$=e=>{const n=Ml;return Ml=Kt(Ml,o=>e!==o),b1.activeEditor===e&&(b1.activeEditor=Ml.length>0?Ml[0]:null),b1.focusedEditor===e&&(b1.focusedEditor=null),n.length!==Ml.length},HG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(l$(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},zG=document.compatMode!=="CSS1Compat",b1={...y5,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.0",releaseDate:"2024-12-11",i18n:Od,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Bi.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const y=u[m].src||"";if(y==="")continue;const x=y.substring(y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(y)){x.indexOf(".min")!==-1&&(o=".min"),n=y.substring(0,y.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new Bi(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Bi(e.baseURL),e.suffix=o,zt(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Tt(r,(i,u)=>{ec.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=ut.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(L,$)=>L.inline&&$.tagName.toLowerCase()in r,u=L=>{let $=L.id;return $||($=Yo(L,"name").filter(z=>!Zy.get(z)).getOrThunk(Zy.uniqueId),L.setAttribute("id",$)),$},m=L=>{const $=e[L];if($)return $.apply(n,[])},y=L=>Nn.browser.isIE()||Nn.browser.isEdge()?(vC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):zG?(vC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ce(L.selector)?Zy.select(L.selector):Fe(L.target)?[L.target]:[];let x=L=>{o=L};const A=()=>{let L=0;const $=[];let z;const X=(se,te,ie)=>{const Ee=new Ek(se,te,n);$.push(Ee),Ee.on("init",()=>{++L===z.length&&x($)}),Ee.targetElm=Ee.targetElm||ie,Ee.render()};Zy.unbind(window,"ready",A),m("onpageload"),z=Ki(y(e)),ut.each(z,se=>{HG(n.get(se.id))}),z=ut.grep(z,se=>!n.get(se.id)),z.length===0?x([]):_k(z,se=>{i(e,se)?vC("Could not initialize inline editor on invalid inline target element",se):X(u(se),e,se)})};return Zy.bind(window,"ready",A),new Promise(L=>{o?L(o):x=$=>{L($)}})},get(e){return arguments.length===0?Ml.slice(0):ce(e)?Vo(Ml,n=>n.id===e).getOr(null):so(e)&&Ml[e]?Ml[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Ml.push(e),c$(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Tk||(Tk=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",Tk))),e},createEditor(e,n){return this.add(new Ek(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Ml.length-1;r>=0;r--)n.remove(Ml[r]);return}if(ce(e)){_k(Zy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,oe(n.get(o.id))?null:(l$(o)&&n.dispatch("RemoveEditor",{editor:o}),Ml.length===0&&window.removeEventListener("beforeunload",Tk),o.remove(),c$(Ml.length>0),o)},execCommand(e,n,o){var r;const i=this,u=Je(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const m=o.options;new Ek(u,m,i).render()}return!0}case"mceRemoveEditor":{const m=i.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=i.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{_k(Ml,e=>{e.save()})},addI18n:(e,n)=>{Od.add(e,n)},translate:e=>Od.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Bi(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Bi(this.baseURL)}};b1.setup();const VG=(()=>{const e=Aa(),n=u=>({items:u,types:ts(u),getType:m=>Yo(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),u$=Math.min,l0=Math.max,kk=Math.round,d$=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,m=e.h,y=n.w,x=n.h,A=(o||"").split("");return A[0]==="b"&&(i+=x),A[1]==="r"&&(r+=y),A[0]==="c"&&(i+=kk(x/2)),A[1]==="c"&&(r+=kk(y/2)),A[3]==="b"&&(i-=m),A[4]==="r"&&(r-=u),A[3]==="c"&&(i-=kk(m/2)),A[4]==="c"&&(r-=kk(u/2)),jy(r,i,u,m)},UG=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=d$(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},WG=(e,n,o)=>jy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),ZG=(e,n)=>{const o=l0(e.x,n.x),r=l0(e.y,n.y),i=u$(e.x+e.w,n.x+n.w),u=u$(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:jy(o,r,i-o,u-r)},jG=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,m=e.y+e.h;const y=n.x+n.w,x=n.y+n.h,A=l0(0,n.x-r),L=l0(0,n.y-i),$=l0(0,u-y),z=l0(0,m-x);return r+=A,i+=L,o&&(u+=A,m+=L,r-=$,i-=z),u-=$,m-=z,jy(r,i,u-r,m-i)},jy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),f$={inflate:WG,relativePosition:d$,findBestRelativePosition:UG,intersect:ZG,clamp:jG,create:jy,fromClientRect:e=>jy(e.left,e.top,e.width,e.height)},EX=(e,n,o=1e3)=>{let r=!1,i=null;const u=A=>(...L)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),A.apply(null,L))},m=u(e),y=u(n);return{start:(...A)=>{!r&&i===null&&(i=setTimeout(()=>y.apply(null,A),o))},resolve:m,reject:y}},GG=(()=>{const e={},n={},o={};return{load:(x,A)=>{const L=`Script at URL "${A}" failed to load`,$=`Script at URL "${A}" did not call \`tinymce.Resource.add('${x}', data)\` within 1 second`;if(e[x]!==void 0)return e[x];{const z=new Promise((X,se)=>{const te=EX(X,se);n[x]=te.resolve,_d.ScriptLoader.loadScript(A).then(()=>te.start($),()=>te.reject(L))});return e[x]=z,z}},add:(x,A)=>{n[x]!==void 0&&(n[x](A),delete n[x]),e[x]=Promise.resolve(A),o[x]=A},has:x=>x in o,get:x=>o[x],unload:x=>{delete e[x],delete o[x]}}})(),m$=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let nS;try{const e="__storage_test__";nS=window.localStorage,nS.setItem(e,e),nS.removeItem(e)}catch{nS=m$()}var KG=nS;const YG={geom:{Rect:f$},util:{Delay:vn,Tools:ut,VK:Ht,URI:Bi,EventDispatcher:Ck,Observable:y5,I18n:Od,LocalStorage:KG,ImageUploader:c6},dom:{EventUtils:th,TreeWalker:Wa,TextSeeker:Xh,DOMUtils:Vs,ScriptLoader:_d,RangeUtils:Up,Serializer:LI,StyleSheetLoader:Ro,ControlSelection:Vp,BookmarkManager:rl,Selection:II,Event:th.Event},html:{Styles:eh,Entities:Uh,Node:il,Schema:fs,DomParser:py,Writer:QM,Serializer:Wp},Env:Nn,AddOnManager:ec,Annotator:Rs,Formatter:kg,UndoManager:m6,EditorCommands:XF,WindowManager:RO,NotificationManager:Uz,EditorObservable:e$,Shortcuts:r$,Editor:Ek,FocusManager:C3,EditorManager:b1,DOM:Vs.DOM,ScriptLoader:_d.ScriptLoader,PluginManager:wy,ThemeManager:_m,ModelManager:yy,IconManager:R_,Resource:GG,FakeClipboard:VG,trim:ut.trim,isArray:ut.isArray,is:ut.is,toArray:ut.toArray,makeMap:ut.makeMap,each:ut.each,map:ut.map,grep:ut.grep,inArray:ut.inArray,extend:ut.extend,walk:ut.walk,resolve:ut.resolve,explode:ut.explode,_addCacheSuffix:ut._addCacheSuffix},h$=ut.extend(b1,YG),XG=e=>{try{p.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(h$),XG(h$)})()}(bK)),bK.exports}xse();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});var LJ={},FJ;function Ese(){return FJ||(FJ=1,function(){const p=Object.getPrototypeOf,g=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},w=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&g(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},E=t=>s=>w(s)===t,N=t=>s=>typeof s===t,V=t=>s=>t===s,K=(t,s)=>ue(t)&&g(t,s,(a,c)=>p(a)===c),j=E("string"),ue=E("object"),ge=t=>K(t,Object),Ce=E("array"),Xe=V(null),Lt=N("boolean"),Zt=V(void 0),Pt=t=>t==null,Ct=t=>!Pt(t),Ne=N("function"),ln=N("number"),xt=(t,s)=>{if(Ce(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},ce=()=>{},Je=t=>()=>t(),Dn=(t,s)=>(...a)=>t(s.apply(null,a)),Gt=(t,s)=>a=>t(s(a)),oe=t=>()=>t,Xt=t=>t,In=(t,s)=>t===s;function en(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Fe=t=>s=>!t(s),ve=t=>()=>{throw new Error(t)},so=t=>t(),at=oe(!1),it=oe(!0);class M{constructor(s,a){this.tag=s,this.value=a}static some(s){return new M(!0,s)}static none(){return M.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?M.some(s(this.value)):M.none()}bind(s){return this.tag?s(this.value):M.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:M.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Ct(s)?M.some(s):M.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}M.singletonNone=new M(!1);const Hn=Array.prototype.slice,ft=Array.prototype.indexOf,xo=Array.prototype.push,yn=(t,s)=>ft.call(t,s),Ae=(t,s)=>{const a=yn(t,s);return a===-1?M.none():M.some(a)},wt=(t,s)=>yn(t,s)>-1,Mn=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},fn=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},io=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=Hn.call(t,c,c+s);a.push(d)}return a},$e=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const h=t[d];c[d]=s(h,d)}return c},pt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},W=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},Us=(t,s)=>{const a=[],c=[];for(let d=0,h=t.length;d<h;d++){const b=t[d];(s(b,d)?a:c).push(b)}return{pass:a,fail:c}},no=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];s(h,c)&&a.push(h)}return a},_o=(t,s,a)=>(W(t,(c,d)=>{a=s(a,c,d)}),a),zo=(t,s,a)=>(pt(t,(c,d)=>{a=s(a,c,d)}),a),pi=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const h=t[c];if(s(h,c))return M.some(h);if(a(h,c))break}return M.none()},et=(t,s)=>pi(t,s,at),_t=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return M.some(a)}return M.none()},dt=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!Ce(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);xo.apply(s,t[a])}return s},xe=(t,s)=>dt($e(t,s)),Ao=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Oo=t=>{const s=Hn.call(t,0);return s.reverse(),s},Kt=(t,s)=>no(t,a=>!wt(s,a)),is=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const h=t[c];a[String(h)]=s(h,c)}return a},Fo=t=>[t],zr=(t,s)=>{const a=Hn.call(t,0);return a.sort(s),a},Vo=(t,s)=>s>=0&&s<t.length?M.some(t[s]):M.none(),Ws=t=>Vo(t,0),oi=t=>Vo(t,t.length-1),_s=Ne(Array.from)?Array.from:t=>Hn.call(t),Ss=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return M.none()},xs=Object.keys,Gr=Object.hasOwnProperty,Ts=(t,s)=>{const a=xs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];s(b,h)}},Ko=(t,s)=>Mc(t,(a,c)=>({k:c,v:s(a,c)})),Mc=(t,s)=>{const a={};return Ts(t,(c,d)=>{const h=s(c,d);a[h.k]=h.v}),a},lo=t=>(s,a)=>{t[a]=s},hs=(t,s,a,c)=>{Ts(t,(d,h)=>{(s(d,h)?a:c)(d,h)})},Rr=(t,s)=>{const a={},c={};return hs(t,s,lo(a),lo(c)),{t:a,f:c}},Li=(t,s)=>{const a={};return hs(t,s,lo(a),ce),a},Ki=(t,s)=>{const a=[];return Ts(t,(c,d)=>{a.push(s(c,d))}),a},ts=(t,s)=>{const a=xs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];if(s(b,h,t))return M.some(b)}return M.none()},jc=t=>Ki(t,Xt),Tt=(t,s)=>go(t,s)?M.from(t[s]):M.none(),go=(t,s)=>Gr.call(t,s),Vr=(t,s)=>go(t,s)&&t[s]!==void 0&&t[s]!==null,Ur=(t,s,a=In)=>t.exists(c=>a(c,s)),La=(t,s,a=In)=>Fa(t,s,a).getOr(t.isNone()&&s.isNone()),si=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},Qo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return M.none()}return M.some(s)},Fa=(t,s,a)=>t.isSome()&&s.isSome()?M.some(a(t.getOrDie(),s.getOrDie())):M.none(),Fi=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?M.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):M.none(),Yo=(t,s)=>t!=null?M.some(s(t)):M.none(),En=(t,s)=>t?M.some(s):M.none(),sr=(t,s)=>t+s,ri=(t,s)=>t.substring(s),fl=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,ml=(t,s)=>Zs(t,s)?ri(t,s.length):t,vs=(t,s)=>Ea(t,s)?t:sr(t,s),Cr=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?Zt(c)?!0:d+s.length<=c:!1},Zs=(t,s)=>fl(t,s,0),Ea=(t,s)=>fl(t,s,t.length-s.length),Mr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),pe=t=>t.length>0,fe=t=>!pe(t),Ve=t=>{const s=parseFloat(t);return isNaN(s)?M.none():M.some(s)},Ge=t=>t.style!==void 0&&Ne(t.style.getPropertyValue),Cn=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Os(c.childNodes[0])},Fn=(t,s)=>{const c=(s||document).createElement(t);return Os(c)},Qn=(t,s)=>{const c=(s||document).createTextNode(t);return Os(c)},Os=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Ke={fromHtml:Cn,fromTag:Fn,fromText:Qn,fromDom:Os,fromPoint:(t,s,a)=>M.from(t.dom.elementFromPoint(s,a)).map(Os)},rr=typeof window<"u"?window:Function("return this;")(),Sr=(t,s)=>{let a=s??rr;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},pa=(t,s)=>{const a=t.split(".");return Sr(a,s)},es=(t,s)=>pa(t,s),qc=(t,s)=>{const a=es(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Kr=Object.getPrototypeOf,_a=t=>qc("HTMLElement",t),Ms=t=>{const s=pa("ownerDocument.defaultView",t);return ue(t)&&(_a(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Kr(t).constructor.name))},ns=9,cs=11,Wr=1,hc=3,Ns=t=>t.dom.nodeName.toLowerCase(),hl=t=>t.dom.nodeType,ai=t=>s=>hl(s)===t,ls=t=>lr(t)&&Ms(t.dom),lr=ai(Wr),ar=ai(hc),gc=ai(ns),bi=ai(cs),ba=t=>s=>lr(s)&&Ns(s)===t,ys=(t,s)=>{const a=t.dom;if(a.nodeType!==Wr)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Gd=t=>t.nodeType!==Wr&&t.nodeType!==ns&&t.nodeType!==cs||t.childElementCount===0,pc=(t,s)=>{const a=s===void 0?document:s.dom;return Gd(a)?[]:$e(a.querySelectorAll(t),Ke.fromDom)},vu=(t,s)=>{const a=s===void 0?document:s.dom;return Gd(a)?M.none():M.from(a.querySelector(t)).map(Ke.fromDom)},yo=(t,s)=>t.dom===s.dom,bc=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},Ps=t=>Ke.fromDom(t.dom.ownerDocument),Fl=t=>gc(t)?t:Ps(t),$i=t=>Ke.fromDom(Fl(t).dom.documentElement),Pc=t=>Ke.fromDom(Fl(t).dom.defaultView),Nr=t=>M.from(t.dom.parentNode).map(Ke.fromDom),rd=t=>Nr(t),ii=t=>M.from(t.dom.parentElement).map(Ke.fromDom),ad=(t,s)=>{const a=Ne(s)?s:at;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const h=c.parentNode,b=Ke.fromDom(h);if(d.push(b),a(b)===!0)break;c=h}return d},Gc=t=>M.from(t.dom.offsetParent).map(Ke.fromDom),id=t=>M.from(t.dom.nextSibling).map(Ke.fromDom),pr=t=>$e(t.dom.childNodes,Ke.fromDom),Yi=(t,s)=>{const a=t.dom.childNodes;return M.from(a[s]).map(Ke.fromDom)},Kc=t=>Yi(t,0),yu=(t,s)=>({element:t,offset:s}),gl=(t,s)=>{const a=pr(t);return a.length>0&&s<a.length?yu(a[s],0):yu(t,s)},Yc=t=>bi(t)&&Ct(t.dom.host),br=t=>Ke.fromDom(t.dom.getRootNode()),Pr=t=>Yc(t)?t:Ke.fromDom(Fl(t).dom.body),vi=t=>$l(t).isSome(),$l=t=>{const s=br(t);return Yc(s)?M.some(s):M.none()},wu=t=>Ke.fromDom(t.dom.host),Y=t=>{if(Ct(t.target)){const s=Ke.fromDom(t.target);if(lr(s)&&me(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Ws(a)}}return M.from(t.target)},me=t=>Ct(t.dom.shadowRoot),ke=t=>{const s=ar(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return $l(Ke.fromDom(s)).fold(()=>a.body.contains(s),Gt(ke,wu))},Ye=()=>kt(Ke.fromDom(document)),kt=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Ke.fromDom(s)},nn=(t,s,a)=>{if(j(a)||Lt(a)||ln(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},$t=(t,s,a)=>{nn(t.dom,s,a)},Nn=(t,s)=>{const a=t.dom;Ts(s,(c,d)=>{nn(a,d,c)})},Vn=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},To=(t,s)=>M.from(Vn(t,s)),H=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ee=(t,s)=>{t.dom.removeAttribute(s)},ye=t=>zo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Be=(t,s,a)=>{if(!j(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ge(t)&&t.style.setProperty(s,a)},cn=(t,s)=>{Ge(t)&&t.style.removeProperty(s)},It=(t,s,a)=>{const c=t.dom;Be(c,s,a)},$o=(t,s)=>{const a=t.dom;Ts(s,(c,d)=>{Be(a,d,c)})},ta=(t,s)=>{const a=t.dom;Ts(s,(c,d)=>{c.fold(()=>{cn(a,d)},h=>{Be(a,d,h)})})},ut=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!ke(t)?ci(a,s):d},ci=(t,s)=>Ge(t)?t.style.getPropertyValue(s):"",us=(t,s)=>{const a=t.dom,c=ci(a,s);return M.from(c).filter(d=>d.length>0)},Xc=t=>{const s={},a=t.dom;if(Ge(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},ur=(t,s,a)=>{const c=Ke.fromTag(t);return It(c,s,a),us(c,s).isSome()},uo=(t,s)=>{const a=t.dom;cn(a,s),Ur(To(t,"style").map(Mr),"")&&ee(t,"style")},yi=t=>t.dom.offsetWidth,Yr=(t,s)=>{const a=(S,T)=>{if(!ln(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const D=S.dom;Ge(D)&&(D.style[t]=T+"px")},c=S=>{const T=s(S);if(T<=0||T===null){const D=ut(S,t);return parseFloat(D)||0}return T},d=c,h=(S,T)=>zo(T,(D,P)=>{const F=ut(S,P),G=F===void 0?0:parseInt(F,10);return isNaN(G)?D:D+G},0);return{set:a,get:c,getOuter:d,aggregate:h,max:(S,T,D)=>{const P=h(S,D);return T>P?T-P:0}}},wi=Yr("height",t=>{const s=t.dom;return ke(t)?s.getBoundingClientRect().height:s.offsetHeight}),xr=t=>wi.get(t),Hl=t=>wi.getOuter(t),Lg=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=wi.max(t,s,a);It(t,"max-height",c+"px")},x1=(t,s)=>({left:t,top:s,translate:(c,d)=>x1(t+c,s+d)}),Ds=x1,zl=t=>{const s=t.getBoundingClientRect();return Ds(s.left,s.top)},Xr=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ta=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return Ds(a.offsetLeft,a.offsetTop);const h=Xr(c==null?void 0:c.pageYOffset,d.scrollTop),b=Xr(c==null?void 0:c.pageXOffset,d.scrollLeft),S=Xr(d.clientTop,a.clientTop),T=Xr(d.clientLeft,a.clientLeft);return Ci(t).translate(b-T,h-S)},Ci=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?Ds(c.offsetLeft,c.offsetTop):ke(t)?zl(s):Ds(0,0)},Cu=Yr("width",t=>t.dom.offsetWidth),Bm=(t,s)=>Cu.set(t,s),oo=t=>Cu.get(t),pl=t=>Cu.getOuter(t),Vl=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Cu.max(t,s,a);It(t,"max-width",c+"px")},Ul=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},Lm=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,b=t.isiOS()||t.isAndroid(),S=b||c("(pointer:coarse)"),T=d||!h&&b&&c("(min-device-width:768px)"),D=h||b&&!T,P=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,F=!D&&!T&&!P;return{isiPad:oe(d),isiPhone:oe(h),isTablet:oe(T),isPhone:oe(D),isTouch:oe(S),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:oe(P),isDesktop:oe(F)}},Is=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},na=(t,s)=>{const a=Is(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return Su(c(1),c(2))},cd=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Mh():na(t,a)},Mh=()=>Su(0,0),Su=(t,s)=>({major:t,minor:s}),Si={nu:Su,detect:cd,unknown:Mh},oa=(t,s)=>Ss(s.brands,a=>{const c=a.brand.toLowerCase();return et(t,d=>{var h;return c===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:Si.nu(parseInt(a.version,10),0)}))}),$a=(t,s)=>{const a=String(s).toLowerCase();return et(t,c=>c.search(a))},li=(t,s)=>$a(t,s).map(a=>{const c=Si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Er=(t,s)=>$a(t,s).map(a=>{const c=Si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),ld=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Bs=t=>s=>Cr(s,t),Kd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Cr(t,"edge/")&&Cr(t,"chrome")&&Cr(t,"safari")&&Cr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ld],search:t=>Cr(t,"chrome")&&!Cr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Cr(t,"msie")||Cr(t,"trident")},{name:"Opera",versionRegexes:[ld,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Bs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Bs("firefox")},{name:"Safari",versionRegexes:[ld,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Cr(t,"safari")||Cr(t,"mobile/"))&&Cr(t,"applewebkit")}],zf=[{name:"Windows",search:Bs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Cr(t,"iphone")||Cr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Bs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Bs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Bs("linux"),versionRegexes:[]},{name:"Solaris",search:Bs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Bs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Bs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Wl={browsers:oe(Kd),oses:oe(zf)},ud="Edge",dd="Chromium",xu="IE",Eu="Opera",Xi="Firefox",Ha="Safari",Fg=()=>bl({current:void 0,version:Si.unknown()}),bl=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(ud),isChromium:c(dd),isIE:c(xu),isOpera:c(Eu),isFirefox:c(Xi),isSafari:c(Ha)}},Fm={unknown:Fg,nu:bl,edge:oe(ud),chromium:oe(dd),ie:oe(xu),opera:oe(Eu),firefox:oe(Xi),safari:oe(Ha)},fd="Windows",$m="iOS",Vf="Android",md="Linux",Uf="macOS",Hm="Solaris",_u="FreeBSD",zm="ChromeOS",be=()=>hd({current:void 0,version:Si.unknown()}),hd=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(fd),isiOS:c($m),isAndroid:c(Vf),isMacOS:c(Uf),isLinux:c(md),isSolaris:c(Hm),isFreeBSD:c(_u),isChromeOS:c(zm)}},xi={unknown:be,nu:hd,windows:oe(fd),ios:oe($m),android:oe(Vf),linux:oe(md),macos:oe(Uf),solaris:oe(Hm),freebsd:oe(_u),chromeos:oe(zm)},$g={detect:(t,s,a)=>{const c=Wl.browsers(),d=Wl.oses(),h=s.bind(T=>oa(c,T)).orThunk(()=>li(c,t)).fold(Fm.unknown,Fm.nu),b=Er(d,t).fold(xi.unknown,xi.nu),S=Lm(b,h,t,a);return{browser:h,os:b,deviceType:S}}},Tu=t=>window.matchMedia(t).matches;let No=Ul(()=>$g.detect(window.navigator.userAgent,M.from(window.navigator.userAgentData),Tu));const dr=()=>No(),ka=(t,s,a,c,d,h,b)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:h,raw:b}),Zl=t=>{const s=Ke.fromDom(Y(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=Dn(c,a);return ka(s,t.clientX,t.clientY,a,c,d,t)},Nh=(t,s)=>a=>{t(a)&&s(Zl(a))},gd=(t,s,a,c,d)=>{const h=Nh(a,c);return t.dom.addEventListener(s,h,d),{unbind:en(Zf,t,s,h,d)}},za=(t,s,a,c)=>gd(t,s,a,c,!1),Wf=(t,s,a,c)=>gd(t,s,a,c,!0),Zf=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},jl=(t,s)=>{Nr(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},ql=(t,s)=>{id(t).fold(()=>{Nr(t).each(d=>{vc(d,s)})},c=>{jl(c,s)})},Yd=(t,s)=>{Kc(t).fold(()=>{vc(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},vc=(t,s)=>{t.dom.appendChild(s.dom)},jf=(t,s,a)=>{Yi(t,a).fold(()=>{vc(t,s)},c=>{jl(c,s)})},va=(t,s)=>{pt(s,a=>{vc(t,a)})},Gl=t=>{t.dom.textContent="",pt(pr(t),s=>{Ic(s)})},Ic=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Va=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return Ds(a,c)},ku=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Hg=t=>{const s=t===void 0?window:t;return dr().browser.isFirefox()?M.none():M.from(s.visualViewport)},qf=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Jc=t=>{const s=t===void 0?window:t,a=s.document,c=Va(Ke.fromDom(a));return Hg(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,b=d.clientHeight;return qf(c.left,c.top,h,b)},d=>qf(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},pd=()=>Ke.fromDom(document),zg=(t,s)=>t.view(s).fold(oe([]),c=>{const d=t.owner(c),h=zg(t,d);return[c].concat(h)}),Vm=(t,s)=>{const a=s.owner(t),c=zg(s,a);return M.some(c)};var Um=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?M.none():M.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Ke.fromDom)},owner:t=>Ps(t)});const Kl=t=>{const s=pd(),a=Va(s);return Vm(t,Um).fold(en(Ta,t),d=>{const h=Ci(t),b=_o(d,(S,T)=>{const D=Ci(T);return{left:S.left+D.left,top:S.top+D.top}},{left:0,top:0});return Ds(b.left+h.left+a.left,b.top+h.top+a.top)})},Gf=(t,s,a)=>({point:t,width:s,height:a}),vl=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),Js=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Jr=t=>{const s=Ta(t),a=pl(t),c=Hl(t);return Js(s.left,s.top,a,c)},Ei=t=>{const s=Kl(t),a=pl(t),c=Hl(t);return Js(s.left,s.top,a,c)},Kf=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),b=d-a,S=h-c;return Js(a,c,b,S)},Xd=(t,s)=>zo(s,(a,c)=>Kf(a,c),t),Qr=()=>Jc(window),gn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Yf=t=>{const s=gn(M.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(M.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:S=>{a(),s.set(M.some(S))}}},Au=()=>Yf(t=>t.destroy()),_i=()=>Yf(t=>t.unbind()),Xo=()=>{const t=Yf(ce);return{...t,on:a=>t.get().each(a)}};var bd=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Xf=t=>{const s=h=>h(t),a=oe(t),c=()=>d,d={tag:!0,inner:t,fold:(h,b)=>b(t),isValue:it,isError:at,map:h=>Xn.value(h(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:h=>{h(t)},toOptional:()=>M.some(t)};return d},Wm=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:at,isError:it,map:s,mapError:c=>Xn.error(c(t)),bind:s,exists:at,forall:it,getOr:Xt,or:Xt,getOrThunk:so,orThunk:so,getOrDie:ve(String(t)),each:ce,toOptional:M.none};return a},Xn={value:Xf,error:Wm,fromOption:(t,s)=>t.fold(()=>Wm(s),Xf)};var vr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(vr||(vr={}));const Ou=(t,s,a)=>t.stype===vr.Error?s(t.serror):a(t.svalue),Hi=t=>{const s=[],a=[];return pt(t,c=>{Ou(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Ti=(t,s)=>t.stype===vr.Error?{stype:vr.Error,serror:s(t.serror)}:t,Ji=(t,s)=>t.stype===vr.Value?{stype:vr.Value,svalue:s(t.svalue)}:t,sa=(t,s)=>t.stype===vr.Value?s(t.svalue):t,ui=(t,s)=>t.stype===vr.Error?s(t.serror):t,yc=t=>({stype:vr.Value,svalue:t}),Zm=t=>({stype:vr.Error,serror:t}),_r={fromResult:t=>t.fold(Zm,yc),toResult:t=>Ou(t,Xn.error,Xn.value),svalue:yc,partition:Hi,serror:Zm,bind:sa,bindError:ui,map:Ji,mapError:Ti,fold:Ou},Du=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),yl=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),ws=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Qc=(t,s)=>s,Jd=(t,s)=>ge(t)&&ge(s)?Fs(t,s):s,Ru=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const h in d)go(d,h)&&(a[h]=t(a[h],d[h]))}return a},Fs=Ru(Jd),Yl=Ru(Qc),wc=()=>({tag:"required",process:{}}),po=t=>({tag:"defaultedThunk",process:t}),vd=t=>po(oe(t)),qm=()=>({tag:"option",process:{}}),k=t=>({tag:"mergeWithThunk",process:t}),B=t=>k(oe(t)),q=(t,s)=>t.length>0?_r.svalue(Fs(s,Yl.apply(void 0,t))):_r.svalue(s),he=t=>Dn(_r.serror,dt)(t),kn={consolidateObj:(t,s)=>{const a=_r.partition(t);return a.errors.length>0?he(a.errors):q(a.values,s)},consolidateArr:t=>{const s=_r.partition(t);return s.errors.length>0?he(s.errors):_r.svalue(s.values)}},eo=t=>ue(t)&&xs(t).length>100?" removed due to size":JSON.stringify(t,null,2),Gn=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:oe("... (only showing first ten failures)")}]):t;return $e(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},pn=(t,s)=>_r.serror([{path:t,getErrorInfo:s}]),Qs=(t,s,a)=>pn(t,()=>'Could not find valid *required* value for "'+s+'" in '+eo(a)),Tr=(t,s)=>pn(t,()=>'Choice schema did not contain choice key: "'+s+'"'),ki=(t,s,a)=>pn(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+eo(s)),Mu=(t,s)=>pn(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),_1=(t,s)=>pn(t,oe(s)),Qd=t=>{const s=(c,d)=>_r.bindError(t(d),h=>_1(c,h)),a=oe("val");return{extract:s,toString:a}},Wg=Qd(_r.svalue),Ua=(t,s,a,c)=>Tt(s,a).fold(()=>Qs(t,a,s),c),Zg=(t,s,a,c)=>{const d=Tt(t,s).getOrThunk(()=>a(t));return c(d)},y0=(t,s,a)=>a(Tt(t,s)),T1=(t,s,a,c)=>{const d=Tt(t,s).map(h=>h===!0?a(t):h);return c(d)},Wa=(t,s,a,c,d)=>{const h=S=>d.extract(s.concat([c]),S),b=S=>S.fold(()=>_r.svalue(M.none()),T=>{const D=d.extract(s.concat([c]),T);return _r.map(D,M.some)});switch(t.tag){case"required":return Ua(s,a,c,h);case"defaultedThunk":return Zg(a,c,t.process,h);case"option":return y0(a,c,b);case"defaultedOptionThunk":return T1(a,c,t.process,b);case"mergeWithThunk":return Zg(a,c,oe({}),S=>{const T=Fs(t.process(a),S);return h(T)})}},jg=(t,s,a)=>{const c={},d=[];for(const h of a)ws(h,(b,S,T,D)=>{const P=Wa(T,t,s,b,D);_r.fold(P,F=>{d.push(...F)},F=>{c[S]=F})},(b,S)=>{c[b]=S(s)});return d.length>0?_r.serror(d):_r.svalue(c)},ea=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),k1=t=>xs(Li(t,Ct)),Za=t=>{const s=Bn(t),a=_o(t,(d,h)=>ws(h,b=>Fs(d,{[b]:!0}),oe(d)),{});return{extract:(d,h)=>{const b=Lt(h)?[]:k1(h),S=no(b,T=>!Vr(a,T));return S.length===0?s.extract(d,h):Mu(d,S)},toString:s.toString}},Bn=t=>({extract:(c,d)=>jg(c,d,t),toString:()=>`obj{
`+$e(t,d=>ws(d,(h,b,S,T)=>h+" -> "+T.toString(),(h,b)=>"state("+h+")")).join(`
`)+"}"}),el=t=>({extract:(c,d)=>{const h=$e(d,(b,S)=>t.extract(c.concat(["["+S+"]"]),b));return kn.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),Jf=(t,s)=>{const a=s!==void 0?s:Xt;return{extract:(h,b)=>{const S=[];for(const T of t){const D=T.extract(h,b);if(D.stype===vr.Value)return{stype:vr.Value,svalue:a(D.svalue)};S.push(D)}return kn.consolidateArr(S)},toString:()=>"oneOf("+$e(t,h=>h.toString()).join(", ")+")"}},Gm=(t,s)=>{const a=(h,b)=>el(Qd(t)).extract(h,b);return{extract:(h,b)=>{const S=xs(b),T=a(h,S);return _r.bind(T,D=>{const P=$e(D,F=>Du(F,F,wc(),s));return Bn(P).extract(h,b)})},toString:()=>"setOf("+s.toString()+")"}},w0=(t,s)=>{const a=Ul(s);return{extract:(h,b)=>a().extract(h,b),toString:()=>a().toString()}},qg=Dn(el,Bn),wl=oe(Wg),Nu=(t,s)=>Qd(a=>{const c=typeof a;return t(a)?_r.svalue(a):_r.serror(`Expected type: ${s} but got: ${c}`)}),ef=Nu(ln,"number"),Wt=Nu(j,"string"),tl=Nu(Lt,"boolean"),A1=Nu(Ne,"function"),Qf=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Qf(t[s]));default:return!1}},Cl=Qd(t=>Qf(t)?_r.svalue(t):_r.serror("Expected value to be acceptable for sending via postMessage")),Ih=(t,s,a,c)=>Tt(a,c).fold(()=>ki(t,a,c),h=>h.extract(t.concat(["branch: "+c]),s)),tf=(t,s)=>({extract:(d,h)=>Tt(h,t).fold(()=>Tr(d,t),S=>Ih(d,h,s,S)),toString:()=>"chooseOn("+t+"). Possible values: "+xs(s)}),em=()=>el(Wg),Bh=t=>Qd(s=>t(s).fold(_r.serror,_r.svalue)),Xl=(t,s)=>Gm(a=>_r.fromResult(t(a)),s),C0=(t,s,a)=>{const c=s.extract([t],a);return _r.mapError(c,d=>({input:a,errors:d}))},fr=(t,s,a)=>_r.toResult(C0(t,s,a)),bt=t=>t.fold(s=>{throw new Error(Jl(s))},Xt),zi=(t,s,a)=>bt(fr(t,s,a)),Jl=t=>`Errors: 
`+Gn(t.errors).join(`
`)+`

Input object: `+eo(t.input),ra=(t,s)=>tf(t,Ko(s,Bn)),Km=(t,s)=>w0(t,s),aa=Du,qo=yl,Gg=t=>Bh(s=>wt(t,s)?Xn.value(s):Xn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),rt=t=>aa(t,t,wc(),wl()),Uo=(t,s)=>aa(t,t,wc(),s),Kg=t=>Uo(t,ef),ia=t=>Uo(t,Wt),ya=(t,s)=>aa(t,t,wc(),Gg(s)),Sl=t=>Uo(t,A1),O1=(t,s)=>aa(t,t,qm(),Qd(a=>_r.serror("The field: "+t+" is forbidden. "+s))),nf=(t,s)=>aa(t,t,wc(),Bn(s)),D1=(t,s)=>aa(t,t,wc(),qg(s)),Cc=(t,s)=>aa(t,t,wc(),el(s)),Wo=t=>aa(t,t,qm(),wl()),Pu=(t,s)=>aa(t,t,qm(),s),Lh=t=>Pu(t,ef),yr=t=>Pu(t,Wt),Fh=(t,s)=>Pu(t,Gg(s)),yd=t=>Pu(t,A1),Yg=(t,s)=>Pu(t,el(s)),ca=(t,s)=>Pu(t,Bn(s)),la=(t,s)=>Pu(t,Za(s)),Pe=(t,s)=>aa(t,t,vd(s),wl()),$s=(t,s,a)=>aa(t,t,vd(s),a),R1=(t,s)=>$s(t,s,ef),er=(t,s)=>$s(t,s,Wt),Aa=(t,s,a)=>$s(t,s,Gg(a)),Oa=(t,s)=>$s(t,s,tl),os=(t,s)=>$s(t,s,A1),M1=(t,s)=>$s(t,s,Cl),_=(t,s,a)=>$s(t,s,el(a)),R=(t,s,a)=>$s(t,s,Bn(a)),ne={generate:t=>{if(!Ce(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return pt(t,(c,d)=>{const h=xs(c);if(h.length!==1)throw new Error("one and only one name per case");const b=h[0],S=c[b];if(a[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ce(S))throw new Error("case arguments must be an array");s.push(b),a[b]=(...T)=>{const D=T.length;if(D!==S.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+S.length+" ("+S+"), got "+D);return{fold:(...F)=>{if(F.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+F.length);return F[d].apply(null,T)},match:F=>{const G=xs(F);if(s.length!==G.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+G.join(","));if(!Ao(s,re=>wt(G,re)))throw new Error("Not all branches were specified when using match. Specified: "+G.join(", ")+`
Required: `+s.join(", "));return F[b].apply(null,T)},log:F=>{console.log(F,{constructors:s,constructor:b,params:T})}}}}),a}};ne.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const _e=t=>{const s=[],a=[];return pt(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},st=(t,s)=>{const a={};return Ts(t,(c,d)=>{wt(s,d)||(a[d]=c)}),a},At=(t,s)=>({[t]:s}),un=t=>{const s={};return pt(t,a=>{s[a.key]=a.value}),s},jn=(t,s)=>st(t,s),to=(t,s)=>At(t,s),gs=t=>un(t),ds=(t,s)=>t.length===0?Xn.value(s):Xn.value(Fs(s,Yl.apply(void 0,t))),Hs=t=>Xn.error(dt(t)),Sc=(t,s)=>{const a=_e(t);return a.errors.length>0?Hs(a.errors):ds(a.values,s)},Ql=t=>Ne(t)?t:at,Ai=(t,s,a)=>{let c=t.dom;const d=Ql(a);for(;c.parentNode;){c=c.parentNode;const h=Ke.fromDom(c),b=s(h);if(b.isSome())return b;if(d(h))break}return M.none()},xl=(t,s,a)=>{const c=s(t),d=Ql(a);return c.orThunk(()=>d(t)?M.none():Ai(t,s,d))},Ym=(t,s)=>yo(t.element,s.event.target),Iu={can:it,abort:at,run:ce},eu=t=>{if(!Vr(t,"can")&&!Vr(t,"abort")&&!Vr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Iu,...t}},of=(t,s)=>(...a)=>zo(t,(c,d)=>c&&s(d).apply(void 0,a),!0),Xg=(t,s)=>(...a)=>zo(t,(c,d)=>c||s(d).apply(void 0,a),!1),$h=t=>Ne(t)?{can:it,abort:at,run:t}:t,Jg=t=>{const s=of(t,d=>d.can),a=Xg(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{pt(t,h=>{h.run.apply(void 0,d)})}}},ua=oe,tu=ua("touchstart"),Ro=ua("touchmove"),zs=ua("touchend"),Oi=ua("touchcancel"),Ir=ua("mousedown"),Hh=ua("mousemove"),Qg=ua("mouseout"),wd=ua("mouseup"),Bc=ua("mouseover"),Cd=ua("focusin"),vS=ua("focusout"),Vi=ua("keydown"),yS=ua("keyup"),nu=ua("input"),tm=ua("change"),zh=ua("click"),Uk=ua("transitioncancel"),ep=ua("transitionend"),Vh=ua("transitionstart"),wS=ua("selectstart"),Br=t=>oe("alloy."+t),s2={tap:Br("tap")},Sd=Br("focus"),Xm=Br("blur.post"),tp=Br("paste.post"),ou=Br("receive"),Di=Br("execute"),S0=Br("focus.item"),N1=s2.tap,Uh=Br("longpress"),ja=Br("sandbox.close"),x0=Br("typeahead.cancel"),E0=Br("system.init"),CS=Br("system.touchmove"),P1=Br("system.touchend"),I1=Br("system.scroll"),nm=Br("system.resize"),Qi=Br("system.attached"),Lc=Br("system.detached"),xd=Br("system.dismissRequested"),r2=Br("system.repositionRequested"),B1=Br("focusmanager.shifted"),np=Br("slotcontainer.visibility"),SS=Br("system.external.element.scroll"),xS=Br("change.tab"),ES=Br("dismiss.tab"),a2=Br("highlight"),Jm=Br("dehighlight"),bo=(t,s)=>{L1(t,t.element,s,{})},bn=(t,s,a)=>{L1(t,t.element,s,a)},Qm=t=>{bo(t,Di())},_0=(t,s,a)=>{L1(t,s,a,{})},L1=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},_S=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},T0=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},fs=t=>gs(t),i2=(t,s)=>({key:t,value:eu({abort:s})}),Wk=(t,s)=>({key:t,value:eu({can:s})}),c2=t=>({key:t,value:eu({run:(s,a)=>{a.event.prevent()}})}),ot=(t,s)=>({key:t,value:eu({run:s})}),k0=(t,s,a)=>({key:t,value:eu({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),F1=t=>s=>ot(t,s),A0=t=>s=>({key:t,value:eu({run:(a,c)=>{Ym(a,c)&&s(a,c)}})}),$1=(t,s)=>ot(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{T0(d,d.element,t,c)})}),op=(t,s,a)=>{const c=s.partUids[a];return $1(t,c)},O0=(t,s)=>ot(t,(a,c)=>{const d=c.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>xl(d.target,S=>a.getSystem().getByDom(S).toOptional(),at).getOr(a));s(a,h,c)}),Wh=t=>ot(t,(s,a)=>{a.cut()}),H1=t=>ot(t,(s,a)=>{a.stop()}),eh=(t,s)=>A0(t)(s),tr=A0(Qi()),sf=A0(Lc()),TS=A0(E0()),rf=F1(Di()),D0=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,h=c.indexOf("("),b=c.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:z1(b.slice(0,1).concat(b.slice(3)))}),t},z1=t=>$e(t,s=>Ea(s,"/*")?s.substring(0,s.length-2):s),V1=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:z1(h)}),t},R0=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:z1(h.slice(1))}),t},Fc=t=>({classes:Zt(t.classes)?[]:t.classes,attributes:Zt(t.attributes)?{}:t.attributes,styles:Zt(t.styles)?{}:t.styles}),M0=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),kS=(t,s,a)=>rf(c=>{a(c,t,s)}),Zh=(t,s,a)=>TS((c,d)=>{a(c,t,s)}),Zk=(t,s,a,c,d,h)=>{const b=Za(t),S=ca(s,[la("config",t)]);return N0(b,S,s,a,c,d,h)},th=(t,s,a,c,d,h)=>{const b=t,S=ca(s,[Pu("config",t)]);return N0(b,S,s,a,c,d,h)},l2=(t,s,a)=>D0((d,...h)=>{const b=[d].concat(h);return d.config({name:oe(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},S=>{const T=Array.prototype.slice.call(b,1);return s.apply(void 0,[d,S.config,S.state].concat(T))})},a,s),AS=t=>({key:t,value:void 0}),N0=(t,s,a,c,d,h,b)=>{const S=F=>Vr(F,a)?F[a]():M.none(),T=Ko(d,(F,G)=>l2(a,F,G)),P={...Ko(h,(F,G)=>V1(F,G)),...T,revoke:en(AS,a),config:F=>{const G=zi(a+"-config",t,F);return{key:a,value:{config:G,me:P,configAsRaw:Ul(()=>zi(a+"-config",t,F)),initialConfig:F,state:b}}},schema:oe(s),exhibit:(F,G)=>Fa(S(F),Tt(c,"exhibit"),(J,re)=>re(G,J.config,J.state)).getOrThunk(()=>Fc({})),name:oe(a),handlers:F=>S(F).map(G=>Tt(c,"events").getOr(()=>({}))(G.config,G.state)).getOr({})};return P},Ed={init:()=>di({readState:oe("No State required")})},di=t=>t,Et=t=>gs(t),sp=Za([rt("fields"),rt("name"),Pe("active",{}),Pe("apis",{}),Pe("state",Ed),Pe("extra",{})]),wa=t=>{const s=zi("Creating behaviour: "+t.name,sp,t);return Zk(s.fields,s.name,s.active,s.apis,s.extra,s.state)},jk=Za([rt("branchKey"),rt("branches"),rt("name"),Pe("active",{}),Pe("apis",{}),Pe("state",Ed),Pe("extra",{})]),U1=t=>{const s=zi("Creating behaviour: "+t.name,jk,t);return th(ra(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},qk=oe(void 0),Vs=(t,s)=>{const a=Vn(t,s);return a===void 0||a===""?[]:a.split(" ")},jh=(t,s,a)=>{const d=Vs(t,s).concat([a]);return $t(t,s,d.join(" ")),!0},P0=(t,s,a)=>{const c=no(Vs(t,s),d=>d!==a);return c.length>0?$t(t,s,c.join(" ")):ee(t,s),!1},rp=t=>t.dom.classList!==void 0,ap=t=>Vs(t,"class"),u2=(t,s)=>jh(t,"class",s),_d=(t,s)=>P0(t,"class",s),Gk=(t,s)=>wt(ap(t),s)?_d(t,s):u2(t,s),Lr=(t,s)=>{rp(t)?t.dom.classList.add(s):u2(t,s)},Td=t=>{(rp(t)?t.dom.classList:ap(t)).length===0&&ee(t,"class")},mr=(t,s)=>{rp(t)?t.dom.classList.remove(s):_d(t,s),Td(t)},d2=(t,s)=>{const a=rp(t)?t.dom.classList.toggle(s):Gk(t,s);return Td(t),a},xc=(t,s)=>rp(t)&&t.dom.classList.contains(s),ip=(t,s)=>{pt(s,a=>{Lr(t,a)})},kd=(t,s)=>{pt(s,a=>{mr(t,a)})},I0=(t,s)=>{pt(s,a=>{d2(t,a)})},Kk=(t,s)=>Ao(s,a=>xc(t,a)),Yk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},OS=t=>rp(t)?Yk(t):ap(t),Ad=(t,s,a,c,d)=>{const h=b=>b+"px";return{position:t,left:s.map(h),top:a.map(h),right:c.map(h),bottom:d.map(h)}},Od=t=>({...t,position:M.some(t.position)}),ec=(t,s)=>{ta(t,Od(s))},cp=t=>(Ur(us(t,"position"),"fixed")?M.none():Gc(t)).orThunk(()=>{const c=Ke.fromTag("span");return Nr(t).bind(d=>{vc(d,c);const h=Gc(c);return Ic(c),h})}),qh=t=>cp(t).map(Ta).getOrThunk(()=>Ds(0,0)),DS=(t,s)=>{const a=t.element;Lr(a,s.transitionClass),mr(a,s.fadeOutClass),Lr(a,s.fadeInClass),s.onShow(t)},lp=(t,s)=>{const a=t.element;Lr(a,s.transitionClass),mr(a,s.fadeInClass),Lr(a,s.fadeOutClass),s.onHide(t)},af=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Gh=(t,s)=>t.y>=s.y,Kh=(t,s)=>t.bottom<=s.bottom,om=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),cf=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Yh=t=>t.box.x-t.win.x,W1=(t,s,a)=>{const c=s.win,d=s.box,h=Yh(s);return Ss(t,b=>{switch(b){case"bottom":return Kh(d,a.bounds)?M.none():M.some(cf(c,h,a));case"top":return Gh(d,a.bounds)?M.none():M.some(om(c,h,a));default:return M.none()}}).getOr({location:"no-dock"})},Xk=(t,s,a)=>Ao(t,c=>{switch(c){case"bottom":return Kh(s,a.bounds);case"top":return Gh(s,a.bounds)}}),f2=(t,s)=>{const a=s.optScrollEnv.fold(oe(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return Ds(t.bounds.x,a)},B0=(t,s)=>{const a=s.optScrollEnv.fold(oe(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return Ds(t.x,a)},L0=(t,s,a)=>a.getInitialPos().map(c=>{const d=f2(c,s);return{box:Js(d.left,d.top,oo(t),xr(t)),location:c.location}}),RS=(t,s,a,c,d)=>{const h=B0(s,a),b=Js(h.left,h.top,s.width,s.height);c.setInitialPos({style:Xc(t),position:ut(t,"position")||"static",bounds:b,location:d.location})},m2=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>RS(t,s,a,c,d),()=>ce)},F0=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return M.some({morph:"static"});case"absolute":const h=cp(t).getOr(Ye()),b=Jr(h),S=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return M.some({morph:"absolute",positionCss:Ad("absolute",Tt(c.style,"left").map(T=>s.x-b.x),Tt(c.style,"top").map(T=>s.y-b.y+S),Tt(c.style,"right").map(T=>b.right-s.right),Tt(c.style,"bottom").map(T=>b.bottom-s.bottom))});default:return M.none()}}),MS=(t,s,a)=>L0(t,s,a).filter(({box:c})=>Xk(a.getModes(),c,s)).bind(({box:c})=>F0(t,c,a)),Z1=t=>{switch(t.location){case"top":return M.some({morph:"fixed",positionCss:Ad("fixed",M.some(t.leftX),M.some(t.topY),M.none(),M.none())});case"bottom":return M.some({morph:"fixed",positionCss:Ad("fixed",M.some(t.leftX),M.none(),M.none(),M.some(t.bottomY))});default:return M.none()}},h2=(t,s,a)=>{const c=Jr(t),d=Qr(),h=W1(a.getModes(),{win:d,box:c},s);return h.location==="top"||h.location==="bottom"?(RS(t,c,s,a,h),Z1(h)):M.none()},$0=(t,s,a)=>MS(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>L0(t,s,a)).bind(({box:c,location:d})=>{const h=Qr(),b=Yh({win:h,box:c}),S=d==="top"?om(h,b,s):cf(h,b,s);return Z1(S)})),eM=(t,s,a)=>{const c=t.element;return Ur(us(c,"position"),"fixed")?$0(c,s,a):h2(c,s,a)},j1=(t,s,a)=>{const c=t.element;return L0(c,s,a).bind(({box:d})=>F0(c,d,a))},up=(t,s,a,c)=>{const d=Jr(t),h=Qr(),b=Yh({win:h,box:d}),S=c(h,b,s);return S.location==="bottom"||S.location==="top"?(m2(t,d,s,a,S),Z1(S)):M.none()},sm=(t,s,a)=>{a.setDocked(!1),pt(["left","right","top","bottom","position"],c=>uo(t.element,c)),s.onUndocked(t)},H0=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),ec(t.element,c),(d?s.onDocked:s.onUndocked)(t)},NS=(t,s,a,c,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(b=>{const S=af(b,c.bounds);S!==a.isVisible()&&(a.setVisible(S),d&&!S?(ip(t.element,[h.fadeOutClass]),h.onHide(t)):(S?DS:lp)(t,h))})})},PS=(t,s,a,c,d)=>{NS(t,s,a,c,!0),H0(t,s,a,d.positionCss)},IS=(t,s,a,c,d)=>{switch(d.morph){case"static":return sm(t,s,a);case"absolute":return H0(t,s,a,d.positionCss);case"fixed":return PS(t,s,a,c,d)}},Xh=(t,s,a)=>{const c=s.lazyViewport(t);NS(t,s,a,c),eM(t,c,a).each(d=>{IS(t,s,a,c,d)})},Jk=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);j1(t,d,a).each(h=>{switch(h.morph){case"static":{sm(t,s,a);break}case"absolute":{H0(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{kd(c,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),dp(t,s,a)},dp=(t,s,a)=>{t.getSystem().isConnected()&&Xh(t,s,a)},fp=(t,s,a)=>{a.isDocked()&&Jk(t,s,a)},mp=t=>(s,a,c)=>{const d=a.lazyViewport(s);up(s.element,d,c,t).each(b=>{PS(s,a,c,d,b)})},BS=mp(om),z0=mp(cf);var Qk=Object.freeze({__proto__:null,refresh:dp,reset:fp,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:BS,forceDockToBottom:z0}),hp=Object.freeze({__proto__:null,events:(t,s)=>fs([eh(ep(),(a,c)=>{t.contextual.each(d=>{xc(a.element,d.transitionClass)&&(kd(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),ot(I1(),(a,c)=>{dp(a,t,s)}),ot(SS(),(a,c)=>{dp(a,t,s)}),ot(nm(),(a,c)=>{fp(a,t,s)})])});const e4=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,pr(Ke.fromDom(c))},Ri=t=>t.dom.innerHTML,Bu=(t,s)=>{const c=Ps(t).dom,d=Ke.fromDom(c.createDocumentFragment()),h=e4(s,c);va(d,h),Gl(t),vc(t,d)},g2=t=>{const s=Ke.fromTag("div"),a=Ke.fromDom(t.dom.cloneNode(!0));return vc(s,a),Ri(s)},nh=(t,s)=>Ke.fromDom(t.dom.cloneNode(s)),t4=t=>nh(t,!1),q1=t=>nh(t,!0),V0=t=>{if(Yc(t))return"#shadow-root";{const s=t4(t);return g2(s)}},rm=t=>V0(t),HS="unknown";var Dd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Dd||(Dd={}));const lf=gn({}),zS=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,h,b)=>{a.push({outcome:"cut",target:h,purpose:b})},logEventStopped:(d,h,b)=>{a.push({outcome:"stopped",target:h,purpose:b})},logNoParent:(d,h,b)=>{a.push({outcome:"no-parent",target:h,purpose:b})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,b)=>{a.push({outcome:"response",purpose:b,target:h})},write:()=>{const d=new Date().getTime();wt(["mousemove","mouseover","mouseout",E0()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:$e(a,h=>wt(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+rm(h.target)+")":h.outcome)})}}},Da=(t,s,a)=>{switch(Tt(lf.get(),t).orThunk(()=>{const d=xs(lf.get());return Ss(d,h=>t.indexOf(h)>-1?M.some(lf.get()[h]):M.none())}).getOr(Dd.NORMAL)){case Dd.NORMAL:return a(Jh());case Dd.LOGGING:{const d=zS(t,s),h=a(d);return d.write(),h}case Dd.STOP:return!0}},p2=["alloy/data/Fields","alloy/debugging/Debugging"],Ec=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return et(s,a=>a.indexOf("alloy")>0&&!Mn(p2,c=>a.indexOf(c)>-1)).getOr(HS)}else return HS},n4={logEventCut:ce,logEventStopped:ce,logNoParent:ce,logEventNoHandlers:ce,logEventResponse:ce,write:ce},U0=(t,s,a)=>Da(t,s,a),Jh=oe(n4),am=oe([rt("menu"),rt("selectedMenu")]),uf=oe([rt("item"),rt("selectedItem")]);oe(Bn(uf().concat(am())));const su=oe(Bn(uf())),VS=nf("initSize",[rt("numColumns"),rt("numRows")]),G1=()=>Uo("markers",su()),gp=()=>nf("markers",[rt("backgroundMenu")].concat(am()).concat(uf())),im=t=>nf("markers",$e(t,rt)),W0=(t,s,a)=>(Ec(),aa(s,s,a,Bh(c=>Xn.value((...d)=>c.apply(void 0,d))))),ko=t=>W0("onHandler",t,vd(ce)),tc=t=>W0("onKeyboardHandler",t,vd(M.none)),oh=t=>W0("onHandler",t,wc()),pp=t=>W0("onKeyboardHandler",t,wc()),nr=(t,s)=>qo(t,oe(s)),sh=t=>qo(t,Xt),rh=oe(VS);var b2=[ca("contextual",[ia("fadeInClass"),ia("fadeOutClass"),ia("transitionClass"),Sl("lazyContext"),ko("onShow"),ko("onShown"),ko("onHide"),ko("onHidden")]),os("lazyViewport",()=>({bounds:Qr(),optScrollEnv:M.none()})),_("modes",["top","bottom"],Wt),ko("onDocked"),ko("onUndocked")],US=Object.freeze({__proto__:null,init:t=>{const s=gn(!1),a=gn(!0),c=Xo(),d=gn(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return di({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const js=wa({fields:b2,name:"docking",active:hp,apis:Qk,state:US}),K1=(t,s,a)=>yo(s,t.element)&&!yo(s,a),WS=fs([Wk(Sd(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return K1(t,c,d)?(console.warn(Sd()+` did not get interpreted by the desired target. 
Originator: `+rm(c)+`
Target: `+rm(d)+`
Check the `+Sd()+" event handlers"),!1):!0})]);var o4=Object.freeze({__proto__:null,events:WS});const Qh=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},ru=(t,s,a)=>Math.min(Math.max(t,s),a),Z0=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let cm=0;const on=t=>{const a=new Date().getTime(),c=Math.floor(Z0()*1e9);return cm++,t+"_"+c+cm+String(a)},v2=oe("alloy-id-"),y2=oe("data-alloy-id"),s4=v2(),w2=y2(),ZS=(t,s)=>{const a=on(s4+t);return j0(s,a),a},j0=(t,s)=>{Object.defineProperty(t.dom,w2,{value:s,writable:!0})},q0=t=>{const s=lr(t)?t.dom[w2]:null;return M.from(s)},Lu=t=>on(t),nM=Xt,df=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+rm(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:oe("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:at}},r4=df(),G0=on("alloy-premade"),Fu=t=>(Object.defineProperty(t.element.dom,G0,{value:t.uid,writable:!0}),to(G0,t)),a4=t=>go(t.dom,G0),K0=t=>Tt(t,G0),Y0=t=>R0((s,...a)=>t(s.getApis(),s,...a),t),i4=(t,s)=>{const a=$e(s,d=>ca(d.name(),[rt("config"),Pe("state",Ed)])),c=fr("component.behaviours",Bn(a),t.behaviours).fold(d=>{throw new Error(Jl(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Xt);return{list:s,data:Ko(c,d=>{const h=d.map(b=>({config:b.config,state:b.state.init(b.config)}));return oe(h)})}},c4=t=>t.list,X0=t=>t.data,J0=(t,s)=>{const a={};return Ts(t,(c,d)=>{Ts(c,(h,b)=>{const S=Tt(a,b).getOr([]);a[b]=S.concat([s(d,h)])})}),a},jS=(t,s,a,c)=>{const d={...s};pt(a,P=>{d[P.name()]=P.exhibit(t,c)});const h=J0(d,(P,F)=>({name:P,modification:F})),b=P=>_o(P,(F,G)=>({...G.modification,...F}),{}),S=_o(h.classes,(P,F)=>F.modification.concat(P),[]),T=b(h.attributes),D=b(h.styles);return Fc({classes:S,attributes:T,styles:D})},qS=(t,s,a,c)=>{try{const d=zr(a,(h,b)=>{const S=h[s],T=b[s],D=c.indexOf(S),P=c.indexOf(T);if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(c,null,2));if(P===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return D<P?-1:P<D?1:0});return Xn.value(d)}catch(d){return Xn.error([d])}},l4=(t,s)=>({handler:t,purpose:s}),ff=(t,s)=>({cHandler:t,purpose:s}),GS=(t,s)=>ff(en.apply(void 0,[t.handler].concat(s)),t.purpose),ah=t=>t.cHandler,Q0=(t,s)=>({name:t,handler:s}),KS=(t,s)=>{const a={};return pt(t,c=>{a[c.name()]=c.handlers(s)}),a},ev=(t,s,a)=>{const c={...a,...KS(s,t)};return J0(c,Q0)},C2=(t,s,a,c)=>{const d=ev(t,a,c);return d4(d,s)},tv=t=>{const s=$h(t);return(a,c,...d)=>{const h=[a,c].concat(d);s.abort.apply(void 0,h)?c.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},u4=(t,s)=>Xn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify($e(s,a=>a.name),null,2)]),_c=(t,s,a)=>{const c=s[a];return c?qS("Event: "+a,"name",t,c).map(d=>{const h=$e(d,b=>b.handler);return Jg(h)}):u4(a,t)},d4=(t,s)=>{const a=Ki(t,(c,d)=>(c.length===1?Xn.value(c[0].handler):_c(c,s,d)).map(b=>{const S=tv(b),T=c.length>1?no(s[d],D=>Mn(c,P=>P.name===D)).join(" > "):c[0].name;return to(d,l4(S,T))}));return Sc(a,{})},eg="alloy.base.behaviour",YS=Bn([aa("dom","dom",wc(),Bn([rt("tag"),Pe("styles",{}),Pe("classes",[]),Pe("attributes",{}),Wo("value"),Wo("innerHtml")])),rt("components"),rt("uid"),Pe("events",{}),Pe("apis",{}),aa("eventOrder","eventOrder",B({[Di()]:["disabling",eg,"toggling","typeaheadevents"],[Sd()]:[eg,"focusing","keying"],[E0()]:[eg,"disabling","toggling","representing","tooltipping"],[nu()]:[eg,"representing","streaming","invalidating"],[Lc()]:[eg,"representing","item-events","toolbar-button-events","tooltipping"],[Ir()]:["focusing",eg,"item-type-events"],[tu()]:["focusing",eg,"item-type-events"],[Bc()]:["item-type-events","tooltipping"],[ou()]:["receiving","reflecting","tooltipping"]}),wl()),Wo("domModification")]),ih=t=>fr("custom.definition",YS,t),lm=t=>({...t.dom,uid:t.uid,domChildren:$e(t.components,s=>s.element)}),S2=t=>t.domModification.fold(()=>Fc({}),Fc),Qe=t=>t.events,$u=t=>t.dom.value,tg=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},XS=(t,s,a)=>Yi(t,s).map(d=>{if(a.exists(b=>!yo(b,d))){const b=a.map(Ns).getOr("span"),S=Ke.fromTag(b);return jl(d,S),S}else return d}),Y1=(t,s,a)=>{a.fold(()=>vc(t,s),c=>{yo(c,s)||(jl(c,s),Ic(c))})},nl=(t,s,a)=>{const c=$e(s,a),d=pr(t);return pt(d.slice(c.length),Ic),c},x2=(t,s,a,c)=>{const d=Yi(t,s),h=c(a,d),b=XS(t,s,d);return Y1(t,h.element,b),h},JS=(t,s,a)=>nl(t,s,(c,d)=>x2(t,d,c,a)),Tc=(t,s)=>nl(t,s,(a,c)=>{const d=Yi(t,c);return Y1(t,a,d),a}),ng=(t,s)=>{const a=xs(t),c=xs(s),d=Kt(c,a),h=Rr(t,(b,S)=>!go(s,S)||b!==s[S]).t;return{toRemove:d,toSet:h}},f4=(t,s)=>{const{class:a,style:c,...d}=ye(s),{toSet:h,toRemove:b}=ng(t.attributes,d),S=()=>{pt(b,Oe=>ee(s,Oe)),Nn(s,h)},T=Xc(s),{toSet:D,toRemove:P}=ng(t.styles,T),F=()=>{pt(P,Oe=>uo(s,Oe)),$o(s,D)},G=OS(s),J=Kt(G,t.classes),re=Kt(t.classes,G),le=()=>{ip(s,re),kd(s,J)},De=Oe=>{Bu(s,Oe)},de=()=>{const Oe=t.domChildren;Tc(s,Oe)},Te=()=>{const Oe=s,ze=t.value.getOrUndefined();ze!==$u(Oe)&&tg(Oe,ze??"")};return S(),le(),F(),t.innerHtml.fold(de,De),Te(),s},QS=t=>{const s=Ke.fromTag(t.tag);Nn(s,t.attributes),ip(s,t.classes),$o(s,t.styles),t.innerHtml.each(c=>Bu(s,c));const a=t.domChildren;return va(s,a),t.value.each(c=>{tg(s,c)}),s},m4=(t,s)=>{try{const a=f4(t,s);return M.some(a)}catch{return M.none()}},ex=t=>t.innerHtml.isSome()&&t.domChildren.length>0,h4=(t,s)=>{const a=d=>Ns(d)===t.tag&&!ex(t)&&!a4(d),c=s.filter(a).bind(d=>m4(t,d)).getOrThunk(()=>QS(t));return j0(c,t.uid),c},tx=t=>{const s=Tt(t,"behaviours").getOr({});return xe(xs(s),a=>{const c=s[a];return Ct(c)?[c.me]:[]})},g4=(t,s)=>i4(t,s),p4=t=>{const s=tx(t);return g4(t,s)},nv=(t,s,a)=>{const c=lm(t),d=S2(t),h={"alloy.base.modification":d},b=s.length>0?jS(a,h,s,c):d;return M0(c,b)},ov=(t,s,a)=>{const c={"alloy.base.behaviour":Qe(t)};return C2(a,t.eventOrder,s,c).getOrDie()},b4=(t,s)=>{const a=()=>Oe,c=gn(r4),d=bt(ih(t)),h=p4(t),b=c4(h),S=X0(h),T=nv(d,b,S),D=h4(T,s),P=ov(d,b,S),F=gn(d.components),G=ze=>{c.set(ze)},J=()=>{c.set(df(a))},re=()=>{const ze=pr(D),We=xe(ze,Mt=>c.get().getByDom(Mt).fold(()=>[],Fo));F.set(We)},le=ze=>{const We=S;return(Ne(We[ze.name()])?We[ze.name()]:()=>{throw new Error("Could not find "+ze.name()+" in "+JSON.stringify(t,null,2))})()},De=ze=>Ne(S[ze.name()]),de=()=>d.apis,Te=ze=>S[ze]().map(We=>We.state.readState()).getOr("not enabled"),Oe={uid:t.uid,getSystem:c.get,config:le,hasConfigured:De,spec:t,readState:Te,getApis:de,connect:G,disconnect:J,element:D,syncComponents:re,components:F.get,events:P};return Oe},nx=(t,s)=>{const a=Tt(t,"components").getOr([]);return s.fold(()=>$e(a,Mi),c=>$e(a,(d,h)=>bp(d,Yi(c,h))))},v4=(t,s)=>{const{events:a,...c}=nM(t),d=nx(c,s),h={...c,events:{...o4,...a},components:d};return Xn.value(b4(h,s))},or=t=>{const s=Ke.fromText(t);return E2({element:s})},E2=t=>{const s=zi("external.component",Za([rt("element"),Wo("uid")]),t),a=gn(df()),c=S=>{a.set(S)},d=()=>{a.set(df(()=>b))},h=s.uid.getOrThunk(()=>Lu("external"));j0(s.element,h);const b={uid:h,getSystem:a.get,config:M.none,hasConfigured:at,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:oe("No state"),syncComponents:ce,components:oe([]),events:{}};return Fu(b)},ox=Lu,sx=t=>go(t,"uid"),bp=(t,s)=>K0(t).getOrThunk(()=>{const a=sx(t)?t:{uid:ox(""),...t};return v4(a,s).getOrDie()}),Mi=t=>bp(t,M.none()),El=Fu;var rx=(t,s,a,c,d)=>t(a,c)?M.some(a):Ne(d)&&d(a)?M.none():s(a,c,d);const _2=(t,s,a)=>{let c=t.dom;const d=Ne(a)?a:at;for(;c.parentNode;){c=c.parentNode;const h=Ke.fromDom(c);if(s(h))return M.some(h);if(d(h))break}return M.none()},T2=(t,s,a)=>rx((d,h)=>h(d),_2,t,s,a),y4=(t,s)=>{const a=t.dom;return a.parentNode?sv(Ke.fromDom(a.parentNode),c=>!yo(t,c)&&s(c)):M.none()},sv=(t,s)=>{const a=d=>s(Ke.fromDom(d));return et(t.dom.childNodes,a).map(Ke.fromDom)},rv=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const h=Ke.fromDom(c.childNodes[d]);if(s(h))return M.some(h);const b=a(c.childNodes[d]);if(b.isSome())return b}return M.none()};return a(t.dom)},X1=(t,s,a)=>T2(t,s,a).isSome(),w4=t=>vu(t),da=(t,s,a)=>_2(t,c=>ys(c,s),a),C4=(t,s)=>y4(t,a=>ys(a,s)),au=(t,s)=>sv(t,a=>ys(a,s)),ir=(t,s)=>vu(s,t),Rd=(t,s,a)=>rx((d,h)=>ys(d,h),da,t,s,a),og="aria-controls",av=t=>T2(t,a=>{if(!lr(a))return!1;const c=Vn(a,"id");return c!==void 0&&c.indexOf(og)>-1}).bind(a=>{const c=Vn(a,"id"),d=br(a);return ir(d,`[${og}="${c}"]`)}),ax=()=>{const t=on(og);return{id:t,link:c=>{$t(c,og,t)},unlink:c=>{ee(c,og)}}},ix=(t,s)=>av(s).exists(a=>ch(t,a)),ch=(t,s)=>X1(s,a=>yo(a,t.element),at)||ix(t,s),Ni=(t,s,a,c,d,h,b,S=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:h,label:`${b}-${d}`,alwaysFit:S}),mf=ne.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),cx=(t,s,a,c,d,h,b,S,T)=>t.fold(s,a,c,d,h,b,S,T),S4=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),x4=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),iv=mf.southeast,k2=mf.southwest,A2=mf.northeast,O2=mf.northwest,lx=mf.south,ux=mf.north,dx=mf.east,fx=mf.west,E4=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Pi=(t,s)=>is(["left","right","top","bottom"],a=>Tt(s,a).map(c=>E4(t,c))),mx=(t,s,a)=>{const c=(T,D)=>s[T].map(P=>{const F=T==="top"||T==="bottom",G=F?a.top:a.left,re=(T==="left"||T==="top"?Math.max:Math.min)(P,D)+G;return F?ru(re,t.y,t.bottom):ru(re,t.x,t.right)}).getOr(D),d=c("left",t.x),h=c("top",t.y),b=c("right",t.right),S=c("bottom",t.bottom);return Js(d,h,b-d,S-h)},um="layout",D2=t=>t.x,hx=(t,s)=>t.x+t.width/2-s.width/2,R2=(t,s)=>t.x+t.width-s.width,cv=(t,s)=>t.y-s.height,J1=t=>t.y+t.height,lh=(t,s)=>t.y+t.height/2-s.height/2,_4=t=>t.x+t.width,M2=(t,s)=>t.x-s.width,Ca=(t,s,a)=>Ni(D2(t),J1(t),a.southeast(),iv(),"southeast",Pi(t,{left:1,top:3}),um),Sa=(t,s,a)=>Ni(R2(t,s),J1(t),a.southwest(),k2(),"southwest",Pi(t,{right:0,top:3}),um),Ra=(t,s,a)=>Ni(D2(t),cv(t,s),a.northeast(),A2(),"northeast",Pi(t,{left:1,bottom:2}),um),ps=(t,s,a)=>Ni(R2(t,s),cv(t,s),a.northwest(),O2(),"northwest",Pi(t,{right:0,bottom:2}),um),qa=(t,s,a)=>Ni(hx(t,s),cv(t,s),a.north(),ux(),"north",Pi(t,{bottom:2}),um),fa=(t,s,a)=>Ni(hx(t,s),J1(t),a.south(),lx(),"south",Pi(t,{top:3}),um),Q1=(t,s,a)=>Ni(_4(t),lh(t,s),a.east(),dx(),"east",Pi(t,{left:0}),um),lv=(t,s,a)=>Ni(M2(t,s),lh(t,s),a.west(),fx(),"west",Pi(t,{right:1}),um),N2=()=>[Ca,Sa,Ra,ps,fa,qa,Q1,lv],gx=()=>[Sa,Ca,ps,Ra,fa,qa,Q1,lv],P2=()=>[Ra,ps,Ca,Sa,qa,fa],rn=()=>[ps,Ra,Sa,Ca,qa,fa],vp=()=>[Ca,Sa,Ra,ps,fa,qa],uh=()=>[Sa,Ca,ps,Ra,fa,qa],px=(t,s)=>s.universal?t:no(t,a=>wt(s.channels,a));var sg=Object.freeze({__proto__:null,events:t=>fs([ot(ou(),(s,a)=>{const c=t.channels,d=xs(c),h=a,b=px(d,h);pt(b,S=>{const T=c[S],D=T.schema,P=zi("channel["+S+`] data
Receiver: `+rm(s.element),D,h.data);T.onReceive(s,P)})})])}),bx=[Uo("channels",Xl(Xn.value,Za([oh("onReceive"),Pe("schema",wl())])))];const ol=wa({fields:bx,name:"receiving",active:sg});var vx=Object.freeze({__proto__:null,exhibit:(t,s)=>Fc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const $c=(t,s=!1)=>t.dom.focus({preventScroll:s}),Ga=t=>t.dom.blur(),hf=t=>{const s=br(t).dom;return t.dom===s.activeElement},dm=(t=pd())=>M.from(t.dom.activeElement).map(Ke.fromDom),nc=t=>dm(br(t)).filter(s=>t.dom.contains(s.dom)),I2=(t,s)=>{const a=br(s),c=dm(a).bind(h=>{const b=S=>yo(h,S);return b(s)?M.some(s):rv(s,b)}),d=t(s);return c.each(h=>{dm(a).filter(b=>yo(b,h)).fold(()=>{$c(h)},ce)}),d},B2=ne.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),yx=(t,s,a,c,d,h)=>{const b=s.rect,S=b.x-a,T=b.y-c,D=b.width,P=b.height,F=d-(S+D),G=h-(T+P),J=M.some(S),re=M.some(T),le=M.some(F),De=M.some(G),de=M.none();return cx(s.direction,()=>Ad(t,J,re,de,de),()=>Ad(t,de,re,le,de),()=>Ad(t,J,de,de,De),()=>Ad(t,de,de,le,De),()=>Ad(t,J,re,de,de),()=>Ad(t,J,de,de,De),()=>Ad(t,J,re,de,de),()=>Ad(t,de,re,le,de))},L2=(t,s)=>t.fold(()=>{const a=s.rect;return Ad("absolute",M.some(a.x),M.some(a.y),M.none(),M.none())},(a,c,d,h)=>yx("absolute",s,a,c,d,h),(a,c,d,h)=>yx("fixed",s,a,c,d,h)),uv=(t,s)=>{const a=en(Kl,s),c=t.fold(a,a,()=>{const b=Va();return Kl(s).translate(-b.left,-b.top)}),d=pl(s),h=Hl(s);return Js(c.left,c.top,d,h)},F2=(t,s)=>s.fold(()=>t.fold(Qr,Qr,Js),a=>t.fold(oe(a),oe(a),()=>{const c=dv(t,a.x,a.y);return Js(c.left,c.top,a.width,a.height)})),dv=(t,s,a)=>{const c=Ds(s,a),d=()=>{const h=Va();return c.translate(-h.left,-h.top)};return t.fold(oe(c),oe(c),d)},wx=(t,s,a,c)=>t.fold(s,a,c);B2.none;const Cx=B2.relative,eb=B2.fixed,tb=(t,s)=>({anchorBox:t,origin:s}),$2=(t,s)=>tb(t,s),H2="data-alloy-placement",fv=(t,s)=>{$t(t,H2,s)},z2=t=>To(t,H2),T4=t=>ee(t,H2),nb=ne.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),k4=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:S,right:T,bottom:D,width:P,height:F}=t,G=b>=a&&b<=d,J=S>=c&&S<=h,re=G&&J,le=T<=d&&T>=a,De=D<=h&&D>=c,de=le&&De,Te=Math.min(P,b>=a?d-b:T-a),Oe=Math.min(F,S>=c?h-S:D-c);return{originInBounds:re,sizeInBounds:de,visibleW:Te,visibleH:Oe}},A4=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:S,width:T,height:D}=t,P=Math.max(a,d-T),F=Math.max(c,h-D),G=ru(b,a,P),J=ru(S,c,F),re=Math.min(G+T,d)-G,le=Math.min(J+D,h)-J;return Js(G,J,re,le)},O4=(t,s,a)=>{const c=oe(s.bottom-a.y),d=oe(a.bottom-s.y),h=S4(t,d,d,c),b=oe(s.right-a.x),S=oe(a.right-s.x);return{maxWidth:x4(t,S,S,b),maxHeight:h}},V2=(t,s,a,c)=>{const d=t.bubble,h=d.offset,b=mx(c,t.restriction,h),S=t.x+h.left,T=t.y+h.top,D=Js(S,T,s,a),{originInBounds:P,sizeInBounds:F,visibleW:G,visibleH:J}=k4(D,b),re=P&&F,le=re?D:A4(D,b),De=le.width>0&&le.height>0,{maxWidth:de,maxHeight:Te}=O4(t.direction,le,c),Oe={rect:le,maxHeight:Te,maxWidth:de,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return re||t.alwaysFit?nb.fit(Oe):nb.nofit(Oe,G,J,De)},D4=(t,s,a,c,d,h)=>{const b=c.width,S=c.height,T=(P,F,G,J,re)=>{const le=P(a,c,d,t,h),De=V2(le,b,S,h);return De.fold(oe(De),(de,Te,Oe,ze)=>(re===ze?Oe>J||Te>G:!re&&ze)?De:nb.nofit(F,G,J,re))};return zo(s,(P,F)=>{const G=en(T,F);return P.fold(oe(P),G)},nb.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:iv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Xt,Xt)},Sx=it,oc=(t,s,a)=>za(t,s,Sx,a),U2=(t,s,a)=>Wf(t,s,Sx,a),xx=Zl,W2=["top","bottom","right","left"],mv="data-alloy-transition-timer",yp=(t,s)=>Kk(t,s.classes),R4=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),wp=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return ts(s,(c,d)=>{const h=t[d].map(a),b=c.map(a);return!La(h,b)}).isSome()},Ex=t=>{const s=h=>{const S=ut(t,h).split(/\s*,\s*/);return no(S,pe)},a=h=>{if(j(h)&&/^[\d.]+/.test(h)){const b=parseFloat(h);return Ea(h,"ms")?b:b*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return zo(d,(h,b,S)=>{const T=a(c[S])+a(b);return Math.max(h,T)},0)},rg=(t,s)=>{const a=_i(),c=_i();let d;const h=D=>{var P;const F=(P=D.raw.pseudoElement)!==null&&P!==void 0?P:"";return yo(D.target,t)&&fe(F)&&wt(W2,D.raw.propertyName)},b=D=>{if(Pt(D)||h(D)){a.clear(),c.clear();const P=D==null?void 0:D.raw.type;(Pt(P)||P===ep())&&(clearTimeout(d),ee(t,mv),kd(t,s.classes))}},S=oc(t,Vh(),D=>{h(D)&&(S.unbind(),a.set(oc(t,ep(),b)),c.set(oc(t,Uk(),b)))}),T=Ex(t);requestAnimationFrame(()=>{d=setTimeout(b,T+17),$t(t,mv,d)})},Z2=(t,s)=>{ip(t,s.classes),To(t,mv).each(a=>{clearTimeout(parseInt(a,10)),ee(t,mv)}),rg(t,s)},_x=(t,s,a,c,d,h)=>{const b=R4(c,d,h);if(b||yp(t,c)){It(t,"position",a.position);const S=uv(s,t),T=L2(s,{...d,rect:S}),D=is(W2,P=>T[P]);wp(a,D)&&(ta(t,D),b&&Z2(t,c),yi(t))}else kd(t,c.classes)},j2=t=>({width:pl(t),height:Hl(t)}),Tx=(t,s,a,c)=>{uo(s,"max-height"),uo(s,"max-width");const d=j2(s);return D4(s,c.preference,t,d,a,c.bounds)},kx=(t,s)=>{const a=s.classes;kd(t,a.off),ip(t,a.on)},hv=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},M4=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},Ax=(t,s,a)=>{const c=L2(a.origin,s);a.transition.each(d=>{_x(t,a.origin,c,d,s,a.lastPlacement)}),ec(t,c)},Ox=(t,s)=>{fv(t,s.placement)},Dx=(t,s)=>{Lg(t,Math.floor(s))},gv=oe((t,s)=>{Dx(t,s),$o(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Cp=oe((t,s)=>{Dx(t,s)}),q2=(t,s,a)=>t[s]===void 0?a:t[s],N4=(t,s,a,c,d,h,b,S)=>{const T=q2(b,"maxHeightFunction",gv()),D=q2(b,"maxWidthFunction",ce),P=t.anchorBox,F=t.origin,G={bounds:F2(F,h),origin:F,preference:c,maxHeightFunction:T,maxWidthFunction:D,lastPlacement:d,transition:S};return pv(P,s,a,G)},pv=(t,s,a,c)=>{const d=Tx(t,s,a,c);return Ax(s,d,c),Ox(s,d),kx(s,d),hv(s,d,c),M4(s,d,c),{layout:d.layout,placement:d.placement}},bv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Hu=(t,s,a,c=1)=>{const d=t*c,h=s*c,b=T=>Tt(a,T).getOr([]),S=(T,D,P)=>{const F=Kt(bv,P);return{offset:Ds(T,D),classesOn:xe(P,b),classesOff:xe(F,b)}};return{southeast:()=>S(-t,s,["top","alignLeft"]),southwest:()=>S(t,s,["top","alignRight"]),south:()=>S(-t/2,s,["top","alignCentre"]),northeast:()=>S(-t,-s,["bottom","alignLeft"]),northwest:()=>S(t,-s,["bottom","alignRight"]),north:()=>S(-t/2,-s,["bottom","alignCentre"]),east:()=>S(t,-s/2,["valignCentre","left"]),west:()=>S(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>S(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>S(-d,h,["top","alignRight","inset"]),insetNorth:()=>S(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>S(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>S(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>S(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>S(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>S(d,-h/2,["valignCentre","left","inset"])}},vv=()=>Hu(0,0,{}),yv=Xt,G2=(t,s)=>a=>sc(a)==="rtl"?s:t,sc=t=>ut(t,"direction")==="rtl"?"rtl":"ltr";var fm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(fm||(fm={}));const dh="data-alloy-vertical-dir",P4=t=>X1(t,s=>lr(s)&&Vn(s,"data-alloy-vertical-dir")===fm.BottomToTop),fh=()=>ca("layouts",[rt("onLtr"),rt("onRtl"),Wo("onBottomLtr"),Wo("onBottomRtl")]),wv=(t,s,a,c,d,h,b)=>{const S=b.map(P4).getOr(!1),T=s.layouts.map(J=>J.onLtr(t)),D=s.layouts.map(J=>J.onRtl(t)),P=S?s.layouts.bind(J=>J.onBottomLtr.map(re=>re(t))).or(T).getOr(d):T.getOr(a),F=S?s.layouts.bind(J=>J.onBottomRtl.map(re=>re(t))).or(D).getOr(h):D.getOr(c);return G2(P,F)(t)},I4=(t,s,a)=>{const c=s.hotspot,d=uv(a,c.element),h=wv(t.element,s,vp(),uh(),P2(),rn(),M.some(s.hotspot.element));return M.some(yv({anchorBox:d,bubble:s.bubble.getOr(vv()),overrides:s.overrides,layouts:h}))};var B4=[rt("hotspot"),Wo("bubble"),Pe("overrides",{}),fh(),nr("placement",I4)];const Rx=(t,s,a)=>{const c=dv(a,s.x,s.y),d=Js(c.left,c.top,s.width,s.height),h=wv(t.element,s,N2(),gx(),N2(),gx(),M.none());return M.some(yv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var Sp=[rt("x"),rt("y"),Pe("height",0),Pe("width",0),Pe("bubble",vv()),Pe("overrides",{}),fh(),nr("placement",Rx)];const Mx=ne.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),L4=t=>t.fold(Xt,(s,a,c)=>s.translate(-a,-c)),ob=t=>t.fold(Xt,Xt),K2=t=>zo(t,(s,a)=>s.translate(a.left,a.top),Ds(0,0)),F4=t=>{const s=$e(t,L4);return K2(s)},Nx=t=>{const s=$e(t,ob);return K2(s)},Px=Mx.screen,Y2=Mx.absolute,sM=(t,s,a)=>{const c=Pc(a.root).dom,d=h=>{const b=Ps(h),S=Ps(t.element);return yo(b,S)};return M.from(c.frameElement).map(Ke.fromDom).filter(d).map(Ta)},xp=(t,s,a)=>{const c=Ps(t.element),d=Va(c),h=sM(t,s,a).getOr(d);return Y2(h,d.left,d.top)},Ix=(t,s,a,c)=>{const d=Px(Ds(t,s));return M.some(Gf(d,a,c))},X2=(t,s,a,c,d)=>t.map(h=>{const b=[s,h.point],S=wx(c,()=>Nx(b),()=>Nx(b),()=>F4(b)),T=vl(S.left,S.top,h.width,h.height),D=a.showAbove?P2():vp(),P=a.showAbove?rn():uh(),F=wv(d,a,D,P,D,P,M.none());return yv({anchorBox:T,bubble:a.bubble.getOr(vv()),overrides:a.overrides,layouts:F})}),J2=(t,s,a)=>{const c=xp(t,a,s);return s.node.filter(ke).bind(d=>{const h=d.dom.getBoundingClientRect(),b=Ix(h.left,h.top,h.width,h.height),S=s.node.getOr(t.element);return X2(b,c,s,a,S)})};var Cv=[rt("node"),rt("root"),Wo("bubble"),fh(),Pe("overrides",{}),Pe("showAbove",!1),nr("placement",J2)];const $4="\uFEFF",Bx=" ",ag={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},Sv=ne.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ep=(t,s,a,c)=>t.fold(s,a,c),sb=t=>t.fold(Xt,Xt,Xt),H4=Sv.before,Lx=Sv.on,z4=Sv.after,aM={before:H4,on:Lx,after:z4,cata:Ep,getStart:sb},rb=ne.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Q2=t=>rb.exact(t.start,t.soffset,t.finish,t.foffset),Fx=t=>t.match({domRange:s=>Ke.fromDom(s.startContainer),relative:(s,a)=>aM.getStart(s),exact:(s,a,c,d)=>s}),ew=rb.domRange,$x=rb.relative,V4=rb.exact,U4=t=>{const s=Fx(t);return Pc(s)},ab=ag.create,_p={domRange:ew,relative:$x,exact:V4,exactFromRange:Q2,getWin:U4,range:ab},ib=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},tw=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},xv=(t,s,a)=>{const c=t.document.createRange();return ib(c,s),tw(c,a),c},nw=(t,s,a,c,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(c.dom,d),h},ow=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),W4=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?M.some(a).map(ow):M.none()},Ev=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?M.some(s).map(ow):M.none()},cb=ne.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Hx=(t,s,a)=>s(Ke.fromDom(a.startContainer),a.startOffset,Ke.fromDom(a.endContainer),a.endOffset),iM=(t,s)=>s.match({domRange:a=>({ltr:oe(a),rtl:M.none}),relative:(a,c)=>({ltr:Ul(()=>xv(t,a,c)),rtl:Ul(()=>M.some(xv(t,c,a)))}),exact:(a,c,d,h)=>({ltr:Ul(()=>nw(t,a,c,d,h)),rtl:Ul(()=>M.some(nw(t,d,h,a,c)))})}),Tp=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>cb.rtl(Ke.fromDom(d.endContainer),d.endOffset,Ke.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Hx(t,cb.ltr,a)):Hx(t,cb.ltr,a)},kp=(t,s)=>{const a=iM(t,s);return Tp(t,a)},zx=(t,s)=>kp(t,s).match({ltr:(c,d,h,b)=>{const S=t.document.createRange();return S.setStart(c.dom,d),S.setEnd(h.dom,b),S},rtl:(c,d,h,b)=>{const S=t.document.createRange();return S.setStart(h.dom,b),S.setEnd(c.dom,d),S}});cb.ltr,cb.rtl;const Vx=(t,s,a)=>no(ad(t,a),s),kc=(t,s)=>pc(s,t),_v=(t,s,a,c)=>{const h=Ps(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,c),h},sw=(t,s,a,c)=>{const d=_v(t,s,a,c),h=yo(t,a)&&s===c;return d.collapsed&&!h},Z4=t=>M.from(t.getSelection()),rw=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return M.some(ag.create(Ke.fromDom(s.startContainer),s.startOffset,Ke.fromDom(a.endContainer),a.endOffset))}else return M.none()},lb=t=>{if(t.anchorNode===null||t.focusNode===null)return rw(t);{const s=Ke.fromDom(t.anchorNode),a=Ke.fromDom(t.focusNode);return sw(s,t.anchorOffset,a,t.focusOffset)?M.some(ag.create(s,t.anchorOffset,a,t.focusOffset)):rw(t)}},ub=t=>Z4(t).filter(s=>s.rangeCount>0).bind(lb),Ux=(t,s)=>{const a=zx(t,s);return W4(a)},Ap=(t,s)=>{const a=zx(t,s);return Ev(a)},iw=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return c(h).getOr("")},c=h=>t(h)?M.from(h.dom.nodeValue):M.none();return{get:a,getOption:c,set:(h,b)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=b}}})(ar,"text"),Wx=t=>iw.get(t),db=(t,s)=>({element:t,offset:s}),j4=(t,s)=>{const a=pr(t);if(a.length===0)return db(t,s);if(s<a.length)return db(a[s],0);{const c=a[a.length-1],d=ar(c)?Wx(c).length:pr(c).length;return db(c,d)}},fb=(t,s)=>ar(t)?db(t,s):j4(t,s),Tv=t=>t.foffset!==void 0,mh=(t,s)=>s.getSelection.getOrThunk(()=>()=>ub(t))().map(c=>{if(Tv(c)){const d=fb(c.start,c.soffset),h=fb(c.finish,c.foffset);return _p.range(d.element,d.offset,h.element,h.offset)}else return c}),hh=(t,s,a)=>{const c=Pc(s.root).dom,d=xp(t,a,s),h=mh(c,s).bind(T=>{if(Tv(T))return Ap(c,_p.exactFromRange(T)).orThunk(()=>{const P=Ke.fromText($4);jl(T.start,P);const F=Ux(c,_p.exact(P,0,P,1));return Ic(P),F}).bind(P=>Ix(P.left,P.top,P.width,P.height));{const D=Ko(T,F=>F.dom.getBoundingClientRect()),P={left:Math.min(D.firstCell.left,D.lastCell.left),right:Math.max(D.firstCell.right,D.lastCell.right),top:Math.min(D.firstCell.top,D.lastCell.top),bottom:Math.max(D.firstCell.bottom,D.lastCell.bottom)};return Ix(P.left,P.top,P.right-P.left,P.bottom-P.top)}}),S=mh(c,s).bind(T=>Tv(T)?lr(T.start)?M.some(T.start):ii(T.start):M.some(T.firstCell)).getOr(t.element);return X2(h,d,s,a,S)};var gf=[Wo("getSelection"),rt("root"),Wo("bubble"),fh(),Pe("overrides",{}),Pe("showAbove",!1),nr("placement",hh)];const gh="link-layout",Md=t=>t.x+t.width,mm=(t,s)=>t.x-s.width,zu=(t,s)=>t.y-s.height+t.height,kv=t=>t.y,Zx=(t,s,a)=>Ni(Md(t),kv(t),a.southeast(),iv(),"southeast",Pi(t,{left:0,top:2}),gh),jx=(t,s,a)=>Ni(mm(t,s),kv(t),a.southwest(),k2(),"southwest",Pi(t,{right:1,top:2}),gh),cw=(t,s,a)=>Ni(Md(t),zu(t,s),a.northeast(),A2(),"northeast",Pi(t,{left:0,bottom:3}),gh),Op=(t,s,a)=>Ni(mm(t,s),zu(t,s),a.northwest(),O2(),"northwest",Pi(t,{right:1,bottom:3}),gh),Dp=()=>[Zx,jx,cw,Op],Rp=()=>[jx,Zx,Op,cw],qx=(t,s,a)=>{const c=uv(a,s.item.element),d=wv(t.element,s,Dp(),Rp(),Dp(),Rp(),M.none());return M.some(yv({anchorBox:c,bubble:vv(),overrides:s.overrides,layouts:d}))};var Mp=[rt("item"),fh(),Pe("overrides",{}),nr("placement",qx)],Np=ra("type",{selection:gf,node:Cv,hotspot:B4,submenu:Mp,makeshift:Sp});const q4=[Cc("classes",Wt),Aa("mode","all",["all","layout","placement"])],lw=[Pe("useFixed",at),Wo("getBounds")],Pp=[Uo("anchor",Np),ca("transition",q4)],Ka=()=>{const t=document.documentElement;return eb(0,0,t.clientWidth,t.clientHeight)},Gx=t=>{const s=Ta(t.element),a=t.element.dom.getBoundingClientRect();return Cx(s.left,s.top,a.width,a.height)},pf=(t,s,a,c,d,h)=>{const b=$2(s.anchorBox,t);return N4(b,c.element,s.bubble,s.layouts,d,a,s.overrides,h)},Kx=(t,s,a,c,d)=>{const h=M.none();Av(t,s,a,c,d,h)},Av=(t,s,a,c,d,h)=>{const b=zi("placement.info",Bn(Pp),d),S=b.anchor,T=c.element,D=a.get(c.uid);I2(()=>{It(T,"position","fixed");const P=us(T,"visibility");It(T,"visibility","hidden");const F=s.useFixed()?Ka():Gx(t);S.placement(t,S,F).each(G=>{const J=h.orThunk(()=>s.getBounds.map(so)),re=pf(F,G,J,c,D,b.transition);a.set(c.uid,re)}),P.fold(()=>{uo(T,"visibility")},G=>{It(T,"visibility",G)}),us(T,"left").isNone()&&us(T,"top").isNone()&&us(T,"right").isNone()&&us(T,"bottom").isNone()&&Ur(us(T,"position"),"fixed")&&uo(T,"position")},T)};var Ov=Object.freeze({__proto__:null,position:Kx,positionWithinBounds:Av,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;pt(["position","left","right","top","bottom"],h=>uo(d,h)),T4(d),a.clear(c.uid)}}),uw=Object.freeze({__proto__:null,init:()=>{let t={};return di({readState:()=>t,clear:d=>{Ct(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>Tt(t,d)})}});const Ya=wa({fields:lw,name:"positioning",active:vx,apis:Ov,state:uw}),dw=t=>t.getSystem().isConnected(),bf=t=>{bo(t,Lc());const s=t.components();pt(s,bf)},sl=t=>{const s=t.components();pt(s,sl),bo(t,Qi())},Xx=(t,s)=>{t.getSystem().addToWorld(s),ke(t.element)&&sl(s)},fw=t=>{bf(t),t.getSystem().removeFromWorld(t)},Dv=(t,s)=>{vc(t.element,s.element)},mw=t=>{pt(t.components(),s=>Ic(s.element)),Gl(t.element),t.syncComponents()},ig=(t,s,a)=>{const c=t.components();mw(t);const d=a(s),h=Kt(c,d);pt(h,b=>{bf(b),t.getSystem().removeFromWorld(b)}),pt(d,b=>{dw(b)?Dv(t,b):(t.getSystem().addToWorld(b),Dv(t,b),ke(t.element)&&sl(b))}),t.syncComponents()},hw=(t,s,a)=>{const c=t.components(),d=xe(s,S=>K0(S).toArray());pt(c,S=>{wt(d,S)||fw(S)});const h=a(s),b=Kt(c,h);pt(b,S=>{dw(S)&&fw(S)}),pt(h,S=>{dw(S)||Xx(t,S)}),t.syncComponents()},vf=(t,s)=>{Wi(t,s,vc)},Wi=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ke(t.element)&&sl(s),t.syncComponents()},cg=t=>{bf(t),Ic(t.element),t.getSystem().removeFromWorld(t)},yf=t=>{const s=Nr(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());cg(t),s.each(a=>{a.syncComponents()})},lg=t=>{const s=t.components();pt(s,cg),Gl(t.element),t.syncComponents()},rc=(t,s)=>{Zi(t,s,vc)},fi=(t,s)=>{Zi(t,s,ql)},Zi=(t,s,a)=>{a(t,s.element);const c=pr(s.element);pt(c,d=>{s.getByDom(d).each(sl)})},Vu=t=>{const s=pr(t.element);pt(s,a=>{t.getByDom(a).each(bf)}),Ic(t.element)},Rv=(t,s,a,c)=>{a.get().each(b=>{lg(t)});const d=s.getAttachPoint(t);vf(d,t);const h=t.getSystem().build(c);return vf(t,h),a.set(h),h},_l=(t,s,a,c)=>{const d=Rv(t,s,a,c);return s.onOpen(t,d),d},ug=(t,s,a,c)=>a.get().map(()=>Rv(t,s,a,c)),G4=(t,s,a,c,d)=>{mb(t,s),_l(t,s,a,c),d(),nE(t,s)},Jx=(t,s,a)=>{a.get().each(c=>{lg(t),yf(t),s.onClose(t,c),a.clear()})},dg=(t,s,a)=>a.isOpen(),Qx=(t,s,a,c)=>dg(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),eE=(t,s,a)=>a.get(),Mv=(t,s,a,c)=>{us(t.element,s).fold(()=>{ee(t.element,a)},d=>{$t(t.element,a,d)}),It(t.element,s,c)},tE=(t,s,a)=>{To(t.element,a).fold(()=>uo(t.element,s),c=>It(t.element,s,c))},mb=(t,s,a)=>{const c=s.getAttachPoint(t);It(t.element,"position",Ya.getMode(c)),Mv(t,"visibility",s.cloakVisibilityAttr,"hidden")},K4=t=>Mn(["top","left","right","bottom"],s=>us(t,s).isSome()),nE=(t,s,a)=>{K4(t.element)||uo(t.element,"position"),tE(t,"visibility",s.cloakVisibilityAttr)};var Y4=Object.freeze({__proto__:null,cloak:mb,decloak:nE,open:_l,openWhileCloaked:G4,close:Jx,isOpen:dg,isPartOf:Qx,getState:eE,setContent:ug}),hb=Object.freeze({__proto__:null,events:(t,s)=>fs([ot(ja(),(a,c)=>{Jx(a,t,s)})])}),Nv=[ko("onOpen"),ko("onClose"),rt("isPartOf"),rt("getAttachPoint"),Pe("cloakVisibilityAttr","data-precloak-visibility")],J4=Object.freeze({__proto__:null,init:()=>{const t=Xo(),s=oe("not-implemented");return di({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Po=wa({fields:Nv,name:"sandboxing",active:hb,apis:Y4,state:J4}),hm=oe("dismiss.popups"),fg=oe("reposition.popups"),Pv=oe("mouse.released"),Q4=Za([Pe("isExtraPart",at),ca("fireEventInstead",[Pe("event",xd())])]),Hc=t=>{const s=zi("Dismissal",Q4,t);return{[hm()]:{schema:Za([rt("target")]),onReceive:(a,c)=>{Po.isOpen(a)&&(Po.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>Po.close(a),h=>bo(a,h.event)))}}}},lM=Za([ca("fireEventInstead",[Pe("event",r2())]),Sl("doReposition")]),mg=t=>{const s=zi("Reposition",lM,t);return{[fg()]:{onReceive:a=>{Po.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>bo(a,c.event))}}}},gm=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Iv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var e3=Object.freeze({__proto__:null,onLoad:gm,onUnload:Iv,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Bv=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[tr((c,d)=>{gm(c,t,s)}),sf((c,d)=>{Iv(c,t,s)})]:[Zh(t,s,gm)];return fs(a)}});const hg=()=>{const t=gn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return di({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},pb=()=>di({readState:ce}),Lv=()=>{const t=gn({}),s=gn({});return di({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:b=>Tt(t.get(),b).orThunk(()=>Tt(s.get(),b)),update:b=>{const S=t.get(),T=s.get(),D={},P={};pt(b,F=>{D[F.value]=F,Tt(F,"meta").each(G=>{Tt(G,"text").each(J=>{P[J]=F})})}),t.set({...S,...D}),s.set({...T,...P})},clear:()=>{t.set({}),s.set({})}})};var rE=Object.freeze({__proto__:null,memory:hg,dataset:Lv,manual:pb,init:t=>t.store.manager.state(t)});const gg=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},pw=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},bw=(t,s,a)=>{s.store.initialValue.each(d=>{gg(t,s,a,d)})},Fv=(t,s,a)=>{a.clear()};var Nd=[Wo("initialValue"),rt("getFallbackEntry"),rt("getDataKey"),rt("setValue"),nr("manager",{setValue:gg,getValue:pw,onLoad:bw,onUnload:Fv,state:Lv})];const aE=(t,s,a)=>s.store.getValue(t),bb=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},vb=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var n3=[rt("getValue"),Pe("setValue",ce),Wo("initialValue"),nr("manager",{setValue:bb,getValue:aE,onLoad:vb,onUnload:ce,state:Ed.init})];const iE=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},o3=(t,s,a)=>a.get(),s3=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},cE=(t,s,a)=>{a.clear()};var Bp=[Wo("initialValue"),nr("manager",{setValue:iE,getValue:o3,onLoad:s3,onUnload:cE,state:hg})],vw=[$s("store",{mode:"memory"},ra("mode",{memory:Bp,manual:n3,dataset:Nd})),ko("onSetValue"),Pe("resetOnDom",!1)];const Jt=wa({fields:vw,name:"representing",active:Bv,apis:e3,extra:{setValueFrom:(t,s)=>{const a=Jt.getValue(s);Jt.setValue(t,a)}},state:rE}),Xa=(t,s)=>R(t,{},$e(s,a=>O1(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([qo("dump",Xt)])),yb=t=>t.dump,Fr=(t,s)=>({...Et(s),...t.dump}),Tl={field:Xa,augment:Fr,get:yb},$v="placeholder",pg=ne.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Hv=t=>go(t,"uiType"),wb=(t,s,a,c)=>t.exists(d=>d!==a.owner)?pg.single(!0,oe(a)):Tt(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+xs(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),yw=(t,s,a,c)=>Hv(a)&&a.uiType===$v?wb(t,s,a,c):pg.single(!1,oe(a)),lE=(t,s,a,c)=>yw(t,s,a,c).fold((h,b)=>{const S=Hv(a)?b(s,a.config,a.validated):b(s),T=Tt(S,"components").getOr([]),D=xe(T,P=>lE(t,s,P,c));return[{...S,components:D}]},(h,b)=>{if(Hv(a)){const S=b(s,a.config,a.validated);return a.validated.preprocess.getOr(Xt)(S)}else return b(s)}),r3=(t,s,a,c)=>xe(a,d=>lE(t,s,d,c)),wf=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((b,S)=>b,(b,S)=>b);return{name:oe(t),required:h,used:c,replace:d}},a3=(t,s,a,c)=>{const d=Ko(c,(b,S)=>wf(S,b)),h=r3(t,s,a,d);return Ts(d,b=>{if(b.used()===!1&&b.required())throw new Error("Placeholder: "+b.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},bg=pg.single,Ac=pg.multiple,ma=oe($v),zv=ne.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Oc=Pe("factory",{sketch:Xt}),pm=Pe("schema",[]),Cb=rt("name"),bm=aa("pname","pname",po(t=>"<alloy."+on(t.name)+">"),wl()),Lp=qo("schema",()=>[Wo("preprocess")]),Sb=Pe("defaults",oe({})),xb=Pe("overrides",oe({})),i3=Bn([Oc,pm,Cb,bm,Sb,xb]),c3=Bn([Oc,pm,Cb,Sb,xb]),uE=Bn([Oc,pm,Cb,bm,Sb,xb]),dE=Bn([Oc,Lp,Cb,rt("unit"),bm,Sb,xb]),fE=t=>t.fold(M.some,M.none,M.some,M.some),Vv=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},mE=t=>t.fold(Xt,Xt,Xt,Xt),Eb=(t,s)=>a=>{const c=zi("Converting part type",s,a);return t(c)},Ii=Eb(zv.required,i3),iu=Eb(zv.external,c3),zc=Eb(zv.optional,uE),_b=Eb(zv.group,dE),vm=oe("entirety");var Fp=Object.freeze({__proto__:null,required:Ii,external:iu,optional:zc,group:_b,asNamedPart:fE,name:Vv,asCommon:mE,original:vm});const hE=(t,s,a,c)=>Fs(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),gE=(t,s,a)=>{const c={},d={};return pt(a,h=>{h.fold(b=>{c[b.pname]=bg(!0,(S,T,D)=>b.factory.sketch(hE(S,b,T,D)))},b=>{const S=s.parts[b.name];d[b.name]=oe(b.factory.sketch(hE(s,b,S[vm()]),S))},b=>{c[b.pname]=bg(!1,(S,T,D)=>b.factory.sketch(hE(S,b,T,D)))},b=>{c[b.pname]=Ac(!0,(S,T,D)=>{const P=S[b.name];return $e(P,F=>b.factory.sketch(Fs(b.defaults(S,F,D),F,b.overrides(S,F))))})})}),{internals:oe(c),externals:oe(d)}},ww=(t,s)=>{const a={};return pt(s,c=>{fE(c).each(d=>{const h=dM(t,d.pname);a[d.name]=b=>{const S=zi("Part: "+d.name+" in "+t,Bn(d.schema),b);return{...h,config:b,validated:S}}})}),a},dM=(t,s)=>({uiType:ma(),owner:t,name:s}),Cw=(t,s,a)=>({uiType:ma(),owner:t,name:s,config:a,validated:{}}),l3=t=>xe(t,s=>s.fold(M.none,M.some,M.none,M.none).map(a=>nf(a.name,a.schema.concat([sh(vm())]))).toArray()),pE=t=>$e(t,Vv),Sw=(t,s,a)=>gE(t,s,a),xw=(t,s,a)=>a3(M.some(t),s,s.components,a),Rs=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},rl=(t,s,a)=>Rs(t,s,a).getOrDie("Could not find part: "+a),Ew=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return pt(a,b=>{c[b]=oe(h.getByUid(d[b]))}),c},_w=(t,s)=>{const a=t.getSystem();return Ko(s.partUids,(c,d)=>oe(a.getByUid(c)))},Tw=t=>xs(t.partUids),Uv=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return pt(a,b=>{c[b]=oe(h.getByUid(d[b]).getOrDie())}),c},$p=(t,s)=>{const a=pE(s);return gs($e(a,c=>({key:c,value:t+"-"+c})))},Wv=t=>aa("partUids","partUids",k(s=>$p(s.uid,t)),wl());var u3=Object.freeze({__proto__:null,generate:ww,generateOne:Cw,schemas:l3,names:pE,substitutes:Sw,components:xw,defaultUids:$p,defaultUidsSchema:Wv,getAllParts:_w,getAllPartNames:Tw,getPart:Rs,getPartOrDie:rl,getParts:Ew,getPartsOrDie:Uv});const kw=(t,s)=>(t.length>0?[nf("parts",t)]:[]).concat([rt("uid"),Pe("dom",{}),Pe("components",[]),sh("originalSpec"),Pe("debug.sketcher",{})]).concat(s),Zv=(t,s,a,c,d)=>{const h=kw(c,d);return zi(t+" [SpecSchema]",Za(h.concat(s)),a)},d3=(t,s,a,c)=>{const d=vE(c),h=Zv(t,s,d,[],[]);return a(h,d)},Tb=(t,s,a,c,d)=>{const h=vE(d),b=l3(a),S=Wv(a),T=Zv(t,s,h,b,[S]),D=Sw(t,T,a),P=xw(t,T,D.internals());return c(T,P,h,D.externals())},bE=t=>go(t,"uid"),vE=t=>bE(t)?t:{...t,uid:Lu("uid")},f3=t=>t.uid!==void 0,ym=Za([rt("name"),rt("factory"),rt("configFields"),Pe("apis",{}),Pe("extraApis",{})]),Hp=Za([rt("name"),rt("factory"),rt("configFields"),rt("partFields"),Pe("apis",{}),Pe("extraApis",{})]),al=t=>{const s=zi("Sketcher for "+t.name,ym,t),a=h=>d3(s.name,s.configFields,s.factory,h),c=Ko(s.apis,Y0),d=Ko(s.extraApis,(h,b)=>V1(h,b));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},ac=t=>{const s=zi("Sketcher for "+t.name,Hp,t),a=b=>Tb(s.name,s.configFields,s.partFields,s.factory,b),c=ww(s.name,s.partFields),d=Ko(s.apis,Y0),h=Ko(s.extraApis,(b,S)=>V1(b,S));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...h}},zp=t=>ba("input")(t)&&Vn(t,"type")!=="radio"||ba("textarea")(t);var m3=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const h3=[rt("find")],Mo=wa({fields:h3,name:"composing",apis:m3}),kb=["input","button","textarea","select"],Aw=(t,s,a)=>{(s.disabled()?jv:Ab)(t,s)},yE=(t,s)=>s.useNative===!0&&wt(kb,Ns(t.element)),g3=t=>H(t.element,"disabled"),p3=t=>{$t(t.element,"disabled","disabled")},wE=t=>{ee(t.element,"disabled")},b3=t=>Vn(t.element,"aria-disabled")==="true",v3=t=>{$t(t.element,"aria-disabled","true")},y3=t=>{$t(t.element,"aria-disabled","false")},jv=(t,s,a)=>{s.disableClass.each(d=>{Lr(t.element,d)}),(yE(t,s)?p3:v3)(t),s.onDisabled(t)},Ab=(t,s,a)=>{s.disableClass.each(d=>{mr(t.element,d)}),(yE(t,s)?wE:y3)(t),s.onEnabled(t)},Ob=(t,s)=>yE(t,s)?g3(t):b3(t);var w3=Object.freeze({__proto__:null,enable:Ab,disable:jv,isDisabled:Ob,onLoad:Aw,set:(t,s,a,c)=>{(c?jv:Ab)(t,s)}}),S3=Object.freeze({__proto__:null,exhibit:(t,s)=>Fc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>fs([i2(Di(),(a,c)=>Ob(a,t)),Zh(t,s,Aw)])}),x3=[os("disabled",at),Pe("useNative",!0),Wo("disableClass"),ko("onDisabled"),ko("onEnabled")];const vn=wa({fields:x3,name:"disabling",active:S3,apis:w3}),l=(t,s,a,c)=>{const d=kc(t.element,"."+s.highlightClass);pt(d,h=>{Mn(c,S=>yo(S.element,h))||(mr(h,s.highlightClass),t.getSystem().getByDom(h).each(S=>{s.onDehighlight(t,S),bo(S,Jm())}))})},f=(t,s,a)=>l(t,s,a,[]),v=(t,s,a,c)=>{ae(t,s,a,c)&&(mr(c.element,s.highlightClass),s.onDehighlight(t,c),bo(c,Jm()))},C=(t,s,a,c)=>{l(t,s,a,[c]),ae(t,s,a,c)||(Lr(c.element,s.highlightClass),s.onHighlight(t,c),bo(c,a2()))},O=(t,s,a)=>{St(t,s).each(c=>{C(t,s,a,c)})},I=(t,s,a)=>{jt(t,s).each(c=>{C(t,s,a,c)})},U=(t,s,a,c)=>{Le(t,s,a,c).fold(d=>{throw d},d=>{C(t,s,a,d)})},Q=(t,s,a,c)=>{const d=yt(t,s);et(d,c).each(b=>{C(t,s,a,b)})},ae=(t,s,a,c)=>xc(c.element,s.highlightClass),we=(t,s,a)=>ir(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),Le=(t,s,a,c)=>{const d=kc(t.element,"."+s.itemClass);return M.from(d[c]).fold(()=>Xn.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},St=(t,s,a)=>ir(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),jt=(t,s,a)=>{const c=kc(t.element,"."+s.itemClass);return(c.length>0?M.some(c[c.length-1]):M.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},zt=(t,s,a,c)=>{const d=kc(t.element,"."+s.itemClass);return _t(d,b=>xc(b,s.highlightClass)).bind(b=>{const S=Qh(b,c,0,d.length-1);return t.getSystem().getByDom(d[S]).toOptional()})},Nt=(t,s,a)=>zt(t,s,a,-1),mn=(t,s,a)=>zt(t,s,a,1),yt=(t,s,a)=>{const c=kc(t.element,"."+s.itemClass);return si($e(c,d=>t.getSystem().getByDom(d).toOptional()))};var Rn=Object.freeze({__proto__:null,dehighlightAll:f,dehighlight:v,highlight:C,highlightFirst:O,highlightLast:I,highlightAt:U,highlightBy:Q,isHighlighted:ae,getHighlighted:we,getFirst:St,getLast:jt,getPrevious:Nt,getNext:mn,getCandidates:yt}),ro=[rt("highlightClass"),rt("itemClass"),ko("onHighlight"),ko("onDehighlight")];const mt=wa({fields:ro,name:"highlighting",apis:Rn}),rs=[8],Io=[9],Bo=[13],$r=[27],hr=[32],Uu=[37],Wu=[38],Zu=[39],ss=[40],Ht=(t,s,a)=>{const c=Oo(t.slice(0,s)),d=Oo(t.slice(s+1));return et(c.concat(d),a)},Ma=(t,s,a)=>{const c=Oo(t.slice(0,s));return et(c,a)},ju=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return et(d.concat(c),a)},kl=(t,s,a)=>{const c=t.slice(s+1);return et(c,a)},fo=t=>s=>{const a=s.raw;return wt(t,a.which)},kr=t=>s=>Ao(t,a=>a(s)),wm=t=>t.raw.shiftKey===!0,Vp=t=>t.raw.ctrlKey===!0,Al=Fe(wm),Jn=(t,s)=>({matches:t,classification:s}),SE=(t,s)=>et(t,c=>c.matches(s)).map(c=>c.classification),qv=(t,s,a)=>{s.exists(d=>a.exists(h=>yo(h,d)))||bn(t,B1(),{prevFocus:s,newFocus:a})},vg=()=>{const t=a=>nc(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const h=t(a);qv(a,d,h)}}},xE=()=>{const t=a=>mt.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(ce,b=>{mt.highlight(a,b)});const h=t(a);qv(a,d,h)}}};var yg;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(yg||(yg={}));const Cm=(t,s,a,c,d)=>{const h=()=>t.concat([Pe("focusManager",vg()),$s("focusInside","onFocus",Bh(D=>wt(["onFocus","onEnterOrSpace","onApi"],D)?Xn.value(D):Xn.error("Invalid value for focusInside"))),nr("handler",T),nr("state",s),nr("sendFocusIn",d)]),b=(D,P,F,G,J)=>{const re=F(D,P,G,J);return SE(re,P.event).bind(le=>le(D,P,G,J))},T={schema:h,processKey:b,toEvents:(D,P)=>{const F=D.focusInside!==yg.OnFocusMode?M.none():d(D).map(re=>ot(Sd(),(le,De)=>{re(le,D,P),De.stop()})),G=(re,le)=>{const De=fo(hr.concat(Bo))(le.event);D.focusInside===yg.OnEnterOrSpaceMode&&De&&Ym(re,le)&&d(D).each(de=>{de(re,D,P),le.stop()})},J=[ot(Vi(),(re,le)=>{b(re,le,a,D,P).fold(()=>{G(re,le)},De=>{le.stop()})}),ot(yS(),(re,le)=>{b(re,le,c,D,P).each(De=>{le.stop()})})];return fs(F.toArray().concat(J))}};return T},EE=t=>{const s=[Wo("onEscape"),Wo("onEnter"),Pe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Pe("firstTabstop",0),Pe("useTabstopAt",it),Wo("visibilitySelector")].concat([t]),a=(de,Te)=>{const Oe=de.visibilitySelector.bind(ze=>Rd(Te,ze)).getOr(Te);return xr(Oe)>0},c=(de,Te)=>{const Oe=kc(de.element,Te.selector),ze=no(Oe,We=>a(Te,We));return M.from(ze[Te.firstTabstop])},d=(de,Te)=>Te.focusManager.get(de).bind(Oe=>Rd(Oe,Te.selector)),h=(de,Te)=>a(de,Te)&&de.useTabstopAt(Te),b=(de,Te,Oe)=>{c(de,Te).each(ze=>{Te.focusManager.set(de,ze)})},S=(de,Te,Oe,ze,We)=>We(Te,Oe,Mt=>h(ze,Mt)).fold(()=>ze.cyclic?M.some(!0):M.none(),Mt=>(ze.focusManager.set(de,Mt),M.some(!0))),T=(de,Te,Oe,ze)=>{const We=kc(de.element,Oe.selector);return d(de,Oe).bind(Mt=>_t(We,en(yo,Mt)).bind(nt=>S(de,We,nt,Oe,ze)))},D=(de,Te,Oe)=>{const ze=Oe.cyclic?Ht:Ma;return T(de,Te,Oe,ze)},P=(de,Te,Oe)=>{const ze=Oe.cyclic?ju:kl;return T(de,Te,Oe,ze)},F=de=>rd(de).bind(Kc).exists(Te=>yo(Te,de)),G=(de,Te,Oe)=>d(de,Oe).filter(ze=>!Oe.useTabstopAt(ze)).bind(ze=>(F(ze)?D:P)(de,Te,Oe)),J=(de,Te,Oe)=>Oe.onEnter.bind(ze=>ze(de,Te)),re=(de,Te,Oe)=>Oe.onEscape.bind(ze=>ze(de,Te)),le=oe([Jn(kr([wm,fo(Io)]),D),Jn(fo(Io),P),Jn(kr([Al,fo(Bo)]),J)]),De=oe([Jn(fo($r),re),Jn(fo(Io),G)]);return Cm(s,Ed.init,le,De,()=>M.some(b))};var Db=EE(qo("cyclic",at)),w7=EE(qo("cyclic",it));const C7=(t,s,a)=>(_0(t,a,Di()),M.some(!0)),Ow=(t,s,a)=>zp(a)&&fo(hr)(s.event)?M.none():C7(t,s,a),wg=(t,s)=>M.some(!0),S7=[Pe("execute",Ow),Pe("useSpace",!1),Pe("useEnter",!0),Pe("useControlEnter",!1),Pe("useDown",!1)],E3=(t,s,a)=>a.execute(t,s,t.element),x7=(t,s,a,c)=>{const d=a.useSpace&&!zp(t.element)?hr:[],h=a.useEnter?Bo:[],b=a.useDown?ss:[],S=d.concat(h).concat(b);return[Jn(fo(S),E3)].concat(a.useControlEnter?[Jn(kr([Vp,fo(Bo)]),E3)]:[])},_3=(t,s,a,c)=>a.useSpace&&!zp(t.element)?[Jn(fo(hr),wg)]:[];var E7=Cm(S7,Ed.init,x7,_3,()=>M.none());const mM=()=>{const t=Xo();return di({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var T3=Object.freeze({__proto__:null,flatgrid:mM,init:t=>t.state(t)});const hM=t=>(s,a,c,d)=>{const h=t(s.element);return O3(h,s,a,c,d)},_E=(t,s)=>{const a=G2(t,s);return hM(a)},k3=(t,s)=>{const a=G2(s,t);return hM(a)},A3=t=>(s,a,c,d)=>O3(t,s,a,c,d),O3=(t,s,a,c,d)=>c.focusManager.get(s).bind(b=>t(s.element,b,c,d)).map(b=>(c.focusManager.set(s,b),!0)),gM=A3,pM=A3,Gv=A3,bM=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Dw=t=>!bM(t.dom),TE=(t,s)=>_t(t,s).map(a=>({index:a,candidates:t})),Rw=(t,s,a)=>{const c=b=>yo(b,s),d=kc(t,a),h=no(d,Dw);return TE(h,c)},Up=(t,s)=>_t(t,a=>yo(s,a)),T7=(t,s,a,c)=>{const d=Math.floor(s/a),h=s%a;return c(d,h).bind(b=>{const S=b.row*a+b.column;return S>=0&&S<t.length?M.some(t[S]):M.none()})},vM=(t,s,a,c,d)=>T7(t,s,c,(h,b)=>{const T=h===a-1?t.length-h*c:c,D=Qh(b,d,0,T-1);return M.some({row:h,column:D})}),yM=(t,s,a,c,d)=>T7(t,s,c,(h,b)=>{const S=Qh(h,d,0,a-1),D=S===a-1?t.length-S*c:c,P=ru(b,0,D-1);return M.some({row:S,column:P})}),wM=(t,s,a,c)=>vM(t,s,a,c,1),k7=(t,s,a,c)=>vM(t,s,a,c,-1),dY=(t,s,a,c)=>yM(t,s,a,c,-1),fY=(t,s,a,c)=>yM(t,s,a,c,1),A7=[rt("selector"),Pe("execute",Ow),tc("onEscape"),Pe("captureTab",!1),rh()],O7=(t,s,a)=>{ir(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},D3=(t,s)=>s.focusManager.get(t).bind(a=>Rd(a,s.selector)),D7=(t,s,a,c)=>D3(t,a).bind(d=>a.execute(t,s,d)),kE=t=>(s,a,c,d)=>Rw(s,a,c.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),CM=(t,s,a)=>a.captureTab?M.some(!0):M.none(),SM=(t,s,a)=>a.onEscape(t,s),xM=kE(k7),EM=kE(wM),_M=kE(dY),TM=kE(fY),R7=oe([Jn(fo(Uu),_E(xM,EM)),Jn(fo(Zu),k3(xM,EM)),Jn(fo(Wu),gM(_M)),Jn(fo(ss),pM(TM)),Jn(kr([wm,fo(Io)]),CM),Jn(kr([Al,fo(Io)]),CM),Jn(fo(hr.concat(Bo)),D7)]),kM=oe([Jn(fo($r),SM),Jn(fo(hr),wg)]);var M7=Cm(A7,mM,R7,kM,()=>M.some(O7));const AE=(t,s,a,c,d)=>{const h=S=>Ns(S)==="button"&&Vn(S,"disabled")==="disabled",b=(S,T,D)=>d(S,T,c,0,D.length-1,D[T],P=>h(D[P])?b(S,P,D):M.from(D[P]));return Rw(t,a,s).bind(S=>{const T=S.index,D=S.candidates;return b(T,T,D)})},R3=(t,s,a,c)=>AE(t,s,a,c,(d,h,b,S,T,D,P)=>{const F=ru(h+b,S,T);return F===d?M.from(D):P(F)}),Mw=(t,s,a,c)=>AE(t,s,a,c,(d,h,b,S,T,D,P)=>{const F=Qh(h,b,S,T);return F===d?M.none():P(F)}),AM=[rt("selector"),Pe("getInitial",M.none),Pe("execute",Ow),tc("onEscape"),Pe("executeOnMove",!1),Pe("allowVertical",!0),Pe("allowHorizontal",!0),Pe("cycles",!0)],N7=(t,s)=>s.focusManager.get(t).bind(a=>Rd(a,s.selector)),M3=(t,s,a)=>N7(t,a).bind(c=>a.execute(t,s,c)),P7=(t,s,a)=>{s.getInitial(t).orThunk(()=>ir(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},OM=(t,s,a)=>(a.cycles?Mw:R3)(t,a.selector,s,-1),DM=(t,s,a)=>(a.cycles?Mw:R3)(t,a.selector,s,1),Kv=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?M3(s,a,c):M.some(!0)),RM=(t,s,a)=>a.onEscape(t,s),MM=(t,s,a,c)=>{const d=[...a.allowHorizontal?Uu:[]].concat(a.allowVertical?Wu:[]),h=[...a.allowHorizontal?Zu:[]].concat(a.allowVertical?ss:[]);return[Jn(fo(d),Kv(_E(OM,DM))),Jn(fo(h),Kv(k3(OM,DM))),Jn(fo(Bo),M3),Jn(fo(hr),M3)]},NM=oe([Jn(fo(hr),wg),Jn(fo($r),RM)]);var PM=Cm(AM,Ed.init,MM,NM,()=>M.some(P7));const Nw=(t,s,a)=>M.from(t[s]).bind(c=>M.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),IM=(t,s,a,c)=>{const h=t[s].length,b=Qh(a,c,0,h-1);return Nw(t,s,b)},BM=(t,s,a,c)=>{const d=Qh(a,c,0,t.length-1),h=t[d].length,b=ru(s,0,h-1);return Nw(t,d,b)},LM=(t,s,a,c)=>{const h=t[s].length,b=ru(a+c,0,h-1);return Nw(t,s,b)},OE=(t,s,a,c)=>{const d=ru(a+c,0,t.length-1),h=t[d].length,b=ru(s,0,h-1);return Nw(t,d,b)},I7=(t,s,a)=>IM(t,s,a,1),DE=(t,s,a)=>IM(t,s,a,-1),B7=(t,s,a)=>BM(t,a,s,-1),FM=(t,s,a)=>BM(t,a,s,1),il=(t,s,a)=>LM(t,s,a,-1),L7=(t,s,a)=>LM(t,s,a,1),$M=(t,s,a)=>OE(t,a,s,-1),HM=(t,s,a)=>OE(t,a,s,1),F7=[nf("selectors",[rt("row"),rt("cell")]),Pe("cycles",!0),Pe("previousSelector",M.none),Pe("execute",Ow)],zM=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return ir(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},VM=(t,s,a)=>nc(t.element).bind(c=>a.execute(t,s,c)),$7=(t,s)=>$e(t,a=>kc(a,s.selectors.cell)),RE=(t,s)=>(a,c,d)=>{const h=d.cycles?t:s;return Rd(c,d.selectors.row).bind(b=>{const S=kc(b,d.selectors.cell);return Up(S,c).bind(T=>{const D=kc(a,d.selectors.row);return Up(D,b).bind(P=>{const F=$7(D,d);return h(F,P,T).map(G=>G.cell)})})})},UM=RE(DE,il),WM=RE(I7,L7),ZM=RE(B7,$M),H7=RE(FM,HM),z7=oe([Jn(fo(Uu),_E(UM,WM)),Jn(fo(Zu),k3(UM,WM)),Jn(fo(Wu),gM(ZM)),Jn(fo(ss),pM(H7)),Jn(fo(hr.concat(Bo)),VM)]),jM=oe([Jn(fo(hr),wg)]);var qM=Cm(F7,Ed.init,z7,jM,()=>M.some(zM));const GM=[rt("selector"),Pe("execute",Ow),Pe("moveOnTab",!1)],KM=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),V7=(t,s,a)=>{ir(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},YM=(t,s,a)=>Mw(t,a.selector,s,-1),XM=(t,s,a)=>Mw(t,a.selector,s,1),JM=(t,s,a,c)=>a.moveOnTab?Gv(YM)(t,s,a,c):M.none(),QM=(t,s,a,c)=>a.moveOnTab?Gv(XM)(t,s,a,c):M.none(),Wp=oe([Jn(fo(Wu),Gv(YM)),Jn(fo(ss),Gv(XM)),Jn(kr([wm,fo(Io)]),JM),Jn(kr([Al,fo(Io)]),QM),Jn(fo(Bo),KM),Jn(fo(hr),KM)]),eN=oe([Jn(fo(hr),wg)]);var tN=Cm(GM,Ed.init,Wp,eN,()=>M.some(V7));const nN=[tc("onSpace"),tc("onEnter"),tc("onShiftEnter"),tc("onLeft"),tc("onRight"),tc("onTab"),tc("onShiftTab"),tc("onUp"),tc("onDown"),tc("onEscape"),Pe("stopSpaceKeyup",!1),Wo("focusIn")],U7=(t,s,a)=>[Jn(fo(hr),a.onSpace),Jn(kr([Al,fo(Bo)]),a.onEnter),Jn(kr([wm,fo(Bo)]),a.onShiftEnter),Jn(kr([wm,fo(Io)]),a.onShiftTab),Jn(kr([Al,fo(Io)]),a.onTab),Jn(fo(Wu),a.onUp),Jn(fo(ss),a.onDown),Jn(fo(Uu),a.onLeft),Jn(fo(Zu),a.onRight),Jn(fo(hr),a.onSpace)],Yv=(t,s,a)=>[...a.stopSpaceKeyup?[Jn(fo(hr),wg)]:[],Jn(fo($r),a.onEscape)];var W7=Cm(nN,Ed.init,U7,Yv,t=>t.focusIn);const Z7=Db.schema(),oN=w7.schema(),j7=PM.schema(),q7=M7.schema(),G7=qM.schema(),sN=E7.schema(),N3=tN.schema(),P3=W7.schema();var K7=Object.freeze({__proto__:null,acyclic:Z7,cyclic:oN,flow:j7,flatgrid:q7,matrix:G7,execution:sN,menu:N3,special:P3});const Zp=t=>Vr(t,"setGridSize"),Sn=U1({branchKey:"mode",branches:K7,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{Zp(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:T3}),I3=(t,s)=>{I2(()=>{ig(t,s,()=>$e(s,t.getSystem().build))},t.element)},rN=(t,s)=>{I2(()=>{hw(t,s,()=>JS(t.element,s,t.getSystem().buildOrPatch))},t.element)},Y7=(t,s,a,c)=>{fw(s);const d=x2(t.element,a,c,t.getSystem().buildOrPatch);Xx(t,d),t.syncComponents()},Rb=(t,s,a)=>{const c=t.getSystem().build(a);Wi(t,c,s)},Pw=(t,s,a,c)=>{yf(s),Rb(t,(d,h)=>jf(d,h,a),c)},aN=(t,s,a,c)=>(s.reuseDom?rN:I3)(t,c),B3=(t,s,a,c)=>{Rb(t,vc,c)},jp=(t,s,a,c)=>{Rb(t,Yd,c)},qp=(t,s,a,c)=>{const d=ME(t);et(d,b=>yo(c.element,b.element)).each(yf)},ME=(t,s)=>t.components(),iN=(t,s,a,c,d)=>{const h=ME(t);return M.from(h[c]).map(b=>(d.fold(()=>yf(b),S=>{(s.reuseDom?Y7:Pw)(t,b,c,S)}),b))};var Cg=Object.freeze({__proto__:null,append:B3,prepend:jp,remove:qp,replaceAt:iN,replaceBy:(t,s,a,c,d)=>{const h=ME(t);return _t(h,c).bind(b=>iN(t,s,a,b,d))},set:aN,contents:ME});const Wn=wa({fields:[Oa("reuseDom",!0)],name:"replacing",apis:Cg}),J7=(t,s)=>{const a=fs(s);return wa({fields:[rt("enabled")],name:t,active:{events:oe(a)}})},Kn=(t,s)=>{const a=J7(t,s);return{key:t,value:{config:{},me:a,configAsRaw:oe({}),initialConfig:{},state:Ed}}},L3=(t,s)=>{s.ignore||($c(t.element),s.onFocus(t))};var lN=Object.freeze({__proto__:null,focus:L3,blur:(t,s)=>{s.ignore||Ga(t.element)},isFocused:t=>hf(t.element)}),eH=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Fc(a)},events:t=>fs([ot(Sd(),(s,a)=>{L3(s,t),a.stop()})].concat(t.stopMousedown?[ot(Ir(),(s,a)=>{a.event.prevent()})]:[]))}),NE=[ko("onFocus"),Pe("stopMousedown",!1),Pe("ignore",!1)];const $n=wa({fields:NE,name:"focusing",active:eH,apis:lN}),PE=t=>({init:()=>{const a=gn(t);return{get:()=>a.get(),set:S=>a.set(S),clear:()=>a.set(t),readState:()=>a.get()}}}),uN=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},tH=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?Lr(t.element,c):mr(t.element,c)})},Xv=(t,s,a,c)=>{const d=a.get();a.set(c),tH(t,s,a),uN(t,s,a),d!==c&&s.onToggled(t,c)},F3=(t,s,a)=>{Xv(t,s,a,!a.get())},dN=(t,s,a)=>{Xv(t,s,a,!0)},fN=(t,s,a)=>{Xv(t,s,a,!1)},nH=(t,s,a)=>a.get(),IE=(t,s,a)=>{Xv(t,s,a,s.selected)};var oH=Object.freeze({__proto__:null,onLoad:IE,toggle:F3,isOn:nH,on:dN,off:fN,set:Xv}),sH=Object.freeze({__proto__:null,exhibit:()=>Fc({}),events:(t,s)=>{const a=kS(t,s,F3),c=Zh(t,s,IE);return fs(dt([t.toggleOnExecute?[a]:[],[c]]))}});const mN=(t,s,a)=>{$t(t.element,"aria-pressed",a),s.syncWithExpanded&&$3(t,s,a)},rH=(t,s,a)=>{$t(t.element,"aria-selected",a)},aH=(t,s,a)=>{$t(t.element,"aria-checked",a)},$3=(t,s,a)=>{$t(t.element,"aria-expanded",a)};var Iw=[Pe("selected",!1),Wo("toggleClass"),Pe("toggleOnExecute",!0),ko("onToggled"),$s("aria",{mode:"none"},ra("mode",{pressed:[Pe("syncWithExpanded",!1),nr("update",mN)],checked:[nr("update",aH)],expanded:[nr("update",$3)],selected:[nr("update",rH)],none:[nr("update",ce)]}))];const mo=wa({fields:Iw,name:"toggling",active:sH,apis:oH,state:PE(!1)}),Jv=()=>{const t=(s,a)=>{a.stop(),Qm(s)};return[ot(zh(),t),ot(N1(),t),Wh(tu()),Wh(Ir())]},Qv=t=>{const s=a=>rf((c,d)=>{a(c),d.stop()});return fs(dt([t.map(s).toArray(),Jv()]))},H3="alloy.item-hover",z3="alloy.item-focus",hN="alloy.item-toggled",gN=t=>{(nc(t.element).isNone()||$n.isFocused(t))&&($n.isFocused(t)||$n.focus(t),bn(t,H3,{item:t}))},V3=t=>{bn(t,z3,{item:t})},iH=(t,s)=>{bn(t,hN,{item:t,state:s})},U3=oe(H3),cH=oe(z3),lH=oe(hN),pN=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Xt),BE=(t,s)=>({aria:{mode:s?"selected":"checked"},...Li(t,(a,c)=>c!=="exclusive"),onToggled:(a,c)=>{Ne(t.onToggled)&&t.onToggled(a,c),iH(a,c)}}),W3=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:pN(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Tl.augment(t.itemBehaviours,[t.toggling.fold(mo.revoke,s=>mo.config(BE(s,t.role.exists(a=>a==="option")))),$n.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{V3(s)}}),Sn.config({mode:"execution"}),Jt.config({store:{mode:"memory",initialValue:t.data}}),Kn("item-type-events",[...Jv(),ot(Bc(),gN),ot(S0(),$n.focus)])]),components:t.components,eventOrder:t.eventOrder}),Z3=[rt("data"),rt("components"),rt("dom"),Pe("hasSubmenu",!1),Wo("toggling"),Wo("role"),Tl.field("itemBehaviours",[mo,$n,Sn,Jt]),Pe("ignoreFocus",!1),Pe("domModification",{}),nr("builder",W3),Pe("eventOrder",{})],uH=t=>({dom:t.dom,components:t.components,events:fs([H1(S0())])}),dH=[rt("dom"),rt("components"),nr("builder",uH)],j3=oe("item-widget"),q3=oe([Ii({name:"widget",overrides:t=>({behaviours:Et([Jt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ce}})])})})]),bN=t=>{const s=Sw(j3(),t,q3()),a=xw(j3(),t,s.internals()),c=h=>Rs(h,t,"widget").map(b=>(Sn.focusIn(b),b)),d=(h,b)=>zp(b.event.target)?M.none():(t.autofocus&&b.setSource(h.element),M.none());return{dom:t.dom,components:a,domModification:t.domModification,events:fs([rf((h,b)=>{c(h).each(S=>{b.stop()})}),ot(Bc(),gN),ot(S0(),(h,b)=>{t.autofocus?c(h):$n.focus(h)})]),behaviours:Tl.augment(t.widgetBehaviours,[Jt.config({store:{mode:"memory",initialValue:t.data}}),$n.config({ignore:t.ignoreFocus,onFocus:h=>{V3(h)}}),Sn.config({mode:"special",focusIn:t.autofocus?h=>{c(h)}:qk(),onLeft:d,onRight:d,onEscape:(h,b)=>!$n.isFocused(h)&&!t.autofocus?($n.focus(h),M.some(!0)):(t.autofocus&&b.setSource(h.element),M.none())})])}},vN=[rt("uid"),rt("data"),rt("components"),rt("dom"),Pe("autofocus",!1),Pe("ignoreFocus",!1),Tl.field("widgetBehaviours",[Jt,$n,Sn]),Pe("domModification",{}),Wv(q3()),nr("builder",bN)],fH=ra("type",{widget:vN,item:Z3,separator:dH}),mH=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),hH=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),gH=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),pH=oe([_b({factory:{sketch:t=>{const s=zi("menu.spec item",fH,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>go(s,"uid")?s:{...s,uid:Lu("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),bH=oe([yr("role"),rt("value"),rt("items"),rt("dom"),rt("components"),Pe("eventOrder",{}),Xa("menuBehaviours",[mt,Jt,Mo,Sn]),$s("movement",{mode:"menu",moveOnTab:!0},ra("mode",{grid:[rh(),nr("config",mH)],matrix:[nr("config",hH),rt("rowSelector"),Pe("previousSelector",M.none)],menu:[Pe("moveOnTab",!0),nr("config",gH)]})),G1(),Pe("fakeFocus",!1),Pe("focusManager",vg()),ko("onHighlight"),ko("onDehighlight"),Pe("showMenuRole",!0)]),G3=oe("alloy.menu-focus"),vH=(t,s)=>{const a=kc(t.element,'[role="menuitemradio"][aria-checked="true"]');pt(a,c=>{yo(c,s.element)||t.getSystem().getByDom(c).each(d=>{mo.off(d)})})},yH=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Fr(t.menuBehaviours,[mt.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Jt.config({store:{mode:"memory",initialValue:t.value}}),Mo.config({find:M.some}),Sn.config(t.movement.config(t,t.movement))]),events:fs([ot(cH(),(d,h)=>{const b=h.event;d.getSystem().getByDom(b.target).each(S=>{mt.highlight(d,S),h.stop(),bn(d,G3(),{menu:d,item:S})})}),ot(U3(),(d,h)=>{const b=h.event.item;mt.highlight(d,b)}),ot(lH(),(d,h)=>{const{item:b,state:S}=h.event;S&&Vn(b.element,"role")==="menuitemradio"&&vH(d,b)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Mb=ac({name:"Menu",configFields:bH(),partFields:pH(),factory:yH}),wH=t=>Mc(t,(s,a)=>({k:s,v:a})),yN=(t,s,a,c)=>Tt(a,c).bind(d=>Tt(t,d).bind(h=>{const b=yN(t,s,a,h);return M.some([h].concat(b))})).getOr([]),Nb=(t,s)=>{const a={};Ts(t,(b,S)=>{pt(b,T=>{a[T]=S})});const c=s,d=wH(s),h=Ko(d,(b,S)=>[S].concat(yN(a,c,d,S)));return Ko(a,b=>Tt(h,b).getOr([b]))},CH=()=>{const t=gn({}),s=gn({}),a=gn({}),c=Xo(),d=gn({}),h=()=>{t.set({}),s.set({}),a.set({}),c.clear()},b=()=>c.get().isNone(),S=(We,Mt)=>{s.set({...s.get(),[We]:{type:"prepared",menu:Mt}})},T=(We,Mt,tn,nt)=>{c.set(We),t.set(tn),s.set(Mt),d.set(nt);const an=Nb(nt,tn);a.set(an)},D=We=>ts(t.get(),(Mt,tn)=>Mt===We),P=(We,Mt,tn)=>le(We).bind(nt=>D(We).bind(an=>Mt(an).map(Vt=>({triggeredMenu:nt,triggeringItem:Vt,triggeringPath:tn})))),F=(We,Mt)=>{const tn=no(de(We).toArray(),nt=>le(nt).isSome());return Tt(a.get(),We).bind(nt=>{const an=Oo(tn.concat(nt)),Vt=xe(an,(dn,Co)=>P(dn,Mt,an.slice(0,Co+1)).fold(()=>Ur(c.get(),dn)?[]:[M.none()],Ys=>[M.some(Ys)]));return Qo(Vt)})},G=We=>Tt(t.get(),We).map(Mt=>{const tn=Tt(a.get(),We).getOr([]);return[Mt].concat(tn)}),J=We=>Tt(a.get(),We).bind(Mt=>Mt.length>1?M.some(Mt.slice(1)):M.none()),re=We=>Tt(a.get(),We),le=We=>De(We).bind(wN),De=We=>Tt(s.get(),We),de=We=>Tt(t.get(),We);return{setMenuBuilt:S,setContents:T,expand:G,refresh:re,collapse:J,lookupMenu:De,lookupItem:de,otherMenus:We=>{const Mt=d.get();return Kt(xs(Mt),We)},getPrimary:()=>c.get().bind(le),getMenus:()=>s.get(),clear:h,isClear:b,getTriggeringPath:F}},wN=t=>t.type==="prepared"?M.some(t.menu):M.none(),Gp={init:CH,extractPreparedMenu:wN},K3=on("tiered-menu-item-highlight"),CN=on("tiered-menu-item-dehighlight");var Ja;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ja||(Ja={}));const SH=(t,s)=>{const a=Xo(),c=(vt,Ut,Un)=>Ko(Un,(ao,Tn)=>{const Yn=()=>Mb.sketch({...ao,value:Tn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ks,bs)=>{bn(ks,K3,{menuComp:ks,itemComp:bs})},onDehighlight:(ks,bs)=>{bn(ks,CN,{menuComp:ks,itemComp:bs})},focusManager:t.fakeFocus?xE():vg()});return Tn===Ut?{type:"prepared",menu:vt.getSystem().build(Yn())}:{type:"notbuilt",nbMenu:Yn}}),d=Gp.init(),h=vt=>{const Ut=c(vt,t.data.primary,t.data.menus),Un=T();return d.setContents(t.data.primary,Ut,t.data.expansions,Un),d.getPrimary()},b=vt=>Jt.getValue(vt).value,S=(vt,Ut,Un)=>Ss(Ut,ao=>{if(!ao.getSystem().isConnected())return M.none();const Tn=mt.getCandidates(ao);return et(Tn,Yn=>b(Yn)===Un)}),T=vt=>Ko(t.data.menus,(Ut,Un)=>xe(Ut.items,ao=>ao.type==="separator"?[]:[ao.data.value])),D=mt.highlight,P=(vt,Ut)=>{D(vt,Ut),mt.getHighlighted(Ut).orThunk(()=>mt.getFirst(Ut)).each(Un=>{t.fakeFocus?mt.highlight(Ut,Un):_0(vt,Un.element,S0())})},F=(vt,Ut)=>si($e(Ut,Un=>vt.lookupMenu(Un).bind(ao=>ao.type==="prepared"?M.some(ao.menu):M.none()))),G=(vt,Ut,Un)=>{const ao=F(Ut,Ut.otherMenus(Un));pt(ao,Tn=>{kd(Tn.element,[t.markers.backgroundMenu]),t.stayInDom||Wn.remove(vt,Tn)})},J=vt=>a.get().getOrThunk(()=>{const Ut={},Un=kc(vt.element,`.${t.markers.item}`),ao=no(Un,Tn=>Vn(Tn,"aria-haspopup")==="true");return pt(ao,Tn=>{vt.getSystem().getByDom(Tn).each(Yn=>{const ks=b(Yn);Ut[ks]=Yn})}),a.set(Ut),Ut}),re=(vt,Ut)=>{const Un=J(vt);Ts(Un,(ao,Tn)=>{const Yn=wt(Ut,Tn);$t(ao.element,"aria-expanded",Yn)})},le=(vt,Ut,Un)=>M.from(Un[0]).bind(ao=>Ut.lookupMenu(ao).bind(Tn=>{if(Tn.type==="notbuilt")return M.none();{const Yn=Tn.menu,ks=F(Ut,Un.slice(1));return pt(ks,bs=>{Lr(bs.element,t.markers.backgroundMenu)}),ke(Yn.element)||Wn.append(vt,El(Yn)),kd(Yn.element,[t.markers.backgroundMenu]),P(vt,Yn),G(vt,Ut,Un),M.some(Yn)}}));let De;(function(vt){vt[vt.HighlightSubmenu=0]="HighlightSubmenu",vt[vt.HighlightParent=1]="HighlightParent"})(De||(De={}));const de=(vt,Ut,Un)=>{if(Un.type==="notbuilt"){const ao=vt.getSystem().build(Un.nbMenu());return d.setMenuBuilt(Ut,ao),ao}else return Un.menu},Te=(vt,Ut,Un=De.HighlightSubmenu)=>{if(Ut.hasConfigured(vn)&&vn.isDisabled(Ut))return M.some(Ut);{const ao=b(Ut);return d.expand(ao).bind(Tn=>(re(vt,Tn),M.from(Tn[0]).bind(Yn=>d.lookupMenu(Yn).bind(ks=>{const bs=de(vt,Yn,ks);return ke(bs.element)||Wn.append(vt,El(bs)),t.onOpenSubmenu(vt,Ut,bs,Oo(Tn)),Un===De.HighlightSubmenu?(mt.highlightFirst(bs),le(vt,d,Tn)):(mt.dehighlightAll(bs),M.some(Ut))}))))}},Oe=(vt,Ut)=>{const Un=b(Ut);return d.collapse(Un).bind(ao=>(re(vt,ao),le(vt,d,ao).map(Tn=>(t.onCollapseMenu(vt,Ut,Tn),Tn))))},ze=(vt,Ut)=>{const Un=b(Ut);return d.refresh(Un).bind(ao=>(re(vt,ao),le(vt,d,ao)))},We=(vt,Ut)=>zp(Ut.element)?M.none():Te(vt,Ut,De.HighlightSubmenu),Mt=(vt,Ut)=>zp(Ut.element)?M.none():Oe(vt,Ut),tn=(vt,Ut)=>Oe(vt,Ut).orThunk(()=>t.onEscape(vt,Ut).map(()=>vt)),nt=vt=>(Ut,Un)=>Rd(Un.getSource(),`.${t.markers.item}`).bind(ao=>Ut.getSystem().getByDom(ao).toOptional().bind(Tn=>vt(Ut,Tn).map(it))),an=fs([ot(G3(),(vt,Ut)=>{const Un=Ut.event.item;d.lookupItem(b(Un)).each(()=>{const ao=Ut.event.menu;mt.highlight(vt,ao);const Tn=b(Ut.event.item);d.refresh(Tn).each(Yn=>G(vt,d,Yn))})}),rf((vt,Ut)=>{const Un=Ut.event.target;vt.getSystem().getByDom(Un).each(ao=>{b(ao).indexOf("collapse-item")===0&&Oe(vt,ao),Te(vt,ao,De.HighlightSubmenu).fold(()=>{t.onExecute(vt,ao)},ce)})}),tr((vt,Ut)=>{h(vt).each(Un=>{Wn.append(vt,El(Un)),t.onOpenMenu(vt,Un),t.highlightOnOpen===Ja.HighlightMenuAndItem?P(vt,Un):t.highlightOnOpen===Ja.HighlightJustMenu&&D(vt,Un)})}),ot(K3,(vt,Ut)=>{t.onHighlightItem(vt,Ut.event.menuComp,Ut.event.itemComp)}),ot(CN,(vt,Ut)=>{t.onDehighlightItem(vt,Ut.event.menuComp,Ut.event.itemComp)}),...t.navigateOnHover?[ot(U3(),(vt,Ut)=>{const Un=Ut.event.item;ze(vt,Un),Te(vt,Un,De.HighlightParent),t.onHover(vt,Un)})]:[]]),Vt=vt=>mt.getHighlighted(vt).bind(mt.getHighlighted),dn=vt=>{Vt(vt).each(Ut=>{Oe(vt,Ut)})},Co=vt=>{d.getPrimary().each(Ut=>{P(vt,Ut)})},Ys=vt=>M.from(vt.components()[0]).filter(Ut=>Vn(Ut.element,"role")==="menu"),hn={collapseMenu:dn,highlightPrimary:Co,repositionMenus:vt=>{d.getPrimary().bind(Un=>Vt(vt).bind(ao=>{const Tn=b(ao),Yn=jc(d.getMenus()),ks=si($e(Yn,Gp.extractPreparedMenu));return d.getTriggeringPath(Tn,bs=>S(vt,ks,bs))}).map(ao=>({primary:Un,triggeringPath:ao}))).fold(()=>{Ys(vt).each(Un=>{t.onRepositionMenu(vt,Un,[])})},({primary:Un,triggeringPath:ao})=>{t.onRepositionMenu(vt,Un,ao)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Fr(t.tmenuBehaviours,[Sn.config({mode:"special",onRight:nt(We),onLeft:nt(Mt),onEscape:nt(tn),focusIn:(vt,Ut)=>{d.getPrimary().each(Un=>{_0(vt,Un.element,S0())})}}),mt.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Mo.config({find:vt=>mt.getHighlighted(vt)}),Wn.config({})]),eventOrder:t.eventOrder,apis:hn,events:an}},xH=oe("collapse-item"),Pd=(t,s,a)=>({primary:t,menus:s,expansions:a}),SN=(t,s)=>({primary:t,menus:to(t,s),expansions:{}}),xN=t=>({value:on(xH()),meta:{text:t}}),Kp=al({name:"TieredMenu",configFields:[pp("onExecute"),pp("onEscape"),oh("onOpenMenu"),oh("onOpenSubmenu"),ko("onRepositionMenu"),ko("onCollapseMenu"),Pe("highlightOnOpen",Ja.HighlightMenuAndItem),nf("data",[rt("primary"),rt("menus"),rt("expansions")]),Pe("fakeFocus",!1),ko("onHighlightItem"),ko("onDehighlightItem"),ko("onHover"),gp(),rt("dom"),Pe("navigateOnHover",!0),Pe("stayInDom",!1),Xa("tmenuBehaviours",[Sn,mt,Mo,Wn]),Pe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:SH,extraApis:{tieredData:Pd,singleData:SN,collapseItem:xN}}),EH=(t,s,a,c,d)=>{const h=()=>t.lazySink(s),b=c.type==="horizontal"?{layouts:{onLtr:()=>vp(),onRtl:()=>uh()}}:{},S=D=>D.length===2,T=D=>S(D)?b:{};return Kp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Po.close(s),t.onEscape.map(D=>D(s)),M.some(!0)),onExecute:()=>M.some(!0),onOpenMenu:(D,P)=>{Ya.positionWithinBounds(h().getOrDie(),P,a,d())},onOpenSubmenu:(D,P,F,G)=>{const J=h().getOrDie();Ya.position(J,F,{anchor:{type:"submenu",item:P,...T(G)}})},onRepositionMenu:(D,P,F)=>{const G=h().getOrDie();Ya.positionWithinBounds(G,P,a,d()),pt(F,J=>{const re=T(J.triggeringPath);Ya.position(G,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem,...re}})})}})},LE=(t,s)=>{const a=(G,J)=>t.getRelated(G).exists(le=>ch(le,J)),c=(G,J)=>{Po.setContent(G,J)},d=(G,J,re)=>{const le=M.none;h(G,J,re,le)},h=(G,J,re,le)=>{const De=t.lazySink(G).getOrDie();Po.openWhileCloaked(G,J,()=>Ya.positionWithinBounds(De,G,re,le())),Jt.setValue(G,M.some({mode:"position",config:re,getBounds:le}))},b=(G,J,re)=>{S(G,J,re,M.none)},S=(G,J,re,le)=>{const De=EH(t,G,J,re,le);Po.open(G,De),Jt.setValue(G,M.some({mode:"menu",menu:De}))},T=G=>{Po.isOpen(G)&&(Jt.setValue(G,M.none()),Po.close(G))},D=G=>Po.getState(G),P=G=>{Po.isOpen(G)&&Jt.getValue(G).each(J=>{switch(J.mode){case"menu":Po.getState(G).each(Kp.repositionMenus);break;case"position":const re=t.lazySink(G).getOrDie();Ya.positionWithinBounds(re,G,J.config,J.getBounds());break}})},F={setContent:c,showAt:d,showWithinBounds:h,showMenuAt:b,showMenuWithinBounds:S,hide:T,getContent:D,reposition:P,isOpen:Po.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Fr(t.inlineBehaviours,[Po.config({isPartOf:(G,J,re)=>ch(J,re)||a(G,re),getAttachPoint:G=>t.lazySink(G).getOrDie(),onOpen:G=>{t.onShow(G)},onClose:G=>{t.onHide(G)}}),Jt.config({store:{mode:"memory",initialValue:M.none()}}),ol.config({channels:{...Hc({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({})}),...mg({...t.fireRepositionEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({}),doReposition:P})}})]),eventOrder:t.eventOrder,apis:F}},gr=al({name:"InlineView",configFields:[rt("lazySink"),ko("onShow"),ko("onHide"),yd("onEscape"),Xa("inlineBehaviours",[Po,Jt,ol]),ca("fireDismissalEventInstead",[Pe("event",xd())]),ca("fireRepositionEventInstead",[Pe("event",r2())]),Pe("getRelated",M.none),Pe("isExtraPart",at),Pe("eventOrder",M.none)],factory:LE,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var FE=tinymce.util.Tools.resolve("tinymce.util.Delay"),Bw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$E=tinymce.util.Tools.resolve("tinymce.EditorManager"),Yp=tinymce.util.Tools.resolve("tinymce.Env"),qu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(qu||(qu={}));var ey;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(ey||(ey={}));const Es=t=>s=>s.options.get(t),Lw=t=>s=>M.from(t(s)),HE=t=>{const s=Yp.deviceType.isPhone(),a=Yp.deviceType.isTablet()||s,c=t.options.register,d=b=>j(b)||b===!1,h=b=>j(b)||ln(b);c("skin",{processor:b=>j(b)||b===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:h,default:Bw.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:b=>j(b)||Lt(b),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:b=>Lt(b)||j(b)||Ce(b)?{value:b,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),fn(9,b=>{c("toolbar"+(b+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:ey.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:b=>b==="both"||Lt(b),default:!Yp.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},Y3=Es("readonly"),zE=Es("disabled"),X3=Es("height"),J3=Es("width"),Fw=Lw(Es("min_width")),Q3=Lw(Es("min_height")),Xp=Lw(Es("max_width")),ty=Lw(Es("max_height")),eA=Lw(Es("style_formats")),tA=Es("style_formats_merge"),EN=Es("style_formats_autohide"),_N=Es("content_langs"),TN=Es("removed_menuitems"),ny=Es("toolbar_mode"),VE=Es("toolbar_groups"),UE=Es("toolbar_location"),kN=Es("fixed_toolbar_container"),nA=Es("fixed_toolbar_container_target"),AN=Es("toolbar_persist"),oA=Es("toolbar_sticky_offset"),ON=Es("menubar"),WE=Es("toolbar"),DN=Es("file_picker_callback"),sA=Es("file_picker_validator_handler"),RN=Es("font_size_input_default_unit"),MN=Es("file_picker_types"),ZE=Es("typeahead_urls"),rA=Es("anchor_top"),aA=Es("anchor_bottom"),NN=Es("draggable_modal"),jE=Es("statusbar"),PN=Es("elementpath"),iA=Es("branding"),IN=Es("resize"),BN=Es("paste_as_text"),LN=Es("sidebar_show"),cA=Es("promotion"),qE=Es("help_accessibility"),FN=Es("default_font_stack"),$w=Es("skin"),lA=t=>t.options.get("skin")===!1,GE=t=>t.options.get("menubar")!==!1,$N=t=>{const s=t.options.get("skin_url");if(lA(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return $E.baseURL+"/skins/ui/"+a}},_H=t=>M.from(t.options.get("skin_url")),HN=t=>t.options.get("line_height_formats").split(" "),KE=t=>{const s=WE(t),a=j(s),c=Ce(s)&&s.length>0;return!Hw(t)&&(c||a||s===!0)},YE=t=>{const s=fn(9,c=>t.options.get("toolbar"+(c+1))),a=no(s,j);return En(a.length>0,a)},Hw=t=>YE(t).fold(()=>{const s=WE(t);return xt(s,j)&&s.length>0},it),uA=t=>UE(t)===ey.bottom,XE=t=>{var s;if(!t.inline)return M.none();const a=(s=kN(t))!==null&&s!==void 0?s:"";if(a.length>0)return ir(Ye(),a);const c=nA(t);return Ct(c)?M.some(Ke.fromDom(c)):M.none()},Cf=t=>t.inline&&XE(t).isSome(),dA=t=>XE(t).getOrThunk(()=>Pr(br(Ke.fromDom(t.getElement())))),fA=t=>t.inline&&!GE(t)&&!KE(t)&&!Hw(t),Jp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Cf(t)&&!fA(t),Sg=t=>!Cf(t)&&t.options.get("ui_mode")==="split",zN=t=>{const s=t.options.get("menu");return Ko(s,a=>({...a,items:a.items}))};var TH=Object.freeze({__proto__:null,get ToolbarMode(){return qu},get ToolbarLocation(){return ey},register:HE,getSkinUrl:$N,getSkinUrlOption:_H,isReadOnly:Y3,isDisabled:zE,getSkin:$w,isSkinDisabled:lA,getHeightOption:X3,getWidthOption:J3,getMinWidthOption:Fw,getMinHeightOption:Q3,getMaxWidthOption:Xp,getMaxHeightOption:ty,getUserStyleFormats:eA,shouldMergeStyleFormats:tA,shouldAutoHideStyleFormats:EN,getLineHeightFormats:HN,getContentLanguages:_N,getRemovedMenuItems:TN,isMenubarEnabled:GE,isMultipleToolbars:Hw,isToolbarEnabled:KE,isToolbarPersist:AN,getMultipleToolbarsOption:YE,getUiContainer:dA,useFixedContainer:Cf,isSplitUiMode:Sg,getToolbarMode:ny,isDraggableModal:NN,isDistractionFree:fA,isStickyToolbar:Jp,getStickyToolbarOffset:oA,getToolbarLocation:UE,isToolbarLocationBottom:uA,getToolbarGroups:VE,getMenus:zN,getMenubar:ON,getToolbar:WE,getFilePickerCallback:DN,getFilePickerTypes:MN,useTypeaheadUrls:ZE,getAnchorTop:rA,getAnchorBottom:aA,getFilePickerValidatorHandler:sA,getFontSizeInputDefaultUnit:RN,useStatusBar:jE,useElementPath:PN,promotionEnabled:cA,useBranding:iA,getResize:IN,getPasteAsText:BN,getSidebarShow:LN,useHelpAccessibility:qE,getDefaultFontStack:FN});const VN=["visible","hidden","clip"],UN=t=>Mr(t).length>0&&!wt(VN,t),mA=t=>{if(ls(t)){const s=ut(t,"overflow-x"),a=ut(t,"overflow-y");return UN(s)||UN(a)}else return!1},hA=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),gA=(t,s)=>{const a=Vx(s,mA),c=a.length===0?$l(s).map(wu).map(d=>Vx(d,mA)).getOr([]):a;return Ws(c).map(d=>({element:d,others:c.slice(1),isFullscreen:()=>hA(t)}))},Qp=(t,s)=>Sg(t)?gA(t,s):M.none(),e1=t=>{const s=[...$e(t.others,Jr),Qr()];return t.isFullscreen()?Qr():Xd(Jr(t.element),s)},Na=al({name:"Button",factory:t=>{const s=Qv(t.action),a=t.dom.tag,c=h=>Tt(t.dom,"attributes").bind(b=>Tt(b,h)),d=()=>{if(a==="button"){const h=c("type").getOr("button"),b=c("role").map(S=>({role:S})).getOr({});return{type:h,...b}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Tl.augment(t.buttonBehaviours,[$n.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Pe("uid",void 0),rt("dom"),Pe("components",[]),Tl.field("buttonBehaviours",[$n,Sn]),Wo("action"),Wo("role"),Pe("eventOrder",{})]}),kH=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return zo(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},AH=t=>Array.prototype.slice.call(t.dom.classList,0),Sm=t=>{const s=Ke.fromHtml(t),a=pr(s),c=kH(s),d=AH(s),h=a.length===0?{}:{innerHtml:Ri(s)};return{tag:Ns(s),classes:d,attributes:c,...h}},Jo=t=>{const s=f3(t)&&Vr(t,"uid")?t.uid:Lu("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var pA=Object.freeze({__proto__:null,exhibit:(t,s)=>Fc({attributes:gs([{key:s.tabAttr,value:"true"}])})}),OH=[Pe("tabAttr","data-alloy-tabstop")];const cr=wa({fields:OH,name:"tabstopping",active:pA}),JE=on("tooltip.exclusive"),zw=on("tooltip.show"),Vw=on("tooltip.hide"),Uw=on("tooltip.immediateHide"),Ww=on("tooltip.immediateShow"),WN=(t,s,a)=>{t.getSystem().broadcastOn([JE],{})};var DH=Object.freeze({__proto__:null,hideAllExclusive:WN,immediateOpenClose:(t,s,a,c)=>bo(t,c?Ww:Uw),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Wn.set(d,c)})},setEnabled:(t,s,a,c)=>a.setEnabled(c)}),RH=Object.freeze({__proto__:null,events:(t,s)=>{const a=b=>{s.getTooltip().each(S=>{S.getSystem().isConnected()&&(yf(S),t.onHide(b,S),s.clearTooltip())}),s.clearTimer()},c=b=>{if(!s.isShowing()&&s.isEnabled()){WN(b);const S=t.lazySink(b).getOrDie(),T=b.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:fs(t.mode==="normal"?[ot(Bc(),D=>{bo(b,zw)}),ot(Qg(),D=>{bo(b,Vw)})]:[]),behaviours:Et([Wn.config({})])});s.setTooltip(T),vf(S,T),t.onShow(b,T),Ya.position(S,T,{anchor:t.anchor(b)})}},d=b=>{s.getTooltip().each(S=>{const T=t.lazySink(b).getOrDie();Ya.position(T,S,{anchor:t.anchor(b)})})},h=()=>{switch(t.mode){case"normal":return[ot(Cd(),b=>{bo(b,Ww)}),ot(Xm(),b=>{bo(b,Uw)}),ot(Bc(),b=>{bo(b,zw)}),ot(Qg(),b=>{bo(b,Vw)})];case"follow-highlight":return[ot(a2(),(b,S)=>{bo(b,zw)}),ot(Jm(),b=>{bo(b,Vw)})];case"children-normal":return[ot(Cd(),(b,S)=>{nc(b.element).each(T=>{ys(S.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{bo(b,Ww)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),ot(Xm(),b=>{nc(b.element).fold(()=>{bo(b,Uw)},ce)}),ot(Bc(),b=>{ir(b.element,"[data-mce-tooltip]:hover").each(S=>{s.getTooltip().fold(()=>{bo(b,zw)},T=>{s.isShowing()&&(t.onShow(b,T),d(b))})})}),ot(Qg(),b=>{ir(b.element,"[data-mce-tooltip]:hover").fold(()=>{bo(b,Vw)},ce)})];default:return[ot(Cd(),(b,S)=>{nc(b.element).each(T=>{ys(S.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{bo(b,Ww)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),ot(Xm(),b=>{nc(b.element).fold(()=>{bo(b,Uw)},ce)})]}};return fs(dt([[TS(b=>{t.onSetup(b)}),ot(zw,b=>{s.resetTimer(()=>{c(b)},t.delayForShow())}),ot(Vw,b=>{s.resetTimer(()=>{a(b)},t.delayForHide())}),ot(Ww,b=>{s.resetTimer(()=>{c(b)},0)}),ot(Uw,b=>{s.resetTimer(()=>{a(b)},0)}),ot(ou(),(b,S)=>{const T=S;T.universal||wt(T.channels,JE)&&a(b)}),sf(b=>{a(b)})],h()]))}}),bA=[rt("lazySink"),rt("tooltipDom"),Pe("exclusive",!0),Pe("tooltipComponents",[]),os("delayForShow",oe(300)),os("delayForHide",oe(300)),os("onSetup",ce),Aa("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Pe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:oe([fa,qa,Ca,Ra,Sa,ps]),onRtl:oe([fa,qa,Ca,Ra,Sa,ps])},bubble:Hu(0,-2,{})})),ko("onHide"),ko("onShow")],MH=Object.freeze({__proto__:null,init:()=>{const t=gn(!0),s=Xo(),a=Xo(),c=()=>{s.on(clearTimeout)},d=(b,S)=>{c(),s.set(setTimeout(b,S))},h=oe("not-implemented");return di({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:c,resetTimer:d,readState:h,isEnabled:()=>t.get(),setEnabled:b=>t.set(b)})}});const Ar=wa({fields:bA,name:"tooltipping",active:RH,state:MH,apis:DH});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:vA,setPrototypeOf:ZN,isFrozen:NH,getPrototypeOf:PH,getOwnPropertyDescriptor:IH}=Object;let{freeze:cu,seal:Sf,create:QE}=Object,{apply:yA,construct:wA}=typeof Reflect<"u"&&Reflect;cu||(cu=function(s){return s}),Sf||(Sf=function(s){return s}),yA||(yA=function(s,a,c){return s.apply(a,c)}),wA||(wA=function(s,a){return new s(...a)});const e_=Id(Array.prototype.forEach),jN=Id(Array.prototype.pop),Zw=Id(Array.prototype.push),t_=Id(String.prototype.toLowerCase),CA=Id(String.prototype.toString),qN=Id(String.prototype.match),jw=Id(String.prototype.replace),BH=Id(String.prototype.indexOf),LH=Id(String.prototype.trim),xm=Id(Object.prototype.hasOwnProperty),lu=Id(RegExp.prototype.test),t1=SA(TypeError);function Id(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return yA(t,s,c)}}function SA(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return wA(t,a)}}function qs(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t_;ZN&&ZN(t,null);let c=s.length;for(;c--;){let d=s[c];if(typeof d=="string"){const h=a(d);h!==d&&(NH(s)||(s[c]=h),d=h)}t[d]=!0}return t}function FH(t){for(let s=0;s<t.length;s++)xm(t,s)||(t[s]=null);return t}function Pb(t){const s=QE(null);for(const[a,c]of vA(t))xm(t,a)&&(Array.isArray(c)?s[a]=FH(c):c&&typeof c=="object"&&c.constructor===Object?s[a]=Pb(c):s[a]=c);return s}function oy(t,s){for(;t!==null;){const c=IH(t,s);if(c){if(c.get)return Id(c.get);if(typeof c.value=="function")return Id(c.value)}t=PH(t)}function a(){return null}return a}const GN=cu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qw=cu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gw=cu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),KN=cu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Kw=cu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),n_=cu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xA=cu(["#text"]),Em=cu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Yw=cu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YN=cu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),o_=cu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$H=Sf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),HH=Sf(/<%[\w\W]*|[\w\W]*%>/gm),Xw=Sf(/\${[\w\W]*}/gm),zH=Sf(/^data-[\-\w.\u00B7-\uFFFF]/),XN=Sf(/^aria-[\-\w]+$/),s_=Sf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),VH=Sf(/^(?:\w+script|data):/i),EA=Sf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),r_=Sf(/^html$/i),UH=Sf(/^[a-z][.\w]*(-[.\w]+)+$/i);var _A=Object.freeze({__proto__:null,MUSTACHE_EXPR:$H,ERB_EXPR:HH,TMPLIT_EXPR:Xw,DATA_ATTR:zH,ARIA_ATTR:XN,IS_ALLOWED_URI:s_,IS_SCRIPT_OR_DATA:VH,ATTR_WHITESPACE:EA,DOCTYPE_NAME:r_,CUSTOM_ELEMENT:UH});const sy={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},WH=function(){return typeof window>"u"?null:window},JN=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const h="dompurify"+(c?"#"+c:"");try{return s.createPolicy(h,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function TA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WH();const s=Do=>TA(Do);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==sy.document)return s.isSupported=!1,s;let{document:a}=t;const c=a,d=c.currentScript,{DocumentFragment:h,HTMLTemplateElement:b,Node:S,Element:T,NodeFilter:D,NamedNodeMap:P=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:F,DOMParser:G,trustedTypes:J}=t,re=T.prototype,le=oy(re,"cloneNode"),De=oy(re,"remove"),de=oy(re,"nextSibling"),Te=oy(re,"childNodes"),Oe=oy(re,"parentNode");if(typeof b=="function"){const Do=a.createElement("template");Do.content&&Do.content.ownerDocument&&(a=Do.content.ownerDocument)}let ze,We="";const{implementation:Mt,createNodeIterator:tn,createDocumentFragment:nt,getElementsByTagName:an}=a,{importNode:Vt}=c;let dn={};s.isSupported=typeof vA=="function"&&typeof Oe=="function"&&Mt&&Mt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Co,ERB_EXPR:Ys,TMPLIT_EXPR:Go,DATA_ATTR:hn,ARIA_ATTR:vt,IS_SCRIPT_OR_DATA:Ut,ATTR_WHITESPACE:Un,CUSTOM_ELEMENT:ao}=_A;let{IS_ALLOWED_URI:Tn}=_A,Yn=null;const ks=qs({},[...GN,...qw,...Gw,...Kw,...xA]);let bs=null;const Il=qs({},[...Em,...Yw,...YN,...o_]);let wr=Object.seal(QE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ed=null,mc=null,td=!0,nd=!0,Bf=!1,rS=!0,kh=!1,k5=!0,m0=!1,A5=!1,QG=!1,Ak=!1,E$=!1,_$=!1,TX=!0,kX=!1;const Ree="user-content-";let eK=!0,O5=!1,Ok={},Dk=null;const AX=qs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let OX=null;const DX=qs({},["audio","video","img","source","image","track"]);let tK=null;const RX=qs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),T$="http://www.w3.org/1998/Math/MathML",k$="http://www.w3.org/2000/svg",h0="http://www.w3.org/1999/xhtml";let Rk=h0,nK=!1,oK=null;const Mee=qs({},[T$,k$,h0],CA);let D5=null;const Nee=["application/xhtml+xml","text/html"],Pee="text/html";let Bl=null,Mk=null;const Iee=a.createElement("form"),MX=function(qe){return qe instanceof RegExp||qe instanceof Function},sK=function(){let qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Mk&&Mk===qe)){if((!qe||typeof qe!="object")&&(qe={}),qe=Pb(qe),D5=Nee.indexOf(qe.PARSER_MEDIA_TYPE)===-1?Pee:qe.PARSER_MEDIA_TYPE,Bl=D5==="application/xhtml+xml"?CA:t_,Yn=xm(qe,"ALLOWED_TAGS")?qs({},qe.ALLOWED_TAGS,Bl):ks,bs=xm(qe,"ALLOWED_ATTR")?qs({},qe.ALLOWED_ATTR,Bl):Il,oK=xm(qe,"ALLOWED_NAMESPACES")?qs({},qe.ALLOWED_NAMESPACES,CA):Mee,tK=xm(qe,"ADD_URI_SAFE_ATTR")?qs(Pb(RX),qe.ADD_URI_SAFE_ATTR,Bl):RX,OX=xm(qe,"ADD_DATA_URI_TAGS")?qs(Pb(DX),qe.ADD_DATA_URI_TAGS,Bl):DX,Dk=xm(qe,"FORBID_CONTENTS")?qs({},qe.FORBID_CONTENTS,Bl):AX,ed=xm(qe,"FORBID_TAGS")?qs({},qe.FORBID_TAGS,Bl):{},mc=xm(qe,"FORBID_ATTR")?qs({},qe.FORBID_ATTR,Bl):{},Ok=xm(qe,"USE_PROFILES")?qe.USE_PROFILES:!1,td=qe.ALLOW_ARIA_ATTR!==!1,nd=qe.ALLOW_DATA_ATTR!==!1,Bf=qe.ALLOW_UNKNOWN_PROTOCOLS||!1,rS=qe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,kh=qe.SAFE_FOR_TEMPLATES||!1,k5=qe.SAFE_FOR_XML!==!1,m0=qe.WHOLE_DOCUMENT||!1,Ak=qe.RETURN_DOM||!1,E$=qe.RETURN_DOM_FRAGMENT||!1,_$=qe.RETURN_TRUSTED_TYPE||!1,QG=qe.FORCE_BODY||!1,TX=qe.SANITIZE_DOM!==!1,kX=qe.SANITIZE_NAMED_PROPS||!1,eK=qe.KEEP_CONTENT!==!1,O5=qe.IN_PLACE||!1,Tn=qe.ALLOWED_URI_REGEXP||s_,Rk=qe.NAMESPACE||h0,wr=qe.CUSTOM_ELEMENT_HANDLING||{},qe.CUSTOM_ELEMENT_HANDLING&&MX(qe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(wr.tagNameCheck=qe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),qe.CUSTOM_ELEMENT_HANDLING&&MX(qe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(wr.attributeNameCheck=qe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),qe.CUSTOM_ELEMENT_HANDLING&&typeof qe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(wr.allowCustomizedBuiltInElements=qe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),kh&&(nd=!1),E$&&(Ak=!0),Ok&&(Yn=qs({},xA),bs=[],Ok.html===!0&&(qs(Yn,GN),qs(bs,Em)),Ok.svg===!0&&(qs(Yn,qw),qs(bs,Yw),qs(bs,o_)),Ok.svgFilters===!0&&(qs(Yn,Gw),qs(bs,Yw),qs(bs,o_)),Ok.mathMl===!0&&(qs(Yn,Kw),qs(bs,YN),qs(bs,o_))),qe.ADD_TAGS&&(Yn===ks&&(Yn=Pb(Yn)),qs(Yn,qe.ADD_TAGS,Bl)),qe.ADD_ATTR&&(bs===Il&&(bs=Pb(bs)),qs(bs,qe.ADD_ATTR,Bl)),qe.ADD_URI_SAFE_ATTR&&qs(tK,qe.ADD_URI_SAFE_ATTR,Bl),qe.FORBID_CONTENTS&&(Dk===AX&&(Dk=Pb(Dk)),qs(Dk,qe.FORBID_CONTENTS,Bl)),eK&&(Yn["#text"]=!0),m0&&qs(Yn,["html","head","body"]),Yn.table&&(qs(Yn,["tbody"]),delete ed.tbody),qe.TRUSTED_TYPES_POLICY){if(typeof qe.TRUSTED_TYPES_POLICY.createHTML!="function")throw t1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof qe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw t1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ze=qe.TRUSTED_TYPES_POLICY,We=ze.createHTML("")}else ze===void 0&&(ze=JN(J,d)),ze!==null&&typeof We=="string"&&(We=ze.createHTML(""));cu&&cu(qe),Mk=qe}},NX=qs({},["mi","mo","mn","ms","mtext"]),PX=qs({},["annotation-xml"]),Bee=qs({},["title","style","font","a","script"]),IX=qs({},[...qw,...Gw,...KN]),BX=qs({},[...Kw,...n_]),Lee=function(qe){let On=Oe(qe);(!On||!On.tagName)&&(On={namespaceURI:Rk,tagName:"template"});const So=t_(qe.tagName),ni=t_(On.tagName);return oK[qe.namespaceURI]?qe.namespaceURI===k$?On.namespaceURI===h0?So==="svg":On.namespaceURI===T$?So==="svg"&&(ni==="annotation-xml"||NX[ni]):!!IX[So]:qe.namespaceURI===T$?On.namespaceURI===h0?So==="math":On.namespaceURI===k$?So==="math"&&PX[ni]:!!BX[So]:qe.namespaceURI===h0?On.namespaceURI===k$&&!PX[ni]||On.namespaceURI===T$&&!NX[ni]?!1:!BX[So]&&(Bee[So]||!IX[So]):!!(D5==="application/xhtml+xml"&&oK[qe.namespaceURI]):!1},v1=function(qe){Zw(s.removed,{element:qe});try{Oe(qe).removeChild(qe)}catch{De(qe)}},R5=function(qe,On){try{Zw(s.removed,{attribute:On.getAttributeNode(qe),from:On})}catch{Zw(s.removed,{attribute:null,from:On})}if(On.removeAttribute(qe),qe==="is"&&!bs[qe])if(Ak||E$)try{v1(On)}catch{}else try{On.setAttribute(qe,"")}catch{}},LX=function(qe){let On=null,So=null;if(QG)qe="<remove></remove>"+qe;else{const Ll=qN(qe,/^[\r\n\t ]+/);So=Ll&&Ll[0]}D5==="application/xhtml+xml"&&Rk===h0&&(qe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+qe+"</body></html>");const ni=ze?ze.createHTML(qe):qe;if(Rk===h0)try{On=new G().parseFromString(ni,D5)}catch{}if(!On||!On.documentElement){On=Mt.createDocument(Rk,"template",null);try{On.documentElement.innerHTML=nK?We:ni}catch{}}const od=On.body||On.documentElement;return qe&&So&&od.insertBefore(a.createTextNode(So),od.childNodes[0]||null),Rk===h0?an.call(On,m0?"html":"body")[0]:m0?On.documentElement:od},FX=function(qe){return tn.call(qe.ownerDocument||qe,qe,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT|D.SHOW_PROCESSING_INSTRUCTION|D.SHOW_CDATA_SECTION,null)},$X=function(qe){return qe instanceof F&&(typeof qe.nodeName!="string"||typeof qe.textContent!="string"||typeof qe.removeChild!="function"||!(qe.attributes instanceof P)||typeof qe.removeAttribute!="function"||typeof qe.setAttribute!="function"||typeof qe.namespaceURI!="string"||typeof qe.insertBefore!="function"||typeof qe.hasChildNodes!="function")},HX=function(qe){return typeof S=="function"&&qe instanceof S},g0=function(qe,On,So){dn[qe]&&e_(dn[qe],ni=>{ni.call(s,On,So,Mk)})},zX=function(qe){let On=null;if(g0("beforeSanitizeElements",qe,null),$X(qe))return v1(qe),!0;const So=Bl(qe.nodeName);if(g0("uponSanitizeElement",qe,{tagName:So,allowedTags:Yn}),qe.hasChildNodes()&&!HX(qe.firstElementChild)&&lu(/<[/\w]/g,qe.innerHTML)&&lu(/<[/\w]/g,qe.textContent)||qe.nodeType===sy.progressingInstruction||k5&&qe.nodeType===sy.comment&&lu(/<[/\w]/g,qe.data))return v1(qe),!0;if(!Yn[So]||ed[So]){if(!ed[So]&&UX(So)&&(wr.tagNameCheck instanceof RegExp&&lu(wr.tagNameCheck,So)||wr.tagNameCheck instanceof Function&&wr.tagNameCheck(So)))return!1;if(eK&&!Dk[So]){const ni=Oe(qe)||qe.parentNode,od=Te(qe)||qe.childNodes;if(od&&ni){const Ll=od.length;for(let Lf=Ll-1;Lf>=0;--Lf){const y1=le(od[Lf],!0);y1.__removalCount=(qe.__removalCount||0)+1,ni.insertBefore(y1,de(qe))}}}return v1(qe),!0}return qe instanceof T&&!Lee(qe)||(So==="noscript"||So==="noembed"||So==="noframes")&&lu(/<\/no(script|embed|frames)/i,qe.innerHTML)?(v1(qe),!0):(kh&&qe.nodeType===sy.text&&(On=qe.textContent,e_([Co,Ys,Go],ni=>{On=jw(On,ni," ")}),qe.textContent!==On&&(Zw(s.removed,{element:qe.cloneNode()}),qe.textContent=On)),g0("afterSanitizeElements",qe,null),!1)},VX=function(qe,On,So){if(TX&&(On==="id"||On==="name")&&(So in a||So in Iee))return!1;if(!(nd&&!mc[On]&&lu(hn,On))){if(!(td&&lu(vt,On))){if(!bs[On]||mc[On]){if(!(UX(qe)&&(wr.tagNameCheck instanceof RegExp&&lu(wr.tagNameCheck,qe)||wr.tagNameCheck instanceof Function&&wr.tagNameCheck(qe))&&(wr.attributeNameCheck instanceof RegExp&&lu(wr.attributeNameCheck,On)||wr.attributeNameCheck instanceof Function&&wr.attributeNameCheck(On))||On==="is"&&wr.allowCustomizedBuiltInElements&&(wr.tagNameCheck instanceof RegExp&&lu(wr.tagNameCheck,So)||wr.tagNameCheck instanceof Function&&wr.tagNameCheck(So))))return!1}else if(!tK[On]){if(!lu(Tn,jw(So,Un,""))){if(!((On==="src"||On==="xlink:href"||On==="href")&&qe!=="script"&&BH(So,"data:")===0&&OX[qe])){if(!(Bf&&!lu(Ut,jw(So,Un,"")))){if(So)return!1}}}}}}return!0},UX=function(qe){return qe!=="annotation-xml"&&qN(qe,ao)},WX=function(qe){g0("beforeSanitizeAttributes",qe,null);const{attributes:On}=qe;if(!On)return;const So={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bs};let ni=On.length;for(;ni--;){const od=On[ni],{name:Ll,namespaceURI:Lf,value:y1}=od,M5=Bl(Ll);let bu=Ll==="value"?y1:LH(y1);const $ee=bu;if(So.attrName=M5,So.attrValue=bu,So.keepAttr=!0,So.forceKeepAttr=void 0,g0("uponSanitizeAttribute",qe,So),bu=So.attrValue,So.forceKeepAttr)continue;if(!So.keepAttr){R5(Ll,qe);continue}if(!rS&&lu(/\/>/i,bu)){R5(Ll,qe);continue}kh&&e_([Co,Ys,Go],jX=>{bu=jw(bu,jX," ")});const ZX=Bl(qe.nodeName);if(!VX(ZX,M5,bu)){R5(Ll,qe);continue}if(kX&&(M5==="id"||M5==="name")&&(R5(Ll,qe),bu=Ree+bu),k5&&lu(/((--!?|])>)|<\/(style|title)/i,bu)){R5(Ll,qe);continue}if(ze&&typeof J=="object"&&typeof J.getAttributeType=="function"&&!Lf)switch(J.getAttributeType(ZX,M5)){case"TrustedHTML":{bu=ze.createHTML(bu);break}case"TrustedScriptURL":{bu=ze.createScriptURL(bu);break}}if(bu!==$ee)try{Lf?qe.setAttributeNS(Lf,Ll,bu):qe.setAttribute(Ll,bu),$X(qe)?v1(qe):jN(s.removed)}catch{}}g0("afterSanitizeAttributes",qe,null)},Fee=function Do(qe){let On=null;const So=FX(qe);for(g0("beforeSanitizeShadowDOM",qe,null);On=So.nextNode();)g0("uponSanitizeShadowNode",On,null),!zX(On)&&(On.content instanceof h&&Do(On.content),WX(On));g0("afterSanitizeShadowDOM",qe,null)};return s.sanitize=function(Do){let qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},On=null,So=null,ni=null,od=null;if(nK=!Do,nK&&(Do="<!-->"),typeof Do!="string"&&!HX(Do))if(typeof Do.toString=="function"){if(Do=Do.toString(),typeof Do!="string")throw t1("dirty is not a string, aborting")}else throw t1("toString is not a function");if(!s.isSupported)return Do;if(A5||sK(qe),s.removed=[],typeof Do=="string"&&(O5=!1),O5){if(Do.nodeName){const y1=Bl(Do.nodeName);if(!Yn[y1]||ed[y1])throw t1("root node is forbidden and cannot be sanitized in-place")}}else if(Do instanceof S)On=LX("<!---->"),So=On.ownerDocument.importNode(Do,!0),So.nodeType===sy.element&&So.nodeName==="BODY"||So.nodeName==="HTML"?On=So:On.appendChild(So);else{if(!Ak&&!kh&&!m0&&Do.indexOf("<")===-1)return ze&&_$?ze.createHTML(Do):Do;if(On=LX(Do),!On)return Ak?null:_$?We:""}On&&QG&&v1(On.firstChild);const Ll=FX(O5?Do:On);for(;ni=Ll.nextNode();)zX(ni)||(ni.content instanceof h&&Fee(ni.content),WX(ni));if(O5)return Do;if(Ak){if(E$)for(od=nt.call(On.ownerDocument);On.firstChild;)od.appendChild(On.firstChild);else od=On;return(bs.shadowroot||bs.shadowrootmode)&&(od=Vt.call(c,od,!0)),od}let Lf=m0?On.outerHTML:On.innerHTML;return m0&&Yn["!doctype"]&&On.ownerDocument&&On.ownerDocument.doctype&&On.ownerDocument.doctype.name&&lu(r_,On.ownerDocument.doctype.name)&&(Lf="<!DOCTYPE "+On.ownerDocument.doctype.name+`>
`+Lf),kh&&e_([Co,Ys,Go],y1=>{Lf=jw(Lf,y1," ")}),ze&&_$?ze.createHTML(Lf):Lf},s.setConfig=function(){let Do=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sK(Do),A5=!0},s.clearConfig=function(){Mk=null,A5=!1},s.isValidAttribute=function(Do,qe,On){Mk||sK({});const So=Bl(Do),ni=Bl(qe);return VX(So,ni,On)},s.addHook=function(Do,qe){typeof qe=="function"&&(dn[Do]=dn[Do]||[],Zw(dn[Do],qe))},s.removeHook=function(Do){if(dn[Do])return jN(dn[Do])},s.removeHooks=function(Do){dn[Do]&&(dn[Do]=[])},s.removeAllHooks=function(){dn={}},s}var ZH=TA();const QN=t=>ZH().sanitize(t);var Bd=tinymce.util.Tools.resolve("tinymce.util.I18n");const jH={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},eP="temporary-placeholder",a_=t=>()=>Tt(t,eP).getOr("!not found!"),i_=(t,s)=>{const a=t.toLowerCase();if(Bd.isRtl()){const c=vs(a,"-rtl");return go(s,c)?c:a}else return a},tP=(t,s)=>Tt(s,i_(t,s)),kA=(t,s)=>{const a=s();return tP(t,a).getOrThunk(a_(a))},Jw=(t,s,a)=>{const c=s();return tP(t,c).or(a).getOrThunk(a_(c))},nP=t=>Bd.isRtl()?go(jH,t):!1,oP=()=>Kn("add-focusable",[tr(t=>{au(t.element,"svg").each(s=>$t(s,"focusable","false"))})]),sP=(t,s,a,c)=>{var d,h;const b=nP(s)?["tox-icon--flip"]:[],S=Tt(a,i_(s,a)).or(c).getOrThunk(a_(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(b),innerHtml:S},behaviours:Et([...(h=t.behaviours)!==null&&h!==void 0?h:[],oP()])}},Gu=(t,s,a,c=M.none())=>sP(s,t,a(),c),qH=(t,s,a)=>{const c=a(),d=et(t,h=>go(c,i_(h,c)));return sP(s,d.getOr(eP),c,M.none())},GH={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},c_=al({name:"Notification",factory:t=>{const s=on("notification-text"),a=Jo({dom:Sm(`<p id=${s}>${QN(t.backstageProvider.translate(t.text))}</p>`),behaviours:Et([Wn.config({})])}),c=re=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${re}%`}}}),d=re=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${re}%`}}),h=Jo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},d(0)],behaviours:Et([Wn.config({})])}),T={updateProgress:(re,le)=>{re.getSystem().isConnected()&&h.getOpt(re).each(De=>{Wn.set(De,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(le)]},d(le)])})},updateText:(re,le)=>{if(re.getSystem().isConnected()){const De=a.get(re);Wn.set(De,[or(le)])}}},D=dt([t.icon.toArray(),t.level.toArray(),t.level.bind(re=>M.from(GH[re])).toArray()]),P=Jo(Na.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Gu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Et([cr.config({}),Ar.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:re=>{t.onAction(re)}})),F=qH(D,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),G={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Et([Wn.config({})])},J=[F,G];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(re=>["tox-notification","tox-notification--in",`tox-notification--${re}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Et([cr.config({}),$n.config({}),Sn.config({mode:"special",onEscape:re=>(t.onAction(re),M.some(!0))})]),components:J.concat(t.progress?[h.asSpec()]:[]).concat([P.asSpec()]),apis:T}},configFields:[Wo("level"),rt("progress"),Wo("icon"),rt("onAction"),rt("text"),rt("iconProvider"),rt("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var rP=(t,s,a,c)=>{const d=s.backstage.shared,h=()=>Ke.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),b=()=>{const F=Jr(h());return M.some(F)},S=F=>{b().each(G=>{pt(F,J=>{uo(J.element,"width"),oo(J.element)>G.width&&It(J.element,"width",G.width+"px")})})};return{open:(F,G,J)=>{const re=()=>{const Te=Mt=>{Wn.remove(Mt,le),De()},Oe=(Mt,tn)=>{pr(Mt.element).length===0?ze(Mt,tn):We(Mt,tn)},ze=(Mt,tn)=>{gr.hide(Mt),c.clear(),tn&&t.focus()},We=(Mt,tn)=>{tn&&Sn.focusIn(Mt)};c.on(Mt=>{G();const tn=J();Te(Mt),Oe(Mt,tn)})},le=Mi(c_.sketch({text:F.text,level:wt(["success","error","warning","warn","info"],F.type)?F.type:void 0,progress:F.progressBar===!0,icon:F.icon,onAction:re,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(c.isSet()){const Te=El(le);c.on(Oe=>{Wn.append(Oe,Te),gr.reposition(Oe),js.refresh(Oe),S(Oe.components())})}else{const Te=Mi(gr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Sn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Wn.config({}),...Jp(t)&&!d.header.isPositionedAtTop()?[]:[js.config({contextual:{lazyContext:()=>M.some(Jr(h())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Mt=>Qp(t,Mt.element).map(nt=>({bounds:e1(nt),optScrollEnv:M.some({currentScrollTop:nt.element.dom.scrollTop,scrollElmTop:Ta(nt.element).top})})).getOrThunk(()=>({bounds:Qr(),optScrollEnv:M.none()}))})]])})),Oe=El(le),ze={maxHeightFunction:Cp()},We={...d.anchors.banner(),overrides:ze};c.set(Te),a.add(Te),gr.showWithinBounds(Te,Oe,{anchor:We},b)}ln(F.timeout)&&F.timeout>0&&FE.setEditorTimeout(t,()=>{re()},F.timeout);const De=()=>{c.on(Te=>{gr.reposition(Te),js.refresh(Te),S(Te.components())})};return{close:re,reposition:De,text:Te=>{c_.updateText(le,Te)},settings:F,getEl:()=>le.element.dom,progressBar:{value:Te=>{c_.updateProgress(le,Te)}}}},close:F=>{F.close()},getArgs:F=>F.settings}};const XH={setup:(t,s)=>{const a=(d,h)=>{bn(d,Vi(),{raw:h})},c=()=>t.getMenu().bind(mt.getHighlighted);s.on("keydown",d=>{const h=d.which;t.isActive()&&(t.isMenuOpen()?h===13?(c().each(Qm),d.preventDefault()):h===40?(c().fold(()=>{t.getMenu().each(mt.highlightFirst)},b=>{a(b,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&c().each(b=>{a(b,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var AA;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(AA||(AA={}));var xf=AA;const Qw="tox-menu-nav__js",ry="tox-collection__item",l_="tox-swatch",aP={normal:Qw,color:l_},OA="tox-collection__item--enabled",JH="tox-collection__group-heading",u_="tox-collection__item-icon",DA="tox-collection__item-label",iP="tox-collection__item-accessory",RA="tox-collection__item-caret",Ib="tox-collection__item-checkmark",Bb="tox-collection__item--active",d_="tox-collection__item-container",f_="tox-collection__item-container--column",cP="tox-collection__item-container--row",lP="tox-collection__item-container--align-right",uP="tox-collection__item-container--align-left",dP="tox-collection__item-container--valign-top",MA="tox-collection__item-container--valign-middle",fP="tox-collection__item-container--valign-bottom",mP=t=>Tt(aP,t).getOr(Qw),hP=t=>t==="color"?"tox-swatches":"tox-menu",m_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:hP(t),tieredMenu:"tox-tiered-menu"}),n1=t=>{const s=m_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:mP(t)}},gP=(t,s,a)=>{const c=m_(a);return{tag:"div",classes:dt([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},QH=[Mb.parts.items({})],eC=(t,s,a)=>{const c=m_(a);return{dom:{tag:"div",classes:dt([[c.tieredMenu]])},markers:n1(a)}},pP=oe([er("type","text"),Wo("data"),Pe("inputAttributes",{}),Pe("inputStyles",{}),Pe("tag","input"),Pe("inputClasses",[]),ko("onSetValue"),os("fromInputValue",Xt),os("toInputValue",Xt),Pe("styles",{}),Pe("eventOrder",{}),Xa("inputBehaviours",[Jt,$n]),Pe("selectOnFocus",!0)]),bP=t=>Et([$n.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=$u(a);t.type!=="range"&&a.dom.setSelectionRange(0,c.length)}:ce})]),e9=t=>({...bP(t),...Fr(t.inputBehaviours,[Jt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue($u(s.element)),setValue:(s,a)=>{$u(s.element)!==a&&tg(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),vP=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),yP=(t,s)=>({uid:t.uid,dom:vP(t),components:[],behaviours:e9(t),eventOrder:t.eventOrder}),Ef=al({name:"Input",configFields:pP(),factory:yP}),NA=on("refetch-trigger-event"),wP=on("redirect-menu-item-interaction"),CP="tox-menu__searcher",h_=t=>ir(t.element,`.${CP}`).bind(s=>t.getSystem().getByDom(s).toOptional()),SP=h_,t9=(t,s)=>{Jt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},tC=t=>{const s=Jt.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},n9=(t,s)=>{To(s.element,"id").each(a=>$t(t.element,"aria-activedescendant",a))},xP=t=>{const s=(d,h)=>(h.cut(),M.none()),a=(d,h)=>{const b={interactionEvent:h.event,eventType:h.event.raw.type};return bn(d,wP,b),M.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[ry]},components:[Ef.sketch({inputClasses:[CP,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Et([Kn(c,[ot(nu(),d=>{bo(d,NA)}),ot(Vi(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),Sn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,Sn.name()]}})]}},g_="tox-collection--results__js",PA=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:on("aria-item-search-result-id"),"aria-selected":"false"}}}:t},p_=(t,s)=>a=>{const c=io(a,s);return $e(c,d=>({dom:t,components:d}))},o9=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Mb.parts.items({preprocess:t!=="auto"?p_({tag:"div",classes:["tox-swatches__row"]},t):Xt})]}]}),EP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Mb.parts.items({preprocess:p_({tag:"div",classes:["tox-collection__group"]},t)})]}),IA=(t,s)=>{const a=[];let c=[];return pt(t,(d,h)=>{s(d,h)?(c.length>0&&a.push(c),c=[],(go(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),$e(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},b_=(t,s,a)=>Mb.parts.items({preprocess:c=>{const d=$e(c,a);return t!=="auto"&&t>1?p_({tag:"div",classes:["tox-collection__group"]},t)(d):IA(d,(h,b)=>s[b].type==="separator")}}),BA=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[b_(t,s,Xt)]}),s9=(t,s,a=!0)=>{const c=on("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",g_].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[b_(t,s,PA)]}},r9=(t,s,a)=>{const c=on("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[xP({i18n:Bd.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],g_],attributes:{id:c}},components:[b_(t,s,PA)]}]}},a9=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Mb.parts.items({preprocess:a=>IA(a,(c,d)=>t[d].type==="separator")})]}),v_=t=>Mn(t,s=>"icon"in s&&s.icon!==void 0),ph=t=>(console.error(Jl(t)),console.log(t),M.none()),_P=(t,s,a,c,d)=>{const h=a9(a);return{value:t,dom:h.dom,components:h.components,items:a}},LA=(t,s,a,c,d)=>{const h=()=>d.menuType!=="searchable"?BA(c,a):d.searchMode.searchMode==="search-with-field"?r9(c,a,d.searchMode):s9(c,a);if(d.menuType==="color"){const b=o9(c);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const b=BA(c,a);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const b=h();return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const b=EP(c);return{value:t,dom:b.dom,components:b.components,items:a}}else return{value:t,dom:gP(s,c,d.menuType),components:QH,items:a}},ha=ia("type"),FA=ia("name"),$A=ia("label"),xg=ia("text"),TP=ia("title"),kP=ia("icon"),nC=ia("value"),HA=Sl("fetch"),AP=Sl("getSubmenuItems"),ay=Sl("onAction"),i9=Sl("onItemAction"),o1=os("onSetup",()=>ce),c9=yr("name"),s1=yr("text"),OP=yr("role"),Ku=yr("icon"),iy=yr("tooltip"),zA=yr("label"),VA=yr("shortcut"),l9=yd("select"),oC=Oa("active",!1),UA=Oa("borderless",!1),_f=Oa("enabled",!0),y_=Oa("primary",!1),DP=t=>Pe("columns",t),WA=Pe("meta",{}),ZA=os("onAction",ce),cy=t=>er("type",t),w_=t=>aa("name","name",po(()=>on(`${t}-name`)),Wt),RP=t=>aa("value","value",po(()=>on(`${t}-value`)),wl()),MP=Bn([ha,s1]),u9=t=>fr("separatormenuitem",MP,t),d9=Bn([cy("autocompleteitem"),oC,_f,WA,nC,s1,Ku]),uu=t=>fr("Autocompleter.Separator",MP,t),Tf=t=>fr("Autocompleter.Item",d9,t),ly=[_f,iy,Ku,s1,o1,er("context","mode:design")],jA=Bn([ha,ay,VA].concat(ly)),C_=t=>fr("toolbarbutton",jA,t),uy=[oC].concat(ly),NP=Bn(uy.concat([ha,ay,VA])),dy=t=>fr("ToggleButton",NP,t),Lb=[os("predicate",at),Aa("scope","node",["node","editor"]),Aa("position","selection",["node","selection","line"])],qA=ly.concat([cy("contextformbutton"),er("align","end"),y_,ay,qo("original",Xt)]),PP=uy.concat([cy("contextformbutton"),er("align","end"),y_,ay,qo("original",Xt)]),sC=ly.concat([cy("contextformbutton")]),f9=uy.concat([cy("contextformtogglebutton")]),m9=ra("type",{contextformbutton:qA,contextformtogglebutton:PP}),Ld=[zA,Cc("commands",m9),Pu("launch",ra("type",{contextformbutton:sC,contextformtogglebutton:f9})),os("onInput",ce),os("onSetup",ce)],du=[...Lb,...Ld,ya("type",["contextform"]),os("initValue",oe("")),yr("placeholder")],rC=[...Lb,...Ld,ya("type",["contextsliderform"]),os("initValue",oe(0)),os("min",oe(0)),os("max",oe(100))],Fd=[...Lb,...Ld,ya("type",["contextsizeinputform"]),os("initValue",oe({width:"",height:""}))],h9=ra("type",{contextform:du,contextsliderform:rC,contextsizeinputform:Fd}),Gs=t=>fr("ContextForm",h9,t),g9=Bn([cy("contexttoolbar"),Uo("items",Jf([Wt,qg([yr("name"),yr("label"),Cc("items",Wt)])]))].concat(Lb)),Fb=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),aC=t=>({...t,items:j(t.items)?t.items:$e(t.items,Fb)}),IP=t=>fr("ContextToolbar",g9,t),GA=[ha,ia("src"),yr("alt"),_("classes",[],Wt)],KA=Bn(GA),p9=[ha,xg,c9,_("classes",["tox-collection__item-label"],Wt)],YA=Bn(p9),BP=ea(()=>tf("type",{cardimage:KA,cardtext:YA,cardcontainer:LP})),LP=Bn([ha,er("direction","horizontal"),er("align","left"),er("valign","middle"),Cc("items",BP)]),$b=[_f,s1,OP,VA,RP("menuitem"),WA,er("context","mode:design")],XA=Bn([ha,zA,Cc("items",BP),o1,ZA].concat($b)),FP=t=>fr("cardmenuitem",XA,t),S_=Bn([ha,oC,Ku].concat($b)),b9=t=>fr("choicemenuitem",S_,t),$P=[ha,ia("fancytype"),ZA],v9=[Pe("initData",{})].concat($P),y9=[yd("select"),R("initData",{},[Oa("allowCustomColors",!0),er("storageKey","default"),Yg("colors",wl())])].concat($P),w9=ra("fancytype",{inserttable:v9,colorswatch:y9}),HP=t=>fr("fancymenuitem",w9,t),C9=Bn([ha,o1,ZA,Ku].concat($b)),S9=t=>fr("menuitem",C9,t),zP=Bn([ha,AP,o1,Ku].concat($b)),x9=t=>fr("nestedmenuitem",zP,t),VP=Bn([ha,Ku,oC,o1,ay].concat($b)),iC=t=>fr("togglemenuitem",VP,t),JA=(t,s,a)=>{const c=kc(t.element,"."+a);if(c.length>0){const d=_t(c,h=>{const b=h.dom.getBoundingClientRect().top,S=c[0].dom.getBoundingClientRect().top;return Math.abs(b-S)>s}).getOr(c.length);return M.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return M.none()},UP=(t,s)=>Et([Kn(t,s)]),Hb={namedEvents:UP,unnamedEvents:t=>UP(on("unnamed-events"),t)},WP=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),$d={item:t=>vn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>vn.config({disabled:t}),splitButton:t=>vn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>vn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},x_=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},kf=(t,s)=>tr(a=>{Ne(t.onBeforeSetup)&&t.onBeforeSetup(a),x_(t,a)(d=>{const h=t.onSetup(d);Ne(h)&&s.set(h)})}),Bi=(t,s)=>sf(a=>x_(t,a)(s.get())),ZP="silver.uistate",zb="setDisabled",jP="setEnabled",QA="init",qP=["switchmode",QA],fy=(t,s)=>{const a=t.mainUi.outerContainer,c=[t.mainUi.mothership,...t.uiMotherships];s===zb&&pt(c,d=>{d.broadcastOn([hm()],{target:a.element})}),pt(c,d=>{d.broadcastOn([ZP],s)})},eO=(t,s)=>{t.on("init SwitchMode",a=>{fy(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const c=a.state?zb:QA;fy(s,c),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const c=t.ui.isEnabled()?a.type:zb;fy(s,c)}),Y3(t)&&t.mode.set("readonly")},ga=t=>ol.config({channels:{[ZP]:{onReceive:(s,a)=>{if(a===zb||a===jP){vn.set(s,a===zb);return}const{contextType:c,shouldDisable:d}=t();c==="mode"&&!wt(qP,a)||vn.set(s,d)}}}}),_9=(t,s)=>rf((a,c)=>{x_(t,a)(t.onAction),!t.triggersSubmenu&&s===xf.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&bo(a,ja()),c.stop())}),T9={[Di()]:["disabling","alloy.base.behaviour","toggling","item-events"]},my=si,hy=(t,s,a,c)=>{const d=gn(ce);return{type:"item",dom:s.dom,components:my(s.optComponents),data:t.data,eventOrder:T9,hasSubmenu:t.triggersSubmenu,itemBehaviours:Et([Kn("item-events",[_9(t,a),kf(t,d),Bi(t,d)]),$d.item(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),ga(()=>c.checkUiComponentContext(t.context)),Wn.config({})].concat(t.itemBehaviours))}},gy=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),tO=t=>{const s=Yp.os.isMacOS()||Yp.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),b=$e(h,S=>{const T=S.toLowerCase().trim();return go(d,T)?d[T]:S});return s?b.join(""):b.join("+")},E_=(t,s,a=[u_])=>Gu(t,{tag:"div",classes:a},s),nO=t=>({dom:{tag:"div",classes:[DA]},components:[or(Bd.translate(t))]}),oO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),k9=(t,s)=>({dom:{tag:"div",classes:[DA]},components:[{dom:{tag:t.tag,styles:t.styles},components:[or(Bd.translate(s))]}]}),A9=t=>({dom:{tag:"div",classes:[iP]},components:[or(tO(t))]}),GP=t=>E_("checkmark",t,[Ib]),py=t=>E_("chevron-right",t,[RA]),O9=t=>E_("chevron-down",t,[RA]),KP=(t,s)=>{const a=t.direction==="vertical"?f_:cP,c=t.align==="left"?uP:lP;return{dom:{tag:"div",classes:[d_,a,c,(()=>{switch(t.valign){case"top":return dP;case"middle":return MA;case"bottom":return fP}})()]},components:s}},YP=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),XP=(t,s,a)=>{const c="custom",d="remove",h=t.value,b=t.iconContent.map(D=>Jw(D,s.icons,a)),S=t.ariaLabel.map(D=>({"aria-label":s.translate(D),"data-mce-name":D})).getOr({});return{dom:(()=>{const D=l_,P=b.getOr(""),F={tag:"div",attributes:S,classes:[D]};return h===c?{...F,tag:"button",classes:[...F.classes,"tox-swatches__picker-btn"],innerHtml:P}:h===d?{...F,classes:[...F.classes,"tox-swatch--remove"],innerHtml:P}:Ct(h)?{...F,attributes:{...F.attributes,"data-mce-color":h},styles:{"background-color":h},innerHtml:P}:F})(),optComponents:[]}},sO=t=>{const s=t.map(a=>({attributes:{id:on("menu-item"),"aria-label":Bd.translate(a)}})).getOr({});return{tag:"div",classes:[Qw,ry],...s}},rO=(t,s,a,c)=>{const d={tag:"div",classes:[u_]},h=G=>Gu(G,d,s.icons,c),b=()=>M.some({dom:d}),S=a?t.iconContent.map(h).orThunk(b):M.none(),T=t.checkMark,D=M.from(t.meta).fold(()=>nO,G=>go(G,"style")?en(k9,G.style):nO),P=t.htmlContent.fold(()=>t.textContent.map(D),G=>M.some(oO(G,[DA])));return{dom:sO(t.ariaLabel),optComponents:[S,P,t.shortcutContent.map(A9),T,t.caret]}},Vb=(t,s,a,c=M.none())=>t.presets==="color"?XP(t,s,c):rO(t,s,a,c),__=(t,s,a)=>Tt(t,"tooltipWorker").map(c=>[Ar.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Cp}}),mode:"follow-highlight",onShow:(d,h)=>{c(b=>{Ar.setComponents(d,[E2({element:Ke.fromDom(b)})])})}})]).getOrThunk(()=>a.map(c=>[Ar.config({...s.providers.tooltips.getConfig({tooltipText:c}),mode:"follow-highlight"})]).getOr([])),JP=t=>Bw.DOM.encode(t),QP=(t,s)=>{const a=Bd.translate(t),c=JP(a);if(s.length>0){const d=new RegExp(WP(s),"gi");return c.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return c},eI=(t,s,a,c,d,h,b,S=!0)=>{const T=Vb({presets:c,textContent:M.none(),htmlContent:a?t.text.map(P=>QP(P,s)):M.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:M.none(),checkMark:M.none(),caret:M.none(),value:t.value},b.providers,S,t.icon),D=t.text.filter(P=>!a&&P!=="");return hy({context:"mode:design",data:gy(t),enabled:t.enabled,getApi:oe({}),onAction:P=>d(t.value,t.meta),onSetup:oe(ce),triggersSubmenu:!1,itemBehaviours:__(t,b,D)},T,h,b.providers)},tI=(t,s)=>$e(t,a=>{switch(a.type){case"cardcontainer":return KP(a,tI(a.items,s));case"cardimage":return YP(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>wt(s.cardText.highlightOn,h))?M.from(s.cardText.matchText).getOr(""):"";return oO(QP(a.text,d),a.classes)}}),D9=(t,s,a,c)=>{const d=b=>({isEnabled:()=>!vn.isDisabled(b),setEnabled:S=>{vn.set(b,!S),pt(kc(b.element,"*"),T=>{b.getSystem().getByDom(T).each(D=>{D.hasConfigured(vn)&&vn.set(D,!S)})})}}),h={dom:sO(t.label),optComponents:[M.some({dom:{tag:"div",classes:[d_,cP]},components:tI(t.items,c)})]};return hy({context:"mode:design",data:gy({text:M.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:M.from(c.itemBehaviours).getOr([])},h,s,a.providers)},R9=(t,s,a,c,d,h,b,S=!0)=>{const T=F=>({setActive:G=>{mo.set(F,G)},isActive:()=>mo.isOn(F),isEnabled:()=>!vn.isDisabled(F),setEnabled:G=>vn.set(F,!G)}),D=Vb({presets:a,textContent:s?t.text:M.none(),htmlContent:M.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:M.none(),checkMark:s?M.some(GP(b.icons)):M.none(),caret:M.none(),value:t.value},b,S),P=t.text.filter(oe(!s)).map(F=>Ar.config(b.tooltips.getConfig({tooltipText:b.translate(F)})));return Fs(hy({context:t.context,data:gy(t),enabled:t.enabled,getApi:T,onAction:F=>c(t.value),onSetup:F=>(F.setActive(d),ce),triggersSubmenu:!1,itemBehaviours:[...P.toArray()]},D,h,b),{toggling:{toggleClass:OA,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},aO=ww(j3(),q3()),iO=t=>({value:sI(t)}),cO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,oI=t=>cO.test(t)||nI.test(t),sI=t=>ml(t,"#").toUpperCase(),M9=t=>oI(t)?M.some({value:sI(t)}):M.none(),N9=t=>({value:t.value.replace(cO,(a,c,d,h)=>c+c+d+d+h+h)}),P9=t=>{const s=N9(t),a=nI.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},lO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},cC=t=>{const s=lO(t.red)+lO(t.green)+lO(t.blue);return iO(s)},rI=Math.min,aI=Math.max,T_=Math.round,iI=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,I9=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ub=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),uO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},cI=t=>{let s,a,c;const d=(t.hue||0)%360;let h=t.saturation/100,b=t.value/100;if(h=aI(0,rI(h,1)),b=aI(0,rI(b,1)),h===0)return s=a=c=T_(255*b),Ub(s,a,c,1);const S=d/60,T=b*h,D=T*(1-Math.abs(S%2-1)),P=b-T;switch(Math.floor(S)){case 0:s=T,a=D,c=0;break;case 1:s=D,a=T,c=0;break;case 2:s=0,a=T,c=D;break;case 3:s=0,a=D,c=T;break;case 4:s=D,a=0,c=T;break;case 5:s=T,a=0,c=D;break;default:s=a=c=0}return s=T_(255*(s+P)),a=T_(255*(a+P)),c=T_(255*(c+P)),Ub(s,a,c,1)},lC=t=>{const s=P9(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return Ub(a,c,d,1)},uC=(t,s,a,c)=>{const d=parseInt(t,10),h=parseInt(s,10),b=parseInt(a,10),S=parseFloat(c);return Ub(d,h,b,S)},k_=t=>{const s=iI.exec(t);if(s!==null)return M.some(uC(s[1],s[2],s[3],"1"));const a=I9.exec(t);return a!==null?M.some(uC(a[1],a[2],a[3],a[4])):M.none()},lI=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,uI=Ub(255,0,0,1),B9=t=>{t.dispatch("SkinLoaded")},L9=(t,s)=>{t.dispatch("SkinLoadError",s)},F9=t=>{t.dispatch("ResizeEditor")},dO=(t,s)=>{t.dispatch("ResizeContent",s)},fO=(t,s)=>{t.dispatch("ScrollContent",s)},mO=(t,s)=>{t.dispatch("TextColorChange",s)},dI=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},$9=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),fI=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},H9=(t,s)=>{t.dispatch("StylesTextUpdate",s)},z9=(t,s)=>{t.dispatch("AlignTextUpdate",s)},V9=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},U9=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},W9=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},Z9=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},j9=t=>{t.dispatch("ToggleSidebar")},q9=t=>{t.dispatch("ToggleView")},mI=t=>{t.dispatch("ContextToolbarClose")},G9=t=>{t.dispatch("ContextFormSlideBack")},Wb=(t,s)=>()=>{t(),s()},ic=t=>Zb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),hO=(t,s)=>a=>{const c=_i(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);c.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},dC=(t,s)=>a=>{const c=ic(t)(a),d=hO(t,s)(a);return()=>{c(),d()}},Zb=(t,s,a)=>c=>{const d=()=>a(c),h=()=>{a(c),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},hI=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},cl=(t,s)=>()=>t.execCommand(s);var Eg=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const fC={},gI=(t,s=10)=>{const a=Eg.getItem(t),c=j(a)?JSON.parse(a):[],h=(D=>s-D.length<0?D.slice(0,s):D)(c),b=D=>{Ae(h,D).each(S),h.unshift(D),h.length>s&&h.pop(),Eg.setItem(t,JSON.stringify(h))},S=D=>{h.splice(D,1)};return{add:b,state:()=>h.slice(0)}},pI=t=>Tt(fC,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Eg.getItem(s);if(Pt(a)){const d=Eg.getItem("tinymce-custom-colors");Eg.setItem(s,Ct(d)?d:"[]")}const c=gI(s,10);return fC[t]=c,c}),K9=t=>$e(pI(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),bI=(t,s)=>{pI(t).add(s)},mC=(t,s,a)=>({hue:t,saturation:s,value:a}),gO=t=>{let s=0,a=0,c=0;const d=t.red/255,h=t.green/255,b=t.blue/255,S=Math.min(d,Math.min(h,b)),T=Math.max(d,Math.max(h,b));if(S===T)return c=S,mC(0,0,c*100);const D=d===S?h-b:b===S?d-h:b-d;return s=d===S?3:b===S?1:5,s=60*(s-D/(T-S)),a=(T-S)/T,c=T,mC(Math.round(s),Math.round(a*100),Math.round(c*100))},Y9=t=>gO(lC(t)),vI=t=>cC(cI(t)),X9=t=>M9(t).orThunk(()=>k_(t).map(cC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],h=c[1],b=c[2],S=c[3];return cC(Ub(d,h,b,S))}),pO="forecolor",bO="hilitecolor",J9=5,Q9=t=>yI(t.map((s,a)=>a%2===0?"#"+X9(s).value:s)),yI=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Af=t=>s=>s.options.get(t),vO="#000000",ez=t=>{const s=t.options.register,a=h=>xt(h,j)?{value:Q9(h),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=h=>xt(h,j)?{value:yI(h),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=h=>ln(h)&&h>0?{value:h,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:c}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:yO(t)}),s("color_cols_foreground",{processor:d,default:wI(t,pO)}),s("color_cols_background",{processor:d,default:wI(t,bO)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:vO}),s("color_default_background",{processor:"string",default:vO})},Hd=(t,s)=>s===pO&&t.options.isSet("color_map_foreground")?Af("color_map_foreground")(t):s===bO&&t.options.isSet("color_map_background")?Af("color_map_background")(t):t.options.isSet("color_map_raw")?Af("color_map_raw")(t):Af("color_map")(t),yO=(t,s="default")=>Math.max(J9,Math.ceil(Math.sqrt(Hd(t,s).length))),wI=(t,s)=>{const a=Af("color_cols")(t),c=yO(t,s);return a===yO(t)?c:a},A_=(t,s="default")=>Math.round(s===pO?Af("color_cols_foreground")(t):s===bO?Af("color_cols_background")(t):Af("color_cols")(t)),Qa=Af("custom_colors"),tz=Af("color_default_foreground"),nz=Af("color_default_background"),oz="rgba(0, 0, 0, 0)",sz=t=>k_(t).exists(s=>s.alpha!==0),rz=t=>xl(t,s=>{if(lr(s)){const a=ut(s,"background-color");return En(sz(a),a)}else return M.none()}).getOr(oz),CI=(t,s)=>{const a=Ke.fromDom(t.selection.getStart()),c=s==="hilitecolor"?rz(a):ut(a,"color");return k_(c).map(d=>"#"+cC(d).value)},az=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},iz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},cz=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{az(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{iz(t,s)})},SI=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},wO=(t,s,a,c)=>{a==="custom"?AI(t)(h=>{h.each(b=>{bI(s,b),t.execCommand("mceApplyTextcolor",s,b),c(b)})},CI(t,s).getOr(vO)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},CO=(t,s,a)=>t.concat(K9(s).concat(SI(a))),xI=(t,s,a)=>c=>{c(CO(t,s,a))},SO=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},EI=(t,s)=>{t.setTooltip(s)},_I=(t,s)=>a=>{const c=CI(t,s);return Ur(c,a.toUpperCase())},xO=(t,s,a)=>{if(fe(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=CO(Hd(t,s),s,!1),h=et(d,b=>b.value===a).getOr({text:""}).text;return t.translate([c,t.translate(h)])},TI=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:xO(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:_I(t,a),columns:A_(t,a),fetch:xI(Hd(t,a),a,Qa(t)),onAction:d=>{wO(t,a,c.get(),ce)},onItemAction:(d,h)=>{wO(t,a,h,b=>{c.set(b),mO(t,{name:s,color:b})})},onSetup:d=>{SO(d,s,c.get());const h=b=>{b.name===s&&(SO(d,b.name,b.color),EI(d,xO(t,a,b.color)))};return t.on("TextColorChange",h),Wb(ic(t)(d),()=>{t.off("TextColorChange",h)})}})},kI=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(EI(h,xO(t,a,d.get())),SO(h,s,d.get()),ic(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:_I(t,a),initData:{storageKey:a},onAction:h=>{wO(t,a,h.value,b=>{d.set(b),mO(t,{name:s,color:b})})}}]})},AI=t=>(s,a)=>{let c=!1;const d=S=>{const D=S.getData().colorpicker;c?(s(M.from(D)),S.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",D]))},h=(S,T)=>{T.name==="hex-valid"&&(c=T.value)},b={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:h,onSubmit:d,onClose:ce,onCancel:()=>{s(M.none())}})},lz=t=>{cz(t);const s=tz(t),a=nz(t),c=gn(s),d=gn(a);TI(t,"forecolor","forecolor",c),TI(t,"backcolor","hilitecolor",d),kI(t,"forecolor","forecolor","Text color",c),kI(t,"backcolor","hilitecolor","Background color",d)},EO=(t,s,a,c,d,h,b,S)=>{const T=v_(s),P=uz(s,a,c,d!=="color"?"normal":"color",h,b,S);return LA(t,T,P,c,{menuType:d})},uz=(t,s,a,c,d,h,b)=>si($e(t,S=>S.type==="choiceitem"?b9(S).fold(ph,T=>M.some(R9(T,a===1,c,s,h(T.value),d,b,v_(t)))):M.none())),O_=(t,s)=>{const a=n1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?ir(d.element,"[aria-checked=true]"):M.none()}},dz=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${l_}`:`.${ry}`}},OI=(t,s)=>{const a=fz(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",b={...EO(on("menu-value"),a,S=>{t.onAction({value:S})},c,d,xf.CLOSE_ON_EXECUTE,t.select.getOr(at),s.shared.providers),markers:n1(d),movement:O_(c,d),showMenuRole:!1};return{type:"widget",data:{value:on("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[aO.widget(Mb.sketch(b))]}},fz=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>CO(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(SI(a)))},_O=on("cell-over"),DI=on("cell-execute"),mz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),hz=(t,s,a)=>{const c=b=>bn(b,_O,{row:t,col:s}),d=b=>bn(b,DI,{row:t,col:s}),h=(b,S)=>{S.stop(),d(b)};return Mi({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Et([Kn("insert-table-picker-cell",[ot(Bc(),$n.focus),ot(Di(),d),ot(zh(),h),ot(N1(),h)]),mo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),$n.config({onFocus:c})])})},RI=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const h=[];for(let b=0;b<a;b++){const S=t(d+1,b+1);h.push(hz(d,b,S))}c.push(h)}return c},gz=(t,s,a,c,d)=>{for(let h=0;h<c;h++)for(let b=0;b<d;b++)mo.set(t[h][b],h<=s&&b<=a)},pz=t=>xe(t,s=>$e(s,El)),MI=(t,s)=>or(`${s}x${t}`),NI={inserttable:(t,s)=>{const d=mz(s),h=RI(d,10,10),b=MI(0,0),S=Jo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[b],behaviours:Et([Wn.config({})])});return{type:"widget",data:{value:on("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[aO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:pz(h).concat(S.asSpec()),behaviours:Et([Kn("insert-table-picker",[tr(T=>{Wn.set(S.get(T),[b])}),O0(_O,(T,D,P)=>{const{row:F,col:G}=P.event;gz(h,F,G,10,10),Wn.set(S.get(T),[MI(F+1,G+1)])}),O0(DI,(T,D,P)=>{const{row:F,col:G}=P.event;bo(T,ja()),t.onAction({numRows:F+1,numColumns:G+1})})]),Sn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:OI},bz=(t,s)=>Tt(NI,t.fancytype).map(a=>a(t,s)),PI=(t,s,a,c=!0,d=!1)=>{const h=d?O9(a.icons):py(a.icons),b=T=>({isEnabled:()=>!vn.isDisabled(T),setEnabled:D=>vn.set(T,!D),setIconFill:(D,P)=>{ir(T.element,`svg path[class="${D}"], rect[class="${D}"]`).each(F=>{$t(F,"fill",P)})},setTooltip:D=>{const P=a.translate(D);$t(T.element,"aria-label",P)}}),S=Vb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,caret:M.some(h),checkMark:M.none(),shortcutContent:t.shortcut},a,c);return hy({context:t.context,data:gy(t),getApi:b,enabled:t.enabled,onAction:ce,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},S,s,a)},vz=(t,s,a,c=!0)=>{const d=b=>({isEnabled:()=>!vn.isDisabled(b),setEnabled:S=>vn.set(b,!S)}),h=Vb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,caret:M.none(),checkMark:M.none(),shortcutContent:t.shortcut},a,c);return hy({context:t.context,data:gy(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},II=t=>({type:"separator",dom:{tag:"div",classes:[ry,JH]},components:t.text.map(or).toArray()}),yz=(t,s,a,c=!0)=>{const d=b=>({setActive:S=>{mo.set(b,S)},isActive:()=>mo.isOn(b),isEnabled:()=>!vn.isDisabled(b),setEnabled:S=>vn.set(b,!S)}),h=Vb({iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,checkMark:M.some(GP(a.icons)),caret:M.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Fs(hy({context:t.context,data:gy(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:OA,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},wz=eI,BI=II,Cz=vz,Sz=PI,xz=yz,Ez=bz,_z=D9;var Tz=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),kz=[Uo("others",Xl(Xn.value,wl()))],LI=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,b)=>{if(xs(h.others).length===0)throw new Error("Cannot find any known coupled components");return Tt(t,b)},a=(h,b,S)=>s(b,S).getOrThunk(()=>{const D=Tt(b.others,S).getOrDie("No information found for coupled component: "+S)(h),P=h.getSystem().build(D);return t[S]=P,P}),c=(h,b,S)=>s(b,S).orThunk(()=>(Tt(b.others,S).getOrDie("No information found for coupled component: "+S),M.none())),d=oe({});return di({readState:d,getExisting:c,getOrCreate:a})}});const Zr=wa({fields:kz,name:"coupling",apis:Tz,state:LI}),TO=t=>{let s=M.none(),a=[];const c=D=>TO(P=>{d(F=>{P(D(F))})}),d=D=>{b()?T(D):a.push(D)},h=D=>{b()||(s=M.some(D),S(a),a=[])},b=()=>s.isSome(),S=D=>{pt(D,T)},T=D=>{s.each(P=>{setTimeout(()=>{D(P)},0)})};return t(h),{get:d,map:c,isReady:b}},Az={nu:TO,pure:t=>TO(s=>{s(t)})},Oz=t=>{setTimeout(()=>{throw t},0)},r1=t=>{const s=T=>{t().then(T,Oz)};return{map:T=>r1(()=>t().then(T)),bind:T=>r1(()=>t().then(D=>T(D).toPromise())),anonBind:T=>r1(()=>t().then(()=>T.toPromise())),toLazy:()=>Az.nu(s),toCached:()=>{let T=null;return r1(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},cc={nu:t=>r1(()=>new Promise(t)),pure:t=>r1(()=>Promise.resolve(t))},kO=oe("sink"),AO=oe(zc({name:kO(),overrides:oe({dom:{tag:"div"},behaviours:Et([Ya.config({useFixed:it})]),events:fs([Wh(Vi()),Wh(Ir()),Wh(zh())])})})),FI=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),h=>({type:c,hotspot:a,overrides:d,layouts:h}))},Dz=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},$I=(t,s,a,c,d,h,b)=>{const S=Dz(t,s,c),T=HI(c,t);return S.map(D=>D.bind(P=>{const F=P.menus[P.primary];return M.from(F).each(G=>{t.listRole.each(J=>{G.role=J})}),M.from(Kp.sketch({...h.menu(),uid:Lu(""),data:P,highlightOnOpen:b,onOpenMenu:(G,J)=>{const re=T().getOrDie();Ya.position(re,J,{anchor:a}),Po.decloak(d)},onOpenSubmenu:(G,J,re)=>{const le=T().getOrDie();Ya.position(le,re,{anchor:{type:"submenu",item:J}}),Po.decloak(d)},onRepositionMenu:(G,J,re)=>{const le=T().getOrDie();Ya.position(le,J,{anchor:a}),pt(re,De=>{Ya.position(le,De.triggeredMenu,{anchor:{type:"submenu",item:De.triggeringItem}})})},onEscape:()=>($n.focus(c),Po.close(d),M.some(!0))}))}))},D_=(t,s,a,c,d,h,b)=>{const S=FI(t,a);return $I(t,s,S,a,c,d,b).map(D=>(D.fold(()=>{Po.isOpen(c)&&Po.close(c)},P=>{Po.cloak(c),Po.open(c,P),h(c)}),c))},Rz=(t,s,a,c,d,h,b)=>(Po.close(c),cc.pure(c)),OO=(t,s,a,c,d,h)=>{const b=Zr.getCoupled(a,"sandbox");return(Po.isOpen(b)?Rz:D_)(t,s,a,b,c,d,h)},Mz=(t,s,a)=>{const c=Mo.getCurrent(s).getOr(s),d=oo(t.element);a?It(c.element,"min-width",d+"px"):Bm(c.element,d)},HI=(t,s)=>t.getSystem().getByUid(s.uid+"-"+kO()).map(a=>()=>Xn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Xn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),zI=t=>{Po.getState(t).each(s=>{Kp.repositionMenus(s)})},by=(t,s,a)=>{const c=ax(),d=(S,T)=>{const D=FI(t,s);c.link(s.element),t.matchWidth&&Mz(D.hotspot,T,t.useMinWidth),t.onOpen(D,S,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(S,T)},h=(S,T)=>{c.unlink(s.element),b().getOr(T).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(S,T)},b=HI(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id}},behaviours:Tl.augment(t.sandboxBehaviours,[Jt.config({store:{mode:"memory",initialValue:s}}),Po.config({onOpen:d,onClose:h,isPartOf:(S,T,D)=>ch(T,D)||ch(s,D),getAttachPoint:()=>b().getOrDie()}),Mo.config({find:S=>Po.getState(S).bind(T=>Mo.getCurrent(T))}),ol.config({channels:{...Hc({isExtraPart:at}),...mg({doReposition:zI})}})])}},VI=t=>{const s=Zr.getCoupled(t,"sandbox");zI(s)},vy=()=>[Pe("sandboxClasses",[]),Tl.field("sandboxBehaviours",[Mo,ol,Po,Jt])],Nz=oe([rt("dom"),rt("fetch"),ko("onOpen"),tc("onExecute"),Pe("getHotspot",M.some),Pe("getAnchorOverrides",oe({})),fh(),Xa("dropdownBehaviours",[mo,Zr,Sn,$n]),rt("toggleClass"),Pe("eventOrder",{}),Wo("lazySink"),Pe("matchWidth",!1),Pe("useMinWidth",!1),Wo("role"),Wo("listRole")].concat(vy())),Pz=oe([iu({schema:[gp(),Pe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),AO()]),Iz=(t,s,a,c)=>{const d=P=>Tt(t.dom,"attributes").bind(F=>Tt(F,P)),h=P=>{Po.getState(P).each(F=>{Kp.highlightPrimary(F)})},b=(P,F,G)=>OO(t,Xt,P,c,F,G),S=P=>{b(P,h,Ja.HighlightMenuAndItem).get(ce)},T={expand:P=>{mo.isOn(P)||b(P,ce,Ja.HighlightNone).get(ce)},open:P=>{mo.isOn(P)||b(P,ce,Ja.HighlightMenuAndItem).get(ce)},refetch:P=>Zr.getExistingCoupled(P,"sandbox").fold(()=>b(P,ce,Ja.HighlightMenuAndItem).map(ce),G=>D_(t,Xt,P,G,c,ce,Ja.HighlightMenuAndItem).map(ce)),isOpen:mo.isOn,close:P=>{mo.isOn(P)&&b(P,ce,Ja.HighlightMenuAndItem).get(ce)},repositionMenus:P=>{mo.isOn(P)&&VI(P)}},D=(P,F)=>(Qm(P),M.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.dropdownBehaviours,[mo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Zr.config({others:{sandbox:P=>by(t,P,{onOpen:()=>mo.on(P),onClose:()=>mo.off(P)})}}),Sn.config({mode:"special",onSpace:D,onEnter:D,onDown:(P,F)=>{if(Yu.isOpen(P)){const G=Zr.getCoupled(P,"sandbox");h(G)}else Yu.open(P);return M.some(!0)},onEscape:(P,F)=>Yu.isOpen(P)?(Yu.close(P),M.some(!0)):M.none()}),$n.config({})]),events:Qv(M.some(S)),eventOrder:{...t.eventOrder,[Di()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),P=>({role:P})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Yu=ac({name:"Dropdown",configFields:Nz(),partFields:Pz(),factory:Iz,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),LY=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},R_=t=>{const s=Jt.getValue(t),a=h_(t).map(tC);Yu.refetch(s).get(()=>{const c=Zr.getCoupled(s,"sandbox");a.each(d=>h_(c).each(h=>t9(h,d)))})},yy=(t,s)=>{UI(t).each(a=>{_S(t,a.element,s.event.eventType,s.event.interactionEvent)})},UI=t=>Po.getState(t).bind(mt.getHighlighted).bind(mt.getHighlighted),WI=t=>xc(t.element,g_)?M.some(t.element):ir(t.element,"."+g_),ZI=(t,s,a)=>{SP(t).each(c=>{n9(c,a),WI(s).each(h=>{To(h,"id").each(b=>$t(c.element,"aria-controls",b))})}),$t(a.element,"aria-selected","true")},Bz=(t,s,a)=>{$t(a.element,"aria-selected","false")},Lz=t=>{SP(t).each(s=>$n.focus(s))},Fz=t=>Zr.getExistingCoupled(t,"sandbox").bind(h_).map(tC).map(a=>a.fetchPattern).getOr("");var M_;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(M_||(M_={}));const $z=(t,s,a,c,d)=>{const h=a.shared.providers,b=S=>d?{...S,shortcut:M.none(),icon:S.text.isSome()?M.none():S.icon}:S;switch(t.type){case"menuitem":return S9(t).fold(ph,S=>M.some(Cz(b(S),s,h,c)));case"nestedmenuitem":return x9(t).fold(ph,S=>M.some(Sz(b(S),s,h,c,d)));case"togglemenuitem":return iC(t).fold(ph,S=>M.some(xz(b(S),s,h,c)));case"separator":return u9(t).fold(ph,S=>M.some(BI(S)));case"fancymenuitem":return HP(t).fold(ph,S=>Ez(S,a));default:return console.error("Unknown item in general menu",t),M.none()}},Hz=(t,s,a,c,d,h,b)=>{const S=c===1,T=!S||v_(t);return si($e(t,D=>{switch(D.type){case"separator":return uu(D).fold(ph,P=>M.some(BI(P)));case"cardmenuitem":return FP(D).fold(ph,P=>M.some(_z({...P,onAction:F=>{P.onAction(F),a(P.value,P.meta)}},d,h,{itemBehaviours:__(P.meta,h,M.none()),cardText:{matchText:s,highlightOn:b}})));case"autocompleteitem":default:return Tf(D).fold(ph,P=>M.some(wz(P,s,S,"normal",a,d,h,T)))}}))},jI=(t,s,a,c,d,h)=>{const b=v_(s),S=si($e(s,P=>{const F=J=>d?!go(J,"text"):b,G=J=>$z(J,a,c,F(J),d);return P.type==="nestedmenuitem"&&P.getSubmenuItems().length<=0?G({...P,enabled:!1}):G(P)})),T=LY(h);return(d?_P:LA)(t,b,S,1,T)},DO=t=>Kp.singleData(t.value,t),zz=(t,s,a,c)=>{const d=O_(s,c),h=n1(c);return{data:DO({...t,movement:d,menuBehaviours:Hb.unnamedEvents(s!=="auto"?[]:[tr((b,S)=>{JA(b,4,h.item).each(({numColumns:T,numRows:D})=>{Sn.setGridSize(b,D,T)})})])}),menu:{markers:n1(c),fakeFocus:a===M_.ContentFocus}}},Vz=t=>ag.create(Ke.fromDom(t.startContainer),t.startOffset,Ke.fromDom(t.endContainer),t.endOffset),wy={register:(t,s)=>{const a=on("autocompleter"),c=gn(!1),d=gn(!1),h=Xo(),b=Mi(gr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Et([Kn("dismissAutocompleter",[ot(xd(),()=>F()),ot(a2(),(de,Te)=>{To(Te.event.target,"id").each(Oe=>$t(Ke.fromDom(t.getBody()),"aria-activedescendant",Oe))})])]),lazySink:s.getSink})),S=()=>gr.isOpen(b),T=d.get,D=()=>{if(S()){gr.hide(b),t.dom.remove(a,!1);const de=Ke.fromDom(t.getBody());To(de,"aria-owns").filter(Te=>Te===a).each(()=>{ee(de,"aria-owns"),ee(de,"aria-activedescendant")})}},P=()=>gr.getContent(b).bind(de=>Vo(de.components(),0)),F=()=>t.execCommand("mceAutocompleterClose"),G=de=>{const Te=Ss(de,Oe=>M.from(Oe.columns)).getOr(1);return xe(de,Oe=>{const ze=Oe.items;return Hz(ze,Oe.matchText,(We,Mt)=>{const tn={hide:()=>F(),reload:nt=>{D(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:nt})}};t.execCommand("mceAutocompleterRefreshActiveRange"),h.get().each(nt=>{c.set(!0),Oe.onAction(tn,nt,We,Mt),c.set(!1)})},Te,xf.BUBBLE_TO_SANDBOX,s,Oe.highlightOn)})},J=(de,Te)=>{const Oe=Ss(de,ze=>M.from(ze.columns)).getOr(1);gr.showMenuAt(b,{anchor:{type:"selection",getSelection:()=>h.get().map(Vz),root:Ke.fromDom(t.getBody())}},zz(LA("autocompleter-value",!0,Te,Oe,{menuType:"normal"}),Oe,M_.ContentFocus,"normal")),P().each(mt.highlightFirst)},re=de=>{const Te=G(de);Te.length>0?(J(de,Te),$t(Ke.fromDom(t.getBody()),"aria-owns",a),t.inline||le()):D()},le=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const de=t.getDoc().documentElement,Te=t.selection.getNode(),Oe=q1(b.element);$o(Oe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Te.offsetTop}px`,left:`${Te.offsetLeft}px`}),t.dom.add(de,Oe.dom),ir(Oe,'[role="menu"]').each(ze=>{uo(ze,"position"),uo(ze,"max-height")})};t.on("AutocompleterStart",({lookupData:de})=>{d.set(!0),c.set(!1),re(de)}),t.on("AutocompleterUpdate",({lookupData:de})=>re(de)),t.on("AutocompleterUpdateActiveRange",({range:de})=>h.set(de)),t.on("AutocompleterEnd",()=>{D(),d.set(!1),c.set(!1),h.clear()});const De={cancelIfNecessary:F,isMenuOpen:S,isActive:T,isProcessingAction:c.get,getMenu:P};XH.setup(De,t)}},_m=(t,s,a)=>Rd(t,s,a).isSome(),qI=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},RO=5,GI=400,hC=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?M.none():M.some(s.touches[0])},Wz=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>RO||c>RO},gC=t=>{const s=Xo(),a=gn(!1),c=qI(D=>{t.triggerEvent(Uh(),D),a.set(!0)},GI),d=D=>(hC(D).each(P=>{c.cancel();const F={x:P.clientX,y:P.clientY,target:D.target};c.schedule(D),a.set(!1),s.set(F)}),M.none()),h=D=>(c.cancel(),hC(D).each(P=>{s.on(F=>{Wz(P,F)&&s.clear()})}),M.none()),b=D=>{c.cancel();const P=F=>yo(F.target,D.target);return s.get().filter(P).map(F=>a.get()?(D.prevent(),!1):t.triggerEvent(N1(),D))},S=gs([{key:tu(),value:d},{key:Ro(),value:h},{key:zs(),value:b}]);return{fireIfReady:(D,P)=>Tt(S,P).bind(F=>F(D))}},pC=t=>t.raw.which===rs[0]&&!wt(["input","textarea"],Ns(t.target))&&!_m(t.target,'[contenteditable="true"]'),Zz=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=gC(a),h=$e(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),J=>oc(t,J,re=>{d.fireIfReady(re,J).each(De=>{De&&re.kill()}),a.triggerEvent(J,re)&&re.kill()})),b=Xo(),S=oc(t,"paste",J=>{d.fireIfReady(J,"paste").each(le=>{le&&J.kill()}),a.triggerEvent("paste",J)&&J.kill(),b.set(setTimeout(()=>{a.triggerEvent(tp(),J)},0))}),T=oc(t,"keydown",J=>{a.triggerEvent("keydown",J)?J.kill():a.stopBackspace&&pC(J)&&J.prevent()}),D=oc(t,"focusin",J=>{a.triggerEvent("focusin",J)&&J.kill()}),P=Xo(),F=oc(t,"focusout",J=>{a.triggerEvent("focusout",J)&&J.kill(),P.set(setTimeout(()=>{a.triggerEvent(Xm(),J)},0))});return{unbind:()=>{pt(h,J=>{J.unbind()}),T.unbind(),D.unbind(),F.unbind(),S.unbind(),b.on(clearTimeout),P.on(clearTimeout)}}},KI=(t,s)=>{const a=Tt(t,"target").getOr(s);return gn(a)},jz=(t,s)=>{const a=gn(!1),c=gn(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},qz=t=>{const s=gn(!1);return{stop:()=>{s.set(!0)},cut:ce,isStopped:s.get,isCut:at,event:t,setSource:ve("Cannot set source of a broadcasted event"),getSource:ve("Cannot get source of a broadcasted event")}},bC=ne.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),YI=(t,s,a,c,d,h)=>{const b=t(s,c),S=jz(a,d);return b.fold(()=>(h.logEventNoHandlers(s,c),bC.complete()),T=>{const D=T.descHandler;return ah(D)(S),S.isStopped()?(h.logEventStopped(s,T.element,D.purpose),bC.stopped()):S.isCut()?(h.logEventCut(s,T.element,D.purpose),bC.complete()):Nr(T.element).fold(()=>(h.logNoParent(s,T.element,D.purpose),bC.complete()),F=>(h.logEventResponse(s,T.element,D.purpose),bC.resume(F)))})},vC=(t,s,a,c,d,h)=>YI(t,s,a,c,d,h).fold(it,b=>vC(t,s,a,b,d,h),at),Gz=(t,s,a,c,d)=>{const h=KI(a,c);return YI(t,s,a,c,h,d)},MO=(t,s,a)=>{const c=qz(s);return pt(t,d=>{const h=d.descHandler;ah(h)(c)}),c.isStopped()},Kz=(t,s,a,c)=>XI(t,s,a,a.target,c),XI=(t,s,a,c,d)=>{const h=KI(a,c);return vC(t,s,a,c,h,d)},JI=(t,s)=>({element:t,descHandler:s}),QI=(t,s)=>({id:t,descHandler:s}),e6=()=>{const t={},s=(b,S,T)=>{Ts(T,(D,P)=>{const F=t[P]!==void 0?t[P]:{};F[S]=GS(D,b),t[P]=F})},a=(b,S)=>q0(S).bind(T=>Tt(b,T)).map(T=>JI(S,T));return{registerId:s,unregisterId:b=>{Ts(t,(S,T)=>{go(S,b)&&delete S[b]})},filterByType:b=>Tt(t,b).map(S=>Ki(S,(T,D)=>QI(D,T))).getOr([]),find:(b,S,T)=>Tt(t,S).bind(D=>xl(T,P=>a(D,P),b))}},_g=()=>{const t=e6(),s={},a=D=>{const P=D.element;return q0(P).getOrThunk(()=>ZS("uid-",D.element))},c=(D,P)=>{const F=s[P];if(F===D)h(D);else throw new Error('The tagId "'+P+'" is already used by: '+rm(F.element)+`
Cannot use it for: `+rm(D.element)+`
The conflicting element is`+(ke(F.element)?" ":" not ")+"already in the DOM")},d=D=>{const P=a(D);Vr(s,P)&&c(D,P);const F=[D];t.registerId(F,P,D.events),s[P]=D},h=D=>{q0(D.element).each(P=>{delete s[P],t.unregisterId(P)})};return{find:(D,P,F)=>t.find(D,P,F),filter:D=>t.filterByType(D),register:d,unregister:h,getById:D=>Tt(s,D)}},Tm=al({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:yb(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Pe("components",[]),Xa("containerBehaviours",[]),Pe("events",{}),Pe("domModification",{}),Pe("eventOrder",{})]}),NO=t=>{const s=de=>Nr(t.element).fold(it,Te=>yo(de,Te)),a=_g(),c=(de,Te)=>a.find(s,de,Te),d=Zz(t.element,{triggerEvent:(de,Te)=>U0(de,Te.target,Oe=>Kz(c,de,Te,Oe))}),h={debugInfo:oe("real"),triggerEvent:(de,Te,Oe)=>{U0(de,Te,ze=>XI(c,de,Oe,Te,ze))},triggerFocus:(de,Te)=>{q0(de).fold(()=>{$c(de)},Oe=>{U0(Sd(),de,ze=>(Gz(c,Sd(),{originator:Te,kill:ce,prevent:ce,target:de},de,ze),!1))})},triggerEscape:(de,Te)=>{h.triggerEvent("keydown",de.element,Te.event)},getByUid:de=>le(de),getByDom:de=>De(de),build:Mi,buildOrPatch:bp,addToGui:de=>{T(de)},removeFromGui:de=>{D(de)},addToWorld:de=>{b(de)},removeFromWorld:de=>{S(de)},broadcast:de=>{G(de)},broadcastOn:(de,Te)=>{J(de,Te)},broadcastEvent:(de,Te)=>{re(de,Te)},isConnected:it},b=de=>{de.connect(h),ar(de.element)||(a.register(de),pt(de.components(),b),h.triggerEvent(E0(),de.element,{target:de.element}))},S=de=>{ar(de.element)||(pt(de.components(),S),a.unregister(de)),de.disconnect()},T=de=>{vf(t,de)},D=de=>{yf(de)},P=()=>{d.unbind(),Ic(t.element)},F=de=>{const Te=a.filter(ou());pt(Te,Oe=>{const ze=Oe.descHandler;ah(ze)(de)})},G=de=>{F({universal:!0,data:de})},J=(de,Te)=>{F({universal:!1,channels:de,data:Te})},re=(de,Te)=>{const Oe=a.filter(de);return MO(Oe,Te)},le=de=>a.getById(de).fold(()=>Xn.error(new Error('Could not find component with uid: "'+de+'" in system.')),Xn.value),De=de=>{const Te=q0(de).getOr("not found");return le(Te)};return b(t),{root:t,element:t.element,destroy:P,add:T,remove:D,getByUid:le,getByDom:De,addToWorld:b,removeFromWorld:S,broadcast:G,broadcastOn:J,broadcastEvent:re}},t6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$e(t.items,s.interpreter)}),Yz=oe([Pe("prefix","form-field"),Xa("fieldBehaviours",[Mo,Jt])]),n6=oe([zc({schema:[rt("dom")],name:"label"}),zc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[rt("text")],name:"aria-descriptor"}),Ii({factory:{sketch:t=>{const s=jn(t,["factory"]);return t.factory.sketch(s)}},schema:[rt("factory")],name:"field"})]),Xz=(t,s,a,c)=>{const d=Fr(t.fieldBehaviours,[Mo.config({find:S=>Rs(S,t,"field")}),Jt.config({store:{mode:"manual",getValue:S=>Mo.getCurrent(S).bind(Jt.getValue),setValue:(S,T)=>{Mo.getCurrent(S).each(D=>{Jt.setValue(D,T)})}}})]),h=fs([tr((S,T)=>{const D=Ew(S,t,["label","field","aria-descriptor"]);D.field().each(P=>{const F=on(t.prefix);D.label().each(G=>{$t(G.element,"for",F),$t(P.element,"id",F)}),D["aria-descriptor"]().each(G=>{const J=on(t.prefix);$t(G.element,"id",J),$t(P.element,"aria-describedby",J)})})})]),b={getField:S=>Rs(S,t,"field"),getLabel:S=>Rs(S,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:b}},Ho=ac({name:"FormField",configFields:Yz(),partFields:n6(),factory:Xz,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var Jz=tinymce.util.Tools.resolve("tinymce.html.Entities");const yC=(t,s,a,c)=>{const d=eV(t,s,a,c);return Ho.sketch(d)},Qz=(t,s)=>yC(t,s,[],[]),eV=(t,s,a,c)=>({dom:o6(a),components:t.toArray().concat([s]),fieldBehaviours:Et(c)}),tV=()=>o6([]),o6=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),bh=(t,s)=>Ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[or(s.translate(t))]}),Ol=on("form-component-change"),s6=on("form-component-input"),wC=on("form-close"),Tg=on("form-cancel"),vh=on("form-action"),CC=on("form-submit"),PO=on("form-block"),N_=on("form-unblock"),r6=on("form-tabchange"),a6=on("form-resize"),nV=(t,s,a)=>{const c=t.label.map(J=>bh(J,s)),d=s.icons(),h=J=>{var re;return(re=d[J])!==null&&re!==void 0?re:J},b=J=>(re,le)=>{Rd(le.event.target,"[data-collection-item-value]").each(De=>{J(re,le,De,Vn(De,"data-collection-item-value"))})},S=(J,re)=>{const De=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",de=$e(re,ze=>{const We=Bd.translate(ze.text),Mt=t.columns===1?`<div class="tox-collection__item-label">${We}</div>`:"",tn=`<div class="tox-collection__item-icon">${h(ze.icon)}</div>`,nt={_:" "," - ":" ","-":" "},an=We.replace(/\_| \- |\-/g,Vt=>nt[Vt]);return`<div data-mce-tooltip="${an}" class="tox-collection__item${De}" tabindex="-1" data-collection-item-value="${Jz.encodeAllRaw(ze.value)}" aria-label="${an}">${tn}${Mt}</div>`}),Te=t.columns!=="auto"&&t.columns>1?io(de,t.columns):[de],Oe=$e(Te,ze=>`<div class="tox-collection__group">${ze.join("")}</div>`);Bu(J.element,Oe.join(""))},T=b((J,re,le,De)=>{re.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||bn(J,vh,{name:t.name,value:De})}),D=[ot(Bc(),b((J,re,le)=>{$c(le,!0)})),ot(zh(),T),ot(N1(),T),ot(Cd(),b((J,re,le)=>{ir(J.element,"."+Bb).each(De=>{mr(De,Bb)}),Lr(le,Bb)})),ot(vS(),b(J=>{ir(J.element,"."+Bb).each(re=>{mr(re,Bb),Ga(re)})})),rf(b((J,re,le,De)=>{bn(J,vh,{name:t.name,value:De})}))],P=(J,re)=>$e(kc(J.element,".tox-collection__item"),re),F=Ho.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Xt},behaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:J=>{P(J,re=>{Lr(re,"tox-collection__item--state-disabled"),$t(re,"aria-disabled",!0)})},onEnabled:J=>{P(J,re=>{mr(re,"tox-collection__item--state-disabled"),ee(re,"aria-disabled")})}}),ga(()=>s.checkUiComponentContext(t.context)),Wn.config({}),Ar.config({...s.tooltips.getConfig({tooltipText:"",onShow:J=>{ir(J.element,"."+Bb+"[data-mce-tooltip]").each(re=>{To(re,"data-mce-tooltip").each(le=>{Ar.setComponents(J,s.tooltips.getComponents({tooltipText:le}))})})}}),mode:"children-keyboard-focus",anchor:J=>({type:"node",node:ir(J.element,"."+Bb).orThunk(()=>w4(".tox-collection__item")),root:J.element,layouts:{onLtr:oe([fa,qa,Ca,Ra,Sa,ps]),onRtl:oe([fa,qa,Ca,Ra,Sa,ps])},bubble:Hu(0,-2,{})})}),Jt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(J,re)=>{S(J,re),t.columns==="auto"&&JA(J,5,"tox-collection__item").each(({numRows:le,numColumns:De})=>{Sn.setGridSize(J,le,De)}),bo(J,a6)}}),cr.config({}),Sn.config(dz(t.columns,"normal")),Kn("collection-events",D)]),eventOrder:{[Di()]:["disabling","alloy.base.behaviour","collection-events"],[Cd()]:["collection-events","tooltipping"]}});return yC(c,F,["tox-form__group--collection"],[])},oV=["input","textarea"],i6=t=>{const s=Ns(t);return wt(oV,s)},IO=(t,s)=>{const a=s.getRoot(t).getOr(t.element);mr(a,s.invalidClass),s.notify.each(c=>{i6(t.element)&&$t(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Bu(d,c.validHtml)}),c.onValid(t)})},BO=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);Lr(d,s.invalidClass),s.notify.each(h=>{i6(t.element)&&$t(t.element,"aria-invalid",!0),h.getContainer(t).each(b=>{Bu(b,c)}),h.onInvalid(t,c)})},c6=(t,s,a)=>s.validator.fold(()=>cc.pure(Xn.value(!0)),c=>c.validate(t)),LO=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),c6(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(BO(t,s,a,d),Xn.error(d)),d=>(IO(t,s),Xn.value(d))):Xn.error("No longer in system")));var sV=Object.freeze({__proto__:null,markValid:IO,markInvalid:BO,query:c6,run:LO,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return xc(a,s.invalidClass)}}),l6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>fs([ot(a.onEvent,c=>{LO(c,t,s).get(Xt)})].concat(a.validateOnLoad?[tr(c=>{LO(c,t,s).get(ce)})]:[]))).getOr({})}),Sy=[rt("invalidClass"),Pe("getRoot",M.none),ca("notify",[Pe("aria","alert"),Pe("getContainer",M.none),Pe("validHtml",""),ko("onValid"),ko("onInvalid"),ko("onValidate")]),ca("validator",[rt("validate"),Pe("onEvent","input"),Pe("validateOnLoad",!0)])];const yh=wa({fields:Sy,name:"invalidating",active:l6,apis:sV,extra:{validation:t=>s=>{const a=Jt.getValue(s);return cc.pure(t(a))}}});var P_=Object.freeze({__proto__:null,events:()=>fs([i2(wS(),it)]),exhibit:()=>Fc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const ll=wa({fields:[],name:"unselecting",active:P_}),FO=(t,s)=>Yu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Et([$d.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),ga(()=>s.providers.checkUiComponentContext(t.context)),ll.config({}),cr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>cc.nu(c=>t.fetch(c)).map(c=>M.from(DO(Fs(EO(on("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,xf.CLOSE_ON_EXECUTE,at,s.providers),{movement:O_(t.columns,t.presets)})))),parts:{menu:eC(!1,1,t.presets)}}),$O=on("color-input-change"),u6=on("color-swatch-change"),d6=on("color-picker-cancel"),rV=(t,s,a,c)=>{const d=Ho.parts.field({factory:Ef,inputClasses:["tox-textfield"],data:c,onSetValue:D=>yh.run(D).get(ce),inputBehaviours:Et([vn.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),ga(()=>s.providers.checkUiComponentContext(t.context)),cr.config({}),yh.config({invalidClass:"tox-textbox-field-invalid",getRoot:D=>ii(D.element),notify:{onValid:D=>{const P=Jt.getValue(D);bn(D,$O,{color:P})}},validator:{validateOnLoad:!1,validate:D=>{const P=Jt.getValue(D);if(P.length===0)return cc.pure(Xn.value(!0));{const F=Ke.fromTag("span");It(F,"background-color",P);const G=us(F,"background-color").fold(()=>Xn.error("blah"),J=>Xn.value(P));return cc.pure(G)}}}})]),selectOnFocus:!1}),h=t.label.map(D=>bh(D,s.providers)),b=(D,P)=>{bn(D,u6,{value:P})},S=(D,P)=>{T.getOpt(D).each(F=>{P==="custom"?a.colorPicker(G=>{G.fold(()=>bo(F,d6),J=>{b(F,J),bI(t.storageKey,J)})},"#ffffff"):P==="remove"?b(F,""):b(F,P)})},T=Jo(FO({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Sa,Ca,fa],onLtr:()=>[Ca,Sa,fa]},components:[],fetch:xI(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:S,context:t.context},s));return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:Et([Kn("form-field-events",[ot($O,(D,P)=>{T.getOpt(D).each(F=>{It(F.element,"background-color",P.event.color)}),bn(D,Ol,{name:t.name})}),ot(u6,(D,P)=>{Ho.getField(D).each(F=>{Jt.setValue(F,P.event.value),Mo.getCurrent(D).each($n.focus)})}),ot(d6,(D,P)=>{Ho.getField(D).each(F=>{Mo.getCurrent(D).each($n.focus)})})])])})},aV=zc({schema:[rt("dom")],name:"label"}),kg=t=>zc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:fs([k0(tu(),(d,h,b)=>c(d,b),[s]),k0(Ir(),(d,h,b)=>c(d,b),[s]),k0(Hh(),(d,h,b)=>{b.mouseIsDown.get()&&c(d,b)},[s])])}))}),f6=kg("top-left"),iV=kg("top"),cV=kg("top-right"),m6=kg("right"),lV=kg("bottom-right"),h6=kg("bottom"),g6=kg("bottom-left"),p6=kg("left"),uV=Ii({name:"thumb",defaults:oe({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:fs([op(tu(),t,"spectrum"),op(Ro(),t,"spectrum"),op(zs(),t,"spectrum"),op(Ir(),t,"spectrum"),op(Hh(),t,"spectrum"),op(wd(),t,"spectrum")])})}),I_=t=>wm(t.event),dV=Ii({schema:[qo("mouseIsDown",()=>gn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,h)=>a.getValueFromEvent(h).map(b=>a.setValueFrom(d,t,b));return{behaviours:Et([Sn.config({mode:"special",onLeft:(d,h)=>a.onLeft(d,t,I_(h)),onRight:(d,h)=>a.onRight(d,t,I_(h)),onUp:(d,h)=>a.onUp(d,t,I_(h)),onDown:(d,h)=>a.onDown(d,t,I_(h))}),cr.config({}),$n.config({})]),events:fs([ot(tu(),c),ot(Ro(),c),ot(Ir(),c),ot(Hh(),(d,h)=>{t.mouseIsDown.get()&&c(d,h)})])}}});var fV=[aV,p6,m6,iV,h6,f6,cV,g6,lV,uV,dV];const SC=oe("slider.change.value"),HO=t=>t.type.indexOf("touch")!==-1,zO=t=>{const s=t.event.raw;if(HO(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?M.some(a.touches[0]).map(c=>Ds(c.clientX,c.clientY)):M.none()}else{const a=s;return a.clientX!==void 0?M.some(a).map(c=>Ds(c.clientX,c.clientY)):M.none()}},mV="top",b6="right",hV="bottom",gV="left",jb=t=>t.model.minX,qb=t=>t.model.minY,B_=t=>t.model.minX-1,L_=t=>t.model.minY-1,Gb=t=>t.model.maxX,a1=t=>t.model.maxY,xC=t=>t.model.maxX+1,F_=t=>t.model.maxY+1,v6=(t,s,a)=>s(t)-a(t),VO=t=>v6(t,Gb,jb),UO=t=>v6(t,a1,qb),y6=t=>VO(t)/2,w6=t=>UO(t)/2,Kb=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,WO=t=>t.snapToGrid,ZO=t=>t.snapStart,$_=t=>t.rounded,H_=(t,s)=>t[s+"-edge"]!==void 0,jO=t=>H_(t,gV),C6=t=>H_(t,b6),S6=t=>H_(t,mV),x6=t=>H_(t,hV),Ag=t=>t.model.value.get(),wh=(t,s)=>({x:t,y:s}),lc=(t,s)=>{bn(t,SC(),{value:s})},pV=(t,s)=>{lc(t,wh(B_(s),L_(s)))},EC=(t,s)=>{lc(t,L_(s))},bV=(t,s)=>{lc(t,wh(y6(s),L_(s)))},qO=(t,s)=>{lc(t,wh(xC(s),L_(s)))},vV=(t,s)=>{lc(t,xC(s))},yV=(t,s)=>{lc(t,wh(xC(s),w6(s)))},wV=(t,s)=>{lc(t,wh(xC(s),F_(s)))},E6=(t,s)=>{lc(t,F_(s))},CV=(t,s)=>{lc(t,wh(y6(s),F_(s)))},GO=(t,s)=>{lc(t,wh(B_(s),F_(s)))},KO=(t,s)=>{lc(t,B_(s))},YO=(t,s)=>{lc(t,wh(B_(s),w6(s)))},XO=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),Dl=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),_6=(t,s,a)=>Math.max(s,Math.min(a,t)),SV=(t,s,a,c,d)=>d.fold(()=>{const h=t-s,b=Math.round(h/c)*c;return _6(s+b,s-1,a+1)},h=>{const b=(t-h)%c,S=Math.round(b/c),T=Math.floor((t-h)/c),D=Math.floor((a-h)/c),P=Math.min(D,T+S),F=h+P*c;return Math.max(h,F)}),T6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,JO=t=>{const{min:s,max:a,range:c,value:d,step:h,snap:b,snapStart:S,rounded:T,hasMinEdge:D,hasMaxEdge:P,minBound:F,maxBound:G,screenRange:J}=t,re=D?s-1:s,le=P?a+1:a;if(d<F)return re;if(d>G)return le;{const De=T6(d,F,G),de=_6(De/J*c+s,re,le);return b&&de>=s&&de<=a?SV(de,s,a,h,S):T?Math.round(de):de}},k6=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:h,hasMaxEdge:b,maxBound:S,maxOffset:T,centerMinEdge:D,centerMaxEdge:P}=t;return d<s?h?0:D:d>a?b?S:P:(d-s)/c*T},QO="top",A6="right",O6="bottom",eD="left",xV="width",EV="height",km=t=>t.element.dom.getBoundingClientRect(),Of=(t,s)=>t[s],z_=t=>{const s=km(t);return Of(s,eD)},D6=t=>{const s=km(t);return Of(s,A6)},_C=t=>{const s=km(t);return Of(s,QO)},V_=t=>{const s=km(t);return Of(s,O6)},tD=t=>{const s=km(t);return Of(s,xV)},nD=t=>{const s=km(t);return Of(s,EV)},oD=(t,s,a)=>(t+s)/2-a,sD=(t,s)=>{const a=km(t),c=km(s),d=Of(a,eD),h=Of(a,A6),b=Of(c,eD);return oD(d,h,b)},U_=(t,s)=>{const a=km(t),c=km(s),d=Of(a,QO),h=Of(a,O6),b=Of(c,QO);return oD(d,h,b)},W_=(t,s)=>{bn(t,SC(),{value:s})},TC=(t,s,a)=>{const c={min:jb(s),max:Gb(s),range:VO(s),value:a,step:Kb(s),snap:WO(s),snapStart:ZO(s),rounded:$_(s),hasMinEdge:jO(s),hasMaxEdge:C6(s),minBound:z_(t),maxBound:D6(t),screenRange:tD(t)};return JO(c)},xy=(t,s,a)=>{const c=TC(t,s,a);return W_(t,c),c},R6=(t,s)=>{const a=jb(s);W_(t,a)},M6=(t,s)=>{const a=Gb(s);W_(t,a)},N6=(t,s,a,c)=>{const h=(t>0?Dl:XO)(Ag(a),jb(a),Gb(a),Kb(a,c));return W_(s,h),M.some(h)},P6=t=>(s,a,c)=>N6(t,s,a,c).map(it),_V=t=>zO(t).map(a=>a.left),Z_=(t,s,a,c,d)=>{const b=tD(t),S=c.bind(P=>M.some(sD(P,t))).getOr(0),T=d.bind(P=>M.some(sD(P,t))).getOr(b),D={min:jb(s),max:Gb(s),range:VO(s),value:a,hasMinEdge:jO(s),hasMaxEdge:C6(s),minBound:z_(t),minOffset:0,maxBound:D6(t),maxOffset:b,centerMinEdge:S,centerMaxEdge:T};return k6(D)},rD=(t,s,a,c,d,h)=>{const b=Z_(s,h,a,c,d);return z_(s)-z_(t)+b},TV=(t,s,a,c)=>{const d=Ag(a),h=rD(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),b=oo(s.element)/2;It(s.element,"left",h-b+"px")},I6=P6(-1),B6=P6(1),aD=M.none,L6=M.none,ul={"top-left":M.none(),top:M.none(),"top-right":M.none(),right:M.some(vV),"bottom-right":M.none(),bottom:M.none(),"bottom-left":M.none(),left:M.some(KO)};var F6=Object.freeze({__proto__:null,setValueFrom:xy,setToMin:R6,setToMax:M6,findValueOfOffset:TC,getValueFromEvent:_V,findPositionOfValue:rD,setPositionFromValue:TV,onLeft:I6,onRight:B6,onUp:aD,onDown:L6,edgeActions:ul});const j_=(t,s)=>{bn(t,SC(),{value:s})},iD=(t,s,a)=>{const c={min:qb(s),max:a1(s),range:UO(s),value:a,step:Kb(s),snap:WO(s),snapStart:ZO(s),rounded:$_(s),hasMinEdge:S6(s),hasMaxEdge:x6(s),minBound:_C(t),maxBound:V_(t),screenRange:nD(t)};return JO(c)},$6=(t,s,a)=>{const c=iD(t,s,a);return j_(t,c),c},kV=(t,s)=>{const a=qb(s);j_(t,a)},AV=(t,s)=>{const a=a1(s);j_(t,a)},OV=(t,s,a,c)=>{const h=(t>0?Dl:XO)(Ag(a),qb(a),a1(a),Kb(a,c));return j_(s,h),M.some(h)},cD=t=>(s,a,c)=>OV(t,s,a,c).map(it),Ch=t=>zO(t).map(a=>a.top),lD=(t,s,a,c,d)=>{const b=nD(t),S=c.bind(P=>M.some(U_(P,t))).getOr(0),T=d.bind(P=>M.some(U_(P,t))).getOr(b),D={min:qb(s),max:a1(s),range:UO(s),value:a,hasMinEdge:S6(s),hasMaxEdge:x6(s),minBound:_C(t),minOffset:0,maxBound:V_(t),maxOffset:b,centerMinEdge:S,centerMaxEdge:T};return k6(D)},q_=(t,s,a,c,d,h)=>{const b=lD(s,h,a,c,d);return _C(s)-_C(t)+b},G_=(t,s,a,c)=>{const d=Ag(a),h=q_(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),b=xr(s.element)/2;It(s.element,"top",h-b+"px")},uD=M.none,DV=M.none,RV=cD(-1),MV=cD(1),NV={"top-left":M.none(),top:M.some(EC),"top-right":M.none(),right:M.none(),"bottom-right":M.none(),bottom:M.some(E6),"bottom-left":M.none(),left:M.none()};var PV=Object.freeze({__proto__:null,setValueFrom:$6,setToMin:kV,setToMax:AV,findValueOfOffset:iD,getValueFromEvent:Ch,findPositionOfValue:q_,setPositionFromValue:G_,onLeft:uD,onRight:DV,onUp:RV,onDown:MV,edgeActions:NV});const K_=(t,s)=>{bn(t,SC(),{value:s})},Y_=(t,s)=>({x:t,y:s}),H6=(t,s,a)=>{const c=TC(t,s,a.left),d=iD(t,s,a.top),h=Y_(c,d);return K_(t,h),h},IV=(t,s,a,c,d)=>{const h=t>0?Dl:XO,b=s?Ag(c).x:h(Ag(c).x,jb(c),Gb(c),Kb(c,d)),S=s?h(Ag(c).y,qb(c),a1(c),Kb(c,d)):Ag(c).y;return K_(a,Y_(b,S)),M.some(b)},zd=(t,s)=>(a,c,d)=>IV(t,s,a,c,d).map(it),X_=(t,s)=>{const a=jb(s),c=qb(s);K_(t,Y_(a,c))},BV=(t,s)=>{const a=Gb(s),c=a1(s);K_(t,Y_(a,c))},LV=t=>zO(t),z6=(t,s,a,c)=>{const d=Ag(a),h=rD(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),b=q_(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),S=oo(s.element)/2,T=xr(s.element)/2;It(s.element,"left",h-S+"px"),It(s.element,"top",b-T+"px")},V6=zd(-1,!1),dD=zd(1,!1),J_=zd(-1,!0),kC=zd(1,!0),AC={"top-left":M.some(pV),top:M.some(bV),"top-right":M.some(qO),right:M.some(yV),"bottom-right":M.some(wV),bottom:M.some(CV),"bottom-left":M.some(GO),left:M.some(YO)};var U6=Object.freeze({__proto__:null,setValueFrom:H6,setToMin:X_,setToMax:BV,getValueFromEvent:LV,setPositionFromValue:z6,onLeft:V6,onRight:dD,onUp:J_,onDown:kC,edgeActions:AC});const W6=[Pe("stepSize",1),Pe("speedMultiplier",10),Pe("onChange",ce),Pe("onChoose",ce),Pe("onInit",ce),Pe("onDragStart",ce),Pe("onDragEnd",ce),Pe("snapToGrid",!1),Pe("rounded",!0),Wo("snapStart"),Uo("model",ra("mode",{x:[Pe("minX",0),Pe("maxX",100),qo("value",t=>gn(t.mode.minX)),rt("getInitialValue"),nr("manager",F6)],y:[Pe("minY",0),Pe("maxY",100),qo("value",t=>gn(t.mode.minY)),rt("getInitialValue"),nr("manager",PV)],xy:[Pe("minX",0),Pe("maxX",100),Pe("minY",0),Pe("maxY",100),qo("value",t=>gn({x:t.mode.minX,y:t.mode.minY})),rt("getInitialValue"),nr("manager",U6)]})),Xa("sliderBehaviours",[Sn,Jt]),qo("mouseIsDown",()=>gn(!1))],Vd=ac({name:"Slider",configFields:W6,partFields:fV,factory:(t,s,a,c)=>{const d=We=>rl(We,t,"thumb"),h=We=>rl(We,t,"spectrum"),b=We=>Rs(We,t,"left-edge"),S=We=>Rs(We,t,"right-edge"),T=We=>Rs(We,t,"top-edge"),D=We=>Rs(We,t,"bottom-edge"),P=t.model,F=P.manager,G=(We,Mt)=>{F.setPositionFromValue(We,Mt,t,{getLeftEdge:b,getRightEdge:S,getTopEdge:T,getBottomEdge:D,getSpectrum:h})},J=(We,Mt)=>{P.value.set(Mt);const tn=d(We);G(We,tn)},re=(We,Mt)=>{J(We,Mt);const tn=d(We);return t.onChange(We,tn,Mt),M.some(!0)},le=We=>{F.setToMin(We,t)},De=We=>{F.setToMax(We,t)},de=We=>{const Mt=()=>{Rs(We,t,"thumb").each(nt=>{const an=P.value.get();t.onChoose(We,nt,an)})},tn=t.mouseIsDown.get();t.mouseIsDown.set(!1),tn&&Mt()},Te=(We,Mt)=>{Mt.stop(),t.mouseIsDown.set(!0),t.onDragStart(We,d(We))},Oe=(We,Mt)=>{Mt.stop(),t.onDragEnd(We,d(We)),de(We)},ze=We=>{Rs(We,t,"spectrum").map(Sn.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.sliderBehaviours,[Sn.config({mode:"special",focusIn:ze}),Jt.config({store:{mode:"manual",getValue:We=>P.value.get(),setValue:J}}),ol.config({channels:{[Pv()]:{onReceive:de}}})]),events:fs([ot(SC(),(We,Mt)=>{re(We,Mt.event.value)}),tr((We,Mt)=>{const tn=P.getInitialValue();P.value.set(tn);const nt=d(We);G(We,nt);const an=h(We);t.onInit(We,nt,an,P.value.get())}),ot(tu(),Te),ot(zs(),Oe),ot(Ir(),(We,Mt)=>{ze(We),Te(We,Mt)}),ot(wd(),Oe)]),apis:{resetToMin:le,resetToMax:De,setValue:J,refresh:G},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),fD=on("rgb-hex-update"),Z6=on("slider-update"),j6=on("palette-update"),$V=(t,s)=>{const a=Vd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Vd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Vd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:oe(0)},components:[a,c],sliderBehaviours:Et([$n.config({})]),onChange:(d,h,b)=>{$t(d.element,"aria-valuenow",Math.floor(360-b*3.6)),bn(d,Z6,{value:b})}})},q6="form",G6=[Xa("formBehaviours",[Jt])],mD=t=>"<alloy.field."+t+">",HV=t=>{const s=(()=>{const h=[];return{field:(S,T)=>(h.push(S),Cw(q6,mD(S),T)),record:oe(h)}})(),a=t(s),c=s.record(),d=$e(c,h=>Ii({name:h,pname:mD(h)}));return Tb(q6,G6,d,zV,a)},K6=(t,s)=>t.fold(()=>Xn.error(s),Xn.value),zV=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.formBehaviours,[Jt.config({store:{mode:"manual",getValue:a=>{const c=_w(a,t);return Ko(c,(d,h)=>d().bind(b=>{const S=Mo.getCurrent(b);return K6(S,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+rm(b.element)))}).map(Jt.getValue))},setValue:(a,c)=>{Ts(c,(d,h)=>{Rs(a,t,h).each(b=>{Mo.getCurrent(b).each(S=>{Jt.setValue(S,d)})})})}}})]),apis:{getField:(a,c)=>Rs(a,t,c).bind(Mo.getCurrent)}}),Yb={getField:Y0((t,s,a)=>t.getField(s,a)),sketch:HV},Ey=on("valid-input"),Y6=on("invalid-input"),hD=on("validating-input"),gD="colorcustom.rgb.",VV={isEnabled:it,setEnabled:ce,immediatelyShow:ce,immediatelyHide:ce},UV=(t,s,a,c,d,h)=>{const b=(le,De)=>{const de=De.get();le!==de.isEnabled()&&(de.setEnabled(le),le?de.immediatelyShow():de.immediatelyHide())},S=(le,De,de)=>yh.config({invalidClass:s("invalid"),notify:{onValidate:Te=>{bn(Te,hD,{type:le})},onValid:Te=>{b(!1,de),bn(Te,Ey,{type:le,value:Jt.getValue(Te)})},onInvalid:Te=>{b(!0,de),bn(Te,Y6,{type:le,value:Jt.getValue(Te)})}},validator:{validate:Te=>{const Oe=Jt.getValue(Te),ze=De(Oe)?Xn.value(!0):Xn.error(t("aria.input.invalid"));return cc.pure(ze)},validateOnLoad:!1}}),T=(le,De,de,Te,Oe)=>{const ze=gn(VV),We=t(gD+"range"),Mt=Ho.parts.label({dom:{tag:"label"},components:[or(de)]}),tn=Ho.parts.field({data:Oe,factory:Ef,inputAttributes:{type:"text","aria-label":Te,...De==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Et([S(De,le,ze),cr.config({}),Ar.config({...d({tooltipText:"",onSetup:Go=>{ze.set({isEnabled:()=>Ar.isEnabled(Go),setEnabled:hn=>Ar.setEnabled(Go,hn),immediatelyShow:()=>Ar.immediateOpenClose(Go,!0),immediatelyHide:()=>Ar.immediateOpenClose(Go,!1)}),Ar.setEnabled(Go,!1)},onShow:(Go,hn)=>{Ar.setComponents(Go,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[or(t(De==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Go=>{yh.isInvalid(Go)&&yh.run(Go).get(ce)}}),nt=on("aria-invalid"),an=Jo(h("invalid",M.some(nt),"warning")),Vt=Jo({dom:{tag:"div",classes:[s("invalid-icon")]},components:[an.asSpec()]}),dn=[Mt,tn,Vt.asSpec()],Co=De!=="hex"?[Ho.parts["aria-descriptor"]({text:We})]:[],Ys=dn.concat(Co);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Ys}},D=(le,De)=>{const de=cC(De);return Yb.getField(le,"hex").each(Te=>{$n.isFocused(Te)||Jt.setValue(le,{hex:de.value})}),de},P=(le,De)=>{const de=De.red,Te=De.green,Oe=De.blue;Jt.setValue(le,{red:de,green:Te,blue:Oe})},F=Jo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),G=(le,De)=>{F.getOpt(le).each(de=>{It(de.element,"background-color","#"+De.value)})};return al({factory:()=>{const le={red:gn(M.some(255)),green:gn(M.some(255)),blue:gn(M.some(255)),hex:gn(M.some("ffffff"))},De=(hn,vt)=>{const Ut=lC(vt);P(hn,Ut),ze(Ut)},de=hn=>le[hn].get(),Te=(hn,vt)=>{le[hn].set(vt)},Oe=()=>de("red").bind(hn=>de("green").bind(vt=>de("blue").map(Ut=>Ub(hn,vt,Ut,1)))),ze=hn=>{const vt=hn.red,Ut=hn.green,Un=hn.blue;Te("red",M.some(vt)),Te("green",M.some(Ut)),Te("blue",M.some(Un))},We=(hn,vt)=>{const Ut=vt.event;Ut.type!=="hex"?Te(Ut.type,M.none()):c(hn)},Mt=(hn,vt)=>{a(hn);const Ut=iO(vt);Te("hex",M.some(Ut.value));const Un=lC(Ut);P(hn,Un),ze(Un),bn(hn,fD,{hex:Ut}),G(hn,Ut)},tn=(hn,vt,Ut)=>{const Un=parseInt(Ut,10);Te(vt,M.some(Un)),Oe().each(ao=>{const Tn=D(hn,ao);bn(hn,fD,{hex:Tn}),G(hn,Tn)})},nt=hn=>hn.type==="hex",an=(hn,vt)=>{const Ut=vt.event;nt(Ut)?Mt(hn,Ut.value):tn(hn,Ut.type,Ut.value)},Vt=hn=>({label:t(gD+hn+".label"),description:t(gD+hn+".description")}),dn=Vt("red"),Co=Vt("green"),Ys=Vt("blue"),Go=Vt("hex");return Fs(Yb.sketch(hn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[hn.field("red",Ho.sketch(T(uO,"red",dn.label,dn.description,255))),hn.field("green",Ho.sketch(T(uO,"green",Co.label,Co.description,255))),hn.field("blue",Ho.sketch(T(uO,"blue",Ys.label,Ys.description,255))),hn.field("hex",Ho.sketch(T(oI,"hex",Go.label,Go.description,"ffffff"))),F.asSpec()],formBehaviours:Et([yh.config({invalidClass:s("form-invalid")}),Kn("rgb-form-events",[ot(Ey,an),ot(Y6,We),ot(hD,We)])])})),{apis:{updateHex:(hn,vt)=>{Jt.setValue(hn,{hex:vt.value}),De(hn,vt),G(hn,vt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(le,De,de)=>{le.updateHex(De,de)}},extraApis:{}})},WV=(t,s)=>{const a=Vd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=Vd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(D,P)=>{const{width:F,height:G}=D,J=D.getContext("2d");if(J===null)return;J.fillStyle=P,J.fillRect(0,0,F,G);const re=J.createLinearGradient(0,0,F,0);re.addColorStop(0,"rgba(255,255,255,1)"),re.addColorStop(1,"rgba(255,255,255,0)"),J.fillStyle=re,J.fillRect(0,0,F,G);const le=J.createLinearGradient(0,0,0,G);le.addColorStop(0,"rgba(0,0,0,0)"),le.addColorStop(1,"rgba(0,0,0,1)"),J.fillStyle=le,J.fillRect(0,0,F,G)},h=(D,P)=>{const F=D.components()[0].element.dom,G=mC(P,100,100),J=cI(G);d(F,lI(J))},b=(D,P)=>{const F=gO(lC(P));Vd.setValue(D,{x:F.saturation,y:100-F.value}),$t(D.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",F.saturation,F.value]))};return al({factory:D=>{const P=oe({x:0,y:0}),F=(re,le,De)=>{ln(De)||$t(re.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(De.x),Math.floor(100-De.y)])),bn(re,j6,{value:De})},G=(re,le,De,de)=>{d(De.element.dom,lI(uI))},J=Et([Mo.config({find:M.some}),$n.config({})]);return Vd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:P},rounded:!1,components:[a,c],onChange:F,onInit:G,sliderBehaviours:J})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(D,P,F)=>{h(P,F)},setThumb:(D,P,F)=>{b(P,F)}},extraApis:{}})},X6=(t,s,a,c)=>{const d=b=>{const S=UV(t,s,b.onValidHex,b.onInvalidHex,a,c),T=WV(t,s),D=nt=>(100-nt)/100*360,P=nt=>100-nt/360*100,F={paletteRgba:gn(uI),paletteHue:gn(0)},G=Jo($V(t,s)),J=Jo(T.sketch({})),re=Jo(S.sketch({})),le=(nt,an,Vt)=>{J.getOpt(nt).each(dn=>{T.setHue(dn,Vt)})},De=(nt,an)=>{re.getOpt(nt).each(Vt=>{S.updateHex(Vt,an)})},de=(nt,an,Vt)=>{G.getOpt(nt).each(dn=>{Vd.setValue(dn,P(Vt))})},Te=(nt,an)=>{J.getOpt(nt).each(Vt=>{T.setThumb(Vt,an)})},Oe=(nt,an)=>{const Vt=lC(nt);F.paletteRgba.set(Vt),F.paletteHue.set(an)},ze=(nt,an,Vt,dn)=>{Oe(an,Vt),pt(dn,Co=>{Co(nt,an,Vt)})},We=()=>{const nt=[De];return(an,Vt)=>{const dn=Vt.event.value,Co=F.paletteHue.get(),Ys=mC(Co,dn.x,100-dn.y),Go=vI(Ys);ze(an,Go,Co,nt)}},Mt=()=>{const nt=[le,De];return(an,Vt)=>{const dn=D(Vt.event.value),Co=F.paletteRgba.get(),Ys=gO(Co),Go=mC(dn,Ys.saturation,Ys.value),hn=vI(Go);ze(an,hn,dn,nt)}},tn=()=>{const nt=[le,de,Te];return(an,Vt)=>{const dn=Vt.event.hex,Co=Y9(dn);ze(an,dn,Co.hue,nt)}};return{uid:b.uid,dom:b.dom,components:[J.asSpec(),G.asSpec(),re.asSpec()],behaviours:Et([Kn("colour-picker-events",[ot(fD,tn()),ot(j6,We()),ot(Z6,Mt())]),Mo.config({find:nt=>re.getOpt(nt)}),Sn.config({mode:"acyclic"})])}};return al({name:"ColourPicker",configFields:[rt("dom"),Pe("onValidHex",ce),Pe("onInvalidHex",ce)],factory:d})},uc={self:()=>Mo.config({find:M.some}),memento:t=>Mo.config({find:t.getOpt}),childAt:t=>Mo.config({find:s=>Yi(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},pD=Bn([Pe("preprocess",Xt),Pe("postprocess",Xt)]),Q6=(t,s)=>{const a=zi("RepresentingConfigs.memento processors",pD,s);return Jt.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),h=Jt.getValue(d);return a.postprocess(h)},setValue:(c,d)=>{const h=a.preprocess(d),b=t.get(c);Jt.setValue(b,h)}}})},i1=(t,s,a)=>Jt.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),Q_=(t,s,a)=>i1(t,c=>s(c.element),(c,d)=>a(c.element,d)),eB=t=>Q_(t,Ri,Bu),Xb=t=>Jt.config({store:{mode:"memory",initialValue:t}}),tB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},nB=t=>s=>j(s)?t.translate(tB[s]):t.translate(s),jV=(t,s,a)=>{const c=D=>"tox-"+D,d=(D,P,F=D,G=D)=>Gu(F,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+D],attributes:{title:s.translate(G),"aria-live":"polite",...P.fold(()=>({}),J=>({id:J}))}},s.icons),h=X6(nB(s),c,s.tooltips.getConfig,d),b=D=>{bn(D,vh,{name:"hex-valid",value:!0})},S=D=>{bn(D,vh,{name:"hex-valid",value:!1})},T=Jo(h.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:b,onInvalidHex:S}));return{dom:{tag:"div"},components:[T.asSpec()],behaviours:Et([i1(a,D=>{const P=T.get(D);return Mo.getCurrent(P).bind(J=>Jt.getValue(J).hex).map(J=>"#"+ml(J,"#")).getOr("")},(D,P)=>{const F=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,G=M.from(F.exec(P)).bind(le=>Vo(le,1)),J=T.get(D);Mo.getCurrent(J).fold(()=>{console.log("Can not find form")},le=>{Jt.setValue(le,{hex:G.getOr("")}),Yb.getField(le,"hex").each(De=>{bo(De,nu())})})}),uc.self()])}};var qV=tinymce.util.Tools.resolve("tinymce.Resource");const oB=t=>go(t,"init"),GV=t=>{const s=Xo(),a=Jo({dom:{tag:t.tag}}),c=Xo(),d=!oB(t)&&t.onFocus.isSome()?[$n.config({onFocus:h=>{t.onFocus.each(b=>{b(h.element.dom)})}}),cr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Et([Kn("custom-editor-events",[tr(h=>{a.getOpt(h).each(b=>{(oB(t)?t.init(b.element.dom):qV.load(t.scriptId,t.scriptUrl).then(S=>S(b.element.dom,t.settings))).then(S=>{c.on(T=>{S.setValue(T)}),c.clear(),s.set(S)})})})]),i1(M.none(),()=>s.get().fold(()=>c.get().getOr(""),h=>h.getValue()),(h,b)=>{s.get().fold(()=>c.set(b),S=>S.setValue(b))}),uc.self()].concat(d)),components:[a.asSpec()]}};var Og=tinymce.util.Tools.resolve("tinymce.util.Tools");const eT=on("browse.files.event"),sB=(t,s)=>{const a=Og.explode(s.getOption("images_file_types")),c=d=>Mn(a,h=>Ea(d.name.toLowerCase(),`.${h.toLowerCase()}`));return no(_s(t),c)},KV=(t,s,a)=>{const c=(G,J)=>{J.stop()},d=G=>(J,re)=>{pt(G,le=>{le(J,re)})},h=(G,J)=>{var re;if(!vn.isDisabled(G)){const le=J.event.raw;bn(G,eT,{files:(re=le.dataTransfer)===null||re===void 0?void 0:re.files})}},b=(G,J)=>{const re=J.event.raw.target;bn(G,eT,{files:re.files})},S=(G,J)=>{J&&(Jt.setValue(G,sB(J,s)),bn(G,Ol,{name:t.name}))},T=Jo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Et([Kn("input-file-events",[Wh(zh()),Wh(N1())])])}),D=t.label.map(G=>bh(G,s)),P=Ho.parts.field({factory:Na,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[or(s.translate("Browse for an image")),T.asSpec()],action:G=>{T.get(G).element.dom.click()},buttonBehaviours:Et([uc.self(),Xb(a.getOr([])),cr.config({}),$d.button(()=>s.checkUiComponentContext(t.context).shouldDisable),ga(()=>s.checkUiComponentContext(t.context))])}),F={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),ga(()=>s.checkUiComponentContext(t.context)),mo.config({toggleClass:"dragenter",toggleOnExecute:!1}),Kn("dropzone-events",[ot("dragenter",d([c,mo.toggle])),ot("dragleave",d([c,mo.toggle])),ot("dragover",c),ot("drop",d([c,h])),ot(tm(),b)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[or(s.translate("Drop an image here"))]},P]}]};return yC(D,F,["tox-form__group--stretched"],[Kn("handle-files",[ot(eT,(G,J)=>{Ho.getField(G).each(re=>{S(re,J.event.files)})})])])},YV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:$e(t.items,s.interpreter)}),XV=(t,s)=>{let a=null,c=null;return{cancel:()=>{Xe(a)||(clearTimeout(a),a=null,c=null)},throttle:(...b)=>{c=b,Xe(a)&&(a=setTimeout(()=>{const S=c;a=null,c=null,t.apply(null,S)},s))}}},tT=(t,s)=>{let a=null;return{cancel:()=>{Xe(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{Xe(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},bD=(t,s)=>{let a=null;const c=()=>{Xe(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...h)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},vD=on("alloy-fake-before-tabstop"),nT=on("alloy-fake-after-tabstop"),yD=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Et([$n.config({ignore:!0}),cr.config({})])}),rB=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[yD([vD]),s,yD([nT])],behaviours:Et([uc.childAt(1)])}),aB=(t,s)=>{bn(t,Vi(),{raw:{which:9,shiftKey:s}})},wD=(t,s)=>{const a=s.element;xc(a,vD)?aB(t,!0):xc(a,nT)&&aB(t,!1)},OC=t=>_m(t,["."+vD,"."+nT].join(","),at),DC=on("update-dialog"),iB=on("update-title"),cB=on("update-body"),lB=on("update-footer"),CD=on("body-send-message"),RC=on("dialog-focus-shifted"),SD=dr().browser,MC=SD.isSafari(),JV=SD.isFirefox(),uB=MC||JV,dB=SD.isChromium(),QV=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,xD=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),eU=(t,s)=>{const a=t.body;return M.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!dB&&!MC||Ct(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},fB=(t,s,a)=>{const c=t.dom;M.from(c.contentDocument).fold(a,d=>{let h=0;const b=eU(d,s).map(T=>(h=T.scrollTop,T)).forall(QV),S=()=>{const T=c.contentWindow;Ct(T)&&(b?xD(T,"bottom"):!b&&uB&&h!==0&&xD(T,h))};MC&&c.addEventListener("load",S,{once:!0}),d.open(),d.write(s),d.close(),MC||S()})},tU=En(uB,MC?500:200).map(t=>XV(fB,t)),nU=(t,s)=>{const a=gn(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const h=c.element,b=()=>$t(h,"srcdoc",d);s?tU.fold(oe(fB),S=>S.throttle)(h,d,b):b()}a.set(d)}}},oU=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],h=t.border?["tox-navobj-bordered"]:[],b={...t.label.map(F=>({title:F})).getOr({}),...a.map(F=>({srcdoc:F})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},S=nU(a,t.streamContent),T=t.label.map(F=>bh(F,s)),D=F=>rB(M.from(h),{uid:F.uid,dom:{tag:"iframe",attributes:b,classes:[c,...d]},behaviours:Et([cr.config({}),$n.config({}),i1(a,S.getValue,S.setValue),ol.config({channels:{[RC]:{onReceive:(G,J)=>{J.newFocus.each(re=>{ii(G.element).each(le=>{(yo(G.element,re)?Lr:mr)(le,"tox-navobj-bordered-focus")})})}}}})])}),P=Ho.parts.field({factory:{sketch:D}});return yC(T,P,["tox-form__group--stretched"],[])},sU=t=>new Promise((s,a)=>{const c=()=>{h(),s(t)},d=[oc(t,"load",c),oc(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>pt(d,b=>b.unbind());t.dom.complete&&c()}),rU=(t,s,a,c,d)=>{const h=a*d,b=c*d,S=Math.max(0,t/2-h/2),T=Math.max(0,s/2-b/2);return{left:S.toString()+"px",top:T.toString()+"px",width:h.toString()+"px",height:b.toString()+"px"}},aU=(t,s,a)=>{const c=oo(t),d=xr(t);return Math.min(c/s,d/a,1)},ED=(t,s)=>{const a=gn(s.getOr({url:""})),c=Jo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=Jo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),h=(T,D)=>{const P={url:D.url};D.zoom.each(G=>P.zoom=G),D.cachedWidth.each(G=>P.cachedWidth=G),D.cachedHeight.each(G=>P.cachedHeight=G),a.set(P);const F=()=>{const{cachedWidth:G,cachedHeight:J,zoom:re}=P;if(!Zt(G)&&!Zt(J)){if(Zt(re)){const De=aU(T.element,G,J);P.zoom=De}const le=rU(oo(T.element),xr(T.element),G,J,P.zoom);d.getOpt(T).each(De=>{$o(De.element,le)})}};c.getOpt(T).each(G=>{const J=G.element;D.url!==Vn(J,"src")&&($t(J,"src",D.url),mr(T.element,"tox-imagepreview__loaded")),F(),sU(J).then(re=>{T.getSystem().isConnected()&&(Lr(T.element,"tox-imagepreview__loaded"),P.cachedWidth=re.dom.naturalWidth,P.cachedHeight=re.dom.naturalHeight,F())})})},b={};t.height.each(T=>b.height=T);const S=s.map(T=>({url:T.url,zoom:M.from(T.zoom),cachedWidth:M.from(T.cachedWidth),cachedHeight:M.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:b,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Et([uc.self(),i1(S,()=>a.get(),h)])}},iU=(t,s,a)=>{const c="tox-label",d=t.align==="center"?[`${c}--center`]:[],h=t.align==="end"?[`${c}--end`]:[],b=Jo({dom:{tag:"label",classes:[c,...d,...h]},components:[or(s.providers.translate(t.label))]}),S=$e(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[b.asSpec(),...S],behaviours:Et([uc.self(),Wn.config({}),eB(M.none()),Sn.config({mode:"acyclic"}),Kn("label",[tr(T=>{t.for.each(D=>{a(D).each(P=>{b.getOpt(T).each(F=>{var G;const J=(G=Vn(P.element,"id"))!==null&&G!==void 0?G:on("form-field");$t(P.element,"id",J),$t(F.element,"for",J)})})})})])])}},mB=on("toolbar.button.execute"),cU=t=>rf((s,a)=>{x_(t,s)(c=>{bn(s,mB,{buttonApi:c}),t.onAction(c)})}),Df=on("common-button-display-events"),oT={[Di()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Qi()]:["toolbar-button-events",Df],[Lc()]:["toolbar-button-events","dropdown-events","tooltipping"],[Ir()]:["focusing","alloy.base.behaviour",Df]},_D=t=>It(t.element,"width",ut(t.element,"width")),hB=(t,s,a)=>Gu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),NC=(t,s)=>hB(t,s,[]),c1=(t,s)=>hB(t,s,[Wn.config({})]),sT=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[or(a.translate(t))],behaviours:Et([Wn.config({})])}),Xu=on("update-menu-text"),Jb=on("update-menu-icon"),TD=(t,s,a,c)=>{const d=gn(ce),h=t.text.map(le=>Jo(sT(le,s,a.providers))),b=t.icon.map(le=>Jo(c1(le,a.providers.icons))),S=(le,De)=>{const de=Jt.getValue(le);return $n.focus(de),bn(de,"keydown",{raw:De.event.raw}),Yu.close(de),M.some(!0)},T=t.role.fold(()=>({}),le=>({role:le})),D=M.from(t.listRole).map(le=>({listRole:le})).getOr({}),P=t.ariaLabel.fold(()=>({}),le=>({"aria-label":a.providers.translate(le)})),F=Gu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),G=on("common-button-display-events"),J="dropdown-events";return Jo(Yu.sketch({...t.uid?{uid:t.uid}:{},...T,...D,dom:{tag:"button",classes:[s,`${s}--select`].concat($e(t.classes,le=>`${s}--${le}`)),attributes:{...P,...Ct(c)?{"data-mce-name":c}:{}}},components:my([b.map(le=>le.asSpec()),h.map(le=>le.asSpec()),M.some(F)]),matchWidth:!0,useMinWidth:!0,onOpen:(le,De,de)=>{t.searchable&&Lz(de)},dropdownBehaviours:Et([...t.dropdownBehaviours,$d.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),ga(()=>a.providers.checkUiComponentContext(t.context)),ll.config({}),Wn.config({}),...t.tooltip.map(le=>Ar.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(le)}))).toArray(),Kn(J,[kf(t,d),Bi(t,d)]),Kn(G,[tr((le,De)=>{t.listRole!=="listbox"&&_D(le)})]),Kn("update-dropdown-width-variable",[ot(nm(),(le,De)=>Yu.close(le))]),Kn("menubutton-update-display-text",[ot(Xu,(le,De)=>{h.bind(de=>de.getOpt(le)).each(de=>{Wn.set(de,[or(a.providers.translate(De.event.text))])})}),ot(Jb,(le,De)=>{b.bind(de=>de.getOpt(le)).each(de=>{Wn.set(de,[c1(De.event.icon,a.providers.icons)])})})])]),eventOrder:Fs(oT,{[Ir()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Qi()]:["toolbar-button-events",Ar.name(),J,G]}),sandboxBehaviours:Et([Sn.config({mode:"special",onLeft:S,onRight:S}),Kn("dropdown-sandbox-events",[ot(NA,(le,De)=>{R_(le),De.stop()}),ot(wP,(le,De)=>{yy(le,De),De.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...eC(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:ZI,onCollapseMenu:(le,De,de)=>{mt.getHighlighted(de).each(Te=>{ZI(le,de,Te)})},onDehighlightItem:Bz}}},getAnchorOverrides:()=>({maxHeightFunction:(le,De)=>{gv()(le,De-10)}}),fetch:le=>cc.nu(en(t.fetch,le))})).asSpec()},gB=t=>j(t),kD=t=>t.type==="separator",lU=t=>go(t,"getSubmenuItems"),pB={type:"separator"},bB=(t,s)=>{const a=zo(t,(c,d)=>gB(d)?d===""?c:d==="|"?c.length>0&&!kD(c[c.length-1])?c.concat([pB]):c:go(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&kD(a[a.length-1])&&a.pop(),a},uU=(t,s)=>{const a=t.getSubmenuItems(),c=AD(a,s),d=Fs(c.menus,{[t.value]:c.items}),h=Fs(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},vB=t=>{const s=Tt(t,"value").getOrThunk(()=>on("generated-menu-item"));return Fs({value:s},t)},AD=(t,s)=>{const a=bB(j(t)?t.split(" "):t,s);return _o(a,(c,d)=>{if(lU(d)){const h=vB(d),b=uU(h,s);return{menus:Fs(c.menus,b.menus),items:[b.item,...c.items],expansions:Fs(c.expansions,b.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},yB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),dU=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),_y=(t,s,a,c)=>{const d=on("primary-menu"),h=AD(t,a.shared.providers.menuItems());if(h.items.length===0)return M.none();const b=yB(c),S=jI(d,h.items,s,a,c.isHorizontalMenu,b),T=dU(c),D=Ko(h.menus,(F,G)=>jI(G,F,s,a,!1,T)),P=Fs(D,to(d,S));return M.from(Kp.tieredData(d,P,h.expansions))},rT=t=>!go(t,"items"),OD="data-value",wB=(t,s,a,c,d)=>$e(a,h=>rT(h)?{type:"togglemenuitem",...d?{}:{role:"option"},text:h.text,value:h.value,active:h.value===c,onAction:()=>{Jt.setValue(t,h.value),bn(t,Ol,{name:s}),$n.focus(t)}}:{type:"nestedmenuitem",text:h.text,getSubmenuItems:()=>wB(t,s,h.items,c,d)}),aT=(t,s)=>Ss(t,a=>rT(a)?En(a.value===s,a):aT(a.items,s)),fU=(t,s,a)=>{const c=Mn(t.items,D=>!rT(D)),d=s.shared.providers,h=a.bind(D=>aT(t.items,D)).orThunk(()=>Ws(t.items).filter(rT)),b=t.label.map(D=>bh(D,d)),S=Ho.parts.field({dom:{},factory:{sketch:D=>TD({context:t.context,uid:D.uid,text:h.map(P=>P.text),icon:M.none(),tooltip:M.none(),role:En(!c,"combobox"),...c?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(P,F)=>{const G=wB(P,t.name,t.items,Jt.getValue(P),c);F(_y(G,xf.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:M.none()}))},onSetup:oe(ce),getApi:oe({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[cr.config({}),i1(h.map(P=>P.value),P=>Vn(P.element,OD),(P,F)=>{aT(t.items,F).each(G=>{$t(P.element,OD,G.value),bn(P,Xu,{text:G.text})})})]},"tox-listbox",s.shared)}}),T={dom:{tag:"div",classes:["tox-listboxfield"]},components:[S]};return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([b.toArray(),[T]]),fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:D=>{Ho.getField(D).each(vn.disable)},onEnabled:D=>{Ho.getField(D).each(vn.enable)}})])})},mU=(t,s)=>({dom:{tag:"div",classes:t.classes},components:$e(t.items,s.shared.interpreter)}),DD=(t,s)=>{const a=$e(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>to("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Fr(t.selectBehaviours,[$n.config({}),Jt.config({store:{mode:"manual",getValue:d=>$u(d.element),setValue:(d,h)=>{const b=Ws(t.options);et(t.options,T=>T.value===h).isSome()?tg(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&b.each(T=>tg(d.element,T.value))},...c}})])}},hU=al({name:"HtmlSelect",configFields:[rt("options"),Xa("selectBehaviours",[$n,Jt]),Pe("selectClasses",[]),Pe("selectAttributes",{}),Wo("data")],factory:DD}),gU=(t,s,a)=>{const c=$e(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>bh(T,s)),h=Ho.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:hU,selectBehaviours:Et([vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),cr.config({}),Kn("selectbox-change",[ot(tm(),(T,D)=>{bn(T,Ol,{name:t.name})})])])}),b=t.size>1?M.none():M.some(Gu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),S={dom:{tag:"div",classes:["tox-selectfield"]},components:dt([[h],b.toArray()])};return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([d.toArray(),[S]]),fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{Ho.getField(T).each(vn.disable)},onEnabled:T=>{Ho.getField(T).each(vn.enable)}}),ga(()=>s.checkUiComponentContext(t.context))])})},pU=oe([Pe("field1Name","field1"),Pe("field2Name","field2"),oh("onLockedChange"),im(["lockClass"]),Pe("locked",!1),Tl.field("coupledFieldBehaviours",[Mo,Jt]),os("onInput",ce)]),RD=(t,s,a)=>Rs(t,s,a).bind(Mo.getCurrent),CB=(t,s)=>Ii({factory:Ho,name:t,overrides:a=>({fieldBehaviours:Et([Kn("coupled-input-behaviour",[ot(nu(),c=>{RD(c,a,s).each(d=>{Rs(c,a,"lock").each(h=>{mo.isOn(h)&&a.onLockedChange(c,d,h),a.onInput(c)})})})])])})}),SB=oe([CB("field1","field2"),CB("field2","field1"),Ii({factory:Na,schema:[rt("dom")],name:"lock",overrides:t=>({buttonBehaviours:Et([mo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),bU=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Tl.augment(t.coupledFieldBehaviours,[Mo.config({find:M.some}),Jt.config({store:{mode:"manual",getValue:d=>{const h=Uv(d,t,["field1","field2"]);return{[t.field1Name]:Jt.getValue(h.field1()),[t.field2Name]:Jt.getValue(h.field2())}},setValue:(d,h)=>{const b=Uv(d,t,["field1","field2"]);Vr(h,t.field1Name)&&Jt.setValue(b.field1(),h[t.field1Name]),Vr(h,t.field2Name)&&Jt.setValue(b.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>Rs(d,t,"field1"),getField2:d=>Rs(d,t,"field2"),getLock:d=>Rs(d,t,"lock")}}),fu=ac({name:"FormCoupledInputs",configFields:pU(),partFields:SB(),factory:bU,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),vU=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},MD=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return Xn.value({value:c,unit:d})}else return Xn.error(t)},xB=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>go(a,d);return t.unit===s?M.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?M.some(t.value):M.some(t.value/a[t.unit]*a[s]):M.none()},ND=t=>M.none(),yU=(t,s)=>a=>xB(a,s).map(c=>({value:c*t,unit:s})),EB=(t,s)=>{const a=MD(t).toOptional(),c=MD(s).toOptional();return Fa(a,c,(d,h)=>xB(d,h.unit).map(b=>h.value/b).map(b=>yU(b,h.unit)).getOr(ND)).getOr(ND)},_B=(t,s)=>{let a=ND;const c=on("ratio-event"),d=de=>Gu(de,{tag:"span",classes:["tox-icon","tox-lock-icon__"+de]},s.icons),h=()=>!t.enabled||t.context.exists(de=>s.checkUiComponentContext(de).shouldDisable),b=t.context.map(de=>ga(()=>s.checkUiComponentContext(de))),S=t.label.getOr("Constrain proportions"),T=s.translate(S),D=fu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":T,"data-mce-name":S}},components:[d("lock"),d("unlock")],buttonBehaviours:Et([vn.config({disabled:h}),...b.toArray(),cr.config({}),Ar.config(s.tooltips.getConfig({tooltipText:T}))])}),P=de=>({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:de}),F=de=>Ho.parts.field({factory:Ef,inputClasses:t.inDialog?["tox-textfield"]:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:de?t.width:t.height,inputBehaviours:Et([vn.config({disabled:h}),...b.toArray(),cr.config({}),Kn("size-input-events",[ot(Cd(),(Te,Oe)=>{bn(Te,c,{isField1:de})}),ot(tm(),(Te,Oe)=>{t.name.each(ze=>bn(Te,Ol,{name:ze}))})]),...t.onEnter.map(Te=>Sn.config({mode:"special",onEnter:Te})).toArray()]),selectOnFocus:!1}),G=de=>({dom:{tag:"label",classes:["tox-label"]},components:[or(s.translate(de))]}),J=fu.parts.field1(P([Ho.parts.label(G("Width")),F(!0)])),re=fu.parts.field2(P([Ho.parts.label(G("Height")),F(!1)])),le=gn(ce),De=Fa(t.onSetup,t.getApi,(de,Te)=>[kf({onSetup:de,getApi:Te},le),Bi({getApi:Te},le)]).getOr([]);return fu.sketch({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[J,re,P([G(Bx),D])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(de,Te,Oe)=>{MD(Jt.getValue(de)).each(ze=>{a(ze).each(We=>{Jt.setValue(Te,vU(We))})})},onInput:de=>bo(de,s6),coupledFieldBehaviours:Et([vn.config({disabled:h,onDisabled:de=>{fu.getField1(de).bind(Ho.getField).each(vn.disable),fu.getField2(de).bind(Ho.getField).each(vn.disable),fu.getLock(de).each(vn.disable)},onEnabled:de=>{fu.getField1(de).bind(Ho.getField).each(vn.enable),fu.getField2(de).bind(Ho.getField).each(vn.enable),fu.getLock(de).each(vn.enable)}}),ga(()=>s.checkUiComponentContext("mode:design")),Kn("size-input-events",[ot(c,(de,Te)=>{const Oe=Te.event.isField1,ze=Oe?fu.getField1(de):fu.getField2(de),We=Oe?fu.getField2(de):fu.getField1(de),Mt=ze.map(Jt.getValue).getOr(""),tn=We.map(Jt.getValue).getOr("");a=EB(Mt,tn)}),ot(s6,de=>{t.onInput.each(Te=>Te(de))}),...De])])})},wU=(t,s)=>_B({inDialog:!0,label:t.label,enabled:t.enabled,context:M.some(t.context),name:M.some(t.name),width:"",height:"",onEnter:M.none(),onInput:M.none(),onSetup:M.none(),getApi:M.none()},s),TB=(t,s,a)=>{const c=Vd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[or(s.translate(t.label))]}),d=Vd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=Vd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Vd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:oe(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,h],sliderBehaviours:Et([uc.self(),$n.config({})]),onChoose:(b,S,T)=>{bn(b,Ol,{name:t.name,value:T})},onChange:(b,S,T)=>{bn(b,Ol,{name:t.name,value:T})}})},CU=(t,s)=>{const a=S=>({dom:{tag:"th",innerHtml:s.translate(S)}}),c=S=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$e(S,a)}]}),d=S=>({dom:{tag:"td",innerHtml:s.translate(S)}}),h=S=>({dom:{tag:"tr"},components:$e(S,d)}),b=S=>({dom:{tag:"tbody"},components:$e(S,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),b(t.cells)],behaviours:Et([cr.config({}),$n.config({})])}},kB=(t,s)=>{const a=t.label.map(J=>bh(J,s)),c=[vn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),ga(()=>s.checkUiComponentContext(t.context)),Sn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:J=>(bo(J,CC),M.some(!0))}),Kn("textfield-change",[ot(nu(),(J,re)=>{bn(J,Ol,{name:t.name})}),ot(tp(),(J,re)=>{bn(J,Ol,{name:t.name})})]),cr.config({})],d=t.validation.map(J=>yh.config({getRoot:re=>ii(re.element),invalidClass:"tox-invalid",validator:{validate:re=>{const le=Jt.getValue(re),De=J.validator(le);return cc.pure(De===!0?Xn.value(le):Xn.error(De))},validateOnLoad:J.validateOnLoad}})).toArray(),h=t.placeholder.fold(oe({}),J=>({placeholder:s.translate(J)})),b=t.inputMode.fold(oe({}),J=>({inputmode:J})),S={...h,...b,"data-mce-name":t.name},T=Ho.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(J=>({data:J})).getOr({}),inputAttributes:S,inputClasses:[t.classname],inputBehaviours:Et(dt([c,d])),selectOnFocus:!1,factory:Ef}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,F=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),G=[vn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:J=>{Ho.getField(J).each(vn.disable)},onEnabled:J=>{Ho.getField(J).each(vn.enable)}}),ga(()=>s.checkUiComponentContext(t.context))];return yC(a,D,F,G)},SU=(t,s,a)=>kB({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:M.none(),maximized:t.maximized,data:a,context:t.context},s),AB=(t,s,a)=>kB({name:t.name,multiline:!0,label:t.label,inputMode:M.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:M.none(),maximized:t.maximized,data:a,context:t.context},s),PC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Dg=t=>t.dimension.property,Qb=(t,s)=>t.dimension.getDimension(s),IC=(t,s)=>{const a=PC(t,s);kd(a,[s.shrinkingClass,s.growingClass])},iT=(t,s)=>{mr(t.element,s.openClass),Lr(t.element,s.closedClass),It(t.element,Dg(s),"0px"),yi(t.element)},cT=(t,s)=>{mr(t.element,s.closedClass),Lr(t.element,s.openClass),uo(t.element,Dg(s))},BC=(t,s,a,c)=>{a.setCollapsed(),It(t.element,Dg(s),Qb(s,t.element)),IC(t,s),iT(t,s),s.onStartShrink(t),s.onShrunk(t)},xU=(t,s,a,c)=>{const d=c.getOrThunk(()=>Qb(s,t.element));a.setCollapsed(),It(t.element,Dg(s),d),yi(t.element);const h=PC(t,s);mr(h,s.growingClass),Lr(h,s.shrinkingClass),iT(t,s),s.onStartShrink(t)},OB=(t,s,a)=>{const c=Qb(s,t.element);(c==="0px"?BC:xU)(t,s,a,M.some(c))},DB=(t,s,a)=>{const c=PC(t,s),d=xc(c,s.shrinkingClass),h=Qb(s,t.element);cT(t,s);const b=Qb(s,t.element);(d?()=>{It(t.element,Dg(s),h),yi(t.element)}:()=>{iT(t,s)})(),mr(c,s.shrinkingClass),Lr(c,s.growingClass),cT(t,s),It(t.element,Dg(s),b),a.setExpanded(),s.onStartGrow(t)},EU=(t,s,a)=>{if(a.isExpanded()){uo(t.element,Dg(s));const c=Qb(s,t.element);It(t.element,Dg(s),c)}},RB=(t,s,a)=>{a.isExpanded()||DB(t,s,a)},_U=(t,s,a)=>{a.isExpanded()&&OB(t,s,a)},TU=(t,s,a)=>{a.isExpanded()&&BC(t,s,a)},kU=(t,s,a)=>a.isExpanded(),MB=(t,s,a)=>a.isCollapsed(),PD=(t,s,a)=>{const c=PC(t,s);return xc(c,s.growingClass)===!0},NB=(t,s,a)=>{const c=PC(t,s);return xc(c,s.shrinkingClass)===!0};var OU=Object.freeze({__proto__:null,refresh:EU,grow:RB,shrink:_U,immediateShrink:TU,hasGrown:kU,hasShrunk:MB,isGrowing:PD,isShrinking:NB,isTransitioning:(t,s,a)=>PD(t,s)||NB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?OB:DB)(t,s,a)},disableTransitions:IC,immediateGrow:(t,s,a)=>{a.isExpanded()||(cT(t,s),It(t.element,Dg(s),Qb(s,t.element)),IC(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),PB=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Fc(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:to(s.dimension.property,"0px")})},events:(t,s)=>fs([eh(ep(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(IC(a,t),s.isExpanded()&&uo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),IB=[rt("closedClass"),rt("openClass"),rt("shrinkingClass"),rt("growingClass"),Wo("getAnimationRoot"),ko("onShrunk"),ko("onStartShrink"),ko("onGrown"),ko("onStartGrow"),Pe("expanded",!1),Uo("dimension",ra("property",{width:[nr("property","width"),nr("getDimension",t=>oo(t)+"px")],height:[nr("property","height"),nr("getDimension",t=>xr(t)+"px")]}))],BB=Object.freeze({__proto__:null,init:t=>{const s=gn(t.expanded),a=()=>"expanded: "+s.get();return di({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:en(s.set,!1),setExpanded:en(s.set,!0),readState:a})}});const dl=wa({fields:IB,name:"sliding",active:PB,apis:OU,state:BB}),RU=t=>({isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setActive:s=>{const a=t.element;s?(Lr(a,"tox-tbtn--enabled"),$t(a,"aria-pressed",!0)):(mr(a,"tox-tbtn--enabled"),ee(a,"aria-pressed"))},isActive:()=>xc(t.element,"tox-tbtn--enabled"),setText:s=>{bn(t,Xu,{text:s})},setIcon:s=>bn(t,Jb,{icon:s})}),Rg=(t,s,a,c,d=!0,h)=>TD({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(b,S)=>{const T={pattern:t.search.isSome()?Fz(b):""};t.fetch(D=>{S(_y(D,xf.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},T,RU(b))},onSetup:t.onSetup,getApi:RU,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[cr.config({})]:[]],context:t.context},s,a.shared,h),MU=(t,s,a)=>{const c=h=>b=>{const S=!b.isActive();b.setActive(S),h.storage.set(S),a.shared.getSink().each(T=>{s().getOpt(T).each(D=>{$c(D.element),bn(D,vh,{name:h.name,value:h.storage.get()})})})},d=h=>b=>{b.setActive(h.storage.get())};return h=>{h($e(t,b=>{const S=b.text.fold(()=>({}),T=>({text:T}));return{type:b.type,active:!1,...S,context:b.context,onAction:c(b),onSetup:d(b)}}))}},ID=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[or(t)]}),LB=(t,s,a)=>{t.customStateIcon.each(c=>s.push(LD(c,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[Ar.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},FB=on("leaf-label-event-id"),BD=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:h})=>{const b=t.menu.map(T=>Rg(T,"tox-mbtn",h,M.none(),a)),S=[ID(t.title)];return LB(t,S,h),b.each(T=>S.push(T)),Na.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:S,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[Vi()]:[FB,"keying"]},buttonBehaviours:Et([...a?[cr.config({})]:[],mo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ol.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,D)=>{(D.value===t.id?mo.on:mo.off)(T)}}}}),Kn(FB,[tr((T,D)=>{d.each(P=>{(P===t.id?mo.on:mo.off)(T)})}),ot(Vi(),(T,D)=>{const P=D.event.raw.code==="ArrowLeft",F=D.event.raw.code==="ArrowRight";P?(da(T.element,".tox-tree--directory").each(G=>{T.getSystem().getByDom(G).each(J=>{au(G,".tox-tree--directory__label").each(re=>{J.getSystem().getByDom(re).each($n.focus)})})}),D.stop()):F&&D.stop()})])])})},LD=(t,s,a,c,d)=>Gu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(c||[]),behaviours:a,attributes:d},s),FD=(t,s)=>LD(t,s,[]),$D=on("directory-label-event-id"),NU=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(S=>Rg(S,"tox-mbtn",c,M.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[FD("chevron-right",c.shared.providers.icons)]},ID(t.title)];LB(t,h,c),d.each(S=>{h.push(S)});const b=S=>{da(S.element,".tox-tree--directory").each(T=>{S.getSystem().getByDom(T).each(D=>{const P=!mo.isOn(D);mo.toggle(D),bn(S,"expand-tree-node",{expanded:P,node:t.id})})})};return Na.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:b,eventOrder:{[Vi()]:[$D,"keying"]},buttonBehaviours:Et([...s?[cr.config({})]:[],Kn($D,[ot(Vi(),(S,T)=>{const D=T.event.raw.code==="ArrowRight",P=T.event.raw.code==="ArrowLeft";D&&a&&T.stop(),(D||P)&&da(S.element,".tox-tree--directory").each(F=>{S.getSystem().getByDom(F).each(G=>{!mo.isOn(G)&&D||mo.isOn(G)&&P?(b(S),T.stop()):P&&!mo.isOn(G)&&(da(G.element,".tox-tree--directory").each(J=>{au(J,".tox-tree--directory__label").each(re=>{G.getSystem().getByDom(re).each($n.focus)})}),T.stop())})})})])])})},PU=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:h,backstage:b})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(S=>S.type==="leaf"?BD({leaf:S,selectedId:h,onLeafAction:s,visible:a,treeId:c,backstage:b}):HD({directory:S,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:b})),behaviours:Et([dl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Wn.config({})])}),IU=on("directory-event-id"),HD=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:h,selectedId:b})=>{const{children:S}=t,T=gn(h),D=F=>S.map(G=>G.type==="leaf"?BD({leaf:G,selectedId:b,onLeafAction:s,visible:F,treeId:c,backstage:d}):HD({directory:G,expandedIds:T.get(),selectedId:b,onLeafAction:s,labelTabstopping:F,treeId:c,backstage:d})),P=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[NU({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),PU({children:S,expandedIds:h,selectedId:b,onLeafAction:s,visible:P,treeId:c,backstage:d})],behaviours:Et([Kn(IU,[tr((F,G)=>{mo.set(F,P)}),ot("expand-tree-node",(F,G)=>{const{expanded:J,node:re}=G.event;T.set(J?[...T.get(),re]:T.get().filter(le=>le!==re))})]),mo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(F,G)=>{const J=F.components()[1],re=D(G);G?dl.grow(J):dl.shrink(J),Wn.set(J,re)}})])}},BU=on("tree-event-id"),LU=(t,s)=>{const a=t.onLeafAction.getOr(ce),c=t.onToggleExpand.getOr(ce),d=t.defaultExpandedIds,h=gn(d),b=gn(t.defaultSelectedId),S=on("tree-id"),T=(D,P)=>t.items.map(F=>F.type==="leaf"?BD({leaf:F,selectedId:D,onLeafAction:a,visible:!0,treeId:S,backstage:s}):HD({directory:F,selectedId:D,onLeafAction:a,expandedIds:P,labelTabstopping:!0,treeId:S,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(b.get(),h.get()),behaviours:Et([Sn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Kn(BU,[ot("expand-tree-node",(D,P)=>{const{expanded:F,node:G}=P.event;h.set(F?[...h.get(),G]:h.get().filter(J=>J!==G)),c(h.get(),{expanded:F,node:G})})]),ol.config({channels:{[`update-active-item-${S}`]:{onReceive:(D,P)=>{b.set(M.some(P.value)),Wn.set(D,T(M.some(P.value),h.get()))}}}}),Wn.config({})])}};var FU=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return fs([ot(t.event,c),sf(()=>s.cancel())].concat(t.cancelEvent.map(d=>[ot(d,()=>s.cancel())]).getOr([])))}});const $B=t=>{const s=gn(null);return di({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var HB=Object.freeze({__proto__:null,throttle:$B,init:t=>t.stream.streams.state(t)});const $U=(t,s)=>{const a=t.stream,c=bD(t.onStream,a.delay);return s.setTimer(c),(d,h)=>{c.throttle(d,h),a.stopEvent&&h.stop()}};var HU=[Uo("stream",ra("mode",{throttle:[rt("delay"),Pe("stopEvent",!0),nr("streams",{setup:$U,state:$B})]})),Pe("event","input"),Wo("cancelEvent"),oh("onStream")];const zD=wa({fields:HU,name:"streaming",active:FU,state:HB}),uT=(t,s,a)=>{const c=Jt.getValue(a);Jt.setValue(s,c),VB(s)},zB=(t,s)=>{const a=t.element,c=$u(a),d=a.dom;Vn(a,"type")!=="number"&&s(d,c)},VB=t=>{zB(t,(s,a)=>s.setSelectionRange(a.length,a.length))},zU=(t,s)=>{zB(t,(a,c)=>a.setSelectionRange(s,c.length))},VU=(t,s,a)=>{if(t.selectsOver){const c=Jt.getValue(s),d=t.getDisplayText(c),h=Jt.getValue(a);return t.getDisplayText(h).indexOf(d)===0?M.some(()=>{uT(t,s,a),zU(s,d.length)}):M.none()}else return M.none()},VD=oe("alloy.typeahead.itemexecute"),UU=(t,s,a,c)=>{const d=(F,G,J)=>{t.previewing.set(!1);const re=Zr.getCoupled(F,"sandbox");if(Po.isOpen(re))Mo.getCurrent(re).each(le=>{mt.getHighlighted(le).fold(()=>{J(le)},()=>{T0(re,le.element,"keydown",G)})});else{const le=De=>{Mo.getCurrent(De).each(J)};D_(t,b(F),F,re,c,le,Ja.HighlightMenuAndItem).get(ce)}},h=bP(t),b=F=>G=>G.map(J=>{const re=jc(J.menus),le=xe(re,de=>no(de.items,Te=>Te.type==="item"));return Jt.getState(F).update($e(le,de=>de.data)),J}),S=F=>Mo.getCurrent(F),T="typeaheadevents",D=[$n.config({}),Jt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:F=>$u(F.element),getFallbackEntry:F=>({value:F,meta:{}}),setValue:(F,G)=>{tg(F.element,t.model.getDisplayText(G))},...t.initialData.map(F=>to("initialValue",F)).getOr({})}}),zD.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(F,G)=>{const J=Zr.getCoupled(F,"sandbox");if($n.isFocused(F)&&$u(F.element).length>=t.minChars){const le=S(J).bind(de=>mt.getHighlighted(de).map(Jt.getValue));t.previewing.set(!0);const De=de=>{S(J).each(Te=>{le.fold(()=>{t.model.selectsOver&&mt.highlightFirst(Te)},Oe=>{mt.highlightBy(Te,ze=>Jt.getValue(ze).value===Oe.value),mt.getHighlighted(Te).orThunk(()=>(mt.highlightFirst(Te),M.none()))})})};D_(t,b(F),F,J,c,De,Ja.HighlightJustMenu).get(ce)}},cancelEvent:x0()}),Sn.config({mode:"special",onDown:(F,G)=>(d(F,G,mt.highlightFirst),M.some(!0)),onEscape:F=>{const G=Zr.getCoupled(F,"sandbox");return Po.isOpen(G)?(Po.close(G),M.some(!0)):M.none()},onUp:(F,G)=>(d(F,G,mt.highlightLast),M.some(!0)),onEnter:F=>{const G=Zr.getCoupled(F,"sandbox"),J=Po.isOpen(G);if(J&&!t.previewing.get())return S(G).bind(re=>mt.getHighlighted(re)).map(re=>(bn(F,VD(),{item:re}),!0));{const re=Jt.getValue(F);return bo(F,x0()),t.onExecute(G,F,re),J&&Po.close(G),M.some(!0)}}}),mo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Zr.config({others:{sandbox:F=>by(t,F,{onOpen:()=>mo.on(F),onClose:()=>{t.lazyTypeaheadComp.get().each(G=>ee(G.element,"aria-activedescendant")),mo.off(F)}})}}),Kn(T,[tr(F=>{t.lazyTypeaheadComp.set(M.some(F))}),sf(F=>{t.lazyTypeaheadComp.set(M.none())}),rf(F=>{const G=ce;OO(t,b(F),F,c,G,Ja.HighlightMenuAndItem).get(ce)}),ot(VD(),(F,G)=>{const J=Zr.getCoupled(F,"sandbox");uT(t.model,F,G.event.item),bo(F,x0()),t.onItemExecute(F,J,G.event.item,Jt.getValue(F)),Po.close(J),VB(F)})].concat(t.dismissOnBlur?[ot(Xm(),F=>{const G=Zr.getCoupled(F,"sandbox");nc(G.element).isNone()&&Po.close(G)})]:[]))],P={[Lc()]:[Jt.name(),zD.name(),T],...t.eventOrder};return{uid:t.uid,dom:vP(Fs(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...Fr(t.typeaheadBehaviours,D)},eventOrder:P}},WU=oe([Wo("lazySink"),rt("fetch"),Pe("minChars",5),Pe("responseTime",1e3),ko("onOpen"),Pe("getHotspot",M.some),Pe("getAnchorOverrides",oe({})),Pe("layouts",M.none()),Pe("eventOrder",{}),R("model",{},[Pe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Pe("selectsOver",!0),Pe("populateFromBrowse",!0)]),ko("onSetValue"),tc("onExecute"),ko("onItemExecute"),Pe("inputClasses",[]),Pe("inputAttributes",{}),Pe("inputStyles",{}),Pe("matchWidth",!0),Pe("useMinWidth",!1),Pe("dismissOnBlur",!0),im(["openClass"]),Wo("initialData"),Wo("listRole"),Xa("typeaheadBehaviours",[$n,Jt,zD,Sn,mo,Zr]),qo("lazyTypeaheadComp",()=>gn(M.none)),qo("previewing",()=>gn(!0))].concat(pP()).concat(vy())),UB=oe([iu({schema:[gp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{VU(t.model,d,c).fold(()=>{t.model.selectsOver?(mt.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&uT(t.model,d,c),To(c.element,"id").each(h=>$t(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(bn(c,VD(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&uT(t.model,c,a)})}})})]),ZU=ac({name:"Typeahead",configFields:WU(),partFields:UB(),factory:UU}),Rf=t=>({...t,toCached:()=>Rf(t.toCached()),bindFuture:T=>Rf(t.bind(D=>D.fold(P=>cc.pure(Xn.error(P)),P=>T(P)))),bindResult:T=>Rf(t.map(D=>D.bind(T))),mapResult:T=>Rf(t.map(D=>D.map(T))),mapError:T=>Rf(t.map(D=>D.mapError(T))),foldResult:(T,D)=>t.map(P=>P.fold(T,D)),withTimeout:(T,D)=>Rf(cc.nu(P=>{let F=!1;const G=setTimeout(()=>{F=!0,P(Xn.error(D()))},T);t.get(J=>{F||(clearTimeout(G),P(J))})}))}),WB=t=>Rf(cc.nu(t)),ZB=t=>Rf(cc.pure(Xn.value(t))),jB={nu:WB,wrap:Rf,pure:ZB,value:ZB,error:t=>Rf(cc.pure(Xn.error(t))),fromResult:t=>Rf(cc.pure(t)),fromFuture:t=>Rf(t.map(Xn.value)),fromPromise:t=>WB(s=>{t.then(a=>{s(Xn.value(a))},a=>{s(Xn.error(a))})})},dT=(t,s,a=[],c,d,h,b)=>{const S=s.fold(()=>({}),P=>({action:P})),T={buttonBehaviours:Et([$d.item(()=>!t.enabled||b.checkUiComponentContext(t.context).shouldDisable),ga(()=>b.checkUiComponentContext(t.context)),cr.config({}),...h.map(P=>Ar.config(b.tooltips.getConfig({tooltipText:b.translate(P)}))).toArray(),Kn("button press",[c2("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...S},D=Fs(T,{dom:c});return Fs(D,{components:d})},qB=(t,s,a,c=[],d)=>{const h=t.tooltip.map(D=>({"aria-label":a.translate(D)})).getOr({}),b={tag:"button",classes:["tox-tbtn"],attributes:{...h,"data-mce-name":d}},S=t.icon.map(D=>NC(D,a.icons)),T=my([S]);return dT(t,s,c,b,T,t.tooltip,a)},fT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},mT=(t,s,a,c=[],d=[])=>{const h=a.translate(t.text),b=t.icon.map(J=>NC(J,a.icons)),S=[b.getOrThunk(()=>or(h))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),F={tag:"button",classes:[...fT(T),...b.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":h,"data-mce-name":t.text}},G=t.icon.map(oe(h));return dT(t,s,c,F,S,G,a)},GB=(t,s,a,c=[],d=[])=>{const h=mT(t,M.some(s),a,c,d);return Na.sketch(h)},UD=(t,s)=>a=>{s==="custom"?bn(a,vh,{name:t,value:{}}):s==="submit"?bo(a,CC):s==="cancel"?bo(a,Tg):console.error("Unknown button type: ",s)},KB=(t,s)=>s==="menu",qU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",YB=(t,s)=>s==="togglebutton",GU=(t,s,a)=>{var c,d;const h=t.icon.map(Oe=>c1(Oe,s.icons)).map(Jo),b=Oe=>{bn(Oe,vh,{name:t.name,value:{setIcon:ze=>{h.map(We=>We.getOpt(Oe).each(Mt=>{Wn.set(Mt,[c1(ze,s.icons)])}))}}})},S=t.buttonType.getOr(t.primary?"primary":"secondary"),T={...t,name:(c=t.name)!==null&&c!==void 0?c:"",primary:S==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},D=T.tooltip.or(t.text).map(Oe=>({"aria-label":s.translate(Oe)})).getOr({}),P=fT(S??"secondary"),F=t.icon.isSome()&&t.text.isSome(),G={tag:"button",classes:[...P.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...F?["tox-button--icon-and-text"]:[]],attributes:{...D,...Ct(a)?{"data-mce-name":a}:{}}},J=[],re=s.translate(t.text.getOr("")),le=or(re),de=[...my([h.map(Oe=>Oe.asSpec())]),...t.text.isSome()?[le]:[]],Te=dT(T,M.some(b),J,G,de,t.tooltip,s);return Na.sketch(Te)},hT=(t,s,a)=>{if(KB(t,s)){const c=()=>b,d=t,h={...t,type:"menubutton",search:M.none(),onSetup:S=>(S.setEnabled(t.enabled),ce),fetch:MU(d.items,c,a)},b=Jo(Rg(h,"tox-tbtn",a,M.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return b.asSpec()}else if(qU(t,s)){const c=UD(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return GB(d,c,a.shared.providers,[])}else{if(YB(t,s))return GU(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},Am=(t,s)=>{const a=UD(t.name,"custom");return Qz(M.none(),Ho.parts.field({factory:Na,...mT(t,M.some(a),s,[Xb(""),uc.self()])}))},gT={type:"separator"},pT=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ce}),WD=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ce}),ZD=t=>$e(t,pT),KU=(t,s)=>no(s,a=>a.type===t),bT=(t,s)=>ZD(KU(t,s)),XB=t=>bT("header",t.targets),jD=t=>bT("anchor",t.targets),YU=t=>M.from(t.anchorTop).map(s=>WD("<top>",s)).toArray(),XU=t=>M.from(t.anchorBottom).map(s=>WD("<bottom>",s)).toArray(),JB=t=>$e(t,s=>WD(s,s)),JU=t=>zo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(gT,a),[]),qD=(t,s)=>{const a=t.toLowerCase();return no(s,c=>{var d;const h=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,b=(d=c.value)!==null&&d!==void 0?d:"";return Cr(h.toLowerCase(),a)||Cr(b.toLowerCase(),a)})},GD=(t,s,a)=>{var c,d;const h=Jt.getValue(s),b=(d=(c=h==null?void 0:h.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],T=>{const D=qD(b,JB(a.getHistory(t)));return t==="file"?JU([D,qD(b,XB(T)),qD(b,dt([YU(T),jD(T),XU(T)]))]):D})},QB=on("aria-invalid"),QU=(t,s,a,c)=>{const d=s.shared.providers,h=Te=>{const Oe=Jt.getValue(Te);a.addToHistory(Oe.value,t.filetype)},b={...c.map(Te=>({initialData:Te})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":QB,type:"url"},minChars:0,responseTime:0,fetch:Te=>{const Oe=GD(t.filetype,Te,a),ze=_y(Oe,xf.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:M.none()});return cc.pure(ze)},getHotspot:Te=>re.getOpt(Te),onSetValue:(Te,Oe)=>{Te.hasConfigured(yh)&&yh.run(Te).get(ce)},typeaheadBehaviours:Et([...a.getValidationHandler().map(Te=>yh.config({getRoot:Oe=>ii(Oe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Oe,ze)=>{P.getOpt(Oe).each(We=>{$t(We.element,"title",d.translate(ze))})}},validator:{validate:Oe=>{const ze=Jt.getValue(Oe);return jB.nu(We=>{Te({type:t.filetype,url:ze.value},Mt=>{if(Mt.status==="invalid"){const tn=Xn.error(Mt.message);We(tn)}else{const tn=Xn.value(Mt.message);We(tn)}})})},validateOnLoad:!1}})).toArray(),vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),cr.config({}),Kn("urlinput-events",[ot(nu(),Te=>{const Oe=$u(Te.element),ze=Oe.trim();ze!==Oe&&tg(Te.element,ze),t.filetype==="file"&&bn(Te,Ol,{name:t.name})}),ot(tm(),Te=>{bn(Te,Ol,{name:t.name}),h(Te)}),ot(tp(),Te=>{bn(Te,Ol,{name:t.name}),h(Te)})])]),eventOrder:{[nu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Te=>Te.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:eC(!1,1,"normal")},onExecute:(Te,Oe,ze)=>{bn(Oe,CC,{})},onItemExecute:(Te,Oe,ze,We)=>{h(Te),bn(Te,Ol,{name:t.name})}},S=Ho.parts.field({...b,factory:ZU}),T=t.label.map(Te=>bh(Te,d)),P=Jo(((Te,Oe,ze=Te,We=Te)=>Gu(ze,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Te],attributes:{title:d.translate(We),"aria-live":"polite",...Oe.fold(()=>({}),Mt=>({id:Mt}))}},d.icons))("invalid",M.some(QB),"warning")),F=Jo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[P.asSpec()]}),G=a.getUrlPicker(t.filetype),J=on("browser.url.event"),re=Jo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[S,F.asSpec()],behaviours:Et([vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),le=Jo(GB({context:t.context,name:t.name,icon:M.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:M.none(),borderless:!0},Te=>bo(Te,J),d,[],["tox-browse-url"])),De=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:dt([[re.asSpec()],G.map(()=>le.asSpec()).toArray()])}),de=Te=>{Mo.getCurrent(Te).each(Oe=>{const ze=Jt.getValue(Oe),We={fieldname:t.name,...ze};G.each(Mt=>{Mt(We).get(tn=>{Jt.setValue(Oe,tn),bn(Te,Ol,{name:t.name})})})})};return Ho.sketch({dom:tV(),components:T.toArray().concat([De()]),fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:Te=>{Ho.getField(Te).each(vn.disable),le.getOpt(Te).each(vn.disable)},onEnabled:Te=>{Ho.getField(Te).each(vn.enable),le.getOpt(Te).each(vn.enable)}}),ga(()=>d.checkUiComponentContext(t.context)),Kn("url-input-events",[ot(J,de)])])})},eL=(t,s)=>{const a=kA(t.icon,s.icons);return Tm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>bn(c,vh,{name:"alert-banner",value:t.url}),buttonBehaviours:Et([oP()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},tL=(t,s)=>{t.dom.checked=s},eW=t=>t.dom.checked,tW=(t,s,a)=>{const c=T=>(T.element.dom.click(),M.some(!0)),d=Ho.parts.field({factory:{sketch:Xt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Et([uc.self(),vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{ii(T.element).each(D=>Lr(D,"tox-checkbox--disabled"))},onEnabled:T=>{ii(T.element).each(D=>mr(D,"tox-checkbox--disabled"))}}),cr.config({}),$n.config({}),Q_(a,eW,tL),Sn.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),Kn("checkbox-events",[ot(tm(),(T,D)=>{bn(T,Ol,{name:t.name})})])])}),h=Ho.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[or(s.translate(t.label))],behaviours:Et([ll.config({})])}),b=T=>Gu(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),S=Jo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[b("checked"),b("unchecked")]});return Ho.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,S.asSpec(),h],fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),ga(()=>s.checkUiComponentContext(t.context))])})},nW=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],c=Kn("htmlpanel",[tr(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?Tm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Et([Ar.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{ir(d.element,"[data-mce-tooltip]:hover").orThunk(()=>nc(d.element)).each(h=>{To(h,"data-mce-tooltip").each(b=>{Ar.setComponents(d,s.tooltips.getComponents({tooltipText:b}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:ir(d.element,"[data-mce-tooltip]:hover").orThunk(()=>nc(d.element).filter(h=>To(h,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:oe([fa,qa,Ca,Ra,Sa,ps]),onRtl:oe([fa,qa,Ca,Ra,Sa,ps])},bubble:Hu(0,-2,{})})}),c])}):Tm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Et([cr.config({}),$n.config({}),c])})},ei=t=>(s,a,c,d,h)=>Tt(a,"name").fold(()=>t(a,d,M.none(),h),b=>s.field(b,t(a,d,Tt(c,b),h))),nL=t=>(s,a,c,d,h)=>{const b=Fs(a,{source:"dynamic"});return ei(t)(s,b,c,d,h)},Ud={bar:ei((t,s)=>t6(t,s.shared)),collection:ei((t,s,a)=>nV(t,s.shared.providers,a)),alertbanner:ei((t,s)=>eL(t,s.shared.providers)),input:ei((t,s,a)=>SU(t,s.shared.providers,a)),textarea:ei((t,s,a)=>AB(t,s.shared.providers,a)),label:ei((t,s,a,c)=>iU(t,s.shared,c)),iframe:nL((t,s,a)=>oU(t,s.shared.providers,a)),button:ei((t,s)=>Am(t,s.shared.providers)),checkbox:ei((t,s,a)=>tW(t,s.shared.providers,a)),colorinput:ei((t,s,a)=>rV(t,s.shared,s.colorinput,a)),colorpicker:ei((t,s,a)=>jV(t,s.shared.providers,a)),dropzone:ei((t,s,a)=>KV(t,s.shared.providers,a)),grid:ei((t,s)=>YV(t,s.shared)),listbox:ei((t,s,a)=>fU(t,s,a)),selectbox:ei((t,s,a)=>gU(t,s.shared.providers,a)),sizeinput:ei((t,s)=>wU(t,s.shared.providers)),slider:ei((t,s,a)=>TB(t,s.shared.providers,a)),urlinput:ei((t,s,a)=>QU(t,s,s.urlinput,a)),customeditor:ei(GV),htmlpanel:ei((t,s)=>nW(t,s.shared.providers)),imagepreview:ei((t,s,a)=>ED(t,a)),table:ei((t,s)=>CU(t,s.shared.providers)),tree:ei((t,s)=>LU(t,s)),panel:ei((t,s)=>mU(t,s))},KD={field:(t,s)=>s,record:oe([])},oL=(t,s,a,c,d)=>{const h=Fs(c,{shared:{interpreter:b=>YD(t,b,a,h,d)}});return YD(t,s,a,h,d)},YD=(t,s,a,c,d)=>Tt(Ud,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),h=>h(t,s,a,c,d)),sL=(t,s,a,c)=>YD(KD,t,s,a,c),l1="layout-inset",XD=t=>t.x,JD=(t,s)=>t.x+t.width/2-s.width/2,vT=(t,s)=>t.x+t.width-s.width,rL=t=>t.y,aL=(t,s)=>t.y+t.height-s.height,ji=(t,s)=>t.y+t.height/2-s.height/2,Ty=(t,s,a)=>Ni(vT(t,s),aL(t,s),a.insetSouthwest(),O2(),"southwest",Pi(t,{right:0,bottom:3}),l1),yT=(t,s,a)=>Ni(XD(t),aL(t,s),a.insetSoutheast(),A2(),"southeast",Pi(t,{left:1,bottom:3}),l1),u1=(t,s,a)=>Ni(vT(t,s),rL(t),a.insetNorthwest(),k2(),"northwest",Pi(t,{right:0,top:2}),l1),LC=(t,s,a)=>Ni(XD(t),rL(t),a.insetNortheast(),iv(),"northeast",Pi(t,{left:1,top:2}),l1),Mf=(t,s,a)=>Ni(JD(t,s),rL(t),a.insetNorth(),lx(),"north",Pi(t,{top:2}),l1),FC=(t,s,a)=>Ni(JD(t,s),aL(t,s),a.insetSouth(),ux(),"south",Pi(t,{bottom:3}),l1),iL=(t,s,a)=>Ni(vT(t,s),ji(t,s),a.insetEast(),fx(),"east",Pi(t,{right:0}),l1),cL=(t,s,a)=>Ni(XD(t),ji(t,s),a.insetWest(),dx(),"west",Pi(t,{left:1}),l1),oW=t=>{switch(t){case"north":return Mf;case"northeast":return LC;case"northwest":return u1;case"south":return FC;case"southeast":return yT;case"southwest":return Ty;case"east":return iL;case"west":return cL}},lL=(t,s,a,c,d)=>z2(c).map(oW).getOr(Mf)(t,s,a,c,d),sW=t=>{switch(t){case"north":return FC;case"northeast":return yT;case"northwest":return Ty;case"south":return Mf;case"southeast":return LC;case"southwest":return u1;case"east":return cL;case"west":return iL}},uL=(t,s,a,c,d)=>z2(c).map(sW).getOr(Mf)(t,s,a,c,d),d1={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},dL=(t,s,a)=>{const d={maxHeightFunction:Cp()},h=()=>({type:"node",root:Pr(br(t())),node:M.from(t()),bubble:Hu(12,12,d1),layouts:{onRtl:()=>[LC],onLtr:()=>[u1]},overrides:d}),b=()=>({type:"hotspot",hotspot:s(),bubble:Hu(-12,12,d1),layouts:{onRtl:()=>[Ca,Sa,fa],onLtr:()=>[Sa,Ca,fa]},overrides:d});return()=>a()?h():b()},QD=(t,s,a,c)=>{const h={maxHeightFunction:Cp()},b=()=>({type:"node",root:Pr(br(s())),node:M.from(s()),bubble:Hu(12,12,d1),layouts:{onRtl:()=>[Mf],onLtr:()=>[Mf]},overrides:h}),S=()=>t?{type:"node",root:Pr(br(s())),node:M.from(s()),bubble:Hu(0,-Hl(s()),d1),layouts:{onRtl:()=>[qa],onLtr:()=>[qa]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:Hu(0,0,d1),layouts:{onRtl:()=>[qa],onLtr:()=>[qa]},overrides:h};return()=>c()?b():S()},rW=(t,s,a)=>{const c=()=>({type:"node",root:Pr(br(t())),node:M.from(t()),layouts:{onRtl:()=>[Mf],onLtr:()=>[Mf]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[fa],onLtr:()=>[fa]}});return()=>a()?c():d()},fL=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],h=c[c.length-1],b={firstCell:Ke.fromDom(d),lastCell:Ke.fromDom(h)};return M.some(b)}return M.some(_p.range(Ke.fromDom(a.startContainer),a.startOffset,Ke.fromDom(a.endContainer),a.endOffset))}}),aW=t=>s=>({type:"node",root:t(),node:s}),iW=(t,s,a,c)=>{const d=Cf(t),h=()=>Ke.fromDom(t.getBody()),b=()=>Ke.fromDom(t.getContentAreaContainer()),S=()=>d||!c();return{inlineDialog:dL(b,s,S),inlineBottomDialog:QD(t.inline,b,a,S),banner:rW(b,s,S),cursor:fL(t,h),node:aW(h)}},mL=t=>(s,a)=>{AI(t)(s,a)},JY=t=>()=>Qa(t),QY=t=>s=>Hd(t,s),hL=t=>s=>A_(t,s),cW=t=>({colorPicker:mL(t),hasCustomColors:JY(t),getColors:QY(t),getColorCols:hL(t)}),lW=t=>()=>NN(t),gL=t=>({isDraggableModal:lW(t)}),eR=t=>{const s=gn(uA(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},pL=t=>Vr(t,"items"),bL=t=>Vr(t,"format"),tR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],uW=t=>go(t,"items"),dW=t=>go(t,"block"),fW=t=>go(t,"inline"),mW=t=>go(t,"selector"),$C=t=>zo(t,(s,a)=>{if(uW(a)){const c=$C(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(fW(a)||dW(a)||mW(a)){const d=`custom-${j(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),nR=(t,s)=>{const a=$C(s),c=d=>{pt(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},vL=t=>eA(t).map(s=>{const a=nR(t,s);return tA(t)?tR.concat(a):a}).getOr(tR),hW=t=>{const s=xs(t);return s.length===1&&wt(s,"title")},yL=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),wL=(t,s,a,c)=>{const d=T=>yL(T,a,c),h=T=>{const D=S(T.items);return{...T,type:"submenu",getStyleItems:oe(D)}},b=T=>{const D=j(T.name)?T.name:on(T.title),P=`custom-${D}`,F={...T,type:"formatter",format:P,isSelected:a(P),getStylePreview:c(P)};return t.formatter.register(D,F),F},S=T=>$e(T,D=>pL(D)?h(D):bL(D)?d(D):hW(D)?{...D,type:"separator"}:b(D));return S(s)},gW=t=>{const s=S=>()=>t.formatter.match(S),a=S=>()=>{const T=t.formatter.get(S);return T!==void 0?M.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(S))}):M.none()},c=gn([]),d=gn([]),h=gn(!1);return t.on("PreInit",S=>{const T=vL(t),D=wL(t,T,s,a);c.set(D)}),t.on("addStyleModifications",S=>{const T=wL(t,S.items,s,a);d.set(T),h.set(S.replace)}),{getData:()=>{const S=h.get()?[]:c.get(),T=d.get();return S.concat(T)}}},pW=t=>{let c=0;const d=()=>c>0,h=S=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[or(S.tooltipText)]}];return{getConfig:S=>({delayForShow:()=>d()?60:300,delayForHide:oe(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:h(S),onShow:(T,D)=>{c++,S.onShow&&S.onShow(T,D)},onHide:(T,D)=>{c--,S.onHide&&S.onHide(T,D)},onSetup:S.onSetup}),getComponents:h}},oR=t=>Ct(t)&&t.nodeType===1,bW=Og.trim,HC=t=>s=>!!(oR(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),vW=HC("true"),ky=HC("false"),CL=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),sR=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return vW(s)}return!1},Ay=(t,s)=>$e(kc(Ke.fromDom(s),t),a=>a.dom),rR=t=>t.innerText||t.textContent,SL=t=>t.id?t.id:on("h"),aR=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,xL=t=>aR(t)&&iR(t),wT=t=>t&&/^(H[1-6])$/.test(t.nodeName),iR=t=>sR(t)&&!ky(t),EL=t=>wT(t)&&iR(t),cR=t=>wT(t)?parseInt(t.nodeName.substr(1),10):0,e0=t=>{var s;const a=SL(t),c=()=>{t.id=a};return CL("header",(s=rR(t))!==null&&s!==void 0?s:"","#"+a,cR(t),c)},yW=t=>{const s=t.id||t.name,a=rR(t);return CL("anchor",a||"#"+s,"#"+s,0,ce)},wW=t=>$e(no(t,EL),e0),Oy=t=>$e(no(t,xL),yW),_L=t=>Ay("h1,h2,h3,h4,h5,h6,a:not([href])",t),CT=t=>bW(t.title).length>0,lR={find:t=>{const s=_L(t);return no(wW(s).concat(Oy(s)),CT)}},Nf="tinymce-url-history",TL=5,kL=t=>j(t)&&/^https?/.test(t),SW=t=>Ce(t)&&t.length<=TL&&Ao(t,kL),ST=t=>ue(t)&&ts(t,s=>!SW(s)).isNone(),AL=()=>{const t=Eg.getItem(Nf);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Nf+" was not valid JSON",a),{};throw a}return ST(s)?s:(console.log("Local storage "+Nf+" was not valid format",s),{})},xW=t=>{if(!ST(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Eg.setItem(Nf,JSON.stringify(t))},EW=t=>{const s=AL();return Tt(s,t).getOr([])},_W=(t,s)=>{if(!kL(t))return;const a=AL(),c=Tt(a,s).getOr([]),d=no(c,h=>h!==t);a[s]=[t].concat(d).slice(0,TL),xW(a)},OL=t=>!!t,TW=t=>Ko(Og.makeMap(t,/[, ]/),OL),uR=t=>M.from(DN(t)),DL=t=>{const s=M.from(MN(t)).filter(OL).map(TW);return uR(t).fold(at,a=>s.fold(it,c=>xs(c).length>0?c:!1))},kW=(t,s)=>{const a=DL(t);return Lt(a)?a?uR(t):M.none():a[s]?uR(t):M.none()},zC=(t,s)=>kW(t,s).map(a=>c=>cc.nu(d=>{const h=(S,T)=>{if(!j(S))throw new Error("Expected value to be string");if(T!==void 0&&!ue(T))throw new Error("Expected meta to be a object");d({value:S,meta:T})},b={filetype:s,fieldname:c.fieldname,...M.from(c.meta).getOr({})};a.call(t,h,c.value,b)})),RL=t=>M.from(t).filter(j).getOrUndefined(),AW=t=>ZE(t)?M.some({targets:lR.find(t.getBody()),anchorTop:RL(rA(t)),anchorBottom:RL(aA(t))}):M.none(),dR=t=>M.from(sA(t)),ML=t=>({getHistory:EW,addToHistory:_W,getLinkInformation:()=>AW(t),getValidationHandler:()=>dR(t),getUrlPicker:s=>zC(t,s)}),xT=(t,s,a,c)=>{const d=gn(!1),h=eR(s),b={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Bd.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:pW(t.dialog),checkUiComponentContext:de=>{if(zE(s))return{contextType:"disabled",shouldDisable:!0};const[Te,Oe=""]=de.split(":"),ze=s.ui.registry.getAll().contexts,We=Tt(ze,Te).fold(()=>Tt(ze,"mode").map(Mt=>Mt("design")).getOr(!1),Mt=>Oe.charAt(0)==="!"?!Mt(Oe.slice(1)):Mt(Oe));return{contextType:Te,shouldDisable:!We}}},S=ML(s),T=gW(s),D=cW(s),P=gL(s),F=()=>d.get(),G=de=>d.set(de),J={shared:{providers:b,anchors:iW(s,a,c,h.isPositionedAtTop),header:h},urlinput:S,styles:T,colorinput:D,dialog:P,isContextMenuOpen:F,setContextMenuState:G},re=de=>M.none(),le={...J,shared:{...J.shared,interpreter:de=>sL(de,{},le,re),getSink:t.popup}},De={...J,shared:{...J.shared,interpreter:de=>sL(de,{},De,re),getSink:t.dialog}};return{popup:le,dialog:De}},OW=(t,s,a)=>{const c=(nt,an)=>{pt([s,...a],Vt=>{Vt.broadcastEvent(nt,an)})},d=(nt,an)=>{pt([s,...a],Vt=>{Vt.broadcastOn([nt],an)})},h=nt=>d(hm(),{target:nt.target}),b=pd(),S=oc(b,"touchstart",h),T=oc(b,"touchmove",nt=>c(CS(),nt)),D=oc(b,"touchend",nt=>c(P1(),nt)),P=oc(b,"mousedown",h),F=oc(b,"mouseup",nt=>{nt.raw.button===0&&d(Pv(),{target:nt.target})}),G=nt=>d(hm(),{target:Ke.fromDom(nt.target)}),J=nt=>{nt.button===0&&d(Pv(),{target:Ke.fromDom(nt.target)})},re=()=>{pt(t.editorManager.get(),nt=>{t!==nt&&nt.dispatch("DismissPopups",{relatedTarget:t})})},le=nt=>c(I1(),xx(nt)),De=nt=>{d(fg(),{}),c(nm(),xx(nt))},de=br(Ke.fromDom(t.getElement())),Te=U2(de,"scroll",nt=>{requestAnimationFrame(()=>{const an=t.getContainer();if(an!=null){const dn=Qp(t,s.element).map(Co=>[Co.element,...Co.others]).getOr([]);Mn(dn,Co=>yo(Co,nt.target))&&(t.dispatch("ElementScroll",{target:nt.target.dom}),c(SS(),nt))}})}),Oe=()=>d(fg(),{}),ze=nt=>{nt.state&&d(hm(),{target:Ke.fromDom(t.getContainer())})},We=nt=>{d(hm(),{target:Ke.fromDom(nt.relatedTarget.getContainer())})},Mt=nt=>t.dispatch("focusin",nt),tn=nt=>t.dispatch("focusout",nt);t.on("PostRender",()=>{t.on("click",G),t.on("tap",G),t.on("mouseup",J),t.on("mousedown",re),t.on("ScrollWindow",le),t.on("ResizeWindow",De),t.on("ResizeEditor",Oe),t.on("AfterProgressState",ze),t.on("DismissPopups",We),pt([s,...a],nt=>{nt.element.dom.addEventListener("focusin",Mt),nt.element.dom.addEventListener("focusout",tn)})}),t.on("remove",()=>{t.off("click",G),t.off("tap",G),t.off("mouseup",J),t.off("mousedown",re),t.off("ScrollWindow",le),t.off("ResizeWindow",De),t.off("ResizeEditor",Oe),t.off("AfterProgressState",ze),t.off("DismissPopups",We),pt([s,...a],nt=>{nt.element.dom.removeEventListener("focusin",Mt),nt.element.dom.removeEventListener("focusout",tn)}),P.unbind(),S.unbind(),T.unbind(),D.unbind(),F.unbind(),Te.unbind()}),t.on("detach",()=>{pt([s,...a],Vu),pt([s,...a],nt=>nt.destroy())})},mi=u3,Sh=Fp,DW=oe([Pe("shell",!1),rt("makeItem"),Pe("setupItem",ce),Tl.field("listBehaviours",[Wn])]),fR=zc({name:"items",overrides:()=>({behaviours:Et([Wn.config({})])})}),RW=oe([fR]),MW=oe("CustomList"),NW=(t,s,a,c)=>{const d=(S,T)=>{b(S).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},D=>{const P=Wn.contents(D),F=T.length,G=F-P.length,J=G>0?fn(G,()=>t.makeItem()):[],re=P.slice(F);pt(re,De=>Wn.remove(D,De)),pt(J,De=>Wn.append(D,De));const le=Wn.contents(D);pt(le,(De,de)=>{t.setupItem(S,De,T[de],de)})})},h=t.shell?{behaviours:[Wn.config({})],components:[]}:{behaviours:[],components:s},b=S=>t.shell?M.some(S):Rs(S,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Fr(t.listBehaviours,h.behaviours),apis:{setItems:d}}},NL=ac({name:MW(),configFields:DW(),partFields:RW(),factory:NW,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Dy=oe([rt("dom"),Pe("shell",!0),Xa("toolbarBehaviours",[Wn])]),nX=oe([zc({name:"groups",overrides:()=>({behaviours:Et([Wn.config({})])})})]),PW=(t,s,a,c)=>{const d=(S,T)=>{h(S).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},D=>{Wn.set(D,T)})},h=S=>t.shell?M.some(S):Rs(S,t,"groups"),b=t.shell?{behaviours:[Wn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:b.components,behaviours:Fr(t.toolbarBehaviours,b.behaviours),apis:{setGroups:d,refresh:ce},domModification:{attributes:{role:"group"}}}},Pf=ac({name:"Toolbar",configFields:Dy(),partFields:nX(),factory:PW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),PL=ce,ET=at,mR=oe([]);var IW=Object.freeze({__proto__:null,setup:PL,isDocked:ET,getBehaviours:mR});const hR=oe(on("toolbar-height-change")),xh={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},IL="tox-tinymce--toolbar-sticky-on",BL="tox-tinymce--toolbar-sticky-off",BW=(t,s)=>{const a=Ps(s),d=Pc(s).dom.innerHeight,h=Va(a),b=Ke.fromDom(t.elm),S=Ei(b),T=xr(b),D=S.y,P=D+T,F=Ta(s),G=xr(s),J=F.top,re=J+G,le=Math.abs(J-h.top)<2,De=Math.abs(re-(h.top+d))<2;if(le&&D<re)ku(h.left,D-G,a);else if(De&&P>J){const de=D-d+T+G;ku(h.left,de,a)}},_T=(t,s)=>wt(js.getModes(t),s),TT=t=>{const s=c=>Hl(c)+(parseInt(ut(c,"margin-top"),10)||0)+(parseInt(ut(c,"margin-bottom"),10)||0),a=t.element;ii(a).each(c=>{const d="padding-"+js.getModes(t)[0];if(js.isDocked(t)){const h=oo(c);It(a,"width",h+"px"),It(c,d,s(a)+"px")}else uo(a,"width"),uo(c,d)})},gR=(t,s)=>{s?(mr(t,xh.fadeOutClass),ip(t,[xh.transitionClass,xh.fadeInClass])):(mr(t,xh.fadeInClass),ip(t,[xh.fadeOutClass,xh.transitionClass]))},LL=(t,s)=>{const a=Ke.fromDom(t.getContainer());s?(Lr(a,IL),mr(a,BL)):(Lr(a,BL),mr(a,IL))},FL=(t,s)=>{const a=Ps(s);dm(a).filter(c=>!yo(s,c)).filter(c=>yo(c,Ke.fromDom(a.dom.body))||bc(t,c)).each(()=>$c(s))},LW=(t,s)=>nc(t).orThunk(()=>s().toOptional().bind(a=>nc(a.element))),FW=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(js.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(TT)}),t.on("SkinLoaded",()=>{a().each(c=>{js.isDocked(c)?js.reset(c):js.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(js.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{js.refresh(d);const h=d.element;Dw(h)&&BW(c,h)})}),t.on("PostRender",()=>{LL(t,!1)})},$W=t=>t().map(js.isDocked).getOr(!1),t0=()=>[ol.config({channels:{[hR()]:{onReceive:TT}}})],pR=(t,s)=>{const a=Xo(),c=s.getSink,d=S=>{c().each(T=>S(T.element))},h=S=>{t.inline||TT(S),LL(t,js.isDocked(S)),S.getSystem().broadcastOn([fg()],{}),c().each(T=>T.getSystem().broadcastOn([fg()],{}))},b=t.inline?[]:t0();return[$n.config({}),js.config({contextual:{lazyContext:S=>{const T=Hl(S.element),D=t.inline?t.getContentAreaContainer():t.getContainer();return M.from(D).map(P=>{const F=Jr(Ke.fromDom(P));return Qp(t,S.element).fold(()=>{const J=F.height-T,re=F.y+(_T(S,"top")?0:T);return Js(F.x,re,F.width,J)},J=>{const re=Kf(F,e1(J)),le=_T(S,"top")?re.y:re.y+T;return Js(re.x,le,re.width,re.height-T)})})},onShow:()=>{d(S=>gR(S,!0))},onShown:S=>{d(T=>kd(T,[xh.transitionClass,xh.fadeInClass])),a.get().each(T=>{FL(S.element,T),a.clear()})},onHide:S=>{LW(S.element,c).fold(a.clear,a.set),d(T=>gR(T,!1))},onHidden:()=>{d(S=>kd(S,[xh.transitionClass]))},...xh},lazyViewport:S=>Qp(t,S.element).fold(()=>{const D=Qr(),P=oA(t),F=D.y+(_T(S,"top")&&!hA(t)?P:0),G=D.height-(_T(S,"bottom")?P:0);return{bounds:Js(D.x,F,D.width,G),optScrollEnv:M.none()}},D=>({bounds:e1(D),optScrollEnv:M.some({currentScrollTop:D.element.dom.scrollTop,scrollElmTop:Ta(D.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...b]};var VC=Object.freeze({__proto__:null,setup:FW,isDocked:$W,getBehaviours:pR});const kT=t=>{const s=t.editor,a=t.sticky?pR:mR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Et(a(s,t.sharedBackstage))}},$L=Bn([ha,Uo("items",Jf([qg([FA,Cc("items",Wt)]),Wt]))].concat(ly)),HL=t=>fr("GroupToolbarButton",$L,t),zL=[yr("text"),yr("tooltip"),yr("icon"),$s("search",!1,Jf([tl,Bn([yr("placeholder")])],t=>Lt(t)?t?M.some({placeholder:M.none()}):M.none():M.some(t))),Sl("fetch"),os("onSetup",()=>ce),er("context","mode:design")],HW=Bn([ha,...zL]),VL=t=>fr("menubutton",HW,t),zW=Bn([ha,iy,Ku,s1,l9,HA,o1,Aa("presets","normal",["normal","color","listpreview"]),DP(1),ay,i9,er("context","mode:design")]),VW=t=>fr("SplitButton",zW,t);var bR=al({factory:(t,s)=>{const a=(d,h)=>{const b=$e(h,S=>{const T={type:"menubutton",text:S.text,fetch:P=>{P(S.getItems())},context:"any"},D=VL(T).mapError(P=>Jl(P)).getOrDie();return Rg(D,"tox-mbtn",s.backstage,M.some("menuitem"))});Wn.set(d,b)},c={focus:Sn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Et([Wn.config({}),Kn("menubar-events",[tr(d=>{t.onSetup(d)}),ot(Bc(),(d,h)=>{ir(d.element,".tox-mbtn--active").each(b=>{Rd(h.event.target,".tox-mbtn").each(S=>{yo(b,S)||d.getSystem().getByDom(b).each(T=>{d.getSystem().getByDom(S).each(D=>{Yu.expand(D),Yu.close(T),$n.focus(D)})})})})}),ot(B1(),(d,h)=>{h.event.prevFocus.bind(b=>d.getSystem().getByDom(b).toOptional()).each(b=>{h.event.newFocus.bind(S=>d.getSystem().getByDom(S).toOptional()).each(S=>{Yu.isOpen(b)&&(Yu.expand(S),Yu.close(b))})})})]),Sn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),M.some(!0))}),cr.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[rt("dom"),rt("uid"),rt("onEscape"),rt("backstage"),Pe("onSetup",ce)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const Ry="⚡️Upgrade",UC="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",vR=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:UC,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Ry}}]}),UL="container",UW=[Xa("slotBehaviours",[])],AT=t=>"<alloy.field."+t+">",WW=t=>{const s=(()=>{const h=[];return{slot:(S,T)=>(h.push(S),Cw(UL,AT(S),T)),record:oe(h)}})(),a=t(s),c=s.record(),d=$e(c,h=>Ii({name:h,pname:AT(h)}));return Tb(UL,UW,d,WC,a)},WC=(t,s)=>{const a=le=>Tw(t),c=(le,De)=>Rs(le,t,De),d=(le,De)=>(de,Te)=>Rs(de,t,Te).map(Oe=>le(Oe,Te)).getOr(De),h=le=>(De,de)=>{pt(de,Te=>le(De,Te))},b=(le,De)=>Vn(le.element,"aria-hidden")!=="true",S=(le,De)=>{if(!b(le)){const de=le.element;uo(de,"display"),ee(de,"aria-hidden"),bn(le,np(),{name:De,visible:!0})}},T=(le,De)=>{if(b(le)){const de=le.element;It(de,"display","none"),$t(de,"aria-hidden","true"),bn(le,np(),{name:De,visible:!1})}},D=d(b,!1),P=d(T),F=h(P),G=le=>F(le,a()),J=d(S),re={getSlotNames:a,getSlot:c,isShowing:D,hideSlot:P,hideAllSlots:G,showSlot:J};return{uid:t.uid,dom:t.dom,components:s,behaviours:yb(t.slotBehaviours),apis:re}},Dc={...Ko({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Y0(t)),sketch:WW},jW=Bn([Ku,iy,os("onShow",ce),os("onHide",ce),o1]),qW=t=>fr("sidebar",jW,t),GW=t=>{const{sidebars:s}=t.ui.registry.getAll();pt(xs(s),a=>{const c=s[a],d=()=>Ur(M.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const b=()=>h.setActive(d());return t.on("ToggleSidebar",b),()=>{t.off("ToggleSidebar",b)}},context:"any"})})},KW=t=>({element:()=>t.element.dom}),YW=(t,s)=>{const a=$e(xs(s),c=>{const d=s[c],h=bt(qW(d));return{name:c,getApi:KW,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return $e(a,c=>{const d=gn(ce);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Hb.unnamedEvents([kf(c,d),Bi(c,d),ot(np(),(h,b)=>{const S=b.event;et(a,D=>D.name===S.name).each(D=>{(S.visible?D.onShow:D.onHide)(D.getApi(h))})})])})})},WL=t=>Dc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:YW(s,t),slotBehaviours:Hb.unnamedEvents([tr(a=>Dc.hideAllSlots(a))])})),ZL=(t,s,a)=>{Mo.getCurrent(t).each(d=>{Wn.set(d,[WL(s)]);const h=a==null?void 0:a.toLowerCase();j(h)&&go(s,h)&&Mo.getCurrent(d).each(b=>{Dc.showSlot(b,h),dl.immediateGrow(d),uo(d.element,"width"),My(t.element,"region")})})},My=(t,s)=>{$t(t,"role",s)},XW=(t,s)=>{Mo.getCurrent(t).each(c=>{Mo.getCurrent(c).each(h=>{dl.hasGrown(c)?Dc.isShowing(h,s)?(dl.shrink(c),My(t.element,"presentation")):(Dc.hideAllSlots(h),Dc.showSlot(h,s),My(t.element,"region")):(Dc.hideAllSlots(h),Dc.showSlot(h,s),dl.grow(c),My(t.element,"region"))})})},OT=t=>Mo.getCurrent(t).bind(a=>dl.isGrowing(a)||dl.hasGrown(a)?Mo.getCurrent(a).bind(h=>et(Dc.getSlotNames(h),b=>Dc.isShowing(h,b))):M.none()),Ny=on("FixSizeEvent"),DT=on("AutoSizeEvent"),JW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Et([cr.config({}),$n.config({}),dl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Mo.getCurrent(s).each(Dc.hideAllSlots),bo(s,DT)},onGrown:s=>{bo(s,DT)},onStartGrow:s=>{bn(s,Ny,{width:us(s.element,"width").getOr("")})},onStartShrink:s=>{bn(s,Ny,{width:oo(s.element)+"px"})}}),Wn.config({}),Mo.config({find:s=>{const a=Wn.contents(s);return Ws(a)}})])}],behaviours:Et([uc.childAt(0),Kn("sidebar-sliding-events",[ot(Ny,(s,a)=>{It(s.element,"width",a.event.width)}),ot(DT,(s,a)=>{uo(s.element,"width")})])])});var yR=Object.freeze({__proto__:null,block:(t,s,a,c)=>{$t(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=Et([Sn.config({mode:"special",onTab:()=>M.some(!0),onShiftTab:()=>M.some(!0)}),$n.config({})]),b=c(d,h),S=d.getSystem().build(b);Wn.append(d,El(S)),S.hasConfigured(Sn)&&s.focus&&Sn.focusIn(S),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Wn.remove(d,S))},unblock:(t,s,a)=>{ee(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),QW=[os("getRoot",M.none),Oa("focus",!0),ko("onBlock"),ko("onUnblock")],eZ=Object.freeze({__proto__:null,init:()=>{const t=Au(),s=a=>{t.set({destroy:a})};return di({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Wd=wa({fields:QW,name:"blocking",apis:yR,state:eZ}),tZ=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Sm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),qL=t=>Mo.getCurrent(t).each(s=>$c(s.element,!0)),nZ=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;M.from(t.iframeElement).map(Ke.fromDom).each(d=>{s?(To(d,a).each(h=>$t(d,c,h)),$t(d,a,-1)):(ee(d,a),To(d,c).each(h=>{$t(d,a,h),ee(d,c)}))})},oZ=(t,s,a,c)=>{const d=s.element;if(nZ(t,a),a)Wd.block(s,tZ(c)),uo(d,"display"),ee(d,"aria-hidden"),t.hasFocus()&&qL(s);else{const h=Mo.getCurrent(s).exists(b=>hf(b.element));Wd.unblock(s),It(d,"display","none"),$t(d,"aria-hidden","true"),h&&t.focus()}},sZ=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Et([Wn.config({}),Wd.config({focus:!1}),Mo.config({find:s=>Ws(s.components())})]),components:[]}),iX=t=>t.type==="focusin",cX=t=>iX(t)?(t.composed?Ws(t.composedPath()):M.from(t.target)).map(Ke.fromDom).filter(lr).exists(a=>xc(a,"mce-pastebin")):!1,GL=(t,s,a)=>{const c=gn(!1),d=Xo(),h=S=>{c.get()&&!cX(S)&&(S.preventDefault(),qL(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",S=>{S.command.toLowerCase()==="mcefocus"&&S.value!==!0&&h(S)})});const b=S=>{S!==c.get()&&(c.set(S),oZ(t,s(),S,a.providers),dI(t,S))};t.on("ProgressState",S=>{if(d.on(clearTimeout),ln(S.time)){const T=FE.setEditorTimeout(t,()=>b(S.state),S.time);d.set(T)}else b(S.state),d.clear()})},rZ=(t,s)=>zo(t,(d,h)=>s(h,d.len).fold(oe(d),S=>({len:S.finish,list:d.list.concat([S])})),{len:0,list:[]}).list,RT=(t,s,a)=>({within:t,extra:s,withinWidth:a}),KL=(t,s,a)=>{const c=rZ(t,(S,T)=>{const D=a(S);return M.some({element:S,start:T,finish:T+D,width:D})}),d=no(c,S=>S.finish<=s),h=_o(d,(S,T)=>S+T.width,0),b=c.slice(d.length);return{within:d,extra:b,withinWidth:h}},MT=t=>$e(t,s=>s.element),aZ=(t,s,a)=>{const c=MT(t.concat(s));return RT(c,[],a)},iZ=(t,s,a,c)=>{const d=MT(t).concat([a]);return RT(d,MT(s),c)},cZ=(t,s,a)=>RT(MT(t),[],a),YL=(t,s,a)=>{const c=KL(s,t,a);return c.extra.length===0?M.some(c):M.none()},lZ=(t,s,a,c)=>{const d=YL(t,s,a).getOrThunk(()=>KL(s,t-a(c),a)),h=d.within,b=d.extra,S=d.withinWidth;return b.length===1&&b[0].width<=a(c)?aZ(h,b,S):b.length>=1?iZ(h,b,c,S):cZ(h,b,S)},XL=(t,s)=>{const a=$e(s,c=>El(c));Pf.setGroups(t,a)},uZ=t=>Ss(t,s=>nc(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),dZ=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=rl(t,s,"primary"),h=Zr.getCoupled(t,"overflowGroup");It(d.element,"visibility","hidden");const b=c.concat([h]),S=uZ(b);a([]),XL(d,b);const T=oo(d.element),D=lZ(T,s.builtGroups.get(),P=>Math.ceil(P.element.dom.getBoundingClientRect().width),h);D.extra.length===0?(Wn.remove(d,h),a([])):(XL(d,D.within),a(D.extra)),uo(d.element,"visibility"),yi(d.element),S.each($n.focus)},fZ=oe([Xa("splitToolbarBehaviours",[Zr]),qo("builtGroups",()=>gn([]))]),JL=oe([im(["overflowToggledClass"]),yd("getOverflowBounds"),rt("lazySink"),qo("overflowGroups",()=>gn([])),ko("onOpened"),ko("onClosed")].concat(fZ())),QL=oe([Ii({factory:Pf,schema:Dy(),name:"primary"}),iu({schema:Dy(),name:"overflow"}),iu({name:"overflow-button"}),iu({name:"overflow-group"})]),wR=oe((t,s)=>{Vl(t,Math.floor(s))}),mZ=oe([im(["toggledClass"]),rt("lazySink"),Sl("fetch"),yd("getBounds"),ca("fireDismissalEventInstead",[Pe("event",xd())]),fh(),ko("onToggled")]),Ju=oe([iu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Et([mo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),iu({factory:Pf,schema:Dy(),name:"toolbar",overrides:t=>({toolbarBehaviours:Et([Sn.config({mode:"cyclic",onEscape:s=>(Rs(s,t,"button").each($n.focus),M.none())})])})})]),NT=Xo(),e8=(t,s)=>{NT.set(!0),PT(t,s),NT.clear()},PT=(t,s)=>{const a=Zr.getCoupled(t,"toolbarSandbox");Po.isOpen(a)?Po.close(a):Po.open(a,s.toolbar())},CR=(t,s,a,c)=>{const d=a.getBounds.map(b=>b()),h=a.lazySink(t).getOrDie();Ya.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:wR()}}},d)},Py=(t,s,a,c,d)=>{Pf.setGroups(s,d),CR(t,s,a,c),mo.on(t)},hZ=(t,s,a)=>{const c=ax(),d=(b,S)=>{const T=NT.get().getOr(!1);a.fetch().get(D=>{Py(t,S,a,s.layouts,D),c.link(t.element),T||Sn.focusIn(S)})},h=()=>{mo.off(t),NT.get().getOr(!1)||$n.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:Et([Sn.config({mode:"special",onEscape:b=>(Po.close(b),M.some(!0))}),Po.config({onOpen:d,onClose:h,isPartOf:(b,S,T)=>ch(S,T)||ch(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),ol.config({channels:{...Hc({isExtraPart:at,...a.fireDismissalEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({})}),...mg({doReposition:()=>{Po.getState(Zr.getCoupled(t,"toolbarSandbox")).each(b=>{CR(t,b,a,s.layouts)})}})}})])}},f1=ac({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Na.sketch({...c.button(),action:d=>{PT(d,c)},buttonBehaviours:Tl.augment({dump:c.button().buttonBehaviours},[Zr.config({others:{toolbarSandbox:d=>hZ(d,a,t)}})])}),apis:{setGroups:(d,h)=>{Po.getState(Zr.getCoupled(d,"toolbarSandbox")).each(b=>{Py(d,b,t,a.layouts,h)})},reposition:d=>{Po.getState(Zr.getCoupled(d,"toolbarSandbox")).each(h=>{CR(d,h,t,a.layouts)})},toggle:d=>{PT(d,c)},toggleWithoutFocusing:d=>{e8(d,c)},getToolbar:d=>Po.getState(Zr.getCoupled(d,"toolbarSandbox")),isOpen:d=>Po.isOpen(Zr.getCoupled(d,"toolbarSandbox"))}}),configFields:mZ(),partFields:Ju(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),IT=oe([rt("items"),im(["itemSelector"]),Xa("tgroupBehaviours",[Sn])]),gZ=oe([_b({name:"items",unit:"item"})]),pZ=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.tgroupBehaviours,[Sn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Rl=ac({name:"ToolbarGroup",configFields:IT(),partFields:gZ(),factory:pZ}),t8=t=>$e(t,s=>El(s)),ZC=(t,s,a)=>{dZ(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{f1.setGroups(d,t8(c))})})},n8=(t,s,a,c)=>{const d=Jo(f1.sketch({fetch:()=>cc.nu(h=>{h(t8(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Sa,Ca],onRtl:()=>[Ca,Sa],onBottomLtr:()=>[ps,Ra],onBottomRtl:()=>[Ra,ps]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(h,b)=>t[b?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.splitToolbarBehaviours,[Zr.config({others:{overflowGroup:()=>Rl.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,b)=>{t.builtGroups.set($e(b,h.getSystem().build)),ZC(h,d,t)},refresh:h=>ZC(h,d,t),toggle:h=>{d.getOpt(h).each(b=>{f1.toggle(b)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(f1.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(f1.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(b=>{f1.reposition(b)})},getOverflow:h=>d.getOpt(h).bind(f1.getToolbar)},domModification:{attributes:{role:"group"}}}},xR=ac({name:"SplitFloatingToolbar",configFields:JL(),partFields:QL(),factory:n8,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),bZ=oe([im(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ko("onOpened"),ko("onClosed")].concat(fZ())),o8=oe([Ii({factory:Pf,schema:Dy(),name:"primary"}),Ii({factory:Pf,schema:Dy(),name:"overflow",overrides:t=>({toolbarBehaviours:Et([dl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Rs(s,t,"overflow-button").each(a=>{mo.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Rs(s,t,"overflow-button").each(mo.on)}}),Sn.config({mode:"acyclic",onEscape:s=>(Rs(s,t,"overflow-button").each($n.focus),M.some(!0))})])})}),iu({name:"overflow-button",overrides:t=>({buttonBehaviours:Et([mo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),iu({name:"overflow-group"})]),vZ=(t,s)=>Rs(t,s,"overflow").map(dl.hasGrown).getOr(!1),ER=(t,s,a)=>{Rs(t,s,"overflow-button").each(c=>{Rs(t,s,"overflow").each(d=>{if(_R(t,s),dl.hasShrunk(d)){const h=s.onOpened;s.onOpened=b=>{a||Sn.focusIn(d),h(b),s.onOpened=h}}else{const h=s.onClosed;s.onClosed=b=>{a||$n.focus(c),h(b),s.onClosed=h}}dl.toggleGrow(d)})})},_R=(t,s)=>{Rs(t,s,"overflow").each(a=>{dZ(t,s,c=>{const d=$e(c,h=>El(h));Pf.setGroups(a,d)}),Rs(t,s,"overflow-button").each(c=>{dl.hasGrown(a)&&mo.on(c)}),dl.refresh(a)})},yZ=(t,s,a,c)=>{const d="alloy.toolbar.toggle",h=(b,S)=>{const T=$e(S,b.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.splitToolbarBehaviours,[Zr.config({others:{overflowGroup:b=>Rl.sketch({...c["overflow-group"](),items:[Na.sketch({...c["overflow-button"](),action:S=>{bo(b,d)}})]})}}),Kn("toolbar-toggle-events",[ot(d,b=>{ER(b,t,!1)})])]),apis:{setGroups:(b,S)=>{h(b,S),_R(b,t)},refresh:b=>_R(b,t),toggle:b=>{ER(b,t,!1)},toggleWithoutFocusing:b=>{ER(b,t,!0)},isOpen:b=>vZ(b,t)},domModification:{attributes:{role:"group"}}}},TR=ac({name:"SplitSlidingToolbar",configFields:bZ(),partFields:o8(),factory:yZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),s8=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{title:a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[or(a)]})).toArray(),Rl.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Et([cr.config({}),$n.config({})])}},BT=t=>Rl.sketch(s8(t)),kR=(t,s)=>{const a=tr(c=>{const d=$e(t.initGroups,BT);Pf.setGroups(c,d)});return Et([$d.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),ga(()=>t.providers.checkUiComponentContext("any")),Sn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Kn("toolbar-events",[a])])},AR=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":s8({title:M.none(),label:M.none(),items:[]}),"overflow-button":qB({context:"any",name:"more",icon:M.some("more-drawer"),enabled:!0,tooltip:M.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:M.none(),borderless:!1},M.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:kR(t,s)}},r8=t=>{const s=AR(t),a=4,c=xR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return xR.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=Ei(d),b=$i(d),S=Ei(b),T=Math.max(b.dom.scrollHeight,S.height);return Js(h.x+a,S.y,h.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},wZ=t=>{const s=TR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=TR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=AR(t);return TR.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([hR()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([hR()],{type:"closed"}),t.onToggled(d,!1)}})},LT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Pf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===qu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Pf.parts.groups({})],toolbarBehaviours:kR(t,s)})},OR=[s1,Ku,yr("tooltip"),Aa("buttonType","secondary",["primary","secondary"]),Oa("borderless",!1),Sl("onAction"),er("context","mode:design")],a8=[...OR,xg,ya("type",["button"])],i8=[...OR,Oa("active",!1),ya("type",["togglebutton"])],c8={button:a8,togglebutton:i8},CZ=[ya("type",["group"]),_("buttons",[],ra("type",c8))],SZ=ra("type",{...c8,group:CZ}),l8=Bn([_("buttons",[],SZ),Sl("onShow"),Sl("onHide")]),xZ=t=>fr("view",l8,t),EZ=(t,s)=>{var a,c;const d=t.type==="togglebutton",h=t.icon.map(Oe=>c1(Oe,s.icons)).map(Jo),S=Oe=>{const ze=nt=>{h.map(an=>an.getOpt(Oe).each(Vt=>{Wn.set(Vt,[c1(nt,s.icons)])}))},We=nt=>{const an=Oe.element;nt?(Lr(an,"tox-button--enabled"),$t(an,"aria-pressed",!0)):(mr(an,"tox-button--enabled"),ee(an,"aria-pressed"))},Mt=()=>xc(Oe.element,"tox-button--enabled"),tn=()=>$c(Oe.element);if(d)return t.onAction({setIcon:ze,setActive:We,isActive:Mt,focus:tn});if(t.type==="button")return t.onAction({setIcon:ze})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:M.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},D=fT((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),P=d?t.text.map(s.translate):M.some(s.translate(t.text)),F=P.map(or),G=T.tooltip.or(P).map(Oe=>({"aria-label":s.translate(Oe)})).getOr({}),J=h.map(Oe=>Oe.asSpec()),re=my([J,F]),le=t.icon.isSome()&&F.isSome(),De={tag:"button",classes:D.concat(...t.icon.isSome()&&!le?["tox-button--icon"]:[]).concat(...le?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:G},de=[],Te=dT(T,M.some(S),de,De,re,t.tooltip,s);return Na.sketch(Te)},u8=(t,s)=>EZ(t,s),_Z=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:$e(t.buttons,a=>u8(a,s))}),d8=dr().deviceType,TZ=d8.isPhone(),kZ=d8.isTablet(),AZ=t=>{let s=!1;const a=$e(t.buttons,c=>c.type==="group"?(s=!0,_Z(c,t.providers)):u8(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...TZ||kZ?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Et([$n.config({}),Sn.config({mode:"flow",selector:"button, .tox-button",focusInside:yg.OnEnterOrSpaceMode})]),components:s?a:[Tm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Tm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},OZ=t=>({uid:t.uid,behaviours:Et([$n.config({}),cr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),DZ=(t,s,a,c)=>{const d={getPane:h=>mi.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Et([$n.config({}),Sn.config({mode:"cyclic",focusInside:yg.OnEnterOrSpaceMode})]),apis:d}};var n0=ac({name:"silver.View",configFields:[rt("viewConfig")],partFields:[zc({factory:{sketch:AZ},schema:[rt("buttons"),rt("providers")],name:"header"}),zc({factory:{sketch:OZ},schema:[],name:"pane"})],factory:DZ,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const RZ=(t,s,a)=>Ki(s,(c,d)=>{const h=bt(xZ(c));return t.slot(d,n0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[n0.parts.header({buttons:h.buttons,providers:a})]:[],n0.parts.pane({})]}))}),MZ=(t,s)=>Dc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:RZ(a,t,s),slotBehaviours:Hb.unnamedEvents([tr(c=>Dc.hideAllSlots(c))])})),FT=t=>et(Dc.getSlotNames(t),s=>Dc.isShowing(t,s)),NZ=t=>{const s=t.element;It(s,"display","none"),$t(s,"aria-hidden","true")},$T=t=>{const s=t.element;uo(s,"display"),ee(s,"aria-hidden")},PZ=t=>({getContainer:oe(t)}),DR=(t,s,a)=>{Dc.getSlot(t,s).each(c=>{n0.getPane(c).each(d=>{a(c)(PZ(d.element.dom))})})},IZ=(t,s)=>DR(t,s,n0.getOnShow),BZ=(t,s)=>DR(t,s,n0.getOnHide);var HT=al({factory:(t,s)=>{const h={setViews:(b,S)=>{Wn.set(b,[MZ(S,s.backstage.shared.providers)])},whichView:b=>Mo.getCurrent(b).bind(FT),toggleView:(b,S,T,D)=>Mo.getCurrent(b).exists(P=>{const F=FT(P),G=F.exists(re=>D===re),J=Dc.getSlot(P,D).isSome();return J&&(Dc.hideAllSlots(P),G?(NZ(b),S()):(T(),$T(b),Dc.showSlot(P,D),IZ(P,D)),F.each(re=>BZ(P,re))),J})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Et([Wn.config({}),Mo.config({find:b=>{const S=Wn.contents(b);return Ws(S)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[rt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const LZ=(t,s,a)=>{let c=!1;const d=b=>{C4(b,".tox-statusbar").each(S=>{ut(S,"display")==="none"&&Vn(S,"aria-hidden")==="true"?(uo(S,"display"),ee(S,"aria-hidden")):(It(S,"display","none"),$t(S,"aria-hidden","true"))})},h={getSocket:b=>mi.getPart(b,t,"socket"),setSidebar:(b,S,T)=>{mi.getPart(b,t,"sidebar").each(D=>ZL(D,S,T))},toggleSidebar:(b,S)=>{mi.getPart(b,t,"sidebar").each(T=>XW(T,S))},whichSidebar:b=>mi.getPart(b,t,"sidebar").bind(OT).getOrNull(),getHeader:b=>mi.getPart(b,t,"header"),getToolbar:b=>mi.getPart(b,t,"toolbar"),setToolbar:(b,S)=>{mi.getPart(b,t,"toolbar").each(T=>{const D=$e(S,BT);T.getApis().setGroups(T,D)})},setToolbars:(b,S)=>{mi.getPart(b,t,"multiple-toolbar").each(T=>{const D=$e(S,P=>$e(P,BT));NL.setItems(T,D)})},refreshToolbar:b=>{mi.getPart(b,t,"toolbar").each(T=>T.getApis().refresh(T))},toggleToolbarDrawer:b=>{mi.getPart(b,t,"toolbar").each(S=>{Yo(S.getApis().toggle,T=>T(S))})},toggleToolbarDrawerWithoutFocusing:b=>{mi.getPart(b,t,"toolbar").each(S=>{Yo(S.getApis().toggleWithoutFocusing,T=>T(S))})},isToolbarDrawerToggled:b=>mi.getPart(b,t,"toolbar").bind(S=>M.from(S.getApis().isOpen).map(T=>T(S))).getOr(!1),getThrobber:b=>mi.getPart(b,t,"throbber"),focusToolbar:b=>{mi.getPart(b,t,"toolbar").orThunk(()=>mi.getPart(b,t,"multiple-toolbar")).each(T=>{Sn.focusIn(T)})},setMenubar:(b,S)=>{mi.getPart(b,t,"menubar").each(T=>{bR.setMenus(T,S)})},focusMenubar:b=>{mi.getPart(b,t,"menubar").each(S=>{bR.focus(S)})},setViews:(b,S)=>{mi.getPart(b,t,"viewWrapper").each(T=>{HT.setViews(T,S)})},toggleView:(b,S)=>mi.getPart(b,t,"viewWrapper").exists(T=>HT.toggleView(T,()=>h.showMainView(b),()=>h.hideMainView(b),S)),whichView:b=>mi.getPart(b,t,"viewWrapper").bind(HT.whichView).getOrNull(),hideMainView:b=>{c=h.isToolbarDrawerToggled(b),c&&h.toggleToolbarDrawer(b),mi.getPart(b,t,"editorContainer").each(S=>{const T=S.element;d(T),It(T,"display","none"),$t(T,"aria-hidden","true")})},showMainView:b=>{c&&h.toggleToolbarDrawer(b),mi.getPart(b,t,"editorContainer").each(S=>{const T=S.element;d(T),uo(T,"display"),ee(T,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:h,behaviours:t.behaviours}},RR=Sh.optional({factory:bR,name:"menubar",schema:[rt("backstage")]}),FZ=t=>t.type===qu.sliding?wZ:t.type===qu.floating?r8:LT,zT=Sh.optional({factory:{sketch:t=>NL.sketch({uid:t.uid,dom:t.dom,listBehaviours:Et([Sn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>LT({type:t.type,uid:on("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),M.some(!0))}),setupItem:(s,a,c,d)=>{Pf.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[rt("dom"),rt("onEscape")]}),f8=Sh.optional({factory:{sketch:t=>{const s=FZ(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),M.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[rt("dom"),rt("onEscape"),rt("getSink")]}),m8=Sh.optional({factory:{sketch:kT},name:"header",schema:[rt("dom")]}),MR=Sh.optional({factory:{sketch:vR},name:"promotion",schema:[rt("dom")]}),$Z=Sh.optional({name:"socket",schema:[rt("dom")]}),h8=Sh.optional({factory:{sketch:JW},name:"sidebar",schema:[rt("dom")]}),Iy=Sh.optional({factory:{sketch:sZ},name:"throbber",schema:[rt("dom")]}),g8=Sh.optional({factory:HT,name:"viewWrapper",schema:[rt("backstage")]}),HZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),zZ=Sh.optional({factory:{sketch:HZ},name:"editorContainer",schema:[]});var Ks=ac({name:"OuterContainer",factory:LZ,configFields:[rt("dom"),rt("behaviours")],partFields:[m8,RR,f8,zT,$Z,h8,MR,Iy,g8,zZ],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const NR="file edit view insert format tools table help",p8={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},VZ=(t,s,a)=>{const c=TN(a).split(/[ ,]/);return{text:t.title,getItems:()=>xe(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:Mn(c,b=>b===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},VT=t=>t.split(" "),PR=(t,s)=>{const a={...p8,...s.menus},c=xs(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?VT(NR):VT(s.menubar===!1?"":s.menubar),h=no(d,S=>{const T=go(p8,S);return c?T||Tt(s.menus,S).exists(D=>go(D,"items")):T}),b=$e(h,S=>{const T=a[S];return VZ({title:T.title,items:VT(T.items)},s,t)});return no(b,S=>{const T=D=>j(D)||D.type!=="separator";return S.getItems().length>0&&Mn(S.getItems(),T)})},UT=t=>{const s=()=>{t._skinLoaded=!0,B9(t)};return()=>{t.initialized?s():t.on("init",s)}},IR=(t,s)=>()=>L9(t,{message:s}),UZ=t=>{const s=$w(t);return s?M.from(s):M.none()},b8=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),jC=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),WZ=(t,s)=>"ui/"+t+"/"+s,ZZ=t=>M.from(tinymce.Resource.get(t)).filter(j),BR=(t,s,a="")=>{const c=UZ(t).map(h=>WZ(h,`${s}.css`)),d=c.bind(ZZ);return Fa(c,d,(h,b)=>({_kind:"load-raw",key:h,css:b})).getOrThunk(()=>{const h=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${h}.css`}})},v8=(t,s)=>{const a=t.ui.styleSheetLoader,c=BR(t,"skin",s);switch(c._kind){case"load-raw":const{key:d,css:h}=c;return jC(t,d,h,a),Promise.resolve();case"load-stylesheet":const{url:b}=c;return b8(t,b,a);default:return Promise.resolve()}},jZ=(t,s)=>{if(vi(Ke.fromDom(t.getElement()))){const c=Bw.DOM.styleSheetLoader,d=BR(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:h,css:b}=d;return jC(t,h,b,c),Promise.resolve();case"load-stylesheet":const{url:S}=d;return b8(t,S,c);default:return Promise.resolve()}}else return Promise.resolve()},qZ=(t,s,a)=>{const d=BR(t,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:h,css:b}=d;return s?jC(t,h,b,t.ui.styleSheetLoader):t.on("PostRender",()=>{jC(t,h,b,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:S}=d;return a&&t.contentCSS.push(S),Promise.resolve();default:return Promise.resolve()}},LR=async(t,s)=>{const a=$N(s);if(await qZ(s,t,a),!lA(s)&&j(a))return Promise.all([v8(s,a),jZ(s,a)]).then()},y8=(t,s)=>LR(t,s).then(UT(s),IR(s,"Skin could not be loaded")),GZ=en(y8,!1),w8=en(y8,!0),By=(t,s,a)=>fe(a)?t.translate(s):t.translate([s,t.translate(a)]),C8=(t,s)=>{const a=(b,S,T,D)=>{const P=t.shared.providers.translate(b.title);if(b.type==="separator")return M.some({type:"separator",text:P});if(b.type==="submenu"){const F=xe(b.getStyleItems(),G=>c(G,S,D));return S===0&&F.length<=0?M.none():M.some({type:"nestedmenuitem",text:P,enabled:F.length>0,getSubmenuItems:()=>xe(b.getStyleItems(),G=>c(G,S,D))})}else return M.some({type:"togglemenuitem",text:P,icon:b.icon,active:b.isSelected(D),enabled:!T,onAction:s.onAction(b),...b.getStylePreview().fold(()=>({}),F=>({meta:{style:F}}))})},c=(b,S,T)=>{const D=b.type==="formatter"&&s.isInvalid(b);return S===0?D?[]:a(b,S,!1,T).toArray():a(b,S,D,T).toArray()},d=b=>{const S=s.getCurrentValue(),T=s.shouldHide?0:1;return xe(b,D=>c(D,T,S))};return{validateItems:d,getFetch:(b,S)=>(T,D)=>{const P=S(),F=d(P),G=_y(F,xf.CLOSE_ON_EXECUTE,b,{isHorizontalMenu:!1,search:M.none()});D(G)}}},Ly=(t,s)=>{const a=s.dataset,c=a.type==="basic"?()=>$e(a.data,d=>yL(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:C8(t,s),getStyleItems:c}},Fy=(t,s,a,c,d,h)=>{const{items:b,getStyleItems:S}=Ly(s,a),T=gn(a.tooltip),D=F=>({getComponent:oe(F),setTooltip:G=>{const J=s.shared.providers.translate(G);$t(F.element,"aria-label",J),T.set(G)}}),P=F=>{const G=J=>F.setTooltip(By(t,c(J.value),J.value));return t.on(d,G),Wb(Zb(t,"NodeChange",J=>{const re=J.getComponent();a.updateText(re),vn.set(J.getComponent(),!t.selection.isEditable())})(F),()=>t.off(d,G))};return TD({context:"mode:design",text:a.icon.isSome()?M.none():a.text,icon:a.icon,ariaLabel:M.some(a.tooltip),tooltip:M.none(),role:M.none(),fetch:b.getFetch(s,S),onSetup:P,getApi:D,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Ar.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:F=>{if(a.tooltip!==T.get()){const G=s.shared.providers.translate(T.get());Ar.setComponents(F,s.shared.providers.tooltips.getComponents({tooltipText:G}))}}})})]},"tox-tbtn",s.shared,h)},KZ=t=>$e(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),YZ=t=>({type:"basic",data:t});var $y;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})($y||($y={}));const S8=(t,s)=>s===$y.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),FR=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:KZ(S8(c,a))}},XZ="Align",x8=oe("Alignment {0}"),WT="left",qC=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],E8=t=>{const s=()=>et(qC,S=>t.formatter.match(S.format)),a=S=>()=>t.formatter.match(S),c=S=>M.none,d=S=>{const D=s().fold(oe(WT),P=>P.title.toLowerCase());bn(S,Jb,{icon:`align-${D}`}),z9(t,{value:D})},h=YZ(qC),b=S=>()=>et(qC,T=>T.format===S.format).each(T=>t.execCommand(T.command));return{tooltip:By(t,x8(),WT),text:M.none(),icon:M.some("align-left"),isSelectedFor:a,getCurrentValue:M.none,getPreviewFor:c,onAction:b,updateText:d,dataset:h,shouldHide:!1,isInvalid:S=>!t.formatter.canApply(S.format)}},JZ=(t,s)=>Fy(t,s,E8(t),x8,"AlignTextUpdate","align"),QZ=(t,s)=>{const a=Ly(s,E8(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(XZ),onSetup:ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_8=(t,s)=>{const a=s(),c=$e(a,d=>d.format);return M.from(t.formatter.closest(c)).bind(d=>et(a,h=>h.format===d))},ej="Blocks",T8=oe("Block {0}"),$R="Paragraph",k8=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const b=t.formatter.get(h);return b?M.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):M.none()},c=h=>{const S=_8(t,()=>d.data).fold(oe($R),T=>T.title);bn(h,Xu,{text:S}),W9(t,{value:S})},d=FR(t,"block_formats",$y.SemiColon);return{tooltip:By(t,T8(),$R),text:M.some($R),icon:M.none(),isSelectedFor:s,getCurrentValue:M.none,getPreviewFor:a,onAction:hI(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},tj=(t,s)=>Fy(t,s,k8(t),T8,"BlocksTextUpdate","blocks"),A8=(t,s)=>{const a=Ly(s,k8(t));t.ui.registry.addNestedMenuItem("blocks",{text:ej,onSetup:ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},ZT="Fonts",jT=oe("Font {0}"),qT="System Font",m1=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],HR=t=>{const s=t.split(/\s*,\s*/);return $e(s,a=>a.replace(/^['"]+|['"]+$/g,""))},O8=(t,s)=>s.length>0&&Ao(s,a=>t.indexOf(a.toLowerCase())>-1),nj=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=HR(t.toLowerCase());return O8(a,m1)||O8(a,s)}else return!1},D8=t=>{const s=()=>{const T=re=>re?HR(re)[0]:"",D=t.queryCommandValue("FontName"),P=S.data,F=D?D.toLowerCase():"",G=FN(t);return{matchOpt:et(P,re=>{const le=re.format;return le.toLowerCase()===F||T(le).toLowerCase()===T(F).toLowerCase()}).orThunk(()=>En(nj(F,G),{title:qT,format:F})),font:D}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>M.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},b=T=>{const{matchOpt:D,font:P}=s(),F=D.fold(oe(P),G=>G.title);bn(T,Xu,{text:F}),Z9(t,{value:F})},S=FR(t,"font_family_formats",$y.SemiColon);return{tooltip:By(t,jT(),qT),text:M.some(qT),icon:M.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:h,updateText:b,dataset:S,shouldHide:!1,isInvalid:at}},oj=(t,s)=>Fy(t,s,D8(t),jT,"FontFamilyTextUpdate","fontfamily"),sj=(t,s)=>{const a=Ly(s,D8(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(ZT),onSetup:ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},rj={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},aj=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=S=>`(?:${S})?`,b=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${b})(.*)$`)})(),R8=(t,s)=>Mn(s,a=>Mn(rj[a],c=>t===c)),GT=(t,s)=>M.from(aj.exec(t)).bind(c=>{const d=Number(c[1]),h=c[2];return R8(h,s)?M.some({value:d,unit:h}):M.none()}),ij=(t,s)=>GT(t,s).map(({value:a,unit:c})=>a+c),KT={tab:oe(9),escape:oe(27),enter:oe(13),backspace:oe(8),delete:oe(46),left:oe(37),up:oe(38),right:oe(39),down:oe(40),space:oe(32),home:oe(36),end:oe(35),pageUp:oe(33),pageDown:oe(34)},cj=(t,s,a,c)=>{let d=M.none();const h=Oe=>Oe.map(ze=>Jt.getValue(ze)).getOr(""),b=Zb(t,"NodeChange SwitchMode DisabledStateChange",Oe=>{const ze=Oe.getComponent();d=M.some(ze),a.updateInputValue(ze),vn.set(ze,!t.selection.isEditable()||zE(t))}),S=Oe=>({getComponent:oe(Oe)}),T=gn(ce),D=on("custom-number-input-events"),P=(Oe,ze,We)=>{const Mt=h(d),tn=a.getNewValue(Mt,Oe),nt=Mt.length-`${tn}`.length,an=d.map(dn=>dn.element.dom.selectionStart-nt),Vt=d.map(dn=>dn.element.dom.selectionEnd-nt);a.onAction(tn,We),d.each(dn=>{Jt.setValue(dn,tn),ze&&(an.each(Co=>dn.element.dom.selectionStart=Co),Vt.each(Co=>dn.element.dom.selectionEnd=Co))})},F=(Oe,ze)=>P((We,Mt)=>We-Mt,Oe,ze),G=(Oe,ze)=>P((We,Mt)=>We+Mt,Oe,ze),J=Oe=>ii(Oe.element).fold(M.none,ze=>($c(ze),M.some(!0))),re=Oe=>hf(Oe.element)?(Kc(Oe.element).each(ze=>$c(ze)),M.some(!0)):M.none(),le=(Oe,ze,We,Mt)=>{const tn=gn(ce),nt=s.shared.providers.translate(We),an=on("altExecuting"),Vt=Zb(t,"NodeChange SwitchMode DisabledStateChange",Co=>{vn.set(Co.getComponent(),!t.selection.isEditable()||zE(t))}),dn=Co=>{vn.isDisabled(Co)||Oe(!0)};return Na.sketch({dom:{tag:"button",attributes:{"aria-label":nt,"data-mce-name":ze},classes:Mt.concat(ze)},components:[NC(ze,s.shared.providers.icons)],buttonBehaviours:Et([vn.config({}),Ar.config(s.shared.providers.tooltips.getConfig({tooltipText:nt})),Kn(an,[kf({onSetup:Vt,getApi:S},tn),Bi({getApi:S},tn),ot(Vi(),(Co,Ys)=>{(Ys.event.raw.keyCode===KT.space()||Ys.event.raw.keyCode===KT.enter())&&(vn.isDisabled(Co)||Oe(!1))}),ot(zh(),dn),ot(zs(),dn)])]),eventOrder:{[Vi()]:[an,"keying"],[zh()]:[an,"alloy.base.behaviour"],[zs()]:[an,"alloy.base.behaviour"],[Qi()]:["alloy.base.behaviour",an,"tooltipping"],[Lc()]:[an,"tooltipping"]}})},De=Jo(le(Oe=>F(!1,Oe),"minus","Decrease font size",[])),de=Jo(le(Oe=>G(!1,Oe),"plus","Increase font size",[])),Te=Jo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Ef.sketch({inputBehaviours:Et([vn.config({}),Kn(D,[kf({onSetup:b,getApi:S},T),Bi({getApi:S},T)]),Kn("input-update-display-text",[ot(Xu,(Oe,ze)=>{Jt.setValue(Oe,ze.event.text)}),ot(vS(),Oe=>{a.onAction(Jt.getValue(Oe))}),ot(tm(),Oe=>{a.onAction(Jt.getValue(Oe))})]),Sn.config({mode:"special",onEnter:Oe=>(P(Xt,!0,!0),M.some(!0)),onEscape:J,onUp:Oe=>(G(!0,!1),M.some(!0)),onDown:Oe=>(F(!0,!1),M.some(!0)),onLeft:(Oe,ze)=>(ze.cut(),M.none()),onRight:(Oe,ze)=>(ze.cut(),M.none())})])})],behaviours:Et([$n.config({}),Sn.config({mode:"special",onEnter:re,onSpace:re,onEscape:J}),Kn("input-wrapper-events",[ot(Bc(),Oe=>{pt([De,de],ze=>{const We=Ke.fromDom(ze.get(Oe).element.dom);hf(We)&&Ga(We)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Ct(c)?{"data-mce-name":c}:{}}},components:[De.asSpec(),Te.asSpec(),de.asSpec()],behaviours:Et([$n.config({}),Sn.config({mode:"flow",focusInside:yg.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Oe=>hf(Oe.element)?M.none():($c(Oe.element),M.some(!0))})])}},lj="Font sizes",M8=oe("Font size {0}"),N8="12pt",uj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},dj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},P8=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},I8=(t,s)=>/[0-9.]+px$/.test(t)?P8(parseInt(t,10)*72/96,s||0)+"pt":Tt(dj,t).getOr(t),B8=t=>Tt(uj,t).getOr(""),L8=t=>{const s=()=>{let T=M.none();const D=S.data,P=t.queryCommandValue("FontSize");if(P)for(let F=3;T.isNone()&&F>=0;F--){const G=I8(P,F),J=B8(G);T=et(D,re=>re.format===P||re.format===G||re.format===J)}return{matchOpt:T,size:P}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=oe(M.none),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},b=T=>{const{matchOpt:D,size:P}=s(),F=D.fold(oe(P),G=>G.title);bn(T,Xu,{text:F}),V9(t,{value:F})},S=FR(t,"font_size_formats",$y.Space);return{tooltip:By(t,M8(),N8),text:M.some(N8),icon:M.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:h,updateText:b,dataset:S,shouldHide:!1,isInvalid:at}},F8=(t,s)=>Fy(t,s,L8(t),M8,"FontSizeTextUpdate","fontsize"),fj=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},mj=16,hj=t=>t>=0,$8=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>bn(c,Xu,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{GT(c,["unsupportedLength","empty"]);const h=s(),b=GT(c,["unsupportedLength","empty"]).or(GT(h,["unsupportedLength","empty"])),S=b.map(G=>G.value).getOr(mj),T=RN(t),D=b.map(G=>G.unit).filter(G=>G!=="").getOr(T),P=d(S,fj(D).step),F=`${hj(P)?P:S}${D}`;return F!==h&&U9(t,{value:F}),F}}},gj=(t,s)=>cj(t,s,$8(t),"fontsizeinput"),H8=(t,s)=>{const a=Ly(s,L8(t));t.ui.registry.addNestedMenuItem("fontsize",{text:lj,onSetup:ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},pj="Formats",z8=t=>fe(t)?"Formats":"Format {0}",V8=(t,s)=>{const a="Formats",c=b=>()=>t.formatter.match(b),d=b=>()=>{const S=t.formatter.get(b);return S!==void 0?M.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(b))}):M.none()},h=b=>{const S=F=>pL(F)?xe(F.items,S):bL(F)?[{title:F.title,format:F.format}]:[],T=xe(vL(t),S),P=_8(t,oe(T)).fold(oe({title:a,tooltipLabel:""}),F=>({title:F.title,tooltipLabel:F.title}));bn(b,Xu,{text:P.title}),H9(t,{value:P.tooltipLabel})};return{tooltip:By(t,z8(""),""),text:M.some(a),icon:M.none(),isSelectedFor:c,getCurrentValue:M.none,getPreviewFor:d,onAction:hI(t),updateText:h,shouldHide:EN(t),isInvalid:b=>!t.formatter.canApply(b.format),dataset:s}},bj=(t,s)=>{const a={type:"advanced",...s.styles};return Fy(t,s,V8(t,a),z8,"StylesTextUpdate","styles")},vj=(t,s)=>{const a={type:"advanced",...s.styles},c=Ly(s,V8(t,a));t.ui.registry.addNestedMenuItem("styles",{text:pj,onSetup:ic(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},yj=oe([rt("toggleClass"),rt("fetch"),oh("onExecute"),Pe("getHotspot",M.some),Pe("getAnchorOverrides",oe({})),fh(),oh("onItemExecute"),Wo("lazySink"),rt("dom"),ko("onOpen"),Xa("splitDropdownBehaviours",[Zr,Sn,$n]),Pe("matchWidth",!1),Pe("useMinWidth",!1),Pe("eventOrder",{}),Wo("role"),Wo("listRole")].concat(vy())),wj=Ii({factory:Na,schema:[rt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Et([$n.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Qm)},buttonBehaviours:Et([mo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),U8=Ii({factory:Na,schema:[rt("dom")],name:"button",defaults:()=>({buttonBehaviours:Et([$n.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),Cj=oe([wj,U8,zc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[rt("text")],name:"aria-descriptor"}),iu({schema:[gp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),AO()]),Sj=(t,s,a,c)=>{const d=P=>{Mo.getCurrent(P).each(F=>{mt.highlightFirst(F),Sn.focusIn(F)})},h=P=>{OO(t,Xt,P,c,d,Ja.HighlightMenuAndItem).get(ce)},b=P=>(h(P),M.some(!0)),S=P=>{const F=rl(P,t,"button");return Qm(F),M.some(!0)},T={...fs([tr((P,F)=>{Rs(P,t,"aria-descriptor").each(J=>{const re=on("aria");$t(J.element,"id",re),$t(P.element,"aria-describedby",re)})})]),...Qv(M.some(h))},D={repositionMenus:P=>{mo.isOn(P)&&VI(P)}};return{uid:t.uid,dom:t.dom,components:s,apis:D,eventOrder:{...t.eventOrder,[Di()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:Fr(t.splitDropdownBehaviours,[Zr.config({others:{sandbox:P=>{const F=rl(P,t,"arrow");return by(t,P,{onOpen:()=>{mo.on(F),mo.on(P)},onClose:()=>{mo.off(F),mo.off(P)}})}}}),Sn.config({mode:"special",onSpace:S,onEnter:S,onDown:b}),$n.config({}),mo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},YT=ac({name:"SplitDropdown",configFields:yj(),partFields:Cj(),factory:Sj,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),W8=t=>({isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setText:s=>bn(t,Xu,{text:s}),setIcon:s=>bn(t,Jb,{icon:s})}),xj=t=>({setActive:s=>{mo.set(t,s)},isActive:()=>mo.isOn(t),isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setText:s=>bn(t,Xu,{text:s}),setIcon:s=>bn(t,Jb,{icon:s})}),Z8=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),j8=on("focus-button"),XT=(t,s,a,c,d,h,b)=>{const S=s.map(D=>Jo(sT(D,"tox-tbtn",d))),T=t.map(D=>Jo(c1(D,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...Z8(a,d),...Ct(b)?{"data-mce-name":b}:{}}},components:my([T.map(D=>D.asSpec()),S.map(D=>D.asSpec())]),eventOrder:{[Ir()]:["focusing","alloy.base.behaviour",Df],[Qi()]:[Df,"toolbar-group-button-events"],[Lc()]:[Df,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Et([$d.toolbarButton(()=>d.checkUiComponentContext(h).shouldDisable),ga(()=>d.checkUiComponentContext(h)),Kn(Df,[tr((D,P)=>_D(D)),ot(Xu,(D,P)=>{S.bind(F=>F.getOpt(D)).each(F=>{Wn.set(F,[or(d.translate(P.event.text))])})}),ot(Jb,(D,P)=>{T.bind(F=>F.getOpt(D)).each(F=>{Wn.set(F,[c1(P.event.icon,d.icons)])})}),ot(Ir(),(D,P)=>{P.event.prevent(),bo(D,j8)})])].concat(c.getOr([])))}},Ej=(t,s,a,c,d)=>{const h=s.shared,b=gn(ce),S={toolbarButtonBehaviours:[],getApi:W8,onSetup:t.onSetup},T=[Kn("toolbar-group-button-events",[kf(S,b),Bi(S,b)]),...t.tooltip.map(D=>Ar.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(D)}))).toArray()];return f1.sketch({lazySink:h.getSink,fetch:()=>cc.nu(D=>{D($e(a(t.items),BT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:XT(t.icon,t.text,t.tooltip,M.some(T),h.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},q8=(t,s,a,c)=>{var d;const h=gn(ce),b=XT(t.icon,t.text,t.tooltip,M.none(),a,t.context,c);return Na.sketch({dom:b.dom,components:b.components,eventOrder:oT,buttonBehaviours:{...Et([Kn("toolbar-button-events",[cU({onAction:t.onAction,getApi:s.getApi}),kf(s,h),Bi(s,h)]),...t.tooltip.map(S=>Ar.config(a.tooltips.getConfig({tooltipText:a.translate(S)+t.shortcut.map(T=>` (${tO(T)})`).getOr("")}))).toArray(),$d.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),ga(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Df]:(d=b.buttonBehaviours)===null||d===void 0?void 0:d[Df]}})},G8=(t,s,a)=>K8(t,s,[],a),K8=(t,s,a,c)=>q8(t,{toolbarButtonBehaviours:a.length>0?[Kn("toolbarButtonWith",a)]:[],getApi:W8,onSetup:t.onSetup},s,c),Y8=(t,s,a)=>zR(t,s,[],a),zR=(t,s,a,c)=>q8(t,{toolbarButtonBehaviours:[Wn.config({}),mo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Kn("toolbarToggleButtonWith",a)]:[]),getApi:xj,onSetup:t.onSetup},s,c),_j=(t,s,a)=>c=>cc.nu(d=>s.fetch(d)).map(d=>M.from(DO(Fs(EO(on("menu-value"),d,h=>{s.onItemAction(t(c),h)},s.columns,s.presets,xf.CLOSE_ON_EXECUTE,s.select.getOr(at),a),{movement:O_(s.columns,s.presets),menuBehaviours:Hb.unnamedEvents(s.columns!=="auto"?[]:[tr((h,b)=>{JA(h,4,mP(s.presets)).each(({numRows:S,numColumns:T})=>{Sn.setGridSize(h,S,T)})})])})))),Tj=(t,s,a)=>{const c=gn(t.tooltip.getOr("")),d=S=>({isEnabled:()=>!vn.isDisabled(S),setEnabled:T=>vn.set(S,!T),setIconFill:(T,D)=>{ir(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(P=>{$t(P,"fill",D)})},setActive:T=>{$t(S.element,"aria-pressed",T),ir(S.element,"span").each(D=>{S.getSystem().getByDom(D).each(P=>mo.set(P,T))})},isActive:()=>ir(S.element,"span").exists(T=>S.getSystem().getByDom(T).exists(mo.isOn)),setText:T=>ir(S.element,"span").each(D=>S.getSystem().getByDom(D).each(P=>bn(P,Xu,{text:T}))),setIcon:T=>ir(S.element,"span").each(D=>S.getSystem().getByDom(D).each(P=>bn(P,Jb,{icon:T}))),setTooltip:T=>{const D=s.providers.translate(T);$t(S.element,"aria-label",D),c.set(T)}}),h=gn(ce),b={getApi:d,onSetup:t.onSetup};return YT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...Z8(t.tooltip,s.providers),...Ct(a)?{"data-mce-name":a}:{}}},onExecute:S=>{const T=d(S);T.isEnabled()&&t.onAction(T)},onItemExecute:(S,T,D)=>{},splitDropdownBehaviours:Et([Kn("split-dropdown-events",[tr((S,T)=>_D(S)),ot(j8,$n.focus),kf(b,h),Bi(b,h)]),$d.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),ga(()=>s.providers.checkUiComponentContext(t.context)),ll.config({}),...t.tooltip.map(S=>Ar.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(S),onShow:T=>{if(c.get()!==S){const D=s.providers.translate(c.get());Ar.setComponents(T,s.providers.tooltips.getComponents({tooltipText:D}))}}})})).toArray()]),eventOrder:{[Qi()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Lc()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:_j(d,t,s.providers),parts:{menu:eC(!1,t.columns,t.presets)},components:[YT.parts.button(XT(t.icon,t.text,M.none(),M.some([mo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),$d.toolbarButton(at),ga(oe({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),YT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:kA("chevron-down",s.providers.icons)},buttonBehaviours:Et([$d.splitButton(at),ga(oe({contextType:"any",shouldDisable:!1}))])}),YT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},kj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Eh=(t,s)=>(a,c,d,h)=>{const b=t(a).mapError(S=>Jl(S)).getOrDie();return s(b,c,d,h)},Aj={button:Eh(C_,(t,s,a,c)=>G8(t,s.shared.providers,c)),togglebutton:Eh(dy,(t,s,a,c)=>Y8(t,s.shared.providers,c)),menubutton:Eh(VL,(t,s,a,c)=>Rg(t,"tox-tbtn",s,M.none(),!1,c)),splitbutton:Eh(VW,(t,s,a,c)=>Tj(t,s.shared,c)),grouptoolbarbutton:Eh(HL,(t,s,a,c)=>{const d=a.ui.registry.getAll().buttons,h=S=>Hy(a,{buttons:d,toolbar:S,allowToolbarGroups:!1},s,M.none()),b={[dh]:s.shared.header.isPositionedAtTop()?fm.TopToBottom:fm.BottomToTop};switch(ny(a)){case qu.floating:return Ej(t,s,h,b,c);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Oj=(t,s,a,c)=>Tt(Aj,t.type).fold(()=>(console.error("skipping button defined by",t),M.none()),d=>M.some(d(t,s,a,c))),X8={styles:bj,fontsize:F8,fontsizeinput:gj,fontfamily:oj,blocks:tj,align:JZ},Dj=t=>{const s=$e(kj,a=>{const c=no(a.items,d=>go(t,d)||go(X8,d));return{name:a.name,items:c}});return no(s,a=>a.items.length>0)},Rj=t=>{const s=t.split("|");return $e(s,a=>({items:a.trim().split(" ")}))},Mj=t=>xt(t,s=>(go(s,"name")||go(s,"label"))&&go(s,"items")),Nj=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Dj(a):j(s)?Rj(s):Mj(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Pj=(t,s,a,c,d,h)=>Tt(s,a.toLowerCase()).orThunk(()=>h.bind(b=>Ss(b,S=>Tt(s,S+a.toLowerCase())))).fold(()=>Tt(X8,a.toLowerCase()).map(b=>b(t,d)),b=>b.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),M.none()):Oj(b,d,t,a.toLowerCase())),Hy=(t,s,a,c)=>{const d=Nj(s),h=$e(d,b=>{const S=xe(b.items,T=>T.trim().length===0?[]:Pj(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:M.from(t.translate(b.name)),label:En(b.label!==void 0,t.translate(b.label)),items:S}});return no(h,b=>b.items.length>0)},J8=(t,s,a,c)=>{const d=s.mainUi.outerContainer,h=a.toolbar,b=a.buttons;if(xt(h,j)){const S=h.map(T=>{const D={toolbar:T,buttons:b,allowToolbarGroups:a.allowToolbarGroups};return Hy(t,D,c,M.none())});Ks.setToolbars(d,S)}else Ks.setToolbar(d,Hy(t,a,c,M.none()))},Q8=dr(),eF=Q8.os.isiOS()&&Q8.os.version.major<=12,tF=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,b=gn(Ds(d.innerWidth,d.innerHeight)),S=gn(Ds(h.offsetWidth,h.offsetHeight)),T=()=>{const G=b.get();(G.left!==d.innerWidth||G.top!==d.innerHeight)&&(b.set(Ds(d.innerWidth,d.innerHeight)),dO(t))},D=()=>{const G=t.getDoc().documentElement,J=S.get();(J.left!==G.offsetWidth||J.top!==G.offsetHeight)&&(S.set(Ds(G.offsetWidth,G.offsetHeight)),dO(t))},P=G=>{fO(t,G)};c.bind(d,"resize",T),c.bind(d,"scroll",P);const F=U2(Ke.fromDom(t.getBody()),"load",D);t.on("hide",()=>{pt(a,G=>{It(G.element,"display","none")})}),t.on("show",()=>{pt(a,G=>{uo(G.element,"display")})}),t.on("NodeChange",D),t.on("remove",()=>{F.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",P),d=null})},Ij=(t,s,a)=>{Sg(t)&&fi(a.mainUi.mothership.element,a.popupUi.mothership),rc(s,a.dialogUi.mothership)};var Bj=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=s,S=gn(0),T=h.outerContainer;GZ(t);const D=Ke.fromDom(d.targetNode),P=Pr(br(D));fi(D,h.mothership),Ij(t,P,s),t.on("PostRender",()=>{Ks.setSidebar(T,a.sidebar,LN(t))}),t.on("SkinLoaded",()=>{J8(t,s,a,c),S.set(t.getWin().innerWidth),Ks.setMenubar(T,PR(t,a)),Ks.setViews(T,a.views),tF(t,s)});const F=Ks.getSocket(T).getOrDie("Could not find expected socket element");if(eF){$o(F.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const le=tT(()=>{t.dispatch("ScrollContent")},20),De=oc(F.element,"scroll",le.throttle);t.on("remove",De.unbind)}eO(t,s),t.addCommand("ToggleSidebar",(le,De)=>{Ks.toggleSidebar(T,De),j9(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var le;return(le=Ks.whichSidebar(T))!==null&&le!==void 0?le:""}),t.addCommand("ToggleView",(le,De)=>{if(Ks.toggleView(T,De)){const de=T.element;h.mothership.broadcastOn([hm()],{target:de}),pt(b,Te=>{Te.broadcastOn([hm()],{target:de})}),Xe(Ks.whichView(T))&&(t.focus(),t.nodeChanged(),Ks.refreshToolbar(T)),q9(t)}}),t.addQueryValueHandler("ToggleView",()=>{var le;return(le=Ks.whichView(T))!==null&&le!==void 0?le:""});const G=ny(t),J=()=>{Ks.refreshToolbar(s.mainUi.outerContainer)};(G===qu.sliding||G===qu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const le=t.getWin().innerWidth;le!==S.get()&&(J(),S.set(le))});const re={setEnabled:le=>{fy(s,le?"setEnabled":"setDisabled")},isEnabled:()=>!vn.isDisabled(T)};return{iframeContainer:F.element.dom,editorContainer:T.element.dom,api:re}}});const nF=t=>/^[0-9\.]+(|px)$/i.test(""+t)?M.some(parseInt(""+t,10)):M.none(),VR=t=>ln(t)?t+"px":t,JT=(t,s,a)=>{const c=s.filter(h=>t<h),d=a.filter(h=>t>h);return c.or(d).getOr(t)},oF=t=>{const s=X3(t),a=Q3(t),c=ty(t);return nF(s).map(d=>JT(d,a,c))},Lj=t=>oF(t).getOr(X3(t)),sF=t=>{const s=J3(t),a=Fw(t),c=Xp(t);return nF(s).map(d=>JT(d,a,c))},Fj=t=>sF(t).getOr(J3(t)),{ToolbarLocation:UR,ToolbarMode:WR}=TH,$j=40,QT=(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=a,S=Bw.DOM,T=Cf(t),D=Jp(t),P=Xp(t).or(sF(t)),F=c.shared.header,G=F.isPositionedAtTop,J=150,re=ny(t),le=re===WR.sliding||re===WR.floating,De=gn(!1),de=()=>De.get()&&!t.removed,Te=hn=>le?hn.fold(oe(0),vt=>vt.components().length>1?xr(vt.components()[1].element):0):0,Oe=hn=>{switch(UE(t)){case UR.auto:const vt=Ks.getToolbar(h.outerContainer),Ut=Te(vt),Un=xr(hn.element)-Ut,ao=Jr(s);if(ao.y>Un)return"top";{const Yn=$i(s),ks=Math.max(Yn.dom.scrollHeight,xr(Yn));return ao.bottom<ks-Un||Qr().bottom<ao.bottom-Un?"bottom":"top"}case UR.bottom:return"bottom";case UR.top:default:return"top"}},ze=hn=>{d.on(vt=>{js.setModes(vt,[hn]),F.setDockingMode(hn);const Ut=G()?fm.TopToBottom:fm.BottomToTop;$t(vt.element,dh,Ut)})},We=()=>{d.on(hn=>{const vt=P.getOrThunk(()=>Jc().width-Ci(s).left-10);It(hn.element,"max-width",vt+"px")})},Mt=(hn,vt)=>{d.on(Ut=>{const Un=Ks.getToolbar(h.outerContainer),ao=Te(Un),Tn=Jr(s),Yn=tn(t,h.outerContainer.element),ks=()=>Yn.fold(()=>Tn.x,mc=>{const td=Jr(mc);return yo(mc,Ye())?Tn.x:Tn.x-td.x}),bs=()=>Yn.fold(()=>G()?Math.max(Tn.y-xr(Ut.element)+ao,0):Tn.bottom,mc=>{var td;const nd=Jr(mc),Bf=(td=mc.dom.scrollTop)!==null&&td!==void 0?td:0,kh=yo(mc,Ye())?Math.max(Tn.y-xr(Ut.element)+ao,0):Tn.y-nd.y+Bf-xr(Ut.element)+ao;return G()?kh:Tn.bottom}),Il=ks(),wr=En(hn,Math.ceil(h.outerContainer.element.dom.getBoundingClientRect().width)).filter(mc=>mc>J).map(mc=>{const td=vt.getOr(Va()),nd=window.innerWidth-(Il-td.left),Bf=Math.max(Math.min(mc,nd),J);return nd<mc&&It(h.outerContainer.element,"width",Bf+"px"),{width:Bf+"px"}}).getOr({width:"max-content"}),ed={position:"absolute",left:Math.round(Il)+"px",top:bs()+"px"};$o(h.outerContainer.element,{...ed,...wr})})},tn=(hn,vt)=>Sg(hn)?cp(vt):M.none(),nt=()=>{pt(b,hn=>{hn.broadcastOn([fg()],{})})},an=()=>!T&&(Ta(h.outerContainer.element).left+pl(h.outerContainer.element)>=window.innerWidth-$j||us(h.outerContainer.element,"width").isSome())?(It(h.outerContainer.element,"position","absolute"),It(h.outerContainer.element,"left","0px"),uo(h.outerContainer.element,"width"),!0):!1,Vt=hn=>{if(!de())return;T||We();const vt=Va(),Ut=T?!1:an();if(le&&Ks.refreshToolbar(h.outerContainer),!T){const Un=Va(),ao=En(vt.left!==Un.left,vt);Mt(Ut,ao),ao.each(Tn=>{ku(Tn.left,Un.top)})}D&&d.on(hn),nt()},dn=()=>T||!D||!de()?!1:d.get().exists(hn=>{const vt=F.getDockingMode(),Ut=Oe(hn);return Ut!==vt?(ze(Ut),!0):!1});return{isVisible:de,isPositionedAtTop:G,show:()=>{De.set(!0),It(h.outerContainer.element,"display","flex"),S.addClass(t.getBody(),"mce-edit-focus"),pt(b,hn=>{uo(hn.element,"display")}),dn(),Sg(t)?Vt(hn=>js.isDocked(hn)?js.reset(hn):js.refresh(hn)):Vt(js.refresh)},hide:()=>{De.set(!1),It(h.outerContainer.element,"display","none"),S.removeClass(t.getBody(),"mce-edit-focus"),pt(b,hn=>{It(hn.element,"display","none")})},update:Vt,updateMode:()=>{dn()&&Vt(js.reset)},repositionPopups:nt}},GC=(t,s)=>{const a=Jr(t);return{pos:s?a.y:a.bottom,bounds:a}},rF=(t,s,a,c)=>{const d=gn(GC(s,a.isPositionedAtTop())),h=D=>{const{pos:P,bounds:F}=GC(s,a.isPositionedAtTop()),{pos:G,bounds:J}=d.get(),re=F.height!==J.height||F.width!==J.width;d.set({pos:P,bounds:F}),re&&dO(t,D),a.isVisible()&&(G!==P?a.update(js.reset):re&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(js.reset)),t.on("NodeChange keydown",D=>{requestAnimationFrame(()=>h(D))});let b=0;const S=bD(()=>a.update(js.refresh),33);t.on("ScrollWindow",()=>{const D=Va().left;D!==b&&(b=D,S.throttle()),a.updateMode()}),Sg(t)&&t.on("ElementScroll",D=>{a.update(js.refresh)});const T=_i();T.set(U2(Ke.fromDom(t.getBody()),"load",D=>h(D.raw))),t.on("remove",()=>{T.clear()})};var Hj=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h}=s,b=Xo(),S=Ke.fromDom(d.targetNode),T=QT(t,S,s,c,b),D=AN(t);w8(t);const P=()=>{if(b.isSet()){T.show();return}b.set(Ks.getHeader(h.outerContainer).getOrDie());const G=dA(t);Sg(t)?(fi(S,h.mothership),fi(S,s.popupUi.mothership)):rc(G,h.mothership),rc(G,s.dialogUi.mothership);const J=()=>{J8(t,s,a,c),Ks.setMenubar(h.outerContainer,PR(t,a)),T.show(),rF(t,S,T,D),t.nodeChanged()};D?t.once("SkinLoaded",J):J()};t.on("show",P),t.on("hide",T.hide),D||(t.on("focus",P),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||D)&&P()}),eO(t,s);const F={show:P,hide:T.hide,setEnabled:G=>{fy(s,G?"setEnabled":"setDisabled")},isEnabled:()=>!vn.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:F}}});const zj=()=>{const t=Xo(),s=Xo(),a=Xo();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(S=>S.mothership),b=s.get().map(S=>S.mothership);return h.fold(()=>b.toArray(),S=>b.fold(()=>[S],T=>yo(S.element,T.element)?[S]:[S,T]))},lazyGetInOuterOrDie:(h,b)=>()=>a.get().bind(S=>b(S.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},Vj="contexttoolbar-show",aF="contexttoolbar-hide",ek=".tox-toolbar-slider__input,.tox-toolbar-textfield",tk=t=>{gr.getContent(t).each(s=>{ir(s.element,ek).fold(()=>Sn.focusIn(s),$c)})},ZR=t=>nc(t.element).each(s=>{da(s,'[tabindex="-1"]').each(a=>{$c(a)})}),jR=on("forward-slide"),nk=on("backward-slide"),qR=on("change-slide-event"),ok="tox-pop--resizing",Uj=t=>{const s=gn([]);return gr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),gr.getContent(a).each(c=>{uo(c.element,"visibility")}),mr(a.element,ok),uo(a.element,"width")},onHide:()=>{t.onHide()},inlineBehaviours:Et([Kn("context-toolbar-events",[eh(ep(),(a,c)=>{c.event.raw.propertyName==="width"&&(mr(a.element,ok),uo(a.element,"width"))}),ot(qR,(a,c)=>{const d=a.element;uo(d,"width");const h=oo(d);uo(d,"left"),uo(d,"right"),uo(d,"max-width"),gr.setContent(a,c.event.contents),Lr(d,ok);const b=oo(d);It(d,"transition","none"),gr.reposition(a),uo(d,"transition"),It(d,"width",h+"px"),c.event.focus.fold(()=>tk(a),S=>{$c(S),nc(d).isNone()&&tk(a)}),setTimeout(()=>{It(a.element,"width",b+"px")},0)}),ot(jR,(a,c)=>{gr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:dm(br(a.element))}]))}),bn(a,qR,{contents:c.event.forwardContents,focus:M.none()})}),ot(nk,(a,c)=>{t.onBack(),oi(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),bn(a,qR,{contents:El(d.bar),focus:d.focus})})})]),Sn.config({mode:"special",onEscape:a=>oi(s.get()).fold(()=>t.onEscape(),c=>(bo(a,nk),M.some(!0)))})]),lazySink:()=>Xn.value(t.sink)})},Mg=t=>{const s=Xo();return{setInputEnabled:a=>{a||ZR(t),vn.set(t,!a)},isInputEnabled:()=>!vn.isDisabled(t),hide:()=>{s.isSet()||s.set(Jt.getValue(t)),bo(t,ja())},back:()=>{s.isSet()||s.set(Jt.getValue(t)),bo(t,nk)},getValue:()=>s.get().getOrThunk(()=>Jt.getValue(t)),setValue:a=>{s.isSet()?s.set(a):Jt.setValue(t,a)}}},iF=(t,s)=>ot(mB,(a,c)=>{const d=t.get(a),h=Mg(d);s.onAction(h,c.event.buttonApi)}),Wj=(t,s,a)=>{const{primary:c,...d}=s.original,h=bt(C_({...d,type:"button",onAction:ce}));return K8(h,a,[iF(t,s)])},Zj=(t,s,a)=>{const{primary:c,...d}=s.original,h=bt(dy({...d,type:"togglebutton",onAction:ce}));return zR(h,a,[iF(t,s)])},KC=t=>t.type==="contextformtogglebutton",jj=(t,s,a)=>KC(s)?Zj(t,s,a):Wj(t,s,a),cF=(t,s,a)=>{const c=$e(s,b=>Jo(jj(t,b,a)));return{asSpecs:()=>$e(c,b=>b.asSpec()),findPrimary:b=>Ss(s,(S,T)=>S.primary?M.from(c[T]).bind(D=>D.getOpt(b)).filter(Fe(vn.isDisabled)):M.none())}},qj=(t,s,a)=>{const{width:c,height:d}=t.initValue();return _B({inDialog:!1,label:t.label,enabled:!0,context:M.none(),name:M.none(),width:c,height:d,onEnter:M.some(a),onInput:M.some(h=>t.onInput(Mg(h))),onSetup:M.some(t.onSetup),getApi:M.some(Mg)},s)},GR=(t,s,a)=>Ho.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Et([vn.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:c=>{ZR(c),Ho.getField(c).each(vn.disable)},onEnabled:c=>{Ho.getField(c).each(vn.enable)}})])}),Gj=(t,s,a)=>{const c=gn(ce),d=t.label.map(b=>Ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[or(s.translate(b))]})),h=Ho.parts.field({factory:Ef,type:"range",inputClasses:["tox-toolbar-slider__input"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:b=>Ve(b).getOr(t.min()),toInputValue:b=>String(b),inputBehaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),ga(()=>s.checkUiComponentContext("mode:design")),Sn.config({mode:"special",onEnter:a,onLeft:(b,S)=>(S.cut(),M.none()),onRight:(b,S)=>(S.cut(),M.none())}),Kn("slider-events",[kf({onSetup:t.onSetup,getApi:Mg,onBeforeSetup:Sn.focusIn},c),Bi({getApi:Mg},c),ot(nu(),b=>{t.onInput(Mg(b))})])])});return GR(d,h,s)},lF=(t,s,a)=>{const c=gn(ce),d=t.label.map(T=>Ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[or(s.translate(T))]})),b={...t.placeholder.map(T=>({placeholder:s.translate(T)})).getOr({})},S=Ho.parts.field({factory:Ef,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],inputAttributes:b,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),ga(()=>s.checkUiComponentContext("mode:design")),Sn.config({mode:"special",onEnter:a,onLeft:(T,D)=>(D.cut(),M.none()),onRight:(T,D)=>(D.cut(),M.none())}),Kn("input-events",[kf({onSetup:t.onSetup,getApi:Mg,onBeforeSetup:Sn.focusIn},c),Bi({getApi:Mg},c),ot(nu(),T=>{t.onInput(Mg(T))})])])});return GR(d,S,s)},KR=(t,s,a)=>{const d=Jo(t(a,T=>b.findPrimary(T).orThunk(()=>S.findPrimary(T)).map(D=>(Qm(D),!0)))),h=Us(s.commands,T=>T.align==="start"),b=cF(d,h.pass,a),S=cF(d,h.fail,a);return no([{title:M.none(),label:M.none(),items:b.asSpecs()},{title:M.none(),label:M.none(),items:[d.asSpec()]},{title:M.none(),label:M.none(),items:S.asSpecs()}],T=>T.items.length>0)},uF=(t,s)=>{switch(t.type){case"contextform":return KR(en(lF,t),t,s);case"contextsliderform":return KR(en(Gj,t),t,s);case"contextsizeinputform":return KR(en(qj,t),t,s)}},Kj={renderContextForm:(t,s,a)=>LT({type:t,uid:on("context-toolbar"),initGroups:uF(s,a),onEscape:M.none,cyclicKeying:!0,providers:a}),buildInitGroups:uF},dF=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,YC=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=gl(Ke.fromDom(t.startContainer),t.startOffset).element;return(ar(a)?Nr(a):M.some(a)).filter(lr).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},sk=t=>{const s=t.selection.getRng(),a=YC(s);if(t.inline){const c=Va();return Js(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=Ei(Ke.fromDom(t.getBody()));return Js(c.x+a.left,c.y+a.top,a.width,a.height)}},Yj=(t,s)=>s.filter(a=>ke(a)&&ls(a)).map(Ei).getOrThunk(()=>sk(t)),Xj=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},fF=(t,s,a,c,d,h)=>{const b=Ke.fromDom(t.getContainer()),S=ir(b,".tox-editor-header").getOr(b),T=Jr(S),D=T.y>=s.bottom,P=c&&!D;if(t.inline&&P)return{y:Math.max(T.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!P)return{y:a.y,bottom:Math.min(T.y-h,a.bottom)};const F=d==="line"?Jr(b):s;return P?{y:Math.max(T.bottom+h,a.y),bottom:Math.min(F.bottom-h,a.bottom)}:{y:Math.max(F.y+h,a.y),bottom:Math.min(T.y-h,a.bottom)}},rk=(t,s,a,c=0)=>{const d=Jc(window),h=Jr(Ke.fromDom(t.getContentAreaContainer())),b=GE(t)||KE(t)||Hw(t),{x:S,width:T}=Xj(h,d,c);if(t.inline&&!b)return Js(S,d.y,T,d.height);{const D=s.header.isPositionedAtTop(),{y:P,bottom:F}=fF(t,h,d,D,a,c);return Js(S,P,T,F-P)}},XC=12,YR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},mF={maxHeightFunction:Cp(),maxWidthFunction:wR()},zy=(t,s)=>{const a=t.selection.getRng(),c=gl(Ke.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&yo(c.element,s)},ak=(t,s,a)=>{const c=us(t,"position");It(t,"position",s);const d=a(t);return c.each(h=>It(t,"position",h)),d},JC=t=>t==="node",XR=(t,s,a,c,d)=>{const h=sk(t),b=c.lastElement().exists(S=>yo(a,S));if(zy(t,a))return b?lL:Mf;if(b)return ak(s,c.getMode(),()=>dF(h,Jr(s),-20)&&!c.isReposition()?uL:lL);{const S=c.getMode()==="fixed"?d.y+Va().top:d.y,T=xr(s)+XC;return S+T<=h.y?Mf:FC}},JR=(t,s,a,c)=>{const d=T=>(D,P,F,G,J)=>{const re=XR(t,G,T,a,J),le={...D,y:J.y,height:J.height};return{...re(le,P,F,G,J),alwaysFit:!0}},h=T=>JC(c)?[d(T)]:[];return s?{onLtr:T=>[fa,Ca,Sa,Ra,ps,qa].concat(h(T)),onRtl:T=>[fa,Sa,Ca,ps,Ra,qa].concat(h(T))}:{onLtr:T=>[qa,fa,Ra,Ca,ps,Sa].concat(h(T)),onRtl:T=>[qa,fa,ps,Sa,Ra,Ca].concat(h(T))}},hF=(t,s,a,c)=>s==="line"?{bubble:Hu(XC,0,YR),layouts:{onLtr:()=>[Q1],onRtl:()=>[lv]},overrides:mF}:{bubble:Hu(0,XC,YR,1/XC),layouts:JR(t,a,c,s),overrides:mF},Vy=(t,s)=>{const a=no(s,h=>h.predicate(t.dom)),{pass:c,fail:d}=Us(a,h=>h.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},gF=t=>{if(t.length<=1)return t;{const s=h=>Mn(t,b=>b.position===h),a=h=>no(t,b=>b.position===h),c=s("selection"),d=s("node");if(c||d)if(d&&c){const h=a("node"),b=$e(a("selection"),S=>({...S,position:"node"}));return h.concat(b)}else return a(c?"selection":"node");else return a("line")}},pF=t=>{if(t.length<=1)return t;{const s=c=>et(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>no(t,d=>d.position===c))}},QR=(t,s,a)=>{const c=Vy(t,s);if(c.contextForms.length>0)return M.some({elem:t,toolbars:[c.contextForms[0]]});{const d=Vy(t,a);if(d.contextForms.length>0)return M.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const h=gF(c.contextToolbars.concat(d.contextToolbars));return M.some({elem:t,toolbars:h})}else return M.none()}},Jj=(t,s,a)=>t(s)?M.none():Ai(s,c=>{if(lr(c)){const{contextToolbars:d,contextForms:h}=Vy(c,a.inNodeScope),b=h.length>0?h:pF(d);return b.length>0?M.some({elem:c,toolbars:b}):M.none()}else return M.none()},t),bF=(t,s)=>{const a=Ke.fromDom(s.getBody()),c=b=>yo(b,a),d=b=>!c(b)&&!bc(a,b),h=Ke.fromDom(s.selection.getNode());return d(h)?M.none():QR(h,t.inNodeScope,t.inEditorScope).orThunk(()=>Jj(c,h,t))},Qj=(t,s)=>{const a={},c=[],d=[],h={},b={},S=(P,F)=>{const G=bt(Gs(F));a[P]=G,G.launch.map(J=>{h["form:"+P]={...F.launch,type:J.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(G)}}}),G.scope==="editor"?d.push(G):c.push(G),b[P]=G},T=(P,F)=>{IP(F).each(G=>{F.scope==="editor"?d.push(G):c.push(G),b[P]=G})},D=xs(t);return pt(D,P=>{const F=t[P];F.type==="contextform"||F.type==="contextsliderform"||F.type==="contextsizeinputform"?S(P,F):F.type==="contexttoolbar"&&T(P,F)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:b,formNavigators:h}},e5="tox-pop--transition",ik=(t,s,a,c)=>{const d=c.backstage,h=d.shared,b=dr().deviceType.isTouch,S=Xo(),T=Xo(),D=Xo(),P=Mi(Uj({sink:a,onEscape:()=>(t.focus(),mI(t),M.some(!0)),onHide:()=>{mI(t)},onBack:()=>{G9(t)}})),F=()=>{const Vt=D.get().getOr("node"),dn=JC(Vt)?1:0;return rk(t,h,Vt,dn)},G=()=>!t.removed&&!(b()&&d.isContextMenuOpen()),J=Vt=>Ur(Fa(Vt,S.get(),yo),!0),re=()=>{if(G()){const Vt=F(),dn=Ur(D.get(),"node")?Yj(t,S.get()):sk(t);return Vt.height<=0||!dF(dn,Vt,.01)}else return!0},le=()=>{S.clear(),T.clear(),D.clear(),gr.hide(P)},De=()=>{if(gr.isOpen(P)){const Vt=P.element;uo(Vt,"display"),re()?It(Vt,"display","none"):(T.set(0),gr.reposition(P))}},de=Vt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Vt],behaviours:Et([Sn.config({mode:"acyclic"}),Kn("pop-dialog-wrap-events",[tr(dn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Sn.focusIn(dn))}),sf(dn=>{t.shortcuts.remove("ctrl+F9")})])])}),Te=Ul(()=>Qj(s,Vt=>{const dn=We([Vt]);bn(P,jR,{forwardContents:de(dn)})})),Oe=(Vt,dn)=>Hy(t,{buttons:Vt,toolbar:dn.items,allowToolbarGroups:!1},c.backstage,M.some(["form:"])),ze=(Vt,dn)=>Kj.buildInitGroups(Vt,dn),We=Vt=>{const{buttons:dn}=t.ui.registry.getAll(),Co=Te(),Ys={...dn,...Co.formNavigators},Go=ny(t)===qu.scrolling?qu.scrolling:qu.default,hn=dt($e(Vt,vt=>vt.type==="contexttoolbar"?Oe(Ys,aC(vt)):ze(vt,h.providers)));return LT({type:Go,uid:on("context-toolbar"),initGroups:hn,onEscape:M.none,cyclicKeying:!0,providers:h.providers})},Mt=(Vt,dn)=>{const Co=Vt==="node"?h.anchors.node(dn):h.anchors.cursor(),Ys=hF(t,Vt,b(),{lastElement:S.get,isReposition:()=>Ur(T.get(),0),getMode:()=>Ya.getMode(a)});return Fs(Co,Ys)},tn=(Vt,dn)=>{if(an.cancel(),!G())return;const Co=We(Vt),Ys=Vt[0].position,Go=Mt(Ys,dn);D.set(Ys),T.set(1);const hn=P.element;uo(hn,"display"),J(dn)||(mr(hn,e5),Ya.reset(a,P)),gr.showWithinBounds(P,de(Co),{anchor:Go,transition:{classes:[e5],mode:"placement"}},()=>M.some(F())),dn.fold(S.clear,S.set),re()&&It(hn,"display","none")};let nt=!1;const an=bD(()=>{if(!(!t.hasFocus()||t.removed||nt))if(xc(P.element,e5))an.throttle();else{const Vt=Te();bF(Vt,t).fold(le,dn=>{tn(dn.toolbars,M.some(dn.elem))})}},17);t.on("init",()=>{t.on("remove",le),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",De),t.on("click keyup focus SetContent",an.throttle),t.on(aF,le),t.on(Vj,Vt=>{const dn=Te();Tt(dn.lookupTable,Vt.toolbarKey).each(Co=>{tn([Co],En(Vt.target!==t,Vt.target)),tk(P)})}),t.on("focusout",Vt=>{FE.setEditorTimeout(t,()=>{nc(a.element).isNone()&&nc(P.element).isNone()&&le()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&le()}),t.on("DisabledStateChange",Vt=>{Vt.state&&le()}),t.on("ExecCommand",({command:Vt})=>{Vt.toLowerCase()==="toggleview"&&le()}),t.on("AfterProgressState",Vt=>{Vt.state?le():t.hasFocus()&&an.throttle()}),t.on("dragstart",()=>{nt=!0}),t.on("dragend drop",()=>{nt=!1}),t.on("NodeChange",Vt=>{nc(P.element).fold(an.throttle,ce)})})},vF=t=>{pt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:cl(t,a.cmd),onSetup:dC(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ic(t),onAction:cl(t,"JustifyNone")})},yF=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=Xo();return $e(c,b=>({type:"togglemenuitem",text:s.display(b),onSetup:S=>{const T=P=>{P&&(h.on(F=>F.setActive(!1)),h.set(S)),S.setActive(P)};T(Ur(d,s.hash(b)));const D=s.watcher(t,b,T);return()=>{h.clear(),D()}},onAction:()=>s.setCurrent(t,b)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},eq=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:HN,hash:s=>ij(s,["fixed","relative","empty"]).getOr(s),display:Xt,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>M.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:ic(t),onMenuSetup:ic(t)}),tq=t=>M.from(_N(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:oe(a),hash:c=>Zt(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,h)=>{var b;return c.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(b=d.customCode)!==null&&b!==void 0?b:null}).unbind},getCurrent:c=>{const d=Ke.fromDom(c.selection.getNode());return xl(d,h=>M.some(h).filter(lr).bind(b=>To(b,"lang").map(T=>{const D=To(b,"data-mce-lang").getOrUndefined();return{code:T,customCode:D,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=_i();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),Wb(d.clear,ic(t)(c))},onMenuSetup:ic(t)})),nq=t=>{yF(t,eq(t)),tq(t).each(s=>yF(t,s))},oq=(t,s)=>{QZ(t,s),sj(t,s),vj(t,s),A8(t,s),H8(t,s)},wF=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",it),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},CF=t=>Zb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),SF=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:CF(t),onAction:cl(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ic(t),onAction:cl(t,"indent")})},xF=t=>{SF(t)},EF=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),Wb(()=>t.off("PastePlainTextToggle",c),ic(t)(a))},_F=t=>{const s=gn(BN(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:EF(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:EF(t,s)})},ck=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},sq=t=>{Og.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:dC(t,s.name),onAction:ck(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,c=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:dC(t,a),onAction:ck(t,a),shortcut:c})}},fX=t=>{Og.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:cl(t,s.action),shortcut:s.shortcut,context:s.context})}),Og.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ic(t),onAction:cl(t,s.action)})})},rq=t=>{Og.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:cl(t,s.action),onSetup:dC(t,s.name)})})},aq=t=>{sq(t),fX(t),rq(t)},iq=t=>{Og.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:cl(t,s.action),context:s.context})}),Og.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ic(t),onAction:cl(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ic(t),onAction:ck(t,"code")})},cq=t=>{aq(t),iq(t)},lk=(t,s)=>Zb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),lq=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:lk(t,"hasUndo"),onAction:cl(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:lk(t,"hasRedo"),onAction:cl(t,"redo")})},uq=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:lk(t,"hasUndo"),onAction:cl(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:lk(t,"hasRedo"),onAction:cl(t,"redo"),shortcut:"Meta+Y"})},dq=t=>{lq(t),uq(t)},fq=t=>Zb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),mq=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:fq(t),onAction:cl(t,"mceToggleVisualAid"),context:"any"})},hq=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:cl(t,"mceToggleVisualAid"),context:"any"})},gq=t=>{hq(t),mq(t)},pq=(t,s)=>{vF(t),cq(t),oq(t,s),dq(t),lz(t),gq(t),xF(t),nq(t),_F(t),wF(t)},TF=t=>j(t)?t.split(/[ ,]/):t,kF=t=>s=>s.options.get(t),bq=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:j(a)||xt(a,j)?{value:TF(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},AF=kF("contextmenu_never_use_native"),vq=kF("contextmenu_avoid_overlap"),yq=t=>OF(t).length===0,OF=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:no(a,c=>go(s,c))},QC=(t,s)=>({type:"makeshift",x:t,y:s}),wq=(t,s,a)=>QC(t.x+s,t.y+a),DF=t=>t.type==="longpress"||t.type.indexOf("touch")===0,t5=t=>{if(DF(t)){const s=t.touches[0];return QC(s.pageX,s.pageY)}else return QC(t.pageX,t.pageY)},Cq=t=>{if(DF(t)){const s=t.touches[0];return QC(s.clientX,s.clientY)}else return QC(t.clientX,t.clientY)},Sq=(t,s)=>{const a=Bw.DOM.getPos(t);return wq(s,a.x,a.y)},n5=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?t5(s):Sq(t.getContentAreaContainer(),Cq(s)):o5(t),o5=t=>({type:"selection",root:Ke.fromDom(t.selection.getNode())}),RF=t=>({type:"node",node:M.some(Ke.fromDom(t.selection.getNode())),root:Ke.fromDom(t.getBody())}),MF=(t,s,a)=>{switch(a){case"node":return RF(t);case"point":return n5(t,s);case"selection":return o5(t)}},xq=(t,s,a,c,d,h)=>{const b=a(),S=MF(t,s,h);_y(b,xf.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:M.none()}).map(T=>{s.preventDefault(),gr.showMenuAt(d,{anchor:S},{menu:{markers:n1("normal")},data:T})})},Eq={onLtr:()=>[fa,Ca,Sa,Ra,ps,qa,Mf,FC,LC,yT,u1,Ty],onRtl:()=>[fa,Sa,Ca,ps,Ra,qa,Mf,FC,u1,Ty,LC,yT]},_q=12,Tq={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},s5=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return Ux(t.getWin(),_p.domRange(d)).exists(b=>b.left<=c.clientX&&b.right>=c.clientX&&b.top<=c.clientY&&b.bottom>=c.clientY)}},kq=t=>{const s=t.selection.getRng(),a=()=>{FE.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const c=b=>{b.preventDefault(),b.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},NF=(t,s,a)=>{const c=MF(t,s,a);return{bubble:Hu(0,a==="point"?_q:0,Tq),layouts:Eq,overrides:{maxWidthFunction:wR(),maxHeightFunction:Cp()},...c}},Aq=(t,s,a,c,d,h,b)=>{const S=NF(t,s,h);_y(a,xf.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:M.none()}).map(T=>{s.preventDefault();const D=b?Ja.HighlightMenuAndItem:Ja.HighlightNone;gr.showMenuWithinBounds(d,{anchor:S},{menu:{markers:n1("normal"),highlightOnOpen:D},data:T,type:"horizontal"},()=>M.some(rk(t,c.shared,h==="node"?"node":"selection"))),t.dispatch(aF)})},Oq=(t,s,a,c,d,h)=>{const b=dr(),S=b.os.isiOS(),T=b.os.isMacOS(),D=b.os.isAndroid(),P=b.deviceType.isTouch(),F=()=>!(D||S||T&&P),G=()=>{const J=a();Aq(t,s,J,c,d,h,F())};if((T||S)&&h!=="node"){const J=()=>{kq(t),G()};s5(t,s)?J():(t.once("selectionchange",J),t.once("touchend",()=>t.off("selectionchange",J)))}else G()},uk=t=>j(t)?t==="|":t.type==="separator",r5={type:"separator"},a5=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(j(t))return t;switch(t.type){case"separator":return r5;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return j(c)?c:$e(c,a5)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Je(a.onAction)}}},PF=(t,s)=>{if(s.length===0)return t;const c=oi(t).filter(d=>!uk(d)).fold(()=>[],d=>[r5]);return t.concat(c).concat(s).concat([r5])},Dq=(t,s,a)=>{const c=zo(s,(d,h)=>Tt(t,h.toLowerCase()).map(b=>{const S=b.update(a);if(j(S)&&pe(Mr(S)))return PF(d,S.split(" "));if(Ce(S)&&S.length>0){const T=$e(S,a5);return PF(d,T)}else return d}).getOrThunk(()=>d.concat([h])),[]);return c.length>0&&uk(c[c.length-1])&&c.pop(),c},i5=(t,s)=>s.ctrlKey&&!AF(t),Rq=t=>t.type==="longpress"||go(t,"touches"),IF=(t,s)=>!Rq(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),BF=(t,s)=>IF(t,s)?t.selection.getStart(!0):s.target,Mq=(t,s)=>{const a=vq(t),c=IF(t,s)?"selection":"point";if(pe(a)){const d=BF(t,s);return _m(Ke.fromDom(d),a)?"node":c}else return c},Nq=(t,s,a)=>{const d=dr().deviceType.isTouch,h=Mi(gr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Et([Kn("dismissContextMenu",[ot(xd(),(T,D)=>{Po.close(T),t.focus()})])])})),b=()=>gr.hide(h),S=T=>{if(AF(t)&&T.preventDefault(),i5(t,T)||yq(t))return;const D=Mq(t,T),P=()=>{const G=BF(t,T),J=t.ui.registry.getAll(),re=OF(t);return Dq(J.contextMenus,re,G)};(d()?Oq:xq)(t,T,P,a,h,D)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,b),t.on("longpress contextmenu",S)})},dk=ne.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),fk=t=>s=>s.translate(-t.left,-t.top),mk=t=>s=>s.translate(t.left,t.top),Ng=t=>(s,a)=>zo(t,(c,d)=>d(c),Ds(s,a)),hk=(t,s,a)=>t.fold(Ng([mk(a),fk(s)]),Ng([fk(s)]),Ng([])),Uy=(t,s,a)=>t.fold(Ng([mk(a)]),Ng([]),Ng([mk(s)])),LF=(t,s,a)=>t.fold(Ng([]),Ng([fk(a)]),Ng([mk(s),fk(a)])),Pq=(t,s,a,c,d,h)=>{const b=Uy(t,d,h),S=Uy(s,d,h);return Math.abs(b.left-S.left)<=a&&Math.abs(b.top-S.top)<=c},Iq=(t,s,a,c,d,h)=>{const b=Uy(t,d,h),S=Uy(s,d,h),T=Math.abs(b.left-S.left),D=Math.abs(b.top-S.top);return Ds(T,D)},c5=(t,s,a)=>{const c=t.fold((d,h)=>({position:M.some("absolute"),left:M.some(d+"px"),top:M.some(h+"px")}),(d,h)=>({position:M.some("absolute"),left:M.some(d-a.left+"px"),top:M.some(h-a.top+"px")}),(d,h)=>({position:M.some("fixed"),left:M.some(d+"px"),top:M.some(h+"px")}));return{right:M.none(),bottom:M.none(),...c}},Bq=(t,s,a)=>t.fold((c,d)=>pk(c+s,d+a),(c,d)=>h1(c+s,d+a),(c,d)=>o0(c+s,d+a)),gk=(t,s,a,c)=>{const d=(h,b)=>(S,T)=>{const D=h(s,a,c);return b(S.getOr(D.left),T.getOr(D.top))};return t.fold(d(LF,pk),d(Uy,h1),d(hk,o0))},pk=dk.offset,h1=dk.absolute,o0=dk.fixed,g1=(t,s)=>{const a=Vn(t,s);return Zt(a)?NaN:parseInt(a,10)},FF=(t,s)=>{const a=t.element,c=g1(a,s.leftAttr),d=g1(a,s.topAttr);return isNaN(c)||isNaN(d)?M.none():M.some(Ds(c,d))},Lq=(t,s,a)=>{const c=t.element;$t(c,s.leftAttr,a.left+"px"),$t(c,s.topAttr,a.top+"px")},Fq=(t,s)=>{const a=t.element;ee(a,s.leftAttr),ee(a,s.topAttr)},$q=(t,s,a,c)=>FF(t,s).fold(()=>a,d=>o0(d.left+c.left,d.top+c.top)),Hq=(t,s,a,c,d,h)=>{const b=$q(t,s,a,c),S=s.mustSnap?zq(t,s,b,d,h):Vq(t,s,b,d,h),T=hk(b,d,h);return Lq(t,s,T),S.fold(()=>({coord:o0(T.left,T.top),extra:M.none()}),D=>({coord:D.output,extra:D.extra}))},$F=(t,s)=>{Fq(t,s)},HF=(t,s,a,c)=>Ss(t,d=>{const h=d.sensor;return Pq(s,h,d.range.left,d.range.top,a,c)?M.some({output:gk(d.output,s,a,c),extra:d.extra}):M.none()}),zq=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return HF(h,a,c,d).orThunk(()=>zo(h,(T,D)=>{const P=D.sensor,F=Iq(a,P,D.range.left,D.range.top,c,d);return T.deltas.fold(()=>({deltas:M.some(F),snap:M.some(D)}),G=>{const J=(F.left+F.top)/2,re=(G.left+G.top)/2;return J<=re?{deltas:M.some(F),snap:M.some(D)}:T})},{deltas:M.none(),snap:M.none()}).snap.map(T=>({output:gk(T.output,a,c,d),extra:T.extra})))},Vq=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return HF(h,a,c,d)},Uq=(t,s,a)=>({coord:gk(t.output,t.output,s,a),extra:t.extra});var Wq=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Ps(t.element),b=Va(h),S=qh(d),T=Uq(c,b,S),D=c5(T.coord,b,S);ta(d,D)}}});const l5="data-initial-z-index",Zq=t=>{Nr(t.element).filter(lr).each(s=>{To(s,l5).fold(()=>uo(s,"z-index"),a=>It(s,"z-index",a)),ee(s,l5)})},jq=t=>{Nr(t.element).filter(lr).each(s=>{us(s,"z-index").each(a=>{$t(s,l5,a)}),It(s,"z-index",ut(t.element,"z-index"))})},zF=(t,s)=>{t.getSystem().addToGui(s),jq(s)},VF=t=>{Zq(t),t.getSystem().removeFromGui(t)},u5=(t,s,a)=>t.getSystem().build(Tm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var qq=ca("snaps",[rt("getSnapPoints"),ko("onSensor"),rt("leftAttr"),rt("topAttr"),Pe("lazyViewport",Qr),Pe("mustSnap",!1)]);const s0=[Pe("useFixed",at),rt("blockerClass"),Pe("getTarget",Xt),Pe("onDrag",ce),Pe("repositionTarget",!0),Pe("onDrop",ce),os("getBounds",Qr),qq],Gq=t=>Fi(us(t,"left"),us(t,"top"),us(t,"position"),(s,a,c)=>(c==="fixed"?o0:pk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Ta(t);return h1(s.left,s.top)}),Kq=(t,s,a,c,d)=>{const h=d.bounds,b=Uy(s,a,c),S=ru(b.left,h.x,h.x+h.width-d.width),T=ru(b.top,h.y,h.y+h.height-d.height),D=h1(S,T);return s.fold(()=>{const P=LF(D,a,c);return pk(P.left,P.top)},oe(D),()=>{const P=hk(D,a,c);return o0(P.left,P.top)})},d5=(t,s,a,c,d,h,b)=>{const S=s.fold(()=>{const T=Bq(a,h.left,h.top),D=hk(T,c,d);return o0(D.left,D.top)},T=>{const D=Hq(t,T,a,h,c,d);return D.extra.each(P=>{T.onSensor(t,P)}),D.coord});return Kq(t,S,c,d,b)},Yq=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Ps(t.element),b=Va(h),S=qh(d),T=Gq(d),D=d5(t,s.snaps,T,b,S,c,a),P=c5(D,b,S);ta(d,P)}s.onDrag(t,d,c)},UF=(t,s)=>({bounds:t.getBounds(),height:Hl(s.element),width:pl(s.element)}),f5=(t,s,a,c,d)=>{const h=a.update(c,d),b=a.getStartData().getOrThunk(()=>UF(s,t));h.each(S=>{Yq(t,s,b,S)})},WF=(t,s,a,c)=>{s.each(VF),a.snaps.each(h=>{$F(t,h)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},m5=t=>(s,a)=>{const c=d=>{a.setStartData(UF(s,d))};return fs([ot(I1(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},Xq=t=>fs([ot(Ir(),t.forceDrop),ot(wd(),t.drop),ot(Hh(),(s,a)=>{t.move(a.event)}),ot(Qg(),t.delayDrop)]);var Jq=Object.freeze({__proto__:null,getData:t=>M.from(Ds(t.x,t.y)),getDelta:(t,s)=>Ds(s.left-t.left,s.top-t.top)});const ZF=(t,s,a)=>[ot(Ir(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const b=()=>WF(c,M.some(D),t,s),S=qI(b,200),T={drop:b,delayDrop:S.schedule,forceDrop:b,move:F=>{S.cancel(),f5(c,t,s,Jq,F)}},D=u5(c,t.blockerClass,Xq(T));(()=>{a(c),zF(c,D)})()})],Qq=[...s0,nr("dragger",{handlers:m5(ZF)})],eG=t=>fs([ot(tu(),t.forceDrop),ot(zs(),t.drop),ot(Oi(),t.drop),ot(Ro(),(s,a)=>{t.move(a.event)})]),tG=t=>{const s=t[0];return M.some(Ds(s.clientX,s.clientY))};var jF=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?tG(a):M.none()},getDelta:(t,s)=>Ds(s.left-t.left,s.top-t.top)});const qF=(t,s,a)=>{const c=Xo(),d=h=>{WF(h,c.get(),t,s),c.clear()};return[ot(tu(),(h,b)=>{b.stop();const S=()=>d(h),T={drop:S,delayDrop:ce,forceDrop:S,move:F=>{f5(h,t,s,jF,F)}},D=u5(h,t.blockerClass,eG(T));c.set(D),(()=>{a(h),zF(h,D)})()}),ot(Ro(),(h,b)=>{b.stop(),f5(h,t,s,jF,b.event)}),ot(zs(),(h,b)=>{b.stop(),d(h)}),ot(Oi(),d)]},bk=[...s0,nr("dragger",{handlers:m5(qF)})],nG=(t,s,a)=>[...ZF(t,s,a),...qF(t,s,a)],oG=[...s0,nr("dragger",{handlers:m5(nG)})];var sG=Object.freeze({__proto__:null,mouse:Qq,touch:bk,mouseOrTouch:oG}),aG=Object.freeze({__proto__:null,init:()=>{let t=M.none(),s=M.none();const a=()=>{t=M.none(),s=M.none()},c=(T,D)=>{const P=t.map(F=>T.getDelta(F,D));return t=M.some(D),P},d=(T,D)=>T.getData(D).bind(P=>c(T,P)),h=T=>{s=M.some(T)},b=()=>s,S=oe({});return di({readState:S,reset:a,update:d,getStartData:b,setStartData:h})}});const r0=U1({branchKey:"mode",branches:sG,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:M.from(t.extra)})},state:aG,apis:Wq}),h5=40,vk=h5/2,GF=(t,s,a,c,d,h)=>t.fold(()=>r0.snap({sensor:h1(a-vk,c-vk),range:Ds(d,h),output:h1(M.some(a),M.some(c)),extra:{td:s}}),b=>{const S=a-vk,T=c-vk,D=h5,P=h5,F=b.element.dom.getBoundingClientRect();return r0.snap({sensor:h1(S,T),range:Ds(D,P),output:h1(M.some(a-F.width/2),M.some(c-F.height/2)),extra:{td:s}})}),yk=(t,s,a)=>{const c=(d,h)=>d.exists(b=>yo(b,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const b=h.td;c(s.get(),b)||(s.set(b),a(b))},mustSnap:!0}},g5=t=>Jo(Na.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Et([r0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),ll.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),iG=(t,s)=>{const a=gn([]),c=gn([]),d=gn(!1),h=Xo(),b=Xo(),S=tn=>{const nt=Ei(tn);return GF(J.getOpt(s),tn,nt.x,nt.y,nt.width,nt.height)},T=()=>$e(a.get(),tn=>S(tn)),D=tn=>{const nt=Ei(tn);return GF(re.getOpt(s),tn,nt.right,nt.bottom,nt.width,nt.height)},P=()=>$e(c.get(),tn=>D(tn)),F=yk(T,h,tn=>{b.get().each(nt=>{t.dispatch("TableSelectorChange",{start:tn,finish:nt})})}),G=yk(P,b,tn=>{h.get().each(nt=>{t.dispatch("TableSelectorChange",{start:nt,finish:tn})})}),J=g5(F),re=g5(G),le=Mi(J.asSpec()),De=Mi(re.asSpec()),de=(tn,nt,an,Vt)=>{const dn=nt.dom.getBoundingClientRect();uo(tn.element,"display");const Co=Pc(Ke.fromDom(t.getBody())).dom.innerHeight,Ys=an(dn),Go=Vt(dn,Co);(Ys||Go)&&It(tn.element,"display","none")},Te=(tn,nt,an,Vt)=>{const dn=an(nt);r0.snapTo(tn,dn),de(tn,nt,Go=>Go[Vt]<0,(Go,hn)=>Go[Vt]>hn)},Oe=tn=>Te(le,tn,S,"top"),ze=()=>h.get().each(Oe),We=tn=>Te(De,tn,D,"bottom"),Mt=()=>b.get().each(We);if(dr().deviceType.isTouch()){const tn=nt=>$e(nt,Ke.fromDom);t.on("TableSelectionChange",nt=>{d.get()||(vf(s,le),vf(s,De),d.set(!0));const an=Ke.fromDom(nt.start),Vt=Ke.fromDom(nt.finish);h.set(an),b.set(Vt),M.from(nt.otherCells).each(dn=>{a.set(tn(dn.upOrLeftCells)),c.set(tn(dn.downOrRightCells)),Oe(an),We(Vt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ze(),Mt()}),t.on("TableSelectionClear",()=>{d.get()&&(yf(le),yf(De),d.set(!1)),h.clear(),b.clear()})}};var cG=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const lG=(t,s)=>{const a=M.from(Vn(t,"id")).getOrThunk(()=>{const c=on("aria");return $t(s,"id",c),c});$t(t,"aria-describedby",a)},uG=t=>{ee(t,"aria-describedby")},dG=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",fG=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"›",h=(D,P,F)=>Na.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":F}},components:[or(D)],action:G=>{t.focus(),t.selection.select(P),t.nodeChanged()},buttonBehaviours:Et([Ar.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",P.nodeName.toLowerCase()]),onShow:(G,J)=>{lG(G.element,J.element)},onHide:G=>{uG(G.element)}})}),$d.button(a.isDisabled),ga(()=>a.checkUiComponentContext("any"))])}),b=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[or(` ${d} `)]}),S=D=>zo(D,(P,F,G)=>{const J=h(F.name,F.element,G);return G===0?P.concat([J]):P.concat([b(),J])},[]),T=D=>{const P=[];let F=D.length;for(;F-- >0;){const G=D[F];if(G.nodeType===1&&!dG(G)){const J=$9(t,G);if(J.isDefaultPrevented()||P.push({name:J.name,element:G}),J.isPropagationStopped())break}}return P};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Et([Sn.config({mode:"flow",selector:"div[role=button]"}),vn.config({disabled:a.isDisabled}),ga(()=>a.checkUiComponentContext("any")),cr.config({}),Wn.config({}),Kn("elementPathEvents",[tr((D,P)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Sn.focusIn(D)),t.on("NodeChange",F=>{const G=T(F.parents),J=G.length>0?S(G):[];Wn.set(D,J)})})])]),components:[]}};var p1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(p1||(p1={}));const mG=(t,s,a,c,d)=>{const h={height:JT(c+s.top,Q3(t),ty(t))};return a===p1.Both&&(h.width=JT(d+s.left,Fw(t),Xp(t))),h},KF=(t,s,a)=>{const c=Ke.fromDom(t.getContainer()),d=mG(t,s,a,xr(c),oo(c));Ts(d,(h,b)=>{ln(h)&&It(c,b,VR(h))}),F9(t)},hG=t=>{const s=IN(t);return s===!1?p1.None:s==="both"?p1.Both:p1.Vertical},wk=(t,s,a,c)=>{const h=Ds(a*20,c*20);return KF(t,h,s),M.some(!0)},gG=(t,s)=>{const a=hG(t);if(a===p1.None)return M.none();const c=a===p1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return M.some(Gu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(c),"data-mce-name":"resize-handle"},behaviours:[r0.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,b)=>KF(t,b,a),blockerClass:"tox-blocker"}),Sn.config({mode:"special",onLeft:()=>wk(t,a,-1,0),onRight:()=>wk(t,a,1,0),onUp:()=>wk(t,a,0,-1),onDown:()=>wk(t,a,0,1)}),cr.config({}),$n.config({}),Ar.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},pG=(t,s)=>{const a=(c,d,h)=>Wn.set(c,[or(s.translate(["{0} "+h,d[h]]))]);return Na.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Et([$d.button(s.isDisabled),ga(()=>s.checkUiComponentContext("any")),cr.config({}),Wn.config({}),Jt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Kn("wordcount-events",[rf(c=>{const d=Jt.getValue(c),h=d.mode==="words"?"characters":"words";Jt.setValue(c,{mode:h,count:d.count}),a(c,d.count,h)}),tr(c=>{t.on("wordCountUpdate",d=>{const{mode:h}=Jt.getValue(c);Jt.setValue(c,{mode:h,count:d.wordCount}),a(c,d.wordCount,h)})})])]),eventOrder:{[Di()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},bG=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",cG.trim()])},behaviours:Et([$n.config({})])}]}),c=()=>{const S=tO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[or(Bd.translate(["Press {0} for help",S]))]}},d=()=>{const S=[];return t.hasPlugin("wordcount")&&S.push(pG(t,s)),iA(t)&&S.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:S}},h=()=>{const S=[],T=qE(t),D=PN(t),P=iA(t)||t.hasPlugin("wordcount"),F=()=>{const G="tox-statusbar__text-container--flex-start",J="tox-statusbar__text-container--flex-end",re="tox-statusbar__text-container--space-around";if(T){const le="tox-statusbar__text-container-3-cols";return!P&&!D?[le,re]:P&&!D?[le,J]:[le,G]}return[P&&!D?J:G]};return D&&S.push(fG(t,{},s)),T&&S.push(c()),P&&S.push(d()),S.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...F()]},components:S}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const S=h(),T=gG(t,s);return S.concat(T.toArray())})()}},p5=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),vG=(t,s)=>{const a=t.inline,c=a?Hj:Bj,d=Jp(t)?VC:IW,h=zj(),b=Xo(),S=Xo(),T=Xo(),G=dr().deviceType.isTouch()?["tox-platform-touch"]:[],J=uA(t),re=ny(t),le=Jo({dom:{tag:"div",classes:["tox-anchorbar"]}}),De=Jo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),de=()=>h.mainUi.get().map(Tn=>Tn.outerContainer).bind(Ks.getHeader),Te=()=>Xn.fromOption(h.dialogUi.get().map(Tn=>Tn.sink),"UI has not been rendered"),Oe=()=>Xn.fromOption(h.popupUi.get().map(Tn=>Tn.sink),"(popup) UI has not been rendered"),ze=h.lazyGetInOuterOrDie("anchor bar",le.getOpt),We=h.lazyGetInOuterOrDie("bottom anchor bar",De.getOpt),Mt=h.lazyGetInOuterOrDie("toolbar",Ks.getToolbar),tn=h.lazyGetInOuterOrDie("throbber",Ks.getThrobber),nt=xT({popup:Oe,dialog:Te},t,ze,We),an=()=>{const Tn={attributes:{[dh]:J?fm.BottomToTop:fm.TopToBottom}},Yn=Ks.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:nt.popup,onEscape:()=>{t.focus()}}),ks=Ks.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:nt.popup.shared.getSink,providers:nt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:kh=>{fI(t,kh)},type:re,lazyToolbar:Mt,lazyHeader:()=>de().getOrDie("Could not find header element"),...Tn}),bs=Ks.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:nt.popup.shared.providers,onEscape:()=>{t.focus()},type:re}),Il=Hw(t),wr=KE(t),ed=GE(t),mc=cA(t),td=Vt(),nd=Il||wr||ed,Bf=()=>Il?[bs]:wr?[ks]:[],rS=mc?[td,Yn]:[Yn];return Ks.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(nd?[]:["tox-editor-header--empty"]),...Tn},components:dt([ed?rS:[],Bf(),Cf(t)?[]:[le.asSpec()]]),sticky:Jp(t),editor:t,sharedBackstage:nt.popup.shared})},Vt=()=>Ks.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),dn=()=>{const Tn=Ks.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Yn=Ks.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Tn,Yn]}},Co=()=>{const Tn=dA(t),Yn=yo(Ye(),Tn)&&ut(Tn,"display")==="grid",ks={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(G),attributes:{...Bd.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Ya.config({useFixed:()=>d.isDocked(de)})])},bs={dom:{styles:{width:document.body.clientWidth+"px"}},events:fs([ot(nm(),ed=>{It(ed.element,"width",document.body.clientWidth+"px")})])},Il=Mi(Fs(ks,Yn?bs:{})),wr=NO(Il);return S.set(wr),{sink:Il,mothership:wr}},Ys=()=>{const Tn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(G),attributes:{...Bd.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Ya.config({useFixed:()=>d.isDocked(de),getBounds:()=>s.getPopupSinkBounds()})])},Yn=Mi(Tn),ks=NO(Yn);return T.set(ks),{sink:Yn,mothership:ks}},Go=()=>{const Tn=an(),Yn=dn(),ks=Ks.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:nt.popup}),bs=Ks.parts.viewWrapper({backstage:nt.popup}),Il=jE(t)&&!a?M.some(bG(t,nt.popup.shared.providers)):M.none(),wr=dt([J?[]:[Tn],a?[]:[Yn],J?[Tn]:[]]),ed=Ks.parts.editorContainer({components:dt([wr,a?[]:[De.asSpec()]])}),mc=fA(t),td={role:"application",...Bd.isRtl()?{dir:"rtl"}:{},...mc?{"aria-hidden":"true"}:{}},nd=Mi(Ks.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(J?["tox-tinymce--toolbar-bottom"]:[]).concat(G),styles:{visibility:"hidden",...mc?{opacity:"0",border:"0"}:{}},attributes:td},components:[ed,...a?[]:[bs,...Il.toArray()],ks],behaviours:Et([ga(()=>nt.popup.shared.providers.checkUiComponentContext("any")),vn.config({disableClass:"tox-tinymce--disabled"}),Sn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Bf=NO(nd);return b.set(Bf),{mothership:Bf,outerContainer:nd}},hn=Tn=>{const Yn=VR(Lj(t)),ks=VR(Fj(t));return t.inline||(ur("div","width",ks)&&It(Tn.element,"width",ks),ur("div","height",Yn)?It(Tn.element,"height",Yn):It(Tn.element,"height","400px")),Yn},vt=Tn=>{t.addShortcut("alt+F9","focus menubar",()=>{Ks.focusMenubar(Tn)}),t.addShortcut("alt+F10","focus toolbar",()=>{Ks.focusToolbar(Tn)}),t.addCommand("ToggleToolbarDrawer",(Yn,ks)=>{ks!=null&&ks.skipFocus?Ks.toggleToolbarDrawerWithoutFocusing(Tn):Ks.toggleToolbarDrawer(Tn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Ks.isToolbarDrawerToggled(Tn))},Ut=Tn=>{const{mainUi:Yn,popupUi:ks,uiMotherships:bs}=Tn;Ko(VE(t),(m0,A5)=>{t.ui.registry.addGroupToolbarButton(A5,m0)});const{buttons:Il,menuItems:wr,contextToolbars:ed,sidebars:mc,views:td}=t.ui.registry.getAll(),nd=YE(t),Bf={menuItems:wr,menus:zN(t),menubar:ON(t),toolbar:nd.getOrThunk(()=>WE(t)),allowToolbarGroups:re===qu.floating,buttons:Il,sidebar:mc,views:td};vt(Yn.outerContainer),OW(t,Yn.mothership,bs),d.setup(t,nt.popup.shared,de),pq(t,nt.popup),Nq(t,nt.popup.shared.getSink,nt.popup),GW(t),GL(t,tn,nt.popup.shared),ik(t,ed,ks.sink,{backstage:nt.popup}),iG(t,ks.sink);const rS=t.getElement(),kh=hn(Yn.outerContainer),k5={targetNode:rS,height:kh};return c.render(t,Tn,Bf,nt.popup,k5)},Un=Tn=>(T.set(Tn.mothership),Tn),ao=()=>{const Tn=Go(),Yn=Co(),ks=Sg(t)?Ys():Un(Yn);h.dialogUi.set(Yn),h.popupUi.set(ks),h.mainUi.set(Tn);const bs={popupUi:ks,dialogUi:Yn,mainUi:Tn,uiMotherships:h.getUiMotherships()};return Ut(bs)};return{popups:{backstage:nt.popup,getMothership:()=>p5("popups",T)},dialogs:{backstage:nt.dialog,getMothership:()=>p5("dialogs",S)},renderUI:ao}},yG=t=>t.dom.textContent,wG=(t,s)=>{const a=To(t,"id").fold(()=>{const c=on("dialog-label");return $t(s,"id",c),c},Xt);$t(t,"aria-labelledby",a)},CG=oe([rt("lazySink"),Wo("dragBlockClass"),os("getBounds",Qr),Pe("useTabstopAt",it),Pe("firstTabstop",0),Pe("eventOrder",{}),Xa("modalBehaviours",[Sn]),tc("onExecute"),pp("onEscape")]),b5={sketch:Xt},SG=oe([zc({name:"draghandle",overrides:(t,s)=>({behaviours:Et([r0.config({mode:"mouse",getTarget:a=>da(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Ii({schema:[rt("dom")],name:"title"}),Ii({factory:b5,schema:[rt("dom")],name:"close"}),Ii({factory:b5,schema:[rt("dom")],name:"body"}),zc({factory:b5,schema:[rt("dom")],name:"footer"}),iu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Pe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Pe("components",[])],name:"blocker"})]),xG=(t,s,a,c)=>{const d=Xo(),h=re=>{d.set(re);const le=t.lazySink(re).getOrDie(),De=c.blocker(),de=le.getSystem().build({...De,components:De.components.concat([El(re)]),behaviours:Et([$n.config({}),Kn("dialog-blocker-events",[eh(Cd(),()=>{Wd.isBlocked(re)?ce():Sn.focusIn(re)})])])});vf(le,de),Sn.focusIn(re)},b=re=>{d.clear(),Nr(re.element).each(le=>{re.getSystem().getByDom(le).each(De=>{yf(De)})})},S=re=>rl(re,t,"body"),T=re=>Rs(re,t,"footer"),D=(re,le)=>{Wd.block(re,le)},P=re=>{Wd.unblock(re)},F=on("modal-events"),G={...t.eventOrder,[Qi()]:[F].concat(t.eventOrder["alloy.system.attached"]||[])},J=dr();return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:b,getBody:S,getFooter:T,setIdle:P,setBusy:D},eventOrder:G,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Fr(t.modalBehaviours,[Wn.config({}),Sn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Wd.config({getRoot:d.get}),Kn(F,[tr(re=>{const le=rl(re,t,"title").element,De=yG(le);J.os.isMacOS()&&Ct(De)?$t(re.element,"aria-label",De):wG(re.element,le)})])])}},ti=ac({name:"ModalDialog",configFields:CG(),partFields:SG(),factory:xG,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),YF=Bn([ha,FA].concat($b)),XF=tl,v5=[w_("button"),Ku,Aa("align","end",["start","end"]),y_,_f,Fh("buttonType",["primary","secondary"]),er("context","mode:design")],Ck=[...v5,xg],a0=[ya("type",["submit","cancel","custom"]),...Ck],y5=[ya("type",["menu"]),s1,iy,Ku,Cc("items",YF),...v5],Sk=[...v5,ya("type",["togglebutton"]),iy,Ku,s1,Oa("active",!1)],i0=ra("type",{submit:a0,cancel:a0,custom:a0,menu:y5,togglebutton:Sk}),xk=[ha,xg,ya("level",["info","warn","error","success"]),kP,Pe("url","")],EG=Bn(xk),JF=t=>[ha,t],QF=[ha,xg,_f,w_("button"),Ku,UA,Fh("buttonType",["primary","secondary","toolbar"]),y_,er("context","mode:design")],e$=Bn(QF),Wy=[ha,FA],Om=Wy.concat([zA]),_G=Wy.concat([$A,_f,er("context","mode:design")]),t$=Bn(_G),n$=tl,w5=Om.concat([DP("auto"),er("context","mode:design")]),TG=Bn(w5),kG=qg([nC,xg,kP]),AG=Om.concat([er("storageKey","default"),er("context","mode:design")]),OG=Bn(AG),eS=Wt,DG=Bn(Om),o$=Wt,RG=Wy.concat([er("tag","textarea"),ia("scriptId"),ia("scriptUrl"),yd("onFocus"),M1("settings",void 0)]),MG=Wy.concat([er("tag","textarea"),Sl("init")]),NG=Bh(t=>fr("customeditor.old",Za(MG),t).orThunk(()=>fr("customeditor.new",Za(RG),t))),C5=Wt,S5=Om.concat([er("context","mode:design")]),PG=Bn(S5),s$=em(),IG=t=>[ha,Kg("columns"),t],BG=[ha,ia("html"),Aa("presets","presentation",["presentation","document"]),os("onInit",ce),Oa("stretched",!1)],r$=Bn(BG),LG=Om.concat([Oa("border",!1),Oa("sandboxed",!0),Oa("streamContent",!1),Oa("transparent",!0)]),FG=Bn(LG),c0=Wt,a$=Bn(Wy.concat([yr("height")])),$G=Bn([ia("url"),Lh("zoom"),Lh("cachedWidth"),Lh("cachedHeight")]),Ek=Om.concat([yr("inputMode"),yr("placeholder"),Oa("maximized",!1),_f,er("context","mode:design")]),Zy=Bn(Ek),_k=Wt,i$=t=>[ha,$A,t,Aa("align","start",["start","center","end"]),yr("for")],Tk=[xg,nC],Ml=[xg,Cc("items",Km("items",()=>tS))],tS=Jf([Bn(Tk),Bn(Ml)]),c$=Om.concat([Cc("items",tS),_f,er("context","mode:design")]),l$=Bn(c$),HG=Wt,zG=Om.concat([D1("items",[xg,nC]),R1("size",1),_f,er("context","mode:design")]),b1=Bn(zG),SX=Wt,VG=Om.concat([Oa("constrain",!0),_f,er("context","mode:design")]),u$=Bn(VG),l0=Bn([ia("width"),ia("height")]),kk=Wy.concat([$A,R1("min",0),R1("max",0)]),d$=Bn(kk),UG=ef,WG=[ha,Cc("header",Wt),Cc("cells",el(Wt))],ZG=Bn(WG),jG=Om.concat([yr("placeholder"),Oa("maximized",!1),_f,er("context","mode:design")]),jy=Bn(jG),xX=Wt,f$=[ya("type",["directory","leaf"]),TP,ia("id"),Pu("menu",HW),yr("customStateIcon"),yr("customStateIconTooltip")],qG=Bn(f$),GG=f$.concat([Cc("children",Km("children",()=>tf("type",{directory:m$,leaf:qG})))]),m$=Bn(GG),nS=tf("type",{directory:m$,leaf:qG}),KG=[ha,Cc("items",nS),yd("onLeafAction"),yd("onToggleExpand"),_("defaultExpandedIds",[],Wt),yr("defaultSelectedId")],YG=Bn(KG),h$=Om.concat([Aa("filetype","file",["image","media","file"]),_f,yr("picker_text"),er("context","mode:design")]),XG=Bn(h$),_X=Bn([nC,WA]),e=t=>aa("items","items",wc(),el(Bh(s=>fr(`Checking item of ${t}`,n,s).fold(a=>Xn.error(Jl(a)),a=>Xn.value(a))))),n=ea(()=>tf("type",{alertbanner:EG,bar:Bn(JF(e("bar"))),button:e$,checkbox:t$,colorinput:OG,colorpicker:DG,dropzone:PG,grid:Bn(IG(e("grid"))),iframe:FG,input:Zy,listbox:l$,selectbox:b1,sizeinput:u$,slider:d$,textarea:jy,urlinput:XG,customeditor:NG,htmlpanel:r$,imagepreview:a$,collection:TG,label:Bn(i$(e("label"))),table:ZG,tree:YG,panel:r})),o=[ha,Pe("classes",[]),Cc("items",n)],r=Bn(o),i=[w_("tab"),TP,Cc("items",n)],u=[ha,D1("tabs",i)],m=Bn(u),y=Ck,x=i0,A=Bn([ia("title"),Uo("body",tf("type",{panel:r,tabpanel:m})),er("size","normal"),_("buttons",[],x),Pe("initialData",{}),os("onAction",ce),os("onChange",ce),os("onSubmit",ce),os("onClose",ce),os("onCancel",ce),os("onTabChange",ce)]),L=t=>fr("dialog",A,t),$=Bn([ya("type",["cancel","custom"]),...y]),z=Bn([ia("title"),ia("url"),Lh("height"),Lh("width"),Yg("buttons",$),os("onAction",ce),os("onCancel",ce),os("onClose",ce),os("onMessage",ce)]),X=t=>fr("dialog",z,t),se=t=>ue(t)?[t].concat(xe(jc(t),se)):Ce(t)?xe(t,se):[],te=t=>j(t.type)&&j(t.name),ie={checkbox:n$,colorinput:eS,colorpicker:o$,dropzone:s$,input:_k,iframe:c0,imagepreview:$G,selectbox:SX,sizeinput:l0,slider:UG,listbox:HG,size:l0,textarea:xX,urlinput:_X,customeditor:C5,collection:kG,togglemenuitem:XF},Ee=t=>M.from(ie[t.type]),Re=t=>no(se(t),te),Me=t=>{const s=Re(t),a=xe(s,c=>Ee(c).fold(()=>[],d=>[Uo(c.name,d)]));return Bn(a)},Ie=t=>{var s;const a=bt(L(t)),c=Me(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},ct={open:(t,s)=>{const a=Ie(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=bt(X(s));return t(a)},redial:t=>Ie(t)};var Qt=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(h=>{const b=h(c,d);s.set(b)}),t.renderComponents.each(h=>{const b=h(d,s.get());(t.reuseDom?rN:I3)(c,b)})};return fs([ot(ou(),(c,d)=>{const h=d;if(!h.universal){const b=t.channel;wt(h.channels,b)&&a(c,h.data)}}),tr((c,d)=>{t.initialData.each(h=>{a(c,h)})})])}}),Ze=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),ht=[rt("channel"),Wo("renderComponents"),Wo("updateState"),Wo("initialData"),Oa("reuseDom",!0)],_n=Object.freeze({__proto__:null,init:()=>{const t=gn(M.none()),s=()=>t.set(M.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Zn=wa({fields:ht,name:"reflecting",active:Qt,apis:Ze,state:_n}),ho=t=>{const s=[],a={};return Ts(t,(c,d)=>{c.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?Xn.error(s):Xn.value(a)},as=(t,s,a,c)=>{const d=Jo(Yb.sketch(h=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:$e(t.items,b=>oL(h,b,s,a,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:Fe(OC)}),uc.memento(d),Q6(d,{postprocess:h=>ho(h).fold(b=>(console.error(b),{}),Xt)}),Kn("dialog-body-panel",[ot(Cd(),(h,b)=>{h.getSystem().broadcastOn([RC],{newFocus:M.some(b.event.target)})})])])}},Cs=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Qv(t.action),behaviours:Fr(t.tabButtonBehaviours,[$n.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0}),Jt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),jr=al({name:"TabButton",configFields:[Pe("uid",void 0),rt("value"),aa("dom","dom",k(()=>({attributes:{role:"tab",id:on("aria"),"aria-selected":"false"}})),wl()),Wo("action"),Pe("domModification",{}),Xa("tabButtonBehaviours",[$n,Sn,Jt]),rt("view")],factory:Cs}),qi=oe([rt("tabs"),rt("dom"),Pe("clickToDismiss",!1),Xa("tabbarBehaviours",[mt,Sn]),im(["tabClass","selectedClass"])]),hi=_b({factory:jr,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{mt.dehighlight(c,d),bn(c,ES(),{tabbar:c,button:d})},a=(c,d)=>{mt.highlight(c,d),bn(c,xS(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),h=mt.isHighlighted(d,c);(h&&t.clickToDismiss?s:h?ce:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),Ft=oe([hi]),xn=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Fr(t.tabbarBehaviours,[mt.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{$t(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{$t(h.element,"aria-selected","false")}}),Sn.config({mode:"flow",getInitial:d=>mt.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Zo=ac({name:"Tabbar",configFields:qi(),partFields:Ft(),factory:xn}),Yt=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Fr(t.tabviewBehaviours,[Wn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Ln=al({name:"Tabview",configFields:[Xa("tabviewBehaviours",[Wn])],factory:Yt}),zn=oe([Pe("selectFirst",!0),ko("onChangeTab"),ko("onDismissTab"),Pe("tabs",[]),Xa("tabSectionBehaviours",[])]),qt=Ii({factory:Zo,schema:[rt("dom"),nf("markers",[rt("tabClass"),rt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),vo=Ii({factory:Ln,name:"tabview"}),Eo=oe([qt,vo]),Pa=(t,s,a,c)=>{const d=b=>{const S=Jt.getValue(b);Rs(b,t,"tabview").each(T=>{et(t.tabs,P=>P.value===S).each(P=>{const F=P.view();To(b.element,"id").each(G=>{$t(T.element,"aria-labelledby",G)}),Wn.set(T,F),t.onChangeTab(T,b,F)})})},h=(b,S)=>{Rs(b,t,"tabbar").each(T=>{S(T).each(Qm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:yb(t.tabSectionBehaviours),events:fs(dt([t.selectFirst?[tr((b,S)=>{h(b,mt.getFirst)})]:[],[ot(xS(),(b,S)=>{const T=S.event.button;d(T)}),ot(ES(),(b,S)=>{const T=S.event.button;t.onDismissTab(b,T)})]])),apis:{getViewItems:b=>Rs(b,t,"tabview").map(S=>Wn.contents(S)).getOr([]),showTab:(b,S)=>{h(b,D=>{const P=mt.getCandidates(D);return et(P,G=>Jt.getValue(G)===S).filter(G=>!mt.isHighlighted(D,G))})}}}},ms=ac({name:"TabSection",configFields:zn(),partFields:Eo(),factory:Pa,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),dc=(t,s,a)=>$e(t,(c,d)=>{Wn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return Wn.set(a,[]),h.height}),Nl=t=>Ws(zr(t,(s,a)=>s>a?-1:s<a?1:0)),Dm=(t,s,a)=>{const c=$i(t).dom,d=da(t,".tox-dialog-wrap").getOr(t),h=ut(d,"position")==="fixed";let b;h?b=Math.max(c.clientHeight,window.innerHeight):b=Math.max(c.offsetHeight,c.scrollHeight);const S=xr(s),D=s.dom.offsetLeft>=a.dom.offsetLeft+oo(a)?Math.max(xr(a),S):S,P=parseInt(ut(t,"margin-top"),10)||0,F=parseInt(ut(t,"margin-bottom"),10)||0,J=xr(t)+P+F-D;return b-J},Rc=(t,s)=>{Ws(t).each(a=>ms.showTab(s,a.value))},mu=(t,s)=>{It(t,"height",s+"px"),It(t,"flex-basis",s+"px")},hu=(t,s,a)=>{da(t,'[role="dialog"]').each(c=>{ir(c,'[role="tablist"]').each(d=>{a.get().map(h=>(It(s,"height","0"),It(s,"flex-basis","0"),Math.min(h,Dm(c,s,d)))).each(h=>{mu(s,h)})})})},Gi=t=>ir(t,'[role="tabpanel"]'),gu=t=>{const s=Xo();return{extraEvents:[tr(d=>{const h=d.element;Gi(h).each(b=>{It(b,"visibility","hidden"),d.getSystem().getByDom(b).toOptional().each(S=>{const T=dc(t,b,S);Nl(T).fold(s.clear,s.set)}),hu(h,b,s),uo(b,"visibility"),Rc(t,d),requestAnimationFrame(()=>{hu(h,b,s)})})}),ot(nm(),d=>{const h=d.element;Gi(h).each(b=>{hu(h,b,s)})}),ot(a6,(d,h)=>{const b=d.element;Gi(b).each(S=>{const T=dm(br(S));It(S,"visibility","hidden");const D=us(S,"height").map(G=>parseInt(G,10));uo(S,"height"),uo(S,"flex-basis");const P=S.dom.getBoundingClientRect().height;D.forall(G=>P>G)?(s.set(P),hu(b,S,s)):D.each(G=>{mu(S,G)}),uo(S,"visibility"),T.each($c)})})],selectFirst:!1}},wn="send-data-to-section",Lo="send-data-to-view",qr=(t,s,a,c)=>{const d=gn({}),h=P=>{const F=Jt.getValue(P),G=ho(F).getOr({}),J=d.get(),re=Fs(J,G);d.set(re)},b=P=>{const F=d.get();Jt.setValue(P,F)},S=gn(null),T=$e(t.tabs,P=>({value:P.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[or(a.shared.providers.translate(P.title))],view:()=>[Yb.sketch(F=>({dom:{tag:"div",classes:["tox-form"]},components:$e(P.items,G=>oL(F,G,s,a,c)),formBehaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:Fe(OC)}),Kn("TabView.form.events",[tr(b),sf(h)]),ol.config({channels:gs([{key:wn,value:{onReceive:h}},{key:Lo,value:{onReceive:b}}])})])}))]})),D=gu(T);return ms.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(P,F,G)=>{const J=Jt.getValue(F);bn(P,r6,{name:J,oldName:S.get()}),S.set(J)},tabs:T,components:[ms.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Zo.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Et([cr.config({})])}),ms.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:D.selectFirst,tabSectionBehaviours:Et([Kn("tabpanel",D.extraEvents),Sn.config({mode:"acyclic"}),Mo.config({find:P=>Ws(ms.getViewItems(P))}),i1(M.none(),P=>(P.getSystem().broadcastOn([wn],{}),d.get()),(P,F)=>{d.set(F),P.getSystem().broadcastOn([Lo],{})})])})},Ia=(t,s,a,c,d,h)=>{const b=D=>{const P=D.body;switch(P.type){case"tabpanel":return[qr(P,D.initialData,c,h)];default:return[as(P,D.initialData,c,h)]}},S=(D,P)=>M.some({isTabPanel:()=>P.body.type==="tabpanel"}),T={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(D=>({id:D})).getOr({}),...d?T:{}}},components:[],behaviours:Et([uc.childAt(0),Zn.config({channel:`${cB}-${s}`,updateState:S,renderComponents:b,initialData:t})])}},gi=(t,s,a,c,d,h)=>Ia(t,s,M.some(a),c,d,h),Ba=(t,s,a,c)=>{const d=Ia(t,s,M.none(),a,!1,c);return ti.parts.body(d)},Or=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[rB(M.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Et([cr.config({}),$n.config({})])})]}],behaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:Fe(OC)})])};return ti.parts.body(s)},Dr=Yp.deviceType.isTouch(),Vc=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Zd=(t,s)=>ti.parts.close(Na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Et([cr.config({})])})),Rm=()=>ti.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),If=(t,s)=>ti.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Sm(`<p>${QN(s.translate(t))}</p>`)}]}]}),u0=t=>ti.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),d0=(t,s)=>[Tm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Tm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Pg=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return ti.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),M.some(!0)),useTabstopAt:h=>!OC(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Sm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Dr?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:Et([$n.config({}),Kn("dialog-events",t.dialogEvents.concat([eh(Cd(),(h,b)=>{Wd.isBlocked(h)?ce():Sn.focusIn(h)}),ot(B1(),(h,b)=>{h.getSystem().broadcastOn([RC],{newFocus:b.event.newFocus})})])),Kn("scroll-lock",[tr(()=>{Lr(Ye(),d)}),sf(()=>{mr(Ye(),d)})]),...t.extraBehaviours]),eventOrder:{[Di()]:["dialog-events"],[Qi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Lc()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},jd=t=>Na.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Et([cr.config({}),Ar.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Gu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{bo(s,Tg)}}),Ig=(t,s,a,c)=>{const d=h=>[or(c.translate(h.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:Et([Zn.config({channel:`${iB}-${s}`,initialData:t,renderComponents:d})])}},qy=()=>({dom:Sm('<div class="tox-dialog__draghandle"></div>')}),Gy=(t,s,a,c)=>Tm.sketch({dom:Sm('<div class="tox-dialog__header"></div>'),components:[Ig(t,s,M.some(a),c),qy(),jd(c)],containerBehaviours:Et([r0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Rd(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),g$=(t,s,a)=>{const c=ti.parts.title(Ig(t,s,M.none(),a)),d=ti.parts.draghandle(qy()),h=ti.parts.close(jd(a)),b=[c].concat(t.draggable?[d]:[]).concat([h]);return Tm.sketch({dom:Sm('<div class="tox-dialog__header"></div>'),components:b})},f0=(t,s,a)=>g$({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),x5=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Sm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),E5=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=ir(t().element,".tox-dialog__header").map(h=>xr(h));ti.setBusy(t(),(h,b)=>x5(c.message,b,s,d))},onUnblock:()=>{ti.setIdle(t())}}),fc="tox-dialog--fullscreen",pu="tox-dialog--width-lg",Ky="tox-dialog--width-md",He=t=>{switch(t){case"large":return M.some(pu);case"medium":return M.some(Ky);default:return M.none()}},Ue=(t,s)=>{const a=Ke.fromDom(s.element.dom);xc(a,fc)||(kd(a,[pu,Ky]),He(t).each(c=>Lr(a,c)))},Bt=(t,s)=>{const a=Ke.fromDom(t.element.dom),c=OS(a),d=et(c,h=>h===pu||h===Ky).or(He(s));I0(a,[fc,...d.toArray()])},Dt=(t,s,a)=>Mi(Pg({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[Xb({}),...t.extraBehaviours],onEscape:c=>{bo(c,Tg)},dialogEvents:s,eventOrder:{[ou()]:[Zn.name(),ol.name()],[Qi()]:["scroll-lock",Zn.name(),"messages","dialog-events","alloy.base.behaviour"],[Lc()]:["alloy.base.behaviour","dialog-events","messages",Zn.name(),"scroll-lock"]}})),Pn=(t,s={})=>{const a=c=>{const d=$e(c.items,h=>{const b=Tt(s,h.name).getOr(gn(!1));return{...h,storage:b}});return{...c,items:d}};return $e(t,c=>c.type==="menu"?a(c):c)},jo=t=>zo(t,(s,a)=>a.type==="menu"?zo(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),Hr=(t,s)=>[O0(Cd(),wD),t(wC,(a,c,d,h)=>{hf(h.element)&&dm(br(h.element)).each(Ga),s.onClose(),c.onClose()}),t(Tg,(a,c,d,h)=>{c.onCancel(a),bo(h,wC)}),ot(N_,(a,c)=>s.onUnblock()),ot(PO,(a,c)=>s.onBlock(c.event))],Mm=(t,s)=>{const a=(d,h)=>ot(d,(b,S)=>{c(b,(T,D)=>{h(t(),T,S.event,b)})}),c=(d,h)=>{Zn.getState(d).get().each(b=>{h(b,d)})};return[...Hr(a,s),a(vh,(d,h,b)=>{h.onAction(d,{name:b.name})})]},qd=(t,s,a)=>{const c=(h,b)=>ot(h,(S,T)=>{d(S,(D,P)=>{b(t(),D,T.event,S)})}),d=(h,b)=>{Zn.getState(h).get().each(S=>{b(S.internalDialog,h)})};return[...Hr(c,s),c(CC,(h,b)=>b.onSubmit(h)),c(Ol,(h,b,S)=>{b.onChange(h,{name:S.name})}),c(vh,(h,b,S,T)=>{const D=()=>T.getSystem().isConnected()?Sn.focusIn(T):void 0,P=J=>H(J,"disabled")||To(J,"aria-disabled").exists(re=>re==="true"),F=br(T.element),G=dm(F);b.onAction(h,{name:S.name,value:S.value}),dm(F).fold(D,J=>{P(J)||G.exists(re=>bc(J,re)&&P(re))?D():a().toOptional().filter(re=>!bc(re.element,J)).each(D)})}),c(r6,(h,b,S)=>{b.onTabChange(h,{newTabName:S.name,oldTabName:S.oldName})}),sf(h=>{const b=t();Jt.setValue(h,b.getData())})]},oS=(t,s)=>hT(t,t.type,s),p$=(t,s,a)=>et(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),b$=(t,s)=>{const a=s.map(S=>S.footerButtons).getOr([]),c=Us(a,S=>S.align==="start"),d=(S,T)=>Tm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${S}`]},components:$e(T,D=>D.memento.asSpec())}),h=d("start",c.pass),b=d("end",c.fail);return[h,b]},_5=(t,s,a)=>{const c=(d,h)=>{const b=$e(h.buttons,T=>{const D=Jo(oS(T,a));return{name:T.name,align:T.align,memento:D}}),S=T=>p$(d,b,T);return M.some({lookupByName:S,footerButtons:b})};return{dom:Sm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Et([Zn.config({channel:`${lB}-${s}`,initialData:t,updateState:c,renderComponents:b$})])}},v$=(t,s,a)=>_5(t,s,a),_h=(t,s,a)=>ti.parts.footer(_5(t,s,a)),sS=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Mo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Yb.getField(c,s).orThunk(()=>t.getFooter().bind(b=>Zn.getState(b).get()).bind(b=>b.lookupByName(s)))}else return M.none()},y$=(t,s)=>{const a=t.getRoot();return Zn.getState(a).get().map(c=>bt(fr("data",c.dataValidator,s))).getOr(s)},T5=(t,s,a)=>{const c=re=>{const le=t.getRoot();le.getSystem().isConnected()&&re(le)},J={getData:()=>{const re=t.getRoot(),le=re.getSystem().isConnected()?t.getFormWrapper():re,De=Jt.getValue(le),de=Ko(a,Te=>Te.get());return{...De,...de}},setData:re=>{c(le=>{const De=J.getData(),de=Fs(De,re),Te=y$(t,de),Oe=t.getFormWrapper();Jt.setValue(Oe,Te),Ts(a,(ze,We)=>{go(de,We)&&ze.set(de[We])})})},setEnabled:(re,le)=>{sS(t,re).each(le?vn.enable:vn.disable)},focus:re=>{sS(t,re).each($n.focus)},block:re=>{if(!j(re))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(le=>{bn(le,PO,{message:re})})},unblock:()=>{c(re=>{bo(re,N_)})},showTab:re=>{c(le=>{const De=t.getBody();Zn.getState(De).get().exists(Te=>Te.isTabPanel())&&Mo.getCurrent(De).each(Te=>{ms.showTab(Te,re)})})},redial:re=>{c(le=>{const De=t.getId(),de=s(re),Te=Pn(de.internalDialog.buttons,a);le.getSystem().broadcastOn([`${DC}-${De}`],de),le.getSystem().broadcastOn([`${iB}-${De}`],de.internalDialog),le.getSystem().broadcastOn([`${cB}-${De}`],de.internalDialog),le.getSystem().broadcastOn([`${lB}-${De}`],{...de.internalDialog,buttons:Te}),J.setData(de.initialData)})},close:()=>{c(re=>{bo(re,wC)})},toggleFullscreen:t.toggleFullscreen};return J},w$=(t,s,a)=>{const c=on("dialog"),d=t.internalDialog,h=f0(d.title,c,a),b=gn(d.size),S=Oe=>sS(de,Oe),T=He(b.get()).toArray(),D=(Oe,ze)=>(b.set(ze.internalDialog.size),Ue(ze.internalDialog.size,Oe),M.some(ze)),P=Ba({body:d.body,initialData:d.initialData},c,a,S),F=Pn(d.buttons),G=jo(F),J=En(F.length!==0,_h({buttons:F},c,a)),re=qd(()=>Te,E5(()=>De,a.shared.providers,s),a.shared.getSink),le={id:c,header:h,body:P,footer:J,extraClasses:T,extraBehaviours:[Zn.config({channel:`${DC}-${c}`,updateState:D,initialData:t})],extraStyles:{}},De=Dt(le,re,a),de=(()=>{const Oe=()=>{const We=ti.getBody(De);return Mo.getCurrent(We).getOr(We)},ze=()=>{Bt(De,b.get())};return{getId:oe(c),getRoot:oe(De),getBody:()=>ti.getBody(De),getFooter:()=>ti.getFooter(De),getFormWrapper:Oe,toggleFullscreen:ze}})(),Te=T5(de,s.redial,G);return{dialog:De,instanceApi:Te}},C$=(t,s,a,c=!1,d)=>{const h=on("dialog"),b=on("dialog-label"),S=on("dialog-content"),T=t.internalDialog,D=an=>sS(tn,an),P=gn(T.size),F=He(P.get()).toArray(),G=(an,Vt)=>(P.set(Vt.internalDialog.size),Ue(Vt.internalDialog.size,an),d(),M.some(Vt)),J=Jo(Gy({title:T.title,draggable:!0},h,b,a.shared.providers)),re=Jo(gi({body:T.body,initialData:T.initialData},h,S,a,c,D)),le=Pn(T.buttons),De=jo(le),de=En(le.length!==0,Jo(v$({buttons:le},h,a))),Te=qd(()=>nt,{onBlock:an=>{Wd.block(We,(Vt,dn)=>{const Co=J.getOpt(We).map(Ys=>xr(Ys.element));return x5(an.message,dn,a.shared.providers,Co)})},onUnblock:()=>{Wd.unblock(We)},onClose:()=>s.closeWindow()},a.shared.getSink),Oe="tox-dialog-inline",ze=dr().os,We=Mi({dom:{tag:"div",classes:["tox-dialog",Oe,...F],attributes:{role:"dialog",...ze.isMacOS()?{"aria-label":T.title}:{"aria-labelledby":b}}},eventOrder:{[ou()]:[Zn.name(),ol.name()],[Di()]:["execute-on-form"],[Qi()]:["reflecting","execute-on-form"]},behaviours:Et([Sn.config({mode:"cyclic",onEscape:an=>(bo(an,wC),M.some(!0)),useTabstopAt:an=>!OC(an)&&(Ns(an)!=="button"||Vn(an,"disabled")!=="disabled"),firstTabstop:1}),Zn.config({channel:`${DC}-${h}`,updateState:G,initialData:t}),$n.config({}),Kn("execute-on-form",Te.concat([eh(Cd(),(an,Vt)=>{Sn.focusIn(an)}),ot(B1(),(an,Vt)=>{an.getSystem().broadcastOn([RC],{newFocus:Vt.event.newFocus})})])),Wd.config({getRoot:()=>M.some(We)}),Wn.config({}),Xb({})]),components:[J.asSpec(),re.asSpec(),...de.map(an=>an.asSpec()).toArray()]}),Mt=()=>{Bt(We,P.get())},tn={getId:oe(h),getRoot:oe(We),getFooter:()=>de.map(an=>an.get(We)),getBody:()=>re.get(We),getFormWrapper:()=>{const an=re.get(We);return Mo.getCurrent(an).getOr(an)},toggleFullscreen:Mt},nt=T5(tn,s.redial,De);return{dialog:We,instanceApi:nt}};var wo=tinymce.util.Tools.resolve("tinymce.util.URI");const je=t=>{const s=b=>{t.getSystem().isConnected()&&b(t)};return{block:b=>{if(!j(b))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(S=>{bn(S,PO,{message:b})})},unblock:()=>{s(b=>{bo(b,N_)})},close:()=>{s(b=>{bo(b,wC)})},sendMessage:b=>{s(S=>{S.getSystem().broadcastOn([CD],b)})}}},An=["insertContent","setContent","execCommand","close","block","unblock"],co=t=>ue(t)&&An.indexOf(t.mceAction)!==-1,xa=t=>!co(t)&&ue(t)&&go(t,"mceAction"),Pl=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=Lt(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Uc=(t,s,a,c)=>{const d=on("dialog"),h=f0(t.title,d,c),b=Or(t),S=t.buttons.bind(Oe=>Oe.length===0?M.none():M.some(_h({buttons:Oe},d,c))),T=Mm(()=>Te,E5(()=>de,c.shared.providers,s)),D={...t.height.fold(()=>({}),Oe=>({height:Oe+"px","max-height":Oe+"px"})),...t.width.fold(()=>({}),Oe=>({width:Oe+"px","max-width":Oe+"px"}))},P=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],F=new wo(t.url,{base_uri:new wo(window.location.href)}),G=`${F.protocol}://${F.host}${F.port?":"+F.port:""}`,J=_i(),re=(Oe,ze)=>M.some(ze),le=[Zn.config({channel:`${DC}-${d}`,updateState:re,initialData:t}),Kn("messages",[tr(()=>{const Oe=oc(Ke.fromDom(window),"message",ze=>{if(F.isSameOrigin(new wo(ze.raw.origin))){const We=ze.raw.data;co(We)?Pl(a,Te,We):xa(We)&&t.onMessage(Te,We)}});J.set(Oe)}),sf(J.clear)]),ol.config({channels:{[CD]:{onReceive:(Oe,ze)=>{ir(Oe.element,"iframe").each(We=>{const Mt=We.dom.contentWindow;Ct(Mt)&&Mt.postMessage(ze,G)})}}}})],de=Dt({id:d,header:h,body:b,footer:S,extraClasses:P,extraBehaviours:le,extraStyles:D},T,c),Te=je(de);return{dialog:de,instanceApi:Te}},Qu=t=>{const s=t.shared;return{open:(c,d)=>{const h=()=>{ti.hide(D),d()},b=Jo(hT({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"cancel",t)),S=Rm(),T=Zd(h,s.providers),D=Mi(Pg({lazySink:()=>s.getSink(),header:Vc(S,T),body:If(c,s.providers),footer:M.some(u0(d0([],[b.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ot(Tg,h)],eventOrder:{}}));ti.show(D);const P=b.get(D);$n.focus(P)}}},Th=t=>{const s=t.shared;return{open:(c,d)=>{const h=G=>{ti.hide(P),d(G)},b=Jo(hT({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"submit",t)),S=hT({context:"any",name:"no",text:"No",primary:!1,buttonType:M.some("secondary"),align:"end",enabled:!0,icon:M.none()},"cancel",t),T=Rm(),D=Zd(()=>h(!1),s.providers),P=Mi(Pg({lazySink:()=>s.getSink(),header:Vc(T,D),body:If(c,s.providers),footer:M.some(u0(d0([],[S,b.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ot(Tg,()=>h(!1)),ot(CC,()=>h(!0))],eventOrder:{}}));ti.show(P);const F=b.get(P);$n.focus(F)}}},Yy=(t,s)=>bt(fr("data",s,t)),Wc=t=>_m(t,".tox-alert-dialog")||_m(t,".tox-confirm-dialog"),JG=(t,s,a)=>s&&a?[]:[js.config({contextual:{lazyContext:()=>M.some(Jr(Ke.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>Qp(t,c.element).map(h=>({bounds:e1(h),optScrollEnv:M.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:Ta(h.element).top})})).getOrThunk(()=>({bounds:Qr(),optScrollEnv:M.none()}))})],S$=t=>{const s=t.editor,a=Jp(s),c=Qu(t.backstages.dialog),d=Th(t.backstages.dialog),h=(re,le,De)=>{if(!Zt(le)){if(le.inline==="toolbar")return D(re,t.backstages.popup.shared.anchors.inlineDialog(),De,le);if(le.inline==="bottom")return P(re,t.backstages.popup.shared.anchors.inlineBottomDialog(),De,le);if(le.inline==="cursor")return D(re,t.backstages.popup.shared.anchors.cursor(),De,le)}return T(re,De)},b=(re,le)=>S(re,le),S=(re,le)=>{const De=de=>{const Te=Uc(de,{closeWindow:()=>{ti.hide(Te.dialog),le(Te.instanceApi)}},s,t.backstages.dialog);return ti.show(Te.dialog),Te.instanceApi};return ct.openUrl(De,re)},T=(re,le)=>{const De=(de,Te,Oe)=>{const ze=Te,Mt=w$({dataValidator:Oe,initialData:ze,internalDialog:de},{redial:ct.redial,closeWindow:()=>{ti.hide(Mt.dialog),le(Mt.instanceApi)}},t.backstages.dialog);return ti.show(Mt.dialog),Mt.instanceApi.setData(ze),Mt.instanceApi};return ct.open(De,re)},D=(re,le,De,de)=>{const Te=(Oe,ze,We)=>{const Mt=Yy(ze,We),tn=Xo(),nt=t.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:We,initialData:Mt,internalDialog:Oe},Vt=()=>tn.on(Go=>{gr.reposition(Go),(!a||!nt)&&js.refresh(Go)}),dn=C$(an,{redial:ct.redial,closeWindow:()=>{tn.on(gr.hide),s.off("ResizeEditor",Vt),tn.clear(),De(dn.instanceApi)}},t.backstages.popup,de.ariaAttrs,Vt),Co=Mi(gr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:de.persistent?{event:"doNotDismissYet"}:{},...nt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Kn("window-manager-inline-events",[ot(xd(),(Go,hn)=>{bo(dn.dialog,Tg)})]),...JG(s,a,nt)]),isExtraPart:(Go,hn)=>Wc(hn)}));tn.set(Co);const Ys=()=>{const Go=s.inline?Ye():Ke.fromDom(s.getContainer()),hn=Jr(Go);return M.some(hn)};return gr.showWithinBounds(Co,El(dn.dialog),{anchor:le},Ys),(!a||!nt)&&(js.refresh(Co),s.on("ResizeEditor",Vt)),dn.instanceApi.setData(Mt),Sn.focusIn(dn.dialog),dn.instanceApi};return ct.open(Te,re)},P=(re,le,De,de)=>{const Te=(Oe,ze,We)=>{const Mt=Yy(ze,We),tn=Xo(),nt=t.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:We,initialData:Mt,internalDialog:Oe},Vt=()=>tn.on(Go=>{gr.reposition(Go),js.refresh(Go)}),dn=C$(an,{redial:ct.redial,closeWindow:()=>{tn.on(gr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Vt),tn.clear(),De(dn.instanceApi)}},t.backstages.popup,de.ariaAttrs,Vt),Co=Mi(gr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:de.persistent?{event:"doNotDismissYet"}:{},...nt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Kn("window-manager-inline-events",[ot(xd(),(Go,hn)=>{bo(dn.dialog,Tg)})]),js.config({contextual:{lazyContext:()=>M.some(Jr(Ke.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Go=>Qp(s,Go.element).map(vt=>({bounds:e1(vt),optScrollEnv:M.some({currentScrollTop:vt.element.dom.scrollTop,scrollElmTop:Ta(vt.element).top})})).getOrThunk(()=>({bounds:Qr(),optScrollEnv:M.none()}))})]),isExtraPart:(Go,hn)=>Wc(hn)}));tn.set(Co);const Ys=()=>t.backstages.popup.shared.getSink().toOptional().bind(Go=>{const hn=Qp(s,Go.element),vt=15,Ut=hn.map(Tn=>e1(Tn)).getOr(Qr()),Un=Jr(Ke.fromDom(s.getContentAreaContainer())),ao=Kf(Un,Ut);return M.some(Js(ao.x,ao.y,ao.width,ao.height-vt))});return gr.showWithinBounds(Co,El(dn.dialog),{anchor:le},Ys),js.refresh(Co),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Vt),dn.instanceApi.setData(Mt),Sn.focusIn(dn.dialog),dn.instanceApi};return ct.open(Te,re)};return{open:h,openUrl:b,alert:(re,le)=>{c.open(re,le)},close:re=>{re.close()},confirm:(re,le)=>{d.open(re,le)}}},x$=t=>{HE(t),ez(t),bq(t)};var Dee=()=>{bd.add("silver",t=>{x$(t);let s=()=>Qr();const{dialogs:a,popups:c,renderUI:d}=vG(t,{getPopupSinkBounds:()=>s()}),h=()=>{const D=d();return Qp(t,c.getMothership().element).each(F=>{s=()=>e1(F)}),D};wy.register(t,c.backstage.shared);const b=S$({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),S=Xo(),T=()=>rP(t,{backstage:c.backstage},c.getMothership(),S);return{renderUI:h,getWindowManagerImpl:oe(b),getNotificationManagerImpl:T}})};Dee()}()),LJ}Ese();var $J={},HJ;function _se(){return HJ||(HJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.ModelManager");const g=(l,f,v)=>{var C;return v(l,f.prototype)?!0:((C=l.constructor)===null||C===void 0?void 0:C.name)===f.name},w=l=>{const f=typeof l;return l===null?"null":f==="object"&&Array.isArray(l)?"array":f==="object"&&g(l,String,(v,C)=>C.isPrototypeOf(v))?"string":f},E=l=>f=>w(f)===l,N=l=>f=>typeof f===l,V=l=>f=>l===f,K=E("string"),j=E("object"),ue=E("array"),ge=V(null),Ce=N("boolean"),Xe=V(void 0),Lt=l=>l==null,Zt=l=>!Lt(l),Pt=N("function"),Ct=N("number"),Ne=()=>{},ln=(l,f)=>(...v)=>l(f.apply(null,v)),xt=(l,f)=>v=>l(f(v)),ce=l=>()=>l,Je=l=>l,Dn=(l,f)=>l===f;function Gt(l,...f){return(...v)=>{const C=f.concat(v);return l.apply(null,C)}}const oe=l=>f=>!l(f),Xt=l=>()=>{throw new Error(l)},In=l=>l(),en=ce(!1),Fe=ce(!0);class ve{constructor(f,v){this.tag=f,this.value=v}static some(f){return new ve(!0,f)}static none(){return ve.singletonNone}fold(f,v){return this.tag?v(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?ve.some(f(this.value)):ve.none()}bind(f){return this.tag?f(this.value):ve.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:ve.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return Zt(f)?ve.some(f):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const so=Array.prototype.slice,at=Array.prototype.indexOf,it=Array.prototype.push,M=(l,f)=>at.call(l,f),Hn=(l,f)=>M(l,f)>-1,ft=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const O=l[v];if(f(O,v))return!0}return!1},xo=(l,f)=>{const v=[];for(let C=0;C<l;C++)v.push(f(C));return v},yn=(l,f)=>{const v=l.length,C=new Array(v);for(let O=0;O<v;O++){const I=l[O];C[O]=f(I,O)}return C},Ae=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const O=l[v];f(O,v)}},wt=(l,f)=>{for(let v=l.length-1;v>=0;v--){const C=l[v];f(C,v)}},Mn=(l,f)=>{const v=[],C=[];for(let O=0,I=l.length;O<I;O++){const U=l[O];(f(U,O)?v:C).push(U)}return{pass:v,fail:C}},fn=(l,f)=>{const v=[];for(let C=0,O=l.length;C<O;C++){const I=l[C];f(I,C)&&v.push(I)}return v},io=(l,f,v)=>(wt(l,(C,O)=>{v=f(v,C,O)}),v),$e=(l,f,v)=>(Ae(l,(C,O)=>{v=f(v,C,O)}),v),pt=(l,f,v)=>{for(let C=0,O=l.length;C<O;C++){const I=l[C];if(f(I,C))return ve.some(I);if(v(I,C))break}return ve.none()},W=(l,f)=>pt(l,f,en),Us=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const O=l[v];if(f(O,v))return ve.some(v)}return ve.none()},no=l=>{const f=[];for(let v=0,C=l.length;v<C;++v){if(!ue(l[v]))throw new Error("Arr.flatten item "+v+" was not an array, input: "+l);it.apply(f,l[v])}return f},_o=(l,f)=>no(yn(l,f)),zo=(l,f)=>{for(let v=0,C=l.length;v<C;++v){const O=l[v];if(f(O,v)!==!0)return!1}return!0},pi=l=>{const f=so.call(l,0);return f.reverse(),f},et=(l,f)=>{const v={};for(let C=0,O=l.length;C<O;C++){const I=l[C];v[String(I)]=f(I,C)}return v},_t=(l,f)=>{const v=so.call(l,0);return v.sort(f),v},dt=(l,f)=>f>=0&&f<l.length?ve.some(l[f]):ve.none(),xe=l=>dt(l,0),Ao=l=>dt(l,l.length-1),Oo=(l,f)=>{for(let v=0;v<l.length;v++){const C=f(l[v],v);if(C.isSome())return C}return ve.none()},Kt=Object.keys,is=Object.hasOwnProperty,Fo=(l,f)=>{const v=Kt(l);for(let C=0,O=v.length;C<O;C++){const I=v[C],U=l[I];f(U,I)}},zr=(l,f)=>Vo(l,(v,C)=>({k:C,v:f(v,C)})),Vo=(l,f)=>{const v={};return Fo(l,(C,O)=>{const I=f(C,O);v[I.k]=I.v}),v},Ws=l=>(f,v)=>{l[v]=f},oi=(l,f,v,C)=>{Fo(l,(O,I)=>{(f(O,I)?v:C)(O,I)})},_s=(l,f)=>{const v={};return oi(l,f,Ws(v),Ne),v},Ss=(l,f)=>{const v=[];return Fo(l,(C,O)=>{v.push(f(C,O))}),v},xs=l=>Ss(l,Je),Gr=(l,f)=>Ts(l,f)?ve.from(l[f]):ve.none(),Ts=(l,f)=>is.call(l,f),Ko=(l,f)=>Ts(l,f)&&l[f]!==void 0&&l[f]!==null,Mc=l=>{for(const f in l)if(is.call(l,f))return!1;return!0},lo=typeof window<"u"?window:Function("return this;")(),hs=(l,f)=>{let v=f??lo;for(let C=0;C<l.length&&v!==void 0&&v!==null;++C)v=v[l[C]];return v},Rr=(l,f)=>{const v=l.split(".");return hs(v,f)},Li=(l,f)=>Rr(l,f),Ki=(l,f)=>{const v=Li(l,f);if(v==null)throw new Error(l+" not available on this browser");return v},ts=Object.getPrototypeOf,jc=l=>Ki("HTMLElement",l),Tt=l=>{const f=Rr("ownerDocument.defaultView",l);return j(l)&&(jc(f).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(ts(l).constructor.name))},go=8,Vr=9,Ur=11,La=1,si=3,Qo=l=>l.dom.nodeName.toLowerCase(),Fa=l=>l.dom.nodeType,Fi=l=>f=>Fa(f)===l,Yo=l=>Fa(l)===go||Qo(l)==="#comment",En=l=>sr(l)&&Tt(l.dom),sr=Fi(La),ri=Fi(si),fl=Fi(Vr),ml=Fi(Ur),vs=l=>f=>sr(f)&&Qo(f)===l,Cr=(l,f,v)=>{if(K(v)||Ce(v)||Ct(v))l.setAttribute(f,v+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",v,":: Element ",l),new Error("Attribute value was not simple")},Zs=(l,f,v)=>{Cr(l.dom,f,v)},Ea=(l,f)=>{const v=l.dom;Fo(f,(C,O)=>{Cr(v,O,C)})},Nc=(l,f)=>{Fo(f,(v,C)=>{v.fold(()=>{fe(l,C)},O=>{Cr(l.dom,C,O)})})},Mr=(l,f)=>{const v=l.dom.getAttribute(f);return v===null?void 0:v},pe=(l,f)=>ve.from(Mr(l,f)),fe=(l,f)=>{l.dom.removeAttribute(f)},Ve=l=>$e(l.dom.attributes,(f,v)=>(f[v.name]=v.value,f),{}),Ge=(l,f)=>{const C=(f||document).createElement("div");if(C.innerHTML=l,!C.hasChildNodes()||C.childNodes.length>1){const O="HTML does not have a single root node";throw console.error(O,l),new Error(O)}return Qn(C.childNodes[0])},Cn=(l,f)=>{const C=(f||document).createElement(l);return Qn(C)},Fn=(l,f)=>{const C=(f||document).createTextNode(l);return Qn(C)},Qn=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},lt={fromHtml:Ge,fromTag:Cn,fromText:Fn,fromDom:Qn,fromPoint:(l,f,v)=>ve.from(l.dom.elementFromPoint(f,v)).map(Qn)},Ke=(l,f)=>{const v=l.dom;if(v.nodeType!==La)return!1;{const C=v;if(C.matches!==void 0)return C.matches(f);if(C.msMatchesSelector!==void 0)return C.msMatchesSelector(f);if(C.webkitMatchesSelector!==void 0)return C.webkitMatchesSelector(f);if(C.mozMatchesSelector!==void 0)return C.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},rr=l=>l.nodeType!==La&&l.nodeType!==Vr&&l.nodeType!==Ur||l.childElementCount===0,Sr=(l,f)=>{const v=f===void 0?document:f.dom;return rr(v)?[]:yn(v.querySelectorAll(l),lt.fromDom)},pa=(l,f)=>{const v=f===void 0?document:f.dom;return rr(v)?ve.none():ve.from(v.querySelector(l)).map(lt.fromDom)},es=(l,f)=>l.dom===f.dom,qc=(l,f)=>{const v=l.dom,C=f.dom;return v===C?!1:v.contains(C)},Kr=Ke,_a=l=>lt.fromDom(l.dom.ownerDocument),Ms=l=>fl(l)?l:_a(l),ns=l=>lt.fromDom(Ms(l).dom.documentElement),cs=l=>lt.fromDom(Ms(l).dom.defaultView),Wr=l=>ve.from(l.dom.parentNode).map(lt.fromDom),hc=l=>ve.from(l.dom.parentElement).map(lt.fromDom),Ns=(l,f)=>{const v=Pt(f)?f:en;let C=l.dom;const O=[];for(;C.parentNode!==null&&C.parentNode!==void 0;){const I=C.parentNode,U=lt.fromDom(I);if(O.push(U),v(U)===!0)break;C=I}return O},hl=l=>ve.from(l.dom.previousSibling).map(lt.fromDom),ai=l=>ve.from(l.dom.nextSibling).map(lt.fromDom),ls=l=>yn(l.dom.childNodes,lt.fromDom),lr=(l,f)=>{const v=l.dom.childNodes;return ve.from(v[f]).map(lt.fromDom)},ar=l=>lr(l,0),gc=(l,f)=>{Wr(l).each(C=>{C.dom.insertBefore(f.dom,l.dom)})},bi=(l,f)=>{ai(l).fold(()=>{Wr(l).each(O=>{ys(O,f)})},C=>{gc(C,f)})},ba=(l,f)=>{ar(l).fold(()=>{ys(l,f)},C=>{l.dom.insertBefore(f.dom,C.dom)})},ys=(l,f)=>{l.dom.appendChild(f.dom)},Gd=(l,f,v)=>{lr(l,v).fold(()=>{ys(l,f)},C=>{gc(C,f)})},pc=(l,f)=>{gc(l,f),ys(f,l)},vu=(l,f)=>{Ae(f,(v,C)=>{const O=C===0?l:f[C-1];bi(O,v)})},yo=(l,f)=>{Ae(f,v=>{ys(l,v)})},bc=l=>{l.dom.textContent="",Ae(ls(l),f=>{Ps(f)})},Ps=l=>{const f=l.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},Fl=l=>{const f=ls(l);f.length>0&&vu(l,f),Ps(l)},$i=(l,f)=>lt.fromDom(l.dom.cloneNode(f)),Pc=l=>$i(l,!1),Nr=l=>$i(l,!0),rd=(l,f)=>{const v=lt.fromTag(f),C=Ve(l);return Ea(v,C),v},ii=(l,f)=>{const v=rd(l,f),C=ls(Nr(l));return yo(v,C),v},ad=(l,f)=>{const v=rd(l,f);bi(l,v);const C=ls(l);return yo(v,C),Ps(l),v},Gc=["tfoot","thead","tbody","colgroup"],id=l=>Hn(Gc,l),pr=(l,f)=>({rows:l,columns:f}),Yi=(l,f)=>({row:l,column:f}),Kc=(l,f,v)=>({element:l,rowspan:f,colspan:v}),yu=(l,f,v,C)=>({element:l,rowspan:f,colspan:v,isNew:C}),gl=(l,f,v,C,O,I)=>({element:l,rowspan:f,colspan:v,row:C,column:O,isLocked:I}),Yc=(l,f,v)=>({element:l,cells:f,section:v}),br=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),Pr=(l,f,v)=>({element:l,isNew:f,isLocked:v}),vi=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),$l=(l,f,v,C)=>({startRow:l,startCol:f,finishRow:v,finishCol:C}),wu=(l,f,v)=>({element:l,colspan:f,column:v}),Y=(l,f)=>({element:l,columns:f}),me=l=>ml(l)&&Zt(l.dom.host),ke=l=>lt.fromDom(l.dom.getRootNode()),Ye=l=>me(l)?l:lt.fromDom(Ms(l).dom.body),kt=l=>{const f=ke(l);return me(f)?ve.some(f):ve.none()},nn=l=>lt.fromDom(l.dom.host),$t=l=>{if(Zt(l.target)){const f=lt.fromDom(l.target);if(sr(f)&&Nn(f)&&l.composed&&l.composedPath){const v=l.composedPath();if(v)return xe(v)}}return ve.from(l.target)},Nn=l=>Zt(l.dom.shadowRoot),Vn=l=>{const f=ri(l)?l.dom.parentNode:l.dom;if(f==null||f.ownerDocument===null)return!1;const v=f.ownerDocument;return kt(lt.fromDom(f)).fold(()=>v.body.contains(f),xt(Vn,nn))},To=()=>H(lt.fromDom(document)),H=l=>{const f=l.dom.body;if(f==null)throw new Error("Body is not available yet");return lt.fromDom(f)},ee=(l,f,v)=>fn(Ns(l,v),f),ye=(l,f)=>fn(ls(l),f),Be=(l,f)=>{let v=[];return Ae(ls(l),C=>{f(C)&&(v=v.concat([C])),v=v.concat(Be(C,f))}),v},cn=(l,f,v)=>ee(l,C=>Ke(C,f),v),It=(l,f)=>ye(l,v=>Ke(v,f)),$o=(l,f)=>Sr(f,l);var ta=(l,f,v,C,O)=>l(v,C)?ve.some(v):Pt(O)&&O(v)?ve.none():f(v,C,O);const ut=(l,f,v)=>{let C=l.dom;const O=Pt(v)?v:en;for(;C.parentNode;){C=C.parentNode;const I=lt.fromDom(C);if(f(I))return ve.some(I);if(O(I))break}return ve.none()},ci=(l,f,v)=>ta((O,I)=>I(O),ut,l,f,v),us=(l,f)=>{const v=O=>f(lt.fromDom(O));return W(l.dom.childNodes,v).map(lt.fromDom)},Xc=(l,f)=>{const v=C=>{for(let O=0;O<C.childNodes.length;O++){const I=lt.fromDom(C.childNodes[O]);if(f(I))return ve.some(I);const U=v(C.childNodes[O]);if(U.isSome())return U}return ve.none()};return v(l.dom)},ur=(l,f,v)=>ut(l,C=>Ke(C,f),v),uo=(l,f)=>us(l,v=>Ke(v,f)),yi=(l,f)=>pa(f,l),Yr=(l,f,v)=>ta((O,I)=>Ke(O,I),ur,l,f,v),wi=(l,f,v=Dn)=>l.exists(C=>v(C,f)),xr=l=>{const f=[],v=C=>{f.push(C)};for(let C=0;C<l.length;C++)l[C].each(v);return f},Hl=(l,f)=>l!=null?f(l):ve.none(),Lg=(l,f)=>l?ve.some(f):ve.none(),x1=(l,f)=>l.substring(f),Ds=(l,f,v)=>f===""||l.length>=f.length&&l.substr(v,v+f.length)===f,zl=(l,f)=>Ta(l,f)?x1(l,f.length):l,Xr=(l,f,v=0,C)=>{const O=l.indexOf(f,v);return O!==-1?Xe(C)?!0:O+f.length<=C:!1},Ta=(l,f)=>Ds(l,f,0),Ci=(l,f)=>Ds(l,f,l.length-f.length),Bm=(l=>f=>f.replace(l,""))(/^\s+|\s+$/g),oo=l=>l.length>0,pl=l=>{const f=parseFloat(l);return isNaN(f)?ve.none():ve.some(f)},Vl=l=>l.style!==void 0&&Pt(l.style.getPropertyValue),Ul=(l,f,v)=>{if(!K(v))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",v,":: Element ",l),new Error("CSS value must be a string: "+v);Vl(l)&&l.style.setProperty(f,v)},Lm=(l,f)=>{Vl(l)&&l.style.removeProperty(f)},Is=(l,f,v)=>{const C=l.dom;Ul(C,f,v)},na=(l,f)=>{const v=l.dom;Fo(f,(C,O)=>{Ul(v,O,C)})},cd=(l,f)=>{const v=l.dom,O=window.getComputedStyle(v).getPropertyValue(f);return O===""&&!Vn(l)?Mh(v,f):O},Mh=(l,f)=>Vl(l)?l.style.getPropertyValue(f):"",Su=(l,f)=>{const v=l.dom,C=Mh(v,f);return ve.from(C).filter(O=>O.length>0)},Si=(l,f)=>{const v=l.dom;Lm(v,f),wi(pe(l,"style").map(Bm),"")&&fe(l,"style")},oa=(l,f)=>{const v=l.dom,C=f.dom;Vl(v)&&Vl(C)&&(C.style.cssText=v.style.cssText)},$a=(l,f,v=0)=>pe(l,f).map(C=>parseInt(C,10)).getOr(v),li=(l,f)=>$a(l,f,1),Er=l=>vs("col")(l)?$a(l,"span",1)>1:li(l,"colspan")>1,ld=l=>li(l,"rowspan")>1,Bs=(l,f)=>parseInt(cd(l,f),10),Kd=ce(10),zf=ce(10),Wl=(l,f)=>ud(l,f,Fe),ud=(l,f,v)=>_o(ls(l),C=>Ke(C,f)?v(C)?[C]:[]:ud(C,f,v)),dd=(l,f,v=en)=>{if(v(f))return ve.none();if(Hn(l,Qo(f)))return ve.some(f);const C=O=>Ke(O,"table")||v(O);return ur(f,l.join(","),C)},xu=(l,f)=>dd(["td","th"],l,f),Eu=l=>Wl(l,"th,td"),Xi=l=>Ke(l,"colgroup")?It(l,"col"):_o(bl(l),f=>It(f,"col")),Ha=(l,f)=>Yr(l,"table",f),Fg=l=>Wl(l,"tr"),bl=l=>Ha(l).fold(ce([]),f=>It(f,"colgroup")),Fm=(l,f)=>yn(l,v=>{if(Qo(v)==="colgroup"){const C=yn(Xi(v),O=>{const I=$a(O,"span",1);return Kc(O,1,I)});return Yc(v,C,"colgroup")}else{const C=yn(Eu(v),O=>{const I=$a(O,"rowspan",1),U=$a(O,"colspan",1);return Kc(O,I,U)});return Yc(v,C,f(v))}}),fd=l=>Wr(l).map(f=>{const v=Qo(f);return id(v)?v:"tbody"}).getOr("tbody"),$m=l=>{const f=Fg(l),C=[...bl(l),...f];return Fm(C,fd)},Vf=(l,f)=>Fm(l,()=>f),md=l=>{let f=!1,v;return(...C)=>(f||(f=!0,v=l.apply(null,C)),v)},Uf=(l,f,v,C)=>{const O=l.isiOS()&&/ipad/i.test(v)===!0,I=l.isiOS()&&!O,U=l.isiOS()||l.isAndroid(),Q=U||C("(pointer:coarse)"),ae=O||!I&&U&&C("(min-device-width:768px)"),we=I||U&&!ae,Le=f.isSafari()&&l.isiOS()&&/safari/i.test(v)===!1,St=!we&&!ae&&!Le;return{isiPad:ce(O),isiPhone:ce(I),isTablet:ce(ae),isPhone:ce(we),isTouch:ce(Q),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ce(Le),isDesktop:ce(St)}},Hm=(l,f)=>{for(let v=0;v<l.length;v++){const C=l[v];if(C.test(f))return C}},_u=(l,f)=>{const v=Hm(l,f);if(!v)return{major:0,minor:0};const C=O=>Number(f.replace(v,"$"+O));return hd(C(1),C(2))},zm=(l,f)=>{const v=String(f).toLowerCase();return l.length===0?be():_u(l,v)},be=()=>hd(0,0),hd=(l,f)=>({major:l,minor:f}),xi={nu:hd,detect:zm,unknown:be},E1=(l,f)=>Oo(f.brands,v=>{const C=v.brand.toLowerCase();return W(l,O=>{var I;return C===((I=O.brand)===null||I===void 0?void 0:I.toLowerCase())}).map(O=>({current:O.name,version:xi.nu(parseInt(v.version,10),0)}))}),$g=(l,f)=>{const v=String(f).toLowerCase();return W(l,C=>C.search(v))},Tu=(l,f)=>$g(l,f).map(v=>{const C=xi.detect(v.versionRegexes,f);return{current:v.name,version:C}}),No=(l,f)=>$g(l,f).map(v=>{const C=xi.detect(v.versionRegexes,f);return{current:v.name,version:C}}),dr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ka=l=>f=>Xr(f,l),Zl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Xr(l,"edge/")&&Xr(l,"chrome")&&Xr(l,"safari")&&Xr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dr],search:l=>Xr(l,"chrome")&&!Xr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Xr(l,"msie")||Xr(l,"trident")},{name:"Opera",versionRegexes:[dr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ka("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ka("firefox")},{name:"Safari",versionRegexes:[dr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Xr(l,"safari")||Xr(l,"mobile/"))&&Xr(l,"applewebkit")}],Nh=[{name:"Windows",search:ka("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Xr(l,"iphone")||Xr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ka("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ka("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ka("linux"),versionRegexes:[]},{name:"Solaris",search:ka("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ka("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ka("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gd={browsers:ce(Zl),oses:ce(Nh)},za="Edge",Wf="Chromium",Zf="IE",jl="Opera",ql="Firefox",Yd="Safari",vc=()=>jf({current:void 0,version:xi.unknown()}),jf=l=>{const f=l.current,v=l.version,C=O=>()=>f===O;return{current:f,version:v,isEdge:C(za),isChromium:C(Wf),isIE:C(Zf),isOpera:C(jl),isFirefox:C(ql),isSafari:C(Yd)}},va={unknown:vc,nu:jf,edge:ce(za),chromium:ce(Wf),ie:ce(Zf),opera:ce(jl),firefox:ce(ql),safari:ce(Yd)},Gl="Windows",Ic="iOS",Va="Android",ku="Linux",Hg="macOS",qf="Solaris",Jc="FreeBSD",pd="ChromeOS",zg=()=>Vm({current:void 0,version:xi.unknown()}),Vm=l=>{const f=l.current,v=l.version,C=O=>()=>f===O;return{current:f,version:v,isWindows:C(Gl),isiOS:C(Ic),isAndroid:C(Va),isMacOS:C(Hg),isLinux:C(ku),isSolaris:C(qf),isFreeBSD:C(Jc),isChromeOS:C(pd)}},Vg={unknown:zg,nu:Vm,windows:ce(Gl),ios:ce(Ic),android:ce(Va),linux:ce(ku),macos:ce(Hg),solaris:ce(qf),freebsd:ce(Jc),chromeos:ce(pd)},Um={detect:(l,f,v)=>{const C=gd.browsers(),O=gd.oses(),I=f.bind(ae=>E1(C,ae)).orThunk(()=>Tu(C,l)).fold(va.unknown,va.nu),U=No(O,l).fold(Vg.unknown,Vg.nu),Q=Uf(U,I,l,v);return{browser:I,os:U,deviceType:Q}}},Kl=l=>window.matchMedia(l).matches;let Gf=md(()=>Um.detect(window.navigator.userAgent,ve.from(window.navigator.userAgentData),Kl));const vl=()=>Gf(),Js=(l,f)=>{const v=(Q,ae)=>{if(!Ct(ae)&&!ae.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ae);const we=Q.dom;Vl(we)&&(we.style[l]=ae+"px")},C=Q=>{const ae=f(Q);if(ae<=0||ae===null){const we=cd(Q,l);return parseFloat(we)||0}return ae},O=C,I=(Q,ae)=>$e(ae,(we,Le)=>{const St=cd(Q,Le),jt=St===void 0?0:parseInt(St,10);return isNaN(jt)?we:we+jt},0);return{set:v,get:C,getOuter:O,aggregate:I,max:(Q,ae,we)=>{const Le=I(Q,we);return ae>Le?ae-Le:0}}},Jr=(l,f)=>pl(l).getOr(f),Ei=(l,f,v)=>Jr(cd(l,f),v),Kf=(l,f,v,C)=>{const O=Ei(l,`padding-${v}`,0),I=Ei(l,`padding-${C}`,0),U=Ei(l,`border-${v}-width`,0),Q=Ei(l,`border-${C}-width`,0);return f-O-I-U-Q},Xd=(l,f)=>{const v=l.dom,C=v.getBoundingClientRect().width||v.offsetWidth;return f==="border-box"?C:Kf(l,C,"left","right")},Qr=l=>Ei(l,"height",l.dom.offsetHeight),gn=l=>Ei(l,"width",l.dom.offsetWidth),Yf=l=>Xd(l,"content-box"),Au=Js("width",l=>l.dom.offsetWidth),_i=l=>Au.get(l),Xo=l=>Au.getOuter(l),bd=Yf,Xf=gn,Wm=(l,f,v)=>{const C=l.cells,O=C.slice(0,f),I=C.slice(f),U=O.concat(v).concat(I);return vr(l,U)},Ph=(l,f,v)=>Wm(l,f,[v]),Xn=(l,f,v)=>{const C=l.cells;C[f]=v},vr=(l,f)=>vi(l.element,f,l.section,l.isNew),Ou=(l,f)=>{const v=l.cells,C=yn(v,f);return vi(l.element,C,l.section,l.isNew)},Hi=(l,f)=>l.cells[f],Ti=(l,f)=>Hi(l,f).element,Ji=l=>l.cells.length,sa=l=>{const f=Mn(l,v=>v.section==="colgroup");return{rows:f.fail,cols:f.pass}},ui=(l,f,v)=>{const C=yn(l.cells,v);return vi(f(l.element),C,l.section,!0)},yc="data-snooker-locked-cols",Zm=l=>pe(l,yc).bind(f=>ve.from(f.match(/\d+/g))).map(f=>et(f,Fe)),Ls=l=>{const f=$e(sa(l).rows,(C,O)=>(Ae(O.cells,(I,U)=>{I.isLocked&&(C[U]=!0)}),C),{}),v=Ss(f,(C,O)=>parseInt(O,10));return _t(v)},jm=(l,f)=>l+","+f,_r=(l,f,v)=>ve.from(l.access[jm(f,v)]),Du=(l,f,v)=>{const C=yl(l,O=>v(f,O.element));return C.length>0?ve.some(C[0]):ve.none()},yl=(l,f)=>{const v=_o(l.all,C=>C.cells);return fn(v,f)},ws=l=>{const f={};let v=0;return Ae(l.cells,C=>{const O=C.colspan;xo(O,I=>{const U=v+I;f[U]=wu(C.element,O,U)}),v+=O}),f},Qc=l=>{const f={},v=[],O=xe(l).map(zt=>zt.element).bind(Ha).bind(Zm).getOr({});let I=0,U=0,Q=0;const{pass:ae,fail:we}=Mn(l,zt=>zt.section==="colgroup");Ae(we,zt=>{const Nt=[];Ae(zt.cells,mn=>{let yt=0;for(;f[jm(Q,yt)]!==void 0;)yt++;const Rn=Ko(O,yt.toString()),ro=gl(mn.element,mn.rowspan,mn.colspan,Q,yt,Rn);for(let mt=0;mt<mn.colspan;mt++)for(let rs=0;rs<mn.rowspan;rs++){const Io=Q+rs,Bo=yt+mt,$r=jm(Io,Bo);f[$r]=ro,U=Math.max(U,Bo+1)}Nt.push(ro)}),I++,v.push(Yc(zt.element,Nt,zt.section)),Q++});const{columns:Le,colgroups:St}=Ao(ae).map(zt=>{const Nt=ws(zt);return{colgroups:[Y(zt.element,xs(Nt))],columns:Nt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:pr(I,U),access:f,all:v,columns:Le,colgroups:St}},po={fromTable:l=>{const f=$m(l);return Qc(f)},generate:Qc,getAt:_r,findItem:Du,filterItems:yl,justCells:l=>_o(l.all,f=>f.cells),justColumns:l=>xs(l.columns),hasColumns:l=>Kt(l.columns).length>0,getColumnAt:(l,f)=>ve.from(l.columns[f])},vd=(l,f=Fe)=>{const v=l.grid,C=xo(v.columns,Je),O=xo(v.rows,Je);return yn(C,I=>qm(()=>_o(O,we=>po.getAt(l,we,I).filter(Le=>Le.column===I).toArray()),we=>we.colspan===1&&f(we.element),()=>po.getAt(l,0,I)))},qm=(l,f,v)=>{const C=l();return W(C,f).orThunk(()=>ve.from(C[0]).orThunk(v)).map(U=>U.element)},k=l=>{const f=l.grid,v=xo(f.rows,Je),C=xo(f.columns,Je);return yn(v,O=>qm(()=>_o(C,ae=>po.getAt(l,O,ae).filter(we=>we.row===O).fold(ce([]),we=>[we])),ae=>ae.rowspan===1,()=>po.getAt(l,O,0)))},B=(l,f)=>{if(f<0||f>=l.length-1)return ve.none();const v=l[f].fold(()=>{const O=pi(l.slice(0,f));return Oo(O,(I,U)=>I.map(Q=>({value:Q,delta:U+1})))},O=>ve.some({value:O,delta:0})),C=l[f+1].fold(()=>{const O=l.slice(f+1);return Oo(O,(I,U)=>I.map(Q=>({value:Q,delta:U+1})))},O=>ve.some({value:O,delta:1}));return v.bind(O=>C.map(I=>{const U=I.delta+O.delta;return Math.abs(I.value-O.value)/U}))},q=(l,f)=>v=>he(v)==="rtl"?f:l,he=l=>cd(l,"direction")==="rtl"?"rtl":"ltr",Se=Js("height",l=>{const f=l.dom;return Vn(l)?f.getBoundingClientRect().height:f.offsetHeight}),gt=l=>Se.get(l),kn=l=>Se.getOuter(l),eo=Qr,Gn=(l,f)=>({left:l,top:f,translate:(C,O)=>Gn(l+C,f+O)}),pn=Gn,Qs=l=>{const f=l.getBoundingClientRect();return pn(f.left,f.top)},Tr=(l,f)=>l!==void 0?l:f!==void 0?f:0,ki=l=>{const f=l.dom.ownerDocument,v=f.body,C=f.defaultView,O=f.documentElement;if(v===l.dom)return pn(v.offsetLeft,v.offsetTop);const I=Tr(C==null?void 0:C.pageYOffset,O.scrollTop),U=Tr(C==null?void 0:C.pageXOffset,O.scrollLeft),Q=Tr(O.clientTop,v.clientTop),ae=Tr(O.clientLeft,v.clientLeft);return Mu(l).translate(U-ae,I-Q)},Mu=l=>{const f=l.dom,C=f.ownerDocument.body;return C===f?pn(C.offsetLeft,C.offsetTop):Vn(l)?Qs(f):pn(0,0)},_1=(l,f)=>({row:l,y:f}),Qd=(l,f)=>({col:l,x:f}),Wg=l=>ki(l).left+Xo(l),Ua=l=>ki(l).left,Zg=(l,f)=>Qd(l,Ua(f)),y0=(l,f)=>Qd(l,Wg(f)),T1=l=>ki(l).top,Wa=(l,f)=>_1(l,T1(f)),jg=(l,f)=>_1(l,T1(f)+kn(f)),ea=(l,f,v)=>{if(v.length===0)return[];const C=yn(v.slice(1),(I,U)=>I.map(Q=>l(U,Q))),O=v[v.length-1].map(I=>f(v.length-1,I));return C.concat([O])},k1=l=>-l,Za={delta:Je,positions:l=>ea(Wa,jg,l),edge:T1},Jf=q({delta:Je,edge:Ua,positions:l=>ea(Zg,y0,l)},{delta:k1,edge:Wg,positions:l=>ea(y0,Zg,l)}),Gm={delta:(l,f)=>Jf(f).delta(l,f),positions:(l,f)=>Jf(f).positions(l,f),edge:l=>Jf(l).edge(l)},w0={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},qg=(()=>{const l="[0-9]+",v="[eE]"+("[+-]?"+l),C="\\.",O=Q=>`(?:${Q})?`,U=`[+-]?(?:${["Infinity",l+C+O(l)+O(v),C+l+O(v),l+O(v)].join("|")})`;return new RegExp(`^(${U})(.*)$`)})(),wl=(l,f)=>ft(f,v=>ft(w0[v],C=>l===C)),Nu=(l,f)=>ve.from(qg.exec(l)).bind(C=>{const O=Number(C[1]),I=C[2];return wl(I,f)?ve.some({value:O,unit:I}):ve.none()}),ef=/(\d+(\.\d+)?)%/,Wt=/(\d+(\.\d+)?)px|em/,tl=vs("col"),A1=vs("tr"),Qf=(l,f,v)=>{const C=hc(l).getOrThunk(()=>H(_a(l)));return f(l)/v(C)*100},Cl=(l,f)=>{Is(l,"width",f+"px")},Ih=(l,f)=>{Is(l,"width",f+"%")},tf=(l,f)=>{Is(l,"height",f+"px")},em=l=>{Si(l,"height")},Bh=l=>eo(l)+"px",Xl=(l,f,v,C)=>{const O=Ha(l).map(I=>{const U=v(I);return Math.floor(f/100*U)}).getOr(f);return C(l,O),O},C0=(l,f,v,C)=>{const O=parseFloat(l);return Ci(l,"%")&&Qo(f)!=="table"?Xl(f,O,v,C):O},fr=l=>{const f=Bh(l);return f?C0(f,l,gt,tf):gt(l)},bt=(l,f,v)=>{const C=v(l),O=li(l,f);return C/O},zi=(l,f)=>Su(l,f).orThunk(()=>pe(l,f).map(v=>v+"px")),Jl=l=>zi(l,"width"),ra=l=>zi(l,"height"),Km=l=>Qf(l,_i,bd),aa=l=>tl(l)?_i(l):Xf(l),qo=l=>A1(l)?gt(l):bt(l,"rowspan",fr),Gg=l=>Jl(l).bind(v=>Nu(v,["fixed","relative","empty"])),rt=(l,f,v)=>{Is(l,"width",f+v)},Uo=l=>_i(l)+"px",Kg=l=>gt(l)+"px",ia=l=>Qf(l,_i,bd)+"%",ya=l=>Jl(l).exists(f=>ef.test(f)),Sl=l=>Jl(l).exists(f=>Wt.test(f)),O1=l=>Jl(l).isNone(),nf=ce(ef),D1=vs("col"),Cc=l=>Jl(l).getOrThunk(()=>aa(l)+"px"),Wo=l=>ra(l).getOrThunk(()=>qo(l)+"px"),Pu=l=>yn(po.justColumns(l),f=>ve.from(f.element)),Lh=l=>{const f=vl().browser,v=f.isChromium()||f.isFirefox();return D1(l)?v:!0},yr=(l,f,v,C,O,I)=>l.filter(C).fold(()=>I(B(v,f)),U=>O(U)),Fh=(l,f,v,C)=>{const O=vd(l),I=po.hasColumns(l)?Pu(l):O,U=[ve.some(Gm.edge(f))].concat(yn(Gm.positions(O,f),ae=>ae.map(we=>we.x))),Q=oe(Er);return yn(I,(ae,we)=>yr(ae,we,U,Q,Le=>{if(Lh(Le))return v(Le);{const St=Hl(O[we],Je);return yr(St,we,U,Q,jt=>C(ve.some(_i(jt))),C)}},C))},yd=l=>l.map(f=>f+"px").getOr(""),Yg=(l,f)=>Fh(l,f,Cc,yd),ca=(l,f,v)=>Fh(l,f,Km,C=>C.fold(()=>v.minCellWidth(),O=>O/v.pixelWidth()*100)),la=(l,f,v)=>Fh(l,f,aa,C=>C.getOrThunk(v.minCellWidth)),Pe=(l,f,v,C)=>{const O=k(l),I=yn(l.all,Q=>ve.some(Q.element)),U=[ve.some(Za.edge(f))].concat(yn(Za.positions(O,f),Q=>Q.map(ae=>ae.y)));return yn(I,(Q,ae)=>yr(Q,ae,U,Fe,v,C))},$s=(l,f)=>Pe(l,f,qo,v=>v.getOrThunk(zf)),R1=(l,f)=>Pe(l,f,Wo,yd),er=(l,f)=>()=>Vn(l)?f(l):parseFloat(Su(l,"width").getOr("0")),Aa=l=>{const f=er(l,_i),v=ce(0);return{width:f,pixelWidth:f,getWidths:(O,I)=>la(O,l,I),getCellDelta:v,singleColumnWidth:ce([0]),minCellWidth:v,setElementWidth:Ne,adjustTableWidth:Ne,isRelative:!0,label:"none"}},Oa=l=>{const f=er(l,ae=>parseFloat(ia(ae))),v=er(l,_i);return{width:f,pixelWidth:v,getWidths:(ae,we)=>ca(ae,l,we),getCellDelta:ae=>ae/v()*100,singleColumnWidth:(ae,we)=>[100-ae],minCellWidth:()=>Kd()/v()*100,setElementWidth:Ih,adjustTableWidth:ae=>{const we=f(),Le=ae/100*we,St=we+Le;Ih(l,St)},isRelative:!0,label:"percent"}},os=l=>{const f=er(l,_i);return{width:f,pixelWidth:f,getWidths:(U,Q)=>la(U,l,Q),getCellDelta:Je,singleColumnWidth:(U,Q)=>[Math.max(Kd(),U+Q)-U],minCellWidth:Kd,setElementWidth:Cl,adjustTableWidth:U=>{const Q=f()+U;Cl(l,Q)},isRelative:!1,label:"pixel"}},M1=(l,f)=>nf().exec(f)!==null?Oa(l):os(l),R={getTableSize:l=>Jl(l).fold(()=>Aa(l),v=>M1(l,v)),pixelSize:os,percentageSize:Oa,noneSize:Aa},Z=(l,f,v,C,O,I)=>({minRow:l,minCol:f,maxRow:v,maxCol:C,allCells:O,selectedCells:I}),ne=(l,f)=>{const v=l.grid.columns;let O=l.grid.rows,I=v,U=0,Q=0;const ae=[],we=[];return Fo(l.access,Le=>{if(ae.push(Le),f(Le)){we.push(Le);const St=Le.row,jt=St+Le.rowspan-1,zt=Le.column,Nt=zt+Le.colspan-1;St<O?O=St:jt>U&&(U=jt),zt<I?I=zt:Nt>Q&&(Q=Nt)}}),Z(O,I,U,Q,ae,we)},_e=(l,f,v)=>{const C=l[v].element,O=lt.fromTag("td");ys(O,lt.fromTag("br")),(f?ys:ba)(C,O)},st=(l,f,v,C)=>{const O=fn(l,Q=>Q.section!=="colgroup"),I=f.grid.columns,U=f.grid.rows;for(let Q=0;Q<U;Q++){let ae=!1;for(let we=0;we<I;we++)Q<v.minRow||Q>v.maxRow||we<v.minCol||we>v.maxCol||(po.getAt(f,Q,we).filter(C).isNone()?_e(O,ae,Q):ae=!0)}},At=(l,f,v,C)=>{Fo(v.columns,U=>{(U.column<f.minCol||U.column>f.maxCol)&&Ps(U.element)});const O=fn(Wl(l,"tr"),U=>U.dom.childElementCount===0);Ae(O,Ps),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&Ae(Wl(l,"th,td"),U=>{fe(U,"rowspan"),fe(U,"colspan")}),fe(l,yc),fe(l,"data-snooker-col-series"),R.getTableSize(l).adjustTableWidth(C)},un=(l,f,v,C)=>{if(C.minCol===0&&f.grid.columns===C.maxCol+1)return 0;const O=la(f,l,v),I=$e(O,(we,Le)=>we+Le,0),ae=$e(O.slice(C.minCol,C.maxCol+1),(we,Le)=>we+Le,0)/I*v.pixelWidth()-v.pixelWidth();return v.getCellDelta(ae)},jn=(l,f)=>{const v=jt=>Ke(jt.element,f),C=Nr(l),O=$m(C),I=R.getTableSize(l),U=po.generate(O),Q=ne(U,v),ae="th:not("+f+"),td:not("+f+")",we=ud(C,"th,td",jt=>Ke(jt,ae));Ae(we,Ps),st(O,U,Q,v);const Le=po.fromTable(l),St=un(l,Le,I,Q);return At(C,Q,U,St),C},to=" ",ds=((l,f)=>{const v=I=>{if(!l(I))throw new Error("Can only get "+f+" value of a "+f+" node");return C(I).getOr("")},C=I=>l(I)?ve.from(I.dom.nodeValue):ve.none();return{get:v,getOption:C,set:(I,U)=>{if(!l(I))throw new Error("Can only set raw "+f+" value of a "+f+" node");I.dom.nodeValue=U}}})(ri,"text"),Hs=l=>ds.get(l),Sc=l=>ds.getOption(l),Ql=(l,f)=>ds.set(l,f),Ai=l=>Qo(l)==="img"?1:Sc(l).fold(()=>ls(l).length,f=>f.length),xl=l=>Sc(l).filter(f=>f.trim().length!==0||f.indexOf(to)>-1).isSome(),Ym=l=>En(l)&&Mr(l,"contenteditable")==="false",Iu=["img","br"],eu=l=>xl(l)||Hn(Iu,Qo(l))||Ym(l),of=l=>Xc(l,eu),Xg=l=>$h(l,eu),$h=(l,f)=>{const v=C=>{const O=ls(C);for(let I=O.length-1;I>=0;I--){const U=O[I];if(f(U))return ve.some(U);const Q=v(U);if(Q.isSome())return Q}return ve.none()};return v(l)},Jg={scope:["row","col"]},ua=l=>()=>{const f=lt.fromTag("td",l.dom);return ys(f,lt.fromTag("br",l.dom)),f},tu=l=>()=>lt.fromTag("col",l.dom),Ro=l=>()=>lt.fromTag("colgroup",l.dom),zs=l=>()=>lt.fromTag("tr",l.dom),Oi=(l,f,v)=>{const C=ii(l,f);return Fo(v,(O,I)=>{O===null?fe(C,I):Zs(C,I,O)}),C},Ir=l=>l,Hh=(l,f,v)=>of(l).map(O=>{const I=v.join(","),U=cn(O,I,Q=>es(Q,l));return io(U,(Q,ae)=>{const we=Pc(ae);return ys(Q,we),we},f)}).getOr(f),Qg=(l,f)=>{Fo(Jg,(v,C)=>pe(l,C).filter(O=>Hn(v,O)).each(O=>Zs(f,C,O)))},wd=(l,f,v)=>{const C=(U,Q)=>{oa(U.element,Q),Si(Q,"height"),U.colspan!==1&&Si(Q,"width")},O=U=>{const Q=lt.fromTag(Qo(U.element),f.dom),ae=v.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),we=ae.length>0?Hh(U.element,Q,ae):Q;return ys(we,lt.fromTag("br")),C(U,Q),Qg(U.element,Q),l(U.element,Q),Q};return{col:U=>{const Q=lt.fromTag(Qo(U.element),f.dom);return C(U,Q),l(U.element,Q),Q},colgroup:Ro(f),row:zs(f),cell:O,replace:Oi,colGap:tu(f),gap:ua(f)}},Bc=l=>({col:tu(l),colgroup:Ro(l),row:zs(l),cell:ua(l),replace:Ir,colGap:tu(l),gap:ua(l)}),Cd=(l,f)=>{const C=document.createElement("div");return C.innerHTML=l,ls(lt.fromDom(C))},vS=l=>yn(l,lt.fromDom),Vi=l=>f=>f.options.get(l),yS="100%",nu=l=>{var f;const v=l.dom,C=(f=v.getParent(l.selection.getStart(),v.isBlock))!==null&&f!==void 0?f:l.getBody();return bd(lt.fromDom(C))+"px"},tm=(l,f)=>Di(l)||!N1(l)?f:ou(l)?{...f,width:nu(l)}:{...f,width:yS},zh=(l,f)=>Di(l)||N1(l)?f:ou(l)?{...f,width:nu(l)}:{...f,width:yS},Uk=l=>{const f=l.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:v=>{const C=Hn(["section","cells","sectionCells","auto"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:v=>{const C=Hn(["preservetable","resizetable"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},ep=l=>ve.from(l.options.get("table_clone_elements")),Vh=l=>{const f=l.options.get("object_resizing");return Hn(f.split(","),"table")},wS=Vi("table_header_type"),Br=Vi("table_column_resizing"),s2=l=>Br(l)==="preservetable",Sd=l=>Br(l)==="resizetable",Xm=Vi("table_sizing_mode"),tp=l=>Xm(l)==="relative",ou=l=>Xm(l)==="fixed",Di=l=>Xm(l)==="responsive",S0=Vi("table_resize_bars"),N1=Vi("table_style_by_css"),Uh=Vi("table_merge_content_on_paste"),ja=l=>{const f=l.options,v=f.get("table_default_attributes");return f.isSet("table_default_attributes")?v:zh(l,v)},x0=l=>{const f=l.options,v=f.get("table_default_styles");return f.isSet("table_default_styles")?v:tm(l,v)},E0=Vi("table_use_colgroups"),CS=l=>Yr(l,"[contenteditable]"),P1=(l,f=!1)=>Vn(l)?l.dom.isContentEditable:CS(l).fold(ce(f),v=>I1(v)==="true"),I1=l=>l.dom.contentEditable,nm=l=>lt.fromDom(l.getBody()),Qi=l=>f=>es(f,nm(l)),Lc=l=>{fe(l,"data-mce-style");const f=v=>fe(v,"data-mce-style");Ae(Eu(l),f),Ae(Xi(l),f),Ae(Fg(l),f)},xd=l=>lt.fromDom(l.selection.getStart()),r2=l=>l.getBoundingClientRect().width,B1=l=>l.getBoundingClientRect().height,np=l=>(f,v)=>{const C=f.dom.getStyle(v,l)||f.dom.getAttrib(v,l);return ve.from(C).filter(oo)},SS=np("width"),xS=np("height"),ES=l=>/^(\d+(\.\d+)?)%$/.test(l),a2=l=>/^(\d+(\.\d+)?)px$/.test(l),Jm=l=>ci(l,vs("table")).exists(P1),bo=(l,f)=>{const v=f.column,C=f.column+f.colspan-1,O=f.row,I=f.row+f.rowspan-1;return v<=l.finishCol&&C>=l.startCol&&O<=l.finishRow&&I>=l.startRow},bn=(l,f)=>f.column>=l.startCol&&f.column+f.colspan-1<=l.finishCol&&f.row>=l.startRow&&f.row+f.rowspan-1<=l.finishRow,Qm=(l,f)=>{let v=!0;const C=Gt(bn,f);for(let O=f.startRow;O<=f.finishRow;O++)for(let I=f.startCol;I<=f.finishCol;I++)v=v&&po.getAt(l,O,I).exists(C);return v?ve.some(f):ve.none()},_0=(l,f)=>$l(Math.min(l.row,f.row),Math.min(l.column,f.column),Math.max(l.row+l.rowspan-1,f.row+f.rowspan-1),Math.max(l.column+l.colspan-1,f.column+f.colspan-1)),L1=(l,f,v)=>{const C=po.findItem(l,f,es),O=po.findItem(l,v,es);return C.bind(I=>O.map(U=>_0(I,U)))},_S=(l,f,v)=>L1(l,f,v).bind(C=>Qm(l,C)),T0=(l,f,v,C)=>po.findItem(l,f,es).bind(O=>{const I=v>0?O.row+O.rowspan-1:O.row,U=C>0?O.column+O.colspan-1:O.column;return po.getAt(l,I+v,U+C).map(ae=>ae.element)}),fs=(l,f,v)=>L1(l,f,v).map(C=>{const O=po.filterItems(l,Gt(bo,C));return yn(O,I=>I.element)}),i2=(l,f)=>{const v=(C,O)=>qc(O,C);return po.findItem(l,f,v).map(C=>C.element)},Wk=(l,f,v)=>Ha(l).bind(C=>{const O=F1(C);return T0(O,l,f,v)}),c2=(l,f,v)=>{const C=F1(l);return fs(C,f,v)},ot=(l,f,v,C,O)=>{const I=F1(l),U=es(l,v)?ve.some(f):i2(I,f),Q=es(l,O)?ve.some(C):i2(I,C);return U.bind(ae=>Q.bind(we=>fs(I,ae,we)))},k0=(l,f,v)=>{const C=F1(l);return _S(C,f,v)},F1=po.fromTable;var A0=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],$1=()=>{const l=we=>lt.fromDom(we.dom.cloneNode(!1)),f=we=>Ms(we).dom,v=we=>sr(we)?Qo(we)==="body"?!0:Hn(A0,Qo(we)):!1,C=we=>sr(we)?Hn(["br","img","hr","input"],Qo(we)):!1,O=we=>sr(we)&&Mr(we,"contenteditable")==="false",I=(we,Le)=>we.dom.compareDocumentPosition(Le.dom),U=(we,Le)=>{const St=Ve(we);Ea(Le,St)},Q=we=>{const Le=Qo(we);return Hn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Le)},ae=we=>sr(we)?pe(we,"lang"):ve.none();return{up:ce({selector:ur,closest:Yr,predicate:ut,all:Ns}),down:ce({selector:$o,predicate:Be}),styles:ce({get:cd,getRaw:Su,set:Is,remove:Si}),attrs:ce({get:Mr,set:Zs,remove:fe,copyTo:U}),insert:ce({before:gc,after:bi,afterAll:vu,append:ys,appendAll:yo,prepend:ba,wrap:pc}),remove:ce({unwrap:Fl,remove:Ps}),create:ce({nu:lt.fromTag,clone:l,text:lt.fromText}),query:ce({comparePosition:I,prevSibling:hl,nextSibling:ai}),property:ce({children:ls,name:Qo,parent:Wr,document:f,isText:ri,isComment:Yo,isElement:sr,isSpecial:Q,getLanguage:ae,getText:Hs,setText:Ql,isBoundary:v,isEmptyTag:C,isNonEditable:O}),eq:es,is:Kr}};const op=(l,f,v,C)=>{const O=v[0],I=v.slice(1);return C(l,f,O,I)},O0=(l,f,v)=>v.length>0?op(l,f,v,Wh):ve.none(),Wh=(l,f,v,C)=>{const O=f(l,v);return io(C,(I,U)=>{const Q=f(l,U);return H1(l,I,Q)},O)},H1=(l,f,v)=>f.bind(C=>v.filter(Gt(l.eq,C))),eh=(l,f)=>Gt(l.eq,f),tr=(l,f,v,C=en)=>{const O=[f].concat(l.up().all(f)),I=[v].concat(l.up().all(v)),U=Le=>Us(Le,C).fold(()=>Le,jt=>Le.slice(0,jt+1)),Q=U(O),ae=U(I),we=W(Q,Le=>ft(ae,eh(l,Le)));return{firstpath:Q,secondpath:ae,shared:we}},sf=O0,TS=tr,rf=$1(),D0=(l,f)=>sf(rf,(v,C)=>l(C),f),z1=(l,f,v)=>TS(rf,l,f,v),V1=l=>ur(l,"table"),R0=(l,f,v)=>{const C=O=>I=>v!==void 0&&v(I)||es(I,O);return es(l,f)?ve.some({boxes:ve.some([l]),start:l,finish:f}):V1(l).bind(O=>V1(f).bind(I=>{if(es(O,I))return ve.some({boxes:c2(O,l,f),start:l,finish:f});if(qc(O,I)){const U=cn(f,"td,th",C(O)),Q=U.length>0?U[U.length-1]:f;return ve.some({boxes:ot(O,l,O,f,I),start:l,finish:Q})}else if(qc(I,O)){const U=cn(l,"td,th",C(I)),Q=U.length>0?U[U.length-1]:l;return ve.some({boxes:ot(I,l,O,f,I),start:l,finish:Q})}else return z1(l,f).shared.bind(U=>Yr(U,"table",v).bind(Q=>{const ae=cn(f,"td,th",C(Q)),we=ae.length>0?ae[ae.length-1]:f,Le=cn(l,"td,th",C(Q)),St=Le.length>0?Le[Le.length-1]:l;return ve.some({boxes:ot(Q,l,O,f,I),start:St,finish:we})}))}))},Fc=(l,f)=>{const v=$o(l,f);return v.length>0?ve.some(v):ve.none()},M0=(l,f)=>W(l,v=>Ke(v,f)),kS=(l,f,v)=>yi(l,f).bind(C=>yi(l,v).bind(O=>D0(V1,[C,O]).map(I=>({first:C,last:O,table:I})))),Zh=(l,f)=>ur(l,"table").bind(v=>yi(v,f).bind(C=>R0(C,l).bind(O=>O.boxes.map(I=>({boxes:I,start:O.start,finish:O.finish}))))),Zk=(l,f,v,C,O)=>M0(l,O).bind(I=>Wk(I,f,v).bind(U=>Zh(U,C))),th=(l,f)=>Fc(l,f),l2=(l,f,v)=>kS(l,f,v).bind(C=>{const O=ae=>es(l,ae),I="thead,tfoot,tbody,table",U=ur(C.first,I,O),Q=ur(C.last,I,O);return U.bind(ae=>Q.bind(we=>es(ae,we)?k0(C.table,C.first,C.last):ve.none()))}),AS=Je,N0=l=>{const f=(C,O)=>pe(C,O).exists(I=>parseInt(I,10)>1),v=C=>f(C,"rowspan")||f(C,"colspan");return l.length>0&&zo(l,v)?ve.some(l):ve.none()},Ed=(l,f,v)=>f.length<=1?ve.none():l2(l,v.firstSelectedSelector,v.lastSelectedSelector).map(C=>({bounds:C,cells:f})),di="data-mce-selected",Et="td["+di+"],th["+di+"]",sp="["+di+"]",wa="data-mce-first-selected",jk="td["+wa+"],th["+wa+"]",U1="data-mce-last-selected",qk="td["+U1+"],th["+U1+"]",Vs=sp,jh={selected:di,selectedSelector:Et,firstSelected:wa,firstSelectedSelector:jk,lastSelected:U1,lastSelectedSelector:qk},P0=(l,f,v)=>({element:v,mergable:Ed(f,l,jh),unmergable:N0(l),selection:AS(l)}),rp=(l,f,v)=>({element:l,clipboard:f,generators:v}),ap=(l,f,v,C)=>({selection:AS(l),clipboard:v,generators:C}),u2=l=>Ha(l).bind(f=>th(f,jh.firstSelectedSelector)).fold(ce(l),f=>f[0]),_d=l=>(f,v)=>{const C=Qo(f),O=C==="col"||C==="colgroup"?u2(f):f;return Yr(O,l,v)},Gk=_d("th,td,caption"),Lr=_d("th,td"),Td=l=>vS(l.model.table.getSelectedCells()),mr=l=>fn(Td(l),f=>Ke(f,jh.selectedSelector)),d2=l=>Ha(l[0]).map(f=>{const v=jn(f,Vs);return Lc(v),[v]}),xc=(l,f)=>yn(f,v=>l.selection.serializer.serialize(v.dom,{})).join(""),ip=(l,f)=>{const v=l.getDoc(),C=ke(lt.fromDom(l.getBody())),O=lt.fromTag("div",v);Zs(O,"data-mce-bogus","all"),na(O,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const I=Ye(C);yo(O,f),ys(I,O);const U=O.dom.innerText;return Ps(O),U},kd=(l,f)=>{l.on("BeforeGetContent",v=>{const C=O=>{v.preventDefault(),d2(O).each(I=>{const U=v.format==="text"?ip(l,I):xc(l,I);v.content=U})};if(v.selection===!0){const O=mr(l);O.length>=1&&C(O)}}),l.on("BeforeSetContent",v=>{if(v.selection===!0&&v.paste===!0){const C=Td(l);xe(C).each(O=>{Ha(O).each(I=>{const U=fn(Cd(v.content),ae=>Qo(ae)!=="meta"),Q=vs("table");if(Uh(l)&&U.length===1&&Q(U[0])){v.preventDefault();const ae=lt.fromDom(l.getDoc()),we=Bc(ae),Le=rp(O,U[0],we);f.pasteCells(I,Le).each(()=>{l.focus()})}})})}})},I0=(l,f)=>({element:l,offset:f}),Kk=(l,f,v)=>l.property().isText(f)&&l.property().getText(f).trim().length===0||l.property().isComment(f)?v(f).bind(C=>Kk(l,C,v).orThunk(()=>ve.some(C))):ve.none(),Yk=(l,f)=>l.property().isText(f)?l.property().getText(f).length:l.property().children(f).length,OS=(l,f)=>{const v=Kk(l,f,l.query().prevSibling).getOr(f);if(l.property().isText(v))return I0(v,Yk(l,v));const C=l.property().children(v);return C.length>0?OS(l,C[C.length-1]):I0(v,Yk(l,v))},Ad=OS,Od=$1(),ec=l=>Ad(Od,l),cp=(l,f)=>{Er(l)||Gg(l).each(C=>{const O=C.value/2;rt(l,O,C.unit),rt(f,O,C.unit)})},qh=l=>yn(l,ce(0)),DS=(l,f,v,C,O)=>O(l.slice(0,f)).concat(C).concat(O(l.slice(v))),lp=l=>(f,v,C,O)=>{if(l(C)){const I=Math.max(O,f[v]-Math.abs(C)),U=Math.abs(I-f[v]);return C>=0?U:-U}else return C},af=lp(l=>l<0),Gh=lp(Fe),Kh=()=>{const l=(Q,ae,we,Le,St)=>{const jt=af(Q,ae,Le,St);return DS(Q,ae,we+1,[jt,0],qh)},f=(Q,ae,we,Le)=>{const St=(100+we)/100,jt=Math.max(Le,(Q[ae]+we)/St);return yn(Q,(zt,Nt)=>(Nt===ae?jt:zt/St)-zt)},v=(Q,ae,we,Le,St,jt)=>jt?f(Q,ae,Le,St):l(Q,ae,we,Le,St);return{resizeTable:(Q,ae)=>Q(ae),clampTableDelta:af,calcLeftEdgeDeltas:v,calcMiddleDeltas:(Q,ae,we,Le,St,jt,zt)=>v(Q,we,Le,St,jt,zt),calcRightEdgeDeltas:(Q,ae,we,Le,St,jt)=>{if(jt)return f(Q,we,Le,St);{const zt=af(Q,we,Le,St);return qh(Q.slice(0,we)).concat([zt])}},calcRedestributedWidths:(Q,ae,we,Le)=>{if(Le){const jt=(ae+we)/ae,zt=yn(Q,Nt=>Nt/jt);return{delta:jt*100-100,newSizes:zt}}else return{delta:we,newSizes:Q}}}},om=()=>{const l=(U,Q,ae,we,Le)=>{const St=we>=0?ae:Q,jt=Gh(U,St,we,Le);return DS(U,Q,ae+1,[jt,-jt],qh)};return{resizeTable:(U,Q,ae)=>{ae&&U(Q)},clampTableDelta:(U,Q,ae,we,Le)=>{if(Le){if(ae>=0)return ae;{const St=$e(U,(jt,zt)=>jt+zt-we,0);return Math.max(-St,ae)}}else return af(U,Q,ae,we)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(U,Q,ae,we,Le,St)=>l(U,ae,we,Le,St),calcRightEdgeDeltas:(U,Q,ae,we,Le,St)=>{if(St)return qh(U);{const jt=we/U.length;return yn(U,ce(jt))}},calcRedestributedWidths:(U,Q,ae,we)=>({delta:0,newSizes:U})}},cf=l=>po.fromTable(l).grid,Yh=vs("th"),W1=l=>zo(l,f=>Yh(f.element)),Xk=(l,f)=>l&&f?"sectionCells":l?"section":"cells",f2=l=>{const f=l.section==="thead",v=wi(B0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:f||v?{type:"header",subType:Xk(f,v)}:{type:"body"}},B0=l=>{const f=fn(l,v=>Yh(v.element));return f.length===0?ve.some("td"):f.length===l.length?ve.some("th"):ve.none()},L0=l=>{const f=yn(l,O=>f2(O).type),v=Hn(f,"header"),C=Hn(f,"footer");if(!v&&!C)return ve.some("body");{const O=Hn(f,"body");return v&&!O&&!C?ve.some("header"):!v&&!O&&C?ve.some("footer"):ve.none()}},RS=l=>Oo(l.all,f=>{const v=f2(f);return v.type==="header"?ve.from(v.subType):ve.none()}),m2=(l,f,v)=>Pr(v(l.element,f),!0,l.isLocked),F0=(l,f)=>l.section!==f?vi(l.element,l.cells,f,l.isNew):l,MS=()=>({transformRow:F0,transformCell:(l,f,v)=>{const C=v(l.element,f),O=Qo(C)!=="td"?ad(C,"td"):C;return Pr(O,l.isNew,l.isLocked)}}),Z1=()=>({transformRow:F0,transformCell:m2}),h2=()=>({transformRow:(l,f)=>F0(l,f==="thead"?"tbody":f),transformCell:m2}),j1={getTableSectionType:(l,f)=>{const v=po.fromTable(l);switch(RS(v).getOr(f)){case"section":return MS();case"sectionCells":return Z1();case"cells":return h2()}},section:MS,sectionCells:Z1,cells:h2,fallback:()=>({transformRow:Je,transformCell:m2})},up=(l,f,v,C)=>{v===C?fe(l,f):Zs(l,f,v)},sm=(l,f,v)=>{Ao(It(l,f)).fold(()=>ba(l,v),C=>bi(C,v))},H0=(l,f)=>{const v=uo(l,f).getOrThunk(()=>{const C=lt.fromTag(f,_a(l).dom);return f==="thead"?sm(l,"caption,colgroup",C):f==="colgroup"?sm(l,"caption",C):ys(l,C),C});return bc(v),v},NS=(l,f)=>{const v=[],C=[],O=zt=>yn(zt,Nt=>{Nt.isNew&&v.push(Nt.element);const mn=Nt.element;return bc(mn),Ae(Nt.cells,yt=>{yt.isNew&&C.push(yt.element),up(yt.element,"colspan",yt.colspan,1),up(yt.element,"rowspan",yt.rowspan,1),ys(mn,yt.element)}),mn}),I=zt=>_o(zt,Nt=>yn(Nt.cells,mn=>(up(mn.element,"span",mn.colspan,1),mn.element))),U=(zt,Nt)=>{const mn=H0(l,Nt),Rn=(Nt==="colgroup"?I:O)(zt);yo(mn,Rn)},Q=zt=>{uo(l,zt).each(Ps)},ae=(zt,Nt)=>{zt.length>0?U(zt,Nt):Q(Nt)},we=[],Le=[],St=[],jt=[];return Ae(f,zt=>{switch(zt.section){case"thead":we.push(zt);break;case"tbody":Le.push(zt);break;case"tfoot":St.push(zt);break;case"colgroup":jt.push(zt);break}}),ae(jt,"colgroup"),ae(we,"thead"),ae(Le,"tbody"),ae(St,"tfoot"),{newRows:v,newCells:C}},PS=l=>yn(l,f=>{const v=Pc(f.element);return Ae(f.cells,C=>{const O=Nr(C.element);up(O,"colspan",C.colspan,1),up(O,"rowspan",C.rowspan,1),ys(v,O)}),v}),IS=(l,f)=>yn(l,v=>Hi(v,f)),Xh=(l,f)=>l[f],Jk=(l,f)=>{if(l.length===0)return 0;const v=l[0];return Us(l,O=>!f(v.element,O.element)).getOr(l.length)},dp=(l,f,v,C)=>{const O=Xh(l,f),I=O.section==="colgroup",U=Jk(O.cells.slice(v),C),Q=I?1:Jk(IS(l.slice(f),v),C);return{colspan:U,rowspan:Q}},fp=(l,f)=>{const v=yn(l,O=>yn(O.cells,en)),C=(O,I,U,Q)=>{for(let ae=O;ae<O+U;ae++)for(let we=I;we<I+Q;we++)v[ae][we]=!0};return yn(l,(O,I)=>{const U=_o(O.cells,(Q,ae)=>{if(v[I][ae]===!1){const we=dp(l,I,ae,f);return C(I,ae,we.rowspan,we.colspan),[yu(Q.element,we.rowspan,we.colspan,Q.isNew)]}else return[]});return br(O.element,U,O.section,O.isNew)})},mp=(l,f,v)=>{const C=[];Ae(l.colgroups,O=>{const I=[];for(let U=0;U<l.grid.columns;U++){const Q=po.getColumnAt(l,U).map(ae=>Pr(ae.element,v,!1)).getOrThunk(()=>Pr(f.colGap(),!0,!1));I.push(Q)}C.push(vi(O.element,I,"colgroup",v))});for(let O=0;O<l.grid.rows;O++){const I=[];for(let ae=0;ae<l.grid.columns;ae++){const we=po.getAt(l,O,ae).map(Le=>Pr(Le.element,v,Le.isLocked)).getOrThunk(()=>Pr(f.gap(),!0,!1));I.push(we)}const U=l.all[O],Q=vi(U.element,I,U.section,v);C.push(Q)}return C},BS=(l,f)=>mp(l,f,!1),z0=l=>fp(l,es),LS=(l,f)=>Oo(l.all,v=>W(v.cells,C=>es(f,C.element))),FS=(l,f,v)=>{const C=yn(f.selection,I=>xu(I).bind(U=>LS(l,U)).filter(v)),O=xr(C);return Lg(O.length>0,O)},Ui=(l,f,v,C,O)=>(I,U,Q,ae)=>{const we=po.fromTable(I),Le=ve.from(ae==null?void 0:ae.section).getOrThunk(j1.fallback);return f(we,U).map(jt=>{const zt=BS(we,Q),Nt=l(zt,jt,es,O(Q),Le),mn=Ls(Nt.grid),yt=z0(Nt.grid);return{info:jt,grid:yt,cursor:Nt.cursor,lockedColumns:mn}}).bind(jt=>{const zt=NS(I,jt.grid),Nt=ve.from(ae==null?void 0:ae.sizing).getOrThunk(()=>R.getTableSize(I)),mn=ve.from(ae==null?void 0:ae.resize).getOrThunk(om);return v(I,jt.grid,jt.info,{sizing:Nt,resize:mn,section:Le}),C(I),fe(I,yc),jt.lockedColumns.length>0&&Zs(I,yc,jt.lockedColumns.join(",")),ve.some({cursor:jt.cursor,newRows:zt.newRows,newCells:zt.newCells})})},Qk=(l,f)=>xu(f.element).bind(v=>LS(l,v).map(C=>({...C,generators:f.generators,clipboard:f.clipboard}))),$S=(l,f)=>FS(l,f,Fe).map(v=>({cells:v,generators:f.generators,clipboard:f.clipboard})),hp=(l,f)=>f.mergable,e4=(l,f)=>f.unmergable,Ri=(l,f)=>FS(l,f,Fe),Bu=(l,f)=>FS(l,f,v=>!v.isLocked),g2=(l,f)=>LS(l,f).exists(v=>!v.isLocked),nh=(l,f)=>zo(f,v=>g2(l,v)),t4=(l,f)=>hp(l,f).filter(v=>nh(l,v.cells)),q1=(l,f)=>e4(l,f).filter(v=>nh(l,v)),V0=(l,f,v,C)=>{const O=sa(l).rows;if(O.length===0)return l;for(let I=f.startRow;I<=f.finishRow;I++)for(let U=f.startCol;U<=f.finishCol;U++){const Q=O[I],ae=Hi(Q,U).isLocked;Xn(Q,U,Pr(C(),!1,ae))}return l},rm=(l,f,v,C)=>{const O=sa(l).rows;let I=!0;for(let U=0;U<O.length;U++)for(let Q=0;Q<Ji(O[0]);Q++){const ae=O[U],we=Hi(ae,Q),Le=we.element,St=v(Le,f);St&&!I?Xn(ae,Q,Pr(C(),!0,we.isLocked)):St&&(I=!1)}return l},HS=(l,f)=>$e(l,(v,C)=>ft(v,O=>f(O.element,C.element))?v:v.concat([C]),[]),Dd=(l,f,v,C)=>(f>0&&f<l[0].cells.length&&Ae(l,O=>{const I=O.cells[f-1];let U=0;const Q=C();for(;O.cells.length>f+U&&v(I.element,O.cells[f+U].element);)Xn(O,f+U,Pr(Q,!0,O.cells[f+U].isLocked)),U++}),l),lf=(l,f,v,C)=>{const O=sa(l).rows;if(f>0&&f<O.length){const I=O[f-1].cells,U=HS(I,v);Ae(U,Q=>{let ae=ve.none();for(let we=f;we<O.length;we++)for(let Le=0;Le<Ji(O[0]);Le++){const St=O[we],jt=Hi(St,Le);v(jt.element,Q.element)&&(ae.isNone()&&(ae=ve.some(C())),ae.each(Nt=>{Xn(St,Le,Pr(Nt,!0,jt.isLocked))}))}})}return l},zS=l=>{const f=I=>I(l),v=ce(l),C=()=>O,O={tag:!0,inner:l,fold:(I,U)=>U(l),isValue:Fe,isError:en,map:I=>Ec.value(I(l)),mapError:C,bind:f,exists:f,forall:f,getOr:v,or:C,getOrThunk:v,orThunk:C,getOrDie:v,each:I=>{I(l)},toOptional:()=>ve.some(l)};return O},Da=l=>{const f=()=>v,v={tag:!1,inner:l,fold:(C,O)=>C(l),isValue:en,isError:Fe,map:f,mapError:C=>Ec.error(C(l)),bind:f,exists:en,forall:Fe,getOr:Je,or:Je,getOrThunk:In,orThunk:In,getOrDie:Xt(String(l)),each:Ne,toOptional:ve.none};return v},Ec={value:zS,error:Da,fromOption:(l,f)=>l.fold(()=>Da(f),zS)},n4=(l,f,v)=>{if(l.row>=f.length||l.column>Ji(f[0]))return Ec.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const C=f.slice(l.row),O=C[0].cells.slice(l.column),I=Ji(v[0]),U=v.length;return Ec.value({rowDelta:C.length-U,colDelta:O.length-I})},U0=(l,f)=>{const v=Ji(l[0]),C=Ji(f[0]);return{rowDelta:0,colDelta:v-C}},Jh=(l,f)=>{const v=l.length,C=f.length;return{rowDelta:v-C,colDelta:0}},am=(l,f,v,C)=>{const O=f.section==="colgroup"?v.col:v.cell;return xo(l,I=>Pr(O(),!0,C(I)))},uf=(l,f,v,C)=>{const O=l[l.length-1];return l.concat(xo(f,()=>{const I=O.section==="colgroup"?v.colgroup:v.row,U=ui(O,I,Je),Q=am(U.cells.length,U,v,ae=>Ts(C,ae.toString()));return vr(U,Q)}))},su=(l,f,v,C)=>yn(l,O=>{const I=am(f,O,v,en);return Wm(O,C,I)}),VS=(l,f,v)=>yn(l,C=>$e(v,(O,I)=>{const U=am(1,C,f,Fe)[0];return Ph(O,I,U)},C)),G1=(l,f,v)=>{const C=f.colDelta<0?su:Je,O=f.rowDelta<0?uf:Je,I=Ls(l),U=Ji(l[0]),Q=ft(I,Le=>Le===U-1),ae=C(l,Math.abs(f.colDelta),v,Q?U-1:U),we=Ls(ae);return O(ae,Math.abs(f.rowDelta),v,et(we,Fe))},gp=(l,f,v,C)=>{const O=Hi(l[f],v),I=Gt(C,O.element),U=l[f];return l.length>1&&Ji(U)>1&&(v>0&&I(Ti(U,v-1))||v<U.cells.length-1&&I(Ti(U,v+1))||f>0&&I(Ti(l[f-1],v))||f<l.length-1&&I(Ti(l[f+1],v)))},im=(l,f,v,C,O,I)=>{const U=l.row,Q=l.column,ae=v.length,we=Ji(v[0]),Le=U+ae,St=Q+we+I.length,jt=et(I,Fe);for(let zt=U;zt<Le;zt++){let Nt=0;for(let mn=Q;mn<St;mn++){if(jt[mn]){Nt++;continue}gp(f,zt,mn,O)&&rm(f,Ti(f[zt],mn),O,C.cell);const yt=mn-Q-Nt,Rn=Hi(v[zt-U],yt),ro=Rn.element,mt=C.replace(ro);Xn(f[zt],mn,Pr(mt,!0,Rn.isLocked))}}return f},W0=(l,f,v)=>{const C=Ji(f[0]),O=sa(f).cols.length+l.row,I=xo(C-l.column,Q=>Q+l.column),U=W(I,Q=>zo(v,ae=>ae!==Q)).getOr(C-1);return{row:O,column:U}},ko=(l,f,v)=>fn(v,C=>C>=l.column&&C<=Ji(f[0])+l.column),tc=(l,f,v,C,O)=>{const I=Ls(f),U=W0(l,f,I),Q=sa(v).rows,ae=ko(U,Q,I);return n4(U,f,Q).map(Le=>{const St={...Le,colDelta:Le.colDelta-ae.length},jt=G1(f,St,C),zt=Ls(jt),Nt=ko(U,Q,zt);return im(U,jt,Q,C,O,Nt)})},oh=(l,f,v,C,O)=>{Dd(f,l,O,C.cell);const I=Jh(v,f),U=G1(v,I,C),Q=Jh(f,U),ae=G1(f,Q,C);return yn(ae,(we,Le)=>Wm(we,l,U[Le].cells))},pp=(l,f,v,C,O)=>{lf(f,l,O,C.cell);const I=Ls(f),U=U0(f,v),Q={...U,colDelta:U.colDelta-I.length},ae=G1(f,Q,C),{cols:we,rows:Le}=sa(ae),St=Ls(ae),jt=U0(v,f),zt={...jt,colDelta:jt.colDelta+St.length},Nt=VS(v,C,St),mn=G1(Nt,zt,C);return[...we,...Le.slice(0,l),...mn,...Le.slice(l,Le.length)]},nr=(l,f,v,C)=>ui(l,O=>C(O,v),f),sh=(l,f,v,C,O)=>{const{rows:I,cols:U}=sa(l),Q=I.slice(0,f),ae=I.slice(f),we=nr(I[v],(Le,St)=>f>0&&f<I.length&&C(Ti(I[f-1],St),Ti(I[f],St))?Hi(I[f],St):Pr(O(Le.element,C),!0,Le.isLocked),C,O);return[...U,...Q,we,...ae]},rh=(l,f,v,C,O,I,U)=>{if(v==="colgroup"||!C){const Q=Hi(l,O);return Pr(U(Q.element,I),!0,!1)}else return Hi(l,f)},b2=(l,f,v,C,O)=>yn(l,I=>{const U=f>0&&f<Ji(I)&&C(Ti(I,f-1),Ti(I,f)),Q=rh(I,f,I.section,U,v,C,O);return Ph(I,f,Q)}),tM=(l,f)=>_o(l,v=>{const C=v.cells,O=io(f,(I,U)=>U>=0&&U<I.length?I.slice(0,U).concat(I.slice(U+1)):I,C);return O.length>0?[vi(v.element,O,v.section,v.isNew)]:[]}),US=(l,f,v)=>{const{rows:C,cols:O}=sa(l);return[...O,...C.slice(0,f),...C.slice(v+1)]},js=(l,f,v,C)=>Ti(l[f],v)!==void 0&&f>0&&C(Ti(l[f-1],v),Ti(l[f],v)),K1=(l,f,v)=>f>0&&v(Ti(l,f-1),Ti(l,f)),WS=(l,f,v,C)=>js(l,f,v,C)||K1(l[f],v,C),o4=(l,f)=>zo(f,Je)&&W1(l.cells)?Fe:(C,O,I)=>!(Qo(C.element)==="th"&&f[I]),Qh=(l,f)=>zo(f,Je)&&W1(l)?Fe:(C,O,I)=>!(Qo(C.element)==="th"&&f[O]),ru=(l,f,v,C)=>{const O=U=>U==="row"?ld(f):Er(f),I=U=>O(U)?`${U}group`:U;return l?Yh(f)?I(v):null:C&&Yh(f)?I(v==="row"?"col":"row"):null},Z0=(l,f)=>(v,C,O)=>ve.some(ru(l,v.element,"col",f[O])),cm=(l,f)=>(v,C)=>ve.some(ru(l,v.element,"row",f[C])),on=(l,f,v)=>Pr(v(l.element,f),!0,l.isLocked),v2=(l,f,v,C,O,I,U)=>{const Q=ae=>ft(f,we=>v(ae.element,we.element));return yn(l,(ae,we)=>Ou(ae,(Le,St)=>{if(Q(Le)){const jt=U(Le,we,St)?O(Le,v,C):Le;return I(jt,we,St).each(zt=>{Nc(jt.element,{scope:ve.from(zt)})}),jt}else return Le}))},y2=(l,f,v)=>_o(l,(C,O)=>WS(l,O,f,v)?[]:[Hi(C,f)]),s4=(l,f,v)=>{const C=l[f];return _o(C.cells,(O,I)=>WS(l,f,I,v)?[]:[O])},w2=(l,f,v,C,O)=>{const I=sa(l).rows,U=_o(f,Le=>y2(I,Le,C)),Q=yn(I,Le=>W1(Le.cells)),ae=Qh(U,Q),we=cm(v,Q);return v2(l,U,C,O,on,we,ae)},ZS=(l,f,v,C,O,I,U)=>{const{cols:Q,rows:ae}=sa(l),we=ae[f[0]],Le=_o(f,yt=>s4(ae,yt,O)),St=yn(we.cells,(yt,Rn)=>W1(y2(ae,Rn,O))),jt=[...ae];Ae(f,yt=>{jt[yt]=U.transformRow(ae[yt],v)});const zt=[...Q,...jt],Nt=o4(we,St),mn=Z0(C,St);return v2(zt,Le,O,I,U.transformCell,mn,Nt)},j0=(l,f,v,C)=>{const O=sa(l).rows,I=yn(f,U=>Hi(O[U.row],U.column));return v2(l,I,v,C,on,ve.none,Fe)},Lu={generate:l=>{if(!ue(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const f=[],v={};return Ae(l,(C,O)=>{const I=Kt(C);if(I.length!==1)throw new Error("one and only one name per case");const U=I[0],Q=C[U];if(v[U]!==void 0)throw new Error("duplicate key detected:"+U);if(U==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ue(Q))throw new Error("case arguments must be an array");f.push(U),v[U]=(...ae)=>{const we=ae.length;if(we!==Q.length)throw new Error("Wrong number of arguments to case "+U+". Expected "+Q.length+" ("+Q+"), got "+we);return{fold:(...St)=>{if(St.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+St.length);return St[O].apply(null,ae)},match:St=>{const jt=Kt(St);if(f.length!==jt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+jt.join(","));if(!zo(f,Nt=>Hn(jt,Nt)))throw new Error("Not all branches were specified when using match. Specified: "+jt.join(", ")+`
Required: `+f.join(", "));return St[U].apply(null,ae)},log:St=>{console.log(St,{constructors:f,constructor:U,params:ae})}}}}),v}},df={...Lu.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},r4=(l,f)=>l.length===0?df.none():l.length===1?df.only(0):f===0?df.left(0,1):f===l.length-1?df.right(f-1,f):f>0&&f<l.length-1?df.middle(f-1,f,f+1):df.none(),G0=(l,f,v,C,O)=>{const I=l.slice(0),U=r4(l,f),Q=ce(yn(I,ce(0))),ae=jt=>C.singleColumnWidth(I[jt],v),we=(jt,zt)=>O.calcLeftEdgeDeltas(I,jt,zt,v,C.minCellWidth(),C.isRelative),Le=(jt,zt,Nt)=>O.calcMiddleDeltas(I,jt,zt,Nt,v,C.minCellWidth(),C.isRelative),St=(jt,zt)=>O.calcRightEdgeDeltas(I,jt,zt,v,C.minCellWidth(),C.isRelative);return U.fold(Q,ae,we,Le,St)},Fu=(l,f,v)=>{let C=0;for(let O=l;O<f;O++)C+=v[O]!==void 0?v[O]:0;return C},a4=(l,f)=>{const v=po.justCells(l);return yn(v,C=>{const O=Fu(C.column,C.column+C.colspan,f);return{element:C.element,width:O,colspan:C.colspan}})},K0=(l,f)=>{const v=po.justColumns(l);return yn(v,(C,O)=>({element:C.element,width:f[O],colspan:C.colspan}))},Y0=(l,f)=>yn(l.all,(v,C)=>({element:v.element,height:f[C]})),i4=l=>io(l,(f,v)=>f+v,0),c4=(l,f)=>po.hasColumns(l)?K0(l,f):a4(l,f),X0=(l,f,v)=>{const C=c4(l,f);Ae(C,O=>{v.setElementWidth(O.element,O.width)})},J0=(l,f,v,C,O)=>{const I=po.fromTable(l),U=O.getCellDelta(f),Q=O.getWidths(I,O),ae=v===I.grid.columns-1,we=C.clampTableDelta(Q,v,U,O.minCellWidth(),ae),Le=G0(Q,v,we,O,C),St=yn(Le,(jt,zt)=>jt+Q[zt]);X0(I,St,O),C.resizeTable(O.adjustTableWidth,we,ae)},jS=(l,f,v)=>{const C=po.fromTable(l),O=$s(C,l),I=yn(O,(ae,we)=>v===we?Math.max(f+ae,zf()):ae),U=Y0(C,I);Ae(U,ae=>{tf(ae.element,ae.height)}),Ae(po.justCells(C),ae=>{em(ae.element)});const Q=i4(I);tf(l,Q)},qS=(l,f,v,C,O)=>{const I=po.generate(f),U=C.getWidths(I,C),Q=C.pixelWidth(),{newSizes:ae,delta:we}=O.calcRedestributedWidths(U,Q,v.pixelDelta,C.isRelative);X0(I,ae,C),C.adjustTableWidth(we)},l4=(l,f,v,C)=>{const O=po.generate(f),I=C.getWidths(O,C);X0(O,I,C)},ff=l=>$e(l,(v,C)=>ft(v,I=>I.column===C.column)?v:v.concat([C]),[]).sort((v,C)=>v.column-C.column),GS=vs("col"),ah=vs("colgroup"),Q0=l=>Qo(l)==="tr"||ah(l),KS=l=>{const f=$a(l,"colspan",1),v=$a(l,"rowspan",1);return{element:l,colspan:f,rowspan:v}},ev=(l,f=KS)=>{const v=Q=>GS(Q.element)?l.col(Q):l.cell(Q),C=Q=>ah(Q.element)?l.colgroup(Q):l.row(Q),O=Q=>{if(Q0(Q))return C({element:Q});{const ae=Q,we=v(f(ae));return I=ve.some({item:ae,replacement:we}),we}};let I=ve.none();return{getOrInit:(Q,ae)=>I.fold(()=>O(Q),we=>ae(Q,we.item)?we.replacement:O(Q))}},C2=l=>f=>{const v=[],C=(U,Q)=>W(v,ae=>Q(ae.item,U)),O=U=>{const Q=l==="td"?{scope:null}:{},ae=f.replace(U,l,Q);return v.push({item:U,sub:ae}),ae};return{replaceOrInit:(U,Q)=>{if(Q0(U)||GS(U))return U;{const ae=U;return C(ae,Q).fold(()=>O(ae),we=>Q(U,we.item)?we.sub:O(ae))}}}},tv=l=>pe(l,"scope").map(f=>f.substr(0,3)),_c={modification:ev,transform:C2,merging:l=>({unmerge:C=>{const O=tv(C);return O.each(I=>Zs(C,"scope",I)),()=>{const I=l.cell({element:C,colspan:1,rowspan:1});return Si(I,"width"),Si(C,"width"),O.each(U=>Zs(I,"scope",U)),I}},merge:C=>{const O=()=>{const I=xr(yn(C,tv));if(I.length===0)return ve.none();{const U=I[0],Q=["row","col"];return ft(I,we=>we!==U&&Hn(Q,we))?ve.none():ve.from(U)}};return Si(C[0],"width"),O().fold(()=>fe(C[0],"scope"),I=>Zs(C[0],"scope",I+"group")),ce(C[0])}})},d4=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],eg=(l,f)=>{const v=l.property().name(f);return Hn(["ol","ul"],v)},YS=(l,f)=>{const v=l.property().name(f);return Hn(d4,v)},ih=(l,f)=>Hn(["br","img","hr","input"],l.property().name(f)),lm=$1(),S2=l=>YS(lm,l),Qe=l=>eg(lm,l),$u=l=>ih(lm,l),tg=l=>{const f=vs("br"),v=ae=>zo(ae,we=>f(we)||ri(we)&&Hs(we).trim().length===0),C=ae=>Qo(ae)==="li"||ut(ae,Qe).isSome(),O=ae=>ai(ae).map(we=>S2(we)?!0:$u(we)?Qo(we)!=="img":!1).getOr(!1),I=ae=>Xg(ae).bind(we=>{const Le=O(we);return Wr(we).map(St=>Le===!0||C(St)||f(we)||S2(St)&&!es(ae,St)?[]:[lt.fromTag("br")])}).getOr([]),Q=(()=>{const ae=_o(l,we=>{const Le=ls(we);return v(Le)?[]:Le.concat(I(we))});return ae.length===0?[lt.fromTag("br")]:ae})();bc(l[0]),yo(l[0],Q)},XS=l=>P1(l,!0),Y1=l=>{Eu(l).length===0&&Ps(l)},nl=(l,f)=>({grid:l,cursor:f}),x2=l=>Oo(l,f=>Oo(f.cells,v=>{const C=v.element;return Lg(XS(C),C)})),JS=(l,f,v)=>{var C,O;const I=sa(l).rows;return ve.from((O=(C=I[f])===null||C===void 0?void 0:C.cells[v])===null||O===void 0?void 0:O.element).filter(XS).orThunk(()=>x2(I))},Tc=(l,f,v)=>{const C=JS(l,f,v);return nl(l,C)},ng=l=>$e(l,(v,C)=>ft(v,I=>I.row===C.row)?v:v.concat([C]),[]).sort((v,C)=>v.row-C.row),f4=(l,f,v,C)=>{const O=f[0].row,I=ng(f),U=io(I,(Q,ae)=>({grid:sh(Q.grid,O,ae.row+Q.delta,v,C.getOrInit),delta:Q.delta+1}),{grid:l,delta:0}).grid;return Tc(U,O,f[0].column)},QS=(l,f,v,C)=>{const O=ng(f),I=O[O.length-1],U=I.row+I.rowspan,Q=io(O,(ae,we)=>sh(ae,U,we.row,v,C.getOrInit),l);return Tc(Q,U,f[0].column)},m4=(l,f,v,C)=>{const O=f.details,I=ff(O),U=I[0].column,Q=io(I,(ae,we)=>({grid:b2(ae.grid,U,we.column+ae.delta,v,C.getOrInit),delta:ae.delta+1}),{grid:l,delta:0}).grid;return Tc(Q,O[0].row,U)},ex=(l,f,v,C)=>{const O=f.details,I=O[O.length-1],U=I.column+I.colspan,Q=ff(O),ae=io(Q,(we,Le)=>b2(we,U,Le.column,v,C.getOrInit),l);return Tc(ae,O[0].row,U)},h4=(l,f,v,C)=>{const O=ff(f),I=yn(O,Q=>Q.column),U=w2(l,I,!0,v,C.replaceOrInit);return Tc(U,f[0].row,f[0].column)},tx=(l,f,v,C)=>{const O=j0(l,f,v,C.replaceOrInit);return Tc(O,f[0].row,f[0].column)},g4=(l,f,v,C)=>{const O=ff(f),I=yn(O,Q=>Q.column),U=w2(l,I,!1,v,C.replaceOrInit);return Tc(U,f[0].row,f[0].column)},p4=(l,f,v,C)=>{const O=j0(l,f,v,C.replaceOrInit);return Tc(O,f[0].row,f[0].column)},nv=(l,f)=>(v,C,O,I,U)=>{const Q=ng(C),ae=yn(Q,Le=>Le.row),we=ZS(v,ae,l,f,O,I.replaceOrInit,U);return Tc(we,C[0].row,C[0].column)},ov=nv("thead",!0),b4=nv("tbody",!1),nx=nv("tfoot",!1),v4=(l,f,v,C)=>{const O=ff(f.details),I=tM(l,yn(O,Q=>Q.column)),U=I.length>0?I[0].cells.length-1:0;return Tc(I,O[0].row,Math.min(O[0].column,U))},or=(l,f,v,C)=>{const O=ng(f),I=US(l,O[0].row,O[O.length-1].row),U=Math.max(sa(I).rows.length-1,0);return Tc(I,Math.min(f[0].row,U),f[0].column)},E2=(l,f,v,C)=>{const O=f.cells;tg(O);const I=V0(l,f.bounds,v,C.merge(O));return nl(I,ve.from(O[0]))},ox=(l,f,v,C)=>{const I=io(f,(U,Q)=>rm(U,Q,v,C.unmerge(Q)),l);return nl(I,ve.from(f[0]))},sx=(l,f,v,C)=>{const I=((ae,we)=>{const Le=po.fromTable(ae);return mp(Le,we,!0)})(f.clipboard,f.generators),U=Yi(f.row,f.column);return tc(U,l,I,f.generators,v).fold(()=>nl(l,ve.some(f.element)),ae=>Tc(ae,f.row,f.column))},bp=(l,f,v)=>{const C=Vf(l,v.section),O=po.generate(C);return mp(O,f,!0)},Mi=(l,f,v,C)=>{const O=sa(l).rows,I=f.cells[0].column,U=O[f.cells[0].row],Q=bp(f.clipboard,f.generators,U),ae=oh(I,l,Q,f.generators,v);return Tc(ae,f.cells[0].row,f.cells[0].column)},El=(l,f,v,C)=>{const O=sa(l).rows,I=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,U=O[f.cells[0].row],Q=bp(f.clipboard,f.generators,U),ae=oh(I,l,Q,f.generators,v);return Tc(ae,f.cells[0].row,I)},rx=(l,f,v,C)=>{const O=sa(l).rows,I=f.cells[0].row,U=O[I],Q=bp(f.clipboard,f.generators,U),ae=pp(I,l,Q,f.generators,v);return Tc(ae,f.cells[0].row,f.cells[0].column)},_2=(l,f,v,C)=>{const O=sa(l).rows,I=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,U=O[f.cells[0].row],Q=bp(f.clipboard,f.generators,U),ae=pp(I,l,Q,f.generators,v);return Tc(ae,I,f.cells[0].column)},T2=(l,f)=>{const v=po.fromTable(l);return Ri(v,f).bind(O=>{const I=O[O.length-1],U=O[0].column,Q=I.column+I.colspan,ae=no(yn(v.all,we=>fn(we.cells,Le=>Le.column>=U&&Le.column<Q)));return B0(ae)}).getOr("")},y4=(l,f)=>{const v=po.fromTable(l);return Ri(v,f).bind(B0).getOr("")},sv=(l,f)=>{const v=po.fromTable(l);return Ri(v,f).bind(O=>{const I=O[O.length-1],U=O[0].row,Q=I.row+I.rowspan,ae=v.all.slice(U,Q);return L0(ae)}).getOr("")},rv=(l,f,v,C)=>l4(l,f,v,C.sizing),X1=(l,f,v,C)=>qS(l,f,v,C.sizing,C.resize),w4=(l,f)=>ft(f,v=>v.column===0&&v.isLocked),da=(l,f)=>ft(f,v=>v.column+v.colspan>=l.grid.columns&&v.isLocked),C4=(l,f)=>{const v=vd(l),C=ff(f);return $e(C,(O,I)=>{const Q=v[I.column].map(Xo).getOr(0);return O+Q},0)},au=l=>(f,v)=>Ri(f,v).filter(C=>!(l?w4:da)(f,C)).map(C=>({details:C,pixelDelta:C4(f,C)})),ir=(l,f)=>Bu(l,f).map(v=>({details:v,pixelDelta:-C4(l,v)})),Rd=l=>(f,v)=>$S(f,v).filter(C=>!(l?w4:da)(f,C.cells)),og=_c.transform("th"),av=_c.transform("td"),ax=Ui(f4,Ri,Ne,Ne,_c.modification),ix=Ui(QS,Ri,Ne,Ne,_c.modification),ch=Ui(m4,au(!0),X1,Ne,_c.modification),Ni=Ui(ex,au(!1),X1,Ne,_c.modification),mf=Ui(v4,ir,X1,Y1,_c.modification),cx=Ui(or,Ri,Ne,Y1,_c.modification),S4=Ui(h4,Bu,Ne,Ne,og),x4=Ui(g4,Bu,Ne,Ne,av),iv=Ui(ov,Ri,Ne,Ne,og),k2=Ui(b4,Ri,Ne,Ne,av),A2=Ui(nx,Ri,Ne,Ne,av),O2=Ui(tx,Bu,Ne,Ne,og),lx=Ui(p4,Bu,Ne,Ne,av),ux=Ui(E2,t4,rv,Ne,_c.merging),dx=Ui(ox,q1,rv,Ne,_c.merging),fx=Ui(sx,Qk,rv,Ne,_c.modification),E4=Ui(Mi,Rd(!0),Ne,Ne,_c.modification),Pi=Ui(El,Rd(!1),Ne,Ne,_c.modification),mx=Ui(rx,$S,Ne,Ne,_c.modification),um=Ui(_2,$S,Ne,Ne,_c.modification),D2=T2,hx=y4,R2=sv,cv=(l,f)=>l.dispatch("NewRow",{node:f}),J1=(l,f)=>l.dispatch("NewCell",{node:f}),lh=(l,f,v)=>{l.dispatch("TableModified",{...v,table:f})},_4=(l,f,v,C,O)=>{l.dispatch("TableSelectionChange",{cells:f,start:v,finish:C,otherCells:O})},M2=l=>{l.dispatch("TableSelectionClear")},Ca=(l,f,v,C,O)=>{l.dispatch("ObjectResizeStart",{target:f,width:v,height:C,origin:O})},Sa=(l,f,v,C,O)=>{l.dispatch("ObjectResized",{target:f,width:v,height:C,origin:O})},Ra={structure:!1,style:!0},ps={structure:!0,style:!1},qa={structure:!0,style:!0},fa=(l,f)=>tp(l)?R.percentageSize(f):ou(l)?R.pixelSize(f):R.getTableSize(f),Q1=(l,f,v)=>{const C=kr=>Qo(nm(kr))==="table",O=kr=>!C(l)||cf(kr).rows>1,I=kr=>!C(l)||cf(kr).columns>1,U=ep(l),Q=Sd(l)?Ne:cp,ae=kr=>{switch(wS(l)){case"section":return j1.section();case"sectionCells":return j1.sectionCells();case"cells":return j1.cells();default:return j1.getTableSectionType(kr,"section")}},we=(kr,wm)=>wm.cursor.fold(()=>{const Vp=Eu(kr);return xe(Vp).filter(Vn).map(Al=>{v.clearSelectedCells(kr.dom);const Jn=l.dom.createRng();return Jn.selectNode(Al.dom),l.selection.setRng(Jn),Zs(Al,"data-mce-selected","1"),Jn})},Vp=>{const Al=ec(Vp),Jn=l.dom.createRng();return Jn.setStart(Al.element.dom,Al.offset),Jn.setEnd(Al.element.dom,Al.offset),l.selection.setRng(Jn),v.clearSelectedCells(kr.dom),ve.some(Jn)}),Le=(kr,wm,Vp,Al)=>(Jn,SE,qv=!1)=>{Lc(Jn);const vg=lt.fromDom(l.getDoc()),xE=wd(Vp,vg,U),yg={sizing:fa(l,Jn),resize:Sd(l)?Kh():om(),section:ae(Jn)};return wm(Jn)?kr(Jn,SE,xE,yg).bind(Cm=>{f.refresh(Jn.dom),Ae(Cm.newRows,Db=>{cv(l,Db.dom)}),Ae(Cm.newCells,Db=>{J1(l,Db.dom)});const EE=we(Jn,Cm);return Vn(Jn)&&(Lc(Jn),qv||lh(l,Jn.dom,Al)),EE.map(Db=>({rng:Db,effect:Al}))}):ve.none()},St=Le(cx,O,Ne,ps),jt=Le(mf,I,Ne,ps),zt=Le(ax,Fe,Ne,ps),Nt=Le(ix,Fe,Ne,ps),mn=Le(ch,Fe,Q,ps),yt=Le(Ni,Fe,Q,ps),Rn=Le(ux,Fe,Ne,ps),ro=Le(dx,Fe,Ne,ps),mt=Le(E4,Fe,Ne,ps),rs=Le(Pi,Fe,Ne,ps),Io=Le(mx,Fe,Ne,ps),Bo=Le(um,Fe,Ne,ps),$r=Le(fx,Fe,Ne,qa),hr=Le(O2,Fe,Ne,ps),Uu=Le(lx,Fe,Ne,ps),Wu=Le(S4,Fe,Ne,ps),Zu=Le(x4,Fe,Ne,ps),ss=Le(iv,Fe,Ne,ps),Ht=Le(k2,Fe,Ne,ps),Ma=Le(A2,Fe,Ne,ps);return{deleteRow:St,deleteColumn:jt,insertRowsBefore:zt,insertRowsAfter:Nt,insertColumnsBefore:mn,insertColumnsAfter:yt,mergeCells:Rn,unmergeCells:ro,pasteColsBefore:mt,pasteColsAfter:rs,pasteRowsBefore:Io,pasteRowsAfter:Bo,pasteCells:$r,makeCellsHeader:hr,unmakeCellsHeader:Uu,makeColumnsHeader:Wu,unmakeColumnsHeader:Zu,makeRowsHeader:ss,makeRowsBody:Ht,makeRowsFooter:Ma,getTableRowType:R2,getTableCellType:hx,getTableColType:D2}},lv=(l,f,v)=>{const C=$a(l,f,1);v===1||C<=1?fe(l,f):Zs(l,f,Math.min(v,C))},N2=(l,f)=>v=>{const C=v.column+v.colspan-1,O=v.column;return C>=l&&O<f},gx=(l,f,v)=>{if(po.hasColumns(l)){const C=fn(po.justColumns(l),N2(f,v)),O=yn(C,U=>{const Q=Nr(U.element);return lv(Q,"span",v-f),Q}),I=lt.fromTag("colgroup");return yo(I,O),[I]}else return[]},P2=(l,f,v)=>yn(l.all,C=>{const O=fn(C.cells,N2(f,v)),I=yn(O,Q=>{const ae=Nr(Q.element);return lv(ae,"colspan",v-f),ae}),U=lt.fromTag("tr");return yo(U,I),U}),rn=(l,f)=>{const v=po.fromTable(l);return Bu(v,f).map(O=>{const I=O[O.length-1],U=O[0].column,Q=I.column+I.colspan,ae=gx(v,U,Q),we=P2(v,U,Q);return[...ae,...we]})},vp=(l,f,v)=>{const C=po.fromTable(l);return Ri(C,f).bind(I=>{const U=mp(C,v,!1),ae=sa(U).rows.slice(I[0].row,I[I.length-1].row+I[I.length-1].rowspan),we=_o(ae,St=>{const jt=fn(St.cells,zt=>!zt.isLocked);return jt.length>0?[{...St,cells:jt}]:[]}),Le=z0(we);return Lg(Le.length>0,Le)}).map(I=>PS(I))},uh=Lu.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),px=(l,f,v)=>{const C=v.substring(0,v.length-l.length),O=parseFloat(C);return C===O.toString()?f(O):uh.invalid(v)},sg={...uh,from:l=>Ci(l,"%")?px("%",uh.percent,l):Ci(l,"px")?px("px",uh.pixels,l):uh.invalid(l)},bx=(l,f)=>yn(l,v=>sg.from(v).fold(()=>v,O=>O/f*100+"%",O=>O+"%")),ol=(l,f,v)=>{const C=v/f;return yn(l,O=>sg.from(O).fold(()=>O,U=>U*C+"px",U=>U/100*v+"px"))},oM=(l,f)=>{const v=l.fold(()=>ce(""),C=>{const O=C/f;return ce(O+"px")},()=>{const C=100/f;return ce(C+"%")});return xo(f,v)},vx=(l,f,v)=>l.fold(()=>f,C=>ol(f,v,C),C=>bx(f,v)),$c=(l,f,v)=>{const C=sg.from(v),O=zo(l,I=>I==="0px")?oM(C,l.length):vx(C,l,f);return nc(O)},Ga=(l,f)=>l.length===0?f:io(l,(v,C)=>sg.from(C).fold(ce(0),Je,Je)+v,0),hf=(l,f)=>{const v=Math.floor(l);return{value:v+f,remainder:l-v}},dm=(l,f)=>sg.from(l).fold(ce(l),v=>v+f+"px",v=>v+f+"%"),nc=l=>{if(l.length===0)return l;const f=io(l,(C,O)=>{const I=sg.from(O).fold(()=>({value:O,remainder:0}),U=>hf(U,"px"),U=>({value:U+"%",remainder:0}));return{output:[I.value].concat(C.output),remainder:C.remainder+I.remainder}},{output:[],remainder:0}),v=f.output;return v.slice(0,v.length-1).concat([dm(v[v.length-1],Math.round(f.remainder))])},I2=sg.from,B2=(l,f,v)=>{Ae(f,C=>{const O=l.slice(C.column,C.colspan+C.column),I=Ga(O,Kd());Is(C.element,"width",I+v)})},yx=(l,f,v)=>{Ae(f,(C,O)=>{const I=Ga([l[O]],Kd());Is(C.element,"width",I+v)})},L2=(l,f,v)=>{Ae(v,C=>{Si(C.element,"height")}),Ae(f,(C,O)=>{Is(C.element,"height",l[O])})},uv=l=>I2(l).fold(ce("px"),ce("px"),ce("%")),F2=(l,f,v)=>{const C=po.fromTable(l),O=C.all,I=po.justCells(C),U=po.justColumns(C);f.each(Q=>{const ae=uv(Q),we=_i(l),Le=Yg(C,l),St=$c(Le,we,Q);po.hasColumns(C)?yx(St,U,ae):B2(St,I,ae),Is(l,"width",Q)}),v.each(Q=>{const ae=gt(l),we=R1(C,l),Le=$c(we,ae,Q);L2(Le,O,I),Is(l,"height",Q)})},dv=ya,wx=Sl,Cx=O1,eb=l=>{fe(l,"width"),fe(l,"height")},tb=l=>{const f=ia(l);F2(l,ve.some(f),ve.none()),eb(l)},$2=l=>{const f=Uo(l);F2(l,ve.some(f),ve.none()),eb(l)},H2=l=>{const f=Kg(l);F2(l,ve.none(),ve.some(f)),eb(l)},fv=l=>{Si(l,"width");const f=Xi(l),v=f.length>0?f:Eu(l);Ae(v,C=>{Si(C,"width"),eb(C)}),eb(l)},z2={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},T4=()=>lt.fromTag("th"),nb=()=>lt.fromTag("td"),k4=()=>lt.fromTag("col"),A4=(l,f,v,C)=>{const O=lt.fromTag("tr");for(let I=0;I<l;I++){const U=C<f||I<v?T4():nb();I<v&&Zs(U,"scope","row"),C<f&&Zs(U,"scope","col"),ys(U,lt.fromTag("br")),ys(O,U)}return O},O4=l=>{const f=lt.fromTag("colgroup");return xo(l,()=>ys(f,k4())),f},V2=(l,f,v,C)=>xo(l,O=>A4(f,v,C,O)),D4=(l,f,v,C,O,I=z2)=>{const U=lt.fromTag("table"),Q=O!=="cells";na(U,I.styles),Ea(U,I.attributes),I.colGroups&&ys(U,O4(f));const ae=Math.min(l,v);if(Q&&v>0){const zt=lt.fromTag("thead");ys(U,zt);const mn=V2(v,f,O==="sectionCells"?ae:0,C);yo(zt,mn)}const we=lt.fromTag("tbody");ys(U,we);const Le=Q?l-ae:l,jt=V2(Le,f,Q?0:v,C);return yo(we,jt),U},Sx=l=>l.dom.innerHTML,oc=l=>{const f=lt.fromTag("div"),v=lt.fromDom(l.dom.cloneNode(!0));return ys(f,v),Sx(f)},U2=(l,f)=>{l.selection.select(f.dom,!0),l.selection.collapse(!0)},xx=(l,f)=>{yi(f,"td,th").each(Gt(U2,l))},W2=(l,f)=>{Ae($o(f,"tr"),v=>{cv(l,v.dom),Ae($o(v,"th,td"),C=>{J1(l,C.dom)})})},mv=l=>K(l)&&l.indexOf("%")!==-1,yp=(l,f,v,C,O)=>{const I=x0(l),U={styles:I,attributes:ja(l),colGroups:E0(l)};return l.undoManager.ignore(()=>{const Q=D4(v,f,O,C,wS(l),U);Zs(Q,"data-mce-id","__mce");const ae=oc(Q);l.insertContent(ae),l.addVisual()}),yi(nm(l),'table[data-mce-id="__mce"]').map(Q=>(ou(l)?$2(Q):Di(l)?fv(Q):(tp(l)||mv(I.width))&&tb(Q),Lc(Q),fe(Q,"data-mce-id"),W2(l,Q),xx(l,Q),Q.dom)).getOrNull()},R4=(l,f,v,C={})=>{const O=I=>Ct(I)&&I>0;if(O(f)&&O(v)){const I=C.headerRows||0,U=C.headerColumns||0;return yp(l,v,f,U,I)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var wp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ex="x-tinymce/dom-table-",rg=Ex+"rows",Z2=Ex+"columns",_x=l=>{const f=wp.FakeClipboardItem(l);wp.write([f])},j2=l=>{var f;const v=(f=wp.read())!==null&&f!==void 0?f:[];return Oo(v,C=>ve.from(C.getType(l)))},Tx=l=>{j2(l).isSome()&&wp.clear()},kx=l=>{l.fold(M4,f=>_x({[rg]:f}))},hv=()=>j2(rg),M4=()=>Tx(rg),Ax=l=>{l.fold(Dx,f=>_x({[Z2]:f}))},Ox=()=>j2(Z2),Dx=()=>Tx(Z2),gv=l=>Gk(xd(l),Qi(l)).filter(Jm),Cp=l=>Lr(xd(l),Qi(l)).filter(Jm),q2=(l,f)=>{const v=Qi(l),C=()=>gv(l).each(yt=>{Ha(yt,v).filter(oe(v)).each(Rn=>{const ro=lt.fromText("");if(bi(Rn,ro),Ps(Rn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const mt=l.dom.createRng();mt.setStart(ro.dom,0),mt.setEnd(ro.dom,0),l.selection.setRng(mt),l.nodeChanged()}})}),O=yt=>gv(l).each(Rn=>{Di(l)||ou(l)||tp(l)||Ha(Rn,v).each(mt=>{yt==="relative"&&!dv(mt)?tb(mt):yt==="fixed"&&!wx(mt)?$2(mt):yt==="responsive"&&!Cx(mt)&&fv(mt),Lc(mt),lh(l,mt.dom,ps)})}),I=yt=>Ha(yt,v),U=yt=>Cp(l).bind(Rn=>I(Rn).map(ro=>yt(ro,Rn))),Q=(yt,Rn)=>{U(ro=>{l.formatter.toggle("tableclass",{value:Rn},ro.dom),lh(l,ro.dom,Ra)})},ae=(yt,Rn)=>{U(ro=>{const mt=Td(l),Io=zo(mt,Bo=>l.formatter.match("tablecellclass",{value:Rn},Bo.dom))?l.formatter.remove:l.formatter.apply;Ae(mt,Bo=>Io("tablecellclass",{value:Rn},Bo.dom)),lh(l,ro.dom,Ra)})},we=()=>{gv(l).each(yt=>{Ha(yt,v).each(Rn=>{uo(Rn,"caption").fold(()=>{const ro=lt.fromTag("caption");ys(ro,lt.fromText("Caption")),Gd(Rn,ro,0),l.selection.setCursorLocation(ro.dom,0)},ro=>{vs("caption")(yt)&&pa("td",Rn).each(mt=>l.selection.setCursorLocation(mt.dom,0)),Ps(ro)}),lh(l,Rn.dom,ps)})})},Le=yt=>{l.focus()},St=(yt,Rn=!1)=>U((ro,mt)=>{const rs=P0(Td(l),ro,mt);yt(ro,rs,Rn).each(Le)}),jt=()=>U((yt,Rn)=>{const ro=P0(Td(l),yt,Rn),mt=wd(Ne,lt.fromDom(l.getDoc()),ve.none());return vp(yt,ro,mt)}),zt=()=>U((yt,Rn)=>{const ro=P0(Td(l),yt,Rn);return rn(yt,ro)}),Nt=(yt,Rn)=>Rn().each(ro=>{const mt=yn(ro,rs=>Nr(rs));U((rs,Io)=>{const Bo=Bc(lt.fromDom(l.getDoc())),$r=ap(Td(l),Io,mt,Bo);yt(rs,$r).each(Le)})}),mn=yt=>(Rn,ro)=>Gr(ro,"type").each(mt=>{St(yt(mt),ro.no_events)});Fo({mceTableSplitCells:()=>St(f.unmergeCells),mceTableMergeCells:()=>St(f.mergeCells),mceTableInsertRowBefore:()=>St(f.insertRowsBefore),mceTableInsertRowAfter:()=>St(f.insertRowsAfter),mceTableInsertColBefore:()=>St(f.insertColumnsBefore),mceTableInsertColAfter:()=>St(f.insertColumnsAfter),mceTableDeleteCol:()=>St(f.deleteColumn),mceTableDeleteRow:()=>St(f.deleteRow),mceTableCutCol:()=>zt().each(yt=>{Ax(yt),St(f.deleteColumn)}),mceTableCutRow:()=>jt().each(yt=>{kx(yt),St(f.deleteRow)}),mceTableCopyCol:()=>zt().each(yt=>Ax(yt)),mceTableCopyRow:()=>jt().each(yt=>kx(yt)),mceTablePasteColBefore:()=>Nt(f.pasteColsBefore,Ox),mceTablePasteColAfter:()=>Nt(f.pasteColsAfter,Ox),mceTablePasteRowBefore:()=>Nt(f.pasteRowsBefore,hv),mceTablePasteRowAfter:()=>Nt(f.pasteRowsAfter,hv),mceTableDelete:C,mceTableCellToggleClass:ae,mceTableToggleClass:Q,mceTableToggleCaption:we,mceTableSizingMode:(yt,Rn)=>O(Rn),mceTableCellType:mn(yt=>yt==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:mn(yt=>yt==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:mn(yt=>{switch(yt){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(yt,Rn)=>l.addCommand(Rn,yt)),l.addCommand("mceInsertTable",(yt,Rn)=>{R4(l,Rn.rows,Rn.columns,Rn.options)}),l.addCommand("mceTableApplyCellStyle",(yt,Rn)=>{const ro=Io=>"tablecell"+Io.toLowerCase().replace("-","");if(!j(Rn))return;const mt=fn(Td(l),Jm);if(mt.length===0)return;const rs=_s(Rn,(Io,Bo)=>l.formatter.has(ro(Bo))&&K(Io));Mc(rs)||(Fo(rs,(Io,Bo)=>{const $r=ro(Bo);Ae(mt,hr=>{Io===""?l.formatter.remove($r,{value:null},hr.dom,!0):l.formatter.apply($r,{value:Io},hr.dom)})}),I(mt[0]).each(Io=>lh(l,Io.dom,Ra)))})},N4=(l,f)=>{const v=Qi(l),C=O=>Lr(xd(l)).bind(I=>Ha(I,v).map(U=>{const Q=P0(Td(l),U,I);return O(U,Q)})).getOr("");Fo({mceTableRowType:()=>C(f.getTableRowType),mceTableCellType:()=>C(f.getTableCellType),mceTableColType:()=>C(f.getTableColType)},(O,I)=>l.addQueryValueHandler(I,O))},pv=Lu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bv=(l,f,v,C)=>l.fold(f,v,C),Hu=l=>l.fold(Je,Je,Je),vv=pv.before,yv=pv.on,G2=pv.after,sc={before:vv,on:yv,after:G2,cata:bv,getStart:Hu},dh={create:(l,f)=>({selection:l,kill:f})},P4=(l,f)=>{const v=l.document.createRange();return v.selectNode(f.dom),v},fh=(l,f)=>{const v=l.document.createRange();return wv(v,f),v},wv=(l,f)=>l.selectNodeContents(f.dom),I4=(l,f)=>{f.fold(v=>{l.setStartBefore(v.dom)},(v,C)=>{l.setStart(v.dom,C)},v=>{l.setStartAfter(v.dom)})},B4=(l,f)=>{f.fold(v=>{l.setEndBefore(v.dom)},(v,C)=>{l.setEnd(v.dom,C)},v=>{l.setEndAfter(v.dom)})},Rx=(l,f,v)=>{const C=l.document.createRange();return I4(C,f),B4(C,v),C},Sp=(l,f,v,C,O)=>{const I=l.document.createRange();return I.setStart(f.dom,v),I.setEnd(C.dom,O),I},Mx=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),L4=l=>{const f=l.getClientRects(),v=f.length>0?f[0]:l.getBoundingClientRect();return v.width>0||v.height>0?ve.some(v).map(Mx):ve.none()},ob=Lu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),K2=(l,f,v)=>f(lt.fromDom(v.startContainer),v.startOffset,lt.fromDom(v.endContainer),v.endOffset),F4=(l,f)=>f.match({domRange:v=>({ltr:ce(v),rtl:ve.none}),relative:(v,C)=>({ltr:md(()=>Rx(l,v,C)),rtl:md(()=>ve.some(Rx(l,C,v)))}),exact:(v,C,O,I)=>({ltr:md(()=>Sp(l,v,C,O,I)),rtl:md(()=>ve.some(Sp(l,O,I,v,C)))})}),Nx=(l,f)=>{const v=f.ltr();return v.collapsed?f.rtl().filter(O=>O.collapsed===!1).map(O=>ob.rtl(lt.fromDom(O.endContainer),O.endOffset,lt.fromDom(O.startContainer),O.startOffset)).getOrThunk(()=>K2(l,ob.ltr,v)):K2(l,ob.ltr,v)},Px=(l,f)=>{const v=F4(l,f);return Nx(l,v)},Y2=(l,f)=>Px(l,f).match({ltr:(C,O,I,U)=>{const Q=l.document.createRange();return Q.setStart(C.dom,O),Q.setEnd(I.dom,U),Q},rtl:(C,O,I,U)=>{const Q=l.document.createRange();return Q.setStart(I.dom,U),Q.setEnd(C.dom,O),Q}});ob.ltr,ob.rtl;const xp={create:(l,f,v,C)=>({start:l,soffset:f,finish:v,foffset:C})},X2={create:(l,f,v,C)=>({start:sc.on(l,f),finish:sc.on(v,C)})},J2=(l,f)=>{const v=Y2(l,f);return xp.create(lt.fromDom(v.startContainer),v.startOffset,lt.fromDom(v.endContainer),v.endOffset)},Cv=X2.create,$4=(l,f,v,C,O,I,U)=>es(v,O)&&C===I?ve.none():Yr(v,"td,th",f).bind(Q=>Yr(O,"td,th",f).bind(ae=>Bx(l,f,Q,ae,U))),Bx=(l,f,v,C,O)=>es(v,C)?ve.none():R0(v,C,f).bind(I=>{const U=I.boxes.getOr([]);return U.length>1?(O(l,U,I.start,I.finish),ve.some(dh.create(ve.some(Cv(v,0,v,Ai(v))),!0))):ve.none()}),rM=(l,f,v,C,O)=>{const I=U=>(O.clearBeforeUpdate(v),O.selectRange(v,U.boxes,U.start,U.finish),U.boxes);return Zk(C,l,f,O.firstSelectedSelector,O.lastSelectedSelector).map(I)},ag=(l,f)=>({item:l,mode:f}),Sv=(l,f,v,C=Ep)=>l.property().parent(f).map(O=>ag(O,C)),Ep=(l,f,v,C=sb)=>v.sibling(l,f).map(O=>ag(O,C)),sb=(l,f,v,C=sb)=>{const O=l.property().children(f);return v.first(O).map(U=>ag(U,C))},H4=[{current:Sv,next:Ep,fallback:ve.none()},{current:Ep,next:sb,fallback:ve.some(Sv)},{current:sb,next:sb,fallback:ve.some(Ep)}],Lx=(l,f,v,C,O=H4)=>W(O,U=>U.current===v).bind(U=>U.current(l,f,C,U.next).orThunk(()=>U.fallback.bind(Q=>Lx(l,f,Q,C)))),rb={left:()=>({sibling:(v,C)=>v.query().prevSibling(C),first:v=>v.length>0?ve.some(v[v.length-1]):ve.none()}),right:()=>({sibling:(v,C)=>v.query().nextSibling(C),first:v=>v.length>0?ve.some(v[0]):ve.none()})},Q2=(l,f,v,C,O,I)=>Lx(l,f,C,O).bind(Q=>I(Q.item)?ve.none():v(Q.item)?ve.some(Q.item):Q2(l,Q.item,v,Q.mode,O,I)),Fx=(l,f,v,C)=>Q2(l,f,v,Ep,rb.left(),C),ew=(l,f,v,C)=>Q2(l,f,v,Ep,rb.right(),C),$x=l=>f=>l.property().children(f).length===0,V4=(l,f,v)=>ab(l,f,$x(l),v),U4=(l,f,v)=>_p(l,f,$x(l),v),ab=Fx,_p=ew,ib=$1(),tw=(l,f)=>V4(ib,l,f),xv=(l,f)=>U4(ib,l,f),nw=(l,f,v)=>ab(ib,l,f,v),ow=(l,f,v)=>_p(ib,l,f,v),W4=(l,f,v)=>ut(l,f,v).isSome(),Ev=Lu.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),cb=(l,f,v)=>{const C=l.getRect(f),O=l.getRect(v);return O.right>C.left&&O.left<C.right},Hx=l=>Yr(l,"tr"),kp={...Ev,verify:(l,f,v,C,O,I,U)=>Yr(C,"td,th",U).bind(Q=>Yr(f,"td,th",U).map(ae=>es(Q,ae)?es(C,Q)&&Ai(Q)===O?I(ae):Ev.none("in same cell"):D0(Hx,[Q,ae]).fold(()=>cb(l,ae,Q)?Ev.success():I(ae),we=>I(ae)))).getOr(Ev.none("default")),cata:(l,f,v,C,O)=>l.fold(f,v,C,O)},zx=(l,f,v,C)=>({parent:l,children:f,element:v,index:C}),Vx=l=>Wr(l).bind(f=>{const v=ls(f);return kc(v,l).map(C=>zx(f,v,l,C))}),kc=(l,f)=>Us(l,Gt(es,f)),_v=vs("br"),sw=(l,f,v)=>f(l,v).bind(C=>ri(C)&&Hs(C).trim().length===0?sw(C,f,v):ve.some(C)),Z4=(l,f,v)=>v.traverse(f).orThunk(()=>sw(f,v.gather,l)).map(v.relative),rw=(l,f)=>lr(l,f).filter(_v).orThunk(()=>lr(l,f-1).filter(_v)),lb=(l,f,v,C)=>rw(f,v).bind(O=>C.traverse(O).fold(()=>sw(O,C.gather,l).map(C.relative),I=>Vx(I).map(U=>sc.on(U.parent,U.index)))),ub=(l,f,v,C)=>(_v(f)?Z4(l,f,C):lb(l,f,v,C)).map(I=>({start:I,finish:I})),Ux=l=>kp.cata(l,f=>ve.none(),()=>ve.none(),f=>ve.some(I0(f,0)),f=>ve.some(I0(f,Ai(f)))),Ap=(l,f)=>({left:l.left,top:l.top+f,right:l.right,bottom:l.bottom+f}),aw=(l,f)=>({left:l.left,top:l.top-f,right:l.right,bottom:l.bottom-f}),iw=(l,f,v)=>({left:l.left+f,top:l.top+v,right:l.right+f,bottom:l.bottom+v}),Wx=l=>l.top,db=l=>l.bottom,j4=(l,f,v)=>v>=0&&v<Ai(f)?l.getRangedRect(f,v,f,v+1):v>0?l.getRangedRect(f,v-1,f,v):ve.none(),fb=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Tv=(l,f)=>ve.some(l.getRect(f)),mh=(l,f,v)=>sr(f)?Tv(l,f).map(fb):ri(f)?j4(l,f,v).map(fb):ve.none(),hh=(l,f)=>sr(f)?Tv(l,f).map(fb):ri(f)?l.getRangedRect(f,0,f,Ai(f)).map(fb):ve.none(),gf=5,gh=100,Md=Lu.generate([{none:[]},{retry:["caret"]}]),mm=(l,f)=>l.left<f.left||Math.abs(f.right-l.left)<1||l.left>f.right,zu=(l,f,v)=>ci(f,S2).fold(en,C=>hh(l,C).exists(O=>mm(v,O))),kv=(l,f,v,C,O)=>{const I=Ap(O,gf);return Math.abs(v.bottom-C.bottom)<1||v.top>O.bottom?Md.retry(I):v.top===O.bottom?Md.retry(Ap(O,1)):zu(l,f,O)?Md.retry(iw(I,gf,0)):Md.none()},jx={point:Wx,adjuster:(l,f,v,C,O)=>{const I=aw(O,gf);return Math.abs(v.top-C.top)<1||v.bottom<O.top?Md.retry(I):v.bottom===O.top?Md.retry(aw(O,1)):zu(l,f,O)?Md.retry(iw(I,gf,0)):Md.none()},move:aw,gather:tw},cw={point:db,adjuster:kv,move:Ap,gather:xv},Op=(l,f,v)=>l.elementFromPoint(f,v).filter(C=>Qo(C)==="table").isSome(),Dp=(l,f,v,C,O)=>Rp(l,f,v,f.move(C,gf),O),Rp=(l,f,v,C,O)=>O===0?ve.some(C):Op(l,C.left,f.point(C))?Dp(l,f,v,C,O-1):l.situsFromPoint(C.left,f.point(C)).bind(I=>I.start.fold(ve.none,U=>hh(l,U).bind(Q=>f.adjuster(l,U,Q,v,C).fold(ve.none,ae=>Rp(l,f,v,ae,O-1))).orThunk(()=>ve.some(C)),ve.none)),qx=(l,f,v)=>l.point(f)>v.getInnerHeight()?ve.some(l.point(f)-v.getInnerHeight()):l.point(f)<0?ve.some(-l.point(f)):ve.none(),Mp=(l,f,v)=>{const C=l.move(v,gf),O=Rp(f,l,v,C,gh).getOr(C);return qx(l,O,f).fold(()=>f.situsFromPoint(O.left,l.point(O)),I=>(f.scrollBy(0,I),f.situsFromPoint(O.left,l.point(O)-I)))},Np={tryUp:Gt(Mp,jx),tryDown:Gt(Mp,cw),getJumpSize:ce(gf)},q4=20,lw=(l,f,v)=>l.getSelection().bind(C=>ub(f,C.finish,C.foffset,v).fold(()=>ve.some(I0(C.finish,C.foffset)),O=>{const I=l.fromSitus(O),U=kp.verify(l,C.finish,C.foffset,I.finish,I.foffset,v.failure,f);return Ux(U)})),Pp=(l,f,v,C,O,I)=>I===0?ve.none():pf(l,f,v,C,O).bind(U=>{const Q=l.fromSitus(U),ae=kp.verify(l,v,C,Q.finish,Q.foffset,O.failure,f);return kp.cata(ae,()=>ve.none(),()=>ve.some(U),we=>es(v,we)&&C===0?Ka(l,v,C,aw,O):Pp(l,f,we,0,O,I-1),we=>es(v,we)&&C===Ai(we)?Ka(l,v,C,Ap,O):Pp(l,f,we,Ai(we),O,I-1))}),Ka=(l,f,v,C,O)=>mh(l,f,v).bind(I=>Gx(l,O,C(I,Np.getJumpSize()))),Gx=(l,f,v)=>{const C=vl().browser;return C.isChromium()||C.isSafari()||C.isFirefox()?f.retry(l,v):ve.none()},pf=(l,f,v,C,O)=>mh(l,v,C).bind(I=>Gx(l,O,I)),Kx=(l,f,v)=>lw(l,f,v).bind(C=>Pp(l,f,C.element,C.offset,v,q4).map(l.fromSitus)),Av=(l,f)=>W4(l,v=>Wr(v).exists(C=>es(C,f))),Ip=(l,f,v,C,O)=>Yr(C,"td,th",f).bind(I=>Yr(I,"table",f).bind(U=>Av(O,U)?Kx(l,f,v).bind(Q=>Yr(Q.finish,"td,th",f).map(ae=>({start:I,finish:ae,range:Q}))):ve.none())),Yx=(l,f,v,C,O,I)=>I(C,f).orThunk(()=>Ip(l,f,v,C,O).map(U=>{const Q=U.range;return dh.create(ve.some(Cv(Q.start,Q.soffset,Q.finish,Q.foffset)),!0)})),Ov=(l,f)=>Yr(l,"tr",f).bind(v=>Yr(v,"table",f).bind(C=>{const O=$o(C,"tr");return es(v,O[0])?nw(C,I=>Xg(I).isSome(),f).map(I=>{const U=Ai(I);return dh.create(ve.some(Cv(I,U,I,U)),!0)}):ve.none()})),cM=(l,f)=>Yr(l,"tr",f).bind(v=>Yr(v,"table",f).bind(C=>{const O=$o(C,"tr");return es(v,O[O.length-1])?ow(C,I=>of(I).isSome(),f).map(I=>dh.create(ve.some(Cv(I,0,I,0)),!0)):ve.none()})),uw=(l,f,v,C,O,I,U)=>Ip(l,v,C,O,I).bind(Q=>Bx(f,v,Q.start,Q.finish,U)),Ya=l=>{let f=l;return{get:()=>f,set:O=>{f=O}}},dw=l=>{const f=Ya(ve.none()),v=()=>f.get().each(l);return{clear:()=>{v(),f.set(ve.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:Q=>{v(),f.set(ve.some(Q))}}},bf=()=>{const l=dw(Ne);return{...l,on:v=>l.get().each(v)}},sl=(l,f)=>Yr(l,"td,th",f),Xx=l=>hc(l).exists(P1),fw=(l,f,v,C)=>{const O=bf(),I=O.clear,U=Le=>{O.on(St=>{C.clearBeforeUpdate(f),sl(Le.target,v).each(jt=>{R0(St,jt,v).each(zt=>{const Nt=zt.boxes.getOr([]);if(Nt.length===1){const mn=Nt[0],yt=I1(mn)==="false",Rn=wi(CS(Le.target),mn,es);yt&&Rn&&C.selectRange(f,Nt,mn,mn)}else Nt.length>1&&(C.selectRange(f,Nt,zt.start,zt.finish),l.selectContents(jt))})})})};return{clearstate:I,mousedown:Le=>{C.clear(f),sl(Le.target,v).filter(Xx).each(O.set)},mouseover:Le=>{U(Le)},mouseup:Le=>{U(Le),I()}}},Dv={traverse:ai,gather:xv,relative:sc.before,retry:Np.tryDown,failure:kp.failedDown},mw={traverse:hl,gather:tw,relative:sc.before,retry:Np.tryUp,failure:kp.failedUp},ig=l=>f=>f===l,hw=ig(38),vf=ig(40),Wi=l=>l>=37&&l<=40,cg={isBackward:ig(37),isForward:ig(39)},yf={isBackward:ig(39),isForward:ig(37)},lg=l=>{const f=l!==void 0?l.dom:document,v=f.body.scrollLeft||f.documentElement.scrollLeft,C=f.body.scrollTop||f.documentElement.scrollTop;return pn(v,C)},rc=(l,f,v)=>{const O=(v!==void 0?v.dom:document).defaultView;O&&O.scrollBy(l,f)},fi=Lu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Zi=l=>fi.exact(l.start,l.soffset,l.finish,l.foffset),Vu=l=>l.match({domRange:f=>lt.fromDom(f.startContainer),relative:(f,v)=>sc.getStart(f),exact:(f,v,C,O)=>f}),Rv=fi.domRange,_l=fi.relative,ug=fi.exact,G4=l=>{const f=Vu(l);return cs(f)},Jx=xp.create,dg={domRange:Rv,relative:_l,exact:ug,exactFromRange:Zi,getWin:G4,range:Jx},Qx=(l,f,v)=>{var C;return ve.from((C=l.caretPositionFromPoint)===null||C===void 0?void 0:C.call(l,f,v)).bind(O=>{if(O.offsetNode===null)return ve.none();const I=l.createRange();return I.setStart(O.offsetNode,O.offset),I.collapse(),ve.some(I)})},eE=(l,f,v)=>{var C;return ve.from((C=l.caretRangeFromPoint)===null||C===void 0?void 0:C.call(l,f,v))},Mv=(l,f,v)=>l.caretPositionFromPoint?Qx(l,f,v):l.caretRangeFromPoint?eE(l,f,v):ve.none(),tE=(l,f,v)=>{const C=l.document;return Mv(C,f,v).map(O=>xp.create(lt.fromDom(O.startContainer),O.startOffset,lt.fromDom(O.endContainer),O.endOffset))},mb=(l,f)=>{const v=Qo(l);return v==="input"?sc.after(l):Hn(["br","img"],v)?f===0?sc.before(l):sc.after(l):sc.on(l,f)},K4=(l,f)=>{const v=l.fold(sc.before,mb,sc.after),C=f.fold(sc.before,mb,sc.after);return dg.relative(v,C)},nE=(l,f,v,C)=>{const O=mb(l,f),I=mb(v,C);return dg.relative(O,I)},Y4=(l,f,v,C)=>{const I=_a(l).dom.createRange();return I.setStart(l.dom,f),I.setEnd(v.dom,C),I},X4=(l,f,v,C)=>{const O=Y4(l,f,v,C),I=es(l,v)&&f===C;return O.collapsed&&!I},hb=l=>ve.from(l.getSelection()),Nv=(l,f)=>{hb(l).each(v=>{v.removeAllRanges(),v.addRange(f)})},gw=(l,f,v,C,O)=>{const I=Sp(l,f,v,C,O);Nv(l,I)},J4=(l,f,v,C,O,I)=>{f.collapse(v.dom,C),f.extend(O.dom,I)},Po=(l,f)=>Px(l,f).match({ltr:(v,C,O,I)=>{gw(l,v,C,O,I)},rtl:(v,C,O,I)=>{hb(l).each(U=>{if(U.setBaseAndExtent)U.setBaseAndExtent(v.dom,C,O.dom,I);else if(U.extend)try{J4(l,U,v,C,O,I)}catch{gw(l,O,I,v,C)}else gw(l,O,I,v,C)})}}),hm=(l,f,v,C,O)=>{const I=nE(f,v,C,O);Po(l,I)},fg=(l,f,v)=>{const C=K4(f,v);Po(l,C)},Pv=l=>{if(l.rangeCount>0){const f=l.getRangeAt(0),v=l.getRangeAt(l.rangeCount-1);return ve.some(xp.create(lt.fromDom(f.startContainer),f.startOffset,lt.fromDom(v.endContainer),v.endOffset))}else return ve.none()},Q4=l=>{if(l.anchorNode===null||l.focusNode===null)return Pv(l);{const f=lt.fromDom(l.anchorNode),v=lt.fromDom(l.focusNode);return X4(f,l.anchorOffset,v,l.focusOffset)?ve.some(xp.create(f,l.anchorOffset,v,l.focusOffset)):Pv(l)}},Hc=(l,f,v=!0)=>{const O=(v?fh:P4)(l,f);Nv(l,O)},lM=l=>hb(l).filter(f=>f.rangeCount>0).bind(Q4),mg=l=>lM(l).map(f=>dg.exact(f.start,f.soffset,f.finish,f.foffset)),gm=(l,f)=>{const v=Y2(l,f);return L4(v)},Iv=(l,f,v)=>tE(l,f,v),oE=l=>{hb(l).each(f=>f.removeAllRanges())},sE=l=>({elementFromPoint:(yt,Rn)=>lt.fromPoint(lt.fromDom(l.document),yt,Rn),getRect:yt=>yt.dom.getBoundingClientRect(),getRangedRect:(yt,Rn,ro,mt)=>{const rs=dg.exact(yt,Rn,ro,mt);return gm(l,rs)},getSelection:()=>mg(l).map(yt=>J2(l,yt)),fromSitus:yt=>{const Rn=dg.relative(yt.start,yt.finish);return J2(l,Rn)},situsFromPoint:(yt,Rn)=>Iv(l,yt,Rn).map(ro=>X2.create(ro.start,ro.soffset,ro.finish,ro.foffset)),clearSelection:()=>{oE(l)},collapseSelection:(yt=!1)=>{mg(l).each(Rn=>Rn.fold(ro=>ro.collapse(yt),(ro,mt)=>{const rs=yt?ro:mt;fg(l,rs,rs)},(ro,mt,rs,Io)=>{const Bo=yt?ro:rs,$r=yt?mt:Io;hm(l,Bo,$r,Bo,$r)}))},setSelection:yt=>{hm(l,yt.start,yt.soffset,yt.finish,yt.foffset)},setRelativeSelection:(yt,Rn)=>{fg(l,yt,Rn)},selectNode:yt=>{Hc(l,yt,!1)},selectContents:yt=>{Hc(l,yt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>lg(lt.fromDom(l.document)).top,scrollBy:(yt,Rn)=>{rc(yt,Rn,lt.fromDom(l.document))}}),gb=(l,f)=>({rows:l,cols:f}),e3=(l,f,v,C)=>{const O=sE(l),I=fw(O,f,v,C);return{clearstate:I.clearstate,mousedown:I.mousedown,mouseover:I.mouseover,mouseup:I.mouseup}},t3=l=>ci(l,En).exists(P1),Bv=(l,f)=>t3(l)||t3(f),hg=(l,f,v,C)=>{const O=sE(l),I=()=>(C.clear(f),ve.none());return{keydown:(ae,we,Le,St,jt,zt)=>{const Nt=ae.raw,mn=Nt.which,yt=Nt.shiftKey===!0;return Fc(f,C.selectedSelector).fold(()=>(Wi(mn)&&!yt&&C.clearBeforeUpdate(f),Wi(mn)&&yt&&!Bv(we,St)?ve.none:vf(mn)&&yt?Gt(uw,O,f,v,Dv,St,we,C.selectRange):hw(mn)&&yt?Gt(uw,O,f,v,mw,St,we,C.selectRange):vf(mn)?Gt(Yx,O,v,Dv,St,we,cM):hw(mn)?Gt(Yx,O,v,mw,St,we,Ov):ve.none),ro=>{const mt=rs=>()=>Oo(rs,Bo=>rM(Bo.rows,Bo.cols,f,ro,C)).fold(()=>kS(f,C.firstSelectedSelector,C.lastSelectedSelector).map(Bo=>{const $r=vf(mn)||zt.isForward(mn)?sc.after:sc.before;return O.setRelativeSelection(sc.on(Bo.first,0),$r(Bo.table)),C.clear(f),dh.create(ve.none(),!0)}),Bo=>ve.some(dh.create(ve.none(),!0)));return Wi(mn)&&yt&&!Bv(we,St)?ve.none:vf(mn)&&yt?mt([gb(1,0)]):hw(mn)&&yt?mt([gb(-1,0)]):zt.isBackward(mn)&&yt?mt([gb(0,-1),gb(-1,0)]):zt.isForward(mn)&&yt?mt([gb(0,1),gb(1,0)]):Wi(mn)&&!yt?I:ve.none})()},keyup:(ae,we,Le,St,jt)=>Fc(f,C.selectedSelector).fold(()=>{const zt=ae.raw,Nt=zt.which;return zt.shiftKey===!0&&Wi(Nt)&&Bv(we,St)?$4(f,v,we,Le,St,jt,C.selectRange):ve.none()},ve.none)}},pb=(l,f,v,C)=>{const O=sE(l);return(I,U)=>{C.clearBeforeUpdate(f),R0(I,U,v).each(Q=>{const ae=Q.boxes.getOr([]);C.selectRange(f,ae,Q.start,Q.finish),O.selectContents(U),O.collapseSelection()})}},Lv=(l,f)=>{const v=Mr(l,f);return v===void 0||v===""?[]:v.split(" ")},uM=(l,f,v)=>{const O=Lv(l,f).concat([v]);return Zs(l,f,O.join(" ")),!0},rE=(l,f,v)=>{const C=fn(Lv(l,f),O=>O!==v);return C.length>0?Zs(l,f,C.join(" ")):fe(l,f),!1},gg=l=>l.dom.classList!==void 0,pw=l=>Lv(l,"class"),bw=(l,f)=>uM(l,"class",f),Fv=(l,f)=>rE(l,"class",f),Nd=(l,f)=>{gg(l)?l.dom.classList.add(f):bw(l,f)},aE=l=>{(gg(l)?l.dom.classList:pw(l)).length===0&&fe(l,"class")},bb=(l,f)=>{gg(l)?l.dom.classList.remove(f):Fv(l,f),aE(l)},vb=(l,f)=>gg(l)&&l.dom.classList.contains(f),n3=(l,f)=>{Ae(f,v=>{bb(l,v)})},iE=l=>f=>{Nd(f,l)},o3=l=>f=>{n3(f,l)},Bp={byClass:l=>{const f=iE(l.selected),v=o3([l.selected,l.lastSelected,l.firstSelected]),C=I=>{const U=$o(I,l.selectedSelector);Ae(U,v)};return{clearBeforeUpdate:C,clear:C,selectRange:(I,U,Q,ae)=>{C(I),Ae(U,f),Nd(Q,l.firstSelected),Nd(ae,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,f,v)=>{const C=ae=>{fe(ae,l.selected),fe(ae,l.firstSelected),fe(ae,l.lastSelected)},O=ae=>{Zs(ae,l.selected,"1")},I=ae=>{U(ae),v()},U=ae=>{const we=$o(ae,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ae(we,C)};return{clearBeforeUpdate:U,clear:I,selectRange:(ae,we,Le,St)=>{I(ae),Ae(we,O),Zs(Le,l.firstSelected,"1"),Zs(St,l.lastSelected,"1"),f(we,Le,St)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},vw=(l,f,v,C)=>{switch(l.tag){case"none":return f();case"single":return C(l.element);case"multiple":return v(l.elements)}},Jt=()=>({tag:"none"}),Xa=l=>({tag:"multiple",elements:l}),yb=l=>({tag:"single",element:l}),Fr=(l,f,v)=>({get:()=>th(l(),v).fold(()=>f().fold(Jt,yb),Xa)}),Tl=(l,f)=>{const v=l.slice(0,f[f.length-1].row+1),C=z0(v);return _o(C,O=>{const I=O.cells.slice(0,f[f.length-1].column+1);return yn(I,U=>U.element)})},$v=(l,f)=>{const v=l.slice(f[0].row+f[0].rowspan-1,l.length),C=z0(v);return _o(C,O=>{const I=O.cells.slice(f[0].column+f[0].colspan-1,O.cells.length);return yn(I,U=>U.element)})},pg=(l,f,v)=>{const C=po.fromTable(l);return Ri(C,f).map(I=>{const U=mp(C,v,!1),{rows:Q}=sa(U),ae=Tl(Q,I),we=$v(Q,I);return{upOrLeftCells:ae,downOrRightCells:we}})},Hv=(l,f,v,C,O,I,U)=>({target:l,x:f,y:v,stop:C,prevent:O,kill:I,raw:U}),wb=l=>{const f=lt.fromDom($t(l).getOr(l.target)),v=()=>l.stopPropagation(),C=()=>l.preventDefault(),O=ln(C,v);return Hv(f,l.clientX,l.clientY,v,C,O,l)},yw=(l,f)=>v=>{l(v)&&f(wb(v))},lE=(l,f,v,C,O)=>{const I=yw(v,C);return l.dom.addEventListener(f,I,O),{unbind:Gt(wf,l,f,I,O)}},r3=(l,f,v,C)=>lE(l,f,v,C,!1),wf=(l,f,v,C)=>{l.dom.removeEventListener(f,v,C)},a3=Fe,bg=(l,f,v)=>r3(l,f,a3,v),Ac=wb,ma=l=>!vb(lt.fromDom(l.target),"ephox-snooker-resizer-bar"),zv=(l,f)=>{const v=Fr(()=>lt.fromDom(l.getBody()),()=>Lr(xd(l),Qi(l)),jh.selectedSelector),C=(ae,we,Le)=>{Ha(we).each(jt=>{const zt=yn(ae,ro=>ro.dom),Nt=ep(l),mn=wd(Ne,lt.fromDom(l.getDoc()),Nt),yt=Td(l),Rn=pg(jt,{selection:yt},mn).map(ro=>zr(ro,mt=>yn(mt,rs=>rs.dom))).getOrUndefined();_4(l,zt,we.dom,Le.dom,Rn)})},O=()=>M2(l),I=Bp.byAttr(jh,C,O);return l.on("init",ae=>{const we=l.getWin(),Le=nm(l),St=Qi(l),jt=()=>{const ss=l.selection,Ht=lt.fromDom(ss.getStart()),Ma=lt.fromDom(ss.getEnd());D0(Ha,[Ht,Ma]).fold(()=>I.clear(Le),Ne)},zt=e3(we,Le,St,I),Nt=hg(we,Le,St,I),mn=pb(we,Le,St,I),yt=ss=>ss.raw.shiftKey===!0;l.on("TableSelectorChange",ss=>mn(ss.start,ss.finish));const Rn=(ss,Ht)=>{yt(ss)&&(Ht.kill&&ss.kill(),Ht.selection.each(Ma=>{const ju=dg.relative(Ma.start,Ma.finish),kl=Y2(we,ju);l.selection.setRng(kl)}))},ro=ss=>{const Ht=Ac(ss);if(Ht.raw.shiftKey&&Wi(Ht.raw.which)){const Ma=l.selection.getRng(),ju=lt.fromDom(Ma.startContainer),kl=lt.fromDom(Ma.endContainer);Nt.keyup(Ht,ju,Ma.startOffset,kl,Ma.endOffset).each(fo=>{Rn(Ht,fo)})}},mt=ss=>{const Ht=Ac(ss);f.hide();const Ma=l.selection.getRng(),ju=lt.fromDom(Ma.startContainer),kl=lt.fromDom(Ma.endContainer),fo=q(cg,yf)(lt.fromDom(l.selection.getStart()));Nt.keydown(Ht,ju,Ma.startOffset,kl,Ma.endOffset,fo).each(kr=>{Rn(Ht,kr)}),f.show()},rs=ss=>ss.button===0,Io=ss=>ss.buttons===void 0?!0:(ss.buttons&1)!==0,Bo=ss=>{zt.clearstate()},$r=ss=>{rs(ss)&&ma(ss)&&zt.mousedown(Ac(ss))},hr=ss=>{Io(ss)&&ma(ss)&&zt.mouseover(Ac(ss))},Uu=ss=>{rs(ss)&&ma(ss)&&zt.mouseup(Ac(ss))},Zu=(()=>{const ss=Ya(lt.fromDom(Le)),Ht=Ya(0);return{touchEnd:ju=>{const kl=lt.fromDom(ju.target);if(vs("td")(kl)||vs("th")(kl)){const fo=ss.get(),kr=Ht.get();es(fo,kl)&&ju.timeStamp-kr<300&&(ju.preventDefault(),mn(kl,kl))}ss.set(kl),Ht.set(ju.timeStamp)}}})();l.on("dragstart",Bo),l.on("mousedown",$r),l.on("mouseover",hr),l.on("mouseup",Uu),l.on("touchend",Zu.touchEnd),l.on("keyup",ro),l.on("keydown",mt),l.on("NodeChange",jt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(jh.firstSelected),l.serializer.addTempAttr(jh.lastSelected)}),{getSelectedCells:()=>vw(v.get(),ce([]),ae=>yn(ae,we=>we.dom),ae=>[ae.dom]),clearSelectedCells:ae=>I.clear(lt.fromDom(ae))}},Oc=l=>{let f=[];return{bind:I=>{if(I===void 0)throw new Error("Event bind error: undefined handler");f.push(I)},unbind:I=>{f=fn(f,U=>U!==I)},trigger:(...I)=>{const U={};Ae(l,(Q,ae)=>{U[Q]=I[ae]}),Ae(f,Q=>{Q(U)})}}},pm=l=>{const f=zr(l,C=>({bind:C.bind,unbind:C.unbind})),v=zr(l,C=>C.trigger);return{registry:f,trigger:v}},Cb=(l,f)=>{let v=null;const C=()=>{ge(v)||(clearTimeout(v),v=null)};return{cancel:C,throttle:(...I)=>{C(),v=setTimeout(()=>{v=null,l.apply(null,I)},f)}}},bm=l=>l.slice(0).sort(),Lp=(l,f)=>{throw new Error("All required keys ("+bm(l).join(", ")+") were not specified. Specified keys were: "+bm(f).join(", ")+".")},Sb=l=>{throw new Error("Unsupported keys for object: "+bm(l).join(", "))},xb=(l,f)=>{if(!ue(f))throw new Error("The "+l+" fields must be an array. Was: "+f+".");Ae(f,v=>{if(!K(v))throw new Error("The value "+v+" in the "+l+" fields was not a string.")})},i3=(l,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+bm(l).join(", ")+") were not.")},c3=l=>{const f=bm(l);W(f,(C,O)=>O<f.length-1&&C===f[O+1]).each(C=>{throw new Error("The field: "+C+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},uE=(l,f)=>dE(l,f,{validate:Pt,label:"function"}),dE=(l,f,v)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return xb("required",f),c3(f),C=>{const O=Kt(C);zo(f,Q=>Hn(O,Q))||Lp(f,O),l(f,O);const U=fn(f,Q=>!v.validate(C[Q],Q));return U.length>0&&i3(U,v.label),C}},fE=(l,f)=>{const v=fn(f,C=>!Hn(l,C));v.length>0&&Sb(v)},Vv=l=>uE(fE,l),mE=Vv(["compare","extract","mutate","sink"]),Eb=Vv(["element","start","stop","destroy"]),Ii=Vv(["forceDrop","drop","move","delayDrop"]),iu=()=>{let l=ve.none();const f=()=>{l=ve.none()},v=(I,U)=>{const Q=l.map(ae=>I.compare(ae,U));return l=ve.some(U),Q},C=(I,U)=>{U.extract(I).each(ae=>{v(U,ae).each(Le=>{O.trigger.move(Le)})})},O=pm({move:Oc(["info"])});return{onEvent:C,reset:f,events:O.registry}},zc=()=>{const l=pm({move:Oc(["info"])});return{onEvent:Ne,reset:Ne,events:l.registry}},_b=()=>{const l=zc(),f=iu();let v=l;return{on:()=>{v.reset(),v=f},off:()=>{v.reset(),v=l},isOn:()=>v===f,onEvent:(Q,ae)=>{v.onEvent(Q,ae)},events:f.events}},vm=(l,f,v)=>{let C=!1;const O=pm({start:Oc([]),stop:Oc([])}),I=_b(),U=()=>{Nt.stop(),I.isOn()&&(I.off(),O.trigger.stop())},Q=Cb(U,200),ae=yt=>{Nt.start(yt),I.on(),O.trigger.start()},we=yt=>{Q.cancel(),I.onEvent(yt,f)};I.events.move.bind(yt=>{f.mutate(l,yt.info)});const Le=()=>{C=!0},St=()=>{C=!1},jt=()=>C,zt=yt=>(...Rn)=>{C&&yt.apply(null,Rn)},Nt=f.sink(Ii({forceDrop:U,drop:zt(U),move:zt(we),delayDrop:zt(Q.throttle)}),v),mn=()=>{Nt.destroy()};return{element:Nt.element,go:ae,on:Le,off:St,isActive:jt,destroy:mn,events:O.registry}},Fp=l=>{const f=l.replace(/\./g,"-");return{resolve:C=>f+"-"+C}},gE=Fp("ephox-dragster").resolve,ww=l=>{const f={layerClass:gE("blocker"),...l},v=lt.fromTag("div");return Zs(v,"role","presentation"),na(v,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Nd(v,gE("blocker")),Nd(v,f.layerClass),{element:ce(v),destroy:()=>{Ps(v)}}};var Sw=mE({compare:(l,f)=>pn(f.left-l.left,f.top-l.top),extract:l=>ve.some(pn(l.x,l.y)),sink:(l,f)=>{const v=ww(f),C=bg(v.element(),"mousedown",l.forceDrop),O=bg(v.element(),"mouseup",l.drop),I=bg(v.element(),"mousemove",l.move),U=bg(v.element(),"mouseout",l.delayDrop),Q=()=>{v.destroy(),O.unbind(),I.unbind(),U.unbind(),C.unbind()},ae=Le=>{ys(Le,v.element())},we=()=>{Ps(v.element())};return Eb({element:v.element,start:ae,stop:we,destroy:Q})},mutate:(l,f)=>{l.mutate(f.left,f.top)}});const xw=(l,f={})=>{var v;const C=(v=f.mode)!==null&&v!==void 0?v:Sw;return vm(l,C,f)},rl=Fp("ephox-snooker").resolve,Ew=()=>{const l=pm({drag:Oc(["xDelta","yDelta"])});return{mutate:(v,C)=>{l.trigger.drag(v,C)},events:l.registry}},_w=()=>{const l=pm({drag:Oc(["xDelta","yDelta","target"])});let f=ve.none();const v=Ew();return v.events.drag.bind(I=>{f.each(U=>{l.trigger.drag(I.xDelta,I.yDelta,U)})}),{assign:I=>{f=ve.some(I)},get:()=>f,mutate:v.mutate,events:l.registry}},Tw=(l,f,v,C,O)=>{const I=lt.fromTag("div");return na(I,{position:"absolute",left:f-C/2+"px",top:v+"px",height:O+"px",width:C+"px"}),Ea(I,{"data-column":l,role:"presentation"}),I},Uv=(l,f,v,C,O)=>{const I=lt.fromTag("div");return na(I,{position:"absolute",left:f+"px",top:v-O/2+"px",height:O+"px",width:C+"px"}),Ea(I,{"data-row":l,role:"presentation"}),I},$p=rl("resizer-bar"),Wv=rl("resizer-rows"),u3=rl("resizer-cols"),kw=7,Zv=(l,f)=>_o(l.all,(v,C)=>f(v.element)?[C]:[]),d3=(l,f)=>{const v=[];return xo(l.grid.columns,C=>{po.getColumnAt(l,C).map(I=>I.element).forall(f)&&v.push(C)}),fn(v,C=>{const O=po.filterItems(l,I=>I.column===C);return zo(O,I=>f(I.element))})},Tb=l=>{const f=$o(l.parent(),"."+$p);Ae(f,Ps)},bE=(l,f,v)=>{const C=l.origin();Ae(f,O=>{O.each(I=>{const U=v(C,I);Nd(U,$p),ys(l.parent(),U)})})},vE=(l,f,v,C)=>{bE(l,f,(O,I)=>{const U=Tw(I.col,I.x-O.left,v.top-O.top,kw,C);return Nd(U,u3),U})},f3=(l,f,v,C)=>{bE(l,f,(O,I)=>{const U=Uv(I.row,v.left-O.left,I.y-O.top,C,kw);return Nd(U,Wv),U})},ym=(l,f,v,C,O)=>{const I=ki(v),U=f.isResizable,Q=C.length>0?Za.positions(C,v):[],ae=Q.length>0?Zv(l,U):[],we=fn(Q,(zt,Nt)=>ft(ae,mn=>Nt===mn));f3(f,we,I,Xo(v));const Le=O.length>0?Gm.positions(O,v):[],St=Le.length>0?d3(l,U):[],jt=fn(Le,(zt,Nt)=>ft(St,mn=>Nt===mn));vE(f,jt,I,kn(v))},Hp=(l,f)=>{if(Tb(l),l.isResizable(f)){const v=po.fromTable(f),C=k(v),O=vd(v);ym(v,l,f,C,O)}},al=(l,f)=>{const v=$o(l.parent(),"."+$p);Ae(v,f)},ac=l=>{al(l,f=>{Is(f,"display","none")})},zp=l=>{al(l,f=>{Is(f,"display","block")})},fM=l=>vb(l,Wv),m3=l=>vb(l,u3),h3=rl("resizer-bar-dragging"),Mo=l=>{const f=_w(),v=xw(f,{});let C=ve.none();const O=(Nt,mn)=>ve.from(Mr(Nt,mn));f.events.drag.bind(Nt=>{O(Nt.target,"data-row").each(mn=>{const yt=Bs(Nt.target,"top");Is(Nt.target,"top",yt+Nt.yDelta+"px")}),O(Nt.target,"data-column").each(mn=>{const yt=Bs(Nt.target,"left");Is(Nt.target,"left",yt+Nt.xDelta+"px")})});const I=(Nt,mn)=>{const yt=Bs(Nt,mn),Rn=$a(Nt,"data-initial-"+mn,0);return yt-Rn};v.events.stop.bind(()=>{f.get().each(Nt=>{C.each(mn=>{O(Nt,"data-row").each(yt=>{const Rn=I(Nt,"top");fe(Nt,"data-initial-top"),zt.trigger.adjustHeight(mn,Rn,parseInt(yt,10))}),O(Nt,"data-column").each(yt=>{const Rn=I(Nt,"left");fe(Nt,"data-initial-left"),zt.trigger.adjustWidth(mn,Rn,parseInt(yt,10))}),Hp(l,mn)})})});const U=(Nt,mn)=>{zt.trigger.startAdjust(),f.assign(Nt),Zs(Nt,"data-initial-"+mn,Bs(Nt,mn)),Nd(Nt,h3),Is(Nt,"opacity","0.2"),v.go(l.parent())},Q=bg(l.parent(),"mousedown",Nt=>{fM(Nt.target)&&U(Nt.target,"top"),m3(Nt.target)&&U(Nt.target,"left")}),ae=Nt=>es(Nt,l.view()),we=Nt=>Yr(Nt,"table",ae).filter(P1),Le=bg(l.view(),"mouseover",Nt=>{we(Nt.target).fold(()=>{Vn(Nt.target)&&Tb(l)},mn=>{v.isActive()&&(C=ve.some(mn),Hp(l,mn))})}),St=()=>{Q.unbind(),Le.unbind(),v.destroy(),Tb(l)},jt=Nt=>{Hp(l,Nt)},zt=pm({adjustHeight:Oc(["table","delta","row"]),adjustWidth:Oc(["table","delta","column"]),startAdjust:Oc([])});return{destroy:St,refresh:jt,on:v.on,off:v.off,hideBars:Gt(ac,l),showBars:Gt(zp,l),events:zt.registry}},Aw={create:(l,f,v)=>{const C=Za,O=Gm,I=Mo(l),U=pm({beforeResize:Oc(["table","type"]),afterResize:Oc(["table","type"]),startDrag:Oc([])});return I.events.adjustHeight.bind(Q=>{const ae=Q.table;U.trigger.beforeResize(ae,"row");const we=C.delta(Q.delta,ae);jS(ae,we,Q.row),U.trigger.afterResize(ae,"row")}),I.events.startAdjust.bind(Q=>{U.trigger.startDrag()}),I.events.adjustWidth.bind(Q=>{const ae=Q.table;U.trigger.beforeResize(ae,"col");const we=O.delta(Q.delta,ae),Le=v(ae);J0(ae,we,Q.column,f,Le),U.trigger.afterResize(ae,"col")}),{on:I.on,off:I.off,refreshBars:I.refresh,hideBars:I.hideBars,showBars:I.showBars,destroy:I.destroy,events:U.registry}}},wE={only:(l,f)=>{const v=fl(l)?ns(l):l;return{parent:ce(v),view:ce(l),origin:ce(pn(0,0)),isResizable:f}},detached:(l,f,v)=>{const C=()=>ki(f);return{parent:ce(f),view:ce(l),origin:C,isResizable:v}},body:(l,f,v)=>({parent:ce(f),view:ce(l),origin:ce(pn(0,0)),isResizable:v})},b3=()=>{const l=lt.fromTag("div");return na(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ys(To(),l),l},v3=(l,f)=>l.inline?wE.body(lt.fromDom(l.getBody()),b3(),f):wE.only(lt.fromDom(l.getDoc()),f),y3=(l,f)=>{l.inline&&Ps(f.parent())},jv=l=>Zt(l)&&l.nodeName==="TABLE",Ab="bar-",Ob=l=>Mr(l,"data-mce-resize")!=="false",CE=l=>{const f=po.fromTable(l);po.hasColumns(f)||Ae(Eu(l),v=>{const C=cd(v,"width");Is(v,"width",C),fe(v,"width")})},w3=l=>Ta(l,"corner-"),y7=l=>zl(l,"corner-"),C3=l=>{const f=bf(),v=bf(),C=bf();let O,I,U,Q;const ae=mt=>fa(l,mt),we=()=>s2(l)?om():Kh(),Le=mt=>cf(mt).columns,St=mt=>cf(mt).rows,jt=(mt,rs,Io,Bo)=>{const $r=y7(rs),hr=Ci($r,"e"),Uu=Ta($r,"n");if(I===""&&tb(mt),Q===""&&H2(mt),Io!==O&&I!==""){Is(mt,"width",I);const Wu=we(),Zu=ae(mt),ss=s2(l)||hr?Le(mt)-1:0;J0(mt,Io-O,ss,Wu,Zu)}else if(ES(I)){const Wu=parseFloat(I.replace("%","")),Zu=Io*Wu/O;Is(mt,"width",Zu+"%")}if(a2(I)&&CE(mt),Bo!==U&&Q!==""){Is(mt,"height",Q);const Wu=Uu?0:St(mt)-1;jS(mt,Bo-U,Wu)}},zt=()=>{v.on(mt=>{mt.destroy()}),C.on(mt=>{y3(l,mt)})};l.on("init",()=>{const mt=v3(l,Ob);if(C.set(mt),Vh(l)&&S0(l)){const rs=we(),Io=Aw.create(mt,rs,ae);l.mode.isReadOnly()||Io.on(),Io.events.startDrag.bind(Bo=>{f.set(l.selection.getRng())}),Io.events.beforeResize.bind(Bo=>{const $r=Bo.table.dom;Ca(l,$r,r2($r),B1($r),Ab+Bo.type)}),Io.events.afterResize.bind(Bo=>{const $r=Bo.table,hr=$r.dom;Lc($r),f.on(Uu=>{l.selection.setRng(Uu),l.focus()}),Sa(l,hr,r2(hr),B1(hr),Ab+Bo.type),l.undoManager.add()}),v.set(Io)}}),l.on("ObjectResizeStart",mt=>{const rs=mt.target;if(jv(rs)&&!l.mode.isReadOnly()){const Io=lt.fromDom(rs);Ae(l.dom.select(".mce-clonedresizable"),Bo=>{l.dom.addClass(Bo,"mce-"+Br(l)+"-columns")}),!wx(Io)&&ou(l)?$2(Io):!dv(Io)&&tp(l)&&tb(Io),Cx(Io)&&Ta(mt.origin,Ab)&&tb(Io),O=mt.width,I=Di(l)?"":SS(l,rs).getOr(""),U=mt.height,Q=xS(l,rs).getOr("")}}),l.on("ObjectResized",mt=>{const rs=mt.target;if(jv(rs)){const Io=lt.fromDom(rs),Bo=mt.origin;w3(Bo)&&jt(Io,Bo,mt.width,mt.height),Lc(Io),lh(l,Io.dom,Ra)}});const Nt=()=>{v.on(mt=>{mt.on(),mt.showBars()})},mn=()=>{v.on(mt=>{mt.off(),mt.hideBars()})};return l.on("DisabledStateChange",mt=>{mt.state?mn():Nt()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?mn():Nt()}),l.on("dragstart dragend",mt=>{mt.type==="dragstart"?mn():Nt()}),l.on("remove",()=>{zt()}),{refresh:mt=>{v.on(rs=>rs.refreshBars(lt.fromDom(mt)))},hide:()=>{v.on(mt=>mt.hideBars())},show:()=>{v.on(mt=>mt.showBars())}}},S3=l=>{Uk(l);const f=C3(l),v=zv(l,f),C=Q1(l,f,v);return q2(l,C),N4(l,C),kd(l,C),{getSelectedCells:v.getSelectedCells,clearSelectedCells:v.clearSelectedCells}},x3=l=>({table:S3(l)});var vn=()=>{p.add("dom",x3)};vn()}()),$J}_se();var zJ={},VJ={},UJ;function Tse(){return UJ||(UJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(_,R,Z)=>{var ne;return Z(_,R.prototype)?!0:((ne=_.constructor)===null||ne===void 0?void 0:ne.name)===R.name},w=_=>{const R=typeof _;return _===null?"null":R==="object"&&Array.isArray(_)?"array":R==="object"&&g(_,String,(Z,ne)=>ne.isPrototypeOf(Z))?"string":R},E=_=>R=>w(R)===_,N=_=>R=>typeof R===_,V=_=>R=>_===R,K=E("string"),j=E("array"),ue=N("boolean"),ge=V(void 0),Ce=_=>_==null,Xe=_=>!Ce(_),Lt=N("function"),Zt=N("number"),Pt=()=>{},Ct=(_,R)=>Z=>_(R(Z)),Ne=_=>()=>_,ln=_=>_,xt=(_,R)=>_===R;function ce(_,...R){return(...Z)=>{const ne=R.concat(Z);return _.apply(null,ne)}}const Je=_=>{_()},Dn=Ne(!1),Gt=Ne(!0);class oe{constructor(R,Z){this.tag=R,this.value=Z}static some(R){return new oe(!0,R)}static none(){return oe.singletonNone}fold(R,Z){return this.tag?Z(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?oe.some(R(this.value)):oe.none()}bind(R){return this.tag?R(this.value):oe.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:oe.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Xe(R)?oe.some(R):oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}oe.singletonNone=new oe(!1);const Xt=Object.keys,In=Object.hasOwnProperty,en=(_,R)=>{const Z=Xt(_);for(let ne=0,_e=Z.length;ne<_e;ne++){const st=Z[ne],At=_[st];R(At,st)}},Fe=_=>(R,Z)=>{_[Z]=R},ve=(_,R,Z,ne)=>{en(_,(_e,st)=>{(R(_e,st)?Z:ne)(_e,st)})},so=(_,R)=>{const Z={};return ve(_,R,Fe(Z),Pt),Z},at=(_,R)=>{const Z=[];return en(_,(ne,_e)=>{Z.push(R(ne,_e))}),Z},it=_=>at(_,ln),M=_=>Xt(_).length,Hn=(_,R)=>ft(_,R)?oe.from(_[R]):oe.none(),ft=(_,R)=>In.call(_,R),xo=(_,R)=>ft(_,R)&&_[R]!==void 0&&_[R]!==null,yn=_=>{for(const R in _)if(In.call(_,R))return!1;return!0},Ae=Array.prototype.indexOf,wt=Array.prototype.push,Mn=(_,R)=>Ae.call(_,R),fn=(_,R)=>Mn(_,R)>-1,io=(_,R)=>{for(let Z=0,ne=_.length;Z<ne;Z++){const _e=_[Z];if(R(_e,Z))return!0}return!1},$e=(_,R)=>{const Z=[];for(let ne=0;ne<_;ne++)Z.push(R(ne));return Z},pt=(_,R)=>{const Z=_.length,ne=new Array(Z);for(let _e=0;_e<Z;_e++){const st=_[_e];ne[_e]=R(st,_e)}return ne},W=(_,R)=>{for(let Z=0,ne=_.length;Z<ne;Z++){const _e=_[Z];R(_e,Z)}},Us=(_,R)=>{for(let Z=_.length-1;Z>=0;Z--){const ne=_[Z];R(ne,Z)}},no=(_,R)=>{const Z=[],ne=[];for(let _e=0,st=_.length;_e<st;_e++){const At=_[_e];(R(At,_e)?Z:ne).push(At)}return{pass:Z,fail:ne}},_o=(_,R)=>{const Z=[];for(let ne=0,_e=_.length;ne<_e;ne++){const st=_[ne];R(st,ne)&&Z.push(st)}return Z},zo=(_,R,Z)=>(Us(_,(ne,_e)=>{Z=R(Z,ne,_e)}),Z),pi=(_,R,Z)=>(W(_,(ne,_e)=>{Z=R(Z,ne,_e)}),Z),et=(_,R,Z)=>{for(let ne=0,_e=_.length;ne<_e;ne++){const st=_[ne];if(R(st,ne))return oe.some(st);if(Z(st,ne))break}return oe.none()},_t=(_,R)=>et(_,R,Dn),dt=_=>{const R=[];for(let Z=0,ne=_.length;Z<ne;++Z){if(!j(_[Z]))throw new Error("Arr.flatten item "+Z+" was not an array, input: "+_);wt.apply(R,_[Z])}return R},xe=(_,R)=>dt(pt(_,R)),Ao=(_,R)=>{for(let Z=0,ne=_.length;Z<ne;++Z){const _e=_[Z];if(R(_e,Z)!==!0)return!1}return!0},Oo=(_,R)=>{const Z={};for(let ne=0,_e=_.length;ne<_e;ne++){const st=_[ne];Z[String(st)]=R(st,ne)}return Z},Kt=(_,R)=>R>=0&&R<_.length?oe.some(_[R]):oe.none(),is=_=>Kt(_,0),Fo=_=>Kt(_,_.length-1),zr=(_,R)=>{for(let Z=0;Z<_.length;Z++){const ne=R(_[Z],Z);if(ne.isSome())return ne}return oe.none()},Vo=8,Ws=9,oi=11,_s=1,Ss=3,xs=(_,R)=>{const ne=(R||document).createElement("div");if(ne.innerHTML=_,!ne.hasChildNodes()||ne.childNodes.length>1){const _e="HTML does not have a single root node";throw console.error(_e,_),new Error(_e)}return Ko(ne.childNodes[0])},Gr=(_,R)=>{const ne=(R||document).createElement(_);return Ko(ne)},Ts=(_,R)=>{const ne=(R||document).createTextNode(_);return Ko(ne)},Ko=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},lo={fromHtml:xs,fromTag:Gr,fromText:Ts,fromDom:Ko,fromPoint:(_,R,Z)=>oe.from(_.dom.elementFromPoint(R,Z)).map(Ko)},hs=(_,R)=>{const Z=_.dom;if(Z.nodeType!==_s)return!1;{const ne=Z;if(ne.matches!==void 0)return ne.matches(R);if(ne.msMatchesSelector!==void 0)return ne.msMatchesSelector(R);if(ne.webkitMatchesSelector!==void 0)return ne.webkitMatchesSelector(R);if(ne.mozMatchesSelector!==void 0)return ne.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Rr=_=>_.nodeType!==_s&&_.nodeType!==Ws&&_.nodeType!==oi||_.childElementCount===0,Li=(_,R)=>{const Z=R===void 0?document:R.dom;return Rr(Z)?[]:pt(Z.querySelectorAll(_),lo.fromDom)},Ki=(_,R)=>{const Z=R===void 0?document:R.dom;return Rr(Z)?oe.none():oe.from(Z.querySelector(_)).map(lo.fromDom)},ts=(_,R)=>_.dom===R.dom,jc=hs;typeof window<"u"||Function("return this;")();const Tt=_=>_.dom.nodeName.toLowerCase(),go=_=>_.dom.nodeType,Vr=_=>R=>go(R)===_,Ur=_=>go(_)===Vo||Tt(_)==="#comment",La=Vr(_s),si=Vr(Ss),Qo=Vr(Ws),Fa=Vr(oi),Fi=_=>R=>La(R)&&Tt(R)===_,Yo=_=>lo.fromDom(_.dom.ownerDocument),En=_=>Qo(_)?_:Yo(_),sr=_=>oe.from(_.dom.parentNode).map(lo.fromDom),ri=(_,R)=>{const Z=Lt(R)?R:Dn;let ne=_.dom;const _e=[];for(;ne.parentNode!==null&&ne.parentNode!==void 0;){const st=ne.parentNode,At=lo.fromDom(st);if(_e.push(At),Z(At)===!0)break;ne=st}return _e},fl=_=>oe.from(_.dom.previousSibling).map(lo.fromDom),ml=_=>oe.from(_.dom.nextSibling).map(lo.fromDom),vs=_=>pt(_.dom.childNodes,lo.fromDom),Cr=(_,R)=>{const Z=_.dom.childNodes;return oe.from(Z[R]).map(lo.fromDom)},Zs=_=>Cr(_,0),Ea=_=>Fa(_)&&Xe(_.dom.host),Nc=_=>lo.fromDom(_.dom.getRootNode()),Mr=_=>{const R=Nc(_);return Ea(R)?oe.some(R):oe.none()},pe=_=>lo.fromDom(_.dom.host),fe=_=>{const R=si(_)?_.dom.parentNode:_.dom;if(R==null||R.ownerDocument===null)return!1;const Z=R.ownerDocument;return Mr(lo.fromDom(R)).fold(()=>Z.body.contains(R),Ct(fe,pe))};var Ve=(_,R,Z,ne,_e)=>_(Z,ne)?oe.some(Z):Lt(_e)&&_e(Z)?oe.none():R(Z,ne,_e);const Ge=(_,R,Z)=>{let ne=_.dom;const _e=Lt(Z)?Z:Dn;for(;ne.parentNode;){ne=ne.parentNode;const st=lo.fromDom(ne);if(R(st))return oe.some(st);if(_e(st))break}return oe.none()},Cn=(_,R,Z)=>Ve((_e,st)=>st(_e),Ge,_,R,Z),Fn=(_,R)=>{const Z=_e=>R(lo.fromDom(_e));return _t(_.dom.childNodes,Z).map(lo.fromDom)},Qn=(_,R,Z)=>Ge(_,ne=>hs(ne,R),Z),Os=(_,R)=>Fn(_,Z=>hs(Z,R)),lt=(_,R)=>Ki(R,_),Ke=(_,R,Z)=>Ve((_e,st)=>hs(_e,st),Qn,_,R,Z),rr=_=>Ke(_,"[contenteditable]"),Sr=(_,R=!1)=>fe(_)?_.dom.isContentEditable:rr(_).fold(Ne(R),Z=>pa(Z)==="true"),pa=_=>_.dom.contentEditable,es=_=>_.nodeName.toLowerCase(),qc=_=>lo.fromDom(_.getBody()),Kr=_=>R=>ts(R,qc(_)),_a=_=>_?_.replace(/px$/,""):"",Ms=_=>/^\d+(\.\d+)?$/.test(_)?_+"px":_,ns=_=>lo.fromDom(_.selection.getStart()),cs=_=>lo.fromDom(_.selection.getEnd()),Wr=_=>Cn(_,Fi("table")).forall(Sr),hc=(_,R)=>_o(vs(_),R),Ns=(_,R)=>{let Z=[];return W(vs(_),ne=>{R(ne)&&(Z=Z.concat([ne])),Z=Z.concat(Ns(ne,R))}),Z},hl=(_,R)=>hc(_,Z=>hs(Z,R)),ai=(_,R)=>Li(R,_),ls=(_,R,Z)=>{if(K(Z)||ue(Z)||Zt(Z))_.setAttribute(R,Z+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",Z,":: Element ",_),new Error("Attribute value was not simple")},lr=(_,R,Z)=>{ls(_.dom,R,Z)},ar=(_,R)=>{const Z=_.dom;en(R,(ne,_e)=>{ls(Z,_e,ne)})},gc=(_,R)=>{const Z=_.dom.getAttribute(R);return Z===null?void 0:Z},bi=(_,R)=>oe.from(gc(_,R)),ba=(_,R)=>{_.dom.removeAttribute(R)},ys=_=>pi(_.dom.attributes,(R,Z)=>(R[Z.name]=Z.value,R),{}),Gd=(_,R,Z=xt)=>_.exists(ne=>Z(ne,R)),pc=_=>{const R=[],Z=ne=>{R.push(ne)};for(let ne=0;ne<_.length;ne++)_[ne].each(Z);return R},vu=(_,R,Z)=>_.isSome()&&R.isSome()?oe.some(Z(_.getOrDie(),R.getOrDie())):oe.none(),yo=_=>_.bind(ln),bc=(_,R)=>_?oe.some(R):oe.none(),Ps=(_,R)=>_.substring(R),Fl=(_,R,Z)=>R===""||_.length>=R.length&&_.substr(Z,Z+R.length)===R,$i=(_,R)=>Pc(_,R)?Ps(_,R.length):_,Pc=(_,R)=>Fl(_,R,0),rd=(_=>R=>R.replace(_,""))(/^\s+|\s+$/g),ii=_=>_.length>0,ad=_=>!ii(_),Gc=(_,R=10)=>{const Z=parseInt(_,R);return isNaN(Z)?oe.none():oe.some(Z)},id=_=>{const R=parseFloat(_);return isNaN(R)?oe.none():oe.some(R)},pr=_=>_.style!==void 0&&Lt(_.style.getPropertyValue),Yi=(_,R,Z)=>{if(!K(Z))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",Z,":: Element ",_),new Error("CSS value must be a string: "+Z);pr(_)&&_.style.setProperty(R,Z)},Kc=(_,R)=>{pr(_)&&_.style.removeProperty(R)},yu=(_,R,Z)=>{const ne=_.dom;Yi(ne,R,Z)},gl=(_,R)=>{const Z=_.dom,_e=window.getComputedStyle(Z).getPropertyValue(R);return _e===""&&!fe(_)?Yc(Z,R):_e},Yc=(_,R)=>pr(_)?_.style.getPropertyValue(R):"",br=(_,R)=>{const Z=_.dom,ne=Yc(Z,R);return oe.from(ne).filter(_e=>_e.length>0)},Pr=(_,R)=>{const Z=_.dom;Kc(Z,R),Gd(bi(_,"style").map(rd),"")&&ba(_,"style")},vi=(_,R,Z=0)=>bi(_,R).map(ne=>parseInt(ne,10)).getOr(Z),$l=(_,R)=>wu(_,R,Gt),wu=(_,R,Z)=>xe(vs(_),ne=>hs(ne,R)?Z(ne)?[ne]:[]:wu(ne,R,Z)),Y=["tfoot","thead","tbody","colgroup"],me=_=>fn(Y,_),ke=(_,R)=>({rows:_,columns:R}),Ye=(_,R,Z)=>({element:_,rowspan:R,colspan:Z}),kt=(_,R,Z,ne,_e,st)=>({element:_,rowspan:R,colspan:Z,row:ne,column:_e,isLocked:st}),nn=(_,R,Z)=>({element:_,cells:R,section:Z}),$t=(_,R,Z,ne)=>({startRow:_,startCol:R,finishRow:Z,finishCol:ne}),Nn=(_,R,Z)=>({element:_,colspan:R,column:Z}),Vn=(_,R)=>({element:_,columns:R}),To=(_,R,Z=Dn)=>{if(Z(R))return oe.none();if(fn(_,Tt(R)))return oe.some(R);const ne=_e=>hs(_e,"table")||Z(_e);return Qn(R,_.join(","),ne)},H=(_,R)=>To(["td","th"],_,R),ee=_=>$l(_,"th,td"),ye=_=>hs(_,"colgroup")?hl(_,"col"):xe(It(_),R=>hl(R,"col")),Be=(_,R)=>Ke(_,"table",R),cn=_=>$l(_,"tr"),It=_=>Be(_).fold(Ne([]),R=>hl(R,"colgroup")),$o=(_,R)=>pt(_,Z=>{if(Tt(Z)==="colgroup"){const ne=pt(ye(Z),_e=>{const st=vi(_e,"span",1);return Ye(_e,1,st)});return nn(Z,ne,"colgroup")}else{const ne=pt(ee(Z),_e=>{const st=vi(_e,"rowspan",1),At=vi(_e,"colspan",1);return Ye(_e,st,At)});return nn(Z,ne,R(Z))}}),ta=_=>sr(_).map(R=>{const Z=Tt(R);return me(Z)?Z:"tbody"}).getOr("tbody"),ut=_=>{const R=cn(_),ne=[...It(_),...R];return $o(ne,ta)},ci="data-snooker-locked-cols",us=_=>bi(_,ci).bind(R=>oe.from(R.match(/\d+/g))).map(R=>Oo(R,Gt)),Xc=(_,R)=>_+","+R,ur=(_,R,Z)=>oe.from(_.access[Xc(R,Z)]),uo=(_,R,Z)=>{const ne=yi(_,_e=>Z(R,_e.element));return ne.length>0?oe.some(ne[0]):oe.none()},yi=(_,R)=>{const Z=xe(_.all,ne=>ne.cells);return _o(Z,R)},Yr=_=>{const R={};let Z=0;return W(_.cells,ne=>{const _e=ne.colspan;$e(_e,st=>{const At=Z+st;R[At]=Nn(ne.element,_e,At)}),Z+=_e}),R},wi=_=>{const R={},Z=[],_e=is(_).map(Sc=>Sc.element).bind(Be).bind(us).getOr({});let st=0,At=0,un=0;const{pass:jn,fail:to}=no(_,Sc=>Sc.section==="colgroup");W(to,Sc=>{const Ql=[];W(Sc.cells,Ai=>{let xl=0;for(;R[Xc(un,xl)]!==void 0;)xl++;const Ym=xo(_e,xl.toString()),Iu=kt(Ai.element,Ai.rowspan,Ai.colspan,un,xl,Ym);for(let eu=0;eu<Ai.colspan;eu++)for(let of=0;of<Ai.rowspan;of++){const Xg=un+of,$h=xl+eu,Jg=Xc(Xg,$h);R[Jg]=Iu,At=Math.max(At,$h+1)}Ql.push(Iu)}),st++,Z.push(nn(Sc.element,Ql,Sc.section)),un++});const{columns:gs,colgroups:ds}=Fo(jn).map(Sc=>{const Ql=Yr(Sc);return{colgroups:[Vn(Sc.element,it(Ql))],columns:Ql}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ke(st,At),access:R,all:Z,columns:gs,colgroups:ds}},zl={fromTable:_=>{const R=ut(_);return wi(R)},generate:wi,getAt:ur,findItem:uo,filterItems:yi,justCells:_=>xe(_.all,R=>R.cells),justColumns:_=>it(_.columns),hasColumns:_=>Xt(_.columns).length>0,getColumnAt:(_,R)=>oe.from(_.columns[R])};var Xr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ta=(_,R,Z)=>{const ne=_.select("td,th",R);let _e;for(let st=0;st<ne.length;st++){const At=_.getStyle(ne[st],Z);if(ge(_e)&&(_e=At),_e!==At)return""}return _e},Ci=(_,R,Z)=>{Xr.each("left center right".split(" "),ne=>{ne!==Z&&_.formatter.remove("align"+ne,{},R)}),Z&&_.formatter.apply("align"+Z,{},R)},Cu=(_,R,Z)=>{Xr.each("top middle bottom".split(" "),ne=>{ne!==Z&&_.formatter.remove("valign"+ne,{},R)}),Z&&_.formatter.apply("valign"+Z,{},R)},Bm=(_,R,Z)=>{_.dispatch("TableModified",{...Z,table:R})},oo=(_,R)=>id(_).getOr(R),pl=(_,R,Z)=>oo(gl(_,R),Z),Vl=(_,R,Z,ne)=>{const _e=pl(_,`padding-${Z}`,0),st=pl(_,`padding-${ne}`,0),At=pl(_,`border-${Z}-width`,0),un=pl(_,`border-${ne}-width`,0);return R-_e-st-At-un},Ul=(_,R)=>{const Z=_.dom,ne=Z.getBoundingClientRect().width||Z.offsetWidth;return R==="border-box"?ne:Vl(_,ne,"left","right")},Is=_=>Ul(_,"content-box");var na=tinymce.util.Tools.resolve("tinymce.Env");const cd="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Mh=$e(5,_=>{const R=`${_+1}px`;return{title:R,value:R}}),Su=pt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],_=>({title:_,value:_.toLowerCase()})),Si="100%",oa=_=>{var R;const Z=_.dom,ne=(R=Z.getParent(_.selection.getStart(),Z.isBlock))!==null&&R!==void 0?R:_.getBody();return Is(lo.fromDom(ne))+"px"},$a=(_,R)=>md(_)||!Xi(_)?R:Vf(_)?{...R,width:oa(_)}:{...R,width:Si},li=(_,R)=>md(_)||Xi(_)?R:Vf(_)?{...R,width:oa(_)}:{...R,width:Si},Er=_=>R=>R.options.get(_),ld=_=>{const R=_.options.register;R("table_border_widths",{processor:"object[]",default:Mh}),R("table_border_styles",{processor:"object[]",default:Su}),R("table_cell_advtab",{processor:"boolean",default:!0}),R("table_row_advtab",{processor:"boolean",default:!0}),R("table_advtab",{processor:"boolean",default:!0}),R("table_appearance_options",{processor:"boolean",default:!0}),R("table_grid",{processor:"boolean",default:!na.deviceType.isTouch()}),R("table_cell_class_list",{processor:"object[]",default:[]}),R("table_row_class_list",{processor:"object[]",default:[]}),R("table_class_list",{processor:"object[]",default:[]}),R("table_toolbar",{processor:"string",default:cd}),R("table_background_color_map",{processor:"object[]",default:[]}),R("table_border_color_map",{processor:"object[]",default:[]})},Bs=Er("table_sizing_mode"),Kd=Er("table_border_widths"),zf=Er("table_border_styles"),Wl=Er("table_cell_advtab"),ud=Er("table_row_advtab"),dd=Er("table_advtab"),xu=Er("table_appearance_options"),Eu=Er("table_grid"),Xi=Er("table_style_by_css"),Ha=Er("table_cell_class_list"),Fg=Er("table_row_class_list"),bl=Er("table_class_list"),Fm=Er("table_toolbar"),fd=Er("table_background_color_map"),$m=Er("table_border_color_map"),Vf=_=>Bs(_)==="fixed",md=_=>Bs(_)==="responsive",Uf=_=>{const R=_.options,Z=R.get("table_default_styles");return R.isSet("table_default_styles")?Z:$a(_,Z)},Hm=_=>{const R=_.options,Z=R.get("table_default_attributes");return R.isSet("table_default_attributes")?Z:li(_,Z)},_u=(_,R)=>R.column>=_.startCol&&R.column+R.colspan-1<=_.finishCol&&R.row>=_.startRow&&R.row+R.rowspan-1<=_.finishRow,zm=(_,R)=>{let Z=!0;const ne=ce(_u,R);for(let _e=R.startRow;_e<=R.finishRow;_e++)for(let st=R.startCol;st<=R.finishCol;st++)Z=Z&&zl.getAt(_,_e,st).exists(ne);return Z?oe.some(R):oe.none()},be=(_,R)=>$t(Math.min(_.row,R.row),Math.min(_.column,R.column),Math.max(_.row+_.rowspan-1,R.row+R.rowspan-1),Math.max(_.column+_.colspan-1,R.column+R.colspan-1)),hd=(_,R,Z)=>{const ne=zl.findItem(_,R,ts),_e=zl.findItem(_,Z,ts);return ne.bind(st=>_e.map(At=>be(st,At)))},xi=(_,R,Z)=>hd(_,R,Z).bind(ne=>zm(_,ne)),E1=(_,R,Z)=>{const ne=$g(_);return xi(ne,R,Z)},$g=zl.fromTable,Tu=(_,R)=>{sr(_).each(ne=>{ne.dom.insertBefore(R.dom,_.dom)})},No=(_,R)=>{ml(_).fold(()=>{sr(_).each(_e=>{ka(_e,R)})},ne=>{Tu(ne,R)})},dr=(_,R)=>{Zs(_).fold(()=>{ka(_,R)},ne=>{_.dom.insertBefore(R.dom,ne.dom)})},ka=(_,R)=>{_.dom.appendChild(R.dom)},Zl=(_,R)=>{Tu(_,R),ka(R,_)},Nh=(_,R)=>{W(R,(Z,ne)=>{const _e=ne===0?_:R[ne-1];No(_e,Z)})},gd=(_,R)=>{W(R,Z=>{ka(_,Z)})},za=_=>{const R=_.dom;R.parentNode!==null&&R.parentNode.removeChild(R)},Wf=_=>{const R=vs(_);R.length>0&&Nh(_,R),za(_)},jl=((_,R)=>{const Z=st=>{if(!_(st))throw new Error("Can only get "+R+" value of a "+R+" node");return ne(st).getOr("")},ne=st=>_(st)?oe.from(st.dom.nodeValue):oe.none();return{get:Z,getOption:ne,set:(st,At)=>{if(!_(st))throw new Error("Can only set raw "+R+" value of a "+R+" node");st.dom.nodeValue=At}}})(si,"text"),ql=_=>jl.get(_),Yd=(_,R)=>jl.set(_,R);var vc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jf=()=>{const _=to=>lo.fromDom(to.dom.cloneNode(!1)),R=to=>En(to).dom,Z=to=>La(to)?Tt(to)==="body"?!0:fn(vc,Tt(to)):!1,ne=to=>La(to)?fn(["br","img","hr","input"],Tt(to)):!1,_e=to=>La(to)&&gc(to,"contenteditable")==="false",st=(to,gs)=>to.dom.compareDocumentPosition(gs.dom),At=(to,gs)=>{const ds=ys(to);ar(gs,ds)},un=to=>{const gs=Tt(to);return fn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],gs)},jn=to=>La(to)?bi(to,"lang"):oe.none();return{up:Ne({selector:Qn,closest:Ke,predicate:Ge,all:ri}),down:Ne({selector:ai,predicate:Ns}),styles:Ne({get:gl,getRaw:br,set:yu,remove:Pr}),attrs:Ne({get:gc,set:lr,remove:ba,copyTo:At}),insert:Ne({before:Tu,after:No,afterAll:Nh,append:ka,appendAll:gd,prepend:dr,wrap:Zl}),remove:Ne({unwrap:Wf,remove:za}),create:Ne({nu:lo.fromTag,clone:_,text:lo.fromText}),query:Ne({comparePosition:st,prevSibling:fl,nextSibling:ml}),property:Ne({children:vs,name:Tt,parent:sr,document:R,isText:si,isComment:Ur,isElement:La,isSpecial:un,getLanguage:jn,getText:ql,setText:Yd,isBoundary:Z,isEmptyTag:ne,isNonEditable:_e}),eq:ts,is:jc}};const va=(_,R,Z,ne)=>{const _e=Z[0],st=Z.slice(1);return ne(_,R,_e,st)},Gl=(_,R,Z)=>Z.length>0?va(_,R,Z,Ic):oe.none(),Ic=(_,R,Z,ne)=>{const _e=R(_,Z);return zo(ne,(st,At)=>{const un=R(_,At);return Va(_,st,un)},_e)},Va=(_,R,Z)=>R.bind(ne=>Z.filter(ce(_.eq,ne))),ku=Gl,Hg=jf(),qf=(_,R)=>ku(Hg,(Z,ne)=>_(ne),R),Jc=_=>Qn(_,"table"),pd=(_,R)=>{const Z=ai(_,R);return Z.length>0?oe.some(Z):oe.none()},zg=(_,R,Z)=>lt(_,R).bind(ne=>lt(_,Z).bind(_e=>qf(Jc,[ne,_e]).map(st=>({first:ne,last:_e,table:st})))),Vm=(_,R)=>pd(_,R),Vg=(_,R,Z)=>zg(_,R,Z).bind(ne=>{const _e=jn=>ts(_,jn),st="thead,tfoot,tbody,table",At=Qn(ne.first,st,_e),un=Qn(ne.last,st,_e);return At.bind(jn=>un.bind(to=>ts(jn,to)?E1(ne.table,ne.first,ne.last):oe.none()))}),Ug=_=>pt(_,lo.fromDom),Um="data-mce-selected",Kl="td["+Um+"],th["+Um+"]",Gf="data-mce-first-selected",vl="td["+Gf+"],th["+Gf+"]",Js="data-mce-last-selected",Jr="td["+Js+"],th["+Js+"]",Ei={selected:Um,selectedSelector:Kl,firstSelected:Gf,firstSelectedSelector:vl,lastSelected:Js,lastSelectedSelector:Jr},Kf=_=>Be(_).bind(R=>Vm(R,Ei.firstSelectedSelector)).fold(Ne(_),R=>R[0]),Xd=_=>(R,Z)=>{const ne=Tt(R),_e=ne==="col"||ne==="colgroup"?Kf(R):R;return Ke(_e,_,Z)},Qr=Xd("th,td,caption"),gn=Xd("th,td"),Yf=_=>Ug(_.model.table.getSelectedCells()),Au=(_,R)=>{const Z=gn(_),ne=Z.bind(_e=>Be(_e)).map(_e=>cn(_e));return vu(Z,ne,(_e,st)=>_o(st,At=>io(Ug(At.dom.cells),un=>gc(un,R)==="1"||ts(un,_e)))).getOr([])},_i=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Xo=_=>({value:Ph(_)}),bd=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Xf=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Wm=_=>bd.test(_)||Xf.test(_),Ph=_=>$i(_,"#").toUpperCase(),Xn=_=>Wm(_)?oe.some({value:Ph(_)}):oe.none(),vr=_=>{const R=_.toString(16);return(R.length===1?"0"+R:R).toUpperCase()},Ou=_=>{const R=vr(_.red)+vr(_.green)+vr(_.blue);return Xo(R)},Hi=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ti=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ji=(_,R,Z,ne)=>({red:_,green:R,blue:Z,alpha:ne}),sa=(_,R,Z,ne)=>{const _e=parseInt(_,10),st=parseInt(R,10),At=parseInt(Z,10),un=parseFloat(ne);return Ji(_e,st,At,un)},ui=_=>{const R=Hi.exec(_);if(R!==null)return oe.some(sa(R[1],R[2],R[3],"1"));const Z=Ti.exec(_);return Z!==null?oe.some(sa(Z[1],Z[2],Z[3],Z[4])):oe.none()},yc=_=>Xn(_).orThunk(()=>ui(_).map(Ou)).getOrThunk(()=>{const R=document.createElement("canvas");R.height=1,R.width=1;const Z=R.getContext("2d");Z.clearRect(0,0,R.width,R.height),Z.fillStyle="#FFFFFF",Z.fillStyle=_,Z.fillRect(0,0,1,1);const ne=Z.getImageData(0,0,1,1).data,_e=ne[0],st=ne[1],At=ne[2],un=ne[3];return Ou(Ji(_e,st,At,un))}),Zm=_=>ui(_).map(Ou).map(R=>"#"+R.value).getOr(_),Ls=_=>{let R=_;return{get:()=>R,set:_e=>{R=_e}}},jm=_=>{const R=Ls(oe.none()),Z=()=>R.get().each(_);return{clear:()=>{Z(),R.set(oe.none())},isSet:()=>R.get().isSome(),get:()=>R.get(),set:un=>{Z(),R.set(oe.some(un))}}},_r=()=>jm(_=>_.unbind()),Du=(_,R,Z)=>ne=>{const _e=_r(),st=ad(Z),At=()=>{const un=Yf(_),jn=to=>_.formatter.match(R,{value:Z},to.dom,st);st?(ne.setActive(!io(un,jn)),_e.set(_.formatter.formatChanged(R,to=>ne.setActive(!to),!0))):(ne.setActive(Ao(un,jn)),_e.set(_.formatter.formatChanged(R,ne.setActive,!1,{value:Z})))};return _.initialized?At():_.on("init",At),_e.clear},yl=_=>xo(_,"menu"),ws=_=>pt(_,R=>{const Z=R.text||R.title||"";return yl(R)?{text:Z,items:ws(R.menu)}:{text:Z,value:R.value}}),Qc=_=>_.length?oe.some(ws([{text:"Select...",value:"mce-no-match"},..._])):oe.none(),Jd=(_,R,Z,ne)=>pt(R,_e=>{const st=_e.text||_e.title;return yl(_e)?{type:"nestedmenuitem",text:st,getSubmenuItems:()=>Jd(_,_e.menu,Z,ne)}:{text:st,type:"togglemenuitem",onAction:()=>ne(_e.value),onSetup:Du(_,Z,_e.value)}}),Ru=(_,R)=>Z=>{_.execCommand("mceTableApplyCellStyle",!1,{[R]:Z})},Fs=_=>xe(_,R=>yl(R)?[{...R,menu:Fs(R.menu)}]:ii(R.value)?[R]:[]),Yl=(_,R,Z,ne)=>_e=>_e(Jd(_,R,Z,ne)),wc=(_,R,Z)=>{const ne=pt(R,_e=>({text:_e.title,value:"#"+yc(_e.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:ne.length>0?ne:void 0,allowCustomColors:!1},onAction:_e=>{const st=_e.value==="remove"?"":_e.value;_.execCommand("mceTableApplyCellStyle",!1,{[Z]:st})}}]},po=_=>()=>{const Z=_.queryCommandValue("mceTableRowType")==="header"?"body":"header";_.execCommand("mceTableRowType",!1,{type:Z})},vd=_=>()=>{const Z=_.queryCommandValue("mceTableColType")==="th"?"td":"th";_.execCommand("mceTableColType",!1,{type:Z})},qm=_=>Qc(Ha(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),k=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:_i}],B=_=>k.concat(qm(_).toArray()),q=(_,R)=>{const ne=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ws(zf(_)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:R==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(ne):ne}},Se={normal:(_,R)=>{const Z=_.dom;return{setAttrib:(At,un)=>{Z.setAttrib(R,At,un)},setStyle:(At,un)=>{Z.setStyle(R,At,un)},setFormat:(At,un)=>{un===""?_.formatter.remove(At,{value:null},R,!0):_.formatter.apply(At,{value:un},R)}}}},gt=Fi("th"),kn=(_,R)=>_&&R?"sectionCells":_?"section":"cells",eo=_=>{const R=_.section==="thead",Z=Gd(Gn(_.cells),"th");return _.section==="tfoot"?{type:"footer"}:R||Z?{type:"header",subType:kn(R,Z)}:{type:"body"}},Gn=_=>{const R=_o(_,Z=>gt(Z.element));return R.length===0?oe.some("td"):R.length===_.length?oe.some("th"):oe.none()},pn=_=>{const R=pt(_,_e=>eo(_e).type),Z=fn(R,"header"),ne=fn(R,"footer");if(!Z&&!ne)return oe.some("body");{const _e=fn(R,"body");return Z&&!_e&&!ne?oe.some("header"):!Z&&!_e&&ne?oe.some("footer"):oe.none()}},Qs=_=>{let R=!1,Z;return(...ne)=>(R||(R=!0,Z=_.apply(null,ne)),Z)},Tr=(_,R)=>zr(_.all,Z=>_t(Z.cells,ne=>ts(R,ne.element))),ki=(_,R,Z)=>{const ne=pt(R.selection,st=>H(st).bind(At=>Tr(_,At)).filter(Z)),_e=pc(ne);return bc(_e.length>0,_e)},Mu=(_,R)=>R.mergable,_1=(_,R)=>R.unmergable,Qd=(_,R)=>ki(_,R,Gt),Wg=(_,R)=>Tr(_,R).exists(Z=>!Z.isLocked),Ua=(_,R)=>Ao(R,Z=>Wg(_,Z)),Zg=(_,R)=>Mu(_,R).filter(Z=>Ua(_,Z.cells)),y0=(_,R)=>_1(_,R).filter(Z=>Ua(_,Z));({...{generate:_=>{if(!j(_))throw new Error("cases must be an array");if(_.length===0)throw new Error("there must be at least one case");const R=[],Z={};return W(_,(ne,_e)=>{const st=Xt(ne);if(st.length!==1)throw new Error("one and only one name per case");const At=st[0],un=ne[At];if(Z[At]!==void 0)throw new Error("duplicate key detected:"+At);if(At==="cata")throw new Error("cannot have a case named cata (sorry)");if(!j(un))throw new Error("case arguments must be an array");R.push(At),Z[At]=(...jn)=>{const to=jn.length;if(to!==un.length)throw new Error("Wrong number of arguments to case "+At+". Expected "+un.length+" ("+un+"), got "+to);return{fold:(...ds)=>{if(ds.length!==_.length)throw new Error("Wrong number of arguments to fold. Expected "+_.length+", got "+ds.length);return ds[_e].apply(null,jn)},match:ds=>{const Hs=Xt(ds);if(R.length!==Hs.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+`
Actual: `+Hs.join(","));if(!Ao(R,Ql=>fn(Hs,Ql)))throw new Error("Not all branches were specified when using match. Specified: "+Hs.join(", ")+`
Required: `+R.join(", "));return ds[At].apply(null,jn)},log:ds=>{console.log(ds,{constructors:R,constructor:At,params:jn})}}}}),Z}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const k1=(_,R)=>{const Z=zl.fromTable(_);return Qd(Z,R).bind(_e=>{const st=_e[_e.length-1],At=_e[0].row,un=st.row+st.rowspan,jn=Z.all.slice(At,un);return pn(jn)}).getOr("")},Za=_=>Pc(_,"rgb")?Zm(_):_,Bn=_=>{const R=lo.fromDom(_);return{borderwidth:br(R,"border-width").getOr(""),borderstyle:br(R,"border-style").getOr(""),bordercolor:br(R,"border-color").map(Za).getOr(""),backgroundcolor:br(R,"background-color").map(Za).getOr("")}},el=_=>{const R=_[0],Z=_.slice(1);return W(Z,ne=>{W(Xt(R),_e=>{en(ne,(st,At)=>{const un=R[_e];un!==""&&_e===At&&un!==st&&(R[_e]=_e==="class"?"mce-no-match":"")})})}),R},Jf=(_,R,Z,ne)=>_t(_,_e=>!ge(Z.formatter.matchNode(ne,R+_e))).getOr(""),Gm=ce(Jf,["left","center","right"],"align"),w0=ce(Jf,["top","middle","bottom"],"valign"),qg=(_,R)=>{const Z=Uf(_),ne=Hm(_),_e=()=>({borderstyle:Hn(Z,"border-style").getOr(""),bordercolor:Za(Hn(Z,"border-color").getOr("")),backgroundcolor:Za(Hn(Z,"background-color").getOr(""))}),st={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},At=()=>{const gs=Z["border-width"];return Xi(_)&&gs?{border:gs}:Hn(ne,"border").fold(()=>({}),ds=>({border:ds}))},un=R?_e():{},jn=()=>{const gs=Hn(Z,"border-spacing").or(Hn(ne,"cellspacing")).fold(()=>({}),Hs=>({cellspacing:Hs})),ds=Hn(Z,"border-padding").or(Hn(ne,"cellpadding")).fold(()=>({}),Hs=>({cellpadding:Hs}));return{...gs,...ds}};return{...st,...Z,...ne,...un,...At(),...jn()}},wl=_=>Be(lo.fromDom(_)).map(R=>{const Z={selection:Ug(_.cells)};return k1(R,Z)}).getOr(""),Nu=(_,R,Z)=>{const ne=(un,jn)=>{const to=br(lo.fromDom(jn),"border-width");return Xi(_)&&to.isSome()?to.getOr(""):un.getAttrib(jn,"border")||Ta(_.dom,jn,"border-width")||Ta(_.dom,jn,"border")||""},_e=_.dom,st=Xi(_)?_e.getStyle(R,"border-spacing")||_e.getAttrib(R,"cellspacing"):_e.getAttrib(R,"cellspacing")||_e.getStyle(R,"border-spacing"),At=Xi(_)?Ta(_e,R,"padding")||_e.getAttrib(R,"cellpadding"):_e.getAttrib(R,"cellpadding")||Ta(_e,R,"padding");return{width:_e.getStyle(R,"width")||_e.getAttrib(R,"width"),height:_e.getStyle(R,"height")||_e.getAttrib(R,"height"),cellspacing:st??"",cellpadding:At??"",border:ne(_e,R),caption:!!_e.select("caption",R)[0],class:_e.getAttrib(R,"class",""),align:Gm(_,R),...Z?Bn(R):{}}},ef=(_,R,Z)=>{const ne=_.dom;return{height:ne.getStyle(R,"height")||ne.getAttrib(R,"height"),class:ne.getAttrib(R,"class",""),type:wl(R),align:Gm(_,R),...Z?Bn(R):{}}},Wt=(_,R,Z,ne)=>{const _e=_.dom,st=ne.getOr(R);return{width:((un,jn)=>_e.getStyle(un,jn)||_e.getAttrib(un,jn))(st,"width"),scope:_e.getAttrib(R,"scope"),celltype:es(R),class:_e.getAttrib(R,"class",""),halign:Gm(_,R),valign:w0(_,R),...Z?Bn(R):{}}},tl=(_,R)=>{const Z=zl.fromTable(_),ne=zl.justCells(Z),_e=_o(ne,st=>io(R,At=>ts(st.element,At)));return pt(_e,st=>({element:st.element.dom,column:zl.getColumnAt(Z,st.column).map(At=>At.element.dom)}))},A1=(_,R,Z,ne)=>{ne("scope")&&_.setAttrib("scope",Z.scope),ne("class")&&Z.class!=="mce-no-match"&&_.setAttrib("class",Z.class),ne("width")&&R.setStyle("width",Ms(Z.width))},Qf=(_,R,Z)=>{Z("backgroundcolor")&&_.setFormat("tablecellbackgroundcolor",R.backgroundcolor),Z("bordercolor")&&_.setFormat("tablecellbordercolor",R.bordercolor),Z("borderstyle")&&_.setFormat("tablecellborderstyle",R.borderstyle),Z("borderwidth")&&_.setFormat("tablecellborderwidth",Ms(R.borderwidth))},Cl=(_,R,Z,ne)=>{const _e=R.length===1;W(R,st=>{const At=st.element,un=_e?Gt:ne,jn=Se.normal(_,At),to=st.column.map(gs=>Se.normal(_,gs)).getOr(jn);A1(jn,to,Z,un),Wl(_)&&Qf(jn,Z,un),ne("halign")&&Ci(_,At,Z.halign),ne("valign")&&Cu(_,At,Z.valign)})},Ih=(_,R)=>{_.execCommand("mceTableCellType",!1,{type:R.celltype,no_events:!0})},tf=(_,R,Z,ne)=>{const _e=so(ne,(st,At)=>Z[At]!==st);M(_e)>0&&R.length>=1&&Be(R[0]).each(st=>{const At=tl(st,R),un=M(so(_e,(to,gs)=>gs!=="scope"&&gs!=="celltype"))>0,jn=ft(_e,"celltype");(un||ft(_e,"scope"))&&Cl(_,At,ne,ce(ft,_e)),jn&&Ih(_,ne),Bm(_,st.dom,{structure:jn,style:un})})},em=(_,R,Z,ne)=>{const _e=ne.getData();ne.close(),_.undoManager.transact(()=>{tf(_,R,Z,_e),_.focus()})},Bh=(_,R)=>{const Z=Be(R[0]).map(ne=>pt(tl(ne,R),_e=>Wt(_,_e.element,Wl(_),_e.column)));return el(Z.getOrDie())},Xl=_=>{const R=Yf(_);if(R.length===0)return;const Z=Bh(_,R),ne={type:"tabpanel",tabs:[{title:"General",name:"general",items:B(_)},q(_,"cell")]},_e={type:"panel",items:[{type:"grid",columns:2,items:B(_)}]};_.windowManager.open({title:"Cell Properties",size:"normal",body:Wl(_)?ne:_e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Z,onSubmit:ce(em,_,R,Z)})},C0=_=>Qc(Fg(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),fr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],bt=_=>fr.concat(C0(_).toArray()),zi=(_,R,Z)=>{Z("class")&&R.class!=="mce-no-match"&&_.setAttrib("class",R.class),Z("height")&&_.setStyle("height",Ms(R.height))},Jl=(_,R,Z)=>{Z("backgroundcolor")&&_.setStyle("background-color",R.backgroundcolor),Z("bordercolor")&&_.setStyle("border-color",R.bordercolor),Z("borderstyle")&&_.setStyle("border-style",R.borderstyle)},ra=(_,R,Z,ne)=>{const st=R.length===1?Gt:ne;W(R,At=>{const un=hl(lo.fromDom(At),"td,th"),jn=Se.normal(_,At);zi(jn,Z,st),ud(_)&&Jl(jn,Z,st),ne("height")&&W(un,to=>{_.dom.setStyle(to.dom,"height",null)}),ne("align")&&Ci(_,At,Z.align)})},Km=(_,R)=>{_.execCommand("mceTableRowType",!1,{type:R.type,no_events:!0})},aa=(_,R,Z,ne)=>{const _e=so(ne,(st,At)=>Z[At]!==st);if(M(_e)>0){const st=ft(_e,"type"),At=st?M(_e)>1:!0;At&&ra(_,R,ne,ce(ft,_e)),st&&Km(_,ne),Be(lo.fromDom(R[0])).each(un=>Bm(_,un.dom,{structure:st,style:At}))}},qo=(_,R,Z,ne)=>{const _e=ne.getData();ne.close(),_.undoManager.transact(()=>{aa(_,R,Z,_e),_.focus()})},Gg=_=>{const R=Au(ns(_),Ei.selected);if(R.length===0)return;const Z=pt(R,At=>ef(_,At.dom,ud(_))),ne=el(Z),_e={type:"tabpanel",tabs:[{title:"General",name:"general",items:bt(_)},q(_,"row")]},st={type:"panel",items:[{type:"grid",columns:2,items:bt(_)}]};_.windowManager.open({title:"Row Properties",size:"normal",body:ud(_)?_e:st,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ne,onSubmit:ce(qo,_,pt(R,At=>At.dom),ne)})},rt=(_,R,Z)=>{const ne=Z?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],_e=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],st=xu(_)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],At=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],un=R.length>0?[{name:"class",type:"listbox",label:"Class",items:R}]:[];return ne.concat(_e).concat(st).concat(At).concat(un)},Uo=(_,R,Z,ne)=>{if(R.tagName==="TD"||R.tagName==="TH")K(Z)&&Xe(ne)?_.setStyle(R,Z,ne):_.setStyles(R,Z);else if(R.children)for(let _e=0;_e<R.children.length;_e++)Uo(_,R.children[_e],Z,ne)},Kg=(_,R,Z,ne)=>{const _e=_.dom,st={},At={},un=Xi(_),jn=dd(_),to=parseFloat(Z.border)===0;if(!ge(Z.class)&&Z.class!=="mce-no-match"&&(st.class=Z.class),At.height=Ms(Z.height),un?At.width=Ms(Z.width):_e.getAttrib(R,"width")&&(st.width=_a(Z.width)),un?(to?(st.border=0,At["border-width"]=""):(At["border-width"]=Ms(Z.border),st.border=1),At["border-spacing"]=Ms(Z.cellspacing)):(st.border=to?0:Z.border,st.cellpadding=Z.cellpadding,st.cellspacing=Z.cellspacing),un&&R.children){const gs={};if(to?gs["border-width"]="":ne.border&&(gs["border-width"]=Ms(Z.border)),ne.cellpadding&&(gs.padding=Ms(Z.cellpadding)),jn&&ne.bordercolor&&(gs["border-color"]=Z.bordercolor),!yn(gs))for(let ds=0;ds<R.children.length;ds++)Uo(_e,R.children[ds],gs)}if(jn){const gs=Z;At["background-color"]=gs.backgroundcolor,At["border-color"]=gs.bordercolor,At["border-style"]=gs.borderstyle}_e.setStyles(R,{...Uf(_),...At}),_e.setAttribs(R,{...Hm(_),...st})},ia=(_,R,Z,ne)=>{const _e=_.dom,st=ne.getData(),At=so(st,(un,jn)=>Z[jn]!==un);ne.close(),_.undoManager.transact(()=>{if(!R){const un=Gc(st.cols).getOr(1),jn=Gc(st.rows).getOr(1);_.execCommand("mceInsertTable",!1,{rows:jn,columns:un}),R=gn(ns(_),Kr(_)).bind(to=>Be(to,Kr(_))).map(to=>to.dom).getOrDie()}if(M(At)>0){const un={border:ft(At,"border"),bordercolor:ft(At,"bordercolor"),cellpadding:ft(At,"cellpadding")};Kg(_,R,st,un);const jn=_e.select("caption",R)[0];(jn&&!st.caption||!jn&&st.caption)&&_.execCommand("mceTableToggleCaption"),Ci(_,R,st.align)}if(_.focus(),_.addVisual(),M(At)>0){const un=ft(At,"caption"),jn=un?M(At)>1:!0;Bm(_,R,{structure:un,style:jn})}})},ya=(_,R)=>{const Z=_.dom;let ne,_e=qg(_,dd(_));R?(_e.cols="1",_e.rows="1",dd(_)&&(_e.borderstyle="",_e.bordercolor="",_e.backgroundcolor="")):(ne=Z.getParent(_.selection.getStart(),"table",_.getBody()),ne?_e=Nu(_,ne,dd(_)):dd(_)&&(_e.borderstyle="",_e.bordercolor="",_e.backgroundcolor=""));const st=Qc(bl(_));st.isSome()&&_e.class&&(_e.class=_e.class.replace(/\s*mce\-item\-table\s*/g,""));const At={type:"grid",columns:2,items:rt(_,st.getOr([]),R)},un=()=>({type:"panel",items:[At]}),jn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[At]},q(_,"table")]}),to=dd(_)?jn():un();_.windowManager.open({title:"Table Properties",size:"normal",body:to,onSubmit:ce(ia,_,ne,_e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:_e})},Sl=_=>{const R=Z=>{Wr(ns(_))&&Z()};en({mceTableProps:ce(ya,_,!1),mceTableRowProps:ce(Gg,_),mceTableCellProps:ce(Xl,_),mceInsertTableDialog:ce(ya,_,!0)},(Z,ne)=>_.addCommand(ne,()=>R(Z)))},O1=(_,R)=>Os(_,R).isSome(),nf=ln,D1=_=>{const R=(ne,_e)=>bi(ne,_e).exists(st=>parseInt(st,10)>1),Z=ne=>R(ne,"rowspan")||R(ne,"colspan");return _.length>0&&Ao(_,Z)?oe.some(_):oe.none()},Cc=(_,R,Z)=>R.length<=1?oe.none():Vg(_,Z.firstSelectedSelector,Z.lastSelectedSelector).map(ne=>({bounds:ne,cells:R})),Wo=_=>({element:_,mergable:oe.none(),unmergable:oe.none(),selection:[_]}),Pu=(_,R,Z)=>({element:Z,mergable:Cc(R,_,Ei),unmergable:D1(_),selection:nf(_)}),Lh=_=>{const R=Ls(oe.none()),Z=Ls([]);let ne=oe.none();const _e=Fi("caption"),st=Ro=>ne.forall(zs=>!zs[Ro]),At=()=>Qr(ns(_),Kr(_)),un=()=>Qr(cs(_),Kr(_)),jn=()=>At().bind(Ro=>yo(vu(Be(Ro),un().bind(Be),(zs,Oi)=>ts(zs,Oi)?_e(Ro)?oe.some(Wo(Ro)):oe.some(Pu(Yf(_),zs,Ro)):oe.none()))),to=Ro=>Be(Ro.element).map(Oi=>{const Ir=zl.fromTable(Oi),Hh=Qd(Ir,Ro).getOr([]),Qg=pi(Hh,(wd,Bc)=>(Bc.isLocked&&(wd.onAny=!0,Bc.column===0?wd.onFirst=!0:Bc.column+Bc.colspan>=Ir.grid.columns&&(wd.onLast=!0)),wd),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Zg(Ir,Ro).isSome(),unmergeable:y0(Ir,Ro).isSome(),locked:Qg}}),gs=()=>{R.set(Qs(jn)()),ne=R.get().bind(to),W(Z.get(),Je)},ds=Ro=>(Ro(),Z.set(Z.get().concat([Ro])),()=>{Z.set(_o(Z.get(),zs=>zs!==Ro))}),Hs=(Ro,zs)=>ds(()=>R.get().fold(()=>{Ro.setEnabled(!1)},Oi=>{Ro.setEnabled(!zs(Oi)&&_.selection.isEditable())})),Sc=(Ro,zs,Oi)=>ds(()=>R.get().fold(()=>{Ro.setEnabled(!1),Ro.setActive(!1)},Ir=>{Ro.setEnabled(!zs(Ir)&&_.selection.isEditable()),Ro.setActive(Oi(Ir))})),Ql=Ro=>ne.exists(zs=>zs.locked[Ro]),Ai=Ro=>Hs(Ro,zs=>!1),xl=Ro=>Hs(Ro,zs=>_e(zs.element)),Ym=Ro=>zs=>Hs(zs,Oi=>_e(Oi.element)||Ql(Ro)),Iu=Ro=>zs=>Hs(zs,Oi=>_e(Oi.element)||Ro().isNone()),eu=(Ro,zs)=>Oi=>Hs(Oi,Ir=>_e(Ir.element)||Ro().isNone()||Ql(zs)),of=Ro=>Hs(Ro,zs=>st("mergeable")),Xg=Ro=>Hs(Ro,zs=>st("unmergeable")),$h=Ro=>Sc(Ro,Dn,zs=>Be(zs.element,Kr(_)).exists(Ir=>O1(Ir,"caption"))),Jg=(Ro,zs)=>Oi=>Sc(Oi,Ir=>_e(Ir.element),()=>_.queryCommandValue(Ro)===zs),ua=Jg("mceTableRowType","header"),tu=Jg("mceTableColType","th");return _.on("NodeChange ExecCommand TableSelectorChange",gs),{onSetupTable:Ai,onSetupCellOrRow:xl,onSetupColumn:Ym,onSetupPasteable:Iu,onSetupPasteableColumn:eu,onSetupMergeable:of,onSetupUnmergeable:Xg,resetTargets:gs,onSetupTableWithCaption:$h,onSetupTableRowHeaders:ua,onSetupTableColumnHeaders:tu,targets:R.get}};var yr=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Fh="x-tinymce/dom-table-",yd=Fh+"rows",Yg=Fh+"columns",ca=_=>{var R;const Z=(R=yr.read())!==null&&R!==void 0?R:[];return zr(Z,ne=>oe.from(ne.getType(_)))},la=()=>ca(yd),Pe=()=>ca(Yg),$s=_=>R=>{const Z=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",Z),Z(),()=>{_.off("NodeChange",Z)}},R1=(_,R)=>{_.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:$s(_),fetch:un=>un("inserttable | cell row column | advtablesort | tableprops deletetable")});const Z=un=>()=>_.execCommand(un),ne=(un,jn)=>{_.queryCommandSupported(jn.command)&&_.ui.registry.addButton(un,{...jn,onAction:Lt(jn.onAction)?jn.onAction:Z(jn.command)})},_e=(un,jn)=>{_.queryCommandSupported(jn.command)&&_.ui.registry.addToggleButton(un,{...jn,onAction:Lt(jn.onAction)?jn.onAction:Z(jn.command)})};ne("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:R.onSetupTable}),ne("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:R.onSetupTable}),ne("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:R.onSetupCellOrRow}),ne("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:R.onSetupMergeable}),ne("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:R.onSetupUnmergeable}),ne("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:R.onSetupCellOrRow}),ne("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:R.onSetupCellOrRow}),ne("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:R.onSetupCellOrRow}),ne("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:R.onSetupCellOrRow}),ne("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:R.onSetupColumn("onFirst")}),ne("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:R.onSetupColumn("onLast")}),ne("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:R.onSetupColumn("onAny")}),ne("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:R.onSetupCellOrRow}),ne("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:R.onSetupCellOrRow}),ne("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:R.onSetupPasteable(la)}),ne("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:R.onSetupPasteable(la)}),ne("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:R.onSetupColumn("onAny")}),ne("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:R.onSetupColumn("onAny")}),ne("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:R.onSetupPasteableColumn(Pe,"onFirst")}),ne("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:R.onSetupPasteableColumn(Pe,"onLast")}),ne("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:$s(_)});const st=Fs(bl(_));st.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Yl(_,st,"tableclass",un=>_.execCommand("mceTableToggleClass",!1,un)),onSetup:R.onSetupTable});const At=Fs(Ha(_));At.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Yl(_,At,"tablecellclass",un=>_.execCommand("mceTableCellToggleClass",!1,un)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Yl(_,_i,"tablecellverticalalign",Ru(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Yl(_,Kd(_),"tablecellborderwidth",Ru(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Yl(_,zf(_),"tablecellborderstyle",Ru(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:un=>un(wc(_,fd(_),"background-color")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:un=>un(wc(_,$m(_),"border-color")),onSetup:R.onSetupCellOrRow})),_e("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),_e("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:po(_),onSetup:R.onSetupTableRowHeaders}),_e("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:vd(_),onSetup:R.onSetupTableColumnHeaders})},er=_=>{const R=ne=>_.dom.is(ne,"table")&&_.getBody().contains(ne)&&_.dom.isEditable(ne.parentNode),Z=Fm(_);Z.length>0&&_.ui.registry.addContextToolbar("table",{predicate:R,items:Z,scope:"node",position:"node"})},Aa=_=>R=>{const Z=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",Z),Z(),()=>{_.off("NodeChange",Z)}},Oa=(_,R)=>{const Z=ds=>()=>_.execCommand(ds),ne=(ds,Hs)=>_.queryCommandSupported(Hs.command)?(_.ui.registry.addMenuItem(ds,{...Hs,onAction:Lt(Hs.onAction)?Hs.onAction:Z(Hs.command)}),!0):!1,_e=(ds,Hs)=>{_.queryCommandSupported(Hs.command)&&_.ui.registry.addToggleMenuItem(ds,{...Hs,onAction:Lt(Hs.onAction)?Hs.onAction:Z(Hs.command)})},st=ds=>{_.execCommand("mceInsertTable",!1,{rows:ds.numRows,columns:ds.numColumns})},At=[ne("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:R.onSetupCellOrRow}),ne("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:R.onSetupCellOrRow}),ne("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:R.onSetupCellOrRow}),ne("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:R.onSetupCellOrRow}),ne("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:R.onSetupCellOrRow}),ne("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:R.onSetupCellOrRow}),ne("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:R.onSetupPasteable(la)}),ne("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:R.onSetupPasteable(la)})],un=[ne("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:R.onSetupColumn("onFirst")}),ne("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:R.onSetupColumn("onLast")}),ne("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:R.onSetupColumn("onAny")}),ne("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:R.onSetupColumn("onAny")}),ne("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:R.onSetupColumn("onAny")}),ne("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:R.onSetupPasteableColumn(Pe,"onFirst")}),ne("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:R.onSetupPasteableColumn(Pe,"onLast")})],jn=[ne("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:R.onSetupCellOrRow}),ne("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:R.onSetupMergeable}),ne("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:R.onSetupUnmergeable})];Eu(_)?_.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:st}],onSetup:Aa(_)}):_.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:Z("mceInsertTableDialog"),onSetup:Aa(_)}),_.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:Z("mceInsertTableDialog"),onSetup:Aa(_)}),ne("tableprops",{text:"Table properties",onSetup:R.onSetupTable,command:"mceTableProps"}),ne("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:R.onSetupTable,command:"mceTableDelete"}),fn(At,!0)&&_.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ne("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),fn(un,!0)&&_.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ne("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),fn(jn,!0)&&_.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ne("tablecellprops tablemergecells tablesplitcells")}),_.ui.registry.addContextMenu("table",{update:()=>(R.resetTargets(),R.targets().fold(Ne(""),ds=>Tt(ds.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const to=Fs(bl(_));to.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Jd(_,to,"tableclass",ds=>_.execCommand("mceTableToggleClass",!1,ds)),onSetup:R.onSetupTable});const gs=Fs(Ha(_));gs.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Jd(_,gs,"tablecellclass",ds=>_.execCommand("mceTableCellToggleClass",!1,ds)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Jd(_,_i,"tablecellverticalalign",Ru(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Jd(_,Kd(_),"tablecellborderwidth",Ru(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Jd(_,zf(_),"tablecellborderstyle",Ru(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>wc(_,fd(_),"background-color"),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>wc(_,$m(_),"border-color"),onSetup:R.onSetupCellOrRow})),_e("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),_e("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:po(_),onSetup:R.onSetupTableRowHeaders}),_e("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:vd(_),onSetup:R.onSetupTableRowHeaders})},os=_=>{const R=Lh(_);ld(_),Sl(_),Oa(_,R),R1(_,R),er(_)};var M1=()=>{p.add("table",os)};M1()}()),VJ}var WJ;function kse(){return WJ||(WJ=1,Tse()),zJ}kse();var ZJ={},jJ={},qJ;function Ase(){return qJ||(qJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Y,me,ke)=>{var Ye;return ke(Y,me.prototype)?!0:((Ye=Y.constructor)===null||Ye===void 0?void 0:Ye.name)===me.name},w=Y=>{const me=typeof Y;return Y===null?"null":me==="object"&&Array.isArray(Y)?"array":me==="object"&&g(Y,String,(ke,Ye)=>Ye.isPrototypeOf(ke))?"string":me},E=Y=>me=>w(me)===Y,N=Y=>me=>typeof me===Y,V=Y=>me=>Y===me,K=E("string"),j=E("object"),ue=E("array"),ge=V(null),Ce=N("boolean"),Xe=Y=>Y==null,Lt=Y=>!Xe(Y),Zt=N("function"),Pt=(Y,me)=>{if(ue(Y)){for(let ke=0,Ye=Y.length;ke<Ye;++ke)if(!me(Y[ke]))return!1;return!0}return!1},Ct=()=>{},Ne=Y=>()=>Y,ln=(Y,me)=>Y===me;class xt{constructor(me,ke){this.tag=me,this.value=ke}static some(me){return new xt(!0,me)}static none(){return xt.singletonNone}fold(me,ke){return this.tag?ke(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?xt.some(me(this.value)):xt.none()}bind(me){return this.tag?me(this.value):xt.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:xt.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me??"Called getOrDie on None")}static from(me){return Lt(me)?xt.some(me):xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xt.singletonNone=new xt(!1);const ce=Array.prototype.indexOf,Je=Array.prototype.push,Dn=(Y,me)=>ce.call(Y,me),Gt=(Y,me)=>Dn(Y,me)>-1,oe=(Y,me)=>{const ke=Y.length,Ye=new Array(ke);for(let kt=0;kt<ke;kt++){const nn=Y[kt];Ye[kt]=me(nn,kt)}return Ye},Xt=(Y,me)=>{for(let ke=0,Ye=Y.length;ke<Ye;ke++){const kt=Y[ke];me(kt,ke)}},In=(Y,me,ke)=>(Xt(Y,(Ye,kt)=>{ke=me(ke,Ye,kt)}),ke),en=Y=>{const me=[];for(let ke=0,Ye=Y.length;ke<Ye;++ke){if(!ue(Y[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+Y);Je.apply(me,Y[ke])}return me},Fe=(Y,me)=>en(oe(Y,me)),ve=(Y,me)=>{for(let ke=0;ke<Y.length;ke++){const Ye=me(Y[ke],ke);if(Ye.isSome())return Ye}return xt.none()},so=(Y,me,ke=ln)=>Y.exists(Ye=>ke(Ye,me)),at=Y=>{const me=[],ke=Ye=>{me.push(Ye)};for(let Ye=0;Ye<Y.length;Ye++)Y[Ye].each(ke);return me},it=(Y,me)=>Y?xt.some(me):xt.none(),M=Y=>me=>me.options.get(Y),Hn=Y=>{const me=Y.options.register;me("link_assume_external_targets",{processor:ke=>{const Ye=K(ke)||Ce(ke);return Ye?ke===!0?{value:1,valid:Ye}:ke==="http"||ke==="https"?{value:ke,valid:Ye}:{value:0,valid:Ye}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),me("link_context_toolbar",{processor:"boolean",default:!1}),me("link_list",{processor:ke=>K(ke)||Zt(ke)||Pt(ke,j)}),me("link_default_target",{processor:"string"}),me("link_default_protocol",{processor:"string",default:"https"}),me("link_target_list",{processor:ke=>Ce(ke)||Pt(ke,j),default:!0}),me("link_rel_list",{processor:"object[]",default:[]}),me("link_class_list",{processor:"object[]",default:[]}),me("link_title",{processor:"boolean",default:!0}),me("allow_unsafe_link_target",{processor:"boolean",default:!1}),me("link_quicklink",{processor:"boolean",default:!1})},ft=M("link_assume_external_targets"),xo=M("link_context_toolbar"),yn=M("link_list"),Ae=M("link_default_target"),wt=M("link_default_protocol"),Mn=M("link_target_list"),fn=M("link_rel_list"),io=M("link_class_list"),$e=M("link_title"),pt=M("allow_unsafe_link_target"),W=M("link_quicklink"),Us=Object.keys,no=Object.hasOwnProperty,_o=(Y,me)=>{const ke=Us(Y);for(let Ye=0,kt=ke.length;Ye<kt;Ye++){const nn=ke[Ye],$t=Y[nn];me($t,nn)}},zo=Y=>(me,ke)=>{Y[ke]=me},pi=(Y,me,ke,Ye)=>{_o(Y,(kt,nn)=>{(me(kt,nn)?ke:Ye)(kt,nn)})},et=(Y,me)=>{const ke={};return pi(Y,me,zo(ke),Ct),ke},_t=(Y,me)=>no.call(Y,me),dt=(Y,me)=>_t(Y,me)&&Y[me]!==void 0&&Y[me]!==null;var xe=tinymce.util.Tools.resolve("tinymce.util.URI"),Ao=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Oo=tinymce.util.Tools.resolve("tinymce.util.Tools");const Kt=Y=>Lt(Y)&&Y.nodeName.toLowerCase()==="a",is=Y=>Kt(Y)&&!!Vo(Y),Fo=(Y,me)=>{if(Y.collapsed)return[];{const ke=Y.cloneContents(),Ye=ke.firstChild,kt=new Ao(Ye,ke),nn=[];let $t=Ye;do me($t)&&nn.push($t);while($t=kt.next());return nn}},zr=Y=>/^\w+:/i.test(Y),Vo=Y=>{var me,ke;return(ke=(me=Y.getAttribute("data-mce-href"))!==null&&me!==void 0?me:Y.getAttribute("href"))!==null&&ke!==void 0?ke:""},Ws=(Y,me)=>{const ke=["noopener"],Ye=Y?Y.split(/\s+/):[],kt=Vn=>Oo.trim(Vn.sort().join(" ")),nn=Vn=>(Vn=$t(Vn),Vn.length>0?Vn.concat(ke):ke),$t=Vn=>Vn.filter(To=>Oo.inArray(ke,To)===-1),Nn=me?nn(Ye):$t(Ye);return Nn.length>0?kt(Nn):""},oi=Y=>Y.replace(/\uFEFF/g,""),_s=(Y,me)=>(me=me||Gr(Y.selection.getRng())[0]||Y.selection.getNode(),hs(me)?xt.from(Y.dom.select("a[href]",me)[0]):xt.from(Y.dom.getParent(me,"a[href]"))),Ss=(Y,me)=>_s(Y,me).isSome(),xs=(Y,me)=>{const ke=me.fold(()=>Y.getContent({format:"text"}),Ye=>Ye.innerText||Ye.textContent||"");return oi(ke)},Gr=Y=>Fo(Y,is),Ts=Y=>Oo.grep(Y,is),Ko=Y=>Ts(Y).length>0,Mc=Y=>Gr(Y).length>0,lo=Y=>{const me=Y.schema.getTextInlineElements(),ke=nn=>nn.nodeType===1&&!Kt(nn)&&!_t(me,nn.nodeName.toLowerCase());if(_s(Y).exists(nn=>nn.hasAttribute("data-mce-block")))return!1;const kt=Y.selection.getRng();return kt.collapsed?!0:Fo(kt,ke).length===0},hs=Y=>Lt(Y)&&Y.nodeName==="FIGURE"&&/\bimage\b/i.test(Y.className),Rr=Y=>In(["title","rel","class","target"],(ke,Ye)=>(Y[Ye].each(kt=>{ke[Ye]=kt.length>0?kt:null}),ke),{href:Y.href}),Li=(Y,me)=>(me==="http"||me==="https")&&!zr(Y)?me+"://"+Y:Y,Ki=(Y,me)=>{const ke={...me};if(fn(Y).length===0&&!pt(Y)){const Ye=Ws(ke.rel,ke.target==="_blank");ke.rel=Ye||null}return xt.from(ke.target).isNone()&&Mn(Y)===!1&&(ke.target=Ae(Y)),ke.href=Li(ke.href,ft(Y)),ke},ts=(Y,me,ke,Ye)=>{ke.each(kt=>{_t(me,"innerText")?me.innerText=kt:me.textContent=kt}),Y.dom.setAttribs(me,Ye),Y.selection.select(me)},jc=(Y,me,ke,Ye)=>{const kt=Y.dom;hs(me)?Fi(kt,me,Ye):ke.fold(()=>{Y.execCommand("mceInsertLink",!1,Ye)},nn=>{Y.insertContent(kt.createHTML("a",Ye,kt.encode(nn)))})},Tt=(Y,me,ke)=>{const Ye=Y.selection.getNode(),kt=_s(Y,Ye),nn=Ki(Y,Rr(ke));Y.undoManager.transact(()=>{ke.href===me.href&&me.attach(),kt.fold(()=>{jc(Y,Ye,ke.text,nn)},$t=>{Y.focus(),ts(Y,$t,ke.text,nn)})})},go=Y=>{const me=Y.dom,ke=Y.selection,Ye=ke.getBookmark(),kt=ke.getRng().cloneRange(),nn=me.getParent(kt.startContainer,"a[href]",Y.getBody()),$t=me.getParent(kt.endContainer,"a[href]",Y.getBody());nn&&kt.setStartBefore(nn),$t&&kt.setEndAfter($t),ke.setRng(kt),Y.execCommand("unlink"),ke.moveToBookmark(Ye)},Vr=Y=>{Y.undoManager.transact(()=>{const me=Y.selection.getNode();hs(me)?Fa(Y,me):go(Y),Y.focus()})},Ur=Y=>{const{class:me,href:ke,rel:Ye,target:kt,text:nn,title:$t}=Y;return et({class:me.getOrNull(),href:ke,rel:Ye.getOrNull(),target:kt.getOrNull(),text:nn.getOrNull(),title:$t.getOrNull()},(Nn,Vn)=>ge(Nn)===!1)},La=(Y,me)=>{const ke=Y.options.get,Ye={allow_html_data_urls:ke("allow_html_data_urls"),allow_script_urls:ke("allow_script_urls"),allow_svg_data_urls:ke("allow_svg_data_urls")},kt=me.href;return{...me,href:xe.isDomSafe(kt,"a",Ye)?kt:""}},si=(Y,me,ke)=>{const Ye=La(Y,ke);Y.hasPlugin("rtc",!0)?Y.execCommand("createlink",!1,Ur(Ye)):Tt(Y,me,Ye)},Qo=Y=>{Y.hasPlugin("rtc",!0)?Y.execCommand("unlink"):Vr(Y)},Fa=(Y,me)=>{var ke;const Ye=Y.dom.select("img",me)[0];if(Ye){const kt=Y.dom.getParents(Ye,"a[href]",me)[0];kt&&((ke=kt.parentNode)===null||ke===void 0||ke.insertBefore(Ye,kt),Y.dom.remove(kt))}},Fi=(Y,me,ke)=>{var Ye;const kt=Y.select("img",me)[0];if(kt){const nn=Y.create("a",ke);(Ye=kt.parentNode)===null||Ye===void 0||Ye.insertBefore(nn,kt),nn.appendChild(kt)}},Yo=Y=>K(Y.value)?Y.value:"",En=Y=>K(Y.text)?Y.text:K(Y.title)?Y.title:"",sr=(Y,me)=>{const ke=[];return Oo.each(Y,Ye=>{const kt=En(Ye);if(Ye.menu!==void 0){const nn=sr(Ye.menu,me);ke.push({text:kt,items:nn})}else{const nn=me(Ye);ke.push({text:kt,value:nn})}}),ke},ri=(Y=Yo)=>me=>xt.from(me).map(ke=>sr(ke,Y)),vs={sanitize:Y=>ri(Yo)(Y),sanitizeWith:ri,createUi:(Y,me)=>ke=>({name:Y,type:"listbox",label:me,items:ke}),getValue:Yo},Cr=Y=>dt(Y,"items"),Zs=(Y,me)=>ve(me,ke=>Cr(ke)?Zs(Y,ke.items):it(ke.value===Y,ke)),Ea=(Y,me,ke,Ye)=>{const kt=Ye[me],nn=Y.length>0;return kt!==void 0?Zs(kt,ke).map($t=>({url:{value:$t.value,meta:{text:nn?Y:$t.text,attach:Ct}},text:nn?Y:$t.text})):xt.none()},Nc=(Y,me)=>me==="link"?Y.link:me==="anchor"?Y.anchor:xt.none(),pe={init:(Y,me)=>{const ke={text:Y.text,title:Y.title},Ye=Vn=>{var To;return it(ke.title.length<=0,xt.from((To=Vn.meta)===null||To===void 0?void 0:To.title).getOr(""))},kt=Vn=>{var To;return it(ke.text.length<=0,xt.from((To=Vn.meta)===null||To===void 0?void 0:To.text).getOr(Vn.value))},nn=Vn=>{const To=kt(Vn.url),H=Ye(Vn.url);return To.isSome()||H.isSome()?xt.some({...To.map(ee=>({text:ee})).getOr({}),...H.map(ee=>({title:ee})).getOr({})}):xt.none()},$t=(Vn,To)=>{const H=Nc(me,To).getOr([]);return Ea(ke.text,To,H,Vn)};return{onChange:(Vn,To)=>{const H=To.name;return H==="url"?nn(Vn()):Gt(["anchor","link"],H)?$t(Vn(),H):((H==="text"||H==="title")&&(ke[H]=Vn()[H]),xt.none())}}},getDelta:Ea};var fe=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ve=(Y,me,ke)=>{const Ye=Y.selection.getRng();fe.setEditorTimeout(Y,()=>{Y.windowManager.confirm(me,kt=>{Y.selection.setRng(Ye),ke(kt)})})},Ge=Y=>{const me=Y.href;return me.indexOf("@")>0&&me.indexOf("/")===-1&&me.indexOf("mailto:")===-1?xt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ye=>({...Ye,href:"mailto:"+me})}):xt.none()},Cn=(Y,me)=>ke=>{const Ye=ke.href;return Y===1&&!zr(Ye)||Y===0&&/^\s*www(\.|\d\.)/i.test(Ye)?xt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${me}:// prefix?`,preprocess:nn=>({...nn,href:me+"://"+Ye})}):xt.none()},Qn={preprocess:(Y,me)=>ve([Ge,Cn(ft(Y),wt(Y))],ke=>ke(me)).fold(()=>Promise.resolve(me),ke=>new Promise(Ye=>{Ve(Y,ke.message,kt=>{Ye(kt?ke.preprocess(me):me)})}))},lt={getAnchors:Y=>{const me=Y.dom.select("a:not([href])"),ke=Fe(me,Ye=>{const kt=Ye.name||Ye.id;return kt?[{text:kt,value:"#"+kt}]:[]});return ke.length>0?xt.some([{text:"None",value:""}].concat(ke)):xt.none()}},rr={getClasses:Y=>{const me=io(Y);return me.length>0?vs.sanitize(me):xt.none()}},Sr=Y=>{try{return xt.some(JSON.parse(Y))}catch{return xt.none()}},es={getLinks:Y=>{const me=Ye=>Y.convertURL(Ye.value||Ye.url||"","href"),ke=yn(Y);return new Promise(Ye=>{K(ke)?fetch(ke).then(kt=>kt.ok?kt.text().then(Sr):Promise.reject()).then(Ye,()=>Ye(xt.none())):Zt(ke)?ke(kt=>Ye(xt.some(kt))):Ye(xt.from(ke))}).then(Ye=>Ye.bind(vs.sanitizeWith(me)).map(kt=>kt.length>0?[{text:"None",value:""}].concat(kt):kt))}},Kr={getRels:(Y,me)=>{const ke=fn(Y);if(ke.length>0){const Ye=so(me,"_blank"),kt=pt(Y)===!1,nn=Nn=>Ws(vs.getValue(Nn),Ye);return(kt?vs.sanitizeWith(nn):vs.sanitize)(ke)}return xt.none()}},_a=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ns={getTargets:Y=>{const me=Mn(Y);return ue(me)?vs.sanitize(me).orThunk(()=>xt.some(_a)):me===!1?xt.none():xt.some(_a)}},cs=(Y,me,ke)=>{const Ye=Y.getAttrib(me,ke);return Ye!==null&&Ye.length>0?xt.some(Ye):xt.none()},Wr=(Y,me)=>{const ke=Y.dom,kt=lo(Y)?xt.some(xs(Y.selection,me)):xt.none(),nn=me.bind(H=>xt.from(ke.getAttrib(H,"href"))),$t=me.bind(H=>xt.from(ke.getAttrib(H,"target"))),Nn=me.bind(H=>cs(ke,H,"rel")),Vn=me.bind(H=>cs(ke,H,"class")),To=me.bind(H=>cs(ke,H,"title"));return{url:nn,text:kt,title:To,target:$t,rel:Nn,linkClass:Vn}},Ns={collect:(Y,me)=>es.getLinks(Y).then(ke=>{const Ye=Wr(Y,me);return{anchor:Ye,catalogs:{targets:ns.getTargets(Y),rels:Kr.getRels(Y,Ye.target),classes:rr.getClasses(Y),anchor:lt.getAnchors(Y),link:ke},optNode:me,flags:{titleEnabled:$e(Y)}}})},hl=(Y,me)=>ke=>{const Ye=ke.getData();if(!Ye.url.value){Qo(Y),ke.close();return}const kt=Nn=>xt.from(Ye[Nn]).filter(Vn=>!so(me.anchor[Nn],Vn)),nn={href:Ye.url.value,text:kt("text"),target:kt("target"),rel:kt("rel"),class:kt("linkClass"),title:kt("title")},$t={href:Ye.url.value,attach:Ye.url.meta!==void 0&&Ye.url.meta.attach?Ye.url.meta.attach:Ct};Qn.preprocess(Y,nn).then(Nn=>{si(Y,$t,Nn)}),ke.close()},ai=Y=>{const me=_s(Y);return Ns.collect(Y,me)},ls=(Y,me)=>{const ke=Y.anchor,Ye=ke.url.getOr("");return{url:{value:Ye,meta:{original:{value:Ye}}},text:ke.text.getOr(""),title:ke.title.getOr(""),anchor:Ye,link:Ye,rel:ke.rel.getOr(""),target:ke.target.or(me).getOr(""),linkClass:ke.linkClass.getOr("")}},lr=(Y,me,ke)=>{const Ye=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],kt=Y.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),nn=Y.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],$t=xt.from(Ae(ke)),Nn=ls(Y,$t),Vn=Y.catalogs,To=pe.init(Nn,Vn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:en([Ye,kt,nn,at([Vn.anchor.map(vs.createUi("anchor","Anchors")),Vn.rels.map(vs.createUi("rel","Rel")),Vn.targets.map(vs.createUi("target","Open link in...")),Vn.link.map(vs.createUi("link","Link list")),Vn.classes.map(vs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Nn,onChange:(ee,{name:ye})=>{To.onChange(ee.getData,{name:ye}).each(Be=>{ee.setData(Be)})},onSubmit:me}},ar=Y=>{ai(Y).then(ke=>{const Ye=hl(Y,ke);return lr(ke,Ye,Y)}).then(ke=>{Y.windowManager.open(ke)})},gc=Y=>{Y.addCommand("mceLink",(me,ke)=>{(ke==null?void 0:ke.dialog)===!0||!W(Y)?ar(Y):Y.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},bi=Y=>{Y.addShortcut("Meta+K","",()=>{Y.execCommand("mceLink")})},ba=Y=>{let me=Y;return{get:()=>me,set:kt=>{me=kt}}},ys=Y=>{const me=ba(xt.none()),ke=()=>me.get().each(Y);return{clear:()=>{ke(),me.set(xt.none())},isSet:()=>me.get().isSome(),get:()=>me.get(),set:Nn=>{ke(),me.set(xt.some(Nn))}}},Gd=()=>{const Y=ys(Ct);return{...Y,on:ke=>Y.get().each(ke)}},pc=(Y,me)=>Y.substring(me),vu=(Y,me,ke)=>me===""||Y.length>=me.length&&Y.substr(ke,ke+me.length)===me,yo=(Y,me)=>bc(Y,me)?pc(Y,me.length):Y,bc=(Y,me)=>vu(Y,me,0);var Ps=tinymce.util.Tools.resolve("tinymce.util.VK");const Fl=(Y,me)=>{document.body.appendChild(Y),Y.dispatchEvent(me),document.body.removeChild(Y)},$i=Y=>{const me=document.createElement("a");me.target="_blank",me.href=Y,me.rel="noreferrer noopener";const ke=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ke),Fl(me,ke)},Pc=Y=>Y.altKey===!0&&Y.shiftKey===!1&&Y.ctrlKey===!1&&Y.metaKey===!1,Nr=(Y,me)=>{if(me){const ke=Vo(me);if(/^#/.test(ke)){const Ye=Y.dom.select(`${ke},[name="${yo(ke,"#")}"]`);Ye.length&&Y.selection.scrollIntoView(Ye[0],!0)}else $i(me.href)}},rd=Y=>{const me=Y.selection.getRng(),ke=me.startContainer;return is(ke)&&me.startContainer===me.endContainer&&Y.dom.select("img",ke).length===1},ii=(Y,me)=>{const ke=Ts(Y.dom.getParents(me));return it(ke.length===1,ke[0])},ad=Y=>{const me=Gr(Y.selection.getRng());return it(me.length>0,me[0]).or(ii(Y,Y.selection.getNode()))},Gc=Y=>Y.selection.isCollapsed()||rd(Y)?ii(Y,Y.selection.getStart()):ad(Y),id=Y=>{const me=Gd(),ke=()=>me.get().or(Gc(Y)),Ye=()=>ke().each(kt=>Nr(Y,kt));return Y.on("contextmenu",kt=>{ii(Y,kt.target).each(me.set)}),Y.on("SelectionChange",()=>{me.isSet()||Gc(Y).each(me.set)}),Y.on("click",kt=>{me.clear();const nn=Ts(Y.dom.getParents(kt.target));nn.length===1&&Ps.metaKeyPressed(kt)&&(kt.preventDefault(),Nr(Y,nn[0]))}),Y.on("keydown",kt=>{me.clear(),!kt.isDefaultPrevented()&&kt.keyCode===13&&Pc(kt)&&ke().each(nn=>{kt.preventDefault(),Nr(Y,nn)})}),{gotoSelectedLink:Ye}},pr=Y=>()=>{Y.execCommand("mceLink",!1,{dialog:!0})},Yi=(Y,me)=>(Y.on("NodeChange",me),()=>Y.off("NodeChange",me)),Kc=Y=>me=>{const ke=()=>{me.setActive(!Y.mode.isReadOnly()&&Ss(Y,Y.selection.getNode())),me.setEnabled(Y.selection.isEditable())};return ke(),Yi(Y,ke)},yu=Y=>me=>{const ke=()=>{me.setEnabled(Y.selection.isEditable())};return ke(),Yi(Y,ke)},gl=Y=>me=>{const ke=nn=>Ko(nn)||Mc(Y.selection.getRng()),Ye=Y.dom.getParents(Y.selection.getStart()),kt=nn=>{me.setEnabled(ke(nn)&&Y.selection.isEditable())};return kt(Ye),Yi(Y,nn=>kt(nn.parents))},Yc=(Y,me)=>{Y.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:pr(Y),onSetup:Kc(Y)}),Y.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:me.gotoSelectedLink,onSetup:gl(Y)}),Y.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Qo(Y),onSetup:gl(Y)})},br=(Y,me)=>{Y.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:me.gotoSelectedLink,onSetup:gl(Y)}),Y.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:pr(Y),onSetup:yu(Y)}),Y.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Qo(Y),onSetup:gl(Y)})},Pr=Y=>{const me="link unlink openlink",ke="link";Y.ui.registry.addContextMenu("link",{update:Ye=>Y.dom.isEditable(Ye)?Ko(Y.dom.getParents(Ye,"a"))?me:ke:""})},vi=(Y,me)=>{const ke=nn=>{nn.selection.collapse(!1)},Ye=nn=>{const $t=Y.selection.getNode();return nn.setEnabled(Ss(Y,$t)&&Y.selection.isEditable()),Ct},kt=nn=>{const $t=_s(Y),Nn=lo(Y);if($t.isNone()&&Nn){const Vn=xs(Y.selection,$t);return it(Vn.length===0,nn)}else return xt.none()};Y.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Kc(Y)},label:"Link",predicate:nn=>xo(Y)&&Ss(Y,nn),initValue:()=>_s(Y).fold(Ne(""),Vo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:nn=>{const $t=Y.selection.getNode();return nn.setActive(Ss(Y,$t)),Kc(Y)(nn)},onAction:nn=>{const $t=nn.getValue(),Nn=kt($t);si(Y,{href:$t,attach:Ct},{href:$t,text:Nn,title:xt.none(),rel:xt.none(),target:xt.from(Ae(Y)),class:xt.none()}),ke(Y),nn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ye,onAction:nn=>{Qo(Y),nn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ye,onAction:nn=>{me.gotoSelectedLink(),nn.hide()}}]})},$l=Y=>{const me=id(Y);Yc(Y,me),br(Y,me),Pr(Y),vi(Y,me)};var wu=()=>{p.add("link",Y=>{Hn(Y),gc(Y),$l(Y),bi(Y)})};wu()}()),jJ}var GJ;function Ose(){return GJ||(GJ=1,Ase()),ZJ}Ose();var KJ={},YJ={},XJ;function Dse(){return XJ||(XJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(k,B,q)=>{var he;return q(k,B.prototype)?!0:((he=k.constructor)===null||he===void 0?void 0:he.name)===B.name},w=k=>{const B=typeof k;return k===null?"null":B==="object"&&Array.isArray(k)?"array":B==="object"&&g(k,String,(q,he)=>he.isPrototypeOf(q))?"string":B},E=k=>B=>w(B)===k,N=k=>B=>typeof B===k,V=E("string"),K=E("object"),j=E("array"),ue=N("boolean"),ge=k=>k==null,Ce=k=>!ge(k),Xe=N("function"),Lt=N("number"),Zt=()=>{},Pt=(k,B)=>q=>k(B(q)),Ct=k=>()=>k,Ne=(k,B)=>k===B;function ln(k,...B){return(...q)=>{const he=B.concat(q);return k.apply(null,he)}}const xt=k=>B=>!k(B),ce=Ct(!1);class Je{constructor(B,q){this.tag=B,this.value=q}static some(B){return new Je(!0,B)}static none(){return Je.singletonNone}fold(B,q){return this.tag?q(this.value):B()}isSome(){return this.tag}isNone(){return!this.tag}map(B){return this.tag?Je.some(B(this.value)):Je.none()}bind(B){return this.tag?B(this.value):Je.none()}exists(B){return this.tag&&B(this.value)}forall(B){return!this.tag||B(this.value)}filter(B){return!this.tag||B(this.value)?this:Je.none()}getOr(B){return this.tag?this.value:B}or(B){return this.tag?this:B}getOrThunk(B){return this.tag?this.value:B()}orThunk(B){return this.tag?this:B()}getOrDie(B){if(this.tag)return this.value;throw new Error(B??"Called getOrDie on None")}static from(B){return Ce(B)?Je.some(B):Je.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(B){this.tag&&B(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Je.singletonNone=new Je(!1);const Dn=Array.prototype.slice,Gt=Array.prototype.indexOf,oe=Array.prototype.push,Xt=(k,B)=>Gt.call(k,B),In=(k,B)=>Xt(k,B)>-1,en=(k,B)=>{for(let q=0,he=k.length;q<he;q++){const Se=k[q];if(B(Se,q))return!0}return!1},Fe=(k,B)=>{const q=k.length,he=new Array(q);for(let Se=0;Se<q;Se++){const gt=k[Se];he[Se]=B(gt,Se)}return he},ve=(k,B)=>{for(let q=0,he=k.length;q<he;q++){const Se=k[q];B(Se,q)}},so=(k,B)=>{const q=[];for(let he=0,Se=k.length;he<Se;he++){const gt=k[he];B(gt,he)&&q.push(gt)}return q},at=(k,B)=>{if(k.length===0)return[];{let q=B(k[0]);const he=[];let Se=[];for(let gt=0,kn=k.length;gt<kn;gt++){const eo=k[gt],Gn=B(eo);Gn!==q&&(he.push(Se),Se=[]),q=Gn,Se.push(eo)}return Se.length!==0&&he.push(Se),he}},it=(k,B,q)=>(ve(k,(he,Se)=>{q=B(q,he,Se)}),q),M=(k,B,q)=>{for(let he=0,Se=k.length;he<Se;he++){const gt=k[he];if(B(gt,he))return Je.some(gt);if(q(gt,he))break}return Je.none()},Hn=(k,B)=>M(k,B,ce),ft=k=>{const B=[];for(let q=0,he=k.length;q<he;++q){if(!j(k[q]))throw new Error("Arr.flatten item "+q+" was not an array, input: "+k);oe.apply(B,k[q])}return B},xo=(k,B)=>ft(Fe(k,B)),yn=k=>{const B=Dn.call(k,0);return B.reverse(),B},Ae=(k,B)=>B>=0&&B<k.length?Je.some(k[B]):Je.none(),wt=k=>Ae(k,0),Mn=k=>Ae(k,k.length-1),fn=(k,B)=>{const q=[],he=Xe(B)?Se=>en(q,gt=>B(gt,Se)):Se=>In(q,Se);for(let Se=0,gt=k.length;Se<gt;Se++){const kn=k[Se];he(kn)||q.push(kn)}return q},io=(k,B,q=Ne)=>k.exists(he=>q(he,B)),$e=(k,B,q=Ne)=>pt(k,B,q).getOr(k.isNone()&&B.isNone()),pt=(k,B,q)=>k.isSome()&&B.isSome()?Je.some(q(k.getOrDie(),B.getOrDie())):Je.none(),W=8,Us=11,no=1,_o=3,zo=(k,B)=>{const he=(B||document).createElement("div");if(he.innerHTML=k,!he.hasChildNodes()||he.childNodes.length>1){const Se="HTML does not have a single root node";throw console.error(Se,k),new Error(Se)}return _t(he.childNodes[0])},pi=(k,B)=>{const he=(B||document).createElement(k);return _t(he)},et=(k,B)=>{const he=(B||document).createTextNode(k);return _t(he)},_t=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},xe={fromHtml:zo,fromTag:pi,fromText:et,fromDom:_t,fromPoint:(k,B,q)=>Je.from(k.dom.elementFromPoint(B,q)).map(_t)},Ao=(k,B)=>{const q=k.dom;if(q.nodeType!==no)return!1;{const he=q;if(he.matches!==void 0)return he.matches(B);if(he.msMatchesSelector!==void 0)return he.msMatchesSelector(B);if(he.webkitMatchesSelector!==void 0)return he.webkitMatchesSelector(B);if(he.mozMatchesSelector!==void 0)return he.mozMatchesSelector(B);throw new Error("Browser lacks native selectors")}},Oo=(k,B)=>k.dom===B.dom,Kt=(k,B)=>{const q=k.dom,he=B.dom;return q===he?!1:q.contains(he)},is=Ao,Fo=typeof window<"u"?window:Function("return this;")(),zr=(k,B)=>{let q=B??Fo;for(let he=0;he<k.length&&q!==void 0&&q!==null;++he)q=q[k[he]];return q},Vo=(k,B)=>{const q=k.split(".");return zr(q,B)},Ws=(k,B)=>Vo(k,B),oi=(k,B)=>{const q=Ws(k,B);if(q==null)throw new Error(k+" not available on this browser");return q},_s=Object.getPrototypeOf,Ss=k=>oi("HTMLElement",k),xs=k=>{const B=Vo("ownerDocument.defaultView",k);return K(k)&&(Ss(B).prototype.isPrototypeOf(k)||/^HTML\w*Element$/.test(_s(k).constructor.name))},Gr=k=>k.dom.nodeName.toLowerCase(),Ts=k=>k.dom.nodeType,Ko=k=>B=>Ts(B)===k,Mc=k=>Ts(k)===W||Gr(k)==="#comment",lo=k=>hs(k)&&xs(k.dom),hs=Ko(no),Rr=Ko(_o),Li=Ko(Us),Ki=k=>B=>hs(B)&&Gr(B)===k,ts=k=>Je.from(k.dom.parentNode).map(xe.fromDom),jc=k=>Je.from(k.dom.parentElement).map(xe.fromDom),Tt=k=>Je.from(k.dom.nextSibling).map(xe.fromDom),go=k=>Fe(k.dom.childNodes,xe.fromDom),Vr=(k,B)=>{const q=k.dom.childNodes;return Je.from(q[B]).map(xe.fromDom)},Ur=k=>Vr(k,0),La=k=>Vr(k,k.dom.childNodes.length-1),si=k=>Li(k)&&Ce(k.dom.host),Qo=k=>xe.fromDom(k.dom.getRootNode()),Fa=k=>{const B=Qo(k);return si(B)?Je.some(B):Je.none()},Fi=k=>xe.fromDom(k.dom.host),Yo=k=>{const B=Rr(k)?k.dom.parentNode:k.dom;if(B==null||B.ownerDocument===null)return!1;const q=B.ownerDocument;return Fa(xe.fromDom(B)).fold(()=>q.body.contains(B),Pt(Yo,Fi))};var En=(k,B,q,he,Se)=>k(q,he)?Je.some(q):Xe(Se)&&Se(q)?Je.none():B(q,he,Se);const sr=(k,B,q)=>{let he=k.dom;const Se=Xe(q)?q:ce;for(;he.parentNode;){he=he.parentNode;const gt=xe.fromDom(he);if(B(gt))return Je.some(gt);if(Se(gt))break}return Je.none()},ri=(k,B,q)=>En((Se,gt)=>gt(Se),sr,k,B,q),fl=(k,B,q)=>sr(k,he=>Ao(he,B),q),ml=(k,B,q)=>En((Se,gt)=>Ao(Se,gt),fl,k,B,q),vs=k=>ml(k,"[contenteditable]"),Cr=(k,B=!1)=>Yo(k)?k.dom.isContentEditable:vs(k).fold(Ct(B),q=>Zs(q)==="true"),Zs=k=>k.dom.contentEditable,Ea=(k,B)=>{ts(k).each(he=>{he.dom.insertBefore(B.dom,k.dom)})},Nc=(k,B)=>{Tt(k).fold(()=>{ts(k).each(Se=>{pe(Se,B)})},he=>{Ea(he,B)})},Mr=(k,B)=>{Ur(k).fold(()=>{pe(k,B)},he=>{k.dom.insertBefore(B.dom,he.dom)})},pe=(k,B)=>{k.dom.appendChild(B.dom)},fe=(k,B)=>{ve(B,q=>{Ea(k,q)})},Ve=(k,B)=>{ve(B,q=>{pe(k,q)})},Ge=k=>{k.dom.textContent="",ve(go(k),B=>{Cn(B)})},Cn=k=>{const B=k.dom;B.parentNode!==null&&B.parentNode.removeChild(B)};var Fn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Qn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Os=tinymce.util.Tools.resolve("tinymce.util.VK");const lt=k=>Fe(k,xe.fromDom),Ke=Object.keys,rr=(k,B)=>{const q=Ke(k);for(let he=0,Se=q.length;he<Se;he++){const gt=q[he],kn=k[gt];B(kn,gt)}},Sr=k=>(B,q)=>{k[q]=B},pa=(k,B,q,he)=>{rr(k,(Se,gt)=>{(B(Se,gt)?q:he)(Se,gt)})},es=(k,B)=>{const q={};return pa(k,B,Sr(q),Zt),q},qc=(k,B,q)=>{if(V(q)||ue(q)||Lt(q))k.setAttribute(B,q+"");else throw console.error("Invalid call to Attribute.set. Key ",B,":: Value ",q,":: Element ",k),new Error("Attribute value was not simple")},Kr=(k,B)=>{const q=k.dom;rr(B,(he,Se)=>{qc(q,Se,he)})},_a=k=>it(k.dom.attributes,(B,q)=>(B[q.name]=q.value,B),{}),Ms=(k,B)=>xe.fromDom(k.dom.cloneNode(B)),ns=k=>Ms(k,!0),cs=(k,B)=>{const q=xe.fromTag(B),he=_a(k);return Kr(q,he),q},Wr=(k,B)=>{const q=cs(k,B);Nc(k,q);const he=go(k);return Ve(q,he),Cn(k),q};var hc=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ns=tinymce.util.Tools.resolve("tinymce.util.Tools");const hl=k=>B=>Ce(B)&&B.nodeName.toLowerCase()===k,ai=k=>B=>Ce(B)&&k.test(B.nodeName),ls=k=>Ce(k)&&k.nodeType===3,lr=k=>Ce(k)&&k.nodeType===1,ar=ai(/^(OL|UL|DL)$/),gc=ai(/^(OL|UL)$/),bi=hl("ol"),ba=ai(/^(LI|DT|DD)$/),ys=ai(/^(DT|DD)$/),Gd=ai(/^(TH|TD)$/),pc=hl("br"),vu=k=>{var B;return((B=k.parentNode)===null||B===void 0?void 0:B.firstChild)===k},yo=(k,B)=>Ce(B)&&B.nodeName in k.schema.getTextBlockElements(),bc=(k,B)=>Ce(k)&&k.nodeName in B,Ps=(k,B)=>Ce(B)&&B.nodeName in k.schema.getVoidElements(),Fl=(k,B)=>pc(B)?k.isBlock(B.nextSibling)&&!pc(B.previousSibling):!1,$i=(k,B,q)=>{const he=k.isEmpty(B);return q&&k.select("span[data-mce-type=bookmark]",B).length>0?!1:he},Pc=(k,B)=>k.isChildOf(B,k.getRoot()),Nr=k=>B=>B.options.get(k),rd=k=>{const B=k.options.register;B("lists_indent_on_tab",{processor:"boolean",default:!0})},ii=Nr("lists_indent_on_tab"),ad=Nr("forced_root_block"),Gc=Nr("forced_root_block_attrs"),id=(k,B,q={})=>{const he=k.dom,Se=k.schema.getBlockElements(),gt=he.createFragment(),kn=ad(k),eo=Gc(k);let Gn,pn,Qs=!1;for(pn=he.create(kn,{...eo,...q.style?{style:q.style}:{}}),bc(B.firstChild,Se)||gt.appendChild(pn);Gn=B.firstChild;){const Tr=Gn.nodeName;!Qs&&(Tr!=="SPAN"||Gn.getAttribute("data-mce-type")!=="bookmark")&&(Qs=!0),bc(Gn,Se)?(gt.appendChild(Gn),pn=null):(pn||(pn=he.create(kn,eo),gt.appendChild(pn)),pn.appendChild(Gn))}return!Qs&&pn&&pn.appendChild(he.create("br",{"data-mce-bogus":"1"})),gt},pr=hc.DOM,Yi=(k,B,q)=>{const he=pn=>{const Qs=pn.parentNode;Qs&&Ns.each(Se,Tr=>{Qs.insertBefore(Tr,q.parentNode)}),pr.remove(pn)},Se=pr.select('span[data-mce-type="bookmark"]',B),gt=id(k,q),kn=pr.createRng();kn.setStartAfter(q),kn.setEndAfter(B);const eo=kn.extractContents();for(let pn=eo.firstChild;pn;pn=pn.firstChild)if(pn.nodeName==="LI"&&k.dom.isEmpty(pn)){pr.remove(pn);break}k.dom.isEmpty(eo)||pr.insertAfter(eo,B),pr.insertAfter(gt,B);const Gn=q.parentElement;Gn&&$i(k.dom,Gn)&&he(Gn),pr.remove(q),$i(k.dom,B)&&pr.remove(B)},Kc=Ki("dd"),yu=Ki("dt"),gl=(k,B)=>{Kc(B)?Wr(B,"dt"):yu(B)&&jc(B).each(q=>Yi(k,q.dom,B.dom))},Yc=k=>{yu(k)&&Wr(k,"dd")},br=(k,B,q)=>{B==="Indent"?ve(q,Yc):ve(q,he=>gl(k,he))},Pr=(k,B)=>{if(ls(k))return{container:k,offset:B};const q=Fn.getNode(k,B);return ls(q)?{container:q,offset:B>=k.childNodes.length?q.data.length:0}:q.previousSibling&&ls(q.previousSibling)?{container:q.previousSibling,offset:q.previousSibling.data.length}:q.nextSibling&&ls(q.nextSibling)?{container:q.nextSibling,offset:0}:{container:k,offset:B}},vi=k=>{const B=k.cloneRange(),q=Pr(k.startContainer,k.startOffset);B.setStart(q.container,q.offset);const he=Pr(k.endContainer,k.endOffset);return B.setEnd(he.container,he.offset),B},$l=["OL","UL","DL"],wu=$l.join(","),Y=(k,B)=>{const q=B||k.selection.getStart(!0);return k.dom.getParent(q,wu,To(k,q))},me=(k,B)=>Ce(k)&&B.length===1&&B[0]===k,ke=k=>so(k.querySelectorAll(wu),ar),Ye=k=>{const B=Y(k),q=k.selection.getSelectedBlocks();return me(B,q)?ke(B):so(q,he=>ar(he)&&B!==he)},kt=(k,B)=>{const q=Ns.map(B,he=>{const Se=k.dom.getParent(he,"li,dd,dt",To(k,he));return Se||he});return fn(q)},nn=k=>{const B=k.selection.getSelectedBlocks();return so(kt(k,B),ba)},$t=k=>so(nn(k),ys),Nn=(k,B)=>{const q=k.dom.getParents(B,"TD,TH");return q.length>0?q[0]:k.getBody()},Vn=(k,B)=>!ar(B)&&!ba(B)&&en($l,q=>k.isValidChild(B.nodeName,q)),To=(k,B)=>{const q=k.dom.getParents(B,k.dom.isBlock),he=gt=>gt.nodeName.toLowerCase()!==ad(k);return Hn(q,gt=>he(gt)&&Vn(k.schema,gt)).getOr(k.getBody())},H=k=>ts(k).exists(B=>ba(B.dom)&&Ur(B).exists(q=>!ar(q.dom))&&La(B).exists(q=>!ar(q.dom))),ee=(k,B)=>{const q=k.dom.getParents(B,"ol,ul",To(k,B));return Mn(q)},ye=k=>{const B=ee(k,k.selection.getStart()),q=so(k.selection.getSelectedBlocks(),gc);return B.toArray().concat(q)},Be=k=>{const B=k.selection.getStart();return k.dom.getParents(B,"ol,ul",To(k,B))},cn=k=>{const B=ye(k),q=Be(k);return Hn(q,he=>H(xe.fromDom(he))).fold(()=>It(k,B),he=>[he])},It=(k,B)=>{const q=Fe(B,he=>ee(k,he).getOr(he));return fn(q)},$o=k=>/\btox\-/.test(k.className),ta=(k,B)=>M(k,ar,Gd).exists(q=>q.nodeName===B&&!$o(q)),ut=(k,B)=>B!==null&&!k.dom.isEditable(B),ci=k=>{const B=Y(k);return ut(k,B)||!k.selection.isEditable()},us=(k,B)=>{const q=k.dom.getParent(B,"ol,ul,dl");return ut(k,q)||!k.selection.isEditable()},Xc=(k,B)=>{const q=k.selection.getNode();return B({parents:k.dom.getParents(q),element:q}),k.on("NodeChange",B),()=>k.off("NodeChange",B)},ur=(k,B)=>{const he=document.createDocumentFragment();return ve(k,Se=>{he.appendChild(Se.dom)}),xe.fromDom(he)},uo=(k,B,q)=>k.dispatch("ListMutation",{action:B,element:q}),Yr=(k=>B=>B.replace(k,""))(/^\s+|\s+$/g),wi=k=>k.length>0,xr=k=>!wi(k),Hl=k=>k.style!==void 0&&Xe(k.style.getPropertyValue),Lg=(k,B,q)=>{if(!V(q))throw console.error("Invalid call to CSS.set. Property ",B,":: Value ",q,":: Element ",k),new Error("CSS value must be a string: "+q);Hl(k)&&k.style.setProperty(B,q)},x1=(k,B,q)=>{const he=k.dom;Lg(he,B,q)},Ds=k=>is(k,"OL,UL"),zl=k=>is(k,"LI"),Xr=k=>Ur(k).exists(Ds),Ta=k=>La(k).exists(Ds),Ci=k=>"listAttributes"in k,Cu=k=>"isComment"in k,Bm=k=>"isFragment"in k,oo=k=>k.depth>0,pl=k=>k.isSelected,Vl=k=>{const B=go(k),q=Ta(k)?B.slice(0,-1):B;return Fe(q,ns)},Ul=(k,B,q)=>ts(k).filter(hs).map(he=>({depth:B,dirty:!1,isSelected:q,content:Vl(k),itemAttributes:_a(k),listAttributes:_a(he),listType:Gr(he),isInPreviousLi:!1})),Lm=(k,B)=>{pe(k.item,B.list)},Is=k=>{for(let B=1;B<k.length;B++)Lm(k[B-1],k[B])},na=(k,B)=>{pt(Mn(k),wt(B),Lm)},cd=(k,B)=>{const q={list:xe.fromTag(B,k),item:xe.fromTag("li",k)};return pe(q.list,q.item),q},Mh=(k,B,q)=>{const he=[];for(let Se=0;Se<q;Se++)he.push(cd(k,Ci(B)?B.listType:B.parentListType));return he},Su=(k,B)=>{for(let q=0;q<k.length-1;q++)x1(k[q].item,"list-style-type","none");Mn(k).each(q=>{Ci(B)&&(Kr(q.list,B.listAttributes),Kr(q.item,B.itemAttributes)),Ve(q.item,B.content)})},Si=(k,B)=>{Gr(k.list)!==B.listType&&(k.list=Wr(k.list,B.listType)),Kr(k.list,B.listAttributes)},oa=(k,B,q)=>{const he=xe.fromTag("li",k);return Kr(he,B),Ve(he,q),he},$a=(k,B)=>{pe(k.list,B),k.item=B},li=(k,B,q)=>{const he=B.slice(0,q.depth);return Mn(he).each(Se=>{if(Ci(q)){const gt=oa(k,q.itemAttributes,q.content);$a(Se,gt),Si(Se,q)}else if(Bm(q))Ve(Se.item,q.content);else{const gt=xe.fromHtml(`<!--${q.content}-->`);pe(Se.list,gt)}}),he},Er=(k,B,q)=>{const he=Mh(k,q,q.depth-B.length);return Is(he),Su(he,q),na(B,he),B.concat(he)},ld=(k,B)=>{let q=Je.none();const he=it(B,(Se,gt,kn)=>Cu(gt)?kn===0?(q=Je.some(gt),Se):li(k,Se,gt):gt.depth>Se.length?Er(k,Se,gt):li(k,Se,gt),[]);return q.each(Se=>{const gt=xe.fromHtml(`<!--${Se.content}-->`);wt(he).each(kn=>{Mr(kn.list,gt)})}),wt(he).map(Se=>Se.list)},Bs=(k,B)=>{switch(k){case"Indent":B.depth++;break;case"Outdent":B.depth--;break;case"Flatten":B.depth=0}B.dirty=!0},Kd=(k,B)=>{Ci(k)&&Ci(B)&&(k.listType=B.listType,k.listAttributes={...B.listAttributes})},zf=k=>{k.listAttributes=es(k.listAttributes,(B,q)=>q!=="start")},Wl=(k,B)=>{const q=k[B].depth,he=gt=>gt.depth===q&&!gt.dirty,Se=gt=>gt.depth<q;return M(yn(k.slice(0,B)),he,Se).orThunk(()=>M(k.slice(B+1),he,Se))},ud=k=>(ve(k,(B,q)=>{Wl(k,q).fold(()=>{B.dirty&&Ci(B)&&zf(B)},he=>Kd(B,he))}),k),dd=k=>{let B=k;return{get:()=>B,set:Se=>{B=Se}}},xu=(k,B,q,he)=>{var Se;if(Mc(he))return[{depth:k+1,content:(Se=he.dom.nodeValue)!==null&&Se!==void 0?Se:"",dirty:!1,isSelected:!1,isComment:!0}];B.each(eo=>{Oo(eo.start,he)&&q.set(!0)});const gt=Ul(he,k,q.get());B.each(eo=>{Oo(eo.end,he)&&q.set(!1)});const kn=La(he).filter(Ds).map(eo=>Xi(k,B,q,eo)).getOr([]);return gt.toArray().concat(kn)},Eu=(k,B,q,he)=>Ur(he).filter(Ds).fold(()=>xu(k,B,q,he),Se=>{const gt=it(go(he),(kn,eo,Gn)=>{if(Gn===0)return kn;if(zl(eo))return kn.concat(xu(k,B,q,eo));{const pn={isFragment:!0,depth:k,content:[eo],isSelected:!1,dirty:!1,parentListType:Gr(Se)};return kn.concat(pn)}},[]);return Xi(k,B,q,Se).concat(gt)}),Xi=(k,B,q,he)=>xo(go(he),Se=>{const gt=Ds(Se)?Xi:Eu,kn=k+1;return gt(kn,B,q,Se)}),Ha=(k,B)=>{const q=dd(!1),he=0;return Fe(k,Se=>({sourceList:Se,entries:Xi(he,B,q,Se)}))},Fg=(k,B)=>{const q=ud(B);return Fe(q,he=>{const Se=Cu(he)?ur([xe.fromHtml(`<!--${he.content}-->`)]):ur(he.content),gt=Ci(he)?he.itemAttributes:{};return xe.fromDom(id(k,Se.dom,gt))})},bl=(k,B)=>{const q=ud(B);return ld(k.contentDocument,q).toArray()},Fm=(k,B)=>xo(at(B,oo),q=>wt(q).exists(oo)?bl(k,q):Fg(k,q)),fd=(k,B)=>{ve(so(k,pl),q=>Bs(B,q))},$m=k=>{const B=Fe(nn(k),xe.fromDom);return pt(Hn(B,xt(Xr)),Hn(yn(B),xt(Xr)),(q,he)=>({start:q,end:he}))},Vf=(k,B,q)=>{const he=Ha(B,$m(k));ve(he,Se=>{fd(Se.entries,q);const gt=Fm(k,Se.entries);ve(gt,kn=>{uo(k,q==="Indent"?"IndentList":"OutdentList",kn.dom)}),fe(Se.sourceList,gt),Cn(Se.sourceList)})},md=(k,B)=>{const q=lt(cn(k)),he=lt($t(k));let Se=!1;if(q.length||he.length){const gt=k.selection.getBookmark();Vf(k,q,B),br(k,B,he),k.selection.moveToBookmark(gt),k.selection.setRng(vi(k.selection.getRng())),k.nodeChanged(),Se=!0}return Se},Uf=(k,B)=>!ci(k)&&md(k,B),Hm=k=>Uf(k,"Indent"),_u=k=>Uf(k,"Outdent"),zm=k=>Uf(k,"Flatten"),be="\uFEFF",hd=k=>k===be,xi=(k,B,q)=>sr(k,B,q).isSome(),E1=(k,B)=>xi(k,ln(Oo,B));var $g=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Tu=hc.DOM,No=k=>{const B={},q=he=>{let Se=k[he?"startContainer":"endContainer"],gt=k[he?"startOffset":"endOffset"];if(lr(Se)){const kn=Tu.create("span",{"data-mce-type":"bookmark"});Se.hasChildNodes()?(gt=Math.min(gt,Se.childNodes.length-1),he?Se.insertBefore(kn,Se.childNodes[gt]):Tu.insertAfter(kn,Se.childNodes[gt])):Se.appendChild(kn),Se=kn,gt=0}B[he?"startContainer":"endContainer"]=Se,B[he?"startOffset":"endOffset"]=gt};return q(!0),k.collapsed||q(),B},dr=k=>{const B=he=>{const Se=eo=>{var Gn;let pn=(Gn=eo.parentNode)===null||Gn===void 0?void 0:Gn.firstChild,Qs=0;for(;pn;){if(pn===eo)return Qs;(!lr(pn)||pn.getAttribute("data-mce-type")!=="bookmark")&&Qs++,pn=pn.nextSibling}return-1};let gt=k[he?"startContainer":"endContainer"],kn=k[he?"startOffset":"endOffset"];if(gt){if(lr(gt)&&gt.parentNode){const eo=gt;kn=Se(gt),gt=gt.parentNode,Tu.remove(eo),!gt.hasChildNodes()&&Tu.isBlock(gt)&&gt.appendChild(Tu.create("br"))}k[he?"startContainer":"endContainer"]=gt,k[he?"startOffset":"endOffset"]=kn}};B(!0),B();const q=Tu.createRng();return q.setStart(k.startContainer,k.startOffset),k.endContainer&&q.setEnd(k.endContainer,k.endOffset),vi(q)},ka=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Zl=(k,B,q)=>{const he=q["list-style-type"]?q["list-style-type"]:null;k.setStyle(B,"list-style-type",he)},Nh=(k,B)=>{Ns.each(B,(q,he)=>{k.setAttribute(he,q)})},gd=(k,B,q)=>{Nh(B,q["list-attributes"]),Ns.each(k.select("li",B),he=>{Nh(he,q["list-item-attributes"])})},za=(k,B,q)=>{Zl(k,B,q),gd(k,B,q)},Wf=(k,B,q)=>{Ns.each(q,he=>k.setStyle(B,he,""))},Zf=(k,B)=>Ce(B)&&!bc(B,k.schema.getBlockElements()),jl=(k,B,q,he)=>{let Se=B[q?"startContainer":"endContainer"];const gt=B[q?"startOffset":"endOffset"];lr(Se)&&(Se=Se.childNodes[Math.min(gt,Se.childNodes.length-1)]||Se),!q&&pc(Se.nextSibling)&&(Se=Se.nextSibling);const kn=Gn=>{for(;!k.dom.isBlock(Gn)&&Gn.parentNode&&he!==Gn;)Gn=Gn.parentNode;return Gn},eo=(Gn,pn)=>{var Qs;const Tr=new Qn(Gn,kn(Gn)),ki=pn?"next":"prev";let Mu;for(;Mu=Tr[ki]();)if(!(Ps(k,Mu)||hd(Mu.textContent)||((Qs=Mu.textContent)===null||Qs===void 0?void 0:Qs.length)===0))return Je.some(Mu);return Je.none()};if(q&&ls(Se))if(hd(Se.textContent))Se=eo(Se,!1).getOr(Se);else for(Se.parentNode!==null&&Zf(k,Se.parentNode)&&(Se=Se.parentNode);Se.previousSibling!==null&&(Zf(k,Se.previousSibling)||ls(Se.previousSibling));)Se=Se.previousSibling;if(!q&&ls(Se))if(hd(Se.textContent))Se=eo(Se,!0).getOr(Se);else for(Se.parentNode!==null&&Zf(k,Se.parentNode)&&(Se=Se.parentNode);Se.nextSibling!==null&&(Zf(k,Se.nextSibling)||ls(Se.nextSibling));)Se=Se.nextSibling;for(;Se.parentNode!==he;){const Gn=Se.parentNode;if(yo(k,Se)||/^(TD|TH)$/.test(Gn.nodeName))return Se;Se=Gn}return Se},ql=(k,B,q)=>{const he=[],Se=k.dom,gt=jl(k,B,!0,q),kn=jl(k,B,!1,q);let eo;const Gn=[];for(let pn=gt;pn&&(Gn.push(pn),pn!==kn);pn=pn.nextSibling);return Ns.each(Gn,pn=>{var Qs;if(yo(k,pn)){he.push(pn),eo=null;return}if(Se.isBlock(pn)||pc(pn)){pc(pn)&&Se.remove(pn),eo=null;return}const Tr=pn.nextSibling;if($g.isBookmarkNode(pn)&&(ar(Tr)||yo(k,Tr)||!Tr&&pn.parentNode===q)){eo=null;return}eo||(eo=Se.create("p"),(Qs=pn.parentNode)===null||Qs===void 0||Qs.insertBefore(eo,pn),he.push(eo)),eo.appendChild(pn)}),he},Yd=(k,B,q)=>{const he=k.getStyle(B,"list-style-type");let Se=q?q["list-style-type"]:"";return Se=Se===null?"":Se,he===Se},vc=(k,B)=>{const q=k.selection.getStart(!0),he=jl(k,B,!0,k.getBody());return E1(xe.fromDom(he),xe.fromDom(B.commonAncestorContainer))?B.commonAncestorContainer:q},jf=(k,B,q)=>{const he=k.selection.getRng();let Se="LI";const gt=To(k,vc(k,he)),kn=k.dom;if(kn.getContentEditable(k.selection.getNode())==="false")return;B=B.toUpperCase(),B==="DL"&&(Se="DT");const eo=No(he),Gn=so(ql(k,he,gt),k.dom.isEditable);Ns.each(Gn,pn=>{let Qs;const Tr=pn.previousSibling,ki=pn.parentNode;ba(ki)||(Tr&&ar(Tr)&&Tr.nodeName===B&&Yd(kn,Tr,q)?(Qs=Tr,pn=kn.rename(pn,Se),Tr.appendChild(pn)):(Qs=kn.create(B),ki.insertBefore(Qs,pn),Qs.appendChild(pn),pn=kn.rename(pn,Se)),Wf(kn,pn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),za(kn,Qs,q),ku(k.dom,Qs))}),k.selection.setRng(dr(eo))},va=(k,B)=>ar(k)&&k.nodeName===(B==null?void 0:B.nodeName),Gl=(k,B,q)=>{const he=k.getStyle(B,"list-style-type",!0),Se=k.getStyle(q,"list-style-type",!0);return he===Se},Ic=(k,B)=>k.className===B.className,Va=(k,B,q)=>va(B,q)&&Gl(k,B,q)&&Ic(B,q),ku=(k,B)=>{let q,he=B.nextSibling;if(Va(k,B,he)){const Se=he;for(;q=Se.firstChild;)B.appendChild(q);k.remove(Se)}if(he=B.previousSibling,Va(k,B,he)){const Se=he;for(;q=Se.lastChild;)B.insertBefore(q,B.firstChild);k.remove(Se)}},Hg=(k,B,q,he)=>{if(B.nodeName!==q){const Se=k.dom.rename(B,q);za(k.dom,Se,he),uo(k,ka(q),Se)}else za(k.dom,B,he),uo(k,ka(q),B)},qf=(k,B,q,he)=>{if(B.classList.forEach((Se,gt,kn)=>{Se.startsWith("tox-")&&(kn.remove(Se),kn.length===0&&B.removeAttribute("class"))}),B.nodeName!==q){const Se=k.dom.rename(B,q);za(k.dom,Se,he),uo(k,ka(q),Se)}else za(k.dom,B,he),uo(k,ka(q),B)},Jc=(k,B,q,he,Se)=>{const gt=ar(B);if(gt&&B.nodeName===he&&!pd(Se)&&!$o(B))zm(k);else{jf(k,he,Se);const kn=No(k.selection.getRng()),eo=gt?[B,...q]:q,Gn=gt&&$o(B)?qf:Hg;Ns.each(eo,pn=>{Gn(k,pn,he,Se)}),k.selection.setRng(dr(kn))}},pd=k=>"list-style-type"in k,zg=(k,B,q,he)=>{if(B!==k.getBody())if(B)if(B.nodeName===q&&!pd(he)&&!$o(B))zm(k);else{const Se=No(k.selection.getRng());$o(B)&&B.classList.forEach((kn,eo,Gn)=>{kn.startsWith("tox-")&&(Gn.remove(kn),Gn.length===0&&B.removeAttribute("class"))}),za(k.dom,B,he);const gt=k.dom.rename(B,q);ku(k.dom,gt),k.selection.setRng(dr(Se)),jf(k,q,he),uo(k,ka(q),gt)}else jf(k,q,he),uo(k,ka(q),B)},Vm=(k,B,q)=>{const he=Y(k);if(us(k,he))return;const Se=Ye(k),gt=K(q)?q:{};Se.length>0?Jc(k,he,Se,B,gt):zg(k,he,B,gt)},Vg=hc.DOM,Ug=(k,B)=>{const q=B.parentElement;if(q&&q.nodeName==="LI"&&q.firstChild===B){const he=q.previousSibling;he&&he.nodeName==="LI"?(he.appendChild(B),$i(k,q)&&Vg.remove(q)):Vg.setStyle(q,"listStyleType","none")}if(ar(q)){const he=q.previousSibling;he&&he.nodeName==="LI"&&he.appendChild(B)}},Um=(k,B)=>{const q=Ns.grep(k.select("ol,ul",B));Ns.each(q,he=>{Ug(k,he)})},Kl=(k,B,q,he)=>{let Se=B.startContainer;const gt=B.startOffset;if(ls(Se)&&(q?gt<Se.data.length:gt>0))return Se;const kn=k.schema.getNonEmptyElements();lr(Se)&&(Se=Fn.getNode(Se,gt));const eo=new Qn(Se,he);q&&Fl(k.dom,Se)&&eo.next();const Gn=q?eo.next.bind(eo):eo.prev2.bind(eo);for(;Se=Gn();)if(Se.nodeName==="LI"&&!Se.hasChildNodes()||kn[Se.nodeName]||ls(Se)&&Se.data.length>0)return Se;return null},Gf=(k,B)=>{const q=B.childNodes;return q.length===1&&!ar(q[0])&&k.isBlock(q[0])},vl=k=>Je.from(k).map(xe.fromDom).filter(lo).exists(B=>Cr(B)&&!In(["details"],Gr(B))),Js=(k,B)=>{Gf(k,B)&&vl(B.firstChild)&&k.remove(B.firstChild,!0)},Jr=(k,B,q)=>{let he;const Se=Gf(k,q)?q.firstChild:q;if(Js(k,B),!$i(k,B,!0))for(;he=B.firstChild;)Se.appendChild(he)},Ei=(k,B,q)=>{let he;const Se=B.parentNode;if(!Pc(k,B)||!Pc(k,q))return;ar(q.lastChild)&&(he=q.lastChild),Se===q.lastChild&&pc(Se.previousSibling)&&k.remove(Se.previousSibling);const gt=q.lastChild;gt&&pc(gt)&&B.hasChildNodes()&&k.remove(gt),$i(k,q,!0)&&Ge(xe.fromDom(q)),Jr(k,B,q),he&&q.appendChild(he);const eo=Kt(xe.fromDom(q),xe.fromDom(B))?k.getParents(B,ar,q):[];k.remove(B),ve(eo,Gn=>{$i(k,Gn)&&Gn!==k.getRoot()&&k.remove(Gn)})},Kf=(k,B,q)=>{Ge(xe.fromDom(q)),Ei(k.dom,B,q),k.selection.setCursorLocation(q,0)},Xd=(k,B,q,he)=>{const Se=k.dom;if(Se.isEmpty(he))Kf(k,q,he);else{const gt=No(B);Ei(Se,q,he),k.selection.setRng(dr(gt))}},Qr=(k,B,q,he)=>{const Se=No(B);Ei(k.dom,q,he);const gt=dr(Se);k.selection.setRng(gt)},gn=(k,B)=>{const q=k.dom,he=k.selection,Se=he.getStart(),gt=Nn(k,Se),kn=q.getParent(he.getStart(),"LI",gt);if(kn){const eo=kn.parentElement;if(eo===k.getBody()&&$i(q,eo))return!0;const Gn=vi(he.getRng()),pn=q.getParent(Kl(k,Gn,B,gt),"LI",gt),Qs=pn&&(B?q.isChildOf(kn,pn):q.isChildOf(pn,kn));if(pn&&pn!==kn&&!Qs)return k.undoManager.transact(()=>{B?Xd(k,Gn,pn,kn):vu(kn)?_u(k):Qr(k,Gn,kn,pn)}),!0;if(Qs&&!B&&pn!==kn)return k.undoManager.transact(()=>{if(Gn.commonAncestorContainer.parentElement){const Tr=No(Gn),ki=Gn.commonAncestorContainer.parentElement;Jr(q,Gn.commonAncestorContainer.parentElement,pn),ki.remove();const Mu=dr(Tr);k.selection.setRng(Mu)}}),!0;if(!pn&&!B&&Gn.startOffset===0&&Gn.endOffset===0)return k.undoManager.transact(()=>{zm(k)}),!0}return!1},Yf=(k,B,q)=>{const he=k.getParent(B.parentNode,k.isBlock,q);k.remove(B),he&&k.isEmpty(he)&&k.remove(he)},Au=(k,B)=>{const q=k.dom,he=k.selection.getStart(),Se=Nn(k,he),gt=q.getParent(he,q.isBlock,Se);if(gt&&q.isEmpty(gt,void 0,{checkRootAsContent:!0})){const kn=vi(k.selection.getRng()),eo=q.getParent(Kl(k,kn,B,Se),"LI",Se);if(eo){const Gn=ki=>In(["td","th","caption"],Gr(ki)),pn=ki=>ki.dom===Se,Qs=ri(xe.fromDom(eo),Gn,pn),Tr=ri(xe.fromDom(kn.startContainer),Gn,pn);return $e(Qs,Tr,Oo)?(k.undoManager.transact(()=>{const ki=eo.parentNode;Yf(q,gt,Se),ku(q,ki),k.selection.select(eo,!0),k.selection.collapse(B)}),!0):!1}}return!1},_i=(k,B)=>gn(k,B)||Au(k,B),Xo=k=>{const B=k.selection.getStart(),q=Nn(k,B);return k.dom.getParent(B,"LI,DT,DD",q)||nn(k).length>0},bd=k=>Xo(k)?(k.undoManager.transact(()=>{let B=!0;const q=()=>B=!1;k.on("input",q),k.execCommand("Delete"),k.off("input",q),B&&k.dispatch("input"),Um(k.dom,k.getBody())}),!0):!1,Xf=(k,B)=>{const q=k.selection;return!us(k,q.getNode())&&(q.isCollapsed()?_i(k,B):bd(k))},Wm=k=>{k.on("ExecCommand",B=>{const q=B.command.toLowerCase();(q==="delete"||q==="forwarddelete")&&Xo(k)&&Um(k.dom,k.getBody())}),k.on("keydown",B=>{B.keyCode===Os.BACKSPACE?Xf(k,!1)&&B.preventDefault():B.keyCode===Os.DELETE&&Xf(k,!0)&&B.preventDefault()})},Ph=k=>({backspaceDelete:B=>{Xf(k,B)}}),Xn=(k,B)=>{const q=Y(k);q===null||us(k,q)||k.undoManager.transact(()=>{K(B.styles)&&k.dom.setStyles(q,B.styles),K(B.attrs)&&rr(B.attrs,(he,Se)=>k.dom.setAttrib(q,Se,he))})},vr=k=>{const B=yn(Yr(k).split("")),q=Fe(B,(he,Se)=>{const gt=he.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Se)*gt});return it(q,(he,Se)=>he+Se,0)},Ou=k=>{if(k--,k<0)return"";{const B=k%26,q=Math.floor(k/26),he=Ou(q),Se=String.fromCharCode(65+B);return he+Se}},Hi=k=>/^[A-Z]+$/.test(k),Ti=k=>/^[a-z]+$/.test(k),Ji=k=>/^[0-9]+$/.test(k),sa=k=>Ji(k)?2:Hi(k)?0:Ti(k)?1:xr(k)?3:4,ui=k=>{switch(sa(k)){case 2:return Je.some({listStyleType:Je.none(),start:k});case 0:return Je.some({listStyleType:Je.some("upper-alpha"),start:vr(k).toString()});case 1:return Je.some({listStyleType:Je.some("lower-alpha"),start:vr(k).toString()});case 3:return Je.some({listStyleType:Je.none(),start:""});case 4:return Je.none()}},yc=k=>{const B=parseInt(k.start,10);return io(k.listStyleType,"upper-alpha")?Ou(B):io(k.listStyleType,"lower-alpha")?Ou(B).toLowerCase():k.start},Zm=k=>{const B=Y(k);!bi(B)||us(k,B)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:yc({start:k.dom.getAttrib(B,"start","1"),listStyleType:Je.from(k.dom.getStyle(B,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:q=>{const he=q.getData();ui(he.start).each(Se=>{k.execCommand("mceListUpdate",!1,{attrs:{start:Se.start==="1"?"":Se.start},styles:{"list-style-type":Se.listStyleType.getOr("")}})}),q.close()}})},Ls=(k,B)=>()=>{const q=Y(k);return Ce(q)&&q.nodeName===B},jm=k=>{k.addCommand("mceListProps",()=>{Zm(k)})},_r=k=>{k.on("BeforeExecCommand",B=>{const q=B.command.toLowerCase();q==="indent"?Hm(k):q==="outdent"&&_u(k)}),k.addCommand("InsertUnorderedList",(B,q)=>{Vm(k,"UL",q)}),k.addCommand("InsertOrderedList",(B,q)=>{Vm(k,"OL",q)}),k.addCommand("InsertDefinitionList",(B,q)=>{Vm(k,"DL",q)}),k.addCommand("RemoveList",()=>{zm(k)}),jm(k),k.addCommand("mceListUpdate",(B,q)=>{K(q)&&Xn(k,q)}),k.addQueryStateHandler("InsertUnorderedList",Ls(k,"UL")),k.addQueryStateHandler("InsertOrderedList",Ls(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",Ls(k,"DL"))};var Du=tinymce.util.Tools.resolve("tinymce.html.Node");const yl=k=>k.type===3,ws=k=>k.length===0,Qc=k=>{const B=(Se,gt)=>{const kn=Du.create("li");ve(Se,eo=>kn.append(eo)),gt?k.insert(kn,gt,!0):k.append(kn)},q=(Se,gt)=>yl(gt)?[...Se,gt]:!ws(Se)&&!yl(gt)?(B(Se,gt),[]):Se,he=it(k.children(),q,[]);ws(he)||B(he)},Jd=k=>{k.on("PreInit",()=>{const{parser:B}=k;B.addNodeFilter("ul,ol",q=>ve(q,Qc))})},Ru=k=>{k.on("keydown",B=>{B.keyCode!==Os.TAB||Os.metaKeyPressed(B)||k.undoManager.transact(()=>{(B.shiftKey?_u(k):Hm(k))&&B.preventDefault()})})},Fs=k=>{ii(k)&&Ru(k),Wm(k)},Yl=(k,B)=>q=>{const he=Se=>{q.setActive(ta(Se.parents,B)),q.setEnabled(!us(k,Se.element)&&k.selection.isEditable())};return q.setEnabled(k.selection.isEditable()),Xc(k,he)},wc=k=>{const B=q=>()=>k.execCommand(q);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:B("InsertOrderedList"),onSetup:Yl(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:B("InsertUnorderedList"),onSetup:Yl(k,"UL")}))},po=(k,B)=>q=>Xc(k,Se=>q.setEnabled(ta(Se.parents,B)&&!us(k,Se.element))),vd=k=>{const B={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:po(k,"OL")};k.ui.registry.addMenuItem("listprops",B),k.ui.registry.addContextMenu("lists",{update:q=>{const he=Y(k,q);return bi(he)?["listprops"]:[]}})};var qm=()=>{p.add("lists",k=>(rd(k),Jd(k),k.hasPlugin("rtc",!0)?jm(k):(Fs(k),_r(k)),wc(k),vd(k),Ph(k)))};qm()}()),YJ}var JJ;function Rse(){return JJ||(JJ=1,Dse()),KJ}Rse();var QJ={},eQ={},tQ;function Mse(){return tQ||(tQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=Object.getPrototypeOf,w=(H,ee,ye)=>{var Be;return ye(H,ee.prototype)?!0:((Be=H.constructor)===null||Be===void 0?void 0:Be.name)===ee.name},E=H=>{const ee=typeof H;return H===null?"null":ee==="object"&&Array.isArray(H)?"array":ee==="object"&&w(H,String,(ye,Be)=>Be.isPrototypeOf(ye))?"string":ee},N=H=>ee=>E(ee)===H,V=H=>ee=>typeof ee===H,K=H=>ee=>H===ee,j=(H,ee)=>ge(H)&&w(H,ee,(ye,Be)=>g(ye)===Be),ue=N("string"),ge=N("object"),Ce=H=>j(H,Object),Xe=N("array"),Lt=K(null),Zt=V("boolean"),Pt=H=>H==null,Ct=H=>!Pt(H),Ne=V("function"),ln=V("number"),xt=(H,ee)=>{if(Xe(H)){for(let ye=0,Be=H.length;ye<Be;++ye)if(!ee(H[ye]))return!1;return!0}return!1},ce=()=>{};class Je{constructor(ee,ye){this.tag=ee,this.value=ye}static some(ee){return new Je(!0,ee)}static none(){return Je.singletonNone}fold(ee,ye){return this.tag?ye(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?Je.some(ee(this.value)):Je.none()}bind(ee){return this.tag?ee(this.value):Je.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:Je.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return Ct(ee)?Je.some(ee):Je.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Je.singletonNone=new Je(!1);const Dn=Object.keys,Gt=Object.hasOwnProperty,oe=(H,ee)=>{const ye=Dn(H);for(let Be=0,cn=ye.length;Be<cn;Be++){const It=ye[Be],$o=H[It];ee($o,It)}},Xt=H=>(ee,ye)=>{H[ye]=ee},In=(H,ee,ye,Be)=>{oe(H,(cn,It)=>{(ee(cn,It)?ye:Be)(cn,It)})},en=(H,ee)=>{const ye={};return In(H,ee,Xt(ye),ce),ye},Fe=(H,ee)=>Gt.call(H,ee),ve=(H,ee)=>Fe(H,ee)&&H[ee]!==void 0&&H[ee]!==null,so=Array.prototype.push,at=H=>{const ee=[];for(let ye=0,Be=H.length;ye<Be;++ye){if(!Xe(H[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+H);so.apply(ee,H[ye])}return ee},it=(H,ee)=>ee>=0&&ee<H.length?Je.some(H[ee]):Je.none(),M=H=>it(H,0),Hn=(H,ee)=>{for(let ye=0;ye<H.length;ye++){const Be=ee(H[ye],ye);if(Be.isSome())return Be}return Je.none()};typeof window<"u"||Function("return this;")();const ft=(H,ee,ye)=>{if(ue(ye)||Zt(ye)||ln(ye))H.setAttribute(ee,ye+"");else throw console.error("Invalid call to Attribute.set. Key ",ee,":: Value ",ye,":: Element ",H),new Error("Attribute value was not simple")},xo=(H,ee,ye)=>{ft(H.dom,ee,ye)},yn=(H,ee)=>{H.dom.removeAttribute(ee)},Ae=(H,ee)=>{const Be=(ee||document).createElement("div");if(Be.innerHTML=H,!Be.hasChildNodes()||Be.childNodes.length>1){const cn="HTML does not have a single root node";throw console.error(cn,H),new Error(cn)}return fn(Be.childNodes[0])},wt=(H,ee)=>{const Be=(ee||document).createElement(H);return fn(Be)},Mn=(H,ee)=>{const Be=(ee||document).createTextNode(H);return fn(Be)},fn=H=>{if(H==null)throw new Error("Node cannot be null or undefined");return{dom:H}},$e={fromHtml:Ae,fromTag:wt,fromText:Mn,fromDom:fn,fromPoint:(H,ee,ye)=>Je.from(H.dom.elementFromPoint(ee,ye)).map(fn)};var pt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),W=tinymce.util.Tools.resolve("tinymce.util.URI");const Us=H=>H.length>0,no=H=>ee=>ee.options.get(H),_o=H=>{const ee=H.options.register;ee("image_dimensions",{processor:"boolean",default:!0}),ee("image_advtab",{processor:"boolean",default:!1}),ee("image_uploadtab",{processor:"boolean",default:!0}),ee("image_prepend_url",{processor:"string",default:""}),ee("image_class_list",{processor:"object[]"}),ee("image_description",{processor:"boolean",default:!0}),ee("image_title",{processor:"boolean",default:!1}),ee("image_caption",{processor:"boolean",default:!1}),ee("image_list",{processor:ye=>{const Be=ye===!1||ue(ye)||xt(ye,ge)||Ne(ye);return Be?{value:ye,valid:Be}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},zo=no("image_dimensions"),pi=no("image_advtab"),et=no("image_uploadtab"),_t=no("image_prepend_url"),dt=no("image_class_list"),xe=no("image_description"),Ao=no("image_title"),Oo=no("image_caption"),Kt=no("image_list"),is=no("a11y_advanced_options"),Fo=no("automatic_uploads"),zr=H=>Us(H.options.get("images_upload_url")),Vo=H=>Ct(H.options.get("images_upload_handler")),Ws=(H,ee)=>Math.max(parseInt(H,10),parseInt(ee,10)),oi=H=>new Promise(ee=>{const ye=document.createElement("img"),Be=It=>{ye.onload=ye.onerror=null,ye.parentNode&&ye.parentNode.removeChild(ye),ee(It)};ye.onload=()=>{const It=Ws(ye.width,ye.clientWidth),$o=Ws(ye.height,ye.clientHeight),ta={width:It,height:$o};Be(Promise.resolve(ta))},ye.onerror=()=>{Be(Promise.reject(`Failed to get image dimensions for: ${H}`))};const cn=ye.style;cn.visibility="hidden",cn.position="fixed",cn.bottom=cn.left="0px",cn.width=cn.height="auto",document.body.appendChild(ye),ye.src=H}),_s=H=>(H&&(H=H.replace(/px$/,"")),H),Ss=H=>(H.length>0&&/^[0-9]+$/.test(H)&&(H+="px"),H),xs=H=>{if(H.margin){const ee=String(H.margin).split(" ");switch(ee.length){case 1:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[0],H["margin-bottom"]=H["margin-bottom"]||ee[0],H["margin-left"]=H["margin-left"]||ee[0];break;case 2:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[1],H["margin-bottom"]=H["margin-bottom"]||ee[0],H["margin-left"]=H["margin-left"]||ee[1];break;case 3:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[1],H["margin-bottom"]=H["margin-bottom"]||ee[2],H["margin-left"]=H["margin-left"]||ee[1];break;case 4:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[1],H["margin-bottom"]=H["margin-bottom"]||ee[2],H["margin-left"]=H["margin-left"]||ee[3]}delete H.margin}return H},Gr=(H,ee)=>{const ye=Kt(H);ue(ye)?fetch(ye).then(Be=>{Be.ok&&Be.json().then(ee)}):Ne(ye)?ye(ee):ee(ye)},Ts=(H,ee,ye)=>{const Be=()=>{ye.onload=ye.onerror=null,H.selection&&(H.selection.select(ye),H.nodeChanged())};ye.onload=()=>{!ee.width&&!ee.height&&zo(H)&&H.dom.setAttribs(ye,{width:String(ye.clientWidth),height:String(ye.clientHeight)}),Be()},ye.onerror=Be},Ko=H=>new Promise((ee,ye)=>{const Be=new FileReader;Be.onload=()=>{ee(Be.result)},Be.onerror=()=>{var cn;ye((cn=Be.error)===null||cn===void 0?void 0:cn.message)},Be.readAsDataURL(H)}),Mc=H=>H.nodeName==="IMG"&&(H.hasAttribute("data-mce-object")||H.hasAttribute("data-mce-placeholder")),lo=(H,ee)=>{const ye=H.options.get;return W.isDomSafe(ee,"img",{allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")})},hs=pt.DOM,Rr=H=>H.style.marginLeft&&H.style.marginRight&&H.style.marginLeft===H.style.marginRight?_s(H.style.marginLeft):"",Li=H=>H.style.marginTop&&H.style.marginBottom&&H.style.marginTop===H.style.marginBottom?_s(H.style.marginTop):"",Ki=H=>H.style.borderWidth?_s(H.style.borderWidth):"",ts=(H,ee)=>{var ye;return H.hasAttribute(ee)&&(ye=H.getAttribute(ee))!==null&&ye!==void 0?ye:""},jc=H=>H.parentNode!==null&&H.parentNode.nodeName==="FIGURE",Tt=(H,ee,ye)=>{ye===""||ye===null?H.removeAttribute(ee):H.setAttribute(ee,ye)},go=H=>{const ee=hs.create("figure",{class:"image"});hs.insertAfter(ee,H),ee.appendChild(H),ee.appendChild(hs.create("figcaption",{contentEditable:"true"},"Caption")),ee.contentEditable="false"},Vr=H=>{const ee=H.parentNode;Ct(ee)&&(hs.insertAfter(H,ee),hs.remove(ee))},Ur=H=>{jc(H)?Vr(H):go(H)},La=(H,ee)=>{const ye=H.getAttribute("style"),Be=ee(ye!==null?ye:"");Be.length>0?(H.setAttribute("style",Be),H.setAttribute("data-mce-style",Be)):H.removeAttribute("style")},si=(H,ee)=>(ye,Be,cn)=>{const It=ye.style;It[Be]?(It[Be]=Ss(cn),La(ye,ee)):Tt(ye,Be,cn)},Qo=(H,ee)=>H.style[ee]?_s(H.style[ee]):ts(H,ee),Fa=(H,ee)=>{const ye=Ss(ee);H.style.marginLeft=ye,H.style.marginRight=ye},Fi=(H,ee)=>{const ye=Ss(ee);H.style.marginTop=ye,H.style.marginBottom=ye},Yo=(H,ee)=>{const ye=Ss(ee);H.style.borderWidth=ye},En=(H,ee)=>{H.style.borderStyle=ee},sr=H=>{var ee;return(ee=H.style.borderStyle)!==null&&ee!==void 0?ee:""},ri=H=>Ct(H)&&H.nodeName==="FIGURE",fl=H=>H.nodeName==="IMG",ml=H=>hs.getAttrib(H,"alt").length===0&&hs.getAttrib(H,"role")==="presentation",vs=H=>ml(H)?"":ts(H,"alt"),Cr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Zs=(H,ee)=>{var ye;const Be=document.createElement("img");return Tt(Be,"style",ee.style),(Rr(Be)||ee.hspace!=="")&&Fa(Be,ee.hspace),(Li(Be)||ee.vspace!=="")&&Fi(Be,ee.vspace),(Ki(Be)||ee.border!=="")&&Yo(Be,ee.border),(sr(Be)||ee.borderStyle!=="")&&En(Be,ee.borderStyle),H((ye=Be.getAttribute("style"))!==null&&ye!==void 0?ye:"")},Ea=(H,ee)=>{const ye=document.createElement("img");if(Ge(H,{...ee,caption:!1},ye),pe(ye,ee.alt,ee.isDecorative),ee.caption){const Be=hs.create("figure",{class:"image"});return Be.appendChild(ye),Be.appendChild(hs.create("figcaption",{contentEditable:"true"},"Caption")),Be.contentEditable="false",Be}else return ye},Nc=(H,ee)=>({src:ts(ee,"src"),alt:vs(ee),title:ts(ee,"title"),width:Qo(ee,"width"),height:Qo(ee,"height"),class:ts(ee,"class"),style:H(ts(ee,"style")),caption:jc(ee),hspace:Rr(ee),vspace:Li(ee),border:Ki(ee),borderStyle:sr(ee),isDecorative:ml(ee)}),Mr=(H,ee,ye,Be,cn)=>{ye[Be]!==ee[Be]&&cn(H,Be,String(ye[Be]))},pe=(H,ee,ye)=>{if(ye){hs.setAttrib(H,"role","presentation");const Be=$e.fromDom(H);xo(Be,"alt","")}else{if(Lt(ee)){const Be=$e.fromDom(H);yn(Be,"alt")}else{const Be=$e.fromDom(H);xo(Be,"alt",ee)}hs.getAttrib(H,"role")==="presentation"&&hs.setAttrib(H,"role","")}},fe=(H,ee,ye)=>{(ye.alt!==ee.alt||ye.isDecorative!==ee.isDecorative)&&pe(H,ye.alt,ye.isDecorative)},Ve=(H,ee)=>(ye,Be,cn)=>{H(ye,cn),La(ye,ee)},Ge=(H,ee,ye)=>{const Be=Nc(H,ye);Mr(ye,Be,ee,"caption",(cn,It,$o)=>Ur(cn)),Mr(ye,Be,ee,"src",Tt),Mr(ye,Be,ee,"title",Tt),Mr(ye,Be,ee,"width",si("width",H)),Mr(ye,Be,ee,"height",si("height",H)),Mr(ye,Be,ee,"class",Tt),Mr(ye,Be,ee,"style",Ve((cn,It)=>Tt(cn,"style",It),H)),Mr(ye,Be,ee,"hspace",Ve(Fa,H)),Mr(ye,Be,ee,"vspace",Ve(Fi,H)),Mr(ye,Be,ee,"border",Ve(Yo,H)),Mr(ye,Be,ee,"borderStyle",Ve(En,H)),fe(ye,Be,ee)},Cn=(H,ee)=>{const ye=H.dom.styles.parse(ee),Be=xs(ye),cn=H.dom.styles.parse(H.dom.styles.serialize(Be));return H.dom.styles.serialize(cn)},Fn=H=>{const ee=H.selection.getNode(),ye=H.dom.getParent(ee,"figure.image");return ye?H.dom.select("img",ye)[0]:ee&&(ee.nodeName!=="IMG"||Mc(ee))?null:ee},Qn=(H,ee)=>{var ye;const Be=H.dom,cn=en(H.schema.getTextBlockElements(),($o,ta)=>!H.schema.isValidChild(ta,"figure")),It=Be.getParent(ee.parentNode,$o=>ve(cn,$o.nodeName),H.getBody());return It&&(ye=Be.split(It,ee))!==null&&ye!==void 0?ye:ee},Os=H=>{const ee=Fn(H);return ee?Nc(ye=>Cn(H,ye),ee):Cr()},lt=(H,ee)=>{const ye=Ea(cn=>Cn(H,cn),ee);H.dom.setAttrib(ye,"data-mce-id","__mcenew"),H.focus(),H.selection.setContent(ye.outerHTML);const Be=H.dom.select('*[data-mce-id="__mcenew"]')[0];if(H.dom.setAttrib(Be,"data-mce-id",null),ri(Be)){const cn=Qn(H,Be);H.selection.select(cn)}else H.selection.select(Be)},Ke=(H,ee)=>{H.dom.setAttrib(ee,"src",ee.getAttribute("src"))},rr=(H,ee)=>{if(ee){const ye=H.dom.is(ee.parentNode,"figure.image")?ee.parentNode:ee;H.dom.remove(ye),H.focus(),H.nodeChanged(),H.dom.isEmpty(H.getBody())&&(H.setContent(""),H.selection.setCursorLocation())}},Sr=(H,ee)=>{const ye=Fn(H);if(ye)if(Ge(Be=>Cn(H,Be),ee,ye),Ke(H,ye),ri(ye.parentNode)){const Be=ye.parentNode;Qn(H,Be),H.selection.select(ye.parentNode)}else H.selection.select(ye),Ts(H,ee,ye)},pa=(H,ee)=>{const ye=ee.src;return{...ee,src:lo(H,ye)?ye:""}},es=(H,ee)=>{const ye=Fn(H);if(ye){const cn={...Nc($o=>Cn(H,$o),ye),...ee},It=pa(H,cn);cn.src?Sr(H,It):rr(H,ye)}else ee.src&&lt(H,{...Cr(),...ee})},_a=(H=>(...ee)=>{if(ee.length===0)throw new Error("Can't merge zero objects");const ye={};for(let Be=0;Be<ee.length;Be++){const cn=ee[Be];for(const It in cn)Fe(cn,It)&&(ye[It]=H(ye[It],cn[It]))}return ye})((H,ee)=>Ce(H)&&Ce(ee)?_a(H,ee):ee);var Ms=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ns=tinymce.util.Tools.resolve("tinymce.util.Tools");const cs=H=>ue(H.value)?H.value:"",Wr=H=>ue(H.text)?H.text:ue(H.title)?H.title:"",hc=(H,ee)=>{const ye=[];return ns.each(H,Be=>{const cn=Wr(Be);if(Be.menu!==void 0){const It=hc(Be.menu,ee);ye.push({text:cn,items:It})}else{const It=ee(Be);ye.push({text:cn,value:It})}}),ye},Ns=(H=cs)=>ee=>ee?Je.from(ee).map(ye=>hc(ye,H)):Je.none(),hl=H=>Ns(cs)(H),ai=H=>Fe(H,"items"),ls=(H,ee)=>Hn(H,ye=>ai(ye)?ls(ye.items,ee):ye.value===ee?Je.some(ye):Je.none()),ar={sanitizer:Ns,sanitize:hl,findEntry:(H,ee)=>H.bind(ye=>ls(ye,ee))},bi={makeTab:H=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},ba=H=>{const ee=ar.sanitizer(wi=>H.convertURL(wi.value||wi.url||"","src")),ye=new Promise(wi=>{Gr(H,xr=>{wi(ee(xr).map(Hl=>at([[{text:"None",value:""}],Hl])))})}),Be=ar.sanitize(dt(H)),cn=pi(H),It=et(H),$o=zr(H),ta=Vo(H),ut=Os(H),ci=xe(H),us=Ao(H),Xc=zo(H),ur=Oo(H),uo=is(H),yi=Fo(H),Yr=Je.some(_t(H)).filter(wi=>ue(wi)&&wi.length>0);return ye.then(wi=>({image:ut,imageList:wi,classList:Be,hasAdvTab:cn,hasUploadTab:It,hasUploadUrl:$o,hasUploadHandler:ta,hasDescription:ci,hasImageTitle:us,hasDimensions:Xc,hasImageCaption:ur,prependURL:Yr,hasAccessibilityOptions:uo,automaticUploads:yi}))},ys=H=>{const ee={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ye=H.imageList.map(us=>({name:"images",type:"listbox",label:"Image list",items:us})),Be={name:"alt",type:"input",label:"Alternative description",enabled:!(H.hasAccessibilityOptions&&H.image.isDecorative)},cn={name:"title",type:"input",label:"Image title"},It={name:"dimensions",type:"sizeinput"},$o={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},ta=H.classList.map(us=>({name:"classes",type:"listbox",label:"Class",items:us})),ut={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},ci=us=>us?{type:"grid",columns:2}:{type:"panel"};return at([[ee],ye.toArray(),H.hasAccessibilityOptions&&H.hasDescription?[$o]:[],H.hasDescription?[Be]:[],H.hasImageTitle?[cn]:[],H.hasDimensions?[It]:[],[{...ci(H.classList.isSome()&&H.hasImageCaption),items:at([ta.toArray(),H.hasImageCaption?[ut]:[]])}]])},pc={makeTab:H=>({title:"General",name:"general",items:ys(H)}),makeItems:ys},yo={makeTab:H=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},bc=H=>({prevImage:ar.findEntry(H.imageList,H.image.src),prevAlt:H.image.alt,open:!0}),Ps=H=>({src:{value:H.src,meta:{}},images:H.src,alt:H.alt,title:H.title,dimensions:{width:H.width,height:H.height},classes:H.class,caption:H.caption,style:H.style,vspace:H.vspace,border:H.border,hspace:H.hspace,borderstyle:H.borderStyle,fileinput:[],isDecorative:H.isDecorative}),Fl=(H,ee)=>({src:H.src.value,alt:(H.alt===null||H.alt.length===0)&&ee?null:H.alt,title:H.title,width:H.dimensions.width,height:H.dimensions.height,class:H.classes,style:H.style,caption:H.caption,hspace:H.hspace,vspace:H.vspace,border:H.border,borderStyle:H.borderstyle,isDecorative:H.isDecorative}),$i=(H,ee)=>/^(?:[a-zA-Z]+:)?\/\//.test(ee)?Je.none():H.prependURL.bind(ye=>ee.substring(0,ye.length)!==ye?Je.some(ye+ee):Je.none()),Pc=(H,ee)=>{const ye=ee.getData();$i(H,ye.src.value).each(Be=>{ee.setData({src:{value:Be,meta:ye.src.meta}})})},Nr=(H,ee,ye)=>{H.hasDescription&&ue(ye.alt)&&(ee.alt=ye.alt),H.hasAccessibilityOptions&&(ee.isDecorative=ye.isDecorative||ee.isDecorative||!1),H.hasImageTitle&&ue(ye.title)&&(ee.title=ye.title),H.hasDimensions&&(ue(ye.width)&&(ee.dimensions.width=ye.width),ue(ye.height)&&(ee.dimensions.height=ye.height)),ue(ye.class)&&ar.findEntry(H.classList,ye.class).each(Be=>{ee.classes=Be.value}),H.hasImageCaption&&Zt(ye.caption)&&(ee.caption=ye.caption),H.hasAdvTab&&(ue(ye.style)&&(ee.style=ye.style),ue(ye.vspace)&&(ee.vspace=ye.vspace),ue(ye.border)&&(ee.border=ye.border),ue(ye.hspace)&&(ee.hspace=ye.hspace),ue(ye.borderstyle)&&(ee.borderstyle=ye.borderstyle))},rd=(H,ee)=>{const ye=ee.getData(),Be=ye.src.meta;if(Be!==void 0){const cn=_a({},ye);Nr(H,cn,Be),ee.setData(cn)}},ii=(H,ee,ye,Be)=>{const cn=Be.getData(),It=cn.src.value,$o=cn.src.meta||{};!$o.width&&!$o.height&&ee.hasDimensions&&(Us(It)?H.imageSize(It).then(ta=>{ye.open&&Be.setData({dimensions:ta})}).catch(ta=>console.error(ta)):Be.setData({dimensions:{width:"",height:""}}))},ad=(H,ee,ye)=>{const Be=ye.getData(),cn=ar.findEntry(H.imageList,Be.src.value);ee.prevImage=cn,ye.setData({images:cn.map(It=>It.value).getOr("")})},Gc=(H,ee,ye,Be)=>{Pc(ee,Be),rd(ee,Be),ii(H,ee,ye,Be),ad(ee,ye,Be)},id=(H,ee,ye,Be)=>{const cn=Be.getData(),It=ar.findEntry(ee.imageList,cn.images);It.each($o=>{cn.alt===""||ye.prevImage.map(ut=>ut.text===cn.alt).getOr(!1)?$o.value===""?Be.setData({src:$o,alt:ye.prevAlt}):Be.setData({src:$o,alt:$o.text}):Be.setData({src:$o})}),ye.prevImage=It,Gc(H,ee,ye,Be)},pr=(H,ee,ye,Be)=>{const cn=Be.getData();Be.block("Uploading image"),M(cn.fileinput).fold(()=>{Be.unblock()},It=>{const $o=URL.createObjectURL(It),ta=()=>{Be.unblock(),URL.revokeObjectURL($o)},ut=ci=>{Be.setData({src:{value:ci,meta:{}}}),Be.showTab("general"),Gc(H,ee,ye,Be),Be.focus("src")};Ko(It).then(ci=>{const us=H.createBlobCache(It,$o,ci);ee.automaticUploads?H.uploadImage(us).then(Xc=>{ut(Xc.url),ta()}).catch(Xc=>{ta(),H.alertErr(Xc,()=>{Be.focus("fileinput")})}):(H.addToBlobCache(us),ut(us.blobUri()),Be.unblock())})})},Yi=(H,ee,ye)=>(Be,cn)=>{cn.name==="src"?Gc(H,ee,ye,Be):cn.name==="images"?id(H,ee,ye,Be):cn.name==="alt"?ye.prevAlt=Be.getData().alt:cn.name==="fileinput"?pr(H,ee,ye,Be):cn.name==="isDecorative"&&Be.setEnabled("alt",!Be.getData().isDecorative)},Kc=H=>()=>{H.open=!1},yu=H=>H.hasAdvTab||H.hasUploadUrl||H.hasUploadHandler?{type:"tabpanel",tabs:at([[pc.makeTab(H)],H.hasAdvTab?[bi.makeTab(H)]:[],H.hasUploadTab&&(H.hasUploadUrl||H.hasUploadHandler)?[yo.makeTab(H)]:[]])}:{type:"panel",items:pc.makeItems(H)},gl=(H,ee,ye)=>Be=>{const cn=_a(Ps(ee.image),Be.getData()),It={...cn,style:Zs(ye.normalizeCss,Fl(cn,!1))};H.execCommand("mceUpdateImage",!1,Fl(It,ee.hasAccessibilityOptions)),H.editorUpload.uploadImagesAuto(),Be.close()},Yc=H=>ee=>lo(H,ee)?oi(H.documentBaseURI.toAbsolute(ee)).then(ye=>({width:String(ye.width),height:String(ye.height)})):Promise.resolve({width:"",height:""}),br=H=>(ee,ye,Be)=>{var cn;return H.editorUpload.blobCache.create({blob:ee,blobUri:ye,name:(cn=ee.name)===null||cn===void 0?void 0:cn.replace(/\.[^\.]+$/,""),filename:ee.name,base64:Be.split(",")[1]})},Pr=H=>ee=>{H.editorUpload.blobCache.add(ee)},vi=H=>(ee,ye)=>{H.windowManager.alert(ee,ye)},$l=H=>ee=>Cn(H,ee),wu=H=>ee=>H.dom.parseStyle(ee),Y=H=>(ee,ye)=>H.dom.serializeStyle(ee,ye),me=H=>ee=>Ms(H).upload([ee],!1).then(ye=>{var Be;return ye.length===0?Promise.reject("Failed to upload image"):ye[0].status===!1?Promise.reject((Be=ye[0].error)===null||Be===void 0?void 0:Be.message):ye[0]}),ke=H=>{const ee={imageSize:Yc(H),addToBlobCache:Pr(H),createBlobCache:br(H),alertErr:vi(H),normalizeCss:$l(H),parseStyle:wu(H),serializeStyle:Y(H),uploadImage:me(H)};return{open:()=>{ba(H).then(Be=>{const cn=bc(Be);return{title:"Insert/Edit Image",size:"normal",body:yu(Be),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ps(Be.image),onSubmit:gl(H,Be,ee),onChange:Yi(ee,Be,cn),onClose:Kc(cn)}}).then(H.windowManager.open)}}},Ye=H=>{H.addCommand("mceImage",ke(H).open),H.addCommand("mceUpdateImage",(ee,ye)=>{H.undoManager.transact(()=>es(H,ye))})},kt=H=>{const ee=H.attr("class");return Ct(ee)&&/\bimage\b/.test(ee)},nn=H=>ee=>{let ye=ee.length;const Be=cn=>{cn.attr("contenteditable",H?"true":null)};for(;ye--;){const cn=ee[ye];kt(cn)&&(cn.attr("contenteditable",H?"false":null),ns.each(cn.getAll("figcaption"),Be))}},$t=H=>{H.on("PreInit",()=>{H.parser.addNodeFilter("figure",nn(!0)),H.serializer.addNodeFilter("figure",nn(!1))})},Nn=H=>ee=>{const ye=()=>{ee.setEnabled(H.selection.isEditable())};return H.on("NodeChange",ye),ye(),()=>{H.off("NodeChange",ye)}},Vn=H=>{H.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ke(H).open,onSetup:ee=>{ee.setActive(Ct(Fn(H)));const ye=H.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",ee.setActive).unbind,Be=Nn(H)(ee);return()=>{ye(),Be()}}}),H.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ke(H).open,onSetup:Nn(H)}),H.ui.registry.addContextMenu("image",{update:ee=>H.selection.isEditable()&&(ri(ee)||fl(ee)&&!Mc(ee))?["image"]:[]})};var To=()=>{p.add("image",H=>{_o(H),$t(H),Vn(H),Ye(H)})};To()}()),eQ}var nQ;function Nse(){return nQ||(nQ=1,Mse()),QJ}Nse();var oQ={},sQ={},rQ;function Pse(){return rQ||(rQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),w=tinymce.util.Tools.resolve("tinymce.util.Tools");const E=at=>it=>it.options.get(at),N=at=>{const it=at.options.register;it("allow_html_in_named_anchor",{processor:"boolean",default:!1})},V=E("allow_html_in_named_anchor"),K="a:not([href])",j=at=>!at,ue=at=>at.getAttribute("id")||at.getAttribute("name")||"",ge=at=>at.nodeName.toLowerCase()==="a",Ce=at=>ge(at)&&!at.getAttribute("href")&&ue(at)!=="",Xe=at=>Ce(at)&&!at.firstChild,Lt=at=>{const it=at.dom;g(it).walk(at.selection.getRng(),M=>{w.each(M,Hn=>{Xe(Hn)&&it.remove(Hn,!1)})})},Zt=at=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(at),Pt=at=>at.dom.getParent(at.selection.getStart(),K),Ct=at=>{const it=Pt(at);return it?ue(it):""},Ne=(at,it)=>{at.undoManager.transact(()=>{V(at)||at.selection.collapse(!0),at.selection.isCollapsed()?at.insertContent(at.dom.createHTML("a",{id:it})):(Lt(at),at.formatter.remove("namedAnchor",void 0,void 0,!0),at.formatter.apply("namedAnchor",{value:it}),at.addVisual())})},ln=(at,it,M)=>{M.removeAttribute("name"),M.id=it,at.addVisual(),at.undoManager.add()},xt=(at,it)=>{const M=Pt(at);M?ln(at,it,M):Ne(at,it),at.focus()},ce=(at,it)=>Zt(it)?(xt(at,it),!0):(at.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Je=at=>{const it=Ct(at);at.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:it},onSubmit:M=>{ce(at,M.getData().id)&&M.close()}})},Dn=at=>{at.addCommand("mceAnchor",()=>{Je(at)})},Gt=at=>j(at.attr("href"))&&!j(at.attr("id")||at.attr("name")),oe=at=>Gt(at)&&!at.firstChild,Xt=at=>it=>{for(let M=0;M<it.length;M++){const Hn=it[M];oe(Hn)&&Hn.attr("contenteditable",at)}},In=at=>{at.on("PreInit",()=>{at.parser.addNodeFilter("a",Xt("false")),at.serializer.addNodeFilter("a",Xt(null))})},en=at=>{at.formatter.register("namedAnchor",{inline:"a",selector:K,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(it,M,Hn)=>Ce(it)})},Fe=at=>it=>{const M=()=>{it.setEnabled(at.selection.isEditable())};return at.on("NodeChange",M),M(),()=>{at.off("NodeChange",M)}},ve=at=>{const it=()=>at.execCommand("mceAnchor");at.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:it,onSetup:M=>{const Hn=at.selection.selectorChangedWithUnbind("a:not([href])",M.setActive).unbind,ft=Fe(at)(M);return()=>{Hn(),ft()}}}),at.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:it,onSetup:Fe(at)})};var so=()=>{p.add("anchor",at=>{N(at),In(at),Dn(at),ve(at),at.on("PreInit",()=>{en(at)})})};so()}()),sQ}var aQ;function Ise(){return aQ||(aQ=1,Pse()),oQ}Ise();var iQ={},cQ={},lQ;function Bse(){return lQ||(lQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=(et=>_t=>et===_t)(null),E=et=>et,N=(et,_t)=>{const dt=et.length,xe=new Array(dt);for(let Ao=0;Ao<dt;Ao++){const Oo=et[Ao];xe[Ao]=_t(Oo,Ao)}return xe},K={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},j={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},ue=[new RegExp(K.aletter),new RegExp(K.midnumlet),new RegExp(K.midletter),new RegExp(K.midnum),new RegExp(K.numeric),new RegExp(K.cr),new RegExp(K.lf),new RegExp(K.newline),new RegExp(K.extend),new RegExp(K.format),new RegExp(K.katakana),new RegExp(K.extendnumlet),new RegExp("@")],ge="",Ce=new RegExp("^"+K.punctuation+"$"),Xe=/^\s+$/,Lt=ue,Zt=j.OTHER,Pt=et=>{let _t=Zt;const dt=Lt.length;for(let xe=0;xe<dt;++xe){const Ao=Lt[xe];if(Ao&&Ao.test(et)){_t=xe;break}}return _t},Ct=et=>{const _t={};return dt=>{if(_t[dt])return _t[dt];{const xe=et(dt);return _t[dt]=xe,xe}}},Ne=et=>{const _t=Ct(Pt);return N(et,_t)},ln=(et,_t)=>{const dt=et[_t],xe=et[_t+1];if(_t<0||_t>et.length-1&&_t!==0||dt===j.ALETTER&&xe===j.ALETTER)return!1;const Ao=et[_t+2];if(dt===j.ALETTER&&(xe===j.MIDLETTER||xe===j.MIDNUMLET||xe===j.AT)&&Ao===j.ALETTER)return!1;const Oo=et[_t-1];return(dt===j.MIDLETTER||dt===j.MIDNUMLET||xe===j.AT)&&xe===j.ALETTER&&Oo===j.ALETTER||(dt===j.NUMERIC||dt===j.ALETTER)&&(xe===j.NUMERIC||xe===j.ALETTER)||(dt===j.MIDNUM||dt===j.MIDNUMLET)&&xe===j.NUMERIC&&Oo===j.NUMERIC||dt===j.NUMERIC&&(xe===j.MIDNUM||xe===j.MIDNUMLET)&&Ao===j.NUMERIC||(dt===j.EXTEND||dt===j.FORMAT)&&(xe===j.ALETTER||xe===j.NUMERIC||xe===j.KATAKANA||xe===j.EXTEND||xe===j.FORMAT)||(xe===j.EXTEND||xe===j.FORMAT&&(Ao===j.ALETTER||Ao===j.NUMERIC||Ao===j.KATAKANA||Ao===j.EXTEND||Ao===j.FORMAT))&&(dt===j.ALETTER||dt===j.NUMERIC||dt===j.KATAKANA||dt===j.EXTEND||dt===j.FORMAT)||dt===j.CR&&xe===j.LF?!1:dt===j.NEWLINE||dt===j.CR||dt===j.LF||xe===j.NEWLINE||xe===j.CR||xe===j.LF?!0:!(dt===j.KATAKANA&&xe===j.KATAKANA||xe===j.EXTENDNUMLET&&(dt===j.ALETTER||dt===j.NUMERIC||dt===j.KATAKANA||dt===j.EXTENDNUMLET)||dt===j.EXTENDNUMLET&&(xe===j.ALETTER||xe===j.NUMERIC||xe===j.KATAKANA)||dt===j.AT)},xt=ge,ce=Xe,Je=Ce,Dn=et=>et==="http"||et==="https",Gt=(et,_t)=>{let dt;for(dt=_t;dt<et.length&&!ce.test(et[dt]);dt++);return dt},oe=(et,_t)=>{const dt=Gt(et,_t+1);return et.slice(_t+1,dt).join(xt).substr(0,3)==="://"?dt:_t},Xt=(et,_t,dt,xe)=>{const Ao=[],Oo=[];let Kt=[];for(let is=0;is<dt.length;++is)if(Kt.push(et[is]),ln(dt,is)){const Fo=_t[is];if((xe.includeWhitespace||!ce.test(Fo))&&(xe.includePunctuation||!Je.test(Fo))){const zr=is-Kt.length+1,Vo=is+1,Ws=_t.slice(zr,Vo).join(xt);if(Dn(Ws)){const oi=oe(_t,is),_s=et.slice(Vo,oi);Array.prototype.push.apply(Kt,_s),is=oi}_t[is+1]==="."&&/^([a-zA-Z]\.)+$/.test(Ws+".")?(Kt.push(et[is+1]),Oo.push({start:zr,end:Vo+1})):Oo.push({start:zr,end:Vo}),Ao.push(Kt)}Kt=[]}return{words:Ao,indices:Oo}},In=()=>({includeWhitespace:!1,includePunctuation:!1}),en=(et,_t,dt)=>{dt={...In(),...dt};const xe=N(et,_t),Ao=Ne(xe);return Xt(et,xe,Ao,dt)},ve=(et,_t,dt)=>en(et,_t,dt).words,so=et=>et.replace(/\uFEFF/g,"");var at=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const it=(et,_t)=>{const dt=_t.getBlockElements(),xe=_t.getVoidElements(),Ao=zr=>dt[zr.nodeName]||xe[zr.nodeName],Oo=[];let Kt="";const is=new at(et,et);let Fo;for(;Fo=is.next();)Fo.nodeType===3?Kt+=so(Fo.data):Ao(Fo)&&Kt.length&&(Oo.push(Kt),Kt="");return Kt.length&&Oo.push(Kt),Oo},M=et=>et.replace(/\u200B/g,""),Hn=et=>et.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ft=(et,_t)=>{const dt=M(it(et,_t).join(`
`));return ve(dt.split(""),E).length},xo=(et,_t)=>{const dt=it(et,_t).join("");return Hn(dt)},yn=(et,_t)=>{const dt=it(et,_t).join("").replace(/\s/g,"");return Hn(dt)},Ae=(et,_t)=>()=>_t(et.getBody(),et.schema),wt=(et,_t)=>()=>_t(et.selection.getRng().cloneContents(),et.schema),Mn=et=>Ae(et,ft),fn=et=>({body:{getWordCount:Mn(et),getCharacterCount:Ae(et,xo),getCharacterCountWithoutSpaces:Ae(et,yn)},selection:{getWordCount:wt(et,ft),getCharacterCount:wt(et,xo),getCharacterCountWithoutSpaces:wt(et,yn)},getCount:Mn(et)}),io=(et,_t)=>{et.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(_t.body.getWordCount()),String(_t.selection.getWordCount())],["Characters (no spaces)",String(_t.body.getCharacterCountWithoutSpaces()),String(_t.selection.getCharacterCountWithoutSpaces())],["Characters",String(_t.body.getCharacterCount()),String(_t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},$e=(et,_t)=>{et.addCommand("mceWordCount",()=>io(et,_t))},pt=(et,_t)=>{let dt=null;return{cancel:()=>{w(dt)||(clearTimeout(dt),dt=null)},throttle:(...Oo)=>{w(dt)&&(dt=setTimeout(()=>{dt=null,et.apply(null,Oo)},_t))}}};var W=tinymce.util.Tools.resolve("tinymce.util.Delay");const Us=(et,_t)=>{et.dispatch("wordCountUpdate",{wordCount:{words:_t.body.getWordCount(),characters:_t.body.getCharacterCount(),charactersWithoutSpaces:_t.body.getCharacterCountWithoutSpaces()}})},no=(et,_t)=>{Us(et,_t)},_o=(et,_t,dt)=>{const xe=pt(()=>no(et,_t),dt);et.on("init",()=>{no(et,_t),W.setEditorTimeout(et,()=>{et.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",xe.throttle)},0),et.on("remove",xe.cancel)})},zo=et=>{const _t=()=>et.execCommand("mceWordCount");et.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:_t,context:"any"}),et.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:_t,context:"any"})};var pi=(et=300)=>{p.add("wordcount",_t=>{const dt=fn(_t);return $e(_t,dt),zo(_t),_o(_t,dt,et),dt})};pi()}()),cQ}var uQ;function Lse(){return uQ||(uQ=1,Bse()),iQ}Lse();var dQ={},fQ={},mQ;function Fse(){return mQ||(mQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(pe,fe,Ve)=>{var Ge;return Ve(pe,fe.prototype)?!0:((Ge=pe.constructor)===null||Ge===void 0?void 0:Ge.name)===fe.name},w=pe=>{const fe=typeof pe;return pe===null?"null":fe==="object"&&Array.isArray(pe)?"array":fe==="object"&&g(pe,String,(Ve,Ge)=>Ge.isPrototypeOf(Ve))?"string":fe},E=pe=>fe=>w(fe)===pe,N=E("string"),V=E("object"),K=E("array"),j=pe=>pe==null,ue=pe=>!j(pe);class ge{constructor(fe,Ve){this.tag=fe,this.value=Ve}static some(fe){return new ge(!0,fe)}static none(){return ge.singletonNone}fold(fe,Ve){return this.tag?Ve(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?ge.some(fe(this.value)):ge.none()}bind(fe){return this.tag?fe(this.value):ge.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:ge.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return ue(fe)?ge.some(fe):ge.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ge.singletonNone=new ge(!1);const Ce=Array.prototype.push,Xe=(pe,fe)=>{for(let Ve=0,Ge=pe.length;Ve<Ge;Ve++){const Cn=pe[Ve];fe(Cn,Ve)}},Lt=pe=>{const fe=[];for(let Ve=0,Ge=pe.length;Ve<Ge;++Ve){if(!K(pe[Ve]))throw new Error("Arr.flatten item "+Ve+" was not an array, input: "+pe);Ce.apply(fe,pe[Ve])}return fe},Zt=pe=>{let fe=pe;return{get:()=>fe,set:Cn=>{fe=Cn}}},Pt=Object.keys,Ct=Object.hasOwnProperty,Ne=(pe,fe)=>{const Ve=Pt(pe);for(let Ge=0,Cn=Ve.length;Ge<Cn;Ge++){const Fn=Ve[Ge],Qn=pe[Fn];fe(Qn,Fn)}},ln=(pe,fe)=>xt(pe,fe)?ge.from(pe[fe]):ge.none(),xt=(pe,fe)=>Ct.call(pe,fe),ce=pe=>fe=>fe.options.get(pe),Je=pe=>{const fe=pe.options.register;fe("audio_template_callback",{processor:"function"}),fe("video_template_callback",{processor:"function"}),fe("iframe_template_callback",{processor:"function"}),fe("media_live_embeds",{processor:"boolean",default:!0}),fe("media_filter_html",{processor:"boolean",default:!0}),fe("media_url_resolver",{processor:"function"}),fe("media_alt_source",{processor:"boolean",default:!0}),fe("media_poster",{processor:"boolean",default:!0}),fe("media_dimensions",{processor:"boolean",default:!0})},Dn=ce("audio_template_callback"),Gt=ce("video_template_callback"),oe=ce("iframe_template_callback"),Xt=ce("media_live_embeds"),In=ce("media_filter_html"),en=ce("media_url_resolver"),Fe=ce("media_alt_source"),ve=ce("media_poster"),so=ce("media_dimensions");var at=tinymce.util.Tools.resolve("tinymce.util.Tools"),it=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Hn=it.DOM,ft=pe=>pe.replace(/px$/,""),xo=pe=>{const fe=pe.attr("style"),Ve=fe?Hn.parseStyle(fe):{};return{type:"ephox-embed-iri",source:pe.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:ln(Ve,"max-width").map(ft).getOr(""),height:ln(Ve,"max-height").map(ft).getOr("")}},yn=(pe,fe)=>{let Ve={};const Cn=M({validate:!1,forced_root_block:!1},fe).parse(pe);for(let Fn=Cn;Fn;Fn=Fn.walk())if(Fn.type===1){const Qn=Fn.name;if(Fn.attr("data-ephox-embed-iri")){Ve=xo(Fn);break}else!Ve.source&&Qn==="param"&&(Ve.source=Fn.attr("movie")),(Qn==="iframe"||Qn==="object"||Qn==="embed"||Qn==="video"||Qn==="audio")&&(Ve.type||(Ve.type=Qn),Ve=at.extend(Fn.attributes.map,Ve)),Qn==="source"&&(Ve.source?Ve.altsource||(Ve.altsource=Fn.attr("src")):Ve.source=Fn.attr("src")),Qn==="img"&&!Ve.poster&&(Ve.poster=Fn.attr("src"))}return Ve.source=Ve.source||Ve.src||"",Ve.altsource=Ve.altsource||"",Ve.poster=Ve.poster||"",Ve},Ae=pe=>{var fe;const Ve={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ge=(fe=pe.toLowerCase().split(".").pop())!==null&&fe!==void 0?fe:"";return ln(Ve,Ge).getOr("")};var wt=tinymce.util.Tools.resolve("tinymce.html.Node"),Mn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const fn=(pe,fe={})=>M({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...fe},pe),io=it.DOM,$e=pe=>/^[0-9.]+$/.test(pe)?pe+"px":pe,pt=(pe,fe)=>{const Ve=fe.attr("style"),Ge=Ve?io.parseStyle(Ve):{};ue(pe.width)&&(Ge["max-width"]=$e(pe.width)),ue(pe.height)&&(Ge["max-height"]=$e(pe.height)),fe.attr("style",io.serializeStyle(Ge))},W=["source","altsource"],Us=(pe,fe,Ve,Ge)=>{let Cn=0,Fn=0;const Qn=fn(Ge);Qn.addNodeFilter("source",lt=>Cn=lt.length);const Os=Qn.parse(pe);for(let lt=Os;lt;lt=lt.walk())if(lt.type===1){const Ke=lt.name;if(lt.attr("data-ephox-embed-iri")){pt(fe,lt);break}else{switch(Ke){case"video":case"object":case"embed":case"img":case"iframe":fe.height!==void 0&&fe.width!==void 0&&(lt.attr("width",fe.width),lt.attr("height",fe.height));break}if(Ve)switch(Ke){case"video":lt.attr("poster",fe.poster),lt.attr("src",null);for(let Sr=Cn;Sr<2;Sr++)if(fe[W[Sr]]){const pa=new wt("source",1);pa.attr("src",fe[W[Sr]]),pa.attr("type",fe[W[Sr]+"mime"]||null),lt.append(pa)}break;case"iframe":lt.attr("src",fe.source);break;case"object":const rr=lt.getAll("img").length>0;if(fe.poster&&!rr){lt.attr("src",fe.poster);const Sr=new wt("img",1);Sr.attr("src",fe.poster),Sr.attr("width",fe.width),Sr.attr("height",fe.height),lt.append(Sr)}break;case"source":if(Fn<2&&(lt.attr("src",fe[W[Fn]]),lt.attr("type",fe[W[Fn]+"mime"]||null),!fe[W[Fn]])){lt.remove();continue}Fn++;break;case"img":fe.poster||lt.remove();break}}}return Mn({},Ge).serialize(Os)},no=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],_o=pe=>{const fe=pe.match(/^(https?:\/\/|www\.)(.+)$/i);return fe&&fe.length>1?fe[1]==="www."?"https://":fe[1]:"https://"},zo=(pe,fe)=>{const Ve=_o(fe),Ge=pe.regex.exec(fe);let Cn=Ve+pe.url;if(ue(Ge))for(let Fn=0;Fn<Ge.length;Fn++)Cn=Cn.replace("$"+Fn,()=>Ge[Fn]?Ge[Fn]:"");return Cn.replace(/\?$/,"")},pi=pe=>{const fe=no.filter(Ve=>Ve.regex.test(pe));return fe.length>0?at.extend({},fe[0],{url:zo(fe[0],pe)}):null},et=(pe,fe)=>{if(fe)return fe(pe);{const Ve=pe.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+pe.source+'" width="'+pe.width+'" height="'+pe.height+'"'+Ve+"></iframe>"}},_t=pe=>{let fe='<object data="'+pe.source+'" width="'+pe.width+'" height="'+pe.height+'" type="application/x-shockwave-flash">';return pe.poster&&(fe+='<img src="'+pe.poster+'" width="'+pe.width+'" height="'+pe.height+'" />'),fe+="</object>",fe},dt=(pe,fe)=>fe?fe(pe):'<audio controls="controls" src="'+pe.source+'">'+(pe.altsource?`
<source src="`+pe.altsource+'"'+(pe.altsourcemime?' type="'+pe.altsourcemime+'"':"")+` />
`:"")+"</audio>",xe=(pe,fe)=>fe?fe(pe):'<video width="'+pe.width+'" height="'+pe.height+'"'+(pe.poster?' poster="'+pe.poster+'"':"")+` controls="controls">
<source src="`+pe.source+'"'+(pe.sourcemime?' type="'+pe.sourcemime+'"':"")+` />
`+(pe.altsource?'<source src="'+pe.altsource+'"'+(pe.altsourcemime?' type="'+pe.altsourcemime+'"':"")+` />
`:"")+"</video>",Ao=(pe,fe)=>{var Ve;const Ge=at.extend({},fe);if(!Ge.source&&(at.extend(Ge,yn((Ve=Ge.embed)!==null&&Ve!==void 0?Ve:"",pe.schema)),!Ge.source))return"";Ge.altsource||(Ge.altsource=""),Ge.poster||(Ge.poster=""),Ge.source=pe.convertURL(Ge.source,"source"),Ge.altsource=pe.convertURL(Ge.altsource,"source"),Ge.sourcemime=Ae(Ge.source),Ge.altsourcemime=Ae(Ge.altsource),Ge.poster=pe.convertURL(Ge.poster,"poster");const Cn=pi(Ge.source);if(Cn&&(Ge.source=Cn.url,Ge.type=Cn.type,Ge.allowfullscreen=Cn.allowFullscreen,Ge.width=Ge.width||String(Cn.w),Ge.height=Ge.height||String(Cn.h)),Ge.embed)return Us(Ge.embed,Ge,!0,pe.schema);{const Fn=Dn(pe),Qn=Gt(pe),Os=oe(pe);return Ge.width=Ge.width||"300",Ge.height=Ge.height||"150",at.each(Ge,(lt,Ke)=>{Ge[Ke]=pe.dom.encode(""+lt)}),Ge.type==="iframe"?et(Ge,Os):Ge.sourcemime==="application/x-shockwave-flash"?_t(Ge):Ge.sourcemime.indexOf("audio")!==-1?dt(Ge,Fn):xe(Ge,Qn)}},Oo=pe=>pe.hasAttribute("data-mce-object")||pe.hasAttribute("data-ephox-embed-iri"),Kt=pe=>{pe.on("mousedown",fe=>{const Ve=pe.dom.getParent(fe.target,".mce-preview-object");Ve&&pe.dom.getAttrib(Ve,"data-mce-selected")==="2"&&fe.stopImmediatePropagation()}),pe.on("click keyup touchend",()=>{const fe=pe.selection.getNode();fe&&pe.dom.hasClass(fe,"mce-preview-object")&&pe.dom.getAttrib(fe,"data-mce-selected")&&fe.setAttribute("data-mce-selected","2")}),pe.on("ObjectResized",fe=>{const Ve=fe.target;if(Ve.getAttribute("data-mce-object")){let Ge=Ve.getAttribute("data-mce-html");Ge&&(Ge=unescape(Ge),Ve.setAttribute("data-mce-html",escape(Us(Ge,{width:String(fe.width),height:String(fe.height)},!1,pe.schema))))}})},is={},Fo=(pe,fe,Ve)=>new Promise((Ge,Cn)=>{const Fn=Qn=>(Qn.html&&(is[pe.source]=Qn),Ge({url:pe.source,html:Qn.html?Qn.html:fe(pe)}));is[pe.source]?Fn(is[pe.source]):Ve({url:pe.source}).then(Fn).catch(Cn)}),zr=(pe,fe)=>Promise.resolve({html:fe(pe),url:pe.source}),Vo=pe=>fe=>Ao(pe,fe),Ws=(pe,fe)=>{const Ve=en(pe);return Ve?Fo(fe,Vo(pe),Ve):zr(fe,Vo(pe))},oi=pe=>xt(is,pe),_s=(pe,fe)=>ln(fe,pe).bind(Ve=>ln(Ve,"meta")),Ss=(pe,fe,Ve)=>Ge=>{const Cn=()=>ln(pe,Ge),Fn=()=>ln(fe,Ge),Qn=Ke=>ln(Ke,"value").bind(rr=>rr.length>0?ge.some(rr):ge.none()),Os=()=>Cn().bind(Ke=>V(Ke)?Qn(Ke).orThunk(Fn):Fn().orThunk(()=>ge.from(Ke))),lt=()=>Fn().orThunk(()=>Cn().bind(Ke=>V(Ke)?Qn(Ke):ge.from(Ke)));return{[Ge]:(Ge===Ve?Os():lt()).getOr("")}},xs=(pe,fe)=>{const Ve={};return ln(pe,"dimensions").each(Ge=>{Xe(["width","height"],Cn=>{ln(fe,Cn).orThunk(()=>ln(Ge,Cn)).each(Fn=>Ve[Cn]=Fn)})}),Ve},Gr=(pe,fe)=>{const Ve=fe&&fe!=="dimensions"?_s(fe,pe).getOr({}):{},Ge=Ss(pe,Ve,fe);return{...Ge("source"),...Ge("altsource"),...Ge("poster"),...Ge("embed"),...xs(pe,Ve)}},Ts=pe=>{const fe={...pe,source:{value:ln(pe,"source").getOr("")},altsource:{value:ln(pe,"altsource").getOr("")},poster:{value:ln(pe,"poster").getOr("")}};return Xe(["width","height"],Ve=>{ln(pe,Ve).each(Ge=>{const Cn=fe.dimensions||{};Cn[Ve]=Ge,fe.dimensions=Cn})}),fe},Ko=pe=>fe=>{const Ve=fe&&fe.msg?"Media embed handler error: "+fe.msg:"Media embed handler threw unknown error.";pe.notificationManager.open({type:"error",text:Ve})},Mc=pe=>{const fe=pe.selection.getNode(),Ve=Oo(fe)?pe.serializer.serialize(fe,{selection:!0}):"",Ge=yn(Ve,pe.schema),Fn=(()=>{if(Li(Ge.source,Ge.type)){const Qn=pe.dom.getRect(fe);return{width:Qn.w.toString().replace(/px$/,""),height:Qn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Ve,...Ge,...Fn}},lo=(pe,fe)=>Ve=>{if(N(Ve.url)&&Ve.url.trim().length>0){const Ge=Ve.html,Fn={...yn(Ge,fe.schema),source:Ve.url,embed:Ge};pe.setData(Ts(Fn))}},hs=(pe,fe)=>{const Ve=pe.dom.select("*[data-mce-object]");for(let Ge=0;Ge<fe.length;Ge++)for(let Cn=Ve.length-1;Cn>=0;Cn--)fe[Ge]===Ve[Cn]&&Ve.splice(Cn,1);pe.selection.select(Ve[0])},Rr=(pe,fe)=>{const Ve=pe.dom.select("*[data-mce-object]");pe.insertContent(fe),hs(pe,Ve),pe.nodeChanged()},Li=(pe,fe)=>ue(fe)&&fe==="ephox-embed-iri"&&ue(pi(pe)),Ki=(pe,fe)=>((Ge,Cn)=>Ge.width!==Cn.width||Ge.height!==Cn.height)(pe,fe)&&Li(fe.source,pe.type),ts=(pe,fe,Ve)=>{var Ge;fe.embed=Ki(pe,fe)&&so(Ve)?Ao(Ve,{...fe,embed:""}):Us((Ge=fe.embed)!==null&&Ge!==void 0?Ge:"",fe,!1,Ve.schema),fe.embed&&(pe.source===fe.source||oi(fe.source))?Rr(Ve,fe.embed):Ws(Ve,fe).then(Cn=>{Rr(Ve,Cn.html)}).catch(Ko(Ve))},jc=pe=>{const fe=Mc(pe),Ve=Zt(fe),Ge=Ts(fe),Cn=(Ms,ns)=>{const cs=Gr(ns.getData(),"source");Ms.source!==cs.source&&(lo(_a,pe)({url:cs.source,html:""}),Ws(pe,cs).then(lo(_a,pe)).catch(Ko(pe)))},Fn=Ms=>{var ns;const cs=Gr(Ms.getData()),Wr=yn((ns=cs.embed)!==null&&ns!==void 0?ns:"",pe.schema);Ms.setData(Ts(Wr))},Qn=(Ms,ns,cs)=>{const Wr=Gr(Ms.getData(),ns),hc=Ki(cs,Wr)&&so(pe)?{...Wr,embed:""}:Wr,Ns=Ao(pe,hc);Ms.setData(Ts({...hc,embed:Ns}))},Os=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],lt=so(pe)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Ke={title:"General",name:"general",items:Lt([Os,lt])},Sr={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},pa=[];Fe(pe)&&pa.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ve(pe)&&pa.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const es={title:"Advanced",name:"advanced",items:pa},qc=[Ke,Sr];pa.length>0&&qc.push(es);const Kr={type:"tabpanel",tabs:qc},_a=pe.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Kr,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Ms=>{const ns=Gr(Ms.getData());ts(Ve.get(),ns,pe),Ms.close()},onChange:(Ms,ns)=>{switch(ns.name){case"source":Cn(Ve.get(),Ms);break;case"embed":Fn(Ms);break;case"dimensions":case"altsource":case"poster":Qn(Ms,ns.name,Ve.get());break}Ve.set(Gr(Ms.getData()))},initialData:Ge})},Tt=pe=>({showDialog:()=>{jc(pe)}}),go=pe=>{const fe=()=>{jc(pe)};pe.addCommand("mceMedia",fe)},Vr=(pe,fe,Ve)=>pe.length>=fe.length&&pe.substr(Ve,Ve+fe.length)===fe,Ur=(pe,fe)=>Vr(pe,fe,0);var La=tinymce.util.Tools.resolve("tinymce.Env");const si=pe=>{const fe=pe.name;return fe==="iframe"||fe==="video"||fe==="audio"},Qo=(pe,fe,Ve,Ge=null)=>{const Cn=pe.attr(Ve);return ue(Cn)?Cn:xt(fe,Ve)?null:Ge},Fa=(pe,fe,Ve)=>{const Ge=fe.name==="img"||pe.name==="video",Cn=Ge?"300":null,Fn=pe.name==="audio"?"30":"150",Qn=Ge?Fn:null;fe.attr({width:Qo(pe,Ve,"width",Cn),height:Qo(pe,Ve,"height",Qn)})},Fi=(pe,fe,Ve,Ge)=>{const Cn=fn(pe.schema).parse(Ge,{context:fe});for(;Cn.firstChild;)Ve.append(Cn.firstChild)},Yo=(pe,fe)=>{const Ve=fe.name,Ge=new wt("img",1);return sr(pe,fe,Ge),Fa(fe,Ge,{}),Ge.attr({style:fe.attr("style"),src:La.transparentSrc,"data-mce-object":Ve,class:"mce-object mce-object-"+Ve}),Ge},En=(pe,fe)=>{var Ve;const Ge=fe.name,Cn=new wt("span",1);Cn.attr({contentEditable:"false",style:fe.attr("style"),"data-mce-object":Ge,class:"mce-preview-object mce-object-"+Ge}),sr(pe,fe,Cn);const Fn=pe.dom.parseStyle((Ve=fe.attr("style"))!==null&&Ve!==void 0?Ve:""),Qn=new wt(Ge,1);if(Fa(fe,Qn,Fn),Qn.attr({src:fe.attr("src"),style:fe.attr("style"),class:fe.attr("class")}),Ge==="iframe")Qn.attr({allowfullscreen:fe.attr("allowfullscreen"),frameborder:"0",sandbox:fe.attr("sandbox"),referrerpolicy:fe.attr("referrerpolicy")});else{Xe(["controls","crossorigin","currentTime","loop","muted","poster","preload"],rr=>{Qn.attr(rr,fe.attr(rr))});const Ke=Cn.attr("data-mce-html");ue(Ke)&&Fi(pe,Ge,Qn,unescape(Ke))}const Os=new wt("span",1);return Os.attr("class","mce-shim"),Cn.append(Qn),Cn.append(Os),Cn},sr=(pe,fe,Ve)=>{var Ge;const Cn=(Ge=fe.attributes)!==null&&Ge!==void 0?Ge:[];let Fn=Cn.length;for(;Fn--;){const Ke=Cn[Fn].name;let rr=Cn[Fn].value;Ke!=="width"&&Ke!=="height"&&Ke!=="style"&&!Ur(Ke,"data-mce-")&&((Ke==="data"||Ke==="src")&&(rr=pe.convertURL(rr,Ke)),Ve.attr("data-mce-p-"+Ke,rr))}const Qn=Mn({inner:!0},pe.schema),Os=new wt("div",1);Xe(fe.children(),Ke=>Os.append(Ke));const lt=Qn.serialize(Os);lt&&(Ve.attr("data-mce-html",escape(lt)),Ve.empty())},ri=pe=>{const fe=pe.attr("class");return N(fe)&&/\btiny-pageembed\b/.test(fe)},fl=pe=>{let fe=pe;for(;fe=fe.parent;)if(fe.attr("data-ephox-embed-iri")||ri(fe))return!0;return!1},ml=pe=>fe=>{let Ve=fe.length,Ge;for(;Ve--;)Ge=fe[Ve],Ge.parent&&(Ge.parent.attr("data-mce-object")||(si(Ge)&&Xt(pe)?fl(Ge)||Ge.replace(En(pe,Ge)):fl(Ge)||Ge.replace(Yo(pe,Ge))))},vs=(pe,fe,Ve)=>{const Ge=pe.options.get,Cn=Ge("xss_sanitization"),Fn=In(pe);return fn(pe.schema,{sanitize:Cn,validate:Fn}).parse(Ve,{context:fe})},Cr=pe=>{pe.on("PreInit",()=>{const{schema:fe,serializer:Ve,parser:Ge}=pe,Cn=fe.getBoolAttrs();Xe("webkitallowfullscreen mozallowfullscreen".split(" "),Fn=>{Cn[Fn]={}}),Ne({embed:["wmode"]},(Fn,Qn)=>{const Os=fe.getElementRule(Qn);Os&&Xe(Fn,lt=>{Os.attributes[lt]={},Os.attributesOrder.push(lt)})}),Ge.addNodeFilter("iframe,video,audio,object,embed",ml(pe)),Ve.addAttributeFilter("data-mce-object",(Fn,Qn)=>{var Os;let lt=Fn.length;for(;lt--;){const Ke=Fn[lt];if(!Ke.parent)continue;const rr=Ke.attr(Qn),Sr=new wt(rr,1);if(rr!=="audio"){const Kr=Ke.attr("class");Kr&&Kr.indexOf("mce-preview-object")!==-1&&Ke.firstChild?Sr.attr({width:Ke.firstChild.attr("width"),height:Ke.firstChild.attr("height")}):Sr.attr({width:Ke.attr("width"),height:Ke.attr("height")})}Sr.attr({style:Ke.attr("style")});const pa=(Os=Ke.attributes)!==null&&Os!==void 0?Os:[];let es=pa.length;for(;es--;){const Kr=pa[es].name;Kr.indexOf("data-mce-p-")===0&&Sr.attr(Kr.substr(11),pa[es].value)}const qc=Ke.attr("data-mce-html");if(qc){const Kr=vs(pe,rr,unescape(qc));Xe(Kr.children(),_a=>Sr.append(_a))}Ke.replace(Sr)}})}),pe.on("SetContent",()=>{const fe=pe.dom;Xe(fe.select("span.mce-preview-object"),Ve=>{fe.select("span.mce-shim",Ve).length===0&&fe.add(Ve,"span",{class:"mce-shim"})})})},Zs=pe=>{pe.on("ResolveName",fe=>{let Ve;fe.target.nodeType===1&&(Ve=fe.target.getAttribute("data-mce-object"))&&(fe.name=Ve)})},Ea=pe=>fe=>{const Ve=()=>{fe.setEnabled(pe.selection.isEditable())};return pe.on("NodeChange",Ve),Ve(),()=>{pe.off("NodeChange",Ve)}},Nc=pe=>{const fe=()=>pe.execCommand("mceMedia");pe.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:fe,onSetup:Ve=>{const Ge=pe.selection;Ve.setActive(Oo(Ge.getNode()));const Cn=Ge.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ve.setActive).unbind,Fn=Ea(pe)(Ve);return()=>{Cn(),Fn()}}}),pe.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:fe,onSetup:Ea(pe)})};var Mr=()=>{p.add("media",pe=>(Je(pe),go(pe),Nc(pe),Zs(pe),Cr(pe),Kt(pe),Tt(pe)))};Mr()}()),fQ}var hQ;function $se(){return hQ||(hQ=1,Fse()),dQ}$se();var gQ={},pQ={},bQ;function Hse(){return bQ||(bQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(j,ue)=>{j.focus(),j.undoManager.transact(()=>{j.setContent(ue)}),j.selection.setCursorLocation(),j.nodeChanged()},w=j=>j.getContent({source_view:!0}),E=j=>{const ue=w(j);j.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:ue},onSubmit:ge=>{g(j,ge.getData().code),ge.close()}})},N=j=>{j.addCommand("mceCodeEditor",()=>{E(j)})},V=j=>{const ue=()=>j.execCommand("mceCodeEditor");j.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:ue}),j.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:ue})};var K=()=>{p.add("code",j=>(N(j),V(j),{}))};K()}()),pQ}var vQ;function zse(){return vQ||(vQ=1,Hse()),gQ}zse();var yQ={},wQ={},CQ;function Vse(){return CQ||(CQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Ae,wt,Mn)=>{const fn=wt==="UL"?"InsertUnorderedList":"InsertOrderedList";Ae.execCommand(fn,!1,Mn===!1?null:{"list-style-type":Mn})},w=Ae=>{Ae.addCommand("ApplyUnorderedListStyle",(wt,Mn)=>{g(Ae,"UL",Mn["list-style-type"])}),Ae.addCommand("ApplyOrderedListStyle",(wt,Mn)=>{g(Ae,"OL",Mn["list-style-type"])})},E=Ae=>wt=>wt.options.get(Ae),N=Ae=>{const wt=Ae.options.register;wt("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),wt("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},V=E("advlist_number_styles"),K=E("advlist_bullet_styles"),j=Ae=>Ae==null,ue=Ae=>!j(Ae);class ge{constructor(wt,Mn){this.tag=wt,this.value=Mn}static some(wt){return new ge(!0,wt)}static none(){return ge.singletonNone}fold(wt,Mn){return this.tag?Mn(this.value):wt()}isSome(){return this.tag}isNone(){return!this.tag}map(wt){return this.tag?ge.some(wt(this.value)):ge.none()}bind(wt){return this.tag?wt(this.value):ge.none()}exists(wt){return this.tag&&wt(this.value)}forall(wt){return!this.tag||wt(this.value)}filter(wt){return!this.tag||wt(this.value)?this:ge.none()}getOr(wt){return this.tag?this.value:wt}or(wt){return this.tag?this:wt}getOrThunk(wt){return this.tag?this.value:wt()}orThunk(wt){return this.tag?this:wt()}getOrDie(wt){if(this.tag)return this.value;throw new Error(wt??"Called getOrDie on None")}static from(wt){return ue(wt)?ge.some(wt):ge.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(wt){this.tag&&wt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ge.singletonNone=new ge(!1);const Ce=Array.prototype.indexOf,Xe=(Ae,wt)=>Ce.call(Ae,wt),Lt=(Ae,wt)=>Xe(Ae,wt)>-1,Zt=(Ae,wt,Mn)=>{for(let fn=0,io=Ae.length;fn<io;fn++){const $e=Ae[fn];if(wt($e,fn))return ge.some($e);if(Mn($e,fn))break}return ge.none()},Pt=Object.keys,Ct=(Ae,wt)=>{const Mn=Pt(Ae);for(let fn=0,io=Mn.length;fn<io;fn++){const $e=Mn[fn],pt=Ae[$e];wt(pt,$e)}},Ne=(Ae,wt)=>ln(Ae,(Mn,fn)=>({k:fn,v:wt(Mn,fn)})),ln=(Ae,wt)=>{const Mn={};return Ct(Ae,(fn,io)=>{const $e=wt(fn,io);Mn[$e.k]=$e.v}),Mn};var xt=tinymce.util.Tools.resolve("tinymce.util.Tools");const ce=Ae=>/\btox\-/.test(Ae.className),Je=(Ae,wt)=>Ae.dom.isChildOf(wt,Ae.getBody()),Dn=Ae=>wt=>ue(wt)&&Ae.test(wt.nodeName),Gt=Dn(/^(OL|UL|DL)$/),oe=Dn(/^(TH|TD)$/),Xt=(Ae,wt,Mn)=>Zt(wt,fn=>Gt(fn)&&!ce(fn),oe).exists(fn=>fn.nodeName===Mn&&Je(Ae,fn)),In=Ae=>{const wt=Ae.dom.getParent(Ae.selection.getNode(),"ol,ul"),Mn=Ae.dom.getStyle(wt,"listStyleType");return ge.from(Mn)},en=(Ae,wt)=>wt!==null&&!Ae.dom.isEditable(wt),Fe=(Ae,wt)=>{const Mn=Ae.dom.getParent(wt,"ol,ul,dl");return en(Ae,Mn)||!Ae.selection.isEditable()},ve=(Ae,wt)=>{const Mn=Ae.selection.getNode();return wt({parents:Ae.dom.getParents(Mn),element:Mn}),Ae.on("NodeChange",wt),()=>Ae.off("NodeChange",wt)},so=Ae=>Ae.replace(/\-/g," ").replace(/\b\w/g,wt=>wt.toUpperCase()),at=Ae=>j(Ae)||Ae==="default"?"":Ae,it=(Ae,wt)=>Mn=>{const fn=($e,pt)=>{const W=$e.selection.getStart(!0);Mn.setActive(Xt($e,pt,wt)),Mn.setEnabled(!Fe($e,W))};return ve(Ae,$e=>fn(Ae,$e.parents))},M=(Ae,wt,Mn,fn,io,$e)=>{const pt={"lower-latin":"lower-alpha","upper-latin":"upper-alpha","lower-alpha":"lower-latin","upper-alpha":"upper-latin"},W=Ne(pt,Us=>Lt($e,Us));Ae.ui.registry.addSplitButton(wt,{tooltip:Mn,icon:io==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Us=>{const no=xt.map($e,_o=>{const zo=io==="OL"?"num":"bull",pi=_o==="disc"||_o==="decimal"?"default":_o,et=at(_o),_t=so(_o);return{type:"choiceitem",value:et,icon:"list-"+zo+"-"+pi,text:_t}});Us(no)},onAction:()=>Ae.execCommand(fn),onItemAction:(Us,no)=>{g(Ae,io,no)},select:Us=>In(Ae).exists(_o=>Us===_o||pt[_o]===Us&&!W[Us]),onSetup:it(Ae,io)})},Hn=(Ae,wt,Mn,fn,io,$e)=>{Ae.ui.registry.addToggleButton(wt,{active:!1,tooltip:Mn,icon:io==="OL"?"ordered-list":"unordered-list",onSetup:it(Ae,io),onAction:()=>Ae.queryCommandState(fn)||$e===""?Ae.execCommand(fn):g(Ae,io,$e)})},ft=(Ae,wt,Mn,fn,io,$e)=>{$e.length>1?M(Ae,wt,Mn,fn,io,$e):Hn(Ae,wt,Mn,fn,io,at($e[0]))},xo=Ae=>{ft(Ae,"numlist","Numbered list","InsertOrderedList","OL",V(Ae)),ft(Ae,"bullist","Bullet list","InsertUnorderedList","UL",K(Ae))};var yn=()=>{p.add("advlist",Ae=>{Ae.hasPlugin("lists")?(N(Ae),xo(Ae),w(Ae)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};yn()}()),wQ}var SQ;function Use(){return SQ||(SQ=1,Vse()),yQ}Use();
