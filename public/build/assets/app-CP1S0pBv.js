function wQ(p,g){return function(){return p.apply(g,arguments)}}const{toString:Lee}=Object.prototype,{getPrototypeOf:RK}=Object,d7=(p=>g=>{const w=Lee.call(g);return p[w]||(p[w]=w.slice(8,-1).toLowerCase())})(Object.create(null)),Fg=p=>(p=p.toLowerCase(),g=>d7(g)===p),f7=p=>g=>typeof g===p,{isArray:zk}=Array,V5=f7("undefined");function Fee(p){return p!==null&&!V5(p)&&p.constructor!==null&&!V5(p.constructor)&&Dm(p.constructor.isBuffer)&&p.constructor.isBuffer(p)}const CQ=Fg("ArrayBuffer");function $ee(p){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(p):g=p&&p.buffer&&CQ(p.buffer),g}const Hee=f7("string"),Dm=f7("function"),SQ=f7("number"),m7=p=>p!==null&&typeof p=="object",zee=p=>p===!0||p===!1,P$=p=>{if(d7(p)!=="object")return!1;const g=RK(p);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in p)&&!(Symbol.iterator in p)},Vee=Fg("Date"),Uee=Fg("File"),Wee=Fg("Blob"),Zee=Fg("FileList"),jee=p=>m7(p)&&Dm(p.pipe),qee=p=>{let g;return p&&(typeof FormData=="function"&&p instanceof FormData||Dm(p.append)&&((g=d7(p))==="formdata"||g==="object"&&Dm(p.toString)&&p.toString()==="[object FormData]"))},Gee=Fg("URLSearchParams"),[Kee,Yee,Xee,Jee]=["ReadableStream","Request","Response","Headers"].map(Fg),Qee=p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function G5(p,g,{allOwnKeys:w=!1}={}){if(p===null||typeof p>"u")return;let E,N;if(typeof p!="object"&&(p=[p]),zk(p))for(E=0,N=p.length;E<N;E++)g.call(null,p[E],E,p);else{const V=w?Object.getOwnPropertyNames(p):Object.keys(p),K=V.length;let j;for(E=0;E<K;E++)j=V[E],g.call(null,p[j],j,p)}}function xQ(p,g){g=g.toLowerCase();const w=Object.keys(p);let E=w.length,N;for(;E-- >0;)if(N=w[E],g===N.toLowerCase())return N;return null}const lS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,EQ=p=>!V5(p)&&p!==lS;function bK(){const{caseless:p}=EQ(this)&&this||{},g={},w=(E,N)=>{const V=p&&xQ(g,N)||N;P$(g[V])&&P$(E)?g[V]=bK(g[V],E):P$(E)?g[V]=bK({},E):zk(E)?g[V]=E.slice():g[V]=E};for(let E=0,N=arguments.length;E<N;E++)arguments[E]&&G5(arguments[E],w);return g}const ete=(p,g,w,{allOwnKeys:E}={})=>(G5(g,(N,V)=>{w&&Dm(N)?p[V]=wQ(N,w):p[V]=N},{allOwnKeys:E}),p),tte=p=>(p.charCodeAt(0)===65279&&(p=p.slice(1)),p),nte=(p,g,w,E)=>{p.prototype=Object.create(g.prototype,E),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:g.prototype}),w&&Object.assign(p.prototype,w)},ote=(p,g,w,E)=>{let N,V,K;const j={};if(g=g||{},p==null)return g;do{for(N=Object.getOwnPropertyNames(p),V=N.length;V-- >0;)K=N[V],(!E||E(K,p,g))&&!j[K]&&(g[K]=p[K],j[K]=!0);p=w!==!1&&RK(p)}while(p&&(!w||w(p,g))&&p!==Object.prototype);return g},ste=(p,g,w)=>{p=String(p),(w===void 0||w>p.length)&&(w=p.length),w-=g.length;const E=p.indexOf(g,w);return E!==-1&&E===w},rte=p=>{if(!p)return null;if(zk(p))return p;let g=p.length;if(!SQ(g))return null;const w=new Array(g);for(;g-- >0;)w[g]=p[g];return w},ate=(p=>g=>p&&g instanceof p)(typeof Uint8Array<"u"&&RK(Uint8Array)),ite=(p,g)=>{const E=(p&&p[Symbol.iterator]).call(p);let N;for(;(N=E.next())&&!N.done;){const V=N.value;g.call(p,V[0],V[1])}},cte=(p,g)=>{let w;const E=[];for(;(w=p.exec(g))!==null;)E.push(w);return E},lte=Fg("HTMLFormElement"),ute=p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(w,E,N){return E.toUpperCase()+N}),ZX=(({hasOwnProperty:p})=>(g,w)=>p.call(g,w))(Object.prototype),dte=Fg("RegExp"),_Q=(p,g)=>{const w=Object.getOwnPropertyDescriptors(p),E={};G5(w,(N,V)=>{let K;(K=g(N,V,p))!==!1&&(E[V]=K||N)}),Object.defineProperties(p,E)},fte=p=>{_Q(p,(g,w)=>{if(Dm(p)&&["arguments","caller","callee"].indexOf(w)!==-1)return!1;const E=p[w];if(Dm(E)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+w+"'")})}})},mte=(p,g)=>{const w={},E=N=>{N.forEach(V=>{w[V]=!0})};return zk(p)?E(p):E(String(p).split(g)),w},hte=()=>{},gte=(p,g)=>p!=null&&Number.isFinite(p=+p)?p:g;function pte(p){return!!(p&&Dm(p.append)&&p[Symbol.toStringTag]==="FormData"&&p[Symbol.iterator])}const bte=p=>{const g=new Array(10),w=(E,N)=>{if(m7(E)){if(g.indexOf(E)>=0)return;if(!("toJSON"in E)){g[N]=E;const V=zk(E)?[]:{};return G5(E,(K,j)=>{const le=w(K,N+1);!V5(le)&&(V[j]=le)}),g[N]=void 0,V}}return E};return w(p,0)},vte=Fg("AsyncFunction"),yte=p=>p&&(m7(p)||Dm(p))&&Dm(p.then)&&Dm(p.catch),TQ=((p,g)=>p?setImmediate:g?((w,E)=>(lS.addEventListener("message",({source:N,data:V})=>{N===lS&&V===w&&E.length&&E.shift()()},!1),N=>{E.push(N),lS.postMessage(w,"*")}))(`axios@${Math.random()}`,[]):w=>setTimeout(w))(typeof setImmediate=="function",Dm(lS.postMessage)),wte=typeof queueMicrotask<"u"?queueMicrotask.bind(lS):typeof process<"u"&&process.nextTick||TQ,Rt={isArray:zk,isArrayBuffer:CQ,isBuffer:Fee,isFormData:qee,isArrayBufferView:$ee,isString:Hee,isNumber:SQ,isBoolean:zee,isObject:m7,isPlainObject:P$,isReadableStream:Kee,isRequest:Yee,isResponse:Xee,isHeaders:Jee,isUndefined:V5,isDate:Vee,isFile:Uee,isBlob:Wee,isRegExp:dte,isFunction:Dm,isStream:jee,isURLSearchParams:Gee,isTypedArray:ate,isFileList:Zee,forEach:G5,merge:bK,extend:ete,trim:Qee,stripBOM:tte,inherits:nte,toFlatObject:ote,kindOf:d7,kindOfTest:Fg,endsWith:ste,toArray:rte,forEachEntry:ite,matchAll:cte,isHTMLForm:lte,hasOwnProperty:ZX,hasOwnProp:ZX,reduceDescriptors:_Q,freezeMethods:fte,toObjectSet:mte,toCamelCase:ute,noop:hte,toFiniteNumber:gte,findKey:xQ,global:lS,isContextDefined:EQ,isSpecCompliantForm:pte,toJSONObject:bte,isAsyncFn:vte,isThenable:yte,setImmediate:TQ,asap:wte};function As(p,g,w,E,N){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=p,this.name="AxiosError",g&&(this.code=g),w&&(this.config=w),E&&(this.request=E),N&&(this.response=N,this.status=N.status?N.status:null)}Rt.inherits(As,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.status}}});const kQ=As.prototype,AQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{AQ[p]={value:p}});Object.defineProperties(As,AQ);Object.defineProperty(kQ,"isAxiosError",{value:!0});As.from=(p,g,w,E,N,V)=>{const K=Object.create(kQ);return Rt.toFlatObject(p,K,function(le){return le!==Error.prototype},j=>j!=="isAxiosError"),As.call(K,p.message,g,w,E,N),K.cause=p,K.name=p.name,V&&Object.assign(K,V),K};const Cte=null;function vK(p){return Rt.isPlainObject(p)||Rt.isArray(p)}function OQ(p){return Rt.endsWith(p,"[]")?p.slice(0,-2):p}function jX(p,g,w){return p?p.concat(g).map(function(N,V){return N=OQ(N),!w&&V?"["+N+"]":N}).join(w?".":""):g}function Ste(p){return Rt.isArray(p)&&!p.some(vK)}const xte=Rt.toFlatObject(Rt,{},null,function(g){return/^is[A-Z]/.test(g)});function h7(p,g,w){if(!Rt.isObject(p))throw new TypeError("target must be an object");g=g||new FormData,w=Rt.toFlatObject(w,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ct,Ne){return!Rt.isUndefined(Ne[Ct])});const E=w.metaTokens,N=w.visitor||Ce,V=w.dots,K=w.indexes,le=(w.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(g);if(!Rt.isFunction(N))throw new TypeError("visitor must be a function");function ge(Pt){if(Pt===null)return"";if(Rt.isDate(Pt))return Pt.toISOString();if(!le&&Rt.isBlob(Pt))throw new As("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(Pt)||Rt.isTypedArray(Pt)?le&&typeof Blob=="function"?new Blob([Pt]):Buffer.from(Pt):Pt}function Ce(Pt,Ct,Ne){let ln=Pt;if(Pt&&!Ne&&typeof Pt=="object"){if(Rt.endsWith(Ct,"{}"))Ct=E?Ct:Ct.slice(0,-2),Pt=JSON.stringify(Pt);else if(Rt.isArray(Pt)&&Ste(Pt)||(Rt.isFileList(Pt)||Rt.endsWith(Ct,"[]"))&&(ln=Rt.toArray(Pt)))return Ct=OQ(Ct),ln.forEach(function(de,Je){!(Rt.isUndefined(de)||de===null)&&g.append(K===!0?jX([Ct],Je,V):K===null?Ct:Ct+"[]",ge(de))}),!1}return vK(Pt)?!0:(g.append(jX(Ne,Ct,V),ge(Pt)),!1)}const Xe=[],Lt=Object.assign(xte,{defaultVisitor:Ce,convertValue:ge,isVisitable:vK});function Zt(Pt,Ct){if(!Rt.isUndefined(Pt)){if(Xe.indexOf(Pt)!==-1)throw Error("Circular reference detected in "+Ct.join("."));Xe.push(Pt),Rt.forEach(Pt,function(ln,xt){(!(Rt.isUndefined(ln)||ln===null)&&N.call(g,ln,Rt.isString(xt)?xt.trim():xt,Ct,Lt))===!0&&Zt(ln,Ct?Ct.concat(xt):[xt])}),Xe.pop()}}if(!Rt.isObject(p))throw new TypeError("data must be an object");return Zt(p),g}function qX(p){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(E){return g[E]})}function MK(p,g){this._pairs=[],p&&h7(p,this,g)}const DQ=MK.prototype;DQ.append=function(g,w){this._pairs.push([g,w])};DQ.toString=function(g){const w=g?function(E){return g.call(this,E,qX)}:qX;return this._pairs.map(function(N){return w(N[0])+"="+w(N[1])},"").join("&")};function Ete(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function RQ(p,g,w){if(!g)return p;const E=w&&w.encode||Ete;Rt.isFunction(w)&&(w={serialize:w});const N=w&&w.serialize;let V;if(N?V=N(g,w):V=Rt.isURLSearchParams(g)?g.toString():new MK(g,w).toString(E),V){const K=p.indexOf("#");K!==-1&&(p=p.slice(0,K)),p+=(p.indexOf("?")===-1?"?":"&")+V}return p}class GX{constructor(){this.handlers=[]}use(g,w,E){return this.handlers.push({fulfilled:g,rejected:w,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){Rt.forEach(this.handlers,function(E){E!==null&&g(E)})}}const MQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_te=typeof URLSearchParams<"u"?URLSearchParams:MK,Tte=typeof FormData<"u"?FormData:null,kte=typeof Blob<"u"?Blob:null,Ate={isBrowser:!0,classes:{URLSearchParams:_te,FormData:Tte,Blob:kte},protocols:["http","https","file","blob","url","data"]},NK=typeof window<"u"&&typeof document<"u",yK=typeof navigator=="object"&&navigator||void 0,Ote=NK&&(!yK||["ReactNative","NativeScript","NS"].indexOf(yK.product)<0),Dte=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Rte=NK&&window.location.href||"http://localhost",Mte=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:NK,hasStandardBrowserEnv:Ote,hasStandardBrowserWebWorkerEnv:Dte,navigator:yK,origin:Rte},Symbol.toStringTag,{value:"Module"})),Gu={...Mte,...Ate};function Nte(p,g){return h7(p,new Gu.classes.URLSearchParams,Object.assign({visitor:function(w,E,N,V){return Gu.isNode&&Rt.isBuffer(w)?(this.append(E,w.toString("base64")),!1):V.defaultVisitor.apply(this,arguments)}},g))}function Pte(p){return Rt.matchAll(/\w+|\[(\w*)]/g,p).map(g=>g[0]==="[]"?"":g[1]||g[0])}function Ite(p){const g={},w=Object.keys(p);let E;const N=w.length;let V;for(E=0;E<N;E++)V=w[E],g[V]=p[V];return g}function NQ(p){function g(w,E,N,V){let K=w[V++];if(K==="__proto__")return!0;const j=Number.isFinite(+K),le=V>=w.length;return K=!K&&Rt.isArray(N)?N.length:K,le?(Rt.hasOwnProp(N,K)?N[K]=[N[K],E]:N[K]=E,!j):((!N[K]||!Rt.isObject(N[K]))&&(N[K]=[]),g(w,E,N[K],V)&&Rt.isArray(N[K])&&(N[K]=Ite(N[K])),!j)}if(Rt.isFormData(p)&&Rt.isFunction(p.entries)){const w={};return Rt.forEachEntry(p,(E,N)=>{g(Pte(E),N,w,0)}),w}return null}function Bte(p,g,w){if(Rt.isString(p))try{return(g||JSON.parse)(p),Rt.trim(p)}catch(E){if(E.name!=="SyntaxError")throw E}return(w||JSON.stringify)(p)}const K5={transitional:MQ,adapter:["xhr","http","fetch"],transformRequest:[function(g,w){const E=w.getContentType()||"",N=E.indexOf("application/json")>-1,V=Rt.isObject(g);if(V&&Rt.isHTMLForm(g)&&(g=new FormData(g)),Rt.isFormData(g))return N?JSON.stringify(NQ(g)):g;if(Rt.isArrayBuffer(g)||Rt.isBuffer(g)||Rt.isStream(g)||Rt.isFile(g)||Rt.isBlob(g)||Rt.isReadableStream(g))return g;if(Rt.isArrayBufferView(g))return g.buffer;if(Rt.isURLSearchParams(g))return w.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let j;if(V){if(E.indexOf("application/x-www-form-urlencoded")>-1)return Nte(g,this.formSerializer).toString();if((j=Rt.isFileList(g))||E.indexOf("multipart/form-data")>-1){const le=this.env&&this.env.FormData;return h7(j?{"files[]":g}:g,le&&new le,this.formSerializer)}}return V||N?(w.setContentType("application/json",!1),Bte(g)):g}],transformResponse:[function(g){const w=this.transitional||K5.transitional,E=w&&w.forcedJSONParsing,N=this.responseType==="json";if(Rt.isResponse(g)||Rt.isReadableStream(g))return g;if(g&&Rt.isString(g)&&(E&&!this.responseType||N)){const K=!(w&&w.silentJSONParsing)&&N;try{return JSON.parse(g)}catch(j){if(K)throw j.name==="SyntaxError"?As.from(j,As.ERR_BAD_RESPONSE,this,null,this.response):j}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gu.classes.FormData,Blob:Gu.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],p=>{K5.headers[p]={}});const Lte=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fte=p=>{const g={};let w,E,N;return p&&p.split(`
`).forEach(function(K){N=K.indexOf(":"),w=K.substring(0,N).trim().toLowerCase(),E=K.substring(N+1).trim(),!(!w||g[w]&&Lte[w])&&(w==="set-cookie"?g[w]?g[w].push(E):g[w]=[E]:g[w]=g[w]?g[w]+", "+E:E)}),g},KX=Symbol("internals");function N5(p){return p&&String(p).trim().toLowerCase()}function I$(p){return p===!1||p==null?p:Rt.isArray(p)?p.map(I$):String(p)}function $te(p){const g=Object.create(null),w=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=w.exec(p);)g[E[1]]=E[2];return g}const Hte=p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim());function rK(p,g,w,E,N){if(Rt.isFunction(E))return E.call(this,g,w);if(N&&(g=w),!!Rt.isString(g)){if(Rt.isString(E))return g.indexOf(E)!==-1;if(Rt.isRegExp(E))return E.test(g)}}function zte(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,w,E)=>w.toUpperCase()+E)}function Vte(p,g){const w=Rt.toCamelCase(" "+g);["get","set","has"].forEach(E=>{Object.defineProperty(p,E+w,{value:function(N,V,K){return this[E].call(this,g,N,V,K)},configurable:!0})})}let Ff=class{constructor(g){g&&this.set(g)}set(g,w,E){const N=this;function V(j,le,ge){const Ce=N5(le);if(!Ce)throw new Error("header name must be a non-empty string");const Xe=Rt.findKey(N,Ce);(!Xe||N[Xe]===void 0||ge===!0||ge===void 0&&N[Xe]!==!1)&&(N[Xe||le]=I$(j))}const K=(j,le)=>Rt.forEach(j,(ge,Ce)=>V(ge,Ce,le));if(Rt.isPlainObject(g)||g instanceof this.constructor)K(g,w);else if(Rt.isString(g)&&(g=g.trim())&&!Hte(g))K(Fte(g),w);else if(Rt.isHeaders(g))for(const[j,le]of g.entries())V(le,j,E);else g!=null&&V(w,g,E);return this}get(g,w){if(g=N5(g),g){const E=Rt.findKey(this,g);if(E){const N=this[E];if(!w)return N;if(w===!0)return $te(N);if(Rt.isFunction(w))return w.call(this,N,E);if(Rt.isRegExp(w))return w.exec(N);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,w){if(g=N5(g),g){const E=Rt.findKey(this,g);return!!(E&&this[E]!==void 0&&(!w||rK(this,this[E],E,w)))}return!1}delete(g,w){const E=this;let N=!1;function V(K){if(K=N5(K),K){const j=Rt.findKey(E,K);j&&(!w||rK(E,E[j],j,w))&&(delete E[j],N=!0)}}return Rt.isArray(g)?g.forEach(V):V(g),N}clear(g){const w=Object.keys(this);let E=w.length,N=!1;for(;E--;){const V=w[E];(!g||rK(this,this[V],V,g,!0))&&(delete this[V],N=!0)}return N}normalize(g){const w=this,E={};return Rt.forEach(this,(N,V)=>{const K=Rt.findKey(E,V);if(K){w[K]=I$(N),delete w[V];return}const j=g?zte(V):String(V).trim();j!==V&&delete w[V],w[j]=I$(N),E[j]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const w=Object.create(null);return Rt.forEach(this,(E,N)=>{E!=null&&E!==!1&&(w[N]=g&&Rt.isArray(E)?E.join(", "):E)}),w}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,w])=>g+": "+w).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...w){const E=new this(g);return w.forEach(N=>E.set(N)),E}static accessor(g){const E=(this[KX]=this[KX]={accessors:{}}).accessors,N=this.prototype;function V(K){const j=N5(K);E[j]||(Vte(N,K),E[j]=!0)}return Rt.isArray(g)?g.forEach(V):V(g),this}};Ff.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(Ff.prototype,({value:p},g)=>{let w=g[0].toUpperCase()+g.slice(1);return{get:()=>p,set(E){this[w]=E}}});Rt.freezeMethods(Ff);function aK(p,g){const w=this||K5,E=g||w,N=Ff.from(E.headers);let V=E.data;return Rt.forEach(p,function(j){V=j.call(w,V,N.normalize(),g?g.status:void 0)}),N.normalize(),V}function PQ(p){return!!(p&&p.__CANCEL__)}function Vk(p,g,w){As.call(this,p??"canceled",As.ERR_CANCELED,g,w),this.name="CanceledError"}Rt.inherits(Vk,As,{__CANCEL__:!0});function IQ(p,g,w){const E=w.config.validateStatus;!w.status||!E||E(w.status)?p(w):g(new As("Request failed with status code "+w.status,[As.ERR_BAD_REQUEST,As.ERR_BAD_RESPONSE][Math.floor(w.status/100)-4],w.config,w.request,w))}function Ute(p){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return g&&g[1]||""}function Wte(p,g){p=p||10;const w=new Array(p),E=new Array(p);let N=0,V=0,K;return g=g!==void 0?g:1e3,function(le){const ge=Date.now(),Ce=E[V];K||(K=ge),w[N]=le,E[N]=ge;let Xe=V,Lt=0;for(;Xe!==N;)Lt+=w[Xe++],Xe=Xe%p;if(N=(N+1)%p,N===V&&(V=(V+1)%p),ge-K<g)return;const Zt=Ce&&ge-Ce;return Zt?Math.round(Lt*1e3/Zt):void 0}}function Zte(p,g){let w=0,E=1e3/g,N,V;const K=(ge,Ce=Date.now())=>{w=Ce,N=null,V&&(clearTimeout(V),V=null),p.apply(null,ge)};return[(...ge)=>{const Ce=Date.now(),Xe=Ce-w;Xe>=E?K(ge,Ce):(N=ge,V||(V=setTimeout(()=>{V=null,K(N)},E-Xe)))},()=>N&&K(N)]}const H$=(p,g,w=3)=>{let E=0;const N=Wte(50,250);return Zte(V=>{const K=V.loaded,j=V.lengthComputable?V.total:void 0,le=K-E,ge=N(le),Ce=K<=j;E=K;const Xe={loaded:K,total:j,progress:j?K/j:void 0,bytes:le,rate:ge||void 0,estimated:ge&&j&&Ce?(j-K)/ge:void 0,event:V,lengthComputable:j!=null,[g?"download":"upload"]:!0};p(Xe)},w)},YX=(p,g)=>{const w=p!=null;return[E=>g[0]({lengthComputable:w,total:p,loaded:E}),g[1]]},XX=p=>(...g)=>Rt.asap(()=>p(...g)),jte=Gu.hasStandardBrowserEnv?((p,g)=>w=>(w=new URL(w,Gu.origin),p.protocol===w.protocol&&p.host===w.host&&(g||p.port===w.port)))(new URL(Gu.origin),Gu.navigator&&/(msie|trident)/i.test(Gu.navigator.userAgent)):()=>!0,qte=Gu.hasStandardBrowserEnv?{write(p,g,w,E,N,V){const K=[p+"="+encodeURIComponent(g)];Rt.isNumber(w)&&K.push("expires="+new Date(w).toGMTString()),Rt.isString(E)&&K.push("path="+E),Rt.isString(N)&&K.push("domain="+N),V===!0&&K.push("secure"),document.cookie=K.join("; ")},read(p){const g=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Gte(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}function Kte(p,g){return g?p.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):p}function BQ(p,g,w){let E=!Gte(g);return p&&(E||w==!1)?Kte(p,g):g}const JX=p=>p instanceof Ff?{...p}:p;function fS(p,g){g=g||{};const w={};function E(ge,Ce,Xe,Lt){return Rt.isPlainObject(ge)&&Rt.isPlainObject(Ce)?Rt.merge.call({caseless:Lt},ge,Ce):Rt.isPlainObject(Ce)?Rt.merge({},Ce):Rt.isArray(Ce)?Ce.slice():Ce}function N(ge,Ce,Xe,Lt){if(Rt.isUndefined(Ce)){if(!Rt.isUndefined(ge))return E(void 0,ge,Xe,Lt)}else return E(ge,Ce,Xe,Lt)}function V(ge,Ce){if(!Rt.isUndefined(Ce))return E(void 0,Ce)}function K(ge,Ce){if(Rt.isUndefined(Ce)){if(!Rt.isUndefined(ge))return E(void 0,ge)}else return E(void 0,Ce)}function j(ge,Ce,Xe){if(Xe in g)return E(ge,Ce);if(Xe in p)return E(void 0,ge)}const le={url:V,method:V,data:V,baseURL:K,transformRequest:K,transformResponse:K,paramsSerializer:K,timeout:K,timeoutMessage:K,withCredentials:K,withXSRFToken:K,adapter:K,responseType:K,xsrfCookieName:K,xsrfHeaderName:K,onUploadProgress:K,onDownloadProgress:K,decompress:K,maxContentLength:K,maxBodyLength:K,beforeRedirect:K,transport:K,httpAgent:K,httpsAgent:K,cancelToken:K,socketPath:K,responseEncoding:K,validateStatus:j,headers:(ge,Ce,Xe)=>N(JX(ge),JX(Ce),Xe,!0)};return Rt.forEach(Object.keys(Object.assign({},p,g)),function(Ce){const Xe=le[Ce]||N,Lt=Xe(p[Ce],g[Ce],Ce);Rt.isUndefined(Lt)&&Xe!==j||(w[Ce]=Lt)}),w}const LQ=p=>{const g=fS({},p);let{data:w,withXSRFToken:E,xsrfHeaderName:N,xsrfCookieName:V,headers:K,auth:j}=g;g.headers=K=Ff.from(K),g.url=RQ(BQ(g.baseURL,g.url,g.allowAbsoluteUrls),p.params,p.paramsSerializer),j&&K.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):"")));let le;if(Rt.isFormData(w)){if(Gu.hasStandardBrowserEnv||Gu.hasStandardBrowserWebWorkerEnv)K.setContentType(void 0);else if((le=K.getContentType())!==!1){const[ge,...Ce]=le?le.split(";").map(Xe=>Xe.trim()).filter(Boolean):[];K.setContentType([ge||"multipart/form-data",...Ce].join("; "))}}if(Gu.hasStandardBrowserEnv&&(E&&Rt.isFunction(E)&&(E=E(g)),E||E!==!1&&jte(g.url))){const ge=N&&V&&qte.read(V);ge&&K.set(N,ge)}return g},Yte=typeof XMLHttpRequest<"u",Xte=Yte&&function(p){return new Promise(function(w,E){const N=LQ(p);let V=N.data;const K=Ff.from(N.headers).normalize();let{responseType:j,onUploadProgress:le,onDownloadProgress:ge}=N,Ce,Xe,Lt,Zt,Pt;function Ct(){Zt&&Zt(),Pt&&Pt(),N.cancelToken&&N.cancelToken.unsubscribe(Ce),N.signal&&N.signal.removeEventListener("abort",Ce)}let Ne=new XMLHttpRequest;Ne.open(N.method.toUpperCase(),N.url,!0),Ne.timeout=N.timeout;function ln(){if(!Ne)return;const de=Ff.from("getAllResponseHeaders"in Ne&&Ne.getAllResponseHeaders()),Dn={data:!j||j==="text"||j==="json"?Ne.responseText:Ne.response,status:Ne.status,statusText:Ne.statusText,headers:de,config:p,request:Ne};IQ(function(re){w(re),Ct()},function(re){E(re),Ct()},Dn),Ne=null}"onloadend"in Ne?Ne.onloadend=ln:Ne.onreadystatechange=function(){!Ne||Ne.readyState!==4||Ne.status===0&&!(Ne.responseURL&&Ne.responseURL.indexOf("file:")===0)||setTimeout(ln)},Ne.onabort=function(){Ne&&(E(new As("Request aborted",As.ECONNABORTED,p,Ne)),Ne=null)},Ne.onerror=function(){E(new As("Network Error",As.ERR_NETWORK,p,Ne)),Ne=null},Ne.ontimeout=function(){let Je=N.timeout?"timeout of "+N.timeout+"ms exceeded":"timeout exceeded";const Dn=N.transitional||MQ;N.timeoutErrorMessage&&(Je=N.timeoutErrorMessage),E(new As(Je,Dn.clarifyTimeoutError?As.ETIMEDOUT:As.ECONNABORTED,p,Ne)),Ne=null},V===void 0&&K.setContentType(null),"setRequestHeader"in Ne&&Rt.forEach(K.toJSON(),function(Je,Dn){Ne.setRequestHeader(Dn,Je)}),Rt.isUndefined(N.withCredentials)||(Ne.withCredentials=!!N.withCredentials),j&&j!=="json"&&(Ne.responseType=N.responseType),ge&&([Lt,Pt]=H$(ge,!0),Ne.addEventListener("progress",Lt)),le&&Ne.upload&&([Xe,Zt]=H$(le),Ne.upload.addEventListener("progress",Xe),Ne.upload.addEventListener("loadend",Zt)),(N.cancelToken||N.signal)&&(Ce=de=>{Ne&&(E(!de||de.type?new Vk(null,p,Ne):de),Ne.abort(),Ne=null)},N.cancelToken&&N.cancelToken.subscribe(Ce),N.signal&&(N.signal.aborted?Ce():N.signal.addEventListener("abort",Ce)));const xt=Ute(N.url);if(xt&&Gu.protocols.indexOf(xt)===-1){E(new As("Unsupported protocol "+xt+":",As.ERR_BAD_REQUEST,p));return}Ne.send(V||null)})},Jte=(p,g)=>{const{length:w}=p=p?p.filter(Boolean):[];if(g||w){let E=new AbortController,N;const V=function(ge){if(!N){N=!0,j();const Ce=ge instanceof Error?ge:this.reason;E.abort(Ce instanceof As?Ce:new Vk(Ce instanceof Error?Ce.message:Ce))}};let K=g&&setTimeout(()=>{K=null,V(new As(`timeout ${g} of ms exceeded`,As.ETIMEDOUT))},g);const j=()=>{p&&(K&&clearTimeout(K),K=null,p.forEach(ge=>{ge.unsubscribe?ge.unsubscribe(V):ge.removeEventListener("abort",V)}),p=null)};p.forEach(ge=>ge.addEventListener("abort",V));const{signal:le}=E;return le.unsubscribe=()=>Rt.asap(j),le}},Qte=function*(p,g){let w=p.byteLength;if(w<g){yield p;return}let E=0,N;for(;E<w;)N=E+g,yield p.slice(E,N),E=N},ene=async function*(p,g){for await(const w of tne(p))yield*Qte(w,g)},tne=async function*(p){if(p[Symbol.asyncIterator]){yield*p;return}const g=p.getReader();try{for(;;){const{done:w,value:E}=await g.read();if(w)break;yield E}}finally{await g.cancel()}},QX=(p,g,w,E)=>{const N=ene(p,g);let V=0,K,j=le=>{K||(K=!0,E&&E(le))};return new ReadableStream({async pull(le){try{const{done:ge,value:Ce}=await N.next();if(ge){j(),le.close();return}let Xe=Ce.byteLength;if(w){let Lt=V+=Xe;w(Lt)}le.enqueue(new Uint8Array(Ce))}catch(ge){throw j(ge),ge}},cancel(le){return j(le),N.return()}},{highWaterMark:2})},g7=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",FQ=g7&&typeof ReadableStream=="function",nne=g7&&(typeof TextEncoder=="function"?(p=>g=>p.encode(g))(new TextEncoder):async p=>new Uint8Array(await new Response(p).arrayBuffer())),$Q=(p,...g)=>{try{return!!p(...g)}catch{return!1}},one=FQ&&$Q(()=>{let p=!1;const g=new Request(Gu.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),eJ=64*1024,wK=FQ&&$Q(()=>Rt.isReadableStream(new Response("").body)),z$={stream:wK&&(p=>p.body)};g7&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!z$[g]&&(z$[g]=Rt.isFunction(p[g])?w=>w[g]():(w,E)=>{throw new As(`Response type '${g}' is not supported`,As.ERR_NOT_SUPPORT,E)})})})(new Response);const sne=async p=>{if(p==null)return 0;if(Rt.isBlob(p))return p.size;if(Rt.isSpecCompliantForm(p))return(await new Request(Gu.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(p)||Rt.isArrayBuffer(p))return p.byteLength;if(Rt.isURLSearchParams(p)&&(p=p+""),Rt.isString(p))return(await nne(p)).byteLength},rne=async(p,g)=>{const w=Rt.toFiniteNumber(p.getContentLength());return w??sne(g)},ane=g7&&(async p=>{let{url:g,method:w,data:E,signal:N,cancelToken:V,timeout:K,onDownloadProgress:j,onUploadProgress:le,responseType:ge,headers:Ce,withCredentials:Xe="same-origin",fetchOptions:Lt}=LQ(p);ge=ge?(ge+"").toLowerCase():"text";let Zt=Jte([N,V&&V.toAbortSignal()],K),Pt;const Ct=Zt&&Zt.unsubscribe&&(()=>{Zt.unsubscribe()});let Ne;try{if(le&&one&&w!=="get"&&w!=="head"&&(Ne=await rne(Ce,E))!==0){let Dn=new Request(g,{method:"POST",body:E,duplex:"half"}),Gt;if(Rt.isFormData(E)&&(Gt=Dn.headers.get("content-type"))&&Ce.setContentType(Gt),Dn.body){const[re,Xt]=YX(Ne,H$(XX(le)));E=QX(Dn.body,eJ,re,Xt)}}Rt.isString(Xe)||(Xe=Xe?"include":"omit");const ln="credentials"in Request.prototype;Pt=new Request(g,{...Lt,signal:Zt,method:w.toUpperCase(),headers:Ce.normalize().toJSON(),body:E,duplex:"half",credentials:ln?Xe:void 0});let xt=await fetch(Pt);const de=wK&&(ge==="stream"||ge==="response");if(wK&&(j||de&&Ct)){const Dn={};["status","statusText","headers"].forEach(In=>{Dn[In]=xt[In]});const Gt=Rt.toFiniteNumber(xt.headers.get("content-length")),[re,Xt]=j&&YX(Gt,H$(XX(j),!0))||[];xt=new Response(QX(xt.body,eJ,re,()=>{Xt&&Xt(),Ct&&Ct()}),Dn)}ge=ge||"text";let Je=await z$[Rt.findKey(z$,ge)||"text"](xt,p);return!de&&Ct&&Ct(),await new Promise((Dn,Gt)=>{IQ(Dn,Gt,{data:Je,headers:Ff.from(xt.headers),status:xt.status,statusText:xt.statusText,config:p,request:Pt})})}catch(ln){throw Ct&&Ct(),ln&&ln.name==="TypeError"&&/fetch/i.test(ln.message)?Object.assign(new As("Network Error",As.ERR_NETWORK,p,Pt),{cause:ln.cause||ln}):As.from(ln,ln&&ln.code,p,Pt)}}),CK={http:Cte,xhr:Xte,fetch:ane};Rt.forEach(CK,(p,g)=>{if(p){try{Object.defineProperty(p,"name",{value:g})}catch{}Object.defineProperty(p,"adapterName",{value:g})}});const tJ=p=>`- ${p}`,ine=p=>Rt.isFunction(p)||p===null||p===!1,HQ={getAdapter:p=>{p=Rt.isArray(p)?p:[p];const{length:g}=p;let w,E;const N={};for(let V=0;V<g;V++){w=p[V];let K;if(E=w,!ine(w)&&(E=CK[(K=String(w)).toLowerCase()],E===void 0))throw new As(`Unknown adapter '${K}'`);if(E)break;N[K||"#"+V]=E}if(!E){const V=Object.entries(N).map(([j,le])=>`adapter ${j} `+(le===!1?"is not supported by the environment":"is not available in the build"));let K=g?V.length>1?`since :
`+V.map(tJ).join(`
`):" "+tJ(V[0]):"as no adapter specified";throw new As("There is no suitable adapter to dispatch the request "+K,"ERR_NOT_SUPPORT")}return E},adapters:CK};function iK(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new Vk(null,p)}function nJ(p){return iK(p),p.headers=Ff.from(p.headers),p.data=aK.call(p,p.transformRequest),["post","put","patch"].indexOf(p.method)!==-1&&p.headers.setContentType("application/x-www-form-urlencoded",!1),HQ.getAdapter(p.adapter||K5.adapter)(p).then(function(E){return iK(p),E.data=aK.call(p,p.transformResponse,E),E.headers=Ff.from(E.headers),E},function(E){return PQ(E)||(iK(p),E&&E.response&&(E.response.data=aK.call(p,p.transformResponse,E.response),E.response.headers=Ff.from(E.response.headers))),Promise.reject(E)})}const zQ="1.8.4",p7={};["object","boolean","number","function","string","symbol"].forEach((p,g)=>{p7[p]=function(E){return typeof E===p||"a"+(g<1?"n ":" ")+p}});const oJ={};p7.transitional=function(g,w,E){function N(V,K){return"[Axios v"+zQ+"] Transitional option '"+V+"'"+K+(E?". "+E:"")}return(V,K,j)=>{if(g===!1)throw new As(N(K," has been removed"+(w?" in "+w:"")),As.ERR_DEPRECATED);return w&&!oJ[K]&&(oJ[K]=!0,console.warn(N(K," has been deprecated since v"+w+" and will be removed in the near future"))),g?g(V,K,j):!0}};p7.spelling=function(g){return(w,E)=>(console.warn(`${E} is likely a misspelling of ${g}`),!0)};function cne(p,g,w){if(typeof p!="object")throw new As("options must be an object",As.ERR_BAD_OPTION_VALUE);const E=Object.keys(p);let N=E.length;for(;N-- >0;){const V=E[N],K=g[V];if(K){const j=p[V],le=j===void 0||K(j,V,p);if(le!==!0)throw new As("option "+V+" must be "+le,As.ERR_BAD_OPTION_VALUE);continue}if(w!==!0)throw new As("Unknown option "+V,As.ERR_BAD_OPTION)}}const B$={assertOptions:cne,validators:p7},C1=B$.validators;let uS=class{constructor(g){this.defaults=g,this.interceptors={request:new GX,response:new GX}}async request(g,w){try{return await this._request(g,w)}catch(E){if(E instanceof Error){let N={};Error.captureStackTrace?Error.captureStackTrace(N):N=new Error;const V=N.stack?N.stack.replace(/^.+\n/,""):"";try{E.stack?V&&!String(E.stack).endsWith(V.replace(/^.+\n.+\n/,""))&&(E.stack+=`
`+V):E.stack=V}catch{}}throw E}}_request(g,w){typeof g=="string"?(w=w||{},w.url=g):w=g||{},w=fS(this.defaults,w);const{transitional:E,paramsSerializer:N,headers:V}=w;E!==void 0&&B$.assertOptions(E,{silentJSONParsing:C1.transitional(C1.boolean),forcedJSONParsing:C1.transitional(C1.boolean),clarifyTimeoutError:C1.transitional(C1.boolean)},!1),N!=null&&(Rt.isFunction(N)?w.paramsSerializer={serialize:N}:B$.assertOptions(N,{encode:C1.function,serialize:C1.function},!0)),w.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?w.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:w.allowAbsoluteUrls=!0),B$.assertOptions(w,{baseUrl:C1.spelling("baseURL"),withXsrfToken:C1.spelling("withXSRFToken")},!0),w.method=(w.method||this.defaults.method||"get").toLowerCase();let K=V&&Rt.merge(V.common,V[w.method]);V&&Rt.forEach(["delete","get","head","post","put","patch","common"],Pt=>{delete V[Pt]}),w.headers=Ff.concat(K,V);const j=[];let le=!0;this.interceptors.request.forEach(function(Ct){typeof Ct.runWhen=="function"&&Ct.runWhen(w)===!1||(le=le&&Ct.synchronous,j.unshift(Ct.fulfilled,Ct.rejected))});const ge=[];this.interceptors.response.forEach(function(Ct){ge.push(Ct.fulfilled,Ct.rejected)});let Ce,Xe=0,Lt;if(!le){const Pt=[nJ.bind(this),void 0];for(Pt.unshift.apply(Pt,j),Pt.push.apply(Pt,ge),Lt=Pt.length,Ce=Promise.resolve(w);Xe<Lt;)Ce=Ce.then(Pt[Xe++],Pt[Xe++]);return Ce}Lt=j.length;let Zt=w;for(Xe=0;Xe<Lt;){const Pt=j[Xe++],Ct=j[Xe++];try{Zt=Pt(Zt)}catch(Ne){Ct.call(this,Ne);break}}try{Ce=nJ.call(this,Zt)}catch(Pt){return Promise.reject(Pt)}for(Xe=0,Lt=ge.length;Xe<Lt;)Ce=Ce.then(ge[Xe++],ge[Xe++]);return Ce}getUri(g){g=fS(this.defaults,g);const w=BQ(g.baseURL,g.url,g.allowAbsoluteUrls);return RQ(w,g.params,g.paramsSerializer)}};Rt.forEach(["delete","get","head","options"],function(g){uS.prototype[g]=function(w,E){return this.request(fS(E||{},{method:g,url:w,data:(E||{}).data}))}});Rt.forEach(["post","put","patch"],function(g){function w(E){return function(V,K,j){return this.request(fS(j||{},{method:g,headers:E?{"Content-Type":"multipart/form-data"}:{},url:V,data:K}))}}uS.prototype[g]=w(),uS.prototype[g+"Form"]=w(!0)});let lne=class VQ{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let w;this.promise=new Promise(function(V){w=V});const E=this;this.promise.then(N=>{if(!E._listeners)return;let V=E._listeners.length;for(;V-- >0;)E._listeners[V](N);E._listeners=null}),this.promise.then=N=>{let V;const K=new Promise(j=>{E.subscribe(j),V=j}).then(N);return K.cancel=function(){E.unsubscribe(V)},K},g(function(V,K,j){E.reason||(E.reason=new Vk(V,K,j),w(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const w=this._listeners.indexOf(g);w!==-1&&this._listeners.splice(w,1)}toAbortSignal(){const g=new AbortController,w=E=>{g.abort(E)};return this.subscribe(w),g.signal.unsubscribe=()=>this.unsubscribe(w),g.signal}static source(){let g;return{token:new VQ(function(N){g=N}),cancel:g}}};function une(p){return function(w){return p.apply(null,w)}}function dne(p){return Rt.isObject(p)&&p.isAxiosError===!0}const SK={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(SK).forEach(([p,g])=>{SK[g]=p});function UQ(p){const g=new uS(p),w=wQ(uS.prototype.request,g);return Rt.extend(w,uS.prototype,g,{allOwnKeys:!0}),Rt.extend(w,g,null,{allOwnKeys:!0}),w.create=function(N){return UQ(fS(p,N))},w}const Rc=UQ(K5);Rc.Axios=uS;Rc.CanceledError=Vk;Rc.CancelToken=lne;Rc.isCancel=PQ;Rc.VERSION=zQ;Rc.toFormData=h7;Rc.AxiosError=As;Rc.Cancel=Rc.CanceledError;Rc.all=function(g){return Promise.all(g)};Rc.spread=une;Rc.isAxiosError=dne;Rc.mergeConfig=fS;Rc.AxiosHeaders=Ff;Rc.formToJSON=p=>NQ(Rt.isHTMLForm(p)?new FormData(p):p);Rc.getAdapter=HQ.getAdapter;Rc.HttpStatusCode=SK;Rc.default=Rc;const{Axios:Use,AxiosError:Wse,CanceledError:Zse,isCancel:jse,CancelToken:qse,VERSION:Gse,all:Kse,Cancel:Yse,isAxiosError:Xse,spread:Jse,toFormData:Qse,AxiosHeaders:ere,HttpStatusCode:tre,formToJSON:nre,getAdapter:ore,mergeConfig:sre}=Rc;window.axios=Rc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var fne=function(){function p(g,w){w===void 0&&(w=[]),this._eventType=g,this._eventFunctions=w}return p.prototype.init=function(){var g=this;this._eventFunctions.forEach(function(w){typeof window<"u"&&window.addEventListener(g._eventType,w)})},p}(),mne=function(){function p(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return p.prototype.addInstance=function(g,w,E,N){if(N===void 0&&(N=!1),!this._instances[g])return console.warn("Flowbite: Component ".concat(g," does not exist.")),!1;if(this._instances[g][E]&&!N){console.warn("Flowbite: Instance with ID ".concat(E," already exists."));return}N&&this._instances[g][E]&&this._instances[g][E].destroyAndRemoveInstance(),this._instances[g][E||this._generateRandomId()]=w},p.prototype.getAllInstances=function(){return this._instances},p.prototype.getInstances=function(g){return this._instances[g]?this._instances[g]:(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p.prototype.getInstance=function(g,w){if(this._componentAndInstanceCheck(g,w)){if(!this._instances[g][w]){console.warn("Flowbite: Instance with ID ".concat(w," does not exist."));return}return this._instances[g][w]}},p.prototype.destroyAndRemoveInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&(this.destroyInstanceObject(g,w),this.removeInstance(g,w))},p.prototype.removeInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&delete this._instances[g][w]},p.prototype.destroyInstanceObject=function(g,w){this._componentAndInstanceCheck(g,w)&&this._instances[g][w].destroy()},p.prototype.instanceExists=function(g,w){return!(!this._instances[g]||!this._instances[g][w])},p.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},p.prototype._componentAndInstanceCheck=function(g,w){return this._instances[g]?this._instances[g][w]?!0:(console.warn("Flowbite: Instance with ID ".concat(w," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p}(),Xs=new mne;typeof window<"u"&&(window.FlowbiteInstances=Xs);var V$=function(){return V$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},V$.apply(this,arguments)},U$={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},hne={id:null,override:!0},WQ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=U$),N===void 0&&(N=hne),this._instanceId=N.id?N.id:g.id,this._accordionEl=g,this._items=w,this._options=V$(V$({},U$),E),this._initialized=!1,this.init(),Xs.addInstance("Accordion",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.forEach(function(w){w.active&&g.open(w.id);var E=function(){g.toggle(w.id)};w.triggerEl.addEventListener("click",E),w.clickHandler=E}),this._initialized=!0)},p.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(g){g.triggerEl.removeEventListener("click",g.clickHandler),delete g.clickHandler}),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Accordion",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.open=function(g){var w,E,N=this,V=this.getItem(g);this._options.alwaysOpen||this._items.map(function(K){var j,le;K!==V&&((j=K.triggerEl.classList).remove.apply(j,N._options.activeClasses.split(" ")),(le=K.triggerEl.classList).add.apply(le,N._options.inactiveClasses.split(" ")),K.targetEl.classList.add("hidden"),K.triggerEl.setAttribute("aria-expanded","false"),K.active=!1,K.iconEl&&K.iconEl.classList.add("rotate-180"))}),(w=V.triggerEl.classList).add.apply(w,this._options.activeClasses.split(" ")),(E=V.triggerEl.classList).remove.apply(E,this._options.inactiveClasses.split(" ")),V.triggerEl.setAttribute("aria-expanded","true"),V.targetEl.classList.remove("hidden"),V.active=!0,V.iconEl&&V.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,V)},p.prototype.toggle=function(g){var w=this.getItem(g);w.active?this.close(g):this.open(g),this._options.onToggle(this,w)},p.prototype.close=function(g){var w,E,N=this.getItem(g);(w=N.triggerEl.classList).remove.apply(w,this._options.activeClasses.split(" ")),(E=N.triggerEl.classList).add.apply(E,this._options.inactiveClasses.split(" ")),N.targetEl.classList.add("hidden"),N.triggerEl.setAttribute("aria-expanded","false"),N.active=!1,N.iconEl&&N.iconEl.classList.add("rotate-180"),this._options.onClose(this,N)},p.prototype.updateOnOpen=function(g){this._options.onOpen=g},p.prototype.updateOnClose=function(g){this._options.onClose=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function PK(){document.querySelectorAll("[data-accordion]").forEach(function(p){var g=p.getAttribute("data-accordion"),w=p.getAttribute("data-active-classes"),E=p.getAttribute("data-inactive-classes"),N=[];p.querySelectorAll("[data-accordion-target]").forEach(function(V){if(V.closest("[data-accordion]")===p){var K={id:V.getAttribute("data-accordion-target"),triggerEl:V,targetEl:document.querySelector(V.getAttribute("data-accordion-target")),iconEl:V.querySelector("[data-accordion-icon]"),active:V.getAttribute("aria-expanded")==="true"};N.push(K)}}),new WQ(p,N,{alwaysOpen:g==="open",activeClasses:w||U$.activeClasses,inactiveClasses:E||U$.inactiveClasses})})}typeof window<"u"&&(window.Accordion=WQ,window.initAccordions=PK);var W$=function(){return W$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},W$.apply(this,arguments)},sJ={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},gne={id:null,override:!0},xK=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=sJ),N===void 0&&(N=gne),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=W$(W$({},sJ),E),this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Collapse",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){g.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Collapse",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},p.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},p.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},p.prototype.updateOnCollapse=function(g){this._options.onCollapse=g},p.prototype.updateOnExpand=function(g){this._options.onExpand=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function IK(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(p){var g=p.getAttribute("data-collapse-toggle"),w=document.getElementById(g);w?Xs.instanceExists("Collapse",w.getAttribute("id"))?new xK(w,p,{},{id:w.getAttribute("id")+"_"+Xs._generateRandomId()}):new xK(w,p):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=xK,window.initCollapses=IK);var iS=function(){return iS=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},iS.apply(this,arguments)},L$={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},pne={id:null,override:!0},ZQ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=L$),N===void 0&&(N=pne),this._instanceId=N.id?N.id:g.id,this._carouselEl=g,this._items=w,this._options=iS(iS(iS({},L$),E),{indicators:iS(iS({},L$.indicators),E.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Xs.addInstance("Carousel",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.map(function(w){w.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(w,E){w.el.addEventListener("click",function(){g.slideTo(E)})}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Carousel",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items[g]},p.prototype.slideTo=function(g){var w=this._items[g],E={left:w.position===0?this._items[this._items.length-1]:this._items[w.position-1],middle:w,right:w.position===this._items.length-1?this._items[0]:this._items[w.position+1]};this._rotate(E),this._setActiveItem(w),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},p.prototype.next=function(){var g=this.getActiveItem(),w=null;g.position===this._items.length-1?w=this._items[0]:w=this._items[g.position+1],this.slideTo(w.position),this._options.onNext(this)},p.prototype.prev=function(){var g=this.getActiveItem(),w=null;g.position===0?w=this._items[this._items.length-1]:w=this._items[g.position-1],this.slideTo(w.position),this._options.onPrev(this)},p.prototype._rotate=function(g){if(this._items.map(function(w){w.el.classList.add("hidden")}),this._items.length===1){g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-20");return}g.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),g.left.el.classList.add("-translate-x-full","z-10"),g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-30"),g.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),g.right.el.classList.add("translate-x-full","z-20")},p.prototype.cycle=function(){var g=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){g.next()},this._intervalDuration))},p.prototype.pause=function(){clearInterval(this._intervalInstance)},p.prototype.getActiveItem=function(){return this._activeItem},p.prototype._setActiveItem=function(g){var w,E,N=this;this._activeItem=g;var V=g.position;this._indicators.length&&(this._indicators.map(function(K){var j,le;K.el.setAttribute("aria-current","false"),(j=K.el.classList).remove.apply(j,N._options.indicators.activeClasses.split(" ")),(le=K.el.classList).add.apply(le,N._options.indicators.inactiveClasses.split(" "))}),(w=this._indicators[V].el.classList).add.apply(w,this._options.indicators.activeClasses.split(" ")),(E=this._indicators[V].el.classList).remove.apply(E,this._options.indicators.inactiveClasses.split(" ")),this._indicators[V].el.setAttribute("aria-current","true"))},p.prototype.updateOnNext=function(g){this._options.onNext=g},p.prototype.updateOnPrev=function(g){this._options.onPrev=g},p.prototype.updateOnChange=function(g){this._options.onChange=g},p}();function BK(){document.querySelectorAll("[data-carousel]").forEach(function(p){var g=p.getAttribute("data-carousel-interval"),w=p.getAttribute("data-carousel")==="slide",E=[],N=0;p.querySelectorAll("[data-carousel-item]").length&&Array.from(p.querySelectorAll("[data-carousel-item]")).map(function(ge,Ce){E.push({position:Ce,el:ge}),ge.getAttribute("data-carousel-item")==="active"&&(N=Ce)});var V=[];p.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(p.querySelectorAll("[data-carousel-slide-to]")).map(function(ge){V.push({position:parseInt(ge.getAttribute("data-carousel-slide-to")),el:ge})});var K=new ZQ(p,E,{defaultPosition:N,indicators:{items:V},interval:g||L$.interval});w&&K.cycle();var j=p.querySelector("[data-carousel-next]"),le=p.querySelector("[data-carousel-prev]");j&&j.addEventListener("click",function(){K.next()}),le&&le.addEventListener("click",function(){K.prev()})})}typeof window<"u"&&(window.Carousel=ZQ,window.initCarousels=BK);var Z$=function(){return Z$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Z$.apply(this,arguments)},rJ={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},bne={id:null,override:!0},jQ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=rJ),N===void 0&&(N=bne),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Z$(Z$({},rJ),E),this._initialized=!1,this.init(),Xs.addInstance("Dismiss",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){g.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Dismiss",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){g._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function LK(){document.querySelectorAll("[data-dismiss-target]").forEach(function(p){var g=p.getAttribute("data-dismiss-target"),w=document.querySelector(g);w?new jQ(w,p):console.error('The dismiss element with id "'.concat(g,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=jQ,window.initDismisses=LK);var $f="top",Th="bottom",kh="right",Hf="left",FK="auto",Y5=[$f,Th,kh,Hf],Bk="start",U5="end",vne="clippingParents",qQ="viewport",P5="popper",yne="reference",aJ=Y5.reduce(function(p,g){return p.concat([g+"-"+Bk,g+"-"+U5])},[]),GQ=[].concat(Y5,[FK]).reduce(function(p,g){return p.concat([g,g+"-"+Bk,g+"-"+U5])},[]),wne="beforeRead",Cne="read",Sne="afterRead",xne="beforeMain",Ene="main",_ne="afterMain",Tne="beforeWrite",kne="write",Ane="afterWrite",One=[wne,Cne,Sne,xne,Ene,_ne,Tne,kne,Ane];function x1(p){return p?(p.nodeName||"").toLowerCase():null}function Mm(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var g=p.ownerDocument;return g&&g.defaultView||window}return p}function mS(p){var g=Mm(p).Element;return p instanceof g||p instanceof Element}function _h(p){var g=Mm(p).HTMLElement;return p instanceof g||p instanceof HTMLElement}function $K(p){if(typeof ShadowRoot>"u")return!1;var g=Mm(p).ShadowRoot;return p instanceof g||p instanceof ShadowRoot}function Dne(p){var g=p.state;Object.keys(g.elements).forEach(function(w){var E=g.styles[w]||{},N=g.attributes[w]||{},V=g.elements[w];!_h(V)||!x1(V)||(Object.assign(V.style,E),Object.keys(N).forEach(function(K){var j=N[K];j===!1?V.removeAttribute(K):V.setAttribute(K,j===!0?"":j)}))})}function Rne(p){var g=p.state,w={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,w.popper),g.styles=w,g.elements.arrow&&Object.assign(g.elements.arrow.style,w.arrow),function(){Object.keys(g.elements).forEach(function(E){var N=g.elements[E],V=g.attributes[E]||{},K=Object.keys(g.styles.hasOwnProperty(E)?g.styles[E]:w[E]),j=K.reduce(function(le,ge){return le[ge]="",le},{});!_h(N)||!x1(N)||(Object.assign(N.style,j),Object.keys(V).forEach(function(le){N.removeAttribute(le)}))})}}const Mne={name:"applyStyles",enabled:!0,phase:"write",fn:Dne,effect:Rne,requires:["computeStyles"]};function S1(p){return p.split("-")[0]}var dS=Math.max,j$=Math.min,Lk=Math.round;function EK(){var p=navigator.userAgentData;return p!=null&&p.brands&&Array.isArray(p.brands)?p.brands.map(function(g){return g.brand+"/"+g.version}).join(" "):navigator.userAgent}function KQ(){return!/^((?!chrome|android).)*safari/i.test(EK())}function Fk(p,g,w){g===void 0&&(g=!1),w===void 0&&(w=!1);var E=p.getBoundingClientRect(),N=1,V=1;g&&_h(p)&&(N=p.offsetWidth>0&&Lk(E.width)/p.offsetWidth||1,V=p.offsetHeight>0&&Lk(E.height)/p.offsetHeight||1);var K=mS(p)?Mm(p):window,j=K.visualViewport,le=!KQ()&&w,ge=(E.left+(le&&j?j.offsetLeft:0))/N,Ce=(E.top+(le&&j?j.offsetTop:0))/V,Xe=E.width/N,Lt=E.height/V;return{width:Xe,height:Lt,top:Ce,right:ge+Xe,bottom:Ce+Lt,left:ge,x:ge,y:Ce}}function HK(p){var g=Fk(p),w=p.offsetWidth,E=p.offsetHeight;return Math.abs(g.width-w)<=1&&(w=g.width),Math.abs(g.height-E)<=1&&(E=g.height),{x:p.offsetLeft,y:p.offsetTop,width:w,height:E}}function YQ(p,g){var w=g.getRootNode&&g.getRootNode();if(p.contains(g))return!0;if(w&&$K(w)){var E=g;do{if(E&&p.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function g0(p){return Mm(p).getComputedStyle(p)}function Nne(p){return["table","td","th"].indexOf(x1(p))>=0}function t2(p){return((mS(p)?p.ownerDocument:p.document)||window.document).documentElement}function b7(p){return x1(p)==="html"?p:p.assignedSlot||p.parentNode||($K(p)?p.host:null)||t2(p)}function iJ(p){return!_h(p)||g0(p).position==="fixed"?null:p.offsetParent}function Pne(p){var g=/firefox/i.test(EK()),w=/Trident/i.test(EK());if(w&&_h(p)){var E=g0(p);if(E.position==="fixed")return null}var N=b7(p);for($K(N)&&(N=N.host);_h(N)&&["html","body"].indexOf(x1(N))<0;){var V=g0(N);if(V.transform!=="none"||V.perspective!=="none"||V.contain==="paint"||["transform","perspective"].indexOf(V.willChange)!==-1||g&&V.willChange==="filter"||g&&V.filter&&V.filter!=="none")return N;N=N.parentNode}return null}function X5(p){for(var g=Mm(p),w=iJ(p);w&&Nne(w)&&g0(w).position==="static";)w=iJ(w);return w&&(x1(w)==="html"||x1(w)==="body"&&g0(w).position==="static")?g:w||Pne(p)||g}function zK(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function L5(p,g,w){return dS(p,j$(g,w))}function Ine(p,g,w){var E=L5(p,g,w);return E>w?w:E}function XQ(){return{top:0,right:0,bottom:0,left:0}}function JQ(p){return Object.assign({},XQ(),p)}function QQ(p,g){return g.reduce(function(w,E){return w[E]=p,w},{})}var Bne=function(g,w){return g=typeof g=="function"?g(Object.assign({},w.rects,{placement:w.placement})):g,JQ(typeof g!="number"?g:QQ(g,Y5))};function Lne(p){var g,w=p.state,E=p.name,N=p.options,V=w.elements.arrow,K=w.modifiersData.popperOffsets,j=S1(w.placement),le=zK(j),ge=[Hf,kh].indexOf(j)>=0,Ce=ge?"height":"width";if(!(!V||!K)){var Xe=Bne(N.padding,w),Lt=HK(V),Zt=le==="y"?$f:Hf,Pt=le==="y"?Th:kh,Ct=w.rects.reference[Ce]+w.rects.reference[le]-K[le]-w.rects.popper[Ce],Ne=K[le]-w.rects.reference[le],ln=X5(V),xt=ln?le==="y"?ln.clientHeight||0:ln.clientWidth||0:0,de=Ct/2-Ne/2,Je=Xe[Zt],Dn=xt-Lt[Ce]-Xe[Pt],Gt=xt/2-Lt[Ce]/2+de,re=L5(Je,Gt,Dn),Xt=le;w.modifiersData[E]=(g={},g[Xt]=re,g.centerOffset=re-Gt,g)}}function Fne(p){var g=p.state,w=p.options,E=w.element,N=E===void 0?"[data-popper-arrow]":E;N!=null&&(typeof N=="string"&&(N=g.elements.popper.querySelector(N),!N)||YQ(g.elements.popper,N)&&(g.elements.arrow=N))}const $ne={name:"arrow",enabled:!0,phase:"main",fn:Lne,effect:Fne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $k(p){return p.split("-")[1]}var Hne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zne(p,g){var w=p.x,E=p.y,N=g.devicePixelRatio||1;return{x:Lk(w*N)/N||0,y:Lk(E*N)/N||0}}function cJ(p){var g,w=p.popper,E=p.popperRect,N=p.placement,V=p.variation,K=p.offsets,j=p.position,le=p.gpuAcceleration,ge=p.adaptive,Ce=p.roundOffsets,Xe=p.isFixed,Lt=K.x,Zt=Lt===void 0?0:Lt,Pt=K.y,Ct=Pt===void 0?0:Pt,Ne=typeof Ce=="function"?Ce({x:Zt,y:Ct}):{x:Zt,y:Ct};Zt=Ne.x,Ct=Ne.y;var ln=K.hasOwnProperty("x"),xt=K.hasOwnProperty("y"),de=Hf,Je=$f,Dn=window;if(ge){var Gt=X5(w),re="clientHeight",Xt="clientWidth";if(Gt===Mm(w)&&(Gt=t2(w),g0(Gt).position!=="static"&&j==="absolute"&&(re="scrollHeight",Xt="scrollWidth")),Gt=Gt,N===$f||(N===Hf||N===kh)&&V===U5){Je=Th;var In=Xe&&Gt===Dn&&Dn.visualViewport?Dn.visualViewport.height:Gt[re];Ct-=In-E.height,Ct*=le?1:-1}if(N===Hf||(N===$f||N===Th)&&V===U5){de=kh;var en=Xe&&Gt===Dn&&Dn.visualViewport?Dn.visualViewport.width:Gt[Xt];Zt-=en-E.width,Zt*=le?1:-1}}var Fe=Object.assign({position:j},ge&&Hne),ve=Ce===!0?zne({x:Zt,y:Ct},Mm(w)):{x:Zt,y:Ct};if(Zt=ve.x,Ct=ve.y,le){var oo;return Object.assign({},Fe,(oo={},oo[Je]=xt?"0":"",oo[de]=ln?"0":"",oo.transform=(Dn.devicePixelRatio||1)<=1?"translate("+Zt+"px, "+Ct+"px)":"translate3d("+Zt+"px, "+Ct+"px, 0)",oo))}return Object.assign({},Fe,(g={},g[Je]=xt?Ct+"px":"",g[de]=ln?Zt+"px":"",g.transform="",g))}function Vne(p){var g=p.state,w=p.options,E=w.gpuAcceleration,N=E===void 0?!0:E,V=w.adaptive,K=V===void 0?!0:V,j=w.roundOffsets,le=j===void 0?!0:j,ge={placement:S1(g.placement),variation:$k(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:N,isFixed:g.options.strategy==="fixed"};g.modifiersData.popperOffsets!=null&&(g.styles.popper=Object.assign({},g.styles.popper,cJ(Object.assign({},ge,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:K,roundOffsets:le})))),g.modifiersData.arrow!=null&&(g.styles.arrow=Object.assign({},g.styles.arrow,cJ(Object.assign({},ge,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:le})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})}const Une={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Vne,data:{}};var A$={passive:!0};function Wne(p){var g=p.state,w=p.instance,E=p.options,N=E.scroll,V=N===void 0?!0:N,K=E.resize,j=K===void 0?!0:K,le=Mm(g.elements.popper),ge=[].concat(g.scrollParents.reference,g.scrollParents.popper);return V&&ge.forEach(function(Ce){Ce.addEventListener("scroll",w.update,A$)}),j&&le.addEventListener("resize",w.update,A$),function(){V&&ge.forEach(function(Ce){Ce.removeEventListener("scroll",w.update,A$)}),j&&le.removeEventListener("resize",w.update,A$)}}const Zne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Wne,data:{}};var jne={left:"right",right:"left",bottom:"top",top:"bottom"};function F$(p){return p.replace(/left|right|bottom|top/g,function(g){return jne[g]})}var qne={start:"end",end:"start"};function lJ(p){return p.replace(/start|end/g,function(g){return qne[g]})}function VK(p){var g=Mm(p),w=g.pageXOffset,E=g.pageYOffset;return{scrollLeft:w,scrollTop:E}}function UK(p){return Fk(t2(p)).left+VK(p).scrollLeft}function Gne(p,g){var w=Mm(p),E=t2(p),N=w.visualViewport,V=E.clientWidth,K=E.clientHeight,j=0,le=0;if(N){V=N.width,K=N.height;var ge=KQ();(ge||!ge&&g==="fixed")&&(j=N.offsetLeft,le=N.offsetTop)}return{width:V,height:K,x:j+UK(p),y:le}}function Kne(p){var g,w=t2(p),E=VK(p),N=(g=p.ownerDocument)==null?void 0:g.body,V=dS(w.scrollWidth,w.clientWidth,N?N.scrollWidth:0,N?N.clientWidth:0),K=dS(w.scrollHeight,w.clientHeight,N?N.scrollHeight:0,N?N.clientHeight:0),j=-E.scrollLeft+UK(p),le=-E.scrollTop;return g0(N||w).direction==="rtl"&&(j+=dS(w.clientWidth,N?N.clientWidth:0)-V),{width:V,height:K,x:j,y:le}}function WK(p){var g=g0(p),w=g.overflow,E=g.overflowX,N=g.overflowY;return/auto|scroll|overlay|hidden/.test(w+N+E)}function eee(p){return["html","body","#document"].indexOf(x1(p))>=0?p.ownerDocument.body:_h(p)&&WK(p)?p:eee(b7(p))}function F5(p,g){var w;g===void 0&&(g=[]);var E=eee(p),N=E===((w=p.ownerDocument)==null?void 0:w.body),V=Mm(E),K=N?[V].concat(V.visualViewport||[],WK(E)?E:[]):E,j=g.concat(K);return N?j:j.concat(F5(b7(K)))}function _K(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function Yne(p,g){var w=Fk(p,!1,g==="fixed");return w.top=w.top+p.clientTop,w.left=w.left+p.clientLeft,w.bottom=w.top+p.clientHeight,w.right=w.left+p.clientWidth,w.width=p.clientWidth,w.height=p.clientHeight,w.x=w.left,w.y=w.top,w}function uJ(p,g,w){return g===qQ?_K(Gne(p,w)):mS(g)?Yne(g,w):_K(Kne(t2(p)))}function Xne(p){var g=F5(b7(p)),w=["absolute","fixed"].indexOf(g0(p).position)>=0,E=w&&_h(p)?X5(p):p;return mS(E)?g.filter(function(N){return mS(N)&&YQ(N,E)&&x1(N)!=="body"}):[]}function Jne(p,g,w,E){var N=g==="clippingParents"?Xne(p):[].concat(g),V=[].concat(N,[w]),K=V[0],j=V.reduce(function(le,ge){var Ce=uJ(p,ge,E);return le.top=dS(Ce.top,le.top),le.right=j$(Ce.right,le.right),le.bottom=j$(Ce.bottom,le.bottom),le.left=dS(Ce.left,le.left),le},uJ(p,K,E));return j.width=j.right-j.left,j.height=j.bottom-j.top,j.x=j.left,j.y=j.top,j}function tee(p){var g=p.reference,w=p.element,E=p.placement,N=E?S1(E):null,V=E?$k(E):null,K=g.x+g.width/2-w.width/2,j=g.y+g.height/2-w.height/2,le;switch(N){case $f:le={x:K,y:g.y-w.height};break;case Th:le={x:K,y:g.y+g.height};break;case kh:le={x:g.x+g.width,y:j};break;case Hf:le={x:g.x-w.width,y:j};break;default:le={x:g.x,y:g.y}}var ge=N?zK(N):null;if(ge!=null){var Ce=ge==="y"?"height":"width";switch(V){case Bk:le[ge]=le[ge]-(g[Ce]/2-w[Ce]/2);break;case U5:le[ge]=le[ge]+(g[Ce]/2-w[Ce]/2);break}}return le}function W5(p,g){g===void 0&&(g={});var w=g,E=w.placement,N=E===void 0?p.placement:E,V=w.strategy,K=V===void 0?p.strategy:V,j=w.boundary,le=j===void 0?vne:j,ge=w.rootBoundary,Ce=ge===void 0?qQ:ge,Xe=w.elementContext,Lt=Xe===void 0?P5:Xe,Zt=w.altBoundary,Pt=Zt===void 0?!1:Zt,Ct=w.padding,Ne=Ct===void 0?0:Ct,ln=JQ(typeof Ne!="number"?Ne:QQ(Ne,Y5)),xt=Lt===P5?yne:P5,de=p.rects.popper,Je=p.elements[Pt?xt:Lt],Dn=Jne(mS(Je)?Je:Je.contextElement||t2(p.elements.popper),le,Ce,K),Gt=Fk(p.elements.reference),re=tee({reference:Gt,element:de,placement:N}),Xt=_K(Object.assign({},de,re)),In=Lt===P5?Xt:Gt,en={top:Dn.top-In.top+ln.top,bottom:In.bottom-Dn.bottom+ln.bottom,left:Dn.left-In.left+ln.left,right:In.right-Dn.right+ln.right},Fe=p.modifiersData.offset;if(Lt===P5&&Fe){var ve=Fe[N];Object.keys(en).forEach(function(oo){var at=[kh,Th].indexOf(oo)>=0?1:-1,it=[$f,Th].indexOf(oo)>=0?"y":"x";en[oo]+=ve[it]*at})}return en}function Qne(p,g){g===void 0&&(g={});var w=g,E=w.placement,N=w.boundary,V=w.rootBoundary,K=w.padding,j=w.flipVariations,le=w.allowedAutoPlacements,ge=le===void 0?GQ:le,Ce=$k(E),Xe=Ce?j?aJ:aJ.filter(function(Pt){return $k(Pt)===Ce}):Y5,Lt=Xe.filter(function(Pt){return ge.indexOf(Pt)>=0});Lt.length===0&&(Lt=Xe);var Zt=Lt.reduce(function(Pt,Ct){return Pt[Ct]=W5(p,{placement:Ct,boundary:N,rootBoundary:V,padding:K})[S1(Ct)],Pt},{});return Object.keys(Zt).sort(function(Pt,Ct){return Zt[Pt]-Zt[Ct]})}function eoe(p){if(S1(p)===FK)return[];var g=F$(p);return[lJ(p),g,lJ(g)]}function toe(p){var g=p.state,w=p.options,E=p.name;if(!g.modifiersData[E]._skip){for(var N=w.mainAxis,V=N===void 0?!0:N,K=w.altAxis,j=K===void 0?!0:K,le=w.fallbackPlacements,ge=w.padding,Ce=w.boundary,Xe=w.rootBoundary,Lt=w.altBoundary,Zt=w.flipVariations,Pt=Zt===void 0?!0:Zt,Ct=w.allowedAutoPlacements,Ne=g.options.placement,ln=S1(Ne),xt=ln===Ne,de=le||(xt||!Pt?[F$(Ne)]:eoe(Ne)),Je=[Ne].concat(de).reduce(function(fn,io){return fn.concat(S1(io)===FK?Qne(g,{placement:io,boundary:Ce,rootBoundary:Xe,padding:ge,flipVariations:Pt,allowedAutoPlacements:Ct}):io)},[]),Dn=g.rects.reference,Gt=g.rects.popper,re=new Map,Xt=!0,In=Je[0],en=0;en<Je.length;en++){var Fe=Je[en],ve=S1(Fe),oo=$k(Fe)===Bk,at=[$f,Th].indexOf(ve)>=0,it=at?"width":"height",M=W5(g,{placement:Fe,boundary:Ce,rootBoundary:Xe,altBoundary:Lt,padding:ge}),Hn=at?oo?kh:Hf:oo?Th:$f;Dn[it]>Gt[it]&&(Hn=F$(Hn));var wt=F$(Hn),Eo=[];if(V&&Eo.push(M[ve]<=0),j&&Eo.push(M[Hn]<=0,M[wt]<=0),Eo.every(function(fn){return fn})){In=Fe,Xt=!1;break}re.set(Fe,Eo)}if(Xt)for(var yn=Pt?3:1,Ae=function(io){var $e=Je.find(function(gt){var W=re.get(gt);if(W)return W.slice(0,io).every(function(Hs){return Hs})});if($e)return In=$e,"break"},yt=yn;yt>0;yt--){var Mn=Ae(yt);if(Mn==="break")break}g.placement!==In&&(g.modifiersData[E]._skip=!0,g.placement=In,g.reset=!0)}}const noe={name:"flip",enabled:!0,phase:"main",fn:toe,requiresIfExists:["offset"],data:{_skip:!1}};function dJ(p,g,w){return w===void 0&&(w={x:0,y:0}),{top:p.top-g.height-w.y,right:p.right-g.width+w.x,bottom:p.bottom-g.height+w.y,left:p.left-g.width-w.x}}function fJ(p){return[$f,kh,Th,Hf].some(function(g){return p[g]>=0})}function ooe(p){var g=p.state,w=p.name,E=g.rects.reference,N=g.rects.popper,V=g.modifiersData.preventOverflow,K=W5(g,{elementContext:"reference"}),j=W5(g,{altBoundary:!0}),le=dJ(K,E),ge=dJ(j,N,V),Ce=fJ(le),Xe=fJ(ge);g.modifiersData[w]={referenceClippingOffsets:le,popperEscapeOffsets:ge,isReferenceHidden:Ce,hasPopperEscaped:Xe},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":Ce,"data-popper-escaped":Xe})}const soe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ooe};function roe(p,g,w){var E=S1(p),N=[Hf,$f].indexOf(E)>=0?-1:1,V=typeof w=="function"?w(Object.assign({},g,{placement:p})):w,K=V[0],j=V[1];return K=K||0,j=(j||0)*N,[Hf,kh].indexOf(E)>=0?{x:j,y:K}:{x:K,y:j}}function aoe(p){var g=p.state,w=p.options,E=p.name,N=w.offset,V=N===void 0?[0,0]:N,K=GQ.reduce(function(Ce,Xe){return Ce[Xe]=roe(Xe,g.rects,V),Ce},{}),j=K[g.placement],le=j.x,ge=j.y;g.modifiersData.popperOffsets!=null&&(g.modifiersData.popperOffsets.x+=le,g.modifiersData.popperOffsets.y+=ge),g.modifiersData[E]=K}const ioe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aoe};function coe(p){var g=p.state,w=p.name;g.modifiersData[w]=tee({reference:g.rects.reference,element:g.rects.popper,placement:g.placement})}const loe={name:"popperOffsets",enabled:!0,phase:"read",fn:coe,data:{}};function uoe(p){return p==="x"?"y":"x"}function doe(p){var g=p.state,w=p.options,E=p.name,N=w.mainAxis,V=N===void 0?!0:N,K=w.altAxis,j=K===void 0?!1:K,le=w.boundary,ge=w.rootBoundary,Ce=w.altBoundary,Xe=w.padding,Lt=w.tether,Zt=Lt===void 0?!0:Lt,Pt=w.tetherOffset,Ct=Pt===void 0?0:Pt,Ne=W5(g,{boundary:le,rootBoundary:ge,padding:Xe,altBoundary:Ce}),ln=S1(g.placement),xt=$k(g.placement),de=!xt,Je=zK(ln),Dn=uoe(Je),Gt=g.modifiersData.popperOffsets,re=g.rects.reference,Xt=g.rects.popper,In=typeof Ct=="function"?Ct(Object.assign({},g.rects,{placement:g.placement})):Ct,en=typeof In=="number"?{mainAxis:In,altAxis:In}:Object.assign({mainAxis:0,altAxis:0},In),Fe=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,ve={x:0,y:0};if(Gt){if(V){var oo,at=Je==="y"?$f:Hf,it=Je==="y"?Th:kh,M=Je==="y"?"height":"width",Hn=Gt[Je],wt=Hn+Ne[at],Eo=Hn-Ne[it],yn=Zt?-Xt[M]/2:0,Ae=xt===Bk?re[M]:Xt[M],yt=xt===Bk?-Xt[M]:-re[M],Mn=g.elements.arrow,fn=Zt&&Mn?HK(Mn):{width:0,height:0},io=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:XQ(),$e=io[at],gt=io[it],W=L5(0,re[M],fn[M]),Hs=de?re[M]/2-yn-W-$e-en.mainAxis:Ae-W-$e-en.mainAxis,to=de?-re[M]/2+yn+W+gt+en.mainAxis:yt+W+gt+en.mainAxis,To=g.elements.arrow&&X5(g.elements.arrow),zo=To?Je==="y"?To.clientTop||0:To.clientLeft||0:0,gi=(oo=Fe==null?void 0:Fe[Je])!=null?oo:0,et=Hn+Hs-gi-zo,_t=Hn+to-gi,dt=L5(Zt?j$(wt,et):wt,Hn,Zt?dS(Eo,_t):Eo);Gt[Je]=dt,ve[Je]=dt-Hn}if(j){var xe,Oo=Je==="x"?$f:Hf,Do=Je==="x"?Th:kh,Kt=Gt[Dn],ls=Dn==="y"?"height":"width",Fo=Kt+Ne[Oo],zr=Kt-Ne[Do],Vo=[$f,Hf].indexOf(ln)!==-1,zs=(xe=Fe==null?void 0:Fe[Dn])!=null?xe:0,Xa=Vo?Fo:Kt-re[ls]-Xt[ls]-zs+en.altAxis,_s=Vo?Kt+re[ls]+Xt[ls]-zs-en.altAxis:zr,Ss=Zt&&Vo?Ine(Xa,Kt,_s):L5(Zt?Xa:Fo,Kt,Zt?_s:zr);Gt[Dn]=Ss,ve[Dn]=Ss-Kt}g.modifiersData[E]=ve}}const foe={name:"preventOverflow",enabled:!0,phase:"main",fn:doe,requiresIfExists:["offset"]};function moe(p){return{scrollLeft:p.scrollLeft,scrollTop:p.scrollTop}}function hoe(p){return p===Mm(p)||!_h(p)?VK(p):moe(p)}function goe(p){var g=p.getBoundingClientRect(),w=Lk(g.width)/p.offsetWidth||1,E=Lk(g.height)/p.offsetHeight||1;return w!==1||E!==1}function poe(p,g,w){w===void 0&&(w=!1);var E=_h(g),N=_h(g)&&goe(g),V=t2(g),K=Fk(p,N,w),j={scrollLeft:0,scrollTop:0},le={x:0,y:0};return(E||!E&&!w)&&((x1(g)!=="body"||WK(V))&&(j=hoe(g)),_h(g)?(le=Fk(g,!0),le.x+=g.clientLeft,le.y+=g.clientTop):V&&(le.x=UK(V))),{x:K.left+j.scrollLeft-le.x,y:K.top+j.scrollTop-le.y,width:K.width,height:K.height}}function boe(p){var g=new Map,w=new Set,E=[];p.forEach(function(V){g.set(V.name,V)});function N(V){w.add(V.name);var K=[].concat(V.requires||[],V.requiresIfExists||[]);K.forEach(function(j){if(!w.has(j)){var le=g.get(j);le&&N(le)}}),E.push(V)}return p.forEach(function(V){w.has(V.name)||N(V)}),E}function voe(p){var g=boe(p);return One.reduce(function(w,E){return w.concat(g.filter(function(N){return N.phase===E}))},[])}function yoe(p){var g;return function(){return g||(g=new Promise(function(w){Promise.resolve().then(function(){g=void 0,w(p())})})),g}}function woe(p){var g=p.reduce(function(w,E){var N=w[E.name];return w[E.name]=N?Object.assign({},N,E,{options:Object.assign({},N.options,E.options),data:Object.assign({},N.data,E.data)}):E,w},{});return Object.keys(g).map(function(w){return g[w]})}var mJ={placement:"bottom",modifiers:[],strategy:"absolute"};function hJ(){for(var p=arguments.length,g=new Array(p),w=0;w<p;w++)g[w]=arguments[w];return!g.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function Coe(p){p===void 0&&(p={});var g=p,w=g.defaultModifiers,E=w===void 0?[]:w,N=g.defaultOptions,V=N===void 0?mJ:N;return function(j,le,ge){ge===void 0&&(ge=V);var Ce={placement:"bottom",orderedModifiers:[],options:Object.assign({},mJ,V),modifiersData:{},elements:{reference:j,popper:le},attributes:{},styles:{}},Xe=[],Lt=!1,Zt={state:Ce,setOptions:function(ln){var xt=typeof ln=="function"?ln(Ce.options):ln;Ct(),Ce.options=Object.assign({},V,Ce.options,xt),Ce.scrollParents={reference:mS(j)?F5(j):j.contextElement?F5(j.contextElement):[],popper:F5(le)};var de=voe(woe([].concat(E,Ce.options.modifiers)));return Ce.orderedModifiers=de.filter(function(Je){return Je.enabled}),Pt(),Zt.update()},forceUpdate:function(){if(!Lt){var ln=Ce.elements,xt=ln.reference,de=ln.popper;if(hJ(xt,de)){Ce.rects={reference:poe(xt,X5(de),Ce.options.strategy==="fixed"),popper:HK(de)},Ce.reset=!1,Ce.placement=Ce.options.placement,Ce.orderedModifiers.forEach(function(en){return Ce.modifiersData[en.name]=Object.assign({},en.data)});for(var Je=0;Je<Ce.orderedModifiers.length;Je++){if(Ce.reset===!0){Ce.reset=!1,Je=-1;continue}var Dn=Ce.orderedModifiers[Je],Gt=Dn.fn,re=Dn.options,Xt=re===void 0?{}:re,In=Dn.name;typeof Gt=="function"&&(Ce=Gt({state:Ce,options:Xt,name:In,instance:Zt})||Ce)}}}},update:yoe(function(){return new Promise(function(Ne){Zt.forceUpdate(),Ne(Ce)})}),destroy:function(){Ct(),Lt=!0}};if(!hJ(j,le))return Zt;Zt.setOptions(ge).then(function(Ne){!Lt&&ge.onFirstUpdate&&ge.onFirstUpdate(Ne)});function Pt(){Ce.orderedModifiers.forEach(function(Ne){var ln=Ne.name,xt=Ne.options,de=xt===void 0?{}:xt,Je=Ne.effect;if(typeof Je=="function"){var Dn=Je({state:Ce,name:ln,instance:Zt,options:de}),Gt=function(){};Xe.push(Dn||Gt)}})}function Ct(){Xe.forEach(function(Ne){return Ne()}),Xe=[]}return Zt}}var Soe=[Zne,loe,Une,Mne,ioe,noe,foe,$ne,soe],ZK=Coe({defaultModifiers:Soe}),Ky=function(){return Ky=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Ky.apply(this,arguments)},O$=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,V;E<N;E++)(V||!(E in g))&&(V||(V=Array.prototype.slice.call(g,0,E)),V[E]=g[E]);return p.concat(V||Array.prototype.slice.call(g))},Yy={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},xoe={id:null,override:!0},nee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=Yy),N===void 0&&(N=xoe),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Ky(Ky({},Yy),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Dropdown",this,this._instanceId,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},p.prototype.destroy=function(){var g=this,w=this._getTriggerEvents();this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._clickHandler)}),this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.removeEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverHideHandler),g._targetEl.removeEventListener(E,g._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},p.prototype.removeInstance=function(){Xs.removeInstance("Dropdown",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._clickHandler=function(){g.toggle()},this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._clickHandler)}),this._hoverShowTriggerElHandler=function(E){E.type==="click"?g.toggle():setTimeout(function(){g.show()},g._options.delay)},this._hoverShowTargetElHandler=function(){g.show()},this._hoverHideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},g._options.delay)},this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.addEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverHideHandler),g._targetEl.addEventListener(E,g._hoverHideHandler)}))},p.prototype._createPopperInstance=function(){return ZK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target,N=this._options.ignoreClickOutsideClass,V=!1;if(N){var K=document.querySelectorAll(".".concat(N));K.forEach(function(j){if(j.contains(E)){V=!0;return}})}E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&!V&&this.isVisible()&&this.hide()},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.isVisible=function(){return this._visible},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._targetEl.removeAttribute("aria-hidden"),this._popperInstance.setOptions(function(g){return Ky(Ky({},g),{modifiers:O$(O$([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._targetEl.setAttribute("aria-hidden","true"),this._popperInstance.setOptions(function(g){return Ky(Ky({},g),{modifiers:O$(O$([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function jK(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(p){var g=p.getAttribute("data-dropdown-toggle"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-dropdown-placement"),N=p.getAttribute("data-dropdown-offset-skidding"),V=p.getAttribute("data-dropdown-offset-distance"),K=p.getAttribute("data-dropdown-trigger"),j=p.getAttribute("data-dropdown-delay"),le=p.getAttribute("data-dropdown-ignore-click-outside-class");new nee(w,p,{placement:E||Yy.placement,triggerType:K||Yy.triggerType,offsetSkidding:N?parseInt(N):Yy.offsetSkidding,offsetDistance:V?parseInt(V):Yy.offsetDistance,delay:j?parseInt(j):Yy.delay,ignoreClickOutsideClass:le||Yy.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(g,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=nee,window.initDropdowns=jK);var q$=function(){return q$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},q$.apply(this,arguments)},G$={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},Eoe={id:null,override:!0},oee=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=G$),E===void 0&&(E=Eoe),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=q$(q$({},G$),w),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Xs.addInstance("Modal",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(w){g._targetEl.classList.add(w)}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Modal",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._createBackdrop=function(){var g;if(this._isHidden){var w=document.createElement("div");(g=w.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(w),this._backdropEl=w}},p.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},p.prototype._setupModalCloseEventListeners=function(){var g=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(w){g._handleOutsideClick(w.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._handleOutsideClick=function(g){(g===this._targetEl||g===this._backdropEl&&this.isVisible())&&this.hide()},p.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},p.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},p.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},p.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},p.prototype.isVisible=function(){return!this._isHidden},p.prototype.isHidden=function(){return this._isHidden},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function qK(){document.querySelectorAll("[data-modal-target]").forEach(function(p){var g=p.getAttribute("data-modal-target"),w=document.getElementById(g);if(w){var E=w.getAttribute("data-modal-placement"),N=w.getAttribute("data-modal-backdrop");new oee(w,{placement:E||G$.placement,backdrop:N||G$.backdrop})}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(p){var g=p.getAttribute("data-modal-toggle"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Modal",g);if(E){var N=function(){E.toggle()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(p){var g=p.getAttribute("data-modal-show"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Modal",g);if(E){var N=function(){E.show()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(p){var g=p.getAttribute("data-modal-hide"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Modal",g);if(E){var N=function(){E.hide()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=oee,window.initModals=qK);var K$=function(){return K$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},K$.apply(this,arguments)},cS={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},_oe={id:null,override:!0},see=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=cS),E===void 0&&(E=_oe),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=K$(K$({},cS),w),this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Drawer",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(w){g._targetEl.classList.add(w)}),this._handleEscapeKey=function(w){w.key==="Escape"&&g.isVisible()&&g.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("Drawer",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.add(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.add(w)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.remove(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.remove(w)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype._createBackdrop=function(){var g,w=this;if(!this._visible){var E=document.createElement("div");E.setAttribute("drawer-backdrop",""),(g=E.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(E),E.addEventListener("click",function(){w.hide()})}},p.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},p.prototype._getPlacementClasses=function(g){switch(g){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function GK(){document.querySelectorAll("[data-drawer-target]").forEach(function(p){var g=p.getAttribute("data-drawer-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-drawer-placement"),N=p.getAttribute("data-drawer-body-scrolling"),V=p.getAttribute("data-drawer-backdrop"),K=p.getAttribute("data-drawer-edge"),j=p.getAttribute("data-drawer-edge-offset");new see(w,{placement:E||cS.placement,bodyScrolling:N?N==="true":cS.bodyScrolling,backdrop:V?V==="true":cS.backdrop,edge:K?K==="true":cS.edge,edgeOffset:j||cS.edgeOffset})}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(p){var g=p.getAttribute("data-drawer-toggle"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Drawer",g);if(E){var N=function(){E.toggle()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(p){var g=p.getAttribute("data-drawer-dismiss")?p.getAttribute("data-drawer-dismiss"):p.getAttribute("data-drawer-hide"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Drawer",g);if(E){var N=function(){E.hide()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(p){var g=p.getAttribute("data-drawer-show"),w=document.getElementById(g);if(w){var E=Xs.getInstance("Drawer",g);if(E){var N=function(){E.show()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=see,window.initDrawers=GK);var Y$=function(){return Y$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Y$.apply(this,arguments)},X$={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},Toe={id:null,override:!0},ree=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=X$),N===void 0&&(N=Toe),this._instanceId=N.id?N.id:g.id,this._tabsEl=g,this._items=w,this._activeTab=E?this.getTab(E.defaultTabId):null,this._options=Y$(Y$({},X$),E),this._initialized=!1,this.init(),Xs.addInstance("Tabs",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(w){w.triggerEl.addEventListener("click",function(E){E.preventDefault(),g.show(w.id)})}))},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){this.destroy(),Xs.removeInstance("Tabs",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getActiveTab=function(){return this._activeTab},p.prototype.setActiveTab=function(g){this._activeTab=g},p.prototype.getTab=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.show=function(g,w){var E,N,V=this;w===void 0&&(w=!1);var K=this.getTab(g);K===this._activeTab&&!w||(this._items.map(function(j){var le,ge;j!==K&&((le=j.triggerEl.classList).remove.apply(le,V._options.activeClasses.split(" ")),(ge=j.triggerEl.classList).add.apply(ge,V._options.inactiveClasses.split(" ")),j.targetEl.classList.add("hidden"),j.triggerEl.setAttribute("aria-selected","false"))}),(E=K.triggerEl.classList).add.apply(E,this._options.activeClasses.split(" ")),(N=K.triggerEl.classList).remove.apply(N,this._options.inactiveClasses.split(" ")),K.triggerEl.setAttribute("aria-selected","true"),K.targetEl.classList.remove("hidden"),this.setActiveTab(K),this._options.onShow(this,K))},p.prototype.updateOnShow=function(g){this._options.onShow=g},p}();function KK(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(p){var g=[],w=p.getAttribute("data-tabs-active-classes"),E=p.getAttribute("data-tabs-inactive-classes"),N=null;p.querySelectorAll('[role="tab"]').forEach(function(V){var K=V.getAttribute("aria-selected")==="true",j={id:V.getAttribute("data-tabs-target"),triggerEl:V,targetEl:document.querySelector(V.getAttribute("data-tabs-target"))};g.push(j),K&&(N=j.id)}),new ree(p,g,{defaultTabId:N,activeClasses:w||X$.activeClasses,inactiveClasses:E||X$.inactiveClasses})})}typeof window<"u"&&(window.Tabs=ree,window.initTabs=KK);var Xy=function(){return Xy=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Xy.apply(this,arguments)},D$=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,V;E<N;E++)(V||!(E in g))&&(V||(V=Array.prototype.slice.call(g,0,E)),V[E]=g[E]);return p.concat(V||Array.prototype.slice.call(g))},J$={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},koe={id:null,override:!0},aee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=J$),N===void 0&&(N=koe),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Xy(Xy({},J$),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Tooltip",this,this._instanceId,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Xs.removeInstance("Tooltip",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){g.hide()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return ZK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Xy(Xy({},g),{modifiers:D$(D$([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Xy(Xy({},g),{modifiers:D$(D$([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function YK(){document.querySelectorAll("[data-tooltip-target]").forEach(function(p){var g=p.getAttribute("data-tooltip-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-tooltip-trigger"),N=p.getAttribute("data-tooltip-placement");new aee(w,p,{placement:N||J$.placement,triggerType:E||J$.triggerType})}else console.error('The tooltip element with id "'.concat(g,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=aee,window.initTooltips=YK);var Jy=function(){return Jy=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Jy.apply(this,arguments)},R$=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,V;E<N;E++)(V||!(E in g))&&(V||(V=Array.prototype.slice.call(g,0,E)),V[E]=g[E]);return p.concat(V||Array.prototype.slice.call(g))},$5={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Aoe={id:null,override:!0},iee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=$5),N===void 0&&(N=Aoe),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Jy(Jy({},$5),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Popover",this,N.id?N.id:this._targetEl.id,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler),g._targetEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler),g._targetEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Xs.removeInstance("Popover",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},100)},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler),g._targetEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler),g._targetEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return ZK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Jy(Jy({},g),{modifiers:R$(R$([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Jy(Jy({},g),{modifiers:R$(R$([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function XK(){document.querySelectorAll("[data-popover-target]").forEach(function(p){var g=p.getAttribute("data-popover-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-popover-trigger"),N=p.getAttribute("data-popover-placement"),V=p.getAttribute("data-popover-offset");new iee(w,p,{placement:N||$5.placement,offset:V?parseInt(V):$5.offset,triggerType:E||$5.triggerType})}else console.error('The popover element with id "'.concat(g,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=iee,window.initPopovers=XK);var Q$=function(){return Q$=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Q$.apply(this,arguments)},TK={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Ooe={id:null,override:!0},cee=function(){function p(g,w,E,N,V){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),N===void 0&&(N=TK),V===void 0&&(V=Ooe),this._instanceId=V.id?V.id:E.id,this._parentEl=g,this._triggerEl=w,this._targetEl=E,this._options=Q$(Q$({},TK),N),this._visible=!1,this._initialized=!1,this.init(),Xs.addInstance("Dial",this,this._instanceId,V.override)}return p.prototype.init=function(){var g=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){g.show()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showEventHandler),g._targetEl.addEventListener(E,g._showEventHandler)}),this._hideEventHandler=function(){g._parentEl.matches(":hover")||g.hide()},w.hideEvents.forEach(function(E){g._parentEl.addEventListener(E,g._hideEventHandler)}),this._initialized=!0}},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showEventHandler),g._targetEl.removeEventListener(E,g._showEventHandler)}),w.hideEvents.forEach(function(E){g._parentEl.removeEventListener(E,g._hideEventHandler)}),this._initialized=!1}},p.prototype.removeInstance=function(){Xs.removeInstance("Dial",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this._visible?this.hide():this.show()},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype._getTriggerEventTypes=function(g){switch(g){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function JK(){document.querySelectorAll("[data-dial-init]").forEach(function(p){var g=p.querySelector("[data-dial-toggle]");if(g){var w=g.getAttribute("data-dial-toggle"),E=document.getElementById(w);if(E){var N=g.getAttribute("data-dial-trigger");new cee(p,g,E,{triggerType:N||TK.triggerType})}else console.error("Dial with id ".concat(w," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(p.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=cee,window.initDials=JK);var e7=function(){return e7=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},e7.apply(this,arguments)},gJ={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},Doe={id:null,override:!0},lee=function(){function p(g,w,E,N,V){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),N===void 0&&(N=gJ),V===void 0&&(V=Doe),this._instanceId=V.id?V.id:g.id,this._targetEl=g,this._incrementEl=w,this._decrementEl=E,this._options=e7(e7({},gJ),N),this._initialized=!1,this.init(),Xs.addInstance("InputCounter",this,this._instanceId,V.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(w){{var E=w.target;/^\d*$/.test(E.value)||(E.value=E.value.replace(/[^\d]/g,"")),g._options.maxValue!==null&&parseInt(E.value)>g._options.maxValue&&(E.value=g._options.maxValue.toString()),g._options.minValue!==null&&parseInt(E.value)<g._options.minValue&&(E.value=g._options.minValue.toString())}},this._incrementClickHandler=function(){g.increment()},this._decrementClickHandler=function(){g.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("InputCounter",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},p.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},p.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},p.prototype.updateOnIncrement=function(g){this._options.onIncrement=g},p.prototype.updateOnDecrement=function(g){this._options.onDecrement=g},p}();function QK(){document.querySelectorAll("[data-input-counter]").forEach(function(p){var g=p.id,w=document.querySelector('[data-input-counter-increment="'+g+'"]'),E=document.querySelector('[data-input-counter-decrement="'+g+'"]'),N=p.getAttribute("data-input-counter-min"),V=p.getAttribute("data-input-counter-max");p?Xs.instanceExists("InputCounter",p.getAttribute("id"))||new lee(p,w||null,E||null,{minValue:N?parseInt(N):null,maxValue:V?parseInt(V):null}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=lee,window.initInputCounters=QK);var t7=function(){return t7=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},t7.apply(this,arguments)},n7={htmlEntities:!1,contentType:"input",onCopy:function(){}},Roe={id:null,override:!0},uee=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=n7),N===void 0&&(N=Roe),this._instanceId=N.id?N.id:w.id,this._triggerEl=g,this._targetEl=w,this._options=t7(t7({},n7),E),this._initialized=!1,this.init(),Xs.addInstance("CopyClipboard",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){g.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Xs.removeInstance("CopyClipboard",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},p.prototype.copy=function(){var g=this.getTargetValue();this._options.htmlEntities&&(g=this.decodeHTML(g));var w=document.createElement("textarea");return w.value=g,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),this._options.onCopy(this),g},p.prototype.decodeHTML=function(g){var w=document.createElement("textarea");return w.innerHTML=g,w.textContent},p.prototype.updateOnCopyCallback=function(g){this._options.onCopy=g},p}();function eY(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(p){var g=p.getAttribute("data-copy-to-clipboard-target"),w=document.getElementById(g),E=p.getAttribute("data-copy-to-clipboard-content-type"),N=p.getAttribute("data-copy-to-clipboard-html-entities");w?Xs.instanceExists("CopyClipboard",w.getAttribute("id"))||new uee(p,w,{htmlEntities:N&&N==="true"?!0:n7.htmlEntities,contentType:E||n7.contentType}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=uee,window.initClipboards=eY);function kK(p,g){(g==null||g>p.length)&&(g=p.length);for(var w=0,E=Array(g);w<g;w++)E[w]=p[w];return E}function Moe(p){if(Array.isArray(p))return p}function Noe(p){if(Array.isArray(p))return kK(p)}function Poe(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function tY(p,g,w){return g=e2(g),$oe(p,dee()?Reflect.construct(g,w||[],e2(p).constructor):g.apply(p,w))}function gS(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function pJ(p,g){for(var w=0;w<g.length;w++){var E=g[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,Voe(E.key),E)}}function pS(p,g,w){return g&&pJ(p.prototype,g),w&&pJ(p,w),Object.defineProperty(p,"prototype",{writable:!1}),p}function Z5(){return Z5=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(p,g,w){var E=Hoe(p,g);if(E){var N=Object.getOwnPropertyDescriptor(E,g);return N.get?N.get.call(arguments.length<3?p:w):N.value}},Z5.apply(null,arguments)}function e2(p){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},e2(p)}function nY(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),g&&AK(p,g)}function dee(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dee=function(){return!!p})()}function Ioe(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function Boe(p,g){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var E,N,V,K,j=[],le=!0,ge=!1;try{if(V=(w=w.call(p)).next,g===0){if(Object(w)!==w)return;le=!1}else for(;!(le=(E=V.call(w)).done)&&(j.push(E.value),j.length!==g);le=!0);}catch(Ce){ge=!0,N=Ce}finally{try{if(!le&&w.return!=null&&(K=w.return(),Object(K)!==K))return}finally{if(ge)throw N}}return j}}function Loe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Foe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $oe(p,g){if(g&&(typeof g=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Poe(p)}function AK(p,g){return AK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w},AK(p,g)}function Rm(p,g){return Moe(p)||Boe(p,g)||fee(p,g)||Loe()}function Hoe(p,g){for(;!{}.hasOwnProperty.call(p,g)&&(p=e2(p))!==null;);return p}function J5(p){return Noe(p)||Ioe(p)||fee(p)||Foe()}function zoe(p,g){if(typeof p!="object"||!p)return p;var w=p[Symbol.toPrimitive];if(w!==void 0){var E=w.call(p,g);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}function Voe(p){var g=zoe(p,"string");return typeof g=="symbol"?g:g+""}function o7(p){"@babel/helpers - typeof";return o7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o7(p)}function fee(p,g){if(p){if(typeof p=="string")return kK(p,g);var w={}.toString.call(p).slice(8,-1);return w==="Object"&&p.constructor&&(w=p.constructor.name),w==="Map"||w==="Set"?Array.from(p):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?kK(p,g):void 0}}function p0(p,g){return Object.prototype.hasOwnProperty.call(p,g)}function oY(p){return p[p.length-1]}function hS(p){for(var g=arguments.length,w=new Array(g>1?g-1:0),E=1;E<g;E++)w[E-1]=arguments[E];return w.forEach(function(N){p.includes(N)||p.push(N)}),p}function cK(p,g){return p?p.split(g):[]}function sY(p,g,w){var E=g===void 0||p>=g,N=w===void 0||p<=w;return E&&N}function mee(p,g,w){return p<g?g:p>w?w:p}function Hk(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",V=Object.keys(w).reduce(function(j,le){var ge=w[le];return typeof ge=="function"&&(ge=ge(E)),"".concat(j," ").concat(le,'="').concat(ge,'"')},p);N+="<".concat(V,"></").concat(p,">");var K=E+1;return K<g?Hk(p,g,w,K,N):N}function rY(p){return p.replace(/>\s+/g,">").replace(/\s+</,"<")}function OK(p){return new Date(p).setHours(0,0,0,0)}function bS(){return new Date().setHours(0,0,0,0)}function Qy(){switch(arguments.length){case 0:return bS();case 1:return OK(arguments.length<=0?void 0:arguments[0])}var p=new Date(0);return p.setFullYear.apply(p,arguments),p.setHours(0,0,0,0)}function Nk(p,g){var w=new Date(p);return w.setDate(w.getDate()+g)}function Uoe(p,g){return Nk(p,g*7)}function s7(p,g){var w=new Date(p),E=w.getMonth()+g,N=E%12;N<0&&(N+=12);var V=w.setMonth(E);return w.getMonth()!==N?w.setDate(0):V}function Pk(p,g){var w=new Date(p),E=w.getMonth(),N=w.setFullYear(w.getFullYear()+g);return E===1&&w.getMonth()===2?w.setDate(0):N}function bJ(p,g){return(p-g+7)%7}function r7(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=new Date(p).getDay();return Nk(p,bJ(g,w)-bJ(E,w))}function Woe(p){var g=r7(p,4,1),w=r7(new Date(g).setMonth(0,4),4,1);return Math.round((g-w)/6048e5)+1}function aS(p,g){var w=new Date(p).getFullYear();return Math.floor(w/g)*g}var DK=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Zoe=/[\s!-/:-@[-`{-~年月日]+/,lK={},vJ={y:function(g,w){return new Date(g).setFullYear(parseInt(w,10))},m:function(g,w,E){var N=new Date(g),V=parseInt(w,10)-1;if(isNaN(V)){if(!w)return NaN;var K=w.toLowerCase(),j=function(ge){return ge.toLowerCase().startsWith(K)};if(V=E.monthsShort.findIndex(j),V<0&&(V=E.months.findIndex(j)),V<0)return NaN}return N.setMonth(V),N.getMonth()!==hee(V)?N.setDate(0):N.getTime()},d:function(g,w){return new Date(g).setDate(parseInt(w,10))}},joe={d:function(g){return g.getDate()},dd:function(g){return M$(g.getDate(),2)},D:function(g,w){return w.daysShort[g.getDay()]},DD:function(g,w){return w.days[g.getDay()]},m:function(g){return g.getMonth()+1},mm:function(g){return M$(g.getMonth()+1,2)},M:function(g,w){return w.monthsShort[g.getMonth()]},MM:function(g,w){return w.months[g.getMonth()]},y:function(g){return g.getFullYear()},yy:function(g){return M$(g.getFullYear(),2).slice(-2)},yyyy:function(g){return M$(g.getFullYear(),4)}};function hee(p){return p>-1?p%12:hee(p+12)}function M$(p,g){return p.toString().padStart(g,"0")}function gee(p){if(typeof p!="string")throw new Error("Invalid date format.");if(p in lK)return lK[p];var g=p.split(DK),w=p.match(new RegExp(DK,"g"));if(g.length===0||!w)throw new Error("Invalid date format.");var E=w.map(function(V){return joe[V]}),N=Object.keys(vJ).reduce(function(V,K){var j=w.find(function(le){return le[0]!=="D"&&le[0].toLowerCase()===K});return j&&V.push(K),V},[]);return lK[p]={parser:function(K,j){var le=K.split(Zoe).reduce(function(ge,Ce,Xe){if(Ce.length>0&&w[Xe]){var Lt=w[Xe][0];Lt==="M"?ge.m=Ce:Lt!=="D"&&(ge[Lt]=Ce)}return ge},{});return N.reduce(function(ge,Ce){var Xe=vJ[Ce](ge,le[Ce],j);return isNaN(Xe)?ge:Xe},bS())},formatter:function(K,j){var le=E.reduce(function(ge,Ce,Xe){return ge+="".concat(g[Xe]).concat(Ce(K,j))},"");return le+=oY(g)}}}function j5(p,g,w){if(p instanceof Date||typeof p=="number"){var E=OK(p);return isNaN(E)?void 0:E}if(p){if(p==="today")return bS();if(g&&g.toValue){var N=g.toValue(p,g,w);return isNaN(N)?void 0:OK(N)}return gee(g).parser(p,w)}}function q5(p,g,w){if(isNaN(p)||!p&&p!==0)return"";var E=typeof p=="number"?new Date(p):p;return g.toDisplay?g.toDisplay(E,g,w):gee(g).formatter(E,w)}var a7=new WeakMap,pee=EventTarget.prototype,yJ=pee.addEventListener,wJ=pee.removeEventListener;function aY(p,g){var w=a7.get(p);w||(w=[],a7.set(p,w)),g.forEach(function(E){yJ.call.apply(yJ,J5(E)),w.push(E)})}function bee(p){var g=a7.get(p);g&&(g.forEach(function(w){wJ.call.apply(wJ,J5(w))}),a7.delete(p))}if(!Event.prototype.composedPath){var qoe=function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];w.push(g);var E;return g.parentNode?E=g.parentNode:g.host?E=g.host:g.defaultView&&(E=g.defaultView),E?p(E,w):w};Event.prototype.composedPath=function(){return qoe(this.target)}}function vee(p,g,w){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=p[E];return g(N)?N:N===w||!N.parentElement?void 0:vee(p,g,w,E+1)}function yee(p,g){var w=typeof g=="function"?g:function(E){return E.matches(g)};return vee(p.composedPath(),w,p.currentTarget)}var I5={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Q5={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},uK=null;function b0(p){return uK==null&&(uK=document.createRange()),uK.createContextualFragment(p)}function H5(p){p.style.display!=="none"&&(p.style.display&&(p.dataset.styleDisplay=p.style.display),p.style.display="none")}function z5(p){p.style.display==="none"&&(p.dataset.styleDisplay?(p.style.display=p.dataset.styleDisplay,delete p.dataset.styleDisplay):p.style.display="")}function i7(p){p.firstChild&&(p.removeChild(p.firstChild),i7(p))}function Goe(p,g){i7(p),g instanceof DocumentFragment?p.appendChild(g):typeof g=="string"?p.appendChild(b0(g)):typeof g.forEach=="function"&&g.forEach(function(w){p.appendChild(w)})}var dK=Q5.language,Koe=Q5.format,Yoe=Q5.weekStart;function CJ(p,g){return p.length<6&&g>=0&&g<7?hS(p,g):p}function SJ(p){return(p+6)%7}function xJ(p,g,w,E){var N=j5(p,g,w);return N!==void 0?N:E}function fK(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,E=parseInt(p,10);return E>=0&&E<=w?E:g}function mK(p,g){var w=Object.assign({},p),E={},N=g.constructor.locales,V=g.config||{},K=V.format,j=V.language,le=V.locale,ge=V.maxDate,Ce=V.maxView,Xe=V.minDate,Lt=V.pickLevel,Zt=V.startView,Pt=V.weekStart;if(w.language){var Ct;if(w.language!==j&&(N[w.language]?Ct=w.language:(Ct=w.language.split("-")[0],N[Ct]===void 0&&(Ct=!1))),delete w.language,Ct){j=E.language=Ct;var Ne=le||N[dK];le=Object.assign({format:Koe,weekStart:Yoe},N[dK]),j!==dK&&Object.assign(le,N[j]),E.locale=le,K===Ne.format&&(K=E.format=le.format),Pt===Ne.weekStart&&(Pt=E.weekStart=le.weekStart,E.weekEnd=SJ(le.weekStart))}}if(w.format){var ln=typeof w.format.toDisplay=="function",xt=typeof w.format.toValue=="function",de=DK.test(w.format);(ln&&xt||de)&&(K=E.format=w.format),delete w.format}var Je=Xe,Dn=ge;if(w.minDate!==void 0&&(Je=w.minDate===null?Qy(0,0,1):xJ(w.minDate,K,le,Je),delete w.minDate),w.maxDate!==void 0&&(Dn=w.maxDate===null?void 0:xJ(w.maxDate,K,le,Dn),delete w.maxDate),Dn<Je?(Xe=E.minDate=Dn,ge=E.maxDate=Je):(Xe!==Je&&(Xe=E.minDate=Je),ge!==Dn&&(ge=E.maxDate=Dn)),w.datesDisabled&&(E.datesDisabled=w.datesDisabled.reduce(function(it,M){var Hn=j5(M,K,le);return Hn!==void 0?hS(it,Hn):it},[]),delete w.datesDisabled),w.defaultViewDate!==void 0){var Gt=j5(w.defaultViewDate,K,le);Gt!==void 0&&(E.defaultViewDate=Gt),delete w.defaultViewDate}if(w.weekStart!==void 0){var re=Number(w.weekStart)%7;isNaN(re)||(Pt=E.weekStart=re,E.weekEnd=SJ(re)),delete w.weekStart}if(w.daysOfWeekDisabled&&(E.daysOfWeekDisabled=w.daysOfWeekDisabled.reduce(CJ,[]),delete w.daysOfWeekDisabled),w.daysOfWeekHighlighted&&(E.daysOfWeekHighlighted=w.daysOfWeekHighlighted.reduce(CJ,[]),delete w.daysOfWeekHighlighted),w.maxNumberOfDates!==void 0){var Xt=parseInt(w.maxNumberOfDates,10);Xt>=0&&(E.maxNumberOfDates=Xt,E.multidate=Xt!==1),delete w.maxNumberOfDates}w.dateDelimiter&&(E.dateDelimiter=String(w.dateDelimiter),delete w.dateDelimiter);var In=Lt;w.pickLevel!==void 0&&(In=fK(w.pickLevel,2),delete w.pickLevel),In!==Lt&&(Lt=E.pickLevel=In);var en=Ce;w.maxView!==void 0&&(en=fK(w.maxView,Ce),delete w.maxView),en=Lt>en?Lt:en,en!==Ce&&(Ce=E.maxView=en);var Fe=Zt;if(w.startView!==void 0&&(Fe=fK(w.startView,Fe),delete w.startView),Fe<Lt?Fe=Lt:Fe>Ce&&(Fe=Ce),Fe!==Zt&&(E.startView=Fe),w.prevArrow){var ve=b0(w.prevArrow);ve.childNodes.length>0&&(E.prevArrow=ve.childNodes),delete w.prevArrow}if(w.nextArrow){var oo=b0(w.nextArrow);oo.childNodes.length>0&&(E.nextArrow=oo.childNodes),delete w.nextArrow}if(w.disableTouchKeyboard!==void 0&&(E.disableTouchKeyboard="ontouchstart"in document&&!!w.disableTouchKeyboard,delete w.disableTouchKeyboard),w.orientation){var at=w.orientation.toLowerCase().split(/\s+/g);E.orientation={x:at.find(function(it){return it==="left"||it==="right"})||"auto",y:at.find(function(it){return it==="top"||it==="bottom"})||"auto"},delete w.orientation}if(w.todayBtnMode!==void 0){switch(w.todayBtnMode){case 0:case 1:E.todayBtnMode=w.todayBtnMode}delete w.todayBtnMode}return Object.keys(w).forEach(function(it){w[it]!==void 0&&p0(Q5,it)&&(E[it]=w[it])}),E}var Xoe=rY(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),Joe=rY(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(Hk("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(Hk("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),Qoe=rY(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(Hk("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),iY=function(){function p(g,w){gS(this,p),Object.assign(this,w,{picker:g,element:b0('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return pS(p,[{key:"init",value:function(w){w.pickLevel!==void 0&&(this.isMinView=this.id===w.pickLevel),this.setOptions(w),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(w,E,N){var V=this.beforeShow(new Date(N));switch(o7(V)){case"boolean":V={enabled:V};break;case"string":V={classes:V}}if(V){if(V.enabled===!1&&(w.classList.add("disabled"),hS(this.disabled,E)),V.classes){var K,j=V.classes.split(/\s+/);(K=w.classList).add.apply(K,J5(j)),j.includes("disabled")&&hS(this.disabled,E)}V.content&&Goe(w,V.content)}}}])}(),ese=function(p){function g(w){return gS(this,g),tY(this,g,[w,{id:0,name:"days",cellClass:"day"}])}return nY(g,p),pS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(N){var V=b0(Joe).firstChild;this.dow=V.firstChild,this.grid=V.lastChild,this.element.appendChild(V)}Z5(e2(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){var N=this,V;if(p0(E,"minDate")&&(this.minDate=E.minDate),p0(E,"maxDate")&&(this.maxDate=E.maxDate),E.datesDisabled&&(this.datesDisabled=E.datesDisabled),E.daysOfWeekDisabled&&(this.daysOfWeekDisabled=E.daysOfWeekDisabled,V=!0),E.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=E.daysOfWeekHighlighted),E.todayHighlight!==void 0&&(this.todayHighlight=E.todayHighlight),E.weekStart!==void 0&&(this.weekStart=E.weekStart,this.weekEnd=E.weekEnd,V=!0),E.locale){var K=this.locale=E.locale;this.dayNames=K.daysMin,this.switchLabelFormat=K.titleFormat,V=!0}if(E.beforeShowDay!==void 0&&(this.beforeShow=typeof E.beforeShowDay=="function"?E.beforeShowDay:void 0),E.calendarWeeks!==void 0)if(E.calendarWeeks&&!this.calendarWeeks){var j=b0(Qoe).firstChild;this.calendarWeeks={element:j,dow:j.firstChild,weeks:j.lastChild},this.element.insertBefore(j,this.element.firstChild)}else this.calendarWeeks&&!E.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);E.showDaysOfWeek!==void 0&&(E.showDaysOfWeek?(z5(this.dow),this.calendarWeeks&&z5(this.calendarWeeks.dow)):(H5(this.dow),this.calendarWeeks&&H5(this.calendarWeeks.dow))),V&&Array.from(this.dow.children).forEach(function(le,ge){var Ce=(N.weekStart+ge)%7;le.textContent=N.dayNames[Ce],le.className=N.daysOfWeekDisabled.includes(Ce)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),N=E.getFullYear(),V=E.getMonth(),K=Qy(N,V,1),j=r7(K,this.weekStart,this.weekStart);this.first=K,this.last=Qy(N,V+1,0),this.start=j,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,N=E.dates,V=E.rangepicker;this.selected=N,V&&(this.range=V.dates)}},{key:"render",value:function(){var E=this;this.today=this.todayHighlight?bS():void 0,this.disabled=J5(this.datesDisabled);var N=q5(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(N),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var V=r7(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(K,j){K.textContent=Woe(Uoe(V,j))})}Array.from(this.grid.children).forEach(function(K,j){var le=K.classList,ge=Nk(E.start,j),Ce=new Date(ge),Xe=Ce.getDay();if(K.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),K.dataset.date=ge,K.textContent=Ce.getDate(),ge<E.first?le.add("prev","text-gray-500","dark:text-white"):ge>E.last&&le.add("next","text-gray-500","dark:text-white"),E.today===ge&&le.add("today","bg-gray-100","dark:bg-gray-600"),(ge<E.minDate||ge>E.maxDate||E.disabled.includes(ge))&&(le.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),le.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),E.daysOfWeekDisabled.includes(Xe)&&(le.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),le.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),hS(E.disabled,ge)),E.daysOfWeekHighlighted.includes(Xe)&&le.add("highlighted"),E.range){var Lt=Rm(E.range,2),Zt=Lt[0],Pt=Lt[1];ge>Zt&&ge<Pt&&(le.add("range","bg-gray-200","dark:bg-gray-600"),le.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),ge===Zt&&(le.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),le.remove("rounded-lg","rounded-r-lg")),ge===Pt&&(le.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),le.remove("rounded-lg","rounded-l-lg"))}E.selected.includes(ge)&&(le.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),le.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),ge===E.focused&&le.add("focused"),E.beforeShow&&E.performBeforeHook(K,ge,ge)})}},{key:"refresh",value:function(){var E=this,N=this.range||[],V=Rm(N,2),K=V[0],j=V[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(le){le.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),le.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(le){var ge=Number(le.dataset.date),Ce=le.classList;Ce.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),ge>K&&ge<j&&(Ce.add("range","bg-gray-200","dark:bg-gray-600"),Ce.remove("rounded-lg")),ge===K&&(Ce.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),Ce.remove("rounded-lg")),ge===j&&(Ce.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),Ce.remove("rounded-lg")),E.selected.includes(ge)&&(Ce.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ce.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),ge===E.focused&&Ce.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(N){N.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(iY);function EJ(p,g){if(!(!p||!p[0]||!p[1])){var w=Rm(p,2),E=Rm(w[0],2),N=E[0],V=E[1],K=Rm(w[1],2),j=K[0],le=K[1];if(!(N>g||j<g))return[N===g?V:-1,j===g?le:12]}}var tse=function(p){function g(w){return gS(this,g),tY(this,g,[w,{id:1,name:"months",cellClass:"month"}])}return nY(g,p),pS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;N&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(b0(Hk("span",12,{"data-month":function(K){return K}})))),Z5(e2(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(E.locale&&(this.monthNames=E.locale.monthsShort),p0(E,"minDate"))if(E.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var N=new Date(E.minDate);this.minYear=N.getFullYear(),this.minMonth=N.getMonth(),this.minDate=N.setDate(1)}if(p0(E,"maxDate"))if(E.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var V=new Date(E.maxDate);this.maxYear=V.getFullYear(),this.maxMonth=V.getMonth(),this.maxDate=Qy(this.maxYear,this.maxMonth+1,0)}E.beforeShowMonth!==void 0&&(this.beforeShow=typeof E.beforeShowMonth=="function"?E.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate);this.year=E.getFullYear(),this.focused=E.getMonth()}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,N=E.dates,V=E.rangepicker;this.selected=N.reduce(function(K,j){var le=new Date(j),ge=le.getFullYear(),Ce=le.getMonth();return K[ge]===void 0?K[ge]=[Ce]:hS(K[ge],Ce),K},{}),V&&V.dates&&(this.range=V.dates.map(function(K){var j=new Date(K);return isNaN(j)?void 0:[j.getFullYear(),j.getMonth()]}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var N=this.selected[this.year]||[],V=this.year<this.minYear||this.year>this.maxYear,K=this.year===this.minYear,j=this.year===this.maxYear,le=EJ(this.range,this.year);Array.from(this.grid.children).forEach(function(ge,Ce){var Xe=ge.classList,Lt=Qy(E.year,Ce,1);if(ge.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(ge.dataset.date=Lt),ge.textContent=E.monthNames[Ce],(V||K&&Ce<E.minMonth||j&&Ce>E.maxMonth)&&Xe.add("disabled"),le){var Zt=Rm(le,2),Pt=Zt[0],Ct=Zt[1];Ce>Pt&&Ce<Ct&&Xe.add("range"),Ce===Pt&&Xe.add("range-start"),Ce===Ct&&Xe.add("range-end")}N.includes(Ce)&&(Xe.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Xe.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Ce===E.focused&&Xe.add("focused"),E.beforeShow&&E.performBeforeHook(ge,Ce,Lt)})}},{key:"refresh",value:function(){var E=this,N=this.selected[this.year]||[],V=EJ(this.range,this.year)||[],K=Rm(V,2),j=K[0],le=K[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ge){ge.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),ge.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(ge,Ce){var Xe=ge.classList;Ce>j&&Ce<le&&Xe.add("range"),Ce===j&&Xe.add("range-start"),Ce===le&&Xe.add("range-end"),N.includes(Ce)&&(Xe.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Xe.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Ce===E.focused&&Xe.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(E){E.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(iY);function nse(p){return J5(p).reduce(function(g,w,E){return g+=E?w:w.toUpperCase()},"")}var _J=function(p){function g(w,E){return gS(this,g),tY(this,g,[w,E])}return nY(g,p),pS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;N&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(nse(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(b0(Hk("span",12)))),Z5(e2(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(p0(E,"minDate")&&(E.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=aS(E.minDate,this.step),this.minDate=Qy(this.minYear,0,1))),p0(E,"maxDate")&&(E.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=aS(E.maxDate,this.step),this.maxDate=Qy(this.maxYear,11,31))),E[this.beforeShowOption]!==void 0){var N=E[this.beforeShowOption];this.beforeShow=typeof N=="function"?N:void 0}}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),N=aS(E,this.navStep),V=N+9*this.step;this.first=N,this.last=V,this.start=N-this.step,this.focused=aS(E,this.step)}},{key:"updateSelection",value:function(){var E=this,N=this.picker.datepicker,V=N.dates,K=N.rangepicker;this.selected=V.reduce(function(j,le){return hS(j,aS(le,E.step))},[]),K&&K.dates&&(this.range=K.dates.map(function(j){if(j!==void 0)return aS(j,E.step)}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(N,V){var K=N.classList,j=E.start+V*E.step,le=Qy(j,0,1);if(N.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(N.dataset.date=le),N.textContent=N.dataset.year=j,V===0?K.add("prev"):V===11&&K.add("next"),(j<E.minYear||j>E.maxYear)&&K.add("disabled"),E.range){var ge=Rm(E.range,2),Ce=ge[0],Xe=ge[1];j>Ce&&j<Xe&&K.add("range"),j===Ce&&K.add("range-start"),j===Xe&&K.add("range-end")}E.selected.includes(j)&&(K.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),K.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),j===E.focused&&K.add("focused"),E.beforeShow&&E.performBeforeHook(N,j,le)})}},{key:"refresh",value:function(){var E=this,N=this.range||[],V=Rm(N,2),K=V[0],j=V[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(le){le.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(le){var ge=Number(le.textContent),Ce=le.classList;ge>K&&ge<j&&Ce.add("range"),ge===K&&Ce.add("range-start"),ge===j&&Ce.add("range-end"),E.selected.includes(ge)&&(Ce.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ce.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),ge===E.focused&&Ce.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(N){N.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(iY);function Ik(p,g){var w={date:p.getDate(),viewDate:new Date(p.picker.viewDate),viewId:p.picker.currentView.id,datepicker:p};p.element.dispatchEvent(new CustomEvent(g,{detail:w}))}function c7(p,g){var w=p.config,E=w.minDate,N=w.maxDate,V=p.picker,K=V.currentView,j=V.viewDate,le;switch(K.id){case 0:le=s7(j,g);break;case 1:le=Pk(j,g);break;default:le=Pk(j,g*K.navStep)}le=mee(le,E,N),p.picker.changeFocus(le).render()}function wee(p){var g=p.picker.currentView.id;g!==p.config.maxView&&p.picker.changeView(g+1).render()}function Cee(p){p.config.updateOnBlur?p.update({autohide:!0}):(p.refresh("input"),p.hide())}function TJ(p,g){var w=p.picker,E=new Date(w.viewDate),N=w.currentView.id,V=N===1?s7(E,g-E.getMonth()):Pk(E,g-E.getFullYear());w.changeFocus(V).changeView(N-1).render()}function ose(p){var g=p.picker,w=bS();if(p.config.todayBtnMode===1){if(p.config.autohide){p.setDate(w);return}p.setDate(w,{render:!1}),g.update()}g.viewDate!==w&&g.changeFocus(w),g.changeView(0).render()}function sse(p){p.setDate({clear:!0})}function rse(p){wee(p)}function ase(p){c7(p,-1)}function ise(p){c7(p,1)}function cse(p,g){var w=yee(g,".datepicker-cell");if(!(!w||w.classList.contains("disabled"))){var E=p.picker.currentView,N=E.id,V=E.isMinView;V?p.setDate(Number(w.dataset.date)):N===1?TJ(p,Number(w.dataset.month)):TJ(p,Number(w.dataset.year))}}function lse(p){!p.inline&&!p.config.disableTouchKeyboard&&p.inputField.focus()}function kJ(p,g){if(g.title!==void 0&&(g.title?(p.controls.title.textContent=g.title,z5(p.controls.title)):(p.controls.title.textContent="",H5(p.controls.title))),g.prevArrow){var w=p.controls.prevBtn;i7(w),g.prevArrow.forEach(function(j){w.appendChild(j.cloneNode(!0))})}if(g.nextArrow){var E=p.controls.nextBtn;i7(E),g.nextArrow.forEach(function(j){E.appendChild(j.cloneNode(!0))})}if(g.locale&&(p.controls.todayBtn.textContent=g.locale.today,p.controls.clearBtn.textContent=g.locale.clear),g.todayBtn!==void 0&&(g.todayBtn?z5(p.controls.todayBtn):H5(p.controls.todayBtn)),p0(g,"minDate")||p0(g,"maxDate")){var N=p.datepicker.config,V=N.minDate,K=N.maxDate;p.controls.todayBtn.disabled=!sY(bS(),V,K)}g.clearBtn!==void 0&&(g.clearBtn?z5(p.controls.clearBtn):H5(p.controls.clearBtn))}function AJ(p){var g=p.dates,w=p.config,E=g.length>0?oY(g):w.defaultViewDate;return mee(E,w.minDate,w.maxDate)}function OJ(p,g){var w=new Date(p.viewDate),E=new Date(g),N=p.currentView,V=N.id,K=N.year,j=N.first,le=N.last,ge=E.getFullYear();switch(p.viewDate=g,ge!==w.getFullYear()&&Ik(p.datepicker,"changeYear"),E.getMonth()!==w.getMonth()&&Ik(p.datepicker,"changeMonth"),V){case 0:return g<j||g>le;case 1:return ge!==K;default:return ge<j||ge>le}}function hK(p){return window.getComputedStyle(p).direction}var use=function(){function p(g){gS(this,p),this.datepicker=g;var w=Xoe.replace(/%buttonClass%/g,g.config.buttonClass),E=this.element=b0(w).firstChild,N=Rm(E.firstChild.children,3),V=N[0],K=N[1],j=N[2],le=V.firstElementChild,ge=Rm(V.lastElementChild.children,3),Ce=ge[0],Xe=ge[1],Lt=ge[2],Zt=Rm(j.firstChild.children,2),Pt=Zt[0],Ct=Zt[1],Ne={title:le,prevBtn:Ce,viewSwitch:Xe,nextBtn:Lt,todayBtn:Pt,clearBtn:Ct};this.main=K,this.controls=Ne;var ln=g.inline?"inline":"dropdown";E.classList.add("datepicker-".concat(ln)),ln==="dropdown"&&E.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),kJ(this,g.config),this.viewDate=AJ(g),aY(g,[[E,"click",lse.bind(null,g),{capture:!0}],[K,"click",cse.bind(null,g)],[Ne.viewSwitch,"click",rse.bind(null,g)],[Ne.prevBtn,"click",ase.bind(null,g)],[Ne.nextBtn,"click",ise.bind(null,g)],[Ne.todayBtn,"click",ose.bind(null,g)],[Ne.clearBtn,"click",sse.bind(null,g)]]),this.views=[new ese(this),new tse(this),new _J(this,{id:2,name:"years",cellClass:"year",step:1}),new _J(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[g.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),g.config.container.appendChild(this.element)}return pS(p,[{key:"setOptions",value:function(w){kJ(this,w),this.views.forEach(function(E){E.init(w,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var w=this.datepicker;if(!w.inline){var E=hK(w.inputField);E!==hK(w.config.container)?this.element.dir=E:this.element.dir&&this.element.removeAttribute("dir"),this.place(),w.config.disableTouchKeyboard&&w.inputField.blur()}Ik(w,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,Ik(this.datepicker,"hide"))}},{key:"place",value:function(){var w=this.element,E=w.classList,N=w.style,V=this.datepicker,K=V.config,j=V.inputField,le=K.container,ge=this.element.getBoundingClientRect(),Ce=ge.width,Xe=ge.height,Lt=le.getBoundingClientRect(),Zt=Lt.left,Pt=Lt.top,Ct=Lt.width,Ne=j.getBoundingClientRect(),ln=Ne.left,xt=Ne.top,de=Ne.width,Je=Ne.height,Dn=K.orientation,Gt=Dn.x,re=Dn.y,Xt,In,en;le===document.body?(Xt=window.scrollY,In=ln+window.scrollX,en=xt+Xt):(Xt=le.scrollTop,In=ln-Zt,en=xt-Pt+Xt),Gt==="auto"&&(In<0?(Gt="left",In=10):In+Ce>Ct?Gt="right":Gt=hK(j)==="rtl"?"right":"left"),Gt==="right"&&(In-=Ce-de),re==="auto"&&(re=en-Xe<Xt?"bottom":"top"),re==="top"?en-=Xe:en+=Je,E.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),E.add("datepicker-orient-".concat(re),"datepicker-orient-".concat(Gt)),N.top=en&&"".concat(en,"px"),N.left=In&&"".concat(In,"px")}},{key:"setViewSwitchLabel",value:function(w){this.controls.viewSwitch.textContent=w}},{key:"setPrevBtnDisabled",value:function(w){this.controls.prevBtn.disabled=w}},{key:"setNextBtnDisabled",value:function(w){this.controls.nextBtn.disabled=w}},{key:"changeView",value:function(w){var E=this.currentView,N=this.views[w];return N.id!==E.id&&(this.currentView=N,this._renderMethod="render",Ik(this.datepicker,"changeView"),this.main.replaceChild(N.element,E.element)),this}},{key:"changeFocus",value:function(w){return this._renderMethod=OJ(this,w)?"render":"refreshFocus",this.views.forEach(function(E){E.updateFocus()}),this}},{key:"update",value:function(){var w=AJ(this.datepicker);return this._renderMethod=OJ(this,w)?"render":"refresh",this.views.forEach(function(E){E.updateFocus(),E.updateSelection()}),this}},{key:"render",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,E=w&&this._renderMethod||"render";delete this._renderMethod,this.currentView[E]()}}])}();function See(p,g,w,E,N,V){if(sY(p,N,V)){if(E(p)){var K=g(p,w);return See(K,g,w,E,N,V)}return p}}function N$(p,g,w,E){var N=p.picker,V=N.currentView,K=V.step||1,j=N.viewDate,le,ge;switch(V.id){case 0:E?j=Nk(j,w*7):g.ctrlKey||g.metaKey?j=Pk(j,w):j=Nk(j,w),le=Nk,ge=function(Xe){return V.disabled.includes(Xe)};break;case 1:j=s7(j,E?w*4:w),le=s7,ge=function(Xe){var Lt=new Date(Xe),Zt=V.year,Pt=V.disabled;return Lt.getFullYear()===Zt&&Pt.includes(Lt.getMonth())};break;default:j=Pk(j,w*(E?4:1)*K),le=Pk,ge=function(Xe){return V.disabled.includes(aS(Xe,K))}}j=See(j,le,w<0?-K:K,ge,V.minDate,V.maxDate),j!==void 0&&N.changeFocus(j).render()}function dse(p,g){if(g.key==="Tab"){Cee(p);return}var w=p.picker,E=w.currentView,N=E.id,V=E.isMinView;if(w.active)if(p.editMode)switch(g.key){case"Escape":w.hide();break;case"Enter":p.exitEditMode({update:!0,autohide:p.config.autohide});break;default:return}else switch(g.key){case"Escape":w.hide();break;case"ArrowLeft":if(g.ctrlKey||g.metaKey)c7(p,-1);else if(g.shiftKey){p.enterEditMode();return}else N$(p,g,-1,!1);break;case"ArrowRight":if(g.ctrlKey||g.metaKey)c7(p,1);else if(g.shiftKey){p.enterEditMode();return}else N$(p,g,1,!1);break;case"ArrowUp":if(g.ctrlKey||g.metaKey)wee(p);else if(g.shiftKey){p.enterEditMode();return}else N$(p,g,-1,!0);break;case"ArrowDown":if(g.shiftKey&&!g.ctrlKey&&!g.metaKey){p.enterEditMode();return}N$(p,g,1,!0);break;case"Enter":V?p.setDate(w.viewDate):w.changeView(N-1).render();break;case"Backspace":case"Delete":p.enterEditMode();return;default:g.key.length===1&&!g.ctrlKey&&!g.metaKey&&p.enterEditMode();return}else switch(g.key){case"ArrowDown":case"Escape":w.show();break;case"Enter":p.update();break;default:return}g.preventDefault(),g.stopPropagation()}function fse(p){p.config.showOnFocus&&!p._showing&&p.show()}function mse(p,g){var w=g.target;(p.picker.active||p.config.showOnClick)&&(w._active=w===document.activeElement,w._clicking=setTimeout(function(){delete w._active,delete w._clicking},2e3))}function hse(p,g){var w=g.target;w._clicking&&(clearTimeout(w._clicking),delete w._clicking,w._active&&p.enterEditMode(),delete w._active,p.config.showOnClick&&p.show())}function gse(p,g){g.clipboardData.types.includes("text/plain")&&p.enterEditMode()}function pse(p,g){var w=p.element;if(w===document.activeElement){var E=p.picker.element;yee(g,function(N){return N===w||N===E})||Cee(p)}}function xee(p,g){return p.map(function(w){return q5(w,g.format,g.locale)}).join(g.dateDelimiter)}function Eee(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,E=p.config,N=p.dates,V=p.rangepicker;if(g.length===0)return w?[]:void 0;var K=V&&p===V.datepickers[1],j=g.reduce(function(le,ge){var Ce=j5(ge,E.format,E.locale);if(Ce===void 0)return le;if(E.pickLevel>0){var Xe=new Date(Ce);E.pickLevel===1?Ce=K?Xe.setMonth(Xe.getMonth()+1,0):Xe.setDate(1):Ce=K?Xe.setFullYear(Xe.getFullYear()+1,0,0):Xe.setMonth(0,1)}return sY(Ce,E.minDate,E.maxDate)&&!le.includes(Ce)&&!E.datesDisabled.includes(Ce)&&!E.daysOfWeekDisabled.includes(new Date(Ce).getDay())&&le.push(Ce),le},[]);if(j.length!==0)return E.multidate&&!w&&(j=j.reduce(function(le,ge){return N.includes(ge)||le.push(ge),le},N.filter(function(le){return!j.includes(le)}))),E.maxNumberOfDates&&j.length>E.maxNumberOfDates?j.slice(E.maxNumberOfDates*-1):j}function l7(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=p.config,N=p.picker,V=p.inputField;if(g&2){var K=N.active?E.pickLevel:E.startView;N.update().changeView(K).render(w)}g&1&&V&&(V.value=xee(p.dates,E))}function DJ(p,g,w){var E=w.clear,N=w.render,V=w.autohide;N===void 0&&(N=!0),N?V===void 0&&(V=p.config.autohide):V=!1;var K=Eee(p,g,E);K&&(K.toString()!==p.dates.toString()?(p.dates=K,l7(p,N?3:1),Ik(p,"changeDate")):l7(p,1),V&&p.hide())}var $$=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;gS(this,p),g.datepicker=this,this.element=g;var N=this.config=Object.assign({buttonClass:w.buttonClass&&String(w.buttonClass)||"button",container:document.body,defaultViewDate:bS(),maxDate:void 0,minDate:void 0},mK(Q5,this));this._options=w,Object.assign(N,mK(w,this));var V=this.inline=g.tagName!=="INPUT",K,j;if(V)N.container=g,j=cK(g.dataset.date,N.dateDelimiter),delete g.dataset.date;else{var le=w.container?document.querySelector(w.container):null;le&&(N.container=le),K=this.inputField=g,K.classList.add("datepicker-input"),j=cK(K.value,N.dateDelimiter)}if(E){var ge=E.inputs.indexOf(K),Ce=E.datepickers;if(ge<0||ge>1||!Array.isArray(Ce))throw Error("Invalid rangepicker object.");Ce[ge]=this,Object.defineProperty(this,"rangepicker",{get:function(){return E}})}this.dates=[];var Xe=Eee(this,j);Xe&&Xe.length>0&&(this.dates=Xe),K&&(K.value=xee(this.dates,N));var Lt=this.picker=new use(this);if(V)this.show();else{var Zt=pse.bind(null,this),Pt=[[K,"keydown",dse.bind(null,this)],[K,"focus",fse.bind(null,this)],[K,"mousedown",mse.bind(null,this)],[K,"click",hse.bind(null,this)],[K,"paste",gse.bind(null,this)],[document,"mousedown",Zt],[document,"touchstart",Zt],[window,"resize",Lt.place.bind(Lt)]];aY(this,Pt)}}return pS(p,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(w){var E=this.picker,N=mK(w,this);Object.assign(this._options,w),Object.assign(this.config,N),E.setOptions(N),l7(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),bee(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,N=E?function(V){return q5(V,E,w.config.locale)}:function(V){return new Date(V)};if(this.config.multidate)return this.dates.map(N);if(this.dates.length>0)return N(this.dates[0])}},{key:"setDate",value:function(){for(var w=arguments.length,E=new Array(w),N=0;N<w;N++)E[N]=arguments[N];var V=[].concat(E),K={},j=oY(E);o7(j)==="object"&&!Array.isArray(j)&&!(j instanceof Date)&&j&&Object.assign(K,V.pop());var le=Array.isArray(V[0])?V[0]:V;DJ(this,le,K)}},{key:"update",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var E={clear:!0,autohide:!!(w&&w.autohide)},N=cK(this.inputField.value,this.config.dateDelimiter);DJ(this,N,E)}}},{key:"refresh",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;w&&typeof w!="string"&&(E=w,w=void 0);var N;w==="picker"?N=2:w==="input"?N=1:N=3,l7(this,N,!E)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var E=Object.assign({update:!1},w);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),E.update&&this.update(E)}}}],[{key:"formatDate",value:function(w,E,N){return q5(w,E,N&&I5[N]||I5.en)}},{key:"parseDate",value:function(w,E,N){return j5(w,E,N&&I5[N]||I5.en)}},{key:"locales",get:function(){return I5}}])}();function RJ(p){var g=Object.assign({},p);return delete g.inputs,delete g.allowOneSidedRange,delete g.maxNumberOfDates,g}function MJ(p,g,w,E){aY(p,[[w,"changeDate",g]]),new $$(w,E,p)}function B5(p,g){if(!p._updating){p._updating=!0;var w=g.target;if(w.datepicker!==void 0){var E=p.datepickers,N={render:!1},V=p.inputs.indexOf(w),K=V===0?1:0,j=E[V].dates[0],le=E[K].dates[0];j!==void 0&&le!==void 0?V===0&&j>le?(E[0].setDate(le,N),E[1].setDate(j,N)):V===1&&j<le&&(E[0].setDate(j,N),E[1].setDate(le,N)):p.allowOneSidedRange||(j!==void 0||le!==void 0)&&(N.clear=!0,E[K].setDate(E[V].dates,N)),E[0].picker.update().render(),E[1].picker.update().render(),delete p._updating}}}var gK=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gS(this,p);var E=Array.isArray(w.inputs)?w.inputs:Array.from(g.querySelectorAll("input"));if(!(E.length<2)){g.rangepicker=this,this.element=g,this.inputs=E.slice(0,2),this.allowOneSidedRange=!!w.allowOneSidedRange;var N=B5.bind(null,this),V=RJ(w),K=[];Object.defineProperty(this,"datepickers",{get:function(){return K}}),MJ(this,N,this.inputs[0],V),MJ(this,N,this.inputs[1],V),Object.freeze(K),K[0].dates.length>0?B5(this,{target:this.inputs[0]}):K[1].dates.length>0&&B5(this,{target:this.inputs[1]})}}return pS(p,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(w){this.allowOneSidedRange=!!w.allowOneSidedRange;var E=RJ(w);this.datepickers[0].setOptions(E),this.datepickers[1].setOptions(E)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),bee(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,N=E?function(V){return q5(V,E,w.datepickers[0].config.locale)}:function(V){return new Date(V)};return this.dates.map(function(V){return V===void 0?V:N(V)})}},{key:"setDates",value:function(w,E){var N=Rm(this.datepickers,2),V=N[0],K=N[1],j=this.dates;this._updating=!0,V.setDate(w),K.setDate(E),delete this._updating,K.dates[0]!==j[1]?B5(this,{target:this.inputs[1]}):V.dates[0]!==j[0]&&B5(this,{target:this.inputs[0]})}}])}(),u7=function(){return u7=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},u7.apply(this,arguments)},Eh={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},bse={id:null,override:!0},_ee=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=Eh),E===void 0&&(E=bse),this._instanceId=E.id?E.id:g.id,this._datepickerEl=g,this._datepickerInstance=null,this._options=u7(u7({},Eh),w),this._initialized=!1,this.init(),Xs.addInstance("Datepicker",this,this._instanceId,E.override)}return p.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new gK(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new $$(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},p.prototype.removeInstance=function(){this.destroy(),Xs.removeInstance("Datepicker",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getDatepickerInstance=function(){return this._datepickerInstance},p.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof gK)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof $$)return this._datepickerInstance.getDate()},p.prototype.setDate=function(g){if(this._options.rangePicker&&this._datepickerInstance instanceof gK)return this._datepickerInstance.setDates(g);if(!this._options.rangePicker&&this._datepickerInstance instanceof $$)return this._datepickerInstance.setDate(g)},p.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},p.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},p.prototype._getDatepickerOptions=function(g){var w={};return g.buttons&&(w.todayBtn=!0,w.clearBtn=!0,g.autoSelectToday&&(w.todayBtnMode=1)),g.autohide&&(w.autohide=!0),g.format&&(w.format=g.format),g.maxDate&&(w.maxDate=g.maxDate),g.minDate&&(w.minDate=g.minDate),g.orientation&&(w.orientation=g.orientation),g.title&&(w.title=g.title),g.language&&(w.language=g.language),w},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function cY(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(p){if(p){var g=p.hasAttribute("datepicker-buttons"),w=p.hasAttribute("datepicker-autoselect-today"),E=p.hasAttribute("datepicker-autohide"),N=p.getAttribute("datepicker-format"),V=p.getAttribute("datepicker-max-date"),K=p.getAttribute("datepicker-min-date"),j=p.getAttribute("datepicker-orientation"),le=p.getAttribute("datepicker-title"),ge=p.getAttribute("datepicker-language"),Ce=p.hasAttribute("date-rangepicker");new _ee(p,{buttons:g||Eh.buttons,autoSelectToday:w||Eh.autoSelectToday,autohide:E||Eh.autohide,format:N||Eh.format,maxDate:V||Eh.maxDate,minDate:K||Eh.minDate,orientation:j||Eh.orientation,title:le||Eh.title,language:ge||Eh.language,rangePicker:Ce||Eh.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=_ee,window.initDatepickers=cY);function vse(){PK(),IK(),BK(),LK(),jK(),qK(),GK(),KK(),YK(),XK(),JK(),QK(),eY(),cY()}typeof window<"u"&&(window.initFlowbite=vse);var yse=new fne("load",[PK,IK,BK,LK,jK,qK,GK,KK,YK,XK,JK,QK,eY,cY]);yse.init();var pK={exports:{}},NJ;function wse(){return NJ||(NJ=1,function(p){(function(){var g=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},w=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},E=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},N=function(e,n){return V(function(o,r){return e.eq(n(o),n(r))})},V=function(e){return{eq:e}},K=V(function(e,n){return e===n}),j=K,le=function(e){return V(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},ge=function(e,n){return N(le(e),function(o){return E(o,n)})},Ce=function(e){return V(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!ge(j).eq(r,i))return!1;for(var u=r.length,m=0;m<u;m++){var y=r[m];if(!e.eq(n[y],o[y]))return!1}return!0})},Xe=V(function(e,n){if(e===n)return!0;var o=g(e),r=g(n);return o!==r?!1:w(o)?e===n:o==="array"?le(Xe).eq(e,n):o==="object"?Ce(Xe).eq(e,n):!1});const Lt=Object.getPrototypeOf,Zt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Pt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Zt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Ct=e=>n=>Pt(n)===e,Ne=e=>n=>typeof n===e,ln=e=>n=>e===n,xt=(e,n)=>Je(e)&&Zt(e,n,(o,r)=>Lt(o)===r),de=Ct("string"),Je=Ct("object"),Dn=e=>xt(e,Object),Gt=Ct("array"),re=ln(null),Xt=Ne("boolean"),In=ln(void 0),en=e=>e==null,Fe=e=>!en(e),ve=Ne("function"),oo=Ne("number"),at=(e,n)=>{if(Gt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},it=()=>{},M=(e,n)=>(...o)=>e(n.apply(null,o)),Hn=(e,n)=>o=>e(n(o)),wt=e=>()=>e,Eo=e=>e,yn=(e,n)=>e===n;function Ae(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const yt=e=>n=>!e(n),Mn=e=>()=>{throw new Error(e)},fn=e=>e(),io=e=>{e()},$e=wt(!1),gt=wt(!0);class W{constructor(n,o){this.tag=n,this.value=o}static some(n){return new W(!0,n)}static none(){return W.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?W.some(n(this.value)):W.none()}bind(n){return this.tag?n(this.value):W.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:W.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Fe(n)?W.some(n):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const Hs=Array.prototype.slice,to=Array.prototype.indexOf,To=Array.prototype.push,zo=(e,n)=>to.call(e,n),gi=(e,n)=>{const o=zo(e,n);return o===-1?W.none():W.some(o)},et=(e,n)=>zo(e,n)>-1,_t=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},dt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},xe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},Oo=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Do=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const m=e[i];(n(m,i)?o:r).push(m)}return{pass:o,fail:r}},Kt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},ls=(e,n,o)=>(Oo(e,(r,i)=>{o=n(o,r,i)}),o),Fo=(e,n,o)=>(xe(e,(r,i)=>{o=n(o,r,i)}),o),zr=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return W.some(u);if(o(u,r))break}return W.none()},Vo=(e,n)=>zr(e,n,$e),zs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return W.some(o)}return W.none()},Xa=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Gt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);To.apply(n,e[o])}return n},_s=(e,n)=>Xa(dt(e,n)),Ss=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},xs=e=>{const n=Hs.call(e,0);return n.reverse(),n},Yr=(e,n)=>Kt(e,o=>!et(n,o)),Ts=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Ko=(e,n)=>{const o=Hs.call(e,0);return o.sort(n),o},Mc=(e,n)=>n>=0&&n<e.length?W.some(e[n]):W.none(),lo=e=>Mc(e,0),gs=e=>Mc(e,e.length-1),Dr=ve(Array.from)?Array.from:e=>Hs.call(e),Pi=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return W.none()},qi=(e,n)=>{const o=[],r=ve(n)?i=>_t(o,u=>n(u,i)):i=>et(o,i);for(let i=0,u=e.length;i<u;i++){const m=e[i];r(m)||o.push(m)}return o},ts=Object.keys,Zc=Object.hasOwnProperty,Tt=(e,n)=>{const o=ts(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],m=e[u];n(m,u)}},go=(e,n)=>Vr(e,(o,r)=>({k:r,v:n(o,r)})),Vr=(e,n)=>{const o={};return Tt(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Ur=e=>(n,o)=>{e[o]=n},Ba=(e,n,o,r)=>{Tt(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},Ja=(e,n)=>{const o={},r={};return Ba(e,n,Ur(o),Ur(r)),{t:o,f:r}},Qo=(e,n)=>{const o={};return Ba(e,n,Ur(o),it),o},La=(e,n)=>{const o=[];return Tt(e,(r,i)=>{o.push(n(r,i))}),o},Ii=e=>La(e,Eo),Yo=(e,n)=>En(e,n)?W.from(e[n]):W.none(),En=(e,n)=>Zc.call(e,n),or=(e,n)=>En(e,n)&&e[n]!==void 0&&e[n]!==null,Qa=(e,n,o=Xe)=>Ce(o).eq(e,n),ll=e=>{const n={};return xe(e,o=>{n[o]={}}),ts(n)},ul=e=>e.length!==void 0,vs=Array.isArray,wr=e=>{if(vs(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Vs=(e,n,o)=>{if(!e)return!1;if(o=o||e,ul(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(En(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},xa=(e,n)=>{const o=[];return Vs(e,(r,i)=>{o.push(n(r,i,e))}),o},Nc=(e,n)=>{const o=[];return Vs(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},Rr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},pe=(e,n,o,r)=>{let i=In(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},fe=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Ve=e=>e[e.length-1],Ge=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Cn=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,m=e.isiOS()||e.isAndroid(),y=m||r("(pointer:coarse)"),x=i||!u&&m&&r("(min-device-width:768px)"),A=u||m&&!x,L=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,$=!A&&!x&&!L;return{isiPad:wt(i),isiPhone:wt(u),isTablet:wt(x),isPhone:wt(A),isTouch:wt(y),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:wt(L),isDesktop:wt($)}},Ln=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Qn=(e,n)=>{const o=Ln(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return Ke(r(1),r(2))},Os=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?lt():Qn(e,o)},lt=()=>Ke(0,0),Ke=(e,n)=>({major:e,minor:n}),sr={nu:Ke,detect:Os,unknown:lt},Cr=(e,n)=>Pi(n.brands,o=>{const r=o.brand.toLowerCase();return Vo(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:sr.nu(parseInt(o.version,10),0)}))}),ga=(e,n)=>{const o=String(n).toLowerCase();return Vo(e,r=>r.search(o))},es=(e,n)=>ga(e,n).map(o=>{const r=sr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),jc=(e,n)=>ga(e,n).map(o=>{const r=sr.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Xr=(e,n)=>e.substring(n),Ea=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ms=(e,n)=>us(e,n)?Xr(e,n.length):e,ns=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?In(r)?!0:i+n.length<=r:!1},us=(e,n)=>Ea(e,n,0),Wr=(e,n)=>Ea(e,n,e.length-n.length),mc=e=>n=>n.replace(e,""),Ns=mc(/^\s+|\s+$/g),dl=mc(/^\s+/g),ei=mc(/\s+$/g),ds=e=>e.length>0,lr=e=>!ds(e),rr=(e,n)=>n<=0?"":new Array(n+1).join(e),hc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?W.none():W.some(o)},pi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pa=e=>n=>ns(n,e),ys=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ns(e,"edge/")&&ns(e,"chrome")&&ns(e,"safari")&&ns(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pi],search:e=>ns(e,"chrome")&&!ns(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ns(e,"msie")||ns(e,"trident")},{name:"Opera",versionRegexes:[pi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pa("firefox")},{name:"Safari",versionRegexes:[pi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ns(e,"safari")||ns(e,"mobile/"))&&ns(e,"applewebkit")}],$d=[{name:"Windows",search:pa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ns(e,"iphone")||ns(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pa("linux"),versionRegexes:[]},{name:"Solaris",search:pa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gc={browsers:wt(ys),oses:wt($d)},Ku="Edge",So="Chromium",Pc="IE",Us="Opera",hu="Firefox",Gi="Safari",Ic=()=>Mr({current:void 0,version:sr.unknown()}),Mr=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(Ku),isChromium:r(So),isIE:r(Pc),isOpera:r(Us),isFirefox:r(hu),isSafari:r(Gi)}},Yu={unknown:Ic,nu:Mr},bi="Windows",Hd="iOS",fl="Android",zd="Linux",Sr="macOS",pc="Solaris",ml="FreeBSD",Xu="ChromeOS",hl=()=>qc({current:void 0,version:sr.unknown()}),qc=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(bi),isiOS:r(Hd),isAndroid:r(fl),isMacOS:r(Sr),isLinux:r(zd),isSolaris:r(pc),isFreeBSD:r(ml),isChromeOS:r(Xu)}},br={unknown:hl,nu:qc},vi={detect:(e,n,o)=>{const r=gc.browsers(),i=gc.oses(),u=n.bind(x=>Cr(r,x)).orThunk(()=>es(r,e)).fold(Yu.unknown,Yu.nu),m=jc(i,e).fold(br.unknown,br.nu),y=Cn(m,u,e,o);return{browser:u,os:m,deviceType:y}}},Hl=e=>window.matchMedia(e).matches;let gu=Ge(()=>vi.detect(window.navigator.userAgent,W.from(window.navigator.userAgentData),Hl));const Y=()=>gu(),he=window.navigator.userAgent,ke=Y(),Ye=ke.browser,kt=ke.os,nn=ke.deviceType,$t=he.indexOf("Windows Phone")!==-1,Nn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ye.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ye.isIE(),windowsPhone:$t,browser:{current:Ye.current,version:Ye.version,isChromium:Ye.isChromium,isEdge:Ye.isEdge,isFirefox:Ye.isFirefox,isIE:Ye.isIE,isOpera:Ye.isOpera,isSafari:Ye.isSafari},os:{current:kt.current,version:kt.version,isAndroid:kt.isAndroid,isChromeOS:kt.isChromeOS,isFreeBSD:kt.isFreeBSD,isiOS:kt.isiOS,isLinux:kt.isLinux,isMacOS:kt.isMacOS,isSolaris:kt.isSolaris,isWindows:kt.isWindows},deviceType:{isDesktop:nn.isDesktop,isiPad:nn.isiPad,isiPhone:nn.isiPhone,isPhone:nn.isPhone,isTablet:nn.isTablet,isTouch:nn.isTouch,isWebView:nn.isWebView}},Vn=/^\s*|\s*$/g,ko=e=>en(e)?"":(""+e).replace(Vn,""),H=(e,n)=>n?n==="array"&&vs(e)?!0:typeof e===n:e!==void 0,ee=(e,n,o={})=>{const r=de(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ye=En,Be=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(En(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},cn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Vs(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(cn(i,n,o,r),!0)))},ut={trim:ko,isArray:vs,is:H,toArray:wr,makeMap:ee,each:Vs,map:xa,grep:Nc,inArray:Rr,hasOwn:ye,extend:Be,walk:cn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Gt(e)?e:e===""?[]:xa(e.split(n||","),ko),_addCacheSuffix:e=>{const n=Nn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ti=(e,n,o=yn)=>e.exists(r=>o(r,n)),fs=(e,n,o=yn)=>ur(e,n,o).getOr(e.isNone()&&n.isNone()),Gc=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},ur=(e,n,o)=>e.isSome()&&n.isSome()?W.some(o(e.getOrDie(),n.getOrDie())):W.none(),uo=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?W.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):W.none(),yi=(e,n)=>e?W.some(n):W.none(),Jr=typeof window<"u"?window:Function("return this;")(),wi=(e,n)=>{let o=n??Jr;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},xr=(e,n)=>{const o=e.split(".");return wi(o,n)},zl=(e,n)=>xr(e,n),$g=(e,n)=>{const o=zl(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},E1=Object.getPrototypeOf,Ds=e=>$g("HTMLElement",e),Vl=e=>{const n=xr("ownerDocument.defaultView",e);return Je(e)&&(Ds(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(E1(e).constructor.name))},Qr=8,_a=9,Ci=11,pu=1,Nm=3,no=e=>e.dom.nodeName.toLowerCase(),gl=e=>e.dom.nodeType,Ul=e=>n=>gl(n)===e,Wl=e=>gl(e)===Qr||no(e)==="#comment",Pm=e=>Ps(e)&&Vl(e.dom),Ps=Ul(pu),oa=Ul(Nm),Ju=Ul(_a),Ah=Ul(Ci),bu=e=>n=>Ps(n)&&no(n)===e,Si=(e,n,o)=>{if(de(o)||Xt(o)||oo(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},sa=(e,n,o)=>{Si(e.dom,n,o)},Fa=(e,n)=>{const o=e.dom;Tt(n,(r,i)=>{Si(o,i,r)})},ni=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Er=(e,n)=>W.from(ni(e,n)),Qu=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Is=(e,n)=>{e.dom.removeAttribute(n)},Vd=e=>{const n=e.dom.attributes;return n==null||n.length===0},zf=e=>Fo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Zl=(e,n)=>{const o=ni(e,n);return o===void 0||o===""?[]:o.split(" ")},Ud=(e,n,o)=>{const i=Zl(e,n).concat([o]);return sa(e,n,i.join(" ")),!0},Wd=(e,n,o)=>{const r=Kt(Zl(e,n),i=>i!==o);return r.length>0?sa(e,n,r.join(" ")):Is(e,n),!1},ed=e=>e.dom.classList!==void 0,td=e=>Zl(e,"class"),bc=(e,n)=>Ud(e,"class",n),oi=(e,n)=>Wd(e,"class",n),Hg=(e,n)=>et(td(e),n)?oi(e,n):bc(e,n),pl=(e,n)=>{ed(e)?e.dom.classList.add(n):bc(e,n)},Im=e=>{(ed(e)?e.dom.classList:td(e)).length===0&&Is(e,"class")},Zd=(e,n)=>{ed(e)?e.dom.classList.remove(n):oi(e,n),Im(e)},Oh=(e,n)=>{const o=ed(e)?e.dom.classList.toggle(n):Hg(e,n);return Im(e),o},Bm=(e,n)=>ed(e)&&e.dom.classList.contains(n),jd=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return nd(r.childNodes[0])},Lm=(e,n)=>{const r=(n||document).createElement(e);return nd(r)},Dh=(e,n)=>{const r=(n||document).createTextNode(e);return nd(r)},nd=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},be={fromHtml:jd,fromTag:Lm,fromText:Dh,fromDom:nd,fromPoint:(e,n,o)=>W.from(e.dom.elementFromPoint(n,o)).map(nd)},od=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},xi=(e,n)=>{const o=e.dom;if(o.nodeType!==pu)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},_1=e=>e.nodeType!==pu&&e.nodeType!==_a&&e.nodeType!==Ci||e.childElementCount===0,zg=(e,n)=>{const o=n===void 0?document:n.dom;return _1(o)?[]:dt(o.querySelectorAll(e),be.fromDom)},vu=(e,n)=>{const o=n===void 0?document:n.dom;return _1(o)?W.none():W.from(o.querySelector(e)).map(be.fromDom)},No=(e,n)=>e.dom===n.dom,dr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Ta=e=>be.fromDom(e.dom.ownerDocument),jl=e=>Ju(e)?e:Ta(e),Mh=e=>be.fromDom(jl(e).dom.documentElement),sd=e=>be.fromDom(jl(e).dom.defaultView),si=e=>W.from(e.dom.parentNode).map(be.fromDom),Fm=e=>W.from(e.dom.parentElement).map(be.fromDom),$m=(e,n)=>{const o=ve(n)?n:$e;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=be.fromDom(u);if(i.push(m),o(m)===!0)break;r=u}return i},yu=e=>{const n=o=>Kt(o,r=>!No(e,r));return si(e).map(ba).map(n).getOr([])},wu=e=>W.from(e.dom.previousSibling).map(be.fromDom),Vf=e=>W.from(e.dom.nextSibling).map(be.fromDom),vc=e=>xs(od(e,wu)),Uf=e=>od(e,Vf),ba=e=>dt(e.dom.childNodes,be.fromDom),Cu=(e,n)=>{const o=e.dom.childNodes;return W.from(o[n]).map(be.fromDom)},Kc=e=>Cu(e,0),ri=e=>Cu(e,e.dom.childNodes.length-1),rd=e=>e.dom.childNodes.length,T1=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return be.fromDom(n)},Hm=e=>Ah(e)&&Fe(e.dom.host),bl=e=>be.fromDom(e.dom.getRootNode()),qd=e=>Hm(e)?e:T1(jl(e)),Vg=e=>Hm(e)?e:be.fromDom(jl(e).dom.body),zm=e=>{const n=bl(e);return Hm(n)?W.some(n):W.none()},Ug=e=>be.fromDom(e.dom.host),Wg=e=>{if(Fe(e.target)){const n=be.fromDom(e.target);if(Ps(n)&&Zg(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return lo(o)}}return W.from(e.target)},Zg=e=>Fe(e.dom.shadowRoot),vl=e=>{const n=oa(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return zm(be.fromDom(n)).fold(()=>o.body.contains(n),Hn(vl,Ug))};var Nh=(e,n,o,r,i)=>e(o,r)?W.some(o):ve(i)&&i(o)?W.none():n(o,r,i);const Yc=(e,n,o)=>{let r=e.dom;const i=ve(o)?o:$e;for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r);if(n(u))return W.some(u);if(i(u))break}return W.none()},fr=(e,n,o)=>Nh((i,u)=>u(i),Yc,e,n,o),Pr=(e,n)=>{const o=e.dom;return o.parentNode?Ki(be.fromDom(o.parentNode),r=>!No(e,r)&&n(r)):W.none()},Ki=(e,n)=>{const o=i=>n(be.fromDom(i));return Vo(e.dom.childNodes,o).map(be.fromDom)},Gd=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=be.fromDom(r.childNodes[i]);if(n(u))return W.some(u);const m=o(r.childNodes[i]);if(m.isSome())return m}return W.none()};return o(e.dom)},Kd=(e,n,o)=>Yc(e,r=>xi(r,n),o),ea=(e,n)=>vu(n,e),mn=(e,n,o)=>Nh((i,u)=>xi(i,u),Kd,e,n,o),Ph=e=>mn(e,"[contenteditable]"),yl=(e,n=!1)=>vl(e)?e.dom.isContentEditable:Ph(e).fold(wt(n),o=>Yi(o)==="true"),Yi=e=>e.dom.contentEditable,Xo=(e,n)=>{e.dom.contentEditable=n?"true":"false"},ad=e=>e.style!==void 0&&ve(e.style.getPropertyValue),Wf=(e,n,o)=>{if(!de(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ad(e)&&e.style.setProperty(n,o)},Zf=(e,n)=>{ad(e)&&e.style.removeProperty(n)},jg=(e,n,o)=>{const r=e.dom;Wf(r,n,o)},Gn=(e,n)=>{const o=e.dom;Tt(n,(r,i)=>{Wf(o,i,r)})},vr=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!vl(e)?Yd(o,n):i},Yd=(e,n)=>ad(e)?e.style.getPropertyValue(n):"",Bi=(e,n)=>{const o=e.dom,r=Yd(o,n);return W.from(r).filter(i=>i.length>0)},ai=e=>{const n={},o=e.dom;if(ad(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},Xi=(e,n)=>{const o=e.dom;Zf(o,n),ti(Er(e,"style").map(Ns),"")&&Is(e,"style")},ra=e=>e.dom.offsetWidth,Ei=(e,n)=>{si(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},yc=(e,n)=>{Vf(e).fold(()=>{si(e).each(i=>{Js(i,n)})},r=>{Ei(r,n)})},Xd=(e,n)=>{Kc(e).fold(()=>{Js(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Js=(e,n)=>{e.dom.appendChild(n.dom)},Vm=(e,n)=>{Ei(e,n),Js(n,e)},_r=(e,n)=>{xe(n,(o,r)=>{const i=r===0?e:n[r-1];yc(i,o)})},wl=(e,n)=>{xe(n,o=>{Js(e,o)})},Cl=e=>{e.dom.textContent="",xe(ba(e),n=>{ws(n)})},ws=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Li=e=>{const n=ba(e);n.length>0&&_r(e,n),ws(e)},jf=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ba(be.fromDom(r))},id=e=>dt(e,be.fromDom),Bs=e=>e.dom.innerHTML,Su=(e,n)=>{const r=Ta(e).dom,i=be.fromDom(r.createDocumentFragment()),u=jf(n,r);wl(i,u),Cl(e),Js(e,i)},Xc=e=>{const n=be.fromTag("div"),o=be.fromDom(e.dom.cloneNode(!0));return Js(n,o),Bs(n)},po=(e,n,o,r,i,u,m)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:m}),Jd=e=>{const n=be.fromDom(Wg(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=M(r,o);return po(n,e.clientX,e.clientY,o,r,i,e)},Um=(e,n)=>o=>{e(o)&&n(Jd(o))},k=(e,n,o,r,i)=>{const u=Um(o,r);return e.dom.addEventListener(n,u,i),{unbind:Ae(q,e,n,u,i)}},B=(e,n,o,r)=>k(e,n,o,r,!1),q=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},me=(e,n)=>({left:e,top:n,translate:(r,i)=>me(e+r,n+i)}),Ee=me,ht=e=>{const n=e.getBoundingClientRect();return Ee(n.left,n.top)},kn=(e,n)=>e!==void 0?e:n!==void 0?n:0,eo=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return Ee(o.offsetLeft,o.offsetTop);const u=kn(r==null?void 0:r.pageYOffset,i.scrollTop),m=kn(r==null?void 0:r.pageXOffset,i.scrollLeft),y=kn(i.clientTop,o.clientTop),x=kn(i.clientLeft,o.clientLeft);return Kn(e).translate(m-x,u-y)},Kn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Ee(r.offsetLeft,r.offsetTop):vl(e)?ht(n):Ee(0,0)},pn=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Ee(o,r)},Ws=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},Ir=(e,n)=>{Y().browser.isSafari()&&ve(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},_i=e=>{const n=e===void 0?window:e;return Y().browser.isFirefox()?W.none():W.from(n.visualViewport)},xu=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),qg=e=>{const n=e===void 0?window:e,o=n.document,r=pn(be.fromDom(o));return _i(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,m=i.clientHeight;return xu(r.left,r.top,u,m)},i=>xu(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},qf=(e,n)=>Kt(ba(e),n),Ih=(e,n)=>{let o=[];return xe(ba(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Ih(r,n))}),o},ii=(e,n)=>zg(n,e),Gg=(e,n,o)=>Yc(e,n,o).isSome(),n2=(e,n)=>Pr(e,n).isSome(),k1=(e,n)=>Gd(e,n).isSome();class $a{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const Kg="\uFEFF",Zr=" ",Wm=e=>e===Kg,ci=e=>e.replace(/\uFEFF/g,""),Fn=/^[ \t\r\n]*$/,Jc=e=>Fn.test(e),Qd=e=>{for(const n of e)if(!Wm(n))return!1;return!0},Yg=e=>" \f	\v".indexOf(e)!==-1,v0=e=>e===`
`||e==="\r",Xg=(e,n)=>n<e.length&&n>=0?v0(e[n]):!1,Sl=(e,n=4,o=!0,r=!0)=>{const i=rr(" ",n),u=e.replace(/\t/g,i);return Fo(u,(y,x)=>Yg(x)||x===Zr?y.pcIsSpace||y.str===""&&o||y.str.length===u.length-1&&r||Xg(u,y.str.length+1)?{pcIsSpace:!1,str:y.str+Zr}:{pcIsSpace:!0,str:y.str+" "}:{pcIsSpace:v0(x),str:y.str+x},{pcIsSpace:!1,str:""}).str},Eu=e=>n=>!!n&&n.nodeType===e,ef=e=>!!e&&!Object.getPrototypeOf(e),Ut=Eu(1),xl=e=>Ut(e)&&Pm(be.fromDom(e)),A1=e=>Ut(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Gf=e=>{const n=e.toLowerCase();return o=>Fe(o)&&o.nodeName.toLowerCase()===n},El=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return et(n,r)}return!1}},Bh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ut(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const m=i.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},tf=e=>n=>Ut(n)&&n.hasAttribute(e),Kf=e=>Ut(e)&&e.hasAttribute("data-mce-bogus"),Lh=e=>Ut(e)&&e.getAttribute("data-mce-bogus")==="all",ql=e=>Ut(e)&&e.tagName==="TABLE",y0=e=>n=>!!(xl(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ar=El(["textarea","input"]),bt=Eu(3),Fi=Eu(4),Gl=Eu(7),aa=Eu(8),Zm=Eu(9),ia=Eu(11),jo=Gf("br"),Jg=Gf("img"),st=y0("true"),qo=y0("false"),Qg=El(["td","th"]),ta=El(["td","th","caption"]),ka=El(["video","audio","object","embed"]),_l=Gf("li"),O1=Gf("details"),nf=Gf("summary"),D1={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},wc=(e,n,o)=>{const r=be.fromDom(n),i=be.fromDom(e),u=o.getWhitespaceElements();return Gg(i,y=>En(u,no(y)),Ae(No,r))},Uo=e=>Ut(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),_u=(e,n)=>Ut(e)&&En(n.getNonEmptyElements(),e.nodeName),Fh=tf("data-mce-bookmark"),hr=e=>Fm(be.fromDom(e)).exists(n=>!yl(n)),ep=(e,n,o)=>Jc(e.data)&&!wc(e,n,o),cd=(e,n,o,r)=>bt(e)&&!ep(e,n,o)&&(!r.includeZwsp||!Qd(e.data)),$h=(e,n,o,r)=>ve(r.isContent)&&r.isContent(n)||_u(n,e)||Fh(n)||Uo(n)||cd(n,o,e,r)||qo(n)||st(n)&&hr(n),jr=(e,n,o)=>{const r={...D1,...o};if(r.checkRootAsContent&&$h(e,n,n,r))return!1;let i=n.firstChild,u=0;if(!i)return!0;const m=new $a(i,n);do{if(r.skipBogus&&Ut(i)){const y=i.getAttribute("data-mce-bogus");if(y){i=m.next(y==="all");continue}}if(aa(i)){i=m.next(!0);continue}if(jo(i)){u++,i=m.next();continue}if($h(e,i,n,r))return!1;i=m.next()}while(i);return u<=1},ca=(e,n,o)=>jr(e,n.dom,{checkRootAsContent:!0,...o}),Pe=(e,n,o)=>$h(e,n,n,{includeZwsp:D1.includeZwsp,...o}),Zs=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},R1=e=>{const n=Zs(W.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(y))}}},Ls=e=>{const n=Zs(W.none()),o=()=>n.get().each(y=>clearInterval(y));return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(setInterval(y,e)))}}},li=()=>{const e=R1(it);return{...e,on:o=>e.get().each(o)}},Aa=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},os=e=>Aa(e)!=="html",_=e=>os(e.nodeName),R=e=>Aa(e.nodeName),Z=["svg","math"],ne=()=>{const e=li(),n=()=>e.get().map(R).getOr("html");return{track:i=>(_(i)?e.set(i):e.get().exists(u=>!u.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Se="data-mce-block",rt=e=>Kt(ts(e),n=>!/[A-Z]/.test(n)),At=e=>dt(rt(e),n=>{const o=CSS.escape(n);return`${o}:`+dt(Z,r=>`not(${r} ${o})`).join(":")}).join(","),un=(e,n)=>Fe(n.querySelector(e))?(n.setAttribute(Se,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Se),!1),jn=(e,n)=>{const o=At(e.getTransparentElements()),r=At(e.getBlockElements());return Kt(n.querySelectorAll(o),i=>un(r,i))},ao=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let u=n[i];u;u=u[i])if(jr(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},as=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();ao(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const m=r.extractContents();ao(e,m,!1),jr(e,u,{checkRootAsContent:!0})||i.insertBefore(u,n),jr(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),jr(e,m,{checkRootAsContent:!0})||i.insertBefore(m,n),i.removeChild(n)}},ss=(e,n,o)=>{const r=e.getBlockElements(),i=be.fromDom(n),u=y=>no(y)in r,m=y=>No(y,i);xe(id(o),y=>{Yc(y,u,m).each(x=>{const A=qf(y,L=>u(L)&&!e.isValidChild(no(x),no(L)));if(A.length>0){const L=Fm(x);xe(A,$=>{Yc($,u,m).each(z=>{as(e,z.dom,$.dom)})}),L.each($=>jn(e,$.dom))}})})},Qs=(e,n,o)=>{xe([...o,...Yl(e,n)?[n]:[]],r=>xe(ii(be.fromDom(r),r.nodeName.toLowerCase()),i=>{Xl(e,i.dom)&&Li(i)}))},Ti=(e,n)=>{const o=jn(e,n);ss(e,n,o),Qs(e,n,o)},Kl=(e,n)=>{if(Yf(e,n)){const o=At(e.getBlockElements());un(o,n)}},ld=(e,n,o)=>{const r=u=>No(u,be.fromDom(n)),i=$m(be.fromDom(o),r);Mc(i,i.length-2).filter(Ps).fold(()=>Ti(e,n),u=>Ti(e,u.dom))},$i=e=>e.hasAttribute(Se),of=(e,n)=>En(e.getTransparentElements(),n),Yf=(e,n)=>Ut(n)&&of(e,n.nodeName),Yl=(e,n)=>Yf(e,n)&&$i(n),Xl=(e,n)=>Yf(e,n)&&!$i(n),jm=(e,n)=>n.type===1&&of(e,n.name)&&de(n.attr(Se)),Hh=Y().browser,zh=e=>Vo(e,Ps),o2=e=>Hh.isFirefox()&&no(e)==="table"?zh(ba(e)).filter(n=>no(n)==="caption").bind(n=>zh(Uf(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,la=(e,n)=>e.children&&et(e.children,n),xo=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&vr(be.fromDom(e),"position")==="static"){const y=n.getBoundingClientRect();return r=y.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=y.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let m=n;for(;m&&m!==o&&m.nodeType&&!la(m,o);){const y=m;r+=y.offsetLeft||0,i+=y.offsetTop||0,m=y.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!la(m,o);)r-=m.scrollLeft||0,i-=m.scrollTop||0,m=m.parentNode;i+=o2(be.fromDom(n))}return{x:r,y:i}},Fs=(e,n={})=>{let o=0;const r={},i=be.fromDom(e),u=jl(i),m=_e=>{n.referrerPolicy=_e},y=_e=>{n.contentCssCors=_e},x=_e=>{Js(qd(i),_e)},A=_e=>{const Re=qd(i);ea(Re,"#"+_e).each(ws)},L=_e=>Yo(r,_e).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),$=_e=>new Promise((Re,Me)=>{let Ie;const ct=ut._addCacheSuffix(_e),Ot=L(ct);r[ct]=Ot,Ot.count++;const Qt=(sn,_n)=>{xe(sn,io),Ot.status=_n,Ot.passed=[],Ot.failed=[],Ie&&(Ie.onload=null,Ie.onerror=null,Ie=null)},tt=()=>Qt(Ot.passed,2),Ze=()=>Qt(Ot.failed,3);if(Re&&Ot.passed.push(Re),Me&&Ot.failed.push(Me),Ot.status===1)return;if(Ot.status===2){tt();return}if(Ot.status===3){Ze();return}Ot.status=1;const mt=be.fromTag("link",u.dom);Fa(mt,{rel:"stylesheet",type:"text/css",id:Ot.id}),n.contentCssCors&&sa(mt,"crossOrigin","anonymous"),n.referrerPolicy&&sa(mt,"referrerpolicy",n.referrerPolicy),Ie=mt.dom,Ie.onload=tt,Ie.onerror=Ze,x(mt),sa(mt,"href",ct)}),z=(_e,Re)=>{const Me=L(_e);r[_e]=Me,Me.count++;const Ie=be.fromTag("style",u.dom);Fa(Ie,{rel:"stylesheet",type:"text/css",id:Me.id,"data-mce-key":_e}),Ie.dom.innerHTML=Re,x(Ie)},X=_e=>Promise.allSettled(dt(_e,Me=>$(Me).then(wt(Me)))).then(Me=>{const Ie=Do(Me,ct=>ct.status==="fulfilled");return Ie.fail.length>0?Promise.reject(dt(Ie.fail,ct=>ct.reason)):dt(Ie.pass,ct=>ct.value)}),oe=_e=>{const Re=ut._addCacheSuffix(_e);Yo(r,Re).each(Me=>{--Me.count===0&&(delete r[Re],A(Me.id))})};return{load:$,loadRawCss:z,loadAll:X,unload:oe,unloadRawCss:_e=>{Yo(r,_e).each(Re=>{--Re.count===0&&(delete r[_e],A(Re.id))})},unloadAll:_e=>{xe(_e,Re=>{oe(Re)})},_setReferrerPolicy:m,_setContentCssCors:y}},Cc=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=bl(o).dom;return W.from(e.get(u)).getOrThunk(()=>{const m=Fs(u,r);return e.set(u,m),m})}}})(),Bc=e=>e.nodeName.toLowerCase()==="span",Vh=(e,n)=>Fe(e)&&(Pe(n,e)||n.isInline(e.nodeName.toLowerCase())),Xf=(e,n,o)=>{const r=new $a(e,n).prev(!1),i=new $a(e,n).next(!1),u=In(r)||Vh(r,o),m=In(i)||Vh(i,o);return u&&m},ud=e=>Bc(e)&&e.getAttribute("data-mce-type")==="bookmark",dd=(e,n,o)=>bt(e)&&e.data.length>0&&Xf(e,n,o),fd=e=>Ut(e)?e.childNodes.length>0:!1,vS=e=>ia(e)||Zm(e),Hi=(e,n,o,r)=>{var i;const u=r||n;if(Ut(n)&&ud(n))return n;const m=n.childNodes;for(let y=m.length-1;y>=0;y--)Hi(e,m[y],o,u);if(Ut(n)){const y=n.childNodes;y.length===1&&ud(y[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(y[0],n))}return!vS(n)&&!Pe(o,n)&&!fd(n)&&!dd(n,u,o)&&e.remove(n),n},yS=ut.makeMap,Jl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jf=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Uh=/[<>&\"\']/g,Uk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,tp={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Wh={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},wS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Br=e=>{const n=be.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},s2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!Wh[u]){const m="&"+r[i+1]+";";o[u]=m,o[m]=u}}return o}else return},md=s2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),qm=(e,n)=>e.replace(n?Jl:Jf,o=>Wh[o]||o),np=e=>(""+e).replace(Uh,n=>Wh[n]||n),Ql=(e,n)=>e.replace(n?Jl:Jf,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Wh[o]||"&#"+o.charCodeAt(0)+";"),ki=(e,n,o)=>{const r=o||md;return e.replace(n?Jl:Jf,i=>Wh[i]||r[i]||i)},Zh={encodeRaw:qm,encodeAllRaw:np,encodeNumeric:Ql,encodeNamed:ki,getEncodeFunc:(e,n)=>{const o=s2(n)||md,r=(m,y)=>m.replace(y?Jl:Jf,x=>Wh[x]!==void 0?Wh[x]:o[x]!==void 0?o[x]:x.length>1?"&#"+((x.charCodeAt(0)-55296)*1024+(x.charCodeAt(1)-56320)+65536)+";":"&#"+x.charCodeAt(0)+";"),i=(m,y)=>ki(m,y,o),u=yS(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:ki:u.numeric?Ql:qm},decode:e=>e.replace(Uk,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):tp[o]||String.fromCharCode(o)):wS[n]||md[n]||Br(n))},Ha=(e,n)=>(e=ut.trim(e),e?e.split(n||" "):[]),C0=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),S0=e=>Je(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",CS=e=>{const n=o=>Gt(o)?dt(o,n):S0(o)?new RegExp(o.source,o.flags):Je(o)?go(o,n):o;return n(e)},N1=e=>{const n=/^(~)?(.+)$/;return _s(Ha(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",m=r[2];return[{cloneName:u,name:m}]}else return[]})},P1=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Qf=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Ji=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Qf(e),i=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},Lc={html4:Ge(()=>Ji("html4")),html5:Ge(()=>Ji("html5")),"html5-strict":Ge(()=>Ji("html5-strict"))},hd=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=Lc[e]();return n==="blocks"?W.some(o):n==="phrasing"?W.some(r):n==="flow"?W.some(i):W.none()},r2=e=>{const n=P1(e),{phrasingContent:o,flowContent:r}=Qf(e),i={},u=(x,A,L)=>{i[x]={attributes:Ts(A,wt({})),attributesOrder:A,children:Ts(L,wt({}))}},m=(x,A="",L="")=>{const $=Ha(L),z=Ha(x);let X=z.length;const oe=[...n,...Ha(A)];for(;X--;)u(z[X],oe.slice(),$)},y=(x,A)=>{const L=Ha(x),$=Ha(A);let z=L.length;for(;z--;){const X=i[L[z]];for(let oe=0,te=$.length;oe<te;oe++)X.attributes[$[oe]]={},X.attributesOrder.push($[oe])}};return e!=="html5-strict"&&(xe(Ha("acronym applet basefont big font strike tt"),L=>{m(L,"",o)}),xe(Ha("center dir isindex noframes"),L=>{m(L,"",r)})),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),m("dd div","",r),m("address dt caption","",e==="html4"?o:r),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),m("blockquote","cite",r),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",r),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?o:r),m("q","cite",o),m("ins del","cite datetime",r),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",r),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),m("param","name value"),m("map","name",[r,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",r),m("th","colspan rowspan headers scope abbr",r),m("form","accept-charset action autocomplete enctype method name novalidate target",r),m("fieldset","disabled form name",[r,"legend"].join(" ")),m("label","form for",o),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[r,"li"].join(" ")),m("noscript","",r),e!=="html4"&&(m("wbr"),m("ruby","",[o,"rt rp"].join(" ")),m("figcaption","",r),m("mark rt rp bdi","",o),m("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),m("canvas","width height",r),m("data","value",o),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[o,"option"].join(" ")),m("article section nav aside main header footer","",r),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[r,"figcaption"].join(" ")),m("time","datetime",o),m("dialog","open",r),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",o),m("progress","value max",o),m("meter","value min max low high optimum",o),m("details","open",[r,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),e!=="html4"&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&xe([i.video,i.audio],x=>{delete x.children.audio,delete x.children.video}),xe(Ha("a form meter progress dfn"),x=>{i[x]&&delete i[x].children[x]}),delete i.caption.children.table,delete i.script,i},I1=e=>e==="-"?"remove":"add",op=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return W.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},SS=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return _s(Ha(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?I1(i):"replace",m=r[2],y=_s(Ha(r[3],"|"),x=>op(x).toArray());return[{operation:u,name:m,validChildren:y}]}else return[]})},xS=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return xe(Ha(e,"|"),m=>{const y=o.exec(m);if(y){const x={},A=y[1],L=y[2].replace(/[\\:]:/g,":"),$=y[3],z=y[4];if(A==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(L),x.required=!0),A==="-"){delete i[L],u.splice(ut.inArray(u,L),1);return}if($&&($==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:L,value:z}),x.defaultValue=z):$==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:L,value:z}),x.forcedValue=z):$==="<"&&(x.validValues=ut.makeMap(z,"?"))),r.test(L)){const X=x;n.attributePatterns=n.attributePatterns||[],X.pattern=C0(L),n.attributePatterns.push(X)}else i[L]||u.push(L),i[L]=x}})},ES=(e,n)=>{Tt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},a2=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return _s(Ha(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],m=i[2],y=i[3],x=i[4],A=i[5],L={attributes:{},attributesOrder:[]};if(e.each($=>ES($,L)),u==="#"?L.paddEmpty=!0:u==="-"&&(L.removeEmpty=!0),x==="!"&&(L.removeEmptyAttrs=!0),A&&xS(A,L),y&&(L.outputName=m),m==="@")if(e.isNone())e=W.some(L);else return[];return[y?{name:m,element:L,aliasName:y}:{name:m,element:L}]}else return[]})},Gm={},bo=ut.makeMap,bn=ut.each,Km=ut.extend,x0=ut.explode,B1=(e,n={})=>{const o=bo(e," ",bo(e.toUpperCase()," "));return Km(o,n)},_S=e=>B1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),E0=(e,n)=>{if(e){const o={};return de(e)&&(e={"*":e}),bn(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?bo(r,/[, ]/):x0(r,/[, ]/)}),o}else return},ms=(e={})=>{var n;const o={},r={};let i=[];const u={},m={},y=(wn,Lo,Kr)=>{const Pa=e[wn];if(Pa)return bo(Pa,/[, ]/,bo(Pa.toUpperCase(),/[, ]/));{let hi=Gm[wn];return hi||(hi=B1(Lo,Kr),Gm[wn]=hi),hi}},x=(n=e.schema)!==null&&n!==void 0?n:"html5",A=r2(x);e.verify_html===!1&&(e.valid_elements="*[*]");const L=E0(e.valid_styles),$=E0(e.invalid_styles,"map"),z=E0(e.valid_classes,"map"),X=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),oe=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),te=y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ie=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),_e="td th iframe video audio object script code",Re=y("non_empty_elements",_e+" pre svg textarea summary",te),Me=y("move_caret_before_on_enter_elements",_e+" table",te),Ie="h1 h2 h3 h4 h5 h6",ct=y("text_block_elements",Ie+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ot=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ct),Qt=y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),tt=y("transparent_elements","a ins del canvas map"),Ze=y("wrap_block_elements","pre "+Ie);bn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),wn=>{m[wn]=new RegExp("</"+wn+"[^>]*>","gi")});const mt=wn=>{const Lo=W.from(o["@"]),Kr=/[*?+]/;xe(a2(Lo,wn??""),({name:Pa,element:hi,aliasName:Ia})=>{if(Ia&&(o[Ia]=hi),Kr.test(Pa)){const Ar=hi;Ar.pattern=C0(Pa),i.push(Ar)}else o[Pa]=hi})},sn=wn=>{i=[],xe(ts(o),Lo=>{delete o[Lo]}),mt(wn)},_n=(wn,Lo)=>{var Kr,Pa;delete Gm.text_block_elements,delete Gm.block_elements;const hi=Lo.extends?!lu(Lo.extends):!1,Ia=Lo.extends;if(r[wn]=Ia?r[Ia]:{},u[wn]=Ia??wn,Re[wn.toUpperCase()]={},Re[wn]={},hi||(Ot[wn.toUpperCase()]={},Ot[wn]={}),Ia&&!o[wn]&&o[Ia]){const Ar=CS(o[Ia]);delete Ar.removeEmptyAttrs,delete Ar.removeEmpty,o[wn]=Ar}else o[wn]={attributesOrder:[],attributes:{}};if(Gt(Lo.attributes)){const Ar=Vc=>{Or.attributesOrder.push(Vc),Or.attributes[Vc]={}},Or=(Kr=o[wn])!==null&&Kr!==void 0?Kr:{};delete Or.attributesDefault,delete Or.attributesForced,delete Or.attributePatterns,delete Or.attributesRequired,Or.attributesOrder=[],Or.attributes={},xe(Lo.attributes,Vc=>{const Bd=P1(x);op(Vc).each(({preset:Am,name:If})=>{Am?If==="global"&&xe(Bd,Ar):Ar(If)})}),o[wn]=Or}if(Xt(Lo.padEmpty)){const Ar=(Pa=o[wn])!==null&&Pa!==void 0?Pa:{};Ar.paddEmpty=Lo.padEmpty,o[wn]=Ar}if(Gt(Lo.children)){const Ar={},Or=Bd=>{Ar[Bd]={}},Vc=Bd=>{hd(x,Bd).each(Am=>{xe(Am,Or)})};xe(Lo.children,Bd=>{op(Bd).each(({preset:Am,name:If})=>{Am?Vc(If):Or(If)})}),r[wn]=Ar}Ia&&Tt(r,(Ar,Or)=>{Ar[Ia]&&(r[Or]=Ar=Km({},r[Or]),Ar[wn]=Ar[Ia])})},Zn=wn=>{xe(N1(wn??""),({name:Lo,cloneName:Kr})=>{_n(Lo,{extends:Kr})})},ho=wn=>{Je(wn)?Tt(wn,(Lo,Kr)=>_n(Kr,Lo)):de(wn)&&Zn(wn)},cs=wn=>{xe(SS(wn??""),({operation:Lo,name:Kr,validChildren:Pa})=>{const hi=Lo==="replace"?{"#comment":{}}:r[Kr],Ia=Or=>{Lo==="remove"?delete hi[Or]:hi[Or]={}},Ar=Or=>{hd(x,Or).each(Vc=>{xe(Vc,Ia)})};xe(Pa,({preset:Or,name:Vc})=>{Or?Ar(Vc):Ia(Vc)}),r[Kr]=hi})},Cs=wn=>{const Lo=o[wn];if(Lo)return Lo;let Kr=i.length;for(;Kr--;){const Pa=i[Kr];if(Pa.pattern.test(wn))return Pa}},Gr=()=>{e.valid_elements?(sn(e.valid_elements),bn(A,(wn,Lo)=>{r[Lo]=wn.children})):(bn(A,(wn,Lo)=>{o[Lo]={attributes:wn.attributes,attributesOrder:wn.attributesOrder},r[Lo]=wn.children}),bn(Ha("strong/b em/i"),wn=>{const Lo=Ha(wn,"/");o[Lo[1]].outputName=Lo[0]}),bn(Qt,(wn,Lo)=>{o[Lo]&&(e.padd_empty_block_inline_children&&(o[Lo].paddInEmptyBlock=!0),o[Lo].removeEmpty=!0)}),bn(Ha("ol ul blockquote a table tbody"),wn=>{o[wn]&&(o[wn].removeEmpty=!0)}),bn(Ha("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),wn=>{o[wn]&&(o[wn].paddEmpty=!0)}),bn(Ha("span"),wn=>{o[wn].removeEmptyAttrs=!0})),delete o.svg,ho(e.custom_elements),cs(e.valid_children),mt(e.extended_valid_elements),cs("+ol[ul|ol],+ul[ul|ol]"),bn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(wn,Lo)=>{o[Lo]&&(o[Lo].parentsRequired=Ha(wn))}),e.invalid_elements&&bn(x0(e.invalid_elements),wn=>{o[wn]&&delete o[wn]}),Cs("span")||mt("span[!data-mce-type|*]")},Zi=wt(L),mi=wt($),Ft=wt(z),xn=wt(ie),Wo=wt(Ot),Yt=wt(ct),Bn=wt(Qt),zn=wt(Object.seal(te)),qt=wt(oe),vo=wt(Re),_o=wt(Me),Na=wt(X),hs=wt(tt),uc=wt(Ze),Il=wt(Object.seal(m)),km=(wn,Lo)=>{const Kr=r[wn.toLowerCase()];return!!(Kr&&Kr[Lo.toLowerCase()])},Dc=(wn,Lo)=>{const Kr=Cs(wn);if(Kr)if(Lo){if(Kr.attributes[Lo])return!0;const Pa=Kr.attributePatterns;if(Pa){let hi=Pa.length;for(;hi--;)if(Pa[hi].pattern.test(Lo))return!0}}else return!0;return!1},lu=wn=>En(Wo(),wn),uu=wn=>!us(wn,"#")&&Dc(wn)&&!lu(wn),ji=wn=>En(uc(),wn)||uu(wn),du=wt(u);return Gr(),{type:x,children:r,elements:o,getValidStyles:Zi,getValidClasses:Ft,getBlockElements:Wo,getInvalidStyles:mi,getVoidElements:zn,getTextBlockElements:Yt,getTextInlineElements:Bn,getBoolAttrs:xn,getElementRule:Cs,getSelfClosingElements:qt,getNonEmptyElements:vo,getMoveCaretBeforeOnEnterElements:_o,getWhitespaceElements:Na,getTransparentElements:hs,getSpecialElements:Il,isValidChild:km,isValid:Dc,isBlock:lu,isInline:uu,isWrapper:ji,getCustomElements:du,addValidElements:mt,setValidElements:sn,addCustomElements:ho,addValidChildren:cs}},i2=e=>({value:Wk(e)}),Wk=e=>Ms(e,"#").toUpperCase(),c2=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},ot=e=>{const n=c2(e.red)+c2(e.green)+c2(e.blue);return i2(n)},_0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,L1=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,T0=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),F1=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),y=parseFloat(r);return T0(i,u,m,y)},sp=e=>_0.test(e)?"rgb":L1.test(e)?"rgba":"other",k0=e=>{const n=_0.exec(e);if(n!==null)return W.some(F1(n[1],n[2],n[3],"1"));const o=L1.exec(e);return o!==null?W.some(F1(o[1],o[2],o[3],o[4])):W.none()},jh=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,$1=e=>k0(e).map(ot).map(n=>"#"+n.value).getOr(e),Ym=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let m,y;const x=Kg;n&&(m=n.getValidStyles(),y=n.getInvalidStyles());const A=(`\\" \\' \\; \\: ; : `+x).split(" ");for(let $=0;$<A.length;$++)u[A[$]]=x+$,u[x+$]=A[$];const L={parse:$=>{const z={};let X=!1;const oe=e.url_converter,te=e.url_converter_scope||L,ie=(tt,Ze,mt)=>{const sn=z[tt+"-top"+Ze];if(!sn)return;const _n=z[tt+"-right"+Ze];if(!_n)return;const Zn=z[tt+"-bottom"+Ze];if(!Zn)return;const ho=z[tt+"-left"+Ze];if(!ho)return;const cs=[sn,_n,Zn,ho];let Cs=cs.length-1;for(;Cs--&&cs[Cs]===cs[Cs+1];);Cs>-1&&mt||(z[tt+Ze]=Cs===-1?cs[0]:cs.join(" "),delete z[tt+"-top"+Ze],delete z[tt+"-right"+Ze],delete z[tt+"-bottom"+Ze],delete z[tt+"-left"+Ze])},_e=tt=>{const Ze=z[tt];if(!Ze)return;const mt=Ze.indexOf(",")>-1?[Ze]:Ze.split(" ");let sn=mt.length;for(;sn--;)if(mt[sn]!==mt[0])return!1;return z[tt]=mt[0],!0},Re=(tt,Ze,mt,sn)=>{_e(Ze)&&_e(mt)&&_e(sn)&&(z[tt]=z[Ze]+" "+z[mt]+" "+z[sn],delete z[Ze],delete z[mt],delete z[sn])},Me=tt=>(X=!0,u[tt]),Ie=(tt,Ze)=>(X&&(tt=tt.replace(/\uFEFF[0-9]/g,mt=>u[mt])),Ze||(tt=tt.replace(/\\([\'\";:])/g,"$1")),tt),ct=tt=>String.fromCharCode(parseInt(tt.slice(1),16)),Ot=tt=>tt.replace(/\\[0-9a-f]+/gi,ct),Qt=(tt,Ze,mt,sn,_n,Zn)=>{if(_n=_n||Zn,_n)return _n=Ie(_n),"'"+_n.replace(/\'/g,"\\'")+"'";if(Ze=Ie(Ze||mt||sn||""),!e.allow_script_urls){const ho=Ze.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ho)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(ho))return""}return oe&&(Ze=oe.call(te,Ze,"style")),"url('"+Ze.replace(/\'/g,"\\'")+"')"};if($){$=$.replace(/[\u0000-\u001F]/g,""),$=$.replace(/\\[\"\';:\uFEFF]/g,Me).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ze=>Ze.replace(/[;:]/g,Me));let tt;for(;tt=r.exec($);){r.lastIndex=tt.index+tt[0].length;let Ze=tt[1].replace(i,"").toLowerCase(),mt=tt[2].replace(i,"");if(Ze&&mt){if(Ze=Ot(Ze),mt=Ot(mt),Ze.indexOf(x)!==-1||Ze.indexOf('"')!==-1||!e.allow_script_urls&&(Ze==="behavior"||/expression\s*\(|\/\*|\*\//.test(mt)))continue;Ze==="font-weight"&&mt==="700"?mt="bold":(Ze==="color"||Ze==="background-color")&&(mt=mt.toLowerCase()),sp(mt)==="rgb"&&k0(mt).each(sn=>{mt=$1(jh(sn)).toLowerCase()}),mt=mt.replace(o,Qt),z[Ze]=X?Ie(mt,!0):mt}}ie("border","",!0),ie("border","-width"),ie("border","-color"),ie("border","-style"),ie("padding",""),ie("margin",""),Re("border","border-width","border-style","border-color"),z.border==="medium none"&&delete z.border,z["border-image"]==="none"&&delete z["border-image"]}return z},serialize:($,z)=>{let X="";const oe=(ie,_e)=>{const Re=_e[ie];if(Re)for(let Me=0,Ie=Re.length;Me<Ie;Me++){const ct=Re[Me],Ot=$[ct];Ot&&(X+=(X.length>0?" ":"")+ct+": "+Ot+";")}},te=(ie,_e)=>{if(!y||!_e)return!0;let Re=y["*"];return Re&&Re[ie]?!1:(Re=y[_e],!(Re&&Re[ie]))};return z&&m?(oe("*",m),oe(z,m)):Tt($,(ie,_e)=>{ie&&te(_e,z)&&(X+=(X.length>0?" ":"")+_e+": "+ie+";")}),X}};return L},er={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},sf=e=>e instanceof Event||ve(e.initEvent),TS=e=>e.isDefaultPrevented===gt||e.isDefaultPrevented===$e,rf=e=>en(e.preventDefault)||sf(e),A0=(e,n)=>{const o=n??{};for(const r in e)En(er,r)||(o[r]=e[r]);return Fe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Fe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Fe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},H1=(e,n,o,r)=>{var i;const u=A0(n,r);return u.type=e,en(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),rf(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=gt,ve(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=gt,ve(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=gt,u.stopPropagation()},TS(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?gt:$e,u.isPropagationStopped=u.cancelBubble===!0?gt:$e,u.isImmediatePropagationStopped=$e)),u},z1="mce-data-",O0=/^(?:mouse|contextmenu)|click/,Fc=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},D0=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},kS=e=>Fe(e)&&O0.test(e.type),qh=(e,n)=>{const o=H1(e.type,e,document,n);if(kS(e)&&In(e.pageX)&&!In(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},Zk=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{D0(e,"DOMContentLoaded",m),D0(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?m():Fc(e,"DOMContentLoaded",m),o.domLoaded||Fc(e,"load",m)};class Xm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=z1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let m;const y=window,x=z=>{u.executeHandlers(qh(z||y.event),A)};if(!n||bt(n)||aa(n))return r;let A;n[u.expando]?A=n[u.expando]:(A=u.count++,n[u.expando]=A,u.events[A]={}),i=i||n;const L=o.split(" ");let $=L.length;for(;$--;){let z=L[$],X=x,oe=!1,te=!1;if(z==="DOMContentLoaded"&&(z="ready"),u.domLoaded&&z==="ready"&&n.readyState==="complete"){r.call(i,qh({type:z}));continue}!u.hasFocusIn&&(z==="focusin"||z==="focusout")&&(oe=!0,te=z==="focusin"?"focus":"blur",X=ie=>{const _e=qh(ie||y.event);_e.type=_e.type==="focus"?"focusin":"focusout",u.executeHandlers(_e,A)}),m=u.events[A][z],m?z==="ready"&&u.domLoaded?r(qh({type:z})):m.push({func:r,scope:i}):(u.events[A][z]=m=[{func:r,scope:i}],m.fakeName=te,m.capture=oe,m.nativeHandler=X,z==="ready"?Zk(n,X,u):Fc(n,te||z,X,oe))}return n=m=null,r}unbind(n,o,r){if(!n||bt(n)||aa(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const m=o.split(" ");let y=m.length;for(;y--;){const x=m[y],A=u[x];if(A){if(r){let L=A.length;for(;L--;)if(A[L].func===r){const $=A.nativeHandler,z=A.fakeName,X=A.capture,oe=A.slice(0,L).concat(A.slice(L+1));oe.nativeHandler=$,oe.fakeName=z,oe.capture=X,u[x]=oe}}(!r||A.length===0)&&(delete u[x],D0(n,A.fakeName||x,A.nativeHandler,A.capture))}}}else Tt(u,(m,y)=>{D0(n,m.fakeName||y,m.nativeHandler,m.capture)}),u={};for(const m in u)if(En(u,m))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||bt(n)||aa(n))return this;const i=qh({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||bt(n)||aa(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,m=i.length;u<m;u++){const y=i[u];if(y&&y.func.call(y.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Xm.Event=new Xm;const l2=ut.each,AS=ut.grep,R0="data-mce-style",gd=ut.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ui=(e,n,o)=>{en(o)||o===""?Is(e,n):sa(e,n,o)},Et=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),rp=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&bt(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},ya=(e,n)=>{const o=ni(n,"style"),r=e.serialize(e.parse(o),no(n));ui(n,R0,r)},jk=(e,n)=>oo(e)?En(gd,n)?e+"":e+"px":e,V1=(e,n,o)=>{const r=Et(n);en(o)||o===""?Xi(e,r):jg(e,r,jk(o,r))},qk=(e,n,o)=>{const r=n.keep_values,i={set:(m,y,x)=>{const A=be.fromDom(m);ve(n.url_converter)&&Fe(y)&&(y=n.url_converter.call(n.url_converter_scope||o(),String(y),x,m));const L="data-mce-"+x;ui(A,L,y),ui(A,x,y)},get:(m,y)=>{const x=be.fromDom(m);return ni(x,"data-mce-"+y)||ni(x,y)}},u={style:{set:(m,y)=>{const x=be.fromDom(m);r&&ui(x,R0,y),Is(x,"style"),de(y)&&Gn(x,e.parse(y))},get:m=>{const y=be.fromDom(m),x=ni(y,R0)||ni(y,"style");return e.serialize(e.parse(x),no(y))}}};return r&&(u.href=u.src=i),u},$s=(e,n={})=>{const o={},r=window,i={};let u=0;const m=!0,y=!0,x=Cc.forElement(be.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),A=[],L=n.schema?n.schema:ms({}),$=Ym({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),z=n.ownEvents?new Xm:Xm.Event,X=L.getBlockElements(),oe=He=>de(He)?En(X,He):Ut(He)&&(En(X,He.nodeName)||Yl(L,He)),te=He=>He&&e&&de(He)?e.getElementById(He):He,ie=He=>{const Ue=te(He);return Fe(Ue)?be.fromDom(Ue):null},_e=(He,Ue,Bt="")=>{let Dt;const Pn=ie(He);if(Fe(Pn)&&Ps(Pn)){const Zo=qy[Ue];Zo&&Zo.get?Dt=Zo.get(Pn.dom,Ue):Dt=ni(Pn,Ue)}return Fe(Dt)?Dt:Bt},Re=He=>{const Ue=te(He);return en(Ue)?[]:Ue.attributes},Me=(He,Ue,Bt)=>{xn(He,Dt=>{if(Ut(Dt)){const Pn=be.fromDom(Dt),Zo=Bt===""?null:Bt,Hr=ni(Pn,Ue),Om=qy[Ue];Om&&Om.set?Om.set(Pn.dom,Zo,Ue):ui(Pn,Ue,Zo),Hr!==Zo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Pn.dom,attrName:Ue,attrValue:Zo})}})},Ie=(He,Ue)=>He.cloneNode(Ue),ct=()=>n.root_element||e.body,Ot=He=>{const Ue=qg(He);return{x:Ue.x,y:Ue.y,w:Ue.width,h:Ue.height}},Qt=(He,Ue)=>xo(e.body,te(He),Ue),tt=(He,Ue,Bt)=>{xn(He,Dt=>{const Pn=be.fromDom(Dt);V1(Pn,Ue,Bt),n.update_styles&&ya($,Pn)})},Ze=(He,Ue)=>{xn(He,Bt=>{const Dt=be.fromDom(Bt);Tt(Ue,(Pn,Zo)=>{V1(Dt,Zo,Pn)}),n.update_styles&&ya($,Dt)})},mt=(He,Ue,Bt)=>{const Dt=te(He);if(!(en(Dt)||!xl(Dt)&&!A1(Dt)))return Bt?vr(be.fromDom(Dt),Et(Ue)):(Ue=Ue.replace(/-(\D)/g,(Pn,Zo)=>Zo.toUpperCase()),Ue==="float"&&(Ue="cssFloat"),Dt.style?Dt.style[Ue]:void 0)},sn=He=>{const Ue=te(He);if(!Ue)return{w:0,h:0};let Bt=mt(Ue,"width"),Dt=mt(Ue,"height");return(!Bt||Bt.indexOf("px")===-1)&&(Bt="0"),(!Dt||Dt.indexOf("px")===-1)&&(Dt="0"),{w:parseInt(Bt,10)||Ue.offsetWidth||Ue.clientWidth,h:parseInt(Dt,10)||Ue.offsetHeight||Ue.clientHeight}},_n=He=>{const Ue=te(He),Bt=Qt(Ue),Dt=sn(Ue);return{x:Bt.x,y:Bt.y,w:Dt.w,h:Dt.h}},Zn=(He,Ue)=>{if(!He)return!1;const Bt=Gt(He)?He:[He];return _t(Bt,Dt=>xi(be.fromDom(Dt),Ue))},ho=(He,Ue,Bt,Dt)=>{const Pn=[];let Zo=te(He);Dt=Dt===void 0;const Hr=Bt||(ct().nodeName!=="BODY"?ct().parentNode:null);if(de(Ue))if(Ue==="*")Ue=Ut;else{const Om=Ue;Ue=Fd=>Zn(Fd,Om)}for(;Zo&&!(Zo===Hr||en(Zo.nodeType)||Zm(Zo)||ia(Zo));){if(!Ue||Ue(Zo))if(Dt)Pn.push(Zo);else return[Zo];Zo=Zo.parentNode}return Dt?Pn:null},cs=(He,Ue,Bt)=>{const Dt=ho(He,Ue,Bt,!1);return Dt&&Dt.length>0?Dt[0]:null},Cs=(He,Ue,Bt)=>{let Dt=Ue;if(He){de(Ue)&&(Dt=Pn=>Zn(Pn,Ue));for(let Pn=He[Bt];Pn;Pn=Pn[Bt])if(ve(Dt)&&Dt(Pn))return Pn}return null},Gr=(He,Ue)=>Cs(He,Ue,"nextSibling"),Zi=(He,Ue)=>Cs(He,Ue,"previousSibling"),mi=He=>ve(He.querySelectorAll),Ft=(He,Ue)=>{var Bt,Dt;const Pn=(Dt=(Bt=te(Ue))!==null&&Bt!==void 0?Bt:n.root_element)!==null&&Dt!==void 0?Dt:e;return mi(Pn)?Dr(Pn.querySelectorAll(He)):[]},xn=function(He,Ue,Bt){const Dt=Bt??this;if(Gt(He)){const Pn=[];return l2(He,(Zo,Hr)=>{const Om=te(Zo);Om&&Pn.push(Ue.call(Dt,Om,Hr))}),Pn}else{const Pn=te(He);return Pn?Ue.call(Dt,Pn):!1}},Wo=(He,Ue)=>{xn(He,Bt=>{Tt(Ue,(Dt,Pn)=>{Me(Bt,Pn,Dt)})})},Yt=(He,Ue)=>{xn(He,Bt=>{const Dt=be.fromDom(Bt);Su(Dt,Ue)})},Bn=(He,Ue,Bt,Dt,Pn)=>xn(He,Zo=>{const Hr=de(Ue)?e.createElement(Ue):Ue;return Fe(Bt)&&Wo(Hr,Bt),Dt&&(!de(Dt)&&Dt.nodeType?Hr.appendChild(Dt):de(Dt)&&Yt(Hr,Dt)),Pn?Hr:Zo.appendChild(Hr)}),zn=(He,Ue,Bt)=>Bn(e.createElement(He),He,Ue,Bt,!0),qt=Zh.decode,vo=Zh.encodeAllRaw,_o=(He,Ue,Bt="")=>{let Dt="<"+He;for(const Pn in Ue)or(Ue,Pn)&&(Dt+=" "+Pn+'="'+vo(Ue[Pn])+'"');return lr(Bt)&&En(L.getVoidElements(),He)?Dt+" />":Dt+">"+Bt+"</"+He+">"},Na=He=>{const Ue=e.createElement("div"),Bt=e.createDocumentFragment();Bt.appendChild(Ue),He&&(Ue.innerHTML=He);let Dt;for(;Dt=Ue.firstChild;)Bt.appendChild(Dt);return Bt.removeChild(Ue),Bt},hs=(He,Ue)=>xn(He,Bt=>{const Dt=be.fromDom(Bt);return Ue&&xe(ba(Dt),Pn=>{oa(Pn)&&Pn.dom.length===0?ws(Pn):Ei(Dt,Pn)}),ws(Dt),Dt.dom}),uc=He=>xn(He,Ue=>{const Bt=Ue.attributes;for(let Dt=Bt.length-1;Dt>=0;Dt--)Ue.removeAttributeNode(Bt.item(Dt))}),Il=He=>$.parse(He),km=(He,Ue)=>$.serialize(He,Ue),Dc=He=>{if(fu!==$s.DOM&&e===document){if(o[He])return;o[He]=!0}let Ue=e.getElementById("mceDefaultStyles");if(!Ue){Ue=e.createElement("style"),Ue.id="mceDefaultStyles",Ue.type="text/css";const Bt=e.head;Bt.firstChild?Bt.insertBefore(Ue,Bt.firstChild):Bt.appendChild(Ue)}Ue.styleSheet?Ue.styleSheet.cssText+=He:Ue.appendChild(e.createTextNode(He))},lu=He=>{He||(He=""),xe(He.split(","),Ue=>{i[Ue]=!0,x.load(Ue).catch(it)})},uu=(He,Ue,Bt)=>{xn(He,Dt=>{if(Ut(Dt)){const Pn=be.fromDom(Dt),Zo=Ue.split(" ");xe(Zo,Hr=>{Fe(Bt)?(Bt?pl:Zd)(Pn,Hr):Oh(Pn,Hr)})}})},ji=(He,Ue)=>{uu(He,Ue,!0)},du=(He,Ue)=>{uu(He,Ue,!1)},wn=(He,Ue)=>{const Bt=ie(He),Dt=Ue.split(" ");return Fe(Bt)&&Ss(Dt,Pn=>Bm(Bt,Pn))},Lo=He=>{xn(He,Ue=>Xi(be.fromDom(Ue),"display"))},Kr=He=>{xn(He,Ue=>jg(be.fromDom(Ue),"display","none"))},Pa=He=>{const Ue=ie(He);return Fe(Ue)&&ti(Bi(Ue,"display"),"none")},hi=He=>(He||"mce_")+u++,Ia=He=>{const Ue=ie(He);return Fe(Ue)?Ut(Ue.dom)?Ue.dom.outerHTML:Xc(Ue):""},Ar=(He,Ue)=>{xn(He,Bt=>{Ut(Bt)&&(Bt.outerHTML=Ue)})},Or=(He,Ue)=>{const Bt=te(Ue);return xn(He,Dt=>{const Pn=Bt==null?void 0:Bt.parentNode,Zo=Bt==null?void 0:Bt.nextSibling;return Pn&&(Zo?Pn.insertBefore(Dt,Zo):Pn.appendChild(Dt)),Dt})},Vc=(He,Ue,Bt)=>xn(Ue,Dt=>{var Pn;const Zo=Gt(Ue)?He.cloneNode(!0):He;return Bt&&l2(AS(Dt.childNodes),Hr=>{Zo.appendChild(Hr)}),(Pn=Dt.parentNode)===null||Pn===void 0||Pn.replaceChild(Zo,Dt),Dt}),Bd=(He,Ue)=>{if(He.nodeName!==Ue.toUpperCase()){const Bt=zn(Ue);return l2(Re(He),Dt=>{Me(Bt,Dt.nodeName,_e(He,Dt.nodeName))}),Vc(Bt,He,!0),Bt}else return He},Am=(He,Ue)=>{let Bt=He;for(;Bt;){let Dt=Ue;for(;Dt&&Bt!==Dt;)Dt=Dt.parentNode;if(Bt===Dt)break;Bt=Bt.parentNode}return!Bt&&He.ownerDocument?He.ownerDocument.documentElement:Bt},If=(He,Ue,Bt)=>Dn(Ue)?jr(L,He,{...Bt,isContent:Pn=>{const Zo=Pn.nodeName.toLowerCase();return!!Ue[Zo]}}):jr(L,He,Bt),l0=()=>e.createRange(),u0=(He,Ue,Bt)=>{let Dt=l0(),Pn,Zo;if(He&&Ue&&He.parentNode&&Ue.parentNode){const Hr=He.parentNode;return Dt.setStart(Hr,rp(He)),Dt.setEnd(Ue.parentNode,rp(Ue)),Pn=Dt.extractContents(),Dt=l0(),Dt.setStart(Ue.parentNode,rp(Ue)+1),Dt.setEnd(Hr,rp(He)+1),Zo=Dt.extractContents(),Hr.insertBefore(Hi(fu,Pn,L),He),Bt?Hr.insertBefore(Bt,He):Hr.insertBefore(Ue,He),Hr.insertBefore(Hi(fu,Zo,L),He),hs(He),Bt||Ue}else return},Bg=(He,Ue,Bt,Dt)=>{if(Gt(He)){let Pn=He.length;const Zo=[];for(;Pn--;)Zo[Pn]=Bg(He[Pn],Ue,Bt,Dt);return Zo}else return n.collect&&(He===e||He===r)&&A.push([He,Ue,Bt,Dt]),z.bind(He,Ue,Bt,Dt||fu)},Ld=(He,Ue,Bt)=>{if(Gt(He)){let Dt=He.length;const Pn=[];for(;Dt--;)Pn[Dt]=Ld(He[Dt],Ue,Bt);return Pn}else{if(A.length>0&&(He===e||He===r)){let Dt=A.length;for(;Dt--;){const[Pn,Zo,Hr]=A[Dt];He===Pn&&(!Ue||Ue===Zo)&&(!Bt||Bt===Hr)&&z.unbind(Pn,Zo,Hr)}}return z.unbind(He,Ue,Bt)}},Lg=(He,Ue,Bt)=>z.dispatch(He,Ue,Bt),Zy=(He,Ue,Bt)=>z.dispatch(He,Ue,Bt),jy=He=>{if(He&&xl(He)){const Ue=He.getAttribute("data-mce-contenteditable");return Ue&&Ue!=="inherit"?Ue:He.contentEditable!=="inherit"?He.contentEditable:null}else return null},fu={doc:e,settings:n,win:r,files:i,stdMode:m,boxModel:y,styleSheetLoader:x,boundEvents:A,styles:$,schema:L,events:z,isBlock:oe,root:null,clone:Ie,getRoot:ct,getViewPort:Ot,getRect:_n,getSize:sn,getParent:cs,getParents:ho,get:te,getNext:Gr,getPrev:Zi,select:Ft,is:Zn,add:Bn,create:zn,createHTML:_o,createFragment:Na,remove:hs,setStyle:tt,getStyle:mt,setStyles:Ze,removeAllAttribs:uc,setAttrib:Me,setAttribs:Wo,getAttrib:_e,getPos:Qt,parseStyle:Il,serializeStyle:km,addStyle:Dc,loadCSS:lu,addClass:ji,removeClass:du,hasClass:wn,toggleClass:uu,show:Lo,hide:Kr,isHidden:Pa,uniqueId:hi,setHTML:Yt,getOuterHTML:Ia,setOuterHTML:Ar,decode:qt,encode:vo,insertAfter:Or,replace:Vc,rename:Bd,findCommonAncestor:Am,run:xn,getAttribs:Re,isEmpty:If,createRng:l0,nodeIndex:rp,split:u0,bind:Bg,unbind:Ld,fire:Zy,dispatch:Lg,getContentEditable:jy,getContentEditableParent:He=>{const Ue=ct();let Bt=null;for(let Dt=He;Dt&&Dt!==Ue&&(Bt=jy(Dt),Bt===null);Dt=Dt.parentNode);return Bt},isEditable:He=>{if(Fe(He)){const Ue=Ut(He)?He:He.parentElement;return Fe(Ue)&&xl(Ue)&&yl(be.fromDom(Ue))}else return!1},destroy:()=>{if(A.length>0){let He=A.length;for(;He--;){const[Ue,Bt,Dt]=A[He];z.unbind(Ue,Bt,Dt)}}Tt(i,(He,Ue)=>{x.unload(Ue),delete i[Ue]})},isChildOf:(He,Ue)=>He===Ue||Ue.contains(He),dumpRng:He=>"startContainer: "+He.startContainer.nodeName+", startOffset: "+He.startOffset+", endContainer: "+He.endContainer.nodeName+", endOffset: "+He.endOffset},qy=qk($,n,wt(fu));return fu};$s.DOM=$s(document),$s.nodeIndex=rp;const Gh=$s.DOM,M0=0,ap=1,ip=2,u2=3;class pd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=Gh;let u;const m=()=>{i.remove(A),u&&(u.onerror=u.onload=u=null)},y=()=>{m(),o()},x=()=>{m(),r("Failed to load script: "+n)},A=i.uniqueId();u=document.createElement("script"),u.id=A,u.type="text/javascript",u.src=ut._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=y,u.onerror=x,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===ip}markDone(n){this.states[n]=ip}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=M0),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(x,A)=>{Yo(o.scriptLoadedCallbacks,A).each(L=>{xe(L,$=>$[x](A))}),delete o.scriptLoadedCallbacks[A]},i=x=>{const A=Kt(x,L=>L.status==="rejected");return A.length>0?Promise.reject(_s(A,({reason:L})=>Gt(L)?L:[L])):Promise.resolve()},u=x=>Promise.allSettled(dt(x,A=>o.states[A]===ip?(r("resolve",A),Promise.resolve()):o.states[A]===u2?(r("reject",A),Promise.reject(A)):(o.states[A]=ap,o.loadScript(A).then(()=>{o.states[A]=ip,r("resolve",A);const L=o.queue;return L.length>0?(o.queue=[],u(L).then(i)):Promise.resolve()},()=>(o.states[A]=u2,r("reject",A),Promise.reject(A)))))),m=x=>(o.loading=!0,u(x).then(A=>{o.loading=!1;const L=o.queueLoadedCallbacks.shift();return W.from(L).each(io),i(A)})),y=ll(n);return o.loading?new Promise((x,A)=>{o.queueLoadedCallbacks.push(()=>{m(y).then(x,A)})}):m(y)}}pd.ScriptLoader=new pd;const Gk=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Lr=e=>Je(e)&&En(e,"raw"),bd=e=>Gt(e)&&e.length>1,mr={},d2=Zs("en"),Sc=()=>Yo(mr,d2.get()),wd={getData:()=>go(mr,e=>({...e})),setCode:e=>{e&&d2.set(e)},getCode:()=>d2.get(),add:(e,n)=>{let o=mr[e];o||(mr[e]=o={});const r=dt(ts(n),i=>i.toLowerCase());Tt(n,(i,u)=>{const m=u.toLowerCase();m!==u&&Gk(r,m)?(En(n,m)||(o[m]=i),o[u]=i):o[m]=i})},translate:e=>{const n=Sc().getOr({}),o=m=>ve(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,i=m=>{const y=o(m);return En(n,y)?o(n[y]):Yo(n,y.toLowerCase()).map(o).getOr(y)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(Lr(e))return o(e.raw);if(bd(e)){const m=e.slice(1),y=i(e[0]).replace(/\{([0-9]+)\}/g,(x,A)=>En(m,A)?o(m[A]):x);return u(y)}return u(i(e))},isRtl:()=>Sc().bind(e=>Yo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>En(mr,e)},Qi=()=>{const e=[],n={},o={},r=[],i=(te,ie)=>{const _e=Kt(r,Re=>Re.name===te&&Re.state===ie);xe(_e,Re=>Re.resolve())},u=te=>En(n,te),m=te=>En(o,te),y=te=>{if(o[te])return o[te].instance},x=(te,ie)=>{const _e=wd.getCode(),Re=","+(ie||"")+",";!_e||ie&&Re.indexOf(","+_e+",")===-1||pd.ScriptLoader.add(n[te]+"/langs/"+_e+".js")},A=(te,ie)=>{Qi.languageLoad!==!1&&(u(te)?x(te,ie):oe(te,"loaded").then(()=>x(te,ie)))},L=(te,ie)=>(e.push(ie),o[te]={instance:ie},i(te,"added"),ie),$=te=>{delete n[te],delete o[te]},z=(te,ie)=>de(ie)?de(te)?{prefix:"",resource:ie,suffix:""}:{prefix:te.prefix,resource:ie,suffix:te.suffix}:ie,X=(te,ie)=>{if(n[te])return Promise.resolve();let _e=de(ie)?ie:ie.prefix+ie.resource+ie.suffix;_e.indexOf("/")!==0&&_e.indexOf("://")===-1&&(_e=Qi.baseURL+"/"+_e),n[te]=_e.substring(0,_e.lastIndexOf("/"));const Re=()=>(i(te,"loaded"),Promise.resolve());return o[te]?Re():pd.ScriptLoader.add(_e).then(Re)},oe=(te,ie="added")=>ie==="added"&&m(te)||ie==="loaded"&&u(te)?Promise.resolve():new Promise(_e=>{r.push({name:te,state:ie,resolve:_e})});return{items:e,urls:n,lookup:o,get:y,requireLangPack:A,add:L,remove:$,createUrl:z,load:X,waitFor:oe}};Qi.languageLoad=!0,Qi.baseURL="",Qi.PluginManager=Qi(),Qi.ThemeManager=Qi(),Qi.ModelManager=Qi();const lp=(e,n)=>{let o=null;return{cancel:()=>{re(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{re(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Kh=(e,n)=>{let o=null;const r=()=>{re(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},DS=(e,n,o)=>Kd(e,n,o).isSome(),up=wt("mce-annotation"),af=wt("data-mce-annotation"),Yh=wt("data-mce-annotation-uid"),Xh=wt("data-mce-annotation-active"),em=wt("data-mce-annotation-classes"),cf=wt("data-mce-annotation-attrs"),Jh=e=>n=>No(n,e),U1=(e,n)=>{const o=e.selection.getRng(),r=be.fromDom(o.startContainer),i=be.fromDom(e.getBody()),u=n.fold(()=>"."+up(),x=>`[${af()}="${x}"]`),m=Cu(r,o.startOffset).getOr(r);return mn(m,u,Jh(i)).bind(x=>Er(x,`${Yh()}`).bind(A=>Er(x,`${af()}`).map(L=>{const $=P0(e,A);return{uid:A,name:L,elements:$}})))},Xk=e=>Ps(e)&&Bm(e,up()),f2=(e,n)=>Qu(e,"data-mce-bogus")||DS(e,'[data-mce-bogus="all"]',Jh(n)),P0=(e,n)=>{const o=be.fromDom(e.getBody()),r=ii(o,`[${Yh()}="${n}"]`);return Kt(r,i=>!f2(i,o))},I0=(e,n)=>{const o=be.fromDom(e.getBody()),r=ii(o,`[${af()}="${n}"]`),i={};return xe(r,u=>{if(!f2(u,o)){const m=ni(u,Yh()),y=Yo(i,m).getOr([]);i[m]=y.concat([u])}}),i},RS=(e,n)=>{const o=Zs({}),r=()=>({listeners:[],previous:li()}),i=($,z)=>{u($,X=>(z(X),X))},u=($,z)=>{const X=o.get(),oe=Yo(X,$).getOrThunk(r),te=z(oe);X[$]=te,o.set(X)},m=($,z,X)=>{i($,oe=>{xe(oe.listeners,te=>te(!0,$,{uid:z,nodes:dt(X,ie=>ie.dom)}))})},y=$=>{i($,z=>{xe(z.listeners,X=>X(!1,$))})},x=($,z)=>{xe(P0(e,$),X=>{z?sa(X,Xh(),"true"):Is(X,Xh())})},A=Kh(()=>{const $=Ko(n.getNames());xe($,z=>{u(z,X=>{const oe=X.previous.get();return U1(e,W.some(z)).fold(()=>{oe.each(te=>{y(z),X.previous.clear(),x(te,!1)})},({uid:te,name:ie,elements:_e})=>{ti(oe,te)||(oe.each(Re=>x(Re,!1)),m(ie,te,_e),X.previous.set(te),x(te,!0))}),{previous:X.previous,listeners:X.listeners}})})},30);return e.on("remove",()=>{A.cancel()}),e.on("NodeChange",()=>{A.throttle()}),{addListener:($,z)=>{u($,X=>({previous:X.previous,listeners:X.listeners.concat([z])}))}}},m2=(e,n)=>{const o=af(),r=u=>W.from(u.attr(o)).bind(n.lookup),i=u=>{var m,y;u.attr(Yh(),null),u.attr(af(),null),u.attr(Xh(),null);const x=W.from(u.attr(cf())).map(z=>z.split(",")).getOr([]),A=W.from(u.attr(em())).map(z=>z.split(",")).getOr([]);xe(x,z=>u.attr(z,null));const L=(y=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&y!==void 0?y:[],$=Yr(L,[up()].concat(A));u.attr("class",$.length>0?$.join(" "):null),u.attr(em(),null),u.attr(cf(),null)};e.serializer.addTempAttr(Xh()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(y=>{y.persistent===!1&&(m.name==="span"?m.unwrap():i(m))})})},B0=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>Yo(e,i).map(u=>u.settings),getNames:()=>ts(e)}},MS=(e,n,o)=>Math.min(Math.max(e,n),o),W1=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let h2=0;const L0=e=>{const o=new Date().getTime(),r=Math.floor(W1()*1e9);return h2++,e+"_"+r+h2+String(o)},eM=(e,n)=>{xe(n,o=>{pl(e,o)})},Z1=(e,n)=>{xe(n,o=>{Zd(e,o)})},dp=(e,n)=>be.fromDom(e.dom.cloneNode(n)),tm=e=>dp(e,!1),F0=e=>dp(e,!0),NS=(e,n)=>{const o=be.fromTag(n),r=zf(e);return Fa(o,r),o},PS=(e,n)=>{const o=NS(e,n);yc(e,o);const r=ba(e);return wl(o,r),ws(e),o},IS=(e,n,o=$e)=>{const r=new $a(e,n),i=u=>{let m;do m=r[u]();while(m&&!bt(m)&&!o(m));return W.from(m).filter(bt)};return{current:()=>W.from(r.current()).filter(bt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Qh=(e,n)=>{const o=n||(m=>e.isBlock(m)||jo(m)||qo(m)),r=(m,y,x,A)=>{if(bt(m)){const L=A(m,y,m.data);if(L!==-1)return W.some({container:m,offset:L})}return x().bind(L=>r(L.container,L.offset,x,A))};return{backwards:(m,y,x,A)=>{const L=IS(m,A??e.getRoot(),o);return r(m,y,()=>L.prev().map($=>({container:$,offset:$.length})),x).getOrNull()},forwards:(m,y,x,A)=>{const L=IS(m,A??e.getRoot(),o);return r(m,y,()=>L.next().map($=>({container:$,offset:0})),x).getOrNull()}}},fp=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?W.from(u.dom.nodeValue):W.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(oa,"text"),mp=e=>fp.get(e),hp=e=>fp.getOption(e),BS=(e,n)=>fp.set(e,n),$0=["td","th"],LS=["thead","tbody","tfoot"],FS=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],zi=["li","dd","dt"],Qk=["ul","ol","dl"],$S=["pre","script","textarea","style"],gp=e=>{let n;return o=>(n=n||Ts(e,gt),En(n,no(o)))},e4=e=>no(e)==="table",Ai=e=>Ps(e)&&no(e)==="br",Tu=gp(FS),g2=gp(Qk),Jm=gp(zi),t4=gp(LS),j1=gp($0),H0=gp($S),nm=e=>{const n=[];let o=e.dom;for(;o;)n.push(be.fromDom(o)),o=o.lastChild;return n},HS=e=>{const n=ii(e,"br"),o=Kt(nm(e).slice(-1),Ai);n.length===o.length&&xe(o,ws)},Cd=()=>{const e=be.fromTag("br");return sa(e,"data-mce-bogus","1"),e},lf=e=>{Cl(e),Js(e,Cd())},zS=(e,n)=>{ri(e).each(o=>{wu(o).each(r=>{n.isBlock(no(e))&&Ai(o)&&n.isBlock(no(r))&&ws(o)})})},Oa=Kg,p2=Wm,xc=ci,n4=e=>e.insertContent(Oa,{preserve_zwsp:!0}),z0=Ut,eg=bt,om=e=>(eg(e)&&(e=e.parentNode),z0(e)&&e.hasAttribute("data-mce-caret")),uf=e=>eg(e)&&p2(e.data),eu=e=>om(e)||uf(e),VS=e=>e.firstChild!==e.lastChild||!jo(e.firstChild),q1=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Oa),u=e.parentNode;if(n){const m=e.previousSibling;if(eg(m)){if(eu(m))return m;if(ec(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(i,e)}else{const m=e.nextSibling;if(eg(m)){if(eu(m))return m;if(Ao(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},pp=e=>{const n=e.container();return bt(n)?n.data.charAt(e.offset())===Oa||e.isAtStart()&&uf(n.previousSibling):!1},sm=e=>{const n=e.container();return bt(n)?n.data.charAt(e.offset()-1)===Oa||e.isAtEnd()&&uf(n.nextSibling):!1},V0=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Cd().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},Ao=e=>eg(e)&&e.data[0]===Oa,ec=e=>eg(e)&&e.data[e.data.length-1]===Oa,Qm=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Kf(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},bp=e=>e&&e.hasAttribute("data-mce-caret")?(Qm(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,tr=e=>om(e.startContainer),eh=Math.round,th=e=>e?{left:eh(e.left),top:eh(e.top),bottom:eh(e.bottom),right:eh(e.right),width:eh(e.width),height:eh(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},b2=(e,n)=>(e=th(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),tM=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,US=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,js=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:US(n.top-e.bottom,e,n)},G1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:US(n.bottom-e.top,e,n),WS=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,o4=e=>Fo(e,(n,o)=>n.fold(()=>W.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),y=Math.max(o.bottom,r.bottom);return W.some({top:u,right:m,bottom:y,left:i,width:m-i,height:y-u})}),W.none()),tg=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},tu=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),U0=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},rm=(e,n)=>{if(Ut(e)&&e.hasChildNodes()){const o=e.childNodes,r=MS(n,0,o.length-1);return o[r]}else return e},on=(e,n)=>{if(!(n<0&&Ut(e)&&e.hasChildNodes()))return rm(e,n)},v2=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),y2=e=>de(e)&&e.charCodeAt(0)>=768&&v2.test(e),s4=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},w2=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},ZS=st,W0=qo,Z0=jo,ku=bt,nM=El(["script","style","textarea"]),df=El(["img","input","textarea","hr","iframe","video","audio","object","embed"]),r4=El(["table"]),j0=eu,Au=e=>j0(e)?!1:ku(e)?!nM(e.parentNode):df(e)||Z0(e)||r4(e)||q0(e),a4=e=>Ut(e)&&e.getAttribute("unselectable")==="true",q0=e=>!a4(e)&&W0(e),G0=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(q0(o))return!1;if(ZS(o))return!0}return!0},i4=e=>q0(e)?!Fo(Dr(e.getElementsByTagName("*")),(n,o)=>n||ZS(o),!1):!1,c4=e=>df(e)||i4(e),K0=(e,n)=>Au(e)&&G0(e,n),Y0=Ut,jS=Au,qS=Bh("display","block table"),l4=Bh("float","left right"),ff=w2(Y0,jS,yt(l4)),GS=yt(Bh("white-space","pre pre-line pre-wrap")),nh=bt,X0=jo,KS=$s.nodeIndex,J0=on,C2=e=>e?e.createRange():$s.DOM.createRng(),Q0=e=>de(e)&&/[\r\n\t ]/.test(e),u4=e=>!!e.setStart&&!!e.setEnd,Ec=e=>{const n=e.startContainer,o=e.startOffset;if(Q0(e.toString())&&GS(n.parentNode)&&bt(n)){const r=n.data;if(Q0(r[o-1])||Q0(r[o+1]))return!0}return!1},d4=e=>{const n=e.ownerDocument,o=C2(n),r=n.createTextNode(Zr),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=th(o.getBoundingClientRect());return i.removeChild(r),u},ng=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&bt(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),oh(u)}else return null},YS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,oh=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=th(r[0]):o=th(e.getBoundingClientRect()),!u4(e)&&X0(e)&&YS(o)?d4(e):YS(o)&&u4(e)&&(n=ng(e))!==null&&n!==void 0?n:o},am=(e,n)=>{const o=b2(e,n);return o.width=1,o.right=o.left+1,o},S2=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&tM(m,n[n.length-1])||n.push(m))},r=(m,y)=>{const x=C2(m.ownerDocument);if(y<m.data.length){if(y2(m.data[y]))return;if(y2(m.data[y-1])&&(x.setStart(m,y),x.setEnd(m,y+1),!Ec(x))){o(am(oh(x),!1));return}}y>0&&(x.setStart(m,y-1),x.setEnd(m,y),Ec(x)||o(am(oh(x),!1))),y<m.data.length&&(x.setStart(m,y),x.setEnd(m,y+1),Ec(x)||o(am(oh(x),!0)))},i=e.container(),u=e.offset();if(nh(i))return r(i,u),n;if(Y0(i))if(e.isAtEnd()){const m=J0(i,u);nh(m)&&r(m,m.data.length),ff(m)&&!X0(m)&&o(am(oh(m),!1))}else{const m=J0(i,u);if(nh(m)&&r(m,0),ff(m)&&e.isAtEnd())return o(am(oh(m),!1)),n;const y=J0(e.container(),e.offset()-1);ff(y)&&!X0(y)&&(qS(y)||qS(m)||!ff(m))&&o(am(oh(y),!1)),ff(m)&&o(am(oh(m),!0))}return n},Qe=(e,n,o)=>{const r=()=>(nh(e),n===0),i=()=>nh(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const L=C2(e.ownerDocument);return L.setStart(e,n),L.setEnd(e,n),L},m=()=>(o||(o=S2(Qe(e,n))),o),y=()=>m().length>0,x=L=>L&&e===L.container()&&n===L.offset(),A=L=>J0(e,L?n-1:n);return{container:wt(e),offset:wt(n),toRange:u,getClientRects:m,isVisible:y,isAtStart:r,isAtEnd:i,isEqual:x,getNode:A}};Qe.fromRangeStart=e=>Qe(e.startContainer,e.startOffset),Qe.fromRangeEnd=e=>Qe(e.endContainer,e.endOffset),Qe.after=e=>Qe(e.parentNode,KS(e)+1),Qe.before=e=>Qe(e.parentNode,KS(e)),Qe.isAbove=(e,n)=>ur(lo(n.getClientRects()),gs(e.getClientRects()),js).getOr(!1),Qe.isBelow=(e,n)=>ur(gs(n.getClientRects()),lo(e.getClientRects()),G1).getOr(!1),Qe.isAtStart=e=>e?e.isAtStart():!1,Qe.isAtEnd=e=>e?e.isAtEnd():!1,Qe.isTextPosition=e=>e?bt(e.container()):!1,Qe.isElementPosition=e=>!Qe.isTextPosition(e);const Ou=(e,n)=>{bt(n)&&n.data.length===0&&e.remove(n)},og=(e,n,o)=>{n.insertNode(o),Ou(e,o.previousSibling),Ou(e,o.nextSibling)},XS=(e,n,o)=>{const r=W.from(o.firstChild),i=W.from(o.lastChild);n.insertNode(o),r.each(u=>Ou(e,u.previousSibling)),i.each(u=>Ou(e,u.nextSibling))},K1=(e,n,o)=>{ia(o)?XS(e,n,o):og(e,n,o)},Qc=bt,x2=Kf,JS=$s.nodeIndex,_c=e=>{const n=e.parentNode;return x2(n)?_c(n):n},sg=e=>e?pe(e.childNodes,(n,o)=>(x2(o)&&o.nodeName!=="BR"?n=n.concat(sg(o)):n.push(o),n),[]):[],f4=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Qc(o);)n+=o.data.length;return n},QS=e=>n=>e===n,m4=e=>{let n,o;n=sg(_c(e)),o=fe(n,QS(e),e),n=n.slice(0,o+1);const r=pe(n,(i,u,m)=>(Qc(u)&&Qc(n[m-1])&&i++,i),0);return n=Nc(n,El([e.nodeName])),o=fe(n,QS(e),e),o-r},ex=e=>(Qc(e)?"text()":e.nodeName.toLowerCase())+"["+m4(e)+"]",h4=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},tx=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(Qc(r))u=f4(r,i);else{const y=r.childNodes;i>=y.length?(u="after",i=y.length-1):u="before",r=y[i]}o.push(ex(r));let m=h4(e,r);return m=Nc(m,yt(Kf)),o=o.concat(xa(m,y=>ex(y))),o.reverse().join("/")+","+u},g4=(e,n,o)=>{let r=sg(e);return r=Nc(r,(i,u)=>!Qc(i)||!Qc(r[u-1])),r=Nc(r,El([n])),r[o]},p4=(e,n)=>{let o=e,r=0;for(;Qc(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!Qc(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return Qc(e)&&n>e.data.length&&(n=e.data.length),Qe(e,n)},ev=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=pe(r,(m,y)=>{const x=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(y);return x?(x[1]==="text()"&&(x[1]="#text"),g4(m,x[1],parseInt(x[2],10))):null},e);if(!u)return null;if(!Qc(u)&&u.parentNode){let m;return i==="after"?m=JS(u)+1:m=JS(u),Qe(u.parentNode,m)}return p4(u,parseInt(i,10))},tv=qo,b4=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&bt(i);i=i.previousSibling)r+=e(i.data).length;return r},nx=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let m=i?r.startOffset:r.endOffset;const y=[],x=e.getRoot();if(bt(u))y.push(o?b4(n,u,m):m);else{let A=0;const L=u.childNodes;m>=L.length&&L.length&&(A=1,m=Math.max(0,L.length-1)),y.push(e.nodeIndex(L[m],o)+A)}for(let A=u;A&&A!==x;A=A.parentNode)y.push(e.nodeIndex(A,o));return y},v4=(e,n,o,r)=>{const i=n.dom,u=nx(i,e,o,r,!0),m=n.isForward(),y=tr(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...y};{const x=nx(i,e,o,r,!1);return{start:u,end:x,forward:m,...y}}},nr=(e,n,o)=>{let r=0;return ut.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},E2=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ut(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},ox=e=>(E2(e,!0),E2(e,!1),e),sx=(e,n)=>{if(Ut(e)&&(e=rm(e,n),tv(e)))return e;if(eu(e)){bt(e)&&om(e)&&(e=e.parentNode);let o=e.previousSibling;if(tv(o)||(o=e.nextSibling,tv(o)))return o}},vp=e=>sx(e.startContainer,e.startOffset)||sx(e.endContainer,e.endOffset),Oi=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||tv(r)){const m=r.nodeName;return{name:m,index:nr(o.dom,m,r)}}const u=vp(i);if(u){const m=u.tagName;return{name:m,index:nr(o.dom,m,u)}}return v4(e,o,n,i)},Tl=e=>{const n=e.getRng();return{start:tx(e.dom.getRoot(),Qe.fromRangeStart(n)),end:tx(e.dom.getRoot(),Qe.fromRangeEnd(n)),forward:e.isForward()}},rx=e=>({rng:e.getRng(),forward:e.isForward()}),_2=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},T2=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),y=m.nodeName,x=e.isForward();if(y==="IMG")return{name:y,index:nr(o,y,m)};const A=ox(r.cloneRange());if(!u){A.collapse(!1);const $=_2(o,i+"_end",n);K1(o,A,$)}r=ox(r),r.collapse(!0);const L=_2(o,i+"_start",n);return K1(o,r,L),e.moveToBookmark({id:i,keep:!0,forward:x}),{id:i,forward:x}},y4=(e,n,o=!1)=>n===2?Oi(xc,o,e):n===3?Tl(e):n?rx(e):T2(e,!1),nv=Ae(Oi,Eo,!0),ov=e=>{const n=u=>u(e),o=wt(e),r=()=>i,i={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:gt,isError:$e,map:u=>ua.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>W.some(e)};return i},Y1=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:$e,isError:gt,map:n,mapError:r=>ua.error(r(e)),bind:n,exists:$e,forall:gt,getOr:Eo,or:Eo,getOrThunk:fn,orThunk:fn,getOrDie:Mn(String(e)),each:it,toOptional:W.none};return o},ua={value:ov,error:Y1,fromOption:(e,n)=>e.fold(()=>Y1(n),ov)},nu={generate:e=>{if(!Gt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return xe(e,(r,i)=>{const u=ts(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],y=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Gt(y))throw new Error("case arguments must be an array");n.push(m),o[m]=(...x)=>{const A=x.length;if(A!==y.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+y.length+" ("+y+"), got "+A);return{fold:(...$)=>{if($.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+$.length);return $[i].apply(null,x)},match:$=>{const z=ts($);if(n.length!==z.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+z.join(","));if(!Ss(n,oe=>et(z,oe)))throw new Error("Not all branches were specified when using match. Specified: "+z.join(", ")+`
Required: `+n.join(", "));return $[m].apply(null,x)},log:$=>{console.log($,{constructors:n,constructor:m,params:x})}}}}),o}};nu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ir=e=>{const n=[],o=[];return xe(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},Sd=e=>e.type==="inline-command"||e.type==="inline-format",rg=e=>e.type==="block-command"||e.type==="block-format",sv=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,ax=e=>{var n;const o=i=>ua.error({message:i,pattern:e}),r=(i,u,m)=>{if(e.format!==void 0){let y;if(Gt(e.format)){if(!Ss(e.format,de))return o(i+" pattern has non-string items in the `format` array");y=e.format}else if(de(e.format))y=[e.format];else return o(i+" pattern has non-string `format` parameter");return ua.value(u(y))}else return e.cmd!==void 0?de(e.cmd)?ua.value(m(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!Je(e))return o("Raw pattern is not an object");if(!de(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!de(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,u=e.end;return u.length===0&&(u=i,i=""),r("Inline",m=>({type:"inline-format",start:i,end:u,format:m}),(m,y)=>({type:"inline-command",start:i,end:u,cmd:m,value:y}))}else{if(e.replacement!==void 0)return de(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):ua.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:i}),(u,m)=>({type:"block-command",start:e.start,cmd:u,value:m,trigger:i}))}}},ix=e=>Kt(e,rg),sh=e=>Kt(e,Sd),Di=(e,n)=>({inlinePatterns:sh(e),blockPatterns:ix(e),dynamicPatternsLookup:n}),mf=(e,n)=>({...e,blockPatterns:Kt(e.blockPatterns,o=>sv(o,n))}),cx=e=>{const n=ir(dt(e,ax));return xe(n.errors,o=>console.error(o.message,o.pattern)),n.values},S4=e=>n=>{const o=e(n);return cx(o)},x4=(e,n)=>e.dispatch("PreProcess",n),rv=(e,n)=>e.dispatch("PostProcess",n),k2=e=>{e.dispatch("remove")},A2=e=>{e.dispatch("detach")},O2=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},lx=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},ux=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},dx=e=>{e.dispatch("PreInit")},fx=e=>{e.dispatch("PostRender")},E4=e=>{e.dispatch("Init")},Ri=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},mx=(e,n,o)=>{e.dispatch(n,o)},im=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},D2=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},hx=(e,n)=>e.dispatch("BeforeSetContent",n),R2=(e,n)=>e.dispatch("SetContent",n),av=(e,n)=>e.dispatch("BeforeGetContent",n),X1=(e,n)=>e.dispatch("GetContent",n),rh=(e,n)=>{e.dispatch("AutocompleterStart",n)},_4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},M2=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},wa=e=>{e.dispatch("AutocompleterEnd")},Ca=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Da=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),ps=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),za=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),da=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),J1=Y().deviceType,iv=J1.isTouch(),N2=$s.DOM,gx=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Fo(n,(o,r)=>{const i=r.split("="),u=i[0],m=i.length>1?i[1]:u;return o[Ns(u)]=Ns(m),o},{})},P2=e=>xt(e,RegExp),rn=e=>n=>n.options.get(e),yp=e=>de(e)||Je(e),ah=(e,n="")=>o=>{const r=de(o);if(r)if(o.indexOf("=")!==-1){const i=gx(o);return{value:Yo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},px=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:ah(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:ah(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=de(o)&&ds(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=et(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Xt(o)?{valid:!0,value:o}:de(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||de(o)||at(o,de);return r?de(o)?{value:dt(o.split(","),Ns),valid:r}:Gt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:fv(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=de(o)||at(o,de);return r?{value:Gt(o)?o:dt(o.split(","),Ns),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Xt(o)||de(o);return r?o===!1||J1.isiPhone()||J1.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!iv}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||de(o)||ve(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||de(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>Xt(o)?(e.initialized&&rb(e)!==o&&Promise.resolve().then(()=>{da(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=at(o,de);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:yp}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:yp}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:yp}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:yp}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>de(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>at(o,Je)||o===!1?{value:cx(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ve(o)?{value:S4(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>at(o,P2)?{value:o,valid:!0}:P2(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:wd.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:N2.getAttrib(e.getElement(),"placeholder")})})},v7=rn("iframe_attrs"),ag=rn("doctype"),bx=rn("document_base_url"),el=rn("body_id"),oM=rn("body_class"),vx=rn("content_security_policy"),$c=rn("br_in_pre"),Va=rn("forced_root_block"),hf=rn("forced_root_block_attrs"),cm=rn("newline_behavior"),tc=rn("br_newline_selector"),I2=rn("no_newline_selector"),B2=rn("keep_styles"),yx=rn("end_container_on_empty_block"),L2=rn("automatic_uploads"),cv=rn("images_reuse_filename"),F2=rn("images_replace_blob_uris"),lv=rn("icons"),wx=rn("icons_url"),Cx=rn("images_upload_url"),Q1=rn("images_upload_base_path"),eb=rn("images_upload_credentials"),$2=rn("images_upload_handler"),H2=rn("content_css_cors"),uv=rn("referrer_policy"),z2=rn("language"),T4=rn("language_url"),tb=rn("indent_use_margin"),k4=rn("indentation"),A4=rn("content_css"),O4=rn("content_style"),V2=rn("font_css"),D4=rn("directionality"),Sx=rn("inline_boundaries_selector"),nc=rn("object_resizing"),U2=rn("resize_img_proportional"),xx=rn("placeholder"),W2=rn("event_root"),dv=rn("service_message"),wp=rn("theme"),R4=rn("theme_url"),Cp=rn("model"),Ex=rn("model_url"),ig=rn("inline_boundaries"),Z2=rn("formats"),_x=rn("preview_styles"),j2=rn("format_empty_lines"),Tx=rn("format_noneditable_selector"),kx=rn("custom_ui_selector"),fv=rn("inline"),M4=rn("hidden_input"),Ax=rn("submit_patch"),Ox=rn("add_form_submit_trigger"),Dx=rn("add_unload_trigger"),mv=rn("custom_undo_redo_levels"),Sp=rn("disable_nodechange"),q2=rn("readonly"),N4=rn("editable_root"),hv=rn("content_css_cors"),gv=rn("plugins"),Du=rn("external_plugins"),pv=rn("block_unsupported_drop"),bv=rn("visual"),G2=rn("visual_table_class"),oc=rn("visual_anchor_class"),lm=rn("iframe_aria_text"),ih=rn("setup"),P4=rn("init_instance_callback"),ch=rn("urlconverter_callback"),vv=rn("auto_focus"),I4=rn("browser_spellcheck"),B4=rn("protect"),Rx=rn("paste_block_drop"),xp=rn("paste_data_images"),Mx=rn("paste_preprocess"),L4=rn("paste_postprocess"),nb=rn("newdocument_content"),K2=rn("paste_webkit_styles"),F4=rn("paste_remove_styles_if_webkit"),Nx=rn("paste_merge_formats"),Px=rn("smart_paste"),Y2=rn("paste_as_text"),sM=rn("paste_tab_spaces"),Ep=rn("allow_html_data_urls"),Ix=rn("text_patterns"),X2=rn("text_patterns_lookup"),J2=rn("noneditable_class"),yv=rn("editable_class"),$4=rn("noneditable_regexp"),Bx=rn("preserve_cdata"),rM=rn("highlight_on_focus"),cg=rn("xss_sanitization"),wv=rn("init_content_sync"),_p=e=>e.options.isSet("text_patterns_lookup"),ob=e=>ut.explode(e.options.get("font_size_style_values")),H4=e=>ut.explode(e.options.get("font_size_classes")),Lx=e=>e.options.get("encoding")==="xml",z4=e=>ut.explode(e.options.get("images_file_types")),aM=rn("table_tab_navigation"),sb=rn("details_initial_state"),Q2=rn("details_serialized_state"),Fx=rn("sandbox_iframes"),ew=e=>e.options.get("sandbox_iframes_exclusions"),$x=rn("convert_unsafe_embeds"),V4=rn("license_key"),U4=rn("api_key"),rb=rn("disabled"),Tp=Ut,ab=bt,tw=e=>{const n=e.parentNode;n&&n.removeChild(e)},Cv=e=>{const n=xc(e);return{count:e.length-n.length,text:n}},nw=e=>{let n;for(;(n=e.data.lastIndexOf(Oa))!==-1;)e.deleteData(n,1)},ow=(e,n)=>(kp(e),n),W4=(e,n)=>{const o=Cv(e.data.substr(0,n.offset())),r=Cv(e.data.substr(n.offset()));return(o.text+r.text).length>0?(nw(e),Qe(e,n.offset()-o.count)):n},Sv=(e,n)=>{const o=n.container(),r=gi(Dr(o.childNodes),e).map(i=>i<n.offset()?Qe(o,n.offset()-1):n).getOr(n);return kp(e),r},ib=(e,n)=>ab(e)&&n.container()===e?W4(e,n):ow(e,n),Hx=(e,n)=>n.container()===e.parentNode?Sv(e,n):ow(e,n),iM=(e,n)=>Qe.isTextPosition(n)?ib(e,n):Hx(e,n),kp=e=>{Tp(e)&&eu(e)&&(VS(e)?e.removeAttribute("data-mce-caret"):tw(e)),ab(e)&&(nw(e),e.data.length===0&&tw(e))},Ap=qo,zx=ka,Vx=Qg,Tc="*[contentEditable=false],video,audio,embed,object",xv=(e,n,o)=>{const r=b2(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const y=e.ownerDocument.documentElement;i=e.scrollLeft||y.scrollLeft,u=e.scrollTop||y.scrollTop}else{const y=e.getBoundingClientRect();i=e.scrollLeft-y.left,u=e.scrollTop-y.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},sw=e=>{var n,o;const r=ii(be.fromDom(e),Tc);for(let i=0;i<r.length;i++){const u=r[i].dom;let m=u.previousSibling;if(ec(m)){const y=m.data;y.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(y.length-1,1)}m=u.nextSibling,Ao(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},Z4=(e,n,o,r)=>{const i=li();let u,m;const y=Va(e),x=e.dom,A=(te,ie)=>{let _e;if(L(),Vx(ie))return null;if(o(ie)){const Re=V0(y,ie,te),Me=xv(n,ie,te);x.setStyle(Re,"top",Me.top),x.setStyle(Re,"caret-color","transparent"),m=Re;const Ie=x.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});x.setStyles(Ie,{...Me}),x.add(n,Ie),i.set({caret:Ie,element:ie,before:te}),te&&x.addClass(Ie,"mce-visual-caret-before"),$(),_e=ie.ownerDocument.createRange(),_e.setStart(Re,0),_e.setEnd(Re,0)}else return m=q1(ie,te),_e=ie.ownerDocument.createRange(),cb(m.nextSibling)?(_e.setStart(m,0),_e.setEnd(m,0)):(_e.setStart(m,1),_e.setEnd(m,1)),_e;return _e},L=()=>{sw(n),m&&(kp(m),m=null),i.on(te=>{x.remove(te.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},$=()=>{u=setInterval(()=>{i.on(te=>{r()?x.toggleClass(te.caret,"mce-visual-caret-hidden"):x.addClass(te.caret,"mce-visual-caret-hidden")})},500)};return{show:A,hide:L,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(te=>{const ie=xv(n,te.element,te.before);x.setStyles(te.caret,{...ie})})},destroy:()=>clearInterval(u)}},rw=()=>Nn.browser.isFirefox(),cb=e=>Ap(e)||zx(e),lb=e=>(cb(e)||ql(e)&&rw())&&Fm(be.fromDom(e)).exists(yl),Ux=st,Op=qo,aw=ka,iw=Bh("display","block table table-cell table-row table-caption list-item"),Wx=eu,ub=om,j4=Ut,db=bt,Ev=Au,lh=e=>e>0,uh=e=>e<0,gf=(e,n)=>{let o;for(;o=e(n);)if(!ub(o))return o;return null},dh=(e,n,o,r,i)=>{const u=new $a(e,r),m=Op(e)||ub(e);let y;if(uh(n)){if(m&&(y=gf(u.prev.bind(u),!0),o(y)))return y;for(;y=gf(u.prev.bind(u),i);)if(o(y))return y}if(lh(n)){if(m&&(y=gf(u.next.bind(u),!0),o(y)))return y;for(;y=gf(u.next.bind(u),i);)if(o(y))return y}return null},xd=(e,n)=>{const o=i=>Ux(i.dom),r=i=>i.dom===n;return Yc(be.fromDom(e),o,r).map(i=>i.dom).getOr(n)},um=(e,n)=>{for(;e&&e!==n;){if(iw(e))return e;e=e.parentNode}return null},Ru=(e,n,o)=>um(e.container(),o)===um(n.container(),o),_v=(e,n)=>{if(!n)return W.none();const o=n.container(),r=n.offset();return j4(o)?W.from(o.childNodes[r+e]):W.none()},Zx=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},jx=(e,n,o)=>um(n,e)===um(o,e),cw=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&Wx(u)&&(u=u[r]),Op(u)||aw(u)){if(jx(n,u,i))return u;break}if(Ev(u))break;i=i.parentNode}return null},Dp=Ae(Zx,!0),Rp=Ae(Zx,!1),Mp=(e,n,o)=>{let r;const i=Ae(cw,!0,n),u=Ae(cw,!1,n),m=o.startContainer,y=o.startOffset;if(om(m)){const x=db(m)?m.parentNode:m,A=x.getAttribute("data-mce-caret");if(A==="before"&&(r=x.nextSibling,lb(r)))return Dp(r);if(A==="after"&&(r=x.previousSibling,lb(r)))return Rp(r)}if(!o.collapsed)return o;if(bt(m)){if(Wx(m)){if(e===1){if(r=u(m),r)return Dp(r);if(r=i(m),r)return Rp(r)}if(e===-1){if(r=i(m),r)return Rp(r);if(r=u(m),r)return Dp(r)}return o}if(ec(m)&&y>=m.data.length-1)return e===1&&(r=u(m),r)?Dp(r):o;if(Ao(m)&&y<=1)return e===-1&&(r=i(m),r)?Rp(r):o;if(y===m.data.length)return r=u(m),r?Dp(r):o;if(y===0)return r=i(m),r?Rp(r):o}return o},qx=(e,n)=>_v(e?0:-1,n).filter(Op),Np=(e,n,o)=>{const r=Mp(e,n,o);return e===-1?Qe.fromRangeStart(r):Qe.fromRangeEnd(r)},Pp=e=>W.from(e.getNode()).map(be.fromDom),q4=e=>W.from(e.getNode(!0)).map(be.fromDom),lw=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Ip=(e,n)=>{const o=Ru(e,n);return!o&&jo(e.getNode())?!0:o};var Ua;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ua||(Ua={}));const Gx=qo,pf=bt,Kx=Ut,Tv=jo,Bp=Au,Yx=c4,kv=K0,cM=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},uw=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Wa=(e,n)=>{if(lh(e)){if(Bp(n.previousSibling)&&!pf(n.previousSibling))return Qe.before(n);if(pf(n))return Qe(n,0)}if(uh(e)){if(Bp(n.nextSibling)&&!pf(n.nextSibling))return Qe.after(n);if(pf(n))return Qe(n,n.data.length)}return uh(e)?Tv(n)?Qe.before(n):Qe.after(n):Qe.before(n)},dw=(e,n)=>{const o=n.nextSibling;return o&&Bp(o)?pf(o)?Qe(o,0):Qe.before(o):bf(Ua.Forwards,Qe.after(n),e)},bf=(e,n,o)=>{let r,i,u,m;if(!Kx(o)||!n)return null;if(n.isEqual(Qe.after(o))&&o.lastChild){if(m=Qe.after(o.lastChild),uh(e)&&Bp(o.lastChild)&&Kx(o.lastChild))return Tv(o.lastChild)?Qe.before(o.lastChild):m}else m=n;const y=m.container();let x=m.offset();if(pf(y)){if(uh(e)&&x>0)return Qe(y,--x);if(lh(e)&&x<y.length)return Qe(y,++x);r=y}else{if(uh(e)&&x>0&&(i=uw(y,x-1),Bp(i)))return!Yx(i)&&(u=dh(i,e,kv,i),u)?pf(u)?Qe(u,u.data.length):Qe.after(u):pf(i)?Qe(i,i.data.length):Qe.before(i);if(lh(e)&&x<y.childNodes.length&&(i=uw(y,x),Bp(i)))return Tv(i)?dw(o,i):!Yx(i)&&(u=dh(i,e,kv,i),u)?pf(u)?Qe(u,0):Qe.before(u):pf(i)?Qe(i,0):Qe.after(i);r=i||m.getNode()}if(r&&(lh(e)&&m.isAtEnd()||uh(e)&&m.isAtStart())&&(r=dh(r,e,gt,o,!0),kv(r,o)))return Wa(e,r);i=r&&dh(r,e,kv,o);const A=Ve(Kt(cM(y,o),Gx));return A&&(!i||!A.contains(i))?(lh(e)?m=Qe.after(A):m=Qe.before(A),m):i?Wa(e,i):null},tl=e=>({next:n=>bf(Ua.Forwards,n,e),prev:n=>bf(Ua.Backwards,n,e)}),Xx=(e,n,o)=>{const r=e?Qe.before(o):Qe.after(o);return Vi(e,n,r)},fw=e=>jo(e)?Qe.before(e):Qe.after(e),Av=e=>Qe.isTextPosition(e)?e.offset()===0:Au(e.getNode()),mw=e=>{if(Qe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Au(e.getNode(!0))},lg=(e,n)=>!Qe.isTextPosition(e)&&!Qe.isTextPosition(n)&&e.getNode()===n.getNode(!0),hw=e=>!Qe.isTextPosition(e)&&jo(e.getNode()),vf=(e,n,o)=>e?!lg(n,o)&&!hw(n)&&mw(n)&&Av(o):!lg(o,n)&&Av(n)&&mw(o),Vi=(e,n,o)=>{const r=tl(n);return W.from(e?r.next(o):r.prev(o))},ug=(e,n,o)=>Vi(e,n,o).bind(r=>Ru(o,r,n)&&vf(e,o,r)?Vi(e,n,r):W.some(r)),yf=(e,n,o,r)=>ug(e,n,o).bind(i=>r(i)?yf(e,n,i,r):W.some(i)),dg=(e,n)=>{const o=e?n.firstChild:n.lastChild;return bt(o)?W.some(Qe(o,e?0:o.data.length)):o?Au(o)?W.some(e?Qe.before(o):fw(o)):Xx(e,n,o):W.none()},sc=Ae(Vi,!0),di=Ae(Vi,!1),Ui=Ae(dg,!0),Mu=Ae(dg,!1),Ov="_mce_caret",kl=e=>Ut(e)&&e.id===Ov,fg=(e,n)=>{let o=n;for(;o&&o!==e;){if(kl(o))return o;o=o.parentNode}return null},G4=e=>de(e.start),Jx=e=>En(e,"rng"),mg=e=>En(e,"id"),Qx=e=>En(e,"name"),eE=e=>ut.isArray(e.start),Dv=e=>!Qx(e)&&Xt(e.forward)?e.forward:!0,tE=(e,n)=>(Ut(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),fb=(e,n)=>{const o=W.from(ev(e.getRoot(),n.start)),r=W.from(ev(e.getRoot(),n.end));return ur(o,r,(i,u)=>{const m=e.createRng();return m.setStart(i.container(),i.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:Dv(n)}})},K4=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Oa);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},nE=e=>!e.hasChildNodes(),Y4=(e,n)=>Mu(e).fold($e,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),X4=(e,n,o)=>nE(n)&&fg(e,n)?(K4(n,o),!0):!1,mb=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let m=u,y=i[0];for(let x=i.length-1;m&&x>=1;x--){const A=m.childNodes;if(X4(u,m,r))return!0;if(i[x]>A.length-1)return X4(u,m,r)?!0:Y4(m,r);m=A[i[x]]}bt(m)&&(y=Math.min(i[0],m.data.length)),Ut(m)&&(y=Math.min(i[0],m.childNodes.length)),n?r.setStart(m,y):r.setEnd(m,y)}return!0},Rv=e=>bt(e)&&e.data.length>0,gw=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let m,y;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,y=1):Rv(r.nextSibling)?(m=r.nextSibling,y=0):Rv(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)+1):(m=i,y=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,y=1):Rv(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)):(m=i,y=e.nodeIndex(r)),!u){const x=r.previousSibling,A=r.nextSibling;ut.each(ut.grep(r.childNodes),$=>{bt($)&&($.data=$.data.replace(/\uFEFF/g,""))});let L;for(;L=e.get(o.id+"_"+n);)e.remove(L,!0);if(bt(A)&&bt(x)&&!Nn.browser.isOpera()){const $=x.data.length;x.appendData(A.data),e.remove(A),m=x,y=$}}return W.some(Qe(m,y))}else return W.none()},J4=(e,n)=>{const o=e.createRng();return mb(e,!0,n,o)&&mb(e,!1,n,o)?W.some({range:o,forward:Dv(n)}):W.none()},Po=(e,n)=>{const o=gw(e,"start",n),r=gw(e,"end",n);return ur(o,r.or(o),(i,u)=>{const m=e.createRng();return m.setStart(tE(e,i.container()),i.offset()),m.setEnd(tE(e,u.container()),u.offset()),{range:m,forward:Dv(n)}})},dm=(e,n)=>W.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),hg=(e,n)=>{const o=e.dom;if(n){if(eE(n))return J4(o,n);if(G4(n))return fb(o,n);if(mg(n))return Po(o,n);if(Qx(n))return dm(o,n);if(Jx(n))return W.some({range:n.rng,forward:Dv(n)})}return W.none()},Mv=(e,n,o)=>y4(e,n,o),Q4=(e,n)=>{hg(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Hc=e=>Ut(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",gg=(e=>n=>e===n)(Zr),fm=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Nv=e=>!fm(e)&&!gg(e)&&!Wm(e),oE=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},sE=e=>_s(e,n=>{const o=U0(n);return o?[be.fromDom(o)]:[]}),hb=e=>oE(e).length>1,e3=e=>Kt(sE(e),j1),t3=e=>ii(e,"td[data-mce-selected],th[data-mce-selected]"),Pv=(e,n)=>{const o=t3(n);return o.length>0?o:e3(e)},pg=e=>Pv(oE(e.selection.getSel()),be.fromDom(e.getBody())),gb=(e,n)=>Kd(e,"table",n),Iv=e=>{const n=e.startContainer,o=e.startOffset;return bt(n)?o===0?W.some(be.fromDom(n)):W.none():W.from(n.childNodes[o]).map(be.fromDom)},uM=e=>{const n=e.endContainer,o=e.endOffset;return bt(n)?o===n.data.length?W.some(be.fromDom(n)):W.none():W.from(n.childNodes[o-1]).map(be.fromDom)},rE=e=>Kc(e).fold(wt([e]),n=>[e].concat(rE(n))),bg=e=>ri(e).fold(wt([e]),n=>no(n)==="br"?wu(n).map(o=>[e].concat(bg(o))).getOr([]):[e].concat(bg(n))),pw=(e,n)=>ur(Iv(n),uM(n),(o,r)=>{const i=Vo(rE(e),Ae(No,o)),u=Vo(bg(e),Ae(No,r));return i.isSome()&&u.isSome()}).getOr(!1),bw=(e,n,o,r)=>{const i=o,u=new $a(o,i),m=Qo(e.schema.getMoveCaretBeforeOnEnterElements(),(x,A)=>!et(["td","th","table"],A.toLowerCase()));let y=o;do{if(bt(y)&&ut.trim(y.data).length!==0){r?n.setStart(y,0):n.setEnd(y,y.data.length);return}if(m[y.nodeName]){r?n.setStartBefore(y):y.nodeName==="BR"?n.setEndBefore(y):n.setEndAfter(y);return}}while(y=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Bv=e=>{const n=e.selection.getSel();return Fe(n)&&n.rangeCount>0},Ed=(e,n)=>{const o=pg(e);o.length>0?xe(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},aE=(e,n,o)=>{const r=T2(e,n);o(r),e.moveToBookmark(r)},pb=e=>oo(e==null?void 0:e.nodeType),bb=e=>Ut(e)&&!Hc(e)&&!kl(e)&&!Kf(e),n3=(e,n)=>{if(bb(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},iE=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),m=qo(u);aE(r,!0,()=>{n()}),m&&qo(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&o3(i,r)},o3=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:m}=i,y=n.getNode();if(!n3(e,y)&&Ut(u)){const x=u.childNodes,A=e.getRoot();let L;if(m<x.length){const $=x[m];L=new $a($,(o=e.getParent($,e.isBlock))!==null&&o!==void 0?o:A)}else{const $=x[x.length-1];L=new $a($,(r=e.getParent($,e.isBlock))!==null&&r!==void 0?r:A),L.next(!0)}for(let $=L.current();$;$=L.next()){if(e.getContentEditable($)==="false")return;if(bt($)&&!vw($)){i.setStart($,0),n.setRng(i);return}}}},s3=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ut(e)||!vw(e))return e}},cE=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Yl(e,n),Lp=(e,n,o)=>e.schema.isValidChild(n,o),vw=(e,n=!1)=>{if(Fe(e)&&bt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Jc(o)}else return!1},Jt=e=>Fe(e)&&bt(e)&&e.length===0,Za=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Tx(e),i=lr(r)?o:`${o},${r}`;return xi(be.fromDom(n),i)},vb=(e,n)=>{const o=e.dom;return bb(n)&&o.getContentEditable(n)==="false"&&Za(e,n)&&o.select('[contenteditable="true"]',n).length===0},Fr=(e,n)=>ve(e)?e(n):(Fe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Al=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Lv=(e,n)=>{if(en(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=$1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},vg=(e,n,o)=>{const r=e.getStyle(n,o);return Lv(r,o)},Fv=(e,n)=>{let o;return e.getParent(n,r=>Ut(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},yb=(e,n,o)=>e.getParents(n,o,e.getRoot()),yw=(e,n,o)=>{const r=e.formatter.get(n);return Fe(r)&&_t(r,o)},lE=(e,n)=>yw(e,n,r=>{const i=u=>ve(u)||u.length>1&&u.charAt(0)==="%";return _t(["styles","attributes"],u=>Yo(r,u).exists(m=>{const y=Gt(m)?m:Ii(m);return _t(y,i)}))}),r3=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>Qo(u,(m,y)=>_t(r,x=>x===y));return yw(e,n,u=>{const m=i(u);return yw(e,o,y=>{const x=i(y);return Qa(m,x)})})},wf=e=>or(e,"block"),a3=e=>wf(e)&&e.wrapper===!0,yg=e=>wf(e)&&e.wrapper!==!0,kc=e=>or(e,"selector"),fa=e=>or(e,"inline"),$v=e=>kc(e)&&fa(e)&&ti(Yo(e,"mixed"),!0),Ac=e=>kc(e)&&e.expand!==!1&&!fa(e),mm=e=>{const n=[];let o=e;for(;o;){if(bt(o)&&o.data!==Oa||o.childNodes.length>1)return[];Ut(o)&&n.push(o),o=o.firstChild}return n},wb=e=>mm(e).length>0,hm=e=>kl(e.dom)&&wb(e.dom),Fp=Hc,Cb=yb,Sb=vw,i3=cE,c3=e=>jo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,uE=(e,n)=>{let o=n;for(;o;){if(Ut(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},dE=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},fE=(e,n,o)=>dE(e,n,o,r=>gg(r)||fm(r)),Hv=(e,n,o)=>dE(e,n,o,Nv),mE=(e,n,o,r,i,u)=>{let m;const y=e.getParent(o,e.isBlock)||n,x=(L,$,z)=>{const X=Qh(e),oe=i?X.backwards:X.forwards;return W.from(oe(L,$,(te,ie)=>Fp(te.parentNode)?-1:(m=te,z(i,te,ie)),y))};return x(o,r,fE).bind(L=>u?x(L.container,L.offset+(i?-1:0),Hv):W.some(L)).orThunk(()=>m?W.some({container:m,offset:i?0:m.length}):W.none())},xb=(e,n,o,r,i)=>{const u=r[i];bt(r)&&lr(r.data)&&u&&(r=u);const m=Cb(e,r);for(let y=0;y<m.length;y++)for(let x=0;x<n.length;x++){const A=n[x];if(!(Fe(A.collapsed)&&A.collapsed!==o.collapsed)&&kc(A)&&e.is(m[y],A.selector))return m[y]}return r},Mi=(e,n,o,r)=>{var i;let u=o;const m=e.getRoot(),y=n[0];if(wf(y)&&(u=y.wrapper?null:e.getParent(o,y.block,m)),!u){const x=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:m;u=e.getParent(bt(o)?o.parentNode:o,A=>A!==m&&i3(e.schema,A),x)}if(u&&wf(y)&&y.wrapper&&(u=Cb(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Al(u,"br")););return u||o},ou=(e,n,o,r)=>{const i=o.parentNode;return Fe(o[r])?!1:i===n||en(i)||e.isBlock(i)?!0:ou(e,n,i,r)},zc=(e,n,o,r,i)=>{let u=o;const m=i?"previousSibling":"nextSibling",y=e.getRoot();if(bt(o)&&!Sb(o)&&(i?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let x=u[m];x;x=x[m]){const A=bt(x)&&!ou(e,y,x,m);if(!Fp(x)&&!c3(x)&&!Sb(x,A))return u}if(u===y||u.parentNode===y){o=u;break}u=u.parentNode}return o},Eb=e=>Fp(e.parentNode)||Fp(e),gm=(e,n,o,r=!1)=>{let{startContainer:i,startOffset:u,endContainer:m,endOffset:y}=n;const x=o[0];return Ut(i)&&i.hasChildNodes()&&(i=rm(i,u),bt(i)&&(u=0)),Ut(m)&&m.hasChildNodes()&&(m=rm(m,n.collapsed?y:y-1),bt(m)&&(y=m.data.length)),i=uE(e,i),m=uE(e,m),Eb(i)&&(i=Fp(i)?i:i.parentNode,n.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,bt(i)&&(u=n.collapsed?i.length:0)),Eb(m)&&(m=Fp(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,bt(m)&&(y=n.collapsed?0:m.length)),n.collapsed&&(mE(e,e.getRoot(),i,u,!0,r).each(({container:$,offset:z})=>{i=$,u=z}),mE(e,e.getRoot(),m,y,!1,r).each(({container:$,offset:z})=>{m=$,y=z})),(fa(x)||x.block_expand)&&((!fa(x)||!bt(i)||u===0)&&(i=zc(e,o,i,u,!0)),(!fa(x)||!bt(m)||y===m.data.length)&&(m=zc(e,o,m,y,!1))),Ac(x)&&(i=xb(e,o,n,i,"previousSibling"),m=xb(e,o,n,m,"nextSibling")),(wf(x)||kc(x))&&(i=Mi(e,o,i,"previousSibling"),m=Mi(e,o,m,"nextSibling"),wf(x)&&(e.isBlock(i)||(i=zc(e,o,i,u,!0),bt(i)&&(u=0)),e.isBlock(m)||(m=zc(e,o,m,y,!1),bt(m)&&(y=m.data.length)))),Ut(i)&&i.parentNode&&(u=e.nodeIndex(i),i=i.parentNode),Ut(m)&&m.parentNode&&(y=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:i,startOffset:u,endContainer:m,endOffset:y}},$p=(e,n,o)=>{var r;const i=n.startOffset,u=rm(n.startContainer,i),m=n.endOffset,y=rm(n.endContainer,m-1),x=ie=>{const _e=ie[0];bt(_e)&&_e===u&&i>=_e.data.length&&ie.splice(0,1);const Re=ie[ie.length-1];return m===0&&ie.length>0&&Re===y&&bt(Re)&&ie.splice(ie.length-1,1),ie},A=(ie,_e,Re)=>{const Me=[];for(;ie&&ie!==Re;ie=ie[_e])Me.push(ie);return Me},L=(ie,_e)=>e.getParent(ie,Re=>Re.parentNode===_e,_e),$=(ie,_e,Re)=>{const Me=Re?"nextSibling":"previousSibling";for(let Ie=ie,ct=Ie.parentNode;Ie&&Ie!==_e;Ie=ct){ct=Ie.parentNode;const Ot=A(Ie===ie?Ie:Ie[Me],Me);Ot.length&&(Re||Ot.reverse(),o(x(Ot)))}};if(u===y)return o(x([u]));const z=(r=e.findCommonAncestor(u,y))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,y))return $(u,z,!0);if(e.isChildOf(y,u))return $(y,z);const X=L(u,z)||u,oe=L(y,z)||y;$(u,X,!0);const te=A(X===u?X:X.nextSibling,"nextSibling",oe===y?oe.nextSibling:oe);te.length&&o(x(te)),$(y,oe)},hE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],gE=e=>oa(e)&&mp(e)===Oa,ww=(e,n,o,r)=>si(n).fold(()=>"skipping",i=>r==="br"||gE(n)?"valid":Xk(n)?"existing":kl(n.dom)?"caret":_t(hE,u=>xi(n,u))?"valid-block":!Lp(e,o,r)||!Lp(e,no(i),o)?"invalid-child":"valid"),dM=(e,n)=>{const o=gm(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},Cw=(e,n,o,r,i,u)=>{const{uid:m=n,...y}=o;pl(e,up()),sa(e,`${Yh()}`,m),sa(e,`${af()}`,r);const{attributes:x={},classes:A=[]}=i(m,y);if(Fa(e,x),eM(e,A),u){A.length>0&&sa(e,`${em()}`,A.join(","));const L=ts(x);L.length>0&&sa(e,`${cf()}`,L.join(","))}},l3=e=>{Zd(e,up()),Is(e,`${Yh()}`),Is(e,`${af()}`),Is(e,`${Xh()}`);const n=Er(e,`${cf()}`).map(r=>r.split(",")).getOr([]),o=Er(e,`${em()}`).map(r=>r.split(",")).getOr([]);xe(n,r=>Is(e,r)),Z1(e,o),Is(e,`${em()}`),Is(e,`${cf()}`)},pE=(e,n,o,r,i)=>{const u=be.fromTag("span",e);return Cw(u,n,o,r,i,!1),u},Sw=(e,n,o,r,i,u)=>{const m=[],y=pE(e.getDoc(),o,u,r,i),x=li(),A=()=>{x.clear()},L=()=>x.get().getOrThunk(()=>{const oe=tm(y);return m.push(oe),x.set(oe),oe}),$=oe=>{xe(oe,z)},z=oe=>{switch(ww(e,oe,"span",no(oe))){case"invalid-child":{A();const ie=ba(oe);$(ie),A();break}case"valid-block":{A(),Cw(oe,o,u,r,i,!0);break}case"valid":{const ie=L();Vm(oe,ie);break}}},X=oe=>{const te=dt(oe,be.fromDom);$(te)};return $p(e.dom,n,oe=>{A(),X(oe)}),m},xw=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),m=pg(e).length>0,y=L0("mce-annotation");if(u.collapsed&&!m&&dM(e,u),i.getRng().collapsed&&!m){const x=pE(e.getDoc(),y,r,n,o.decorate);Su(x,Zr),i.getRng().insertNode(x.dom),i.select(x.dom)}else aE(i,!1,()=>{Ed(e,x=>{Sw(e,x,y,n,o.decorate,r)})})})},Rs=e=>{const n=B0();m2(e,n);const o=RS(e,n),r=bu("span"),i=u=>{xe(u,m=>{r(m)?Li(m):l3(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(y=>{xw(e,u,y,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{U1(e,W.some(u)).each(({elements:m})=>{const y=e.selection.getBookmark();i(m),e.selection.moveToBookmark(y)})},removeAll:u=>{const m=e.selection.getBookmark();Tt(I0(e,u),(y,x)=>{i(y)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=I0(e,u);return go(m,y=>dt(y,x=>x.dom))}}},nl=e=>({getBookmark:Ae(Mv,e),moveToBookmark:Ae(Q4,e)});nl.isBookmarkNode=Hc;const Ew=(e,n,o)=>o.collapsed?!1:_t(o.getClientRects(),r=>WS(r,e,n)),_w=()=>be.fromDom(document),Tw=(e,n=!1)=>e.dom.focus({preventScroll:n}),zv=e=>{const n=bl(e).dom;return e.dom===n.activeElement},Hp=(e=_w())=>W.from(e.dom.activeElement).map(be.fromDom),Vv=e=>Hp(bl(e)).filter(n=>e.dom.contains(n.dom)),kw={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Uv=nu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),d3=(e,n,o,r)=>e.fold(n,o,r),_b=e=>e.fold(Eo,Eo,Eo),bE=Uv.before,vE=Uv.on,f3=Uv.after,pm={before:bE,on:vE,after:f3,cata:d3,getStart:_b},zp=nu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ol=e=>zp.exact(e.start,e.soffset,e.finish,e.foffset),rc=e=>e.match({domRange:n=>be.fromDom(n.startContainer),relative:(n,o)=>pm.getStart(n),exact:(n,o,r,i)=>n}),Vp=zp.domRange,fM=zp.relative,m3=zp.exact,h3=e=>{const n=rc(e);return sd(n)},Mo=kw.create,Tb={domRange:Vp,relative:fM,exact:m3,exactFromRange:ol,getWin:h3,range:Mo},Aw=(e,n)=>{const o=oa(n)?mp(n).length:ba(n).length+1;return e>o?o:e<0?0:e},yE=e=>Tb.range(e.start,Aw(e.soffset,e.start),e.finish,Aw(e.foffset,e.finish)),g3=(e,n)=>!ef(n.dom)&&(dr(e,n)||No(e,n)),p3=e=>n=>g3(e,n.start)&&g3(e,n.finish),wE=e=>e.inline||Nn.browser.isFirefox(),b3=e=>Tb.range(be.fromDom(e.startContainer),e.startOffset,be.fromDom(e.endContainer),e.endOffset),v3=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?W.none():W.from(n.getRangeAt(0))).map(b3)},y3=e=>{const n=sd(e);return v3(n.dom).filter(p3(e))},Wv=(e,n)=>W.from(n).filter(p3(e)).map(yE),kb=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),W.some(n)}catch{return W.none()}},Ab=e=>{const n=wE(e)?y3(be.fromDom(e.getBody())):W.none();e.bookmark=n.isSome()?n:e.bookmark},CE=e=>(e.bookmark?e.bookmark:W.none()).bind(o=>Wv(be.fromDom(e.getBody()),o)).bind(kb),w3=e=>{CE(e).each(n=>e.selection.setRng(n))},C3={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},S3=(e,n)=>(oo(n)||(n=0),setTimeout(e,n)),x3=(e,n)=>(oo(n)||(n=0),setInterval(e,n)),vn={setEditorTimeout:(e,n,o)=>S3(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=x3(()=>{e.removed?clearInterval(r):n()},o);return r}},l=e=>e.type==="nodechange"&&e.selectionChange,f=(e,n)=>{const o=()=>{n.throttle()};$s.DOM.bind(document,"mouseup",o),e.on("remove",()=>{$s.DOM.unbind(document,"mouseup",o)})},v=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},C=(e,n)=>{v(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{l(o)||Ab(e)})},O=e=>{const n=lp(()=>{Ab(e)},0);e.on("init",()=>{e.inline&&f(e,n),C(e,n)}),e.on("remove",()=>{n.cancel()})};let I;const U=$s.DOM,Q=e=>Ut(e)&&C3.isEditorUIElement(e),ae=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},we=(e,n)=>{const o=kx(e);return U.getParent(n,i=>Q(i)||(o?e.dom.is(i,o):!1))!==null},Le=e=>{try{const n=bl(be.fromDom(e.getElement()));return Hp(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},St=(e,n)=>{const o=n.editor;O(o);const r=(i,u)=>{if(rM(i)&&i.inline!==!0){const m=be.fromDom(i.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;ae(Le(o))&&r(o,pl),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{vn.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!ae(Le(o))||i!==o)&&r(o,Zd),!we(o,Le(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),I||(I=i=>{const u=e.activeEditor;u&&Wg(i).each(m=>{const y=m;y.ownerDocument===document&&y!==document.body&&!we(u,y)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},U.bind(document,"focusin",I))},jt=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&I&&(U.unbind(document,"focusin",I),I=null)},zt=e=>{e.on("AddEditor",Ae(St,e)),e.on("RemoveEditor",Ae(jt,e))},Nt=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),hn=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,vt=e=>e.collapsed?W.from(rm(e.startContainer,e.startOffset)).map(be.fromDom):W.none(),Rn=(e,n)=>vt(n).bind(o=>t4(o)?W.some(o):dr(e,o)?W.none():W.some(e)),so=(e,n)=>{Rn(be.fromDom(e.getBody()),n).bind(o=>Ui(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},ft=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},is=e=>zv(e)||Vv(e).isSome(),Io=e=>Fe(e.iframeElement)&&zv(be.fromDom(e.iframeElement)),Bo=e=>{const n=e.getBody();return n&&is(be.fromDom(n))},$r=e=>{const n=bl(be.fromDom(e.getElement()));return Hp(n).filter(o=>!ae(o.dom)&&we(e,o.dom)).isSome()},gr=e=>e.inline?Bo(e):Io(e),Nu=e=>gr(e)||$r(e),Pu=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=m=>{CE(m).each(y=>{m.selection.setRng(y),r=y})};!gr(e)&&e.hasEditableRoot()&&i(e);const u=Nt(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){hn(e,u)||ft(o),ft(u),e.hasEditableRoot()||i(e),so(e,r),Iu(e);return}e.inline||(Nn.browser.isOpera()||ft(o),e.getWin().focus()),(Nn.browser.isFirefox()||e.inline)&&(ft(o),so(e,r)),Iu(e)},Iu=e=>e.editorManager.setActive(e),rs=(e,n)=>{e.removed||(n?Iu(e):Pu(e))},Ht={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ht.metaKeyPressed(e),metaKeyPressed:e=>Nn.os.isMacOS()||Nn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ra="data-mce-selected",Bu="table,img,figure.image,hr,video,span.mce-preview-object,details",Ol=Math.abs,fo=Math.round,Tr={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},bm=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Up=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let m,y,x,A,L,$,z,X,oe,te,ie,_e,Re,Me,Ie,ct,Ot;const Qt=qt=>Fe(qt)&&(Jg(qt)||o.is(qt,"figure.image")),tt=qt=>ka(qt)||o.hasClass(qt,"mce-preview-object"),Ze=(qt,vo)=>{if(bm(qt)){const _o=qt.touches[0];return Qt(qt.target)&&!Ew(_o.clientX,_o.clientY,vo)}else return Qt(qt.target)&&!Ew(qt.clientX,qt.clientY,vo)},mt=qt=>{const vo=qt.target;Ze(qt,n.selection.getRng())&&!qt.isDefaultPrevented()&&n.selection.select(vo)},sn=qt=>o.hasClass(qt,"mce-preview-object")&&Fe(qt.firstElementChild)?[qt,qt.firstElementChild]:o.is(qt,"figure.image")?[qt.querySelector("img")]:[qt],_n=qt=>{const vo=nc(n);return!vo||n.mode.isReadOnly()||qt.getAttribute("data-mce-resize")==="false"||qt===n.getBody()?!1:o.hasClass(qt,"mce-preview-object")&&Fe(qt.firstElementChild)?xi(be.fromDom(qt.firstElementChild),vo):xi(be.fromDom(qt),vo)},Zn=(qt,vo)=>{if(tt(vo))return qt.create("img",{src:Nn.transparentSrc});if(ql(vo)){const Na=us(A.name,"n")?lo:gs,hs=vo.cloneNode(!0);return Na(qt.select("tr",hs)).each(uc=>{const Il=qt.select("td,th",uc);qt.setStyle(uc,"height",null),xe(Il,km=>qt.setStyle(km,"height",null))}),hs}else return vo.cloneNode(!0)},ho=(qt,vo,_o)=>{if(Fe(_o)){const Na=sn(qt);xe(Na,hs=>{hs.style[vo]||!n.schema.isValid(hs.nodeName.toLowerCase(),vo)?o.setStyle(hs,vo,_o):o.setAttrib(hs,vo,""+_o)})}},cs=(qt,vo,_o)=>{ho(qt,"width",vo),ho(qt,"height",_o)},Cs=qt=>{let vo,_o,Na,hs,uc;vo=qt.screenX-$,_o=qt.screenY-z,Me=vo*A[2]+te,Ie=_o*A[3]+ie,Me=Me<5?5:Me,Ie=Ie<5?5:Ie,(Qt(m)||tt(m))&&U2(n)!==!1?Na=!Ht.modifierPressed(qt):Na=Ht.modifierPressed(qt),Na&&(Ol(vo)>Ol(_o)?(Ie=fo(Me*_e),Me=fo(Ie/_e)):(Me=fo(Ie/_e),Ie=fo(Me*_e))),cs(y,Me,Ie),hs=A.startPos.x+vo,uc=A.startPos.y+_o,hs=hs>0?hs:0,uc=uc>0?uc:0,o.setStyles(x,{left:hs,top:uc,display:"block"}),x.innerHTML=Me+" &times; "+Ie,A[2]<0&&y.clientWidth<=Me&&o.setStyle(y,"left",X+(te-Me)),A[3]<0&&y.clientHeight<=Ie&&o.setStyle(y,"top",oe+(ie-Ie)),vo=u.scrollWidth-ct,_o=u.scrollHeight-Ot,vo+_o!==0&&o.setStyles(x,{left:hs-vo,top:uc-_o}),Re||(lx(n,m,te,ie,"corner-"+A.name),Re=!0)},Gr=()=>{const qt=Re;Re=!1,qt&&(ho(m,"width",Me),ho(m,"height",Ie)),o.unbind(r,"mousemove",Cs),o.unbind(r,"mouseup",Gr),i!==r&&(o.unbind(i,"mousemove",Cs),o.unbind(i,"mouseup",Gr)),o.remove(y),o.remove(x),o.remove(L),Zi(m),qt&&(ux(n,m,Me,Ie,"corner-"+A.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},Zi=qt=>{Yt();const vo=o.getPos(qt,u),_o=vo.x,Na=vo.y,hs=qt.getBoundingClientRect(),uc=hs.width||hs.right-hs.left,Il=hs.height||hs.bottom-hs.top;m!==qt&&(Ft(),m=qt,Me=Ie=0);const km=n.dispatch("ObjectSelected",{target:qt});_n(qt)&&!km.isDefaultPrevented()?Tt(Tr,(Dc,lu)=>{const uu=du=>{const wn=sn(m)[0];$=du.screenX,z=du.screenY,te=wn.clientWidth,ie=wn.clientHeight,_e=ie/te,A=Dc,A.name=lu,A.startPos={x:uc*Dc[0]+_o,y:Il*Dc[1]+Na},ct=u.scrollWidth,Ot=u.scrollHeight,L=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(L,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),y=Zn(o,m),o.addClass(y,"mce-clonedresizable"),o.setAttrib(y,"data-mce-bogus","all"),y.contentEditable="false",o.setStyles(y,{left:_o,top:Na,margin:0}),cs(y,uc,Il),y.removeAttribute(Ra),u.appendChild(y),o.bind(r,"mousemove",Cs),o.bind(r,"mouseup",Gr),i!==r&&(o.bind(i,"mousemove",Cs),o.bind(i,"mouseup",Gr)),x=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},te+" &times; "+ie)};let ji=o.get("mceResizeHandle"+lu);ji&&o.remove(ji),ji=o.add(u,"div",{id:"mceResizeHandle"+lu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+lu+"-resize; margin:0; padding:0"}),o.bind(ji,"mousedown",du=>{du.stopImmediatePropagation(),du.preventDefault(),uu(du)}),Dc.elm=ji,o.setStyles(ji,{left:uc*Dc[0]+_o-ji.offsetWidth/2,top:Il*Dc[1]+Na-ji.offsetHeight/2})}):Ft(!1)},mi=lp(Zi,0),Ft=(qt=!0)=>{mi.cancel(),Yt(),m&&qt&&m.removeAttribute(Ra),Tt(Tr,(vo,_o)=>{const Na=o.get("mceResizeHandle"+_o);Na&&(o.unbind(Na),o.remove(Na))})},xn=(qt,vo)=>o.isChildOf(qt,vo),Wo=qt=>{if(Re||n.removed||n.composing)return;const vo=qt.type==="mousedown"?qt.target:e.getNode(),_o=mn(be.fromDom(vo),Bu).map(hs=>hs.dom).filter(hs=>o.isEditable(hs.parentElement)||hs.nodeName==="IMG"&&o.isEditable(hs)).getOrUndefined(),Na=Fe(_o)?o.getAttrib(_o,Ra,"1"):"1";if(xe(o.select(`img[${Ra}],hr[${Ra}]`),hs=>{hs.removeAttribute(Ra)}),Fe(_o)&&xn(_o,u)&&Nu(n)){Bn();const hs=e.getStart(!0);if(xn(hs,_o)&&xn(e.getEnd(!0),_o)){o.setAttrib(_o,Ra,Na),mi.throttle(_o);return}}Ft()},Yt=()=>{Tt(Tr,qt=>{qt.elm&&(o.unbind(qt.elm),delete qt.elm)})},Bn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Bn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Wo),n.on("keyup compositionend",qt=>{m&&m.nodeName==="TABLE"&&Wo(qt)}),n.on("hide blur",Ft),n.on("contextmenu longpress",mt,!0)}),n.on("remove",Yt),{isResizable:_n,showResizeRect:Zi,hideResizeRect:Ft,updateResizeRect:Wo,destroy:()=>{mi.cancel(),m=y=L=null}}},Dl=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Jn=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},SE=(e,n,o)=>{const r=e.document.createRange();return Dl(r,n),Jn(r,o),r},Zv=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},wg=nu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xE=(e,n,o)=>n(be.fromDom(o.startContainer),o.startOffset,be.fromDom(o.endContainer),o.endOffset),Cg=(e,n)=>n.match({domRange:o=>({ltr:wt(o),rtl:W.none}),relative:(o,r)=>({ltr:Ge(()=>SE(e,o,r)),rtl:Ge(()=>W.some(SE(e,r,o)))}),exact:(o,r,i,u)=>({ltr:Ge(()=>Zv(e,o,r,i,u)),rtl:Ge(()=>W.some(Zv(e,i,u,o,r)))})}),vm=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>wg.rtl(be.fromDom(i.endContainer),i.endOffset,be.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>xE(e,wg.ltr,o)):xE(e,wg.ltr,o)},EE=(e,n)=>{const o=Cg(e,n);return vm(e,o)};wg.ltr,wg.rtl;const Ob=(e,n,o)=>{var r;return W.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return W.none();const u=e.createRange();return u.setStart(i.offsetNode,i.offset),u.collapse(),W.some(u)})},w7=(e,n,o)=>{var r;return W.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},C7=(e,n,o)=>e.caretPositionFromPoint?Ob(e,n,o):e.caretRangeFromPoint?w7(e,n,o):W.none(),Ow=(e,n,o)=>{const r=e.document;return C7(r,n,o).map(i=>kw.create(be.fromDom(i.startContainer),i.startOffset,be.fromDom(i.endContainer),i.endOffset))},Sg=(e,n)=>{const o=no(e);return o==="input"?pm.after(e):et(["br","img"],o)?n===0?pm.before(e):pm.after(e):pm.on(e,n)},S7=(e,n)=>{const o=e.fold(pm.before,Sg,pm.after),r=n.fold(pm.before,Sg,pm.after);return Tb.relative(o,r)},E3=(e,n,o,r)=>{const i=Sg(e,n),u=Sg(o,r);return Tb.relative(i,u)},x7=e=>e.match({domRange:n=>{const o=be.fromDom(n.startContainer),r=be.fromDom(n.endContainer);return E3(o,n.startOffset,r,n.endOffset)},relative:S7,exact:E3}),_3=(e,n)=>{const r=document.createDocumentFragment();return xe(e,i=>{r.appendChild(i.dom)}),be.fromDom(r)},E7=e=>{const n=Tb.getWin(e).dom,o=(i,u,m,y)=>Zv(n,i,u,m,y),r=x7(e);return EE(n,r).match({ltr:o,rtl:o})},mM=(e,n,o)=>Ow(e,n,o),_7=(e,n,o)=>{const r=sd(be.fromDom(o));return mM(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},T3=(e,n)=>Fe(e)&&Fe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,hM=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},_E=(e,n,o)=>hM(e,n,o)!==null,k3=(e,n,o)=>_E(e,n,r=>r.nodeName===o),A3=(e,n)=>eu(e)&&!_E(e,n,kl),O3=(e,n,o)=>{const r=n.parentNode;if(r){const i=new $a(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(jo(u))return!0}return!1},gM=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},pM=(e,n)=>{let o=n;for(;o&&o!==e;){if(qo(o))return!0;o=o.parentNode}return!1},jv=(e,n,o,r,i)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),y=i.parentNode;let x,A;if(!y)return W.none();const L=e.getParent(y,e.isBlock)||u;if(r&&jo(i)&&n&&e.isEmpty(L))return W.some(Qe(y,e.nodeIndex(i)));const $=new $a(i,L);for(;A=$[r?"prev":"next"]();){if(e.getContentEditableParent(A)==="false"||A3(A,u))return W.none();if(bt(A)&&A.data.length>0)return k3(A,u,"A")?W.none():W.some(Qe(A,r?A.data.length:0));if(e.isBlock(A)||m[A.nodeName.toLowerCase()])return W.none();x=A}return aa(x)?W.none():o&&x?W.some(Qe(x,0)):W.none()},bM=(e,n,o,r)=>{const i=e.getRoot();let u,m=!1,y=o?r.startContainer:r.endContainer,x=o?r.startOffset:r.endOffset;const A=Ut(y)&&x===y.childNodes.length,L=e.schema.getNonEmptyElements();let $=o;if(eu(y))return W.none();if(Ut(y)&&x>y.childNodes.length-1&&($=!1),Zm(y)&&(y=i,x=0),y===i){if($&&(u=y.childNodes[x>0?x-1:0],u&&(eu(u)||L[u.nodeName]||ql(u))))return W.none();if(y.hasChildNodes()){if(x=Math.min(!$&&x>0?x-1:x,y.childNodes.length-1),y=y.childNodes[x],x=bt(y)&&A?y.data.length:0,!n&&y===i.lastChild&&ql(y)||pM(i,y)||eu(y)||O1(y))return W.none();if(y.hasChildNodes()&&!ql(y)){u=y;const z=new $a(y,i);do{if(qo(u)||eu(u)){m=!1;break}if(bt(u)&&u.data.length>0){x=$?0:u.data.length,y=u,m=!0;break}if(L[u.nodeName.toLowerCase()]&&!ta(u)){x=e.nodeIndex(u),y=u.parentNode,$||x++,m=!0;break}}while(u=$?z.next():z.prev())}}}return n&&(bt(y)&&x===0&&jv(e,A,n,!0,y).each(z=>{y=z.container(),x=z.offset(),m=!0}),Ut(y)&&(u=y.childNodes[x],u||(u=y.childNodes[x-1]),u&&jo(u)&&!gM(u,"A")&&!O3(e,u,!1)&&!O3(e,u,!0)&&jv(e,A,n,!0,u).each(z=>{y=z.container(),x=z.offset(),m=!0}))),$&&!n&&bt(y)&&x===y.data.length&&jv(e,A,n,!1,y).each(z=>{y=z.container(),x=z.offset(),m=!0}),m&&y?W.some(Qe(y,x)):W.none()},Dw=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Qe.fromRangeStart(n);return bM(e,o,!0,r).each(u=>{(!o||!Qe.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||bM(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),T3(n,r)?W.none():W.some(r)},TE=(e,n)=>e.splitText(n),Rw=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&bt(n)){if(o>0&&o<n.data.length)if(r=TE(n,o),n=r.previousSibling,i>o){i=i-o;const u=TE(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(bt(n)&&o>0&&o<n.data.length&&(n=TE(n,o),o=0),bt(r)&&i>0&&i<r.data.length){const u=TE(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},Wp=e=>({walk:(u,m)=>$p(e,u,m),split:Rw,expand:(u,m={type:"word"})=>{if(m.type==="word"){const y=gm(e,u,[{inline:"span"}]),x=e.createRng();return x.setStart(y.startContainer,y.startOffset),x.setEnd(y.endContainer,y.endOffset),x}return u},normalize:u=>Dw(e,u).fold($e,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});Wp.compareRanges=T3,Wp.getCaretRangeFromPoint=_7,Wp.getSelectedNode=U0,Wp.getNode=rm;const vM=((e,n)=>{const o=(y,x)=>{if(!oo(x)&&!x.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+x);const A=y.dom;ad(A)&&(A.style[e]=x+"px")},r=y=>{const x=n(y);if(x<=0||x===null){const A=vr(y,e);return parseFloat(A)||0}return x},i=r,u=(y,x)=>Fo(x,(A,L)=>{const $=vr(y,L),z=$===void 0?0:parseInt($,10);return isNaN(z)?A:A+z},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(y,x,A)=>{const L=u(y,A);return x>L?x-L:0}}})("height",e=>{const n=e.dom;return vl(e)?n.getBoundingClientRect().height:n.offsetHeight}),yM=e=>vM.get(e),wM=(e,n)=>e.view(n).fold(wt([]),r=>{const i=e.owner(r),u=wM(e,i);return[r].concat(u)}),k7=(e,n)=>{const o=n.owner(e);return wM(n,o)};var A7=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?W.none():W.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(be.fromDom)},owner:e=>jl(e)});const O7=e=>{const n=_w(),o=pn(n),r=k7(e,A7),i=Kn(e),u=ls(r,(m,y)=>{const x=Kn(y);return{left:m.left+x.left,top:m.top+x.top}},{left:0,top:0});return Ee(u.left+i.left+o.left,u.top+i.top+o.top)},D3=e=>no(e)==="textarea",D7=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),kE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},CM=(e,n)=>{const o=ba(e);if(o.length===0||D3(e))return{element:e,offset:n};if(n<o.length&&!D3(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return D3(r)?{element:e,offset:n}:no(r)==="img"?{element:r,offset:1}:oa(r)?{element:r,offset:mp(r).length}:{element:r,offset:ba(r).length}}},SM=(e,n)=>{const o=eo(e),r=yM(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},xM=(e,n)=>{const o=CM(e,n),r=be.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Oa+"</span>");return Ei(o.element,r),SM(r,()=>ws(r))},EM=e=>SM(be.fromDom(e),it),_M=(e,n,o,r)=>{M7(e,(i,u)=>R7(e,n,o,r),o)},TM=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(D7(e,u))return;const m=pn(n).top;o(e,n,m,r,i),kE(e,u)},R7=(e,n,o,r)=>{const i=be.fromDom(e.getBody()),u=be.fromDom(e.getDoc());ra(i);const m=xM(be.fromDom(o.startContainer),o.startOffset);TM(e,u,n,m,r),m.cleanup()},kM=(e,n,o,r)=>{const i=be.fromDom(e.getDoc());TM(e,i,o,EM(n),r)},M7=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,m=o.endOffset;n(be.fromDom(r),be.fromDom(u));const y=e.dom.createRng();y.setStart(r,i),y.setEnd(u,m),e.selection.setRng(o)},AE=(e,n,o,r,i)=>{const u=n.pos;if(r)Ws(u.left,u.top,i);else{const m=u.top-o+n.height;Ws(-e.getBody().getBoundingClientRect().left,m,i)}},R3=(e,n,o,r,i,u)=>{const m=r+o,y=i.pos.top,x=i.bottom,A=x-y>=r;y<o?AE(e,i,r,u!==!1,n):y>m?AE(e,i,r,A?u!==!1:u===!0,n):x>m&&!A&&AE(e,i,r,u===!0,n)},Mw=(e,n,o,r,i)=>{const u=sd(n).dom.innerHeight;R3(e,n,o,u,r,i)},AM=(e,n,o,r,i)=>{const u=sd(n).dom.innerHeight;R3(e,n,o,u,r,i);const m=O7(r.element),y=qg(window);m.top<y.y?Ir(r.element,i!==!1):m.top>y.bottom&&Ir(r.element,i===!0)},N7=(e,n,o)=>_M(e,Mw,n,o),M3=(e,n,o)=>kM(e,n,Mw,o),P7=(e,n,o)=>_M(e,AM,n,o),OM=(e,n,o)=>kM(e,n,AM,o),DM=(e,n,o)=>{(e.inline?M3:OM)(e,n,o)},qv=(e,n,o)=>{(e.inline?N7:P7)(e,n,o)},RM=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),MM=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return W.from(u).map(be.fromDom).map(y=>!r||!n.collapsed?Cu(y,i(y,m)).getOr(y):y).bind(y=>Ps(y)?W.some(y):si(y).filter(Ps)).map(y=>y.dom).getOr(e)},NM=(e,n,o=!1)=>MM(e,n,!0,o,(r,i)=>Math.min(rd(r),i)),PM=(e,n,o=!1)=>MM(e,n,!1,o,(r,i)=>i>0?i-1:i),Nw=(e,n)=>{const o=e;for(;e&&bt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},IM=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(m=o.childNodes[i]),bt(o)&&bt(r)&&(o.length===i?o=Nw(o.nextSibling,!0):o=o.parentNode,u===0?r=Nw(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const y=bt(m)?m.parentNode:m;return xl(y)?y:e},BM=(e,n,o,r)=>{const i=[],u=e.getRoot(),m=e.getParent(o||NM(u,n,n.collapsed),e.isBlock),y=e.getParent(r||PM(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&i.push(m),m&&y&&m!==y){let x;const A=new $a(m,u);for(;(x=A.next())&&x!==y;)e.isBlock(x)&&i.push(x)}return y&&m!==y&&y!==u&&i.push(y),i},LM=(e,n,o)=>W.from(n).bind(r=>W.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(i,u),m.setEnd(i,u+1),o&&(bw(e,m,r,!0),bw(e,m,r,!1)),m})),OE=(e,n)=>dt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),I7={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},DE=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[i],u)return u}},B7=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Jc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},FM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class sl{static create(n,o){const r=new sl(n,I7[n]||1);return o&&Tt(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!de(n))return Fe(n)&&Tt(n,(u,m)=>{r.attr(m,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new sl(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,m=r.length;u<m;u++){const y=r[u];y.name!=="id"&&(i[i.length]={name:y.name,value:y.value},i.map[y.name]=y.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=DE(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=DE(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let m=u.firstChild;if(FM(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||FM(m))return!1}if(m.type===8||m.type===3&&!B7(m)||m.type===3&&m.parent&&o[m.parent.name]&&Jc((i=m.value)!==null&&i!==void 0?i:"")||r&&r(m))return!1}while(m=DE(m,u));return!0}walk(n){return DE(this,null,n)}}const L7=ut.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),$M=e=>de(e.nodeValue)&&e.nodeValue.includes(Oa),HM=e=>`${e.length===0?"":`${dt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,F7=(e,n)=>n.querySelectorAll(HM(e)),zM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>$M(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),VM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if($M(n)){const o=n.parentNode;return o&&En(L7,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),$7=e=>zM(e).nextNode()!==null,RE=e=>VM(e).nextNode()!==null,UM=(e,n)=>n.querySelector(HM(e))!==null,WM=(e,n)=>{xe(F7(e,n),o=>{const r=be.fromDom(o);ni(r,"data-mce-bogus")==="all"?ws(r):xe(e,i=>{Qu(r,i)&&Is(r,i)})})},ZM=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},H7=M(ZM,zM),z7=M(ZM,VM),jM=(e,n)=>{const o=[{condition:Ae(UM,n),action:Ae(WM,n)},{condition:$7,action:H7},{condition:RE,action:z7}];let r=e,i=!1;return xe(o,({condition:u,action:m})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),m(r))}),r},qM=e=>{const n=ii(e,"[data-mce-bogus]");xe(n,o=>{ni(o,"data-mce-bogus")==="all"?ws(o):Ai(o)?(Ei(o,be.fromText(Kg)),ws(o)):Li(o)})},GM=e=>{const n=ii(e,"input");xe(n,o=>{Is(o,"name")})},KM=(e,n)=>{const o=Va(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},V7=(e,n)=>{const o=e.getDoc(),r=bl(be.fromDom(e.getBody())),i=be.fromTag("div",o);sa(i,"data-mce-bogus","all"),Gn(i,{position:"fixed",left:"-9999999px",top:"0"}),Su(i,n.innerHTML),qM(i),GM(i);const u=Vg(r);Js(u,i);const m=xc(i.dom.innerText);return ws(i),m},YM=(e,n,o)=>{let r;return n.format==="raw"?r=ut.trim(xc(jM(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=V7(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=KM(e,e.serializer.serialize(o,n)),n.format!=="text"&&!H0(be.fromDom(o))&&de(r)?ut.trim(r):r},XM=(e,n)=>W.from(e.getBody()).fold(wt(n.format==="tree"?new sl("body",11):""),o=>YM(e,n,o)),JM=ut.makeMap,QM=e=>{const n=[];e=e||{};const o=e.indent,r=JM(e.indent_before||""),i=JM(e.indent_after||""),u=Zh.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(y,x,A)=>{if(o&&r[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}if(n.push("<",y),x)for(let L=0,$=x.length;L<$;L++){const z=x[L];n.push(" ",z.name,'="',u(z.value,!0),'"')}if(!A||m?n[n.length]=">":n[n.length]=" />",A&&o&&i[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}},end:y=>{let x;n.push("</",y,">"),o&&i[y]&&n.length>0&&(x=n[n.length-1],x.length>0&&x!==`
`&&n.push(`
`))},text:(y,x)=>{y.length>0&&(n[n.length]=x?y:u(y))},cdata:y=>{n.push("<![CDATA[",y,"]]>")},comment:y=>{n.push("<!--",y,"-->")},pi:(y,x)=>{x?n.push("<?",y," ",u(x),"?>"):n.push("<?",y,"?>"),o&&n.push(`
`)},doctype:y=>{n.push("<!DOCTYPE",y,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Zp=(e={},n=ms())=>{const o=QM(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,m={3:x=>{var A;o.text((A=x.value)!==null&&A!==void 0?A:"",x.raw)},8:x=>{var A;o.comment((A=x.value)!==null&&A!==void 0?A:"")},7:x=>{o.pi(x.name,x.value)},10:x=>{var A;o.doctype((A=x.value)!==null&&A!==void 0?A:"")},4:x=>{var A;o.cdata((A=x.value)!==null&&A!==void 0?A:"")},11:x=>{let A=x;if(A=A.firstChild)do y(A);while(A=A.next)}};o.reset();const y=x=>{var A;const L=m[x.type];if(L)L(x);else{const $=x.name,z=$ in n.getVoidElements();let X=x.attributes;if(u&&X&&X.length>1){const oe=[];oe.map={};const te=n.getElementRule(x.name);if(te){for(let ie=0,_e=te.attributesOrder.length;ie<_e;ie++){const Re=te.attributesOrder[ie];if(Re in X.map){const Me=X.map[Re];oe.map[Re]=Me,oe.push({name:Re,value:Me})}}for(let ie=0,_e=X.length;ie<_e;ie++){const Re=X[ie].name;if(!(Re in oe.map)){const Me=X.map[Re];oe.map[Re]=Me,oe.push({name:Re,value:Me})}}X=oe}}if(o.start($,X,z),os($))de(x.value)&&o.text(x.value,!0),o.end($);else if(!z){let oe=x.firstChild;if(oe){($==="pre"||$==="textarea")&&oe.type===3&&((A=oe.value)===null||A===void 0?void 0:A[0])===`
`&&o.text(`
`,!0);do y(oe);while(oe=oe.next)}o.end($)}}};return i.type===1&&!e.inner?y(i):i.type===3?m[3](i):m[11](i),o.getContent()}}},eN=new Set;xe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{eN.add(n)});const tN=new Set;xe(["background-color"],n=>{tN.add(n)});const nN=["font","text-decoration","text-emphasis"],U7=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),Gv=(e,n)=>ts(U7(e,n)),W7=e=>eN.has(e),Z7=e=>tN.has(e),oN=(e,n)=>_t(Gv(e,n),o=>W7(o)),j7=(e,n)=>oN(e,n)&&_t(Gv(e,n),o=>Z7(o)),q7=e=>Kt(e,n=>_t(nN,o=>us(n,o))),G7=(e,n,o)=>{const r=Gv(e,n),i=Gv(e,o),u=m=>{var y,x;const A=(y=e.getStyle(n,m))!==null&&y!==void 0?y:"",L=(x=e.getStyle(o,m))!==null&&x!==void 0?x:"";return ds(A)&&ds(L)&&A!==L};return _t(r,m=>{const y=x=>_t(x,A=>A===m);if(!y(i)&&y(nN)){const x=q7(i);return _t(x,u)}else return u(m)})},sN=(e,n,o)=>W.from(o.container()).filter(bt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),N3=Ae(sN,!0,fm),P3=Ae(sN,!1,fm),K7=e=>{const n=e.container();return bt(n)&&(n.data.length===0||p2(n.data)&&nl.isBookmarkNode(n.parentNode))},jp=(e,n)=>o=>_v(e?0:-1,o).filter(n).isSome(),Sn=e=>Jg(e)&&vr(be.fromDom(e),"display")==="block",I3=e=>qo(e)&&!Lh(e),rN=jp(!0,Sn),Y7=jp(!1,Sn),Db=jp(!0,ka),Pw=jp(!1,ka),aN=jp(!0,ql),B3=jp(!1,ql),qp=jp(!0,I3),Gp=jp(!1,I3),ME=e=>e.slice(0,-1),iN=(e,n,o)=>dr(n,e)?ME($m(e,r=>o(r)||No(r,n))):[],X7=(e,n)=>iN(e,n,$e),xg=(e,n)=>[e].concat(X7(e,n)),Wn=(e,n,o)=>yf(e,n,o,K7),J7=e=>n=>e.isBlock(no(n)),Yn=(e,n,o)=>Vo(xg(be.fromDom(n.container()),e),J7(o)),L3=(e,n,o,r)=>Wn(e,n.dom,o).forall(i=>Yn(n,o,r).fold(()=>!Ru(i,o,n.dom),u=>!Ru(i,o,n.dom)&&dr(u,be.fromDom(i.container())))),Q7=(e,n,o,r)=>Yn(n,o,r).fold(()=>Wn(e,n.dom,o).forall(i=>!Ru(i,o,n.dom)),i=>Wn(e,i.dom,o).isNone()),cN=Ae(Q7,!1),lN=Ae(Q7,!0),dY=Ae(L3,!1),fY=Ae(L3,!0),eH=e=>Pp(e).exists(Ai),NE=(e,n,o,r)=>{const i=Kt(xg(be.fromDom(o.container()),n),m=>r.isBlock(no(m))),u=lo(i).getOr(n);return Vi(e,u.dom,o).filter(eH)},$n=(e,n,o)=>Pp(n).exists(Ai)||NE(!0,e,n,o).isSome(),PE=(e,n,o)=>q4(n).exists(Ai)||NE(!1,e,n,o).isSome(),uN=Ae(NE,!1),tH=Ae(NE,!0),Kv=e=>Qe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),F3=(e,n,o)=>{const r=Kt(xg(be.fromDom(n.container()),e),i=>o.isBlock(no(i)));return lo(r).getOr(e)},dN=(e,n,o)=>Kv(n)?P3(n):P3(n)||di(F3(e,n,o).dom,n).exists(P3),fN=(e,n,o)=>Kv(n)?N3(n):N3(n)||sc(F3(e,n,o).dom,n).exists(N3),nH=e=>et(["pre","pre-wrap"],e),IE=e=>Pp(e).bind(n=>fr(n,Ps)).exists(n=>nH(vr(n,"white-space"))),oH=(e,n)=>di(e.dom,n).isNone(),mY=(e,n)=>sc(e.dom,n).isNone(),hY=(e,n,o)=>oH(e,n)||mY(e,n)||cN(e,n,o)||lN(e,n,o)||PE(e,n,o)||$n(e,n,o),sH=e=>Fe(e)&&qo(e)&&iw(e),mN=(e,n)=>o=>sH(new $a(o,e)[n]()),rH=(e,n)=>{const o=sc(e.dom,n).getOr(n),r=mN(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},aH=(e,n)=>{const o=di(e.dom,n).getOr(n),r=mN(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},$3=(e,n,o)=>IE(n)?!1:hY(e,n,o)||dN(e,n,o)||fN(e,n,o),Iw=(e,n,o)=>IE(n)?!1:cN(e,n,o)||dY(e,n,o)||PE(e,n,o)||dN(e,n,o)||aH(e,n),mo=e=>{const n=e.container(),o=e.offset();return bt(n)&&o<n.data.length?Qe(n,o+1):e},Yv=(e,n,o)=>IE(n)?!1:lN(e,n,o)||fY(e,n,o)||$n(e,n,o)||fN(e,n,o)||rH(e,n),Xv=(e,n,o)=>Iw(e,n,o)||Yv(e,mo(n),o),H3=(e,n)=>gg(e.charAt(n)),z3=(e,n)=>fm(e.charAt(n)),hN=e=>{const n=e.container();return bt(n)&&ns(n.data,Zr)},gN=e=>{const n=e.split("");return dt(n,(o,r)=>gg(o)&&r>0&&r<n.length-1&&Nv(n[r-1])&&Nv(n[r+1])?" ":o).join("")},V3=(e,n,o,r)=>{const i=n.data,u=Qe(n,0);return!o&&H3(i,0)&&!Xv(e,u,r)?(n.data=" "+i.slice(1),!0):o&&z3(i,0)&&Iw(e,u,r)?(n.data=Zr+i.slice(1),!0):!1},iH=e=>{const n=e.data,o=gN(n);return o!==n?(e.data=o,!0):!1},U3=(e,n,o,r)=>{const i=n.data,u=Qe(n,i.length-1);return!o&&H3(i,i.length-1)&&!Xv(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&z3(i,i.length-1)&&Yv(e,u,r)?(n.data=i.slice(0,-1)+Zr,!0):!1},cH=(e,n,o)=>{const r=n.container();if(!bt(r))return W.none();if(hN(n)){const i=V3(e,r,!1,o)||iH(r)||U3(e,r,!1,o);return yi(i,n)}else if(Xv(e,n,o)){const i=V3(e,r,!0,o)||U3(e,r,!0,o);return yi(i,n)}else return W.none()},lH=e=>{const n=be.fromDom(e.getBody());e.selection.isCollapsed()&&cH(n,Qe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},pN=(e,n,o,r)=>{if(o===0)return;const i=be.fromDom(e),u=Yc(i,A=>r.isBlock(no(A))).getOr(i),m=e.data.slice(n,n+o),y=n+o>=e.data.length&&Yv(u,Qe(e,e.data.length),r),x=n===0&&Iw(u,Qe(e,0),r);e.replaceData(n,o,Sl(m,4,x,y))},BE=(e,n,o)=>{const r=e.data.slice(n),i=r.length-dl(r).length;pN(e,n,i,o)},W3=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-ei(r).length;pN(e,n-i,i,o)},Z3=(e,n,o,r,i=!0)=>{const u=ei(e.data).length,m=i?e:n,y=i?n:e;return i?m.appendData(y.data):m.insertData(0,y.data),ws(be.fromDom(y)),r&&BE(m,u,o),m},uH=(e,n)=>{const o=e.container(),r=e.offset();return!Qe.isTextPosition(e)&&o===n.parentNode&&r>Qe.before(n).offset()},dH=(e,n)=>uH(n,e)?Qe(n.container(),n.offset()-1):n,j3=e=>bt(e)?Qe(e,0):Qe.before(e),q3=e=>bt(e)?Qe(e,e.data.length):Qe.after(e),bN=e=>Au(e.previousSibling)?W.some(q3(e.previousSibling)):e.previousSibling?Mu(e.previousSibling):W.none(),vN=e=>Au(e.nextSibling)?W.some(j3(e.nextSibling)):e.nextSibling?Ui(e.nextSibling):W.none(),fH=(e,n)=>W.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>di(e,Qe.before(o))).orThunk(()=>sc(e,Qe.after(n))),mH=(e,n)=>sc(e,Qe.after(n)).orThunk(()=>di(e,Qe.before(n))),hH=(e,n)=>bN(n).orThunk(()=>vN(n)).orThunk(()=>fH(e,n)),gH=(e,n)=>vN(n).orThunk(()=>bN(n)).orThunk(()=>mH(e,n)),pH=(e,n,o)=>e?gH(n,o):hH(n,o),bH=(e,n,o)=>pH(e,n,o).map(Ae(dH,o)),G3=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},vH=e=>n=>n.dom===e,yH=(e,n)=>n&&En(e.schema.getBlockElements(),no(n)),Rb=(e,n,o)=>{if(ca(e,n)){const r=be.fromHtml('<br data-mce-bogus="1">');return o?xe(ba(n),i=>{hm(i)||ws(i)}):Cl(n),Js(n,r),W.some(Qe.before(r.dom))}else return W.none()},wH=(e,n,o,r)=>{const i=wu(e).filter(oa),u=Vf(e).filter(oa);return ws(e),uo(i,u,n,(m,y,x)=>{const A=m.dom,L=y.dom,$=A.data.length;return Z3(A,L,o,r),x.container()===L?Qe(A,$):x}).orThunk(()=>(r&&(i.each(m=>W3(m.dom,m.dom.length,o)),u.each(m=>BE(m.dom,0,o))),n))},yN=(e,n)=>En(e.schema.getTextInlineElements(),no(n)),Mb=(e,n,o,r=!0,i=!1)=>{const u=bH(n,e.getBody(),o.dom),m=Yc(o,Ae(yH,e),vH(e.getBody())),y=wH(o,u,e.schema,yN(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):m.bind(x=>Rb(e.schema,x,i)).fold(()=>{r&&G3(e,n,y)},x=>{r&&G3(e,n,W.some(x))})},CH=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,wN=e=>CH.test(e),Kp=(e,n)=>xi(be.fromDom(n),Sx(e))&&!Yl(e.schema,n)&&e.dom.isEditable(n),K3=e=>{var n;return $s.DOM.getStyle(e,"direction",!0)==="rtl"||wN((n=e.textContent)!==null&&n!==void 0?n:"")},CN=(e,n,o)=>Kt($s.DOM.getParents(o.container(),"*",n),e),ja=(e,n,o)=>{const r=CN(e,n,o);return W.from(r[r.length-1])},SH=(e,n,o)=>{const r=um(n,e),i=um(o,e);return Fe(r)&&r===i},xH=e=>pp(e)||sm(e),_d=(e,n)=>{const o=n.container(),r=n.offset();return e?uf(o)?bt(o.nextSibling)?Qe(o.nextSibling,0):Qe.after(o):pp(n)?Qe(o,r+1):n:uf(o)?bt(o.previousSibling)?Qe(o.previousSibling,o.previousSibling.data.length):Qe.before(o):sm(n)?Qe(o,r-1):n},SN=Ae(_d,!0),xN=Ae(_d,!1),Yp=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},EH=e=>{e.execCommand("delete")},LE=e=>Yp(e,"Delete"),pr=e=>Yp(e,"ForwardDelete"),FE=e=>n=>ti(si(n),e,No),Bw=e=>Tu(e)||Jm(e),$E=(e,n)=>dr(e,n)?fr(n,Bw,FE(e)):W.none(),Xp=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},Lu=(e,n,o)=>ur(Ui(o),Mu(o),(r,i)=>{const u=_d(!0,r),m=_d(!1,i),y=_d(!1,n);return e?sc(o,y).exists(x=>x.isEqual(m)&&n.isEqual(u)):di(o,y).exists(x=>x.isEqual(u)&&n.isEqual(m))}).getOr(!0),Jv=e=>(Wl(e)?wu(e):ri(e)).bind(Jv).orThunk(()=>W.some(e)),Es=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=Jv(o).getOr(o),m=be.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(m.dom===e.getBody()?Xp(e,r):ca(e.schema,m,{checkRootAsContent:!1})&&(lf(m),r&&e.selection.setCursorLocation(m.dom,0)),!No(o,m)){const y=ti(si(m),o)?[]:yu(m);xe(y.concat(ba(o)),x=>{!No(x,m)&&!dr(x,m)&&ca(e.schema,x)&&ws(x)})}},Lw=e=>n=>No(e,n),HE=e=>ii(e,"td,th"),Y3=(e,n)=>gb(be.fromDom(e),n),zE=e=>ur(e.startTable,e.endTable,(n,o)=>{const r=k1(n,u=>No(u,o)),i=k1(o,u=>No(u,n));return!r&&!i?e:{...e,startTable:r?W.none():e.startTable,endTable:i?W.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),X3=e=>zE(e),J3=(e,n)=>{const o=Y3(e.startContainer,n),r=Y3(e.endContainer,n),i=o.isSome(),u=r.isSome(),m=ur(o,r,No).getOr(!1);return X3({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:m,isMultiTable:!m&&i&&u})},Fw=(e,n)=>({start:e,end:n}),Q3=(e,n,o)=>({rng:e,table:n,cells:o}),Jp=nu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Qv=(e,n)=>mn(be.fromDom(e),"td,th",n),eA=e=>!No(e.start,e.end),tA=(e,n)=>gb(e.start,n).bind(o=>gb(e.end,n).bind(r=>yi(No(o,r),o))),EN=(e,n)=>!eA(e)&&tA(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),_N=(e,n)=>{const o=Qv(e.startContainer,n),r=Qv(e.endContainer,n);return ur(o,r,Fw)},TN=e=>n=>gb(n,e).bind(o=>gs(HE(o)).map(r=>Fw(n,r))),ey=e=>n=>gb(n,e).bind(o=>lo(HE(o)).map(r=>Fw(r,n))),VE=e=>n=>tA(n,e).map(o=>Q3(n,o,HE(o))),UE=(e,n,o,r)=>{if(o.collapsed||!e.forall(eA))return W.none();if(n.isSameTable){const i=e.bind(VE(r));return W.some({start:i,end:i})}else{const i=Qv(o.startContainer,r),u=Qv(o.endContainer,r),m=i.bind(TN(r)).bind(VE(r)),y=u.bind(ey(r)).bind(VE(r));return W.some({start:m,end:y})}},kN=(e,n)=>zs(e,o=>No(o,n)),nA=e=>ur(kN(e.cells,e.rng.start),kN(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),AN=(e,n,o)=>e.exists(r=>EN(r,o)&&pw(r.start,n)),oA=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},ON=(e,n,o,r)=>UE(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,m=nA(i).getOr([]);if(u&&i.cells.length===m.length)return W.some(Jp.fullTable(i.table));if(m.length>0){if(u)return W.some(Jp.partialTable(m,W.none()));{const y=oA(o,n);return W.some(Jp.partialTable(m,W.some({...n,rng:y})))}}else return W.none()}),WE=(e,n,o,r)=>UE(e,n,o,r).bind(({start:i,end:u})=>{const m=i.bind(nA).getOr([]),y=u.bind(nA).getOr([]);if(m.length>0&&y.length>0){const x=oA(o,n);return W.some(Jp.multiTable(m,y,x))}else return W.none()}),DN=(e,n)=>{const o=Lw(e),r=_N(n,o),i=J3(n,o);return AN(r,n,o)?r.map(u=>Jp.singleCellTable(n,u.start)):i.isMultiTable?WE(r,i,n,o):ON(r,i,n,o)},sA=e=>xe(e,n=>{Is(n,"contenteditable"),lf(n)}),RN=(e,n)=>W.from(e.dom.getParent(n,e.dom.isBlock)).map(be.fromDom),MN=(e,n,o)=>{o.each(r=>{n?ws(r):(lf(r),e.selection.setCursorLocation(r.dom,0))})},ZE=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),jE(e,i,n,!1).each(u=>u())},rA=e=>{const n=pg(e),o=be.fromDom(e.selection.getNode());Qg(o.dom)&&ca(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&_t(n,r=>No(r,o))&&sa(o,"data-mce-selected","1")},aA=(e,n,o)=>W.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:m})=>{const y=RN(e,m?u.endContainer:u.startContainer);u.deleteContents(),MN(e,m,y.filter(Ae(ca,e.schema)));const x=m?n[0]:n[n.length-1];return ZE(e,x,r,m),ca(e.schema,x)?W.none():W.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);sA(i),rA(e)}),NN=(e,n,o,r)=>W.some(()=>{const i=e.selection.getRng(),u=n[0],m=o[o.length-1];ZE(e,u,i,!0),ZE(e,m,i,!1);const y=ca(e.schema,u)?n:n.slice(1),x=ca(e.schema,m)?o:o.slice(0,-1);sA(y.concat(x)),r.deleteContents(),rA(e)}),jE=(e,n,o,r=!0)=>W.some(()=>{Es(e,n,o,r)}),PN=(e,n)=>W.some(()=>Mb(e,!1,n)),iA=(e,n,o)=>DN(n,o).bind(r=>r.fold(Ae(jE,e),Ae(PN,e),Ae(aA,e),Ae(NN,e))),IN=(e,n)=>$w(e,n),BN=(e,n,o,r)=>qE(n,r).fold(()=>iA(e,n,o),i=>IN(e,i)),LN=(e,n,o)=>{const r=be.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?aA(e,o,W.none()):BN(e,r,i,n)},cA=(e,n)=>Vo(xg(n,e),j1),qE=(e,n)=>Vo(xg(n,e),bu("caption")),FN=(e,n,o,r,i)=>ug(o,e.getBody(),i).bind(u=>cA(n,be.fromDom(u.getNode())).bind(m=>No(m,r)?W.none():W.some(it))),$w=(e,n)=>W.some(()=>{lf(n),e.selection.setCursorLocation(n.dom,0)}),lA=(e,n,o,r)=>Ui(e.dom).bind(i=>Mu(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),GE=(e,n)=>$w(e,n),$N=(e,n,o)=>qE(e,be.fromDom(o.getNode())).fold(()=>W.some(it),r=>yi(!No(r,n),it)),_H=(e,n,o,r,i)=>ug(o,e.getBody(),i).fold(()=>W.some(it),u=>lA(r,o,i,u)?GE(e,r):$N(n,r,u)),HN=(e,n,o,r)=>{const i=Qe.fromRangeStart(e.selection.getRng());return cA(o,r).bind(u=>ca(e.schema,u,{checkRootAsContent:!1})?$w(e,u):FN(e,o,n,u,i))},KE=(e,n,o,r)=>{const i=Qe.fromRangeStart(e.selection.getRng());return ca(e.schema,r)?$w(e,r):_H(e,o,n,r,i)},YE=(e,n)=>e?aN(n):B3(n),Hw=(e,n)=>{const o=Qe.fromRangeStart(e.selection.getRng());return YE(n,o)||Vi(n,e.getBody(),o).exists(r=>YE(n,r))},uA=(e,n,o)=>{const r=be.fromDom(e.getBody());return qE(r,o).fold(()=>HN(e,n,r,o).orThunk(()=>yi(Hw(e,n),it)),i=>KE(e,n,r,i))},XE=(e,n)=>{const o=be.fromDom(e.selection.getStart(!0)),r=pg(e);return e.selection.isCollapsed()&&r.length===0?uA(e,n,o):LN(e,o,r)},Cf=(e,n)=>{let o=n;for(;o&&o!==e;){if(st(o)||qo(o))return o;o=o.parentNode}return null},dA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],fA=ut.each,Qp=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const y=A=>{const L={};return fA(n.getAttribs(A),$=>{const z=$.nodeName.toLowerCase();z!=="style"&&!i(z)&&(L[z]=n.getAttrib(A,z))}),L},x=(A,L)=>{for(const $ in A)if(En(A,$)){const z=L[$];if(In(z)||A[$]!==z)return!1;delete L[$]}for(const $ in L)if(En(L,$))return!1;return!0};return Ut(u)&&Ut(m)&&(!x(y(u),y(m))||!x(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!Hc(u)&&!Hc(m)},i=u=>_t(dA,m=>us(u,m))||o.has(u);return{compare:r,isAttributeInternal:i}},Eg=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),zN=e=>e.name==="summary",TH=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},VN=(e,n,o,r)=>{const i=o.name;for(let u=0,m=e.length;u<m;u++){const y=e[u];if(y.name===i){const x=r.nodes[i];x?x.nodes.push(o):r.nodes[i]={filter:y,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const y=n[u],x=y.name;if(x in o.attributes.map){const A=r.attributes[x];A?A.nodes.push(o):r.attributes[x]={filter:y,nodes:[o]}}}},UN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&TH(o,i=>{VN(e,n,i,r)}),r},mA=(e,n)=>{const o=(r,i)=>{Tt(r,u=>{const m=Dr(u.nodes);xe(u.filter.callbacks,y=>{for(let x=m.length-1;x>=0;x--){const A=m[x];(!(i?A.attr(u.filter.name)!==void 0:A.name===u.filter.name)||en(A.parent))&&m.splice(x,1)}m.length>0&&y(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},hA=(e,n,o,r={})=>{const i=UN(e,n,o);mA(i,r)},gA=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new sl("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new sl("#text",3)).value=Zr},e1=e=>{var n;return t1(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Zr},t1=(e,n)=>{const o=e==null?void 0:e.firstChild;return Fe(o)&&o===e.lastChild&&o.name===n},gY=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Ma=(e,n,o,r)=>r.isEmpty(n,o,i=>gY(e,i)),kH=(e,n)=>Fe(e)&&(n(e)||e.name==="br"),AH=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return W.from(n)},ym=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&ym(i,n,o);e.unwrap()}},Jo=(e,n,o,r=it)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=ut.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),x=new Set,A=L=>L!==o&&!y[L.name];for(let L=0;L<e.length;L++){const $=e[L];let z,X,oe;if(!$.parent||x.has($))continue;if(i[$.name]&&$.parent.name==="li"){let ie=$.next;for(;ie&&i[ie.name];){ie.name="li",x.add(ie),$.parent.insert(ie,$.parent);ie=ie.next}$.unwrap();continue}const te=[$];for(z=$.parent;z&&!n.isValidChild(z.name,$.name)&&A(z);z=z.parent)te.push(z);if(z&&te.length>1)if(pA(n,$,z))ym($,n);else{te.reverse(),X=te[0].clone(),r(X);let ie=X;for(let _e=0;_e<te.length-1;_e++){n.isValidChild(ie.name,te[_e].name)&&_e>0?(oe=te[_e].clone(),r(oe),ie.append(oe)):oe=ie;for(let Re=te[_e].firstChild;Re&&Re!==te[_e+1];){const Me=Re.next;oe.append(Re),Re=Me}ie=oe}Ma(n,u,m,X)?z.insert($,te[0],!0):(z.insert(X,te[0],!0),z.insert($,X)),z=te[0],(Ma(n,u,m,z)||t1(z,"br"))&&z.empty().remove()}else if($.parent){if($.name==="li"){let ie=$.prev;if(ie&&(ie.name==="ul"||ie.name==="ol")){ie.append($);continue}if(ie=$.next,ie&&(ie.name==="ul"||ie.name==="ol")&&ie.firstChild){ie.insert($,ie.firstChild,!0);continue}const _e=new sl("ul",1);r(_e),$.wrap(_e);continue}if(n.isValidChild($.parent.name,"div")&&n.isValidChild("div",$.name)){const ie=new sl("div",1);r(ie),$.wrap(ie)}else ym($,n)}}},pY=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},pA=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&pY(o,"a")?!0:zN(o)&&Eg(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,OH=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},cr=e=>{const n=Qe.fromRangeStart(e),o=Qe.fromRangeEnd(e),r=e.commonAncestorContainer;return Vi(!1,r,o).map(i=>!Ru(n,o,r)&&Ru(n,i,r)?OH(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},JE=e=>e.collapsed?e:cr(e),zw=e=>Fe(e.firstChild)&&e.firstChild===e.lastChild,Vw=e=>e.name==="br"||e.value===Zr,Uw=(e,n)=>e.getBlockElements()[n.name]&&zw(n)&&Vw(n.firstChild),Ww=(e,n)=>{const o=e.getNonEmptyElements();return Fe(n)&&(n.isEmpty(o)||Uw(e,n))},WN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),Ww(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},bY=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},vY=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return bY(i)},yY=e=>{var n;return Kt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},wY=e=>e.data===Zr||jo(e),DH=e=>Fe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&wY(e.firstChild),CY=e=>!e.firstChild||DH(e),RH=e=>e.length>0&&CY(e[e.length-1])?e.slice(0,-1):e,bA=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},SY=(e,n)=>!!bA(e,n),MH=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},kr=(e,n)=>{const o=Qe.before(e),i=tl(n).next(o);return i?i.toRange():null},vA=(e,n)=>{const o=Qe.after(e),i=tl(n).prev(o);return i?i.toRange():null},ZN=(e,n,o,r)=>{const i=MH(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),ut.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(i[1],e),u.removeChild(e)),vA(n[n.length-1],o)},NH=(e,n,o)=>{const r=e.parentNode;return r&&ut.each(n,i=>{r.insertBefore(i,e)}),kr(e,o)},PH=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),vA(n[0],o)),IH=(e,n,o,r)=>{const i=vY(n,e,r),u=bA(n,o.startContainer),m=RH(yY(i.firstChild)),y=1,x=2,A=n.getRoot(),L=$=>{const z=Qe.fromRangeStart(o),X=tl(n.getRoot()),oe=$===y?X.prev(z):X.next(z),te=oe==null?void 0:oe.getNode();return te?bA(n,te)!==u:!0};return u?L(y)?NH(u,m,A):L(x)?PH(u,m,A,n):ZN(u,m,A,o):null},su=["pre"],Sf=(e,n,o,r)=>{var i;const u=n.firstChild,m=n.lastChild,y=m.attr("data-mce-type")==="bookmark"?m.prev:m,x=u===y,A=et(su,u.name);if(x&&A){const L=u.attr("contenteditable")!=="false",$=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,z=W.from(Cf(r,o)).forall(st);return L&&$&&z}else return!1},QE=Qg,yA=(e,n,o)=>{if(Fe(o)){const r=e.getParent(n.endContainer,QE);return o===r&&pw(be.fromDom(o),n)}else return!1},wA=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const i=o.firstChild,u=o.lastChild;!i||i===u&&i.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},e_=(e,n,o)=>{W.from(e.getParent(n,"td,th")).map(be.fromDom).each(r=>zS(r,o))},jN=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=Qp(e),m="*[data-mce-fragment]",y=r.select(m);ut.each(y,x=>{const A=z=>Fe(o[z.nodeName.toLowerCase()]),L=z=>z.childNodes.length===1;if((z=>!(oN(r,z)||j7(r,z)))(x)&&A(x)&&L(x)){const z=Gv(r,x),X=(_e,Re)=>Ss(_e,Me=>et(Re,Me)),oe=_e=>L(x)&&r.is(_e,m)&&A(_e)&&(_e.nodeName===x.nodeName&&X(z,Gv(r,_e))||oe(_e.children[0])),te=_e=>Fe(_e)&&_e!==i&&(u.compare(x,_e)||te(_e.parentElement)),ie=_e=>Fe(_e)&&_e!==i&&r.is(_e,m)&&(G7(r,x,_e)||ie(_e.parentElement));(oe(x.children[0])||te(x.parentElement)&&!ie(x.parentElement))&&r.remove(x,!0)}})}},Zw=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},t_=e=>{ut.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},CA=e=>!!e.getAttribute("data-mce-fragment"),qN=(e,n)=>Fe(n)&&!e.schema.getVoidElements()[n.nodeName],jw=(e,n)=>{var o,r,i;let u;const m=e.dom,y=e.selection;if(!n)return;y.scrollIntoView(n);const x=Cf(e.getBody(),n);if(x&&m.getContentEditable(x)==="false"){m.remove(n),y.select(x);return}let A=m.createRng();const L=n.previousSibling;if(bt(L)){A.setStart(L,(r=(o=L.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const X=n.nextSibling;bt(X)&&(L.appendData(X.data),(i=X.parentNode)===null||i===void 0||i.removeChild(X))}else A.setStartBefore(n),A.setEndBefore(n);const $=X=>{let oe=Qe.fromRangeStart(X);return oe=tl(e.getBody()).next(oe),oe==null?void 0:oe.toRange()},z=m.getParent(n,m.isBlock);if(m.remove(n),z&&m.isEmpty(z)){const X=QE(z);Cl(be.fromDom(z)),A.setStart(z,0),A.setEnd(z,0),!X&&!CA(z)&&(u=$(A))?(A=u,m.remove(z)):m.add(z,m.create("br",X?{}:{"data-mce-bogus":"1"}))}y.setRng(A)},BH=e=>{const n=e.dom,o=JE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,QE);yA(n,o,r)?jE(e,o,be.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&bt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},LH=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return W.some(n);return W.none()},wm=(e,n,o)=>{var r;return _t(o.children(),Eg)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},ru=(e,n,o)=>{var r,i;const u=e.selection,m=e.dom,y=e.parser,x=o.merge,A=Zp({validate:!0},e.schema),L='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=xc(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,L);let $=u.getRng();const z=$.startContainer,X=e.getBody();z===X&&u.isCollapsed()&&m.isBlock(X.firstChild)&&qN(e,X.firstChild)&&m.isEmpty(X.firstChild)&&($=m.createRng(),$.setStart(X.firstChild,0),$.setEnd(X.firstChild,0),u.setRng($)),u.isCollapsed()||BH(e);const oe=u.getNode(),te={context:oe.nodeName.toLowerCase(),data:o.data,insert:!0},ie=y.parse(n,te);if(o.paste===!0&&WN(e.schema,ie)&&SY(m,oe))return $=IH(A,m,u.getRng(),ie),$&&u.setRng($),n;o.paste===!0&&Sf(m,ie,oe,e.getBody())&&((r=ie.firstChild)===null||r===void 0||r.unwrap()),Zw(ie);let _e=ie.lastChild;if(_e&&_e.attr("id")==="mce_marker"){const Re=_e;for(_e=_e.prev;_e&&_e.name!=="table";_e=_e.walk(!0))if(_e.type===3||!m.isBlock(_e.name)){_e.parent&&e.schema.isValidChild(_e.parent.name,"span")&&_e.parent.insert(Re,_e,_e.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(oe),!te.invalid&&!wm(m,oe,ie))n=A.serialize(ie),wA(e,n,oe);else{e.selection.setContent(L);let Re=u.getNode(),Me;const Ie=e.getBody();for(Zm(Re)?Re=Me=Ie:Me=Re;Me&&Me!==Ie;)Re=Me,Me=Me.parentNode;n=Re===Ie?Ie.innerHTML:m.getOuterHTML(Re);const ct=y.parse(n),Ot=LH(ct),Qt=Ot.bind(AH).getOr(ct);Ot.each(sn=>sn.replace(ie));const tt=ie.children(),Ze=(i=ie.parent)!==null&&i!==void 0?i:ct;ie.unwrap();const mt=Kt(tt,sn=>pA(e.schema,sn,Ze));Jo(mt,e.schema,Qt),hA(y.getNodeFilters(),y.getAttributeFilters(),ct),n=A.serialize(ct),Re===Ie?m.setHTML(Ie,n):m.setOuterHTML(Re,n)}return jN(e,x),jw(e,m.get("mce_marker")),t_(e.getBody()),e_(m,u.getStart(),e.schema),ld(e.schema,e.getBody(),u.getStart()),n},n1=e=>e instanceof sl,Td=e=>{gr(e)&&Ui(e.getBody()).each(n=>{const o=n.getNode(),r=ql(o)?Ui(o).getOr(n):n;e.selection.setRng(r.toRange())})},SA=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Td(e)},qs=(e,n,o,r)=>{if(o=xc(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=Va(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,hf(e),o)):o||(o=i),SA(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Zp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=H0(be.fromDom(n))?o:ut.trim(o);return SA(e,i,r.no_selection),{content:i,html:i}}},FH=(e,n,o,r)=>{hA(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Zp({validate:!1},e.schema).serialize(o),u=xc(H0(be.fromDom(n))?i:ut.trim(i));return SA(e,u,r.no_selection),{content:o,html:u}},Nb=(e,n,o)=>W.from(e.getBody()).map(r=>n1(n)?FH(e,r,n,o):qs(e,r,n,o)).getOr({content:n,html:n1(o.content)?"":o.content}),ty=e=>ve(e)?e:$e,GN=(e,n,o)=>{let r=e.dom;const i=ty(o);for(;r.parentNode;){r=r.parentNode;const u=be.fromDom(r),m=n(u);if(m.isSome())return m;if(i(u))break}return W.none()},qw=(e,n,o)=>{const r=n(e),i=ty(o);return r.orThunk(()=>i(e)?W.none():GN(e,n,i))},Gw=Al,KN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(kc(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Kw=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,y=>KN(e,y,o)?!0:y.parentNode===u||!!Cm(e,y,o,r,!0));return!!Cm(e,m,o,r,i)},n_=(e,n,o)=>fa(o)&&Gw(n,o.inline)||wf(o)&&Gw(n,o.block)?!0:kc(o)?Ut(n)&&e.is(n,o.selector):!1,xA=(e,n,o,r,i,u)=>{const m=o[r],y=r==="attributes";if(ve(o.onmatch))return o.onmatch(n,o,r);if(m){if(ul(m)){for(let x=0;x<m.length;x++)if(y?e.getAttrib(n,m[x]):vg(e,n,m[x]))return!0}else for(const x in m)if(En(m,x)){const A=y?e.getAttrib(n,x):vg(e,n,x),L=Fr(m[x],u),$=en(A)||lr(A);if($&&en(L))continue;if(i&&$&&!o.exact||(!i||o.exact)&&!Gw(A,Lv(L,x)))return!1}}return!0},Cm=(e,n,o,r,i)=>{const u=e.formatter.get(o),m=e.dom;if(u&&Ut(n))for(let y=0;y<u.length;y++){const x=u[y];if(n_(e.dom,n,x)&&xA(m,n,x,"attributes",i,r)&&xA(m,n,x,"styles",i,r)){const A=x.classes;if(A){for(let L=0;L<A.length;L++)if(!e.dom.hasClass(n,Fr(A[L],r)))return}return x}}},Yw=(e,n,o,r,i)=>{if(r)return Kw(e,r,n,o,i);if(r=e.selection.getNode(),Kw(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&Kw(e,u,n,o,i))},YN=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let y=0;y<n.length;y++){const x=n[y];!i[x]&&Cm(e,m,x,o)&&(i[x]=!0,r.push(x))}},e.dom.getRoot()),r},o_=(e,n)=>{const o=i=>No(i,be.fromDom(e.getBody())),r=(i,u)=>Cm(e,i.dom,u)?W.some(u):W.none();return W.from(e.selection.getStart(!0)).bind(i=>qw(be.fromDom(i),u=>Pi(n,m=>r(u,m)),o)).getOrNull()},$H=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=yb(r,i);for(let m=o.length-1;m>=0;m--){const y=o[m];if(!kc(y))return!0;for(let x=u.length-1;x>=0;x--)if(r.is(u[x],y.selector))return!0}}return!1},HH=(e,n,o)=>Fo(o,(r,i)=>{const u=lE(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),Xw=Oa,zH=(e,n)=>e.importNode(n,!0),XN=e=>{if(e){const n=new $a(e,e);for(let o=n.current();o;o=n.next())if(bt(o))return o}return null},s_=e=>{const n=be.fromTag("span");return Fa(n,{id:Ov,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Js(n,be.fromText(Xw)),n},VH=e=>{const n=XN(e);return n&&n.data.charAt(0)===Xw&&n.deleteData(0,1),n},EA=(e,n,o)=>{const r=e.dom,i=e.selection;if(wb(n))Mb(e,!1,be.fromDom(n),o,!0);else{const u=i.getRng(),m=r.getParent(n,r.isBlock),y=u.startContainer,x=u.startOffset,A=u.endContainer,L=u.endOffset,$=VH(n);r.remove(n,!0),y===$&&x>0&&u.setStart($,x-1),A===$&&L>0&&u.setEnd($,L-1),m&&r.isEmpty(m)&&lf(be.fromDom(m)),i.setRng(u)}},r_=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)EA(e,n,o);else if(n=fg(e.getBody(),i.getStart()),!n)for(;n=r.get(Ov);)EA(e,n,o)},UH=(e,n,o)=>{var r,i;const u=e.dom,m=u.getParent(o,Ae(cE,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(HS(be.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},_A=(e,n)=>(e.appendChild(n),n),ny=(e,n)=>{var o;const r=ls(e,(u,m)=>_A(u,m.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return _A(r,i.createTextNode(Xw))},WH=(e,n,o,r,i,u)=>{const m=e.formatter,y=e.dom,x=Kt(ts(m.get()),$=>$!==r&&!ns($,"removeformat")),A=HH(e,o,x);if(Kt(A,$=>!r3(e,$,r)).length>0){const $=o.cloneNode(!1);return y.add(n,$),m.remove(r,i,$,u),y.remove($),W.some($)}else return W.none()},JN=e=>BS(e,mp(e).replace(new RegExp(`${Zr}$`)," ")),TA=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&wu(be.fromDom(n)).each(r=>{oa(r)?JN(r):Gd(r,i=>oa(i)).each(i=>{oa(i)&&JN(i)})})};e.once("input",r=>{r.data&&!fm(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},ZH=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const m=i.getRng();let y=m.startOffset;const A=m.startContainer.nodeValue;r=fg(e.getBody(),i.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(A&&y>0&&y<A.length&&L.test(A.charAt(y))&&L.test(A.charAt(y-1))){const $=i.getBookmark();m.collapse(!0);let z=gm(e.dom,m,u);z=Rw(z),e.formatter.apply(n,o,z),i.moveToBookmark($)}else{let $=r?XN(r):null;(!r||($==null?void 0:$.data)!==Xw)&&(r=zH(e.getDoc(),s_(!0).dom),$=r.firstChild,m.insertNode(r),y=1,TA(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation($,y)}},QN=(e,n,o,r)=>{const i=e.dom,u=e.selection;let m=!1;const y=e.formatter.get(n);if(!y)return;const x=u.getRng(),A=x.startContainer,L=x.startOffset;let $=A;bt(A)&&(L!==A.data.length&&(m=!0),$=$.parentNode);const z=[];let X;for(;$;){if(Cm(e,$,n,o,r)){X=$;break}$.nextSibling&&(m=!0),z.push($),$=$.parentNode}if(X)if(m){const oe=u.getBookmark();x.collapse(!0);let te=gm(i,x,y,!0);te=Rw(te),e.formatter.remove(n,o,te,r),u.moveToBookmark(oe)}else{const oe=fg(e.getBody(),X),te=Fe(oe)?i.getParents(X.parentNode,gt,oe):[],ie=s_(!1).dom;UH(e,ie,oe??X);const _e=WH(e,ie,X,n,o,r),Re=ny([...z,..._e.toArray(),...te],ie);oe&&EA(e,oe,Fe(oe)),u.setCursorLocation(Re,1),TA(e,ie),i.isEmpty(X)&&i.remove(X)}},kd=(e,n,o)=>{const r=e.selection,i=e.getBody();r_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Xw&&r_(e,fg(i,r.getStart()),!0),(n===37||n===39)&&r_(e,fg(i,r.getStart()),!0)},jH=e=>bt(e)&&Wr(e.data,Zr),eP=e=>{e.on("mouseup keydown",n=>{kd(e,n.keyCode,jH(e.selection.getRng().endContainer))})},a_=e=>{const n=s_(!1),o=ny(e,n.dom);return{caretContainer:n,caretPosition:Qe(o,0)}},i_=(e,n)=>{const{caretContainer:o,caretPosition:r}=a_(n);return Ei(be.fromDom(e),o),ws(be.fromDom(e)),r},tP=(e,n)=>{const{caretContainer:o,caretPosition:r}=a_(n);return e.insertNode(o.dom),r},kA=(e,n)=>{if(kl(n.dom))return!1;const o=e.schema.getTextInlineElements();return En(o,no(n))&&!kl(n.dom)&&!Kf(n.dom)},Jw={},nP=El(["pre"]),oP=(e,n)=>{Jw[e]||(Jw[e]=[]),Jw[e].push(n)},sP=(e,n)=>{En(Jw,e)&&xe(Jw[e],o=>{o(n)})};oP("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const m=u.previousSibling;return nP(m)&&et(i,m)},r=(i,u)=>{const m=be.fromDom(u),y=jl(m).dom;ws(m),wl(be.fromDom(i),[be.fromTag("br",y),be.fromTag("br",y),...ba(m)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=Kt(Kt(i,nP),o(i));xe(u,m=>{r(m.previousSibling,m)})}});const Fu=["fontWeight","fontStyle","color","fontSize","fontFamily"],qH=e=>Je(e.styles)&&_t(ts(e.styles),n=>et(Fu,n)),GH=e=>Vo(e,n=>fa(n)&&n.inline==="span"&&qH(n)),KH=(e,n)=>{const o=e.get(n);return Gt(o)?GH(o):W.none()},c_=(e,n)=>di(n,Qe.fromRangeStart(e)).isNone(),rP=(e,n)=>sc(n,Qe.fromRangeEnd(e)).exists(o=>!jo(o.getNode())||sc(n,o).isSome())===!1,YH=e=>n=>_l(n)&&e.isEditable(n),XH=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return c_(o,n[0])&&rP(o,n[0])?n:[];{const r=lo(n).filter(m=>c_(o,m)).toArray(),i=gs(n).filter(m=>rP(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},AA=e=>Kt(XH(e),YH(e.dom)),xf=e=>Kt(e.getSelectedBlocks(),YH(e.dom)),Qw=ut.each,oy=e=>Ut(e)&&!Hc(e)&&!kl(e)&&!Kf(e),l_=(e,n)=>{for(let o=e;o;o=o[n]){if(bt(o)&&ds(o.data))return e;if(Ut(o)&&!Hc(o))return o}return e},aP=(e,n,o)=>{const r=Qp(e),i=xl(n)&&e.dom.isEditable(n),u=xl(o)&&e.dom.isEditable(o);if(i&&u){const m=l_(n,"previousSibling"),y=l_(o,"nextSibling");if(r.compare(m,y)){for(let x=m.nextSibling;x&&x!==y;){const A=x;x=x.nextSibling,m.appendChild(A)}return e.dom.remove(y),ut.each(ut.grep(y.childNodes),x=>{m.appendChild(x)}),m}}return o},OA=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=aP(e,s3(r),r))!==null&&i!==void 0?i:r;aP(e,u,s3(u,!0))}},JH=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Qw(e.select(r,o),i=>{oy(i)&&e.isEditable(i)&&Qw(n.styles,(u,m)=>{e.setStyle(i,m,"")})})}},u_=(e,n,o)=>{Qw(e.childNodes,r=>{oy(r)&&(n(r)&&o(r),r.hasChildNodes()&&u_(r,n,o))})},DA=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},iP=(e,n)=>o=>!!(o&&vg(e,o,n)),RA=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),DA(e,r)},Pb=nu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Ib=/^(src|href|style)$/,d_=ut.each,f_=Al,cP=e=>/^(TR|TH|TD)$/.test(e.nodeName),lP=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),uP=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Ut(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return bt(r)&&o&&i>=r.data.length&&(r=new $a(r,e.getBody()).next()||r),bt(r)&&!o&&i===0&&(r=new $a(r,e.getBody()).prev()||r),r},dP=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return cP(e)&&r?e.nodeName==="TR"&&r[o]||r:e},MA=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},fP=(e,n,o,r,i)=>{const u=be.fromDom(n),m=be.fromDom(e.create(r,i)),y=o?Uf(u):vc(u);return wl(m,y),o?(Ei(u,m),Xd(m,u)):(yc(u,m),Js(m,u)),m.dom},mP=(e,n)=>n.links&&e.nodeName==="A",hP=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,m=Va(e);wf(o)&&r===u.getRoot()&&(!o.list_block||!f_(n,o.list_block))&&xe(Dr(n.childNodes),y=>{Lp(e,m,y.nodeName.toLowerCase())?i?i.appendChild(y):(i=MA(u,y,m),u.setAttribs(i,hf(e))):i=null}),!($v(o)&&!f_(o.inline,n))&&u.remove(n,!0)},m_=(e,n,o)=>oo(e)?{name:n,value:null}:{name:e,value:Fr(n,o)},o1=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},gP=(e,n,o,r,i)=>{let u=!1;d_(o.styles,(m,y)=>{const{name:x,value:A}=m_(y,m,r),L=Lv(A,x);(o.remove_similar||re(A)||!Ut(i)||f_(vg(e,i,x),L))&&e.setStyle(n,x,""),u=!0}),u&&o1(e,n)},QH=(e,n,o)=>{n==="removeformat"?xe(xf(e.selection),r=>{xe(Fu,i=>e.dom.setStyle(r,i,"")),o1(e.dom,r)}):KH(e.formatter,n).each(r=>{xe(xf(e.selection),i=>gP(e.dom,i,r,o,null))})},eC=(e,n,o,r,i)=>{const u=e.dom,m=Qp(e),y=e.schema;if(fa(n)&&of(y,n.inline)&&Yl(y,r)&&r.parentElement===e.getBody())return hP(e,r,n),Pb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!n_(u,r,n)&&!mP(r,n))return Pb.keep();const x=r,A=n.preserve_attributes;if(fa(n)&&n.remove==="all"&&Gt(A)){const L=Kt(u.getAttribs(x),$=>et(A,$.name.toLowerCase()));if(u.removeAllAttribs(x),xe(L,$=>u.setAttrib(x,$.name,$.value)),L.length>0)return Pb.rename("span")}if(n.remove!=="all"){gP(u,x,n,o,i),d_(n.attributes,($,z)=>{const{name:X,value:oe}=m_(z,$,o);if(n.remove_similar||re(oe)||!Ut(i)||f_(u.getAttrib(i,X),oe)){if(X==="class"){const te=u.getAttrib(x,X);if(te){let ie="";if(xe(te.split(/\s+/),_e=>{/mce\-\w+/.test(_e)&&(ie+=(ie?" ":"")+_e)}),ie){u.setAttrib(x,X,ie);return}}}if(Ib.test(X)&&x.removeAttribute("data-mce-"+X),X==="style"&&El(["li"])(x)&&u.getStyle(x,"list-style-type")==="none"){x.removeAttribute(X),u.setStyle(x,"list-style-type","none");return}X==="class"&&x.removeAttribute("className"),x.removeAttribute(X)}}),d_(n.classes,$=>{$=Fr($,o),(!Ut(i)||u.hasClass(i,$))&&u.removeClass(x,$)});const L=u.getAttribs(x);for(let $=0;$<L.length;$++){const z=L[$].nodeName;if(!m.isAttributeInternal(z))return Pb.keep()}}return n.remove!=="none"?(hP(e,x,n),Pb.removed()):Pb.keep()},pP=(e,n,o,r,i)=>{let u;return n.parentNode&&xe(yb(e.dom,n.parentNode).reverse(),m=>{if(!u&&Ut(m)&&m.id!=="_start"&&m.id!=="_end"){const y=Cm(e,m,o,r,i);y&&y.split!==!1&&(u=m)}}),u},bP=(e,n,o,r)=>eC(e,n,o,r,r).fold(wt(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),wt(null)),e9=(e,n,o,r,i,u,m,y)=>{var x,A;let L,$;const z=e.dom;if(o){const X=o.parentNode;for(let oe=r.parentNode;oe&&oe!==X;oe=oe.parentNode){let te=z.clone(oe,!1);for(let ie=0;ie<n.length&&(te=bP(e,n[ie],y,te),te!==null);ie++);te&&(L&&te.appendChild(L),$||($=te),L=te)}(!m.mixed||!z.isBlock(o))&&(r=(x=z.split(o,r))!==null&&x!==void 0?x:r),L&&$&&((A=i.parentNode)===null||A===void 0||A.insertBefore(L,i),$.appendChild(i),fa(m)&&OA(e,m,y,L))}return r},vP=(e,n,o,r,i)=>{const u=e.formatter.get(n),m=u[0],y=e.dom,x=e.selection,A=te=>{const ie=pP(e,te,n,o,i);return e9(e,u,ie,te,te,!0,m,o)},L=te=>Hc(te)&&Ut(te)&&(te.id==="_start"||te.id==="_end"),$=te=>_t(u,ie=>Ef(e,ie,o,te,te)),z=te=>{const ie=Dr(te.childNodes),Re=$(te)||_t(u,ct=>n_(y,te,ct)),Me=te.parentNode;if(!Re&&Fe(Me)&&Ac(m)&&$(Me),m.deep&&ie.length)for(let ct=0;ct<ie.length;ct++)z(ie[ct]);xe(["underline","line-through","overline"],ct=>{Ut(te)&&e.dom.getStyle(te,"text-decoration")===ct&&te.parentNode&&Fv(y,te.parentNode)===ct&&Ef(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ct}},void 0,te)})},X=te=>{const ie=y.get(te?"_start":"_end");if(ie){let _e=ie[te?"firstChild":"lastChild"];return L(_e)&&(_e=_e[te?"firstChild":"lastChild"]),bt(_e)&&_e.data.length===0&&(_e=te?ie.previousSibling||ie.nextSibling:ie.nextSibling||ie.previousSibling),y.remove(ie,!0),_e}else return null},oe=te=>{let ie,_e,Re=gm(y,te,u,te.collapsed);if(m.split){if(Re=Rw(Re),ie=uP(e,Re,!0),_e=uP(e,Re),ie!==_e){if(ie=dP(ie,!0),_e=dP(_e,!1),lP(y,ie,_e)){const Ie=W.from(ie.firstChild).getOr(ie);A(fP(y,Ie,!0,"span",{id:"_start","data-mce-type":"bookmark"})),X(!0);return}if(lP(y,_e,ie)){const Ie=W.from(_e.lastChild).getOr(_e);A(fP(y,Ie,!1,"span",{id:"_end","data-mce-type":"bookmark"})),X(!1);return}ie=MA(y,ie,"span",{id:"_start","data-mce-type":"bookmark"}),_e=MA(y,_e,"span",{id:"_end","data-mce-type":"bookmark"});const Me=y.createRng();Me.setStartAfter(ie),Me.setEndBefore(_e),$p(y,Me,Ie=>{xe(Ie,ct=>{!Hc(ct)&&!Hc(ct.parentNode)&&A(ct)})}),A(ie),A(_e),ie=X(!0),_e=X()}else ie=_e=A(ie);Re.startContainer=ie.parentNode?ie.parentNode:ie,Re.startOffset=y.nodeIndex(ie),Re.endContainer=_e.parentNode?_e.parentNode:_e,Re.endOffset=y.nodeIndex(_e)+1}$p(y,Re,Me=>{xe(Me,z)})};if(r){if(pb(r)){const te=y.createRng();te.setStartBefore(r),te.setEndAfter(r),oe(te)}else oe(r);D2(e,n,r,o);return}!x.isCollapsed()||!fa(m)||pg(e).length?(iE(e,()=>Ed(e,oe),te=>fa(m)&&Yw(e,n,o,te)),e.nodeChanged()):QN(e,n,o,i),QH(e,n,o),D2(e,n,r,o)},yP=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&vP(e,n,o,r,i)},Ef=(e,n,o,r,i)=>eC(e,n,o,r,i).fold($e,u=>(e.dom.rename(r,u),!0),gt),NA=ut.each,wP=(e,n,o,r)=>{const i=u=>{if(xl(u)&&Ut(u.parentNode)&&e.isEditable(u)){const m=Fv(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(ut.walk(r,i,"childNodes"),i(r))},CP=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=iP(e,"fontSize");u_(r,u=>i(u)&&e.isEditable(u),RA(e,"backgroundColor",Fr(n.styles.backgroundColor,o)))}},h_=(e,n,o,r)=>{if(fa(n)&&(n.inline==="sub"||n.inline==="sup")){const i=iP(e,"fontSize");u_(r,m=>i(m)&&e.isEditable(m),RA(e,"fontSize",""));const u=Kt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},SP=(e,n,o,r)=>{NA(n,i=>{fa(i)&&NA(e.dom.select(i.inline,r),u=>{oy(u)&&Ef(e,i,o,u,i.exact?u:null)}),JH(e.dom,i,r)})},t9=(e,n,o,r,i)=>{const u=i.parentNode;Cm(e,u,o,r)&&Ef(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>Cm(e,m,o,r)?(Ef(e,n,r,i),!0):!1)},tC=ut.each,n9=(e,n,o,r)=>{if(j2(e)&&fa(n)&&o.parentNode){const i=_S(e.schema),u=n2(be.fromDom(o),m=>kl(m.dom));return or(i,r)&&jr(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},xP=(e,n,o,r)=>{if(tC(o.styles,(i,u)=>{e.setStyle(n,u,Fr(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},g_=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],m=!r&&e.selection.isCollapsed(),y=e.dom,x=e.selection,A=(oe,te=u)=>{ve(te.onformat)&&te.onformat(oe,te,o,r),xP(y,oe,te,o),tC(te.attributes,(ie,_e)=>{y.setAttrib(oe,_e,Fr(ie,o))}),tC(te.classes,ie=>{const _e=Fr(ie,o);y.hasClass(oe,_e)||y.addClass(oe,_e)})},L=(oe,te)=>{let ie=!1;return tC(oe,_e=>kc(_e)?y.getContentEditable(te)==="false"&&!_e.ceFalseOverride||Fe(_e.collapsed)&&_e.collapsed!==m?!0:y.is(te,_e.selector)&&!kl(te)?(A(te,_e),ie=!0,!1):!0:!1),ie},$=oe=>{if(de(oe)){const te=y.create(oe);return A(te),te}else return null},z=(oe,te,ie)=>{const _e=[];let Re=!0;const Me=u.inline||u.block,Ie=$(Me),ct=tt=>a3(u)&&Cm(e,tt,n,o),Ot=(tt,Ze,mt)=>{const sn=yg(u)&&cE(e.schema,tt)&&Lp(e,Ze,Me);return mt&&sn},Qt=(tt,Ze,mt,sn)=>{const _n=tt.nodeName.toLowerCase(),Zn=Lp(e,Me,_n)&&Lp(e,Ze,Me),ho=!ie&&bt(tt)&&p2(tt.data),cs=kl(tt),Cs=!fa(u)||!oe.isBlock(tt);return(mt||sn)&&Zn&&!ho&&!cs&&Cs};$p(oe,te,tt=>{let Ze;const mt=sn=>{let _n=!1,Zn=Re,ho=!1;const cs=sn.parentNode,Cs=cs.nodeName.toLowerCase(),Gr=oe.getContentEditable(sn);Fe(Gr)&&(Zn=Re,Re=Gr==="true",_n=!0,ho=vb(e,sn));const Zi=Re&&!_n;if(jo(sn)&&!n9(e,u,sn,Cs)){Ze=null,wf(u)&&oe.remove(sn);return}if(ct(sn)){Ze=null;return}if(Ot(sn,Cs,Zi)){const mi=oe.rename(sn,Me);A(mi),_e.push(mi),Ze=null;return}if(kc(u)){let mi=L(i,sn);if(!mi&&Fe(cs)&&Ac(u)&&(mi=L(i,cs)),!fa(u)||mi){Ze=null;return}}Fe(Ie)&&Qt(sn,Cs,Zi,ho)?(Ze||(Ze=oe.clone(Ie,!1),cs.insertBefore(Ze,sn),_e.push(Ze)),ho&&_n&&(Re=Zn),Ze.appendChild(sn)):(Ze=null,xe(Dr(sn.childNodes),mt),_n&&(Re=Zn),Ze=null)};xe(tt,mt)}),u.links===!0&&xe(_e,tt=>{const Ze=mt=>{mt.nodeName==="A"&&A(mt,u),xe(Dr(mt.childNodes),Ze)};Ze(tt)}),xe(_e,tt=>{const Ze=_n=>{let Zn=0;return xe(_n.childNodes,ho=>{!Jt(ho)&&!Hc(ho)&&Zn++}),Zn},mt=_n=>Vo(_n.childNodes,bb).filter(ho=>oe.getContentEditable(ho)!=="false"&&n_(oe,ho,u)).map(ho=>{const cs=oe.clone(ho,!1);return A(cs),oe.replace(cs,_n,!0),oe.remove(ho,!0),cs}).getOr(_n),sn=Ze(tt);if((_e.length>1||!oe.isBlock(tt))&&sn===0){oe.remove(tt,!0);return}(fa(u)||wf(u)&&u.wrapper)&&(!u.exact&&sn===1&&(tt=mt(tt)),SP(e,i,o,tt),t9(e,u,n,o,tt),CP(oe,u,o,tt),wP(oe,u,o,tt),h_(oe,u,o,tt),OA(e,u,o,tt))})},X=pb(r)?r:x.getNode();if(y.getContentEditable(X)==="false"&&!vb(e,X)){r=X,L(i,r),im(e,n,r,o);return}if(u){if(r)if(pb(r)){if(!L(i,r)){const oe=y.createRng();oe.setStartBefore(r),oe.setEndAfter(r),z(y,gm(y,oe,i),!0)}}else z(y,r,!0);else!m||!fa(u)||pg(e).length?(x.setRng(JE(x.getRng())),iE(e,()=>{Ed(e,(oe,te)=>{const ie=te?oe:gm(y,oe,i);z(y,ie,!1)})},gt),e.nodeChanged()):ZH(e,n,o),KH(e.formatter,n).each(oe=>{xe(AA(e.selection),te=>xP(y,te,oe,o))});sP(n,e)}im(e,n,r,o)},PA=(e,n,o,r)=>{(r||e.selection.isEditable())&&g_(e,n,o,r)},p_=e=>En(e,"vars"),o9=(e,n)=>{e.set({}),n.on("NodeChange",o=>{BA(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=W.from(o.node).map(i=>pb(i)?i:i.startContainer).bind(i=>Ut(i)?W.some(i):W.from(i.parentElement)).getOrThunk(()=>EP(n));BA(n,r,e.get())})},EP=e=>e.selection.getStart(),IA=(e,n,o,r,i)=>zr(n,y=>{const x=e.formatter.matchNode(y,o,i??{},r);return!In(x)},y=>KN(e,y,o)?!0:r?!1:Fe(e.formatter.matchNode(y,o,i,!0))),b_=(e,n)=>{const o=n??EP(e);return Kt(yb(e.dom,o),r=>Ut(r)&&!Kf(r))},BA=(e,n,o)=>{const r=b_(e,n);Tt(o,(i,u)=>{const m=y=>{const x=IA(e,r,u,y.similar,p_(y)?y.vars:void 0),A=x.isSome();if(y.state.get()!==A){y.state.set(A);const L=x.getOr(n);p_(y)?y.callback(A,{node:L,format:u,parents:r}):xe(y.callbacks,$=>$(A,{node:L,format:u,parents:r}))}};xe([i.withSimilar,i.withoutSimilar],m),xe(i.withVars,m)})},s9=(e,n,o,r,i,u)=>{const m=n.get();xe(o.split(","),y=>{const x=Yo(m,y).getOrThunk(()=>{const L={withSimilar:{state:Zs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Zs(!1),similar:!1,callbacks:[]},withVars:[]};return m[y]=L,L}),A=()=>{const L=b_(e);return IA(e,L,y,i,u).isSome()};if(In(u)){const L=i?x.withSimilar:x.withoutSimilar;L.callbacks.push(r),L.callbacks.length===1&&L.state.set(A())}else x.withVars.push({state:Zs(A()),similar:i,vars:u,callback:r})}),n.set(m)},r9=(e,n,o)=>{const r=e.get();xe(n.split(","),i=>Yo(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:Kt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Kt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Kt(u.withVars,m=>m.callback!==o)}})),e.set(r)},a9=(e,n,o,r,i,u)=>(s9(e,n,o,r,i,u),{unbind:()=>r9(n,o,r)}),v_=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(Yw(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?yP(e,n,o,r):PA(e,n,o,r))},fh=ut.explode,_P=()=>{const e={};return{addFilter:(i,u)=>{xe(fh(i),m=>{En(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>Ii(e),removeFilter:(i,u)=>{xe(fh(i),m=>{if(En(e,m))if(Fe(u)){const y=e[m],x=Kt(y.callbacks,A=>A!==u);x.length>0?y.callbacks=x:delete e[m]}else delete e[m]})}}},LA=(e,n)=>{xe(n,o=>{e.attr(o,null)})},ma=(e,n,o)=>{e.addNodeFilter("font",r=>{xe(r,i=>{const u=n.parse(i.attr("style")),m=i.attr("color"),y=i.attr("face"),x=i.attr("size");m&&(u.color=m),y&&(u["font-family"]=y),x&&hc(x).each(A=>{u["font-size"]=o[A-1]}),i.name="span",i.attr("style",n.serialize(u)),LA(i,["color","face","size"])})})},FA=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";xe(r,u=>{if(i)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},$A=(e,n,o)=>{var r;const i=Ym();n.convert_fonts_to_spans&&ma(e,i,ut.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),FA(e,o,i)},_g=(e,n,o)=>{n.inline_styles&&$A(e,n,o)},TP=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),kP=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},nC=e=>{try{return decodeURIComponent(e)}catch{return e}},HA=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",m=nC(r),y=u?kP(m):m;return W.some({type:i[1],data:y,base64Encoded:u})}else return W.none()},AP=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return W.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return W.some(new Blob([i],{type:e}))},sy=e=>new Promise((n,o)=>{HA(e).bind(({type:r,data:i,base64Encoded:u})=>AP(r,i,u)).fold(()=>o("Invalid data URI"),n)}),i9=e=>us(e,"blob:")?TP(e):us(e,"data:")?sy(e):Promise.reject("Unknown URI format"),s1=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let c9=0;const r1=e=>"blobid"+c9++,OP=(e,n,o)=>HA(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return W.none();{const m=u?r:btoa(r);return o(m,i)}}),$u=(e,n,o)=>{const r=e.create(r1(),n,o);return e.add(r),r},ry=(e,n,o=!1)=>OP(n,o,(r,i)=>W.from(e.getByData(r,i)).orThunk(()=>AP(i,r).map(u=>$u(e,u,r)))),zA=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(us(n,"blob:")){const r=e.getByUri(n);return Fe(r)?Promise.resolve(r):i9(n).then(i=>s1(i).then(u=>OP(u,!1,m=>W.some($u(e,i,m))).getOrThunk(o)))}else return us(n,"data:")?ry(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},VA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,l9=e=>W.from(e.match(VA)).bind(n=>Mc(n,1)).map(n=>us(n,"www.")?n.substring(4):n),oC=(e,n)=>{W.from(e.attr("src")).bind(l9).forall(o=>!et(n,o))&&e.attr("sandbox","")},UA=(e,n)=>us(e,`${n}/`),_f=e=>In(e)?"iframe":UA(e,"image")?"img":UA(e,"video")?"video":UA(e,"audio")?"audio":"iframe",y_=({type:e,src:n,width:o,height:r}={},i,u)=>{const m=_f(e),y=new sl(m,1);return y.attr(m==="audio"?{src:n}:{src:n,width:o,height:r}),(m==="audio"||m==="video")&&y.attr("controls",""),m==="iframe"&&i&&oC(y,u),y},DP=e=>Fe(e.attr("data-mce-bogus")),WA=e=>e.attr("src")===Nn.transparentSrc||Fe(e.attr("data-mce-placeholder")),ZA=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");WA(i)||DP(i)||en(u)||ry(o,u,!0).each(m=>{i.attr("src",m.blobUri())})};e.addAttributeFilter("src",i=>xe(i,r))}},ay=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",x=>{let A=x.length;const L=z=>z.split(" ").filter(oe=>oe.length>0).concat(["noopener"]).sort().join(" "),$=z=>{const X=z?ut.trim(z):"";return/\b(noopener)\b/g.test(X)?X:L(X)};if(!n.allow_unsafe_link_target)for(;A--;){const z=x[A];z.name==="a"&&z.attr("target")==="_blank"&&z.attr("rel",$(z.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",x=>{let A=x.length,L,$,z,X;for(;A--;)if(X=x[A],X.name==="a"&&X.firstChild&&!X.attr("href"))for(z=X.parent,L=X.lastChild;L&&z;)$=L.prev,z.insert(L,X),L=$}),n.fix_list_elements&&e.addNodeFilter("ul,ol",x=>{let A=x.length,L,$;for(;A--;)if(L=x[A],$=L.parent,$&&($.name==="ul"||$.name==="ol"))if(L.prev&&L.prev.name==="li")L.prev.append(L);else{const z=new sl("li",1);z.attr("style","list-style-type: none"),L.wrap(z)}});const u=i.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",x=>{var A;let L=x.length;for(;L--;){const $=x[L],z=(A=$.attr("class"))!==null&&A!==void 0?A:"",X=ut.explode(z," ");let oe="";for(let te=0;te<X.length;te++){const ie=X[te];let _e=!1,Re=u["*"];Re&&Re[ie]&&(_e=!0),Re=u[$.name],!_e&&Re&&Re[ie]&&(_e=!0),_e&&(oe&&(oe+=" "),oe+=ie)}oe.length||(oe=null),$.attr("class",oe)}}),ZA(e,n);const m=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,y=qi((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",x=>xe(x,A=>{A.replace(y_({type:A.attr("type"),src:A.name==="object"?A.attr("data"):A.attr("src"),width:A.attr("width"),height:A.attr("height")},m,y))})),m&&e.addNodeFilter("iframe",x=>xe(x,A=>oC(A,y)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:w_,setPrototypeOf:RP,isFrozen:MP,getPrototypeOf:u9,getOwnPropertyDescriptor:d9}=Object;let{freeze:au,seal:Tf,create:iy}=Object,{apply:jA,construct:C_}=typeof Reflect<"u"&&Reflect;au||(au=function(n){return n}),Tf||(Tf=function(n){return n}),jA||(jA=function(n,o,r){return n.apply(o,r)}),C_||(C_=function(n,o){return new n(...o)});const cy=Od(Array.prototype.forEach),NP=Od(Array.prototype.pop),ly=Od(Array.prototype.push),Bb=Od(String.prototype.toLowerCase),qA=Od(String.prototype.toString),PP=Od(String.prototype.match),sC=Od(String.prototype.replace),f9=Od(String.prototype.indexOf),m9=Od(String.prototype.trim),Ad=Od(Object.prototype.hasOwnProperty),iu=Od(RegExp.prototype.test),rC=h9(TypeError);function Od(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return jA(e,n,r)}}function h9(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return C_(e,o)}}function Gs(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bb;RP&&RP(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const u=o(i);u!==i&&(MP(n)||(n[r]=u),i=u)}e[i]=!0}return e}function g9(e){for(let n=0;n<e.length;n++)Ad(e,n)||(e[n]=null);return e}function Lb(e){const n=iy(null);for(const[o,r]of w_(e))Ad(e,o)&&(Array.isArray(r)?n[o]=g9(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Lb(r):n[o]=r);return n}function aC(e,n){for(;e!==null;){const r=d9(e,n);if(r){if(r.get)return Od(r.get);if(typeof r.value=="function")return Od(r.value)}e=u9(e)}function o(){return null}return o}const IP=au(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),GA=au(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),KA=au(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),p9=au(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),YA=au(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),BP=au(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),LP=au(["#text"]),Fb=au(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),XA=au(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),FP=au(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),S_=au(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),b9=Tf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$P=Tf(/<%[\w\W]*|[\w\W]*%>/gm),v9=Tf(/\${[\w\W]*}/gm),y9=Tf(/^data-[\-\w.\u00B7-\uFFFF]/),w9=Tf(/^aria-[\-\w]+$/),HP=Tf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),C9=Tf(/^(?:\w+script|data):/i),S9=Tf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zP=Tf(/^html$/i),x9=Tf(/^[a-z][.\w]*(-[.\w]+)+$/i);var VP=Object.freeze({__proto__:null,MUSTACHE_EXPR:b9,ERB_EXPR:$P,TMPLIT_EXPR:v9,DATA_ATTR:y9,ARIA_ATTR:w9,IS_ALLOWED_URI:HP,IS_SCRIPT_OR_DATA:C9,ATTR_WHITESPACE:S9,DOCTYPE_NAME:zP,CUSTOM_ELEMENT:x9});const iC={element:1,text:3,progressingInstruction:7,comment:8,document:9},JA=function(){return typeof window>"u"?null:window},UP=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function E9(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JA();const n=yo=>E9(yo);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==iC.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:m,Node:y,Element:x,NodeFilter:A,NamedNodeMap:L=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:$,DOMParser:z,trustedTypes:X}=e,oe=x.prototype,te=aC(oe,"cloneNode"),ie=aC(oe,"remove"),_e=aC(oe,"nextSibling"),Re=aC(oe,"childNodes"),Me=aC(oe,"parentNode");if(typeof m=="function"){const yo=o.createElement("template");yo.content&&yo.content.ownerDocument&&(o=yo.content.ownerDocument)}let Ie,ct="";const{implementation:Ot,createNodeIterator:Qt,createDocumentFragment:tt,getElementsByTagName:Ze}=o,{importNode:mt}=r;let sn={};n.isSupported=typeof w_=="function"&&typeof Me=="function"&&Ot&&Ot.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_n,ERB_EXPR:Zn,TMPLIT_EXPR:ho,DATA_ATTR:cs,ARIA_ATTR:Cs,IS_SCRIPT_OR_DATA:Gr,ATTR_WHITESPACE:Zi,CUSTOM_ELEMENT:mi}=VP;let{IS_ALLOWED_URI:Ft}=VP,xn=null;const Wo=Gs({},[...IP,...GA,...KA,...YA,...LP]);let Yt=null;const Bn=Gs({},[...Fb,...XA,...FP,...S_]);let zn=Object.seal(iy(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),qt=null,vo=null,_o=!0,Na=!0,hs=!1,uc=!0,Il=!1,km=!0,Dc=!1,lu=!1,uu=!1,ji=!1,du=!1,wn=!1,Lo=!0,Kr=!1;const Pa="user-content-";let hi=!0,Ia=!1,Ar={},Or=null;const Vc=Gs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bd=null;const Am=Gs({},["audio","video","img","source","image","track"]);let If=null;const l0=Gs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),u0="http://www.w3.org/1998/Math/MathML",Bg="http://www.w3.org/2000/svg",Ld="http://www.w3.org/1999/xhtml";let Lg=Ld,Zy=!1,jy=null;const g$=Gs({},[u0,Bg,Ld],qA);let d0=null;const x5=["application/xhtml+xml","text/html"],E5="text/html";let dc=null,fu=null;const qy=o.createElement("form"),He=function(je){return je instanceof RegExp||je instanceof Function},Ue=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(fu&&fu===je)){if((!je||typeof je!="object")&&(je={}),je=Lb(je),d0=x5.indexOf(je.PARSER_MEDIA_TYPE)===-1?E5:je.PARSER_MEDIA_TYPE,dc=d0==="application/xhtml+xml"?qA:Bb,xn=Ad(je,"ALLOWED_TAGS")?Gs({},je.ALLOWED_TAGS,dc):Wo,Yt=Ad(je,"ALLOWED_ATTR")?Gs({},je.ALLOWED_ATTR,dc):Bn,jy=Ad(je,"ALLOWED_NAMESPACES")?Gs({},je.ALLOWED_NAMESPACES,qA):g$,If=Ad(je,"ADD_URI_SAFE_ATTR")?Gs(Lb(l0),je.ADD_URI_SAFE_ATTR,dc):l0,Bd=Ad(je,"ADD_DATA_URI_TAGS")?Gs(Lb(Am),je.ADD_DATA_URI_TAGS,dc):Am,Or=Ad(je,"FORBID_CONTENTS")?Gs({},je.FORBID_CONTENTS,dc):Vc,qt=Ad(je,"FORBID_TAGS")?Gs({},je.FORBID_TAGS,dc):{},vo=Ad(je,"FORBID_ATTR")?Gs({},je.FORBID_ATTR,dc):{},Ar=Ad(je,"USE_PROFILES")?je.USE_PROFILES:!1,_o=je.ALLOW_ARIA_ATTR!==!1,Na=je.ALLOW_DATA_ATTR!==!1,hs=je.ALLOW_UNKNOWN_PROTOCOLS||!1,uc=je.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Il=je.SAFE_FOR_TEMPLATES||!1,km=je.SAFE_FOR_XML!==!1,Dc=je.WHOLE_DOCUMENT||!1,ji=je.RETURN_DOM||!1,du=je.RETURN_DOM_FRAGMENT||!1,wn=je.RETURN_TRUSTED_TYPE||!1,uu=je.FORCE_BODY||!1,Lo=je.SANITIZE_DOM!==!1,Kr=je.SANITIZE_NAMED_PROPS||!1,hi=je.KEEP_CONTENT!==!1,Ia=je.IN_PLACE||!1,Ft=je.ALLOWED_URI_REGEXP||HP,Lg=je.NAMESPACE||Ld,zn=je.CUSTOM_ELEMENT_HANDLING||{},je.CUSTOM_ELEMENT_HANDLING&&He(je.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zn.tagNameCheck=je.CUSTOM_ELEMENT_HANDLING.tagNameCheck),je.CUSTOM_ELEMENT_HANDLING&&He(je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zn.attributeNameCheck=je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),je.CUSTOM_ELEMENT_HANDLING&&typeof je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zn.allowCustomizedBuiltInElements=je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Il&&(Na=!1),du&&(ji=!0),Ar&&(xn=Gs({},LP),Yt=[],Ar.html===!0&&(Gs(xn,IP),Gs(Yt,Fb)),Ar.svg===!0&&(Gs(xn,GA),Gs(Yt,XA),Gs(Yt,S_)),Ar.svgFilters===!0&&(Gs(xn,KA),Gs(Yt,XA),Gs(Yt,S_)),Ar.mathMl===!0&&(Gs(xn,YA),Gs(Yt,FP),Gs(Yt,S_))),je.ADD_TAGS&&(xn===Wo&&(xn=Lb(xn)),Gs(xn,je.ADD_TAGS,dc)),je.ADD_ATTR&&(Yt===Bn&&(Yt=Lb(Yt)),Gs(Yt,je.ADD_ATTR,dc)),je.ADD_URI_SAFE_ATTR&&Gs(If,je.ADD_URI_SAFE_ATTR,dc),je.FORBID_CONTENTS&&(Or===Vc&&(Or=Lb(Or)),Gs(Or,je.FORBID_CONTENTS,dc)),hi&&(xn["#text"]=!0),Dc&&Gs(xn,["html","head","body"]),xn.table&&(Gs(xn,["tbody"]),delete qt.tbody),je.TRUSTED_TYPES_POLICY){if(typeof je.TRUSTED_TYPES_POLICY.createHTML!="function")throw rC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof je.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw rC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ie=je.TRUSTED_TYPES_POLICY,ct=Ie.createHTML("")}else Ie===void 0&&(Ie=UP(X,i)),Ie!==null&&typeof ct=="string"&&(ct=Ie.createHTML(""));au&&au(je),fu=je}},Bt=Gs({},["mi","mo","mn","ms","mtext"]),Dt=Gs({},["annotation-xml"]),Pn=Gs({},["title","style","font","a","script"]),Zo=Gs({},[...GA,...KA,...p9]),Hr=Gs({},[...YA,...BP]),Om=function(je){let An=Me(je);(!An||!An.tagName)&&(An={namespaceURI:Lg,tagName:"template"});const co=Bb(je.tagName),Sa=Bb(An.tagName);return jy[je.namespaceURI]?je.namespaceURI===Bg?An.namespaceURI===Ld?co==="svg":An.namespaceURI===u0?co==="svg"&&(Sa==="annotation-xml"||Bt[Sa]):!!Zo[co]:je.namespaceURI===u0?An.namespaceURI===Ld?co==="math":An.namespaceURI===Bg?co==="math"&&Dt[Sa]:!!Hr[co]:je.namespaceURI===Ld?An.namespaceURI===Bg&&!Dt[Sa]||An.namespaceURI===u0&&!Bt[Sa]?!1:!Hr[co]&&(Pn[co]||!Zo[co]):!!(d0==="application/xhtml+xml"&&jy[je.namespaceURI]):!1},Fd=function(je){ly(n.removed,{element:je});try{Me(je).removeChild(je)}catch{ie(je)}},oS=function(je,An){try{ly(n.removed,{attribute:An.getAttributeNode(je),from:An})}catch{ly(n.removed,{attribute:null,from:An})}if(An.removeAttribute(je),je==="is"&&!Yt[je])if(ji||du)try{Fd(An)}catch{}else try{An.setAttribute(je,"")}catch{}},p$=function(je){let An=null,co=null;if(uu)je="<remove></remove>"+je;else{const Uc=PP(je,/^[\r\n\t ]+/);co=Uc&&Uc[0]}d0==="application/xhtml+xml"&&Lg===Ld&&(je='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+je+"</body></html>");const Sa=Ie?Ie.createHTML(je):je;if(Lg===Ld)try{An=new z().parseFromString(Sa,d0)}catch{}if(!An||!An.documentElement){An=Ot.createDocument(Lg,"template",null);try{An.documentElement.innerHTML=Zy?ct:Sa}catch{}}const Bl=An.body||An.documentElement;return je&&co&&Bl.insertBefore(o.createTextNode(co),Bl.childNodes[0]||null),Lg===Ld?Ze.call(An,Dc?"html":"body")[0]:Dc?An.documentElement:Bl},b$=function(je){return Qt.call(je.ownerDocument||je,je,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},_5=function(je){return je instanceof $&&(typeof je.nodeName!="string"||typeof je.textContent!="string"||typeof je.removeChild!="function"||!(je.attributes instanceof L)||typeof je.removeAttribute!="function"||typeof je.setAttribute!="function"||typeof je.namespaceURI!="string"||typeof je.insertBefore!="function"||typeof je.hasChildNodes!="function")},v$=function(je){return typeof y=="function"&&je instanceof y},Ch=function(je,An,co){sn[je]&&cy(sn[je],Sa=>{Sa.call(n,An,co,fu)})},sS=function(je){let An=null;if(Ch("beforeSanitizeElements",je,null),_5(je))return Fd(je),!0;const co=dc(je.nodeName);if(Ch("uponSanitizeElement",je,{tagName:co,allowedTags:xn}),je.hasChildNodes()&&!v$(je.firstElementChild)&&iu(/<[/\w]/g,je.innerHTML)&&iu(/<[/\w]/g,je.textContent)||je.nodeType===iC.progressingInstruction||km&&je.nodeType===iC.comment&&iu(/<[/\w]/g,je.data))return Fd(je),!0;if(!xn[co]||qt[co]){if(!qt[co]&&T5(co)&&(zn.tagNameCheck instanceof RegExp&&iu(zn.tagNameCheck,co)||zn.tagNameCheck instanceof Function&&zn.tagNameCheck(co)))return!1;if(hi&&!Or[co]){const Sa=Me(je)||je.parentNode,Bl=Re(je)||je.childNodes;if(Bl&&Sa){const Uc=Bl.length;for(let Uu=Uc-1;Uu>=0;--Uu){const Sh=te(Bl[Uu],!0);Sh.__removalCount=(je.__removalCount||0)+1,Sa.insertBefore(Sh,_e(je))}}}return Fd(je),!0}return je instanceof x&&!Om(je)||(co==="noscript"||co==="noembed"||co==="noframes")&&iu(/<\/no(script|embed|frames)/i,je.innerHTML)?(Fd(je),!0):(Il&&je.nodeType===iC.text&&(An=je.textContent,cy([_n,Zn,ho],Sa=>{An=sC(An,Sa," ")}),je.textContent!==An&&(ly(n.removed,{element:je.cloneNode()}),je.textContent=An)),Ch("afterSanitizeElements",je,null),!1)},y$=function(je,An,co){if(Lo&&(An==="id"||An==="name")&&(co in o||co in qy))return!1;if(!(Na&&!vo[An]&&iu(cs,An))){if(!(_o&&iu(Cs,An))){if(!Yt[An]||vo[An]){if(!(T5(je)&&(zn.tagNameCheck instanceof RegExp&&iu(zn.tagNameCheck,je)||zn.tagNameCheck instanceof Function&&zn.tagNameCheck(je))&&(zn.attributeNameCheck instanceof RegExp&&iu(zn.attributeNameCheck,An)||zn.attributeNameCheck instanceof Function&&zn.attributeNameCheck(An))||An==="is"&&zn.allowCustomizedBuiltInElements&&(zn.tagNameCheck instanceof RegExp&&iu(zn.tagNameCheck,co)||zn.tagNameCheck instanceof Function&&zn.tagNameCheck(co))))return!1}else if(!If[An]){if(!iu(Ft,sC(co,Zi,""))){if(!((An==="src"||An==="xlink:href"||An==="href")&&je!=="script"&&f9(co,"data:")===0&&Bd[je])){if(!(hs&&!iu(Gr,sC(co,Zi,"")))){if(co)return!1}}}}}}return!0},T5=function(je){return je!=="annotation-xml"&&PP(je,mi)},w$=function(je){Ch("beforeSanitizeAttributes",je,null);const{attributes:An}=je;if(!An)return;const co={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Yt};let Sa=An.length;for(;Sa--;){const Bl=An[Sa],{name:Uc,namespaceURI:Uu,value:Sh}=Bl,Gy=dc(Uc);let Wc=Uc==="value"?Sh:m9(Sh);const JG=Wc;if(co.attrName=Gy,co.attrValue=Wc,co.keepAttr=!0,co.forceKeepAttr=void 0,Ch("uponSanitizeAttribute",je,co),Wc=co.attrValue,co.forceKeepAttr)continue;if(!co.keepAttr){oS(Uc,je);continue}if(!uc&&iu(/\/>/i,Wc)){oS(Uc,je);continue}Il&&cy([_n,Zn,ho],x$=>{Wc=sC(Wc,x$," ")});const S$=dc(je.nodeName);if(!y$(S$,Gy,Wc)){oS(Uc,je);continue}if(Kr&&(Gy==="id"||Gy==="name")&&(oS(Uc,je),Wc=Pa+Wc),km&&iu(/((--!?|])>)|<\/(style|title)/i,Wc)){oS(Uc,je);continue}if(Ie&&typeof X=="object"&&typeof X.getAttributeType=="function"&&!Uu)switch(X.getAttributeType(S$,Gy)){case"TrustedHTML":{Wc=Ie.createHTML(Wc);break}case"TrustedScriptURL":{Wc=Ie.createScriptURL(Wc);break}}if(Wc!==JG)try{Uu?je.setAttributeNS(Uu,Uc,Wc):je.setAttribute(Uc,Wc),_5(je)?Fd(je):NP(n.removed)}catch{}}Ch("afterSanitizeAttributes",je,null)},C$=function yo(je){let An=null;const co=b$(je);for(Ch("beforeSanitizeShadowDOM",je,null);An=co.nextNode();)Ch("uponSanitizeShadowNode",An,null),!sS(An)&&(An.content instanceof u&&yo(An.content),w$(An));Ch("afterSanitizeShadowDOM",je,null)};return n.sanitize=function(yo){let je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},An=null,co=null,Sa=null,Bl=null;if(Zy=!yo,Zy&&(yo="<!-->"),typeof yo!="string"&&!v$(yo))if(typeof yo.toString=="function"){if(yo=yo.toString(),typeof yo!="string")throw rC("dirty is not a string, aborting")}else throw rC("toString is not a function");if(!n.isSupported)return yo;if(lu||Ue(je),n.removed=[],typeof yo=="string"&&(Ia=!1),Ia){if(yo.nodeName){const Sh=dc(yo.nodeName);if(!xn[Sh]||qt[Sh])throw rC("root node is forbidden and cannot be sanitized in-place")}}else if(yo instanceof y)An=p$("<!---->"),co=An.ownerDocument.importNode(yo,!0),co.nodeType===iC.element&&co.nodeName==="BODY"||co.nodeName==="HTML"?An=co:An.appendChild(co);else{if(!ji&&!Il&&!Dc&&yo.indexOf("<")===-1)return Ie&&wn?Ie.createHTML(yo):yo;if(An=p$(yo),!An)return ji?null:wn?ct:""}An&&uu&&Fd(An.firstChild);const Uc=b$(Ia?yo:An);for(;Sa=Uc.nextNode();)sS(Sa)||(Sa.content instanceof u&&C$(Sa.content),w$(Sa));if(Ia)return yo;if(ji){if(du)for(Bl=tt.call(An.ownerDocument);An.firstChild;)Bl.appendChild(An.firstChild);else Bl=An;return(Yt.shadowroot||Yt.shadowrootmode)&&(Bl=mt.call(r,Bl,!0)),Bl}let Uu=Dc?An.outerHTML:An.innerHTML;return Dc&&xn["!doctype"]&&An.ownerDocument&&An.ownerDocument.doctype&&An.ownerDocument.doctype.name&&iu(zP,An.ownerDocument.doctype.name)&&(Uu="<!DOCTYPE "+An.ownerDocument.doctype.name+`>
`+Uu),Il&&cy([_n,Zn,ho],Sh=>{Uu=sC(Uu,Sh," ")}),Ie&&wn?Ie.createHTML(Uu):Uu},n.setConfig=function(){let yo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ue(yo),lu=!0},n.clearConfig=function(){fu=null,lu=!1},n.isValidAttribute=function(yo,je,An){fu||Ue({});const co=dc(yo),Sa=dc(je);return y$(co,Sa,An)},n.addHook=function(yo,je){typeof je=="function"&&(sn[yo]=sn[yo]||[],ly(sn[yo],je))},n.removeHook=function(yo){if(sn[yo])return NP(sn[yo])},n.removeHooks=function(yo){sn[yo]&&(sn[yo]=[])},n.removeAllHooks=function(){sn={}},n}var $b=E9();const WP=ut.each,xY=ut.trim,EY=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_Y={ftp:21,http:80,https:443,mailto:25},TY=["img","video"],Dd=(e,n)=>Fe(e)?!e:Fe(n)?!et(TY,n):!0,x_=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},kf=(e,n,o)=>{const r=x_(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Dd(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Ni{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=Zh.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!kf(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=xY(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const y=r?r.path:new Ni(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(y,n);else{const x=/([^#?]*)([#?]?.*)/.exec(n);x&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(y,x[1])+x[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&WP(EY,(y,x)=>{let A=m[x];A&&(A=A.replace(/\(mce_at\)/g,"@@")),i[y]=A}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Ni(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Ni(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?_Y[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,m;const y=n.substring(0,n.lastIndexOf("/")).split("/"),x=o.split("/");if(y.length>=x.length){for(u=0,m=y.length;u<m;u++)if(u>=x.length||y[u]!==x[u]){r=u+1;break}}if(y.length<x.length){for(u=0,m=x.length;u<m;u++)if(u>=y.length||y[u]!==x[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=y.length-(r-1);u<m;u++)i+="../";for(u=r-1,m=x.length;u<m;u++)u!==r-1?i+="/"+x[u]:i+=x[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),y=[];WP(u,$=>{$&&y.push($)});const x=[];for(let $=m.length-1;$>=0;$--)if(!(m[$].length===0||m[$]===".")){if(m[$]===".."){r++;continue}if(r>0){r--;continue}x.push(m[$])}const A=y.length-r;let L;return A<=0?L=xs(x).join("/"):L=y.slice(0,A).join("/")+"/"+xs(x).join("/"),L.indexOf("/")!==0&&(L="/"+L),i&&L.lastIndexOf("/")!==L.length-1&&(L+=i),L}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const ZP=ut.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Hb="data-mce-type";let jP=0;const QA=(e,n,o,r,i)=>{var u,m,y,x;const A=n.validate,L=o.getSpecialElements();e.nodeType===Qr&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const $=(m=i==null?void 0:i.tagName)!==null&&m!==void 0?m:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Fe(i)&&(i.allowedTags[$]=!0);return}if(e.nodeType!==pu||$==="body")return;const z=be.fromDom(e),X=Qu(z,Hb),oe=ni(z,"data-mce-bogus");if(!X&&de(oe)){oe==="all"?ws(z):Li(z);return}const te=o.getElementRule($);if(A&&!te){En(L,$)?ws(z):Li(z);return}else Fe(i)&&(i.allowedTags[$]=!0);if(A&&te&&!X){if(xe((y=te.attributesForced)!==null&&y!==void 0?y:[],ie=>{sa(z,ie.name,ie.value==="{$uid}"?`mce_${jP++}`:ie.value)}),xe((x=te.attributesDefault)!==null&&x!==void 0?x:[],ie=>{Qu(z,ie.name)||sa(z,ie.name,ie.value==="{$uid}"?`mce_${jP++}`:ie.value)}),te.attributesRequired&&!_t(te.attributesRequired,ie=>Qu(z,ie))){Li(z);return}if(te.removeEmptyAttrs&&Vd(z)){Li(z);return}te.outputName&&te.outputName!==$&&PS(z,te.outputName)}},kY=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:m,attrValue:y}=i;i.keepAttr=qP(n,o,r,u,m,y),i.keepAttr?(i.allowedAttributes[m]=!0,eO(m,o)&&(i.attrValue=m),n.allow_svg_data_urls&&us(y,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):uy(e,m)&&(i.forceKeepAttr=!0)},qP=(e,n,o,r,i,u)=>o!=="html"&&!os(r)?!0:!(i in ZP&&kf(e,u,r))&&(!e.validate||n.isValid(r,i)||us(i,"data-")||us(i,"aria-")),uy=(e,n)=>e.hasAttribute(Hb)&&(n==="id"||n==="class"||n==="style"),eO=(e,n)=>e in n.getBoolAttrs(),ha=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const m=i[u],y=m.name,x=m.value;!qP(n,o,r,e.tagName.toLowerCase(),y,x)&&!uy(e,y)?e.removeAttribute(y):eO(y,o)&&e.setAttribute(y,y)}},_9=(e,n,o)=>{const r=$b();return r.addHook("uponSanitizeElement",(i,u)=>{QA(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{kY(i,e,n,o.current(),u)}),r},T9=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},dy=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};$b().sanitize(e,o)},fy=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=$b();r.addHook("uponSanitizeElement",(i,u)=>{var m;const y=(m=u.tagName)!==null&&m!==void 0?m:i.nodeName.toLowerCase(),x=n.allow_mathml_annotation_encodings;if(y==="annotation"&&Gt(x)&&x.length>0){const A=i.getAttribute("encoding");de(A)&&et(x,A)&&(u.allowedTags[y]=!0)}}),r.sanitize(e,o)},my=e=>n=>{const o=R(n);if(o==="svg")dy(n);else if(o==="math")fy(n,e);else throw new Error("Not a namespace element")},tO=(e,n)=>{const o=ne();if(e.sanitize){const r=_9(e,n,o);return{sanitizeHtmlElement:(u,m)=>{r.sanitize(u,T9(e,m)),r.removed=[],o.reset()},sanitizeNamespaceElement:my(e)}}else return{sanitizeHtmlElement:(u,m)=>{const y=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let x;for(;x=y.nextNode();){const A=o.track(x);QA(x,e,n,A),Ut(x)&&ha(x,e,n,A)}o.reset()},sanitizeNamespaceElement:it}},E_=ut.makeMap,nO=ut.extend,oO=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",m=n.childNodes;for(let y=0,x=m.length;y<x;y++){const A=m[y],L=new sl(A.nodeName.toLowerCase(),A.nodeType);if(Ut(A)){const $=A.attributes;for(let z=0,X=$.length;z<X;z++){const oe=$[z];L.attr(oe.name,oe.value)}os(L.name)&&(r(A),L.value=A.innerHTML)}else bt(A)?(L.value=A.data,u&&(L.raw=!0)):(aa(A)||Fi(A)||Gl(A))&&(L.value=A.data);os(L.name)||oO(L,A,o,r),e.append(L)}},k9=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const m=i;xe(n,y=>y(m)),en(m.parent)&&m!==e?i=u:r.push(m)}for(let i=r.length-1;i>=0;i--){const u=r[i];xe(o,m=>m(u))}},A9=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=nO(E_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),x=_S(n),A=/[ \t\r\n]+/g,L=/^[ \t\r\n]+/,$=/[ \t\r\n]+$/,z=Re=>{let Me=Re.parent;for(;Fe(Me);){if(Me.name in m)return!0;Me=Me.parent}return!1},X=Re=>{let Me=Re;for(;Fe(Me);){if(Me.name in x)return Ma(n,u,m,Me);Me=Me.parent}return!1},oe=Re=>Re.name in y||jm(n,Re)||os(Re.name)&&Re.parent===e,te=(Re,Me)=>{const Ie=Me?Re.prev:Re.next;return Fe(Ie)||en(Re.parent)?!1:oe(Re.parent)&&(Re.parent!==e||r.isRootContent===!0)};return[Re=>{var Me;if(Re.type===3&&!z(Re)){let Ie=(Me=Re.value)!==null&&Me!==void 0?Me:"";Ie=Ie.replace(A," "),(kH(Re.prev,oe)||te(Re,!0))&&(Ie=Ie.replace(L,"")),Ie.length===0||Ie===" "&&Re.prev&&Re.prev.type===Qr&&Re.next&&Re.next.type===Qr?Re.remove():Re.value=Ie}},Re=>{var Me;if(Re.type===1){const Ie=n.getElementRule(Re.name);if(i&&Ie){const ct=Ma(n,u,m,Re);Ie.paddInEmptyBlock&&ct&&X(Re)?gA(o,r,oe,Re):Ie.removeEmpty&&ct?oe(Re)?Re.remove():Re.unwrap():Ie.paddEmpty&&(ct||e1(Re))&&gA(o,r,oe,Re)}}else if(Re.type===3&&!z(Re)){let Ie=(Me=Re.value)!==null&&Me!==void 0?Me:"";(Re.next&&oe(Re.next)||te(Re,!1))&&(Ie=Ie.replace($,"")),Ie.length===0?Re.remove():Re.value=Ie}}]},GP=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},hy=(e={},n=ms())=>{const o=_P(),r=_P(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=tO(i,n),y=(Me,Ie,ct="html")=>{const Ot=ct==="xhtml"?"application/xhtml+xml":"text/html",Qt=En(n.getSpecialElements(),Ie.toLowerCase()),tt=Qt?`<${Ie}>${Me}</${Ie}>`:Me,Ze=()=>ct==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${tt}</body></html>`:/^[\s]*<head/i.test(Me)||/^[\s]*<html/i.test(Me)||/^[\s]*<!DOCTYPE/i.test(Me)?`<html>${tt}</html>`:`<body>${tt}</body>`,mt=u.parseFromString(Ze(),Ot).body;return m.sanitizeHtmlElement(mt,Ot),Qt?mt.firstChild:mt},x=o.addFilter,A=o.getFilters,L=o.removeFilter,$=r.addFilter,z=r.getFilters,X=r.removeFilter,oe=(Me,Ie)=>{pA(n,Me)&&Ie.push(Me)},te=(Me,Ie)=>{const ct=de(Ie.attr(Hb)),Ot=Ie.type===1&&!En(Me,Ie.name)&&!jm(n,Ie)&&!os(Ie.name);return Ie.type===3||Ot&&!ct},ie=(Me,Ie)=>{const ct=nO(E_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ot=/^[ \t\r\n]+/,Qt=/[ \t\r\n]+$/;let tt=Me.firstChild,Ze=null;const mt=sn=>{var _n,Zn;sn&&(tt=sn.firstChild,tt&&tt.type===3&&(tt.value=(_n=tt.value)===null||_n===void 0?void 0:_n.replace(Ot,"")),tt=sn.lastChild,tt&&tt.type===3&&(tt.value=(Zn=tt.value)===null||Zn===void 0?void 0:Zn.replace(Qt,"")))};if(n.isValidChild(Me.name,Ie.toLowerCase())){for(;tt;){const sn=tt.next;te(ct,tt)?(Ze||(Ze=new sl(Ie,1),Ze.attr(i.forced_root_block_attrs),Me.insert(Ze,tt)),Ze.append(tt)):(mt(Ze),Ze=null),tt=sn}mt(Ze)}},Re={schema:n,addAttributeFilter:$,getAttributeFilters:z,removeAttributeFilter:X,addNodeFilter:x,getNodeFilters:A,removeNodeFilter:L,parse:(Me,Ie={})=>{var ct;const Ot=i.validate,Qt=(ct=Ie.context)!==null&&ct!==void 0?ct:i.root_name,tt=y(Me,Qt,Ie.format);Ti(n,tt);const Ze=new sl(Qt,11);oO(Ze,tt,n.getSpecialElements(),m.sanitizeNamespaceElement),tt.innerHTML="";const[mt,sn]=A9(Ze,n,i,Ie),_n=[],Zn=Ot?Gr=>oe(Gr,_n):it,ho={nodes:{},attributes:{}},cs=Gr=>VN(A(),z(),Gr,ho);if(k9(Ze,[mt,cs],[sn,Zn]),_n.reverse(),Ot&&_n.length>0)if(Ie.context){const{pass:Gr,fail:Zi}=Do(_n,mi=>mi.parent===Ze);Jo(Zi,n,Ze,cs),Ie.invalid=Gr.length>0}else Jo(_n,n,Ze,cs);const Cs=GP(i,Ie);return Cs&&(Ze.name==="body"||Ie.isRootContent)&&ie(Ze,Cs),Ie.invalid||mA(ho,Ie),Ze}};return ay(Re,i),_g(Re,i,n),Re},O9=e=>n1(e)?Zp({validate:!1}).serialize(e):e,KP=(e,n,o)=>{const r=O9(e),i=n(r);if(i.isDefaultPrevented())return i;if(n1(e))if(i.content!==r){const u=hy({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},YP=e=>({sanitize:cg(e),sandbox_iframes:Fx(e),sandbox_iframes_exclusions:ew(e)}),XP=(e,n)=>{if(n.no_events)return ua.value(n);{const o=av(e,n);return o.isDefaultPrevented()?ua.error(X1(e,{content:"",...o}).content):ua.value(o)}},sO=(e,n,o)=>o.no_events?n:KP(n,i=>X1(e,{...o,content:i}),YP(e)).content,rO=(e,n)=>{if(n.no_events)return ua.value(n);{const o=KP(n.content,r=>hx(e,{...n,content:r}),YP(e));return o.isDefaultPrevented()?(R2(e,o),ua.error(void 0)):ua.value(o)}},zb=(e,n,o)=>{o.no_events||R2(e,{...o,content:n})},__=(e,n,o)=>({element:e,width:n,rows:o}),JP=(e,n)=>({element:e,cells:n}),QP=(e,n)=>({x:e,y:n}),eI=(e,n)=>Er(e,n).bind(hc).getOr(1),tI=(e,n,o,r,i)=>{const u=eI(i,"rowspan"),m=eI(i,"colspan"),y=e.rows;for(let x=o;x<o+u;x++){y[x]||(y[x]=JP(F0(r),[]));for(let A=n;A<n+m;A++){const L=y[x].cells;L[A]=x===o&&A===n?i:tm(i)}}},D9=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},R9=(e,n,o)=>{for(;D9(e,n,o);)n++;return n},aO=e=>Fo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),iO=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(No(i[u],n))return W.some(QP(u,r))}return W.none()},cO=(e,n,o,r,i)=>{const u=[],m=e.rows;for(let y=o;y<=i;y++){const x=m[y].cells,A=n<r?x.slice(n,r+1):x.slice(r,n+1);u.push(JP(m[y].element,A))}return u},nI=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,m=o.y,y=i<m?cO(e,r,i,u,m):cO(e,r,m,u,i);return __(e.element,aO(y),y)},oI=(e,n)=>{const o=tm(e.element),r=be.fromTag("tbody");return wl(r,n),Js(o,r),o},sI=e=>dt(e.rows,n=>{const o=dt(n.cells,i=>{const u=F0(i);return Is(u,"colspan"),Is(u,"rowspan"),u}),r=tm(n.element);return wl(r,o),r}),M9=e=>{const n=__(tm(e),0,[]);return xe(ii(e,"tr"),(o,r)=>{xe(ii(o,"td,th"),(i,u)=>{tI(n,R9(n,u,r),r,o,i)})}),__(n.element,aO(n.rows),n.rows)},N9=e=>oI(e,sI(e)),P9=(e,n,o)=>iO(e,n).bind(r=>iO(e,o).map(i=>nI(e,r,i))),lO=e=>Vo(e,n=>no(n)==="ul"||no(n)==="ol"),cC=(e,n)=>Vo(e,o=>no(o)==="li"&&pw(o,n)).fold(wt([]),o=>lO(e).map(r=>{const i=be.fromTag(no(r)),u=Qo(ai(r),(m,y)=>us(y,"list-style"));return Gn(i,u),[be.fromTag("li"),i]}).getOr([])),rI=(e,n)=>{const o=Fo(n,(r,i)=>(Js(i,r),i),e);return n.length>0?_3([o]):o},aI=e=>Jm(e)?si(e).filter(g2).fold(wt([]),n=>[e,n]):g2(e)?[e]:[],T_=(e,n,o)=>{const r=be.fromDom(n.commonAncestorContainer),i=xg(r,e),u=Kt(i,x=>o.isWrapper(no(x))),m=cC(i,n),y=u.concat(m.length?m:aI(r));return dt(y,tm)},iI=()=>_3([]),I9=(e,n,o)=>rI(be.fromDom(n.cloneContents()),T_(e,n,o)),Vb=(e,n)=>Kd(n,"table",Ae(No,e)),uO=(e,n)=>Vb(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=M9(o);return P9(u,r,i).map(m=>_3([N9(m)]))}).getOrThunk(iI),cI=(e,n,o)=>n.length>0&&n[0].collapsed?iI():I9(e,n[0],o),lC=(e,n,o)=>{const r=Pv(n,e);return r.length>0?uO(e,r):cI(e,n,o)},uC=(e,n)=>n>=0&&n<e.length&&fm(e.charAt(n)),k_=e=>xc(e.innerText),lI=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),uI=e=>W.from(e.selection.getRng()).map(n=>{var o;const r=W.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=lI(r),m=be.fromDom(n.cloneContents());qM(m),GM(m);const y=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),x=k_(y),A=xc((o=y.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(y),uC(A,0)||uC(A,A.length-1)){const L=r.getOr(i),$=k_(L),z=$.indexOf(x);if(z===-1)return x;{const X=uC($,z-1),oe=uC($,z+x.length);return(X?" ":"")+x+(oe?" ":"")}}else return x}).getOr(""),B9=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=OE(e,oE(i)),m=n.contextual?lC(be.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},L9=(e,n)=>{if(n.format==="text")return uI(e);{const o=B9(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},F9=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),dO=(e,n,o={})=>{const r=F9(o,n);return XP(e,r).fold(Eo,i=>{const u=L9(e,i);return sO(e,u,i)})},fO=0,mO=1,dI=2,$9=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(L,$,z)=>({start:L,end:$,diag:z}),m=(L,$,z,X,oe)=>{const te=x(L,$,z,X);if(te===null||te.start===$&&te.diag===$-X||te.end===L&&te.diag===L-z){let ie=L,_e=z;for(;ie<$||_e<X;)ie<$&&_e<X&&e[ie]===n[_e]?(oe.push([fO,e[ie]]),++ie,++_e):$-L>X-z?(oe.push([dI,e[ie]]),++ie):(oe.push([mO,n[_e]]),++_e)}else{m(L,te.start,z,te.start-te.diag,oe);for(let ie=te.start;ie<te.end;++ie)oe.push([fO,e[ie]]);m(te.end,$,te.end-te.diag,X,oe)}},y=(L,$,z,X)=>{let oe=L;for(;oe-$<X&&oe<z&&e[oe]===n[oe-$];)++oe;return u(L,oe,$)},x=(L,$,z,X)=>{const oe=$-L,te=X-z;if(oe===0||te===0)return null;const ie=oe-te,_e=te+oe,Re=(_e%2===0?_e:_e+1)/2;r[1+Re]=L,i[1+Re]=$+1;let Me,Ie,ct,Ot,Qt;for(Me=0;Me<=Re;++Me){for(Ie=-Me;Ie<=Me;Ie+=2){for(ct=Ie+Re,Ie===-Me||Ie!==Me&&r[ct-1]<r[ct+1]?r[ct]=r[ct+1]:r[ct]=r[ct-1]+1,Ot=r[ct],Qt=Ot-L+z-Ie;Ot<$&&Qt<X&&e[Ot]===n[Qt];)r[ct]=++Ot,++Qt;if(ie%2!==0&&ie-Me<=Ie&&Ie<=ie+Me&&i[ct-ie]<=r[ct])return y(i[ct-ie],Ie+L-z,$,X)}for(Ie=ie-Me;Ie<=ie+Me;Ie+=2){for(ct=Ie+Re-ie,Ie===ie-Me||Ie!==ie+Me&&i[ct+1]<=i[ct-1]?i[ct]=i[ct+1]-1:i[ct]=i[ct-1],Ot=i[ct]-1,Qt=Ot-L+z-Ie;Ot>=L&&Qt>=z&&e[Ot]===n[Qt];)i[ct]=Ot--,Qt--;if(ie%2===0&&-Me<=Ie&&Ie<=Me&&i[ct]<=r[ct+ie])return y(i[ct],Ie+L-z,$,X)}}return null},A=[];return m(0,e.length,0,n.length,A),A},fI=e=>Ut(e)?e.outerHTML:bt(e)?Zh.encodeRaw(e.data,!1):aa(e)?"<!--"+e.data+"-->":"",H9=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},z9=(e,n,o)=>{const r=H9(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},V9=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},U9=(e,n)=>{let o=0;xe(e,r=>{r[0]===fO?o++:r[0]===mO?(z9(n,r[1],o),o++):r[0]===dI&&V9(n,o)})},W9=(e,n)=>Kt(dt(Dr(e.childNodes),M(xc,fI)),o=>o.length>0),Z9=(e,n)=>{const o=dt(Dr(n.childNodes),fI);return U9($9(o,e),n),n},j9=Ge(()=>document.implementation.createHTMLDocument("undo")),q9=e=>e.querySelector("iframe")!==null,mI=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),G9=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Ub=e=>{const n=e.serializer.getTempAttrs(),o=jM(e.getBody(),n);return q9(o)?mI(W9(o)):G9(xc(o.innerHTML))},ac=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Z9(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Fe(r)&&eE(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},hO=e=>e.type==="fragmented"?e.fragments.join(""):e.content,dC=e=>{const n=be.fromTag("body",j9());return Su(n,hO(e)),xe(ii(n,"*[data-mce-bogus]"),Li),Bs(n)},Wb=(e,n)=>hO(e)===hO(n),hI=(e,n)=>dC(e)===dC(n),rl=(e,n)=>!e||!n?!1:Wb(e,n)?!0:hI(e,n),Tg=e=>e.get()===0,fC=(e,n,o)=>{Tg(o)&&(e.typing=n)},gI=(e,n)=>{e.typing&&(fC(e,!1,n),e.add())},pI=e=>{e.typing&&(e.typing=!1,e.add())},K9=(e,n,o)=>{Tg(n)&&o.set(nv(e.selection))},bI=(e,n,o,r,i,u,m)=>{const y=Ub(e),x=ut.extend(u||{},y);if(!Tg(r)||e.removed)return null;const A=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:x,lastLevel:A,originalEvent:m}).isDefaultPrevented()||A&&rl(A,x))return null;n.data[o.get()]&&i.get().each(z=>{n.data[o.get()].beforeBookmark=z});const L=mv(e);if(L&&n.data.length>L){for(let z=0;z<n.data.length-1;z++)n.data[z]=n.data[z+1];n.data.length--,o.set(n.data.length)}x.bookmark=nv(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(x),o.set(n.data.length-1);const $={level:x,lastLevel:A,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",$),e.dispatch("change",$)):e.dispatch("AddUndo",$),x},mC=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},gO=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];ac(e,m,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},Y9=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],ac(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},vI=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,fC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],ac(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},X9=e=>{e.clear(),e.add()},pO=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!rl(Ub(e),n.data[0]),bO=(e,n)=>n.get()<e.data.length-1&&!e.typing,J9=(e,n,o)=>(gI(e,n),e.beforeChange(),e.ignore(o),e.add()),Q9=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},yI=(e,n)=>{const o=e.dom,r=Fe(n)?n:e.getBody();xe(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=G2(e),m=o.getAttrib(i,"border");(!m||m==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const y=o.getAttrib(i,"name")||i.id,x=oc(e);y&&e.hasVisual?o.addClass(i,x):o.removeClass(i,x)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Af=e=>({init:{bindEvents:it},undoManager:{beforeChange:(n,o)=>K9(e,n,o),add:(n,o,r,i,u,m)=>bI(e,n,o,r,i,u,m),undo:(n,o,r)=>vI(e,n,o,r),redo:(n,o)=>Y9(e,n,o),clear:(n,o)=>mC(e,n,o),reset:n=>X9(n),hasUndo:(n,o)=>pO(e,n,o),hasRedo:(n,o)=>bO(n,o),transact:(n,o,r)=>J9(n,o,r),ignore:(n,o)=>Q9(n,o),extra:(n,o,r,i)=>gO(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>Yw(e,n,o,r,i),matchAll:(n,o)=>YN(e,n,o),matchNode:(n,o,r,i)=>Cm(e,n,o,r,i),canApply:n=>$H(e,n),closest:n=>o_(e,n),apply:(n,o,r)=>PA(e,n,o,r),remove:(n,o,r,i)=>yP(e,n,o,r,i),toggle:(n,o,r)=>v_(e,n,o,r),formatChanged:(n,o,r,i,u)=>a9(e,n,o,r,i,u)},editor:{getContent:n=>XM(e,n),setContent:(n,o)=>Nb(e,n,o),insertContent:(n,o)=>ru(e,n,o),addVisual:n=>yI(e,n)},selection:{getContent:(n,o)=>dO(e,n,o)},autocompleter:{addDecoration:it,removeDecoration:it},raw:{getModel:()=>W.none()}}),vO=e=>{const n=A=>Je(A)?A:{},{init:o,undoManager:r,formatter:i,editor:u,selection:m,autocompleter:y,raw:x}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(A,L,$)=>r.transact($),ignore:(A,L)=>r.ignore(L),extra:(A,L,$,z)=>r.extra($,z)},formatter:{match:(A,L,$,z)=>i.match(A,n(L),z),matchAll:i.matchAll,matchNode:i.matchNode,canApply:A=>i.canApply(A),closest:A=>i.closest(A),apply:(A,L,$)=>i.apply(A,n(L)),remove:(A,L,$,z)=>i.remove(A,n(L)),toggle:(A,L,$)=>i.toggle(A,n(L)),formatChanged:(A,L,$,z,X)=>i.formatChanged(L,$,z,X)},editor:{getContent:A=>u.getContent(A),setContent:(A,L)=>({content:u.setContent(A,L),html:""}),insertContent:(A,L)=>(u.insertContent(A),""),addVisual:u.addVisual},selection:{getContent:(A,L)=>m.getContent(L)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>W.some(x.getRawModel())}}},ez=()=>{const e=wt(null),n=wt("");return{init:{bindEvents:it},undoManager:{beforeChange:it,add:e,undo:e,redo:e,clear:it,reset:it,hasUndo:$e,hasRedo:$e,transact:e,ignore:it,extra:it},formatter:{match:$e,matchAll:wt([]),matchNode:wt(void 0),canApply:$e,closest:n,apply:it,remove:it,toggle:it,formatChanged:wt({unbind:it})},editor:{getContent:n,setContent:wt({content:"",html:""}),insertContent:wt(""),addVisual:it},selection:{getContent:n},autocompleter:{addDecoration:it,removeDecoration:it},raw:{getModel:wt(W.none())}}},Rd=e=>En(e.plugins,"rtc"),yO=e=>Yo(e.plugins,"rtc").bind(n=>W.from(n.setup)),wI=e=>{const n=e;return yO(e).fold(()=>(n.rtcInstance=Af(e),W.none()),o=>(n.rtcInstance=ez(),W.some(()=>o().then(r=>(n.rtcInstance=vO(r),r.rtc.isRemote)))))},A_=e=>e.rtcInstance?e.rtcInstance:Af(e),qa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},tz=(e,n,o)=>{qa(e).undoManager.beforeChange(n,o)},nz=(e,n,o,r,i,u,m)=>qa(e).undoManager.add(n,o,r,i,u,m),oz=(e,n,o,r)=>qa(e).undoManager.undo(n,o,r),sz=(e,n,o)=>qa(e).undoManager.redo(n,o),rz=(e,n,o)=>{qa(e).undoManager.clear(n,o)},CI=(e,n)=>{qa(e).undoManager.reset(n)},az=(e,n,o)=>qa(e).undoManager.hasUndo(n,o),iz=(e,n,o)=>qa(e).undoManager.hasRedo(n,o),cz=(e,n,o,r)=>qa(e).undoManager.transact(n,o,r),SI=(e,n,o)=>{qa(e).undoManager.ignore(n,o)},wO=(e,n,o,r,i)=>{qa(e).undoManager.extra(n,o,r,i)},CO=(e,n,o,r,i)=>qa(e).formatter.match(n,o,r,i),xI=(e,n,o)=>qa(e).formatter.matchAll(n,o),SO=(e,n,o,r,i)=>qa(e).formatter.matchNode(n,o,r,i),EI=(e,n)=>qa(e).formatter.canApply(n),_I=(e,n)=>qa(e).formatter.closest(n),xO=(e,n,o,r)=>{qa(e).formatter.apply(n,o,r)},TI=(e,n,o,r,i)=>{qa(e).formatter.remove(n,o,r,i)},kI=(e,n,o,r)=>{qa(e).formatter.toggle(n,o,r)},AI=(e,n,o,r,i,u)=>qa(e).formatter.formatChanged(n,o,r,i,u),lz=(e,n)=>A_(e).editor.getContent(n),EO=(e,n,o)=>A_(e).editor.setContent(n,o),uz=(e,n,o)=>A_(e).editor.insertContent(n,o),O_=(e,n,o)=>qa(e).selection.getContent(n,o),dz=(e,n)=>qa(e).editor.addVisual(n),OI=e=>qa(e).init.bindEvents(),fz=(e,n={})=>{const o=n.format?n.format:"html";return O_(e,o,n)},_O=e=>e.dom.length===0?(ws(e),W.none()):W.some(e),DI=(e,n)=>e.filter(o=>nl.isBookmarkNode(o.dom)).bind(n?Vf:wu),mz=(e,n,o,r,i)=>{const u=e.dom,m=n.dom,y=r?u.length:m.length;r?(Z3(u,m,i,!1,!r),o.setStart(m,y)):(Z3(m,u,i,!1,!r),o.setEnd(m,y))},hz=(e,n,o)=>{si(e).each(r=>{const i=e.dom;n&&Iw(r,Qe(i,0),o)?BE(i,0,o):!n&&Yv(r,Qe(i,i.length),o)&&W3(i,i.length,o)})},RI=(e,n,o,r,i)=>{e.bind(u=>((r?W3:BE)(u.dom,r?u.dom.length:0,i),n.filter(oa).map(y=>mz(u,y,o,r,i)))).orThunk(()=>DI(n,r).or(n).filter(oa).map(m=>hz(m,r,i)))},gz=(e,n,o)=>{const r=W.from(n.firstChild).map(be.fromDom),i=W.from(n.lastChild).map(be.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(wu).filter(oa).bind(_O),m=i.bind(Vf).filter(oa).bind(_O);RI(u,r,e,!0,o),RI(m,i,e,!1,o),e.collapse(!1)},pz=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),MI=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Zp({validate:!1},e.schema).serialize(u)}else return n.content},AY=(e,n,o={})=>{const r=pz(o,n);rO(e,r).each(i=>{const u=MI(e,i),m=e.selection.getRng();gz(m,m.createContextualFragment(u),e.schema),e.selection.setRng(m),qv(e,m),zb(e,u,i)})},NI=(e,n,o)=>{if(En(e,n)){const r=Kt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var bz=(e,n)=>{let o,r;const i=(y,x)=>Vo(x,A=>e.is(A,y)),u=y=>e.getParents(y,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",y=>{const x=y.element,A=u(x),L={};Tt(o,($,z)=>{i(z,A).each(X=>{r[z]||(xe($,oe=>{oe(!0,{node:X,selector:z,parents:A})}),r[z]=$),L[z]=$})}),Tt(r,($,z)=>{L[z]||(delete r[z],xe($,X=>{X(!1,{node:x,selector:z,parents:A})}))})})};return{selectorChangedWithUnbind:(y,x)=>(o||m(),o[y]||(o[y]=[]),o[y].push(x),i(y,u(n.selection.getStart())).each(()=>{r[y]=o[y]}),{unbind:()=>{NI(o,y,x),NI(r,y,x)}})}};const PI=e=>!!(e&&e.ownerDocument)&&dr(be.fromDom(e.ownerDocument),be.fromDom(e)),vz=e=>e?PI(e.startContainer)&&PI(e.endContainer):!1,II=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:m}=bz(e,r),y=(Ft,xn)=>{const Wo=e.createRng();Fe(Ft)&&Fe(xn)?(Wo.setStart(Ft,xn),Wo.setEnd(Ft,xn),Ie(Wo),_e(!1)):(bw(e,Wo,r.getBody(),!0),Ie(Wo))},x=Ft=>fz(r,Ft),A=(Ft,xn)=>AY(r,Ft,xn),L=Ft=>NM(r.getBody(),Me(),Ft),$=Ft=>PM(r.getBody(),Me(),Ft),z=(Ft,xn)=>Zi.getBookmark(Ft,xn),X=Ft=>Zi.moveToBookmark(Ft),oe=(Ft,xn)=>(LM(e,Ft,xn).each(Ie),Ft),te=()=>{const Ft=Me(),xn=Re();return!Ft||Ft.item?!1:Ft.compareEndPoints?Ft.compareEndPoints("StartToEnd",Ft)===0:!xn||Ft.collapsed},ie=()=>{if(r.mode.isReadOnly())return!1;const Ft=Me(),xn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return xn.length>0?Ss(xn,Wo=>e.isEditable(Wo.parentElement)):RM(e,Ft)},_e=Ft=>{const xn=Me();xn.collapse(!!Ft),Ie(xn)},Re=()=>n.getSelection?n.getSelection():n.document.selection,Me=()=>{let Ft;const xn=(Yt,Bn,zn)=>{try{return Bn.compareBoundaryPoints(Yt,zn)}catch{return-1}},Wo=n.document;if(Fe(r.bookmark)&&!gr(r)){const Yt=CE(r);if(Yt.isSome())return Yt.map(Bn=>OE(r,[Bn])[0]).getOr(Wo.createRange())}try{const Yt=Re();Yt&&!ef(Yt.anchorNode)&&(Yt.rangeCount>0?Ft=Yt.getRangeAt(0):Ft=Wo.createRange(),Ft=OE(r,[Ft])[0])}catch{}if(Ft||(Ft=Wo.createRange()),Zm(Ft.startContainer)&&Ft.collapsed){const Yt=e.getRoot();Ft.setStart(Yt,0),Ft.setEnd(Yt,0)}return i&&u&&(xn(Ft.START_TO_START,Ft,i)===0&&xn(Ft.END_TO_END,Ft,i)===0?Ft=u:(i=null,u=null)),Ft},Ie=(Ft,xn)=>{if(!vz(Ft))return;const Wo=Re();if(Ft=r.dispatch("SetSelectionRange",{range:Ft,forward:xn}).range,Wo){u=Ft;try{Wo.removeAllRanges(),Wo.addRange(Ft)}catch{}xn===!1&&Wo.extend&&(Wo.collapse(Ft.endContainer,Ft.endOffset),Wo.extend(Ft.startContainer,Ft.startOffset)),i=Wo.rangeCount>0?Wo.getRangeAt(0):null}if(!Ft.collapsed&&Ft.startContainer===Ft.endContainer&&(Wo!=null&&Wo.setBaseAndExtent)&&Ft.endOffset-Ft.startOffset<2&&Ft.startContainer.hasChildNodes()){const Bn=Ft.startContainer.childNodes[Ft.startOffset];Bn&&Bn.nodeName==="IMG"&&(Wo.setBaseAndExtent(Ft.startContainer,Ft.startOffset,Ft.endContainer,Ft.endOffset),(Wo.anchorNode!==Ft.startContainer||Wo.focusNode!==Ft.endContainer)&&Wo.setBaseAndExtent(Bn,0,Bn,1))}r.dispatch("AfterSetSelectionRange",{range:Ft,forward:xn})},ct=Ft=>(A(e.getOuterHTML(Ft)),Ft),Ot=()=>IM(r.getBody(),Me()),Qt=(Ft,xn)=>BM(e,Me(),Ft,xn),tt=()=>{const Ft=Re(),xn=Ft==null?void 0:Ft.anchorNode,Wo=Ft==null?void 0:Ft.focusNode;if(!Ft||!xn||!Wo||ef(xn)||ef(Wo))return!0;const Yt=e.createRng(),Bn=e.createRng();try{Yt.setStart(xn,Ft.anchorOffset),Yt.collapse(!0),Bn.setStart(Wo,Ft.focusOffset),Bn.collapse(!0)}catch{return!0}return Yt.compareBoundaryPoints(Yt.START_TO_START,Bn)<=0},Gr={dom:e,win:n,serializer:o,editor:r,expand:(Ft={type:"word"})=>Ie(Wp(e).expand(Me(),Ft)),collapse:_e,setCursorLocation:y,getContent:x,setContent:A,getBookmark:z,moveToBookmark:X,select:oe,isCollapsed:te,isEditable:ie,isForward:tt,setNode:ct,getNode:Ot,getSel:Re,setRng:Ie,getRng:Me,getStart:L,getEnd:$,getSelectedBlocks:Qt,normalize:()=>{const Ft=Me(),xn=Re();if(!hb(xn)&&Bv(r)){const Wo=Dw(e,Ft);return Wo.each(Yt=>{Ie(Yt,tt())}),Wo.getOr(Ft)}return Ft},selectorChanged:(Ft,xn)=>(m(Ft,xn),Gr),selectorChangedWithUnbind:m,getScrollContainer:()=>{let Ft,xn=e.getRoot();for(;xn&&xn.nodeName!=="BODY";){if(xn.scrollHeight>xn.clientHeight){Ft=xn;break}xn=xn.parentNode}return Ft},scrollIntoView:(Ft,xn)=>{Fe(Ft)?DM(r,Ft,xn):qv(r,Me(),xn)},placeCaretAt:(Ft,xn)=>Ie(_7(Ft,xn,r.getDoc())),getBoundingClientRect:()=>{const Ft=Me();return Ft.collapsed?Qe.fromRangeStart(Ft).getClientRects()[0]:Ft.getBoundingClientRect()},destroy:()=>{n=i=u=null,mi.destroy()}},Zi=nl(Gr),mi=Up(Gr,r);return Gr.bookmarkManager=Zi,Gr.controlSelection=mi,Gr},yz=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const m=ut.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();m.body=1;const A=L=>L.name in m||jm(o,L);for(let L=0,$=r.length;L<$;L++){let z=r[L],X=z.parent;if(X&&A(X)&&z===X.lastChild){let oe=z.prev;for(;oe;){const te=oe.name;if(te!=="span"||oe.attr("data-mce-type")!=="bookmark"){te==="br"&&(z=null);break}oe=oe.prev}if(z&&(z.remove(),Ma(o,y,x,X))){const te=o.getElementRule(X.name);te&&(te.removeEmpty?X.remove():te.paddEmpty&&gA(e,u,A,X))}}else{let oe=z;for(;X&&X.firstChild===oe&&X.lastChild===oe&&(oe=X,!m[X.name]);)X=X.parent;if(oe===X){const te=new sl("#text",3);te.value=Zr,z.replace(te)}}}})},wz=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,m=n.url_converter,y=n.url_converter_scope;let x=r.length;for(;x--;){const A=r[x];let L=A.attr(u);L!==void 0?(A.attr(i,L.length>0?L:null),A.attr(u,null)):(L=A.attr(i),i==="style"?L=o.serializeStyle(o.parseStyle(L),A.name):m&&(L=m.call(y,L,i,A.name)),A.attr(i,L.length>0?L:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let m=r.length;for(;m--;){const y=r[m];y.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(W.from(y.firstChild).exists(A=>{var L;return!p2((L=A.value)!==null&&L!==void 0?L:"")})?y.unwrap():y.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const m=x=>x.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=r.length;for(;y--;){const x=r[y],A=x.firstChild,L=(u=A==null?void 0:A.value)!==null&&u!==void 0?u:"";if(i==="script"){const $=x.attr("type");$&&x.attr("type",$==="mce-no/type"?null:$.replace(/^mce\-/,"")),n.element_format==="xhtml"&&A&&L.length>0&&(A.value=`// <![CDATA[
`+m(L)+`
// ]]>`)}else n.element_format==="xhtml"&&A&&L.length>0&&(A.value=`<!--
`+m(L)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&i==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{xe(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&yz(n,e,e.schema)},BI=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Cz=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const y=m.createHTMLDocument("");ut.each(u.nodeName==="BODY"?u.childNodes:[u],x=>{y.body.appendChild(y.importNode(x,!0))}),u.nodeName!=="BODY"?u=y.body.firstChild:u=y.body,r=i.doc,i.doc=y}return x4(e,{...o,node:u}),r&&(i.doc=r),u},Sz=(e,n)=>Fe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,xz=(e,n,o)=>Sz(e,o)?Cz(e,n,o):n,Ez=(e,n,o)=>{ut.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},_z=(e,n,o)=>!n.no_events&&e?rv(e,{...n,content:o}).content:o,OY=(e,n,o)=>{const r=xc(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||H0(be.fromDom(n))?r:ut.trim(r)},DY=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return BI(i),i},Tz=(e,n,o)=>Zp(e,n).serialize(o),kz=(e,n,o,r,i)=>{const u=Tz(n,o,r);return _z(e,i,u)},RY=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:$s.DOM,u=n&&n.schema?n.schema:ms(r),m=hy(r,u);wz(m,r,i);const y=(x,A={})=>{const L={format:"html",...A},$=xz(n,x,L),z=OY(i,$,L),X=DY(m,z,L);return L.format==="tree"?X:kz(n,r,u,X,L)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:y,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ae(Ez,m,o),getTempAttrs:wt(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},LI=(e,n)=>{const o=RY(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},qr="html",TO=(e,n)=>({...e,format:n,get:!0,getInner:!0}),MY=(e,n={})=>{const o=n.format?n.format:qr,r=TO(n,o);return XP(e,r).fold(Eo,i=>{const u=lz(e,i);return sO(e,u,i)})},Az="html",Oz=(e,n)=>({format:Az,...e,set:!0,content:n}),a1=(e,n,o={})=>{const r=Oz(o,n);return rO(e,r).map(i=>{const u=EO(e,i.content,i);return zb(e,u.html,i),u.content}).getOr(n)},NY="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),PY=[],ic="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),kO=[],AO=(e,n)=>{const o=Kt(n,r=>En(e,r));return Ko(o)},FI=e=>{const n=AO(e,NY),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Ko(n)},Dz=e=>AO(e,PY),$I=(e,n)=>{const o=ut.makeMap(e.plugins," "),i=Kt(n,u=>En(o,u));return Ko(i)},D_=e=>$I(e,ic),Rz=e=>$I(e,kO.map(n=>n.name)),OO=(e,n)=>{const o=FI(e),r=D_(n),i=r.length>0,u=o.length>0,m=n.theme==="mobile";if(i||u||m){const y=`
- `,x=m?`

Themes:${y}mobile`:"",A=i?`

Plugins:${y}${r.join(y)}`:"",L=u?`

Options:${y}${o.join(y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+x+A+L)}},Mz=e=>Vo(kO,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),HI=(e,n)=>{const o=Dz(e),r=Rz(n),i=r.length>0,u=o.length>0;if(i||u){const m=`
- `,y=i?`

Plugins:${m}${r.map(Mz).join(m)}`:"",x=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+y+x)}},zI=(e,n)=>{OO(e,n),HI(e,n)},gy=$s.DOM,VI=e=>{gy.setStyle(e.id,"display",e.orgDisplay)},py=e=>W.from(e).each(n=>n.destroy()),Nz=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},Pz=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),gy.unbind(n,"submit reset",e.formEventDelegate))},Iz=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Fe(i==null?void 0:i.nextSibling)&&gy.remove(i.nextSibling),k2(e),e.editorManager.remove(e),!e.inline&&r&&VI(e),A2(e),gy.remove(e.getContainer()),py(n),py(o),e.destroy()}},Hu=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),py(o),py(r)),Pz(e),Nz(e),e.destroyed=!0}},R_=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>En(e,i)}})(),by=Qi.ModelManager,UI=(e,n)=>n.dom[e],WI=(e,n)=>parseInt(vr(n,e),10),ZI=Ae(UI,"clientWidth"),Bz=Ae(UI,"clientHeight"),Lz=Ae(WI,"margin-top"),Fz=Ae(WI,"margin-left"),M_=e=>e.dom.getBoundingClientRect(),$z=(e,n,o)=>{const r=ZI(e),i=Bz(e);return n>=0&&o>=0&&n<=r&&o<=i},Hz=(e,n,o,r)=>{const i=M_(n),u=e?i.left+n.dom.clientLeft+Fz(n):0,m=e?i.top+n.dom.clientTop+Lz(n):0,y=o-u,x=r-m;return{x:y,y:x}},jI=(e,n,o)=>{const r=be.fromDom(e.getBody()),i=e.inline?r:Mh(r),u=Hz(e.inline,i,n,o);return $z(i,u.x,u.y)},DO=e=>W.from(e).map(be.fromDom),zz=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return DO(n).map(vl).getOr(!1)};var Vz=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const Uz=e=>{const n=[],o=()=>{const z=e.theme;return z&&z.getNotificationManagerImpl?z.getNotificationManagerImpl():Vz()},r=()=>W.from(n[0]),i=(z,X)=>z.type===X.type&&z.text===X.text&&!z.progressBar&&!z.timeout&&!X.progressBar&&!X.timeout,u=()=>{r().each(z=>{z.reposition()})},m=z=>{n.push(z)},y=z=>{zs(n,X=>X===z).each(X=>{n.splice(X,1)})},x=(z,X=!0)=>e.removed||!zz(e)?{}:(X&&e.dispatch("BeforeOpenNotification",{notification:z}),Vo(n,oe=>i(o().getArgs(oe),z)).getOrThunk(()=>{e.editorManager.setActive(e);const oe=o().open(z,()=>{y(oe)},()=>Nu(e));return m(oe),u(),e.dispatch("OpenNotification",{notification:{...oe}}),oe})),A=()=>{r().each(z=>{o().close(z),y(z),u()})},L=wt(n);return(z=>{z.on("SkinLoaded",()=>{const X=dv(z);X&&x({text:X,type:"warning",timeout:0},!1),u()}),z.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),z.on("remove",()=>{xe(n.slice(),X=>{o().close(X)})}),z.on("keydown",X=>{var oe;const te=((oe=X.key)===null||oe===void 0?void 0:oe.toLowerCase())==="f12"||X.keyCode===123;X.altKey&&te&&(X.preventDefault(),r().map(ie=>be.fromDom(ie.getEl())).each(ie=>Tw(ie)))})})(e),{open:x,close:A,getNotifications:L}},vy=Qi.PluginManager,Sm=Qi.ThemeManager;var qI=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const RO=e=>{let n=[];const o=()=>{const te=e.theme;return te&&te.getWindowManagerImpl?te.getWindowManagerImpl():qI()},r=(te,ie)=>(..._e)=>ie?ie.apply(te,_e):void 0,i=te=>{e.dispatch("OpenWindow",{dialog:te})},u=te=>{e.dispatch("CloseWindow",{dialog:te})},m=te=>{n.push(te),i(te)},y=te=>{u(te),n=Kt(n,ie=>ie!==te),n.length===0&&e.focus()},x=()=>W.from(n[n.length-1]),A=te=>{e.editorManager.setActive(e),Ab(e),e.ui.show();const ie=te();return m(ie),ie},L=(te,ie)=>A(()=>o().open(te,ie,y)),$=te=>A(()=>o().openUrl(te,y)),z=(te,ie,_e)=>{const Re=o();Re.alert(te,r(_e||Re,ie))},X=(te,ie,_e)=>{const Re=o();Re.confirm(te,r(_e||Re,ie))},oe=()=>{x().each(te=>{o().close(te),y(te)})};return e.on("remove",()=>{xe(n,te=>{o().close(te)})}),{open:L,openUrl:$,alert:z,confirm:X,close:oe}},GI=(e,n)=>{e.notificationManager.open({type:"error",text:n})},hC=(e,n)=>{e._skinLoaded?GI(e,n):e.on("SkinLoaded",()=>{GI(e,n)})},Wz=(e,n)=>{hC(e,wd.translate(["Failed to upload image: {0}",n]))},gC=(e,n,o)=>{mx(e,n,{message:o}),console.error(o)},pC=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,Zz=(e,n,o)=>{gC(e,"PluginLoadError",pC("plugin",n,o))},KI=(e,n,o)=>{gC(e,"IconsLoadError",pC("icons",n,o))},jz=(e,n,o)=>{gC(e,"LanguageLoadError",pC("language",n,o))},qz=(e,n,o)=>{gC(e,"ThemeLoadError",pC("theme",n,o))},bC=(e,n,o)=>{gC(e,"ModelLoadError",pC("model",n,o))},YI=(e,n,o)=>{const r=wd.translate(["Failed to initialize plugin: {0}",n]);mx(e,"PluginLoadError",{message:r}),vC(r,o),hC(e,r)},vC=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},Gz=e=>{W.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},MO=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Kz=(e,n)=>{MO(e,"StyleWithCSS",n),MO(e,"enableInlineTableEditing",n),MO(e,"enableObjectResizing",n)},XI=e=>{e.selection.setRng(e.selection.getRng())},JI=(e,n,o)=>{Bm(e,n)&&!o?Zd(e,n):o&&pl(e,n)},QI=e=>{const n=be.fromDom(e.getBody());JI(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Gz(e)},e6=e=>{const n=be.fromDom(e.getBody());JI(n,"mce-content-readonly",!1),e.hasEditableRoot()&&Xo(n,!0),Kz(e,!1),Nu(e)&&e.focus(),XI(e),e.nodeChanged()},kg=e=>rb(e),yy="data-mce-contenteditable",xm=e=>{xe(ii(e,'*[contenteditable="true"]'),n=>{sa(n,yy,"true"),Xo(n,!1)})},NO=e=>{xe(ii(e,`*[${yy}="true"]`),n=>{Is(n,yy),Xo(n,!0)})},t6=(e,n)=>{const o=be.fromDom(e.getBody());n?(QI(e),Xo(o,!1),xm(o)):(NO(o),e6(e))},Yz=e=>{e.serializer?n6(e):e.on("PreInit",()=>{n6(e)})},n6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{kg(e)&&xe(n,o=>{o.attr(yy,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(yy,n=>{kg(e)&&xe(n,o=>{o.attr("contenteditable",o.attr(yy))})}),e.serializer.addTempAttr(yy)},Xz=e=>e.type==="click",Ho=["copy"],Jz=e=>et(Ho,e.type),yC=(e,n)=>mn(n,"a",r=>No(r,be.fromDom(e.getBody()))).bind(r=>Er(r,"href")),Qz=(e,n)=>{if(Xz(n)&&!Ht.metaKeyPressed(n)){const o=be.fromDom(n.target);yC(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Ms(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Jz(n)&&e.dispatch(n.type,n)},eV=e=>{e.on("ShowCaret ObjectSelected",n=>{kg(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||t6(e,n.state)})},tV=e=>{Yz(e),eV(e)},o6=e=>/^[a-z0-9\-]+$/i.test(e),mh=e=>"content/"+e+"/content.css",Rl=e=>tinymce.Resource.has(mh(e)),s6=e=>Ag(e,A4(e)),wC=e=>Ag(e,V2(e)),Ag=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return dt(n,u=>Rl(u)?u:o6(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},hh=e=>{e.contentCSS=e.contentCSS.concat(s6(e),wC(e))},CC=e=>e?Dr(e.getElementsByTagName("img")):[],PO=(e,n)=>{const o={};return{findAll:(i,u=gt)=>{const m=Kt(CC(i),x=>{const A=x.src;return x.hasAttribute("data-mce-bogus")||x.hasAttribute("data-mce-placeholder")||!A||A===Nn.transparentSrc?!1:us(A,"blob:")?!e.isUploaded(A)&&u(x):us(A,"data:")?u(x):!1}),y=dt(m,x=>{const A=x.src;if(En(o,A))return o[A].then(L=>de(L)?L:{image:x,blobInfo:L.blobInfo});{const L=zA(n,A).then($=>(delete o[A],{image:x,blobInfo:$})).catch($=>(delete o[A],$));return o[A]=L,L}});return Promise.all(y)}}},N_=()=>{let o={};const r=(z,X)=>({status:z,resultUri:X}),i=z=>z in o;return{hasBlobUri:i,getResultUri:z=>{const X=o[z];return X?X.resultUri:null},isPending:z=>i(z)?o[z].status===1:!1,isUploaded:z=>i(z)?o[z].status===2:!1,markPending:z=>{o[z]=r(1,null)},markUploaded:(z,X)=>{o[z]=r(2,X)},removeFailed:z=>{delete o[z]},destroy:()=>{o={}}}};let r6=0;const a6=()=>{const e=()=>Math.round(W1()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},nV=e=>e+r6+++a6(),oV=()=>{let e=[];const n=$=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[$.toLowerCase()]||"dat",o=($,z,X,oe,te)=>{if(de($))return r({id:$,name:oe,filename:te,blob:z,base64:X});if(Je($))return r($);throw new Error("Unknown input type")},r=$=>{if(!$.blob||!$.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const z=$.id||nV("blobid"),X=$.name||z,oe=$.blob;return{id:wt(z),name:wt(X),filename:wt($.filename||X+"."+n(oe.type)),blob:wt(oe),base64:wt($.base64),blobUri:wt($.blobUri||URL.createObjectURL(oe)),uri:wt($.uri)}},i=$=>{m($.id())||e.push($)},u=$=>Vo(e,$).getOrUndefined(),m=$=>u(z=>z.id()===$);return{create:o,add:i,get:m,getByUri:$=>u(z=>z.blobUri()===$),getByData:($,z)=>u(X=>X.base64()===$&&X.blob().type===z),findFirst:u,removeByUri:$=>{e=Kt(e,z=>z.blobUri()===$?(URL.revokeObjectURL(z.blobUri()),!1):!0)},destroy:()=>{xe(e,$=>{URL.revokeObjectURL($.blobUri())}),e=[]}}},i6=(e,n)=>{const o={},r=(te,ie)=>te?te.replace(/\/$/,"")+"/"+ie.replace(/^\//,""):ie,i=(te,ie)=>new Promise((_e,Re)=>{const Me=new XMLHttpRequest;Me.open("POST",n.url),Me.withCredentials=n.credentials,Me.upload.onprogress=ct=>{ie(ct.loaded/ct.total*100)},Me.onerror=()=>{Re("Image upload failed due to a XHR Transport error. Code: "+Me.status)},Me.onload=()=>{if(Me.status<200||Me.status>=300){Re("HTTP Error: "+Me.status);return}const ct=JSON.parse(Me.responseText);if(!ct||!de(ct.location)){Re("Invalid JSON: "+Me.responseText);return}_e(r(n.basePath,ct.location))};const Ie=new FormData;Ie.append("file",te.blob(),te.filename()),Me.send(Ie)}),u=ve(n.handler)?n.handler:i,m=()=>new Promise(te=>{te([])}),y=(te,ie)=>({url:ie,blobInfo:te,status:!0}),x=(te,ie)=>({url:"",blobInfo:te,status:!1,error:ie}),A=(te,ie)=>{ut.each(o[te],_e=>{_e(ie)}),delete o[te]},L=(te,ie,_e)=>(e.markPending(te.blobUri()),new Promise(Re=>{let Me,Ie;try{const ct=()=>{Me&&(Me.close(),Ie=it)},Ot=tt=>{ct(),e.markUploaded(te.blobUri(),tt),A(te.blobUri(),y(te,tt)),Re(y(te,tt))},Qt=tt=>{ct(),e.removeFailed(te.blobUri()),A(te.blobUri(),x(te,tt)),Re(x(te,tt))};Ie=tt=>{tt<0||tt>100||W.from(Me).orThunk(()=>W.from(_e).map(fn)).each(Ze=>{Me=Ze,Ze.progressBar.value(tt)})},ie(te,Ie).then(Ot,tt=>{Qt(de(tt)?{message:tt}:tt)})}catch(ct){Re(x(te,ct))}})),$=te=>te===i,z=te=>{const ie=te.blobUri();return new Promise(_e=>{o[ie]=o[ie]||[],o[ie].push(_e)})},X=(te,ie)=>(te=ut.grep(te,_e=>!e.isUploaded(_e.blobUri())),Promise.all(ut.map(te,_e=>e.isPending(_e.blobUri())?z(_e):L(_e,u,ie))));return{upload:(te,ie)=>!n.url&&$(u)?m():X(te,ie)}},IO=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),BO=(e,n)=>i6(n,{url:Cx(e),basePath:Q1(e),credentials:eb(e),handler:$2(e)}),c6=e=>{const n=N_(),o=BO(e,n);return{upload:(r,i=!0)=>o.upload(r,i?IO(e):void 0)}},LO=(e,n)=>e.dom.isEmpty(n.dom)&&Fe(e.schema.getTextBlockElements()[no(n)]),BY=e=>n=>{LO(e,n)&&Js(n,be.fromHtml('<br data-mce-bogus="1" />'))},sV=e=>{const n=oV();let o,r;const i=N_(),u=[],m=Me=>Ie=>e.selection?Me(Ie):[],y=Me=>Me+(Me.indexOf("?")===-1?"?":"&")+new Date().getTime(),x=(Me,Ie,ct)=>{let Ot=0;do Ot=Me.indexOf(Ie,Ot),Ot!==-1&&(Me=Me.substring(0,Ot)+ct+Me.substr(Ot+Ie.length),Ot+=ct.length-Ie.length+1);while(Ot!==-1);return Me},A=(Me,Ie,ct)=>{const Ot=`src="${ct}"${ct===Nn.transparentSrc?' data-mce-placeholder="1"':""}`;return Me=x(Me,`src="${Ie}"`,Ot),Me=x(Me,'data-mce-src="'+Ie+'"','data-mce-src="'+ct+'"'),Me},L=(Me,Ie)=>{xe(e.undoManager.data,ct=>{ct.type==="fragmented"?ct.fragments=dt(ct.fragments,Ot=>A(Ot,Me,Ie)):ct.content=A(ct.content,Me,Ie)})},$=(Me,Ie)=>{const ct=e.convertURL(Ie,"src");L(Me.src,Ie),Fa(be.fromDom(Me),{src:cv(e)?y(Ie):Ie,"data-mce-src":ct})},z=()=>(o||(o=BO(e,i)),ie().then(m(Me=>{const Ie=dt(Me,ct=>ct.blobInfo);return o.upload(Ie,IO(e)).then(m(ct=>{const Ot=[];let Qt=!1;const tt=dt(ct,(Ze,mt)=>{const{blobInfo:sn,image:_n}=Me[mt];let Zn=!1;return Ze.status&&F2(e)?(Ze.url&&!ns(_n.src,Ze.url)&&(Qt=!0),n.removeByUri(_n.src),Rd(e)||$(_n,Ze.url)):Ze.error&&(Ze.error.remove&&(L(_n.src,Nn.transparentSrc),Ot.push(_n),Zn=!0),Wz(e,Ze.error.message)),{element:_n,status:Ze.status,uploadUri:Ze.url,blobInfo:sn,removed:Zn}});return Ot.length>0&&!Rd(e)?e.undoManager.transact(()=>{xe(id(Ot),Ze=>{const mt=si(Ze);ws(Ze),mt.each(BY(e)),n.removeByUri(Ze.dom.src)})}):Qt&&e.undoManager.dispatchChange(),tt}))}))),X=()=>L2(e)?z():Promise.resolve([]),oe=Me=>Ss(u,Ie=>Ie(Me)),te=Me=>{u.push(Me)},ie=()=>(r||(r=PO(i,n)),r.findAll(e.getBody(),oe).then(m(Me=>{const Ie=Kt(Me,ct=>de(ct)?(hC(e,ct),!1):ct.uriType!=="blob");return Rd(e)||xe(Ie,ct=>{L(ct.image.src,ct.blobInfo.blobUri()),ct.image.src=ct.blobInfo.blobUri(),ct.image.removeAttribute("data-mce-src")}),Ie}))),_e=()=>{n.destroy(),i.destroy(),r=o=null},Re=Me=>Me.replace(/src="(blob:[^"]+)"/g,(Ie,ct)=>{const Ot=i.getResultUri(ct);if(Ot)return'src="'+Ot+'"';let Qt=n.getByUri(ct);return Qt||(Qt=Fo(e.editorManager.get(),(tt,Ze)=>tt||Ze.editorUpload&&Ze.editorUpload.blobCache.getByUri(ct),void 0)),Qt?'src="data:'+Qt.blob().type+";base64,"+Qt.base64()+'"':Ie});return e.on("SetContent",()=>{L2(e)?X():ie()}),e.on("RawSaveContent",Me=>{Me.content=Re(Me.content)}),e.on("GetContent",Me=>{Me.source_view||Me.format==="raw"||Me.format==="tree"||(Me.content=Re(Me.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Me=>{xe(Me,Ie=>{const ct=Ie.attr("src");if(!ct||n.getByUri(ct))return;const Ot=i.getResultUri(ct);Ot&&Ie.attr("src",Ot)})})}),{blobCache:n,addFilter:te,uploadImages:z,uploadImagesAuto:X,scanForImages:ie,destroy:_e}},LY=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,i,u]:[i,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,m)=>Ut(i)&&i.hasAttribute("href"),onformat:(i,u,m)=>{ut.each(m,(y,x)=>{n.setAttrib(i,x,y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ut.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},l6={remove_similar:!0,inherit:!1},wy={selector:"td,th",...l6},gh={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...wy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...wy},tablecellbordercolor:{styles:{borderColor:"%value"},...wy},tablecellclass:{classes:["%value"],...wy},tableclass:{selector:"table",classes:["%value"],...l6},tablecellborderstyle:{styles:{borderStyle:"%value"},...wy},tablecellborderwidth:{styles:{borderWidth:"%value"},...wy}},FY=wt(gh),$Y=e=>{const n={},o=m=>Fe(m)?n[m]:n,r=m=>En(n,m),i=(m,y)=>{m&&(de(m)?(Gt(y)||(y=[y]),xe(y,x=>{In(x.deep)&&(x.deep=!kc(x)),In(x.split)&&(x.split=!kc(x)||fa(x)),In(x.remove)&&kc(x)&&!fa(x)&&(x.remove="none"),kc(x)&&fa(x)&&(x.mixed=!0,x.block_expand=!0),de(x.classes)&&(x.classes=x.classes.split(/\s+/))}),n[m]=y):Tt(m,(x,A)=>{i(A,x)}))},u=m=>(m&&n[m]&&delete n[m],n);return i(LY(e)),i(FY()),i(Z2(e)),{get:o,has:r,register:i,unregister:u}},P_=ut.each,al=$s.DOM,FO=e=>Fe(e)&&Je(e),$O=(e,n)=>{const o=n&&n.schema||ms({}),r=(x,A)=>{A.classes.length>0&&al.addClass(x,A.classes.join(" ")),al.setAttribs(x,A.attrs)},i=x=>{const A=de(x)?{name:x,classes:[],attrs:{}}:x,L=al.create(A.name);return r(L,A),L},u=(x,A)=>{const L=o.getElementRule(x.nodeName.toLowerCase()),$=L==null?void 0:L.parentsRequired;return $&&$.length?A&&et($,A)?A:$[0]:!1},m=(x,A,L)=>{let $;const z=A[0],X=FO(z)?z.name:void 0,oe=u(x,X);if(oe)X===oe?($=z,A=A.slice(1)):$=oe;else if(z)$=z,A=A.slice(1);else if(!L)return x;const te=$?i($):al.create("div");te.appendChild(x),L&&ut.each(L,_e=>{const Re=i(_e);te.insertBefore(Re,x)});const ie=FO($)?$.siblings:void 0;return m(te,A,ie)},y=al.create("div");if(e.length>0){const x=e[0],A=i(x),L=FO(x)?x.siblings:void 0;y.appendChild(m(A,e.slice(1),L))}return y},u6=e=>{e=ut.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,m,y)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":ut.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const x=y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);x&&(o.attrs[x[1]]=x[2])}return""})),o.name=n||"div",o},d6=e=>de(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ut.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=ut.map(n.split(/(?:~\+|~|\+)/),u6),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],rV=(e,n)=>{let o="",r=_x(e);if(r==="")return"";const i=z=>de(z)?z.replace(/%(\w+)/g,""):"",u=(z,X)=>al.getStyle(X??e.getBody(),z,!0);if(de(n)){const z=e.formatter.get(n);if(!z)return"";n=z[0]}if("preview"in n){const z=n.preview;if(z===!1)return"";r=z||r}let m=n.block||n.inline||"span",y;const x=d6(n.selector);x.length>0?(x[0].name||(x[0].name=m),m=n.selector,y=$O(x,e)):y=$O([m],e);const A=al.select(m,y)[0]||y.firstChild;P_(n.styles,(z,X)=>{const oe=i(z);oe&&al.setStyle(A,X,oe)}),P_(n.attributes,(z,X)=>{const oe=i(z);oe&&al.setAttrib(A,X,oe)}),P_(n.classes,z=>{const X=i(z);al.hasClass(A,X)||al.addClass(A,X)}),e.dispatch("PreviewFormats"),al.setStyles(y,{position:"absolute",left:-65535}),e.getBody().appendChild(y);const L=u("fontSize"),$=/px$/.test(L)?parseInt(L,10):0;return P_(r.split(" "),z=>{let X=u(z,A);if(!(z==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(X)&&(X=u(z),$1(X).toLowerCase()==="#ffffff"))&&!(z==="color"&&$1(X).toLowerCase()==="#000000")){if(z==="font-size"&&/em|%$/.test(X)){if($===0)return;X=parseFloat(X)/(/%$/.test(X)?100:1)*$+"px"}z==="border"&&X&&(o+="padding:0 2px;"),o+=z+":"+X+";"}}),e.dispatch("AfterPreviewFormats"),al.remove(y),o},aV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Og=e=>{const n=$Y(e),o=Zs({});return aV(e),eP(e),Rd(e)||o9(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{xO(e,r,i,u)},remove:(r,i,u,m)=>{TI(e,r,i,u,m)},toggle:(r,i,u)=>{kI(e,r,i,u)},match:(r,i,u,m)=>CO(e,r,i,u,m),closest:r=>_I(e,r),matchAll:(r,i)=>xI(e,r,i),matchNode:(r,i,u,m)=>SO(e,r,i,u,m),canApply:r=>EI(e,r),formatChanged:(r,i,u,m)=>AI(e,o,r,i,u,m),getCssText:Ae(rV,e)}},f6=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},iV=(e,n,o)=>{const r=Zs(!1),i=x=>{fC(n,!1,o),n.add({},x)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",x=>{const A=x.command;f6(A)||(gI(n,o),n.beforeChange())}),e.on("ExecCommand",x=>{const A=x.command;f6(A)||i(x)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;const L=Nn.os.isMacOS()&&x.key==="Meta";(A>=33&&A<=36||A>=37&&A<=40||A===45||x.ctrlKey||L)&&(i(),e.nodeChanged()),(A===46||A===8)&&e.nodeChanged(),r.get()&&n.typing&&!rl(Ub(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;if(A>=33&&A<=36||A>=37&&A<=40||A===45){n.typing&&i(x);return}const L=x.ctrlKey&&!x.altKey||x.metaKey;if((A<16||A>20)&&A!==224&&A!==91&&!n.typing&&!L){n.beforeChange(),fC(n,!0,o),n.add({},x),r.set(!0);return}(Nn.os.isMacOS()?x.metaKey:x.ctrlKey&&!x.altKey)&&n.beforeChange()}),e.on("mousedown",x=>{n.typing&&i(x)});const u=x=>x.inputType==="insertReplacementText",m=x=>x.inputType==="insertText"&&x.data===null,y=x=>x.inputType==="insertFromPaste"||x.inputType==="insertFromDrop";e.on("input",x=>{x.inputType&&(u(x)||m(x)||y(x))&&i(x)}),e.on("AddUndo Undo Redo ClearUndos",x=>{x.isDefaultPrevented()||e.nodeChanged()})},cV=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},m6=e=>{const n=li(),o=Zs(0),r=Zs(0),i={data:[],typing:!1,beforeChange:()=>{tz(e,o,n)},add:(u,m)=>nz(e,i,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=Ub(e);u.bookmark=nv(e.selection),e.dispatch("change",{level:u,lastLevel:Mc(i.data,r.get()).getOrUndefined()})},undo:()=>oz(e,i,o,r),redo:()=>sz(e,r,i.data),clear:()=>{rz(e,i,r)},reset:()=>{CI(e,i)},hasUndo:()=>az(e,i,r),hasRedo:()=>iz(e,i,r),transact:u=>cz(e,i,o,u),ignore:u=>{SI(e,o,u)},extra:(u,m)=>{wO(e,i,r,u,m)}};return Rd(e)||iV(e,i,o),cV(e),i},lV=[9,27,Ht.HOME,Ht.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ht.DOWN,Ht.UP,Ht.LEFT,Ht.RIGHT].concat(Nn.browser.isFirefox()?[224]:[]),h6="data-mce-placeholder",g6=e=>e.type==="keydown"||e.type==="keyup",p6=e=>{const n=e.keyCode;return n===Ht.BACKSPACE||n===Ht.DELETE},uV=e=>{if(g6(e)){const n=e.keyCode;return!p6(e)&&(Ht.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||et(lV,n))}else return!1},I_=e=>g6(e)&&!(p6(e)||e.type==="keyup"&&e.keyCode===229),dV=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},fV=e=>{var n;const o=e.dom,r=Va(e),i=(n=xx(e))!==null&&n!==void 0?n:"",u=(m,y)=>{if(uV(m))return;const x=e.getBody(),A=I_(m)?!1:dV(o,x,r);(o.getAttrib(x,h6)!==""!==A||y)&&(o.setAttrib(x,h6,A?i:null),Ri(e,A),e.on(A?"keydown":"keyup",u),e.off(A?"keyup":"keydown",u))};ds(i)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",y=>vn.setEditorTimeout(e,()=>u(y)))})},HY=(e,n)=>({block:e,position:n}),SC=(e,n)=>({from:e,to:n}),HO=(e,n)=>{const o=be.fromDom(e),r=be.fromDom(n.container());return $E(o,r).map(i=>HY(i,n))},zO=e=>!(dr(e.to.block,e.from.block)||dr(e.from.block,e.to.block)),mV=e=>!No(e.from.block,e.to.block),b6=(e,n)=>fr(n,i=>j1(i)||st(i.dom),i=>No(i,e)).filter(Ps).getOr(e),hV=(e,n)=>{const o=be.fromDom(e);return No(b6(o,n.from.block),b6(o,n.to.block))},gV=e=>qo(e.from.block.dom)===!1&&qo(e.to.block.dom)===!1,Zb=e=>{const n=o=>Tu(o)||$i(o.dom)||Jm(o);return n(e.from.block)&&n(e.to.block)},jb=(e,n,o,r)=>jo(r.position.getNode())&&!ca(e,r.block)?dg(!1,r.block.dom).bind(i=>i.isEqual(r.position)?Vi(o,n,i).bind(u=>HO(n,u)):W.some(r)).getOr(r):r,B_=(e,n,o,r)=>{const i=HO(n,Qe.fromRangeStart(r)),u=i.bind(m=>Vi(o,n,m.position).bind(y=>HO(n,y).map(x=>jb(e,n,o,x))));return ur(i,u,SC).filter(m=>mV(m)&&hV(n,m)&&gV(m)&&Zb(m)&&zO(m))},L_=(e,n,o,r)=>r.collapsed?B_(e,n,o,r):W.none(),qb=(e,n)=>{const o=ba(e);return zs(o,r=>n.isBlock(no(r))).fold(wt(o),r=>o.slice(0,r))},i1=(e,n)=>{const o=qb(e,n);return xe(o,ws),o},xC=(e,n,o)=>{const r=xg(o,n);return Vo(r.reverse(),i=>ca(e,i)).each(ws)},F_=(e,n)=>Kt(vc(n),o=>!ca(e,o)).length===0,v6=(e,n,o,r,i)=>{if(ca(r,o))return lf(o),Ui(o.dom);F_(r,i)&&ca(r,n)&&Ei(i,be.fromTag("br"));const u=di(o.dom,Qe.before(i.dom));return xe(i1(n,r),m=>{Ei(i,m)}),xC(r,e,n),u},VO=(e,n)=>e.isInline(no(n)),UO=(e,n,o,r)=>{if(ca(r,o)){if(ca(r,n)){const m=ls((y=>{const x=(A,L)=>Kc(A).fold(()=>L,$=>VO(r,$)?x($,L.concat(tm($))):L);return x(y,[])})(o),(y,x)=>(Vm(y,x),x),Cd());Cl(n),Js(n,m)}return ws(o),Ui(n.dom)}const i=Mu(o.dom);return xe(i1(n,r),u=>{Js(o,u)}),xC(r,e,n),i},y6=(e,n)=>{const o=xg(n,e);return W.from(o[o.length-1])},w6=(e,n)=>dr(n,e)?y6(n,e):W.none(),Gb=(e,n)=>{dg(e,n.dom).bind(o=>W.from(o.getNode())).map(be.fromDom).filter(Ai).each(ws)},WO=(e,n,o,r)=>(Gb(!0,n),Gb(!1,o),w6(n,o).fold(Ae(UO,e,n,o,r),Ae(v6,e,n,o,r))),ZO=(e,n,o,r,i)=>n?WO(e,r,o,i):WO(e,o,r,i),$_=(e,n)=>{const o=be.fromDom(e.getBody());return L_(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{ZO(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},H_=(e,n,o)=>{const r=n.getRng();return ur($E(e,be.fromDom(r.startContainer)),$E(e,be.fromDom(r.endContainer)),(i,u)=>No(i,u)?W.none():W.some(()=>{r.deleteContents(),ZO(e,!0,i,u,o).each(m=>{n.setRng(m.toRange())})})).getOr(W.none())},jO=(e,n)=>{const o=be.fromDom(n),r=Ae(No,e);return Yc(o,j1,r).isSome()},C6=(e,n)=>jO(e,n.startContainer)||jO(e,n.endContainer),S6=(e,n)=>{const o=di(e.dom,Qe.fromRangeStart(n)).isNone(),r=sc(e.dom,Qe.fromRangeEnd(n)).isNone();return!C6(e,n)&&o&&r},x6=e=>W.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),Dg=e=>{const n=be.fromDom(e.getBody()),o=e.selection.getRng();return S6(n,o)?x6(e):H_(n,e.selection,e.schema)},ph=(e,n)=>e.selection.isCollapsed()?W.none():Dg(e),cc=(e,n,o,r,i)=>W.from(n._selectionOverrides.showCaret(e,o,r,i)),pV=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},EC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?W.none():W.some(pV(n)),bV=(e,n,o)=>{const r=Mp(1,e.getBody(),n),i=Qe.fromRangeStart(r),u=i.getNode();if(cb(u))return cc(1,e,u,!i.isAtEnd(),!1);const m=i.getNode(!0);if(cb(m))return cc(1,e,m,!1,!1);const y=Cf(e.dom.getRoot(),i.getNode());return cb(y)?cc(1,e,y,!1,o):W.none()},qO=(e,n,o)=>n.collapsed?bV(e,n,o).getOr(n):n,vV=e=>qp(e)||Db(e),yV=e=>Gp(e)||Pw(e),wV=(e,n)=>{bt(n)&&n.data.length===0&&e.remove(n)},E6=(e,n,o,r,i,u)=>{cc(r,e,u.getNode(!i),i,!0).each(m=>{if(n.collapsed){const y=n.cloneRange();i?y.setEnd(m.startContainer,m.startOffset):y.setStart(m.endContainer,m.endOffset),y.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),wV(e.dom,o)},CV=(e,n)=>{const o=e.selection.getRng();if(!bt(o.commonAncestorContainer))return W.none();const r=n?Ua.Forwards:Ua.Backwards,i=tl(e.getBody()),u=Ae(lw,n?i.next:i.prev),m=n?vV:yV,y=Np(r,e.getBody(),o),x=u(y),A=x&&_d(n,x);if(!A||!Ip(y,A))return W.none();if(m(A))return W.some(()=>E6(e,o,y.getNode(),r,n,A));const L=u(A);return L&&m(L)&&Ip(A,L)?W.some(()=>E6(e,o,y.getNode(),r,n,L)):W.none()},GO=(e,n)=>CV(e,n),KO=(e,n)=>{const o=e.getBody();return n?Ui(o).filter(qp):Mu(o).filter(Gp)},YO=e=>{const n=e.selection.getRng();return!n.collapsed&&(KO(e,!0).exists(o=>o.isEqual(Qe.fromRangeStart(n)))||KO(e,!1).exists(o=>o.isEqual(Qe.fromRangeEnd(n))))},XO=e=>Fe(e)&&(j1(be.fromDom(e))||Jm(be.fromDom(e))),Ml=nu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),_6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ut(o)&&o.getAttribute("data-mce-caret")===r},SV=(e,n,o,r,i)=>{const u=m=>i.isInline(m.nodeName.toLowerCase())&&!Ru(o,r,e);return qx(!n,o).fold(()=>qx(n,r).fold($e,u),u)},T6=(e,n,o,r,i)=>{const u=i.getNode(!o);return $E(be.fromDom(n),be.fromDom(r.getNode())).map(m=>ca(e,m)?Ml.remove(m.dom):Ml.moveToElement(u)).orThunk(()=>W.some(Ml.moveToElement(u)))},JO=(e,n,o,r)=>Vi(n,e,o).bind(i=>XO(i.getNode())||SV(e,n,o,i,r)?W.none():n&&qo(i.getNode())||!n&&qo(i.getNode(!0))?T6(r,e,n,o,i):n&&Gp(o)||!n&&qp(o)?W.some(Ml.moveToPosition(i)):W.none()),k6=(e,n)=>en(n)?W.none():e&&qo(n.nextSibling)?W.some(Ml.moveToElement(n.nextSibling)):!e&&qo(n.previousSibling)?W.some(Ml.moveToElement(n.previousSibling)):W.none(),QO=(e,n,o)=>o.fold(r=>W.some(Ml.remove(r)),r=>W.some(Ml.moveToElement(r)),r=>Ru(n,r,e)?W.none():W.some(Ml.moveToPosition(r))),A6=(e,n,o,r)=>_6(n,o)?k6(n,o.getNode(!n)).orThunk(()=>JO(e,n,o,r)):JO(e,n,o,r).bind(i=>QO(e,o,i)),O6=(e,n,o,r)=>{const i=Mp(n?1:-1,e,o),u=Qe.fromRangeStart(i),m=be.fromDom(e);return!n&&Gp(u)?W.some(Ml.remove(u.getNode(!0))):n&&qp(u)?W.some(Ml.remove(u.getNode())):!n&&qp(u)&&PE(m,u,r)?uN(m,u,r).map(y=>Ml.remove(y.getNode())):n&&Gp(u)&&$n(m,u,r)?tH(m,u,r).map(y=>Ml.remove(y.getNode())):A6(e,n,u,r)},eD=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Mb(e,n,be.fromDom(o)),!0),xV=(e,n)=>o=>{const r=n?Qe.before(o):Qe.after(o);return e.selection.setRng(r.toRange()),!0},EV=e=>n=>(e.selection.setRng(n.toRange()),!0),Em=(e,n)=>W.from(Cf(e.getBody(),n)),Of=(e,n)=>{const o=e.selection.getNode();return Em(e,o).filter(qo).fold(()=>O6(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(eD(e,n),xV(e,n),EV(e))),()=>W.some(it))},z_=e=>{xe(ii(e,".mce-offscreen-selection"),ws)},D6=(e,n)=>{const o=e.selection.getNode();return qo(o)&&!Qg(o)?Em(e,o.parentNode).filter(qo).fold(()=>W.some(()=>{z_(be.fromDom(e.getBody())),Mb(e,n,be.fromDom(e.selection.getNode())),Xp(e)}),()=>W.some(it)):YO(e)?W.some(()=>{Es(e,e.selection.getRng(),be.fromDom(e.getBody()))}):W.none()},_C=e=>{const n=e.dom,o=e.selection,r=Cf(e.getBody(),o.getNode());if(st(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Qe.before(i).toRange())}return!0},V_=(e,n)=>e.selection.isCollapsed()?Of(e,n):D6(e,n),tD=e=>e.hasOwnProperty("text"),nD=e=>e.hasOwnProperty("marker"),oD=(e,n)=>{const o=(u,m)=>{if(bt(u))return{text:u,offset:m};{const y=n(),x=u.childNodes;return m<x.length?(u.insertBefore(y,x[m]),{marker:y,before:!0}):(u.appendChild(y),{marker:y,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},sD=e=>{var n,o;const{start:r,end:i}=e,u=new window.Range;return tD(r)?u.setStart(r.text,r.offset):nD(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),tD(i)?u.setEnd(i.text,i.offset):nD(i)&&(i.before?u.setEndBefore(i.marker):u.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),u},U_=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),m=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&u&&i===m.firstChild&&u===m.lastChild&&!r.isEmpty(m)){const x=i.cloneNode(!1),A=()=>{if(n?pr(e):LE(e),m.firstChild!==i){const L=oD(e.selection.getRng(),()=>document.createElement("span"));Array.from(m.childNodes).forEach($=>x.appendChild($)),m.appendChild(x),e.selection.setRng(sD(L))}};return W.some(A)}return W.none()},W_=(e,n)=>{const o=Qe.fromRangeStart(e.selection.getRng());return Vi(n,e.getBody(),o).filter(r=>n?rN(r):Y7(r)).bind(r=>_v(n?0:-1,r)).map(r=>()=>e.selection.select(r))},TC=(e,n)=>e.selection.isCollapsed()?W_(e,n):W.none(),Cy=bt,R6=e=>Cy(e)&&e.data[0]===Oa,M6=e=>Cy(e)&&e.data[e.data.length-1]===Oa,N6=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Oa)},P6=e=>{var n;if(Cy(e.previousSibling))return M6(e.previousSibling)||e.previousSibling.appendData(Oa),e.previousSibling;if(Cy(e))return R6(e)||e.insertData(0,Oa),e;{const o=N6(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},_V=e=>{var n,o;if(Cy(e.nextSibling))return R6(e.nextSibling)||e.nextSibling.insertData(0,Oa),e.nextSibling;if(Cy(e))return M6(e)||e.appendData(Oa),e;{const r=N6(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Z_=(e,n)=>e?P6(n):_V(n),rD=Ae(Z_,!0),TV=Ae(Z_,!1),I6=(e,n)=>bt(e.container())?Z_(n,e.container()):Z_(n,e.getNode()),B6=(e,n)=>{const o=n.get();return o&&e.container()===o&&uf(o)},aD=(e,n)=>n.fold(o=>{kp(e.get());const r=rD(o);return e.set(r),W.some(Qe(r,r.length-1))},o=>Ui(o).map(r=>{if(B6(r,e)){const i=e.get();return Qe(i,1)}else{kp(e.get());const i=I6(r,!0);return e.set(i),Qe(i,1)}}),o=>Mu(o).map(r=>{if(B6(r,e)){const i=e.get();return Qe(i,i.length-1)}else{kp(e.get());const i=I6(r,!1);return e.set(i),Qe(i,i.length-1)}}),o=>{kp(e.get());const r=TV(o);return e.set(r),W.some(Qe(r,1))}),L6=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return W.none()},il=nu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),F6=(e,n)=>{const o=um(n,e);return o||e},j_=(e,n,o)=>{const r=SN(o),i=F6(n,r.container());return ja(e,i,r).fold(()=>sc(i,r).bind(Ae(ja,e,i)).map(u=>il.before(u)),W.none)},iD=(e,n)=>fg(e,n)===null,$6=(e,n,o)=>ja(e,n,o).filter(Ae(iD,n)),kV=(e,n,o)=>{const r=xN(o);return $6(e,n,r).bind(i=>di(i,r).isNone()?W.some(il.start(i)):W.none())},AV=(e,n,o)=>{const r=SN(o);return $6(e,n,r).bind(i=>sc(i,r).isNone()?W.some(il.end(i)):W.none())},OV=(e,n,o)=>{const r=xN(o),i=F6(n,r.container());return ja(e,i,r).fold(()=>di(i,r).bind(Ae(ja,e,i)).map(u=>il.after(u)),W.none)},cD=e=>!K3(lD(e)),bh=(e,n,o)=>L6([j_,kV,AV,OV],[e,n,o]).filter(cD),lD=e=>e.fold(Eo,Eo,Eo,Eo),q_=e=>e.fold(wt("before"),wt("start"),wt("end"),wt("after")),G_=e=>e.fold(il.before,il.before,il.after,il.after),uD=e=>e.fold(il.start,il.start,il.end,il.end),DV=(e,n)=>q_(e)===q_(n)&&lD(e)===lD(n),RV=(e,n,o,r,i,u)=>ur(ja(n,o,r),ja(n,o,i),(m,y)=>m!==y&&SH(o,m,y)?il.after(e?m:y):u).getOr(u),MV=(e,n)=>e.fold(gt,o=>!DV(o,n)),NV=(e,n,o,r,i)=>{const u=_d(e,i);return Vi(e,o,u).map(Ae(_d,e)).fold(()=>r.map(G_),x=>bh(n,o,x).map(Ae(RV,e,n,o,u,x)).filter(Ae(MV,r))).filter(cD)},PV=(e,n)=>e?n.fold(M(W.some,il.start),W.none,M(W.some,il.after),W.none):n.fold(W.none,M(W.some,il.before),W.none,M(W.some,il.end)),K_=(e,n,o,r)=>{const i=_d(e,r),u=bh(n,o,i);return bh(n,o,i).bind(Ae(PV,e)).orThunk(()=>NV(e,n,o,u,r))},Y_=e=>ve(e.selection.getSel().modify),H6=(e,n,o)=>{const r=e?1:-1;return n.setRng(Qe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},IV=(e,n)=>{const o=n.selection.getRng(),r=e?Qe.fromRangeEnd(o):Qe.fromRangeStart(o);return Y_(n)?e&&pp(r)?H6(!0,n.selection,r):!e&&sm(r)?H6(!1,n.selection,r):!1:!1};var Md;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Md||(Md={}));const X_=(e,n)=>e===Ua.Backwards?xs(n):n,BV=(e,n,o)=>e===Ua.Forwards?n.next(o):n.prev(o),LV=(e,n,o,r)=>jo(r.getNode(n===Ua.Forwards))?Md.Br:Ru(o,r)===!1?Md.Block:Md.Wrap,z6=(e,n,o,r)=>{const i=tl(o);let u=r;const m=[];for(;u;){const y=BV(n,i,u);if(!y)break;if(jo(y.getNode(!1)))return n===Ua.Forwards?{positions:X_(n,m).concat([y]),breakType:Md.Br,breakAt:W.some(y)}:{positions:X_(n,m),breakType:Md.Br,breakAt:W.some(y)};if(!y.isVisible()){u=y;continue}if(e(u,y)){const x=LV(o,n,u,y);return{positions:X_(n,m),breakType:x,breakAt:W.some(y)}}m.push(y),u=y}return{positions:X_(n,m),breakType:Md.Eol,breakAt:W.none()}},V6=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===Ua.Backwards?u.concat(i):[i].concat(u)}).getOr([]),dD=(e,n)=>Fo(e,(o,r)=>o.fold(()=>W.some(r),i=>ur(lo(i.getClientRects()),lo(r.getClientRects()),(u,m)=>{const y=Math.abs(n-u.left);return Math.abs(n-m.left)<=y?r:i}).or(o)),W.none()),J_=(e,n)=>lo(n.getClientRects()).bind(o=>dD(e,o.left)),kC=Ae(z6,Qe.isAbove,-1),AC=Ae(z6,Qe.isBelow,1),U6=Ae(V6,-1,kC),W6=Ae(V6,1,AC),FV=(e,n)=>kC(e,n).breakAt.isNone(),Nd=(e,n)=>AC(e,n).breakAt.isNone(),fD=e=>Ui(e).map(n=>[n].concat(AC(e,n).positions)).getOr([]),Z6=e=>Mu(e).map(n=>kC(e,n).positions.concat(n)).getOr([]),j6=(e,n)=>J_(U6(e,n),n),$V=(e,n)=>J_(W6(e,n),n),q6=qo,G6=(e,n)=>Math.abs(e.left-n),mD=(e,n)=>Math.abs(e.right-n),HV=e=>or(e,"node"),K6=(e,n)=>pe(e,(o,r)=>{const i=Math.min(G6(o,n),mD(o,n)),u=Math.min(G6(r,n),mD(r,n));return u===i&&HV(r)&&q6(r.node)||u<i?r:o}),zV=e=>{const n=o=>dt(o,r=>{const i=th(r);return i.node=e,i});if(Ut(e))return n(e.getClientRects());if(bt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Kb=e=>_s(e,zV);var Sy;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Sy||(Sy={}));const Y6=(e,n,o,r)=>{let i=r;for(;i=dh(i,e,K0,n);)if(o(i))return},hD=(e,n,o,r,i,u)=>{let m=0;const y=[],x=$=>{let z=Kb([$]);e===-1&&(z=z.reverse());for(let X=0;X<z.length;X++){const oe=z[X];if(!o(oe,A)){if(y.length>0&&n(oe,Ve(y))&&m++,oe.line=m,i(oe))return!0;y.push(oe)}}return!1},A=Ve(u.getClientRects());if(!A)return y;const L=u.getNode();return L&&(x(L),Y6(e,r,x,L)),y},gD=(e,n)=>n.line>e,VV=(e,n)=>n.line===e,UV=Ae(hD,Sy.Up,js,G1),WV=Ae(hD,Sy.Down,G1,js),X6=e=>Ve(e.getClientRects()),zY=(e,n,o,r)=>{const i=tl(n);let u,m,y,x;const A=[];let L=0;e===1?(u=i.next,m=G1,y=js,x=Qe.after(r)):(u=i.prev,m=js,y=G1,x=Qe.before(r));const $=X6(x);do{if(!x.isVisible())continue;const z=X6(x);if(y(z,$))continue;A.length>0&&m(z,Ve(A))&&L++;const X=th(z);if(X.position=x,X.line=L,o(X))return A;A.push(X)}while(x=u(x));return A},ZV=e=>n=>gD(e,n),J6=e=>n=>VV(e,n),lc=(e,n)=>{e.selection.setRng(n),qv(e,e.selection.getRng())},pD=(e,n,o)=>W.some(qO(e,n,o)),Q6=(e,n,o,r,i,u)=>{const m=n===Ua.Forwards,y=tl(e.getBody()),x=Ae(lw,m?y.next:y.prev),A=m?r:i;if(!o.collapsed){const oe=U0(o);if(u(oe))return cc(n,e,oe,n===Ua.Backwards,!1);if(YO(e)){const te=o.cloneRange();return te.collapse(n===Ua.Backwards),W.from(te)}}const L=Np(n,e.getBody(),o);if(A(L))return EC(e,L.getNode(!m));let $=x(L);const z=tr(o);if($)$=_d(m,$);else return z?W.some(o):W.none();if(A($))return cc(n,e,$.getNode(!m),m,!1);const X=x($);return X&&A(X)&&Ip($,X)?cc(n,e,X.getNode(!m),m,!1):z?pD(e,$.toRange(),!1):W.none()},c1=(e,n,o,r,i,u)=>{const m=Np(n,e.getBody(),o),y=Ve(m.getClientRects()),x=n===Sy.Down,A=e.getBody();if(!y)return W.none();if(YO(e)){const ie=x?Qe.fromRangeEnd(o):Qe.fromRangeStart(o);return(x?$V:j6)(A,ie).orThunk(()=>W.from(ie)).map(Re=>Re.toRange())}const $=(x?WV:UV)(A,ZV(1),m),z=Kt($,J6(1)),X=y.left,oe=K6(z,X);if(oe&&u(oe.node)){const ie=Math.abs(X-oe.left),_e=Math.abs(X-oe.right);return cc(n,e,oe.node,ie<_e,!1)}let te;if(r(m)?te=m.getNode():i(m)?te=m.getNode(!0):te=U0(o),te){const ie=zY(n,A,ZV(1),te);let _e=K6(Kt(ie,J6(1)),X);if(_e||(_e=Ve(Kt(ie,J6(0))),_e))return pD(e,_e.position.toRange(),!1)}return z.length===0?Q_(e,x).filter(x?i:r).map(ie=>qO(e,ie.toRange(),!1)):W.none()},Q_=(e,n)=>{const o=e.selection.getRng(),r=n?Qe.fromRangeEnd(o):Qe.fromRangeStart(o),i=xd(r.container(),e.getBody());if(n){const u=AC(i,r);return gs(u.positions)}else{const u=kC(i,r);return lo(u.positions)}},eB=(e,n,o)=>Q_(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Yb=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},tB=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},nB=(e,n,o)=>aD(n,o).map(r=>(Yb(e,r),o)),jV=(e,n,o)=>{const r=Qe.fromRangeStart(e);if(e.collapsed)return r;{const i=Qe.fromRangeEnd(e);return o?di(n,i).getOr(i):sc(n,r).getOr(r)}},qV=(e,n,o)=>{const r=e.getBody(),i=jV(e.selection.getRng(),r,o),u=Ae(Kp,e);return K_(o,u,r,i).bind(y=>nB(e,n,y))},oB=(e,n,o)=>{const r=dt(ii(be.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),i=Kt(r,e),u=Kt(o,e);xe(Yr(i,u),Ae(tB,!1)),xe(Yr(u,i),Ae(tB,!0))},GV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Qe.fromRangeStart(e.selection.getRng());Qe.isTextPosition(r)&&!xH(r)&&(Yb(e,iM(o,r)),n.set(null))}},Rg=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Kt(r,e);xe(i,u=>{const m=Qe.fromRangeStart(n.selection.getRng());bh(e,n.getBody(),m).bind(y=>nB(n,o,y))})}},eT=(e,n,o)=>ig(e)?qV(e,n,o).isSome():!1,sB=(e,n,o)=>ig(n)?IV(e,n):!1,KV=e=>{const n=Zs(null),o=Ae(Kp,e);return e.on("NodeChange",r=>{ig(e)&&(oB(o,e.dom,r.parents),GV(e,n),Rg(o,e,n,r.parents))}),n},YV=Ae(sB,!0),XV=Ae(sB,!1),tT=(e,n,o)=>{if(ig(e)){const r=Q_(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Qe.fromRangeEnd(i):Qe.fromRangeStart(i)});return bh(Ae(Kp,e),e.getBody(),r).exists(i=>{const u=G_(i);return aD(o,u).exists(m=>(Yb(e,m),!0))})}else return!1},bD=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},vD=e=>ur(Ui(e),Mu(e),(n,o)=>{const r=_d(!0,n),i=_d(!1,o);return sc(e,r).forall(u=>u.isEqual(i))}).getOr(!0),nT=(e,n)=>o=>aD(n,o).map(r=>()=>Yb(e,r)),yD=(e,n,o,r)=>{const i=e.getBody(),u=Ae(Kp,e);e.undoManager.ignore(()=>{e.selection.setRng(bD(o,r)),LE(e),bh(u,i,Qe.fromRangeStart(e.selection.getRng())).map(uD).bind(nT(e,n)).each(io)}),e.nodeChanged()},rB=(e,n)=>{const o=um(n,e);return o||e},aB=(e,n,o,r)=>{const i=rB(e.getBody(),r.container()),u=Ae(Kp,e),m=bh(u,i,r);return m.bind(x=>o?x.fold(wt(W.some(uD(x))),W.none,wt(W.some(G_(x))),W.none):x.fold(W.none,wt(W.some(G_(x))),W.none,wt(W.some(uD(x))))).map(nT(e,n)).getOrThunk(()=>{const x=ug(o,i,r),A=x.bind(L=>bh(u,i,L));return ur(m,A,()=>ja(u,i,r).bind(L=>vD(L)?W.some(()=>{Mb(e,o,be.fromDom(L))}):W.none())).getOrThunk(()=>A.bind(()=>x.map(L=>()=>{o?yD(e,n,r,L):yD(e,n,L,r)})))})},wD=(e,n,o)=>{if(e.selection.isCollapsed()&&ig(e)){const r=Qe.fromRangeStart(e.selection.getRng());return aB(e,n,o,r)}return W.none()},OC=e=>rd(e)>1,DC=(e,n)=>{const o=be.fromDom(e.getBody()),r=be.fromDom(e.selection.getStart()),i=xg(r,o);return zs(i,n).fold(wt(i),u=>i.slice(0,u))},iB=e=>rd(e)===1,cB=e=>DC(e,n=>e.schema.isBlock(no(n))||OC(n)),lB=e=>DC(e,n=>e.schema.isBlock(no(n))),CD=(e,n)=>{const o=Ae(kA,e);return _s(n,r=>o(r)?[r.dom]:[])},RC=e=>{const n=lB(e);return CD(e,n)},SD=(e,n,o,r)=>{const i=CD(n,r);if(i.length===0)Mb(n,e,o);else{const u=i_(o.dom,i);n.selection.setRng(u.toRange())}},MC=(e,n)=>{const o=Kt(cB(e),iB);return gs(o).bind(r=>{const i=Qe.fromRangeStart(e.selection.getRng());return Lu(n,i,r.dom)&&!hm(r)?W.some(()=>SD(n,e,r,o)):W.none()})},JV=(e,n)=>{const o=n.parentElement;return jo(n)&&!re(o)&&e.dom.isEmpty(o)},uB=e=>hm(be.fromDom(e)),dB=(e,n)=>{const o=e.selection.getStart(),r=JV(e,o)||uB(o)?i_(o,n):tP(e.selection.getRng(),n);e.selection.setRng(r.toRange())},QV=(e,n)=>{const o=Yr(n,RC(e));o.length>0&&dB(e,o)},xD=e=>bt(e.startContainer),eU=e=>e.startOffset===0&&xD(e),fB=(e,n)=>{const o=n.startContainer.parentElement;return!re(o)&&kA(e,be.fromDom(o))},VY=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!re(n)&&!re(o)&&n.isEqualNode(o)},tU=e=>{const n=e.endContainer;return e.endOffset===(bt(n)?n.length:n.childNodes.length)},nU=e=>VY(e)&&tU(e),oU=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),sU=e=>nU(e)||oU(e),rU=e=>{const n=e.selection.getRng();return eU(n)&&fB(e,n)&&sU(n)},aU=e=>{if(rU(e)){const n=RC(e);return W.some(()=>{LE(e),QV(e,n)})}else return W.none()},ED=(e,n)=>e.selection.isCollapsed()?MC(e,n):aU(e),iU=(e,n)=>Gg(e,o=>kl(o.dom),o=>n.isBlock(no(o))),mB=e=>iU(be.fromDom(e.selection.getStart()),e.schema),cU=e=>{const n=e.selection.getRng();return n.collapsed&&(xD(n)||e.dom.isEmpty(n.startContainer))&&!mB(e)},Df=e=>(cU(e)&&dB(e,[]),!0),oT=(e,n,o)=>Fe(o)?W.some(()=>{e._selectionOverrides.hideFakeCaret(),Mb(e,n,be.fromDom(o))}):W.none(),_D=(e,n)=>{const o=n?Db:Pw,r=n?Ua.Forwards:Ua.Backwards,i=Np(r,e.getBody(),e.selection.getRng());return o(i)?oT(e,n,i.getNode(!n)):W.from(_d(n,i)).filter(u=>o(u)&&Ip(i,u)).bind(u=>oT(e,n,u.getNode(!n)))},hB=(e,n)=>{const o=e.selection.getNode();return ka(o)?oT(e,n,o):W.none()},NC=(e,n)=>e.selection.isCollapsed()?_D(e,n):hB(e,n),l1=e=>fr(e,n=>st(n.dom)||qo(n.dom)).exists(n=>st(n.dom)),sT=e=>hc(e??"").getOr(0),zu=(e,n)=>{const o=e||e4(n)?"margin":"padding",r=vr(n,"direction")==="rtl"?"-right":"-left";return o+r},Xb=(e,n,o,r,i,u)=>{const m=zu(o,be.fromDom(u)),y=sT(e.getStyle(u,m));if(n==="outdent"){const x=Math.max(0,y-r);e.setStyle(u,m,x?x+i:"")}else{const x=y+r+i;e.setStyle(u,m,x)}},TD=(e,n)=>Ss(n,o=>{const r=zu(tb(e),o),i=Bi(o,r).map(sT).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),gB=e=>{const n=pB(e);return!e.mode.isReadOnly()&&(n.length>1||TD(e,n))},kD=e=>g2(e)||Jm(e),lU=e=>si(e).exists(kD),pB=e=>Kt(id(e.selection.getSelectedBlocks()),n=>!kD(n)&&!lU(n)&&l1(n)),bB=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:i}=e,u=k4(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",y=sT(u),x=tb(e);xe(pB(e),A=>{Xb(i,n,x,y,m,A.dom)})},uU=e=>bB(e,"indent"),vB=e=>bB(e,"outdent"),AD=e=>{if(e.selection.isCollapsed()&&gB(e)){const n=e.dom,o=e.selection.getRng(),r=Qe.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&cN(be.fromDom(i),r,e.schema))return W.some(()=>vB(e))}return W.none()},yB=(e,n,o)=>Pi([AD,V_,GO,(r,i)=>wD(r,n,i),$_,XE,TC,NC,ph,ED,U_],r=>r(e,o)).filter(r=>e.selection.isEditable()),dU=(e,n)=>{yB(e,n,!1).fold(()=>{e.selection.isEditable()&&(LE(e),Xp(e))},io)},xy=(e,n)=>{yB(e,n,!0).fold(()=>{e.selection.isEditable()&&pr(e)},io)},rT=(e,n)=>{e.addCommand("delete",()=>{dU(e,n)}),e.addCommand("forwardDelete",()=>{xy(e,n)})},OD=5,wB=400,aT=e=>e.touches===void 0||e.touches.length!==1?W.none():W.some(e.touches[0]),fU=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>OD||r>OD},mU=e=>{const n=li(),o=Zs(!1),r=Kh(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},wB);e.on("touchstart",i=>{aT(i).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(m)})},!0),e.on("touchmove",i=>{r.cancel(),aT(i).each(u=>{n.on(m=>{fU(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},DD=(e,n)=>En(e,n.nodeName),hU=(e,n)=>bt(n)?!0:Ut(n)?!DD(e.getBlockElements(),n)&&!Hc(n)&&!Yl(e,n)&&!_(n):!1,gU=(e,n,o)=>_t(X7(be.fromDom(o),be.fromDom(n)),r=>DD(e,r.dom)),pU=(e,n)=>{if(bt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||DD(e,n.nextSibling)||_(n.nextSibling)}return!1},RD=e=>e.dom.create(Va(e),hf(e)),CB=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),m=e.getBody();let y,x,A=null;const L=Va(e);if(!u||!Ut(u))return;const $=m.nodeName.toLowerCase();if(!r.isValidChild($,L.toLowerCase())||gU(i,m,u))return;if(m.firstChild===m.lastChild&&jo(m.firstChild)){y=RD(e),y.appendChild(Cd().dom),m.replaceChild(y,m.firstChild),e.selection.setCursorLocation(y,0),e.nodeChanged();return}let z=m.firstChild;for(;z;)if(Ut(z)&&Kl(r,z),hU(r,z)){if(pU(i,z)){x=z,z=z.nextSibling,n.remove(x);continue}if(!y){if(!A&&e.hasFocus()&&(A=oD(e.selection.getRng(),()=>document.createElement("span"))),!z.parentNode){z=null;break}y=RD(e),m.insertBefore(y,z)}x=z,z=z.nextSibling,y.appendChild(x)}else y=null,z=z.nextSibling;A&&(e.selection.setRng(sD(A)),e.nodeChanged())},SB=(e,n,o)=>{const r=be.fromDom(RD(e)),i=Cd();Js(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},bU=e=>{e.on("NodeChange",()=>CB(e))},cu=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,vU=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const y=n.lastIndexOf("<",u);if(y!==-1&&n.substring(y,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},MD=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],vU(e,i,J2(e)));o.content=i}},xB=(e,n)=>Ss(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),ND=e=>{const n="contenteditable",o=" "+ut.trim(yv(e))+" ",r=" "+ut.trim(J2(e))+" ",i=cu(o),u=cu(r),m=$4(e);m.length>0&&e.on("BeforeSetContent",y=>{MD(e,m,y)}),e.parser.addAttributeFilter("class",y=>{let x=y.length;for(;x--;){const A=y[x];i(A)?A.attr(n,"true"):u(A)&&A.attr(n,"false")}}),e.serializer.addAttributeFilter(n,y=>{let x=y.length;for(;x--;){const A=y[x];if(!i(A)&&!u(A))continue;const L=A.attr("data-mce-content");m.length>0&&L?xB(m,L)?(A.name="#text",A.type=3,A.raw=!0,A.value=L):A.remove():A.attr(n,null)}})},yU=e=>ea(be.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),EB=(e,n)=>{n.hasAttribute("data-mce-caret")&&(bp(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},_B=(e,n)=>{const o=yU(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),EB(e,o);return}VS(o)&&(EB(e,o),e.undoManager.add())}},wU=e=>{e.on("keyup compositionstart",Ae(_B,e))},TB=qo,CU=(e,n,o)=>Q6(n,e,o,qp,Gp,TB),kB=(e,n,o)=>c1(n,e,o,u=>qp(u)||aN(u),u=>Gp(u)||B3(u),TB),SU=e=>{const n=e.dom.create(Va(e));return n.innerHTML='<br data-mce-bogus="1">',n},AB=(e,n,o)=>{const r=tl(e.getBody()),i=Ae(lw,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(Qe.fromRangeStart(o))){const y=be.fromDom(SU(e));n===1?yc(be.fromDom(u),y):Ei(be.fromDom(u),y),e.selection.select(y.dom,!0),e.selection.collapse()}}},PC=(e,n)=>{const o=n?Ua.Forwards:Ua.Backwards,r=e.selection.getRng();return CU(o,e,r).orThunk(()=>(AB(e,o,r),W.none()))},Mg=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return kB(o,e,r).orThunk(()=>(AB(e,o,r),W.none()))},Jb=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return K3(o)?!n:n},IC=(e,n)=>PC(e,Jb(e.selection,n)).exists(o=>(lc(e,o),!0)),iT=(e,n)=>Mg(e,n).exists(o=>(lc(e,o),!0)),cT=(e,n)=>eB(e,n,n?Gp:qp),BC=(e,n)=>KO(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(lc(e,o),!0)),xU=e=>et(["figcaption"],no(e)),OB=(e,n,o)=>{const r=Ae(No,n);return fr(be.fromDom(e.container()),i=>o.isBlock(no(i)),r).filter(xU)},DB=(e,n,o)=>n?Nd(e.dom,o):FV(e.dom,o),EU=(e,n)=>{const o=be.fromDom(e.getBody()),r=Qe.fromRangeStart(e.selection.getRng());return OB(r,o,e.schema).exists(()=>{if(DB(o,n,r)){const u=SB(e,o,n?Js:Xd);return e.selection.setRng(u),!0}else return!1})},RB=(e,n)=>e.selection.isCollapsed()?EU(e,n):!1,_U=(e,n,o)=>{const r=e.selection.getRng(),i=Qe.fromRangeStart(r);return e.getBody().firstChild===n&&FV(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},TU=(e,n)=>{const o=e.selection.getRng(),r=Qe.fromRangeStart(o);return e.getBody().lastChild===n&&Nd(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},kU=(e,n)=>n?W.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>TU(e,o)).getOr(!1):W.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>W.from(e.dom.getParent(o,"details")).map(r=>_U(e,r,o))).getOr(!1),MB=(e,n)=>kU(e,n),PD={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},NB=e=>dt(e,n=>({...PD,...n})),UY=e=>dt(e,n=>({...PD,...n})),AU=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,WY=(e,n)=>_s(NB(e),o=>AU(o,n)?[o]:[]),OU=(e,n)=>_s(UY(e),o=>AU(o,n)?[o]:[]),qn=(e,...n)=>()=>e.apply(null,n),lT=(e,n)=>Vo(WY(e,n),o=>o.action()),PB=(e,n)=>Pi(OU(e,n),o=>o.action()),IB=(e,n)=>{const o=n?Ua.Forwards:Ua.Backwards,r=e.selection.getRng();return Q6(e,o,r,Db,Pw,ka).exists(i=>(lc(e,i),!0))},DU=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return c1(e,o,r,Db,Pw,ka).exists(i=>(lc(e,i),!0))},BB=(e,n)=>eB(e,n,n?Pw:Db),cl=nu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ng={...cl,none:e=>cl.none(e)},MU=(e,n)=>ID(e,n,gt),ID=(e,n,o)=>_s(ba(e),r=>xi(r,n)?o(r)?[r]:[]:ID(r,n,o)),LB=(e,n,o=$e)=>{if(o(n))return W.none();if(et(e,no(n)))return W.some(n);const r=i=>xi(i,"table")||o(i);return Kd(n,e.join(","),r)},FB=(e,n)=>LB(["td","th"],e,n),BD=e=>MU(e,"th,td"),LD=(e,n)=>mn(e,"table",n),FD=(e,n,o,r,i=gt)=>{const u=r===1;if(!u&&o<=0)return Ng.first(e[0]);if(u&&o>=e.length-1)return Ng.last(e[e.length-1]);{const m=o+r,y=e[m];return i(y)?Ng.middle(n,y):FD(e,n,m,r,i)}},$D=(e,n)=>LD(e,n).bind(o=>{const r=BD(o);return zs(r,u=>No(e,u)).map(u=>({index:u,all:r}))}),NU=(e,n,o)=>$D(e,o).fold(()=>Ng.none(e),i=>FD(i.all,e,i.index,1,n)),PU=(e,n,o)=>$D(e,o).fold(()=>Ng.none(),i=>FD(i.all,e,i.index,-1,n)),IU=e=>hp(e).filter(n=>n.trim().length!==0||n.indexOf(Zr)>-1).isSome(),HD=e=>Pm(e)&&ni(e,"contenteditable")==="false",BU=["img","br"],LU=e=>IU(e)||et(BU,no(e))||HD(e),ZY=e=>Gd(e,LU),FU=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),$B=(e,n)=>_s(n,o=>{const r=FU(th(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),jY=(e,n,o)=>Fo(e,(r,i)=>r.fold(()=>W.some(i),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),y=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return W.some(y<m?i:u)}),W.none()),HB=(e,n,o,r,i)=>{const u=ii(be.fromDom(o),"td,th,caption").map(y=>y.dom),m=Kt($B(e,u),y=>n(y,i));return jY(m,r,i).map(y=>y.cell)},$U=e=>e.bottom,HU=e=>e.top,zD=(e,n)=>e.y<n,uT=(e,n)=>e.y>n,zB=Ae(HB,$U,zD),VB=Ae(HB,HU,uT),zU=(e,n)=>lo(n.getClientRects()).bind(o=>zB(e,o.left,o.top)).bind(o=>J_(Z6(o),n)),VU=(e,n)=>gs(n.getClientRects()).bind(o=>VB(e,o.left,o.top)).bind(o=>J_(fD(o),n)),VD=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),UU=e=>e.breakType===Md.Wrap&&e.positions.length===0,WU=e=>e.breakType===Md.Br&&e.positions.length===1,UB=(e,n,o)=>{const r=e(n,o);return UU(r)||!jo(o.getNode())&&WU(r)?!VD(e,n,r):r.breakAt.isNone()},ZU=Ae(UB,kC),Rf=Ae(UB,AC),WB=(e,n,o)=>{const r=Qe.fromRangeStart(n);return dg(!e,o).exists(i=>i.isEqual(r))},ZB=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return rw()&&WB(n,i,o)?(cc(u,e,o,!n,!1).each(m=>{lc(e,m)}),!0):!1},qY=(e,n,o)=>zU(n,o).orThunk(()=>lo(o.getClientRects()).bind(r=>dD(U6(e,Qe.before(n)),r.left))).getOr(Qe.before(n)),GY=(e,n,o)=>VU(n,o).orThunk(()=>lo(o.getClientRects()).bind(r=>dD(W6(e,Qe.after(n)),r.left))).getOr(Qe.after(n)),jU=(e,n)=>{const o=n.getNode(e);return ql(o)?W.some(o):W.none()},KY=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?yc:Ei,i=SB(n,be.fromDom(o),r);lc(n,i)})},jB=(e,n,o)=>{const r=jU(!!n,o),i=n===!1;r.fold(()=>lc(e,o.toRange()),u=>dg(i,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>lc(e,o.toRange()),m=>KY(n,e,u)))},dT=(e,n,o,r)=>{const i=e.selection.getRng(),u=Qe.fromRangeStart(i),m=e.getBody();if(!n&&ZU(r,u)){const y=qY(m,o,u);return jB(e,n,y),!0}else if(n&&Rf(r,u)){const y=GY(m,o,u);return jB(e,n,y),!0}else return!1},qB=(e,n,o)=>W.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>W.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),fT=(e,n)=>qB(e,n,ZB),mT=(e,n)=>qB(e,n,dT),GB=e=>{const n=Tb.exact(e,0,e,0);return E7(n)},UD=(e,n,o)=>o.fold(W.none,W.none,(r,i)=>ZY(i).map(u=>GB(u)),r=>e.mode.isReadOnly()?W.none():(e.execCommand("mceTableInsertRowAfter"),KB(e,n,r))),KB=(e,n,o)=>UD(e,n,NU(o,yl)),qU=(e,n,o)=>UD(e,n,PU(o,yl)),YB=(e,n)=>{const o=["table","li","dl"],r=be.fromDom(e.getBody()),i=y=>{const x=no(y);return No(y,r)||et(o,x)},u=e.selection.getRng(),m=be.fromDom(n?u.endContainer:u.startContainer);return FB(m,i).map(y=>(LD(y,i).each(L=>{e.model.table.clearSelectedCells(L.dom)}),e.selection.collapse(!n),(n?KB:qU)(e,i,y).each(L=>{e.selection.setRng(L)}),!0)).getOr(!1)},GU=(e,n,o)=>{const r=Nn.os.isMacOS()||Nn.os.isiOS();lT([{keyCode:Ht.RIGHT,action:qn(IC,e,!0)},{keyCode:Ht.LEFT,action:qn(IC,e,!1)},{keyCode:Ht.UP,action:qn(iT,e,!1)},{keyCode:Ht.DOWN,action:qn(iT,e,!0)},...r?[{keyCode:Ht.UP,action:qn(BC,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Ht.DOWN,action:qn(BC,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ht.RIGHT,action:qn(fT,e,!0)},{keyCode:Ht.LEFT,action:qn(fT,e,!1)},{keyCode:Ht.UP,action:qn(mT,e,!1)},{keyCode:Ht.DOWN,action:qn(mT,e,!0)},{keyCode:Ht.UP,action:qn(mT,e,!1)},{keyCode:Ht.UP,action:qn(MB,e,!1)},{keyCode:Ht.DOWN,action:qn(MB,e,!0)},{keyCode:Ht.RIGHT,action:qn(IB,e,!0)},{keyCode:Ht.LEFT,action:qn(IB,e,!1)},{keyCode:Ht.UP,action:qn(DU,e,!1)},{keyCode:Ht.DOWN,action:qn(DU,e,!0)},{keyCode:Ht.RIGHT,action:qn(eT,e,n,!0)},{keyCode:Ht.LEFT,action:qn(eT,e,n,!1)},{keyCode:Ht.RIGHT,ctrlKey:!r,altKey:r,action:qn(YV,e,n)},{keyCode:Ht.LEFT,ctrlKey:!r,altKey:r,action:qn(XV,e,n)},{keyCode:Ht.UP,action:qn(RB,e,!1)},{keyCode:Ht.DOWN,action:qn(RB,e,!0)}],o).each(i=>{o.preventDefault()})},hT=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||GU(e,n,o)})},_m=(e,n)=>({container:e,offset:n}),gT=$s.DOM,pT=e=>n=>e===n?-1:0,WD=e=>n=>e.isBlock(n)||et(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",ZD=(e,n,o)=>{if(bt(e)&&n>=0)return W.some(_m(e,n));{const r=Qh(gT);return W.from(r.backwards(e,n,pT(e),o)).map(i=>_m(i.container,i.container.data.length))}},KU=(e,n,o)=>{if(bt(e)&&n>=e.length)return W.some(_m(e,n));{const r=Qh(gT);return W.from(r.forwards(e,n,pT(e),o)).map(i=>_m(i.container,0))}},bT=(e,n,o)=>{if(!bt(e))return W.none();const r=e.data;if(n>=0&&n<=r.length)return W.some(_m(e,n));{const i=Qh(gT);return W.from(i.backwards(e,n,pT(e),o)).bind(u=>{const m=u.container.data;return bT(u.container,n+m.length,o)})}},XB=(e,n,o)=>{if(!bt(e))return W.none();const r=e.data;if(n<=r.length)return W.some(_m(e,n));{const i=Qh(gT);return W.from(i.forwards(e,n,pT(e),o)).bind(u=>XB(u.container,n-r.length,o))}},jD=(e,n,o,r,i)=>{const u=Qh(e,WD(e));return W.from(u.backwards(n,o,r,i))},YU=e=>e.collapsed&&bt(e.startContainer),XU=e=>xc(e.toString().replace(/\u00A0/g," ")),JB=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,JU=(e,n)=>e.substring(n.length),qD=(e,n,o,r=!1)=>{let i;const u=o.charAt(0);for(i=n-1;i>=0;i--){const m=e.charAt(i);if(!r&&JB(m))return W.none();if(u===m&&ns(e,o,i,n))break}return W.some(i)},GD=(e,n,o,r=!1)=>{if(!YU(n))return W.none();const i={text:"",offset:0},u=(y,x,A)=>(i.text=A+i.text,i.offset+=x,qD(i.text,i.offset,o,r).getOr(x)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return jD(e,n.startContainer,n.startOffset,u,m).bind(y=>{const x=n.cloneRange();if(x.setStart(y.container,y.offset),x.setEnd(n.endContainer,n.endOffset),x.collapsed)return W.none();const A=XU(x);return A.lastIndexOf(o)!==0?W.none():W.some({text:JU(A,o),range:x,trigger:o})})},QB=e=>e.nodeType===Nm,QU=e=>e.nodeType===pu,eL=e=>{if(QB(e))return _m(e,e.data.length);{const n=e.childNodes;return n.length>0?eL(n[n.length-1]):_m(e,n.length)}},tL=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?tL(o[n],0):o.length>0&&QU(e)&&o.length===n?eL(o[o.length-1]):_m(e,n)},eW=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return jD(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!JB(u)}).isSome()},tW=e=>n=>{const o=tL(n.startContainer,n.startOffset);return!eW(e,o)},nW=(e,n,o)=>Pi(o.triggers,r=>GD(e,n,r)),Ga=(e,n)=>{const o=n(),r=e.selection.getRng();return nW(e.dom,r,o).bind(i=>nL(e,n,i))},nL=(e,n,o,r={})=>{var i;const u=n(),y=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",x=Kt(u.lookupByTrigger(o.trigger),L=>o.text.length>=L.minChars&&L.matches.getOrThunk(()=>tW(e.dom))(o.range,y,o.text));if(x.length===0)return W.none();const A=Promise.all(dt(x,L=>L.fetch(o.text,L.maxResults,r).then(z=>({matchText:o.text,items:z,columns:L.columns,onAction:L.onAction,highlightOn:L.highlightOn}))));return W.some({lookupData:A,context:o})};var Pd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Pd||(Pd={}));const KD=(e,n,o)=>e.stype===Pd.Error?n(e.serror):o(e.svalue),oL=e=>{const n=[],o=[];return xe(e,r=>{KD(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},YD=(e,n)=>e.stype===Pd.Error?{stype:Pd.Error,serror:n(e.serror)}:e,sL=(e,n)=>e.stype===Pd.Value?{stype:Pd.Value,svalue:n(e.svalue)}:e,u1=(e,n)=>e.stype===Pd.Value?n(e.svalue):e,XD=(e,n)=>e.stype===Pd.Error?n(e.serror):e,JD=e=>({stype:Pd.Value,svalue:e}),vT=e=>({stype:Pd.Error,serror:e}),Wi={fromResult:e=>e.fold(vT,JD),toResult:e=>KD(e,ua.error,ua.value),svalue:JD,partition:oL,serror:vT,bind:u1,bindError:XD,map:sL,mapError:YD,fold:KD},Ey=e=>Je(e)&&ts(e).length>100?" removed due to size":JSON.stringify(e,null,2),yT=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:wt("... (only showing first ten failures)")}]):e;return dt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},d1=(e,n)=>Wi.serror([{path:e,getErrorInfo:n}]),LC=(e,n,o)=>d1(e,()=>'Could not find valid *required* value for "'+n+'" in '+Ey(o)),Mf=(e,n)=>d1(e,()=>'Choice schema did not contain choice key: "'+n+'"'),FC=(e,n,o)=>d1(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Ey(n)),iL=(e,n)=>d1(e,wt(n)),cL=(e,n,o,r)=>Yo(o,r).fold(()=>FC(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),oW=(e,n)=>({extract:(i,u)=>Yo(u,e).fold(()=>Mf(i,e),y=>cL(i,u,n,y)),toString:()=>"chooseOn("+e+"). Possible values: "+ts(n)}),lL=(e,n)=>n,sW=(e,n)=>Dn(e)&&Dn(n)?f1(e,n):n,uL=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)En(i,u)&&(o[u]=e(o[u],i[u]))}return o},f1=uL(sW),dL=uL(lL),QD=()=>({tag:"required",process:{}}),rW=e=>({tag:"defaultedThunk",process:e}),fL=e=>rW(wt(e)),aW=()=>({tag:"option",process:{}}),iW=(e,n)=>e.length>0?Wi.svalue(f1(n,dL.apply(void 0,e))):Wi.svalue(n),mL=e=>M(Wi.serror,Xa)(e),hL={consolidateObj:(e,n)=>{const o=Wi.partition(e);return o.errors.length>0?mL(o.errors):iW(o.values,n)},consolidateArr:e=>{const n=Wi.partition(e);return n.errors.length>0?mL(n.errors):Wi.svalue(n.values)}},cW=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),lW=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),gL=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},eR=e=>{const n=(r,i)=>Wi.bindError(e(i),u=>iL(r,u)),o=wt("val");return{extract:n,toString:o}},pL=eR(Wi.svalue),bL=(e,n,o,r)=>Yo(n,o).fold(()=>LC(e,o,n),r),tR=(e,n,o,r)=>{const i=Yo(e,n).getOrThunk(()=>o(e));return r(i)},uW=(e,n,o)=>o(Yo(e,n)),dW=(e,n,o,r)=>{const i=Yo(e,n).map(u=>u===!0?o(e):u);return r(i)},fW=(e,n,o,r,i)=>{const u=y=>i.extract(n.concat([r]),y),m=y=>y.fold(()=>Wi.svalue(W.none()),x=>{const A=i.extract(n.concat([r]),x);return Wi.map(A,W.some)});switch(e.tag){case"required":return bL(n,o,r,u);case"defaultedThunk":return tR(o,r,e.process,u);case"option":return uW(o,r,m);case"defaultedOptionThunk":return dW(o,r,e.process,m);case"mergeWithThunk":return tR(o,r,wt({}),y=>{const x=f1(e.process(o),y);return u(x)})}},mW=(e,n,o)=>{const r={},i=[];for(const u of o)gL(u,(m,y,x,A)=>{const L=fW(x,e,n,m,A);Wi.fold(L,$=>{i.push(...$)},$=>{r[y]=$})},(m,y)=>{r[m]=y(n)});return i.length>0?Wi.serror(i):Wi.svalue(r)},$C=e=>({extract:(r,i)=>mW(r,i,e),toString:()=>`obj{
`+dt(e,i=>gL(i,(u,m,y,x)=>u+" -> "+x.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),nR=e=>({extract:(r,i)=>{const u=dt(i,(m,y)=>e.extract(r.concat(["["+y+"]"]),m));return hL.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),vL=(e,n)=>{const o=Eo;return{extract:(u,m)=>{const y=[];for(const x of e){const A=x.extract(u,m);if(A.stype===Pd.Value)return{stype:Pd.Value,svalue:o(A.svalue)};y.push(A)}return hL.consolidateArr(y)},toString:()=>"oneOf("+dt(e,u=>u.toString()).join(", ")+")"}},hW=M(nR,$C),yL=e=>eR(n=>e(n).fold(Wi.serror,Wi.svalue)),wL=(e,n,o)=>{const r=n.extract([e],o);return Wi.mapError(r,i=>({input:o,errors:i}))},gW=(e,n,o)=>Wi.toResult(wL(e,n,o)),pW=e=>`Errors: 
`+yT(e.errors).join(`
`)+`

Input object: `+Ey(e.input),oR=(e,n)=>oW(e,go(n,$C)),bW=wt(pL),HC=(e,n)=>eR(o=>{const r=typeof o;return e(o)?Wi.svalue(o):Wi.serror(`Expected type: ${n} but got: ${r}`)}),vW=HC(oo,"number"),_y=HC(de,"string"),CL=HC(Xt,"boolean"),sR=HC(ve,"function"),Ty=cW,rR=lW,SL=e=>yL(n=>et(e,n)?ua.value(n):ua.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),aR=(e,n)=>Ty(e,e,QD(),n),xL=e=>aR(e,_y),wT=(e,n)=>Ty(e,e,QD(),SL(n)),iR=e=>aR(e,sR),EL=(e,n)=>Ty(e,e,QD(),nR(n)),cR=(e,n)=>Ty(e,e,aW(),n),Qb=e=>cR(e,_y),yW=e=>cR(e,sR),wW=(e,n)=>Ty(e,e,fL(n),bW()),ky=(e,n,o)=>Ty(e,e,fL(n),o),_L=(e,n)=>ky(e,n,vW),CT=(e,n)=>ky(e,n,_y),CW=(e,n,o)=>ky(e,n,SL(o)),lR=(e,n)=>ky(e,n,CL),Nf=(e,n)=>ky(e,n,sR),TL=(e,n,o)=>ky(e,n,nR(o)),kL=xL("type"),SW=iR("fetch"),ST=iR("onAction"),AL=Nf("onSetup",()=>it),xW=Qb("text"),EW=Qb("icon"),_W=Qb("tooltip"),OL=Qb("label"),TW=lR("active",!1),uR=lR("enabled",!0),DL=lR("primary",!1),kW=e=>wW("columns",e),zC=e=>CT("type",e),RL=$C([kL,xL("trigger"),_L("minChars",1),kW(1),_L("maxResults",10),yW("matches"),SW,ST,TL("highlightOn",[],_y)]),AW=e=>gW("Autocompleter",RL,e),dR=[uR,_W,EW,xW,AL,CT("context","mode:design")],ML=[TW].concat(dR),xT=[Nf("predicate",$e),CW("scope","node",["node","editor"]),CW("position","selection",["node","selection","line"])],OW=dR.concat([zC("contextformbutton"),CT("align","end"),DL,ST,rR("original",Eo)]),fi=ML.concat([zC("contextformbutton"),CT("align","end"),DL,ST,rR("original",Eo)]),vh=dR.concat([zC("contextformbutton")]),DW=ML.concat([zC("contextformtogglebutton")]),JY=oR("type",{contextformbutton:OW,contextformtogglebutton:fi}),fR=[OL,EL("commands",JY),cR("launch",oR("type",{contextformbutton:vh,contextformtogglebutton:DW})),Nf("onInput",it),Nf("onSetup",it)],RW=[...xT,...fR,wT("type",["contextform"]),Nf("initValue",wt("")),Qb("placeholder")],MW=[...xT,...fR,wT("type",["contextsliderform"]),Nf("initValue",wt(0)),Nf("min",wt(0)),Nf("max",wt(100))],NW=[...xT,...fR,wT("type",["contextsizeinputform"]),Nf("initValue",wt({width:"",height:""}))];oR("type",{contextform:RW,contextsliderform:MW,contextsizeinputform:NW}),$C([zC("contexttoolbar"),aR("items",vL([_y,hW([Qb("name"),Qb("label"),EL("items",_y)])]))].concat(xT));const NL=e=>{const n=e.ui.registry.getAll().popups,o=go(n,m=>AW(m).fold(y=>{throw new Error(pW(y))},Eo)),r=ll(La(o,m=>m.trigger)),i=Ii(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Kt(i,y=>y.trigger===m)}},Ay=(e,n)=>{const o=Kh(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},QY=e=>{const n=li(),o=Zs(!1),r=n.isSet,i=()=>{r()&&(wa(e),o.set(!1),n.clear())},u=$=>{r()||n.set({trigger:$.trigger,matchLength:$.text.length})},m=Ge(()=>NL(e)),y=$=>n.get().map(z=>GD(e.dom,e.selection.getRng(),z.trigger,!0).bind(X=>nL(e,m,X,$))).getOrThunk(()=>Ga(e,m)),x=$=>{y($).fold(i,z=>{u(z.context),z.lookupData.then(X=>{n.get().map(oe=>{const te=z.context;oe.trigger===te.trigger&&(n.set({...oe,matchLength:te.text.length}),o.get()?(M2(e,{range:te.range}),_4(e,{lookupData:X})):(o.set(!0),M2(e,{range:te.range}),rh(e,{lookupData:X})))})})})},A=($,z)=>{const X=$.compareBoundaryPoints(window.Range.START_TO_START,z),oe=$.compareBoundaryPoints(window.Range.END_TO_END,z);return X>=0&&oe<=0},L=()=>n.get().bind(({trigger:$})=>{const z=e.selection.getRng();return GD(e.dom,z,$,o.get()).filter(({range:X})=>A(z,X)).map(({range:X})=>X)});e.addCommand("mceAutocompleterReload",($,z)=>{const X=Je(z)?z.fetchOptions:{};x(X)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{L().each($=>{M2(e,{range:$})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>L().isSome()),Ay(e,{cancelIfNecessary:i,load:x})},PW=Y().browser.isSafari(),Pf=e=>lf(be.fromDom(e)),PL=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},ET=(e,n)=>W.from(e.getParent(n.container(),"details")),mR=(e,n)=>ET(e,n).isSome(),IW=(e,n)=>{const o=W.from(e.getParent(n.startContainer,"details")),r=W.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>W.from(e.select("summary",u)[0]));return W.some({startSummary:i,startDetails:o,endDetails:r})}else return W.none()},hR=(e,n)=>Ui(n).exists(o=>o.isEqual(e)),yh=(e,n)=>Mu(n).exists(o=>jo(o.getNode())&&di(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),IL=(e,n)=>n.startSummary.exists(o=>hR(e,o)),BL=(e,n)=>n.startSummary.exists(o=>yh(e,o)),BW=(e,n)=>n.startDetails.exists(o=>di(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),_T=(e,n,o)=>o.startDetails.exists(r=>sc(e,n).forall(i=>!r.contains(i.container()))),TT=(e,n)=>{const o=n.getNode();In(o)||e.selection.setCursorLocation(o,n.offset())},gR=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?Ui(i):Mu(i)).each(m=>TT(e,m))}else TT(e,n)},LL=(e,n)=>{const o=x=>x.contains(e.startContainer),r=x=>x.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(x=>n.endDetails.forall(A=>x!==A));return(i||u)&&!(i&&u)||m},FL=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const m=Qe.fromRangeStart(i.getRng()),y=r.getParent(m.container(),r.isBlock),x=ET(r,m),A=y&&r.isEmpty(y),L=re(y==null?void 0:y.previousSibling),$=re(y==null?void 0:y.nextSibling);return A&&(n?$:L)&&ug(!n,u,m).exists(oe=>mR(r,oe)&&!fs(x,ET(r,oe)))?!0:ug(n,u,m).fold($e,z=>{const X=ET(r,z);if(mR(r,z)&&!fs(x,X)){if(n||gR(e,z,!1),y&&A){if(n&&L)return!0;if(!n&&$)return!0;gR(e,z,n),e.dom.remove(y)}return!0}else return!1})}else return!1},LW=(e,n,o,r)=>{const u=e.selection.getRng(),m=Qe.fromRangeStart(u),y=e.getBody();return r==="selection"?LL(u,n):o?BL(m,n)||_T(y,m,n):IL(m,n)||BW(m,n)},FW=(e,n,o)=>IW(e.dom,e.selection.getRng()).fold(()=>FL(e,n,o),r=>LW(e,r,n,o)||FL(e,n,o)),$W=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),m=Qe.fromRangeStart(u);return nf(i)?(o==="selection"&&PL(u,i)||Lu(n,m,i)?Pf(i):e.undoManager.transact(()=>{const y=r.getSel();let{anchorNode:x,anchorOffset:A,focusNode:L,focusOffset:$}=y??{};const z=()=>{Fe(x)&&Fe(A)&&Fe(L)&&Fe($)&&(y==null||y.setBaseAndExtent(x,A,L,$))},X=()=>{x=y==null?void 0:y.anchorNode,A=y==null?void 0:y.anchorOffset,L=y==null?void 0:y.focusNode,$=y==null?void 0:y.focusOffset},oe=(ie,_e)=>{xe(ie.childNodes,Re=>{pb(Re)&&_e.appendChild(Re)})},te=e.dom.create("span",{"data-mce-bogus":"1"});oe(i,te),i.appendChild(te),z(),(o==="word"||o==="line")&&(y==null||y.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&PL(r.getRng(),te)?Pf(i):(e.execCommand(n?"ForwardDelete":"Delete"),X(),oe(te,i),z()),e.dom.remove(te)}),!0):!1},e0=(e,n,o)=>FW(e,n,o)||PW&&$W(e,n,o)?W.some(it):W.none(),pR=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:it,inputType:o},m=A0(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},VC=pR("input"),kT=pR("beforeinput"),$L=Y(),HL=$L.os,zL=HL.isMacOS()||HL.isiOS(),VL=$L.browser.isFirefox(),zW=(e,n,o)=>{const r=o.keyCode===Ht.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",m=y=>i?y?"word":"line":"selection";PB([{keyCode:Ht.BACKSPACE,action:qn(AD,e)},{keyCode:Ht.BACKSPACE,action:qn(V_,e,!1)},{keyCode:Ht.DELETE,action:qn(V_,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(GO,e,!1)},{keyCode:Ht.DELETE,action:qn(GO,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(wD,e,n,!1)},{keyCode:Ht.DELETE,action:qn(wD,e,n,!0)},{keyCode:Ht.BACKSPACE,action:qn(XE,e,!1)},{keyCode:Ht.DELETE,action:qn(XE,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(e0,e,!1,u)},{keyCode:Ht.DELETE,action:qn(e0,e,!0,u)},...zL?[{keyCode:Ht.BACKSPACE,altKey:!0,action:qn(e0,e,!1,m(!0))},{keyCode:Ht.DELETE,altKey:!0,action:qn(e0,e,!0,m(!0))},{keyCode:Ht.BACKSPACE,metaKey:!0,action:qn(e0,e,!1,m(!1))}]:[{keyCode:Ht.BACKSPACE,ctrlKey:!0,action:qn(e0,e,!1,m(!0))},{keyCode:Ht.DELETE,ctrlKey:!0,action:qn(e0,e,!0,m(!0))}],{keyCode:Ht.BACKSPACE,action:qn(TC,e,!1)},{keyCode:Ht.DELETE,action:qn(TC,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(NC,e,!1)},{keyCode:Ht.DELETE,action:qn(NC,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(ph,e,!1)},{keyCode:Ht.DELETE,action:qn(ph,e,!0)},{keyCode:Ht.BACKSPACE,action:qn($_,e,!1)},{keyCode:Ht.DELETE,action:qn($_,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(ED,e,!1)},{keyCode:Ht.DELETE,action:qn(ED,e,!0)},{keyCode:Ht.BACKSPACE,action:qn(U_,e,!1)},{keyCode:Ht.DELETE,action:qn(U_,e,!0)}],o).filter(y=>e.selection.isEditable()).each(y=>{o.preventDefault(),kT(e,r).isDefaultPrevented()||(y(),VC(e,r))})},VW=(e,n,o)=>lT([{keyCode:Ht.BACKSPACE,action:qn(_C,e)},{keyCode:Ht.DELETE,action:qn(_C,e)},...zL?[{keyCode:Ht.BACKSPACE,altKey:!0,action:qn(Df,e)},{keyCode:Ht.DELETE,altKey:!0,action:qn(Df,e)},...o?[{keyCode:VL?224:91,action:qn(Df,e)}]:[]]:[{keyCode:Ht.BACKSPACE,ctrlKey:!0,action:qn(Df,e)},{keyCode:Ht.DELETE,ctrlKey:!0,action:qn(Df,e)}]],n),tX=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Ht.BACKSPACE,r.isDefaultPrevented()||zW(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||VW(e,r,o),o=!1})},bR=e=>{for(;e;){if(Ut(e)||bt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Oy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=bR(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Zr),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new $a(n,n);let m=n,y;for(;y=u.current();){if(bt(y)){i.setStart(y,0),i.setEnd(y,0);break}if(r[y.nodeName.toLowerCase()]){i.setStartBefore(y),i.setEndBefore(y);break}m=y,y=u.next()}y||(i.setStart(m,0),i.setEnd(m,0))}else jo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),qv(e,i)},UC=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},vR=e=>W.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),UL=e=>vR(e).fold(wt(""),n=>n.nodeName.toUpperCase()),UW=e=>vR(e).filter(n=>Jm(be.fromDom(n))).isSome(),AT=e=>{e.innerHTML='<br data-mce-bogus="1">'},WW=(e,n,o)=>{const r=e.dom;W.from(o.style).map(r.parseStyle).each(x=>{const L={...ai(be.fromDom(n)),...x};r.setStyles(n,L)});const i=W.from(o.class).map(x=>x.split(/\s+/)),u=W.from(n.className).map(x=>Kt(x.split(/\s+/),A=>A!==""));ur(i,u,(x,A)=>{const L=Kt(A,z=>!et(x,z)),$=[...x,...L];r.setAttrib(n,"class",$.join(" "))});const m=["style","class"],y=Qo(o,(x,A)=>!et(m,A));r.setAttribs(n,y)},WC=(e,n)=>{if(Va(e).toLowerCase()===n.tagName.toLowerCase()){const r=hf(e);WW(e,n,r)}},ZW=(e,n,o,r,i=!0,u,m)=>{const y=e.dom,x=e.schema,A=Va(e),L=o?o.nodeName.toUpperCase():"";let $=n;const z=x.getTextInlineElements();let X;u||L==="TABLE"||L==="HR"?X=y.create(u||A,m||{}):X=o.cloneNode(!1);let oe=X;if(!i)y.setAttrib(X,"style",null),y.setAttrib(X,"class",null);else do if(z[$.nodeName]){if(kl($)||Hc($))continue;const te=$.cloneNode(!1);y.setAttrib(te,"id",""),X.hasChildNodes()?(te.appendChild(X.firstChild),X.appendChild(te)):(oe=te,X.appendChild(te))}while(($=$.parentNode)&&$!==r);return WC(e,X),AT(oe),X},Oc=(e,n)=>e.dom.getParent(n,O1),jW=(e,n,o)=>{let r=n;for(;r&&r!==e&&re(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return O1(i);r=i}return!1},qW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Va(e)&&e.dom.isEmpty(o)&&jW(e.getBody(),o,r=>En(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),GW=(e,n,o)=>{var r,i,u;const m=n(Va(e)),y=Oc(e,o);y&&(e.dom.insertAfter(m,y),Oy(e,m),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},KW=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,YW=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},WL=(e,n)=>{const o=e==null?void 0:e.parentNode;return Fe(o)&&o.nodeName===n},ZL=e=>Fe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Dy=e=>Fe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),XW=e=>ZL(e)&&ZL(e.parentNode),OT=e=>{const n=e.parentNode;return Dy(n)?n:e},Ry=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ut(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},DT=e=>Fo(La(ai(be.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),JW=(e,n,o,r,i)=>{const u=e.dom,m=e.selection.getRng(),y=o.parentNode;if(o===e.getBody()||!y)return;XW(o)&&(i="LI");const x=Dy(r)?DT(r):void 0;let A=Dy(r)&&x?n(i,{style:DT(r)}):n(i);if(Ry(o,r,!0)&&Ry(o,r,!1))if(WL(o,"LI")){const L=OT(o);u.insertAfter(A,L),YW(o)?u.remove(L):u.remove(o)}else u.replace(A,o);else if(Ry(o,r,!0))WL(o,"LI")?(u.insertAfter(A,OT(o)),A.appendChild(u.doc.createTextNode(" ")),A.appendChild(o)):y.insertBefore(A,o),u.remove(r);else if(Ry(o,r,!1))u.insertAfter(A,OT(o)),u.remove(r);else{o=OT(o);const L=m.cloneRange();L.setStartAfter(r),L.setEndAfter(o);const $=L.extractContents();if(i==="LI"&&KW($,"LI")){const z=Kt(dt(A.children,be.fromDom),yt(bu("br")));A=$.firstChild,u.insertAfter($,o),xe(z,X=>Xd(be.fromDom(A),X)),x&&A.setAttribute("style",x)}else u.insertAfter($,o),u.insertAfter(A,o);u.remove(r)}Oy(e,A)},nX=e=>{xe(Ih(be.fromDom(e),oa),n=>{const o=n.dom;o.nodeValue=xc(o.data)})},oX=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},sX=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),yR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,QW=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,jL=(e,n)=>Fe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",eZ=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Ut(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let m=i.length;for(;m--;)u=i[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||sX(e,u))&&e.remove(u)},Id=(e,n,o)=>bt(n)?e?o===1&&n.data.charAt(o-1)===Oa?0:o:o===n.data.length-1&&n.data.charAt(o)===Oa?n.data.length:o:o,tZ=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Id(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Id(!1,e.endContainer,e.endOffset)),n},qL=e=>{let n=e;do bt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},nZ=(e,n,o,r,i)=>{var u,m;const y=e.dom,x=(u=UC(y,r))!==null&&u!==void 0?u:y.getRoot();let A=y.getParent(r,y.isBlock);if(!A||!jL(y,A)){if(A=A||x,!A.hasChildNodes()){const X=y.create(n);return WC(e,X),A.appendChild(X),o.setStart(X,0),o.setEnd(X,0),X}let L=r;for(;L&&L.parentNode!==A;)L=L.parentNode;let $;for(;L&&!y.isBlock(L);)$=L,L=L.previousSibling;const z=(m=$==null?void 0:$.parentElement)===null||m===void 0?void 0:m.nodeName;if($&&z&&e.schema.isValidChild(z,n.toLowerCase())){const X=$.parentNode,oe=y.create(n);for(WC(e,oe),X.insertBefore(oe,$),L=$;L&&!y.isBlock(L);){const te=L.nextSibling;oe.appendChild(L),L=te}o.setStart(r,i),o.setEnd(r,i)}}return r},oZ=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ut(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},sZ=(e,n)=>{const o=yx(e);return en(n)?!1:de(o)?et(ut.explode(o),n.nodeName.toLowerCase()):o},GL={insert:(e,n)=>{let o,r,i,u,m=!1;const y=e.dom,x=e.schema,A=x.getNonEmptyElements(),L=e.selection.getRng(),$=Va(e),z=be.fromDom(L.startContainer),X=Cu(z,L.startOffset),oe=X.exists(mt=>Pm(mt)&&!yl(mt)),te=L.collapsed&&oe,ie=(mt,sn)=>ZW(e,o,Ot,ct,B2(e),mt,sn),_e=mt=>{const sn=Id(mt,o,r);if(bt(o)&&(mt?sn>0:sn<o.data.length))return!1;if((o.parentNode===Ot||o===Ot)&&m&&!mt||mt&&Ut(o)&&o===Ot.firstChild)return!0;if(yR(o,"TABLE")||yR(o,"HR"))return QW(o,"BR")?!mt:m&&!mt||!m&&mt;const _n=new $a(o,Ot);bt(o)&&(mt&&sn===0?_n.prev():!mt&&sn===o.data.length&&_n.next());let Zn;for(;Zn=_n.current();){if(Ut(Zn)){if(!Zn.getAttribute("data-mce-bogus")){const ho=Zn.nodeName.toLowerCase();if(A[ho]&&ho!=="br")return!1}}else if(bt(Zn)&&!Jc(Zn.data))return!1;mt?_n.prev():_n.next()}return!0},Re=()=>{let mt;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Qt!=="HGROUP"?mt=ie($):mt=ie(),sZ(e,u)&&jL(y,u)&&y.isEmpty(Ot,void 0,{includeZwsp:!0})?mt=y.split(u,Ot):y.insertAfter(mt,Ot),Oy(e,mt),mt};Dw(y,L).each(mt=>{L.setStart(mt.startContainer,mt.startOffset),L.setEnd(mt.endContainer,mt.endOffset)}),o=L.startContainer,r=L.startOffset;const Me=!!(n&&n.shiftKey),Ie=!!(n&&n.ctrlKey);Ut(o)&&o.hasChildNodes()&&!te&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&bt(o)?r=o.data.length:r=0);const ct=UC(y,o);if(!ct||oX(e,o))return;Me||(o=nZ(e,$,L,o,r));let Ot=y.getParent(o,y.isBlock)||y.getRoot();u=Fe(Ot==null?void 0:Ot.parentNode)?y.getParent(Ot.parentNode,y.isBlock):null,i=Ot?Ot.nodeName.toUpperCase():"";const Qt=u?u.nodeName.toUpperCase():"";if(Qt==="LI"&&!Ie){const mt=u;Ot=mt,u=mt.parentNode,i=Qt}if(Ut(u)&&qW(e,Me,Ot))return GW(e,ie,Ot);if(/^(LI|DT|DD)$/.test(i)&&Ut(u)&&y.isEmpty(Ot)){JW(e,ie,u,Ot,$);return}if(!te&&(Ot===e.getBody()||!jL(y,Ot)))return;const tt=Ot.parentNode;let Ze;if(te)Ze=ie($),X.fold(()=>{Js(z,be.fromDom(Ze))},mt=>{Ei(mt,be.fromDom(Ze))}),e.selection.setCursorLocation(Ze,0);else if(om(Ot))Ze=bp(Ot),y.isEmpty(Ot)&&AT(Ot),WC(e,Ze),Oy(e,Ze);else if(_e(!1))Ze=Re();else if(_e(!0)&&tt){const mt=Qe.fromRangeStart(L),sn=B3(mt),_n=be.fromDom(Ot),ho=PE(_n,mt,e.schema)?uN(_n,mt,e.schema).bind(Cs=>W.from(Cs.getNode())):W.none();Ze=tt.insertBefore(ie(),Ot);const cs=yR(Ot,"HR")||sn?Ze:ho.getOr(Ot);Oy(e,cs)}else{const mt=tZ(L).cloneRange();mt.setEndAfter(Ot);const sn=mt.extractContents();nX(sn),qL(sn),Ze=sn.firstChild,y.insertAfter(sn,Ot),eZ(y,A,Ze),oZ(y,Ot),y.isEmpty(Ot)&&AT(Ot),Ze.normalize(),y.isEmpty(Ze)?(y.remove(Ze),Re()):(WC(e,Ze),Oy(e,Ze))}y.setAttrib(Ze,"id",""),e.dispatch("NewBlock",{newBlock:Ze})},fakeEventName:"insertParagraph"},rZ=(e,n,o)=>{const r=new $a(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||bt(i)&&i.length>0)return!0;return!1},RT=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),qv(e,r)},KL=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,m=!1;Dw(r,i).each(X=>{i.setStart(X.startContainer,X.startOffset),i.setEnd(X.endContainer,X.endOffset)});let y=i.startOffset,x=i.startContainer;if(Ut(x)&&x.hasChildNodes()){const X=y>x.childNodes.length-1;x=x.childNodes[Math.min(y,x.childNodes.length-1)]||x,X&&bt(x)?y=x.data.length:y=0}let A=r.getParent(x,r.isBlock);const L=A&&A.parentNode?r.getParent(A.parentNode,r.isBlock):null,$=L?L.nodeName.toUpperCase():"",z=!!(n&&n.ctrlKey);$==="LI"&&!z&&(A=L),bt(x)&&y>=x.data.length&&(rZ(e.schema,x,A||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),m=!0)),u=r.create("br"),K1(r,i,u),RT(e,u,m),e.undoManager.add()},MT=(e,n)=>{const o=be.fromTag("br");Ei(be.fromDom(n),o),e.undoManager.add()},aZ=(e,n)=>{cZ(e.getBody(),n)||yc(be.fromDom(n),be.fromTag("br"));const o=be.fromTag("br");yc(be.fromDom(n),o),RT(e,o.dom,!1),e.undoManager.add()},iZ=e=>jo(e.getNode()),cZ=(e,n)=>iZ(Qe.after(n))?!0:sc(e,Qe.after(n)).map(o=>jo(o.getNode())).getOr(!1),YL=e=>e&&e.nodeName==="A"&&"href"in e,lZ=e=>e.fold($e,YL,YL,$e),XL=e=>{const n=Ae(Kp,e),o=Qe.fromRangeStart(e.selection.getRng());return bh(n,e.getBody(),o).filter(lZ)},uZ=(e,n)=>{n.fold(it,Ae(MT,e),Ae(aZ,e),it)},JL={insert:(e,n)=>{const o=XL(e);o.isSome()?o.each(Ae(uZ,e)):KL(e,n)},fakeEventName:"insertLineBreak"},QL=(e,n)=>vR(e).filter(o=>n.length>0&&xi(be.fromDom(o),n)).isSome(),wR=e=>QL(e,tc(e)),mZ=e=>QL(e,I2(e)),Vu=nu.generate([{br:[]},{block:[]},{none:[]}]),NT=(e,n)=>mZ(e),e8=e=>(n,o)=>UW(n)===e,PT=(e,n)=>(o,r)=>UL(o)===e.toUpperCase()===n,CR=e=>{const n=UC(e.dom,e.selection.getStart());return en(n)},My=e=>PT("pre",e),hZ=()=>PT("summary",!0),SR=e=>(n,o)=>$c(n)===e,m1=(e,n)=>wR(e),IT=(e,n)=>n,gZ=e=>{const n=Va(e),o=UC(e.dom,e.selection.getStart());return Fe(o)&&e.schema.isValidChild(o.nodeName,n)},pZ=e=>{const n=e.selection.getRng(),o=be.fromDom(n.startContainer),i=Cu(o,n.startOffset).map(u=>Pm(u)&&!yl(u));return n.collapsed&&i.getOr(!0)},Nl=(e,n)=>(o,r)=>Fo(e,(u,m)=>u&&m(o,r),!0)?W.some(n):W.none(),t8=(e,n)=>L6([Nl([NT],Vu.none()),Nl([My(!0),CR],Vu.none()),Nl([hZ()],Vu.br()),Nl([My(!0),SR(!1),IT],Vu.br()),Nl([My(!0),SR(!1)],Vu.block()),Nl([My(!0),SR(!0),IT],Vu.block()),Nl([My(!0),SR(!0)],Vu.br()),Nl([e8(!0),IT],Vu.br()),Nl([e8(!0)],Vu.block()),Nl([m1],Vu.br()),Nl([IT],Vu.br()),Nl([gZ],Vu.block()),Nl([pZ],Vu.block())],[e,!!(n&&n.shiftKey)]).getOr(Vu.none()),ZC=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||EH(n),!(Fe(o)&&kT(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Fe(o)&&VC(n,e.fakeEventName)))},n8=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>ZC(JL,e,n),r=()=>ZC(GL,e,n),i=t8(e,n);switch(cm(e)){case"linebreak":i.fold(o,o,it);break;case"block":i.fold(r,r,it);break;case"invert":i.fold(r,o,it);break;default:i.fold(o,r,it);break}},xR=Y(),bZ=xR.os.isiOS()&&xR.browser.isSafari(),o8=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),pI(e.undoManager),e.undoManager.transact(()=>{n8(e,n)}))},vZ=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(bt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},ER=e=>{let n=W.none();const o=i=>{n=W.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(it,m=>i.selection.moveToBookmark(m)),o8(i,u),n=W.none()};e.on("keydown",i=>{i.keyCode===Ht.ENTER&&(bZ&&vZ(e.selection.getRng())?o(e):o8(e,i))}),e.on("keyup",i=>{i.keyCode===Ht.ENTER&&n.each(()=>r(e,i))})},_R=(e,n,o)=>{const r=Nn.os.isMacOS()||Nn.os.isiOS();lT([{keyCode:Ht.END,action:qn(cT,e,!0)},{keyCode:Ht.HOME,action:qn(cT,e,!1)},...r?[]:[{keyCode:Ht.HOME,action:qn(BC,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ht.END,action:qn(BC,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ht.END,action:qn(BB,e,!0)},{keyCode:Ht.HOME,action:qn(BB,e,!1)},{keyCode:Ht.END,action:qn(tT,e,!0,n)},{keyCode:Ht.HOME,action:qn(tT,e,!1,n)}],o).each(i=>{o.preventDefault()})},yZ=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||_R(e,n,o)})},TR=e=>{e.on("input",n=>{n.isComposing||lH(e)})},s8=Y(),BT=(e,n,o)=>{lT([{keyCode:Ht.PAGE_UP,action:qn(tT,e,!1,n)},{keyCode:Ht.PAGE_DOWN,action:qn(tT,e,!0,n)}],o)},kR=e=>e.stopImmediatePropagation(),AR=e=>e.keyCode===Ht.PAGE_UP||e.keyCode===Ht.PAGE_DOWN,r8=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",kR,!0):!o&&e.get()&&n.off("NodeChange",kR),e.set(o)},wZ=(e,n)=>{if(s8.os.isMacOS())return;const o=Zs(!1);e.on("keydown",r=>{AR(r)&&r8(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||BT(e,n,r),AR(r)&&o.get()&&(r8(o,e,!1),e.nodeChanged())})},LT=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||_t(n.getTargetRanges(),o=>!RM(e.dom,o)))&&n.preventDefault()})},OR=(e,n)=>{const o=n.container(),r=n.offset();return bt(o)?(o.insertData(r,e),W.some(Qe(o,r+e.length))):Pp(n).map(i=>{const u=be.fromText(e);return n.isAtEnd()?yc(i,u):Ei(i,u),Qe(u.dom,e.length)})},a8=Ae(OR,Zr),i8=Ae(OR," "),c8=(e,n,o)=>$3(e,n,o)?a8(n):i8(n),CZ=e=>n=>n.fold(o=>di(e.dom,Qe.before(o)),o=>Ui(o),o=>Mu(o),o=>sc(e.dom,Qe.after(o))),SZ=(e,n,o)=>r=>$3(e,r,o)?a8(n):i8(n),l8=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},xZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),EZ=e=>{const n=Qe.fromRangeStart(e.selection.getRng()),o=be.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ae(Kp,e),i=Qe.fromRangeStart(e.selection.getRng());return bh(r,e.getBody(),i).bind(CZ(o)).map(u=>()=>SZ(o,n,e.schema)(u).each(l8(e)))}else return W.none()},u8=e=>{const n=()=>{const o=be.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Qe.fromRangeStart(e.selection.getRng());c8(o,r,e.schema).each(l8(e))};return yi(Nn.browser.isFirefox()&&e.selection.isEditable()&&xZ(e.dom,e.selection.getRng().startContainer),n)},_Z=(e,n)=>{PB([{keyCode:Ht.SPACEBAR,action:qn(EZ,e)},{keyCode:Ht.SPACEBAR,action:qn(u8,e)}],n).each(o=>{n.preventDefault(),kT(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),VC(e,"insertText",{data:" "}))})},d8=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||_Z(e,n)})},TZ=e=>aM(e)?[{keyCode:Ht.TAB,action:qn(YB,e,!0)},{keyCode:Ht.TAB,shiftKey:!0,action:qn(YB,e,!1)}]:[],kZ=(e,n)=>{lT([...TZ(e)],n).each(o=>{n.preventDefault()})},AZ=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||kZ(e,n)})},OZ=e=>{if(e.addShortcut("Meta+P","","mcePrint"),QY(e),Rd(e))return Zs(null);{const n=KV(e);return LT(e),wU(e),hT(e,n),tX(e,n),ER(e),d8(e),TR(e),AZ(e),yZ(e,n),wZ(e,n),n}};class DZ{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!T3(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{Ab(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Bv(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Bv(n)&&(n.selection.getNode().nodeName==="IMG"?vn.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let i;if(o.initialized&&r&&!Sp(o)&&!rb(o)){const u=o.getBody();i=r.getStart(!0)||u,(i.ownerDocument!==o.getDoc()||!o.dom.isChildOf(i,u))&&(i=u);const m=[];o.dom.getParent(i,y=>y===u?!0:(m.push(y),!1)),o.dispatch("NodeChange",{...n,element:i,parents:m})}}isSameElementPath(n){let o;const r=this.editor,i=xs(r.dom.getParents(n,gt,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const t0=L0("image"),RZ=e=>{const n=e;return W.from(n[t0])},MZ=(e,n)=>{const o=e;o[t0]=n},FT=L0("event"),NZ=e=>{const n=e;return W.from(n[FT])},$T=e=>n=>{const o=n;o[FT]=e},PZ=(e,n)=>$T(n)(e),DR=$T(0),IZ=$T(2),BZ=$T(1),HT=(e=>n=>{const o=n;return W.from(o[FT]).exists(r=>r===e)})(0),LZ=()=>Object.freeze({length:0,item:e=>null}),RR=L0("mode"),FZ=e=>{const n=e;return W.from(n[RR])},zT=e=>n=>{const o=n;o[RR]=e},f8=(e,n)=>zT(n)(e),m8=zT(0),MR=zT(2),$Z=zT(1),h8=e=>n=>{const o=n;return W.from(o[RR]).exists(r=>r===e)},Ny=h8(0),g8=h8(1),HZ=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Ny(e))if(de(o)){if(!In(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Ny(e)&&n.remove(o)},clear:()=>{Ny(e)&&n.clear()}}),zZ=["none","copy","link","move"],Ks=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],NR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){et(zZ,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){HT(r)&&et(Ks,i)&&(o=i)},get items(){return HZ(r,e.items)},get files(){return g8(r)?LZ():e.files},get types(){return e.types},setDragImage:(i,u,m)=>{Ny(r)&&(MZ(r,{image:i,x:u,y:m}),e.setDragImage(i,u,m))},getData:i=>g8(r)?"":e.getData(i),setData:(i,u)=>{Ny(r)&&e.setData(i,u)},clearData:i=>{Ny(r)&&e.clearData(i)}};return m8(r),r},p8=e=>{const n=NR(),o=FZ(e);return MR(e),DR(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,RZ(e).each(r=>n.setDragImage(r.image,r.x,r.y)),xe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),xe(e.files,r=>n.items.add(r)),NZ(e).each(r=>{PZ(n,r)}),o.each(r=>{f8(e,r),f8(n,r)}),n},VZ=e=>{const n=e.getData("text/html");return n===""?W.none():W.some(n)},VT=(e,n)=>e.setData("text/html",n),PR="x-tinymce/html",UT=wt(PR),IR="<!-- "+PR+" -->",UZ=e=>IR+e,b8=e=>e.replace(IR,""),jC=e=>e.indexOf(IR)!==-1,WZ=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),ZZ=(e,n)=>{let o="<"+e;const r=La(n,(i,u)=>u+'="'+Zh.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},BR=(e,n,o)=>{const r=e.split(/\n\n/),i=ZZ(n,o),u="</"+n+">",m=dt(r,x=>x.split(/\n/).join("<br />")),y=x=>i+x+u;return m.length===1?m[0]:dt(m,y).join("")},v8="%MCEPASTEBIN%",jZ=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},v8);Nn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},qZ=(e,n)=>{const o=e.dom;if(LR(e)){let r;const i=n.get();for(;r=LR(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},LR=e=>e.dom.get("mcepastebin"),y8=e=>Fe(e)&&e.id==="mcepastebin",GZ=e=>{const n=e.dom,o=(m,y)=>{m.appendChild(y),n.remove(y,!0)},[r,...i]=Kt(e.getBody().childNodes,y8);xe(i,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const y=n.create("div");r.insertBefore(y,u[m]),o(y,u[m])}return r?r.innerHTML:""},w8=e=>e===v8,Py=e=>{const n=Zs(null);return{create:()=>jZ(e,n),remove:()=>qZ(e,n),getEl:()=>LR(e),getHtml:()=>GZ(e),getLastRng:n.get}},C8=(e,n)=>(ut.each(n,o=>{xt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),Iy=e=>{const n=ms(),o=hy({},n);let r="";const i=n.getVoidElements(),u=ut.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),y=x=>{const A=x.name,L=x;if(A==="br"){r+=`
`;return}if(A!=="wbr"){if(i[A]&&(r+=" "),u[A]){r+=" ";return}if(x.type===3&&(r+=x.value),!(x.name in n.getVoidElements())){let $=x.firstChild;if($)do y($);while($=$.next)}m[A]&&L.next&&(r+=`
`,A==="p"&&(r+=`
`))}};return e=C8(e,[/<!\[[^\]]+\]>/g]),y(o.parse(e)),r},By=e=>(e=C8(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":Zr],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),KZ=e=>{let n=0;return()=>e+n++},YZ=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ut.hasOwn(o,n)?"image/"+o[n]:"image/"+n},Ly=(e,n)=>{const o=hy({sanitize:cg(e),sandbox_iframes:Fx(e),sandbox_iframes_exclusions:ew(e),convert_unsafe_embeds:$x(e)},e.schema);o.addNodeFilter("meta",i=>{ut.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Zp({validate:!0},e.schema).serialize(r)},S8=(e,n)=>({content:e,cancelled:n}),FR=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=Da(e,r,o);return S8(i.node.innerHTML,i.isDefaultPrevented())},XZ=(e,n,o)=>{const r=Ca(e,n,o),i=Ly(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?FR(e,i,o):S8(i,r.isDefaultPrevented())},x8=(e,n,o)=>XZ(e,n,o),WT=(e,n)=>(e.insertContent(n,{merge:Nx(e),paste:!0}),!0),qC=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),E8=(e,n)=>qC(n)&&_t(z4(e),o=>Wr(n.toLowerCase(),`.${o.toLowerCase()}`)),JZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),QZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),_8=(e,n,o)=>!e.selection.isCollapsed()&&qC(n)?QZ(e,n,o):!1,ej=(e,n,o)=>E8(e,n)?JZ(e,n,o):!1,T8=(e,n)=>{ut.each([_8,ej,WT],o=>!o(e,n,WT))},$R=(e,n,o)=>{o||!Px(e)?WT(e,n):T8(e,n)},k8=KZ("mceclip"),tj=e=>{const n=NR();return VT(n,e),MR(n),n},A8=(e,n,o,r,i)=>{const u=x8(e,n,o);if(!u.cancelled){const m=u.content,y=()=>$R(e,m,r);i?kT(e,"insertFromPaste",{dataTransfer:tj(m)}).isDefaultPrevented()||(y(),VC(e,"insertFromPaste")):y()}},ZT=(e,n,o,r)=>{const i=o||jC(n);A8(e,b8(n),i,!1,r)},jT=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=Sl(r,sM(e)),u=BR(i,Va(e),hf(e));A8(e,u,!1,!0,o)},qT=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},h1=(e,n)=>n in e&&e[n].length>0,HR=e=>h1(e,"text/html")||h1(e,"text/plain"),O8=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Fe(o)?e.dom.encode(o[1]):void 0},nj=(e,n,o,r)=>{const i=k8(),u=cv(e)&&Fe(o.name),m=u?O8(e,o.name):i,y=u?o.name:void 0,x=n.create(i,o,r,m,y);return n.add(x),x},D8=(e,n)=>{HA(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),m=n.file,y=e.editorUpload.blobCache,x=y.getByData(u,r),A=x??nj(e,y,m,u);ZT(e,`<img src="${A.blobUri()}">`,!1,!0)})},oj=e=>e.type==="paste",sj=e=>Promise.all(dt(e,n=>s1(n).then(o=>({file:n,uri:o})))),rj=e=>{const n=z4(e);return o=>us(o.type,"image/")&&_t(n,r=>YZ(r)===o.type)},aj=(e,n)=>{const o=n.items?_s(Dr(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Dr(n.files):[];return Kt(o.length>0?o:r,rj(e))},R8=(e,n,o)=>{const r=oj(n)?n.clipboardData:n.dataTransfer;if(xp(e)&&r){const i=aj(e,r);if(i.length>0)return n.preventDefault(),sj(i).then(u=>{o&&e.selection.setRng(o),xe(u,m=>{D8(e,m)})}),!0}return!1},GT=e=>{var n,o;return Nn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},ij=e=>Ht.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,KT=(e,n,o,r,i)=>{let u=By(o);const m=h1(n,UT())||jC(o),y=!m&&WZ(u),x=qC(u);(w8(u)||!u.length||y&&!x)&&(r=!0),(r||x)&&(h1(n,"text/plain")&&y?u=n["text/plain"]:u=Iy(u)),!w8(u)&&(r?jT(e,u,i):ZT(e,u,m,i))},cj=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{ij(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||GT(u))return;const m=o.get()==="text"||r;r=!1;const y=qT(u.clipboardData);!HR(y)&&R8(e,u,i())||(h1(y,"text/html")?(u.preventDefault(),KT(e,y,y["text/html"],m,!0)):h1(y,"text/plain")&&h1(y,"text/uri-list")?(u.preventDefault(),KT(e,y,y["text/plain"],m,!0)):(n.create(),vn.setEditorTimeout(e,()=>{const x=n.getHtml();n.remove(),KT(e,y,x,m,!1)},0)))})},lj=e=>{const n=i=>us(i,"webkit-fake-url"),o=i=>us(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,m)=>{if(!xp(e)&&r(m))for(const y of i){const x=y.attr("src");de(x)&&!y.attr("data-mce-object")&&x!==Nn.transparentSrc&&(n(x)||!Ep(e)&&o(x))&&y.remove()}})},M8=(e,n,o)=>{cj(e,n,o),lj(e)},N8=(e,n)=>{n.get()==="text"?(n.set("html"),ps(e,!1)):(n.set("text"),ps(e,!0)),e.focus()},uj=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{N8(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ZT(e,r.html,r.internal,!1),r.text&&jT(e,r.text,!1)})},dj=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(UT(),n),!0}catch{return!1}else return!1},P8=(e,n,o,r)=>{dj(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},I8=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const y=i.getRng();m.focus();const x=r.createRng();x.selectNodeContents(m),i.setRng(x),vn.setEditorTimeout(e,()=>{i.setRng(y),r.remove(u),o()},0)},B8=e=>({html:UZ(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),L8=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),F8=e=>!e.selection.isCollapsed()||L8(e),fj=e=>n=>{!n.isDefaultPrevented()&&F8(e)&&e.selection.isEditable()&&P8(n,B8(e),I8(e),()=>{if(Nn.browser.isChromium()||Nn.browser.isFirefox()){const o=e.selection.getRng();vn.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},mj=e=>n=>{!n.isDefaultPrevented()&&F8(e)&&P8(n,B8(e),I8(e),it)},hj=e=>{e.on("cut",fj(e)),e.on("copy",mj(e))},$8=(e,n)=>{var o,r;return Wp.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},gj=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},H8=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},pj=e=>_t(e.files,n=>/^image\//.test(n.type)),z8=(e,n,o,r)=>{const i=e.getParent(o,m=>Yl(n,m));if(!re(e.getParent(o,"summary")))return!0;if(i&&En(r,"text/html")){const m=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!re(m.querySelector(i.nodeName.toLowerCase()))}else return!1},V8=e=>{e.on("input",n=>{const o=r=>re(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Kt(e.dom.select("details"),o);xe(r,i=>{jo(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Cd().dom),i.prepend(u)})}})},bj=(e,n)=>{Rx(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),xp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&pj(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=$8(e,o);if(en(r))return;const i=qT(o.dataTransfer),u=h1(i,UT());if((!HR(i)||gj(i))&&R8(e,o,r))return;const m=i[UT()],y=m||i["text/html"]||i["text/plain"],x=z8(e.dom,e.schema,r.startContainer,i),A=n.get();A&&!x||y&&(o.preventDefault(),vn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(m||A&&x)&&e.execCommand("Delete"),H8(e,r);const L=By(y);i["text/html"]?ZT(e,L,u,!0):jT(e,L,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{xp(e)&&!n.get()&&(o.preventDefault(),H8(e,$8(e,o))),o.type==="dragend"&&n.set(!1)}),V8(e)},vj=e=>{const n=i=>u=>{i(e,u)},o=Mx(e);ve(o)&&e.on("PastePreProcess",n(o));const r=L4(e);ve(r)&&e.on("PastePostProcess",n(r))},yj=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},wj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,U8=e=>ut.trim(e).replace(wj,$1).toLowerCase(),Cj=(e,n,o)=>{const r=K2(e);if(o||r==="all"||!F4(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(y,x,A,L)=>{const $=u.parseStyle(u.decode(A)),z={};for(let oe=0;oe<i.length;oe++){const te=$[i[oe]];let ie=te,_e=u.getStyle(m,i[oe],!0);/color/.test(i[oe])&&(ie=U8(ie),_e=U8(_e)),_e!==ie&&(z[i[oe]]=te)}const X=u.serializeStyle(z,"span");return X?x+' style="'+X+'"'+L:x+L})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,y,x)=>m+' style="'+y+'"'+x),n},Sj=e=>{(Nn.browser.isChromium()||Nn.browser.isSafari())&&yj(e,Cj)},YT=e=>{const n=Zs(!1),o=Zs(Y2(e)?"text":"html"),r=Py(e);Sj(e),uj(e,o),vj(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{hj(e),bj(e,n),M8(e,r,o)})},W8=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},xj=e=>{e.parser.addNodeFilter("details",n=>{const o=sb(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Q2(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},Z8=e=>{W8(e),xj(e)},j8=jo,XT=bt,Ej=e=>qo(e.dom),q8=e=>st(e.dom),G8=e=>n=>No(be.fromDom(e),n),K8=(e,n,o)=>fr(be.fromDom(e),r=>q8(r)||o.isBlock(no(r)),G8(n)).getOr(be.fromDom(n)).dom,Y8=(e,n)=>fr(be.fromDom(e),Ej,G8(n)),zR=(e,n,o)=>{const r=new $a(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:i();m&&!j8(m);m=i())Au(m)&&(u=m);return u},_j=(e,n,o)=>{const i=Qe.fromRangeStart(e).getNode(),u=K8(i,n,o),m=zR(i,u,!1),y=zR(i,u,!0),x=document.createRange();return Y8(m,u).fold(()=>{XT(m)?x.setStart(m,0):x.setStartBefore(m)},A=>x.setStartBefore(A.dom)),Y8(y,u).fold(()=>{XT(y)?x.setEnd(y,y.data.length):x.setEndAfter(y)},A=>x.setEndAfter(A.dom)),x},Tj=e=>{const n=_j(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(JE(n))},kj=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Tj(e))})};var wh;(function(e){e.Before="before",e.After="after"})(wh||(wh={}));const Aj=(e,n)=>Math.abs(e.left-n),Oj=(e,n)=>Math.abs(e.right-n),X8=(e,n)=>e>=n.top&&e<=n.bottom,Dj=(e,n)=>e.top<n.bottom&&e.bottom>n.top,Rj=(e,n)=>{const o=tu(e,n)/Math.min(e.height,n.height);return Dj(e,n)&&o>.5},Mj=(e,n)=>{const o=Kt(e,r=>X8(n,r));return o4(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=Do(e,m=>Rj(m,r));return[i,u]})},Nj=(e,n)=>({node:e.node,position:Aj(e,n)<Oj(e,n)?wh.Before:wh.After}),Pj=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),Fy=(e,n,o,r)=>{const i=$=>Au($.node)?W.some($):Ut($.node)?Fy(Dr($.node.childNodes),n,o,!1):W.none(),u=($,z,X)=>i(z).filter(oe=>Math.abs(X($,n,o)-X(oe,n,o))<2&&bt(oe.node)),m=($,z)=>{const X=Ko($,(oe,te)=>z(oe,n,o)-z(te,n,o));return Pi(X,i).map(oe=>r&&!bt(oe.node)&&X.length>1?u(oe,X[1],z).getOr(oe):oe)},[y,x]=Mj(Kb(e),o),{pass:A,fail:L}=Do(x,$=>$.top<o);return m(y,Pj).orThunk(()=>m(L,tg)).orThunk(()=>m(A,tg))},J8=(e,n,o,r)=>{const i=(u,m)=>{const y=A=>Ut(A)&&A.classList.contains("mce-drag-container"),x=Kt(u.dom.childNodes,yt(y));return m.fold(()=>Fy(x,o,r,!0),A=>{const L=Kt(x,$=>$!==A.dom);return Fy(L,o,r,!0)}).orThunk(()=>(No(u,e)?W.none():Fm(u)).bind(L=>i(L,W.some(u))))};return i(n,W.none())},Q8=(e,n,o)=>{const r=be.fromDom(e),i=jl(r),m=be.fromPoint(i,n,o).filter(y=>dr(r,y)).getOr(r);return J8(r,m,n,o)},eF=(e,n,o)=>Q8(e,n,o).filter(r=>lb(r.node)).map(r=>Nj(r,n)),tF=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,m=i.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},Ij=e=>e.inline?tF(e.getBody()):{left:0,top:0},iX=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Bj=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},nF=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=tF(e.getContentAreaContainer()),r=Bj(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},VR=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),JT=(e,n)=>VR(Ij(e),iX(e),nF(e,n)),oF=e=>({target:e,srcElement:e}),Lj=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...oF(o)}),sF=(e,n,o)=>{const r=Mn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:it,stopImmediatePropagation:it,stopPropagation:it,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...oF(n)}},Fj=(e,n)=>{const o=p8(e);return n==="dragstart"?(DR(o),m8(o)):n==="drop"?(IZ(o),MR(o)):(BZ(o),$Z(o)),o},UR=(e,n,o,r)=>{const i=Fj(o,e);return In(r)?sF(e,n,i):Lj(e,r,n,i)},WR=32,$j=100,QT=8,GC=16,rF=qo,cX=s4(rF,st),Hj=(e,n,o)=>rF(o)&&o!==n&&e.isEditable(o.parentElement),zj=(e,n,o)=>en(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Vj=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const m=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},aF=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},ek=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},tk=ek("left",-32),ZR=ek("left",WR),jR=ek("top",-32),nk=ek("top",WR),qR=(e,n,o,r,i,u,m,y,x,A,L,$)=>{let z=0,X=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(z=n.pageX+o-i),n.pageY+r>u&&(X=n.pageY+r-u),e.style.width=o-z+"px",e.style.height=r-X+"px";const oe=x.clientHeight,te=x.clientWidth,ie=m+x.getBoundingClientRect().top,_e=y+x.getBoundingClientRect().left;L.on(Re=>{Re.intervalId.clear(),Re.dragging&&$&&(m+QT>=oe?Re.intervalId.set(nk(A)):m-QT<=0?Re.intervalId.set(jR(A)):y+QT>=te?Re.intervalId.set(ZR(A)):y-QT<=0?Re.intervalId.set(tk(A)):ie+GC>=window.innerHeight?Re.intervalId.set(nk(window)):ie-GC<=0?Re.intervalId.set(jR(window)):_e+GC>=window.innerWidth?Re.intervalId.set(ZR(window)):_e-GC<=0&&Re.intervalId.set(tk(window)))})},ok=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Uj=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);ok(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&lf(be.fromDom(o))},Pg=e=>e.button===0,iF=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Wj=(e,n)=>o=>{if(Pg(o)){const r=Vo(n.dom.getParents(o.target),cX).getOr(null);if(Fe(r)&&Hj(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:NR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Vj(n,r,r.offsetWidth,r.offsetHeight),intervalId:Ls($j)})}}},Zj=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),eF(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===wh.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},KC=(e,n,o,r,i)=>{n==="dragstart"&&VT(r,e.dom.getOuterHTML(o));const u=UR(n,o,r,i);return e.dispatch(n,u)},jj=(e,n)=>{const o=lp((i,u)=>Zj(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const m=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&m>10){const y=KC(n,"dragstart",u.element,u.dataTransfer,i);if(Fe(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const y=i.currentTarget===n.getDoc().documentElement,x=iF(u,JT(n,i));aF(u.ghost,n.getBody()),qR(u.ghost,x,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,y),o.throttle(i.clientX,i.clientY)}})},cF=e=>{const n=e.getSel();if(Fe(n)){const r=n.getRangeAt(0).startContainer;return bt(r)?r.parentNode:r}else return null},qj=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(zj(n,cF(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();KC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{Uj(n.dom,r.element),VZ(r.dataTransfer).each(y=>n.insertContent(y)),n._selectionOverrides.hideFakeCaret()})}KC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),lF(e)},GR=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>KC(n,"dragend",r.element,r.dataTransfer),i=>KC(n,"dragend",r.element,r.dataTransfer,i))}),lF(e)},Gj=(e,n)=>o=>GR(e,n,W.some(o)),lF=e=>{e.on(n=>{n.intervalId.clear(),ok(n.ghost)}),e.clear()},KR=e=>{const n=li(),o=$s.DOM,r=document,i=Wj(n,e),u=jj(n,e),m=qj(n,e),y=Gj(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",y),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",y)}),e.on("keydown",x=>{x.keyCode===Ht.ESC&&GR(n,e,W.none())})},uF=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(et(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&hC(e,"Dropped file type is not supported"))}},o=i=>{we(e,i.target)&&n(i)},r=()=>{const i=$s.DOM,u=e.dom,m=document,y=e.inline?e.getBody():e.getDoc(),x=["drop","dragover"];xe(x,A=>{i.bind(m,A,o),u.bind(y,A,n)}),e.on("remove",()=>{xe(x,A=>{i.unbind(m,A,o),u.unbind(y,A,n)})})};e.on("init",()=>{vn.setEditorTimeout(e,r,0)})},lX=e=>{KR(e),pv(e)&&uF(e)},Kj=e=>{const n=lp(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=qO(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},dF=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(ka(o)){const r=Cf(e.getBody(),o),i=qo(r)?r:o;e.selection.getNode()!==i&&EC(e,i).each(u=>e.selection.setRng(u))}})})},YC=qo,sk=(e,n)=>Cf(e.getBody(),n),Yj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=Z4(e,r,o.isBlock,()=>gr(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let y;const x=Qt=>Fe(Qt)&&o.hasClass(Qt,"mce-offscreen-selection"),A=Qt=>Qt!==r&&(YC(Qt)||ka(Qt))&&o.isChildOf(Qt,r)&&o.isEditable(Qt.parentNode),L=Qt=>{Qt&&n.setRng(Qt)},$=(Qt,tt,Ze,mt=!0)=>e.dispatch("ShowCaret",{target:tt,direction:Qt,before:Ze}).isDefaultPrevented()?null:(mt&&n.scrollIntoView(tt,Qt===-1),i.show(Ze,tt)),z=Qt=>{Qt.hasAttribute("data-mce-caret")&&(bp(Qt),n.scrollIntoView(Qt))},X=()=>{e.on("click",tt=>{o.isEditable(tt.target)||(tt.preventDefault(),e.focus())}),e.on("blur NewBlock",Ie),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",tt=>{const Ze=tt.target,mt=sk(e,Ze);YC(mt)?(tt.preventDefault(),EC(e,mt).each(Me)):A(Ze)&&EC(e,Ze).each(Me)},!0),e.on("mousedown",tt=>{const Ze=tt.target;if(Ze!==r&&Ze.nodeName!=="HTML"&&!o.isChildOf(Ze,r)||!jI(e,tt.clientX,tt.clientY))return;Ie(),Ot();const mt=sk(e,Ze);YC(mt)?(tt.preventDefault(),EC(e,mt).each(Me)):eF(r,tt.clientX,tt.clientY).each(sn=>{tt.preventDefault();const _n=$(1,sn.node,sn.position===wh.Before,!1);L(_n),xl(mt)?mt.focus():e.getBody().focus()})}),e.on("keypress",tt=>{Ht.modifierPressed(tt)||YC(n.getNode())&&tt.preventDefault()}),e.on("GetSelectionRange",tt=>{let Ze=tt.range;if(y){if(!y.parentNode){y=null;return}Ze=Ze.cloneRange(),Ze.selectNode(y),tt.range=Ze}}),e.on("SetSelectionRange",tt=>{tt.range=ie(tt.range);const Ze=Me(tt.range,tt.forward);Ze&&(tt.range=Ze)});const Qt=tt=>Ut(tt)&&tt.id==="mcepastebin";e.on("AfterSetSelectionRange",tt=>{const Ze=tt.range,mt=Ze.startContainer.parentElement;!te(Ze)&&!Qt(mt)&&Ot(),x(mt)||Ie()}),lX(e),Kj(e),dF(e)},oe=Qt=>eu(Qt)||Ao(Qt)||ec(Qt),te=Qt=>oe(Qt.startContainer)||oe(Qt.endContainer),ie=Qt=>{const tt=e.schema.getVoidElements(),Ze=o.createRng(),mt=Qt.startContainer,sn=Qt.startOffset,_n=Qt.endContainer,Zn=Qt.endOffset;return En(tt,mt.nodeName.toLowerCase())?sn===0?Ze.setStartBefore(mt):Ze.setStartAfter(mt):Ze.setStart(mt,sn),En(tt,_n.nodeName.toLowerCase())?Zn===0?Ze.setEndBefore(_n):Ze.setEndAfter(_n):Ze.setEnd(_n,Zn),Ze},_e=(Qt,tt)=>{const Ze=be.fromDom(e.getBody()),mt=e.getDoc(),sn=ea(Ze,"#"+u).getOrThunk(()=>{const ho=be.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',mt);return sa(ho,"id",u),Js(Ze,ho),ho}),_n=o.createRng();Cl(sn),wl(sn,[be.fromText(Zr,mt),be.fromDom(tt),be.fromText(Zr,mt)]),_n.setStart(sn.dom.firstChild,1),_n.setEnd(sn.dom.lastChild,0),Gn(sn,{top:o.getPos(Qt,e.getBody()).y+"px"}),Tw(sn);const Zn=n.getSel();return Zn&&(Zn.removeAllRanges(),Zn.addRange(_n)),_n},Re=Qt=>{const tt=Qt.cloneNode(!0),Ze=e.dispatch("ObjectSelected",{target:Qt,targetClone:tt});if(Ze.isDefaultPrevented())return null;const mt=_e(Qt,Ze.targetClone),sn=be.fromDom(Qt);return xe(ii(be.fromDom(e.getBody()),`*[${m}]`),_n=>{No(sn,_n)||Is(_n,m)}),o.getAttrib(Qt,m)||Qt.setAttribute(m,"1"),y=Qt,Ot(),mt},Me=(Qt,tt)=>{if(!Qt)return null;if(Qt.collapsed){if(!te(Qt)){const _n=tt?1:-1,Zn=Np(_n,r,Qt),ho=Zn.getNode(!tt);if(Fe(ho)){if(lb(ho))return $(_n,ho,tt?!Zn.isAtEnd():!1,!1);if(uf(ho)&&qo(ho.nextSibling)){const Cs=o.createRng();return Cs.setStart(ho,0),Cs.setEnd(ho,0),Cs}}const cs=Zn.getNode(tt);if(Fe(cs)){if(lb(cs))return $(_n,cs,tt?!1:!Zn.isAtEnd(),!1);if(uf(cs)&&qo(cs.previousSibling)){const Cs=o.createRng();return Cs.setStart(cs,1),Cs.setEnd(cs,1),Cs}}}return null}let Ze=Qt.startContainer,mt=Qt.startOffset;const sn=Qt.endOffset;if(bt(Ze)&&mt===0&&YC(Ze.parentNode)&&(Ze=Ze.parentNode,mt=o.nodeIndex(Ze),Ze=Ze.parentNode),!Ut(Ze))return null;if(sn===mt+1&&Ze===Qt.endContainer){const _n=Ze.childNodes[mt];if(A(_n))return Re(_n)}return null},Ie=()=>{y&&y.removeAttribute(m),ea(be.fromDom(e.getBody()),"#"+u).each(ws),y=null},ct=()=>{i.destroy(),y=null},Ot=()=>{i.hide()};return Rd(e)||X(),{showCaret:$,showBlockCaretContainer:z,hideFakeCaret:Ot,destroy:ct}},Xj=(e,n)=>{let o=n;for(let r=e.previousSibling;bt(r);r=r.previousSibling)o+=r.data.length;return o},fF=(e,n,o,r,i)=>{if(bt(o)&&(r<0||r>o.data.length))return[];const u=i&&bt(o)?[Xj(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,i)),m=m.parentNode;return m===n?u.reverse():[]},rk=(e,n,o,r,i,u,m=!1)=>{const y=fF(e,n,o,r,m),x=fF(e,n,i,u,m);return{start:y,end:x}},XC=(e,n)=>{const o=n.slice(),r=o.pop();return oo(r)?Fo(o,(u,m)=>u.bind(y=>W.from(y.childNodes[m])),W.some(e)).bind(u=>bt(u)&&(r<0||r>u.data.length)?W.none():W.some({node:u,offset:r})):W.none()},YR=(e,n)=>XC(e,n.start).bind(({node:o,offset:r})=>XC(e,n.end).map(({node:i,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(i,u),m})),mF=(e,n,o,r=!1)=>rk(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),$y=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,bt(n.firstChild)&&Jc(n.firstChild.data)),$y(e,r,o)}},ak=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(bt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),bt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),$y(e,i,o),i!==u&&$y(e,u,o))},JC=(e,n)=>W.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),XR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:ix(r).concat(e.blockPatterns),inlinePatterns:sh(r).concat(e.inlinePatterns)}},JR=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},hF=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Hy=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},gF=(e,n,o)=>{const r=YR(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),y=r.startOffset===0?i:i.splitText(r.startOffset),x=y.parentNode,A=m.parentNode;return{prefix:n,end:A.insertBefore(hF(e,n+"-end"),m),start:x.insertBefore(hF(e,n+"-start"),y)}},pF=(e,n,o)=>{$y(e,e.get(n.prefix+"-end"),o),$y(e,e.get(n.prefix+"-start"),o)},QR=e=>e.start.length===0,Jj=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),m=i.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},bF=(e,n,o,r)=>{const i=n.start;return jD(e,r.container,r.offset,Jj(i),o).bind(m=>{var y,x;const A=(x=(y=o.textContent)===null||y===void 0?void 0:y.indexOf(i))!==null&&x!==void 0?x:-1;if(A!==-1&&m.offset>=A+i.length){const $=e.createRng();return $.setStart(m.container,m.offset-i.length),$.setEnd(m.container,m.offset),W.some($)}else{const $=m.offset-i.length;return bT(m.container,$,o).map(z=>{const X=e.createRng();return X.setStart(z.container,z.offset),X.setEnd(m.container,m.offset),X}).filter(z=>z.toString()===i).orThunk(()=>bF(e,n,o,_m(m.container,0)))}})},Qj=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),W.some(m)}return ZD(o,r,i).bind(m=>bF(e,n,i,m).bind(x=>{var A;if(u){if(x.endContainer===m.container&&x.endOffset===m.offset)return W.none();if(m.offset===0&&((A=x.endContainer.textContent)===null||A===void 0?void 0:A.length)===x.endOffset)return W.none()}return W.some(x)}))},e5=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),m=o.pattern,y=o.position.container,x=o.position.offset;return bT(y,x-o.pattern.end.length,n).bind(A=>{const L=rk(i,u,A.container,A.offset,y,x,r);if(QR(m))return W.some({matches:[{pattern:m,startRng:L,endRng:L}],position:A});{const $=ik(e,o.remainingPatterns,A.container,A.offset,n,r),z=$.getOr({matches:[],position:A}),X=z.position;return Qj(i,m,X.container,X.offset,n,$.isNone()).map(te=>{const ie=mF(i,u,te,r);return{matches:z.matches.concat([{pattern:m,startRng:ie,endRng:L}]),position:_m(te.startContainer,te.startOffset)}})}})},ik=(e,n,o,r,i,u)=>{const m=e.dom;return ZD(o,r,m.getRoot()).bind(y=>{const x=JR(m,i,o,r);for(let A=0;A<n.length;A++){const L=n[A];if(!Wr(x,L.end))continue;const $=n.slice();$.splice(A,1);const z=e5(e,i,{pattern:L,remainingPatterns:$,position:y},u);if(z.isNone()&&r>0)return ik(e,n,o,r-1,i,u);if(z.isSome())return z}return W.none()})},vF=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?xe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},yF=(e,n,o,r)=>{const i=Hy(e.dom,o);ak(e.dom,i,r),vF(e,n,i)},eq=(e,n,o,r,i)=>{const u=e.dom,m=Hy(u,r),y=Hy(u,o);ak(u,y,i),ak(u,m,i);const x={prefix:o.prefix,start:o.end,end:r.start},A=Hy(u,x);vF(e,n,A)},tq=(e,n)=>{const o=L0("mce_textpattern"),r=ls(n,(i,u)=>{const m=gF(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:m}])},[]);return ls(r,(i,u)=>{const m=r.length-i.length-1,y=QR(u.pattern)?u.endMarker:gF(e,o+`_start${m}`,u.startRng);return i.concat([{...u,startMarker:y}])},[])},nq=e=>Ko(e,(n,o)=>o.end.length-n.end.length),oq=(e,n)=>{const o=Ss(e,r=>_t(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},wF=(e,n,o,r,i,u)=>{const m=ik(e,i.inlinePatterns,o,r,n,u).fold(()=>[],x=>x.matches),y=ik(e,nq(i.inlinePatterns),o,r,n,u).fold(()=>[],x=>x.matches);return oq(m,y)},CF=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=tq(o,n);xe(i,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),y=x=>x===m;QR(u.pattern)?yF(e,u.pattern,u.endMarker,y):eq(e,u.pattern,u.startMarker,u.endMarker,y),pF(o,u.endMarker,y),pF(o,u.startMarker,y)}),e.selection.moveToBookmark(r)},SF=(e,n,o)=>KU(n,0,n).map(r=>{const i=r.container;return XB(i,o.start.length,n).each(u=>{const m=e.createRng();m.setStart(i,0),m.setEnd(u.container,u.offset),ak(e,m,y=>y===n)}),i}),xF=e=>(n,o)=>{const r=n.dom,i=o.pattern,u=YR(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),m=(y,x)=>{const A=x.get(y);return Gt(A)&&lo(A).exists(L=>En(L,"block"))};return JC(n,u).each(y=>{i.type==="block-format"?m(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,y,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,y,i),n.execCommand(i.cmd,!1,i.value)})}),!0},EF=e=>Ko(e,(n,o)=>o.start.length-n.start.length),_F=e=>(n,o)=>{const r=EF(n),i=o.replace(Zr," ");return Vo(r,u=>e(u,o,i))},ck=(e,n)=>(o,r,i,u,m)=>{var y;m===void 0&&(m=(y=r.textContent)!==null&&y!==void 0?y:"");const x=o.dom,A=Va(o);return x.is(r,A)?e(i.blockPatterns,m).map(L=>n&&ut.trim(m).length===L.start.length?[]:[{pattern:L,range:rk(x,x.getRoot(),r,0,r,0,u)}]).getOr([]):[]},sq=e=>/^\s[^\s]/.test(e),rq=xF((e,n,o)=>{SF(e,n,o).each(r=>{const i=be.fromDom(r),u=mp(i);sq(u)&&BS(i,u.slice(1))})}),aq=_F((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),iq=ck(aq,!0),cq=(e,n)=>{const o=e.selection.getRng();return JC(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),m=XR(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),y=wF(e,r,o.startContainer,u,m,!0),x=iq(e,r,m,!0);return{inlineMatches:y,blockMatches:x}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},lk=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();xe(n,r=>rq(e,r)),e.selection.moveToBookmark(o)},lq=xF(SF),uq=_F((e,n,o)=>n===e.start||o===e.start),dq=ck(uq,!1),fq=(e,n)=>{const o=e.selection.getRng();return JC(e,o).map(r=>{const i=Math.max(0,o.startOffset),u=JR(e.dom,r,o.startContainer,i),m=XR(n,r,u);return dq(e,r,m,!1,u)}).filter(r=>r.length>0)},mq=(e,n)=>{xe(n,o=>lq(e,o))},hq=(e,n)=>cq(e,n).fold($e,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{n4(e),CF(e,o),lk(e,r);const i=e.selection.getRng(),u=ZD(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(m=>{const y=m.container;y.data.charAt(m.offset-1)===Kg&&(y.deleteData(m.offset-1,1),$y(e.dom,y.parentNode,x=>x===e.dom.getRoot()))})}),!0)),gq=(e,n)=>{const o=e.selection.getRng();JC(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=JR(e.dom,r,o.startContainer,i),m=XR(n,r,u),y=wF(e,r,o.startContainer,i,m,!1);y.length>0&&e.undoManager.transact(()=>{CF(e,y)})})},pq=(e,n)=>fq(e,n).fold($e,o=>(e.undoManager.transact(()=>{mq(e,o)}),!0)),TF=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},kF=(e,n)=>TF(e,n,(o,r)=>o===r.keyCode&&!Ht.modifierPressed(r)),bq=(e,n)=>TF(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),AF=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Di(Ix(e).filter(m=>m.type==="inline-command"||m.type==="block-command"?e.queryCommandSupported(m.cmd):!0),X2(e)),i=()=>_p(e);e.on("keydown",m=>{if(m.keyCode===13&&!Ht.modifierPressed(m)&&e.selection.isCollapsed()&&e.selection.isEditable()){const y=mf(r(),"enter");(y.inlinePatterns.length>0||y.blockPatterns.length>0||i())&&hq(e,y)&&m.preventDefault()}},!0),e.on("keydown",m=>{if(m.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const y=mf(r(),"space");(y.blockPatterns.length>0||i())&&pq(e,y)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const m=mf(r(),"space");(m.inlinePatterns.length>0||i())&&gq(e,m)}};e.on("keyup",m=>{kF(o,m)&&u()}),e.on("keypress",m=>{bq(n,m)&&vn.setEditorTimeout(e,u)})},vq=e=>{AF(e)},yq=e=>{const n=ut.each,o=Ht.BACKSPACE,r=Ht.DELETE,i=e.dom,u=e.selection,m=e.parser,y=Nn.browser,x=y.isFirefox(),A=y.isChromium()||y.isSafari(),L=Nn.deviceType.isiPhone()||Nn.deviceType.isiPad(),$=Nn.os.isMacOS()||Nn.os.isiOS(),z=(Yt,Bn)=>{try{e.getDoc().execCommand(Yt,!1,String(Bn))}catch{}},X=Yt=>Yt.isDefaultPrevented(),oe=()=>{const Yt=zn=>{const qt=i.create("body"),vo=zn.cloneContents();return qt.appendChild(vo),u.serializer.serialize(qt,{format:"html"})},Bn=zn=>{const qt=Yt(zn),vo=i.createRng();vo.selectNode(e.getBody());const _o=Yt(vo);return qt===_o};e.on("keydown",zn=>{const qt=zn.keyCode;if(!X(zn)&&(qt===r||qt===o)&&e.selection.isEditable()){const vo=e.selection.isCollapsed(),_o=e.getBody();if(vo&&!jr(e.schema,_o)||!vo&&!Bn(e.selection.getRng()))return;zn.preventDefault(),e.setContent(""),_o.firstChild&&i.isBlock(_o.firstChild)?e.selection.setCursorLocation(_o.firstChild,0):e.selection.setCursorLocation(_o,0),e.nodeChanged()}})},te=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ie=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Yt=>{let Bn;if(Yt.target===e.getDoc().documentElement)if(Bn=u.getRng(),e.getBody().focus(),Yt.type==="mousedown"){if(eu(Bn.startContainer))return;u.placeCaretAt(Yt.clientX,Yt.clientY)}else u.setRng(Bn)})},_e=()=>{e.on("keydown",Yt=>{if(!X(Yt)&&Yt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Bn=u.getNode(),zn=Bn.previousSibling;if(Bn.nodeName==="HR"){i.remove(Bn),Yt.preventDefault();return}zn&&zn.nodeName&&zn.nodeName.toLowerCase()==="hr"&&(i.remove(zn),Yt.preventDefault())}}})},Re=()=>{Range.prototype.getClientRects||e.on("mousedown",Yt=>{if(!X(Yt)&&Yt.target.nodeName==="HTML"){const Bn=e.getBody();Bn.blur(),vn.setEditorTimeout(e,()=>{Bn.focus()})}})},Me=()=>{const Yt=oc(e);e.on("click",Bn=>{const zn=Bn.target;/^(IMG|HR)$/.test(zn.nodeName)&&i.isEditable(zn)&&(Bn.preventDefault(),e.selection.select(zn),e.nodeChanged()),zn.nodeName==="A"&&i.hasClass(zn,Yt)&&zn.childNodes.length===0&&i.isEditable(zn.parentNode)&&(Bn.preventDefault(),u.select(zn))})},Ie=()=>{const Yt=()=>{const zn=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const qt=u.getStart();qt!==e.getBody()&&(i.setAttrib(qt,"style",null),n(zn,vo=>{qt.setAttributeNode(vo.cloneNode(!0))}))}},Bn=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",zn=>{let qt;return!X(zn)&&(zn.keyCode===8||zn.keyCode===46)&&Bn()?(qt=Yt(),e.getDoc().execCommand("delete",!1),qt(),zn.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",zn=>{if(!X(zn)&&Bn()){const qt=Yt();vn.setEditorTimeout(e,()=>{qt()})}})},ct=()=>{e.on("keydown",Yt=>{if(!X(Yt)&&Yt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Bn=u.getNode().previousSibling;if(Bn&&Bn.nodeName&&Bn.nodeName.toLowerCase()==="table")return Yt.preventDefault(),!1}return!0})},Ot=()=>{e.on("keydown",Yt=>{if(X(Yt)||Yt.keyCode!==Ht.BACKSPACE)return;let Bn=u.getRng();const zn=Bn.startContainer,qt=Bn.startOffset,vo=i.getRoot();let _o=zn;if(!(!Bn.collapsed||qt!==0)){for(;_o.parentNode&&_o.parentNode.firstChild===_o&&_o.parentNode!==vo;)_o=_o.parentNode;_o.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,_o),Bn=i.createRng(),Bn.setStart(zn,0),Bn.setEnd(zn,0),u.setRng(Bn))}})},Qt=()=>{const Yt=()=>{z("StyleWithCSS",!1),z("enableInlineTableEditing",!1),nc(e)||z("enableObjectResizing",!1)};q2(e)||e.on("BeforeExecCommand mousedown",Yt)},tt=()=>{const Yt=()=>{n(i.select("a:not([data-mce-block])"),Bn=>{var zn;let qt=Bn.parentNode;const vo=i.getRoot();if((qt==null?void 0:qt.lastChild)===Bn){for(;qt&&!i.isBlock(qt);){if(((zn=qt.parentNode)===null||zn===void 0?void 0:zn.lastChild)!==qt||qt===vo)return;qt=qt.parentNode}i.add(qt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Bn=>{(Bn.type==="setcontent"||Bn.command==="mceInsertLink")&&Yt()})},Ze=()=>{e.on("init",()=>{z("DefaultParagraphSeparator",Va(e))})},mt=Yt=>{const Bn=Yt.getBody(),zn=Yt.selection.getRng();return zn.startContainer===zn.endContainer&&zn.startContainer===Bn&&zn.startOffset===0&&zn.endOffset===Bn.childNodes.length},sn=()=>{e.on("keyup focusin mouseup",Yt=>{!Ht.modifierPressed(Yt)&&!mt(e)&&u.normalize()},!0)},_n=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Zn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},ho=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Yt=>{let Bn;Yt.target.nodeName==="HTML"&&(Bn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Bn),e.selection.normalize(),e.nodeChanged())}))},cs=()=>{$&&e.on("keydown",Yt=>{Ht.metaKeyPressed(Yt)&&!Yt.shiftKey&&(Yt.keyCode===37||Yt.keyCode===39)&&(Yt.preventDefault(),e.selection.getSel().modify("move",Yt.keyCode===37?"backward":"forward","lineboundary"))})},Cs=()=>{e.on("click",Yt=>{let Bn=Yt.target;do if(Bn.tagName==="A"){Yt.preventDefault();return}while(Bn=Bn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Gr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Yt=>{Yt.preventDefault()})})},Zi=()=>{m.addNodeFilter("br",Yt=>{let Bn=Yt.length;for(;Bn--;)Yt[Bn].attr("class")==="Apple-interchange-newline"&&Yt[Bn].remove()})},mi=it,Ft=()=>{if(!x||e.removed)return!1;const Yt=e.selection.getSel();return!Yt||!Yt.rangeCount||Yt.rangeCount===0},xn=()=>{A&&(ie(),Me(),Gr(),te(),L&&(Zn(),ho(),Cs())),x&&(Re(),Qt(),_n(),cs())},Wo=()=>{Ot(),oe(),Nn.windowsPhone||sn(),A&&(ie(),Me(),Ze(),Gr(),ct(),Zi(),L?(Zn(),ho(),Cs()):te()),x&&(_e(),Re(),Ie(),Qt(),tt(),_n(),cs(),ct())};return Rd(e)?xn():Wo(),{refreshContentEditable:mi,isHidden:Ft}},OF=e=>e.toLowerCase()==="gpl",QC=e=>e.length>=64&&e.length<=255,wq=e=>OF(e)||QC(e)?"VALID":"INVALID",DF=e=>{const n=V4(e);!de(U4(e))&&(In(n)||wq(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},t5=$s.DOM,Cq=(e,n)=>{const o=be.fromDom(e.getBody()),r=qd(bl(o)),i=be.fromTag("style");sa(i,"type","text/css"),Js(i,be.fromText(n)),Js(r,i),e.on("remove",()=>{ws(i)})},Sq=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,n5=e=>Qo(e,n=>In(n)===!1),o5=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return n5({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Sq(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:ew(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},RF=e=>{const n=e.options.get;return n5({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},MF=e=>{const n=e.options.get;return{...o5(e),...RF(e),...n5({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},xq=e=>{const n=hy(o5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const y=o[m];let x=y.attr(r);if(x&&!y.attr(u)){if(x.indexOf("data:")===0||x.indexOf("blob:")===0)continue;r==="style"?(x=i.serializeStyle(i.parseStyle(x),y.name),x.length||(x=null),y.attr(u,x),y.attr(r,x)):r==="tabindex"?(y.attr(u,x),y.attr(r,null)):y.attr(u,e.convertURL(x,r,y.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),Bx(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new sl("br",1))}}),n},Eq=e=>{const n=vv(e);n&&vn.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},_q=e=>{const n=e.dom.getRoot();!e.inline&&(!Bv(e)||e.selection.getStart(!0)===n)&&Ui(n).each(o=>{const r=o.getNode(),i=ql(r)?Ui(r).getOr(o):o;e.selection.setRng(i.toRange())})},Tq=e=>{e.bindPendingEventDelegates(),e.initialized=!0,E4(e),e.focus(!0),_q(e),e.nodeChanged({initial:!0});const n=P4(e);ve(n)&&n.call(e,e),Eq(e),kg(e)&&t6(e,!0)},s5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,kq=(e,n,o)=>{const{pass:r,fail:i}=Do(n,y=>tinymce.Resource.has(mh(y))),m=[...r.map(y=>{const x=tinymce.Resource.get(mh(y));return de(x)?Promise.resolve(s5(e).loadRawCss(y,x)):Promise.resolve()}),s5(e).loadAll(i)];return e.inline?m:m.concat([e.ui.styleSheetLoader.loadAll(o)])},NF=e=>{const n=s5(e),o=V2(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let x="";ut.each(e.contentStyles,A=>{x+=A+`\r
`}),e.dom.addStyle(x)}const m=Promise.all(kq(e,r,o)).then(u).catch(u),y=O4(e);return y&&Cq(e,y),m},Aq=e=>{const n=e.getDoc(),o=e.getBody();dx(e),I4(e)||(n.body.spellcheck=!1,t5.setAttrib(o,"spellcheck","false")),e.quirks=yq(e),fx(e);const r=D4(e);r!==void 0&&(o.dir=r);const i=B4(e);i&&e.on("BeforeSetContent",u=>{ut.each(i,m=>{u.content=u.content.replace(m,y=>"<!--mce:protected "+escape(y)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},Oq=e=>{Rd(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},uk=e=>{e.removed!==!0&&(Oq(e),Tq(e))},r5=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},a5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(t5.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=q2(e),e._editableRoot=N4(e),!rb(e)&&e.hasEditableRoot()&&(e.inline&&t5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=sV(e),e.schema=ms(RF(e)),e.dom=$s(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:H2(e),referrerPolicy:uv(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=xq(e),e.serializer=LI(MF(e),e),e.selection=II(e.dom,e.getWin(),e.serializer,e),e.annotator=Rs(e),e.formatter=Og(e),e.undoManager=m6(e),e._nodeChangeDispatcher=new DZ(e),e._selectionOverrides=Yj(e),mU(e),Z8(e),ND(e),Rd(e)||(kj(e),vq(e));const i=OZ(e);rT(e,i),bU(e),fV(e),YT(e);const u=wI(e);Aq(e),DF(e),u.fold(()=>{const m=r5(e);NF(e).then(()=>{uk(e),m()})},m=>{e.setProgressState(!0),NF(e).then(()=>{m().then(y=>{e.setProgressState(!1),uk(e),OI(e)},y=>{e.notificationManager.open({type:"error",text:String(y)}),uk(e),OI(e)})})})},PF=gt,Dq=(e,n,o)=>B(e,n,PF,o),i5=$s.DOM,Rq=(e,n,o,r)=>{const i=be.fromTag("iframe");return r.each(u=>sa(i,"tabindex",u)),Fa(i,o),Fa(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),pl(i,"tox-edit-area__iframe"),i},IF=e=>{let n=ag(e)+"<html><head>";bx(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=el(e),r=oM(e),i=e.translate(lm(e));return vx(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+vx(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},BF=(e,n)=>{const o=Nn.browser.isFirefox()?lm(e):"Rich Text Area",r=e.translate(o),i=Er(be.fromDom(e.getElement()),"tabindex").bind(hc),u=Rq(e.id,r,v7(e),i).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=IF(e),i5.add(n.iframeContainer,u)},Mq=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,a5(e)};if(wv(e)||Nn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=Dq(be.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},Nq=(e,n)=>{BF(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=i5.isHidden(n.editorContainer)),e.getElement().style.display="none",i5.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,Mq(e)},dk=$s.DOM,fk=(e,n,o)=>{const r=vy.get(o),i=vy.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=ut.trim(o),r&&ut.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,ve(u.init)&&(u.init(e,i),n.push(o))}catch(u){YI(e,o,u)}}},mk=e=>e.replace(/^\-/,""),Ig=e=>{const n=[];xe(gv(e),o=>{fk(e,n,mk(o))})},hk=e=>{const n=ut.trim(lv(e)),o=e.ui.registry.getAll().icons,r={...R_.get("default").icons,...R_.get(n).icons};Tt(r,(i,u)=>{En(o,u)||e.ui.registry.addIcon(u,i)})},zy=e=>{const n=wp(e);if(de(n)){const o=Sm.get(n);e.theme=o(e,Sm.urls[n])||{},ve(e.theme.init)&&e.theme.init(e,Sm.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},LF=e=>{const n=Cp(e),o=by.get(n);e.model=o(e,by.urls[n])},Pq=e=>{const n=e.theme.renderUI;return n?n():gk(e)},Iq=e=>{const n=e.getElement(),r=wp(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},c5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Bq=e=>{const n=dk.create("div");return dk.insertAfter(n,e),c5(n,n)},gk=e=>{const n=e.getElement();return e.inline?c5(null):Bq(n)},pk=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,de(wp(e))?Pq(e):ve(wp(e))?Iq(e):gk(e)},g1=(e,n)=>{const o={show:W.from(n.show).getOr(it),hide:W.from(n.hide).getOr(it),isEnabled:W.from(n.isEnabled).getOr(gt),setEnabled:r=>{r&&(e.mode.get()==="readonly"||kg(e))||W.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},n0=async e=>{e.dispatch("ScriptsLoaded"),hk(e),zy(e),LF(e),Ig(e);const n=await pk(e);g1(e,W.from(n.api).getOr({})),e.editorContainer=n.editorContainer,hh(e),e.inline?a5(e):Nq(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},p1=$s.DOM,FF=e=>e.charAt(0)==="-",Lq=(e,n)=>{const o=z2(n),r=T4(n);if(!wd.hasCode(o)&&o!=="en"){const i=ds(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{jz(n,i,o)})}},Fq=(e,n)=>{const o=wp(e);if(de(o)&&!FF(o)&&!En(Sm.urls,o)){const r=R4(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Sm.load(o,i).catch(()=>{qz(e,i,o)})}},$q=(e,n)=>{const o=Cp(e);if(o!=="plugin"&&!En(by.urls,o)){const r=Ex(e),i=de(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;by.load(o,i).catch(()=>{bC(e,i,o)})}},Hq=e=>W.from(wx(e)).filter(ds).map(n=>({url:n,name:W.none()})),$F=(e,n,o)=>W.from(n).filter(r=>ds(r)&&!R_.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:W.some(r)})),HF=(e,n,o)=>{const r=$F(n,"default",o),i=Hq(n).orThunk(()=>$F(n,lv(n),""));xe(Gc([r,i]),u=>{e.add(u.url).catch(()=>{KI(n,u.url,u.name.getOrUndefined())})})},zq=(e,n)=>{const o=(r,i)=>{vy.load(r,i).catch(()=>{Zz(e,i,r)})};Tt(Du(e),(r,i)=>{o(i,r),e.options.set("plugins",gv(e).concat(i))}),xe(gv(e),r=>{r=ut.trim(r),r&&!vy.urls[r]&&!FF(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},Vq=e=>{const n=wp(e);return!de(n)||Fe(Sm.get(n))},Uq=e=>{const n=Cp(e);return Fe(by.get(n))},dX=(e,n)=>{const o=pd.ScriptLoader,r=()=>{!e.removed&&Vq(e)&&Uq(e)&&n0(e)};Fq(e,n),$q(e,n),Lq(o,e),HF(o,e,n),zq(e,n),o.loadQueue().then(r,r)},Wq=(e,n)=>Cc.forElement(e,{contentCssCors:hv(n),referrerPolicy:uv(n)}),l5=e=>{const n=e.id;wd.setCode(z2(e));const o=()=>{p1.unbind(window,"ready",o),e.render()};if(!Xm.Event.domLoaded){p1.bind(window,"ready",o);return}if(!e.getElement())return;const r=be.fromDom(e.getElement()),i=zf(r);e.on("remove",()=>{Oo(r.dom.attributes,m=>Is(r,m.name)),Fa(r,i)}),e.ui.styleSheetLoader=Wq(r,e),fv(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||p1.getParent(n,"form");u&&(e.formElement=u,M4(e)&&!ar(e.getElement())&&(p1.insertAfter(p1.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},p1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Ax(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=RO(e),e.notificationManager=Uz(e),Lx(e)&&e.on("GetContent",m=>{m.save&&(m.content=p1.encode(m.content))}),Ox(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Dx(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),dX(e,e.suffix)},Zq=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,kg(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),za(e,n))},jq=e=>e._editableRoot,zF=(e,n)=>({sections:wt(e),options:wt(n)}),VF=Y().deviceType,u5=VF.isPhone(),qq=VF.isTablet(),o0=e=>{if(en(e))return[];{const n=Gt(e)?e:e.split(/[ ,]/),o=dt(n,Ns);return Kt(o,ds)}},Gq=(e,n)=>{const o=Ja(n,(r,i)=>et(e,i));return zF(o.t,o.f)},Kq=(e,n,o={})=>{const r=e.sections(),i=Yo(r,n).getOr({});return ut.extend({},o,i)},d5=(e,n)=>En(e.sections(),n),Yq=(e,n)=>d5(e,n)?e.sections()[n]:{},UF=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Yo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),f5=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?ut.extend({},e.external_plugins,r):r},WF=(e,n)=>[...o0(e),...o0(n)],m5=(e,n,o,r)=>e&&d5(n,"mobile")?r:o,Xq=(e,n,o,r)=>{const i=o0(o.forced_plugins),u=o0(r.plugins),m=Yq(n,"mobile"),y=m.plugins?o0(m.plugins):u,x=m5(e,n,u,y),A=WF(i,x);return ut.extend(r,{forced_plugins:i,plugins:A})},fX=(e,n)=>e&&d5(n,"mobile"),mX=(e,n,o,r,i)=>{var u;const m=e?{mobile:UF((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},y=Gq(["mobile"],f1(m,i)),x=ut.extend(o,r,y.options(),fX(e,y)?Kq(y,"mobile"):{},{external_plugins:f5(r,y.options())});return Xq(e,y,r,x)},Jq=(e,n)=>{const o=dL(n);return mX(u5||qq,u5,o,e,o)},ZF=(e,n)=>dz(e,n),Qq=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{xe("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},eG=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return _t(i,u=>Fe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},tG=e=>{Qq(e),eG(e)},hX=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Nn.os.isMacOS()||Nn.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},gX=(e,n,o,r)=>{const i=be.fromDom(e.getRoot());return Iw(i,Qe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Yv(i,Qe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},jF=e=>{if(typeof e!="string"){const n=ut.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},qF=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?gX(r,o.getRng(),n,e.schema):n},bk=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=jF(n);rO(e,{...r,content:qF(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=uz(e,i.content,r);zb(e,u,i),e.addVisual()})}},nG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{bk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{bk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{bk(e,r)},mceInsertContent:(n,o,r)=>{bk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(nb(e))}})},oG={"font-size":"size","font-family":"face"},pX=bu("font"),bX=(e,n,o)=>{const r=u=>Bi(u,e).orThunk(()=>pX(u)?Yo(oG,e).bind(m=>Er(u,m)):W.none()),i=u=>No(be.fromDom(n),u);return qw(be.fromDom(o),u=>r(u),i)},vX=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),sG=(e,n)=>W.from($s.DOM.getStyle(n,e,!0)),rG=e=>(n,o)=>W.from(o).map(be.fromDom).filter(Ps).bind(r=>bX(e,n,r.dom).or(sG(e,r.dom))).getOr(""),aG=rG("font-size"),s0=M(vX,rG("font-family")),h5=e=>Ui(e.getBody()).bind(n=>{const o=n.container();return W.from(bt(o)?o.parentNode:o)}),vk=e=>W.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?W.none():W.from(e.selection.getStart(!0))}),GF=(e,n)=>vk(e).orThunk(Ae(h5,e)).map(be.fromDom).filter(Ps).bind(n),yk=(e,n)=>GF(e,Hn(W.some,n)),g5=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=ob(e),i=H4(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},iG=e=>{const n=e.split(/\s*,\s*/);return dt(n,o=>o.indexOf(" ")!==-1&&!(us(o,'"')||us(o,"'"))?`'${o}'`:o).join(",")},cG=(e,n)=>{const o=g5(e,n);e.formatter.toggle("fontname",{value:iG(o)}),e.nodeChanged()},lG=e=>yk(e,n=>s0(e.getBody(),n.dom)).getOr(""),uG=(e,n)=>{e.formatter.toggle("fontsize",{value:g5(e,n)}),e.nodeChanged()},dG=e=>yk(e,n=>aG(e.getBody(),n.dom)).getOr(""),fG=e=>yk(e,n=>{const o=be.fromDom(e.getBody()),r=qw(n,u=>Bi(u,"line-height"),Ae(No,o)),i=()=>{const u=parseFloat(vr(n,"line-height")),m=parseFloat(vr(n,"font-size"));return String(u/m)};return r.getOrThunk(i)}).getOr(""),b1=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},mG=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{cG(e,i)},FontSize:(o,r,i)=>{uG(e,i)},LineHeight:(o,r,i)=>{b1(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(de(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},KF=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>lG(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>dG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>fG(e))},hG=e=>{mG(e),KF(e)},wk=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},gG=e=>{e.editorCommands.addCommands({Indent:()=>{uU(e)},Outdent:()=>{vB(e)}}),e.editorCommands.addCommands({Outdent:()=>gB(e)},"state")},pG=e=>{const n=(o,r,i)=>{if(e.mode.isReadOnly())return;const u=de(i)?{href:i}:i,m=e.dom.getParent(e.selection.getNode(),"a");Je(u)&&de(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},bG=(e,n,o,r)=>{const i=e.dom,u=y=>i.isBlock(y)&&y.parentElement===o,m=u(n)?n:i.getParent(r,u,o);return W.from(m).map(be.fromDom)},p5=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,m=UC(o,u);if(!m||!m.isContentEditable)return;const y=n?Ei:yc,x=Va(e);bG(e,i,m,u).each(A=>{const L=ZW(e,u,A.dom,m,!1,x);y(A,be.fromDom(L)),e.selection.setCursorLocation(L,0),e.dispatch("NewBlock",{newBlock:L}),VC(e,"insertParagraph")})},vG=e=>p5(e,!0),yG=e=>p5(e,!1),wG=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{vG(e)},InsertNewBlockAfter:()=>{yG(e)}})},CG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{ZC(GL,e)},mceInsertNewLine:(n,o,r)=>{n8(e,r)},InsertLineBreak:(n,o,r)=>{ZC(JL,e)}})},b5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>Ut(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),st);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},SG=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{rs(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},xG=e=>{tG(e),hX(e),wk(e),b5(e),nG(e),pG(e),gG(e),wG(e),CG(e),hG(e),SG(e)},Ka=["toggleview"],YF=e=>et(Ka,e.toLowerCase());class XF{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,m=n.toLowerCase(),y=i==null?void 0:i.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!y?u.focus():w3(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const A=this.commands.exec[m];return ve(A)?(A(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!YF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ve(r)?r(o):!1}queryCommandValue(n){if(!YF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ve(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Tt(n,(i,u)=>{xe(u.toLowerCase().split(","),m=>{r[o][m]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,m,y)=>o.call(r??this.editor,m,y)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const v5=ut.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ck{static isNative(n){return!!v5[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||$e}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=H1(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let m=0,y=u.length;m<y;m++){const x=u[m];if(!x.removed){if(x.once&&this.off(r,x.func),i.isImmediatePropagationStopped())return i;if(x.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=$e),o){const u={func:o,removed:!1};i&&ut.extend(u,i);const m=n.toLowerCase().split(" ");let y=m.length;for(;y--;){const x=m[y];let A=this.bindings[x];A||(A=[],this.toggleEvent(x,!0)),r?A=[u,...A]:A=[...A,u],this.bindings[x]=A}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let m=this.bindings[u];if(!u)return Tt(this.bindings,(y,x)=>{this.toggleEvent(x,!1),delete this.bindings[x]}),this;if(m){if(!o)m.length=0;else{const y=Do(m,x=>x.func===o);m=y.fail,this.bindings[u]=m,xe(y.pass,x=>{x.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Tt(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const r0=e=>(e._eventDispatcher||(e._eventDispatcher=new Ck({scope:e,toggleEvent:(n,o)=>{Ck.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),y5={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return H1(e.toLowerCase(),n??{},r);const i=r0(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return r0(this).on(e,n,o)},off(e,n){return r0(this).off(e,n)},once(e,n){return r0(this).once(e,n)},hasEventListeners(e){return r0(this).has(e)}},Sk=$s.DOM;let a0;const xk=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=W2(e);return o?(e.eventRoot||(e.eventRoot=Sk.select(o)[0]),e.eventRoot):e.getBody()},EG=e=>!e.hidden&&!kg(e),JF=(e,n,o)=>{EG(e)?e.dispatch(n,o):kg(e)&&Qz(e,o)},QF=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=xk(e,n);if(W2(e)){if(a0||(a0={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||a0&&(Tt(a0,(i,u)=>{e.dom.unbind(xk(e,u))}),a0=null)})),a0[n])return;const r=i=>{const u=i.target,m=e.editorManager.get();let y=m.length;for(;y--;){const x=m[y].getBody();(x===u||Sk.isChildOf(u,x))&&JF(m[y],n,i)}};a0[n]=r,Sk.bind(o,n,r)}else{const r=i=>{JF(e,n,i)};Sk.bind(o,n,r),e.delegates[n]=r}},e$={...y5,bindPendingEventDelegates(){const e=this;ut.each(e._pendingNativeEvents,n=>{QF(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?QF(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(xk(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Tt(e.delegates,(r,i)=>{e.dom.unbind(xk(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},Vy=e=>de(e)?{value:e.split(/[ ,]/),valid:!0}:at(e,de)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Tm=e=>{const n=(()=>{switch(e){case"array":return Gt;case"boolean":return Xt;case"function":return ve;case"number":return oo;case"object":return Je;case"string":return de;case"string[]":return Vy;case"object[]":return o=>at(o,Je);case"regexp":return o=>xt(o,RegExp);default:return gt}})();return o=>w5(o,n,`The value must be a ${e}.`)},_G=e=>de(e.processor),t$=(e,n)=>{const o=lr(n.message)?"":`. ${n.message}`;return e+o},n$=e=>e.valid,w5=(e,n,o="")=>{const r=n(e);return Xt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},TG=(e,n,o)=>{if(!In(n)){const r=w5(n,o);if(n$(r))return r.value;console.error(t$(`Invalid default value passed for the "${e}" option`,r))}},kG=(e,n,o=n)=>{const r={},i={},u=(X,oe,te)=>{const ie=w5(oe,te);return n$(ie)?(i[X]=ie.value,!0):(console.warn(t$(`Invalid value passed for the ${X} option`,ie)),!1)},m=(X,oe)=>{const te=_G(oe)?Tm(oe.processor):oe.processor,ie=TG(X,oe.default,te);r[X]={...oe,default:ie,processor:te},Yo(i,X).orThunk(()=>Yo(n,X)).each(Re=>u(X,Re,te))},y=X=>En(r,X);return{register:m,isRegistered:y,get:X=>Yo(i,X).orThunk(()=>Yo(r,X).map(oe=>oe.default)).getOrUndefined(),set:(X,oe)=>{if(y(X)){const te=r[X];return te.immutable?(console.error(`"${X}" is an immutable option and cannot be updated`),!1):u(X,oe,te.processor)}else return console.warn(`"${X}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:X=>{const oe=y(X);return oe&&delete i[X],oe},isSet:X=>En(i,X),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(X,oe)=>Xt(oe)||oo(oe)||de(oe)||re(oe)||Gt(oe)||Dn(oe)?oe:Object.prototype.toString.call(oe))))}catch(X){console.error(X)}}}},AG=(e,n)=>{e.dom.contentEditable="true"},OG=(e,n)=>{const o=be.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&AG(o),QI(e)):(e.readonly=!1,e6(e))},eS=e=>e.readonly,yX=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{eS(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&eS(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&eS(e)){const o=e.undoManager.add();Fe(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(eS(e)){const n=e.undoManager.add();Fe(n)&&e.undoManager.undo()}})},DG=["design","readonly"],o$=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&OG(e,u.editorReadOnly),n.set(r),O2(e,r)},RG=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&kg(e))){if(!En(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?o$(e,o,n,r):e.on("init",()=>o$(e,o,n,r))}},MG=(e,n,o)=>{if(et(DG,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},NG=e=>{const n=Zs("design"),o=Zs({design:{activate:it,deactivate:it,editorReadOnly:!1},readonly:{activate:it,deactivate:it,editorReadOnly:!0}});return yX(e),tV(e),{isReadOnly:()=>eS(e),set:r=>RG(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(MG(o.get(),r,i))}}},C5=ut.each,S5=ut.explode,PG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},s$=ut.makeMap("alt,ctrl,shift,meta,access"),IG=e=>e in s$,BG=e=>{const n={},o=Nn.os.isMacOS()||Nn.os.isiOS();C5(S5(e.toLowerCase(),"+"),u=>{IG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=PG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in s$)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class r${constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(C5(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,m=u.normalizeCommandFunc(r);return C5(S5(ut.trim(n)),y=>{const x=u.createShortcut(y,o,m,i);u.shortcuts[x.id]=x}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:ut.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=ut.map(S5(n,">"),BG);return u[u.length-1]=ut.extend(u[u.length-1],{func:r,scope:i||this.editor}),ut.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const LG=()=>{const e={},n={},o={},r={},i={},u={},m={},y={},x={},A=(X,oe)=>(te,ie)=>{X[te.toLowerCase()]={...ie,type:oe}},L=(X,oe)=>(te,ie)=>{X[te.toLowerCase()]={type:oe,...ie}},$=(X,oe)=>r[X.toLowerCase()]=oe,z=(X,oe)=>m[X.toLowerCase()]=oe;return{addButton:A(e,"button"),addGroupToolbarButton:A(e,"grouptoolbarbutton"),addToggleButton:A(e,"togglebutton"),addMenuButton:A(e,"menubutton"),addSplitButton:A(e,"splitbutton"),addMenuItem:A(n,"menuitem"),addNestedMenuItem:A(n,"nestedmenuitem"),addToggleMenuItem:A(n,"togglemenuitem"),addAutocompleter:A(o,"autocompleter"),addContextMenu:A(i,"contextmenu"),addContextToolbar:A(u,"contexttoolbar"),addContextForm:L(u,"contextform"),addSidebar:A(y,"sidebar"),addView:A(x,"views"),addIcon:$,addContext:z,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:y,views:x,contexts:m})}},FG=()=>{const e=LG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},i0=$s.DOM,a$=ut.extend,$G=ut.each;class Ek{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,a$(this,e$);const i=this;this.id=n,this.hidden=!1;const u=Jq(r.defaultOptions,o);this.options=kG(i,u,o),px(i);const m=this.options.get;m("deprecation_warnings")&&zI(o,u);const y=m("suffix");y&&(r.suffix=y),this.suffix=r.suffix;const x=m("base_url");x&&r._setBaseUrl(x),this.baseUri=r.baseURI;const A=uv(i);A&&(pd.ScriptLoader._setReferrerPolicy(A),$s.DOM.styleSheetLoader._setReferrerPolicy(A));const L=hv(i);Fe(L)&&$s.DOM.styleSheetLoader._setContentCssCors(L),Qi.languageLoad=m("language_load"),Qi.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Ni(bx(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=fv(i),this.hasVisual=bv(i),this.shortcuts=new r$(this),this.editorCommands=new XF(this),xG(this);const $=m("cache_suffix");$&&(Nn.cacheSuffix=$.replace(/^[\?\&]+/,"")),this.ui={registry:FG(),styleSheetLoader:void 0,show:it,hide:it,setEnabled:it,isEnabled:gt},this.mode=NG(i),r.dispatch("SetupEditor",{editor:this});const z=ih(i);ve(z)&&z.call(i,i)}render(){l5(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return gr(this)}translate(n){return wd.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Fe(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:gt,default:o})),!i.isSet(n)&&!In(o)?o:i.get(n)}hasPlugin(n,o){return et(gv(this),n)?o?vy.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(i0.show(n.getContainer()),i0.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(i0.hide(n.getContainer()),i0.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=ar(r)?r.value:r.innerHTML,m=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const m={...i,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,ar(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const y=i0.getParent(o.id,"form");y&&$G(y.elements,x=>x.name===o.id?(x.value=u,!1):!0)}return m.element=i.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return a1(this,n,o)}getContent(n){return MY(this,n)}insertContent(n,o){o&&(n=a$({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?a1(this,this.startContent,{format:"raw"}):a1(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||i0.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=i0.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,m=ch(i);if(ve(m))return m.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||Je(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const y=new Ni(n);return y.protocol!=="http"&&y.protocol!=="https"&&y.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){ZF(this,n)}setEditableRoot(n){Zq(this,n)}hasEditableRoot(){return jq(this)}remove(){Iz(this)}destroy(n){Hu(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Uy=$s.DOM,_k=ut.each;let i$=!1,Tk,Pl=[];const tS=e=>{const n=e.type;_k(v1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},c$=e=>{if(e!==i$){const n=$s.DOM;e?(n.bind(window,"resize",tS),n.bind(window,"scroll",tS)):(n.unbind(window,"resize",tS),n.unbind(window,"scroll",tS)),i$=e}},l$=e=>{const n=Pl;return Pl=Kt(Pl,o=>e!==o),v1.activeEditor===e&&(v1.activeEditor=Pl.length>0?Pl[0]:null),v1.focusedEditor===e&&(v1.focusedEditor=null),n.length!==Pl.length},HG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(l$(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},zG=document.compatMode!=="CSS1Compat",v1={...y5,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"6.0",releaseDate:"2024-12-11",i18n:wd,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Ni.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const y=u[m].src||"";if(y==="")continue;const x=y.substring(y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(y)){x.indexOf(".min")!==-1&&(o=".min"),n=y.substring(0,y.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new Ni(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Ni(e.baseURL),e.suffix=o,zt(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Tt(r,(i,u)=>{Qi.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=ut.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(L,$)=>L.inline&&$.tagName.toLowerCase()in r,u=L=>{let $=L.id;return $||($=Yo(L,"name").filter(z=>!Uy.get(z)).getOrThunk(Uy.uniqueId),L.setAttribute("id",$)),$},m=L=>{const $=e[L];if($)return $.apply(n,[])},y=L=>Nn.browser.isIE()||Nn.browser.isEdge()?(vC("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):zG?(vC("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):de(L.selector)?Uy.select(L.selector):Fe(L.target)?[L.target]:[];let x=L=>{o=L};const A=()=>{let L=0;const $=[];let z;const X=(oe,te,ie)=>{const _e=new Ek(oe,te,n);$.push(_e),_e.on("init",()=>{++L===z.length&&x($)}),_e.targetElm=_e.targetElm||ie,_e.render()};Uy.unbind(window,"ready",A),m("onpageload"),z=qi(y(e)),ut.each(z,oe=>{HG(n.get(oe.id))}),z=ut.grep(z,oe=>!n.get(oe.id)),z.length===0?x([]):_k(z,oe=>{i(e,oe)?vC("Could not initialize inline editor on invalid inline target element",oe):X(u(oe),e,oe)})};return Uy.bind(window,"ready",A),new Promise(L=>{o?L(o):x=$=>{L($)}})},get(e){return arguments.length===0?Pl.slice(0):de(e)?Vo(Pl,n=>n.id===e).getOr(null):oo(e)&&Pl[e]?Pl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Pl.push(e),c$(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Tk||(Tk=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",Tk))),e},createEditor(e,n){return this.add(new Ek(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Pl.length-1;r>=0;r--)n.remove(Pl[r]);return}if(de(e)){_k(Uy.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,re(n.get(o.id))?null:(l$(o)&&n.dispatch("RemoveEditor",{editor:o}),Pl.length===0&&window.removeEventListener("beforeunload",Tk),o.remove(),c$(Pl.length>0),o)},execCommand(e,n,o){var r;const i=this,u=Je(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const m=o.options;new Ek(u,m,i).render()}return!0}case"mceRemoveEditor":{const m=i.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=i.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{_k(Pl,e=>{e.save()})},addI18n:(e,n)=>{wd.add(e,n)},translate:e=>wd.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Ni(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Ni(this.baseURL)}};v1.setup();const VG=(()=>{const e=li(),n=u=>({items:u,types:ts(u),getType:m=>Yo(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),u$=Math.min,c0=Math.max,kk=Math.round,d$=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,m=e.h,y=n.w,x=n.h,A=(o||"").split("");return A[0]==="b"&&(i+=x),A[1]==="r"&&(r+=y),A[0]==="c"&&(i+=kk(x/2)),A[1]==="c"&&(r+=kk(y/2)),A[3]==="b"&&(i-=m),A[4]==="r"&&(r-=u),A[3]==="c"&&(i-=kk(m/2)),A[4]==="c"&&(r-=kk(u/2)),Wy(r,i,u,m)},UG=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=d$(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},WG=(e,n,o)=>Wy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),ZG=(e,n)=>{const o=c0(e.x,n.x),r=c0(e.y,n.y),i=u$(e.x+e.w,n.x+n.w),u=u$(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:Wy(o,r,i-o,u-r)},jG=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,m=e.y+e.h;const y=n.x+n.w,x=n.y+n.h,A=c0(0,n.x-r),L=c0(0,n.y-i),$=c0(0,u-y),z=c0(0,m-x);return r+=A,i+=L,o&&(u+=A,m+=L,r-=$,i-=z),u-=$,m-=z,Wy(r,i,u-r,m-i)},Wy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),f$={inflate:WG,relativePosition:d$,findBestRelativePosition:UG,intersect:ZG,clamp:jG,create:Wy,fromClientRect:e=>Wy(e.left,e.top,e.width,e.height)},SX=(e,n,o=1e3)=>{let r=!1,i=null;const u=A=>(...L)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),A.apply(null,L))},m=u(e),y=u(n);return{start:(...A)=>{!r&&i===null&&(i=setTimeout(()=>y.apply(null,A),o))},resolve:m,reject:y}},GG=(()=>{const e={},n={},o={};return{load:(x,A)=>{const L=`Script at URL "${A}" failed to load`,$=`Script at URL "${A}" did not call \`tinymce.Resource.add('${x}', data)\` within 1 second`;if(e[x]!==void 0)return e[x];{const z=new Promise((X,oe)=>{const te=SX(X,oe);n[x]=te.resolve,pd.ScriptLoader.loadScript(A).then(()=>te.start($),()=>te.reject(L))});return e[x]=z,z}},add:(x,A)=>{n[x]!==void 0&&(n[x](A),delete n[x]),e[x]=Promise.resolve(A),o[x]=A},has:x=>x in o,get:x=>o[x],unload:x=>{delete e[x],delete o[x]}}})(),m$=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let nS;try{const e="__storage_test__";nS=window.localStorage,nS.setItem(e,e),nS.removeItem(e)}catch{nS=m$()}var KG=nS;const YG={geom:{Rect:f$},util:{Delay:vn,Tools:ut,VK:Ht,URI:Ni,EventDispatcher:Ck,Observable:y5,I18n:wd,LocalStorage:KG,ImageUploader:c6},dom:{EventUtils:Xm,TreeWalker:$a,TextSeeker:Qh,DOMUtils:$s,ScriptLoader:pd,RangeUtils:Wp,Serializer:LI,StyleSheetLoader:Fs,ControlSelection:Up,BookmarkManager:nl,Selection:II,Event:Xm.Event},html:{Styles:Ym,Entities:Zh,Node:sl,Schema:ms,DomParser:hy,Writer:QM,Serializer:Zp},Env:Nn,AddOnManager:Qi,Annotator:Rs,Formatter:Og,UndoManager:m6,EditorCommands:XF,WindowManager:RO,NotificationManager:Uz,EditorObservable:e$,Shortcuts:r$,Editor:Ek,FocusManager:C3,EditorManager:v1,DOM:$s.DOM,ScriptLoader:pd.ScriptLoader,PluginManager:vy,ThemeManager:Sm,ModelManager:by,IconManager:R_,Resource:GG,FakeClipboard:VG,trim:ut.trim,isArray:ut.isArray,is:ut.is,toArray:ut.toArray,makeMap:ut.makeMap,each:ut.each,map:ut.map,grep:ut.grep,inArray:ut.inArray,extend:ut.extend,walk:ut.walk,resolve:ut.resolve,explode:ut.explode,_addCacheSuffix:ut._addCacheSuffix},h$=ut.extend(v1,YG),XG=e=>{try{p.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(h$),XG(h$)})()}(pK)),pK.exports}wse();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M12 15v2a5 5 0 0 0 0-10v2a3 3 0 1 0 0 6zm0 0a3 3 0 1 0 0-6z"/><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm7-2h7V5h-7v2a5 5 0 0 0 0 10z"/></g></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z" clip-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path clip-rule="evenodd" d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});var PJ={},IJ;function Cse(){return IJ||(IJ=1,function(){const p=Object.getPrototypeOf,g=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},w=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&g(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},E=t=>s=>w(s)===t,N=t=>s=>typeof s===t,V=t=>s=>t===s,K=(t,s)=>le(t)&&g(t,s,(a,c)=>p(a)===c),j=E("string"),le=E("object"),ge=t=>K(t,Object),Ce=E("array"),Xe=V(null),Lt=N("boolean"),Zt=V(void 0),Pt=t=>t==null,Ct=t=>!Pt(t),Ne=N("function"),ln=N("number"),xt=(t,s)=>{if(Ce(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},de=()=>{},Je=t=>()=>t(),Dn=(t,s)=>(...a)=>t(s.apply(null,a)),Gt=(t,s)=>a=>t(s(a)),re=t=>()=>t,Xt=t=>t,In=(t,s)=>t===s;function en(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Fe=t=>s=>!t(s),ve=t=>()=>{throw new Error(t)},oo=t=>t(),at=re(!1),it=re(!0);class M{constructor(s,a){this.tag=s,this.value=a}static some(s){return new M(!0,s)}static none(){return M.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?M.some(s(this.value)):M.none()}bind(s){return this.tag?s(this.value):M.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:M.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Ct(s)?M.some(s):M.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}M.singletonNone=new M(!1);const Hn=Array.prototype.slice,wt=Array.prototype.indexOf,Eo=Array.prototype.push,yn=(t,s)=>wt.call(t,s),Ae=(t,s)=>{const a=yn(t,s);return a===-1?M.none():M.some(a)},yt=(t,s)=>yn(t,s)>-1,Mn=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},fn=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},io=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=Hn.call(t,c,c+s);a.push(d)}return a},$e=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const h=t[d];c[d]=s(h,d)}return c},gt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},W=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},Hs=(t,s)=>{const a=[],c=[];for(let d=0,h=t.length;d<h;d++){const b=t[d];(s(b,d)?a:c).push(b)}return{pass:a,fail:c}},to=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];s(h,c)&&a.push(h)}return a},To=(t,s,a)=>(W(t,(c,d)=>{a=s(a,c,d)}),a),zo=(t,s,a)=>(gt(t,(c,d)=>{a=s(a,c,d)}),a),gi=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const h=t[c];if(s(h,c))return M.some(h);if(a(h,c))break}return M.none()},et=(t,s)=>gi(t,s,at),_t=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return M.some(a)}return M.none()},dt=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!Ce(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Eo.apply(s,t[a])}return s},xe=(t,s)=>dt($e(t,s)),Oo=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Do=t=>{const s=Hn.call(t,0);return s.reverse(),s},Kt=(t,s)=>to(t,a=>!yt(s,a)),ls=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const h=t[c];a[String(h)]=s(h,c)}return a},Fo=t=>[t],zr=(t,s)=>{const a=Hn.call(t,0);return a.sort(s),a},Vo=(t,s)=>s>=0&&s<t.length?M.some(t[s]):M.none(),zs=t=>Vo(t,0),Xa=t=>Vo(t,t.length-1),_s=Ne(Array.from)?Array.from:t=>Hn.call(t),Ss=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return M.none()},xs=Object.keys,Yr=Object.hasOwnProperty,Ts=(t,s)=>{const a=xs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];s(b,h)}},Ko=(t,s)=>Mc(t,(a,c)=>({k:c,v:s(a,c)})),Mc=(t,s)=>{const a={};return Ts(t,(c,d)=>{const h=s(c,d);a[h.k]=h.v}),a},lo=t=>(s,a)=>{t[a]=s},gs=(t,s,a,c)=>{Ts(t,(d,h)=>{(s(d,h)?a:c)(d,h)})},Dr=(t,s)=>{const a={},c={};return gs(t,s,lo(a),lo(c)),{t:a,f:c}},Pi=(t,s)=>{const a={};return gs(t,s,lo(a),de),a},qi=(t,s)=>{const a=[];return Ts(t,(c,d)=>{a.push(s(c,d))}),a},ts=(t,s)=>{const a=xs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];if(s(b,h,t))return M.some(b)}return M.none()},Zc=t=>qi(t,Xt),Tt=(t,s)=>go(t,s)?M.from(t[s]):M.none(),go=(t,s)=>Yr.call(t,s),Vr=(t,s)=>go(t,s)&&t[s]!==void 0&&t[s]!==null,Ur=(t,s,a=In)=>t.exists(c=>a(c,s)),Ba=(t,s,a=In)=>La(t,s,a).getOr(t.isNone()&&s.isNone()),Ja=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},Qo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return M.none()}return M.some(s)},La=(t,s,a)=>t.isSome()&&s.isSome()?M.some(a(t.getOrDie(),s.getOrDie())):M.none(),Ii=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?M.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):M.none(),Yo=(t,s)=>t!=null?M.some(s(t)):M.none(),En=(t,s)=>t?M.some(s):M.none(),or=(t,s)=>t+s,Qa=(t,s)=>t.substring(s),ll=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,ul=(t,s)=>Vs(t,s)?Qa(t,s.length):t,vs=(t,s)=>xa(t,s)?t:or(t,s),wr=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?Zt(c)?!0:d+s.length<=c:!1},Vs=(t,s)=>ll(t,s,0),xa=(t,s)=>ll(t,s,t.length-s.length),Rr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),pe=t=>t.length>0,fe=t=>!pe(t),Ve=t=>{const s=parseFloat(t);return isNaN(s)?M.none():M.some(s)},Ge=t=>t.style!==void 0&&Ne(t.style.getPropertyValue),Cn=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Os(c.childNodes[0])},Ln=(t,s)=>{const c=(s||document).createElement(t);return Os(c)},Qn=(t,s)=>{const c=(s||document).createTextNode(t);return Os(c)},Os=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Ke={fromHtml:Cn,fromTag:Ln,fromText:Qn,fromDom:Os,fromPoint:(t,s,a)=>M.from(t.dom.elementFromPoint(s,a)).map(Os)},sr=typeof window<"u"?window:Function("return this;")(),Cr=(t,s)=>{let a=s??sr;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},ga=(t,s)=>{const a=t.split(".");return Cr(a,s)},es=(t,s)=>ga(t,s),jc=(t,s)=>{const a=es(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Xr=Object.getPrototypeOf,Ea=t=>jc("HTMLElement",t),Ms=t=>{const s=ga("ownerDocument.defaultView",t);return le(t)&&(Ea(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Xr(t).constructor.name))},ns=9,us=11,Wr=1,mc=3,Ns=t=>t.dom.nodeName.toLowerCase(),dl=t=>t.dom.nodeType,ei=t=>s=>dl(s)===t,ds=t=>lr(t)&&Ms(t.dom),lr=ei(Wr),rr=ei(mc),hc=ei(ns),pi=ei(us),pa=t=>s=>lr(s)&&Ns(s)===t,ys=(t,s)=>{const a=t.dom;if(a.nodeType!==Wr)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},$d=t=>t.nodeType!==Wr&&t.nodeType!==ns&&t.nodeType!==us||t.childElementCount===0,gc=(t,s)=>{const a=s===void 0?document:s.dom;return $d(a)?[]:$e(a.querySelectorAll(t),Ke.fromDom)},Ku=(t,s)=>{const a=s===void 0?document:s.dom;return $d(a)?M.none():M.from(a.querySelector(t)).map(Ke.fromDom)},So=(t,s)=>t.dom===s.dom,Pc=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},Us=t=>Ke.fromDom(t.dom.ownerDocument),hu=t=>hc(t)?t:Us(t),Gi=t=>Ke.fromDom(hu(t).dom.documentElement),Ic=t=>Ke.fromDom(hu(t).dom.defaultView),Mr=t=>M.from(t.dom.parentNode).map(Ke.fromDom),Yu=t=>Mr(t),bi=t=>M.from(t.dom.parentElement).map(Ke.fromDom),Hd=(t,s)=>{const a=Ne(s)?s:at;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const h=c.parentNode,b=Ke.fromDom(h);if(d.push(b),a(b)===!0)break;c=h}return d},fl=t=>M.from(t.dom.offsetParent).map(Ke.fromDom),zd=t=>M.from(t.dom.nextSibling).map(Ke.fromDom),Sr=t=>$e(t.dom.childNodes,Ke.fromDom),pc=(t,s)=>{const a=t.dom.childNodes;return M.from(a[s]).map(Ke.fromDom)},ml=t=>pc(t,0),Xu=(t,s)=>({element:t,offset:s}),hl=(t,s)=>{const a=Sr(t);return a.length>0&&s<a.length?Xu(a[s],0):Xu(t,s)},qc=t=>pi(t)&&Ct(t.dom.host),br=t=>Ke.fromDom(t.dom.getRootNode()),Nr=t=>qc(t)?t:Ke.fromDom(hu(t).dom.body),vi=t=>Hl(t).isSome(),Hl=t=>{const s=br(t);return qc(s)?M.some(s):M.none()},gu=t=>Ke.fromDom(t.dom.host),Y=t=>{if(Ct(t.target)){const s=Ke.fromDom(t.target);if(lr(s)&&he(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return zs(a)}}return M.from(t.target)},he=t=>Ct(t.dom.shadowRoot),ke=t=>{const s=rr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Hl(Ke.fromDom(s)).fold(()=>a.body.contains(s),Gt(ke,gu))},Ye=()=>kt(Ke.fromDom(document)),kt=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Ke.fromDom(s)},nn=(t,s,a)=>{if(j(a)||Lt(a)||ln(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},$t=(t,s,a)=>{nn(t.dom,s,a)},Nn=(t,s)=>{const a=t.dom;Ts(s,(c,d)=>{nn(a,d,c)})},Vn=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},ko=(t,s)=>M.from(Vn(t,s)),H=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ee=(t,s)=>{t.dom.removeAttribute(s)},ye=t=>zo(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Be=(t,s,a)=>{if(!j(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ge(t)&&t.style.setProperty(s,a)},cn=(t,s)=>{Ge(t)&&t.style.removeProperty(s)},It=(t,s,a)=>{const c=t.dom;Be(c,s,a)},$o=(t,s)=>{const a=t.dom;Ts(s,(c,d)=>{Be(a,d,c)})},na=(t,s)=>{const a=t.dom;Ts(s,(c,d)=>{c.fold(()=>{cn(a,d)},h=>{Be(a,d,h)})})},ut=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!ke(t)?ti(a,s):d},ti=(t,s)=>Ge(t)?t.style.getPropertyValue(s):"",fs=(t,s)=>{const a=t.dom,c=ti(a,s);return M.from(c).filter(d=>d.length>0)},Gc=t=>{const s={},a=t.dom;if(Ge(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},ur=(t,s,a)=>{const c=Ke.fromTag(t);return It(c,s,a),fs(c,s).isSome()},uo=(t,s)=>{const a=t.dom;cn(a,s),Ur(ko(t,"style").map(Rr),"")&&ee(t,"style")},yi=t=>t.dom.offsetWidth,Jr=(t,s)=>{const a=(S,T)=>{if(!ln(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const D=S.dom;Ge(D)&&(D.style[t]=T+"px")},c=S=>{const T=s(S);if(T<=0||T===null){const D=ut(S,t);return parseFloat(D)||0}return T},d=c,h=(S,T)=>zo(T,(D,P)=>{const F=ut(S,P),G=F===void 0?0:parseInt(F,10);return isNaN(G)?D:D+G},0);return{set:a,get:c,getOuter:d,aggregate:h,max:(S,T,D)=>{const P=h(S,D);return T>P?T-P:0}}},wi=Jr("height",t=>{const s=t.dom;return ke(t)?s.getBoundingClientRect().height:s.offsetHeight}),xr=t=>wi.get(t),zl=t=>wi.getOuter(t),$g=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=wi.max(t,s,a);It(t,"max-height",c+"px")},E1=(t,s)=>({left:t,top:s,translate:(c,d)=>E1(t+c,s+d)}),Ds=E1,Vl=t=>{const s=t.getBoundingClientRect();return Ds(s.left,s.top)},Qr=(t,s)=>t!==void 0?t:s!==void 0?s:0,_a=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return Ds(a.offsetLeft,a.offsetTop);const h=Qr(c==null?void 0:c.pageYOffset,d.scrollTop),b=Qr(c==null?void 0:c.pageXOffset,d.scrollLeft),S=Qr(d.clientTop,a.clientTop),T=Qr(d.clientLeft,a.clientLeft);return Ci(t).translate(b-T,h-S)},Ci=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?Ds(c.offsetLeft,c.offsetTop):ke(t)?Vl(s):Ds(0,0)},pu=Jr("width",t=>t.dom.offsetWidth),Nm=(t,s)=>pu.set(t,s),no=t=>pu.get(t),gl=t=>pu.getOuter(t),Ul=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=pu.max(t,s,a);It(t,"max-width",c+"px")},Wl=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},Pm=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,b=t.isiOS()||t.isAndroid(),S=b||c("(pointer:coarse)"),T=d||!h&&b&&c("(min-device-width:768px)"),D=h||b&&!T,P=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,F=!D&&!T&&!P;return{isiPad:re(d),isiPhone:re(h),isTablet:re(T),isPhone:re(D),isTouch:re(S),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:re(P),isDesktop:re(F)}},Ps=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},oa=(t,s)=>{const a=Ps(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return bu(c(1),c(2))},Ju=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Ah():oa(t,a)},Ah=()=>bu(0,0),bu=(t,s)=>({major:t,minor:s}),Si={nu:bu,detect:Ju,unknown:Ah},sa=(t,s)=>Ss(s.brands,a=>{const c=a.brand.toLowerCase();return et(t,d=>{var h;return c===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:Si.nu(parseInt(a.version,10),0)}))}),Fa=(t,s)=>{const a=String(s).toLowerCase();return et(t,c=>c.search(a))},ni=(t,s)=>Fa(t,s).map(a=>{const c=Si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Er=(t,s)=>Fa(t,s).map(a=>{const c=Si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Qu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Is=t=>s=>wr(s,t),Vd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>wr(t,"edge/")&&wr(t,"chrome")&&wr(t,"safari")&&wr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qu],search:t=>wr(t,"chrome")&&!wr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>wr(t,"msie")||wr(t,"trident")},{name:"Opera",versionRegexes:[Qu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Is("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Is("firefox")},{name:"Safari",versionRegexes:[Qu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(wr(t,"safari")||wr(t,"mobile/"))&&wr(t,"applewebkit")}],zf=[{name:"Windows",search:Is("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>wr(t,"iphone")||wr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Is("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Is("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Is("linux"),versionRegexes:[]},{name:"Solaris",search:Is("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Is("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Is("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Zl={browsers:re(Vd),oses:re(zf)},Ud="Edge",Wd="Chromium",ed="IE",td="Opera",bc="Firefox",oi="Safari",Hg=()=>pl({current:void 0,version:Si.unknown()}),pl=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(Ud),isChromium:c(Wd),isIE:c(ed),isOpera:c(td),isFirefox:c(bc),isSafari:c(oi)}},Im={unknown:Hg,nu:pl},Zd="Windows",Oh="iOS",Bm="Android",jd="Linux",Lm="macOS",Dh="Solaris",nd="FreeBSD",Rh="ChromeOS",be=()=>od({current:void 0,version:Si.unknown()}),od=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(Zd),isiOS:c(Oh),isAndroid:c(Bm),isMacOS:c(Lm),isLinux:c(jd),isSolaris:c(Dh),isFreeBSD:c(nd),isChromeOS:c(Rh)}},xi={unknown:be,nu:od},zg={detect:(t,s,a)=>{const c=Zl.browsers(),d=Zl.oses(),h=s.bind(T=>sa(c,T)).orThunk(()=>ni(c,t)).fold(Im.unknown,Im.nu),b=Er(d,t).fold(xi.unknown,xi.nu),S=Pm(b,h,t,a);return{browser:h,os:b,deviceType:S}}},vu=t=>window.matchMedia(t).matches;let No=Wl(()=>zg.detect(window.navigator.userAgent,M.from(window.navigator.userAgentData),vu));const dr=()=>No(),Ta=(t,s,a,c,d,h,b)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:h,raw:b}),jl=t=>{const s=Ke.fromDom(Y(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=Dn(c,a);return Ta(s,t.clientX,t.clientY,a,c,d,t)},Mh=(t,s)=>a=>{t(a)&&s(jl(a))},sd=(t,s,a,c,d)=>{const h=Mh(a,c);return t.dom.addEventListener(s,h,d),{unbind:en($m,t,s,h,d)}},si=(t,s,a,c)=>sd(t,s,a,c,!1),Fm=(t,s,a,c)=>sd(t,s,a,c,!0),$m=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},yu=(t,s)=>{Mr(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},wu=(t,s)=>{zd(t).fold(()=>{Mr(t).each(d=>{vc(d,s)})},c=>{yu(c,s)})},Vf=(t,s)=>{ml(t).fold(()=>{vc(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},vc=(t,s)=>{t.dom.appendChild(s.dom)},Uf=(t,s,a)=>{pc(t,a).fold(()=>{vc(t,s)},c=>{yu(c,s)})},ba=(t,s)=>{gt(s,a=>{vc(t,a)})},Cu=t=>{t.dom.textContent="",gt(Sr(t),s=>{Kc(s)})},Kc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},ri=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return Ds(a,c)},rd=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},T1=t=>{const s=t===void 0?window:t;return dr().browser.isFirefox()?M.none():M.from(s.visualViewport)},Hm=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),bl=t=>{const s=t===void 0?window:t,a=s.document,c=ri(Ke.fromDom(a));return T1(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,b=d.clientHeight;return Hm(c.left,c.top,h,b)},d=>Hm(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},qd=()=>Ke.fromDom(document),Vg=(t,s)=>t.view(s).fold(re([]),c=>{const d=t.owner(c),h=Vg(t,d);return[c].concat(h)}),zm=(t,s)=>{const a=s.owner(t),c=Vg(s,a);return M.some(c)};var Zg=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?M.none():M.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Ke.fromDom)},owner:t=>Us(t)});const vl=t=>{const s=qd(),a=ri(s);return zm(t,Zg).fold(en(_a,t),d=>{const h=Ci(t),b=To(d,(S,T)=>{const D=Ci(T);return{left:S.left+D.left,top:S.top+D.top}},{left:0,top:0});return Ds(b.left+h.left+a.left,b.top+h.top+a.top)})},Nh=(t,s,a)=>({point:t,width:s,height:a}),Yc=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),fr=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Pr=t=>{const s=_a(t),a=gl(t),c=zl(t);return fr(s.left,s.top,a,c)},Ki=t=>{const s=vl(t),a=gl(t),c=zl(t);return fr(s.left,s.top,a,c)},Gd=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),b=d-a,S=h-c;return fr(a,c,b,S)},Kd=(t,s)=>zo(s,(a,c)=>Gd(a,c),t),ea=()=>bl(window),mn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Ph=t=>{const s=mn(M.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(M.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:S=>{a(),s.set(M.some(S))}}},yl=()=>Ph(t=>t.destroy()),Yi=()=>Ph(t=>t.unbind()),Xo=()=>{const t=Ph(de);return{...t,on:a=>t.get().each(a)}};var ad=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Wf=t=>{const s=h=>h(t),a=re(t),c=()=>d,d={tag:!0,inner:t,fold:(h,b)=>b(t),isValue:it,isError:at,map:h=>Gn.value(h(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:h=>{h(t)},toOptional:()=>M.some(t)};return d},Zf=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:at,isError:it,map:s,mapError:c=>Gn.error(c(t)),bind:s,exists:at,forall:it,getOr:Xt,or:Xt,getOrThunk:oo,orThunk:oo,getOrDie:ve(String(t)),each:de,toOptional:M.none};return a},Gn={value:Wf,error:Zf,fromOption:(t,s)=>t.fold(()=>Zf(s),Wf)};var vr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(vr||(vr={}));const Yd=(t,s,a)=>t.stype===vr.Error?s(t.serror):a(t.svalue),Bi=t=>{const s=[],a=[];return gt(t,c=>{Yd(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},ai=(t,s)=>t.stype===vr.Error?{stype:vr.Error,serror:s(t.serror)}:t,Xi=(t,s)=>t.stype===vr.Value?{stype:vr.Value,svalue:s(t.svalue)}:t,ra=(t,s)=>t.stype===vr.Value?s(t.svalue):t,Ei=(t,s)=>t.stype===vr.Error?s(t.serror):t,yc=t=>({stype:vr.Value,svalue:t}),Xd=t=>({stype:vr.Error,serror:t}),_r={fromResult:t=>t.fold(Xd,yc),toResult:t=>Yd(t,Gn.error,Gn.value),svalue:yc,partition:Bi,serror:Xd,bind:ra,bindError:Ei,map:Xi,mapError:ai,fold:Yd},wl=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),Cl=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),ws=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Li=(t,s)=>s,jf=(t,s)=>ge(t)&&ge(s)?Bs(t,s):s,id=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const h in d)go(d,h)&&(a[h]=t(a[h],d[h]))}return a},Bs=id(jf),Su=id(Li),Xc=()=>({tag:"required",process:{}}),po=t=>({tag:"defaultedThunk",process:t}),Jd=t=>po(re(t)),Um=()=>({tag:"option",process:{}}),k=t=>({tag:"mergeWithThunk",process:t}),B=t=>k(re(t)),q=(t,s)=>t.length>0?_r.svalue(Bs(s,Su.apply(void 0,t))):_r.svalue(s),me=t=>Dn(_r.serror,dt)(t),kn={consolidateObj:(t,s)=>{const a=_r.partition(t);return a.errors.length>0?me(a.errors):q(a.values,s)},consolidateArr:t=>{const s=_r.partition(t);return s.errors.length>0?me(s.errors):_r.svalue(s.values)}},eo=t=>le(t)&&xs(t).length>100?" removed due to size":JSON.stringify(t,null,2),Kn=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:re("... (only showing first ten failures)")}]):t;return $e(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},pn=(t,s)=>_r.serror([{path:t,getErrorInfo:s}]),Ws=(t,s,a)=>pn(t,()=>'Could not find valid *required* value for "'+s+'" in '+eo(a)),Ir=(t,s)=>pn(t,()=>'Choice schema did not contain choice key: "'+s+'"'),_i=(t,s,a)=>pn(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+eo(s)),xu=(t,s)=>pn(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),qg=(t,s)=>pn(t,re(s)),qf=t=>{const s=(c,d)=>_r.bindError(t(d),h=>qg(c,h)),a=re("val");return{extract:s,toString:a}},Ih=qf(_r.svalue),ii=(t,s,a,c)=>Tt(s,a).fold(()=>Ws(t,a,s),c),Gg=(t,s,a,c)=>{const d=Tt(t,s).getOrThunk(()=>a(t));return c(d)},n2=(t,s,a)=>a(Tt(t,s)),k1=(t,s,a,c)=>{const d=Tt(t,s).map(h=>h===!0?a(t):h);return c(d)},$a=(t,s,a,c,d)=>{const h=S=>d.extract(s.concat([c]),S),b=S=>S.fold(()=>_r.svalue(M.none()),T=>{const D=d.extract(s.concat([c]),T);return _r.map(D,M.some)});switch(t.tag){case"required":return ii(s,a,c,h);case"defaultedThunk":return Gg(a,c,t.process,h);case"option":return n2(a,c,b);case"defaultedOptionThunk":return k1(a,c,t.process,b);case"mergeWithThunk":return Gg(a,c,re({}),S=>{const T=Bs(t.process(a),S);return h(T)})}},Kg=(t,s,a)=>{const c={},d=[];for(const h of a)ws(h,(b,S,T,D)=>{const P=$a(T,t,s,b,D);_r.fold(P,F=>{d.push(...F)},F=>{c[S]=F})},(b,S)=>{c[b]=S(s)});return d.length>0?_r.serror(d):_r.svalue(c)},Zr=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),Wm=t=>xs(Pi(t,Ct)),ci=t=>{const s=Fn(t),a=To(t,(d,h)=>ws(h,b=>Bs(d,{[b]:!0}),re(d)),{});return{extract:(d,h)=>{const b=Lt(h)?[]:Wm(h),S=to(b,T=>!Vr(a,T));return S.length===0?s.extract(d,h):xu(d,S)},toString:s.toString}},Fn=t=>({extract:(c,d)=>Kg(c,d,t),toString:()=>`obj{
`+$e(t,d=>ws(d,(h,b,S,T)=>h+" -> "+T.toString(),(h,b)=>"state("+h+")")).join(`
`)+"}"}),Jc=t=>({extract:(c,d)=>{const h=$e(d,(b,S)=>t.extract(c.concat(["["+S+"]"]),b));return kn.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),Qd=(t,s)=>{const a=s!==void 0?s:Xt;return{extract:(h,b)=>{const S=[];for(const T of t){const D=T.extract(h,b);if(D.stype===vr.Value)return{stype:vr.Value,svalue:a(D.svalue)};S.push(D)}return kn.consolidateArr(S)},toString:()=>"oneOf("+$e(t,h=>h.toString()).join(", ")+")"}},Yg=(t,s)=>{const a=(h,b)=>Jc(qf(t)).extract(h,b);return{extract:(h,b)=>{const S=xs(b),T=a(h,S);return _r.bind(T,D=>{const P=$e(D,F=>wl(F,F,Xc(),s));return Fn(P).extract(h,b)})},toString:()=>"setOf("+s.toString()+")"}},v0=(t,s)=>{const a=Wl(s);return{extract:(h,b)=>a().extract(h,b),toString:()=>a().toString()}},Xg=Dn(Jc,Fn),Sl=re(Ih),Eu=(t,s)=>qf(a=>{const c=typeof a;return t(a)?_r.svalue(a):_r.serror(`Expected type: ${s} but got: ${c}`)}),ef=Eu(ln,"number"),Ut=Eu(j,"string"),xl=Eu(Lt,"boolean"),A1=Eu(Ne,"function"),Gf=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Gf(t[s]));default:return!1}},El=qf(t=>Gf(t)?_r.svalue(t):_r.serror("Expected value to be acceptable for sending via postMessage")),Bh=(t,s,a,c)=>Tt(a,c).fold(()=>_i(t,a,c),h=>h.extract(t.concat(["branch: "+c]),s)),tf=(t,s)=>({extract:(d,h)=>Tt(h,t).fold(()=>Ir(d,t),S=>Bh(d,h,s,S)),toString:()=>"chooseOn("+t+"). Possible values: "+xs(s)}),Kf=()=>Jc(Ih),Lh=t=>qf(s=>t(s).fold(_r.serror,_r.svalue)),ql=(t,s)=>Yg(a=>_r.fromResult(t(a)),s),y0=(t,s,a)=>{const c=s.extract([t],a);return _r.mapError(c,d=>({input:a,errors:d}))},ar=(t,s,a)=>_r.toResult(y0(t,s,a)),bt=t=>t.fold(s=>{throw new Error(Gl(s))},Xt),Fi=(t,s,a)=>bt(ar(t,s,a)),Gl=t=>`Errors: 
`+Kn(t.errors).join(`
`)+`

Input object: `+eo(t.input),aa=(t,s)=>tf(t,Ko(s,Fn)),Zm=(t,s)=>v0(t,s),ia=wl,jo=Cl,Jg=t=>Lh(s=>yt(t,s)?Gn.value(s):Gn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),st=t=>ia(t,t,Xc(),Sl()),qo=(t,s)=>ia(t,t,Xc(),s),Qg=t=>qo(t,ef),ta=t=>qo(t,Ut),ka=(t,s)=>ia(t,t,Xc(),Jg(s)),_l=t=>qo(t,A1),O1=(t,s)=>ia(t,t,Um(),qf(a=>_r.serror("The field: "+t+" is forbidden. "+s))),nf=(t,s)=>ia(t,t,Xc(),Fn(s)),D1=(t,s)=>ia(t,t,Xc(),Xg(s)),wc=(t,s)=>ia(t,t,Xc(),Jc(s)),Uo=t=>ia(t,t,Um(),Sl()),_u=(t,s)=>ia(t,t,Um(),s),Fh=t=>_u(t,ef),hr=t=>_u(t,Ut),ep=(t,s)=>_u(t,Jg(s)),cd=t=>_u(t,A1),$h=(t,s)=>_u(t,Jc(s)),jr=(t,s)=>_u(t,Fn(s)),ca=(t,s)=>_u(t,ci(s)),Pe=(t,s)=>ia(t,t,Jd(s),Sl()),Zs=(t,s,a)=>ia(t,t,Jd(s),a),R1=(t,s)=>Zs(t,s,ef),Ls=(t,s)=>Zs(t,s,Ut),li=(t,s,a)=>Zs(t,s,Jg(a)),Aa=(t,s)=>Zs(t,s,xl),os=(t,s)=>Zs(t,s,A1),_=(t,s)=>Zs(t,s,El),R=(t,s,a)=>Zs(t,s,Jc(a)),Z=(t,s,a)=>Zs(t,s,Fn(a)),Se={generate:t=>{if(!Ce(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return gt(t,(c,d)=>{const h=xs(c);if(h.length!==1)throw new Error("one and only one name per case");const b=h[0],S=c[b];if(a[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ce(S))throw new Error("case arguments must be an array");s.push(b),a[b]=(...T)=>{const D=T.length;if(D!==S.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+S.length+" ("+S+"), got "+D);return{fold:(...F)=>{if(F.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+F.length);return F[d].apply(null,T)},match:F=>{const G=xs(F);if(s.length!==G.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+G.join(","));if(!Oo(s,se=>yt(G,se)))throw new Error("Not all branches were specified when using match. Specified: "+G.join(", ")+`
Required: `+s.join(", "));return F[b].apply(null,T)},log:F=>{console.log(F,{constructors:s,constructor:b,params:T})}}}}),a}};Se.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const rt=t=>{const s=[],a=[];return gt(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},At=(t,s)=>{const a={};return Ts(t,(c,d)=>{yt(s,d)||(a[d]=c)}),a},un=(t,s)=>({[t]:s}),jn=t=>{const s={};return gt(t,a=>{s[a.key]=a.value}),s},ao=(t,s)=>At(t,s),as=(t,s)=>un(t,s),ss=t=>jn(t),Qs=(t,s)=>t.length===0?Gn.value(s):Gn.value(Bs(s,Su.apply(void 0,t))),Ti=t=>Gn.error(dt(t)),Kl=(t,s)=>{const a=rt(t);return a.errors.length>0?Ti(a.errors):Qs(a.values,s)},ld=t=>Ne(t)?t:at,$i=(t,s,a)=>{let c=t.dom;const d=ld(a);for(;c.parentNode;){c=c.parentNode;const h=Ke.fromDom(c),b=s(h);if(b.isSome())return b;if(d(h))break}return M.none()},of=(t,s,a)=>{const c=s(t),d=ld(a);return c.orThunk(()=>d(t)?M.none():$i(t,s,d))},Yf=(t,s)=>So(t.element,s.event.target),Yl={can:it,abort:at,run:de},Xl=t=>{if(!Vr(t,"can")&&!Vr(t,"abort")&&!Vr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Yl,...t}},jm=(t,s)=>(...a)=>zo(t,(c,d)=>c&&s(d).apply(void 0,a),!0),Hh=(t,s)=>(...a)=>zo(t,(c,d)=>c||s(d).apply(void 0,a),!1),zh=t=>Ne(t)?{can:it,abort:at,run:t}:t,o2=t=>{const s=jm(t,d=>d.can),a=Hh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{gt(t,h=>{h.run.apply(void 0,d)})}}},la=re,xo=la("touchstart"),Fs=la("touchmove"),va=la("touchend"),Cc=la("touchcancel"),Bc=la("mousedown"),Vh=la("mousemove"),Xf=la("mouseout"),ud=la("mouseup"),dd=la("mouseover"),fd=la("focusin"),vS=la("focusout"),Hi=la("keydown"),yS=la("keyup"),Jl=la("input"),Jf=la("change"),Uh=la("click"),Uk=la("transitioncancel"),tp=la("transitionend"),Wh=la("transitionstart"),wS=la("selectstart"),Br=t=>re("alloy."+t),s2={tap:Br("tap")},md=Br("focus"),qm=Br("blur.post"),np=Br("paste.post"),Ql=Br("receive"),ki=Br("execute"),w0=Br("focus.item"),M1=s2.tap,Zh=Br("longpress"),Ha=Br("sandbox.close"),C0=Br("typeahead.cancel"),S0=Br("system.init"),CS=Br("system.touchmove"),N1=Br("system.touchend"),P1=Br("system.scroll"),Qf=Br("system.resize"),Ji=Br("system.attached"),Lc=Br("system.detached"),hd=Br("system.dismissRequested"),r2=Br("system.repositionRequested"),I1=Br("focusmanager.shifted"),op=Br("slotcontainer.visibility"),SS=Br("system.external.element.scroll"),xS=Br("change.tab"),ES=Br("dismiss.tab"),a2=Br("highlight"),Gm=Br("dehighlight"),bo=(t,s)=>{B1(t,t.element,s,{})},bn=(t,s,a)=>{B1(t,t.element,s,a)},Km=t=>{bo(t,ki())},x0=(t,s,a)=>{B1(t,s,a,{})},B1=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},_S=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},E0=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},ms=t=>ss(t),i2=(t,s)=>({key:t,value:Xl({abort:s})}),Wk=(t,s)=>({key:t,value:Xl({can:s})}),c2=t=>({key:t,value:Xl({run:(s,a)=>{a.event.prevent()}})}),ot=(t,s)=>({key:t,value:Xl({run:s})}),_0=(t,s,a)=>({key:t,value:Xl({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),L1=t=>s=>ot(t,s),T0=t=>s=>({key:t,value:Xl({run:(a,c)=>{Yf(a,c)&&s(a,c)}})}),F1=(t,s)=>ot(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{E0(d,d.element,t,c)})}),sp=(t,s,a)=>{const c=s.partUids[a];return F1(t,c)},k0=(t,s)=>ot(t,(a,c)=>{const d=c.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>of(d.target,S=>a.getSystem().getByDom(S).toOptional(),at).getOr(a));s(a,h,c)}),jh=t=>ot(t,(s,a)=>{a.cut()}),$1=t=>ot(t,(s,a)=>{a.stop()}),Ym=(t,s)=>T0(t)(s),er=T0(Ji()),sf=T0(Lc()),TS=T0(S0()),rf=L1(ki()),A0=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,h=c.indexOf("("),b=c.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:H1(b.slice(0,1).concat(b.slice(3)))}),t},H1=t=>$e(t,s=>xa(s,"/*")?s.substring(0,s.length-2):s),z1=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:H1(h)}),t},O0=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:H1(h.slice(1))}),t},Fc=t=>({classes:Zt(t.classes)?[]:t.classes,attributes:Zt(t.attributes)?{}:t.attributes,styles:Zt(t.styles)?{}:t.styles}),D0=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),kS=(t,s,a)=>rf(c=>{a(c,t,s)}),qh=(t,s,a)=>TS((c,d)=>{a(c,t,s)}),Zk=(t,s,a,c,d,h)=>{const b=ci(t),S=jr(s,[ca("config",t)]);return R0(b,S,s,a,c,d,h)},Xm=(t,s,a,c,d,h)=>{const b=t,S=jr(s,[_u("config",t)]);return R0(b,S,s,a,c,d,h)},l2=(t,s,a)=>A0((d,...h)=>{const b=[d].concat(h);return d.config({name:re(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},S=>{const T=Array.prototype.slice.call(b,1);return s.apply(void 0,[d,S.config,S.state].concat(T))})},a,s),AS=t=>({key:t,value:void 0}),R0=(t,s,a,c,d,h,b)=>{const S=F=>Vr(F,a)?F[a]():M.none(),T=Ko(d,(F,G)=>l2(a,F,G)),P={...Ko(h,(F,G)=>z1(F,G)),...T,revoke:en(AS,a),config:F=>{const G=Fi(a+"-config",t,F);return{key:a,value:{config:G,me:P,configAsRaw:Wl(()=>Fi(a+"-config",t,F)),initialConfig:F,state:b}}},schema:re(s),exhibit:(F,G)=>La(S(F),Tt(c,"exhibit"),(J,se)=>se(G,J.config,J.state)).getOrThunk(()=>Fc({})),name:re(a),handlers:F=>S(F).map(G=>Tt(c,"events").getOr(()=>({}))(G.config,G.state)).getOr({})};return P},gd={init:()=>ui({readState:re("No State required")})},ui=t=>t,Et=t=>ss(t),rp=ci([st("fields"),st("name"),Pe("active",{}),Pe("apis",{}),Pe("state",gd),Pe("extra",{})]),ya=t=>{const s=Fi("Creating behaviour: "+t.name,rp,t);return Zk(s.fields,s.name,s.active,s.apis,s.extra,s.state)},jk=ci([st("branchKey"),st("branches"),st("name"),Pe("active",{}),Pe("apis",{}),Pe("state",gd),Pe("extra",{})]),V1=t=>{const s=Fi("Creating behaviour: "+t.name,jk,t);return Xm(aa(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},qk=re(void 0),$s=(t,s)=>{const a=Vn(t,s);return a===void 0||a===""?[]:a.split(" ")},Gh=(t,s,a)=>{const d=$s(t,s).concat([a]);return $t(t,s,d.join(" ")),!0},M0=(t,s,a)=>{const c=to($s(t,s),d=>d!==a);return c.length>0?$t(t,s,c.join(" ")):ee(t,s),!1},ap=t=>t.dom.classList!==void 0,ip=t=>$s(t,"class"),u2=(t,s)=>Gh(t,"class",s),pd=(t,s)=>M0(t,"class",s),Gk=(t,s)=>yt(ip(t),s)?pd(t,s):u2(t,s),Lr=(t,s)=>{ap(t)?t.dom.classList.add(s):u2(t,s)},bd=t=>{(ap(t)?t.dom.classList:ip(t)).length===0&&ee(t,"class")},mr=(t,s)=>{ap(t)?t.dom.classList.remove(s):pd(t,s),bd(t)},d2=(t,s)=>{const a=ap(t)?t.dom.classList.toggle(s):Gk(t,s);return bd(t),a},Sc=(t,s)=>ap(t)&&t.dom.classList.contains(s),cp=(t,s)=>{gt(s,a=>{Lr(t,a)})},vd=(t,s)=>{gt(s,a=>{mr(t,a)})},N0=(t,s)=>{gt(s,a=>{d2(t,a)})},Kk=(t,s)=>Oo(s,a=>Sc(t,a)),Yk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},OS=t=>ap(t)?Yk(t):ip(t),yd=(t,s,a,c,d)=>{const h=b=>b+"px";return{position:t,left:s.map(h),top:a.map(h),right:c.map(h),bottom:d.map(h)}},wd=t=>({...t,position:M.some(t.position)}),Qi=(t,s)=>{na(t,wd(s))},lp=t=>(Ur(fs(t,"position"),"fixed")?M.none():fl(t)).orThunk(()=>{const c=Ke.fromTag("span");return Mr(t).bind(d=>{vc(d,c);const h=fl(c);return Kc(c),h})}),Kh=t=>lp(t).map(_a).getOrThunk(()=>Ds(0,0)),DS=(t,s)=>{const a=t.element;Lr(a,s.transitionClass),mr(a,s.fadeOutClass),Lr(a,s.fadeInClass),s.onShow(t)},up=(t,s)=>{const a=t.element;Lr(a,s.transitionClass),mr(a,s.fadeInClass),Lr(a,s.fadeOutClass),s.onHide(t)},af=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Yh=(t,s)=>t.y>=s.y,Xh=(t,s)=>t.bottom<=s.bottom,em=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),cf=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Jh=t=>t.box.x-t.win.x,U1=(t,s,a)=>{const c=s.win,d=s.box,h=Jh(s);return Ss(t,b=>{switch(b){case"bottom":return Xh(d,a.bounds)?M.none():M.some(cf(c,h,a));case"top":return Yh(d,a.bounds)?M.none():M.some(em(c,h,a));default:return M.none()}}).getOr({location:"no-dock"})},Xk=(t,s,a)=>Oo(t,c=>{switch(c){case"bottom":return Xh(s,a.bounds);case"top":return Yh(s,a.bounds)}}),f2=(t,s)=>{const a=s.optScrollEnv.fold(re(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return Ds(t.bounds.x,a)},P0=(t,s)=>{const a=s.optScrollEnv.fold(re(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return Ds(t.x,a)},I0=(t,s,a)=>a.getInitialPos().map(c=>{const d=f2(c,s);return{box:fr(d.left,d.top,no(t),xr(t)),location:c.location}}),RS=(t,s,a,c,d)=>{const h=P0(s,a),b=fr(h.left,h.top,s.width,s.height);c.setInitialPos({style:Gc(t),position:ut(t,"position")||"static",bounds:b,location:d.location})},m2=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>RS(t,s,a,c,d),()=>de)},B0=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return M.some({morph:"static"});case"absolute":const h=lp(t).getOr(Ye()),b=Pr(h),S=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return M.some({morph:"absolute",positionCss:yd("absolute",Tt(c.style,"left").map(T=>s.x-b.x),Tt(c.style,"top").map(T=>s.y-b.y+S),Tt(c.style,"right").map(T=>b.right-s.right),Tt(c.style,"bottom").map(T=>b.bottom-s.bottom))});default:return M.none()}}),MS=(t,s,a)=>I0(t,s,a).filter(({box:c})=>Xk(a.getModes(),c,s)).bind(({box:c})=>B0(t,c,a)),W1=t=>{switch(t.location){case"top":return M.some({morph:"fixed",positionCss:yd("fixed",M.some(t.leftX),M.some(t.topY),M.none(),M.none())});case"bottom":return M.some({morph:"fixed",positionCss:yd("fixed",M.some(t.leftX),M.none(),M.none(),M.some(t.bottomY))});default:return M.none()}},h2=(t,s,a)=>{const c=Pr(t),d=ea(),h=U1(a.getModes(),{win:d,box:c},s);return h.location==="top"||h.location==="bottom"?(RS(t,c,s,a,h),W1(h)):M.none()},L0=(t,s,a)=>MS(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>I0(t,s,a)).bind(({box:c,location:d})=>{const h=ea(),b=Jh({win:h,box:c}),S=d==="top"?em(h,b,s):cf(h,b,s);return W1(S)})),eM=(t,s,a)=>{const c=t.element;return Ur(fs(c,"position"),"fixed")?L0(c,s,a):h2(c,s,a)},Z1=(t,s,a)=>{const c=t.element;return I0(c,s,a).bind(({box:d})=>B0(c,d,a))},dp=(t,s,a,c)=>{const d=Pr(t),h=ea(),b=Jh({win:h,box:d}),S=c(h,b,s);return S.location==="bottom"||S.location==="top"?(m2(t,d,s,a,S),W1(S)):M.none()},tm=(t,s,a)=>{a.setDocked(!1),gt(["left","right","top","bottom","position"],c=>uo(t.element,c)),s.onUndocked(t)},F0=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),Qi(t.element,c),(d?s.onDocked:s.onUndocked)(t)},NS=(t,s,a,c,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(b=>{const S=af(b,c.bounds);S!==a.isVisible()&&(a.setVisible(S),d&&!S?(cp(t.element,[h.fadeOutClass]),h.onHide(t)):(S?DS:up)(t,h))})})},PS=(t,s,a,c,d)=>{NS(t,s,a,c,!0),F0(t,s,a,d.positionCss)},IS=(t,s,a,c,d)=>{switch(d.morph){case"static":return tm(t,s,a);case"absolute":return F0(t,s,a,d.positionCss);case"fixed":return PS(t,s,a,c,d)}},Qh=(t,s,a)=>{const c=s.lazyViewport(t);NS(t,s,a,c),eM(t,c,a).each(d=>{IS(t,s,a,c,d)})},Jk=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);Z1(t,d,a).each(h=>{switch(h.morph){case"static":{tm(t,s,a);break}case"absolute":{F0(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{vd(c,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),fp(t,s,a)},fp=(t,s,a)=>{t.getSystem().isConnected()&&Qh(t,s,a)},mp=(t,s,a)=>{a.isDocked()&&Jk(t,s,a)},hp=t=>(s,a,c)=>{const d=a.lazyViewport(s);dp(s.element,d,c,t).each(b=>{PS(s,a,c,d,b)})},BS=hp(em),$0=hp(cf);var Qk=Object.freeze({__proto__:null,refresh:fp,reset:mp,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:BS,forceDockToBottom:$0}),gp=Object.freeze({__proto__:null,events:(t,s)=>ms([Ym(tp(),(a,c)=>{t.contextual.each(d=>{Sc(a.element,d.transitionClass)&&(vd(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),ot(P1(),(a,c)=>{fp(a,t,s)}),ot(SS(),(a,c)=>{fp(a,t,s)}),ot(Qf(),(a,c)=>{mp(a,t,s)})])});const e4=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,Sr(Ke.fromDom(c))},Ai=t=>t.dom.innerHTML,Tu=(t,s)=>{const c=Us(t).dom,d=Ke.fromDom(c.createDocumentFragment()),h=e4(s,c);ba(d,h),Cu(t),vc(t,d)},g2=t=>{const s=Ke.fromTag("div"),a=Ke.fromDom(t.dom.cloneNode(!0));return vc(s,a),Ai(s)},Jm=(t,s)=>Ke.fromDom(t.dom.cloneNode(s)),t4=t=>Jm(t,!1),j1=t=>Jm(t,!0),H0=t=>{if(qc(t))return"#shadow-root";{const s=t4(t);return g2(s)}},nm=t=>H0(t),HS="unknown";var Cd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Cd||(Cd={}));const lf=mn({}),zS=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,h,b)=>{a.push({outcome:"cut",target:h,purpose:b})},logEventStopped:(d,h,b)=>{a.push({outcome:"stopped",target:h,purpose:b})},logNoParent:(d,h,b)=>{a.push({outcome:"no-parent",target:h,purpose:b})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,b)=>{a.push({outcome:"response",purpose:b,target:h})},write:()=>{const d=new Date().getTime();yt(["mousemove","mouseover","mouseout",S0()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:$e(a,h=>yt(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+nm(h.target)+")":h.outcome)})}}},Oa=(t,s,a)=>{switch(Tt(lf.get(),t).orThunk(()=>{const d=xs(lf.get());return Ss(d,h=>t.indexOf(h)>-1?M.some(lf.get()[h]):M.none())}).getOr(Cd.NORMAL)){case Cd.NORMAL:return a(eg());case Cd.LOGGING:{const d=zS(t,s),h=a(d);return d.write(),h}case Cd.STOP:return!0}},p2=["alloy/data/Fields","alloy/debugging/Debugging"],xc=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return et(s,a=>a.indexOf("alloy")>0&&!Mn(p2,c=>a.indexOf(c)>-1)).getOr(HS)}else return HS},n4={logEventCut:de,logEventStopped:de,logNoParent:de,logEventNoHandlers:de,logEventResponse:de,write:de},z0=(t,s,a)=>Oa(t,s,a),eg=re(n4),om=re([st("menu"),st("selectedMenu")]),uf=re([st("item"),st("selectedItem")]);re(Fn(uf().concat(om())));const eu=re(Fn(uf())),VS=nf("initSize",[st("numColumns"),st("numRows")]),q1=()=>qo("markers",eu()),pp=()=>nf("markers",[st("backgroundMenu")].concat(om()).concat(uf())),sm=t=>nf("markers",$e(t,st)),V0=(t,s,a)=>(xc(),ia(s,s,a,Lh(c=>Gn.value((...d)=>c.apply(void 0,d))))),Ao=t=>V0("onHandler",t,Jd(de)),ec=t=>V0("onKeyboardHandler",t,Jd(M.none)),Qm=t=>V0("onHandler",t,Xc()),bp=t=>V0("onKeyboardHandler",t,Xc()),tr=(t,s)=>jo(t,re(s)),eh=t=>jo(t,Xt),th=re(VS);var b2=[jr("contextual",[ta("fadeInClass"),ta("fadeOutClass"),ta("transitionClass"),_l("lazyContext"),Ao("onShow"),Ao("onShown"),Ao("onHide"),Ao("onHidden")]),os("lazyViewport",()=>({bounds:ea(),optScrollEnv:M.none()})),R("modes",["top","bottom"],Ut),Ao("onDocked"),Ao("onUndocked")],US=Object.freeze({__proto__:null,init:t=>{const s=mn(!1),a=mn(!0),c=Xo(),d=mn(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return ui({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const js=ya({fields:b2,name:"docking",active:gp,apis:Qk,state:US}),G1=(t,s,a)=>So(s,t.element)&&!So(s,a),WS=ms([Wk(md(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return G1(t,c,d)?(console.warn(md()+` did not get interpreted by the desired target. 
Originator: `+nm(c)+`
Target: `+nm(d)+`
Check the `+md()+" event handlers"),!1):!0})]);var o4=Object.freeze({__proto__:null,events:WS});const tg=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},tu=(t,s,a)=>Math.min(Math.max(t,s),a),U0=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let rm=0;const on=t=>{const a=new Date().getTime(),c=Math.floor(U0()*1e9);return rm++,t+"_"+c+rm+String(a)},v2=re("alloy-id-"),y2=re("data-alloy-id"),s4=v2(),w2=y2(),ZS=(t,s)=>{const a=on(s4+t);return W0(s,a),a},W0=(t,s)=>{Object.defineProperty(t.dom,w2,{value:s,writable:!0})},Z0=t=>{const s=lr(t)?t.dom[w2]:null;return M.from(s)},ku=t=>on(t),nM=Xt,df=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+nm(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:re("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:at}},r4=df(),j0=on("alloy-premade"),Au=t=>(Object.defineProperty(t.element.dom,j0,{value:t.uid,writable:!0}),as(j0,t)),a4=t=>go(t.dom,j0),q0=t=>Tt(t,j0),G0=t=>O0((s,...a)=>t(s.getApis(),s,...a),t),i4=(t,s)=>{const a=$e(s,d=>jr(d.name(),[st("config"),Pe("state",gd)])),c=ar("component.behaviours",Fn(a),t.behaviours).fold(d=>{throw new Error(Gl(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Xt);return{list:s,data:Ko(c,d=>{const h=d.map(b=>({config:b.config,state:b.state.init(b.config)}));return re(h)})}},c4=t=>t.list,K0=t=>t.data,Y0=(t,s)=>{const a={};return Ts(t,(c,d)=>{Ts(c,(h,b)=>{const S=Tt(a,b).getOr([]);a[b]=S.concat([s(d,h)])})}),a},jS=(t,s,a,c)=>{const d={...s};gt(a,P=>{d[P.name()]=P.exhibit(t,c)});const h=Y0(d,(P,F)=>({name:P,modification:F})),b=P=>To(P,(F,G)=>({...G.modification,...F}),{}),S=To(h.classes,(P,F)=>F.modification.concat(P),[]),T=b(h.attributes),D=b(h.styles);return Fc({classes:S,attributes:T,styles:D})},qS=(t,s,a,c)=>{try{const d=zr(a,(h,b)=>{const S=h[s],T=b[s],D=c.indexOf(S),P=c.indexOf(T);if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(c,null,2));if(P===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return D<P?-1:P<D?1:0});return Gn.value(d)}catch(d){return Gn.error([d])}},l4=(t,s)=>({handler:t,purpose:s}),ff=(t,s)=>({cHandler:t,purpose:s}),GS=(t,s)=>ff(en.apply(void 0,[t.handler].concat(s)),t.purpose),nh=t=>t.cHandler,X0=(t,s)=>({name:t,handler:s}),KS=(t,s)=>{const a={};return gt(t,c=>{a[c.name()]=c.handlers(s)}),a},J0=(t,s,a)=>{const c={...a,...KS(s,t)};return Y0(c,X0)},C2=(t,s,a,c)=>{const d=J0(t,a,c);return d4(d,s)},Q0=t=>{const s=zh(t);return(a,c,...d)=>{const h=[a,c].concat(d);s.abort.apply(void 0,h)?c.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},u4=(t,s)=>Gn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify($e(s,a=>a.name),null,2)]),Ec=(t,s,a)=>{const c=s[a];return c?qS("Event: "+a,"name",t,c).map(d=>{const h=$e(d,b=>b.handler);return o2(h)}):u4(a,t)},d4=(t,s)=>{const a=qi(t,(c,d)=>(c.length===1?Gn.value(c[0].handler):Ec(c,s,d)).map(b=>{const S=Q0(b),T=c.length>1?to(s[d],D=>Mn(c,P=>P.name===D)).join(" > "):c[0].name;return as(d,l4(S,T))}));return Kl(a,{})},ng="alloy.base.behaviour",YS=Fn([ia("dom","dom",Xc(),Fn([st("tag"),Pe("styles",{}),Pe("classes",[]),Pe("attributes",{}),Uo("value"),Uo("innerHtml")])),st("components"),st("uid"),Pe("events",{}),Pe("apis",{}),ia("eventOrder","eventOrder",B({[ki()]:["disabling",ng,"toggling","typeaheadevents"],[md()]:[ng,"focusing","keying"],[S0()]:[ng,"disabling","toggling","representing","tooltipping"],[Jl()]:[ng,"representing","streaming","invalidating"],[Lc()]:[ng,"representing","item-events","toolbar-button-events","tooltipping"],[Bc()]:["focusing",ng,"item-type-events"],[xo()]:["focusing",ng,"item-type-events"],[dd()]:["item-type-events","tooltipping"],[Ql()]:["receiving","reflecting","tooltipping"]}),Sl()),Uo("domModification")]),oh=t=>ar("custom.definition",YS,t),am=t=>({...t.dom,uid:t.uid,domChildren:$e(t.components,s=>s.element)}),S2=t=>t.domModification.fold(()=>Fc({}),Fc),Qe=t=>t.events,Ou=t=>t.dom.value,og=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},XS=(t,s,a)=>pc(t,s).map(d=>{if(a.exists(b=>!So(b,d))){const b=a.map(Ns).getOr("span"),S=Ke.fromTag(b);return yu(d,S),S}else return d}),K1=(t,s,a)=>{a.fold(()=>vc(t,s),c=>{So(c,s)||(yu(c,s),Kc(c))})},Qc=(t,s,a)=>{const c=$e(s,a),d=Sr(t);return gt(d.slice(c.length),Kc),c},x2=(t,s,a,c)=>{const d=pc(t,s),h=c(a,d),b=XS(t,s,d);return K1(t,h.element,b),h},JS=(t,s,a)=>Qc(t,s,(c,d)=>x2(t,d,c,a)),_c=(t,s)=>Qc(t,s,(a,c)=>{const d=pc(t,c);return K1(t,a,d),a}),sg=(t,s)=>{const a=xs(t),c=xs(s),d=Kt(c,a),h=Dr(t,(b,S)=>!go(s,S)||b!==s[S]).t;return{toRemove:d,toSet:h}},f4=(t,s)=>{const{class:a,style:c,...d}=ye(s),{toSet:h,toRemove:b}=sg(t.attributes,d),S=()=>{gt(b,Oe=>ee(s,Oe)),Nn(s,h)},T=Gc(s),{toSet:D,toRemove:P}=sg(t.styles,T),F=()=>{gt(P,Oe=>uo(s,Oe)),$o(s,D)},G=OS(s),J=Kt(G,t.classes),se=Kt(t.classes,G),ce=()=>{cp(s,se),vd(s,J)},De=Oe=>{Tu(s,Oe)},ue=()=>{const Oe=t.domChildren;_c(s,Oe)},Te=()=>{const Oe=s,ze=t.value.getOrUndefined();ze!==Ou(Oe)&&og(Oe,ze??"")};return S(),ce(),F(),t.innerHtml.fold(ue,De),Te(),s},QS=t=>{const s=Ke.fromTag(t.tag);Nn(s,t.attributes),cp(s,t.classes),$o(s,t.styles),t.innerHtml.each(c=>Tu(s,c));const a=t.domChildren;return ba(s,a),t.value.each(c=>{og(s,c)}),s},m4=(t,s)=>{try{const a=f4(t,s);return M.some(a)}catch{return M.none()}},ex=t=>t.innerHtml.isSome()&&t.domChildren.length>0,h4=(t,s)=>{const a=d=>Ns(d)===t.tag&&!ex(t)&&!a4(d),c=s.filter(a).bind(d=>m4(t,d)).getOrThunk(()=>QS(t));return W0(c,t.uid),c},tx=t=>{const s=Tt(t,"behaviours").getOr({});return xe(xs(s),a=>{const c=s[a];return Ct(c)?[c.me]:[]})},g4=(t,s)=>i4(t,s),p4=t=>{const s=tx(t);return g4(t,s)},ev=(t,s,a)=>{const c=am(t),d=S2(t),h={"alloy.base.modification":d},b=s.length>0?jS(a,h,s,c):d;return D0(c,b)},tv=(t,s,a)=>{const c={"alloy.base.behaviour":Qe(t)};return C2(a,t.eventOrder,s,c).getOrDie()},b4=(t,s)=>{const a=()=>Oe,c=mn(r4),d=bt(oh(t)),h=p4(t),b=c4(h),S=K0(h),T=ev(d,b,S),D=h4(T,s),P=tv(d,b,S),F=mn(d.components),G=ze=>{c.set(ze)},J=()=>{c.set(df(a))},se=()=>{const ze=Sr(D),We=xe(ze,Mt=>c.get().getByDom(Mt).fold(()=>[],Fo));F.set(We)},ce=ze=>{const We=S;return(Ne(We[ze.name()])?We[ze.name()]:()=>{throw new Error("Could not find "+ze.name()+" in "+JSON.stringify(t,null,2))})()},De=ze=>Ne(S[ze.name()]),ue=()=>d.apis,Te=ze=>S[ze]().map(We=>We.state.readState()).getOr("not enabled"),Oe={uid:t.uid,getSystem:c.get,config:ce,hasConfigured:De,spec:t,readState:Te,getApis:ue,connect:G,disconnect:J,element:D,syncComponents:se,components:F.get,events:P};return Oe},nx=(t,s)=>{const a=Tt(t,"components").getOr([]);return s.fold(()=>$e(a,Oi),c=>$e(a,(d,h)=>vp(d,pc(c,h))))},v4=(t,s)=>{const{events:a,...c}=nM(t),d=nx(c,s),h={...c,events:{...o4,...a},components:d};return Gn.value(b4(h,s))},nr=t=>{const s=Ke.fromText(t);return E2({element:s})},E2=t=>{const s=Fi("external.component",ci([st("element"),Uo("uid")]),t),a=mn(df()),c=S=>{a.set(S)},d=()=>{a.set(df(()=>b))},h=s.uid.getOrThunk(()=>ku("external"));W0(s.element,h);const b={uid:h,getSystem:a.get,config:M.none,hasConfigured:at,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:re("No state"),syncComponents:de,components:re([]),events:{}};return Au(b)},ox=ku,sx=t=>go(t,"uid"),vp=(t,s)=>q0(t).getOrThunk(()=>{const a=sx(t)?t:{uid:ox(""),...t};return v4(a,s).getOrDie()}),Oi=t=>vp(t,M.none()),Tl=Au;var rx=(t,s,a,c,d)=>t(a,c)?M.some(a):Ne(d)&&d(a)?M.none():s(a,c,d);const _2=(t,s,a)=>{let c=t.dom;const d=Ne(a)?a:at;for(;c.parentNode;){c=c.parentNode;const h=Ke.fromDom(c);if(s(h))return M.some(h);if(d(h))break}return M.none()},T2=(t,s,a)=>rx((d,h)=>h(d),_2,t,s,a),y4=(t,s)=>{const a=t.dom;return a.parentNode?nv(Ke.fromDom(a.parentNode),c=>!So(t,c)&&s(c)):M.none()},nv=(t,s)=>{const a=d=>s(Ke.fromDom(d));return et(t.dom.childNodes,a).map(Ke.fromDom)},ov=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const h=Ke.fromDom(c.childNodes[d]);if(s(h))return M.some(h);const b=a(c.childNodes[d]);if(b.isSome())return b}return M.none()};return a(t.dom)},Y1=(t,s,a)=>T2(t,s,a).isSome(),w4=t=>Ku(t),ua=(t,s,a)=>_2(t,c=>ys(c,s),a),C4=(t,s)=>y4(t,a=>ys(a,s)),nu=(t,s)=>nv(t,a=>ys(a,s)),ir=(t,s)=>Ku(s,t),Sd=(t,s,a)=>rx((d,h)=>ys(d,h),ua,t,s,a),rg="aria-controls",sv=t=>T2(t,a=>{if(!lr(a))return!1;const c=Vn(a,"id");return c!==void 0&&c.indexOf(rg)>-1}).bind(a=>{const c=Vn(a,"id"),d=br(a);return ir(d,`[${rg}="${c}"]`)}),ax=()=>{const t=on(rg);return{id:t,link:c=>{$t(c,rg,t)},unlink:c=>{ee(c,rg)}}},ix=(t,s)=>sv(s).exists(a=>sh(t,a)),sh=(t,s)=>Y1(s,a=>So(a,t.element),at)||ix(t,s),Di=(t,s,a,c,d,h,b,S=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:h,label:`${b}-${d}`,alwaysFit:S}),mf=Se.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),cx=(t,s,a,c,d,h,b,S,T)=>t.fold(s,a,c,d,h,b,S,T),S4=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),x4=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),rv=mf.southeast,k2=mf.southwest,A2=mf.northeast,O2=mf.northwest,lx=mf.south,ux=mf.north,dx=mf.east,fx=mf.west,E4=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ri=(t,s)=>ls(["left","right","top","bottom"],a=>Tt(s,a).map(c=>E4(t,c))),mx=(t,s,a)=>{const c=(T,D)=>s[T].map(P=>{const F=T==="top"||T==="bottom",G=F?a.top:a.left,se=(T==="left"||T==="top"?Math.max:Math.min)(P,D)+G;return F?tu(se,t.y,t.bottom):tu(se,t.x,t.right)}).getOr(D),d=c("left",t.x),h=c("top",t.y),b=c("right",t.right),S=c("bottom",t.bottom);return fr(d,h,b-d,S-h)},im="layout",D2=t=>t.x,hx=(t,s)=>t.x+t.width/2-s.width/2,R2=(t,s)=>t.x+t.width-s.width,av=(t,s)=>t.y-s.height,X1=t=>t.y+t.height,rh=(t,s)=>t.y+t.height/2-s.height/2,_4=t=>t.x+t.width,M2=(t,s)=>t.x-s.width,wa=(t,s,a)=>Di(D2(t),X1(t),a.southeast(),rv(),"southeast",Ri(t,{left:1,top:3}),im),Ca=(t,s,a)=>Di(R2(t,s),X1(t),a.southwest(),k2(),"southwest",Ri(t,{right:0,top:3}),im),Da=(t,s,a)=>Di(D2(t),av(t,s),a.northeast(),A2(),"northeast",Ri(t,{left:1,bottom:2}),im),ps=(t,s,a)=>Di(R2(t,s),av(t,s),a.northwest(),O2(),"northwest",Ri(t,{right:0,bottom:2}),im),za=(t,s,a)=>Di(hx(t,s),av(t,s),a.north(),ux(),"north",Ri(t,{bottom:2}),im),da=(t,s,a)=>Di(hx(t,s),X1(t),a.south(),lx(),"south",Ri(t,{top:3}),im),J1=(t,s,a)=>Di(_4(t),rh(t,s),a.east(),dx(),"east",Ri(t,{left:0}),im),iv=(t,s,a)=>Di(M2(t,s),rh(t,s),a.west(),fx(),"west",Ri(t,{right:1}),im),N2=()=>[wa,Ca,Da,ps,da,za,J1,iv],gx=()=>[Ca,wa,ps,Da,da,za,J1,iv],P2=()=>[Da,ps,wa,Ca,za,da],rn=()=>[ps,Da,Ca,wa,za,da],yp=()=>[wa,Ca,Da,ps,da,za],ah=()=>[Ca,wa,ps,Da,da,za],px=(t,s)=>s.universal?t:to(t,a=>yt(s.channels,a));var ag=Object.freeze({__proto__:null,events:t=>ms([ot(Ql(),(s,a)=>{const c=t.channels,d=xs(c),h=a,b=px(d,h);gt(b,S=>{const T=c[S],D=T.schema,P=Fi("channel["+S+`] data
Receiver: `+nm(s.element),D,h.data);T.onReceive(s,P)})})])}),bx=[qo("channels",ql(Gn.value,ci([Qm("onReceive"),Pe("schema",Sl())])))];const el=ya({fields:bx,name:"receiving",active:ag});var vx=Object.freeze({__proto__:null,exhibit:(t,s)=>Fc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const $c=(t,s=!1)=>t.dom.focus({preventScroll:s}),Va=t=>t.dom.blur(),hf=t=>{const s=br(t).dom;return t.dom===s.activeElement},cm=(t=qd())=>M.from(t.dom.activeElement).map(Ke.fromDom),tc=t=>cm(br(t)).filter(s=>t.dom.contains(s.dom)),I2=(t,s)=>{const a=br(s),c=cm(a).bind(h=>{const b=S=>So(h,S);return b(s)?M.some(s):ov(s,b)}),d=t(s);return c.each(h=>{cm(a).filter(b=>So(b,h)).fold(()=>{$c(h)},de)}),d},B2=Se.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),yx=(t,s,a,c,d,h)=>{const b=s.rect,S=b.x-a,T=b.y-c,D=b.width,P=b.height,F=d-(S+D),G=h-(T+P),J=M.some(S),se=M.some(T),ce=M.some(F),De=M.some(G),ue=M.none();return cx(s.direction,()=>yd(t,J,se,ue,ue),()=>yd(t,ue,se,ce,ue),()=>yd(t,J,ue,ue,De),()=>yd(t,ue,ue,ce,De),()=>yd(t,J,se,ue,ue),()=>yd(t,J,ue,ue,De),()=>yd(t,J,se,ue,ue),()=>yd(t,ue,se,ce,ue))},L2=(t,s)=>t.fold(()=>{const a=s.rect;return yd("absolute",M.some(a.x),M.some(a.y),M.none(),M.none())},(a,c,d,h)=>yx("absolute",s,a,c,d,h),(a,c,d,h)=>yx("fixed",s,a,c,d,h)),cv=(t,s)=>{const a=en(vl,s),c=t.fold(a,a,()=>{const b=ri();return vl(s).translate(-b.left,-b.top)}),d=gl(s),h=zl(s);return fr(c.left,c.top,d,h)},F2=(t,s)=>s.fold(()=>t.fold(ea,ea,fr),a=>t.fold(re(a),re(a),()=>{const c=lv(t,a.x,a.y);return fr(c.left,c.top,a.width,a.height)})),lv=(t,s,a)=>{const c=Ds(s,a),d=()=>{const h=ri();return c.translate(-h.left,-h.top)};return t.fold(re(c),re(c),d)},wx=(t,s,a,c)=>t.fold(s,a,c);B2.none;const Cx=B2.relative,Q1=B2.fixed,eb=(t,s)=>({anchorBox:t,origin:s}),$2=(t,s)=>eb(t,s),H2="data-alloy-placement",uv=(t,s)=>{$t(t,H2,s)},z2=t=>ko(t,H2),T4=t=>ee(t,H2),tb=Se.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),k4=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:S,right:T,bottom:D,width:P,height:F}=t,G=b>=a&&b<=d,J=S>=c&&S<=h,se=G&&J,ce=T<=d&&T>=a,De=D<=h&&D>=c,ue=ce&&De,Te=Math.min(P,b>=a?d-b:T-a),Oe=Math.min(F,S>=c?h-S:D-c);return{originInBounds:se,sizeInBounds:ue,visibleW:Te,visibleH:Oe}},A4=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:S,width:T,height:D}=t,P=Math.max(a,d-T),F=Math.max(c,h-D),G=tu(b,a,P),J=tu(S,c,F),se=Math.min(G+T,d)-G,ce=Math.min(J+D,h)-J;return fr(G,J,se,ce)},O4=(t,s,a)=>{const c=re(s.bottom-a.y),d=re(a.bottom-s.y),h=S4(t,d,d,c),b=re(s.right-a.x),S=re(a.right-s.x);return{maxWidth:x4(t,S,S,b),maxHeight:h}},V2=(t,s,a,c)=>{const d=t.bubble,h=d.offset,b=mx(c,t.restriction,h),S=t.x+h.left,T=t.y+h.top,D=fr(S,T,s,a),{originInBounds:P,sizeInBounds:F,visibleW:G,visibleH:J}=k4(D,b),se=P&&F,ce=se?D:A4(D,b),De=ce.width>0&&ce.height>0,{maxWidth:ue,maxHeight:Te}=O4(t.direction,ce,c),Oe={rect:ce,maxHeight:Te,maxWidth:ue,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return se||t.alwaysFit?tb.fit(Oe):tb.nofit(Oe,G,J,De)},D4=(t,s,a,c,d,h)=>{const b=c.width,S=c.height,T=(P,F,G,J,se)=>{const ce=P(a,c,d,t,h),De=V2(ce,b,S,h);return De.fold(re(De),(ue,Te,Oe,ze)=>(se===ze?Oe>J||Te>G:!se&&ze)?De:tb.nofit(F,G,J,se))};return zo(s,(P,F)=>{const G=en(T,F);return P.fold(re(P),G)},tb.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:rv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Xt,Xt)},Sx=it,nc=(t,s,a)=>si(t,s,Sx,a),U2=(t,s,a)=>Fm(t,s,Sx,a),xx=jl,W2=["top","bottom","right","left"],dv="data-alloy-transition-timer",wp=(t,s)=>Kk(t,s.classes),R4=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),Cp=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return ts(s,(c,d)=>{const h=t[d].map(a),b=c.map(a);return!Ba(h,b)}).isSome()},Ex=t=>{const s=h=>{const S=ut(t,h).split(/\s*,\s*/);return to(S,pe)},a=h=>{if(j(h)&&/^[\d.]+/.test(h)){const b=parseFloat(h);return xa(h,"ms")?b:b*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return zo(d,(h,b,S)=>{const T=a(c[S])+a(b);return Math.max(h,T)},0)},ig=(t,s)=>{const a=Yi(),c=Yi();let d;const h=D=>{var P;const F=(P=D.raw.pseudoElement)!==null&&P!==void 0?P:"";return So(D.target,t)&&fe(F)&&yt(W2,D.raw.propertyName)},b=D=>{if(Pt(D)||h(D)){a.clear(),c.clear();const P=D==null?void 0:D.raw.type;(Pt(P)||P===tp())&&(clearTimeout(d),ee(t,dv),vd(t,s.classes))}},S=nc(t,Wh(),D=>{h(D)&&(S.unbind(),a.set(nc(t,tp(),b)),c.set(nc(t,Uk(),b)))}),T=Ex(t);requestAnimationFrame(()=>{d=setTimeout(b,T+17),$t(t,dv,d)})},Z2=(t,s)=>{cp(t,s.classes),ko(t,dv).each(a=>{clearTimeout(parseInt(a,10)),ee(t,dv)}),ig(t,s)},_x=(t,s,a,c,d,h)=>{const b=R4(c,d,h);if(b||wp(t,c)){It(t,"position",a.position);const S=cv(s,t),T=L2(s,{...d,rect:S}),D=ls(W2,P=>T[P]);Cp(a,D)&&(na(t,D),b&&Z2(t,c),yi(t))}else vd(t,c.classes)},j2=t=>({width:gl(t),height:zl(t)}),Tx=(t,s,a,c)=>{uo(s,"max-height"),uo(s,"max-width");const d=j2(s);return D4(s,c.preference,t,d,a,c.bounds)},kx=(t,s)=>{const a=s.classes;vd(t,a.off),cp(t,a.on)},fv=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},M4=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},Ax=(t,s,a)=>{const c=L2(a.origin,s);a.transition.each(d=>{_x(t,a.origin,c,d,s,a.lastPlacement)}),Qi(t,c)},Ox=(t,s)=>{uv(t,s.placement)},Dx=(t,s)=>{$g(t,Math.floor(s))},mv=re((t,s)=>{Dx(t,s),$o(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Sp=re((t,s)=>{Dx(t,s)}),q2=(t,s,a)=>t[s]===void 0?a:t[s],N4=(t,s,a,c,d,h,b,S)=>{const T=q2(b,"maxHeightFunction",mv()),D=q2(b,"maxWidthFunction",de),P=t.anchorBox,F=t.origin,G={bounds:F2(F,h),origin:F,preference:c,maxHeightFunction:T,maxWidthFunction:D,lastPlacement:d,transition:S};return hv(P,s,a,G)},hv=(t,s,a,c)=>{const d=Tx(t,s,a,c);return Ax(s,d,c),Ox(s,d),kx(s,d),fv(s,d,c),M4(s,d,c),{layout:d.layout,placement:d.placement}},gv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Du=(t,s,a,c=1)=>{const d=t*c,h=s*c,b=T=>Tt(a,T).getOr([]),S=(T,D,P)=>{const F=Kt(gv,P);return{offset:Ds(T,D),classesOn:xe(P,b),classesOff:xe(F,b)}};return{southeast:()=>S(-t,s,["top","alignLeft"]),southwest:()=>S(t,s,["top","alignRight"]),south:()=>S(-t/2,s,["top","alignCentre"]),northeast:()=>S(-t,-s,["bottom","alignLeft"]),northwest:()=>S(t,-s,["bottom","alignRight"]),north:()=>S(-t/2,-s,["bottom","alignCentre"]),east:()=>S(t,-s/2,["valignCentre","left"]),west:()=>S(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>S(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>S(-d,h,["top","alignRight","inset"]),insetNorth:()=>S(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>S(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>S(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>S(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>S(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>S(d,-h/2,["valignCentre","left","inset"])}},pv=()=>Du(0,0,{}),bv=Xt,G2=(t,s)=>a=>oc(a)==="rtl"?s:t,oc=t=>ut(t,"direction")==="rtl"?"rtl":"ltr";var lm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(lm||(lm={}));const ih="data-alloy-vertical-dir",P4=t=>Y1(t,s=>lr(s)&&Vn(s,"data-alloy-vertical-dir")===lm.BottomToTop),ch=()=>jr("layouts",[st("onLtr"),st("onRtl"),Uo("onBottomLtr"),Uo("onBottomRtl")]),vv=(t,s,a,c,d,h,b)=>{const S=b.map(P4).getOr(!1),T=s.layouts.map(J=>J.onLtr(t)),D=s.layouts.map(J=>J.onRtl(t)),P=S?s.layouts.bind(J=>J.onBottomLtr.map(se=>se(t))).or(T).getOr(d):T.getOr(a),F=S?s.layouts.bind(J=>J.onBottomRtl.map(se=>se(t))).or(D).getOr(h):D.getOr(c);return G2(P,F)(t)},I4=(t,s,a)=>{const c=s.hotspot,d=cv(a,c.element),h=vv(t.element,s,yp(),ah(),P2(),rn(),M.some(s.hotspot.element));return M.some(bv({anchorBox:d,bubble:s.bubble.getOr(pv()),overrides:s.overrides,layouts:h}))};var B4=[st("hotspot"),Uo("bubble"),Pe("overrides",{}),ch(),tr("placement",I4)];const Rx=(t,s,a)=>{const c=lv(a,s.x,s.y),d=fr(c.left,c.top,s.width,s.height),h=vv(t.element,s,N2(),gx(),N2(),gx(),M.none());return M.some(bv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var xp=[st("x"),st("y"),Pe("height",0),Pe("width",0),Pe("bubble",pv()),Pe("overrides",{}),ch(),tr("placement",Rx)];const Mx=Se.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),L4=t=>t.fold(Xt,(s,a,c)=>s.translate(-a,-c)),nb=t=>t.fold(Xt,Xt),K2=t=>zo(t,(s,a)=>s.translate(a.left,a.top),Ds(0,0)),F4=t=>{const s=$e(t,L4);return K2(s)},Nx=t=>{const s=$e(t,nb);return K2(s)},Px=Mx.screen,Y2=Mx.absolute,sM=(t,s,a)=>{const c=Ic(a.root).dom,d=h=>{const b=Us(h),S=Us(t.element);return So(b,S)};return M.from(c.frameElement).map(Ke.fromDom).filter(d).map(_a)},Ep=(t,s,a)=>{const c=Us(t.element),d=ri(c),h=sM(t,s,a).getOr(d);return Y2(h,d.left,d.top)},Ix=(t,s,a,c)=>{const d=Px(Ds(t,s));return M.some(Nh(d,a,c))},X2=(t,s,a,c,d)=>t.map(h=>{const b=[s,h.point],S=wx(c,()=>Nx(b),()=>Nx(b),()=>F4(b)),T=Yc(S.left,S.top,h.width,h.height),D=a.showAbove?P2():yp(),P=a.showAbove?rn():ah(),F=vv(d,a,D,P,D,P,M.none());return bv({anchorBox:T,bubble:a.bubble.getOr(pv()),overrides:a.overrides,layouts:F})}),J2=(t,s,a)=>{const c=Ep(t,a,s);return s.node.filter(ke).bind(d=>{const h=d.dom.getBoundingClientRect(),b=Ix(h.left,h.top,h.width,h.height),S=s.node.getOr(t.element);return X2(b,c,s,a,S)})};var yv=[st("node"),st("root"),Uo("bubble"),ch(),Pe("overrides",{}),Pe("showAbove",!1),tr("placement",J2)];const $4="\uFEFF",Bx=" ",cg={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},wv=Se.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),_p=(t,s,a,c)=>t.fold(s,a,c),ob=t=>t.fold(Xt,Xt,Xt),H4=wv.before,Lx=wv.on,z4=wv.after,aM={before:H4,on:Lx,after:z4,cata:_p,getStart:ob},sb=Se.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Q2=t=>sb.exact(t.start,t.soffset,t.finish,t.foffset),Fx=t=>t.match({domRange:s=>Ke.fromDom(s.startContainer),relative:(s,a)=>aM.getStart(s),exact:(s,a,c,d)=>s}),ew=sb.domRange,$x=sb.relative,V4=sb.exact,U4=t=>{const s=Fx(t);return Ic(s)},rb=cg.create,Tp={domRange:ew,relative:$x,exact:V4,exactFromRange:Q2,getWin:U4,range:rb},ab=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},tw=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},Cv=(t,s,a)=>{const c=t.document.createRange();return ab(c,s),tw(c,a),c},nw=(t,s,a,c,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(c.dom,d),h},ow=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),W4=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?M.some(a).map(ow):M.none()},Sv=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?M.some(s).map(ow):M.none()},ib=Se.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Hx=(t,s,a)=>s(Ke.fromDom(a.startContainer),a.startOffset,Ke.fromDom(a.endContainer),a.endOffset),iM=(t,s)=>s.match({domRange:a=>({ltr:re(a),rtl:M.none}),relative:(a,c)=>({ltr:Wl(()=>Cv(t,a,c)),rtl:Wl(()=>M.some(Cv(t,c,a)))}),exact:(a,c,d,h)=>({ltr:Wl(()=>nw(t,a,c,d,h)),rtl:Wl(()=>M.some(nw(t,d,h,a,c)))})}),kp=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>ib.rtl(Ke.fromDom(d.endContainer),d.endOffset,Ke.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Hx(t,ib.ltr,a)):Hx(t,ib.ltr,a)},Ap=(t,s)=>{const a=iM(t,s);return kp(t,a)},zx=(t,s)=>Ap(t,s).match({ltr:(c,d,h,b)=>{const S=t.document.createRange();return S.setStart(c.dom,d),S.setEnd(h.dom,b),S},rtl:(c,d,h,b)=>{const S=t.document.createRange();return S.setStart(h.dom,b),S.setEnd(c.dom,d),S}});ib.ltr,ib.rtl;const Vx=(t,s,a)=>to(Hd(t,a),s),Tc=(t,s)=>gc(s,t),xv=(t,s,a,c)=>{const h=Us(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,c),h},sw=(t,s,a,c)=>{const d=xv(t,s,a,c),h=So(t,a)&&s===c;return d.collapsed&&!h},Z4=t=>M.from(t.getSelection()),rw=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return M.some(cg.create(Ke.fromDom(s.startContainer),s.startOffset,Ke.fromDom(a.endContainer),a.endOffset))}else return M.none()},cb=t=>{if(t.anchorNode===null||t.focusNode===null)return rw(t);{const s=Ke.fromDom(t.anchorNode),a=Ke.fromDom(t.focusNode);return sw(s,t.anchorOffset,a,t.focusOffset)?M.some(cg.create(s,t.anchorOffset,a,t.focusOffset)):rw(t)}},lb=t=>Z4(t).filter(s=>s.rangeCount>0).bind(cb),Ux=(t,s)=>{const a=zx(t,s);return W4(a)},Op=(t,s)=>{const a=zx(t,s);return Sv(a)},iw=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return c(h).getOr("")},c=h=>t(h)?M.from(h.dom.nodeValue):M.none();return{get:a,getOption:c,set:(h,b)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=b}}})(rr,"text"),Wx=t=>iw.get(t),ub=(t,s)=>({element:t,offset:s}),j4=(t,s)=>{const a=Sr(t);if(a.length===0)return ub(t,s);if(s<a.length)return ub(a[s],0);{const c=a[a.length-1],d=rr(c)?Wx(c).length:Sr(c).length;return ub(c,d)}},db=(t,s)=>rr(t)?ub(t,s):j4(t,s),Ev=t=>t.foffset!==void 0,lh=(t,s)=>s.getSelection.getOrThunk(()=>()=>lb(t))().map(c=>{if(Ev(c)){const d=db(c.start,c.soffset),h=db(c.finish,c.foffset);return Tp.range(d.element,d.offset,h.element,h.offset)}else return c}),uh=(t,s,a)=>{const c=Ic(s.root).dom,d=Ep(t,a,s),h=lh(c,s).bind(T=>{if(Ev(T))return Op(c,Tp.exactFromRange(T)).orThunk(()=>{const P=Ke.fromText($4);yu(T.start,P);const F=Ux(c,Tp.exact(P,0,P,1));return Kc(P),F}).bind(P=>Ix(P.left,P.top,P.width,P.height));{const D=Ko(T,F=>F.dom.getBoundingClientRect()),P={left:Math.min(D.firstCell.left,D.lastCell.left),right:Math.max(D.firstCell.right,D.lastCell.right),top:Math.min(D.firstCell.top,D.lastCell.top),bottom:Math.max(D.firstCell.bottom,D.lastCell.bottom)};return Ix(P.left,P.top,P.right-P.left,P.bottom-P.top)}}),S=lh(c,s).bind(T=>Ev(T)?lr(T.start)?M.some(T.start):bi(T.start):M.some(T.firstCell)).getOr(t.element);return X2(h,d,s,a,S)};var gf=[Uo("getSelection"),st("root"),Uo("bubble"),ch(),Pe("overrides",{}),Pe("showAbove",!1),tr("placement",uh)];const dh="link-layout",xd=t=>t.x+t.width,um=(t,s)=>t.x-s.width,Ru=(t,s)=>t.y-s.height+t.height,_v=t=>t.y,Zx=(t,s,a)=>Di(xd(t),_v(t),a.southeast(),rv(),"southeast",Ri(t,{left:0,top:2}),dh),jx=(t,s,a)=>Di(um(t,s),_v(t),a.southwest(),k2(),"southwest",Ri(t,{right:1,top:2}),dh),cw=(t,s,a)=>Di(xd(t),Ru(t,s),a.northeast(),A2(),"northeast",Ri(t,{left:0,bottom:3}),dh),Dp=(t,s,a)=>Di(um(t,s),Ru(t,s),a.northwest(),O2(),"northwest",Ri(t,{right:1,bottom:3}),dh),Rp=()=>[Zx,jx,cw,Dp],Mp=()=>[jx,Zx,Dp,cw],qx=(t,s,a)=>{const c=cv(a,s.item.element),d=vv(t.element,s,Rp(),Mp(),Rp(),Mp(),M.none());return M.some(bv({anchorBox:c,bubble:pv(),overrides:s.overrides,layouts:d}))};var Np=[st("item"),ch(),Pe("overrides",{}),tr("placement",qx)],Pp=aa("type",{selection:gf,node:yv,hotspot:B4,submenu:Np,makeshift:xp});const q4=[wc("classes",Ut),li("mode","all",["all","layout","placement"])],lw=[Pe("useFixed",at),Uo("getBounds")],Ip=[qo("anchor",Pp),jr("transition",q4)],Ua=()=>{const t=document.documentElement;return Q1(0,0,t.clientWidth,t.clientHeight)},Gx=t=>{const s=_a(t.element),a=t.element.dom.getBoundingClientRect();return Cx(s.left,s.top,a.width,a.height)},pf=(t,s,a,c,d,h)=>{const b=$2(s.anchorBox,t);return N4(b,c.element,s.bubble,s.layouts,d,a,s.overrides,h)},Kx=(t,s,a,c,d)=>{const h=M.none();Tv(t,s,a,c,d,h)},Tv=(t,s,a,c,d,h)=>{const b=Fi("placement.info",Fn(Ip),d),S=b.anchor,T=c.element,D=a.get(c.uid);I2(()=>{It(T,"position","fixed");const P=fs(T,"visibility");It(T,"visibility","hidden");const F=s.useFixed()?Ua():Gx(t);S.placement(t,S,F).each(G=>{const J=h.orThunk(()=>s.getBounds.map(oo)),se=pf(F,G,J,c,D,b.transition);a.set(c.uid,se)}),P.fold(()=>{uo(T,"visibility")},G=>{It(T,"visibility",G)}),fs(T,"left").isNone()&&fs(T,"top").isNone()&&fs(T,"right").isNone()&&fs(T,"bottom").isNone()&&Ur(fs(T,"position"),"fixed")&&uo(T,"position")},T)};var kv=Object.freeze({__proto__:null,position:Kx,positionWithinBounds:Tv,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;gt(["position","left","right","top","bottom"],h=>uo(d,h)),T4(d),a.clear(c.uid)}}),uw=Object.freeze({__proto__:null,init:()=>{let t={};return ui({readState:()=>t,clear:d=>{Ct(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>Tt(t,d)})}});const Wa=ya({fields:lw,name:"positioning",active:vx,apis:kv,state:uw}),dw=t=>t.getSystem().isConnected(),bf=t=>{bo(t,Lc());const s=t.components();gt(s,bf)},tl=t=>{const s=t.components();gt(s,tl),bo(t,Ji())},Xx=(t,s)=>{t.getSystem().addToWorld(s),ke(t.element)&&tl(s)},fw=t=>{bf(t),t.getSystem().removeFromWorld(t)},Av=(t,s)=>{vc(t.element,s.element)},mw=t=>{gt(t.components(),s=>Kc(s.element)),Cu(t.element),t.syncComponents()},lg=(t,s,a)=>{const c=t.components();mw(t);const d=a(s),h=Kt(c,d);gt(h,b=>{bf(b),t.getSystem().removeFromWorld(b)}),gt(d,b=>{dw(b)?Av(t,b):(t.getSystem().addToWorld(b),Av(t,b),ke(t.element)&&tl(b))}),t.syncComponents()},hw=(t,s,a)=>{const c=t.components(),d=xe(s,S=>q0(S).toArray());gt(c,S=>{yt(d,S)||fw(S)});const h=a(s),b=Kt(c,h);gt(b,S=>{dw(S)&&fw(S)}),gt(h,S=>{dw(S)||Xx(t,S)}),t.syncComponents()},vf=(t,s)=>{Vi(t,s,vc)},Vi=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),ke(t.element)&&tl(s),t.syncComponents()},ug=t=>{bf(t),Kc(t.element),t.getSystem().removeFromWorld(t)},yf=t=>{const s=Mr(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());ug(t),s.each(a=>{a.syncComponents()})},dg=t=>{const s=t.components();gt(s,ug),Cu(t.element),t.syncComponents()},sc=(t,s)=>{Ui(t,s,vc)},di=(t,s)=>{Ui(t,s,wu)},Ui=(t,s,a)=>{a(t,s.element);const c=Sr(s.element);gt(c,d=>{s.getByDom(d).each(tl)})},Mu=t=>{const s=Sr(t.element);gt(s,a=>{t.getByDom(a).each(bf)}),Kc(t.element)},Ov=(t,s,a,c)=>{a.get().each(b=>{dg(t)});const d=s.getAttachPoint(t);vf(d,t);const h=t.getSystem().build(c);return vf(t,h),a.set(h),h},kl=(t,s,a,c)=>{const d=Ov(t,s,a,c);return s.onOpen(t,d),d},fg=(t,s,a,c)=>a.get().map(()=>Ov(t,s,a,c)),G4=(t,s,a,c,d)=>{fb(t,s),kl(t,s,a,c),d(),nE(t,s)},Jx=(t,s,a)=>{a.get().each(c=>{dg(t),yf(t),s.onClose(t,c),a.clear()})},mg=(t,s,a)=>a.isOpen(),Qx=(t,s,a,c)=>mg(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),eE=(t,s,a)=>a.get(),Dv=(t,s,a,c)=>{fs(t.element,s).fold(()=>{ee(t.element,a)},d=>{$t(t.element,a,d)}),It(t.element,s,c)},tE=(t,s,a)=>{ko(t.element,a).fold(()=>uo(t.element,s),c=>It(t.element,s,c))},fb=(t,s,a)=>{const c=s.getAttachPoint(t);It(t.element,"position",Wa.getMode(c)),Dv(t,"visibility",s.cloakVisibilityAttr,"hidden")},K4=t=>Mn(["top","left","right","bottom"],s=>fs(t,s).isSome()),nE=(t,s,a)=>{K4(t.element)||uo(t.element,"position"),tE(t,"visibility",s.cloakVisibilityAttr)};var Y4=Object.freeze({__proto__:null,cloak:fb,decloak:nE,open:kl,openWhileCloaked:G4,close:Jx,isOpen:mg,isPartOf:Qx,getState:eE,setContent:fg}),mb=Object.freeze({__proto__:null,events:(t,s)=>ms([ot(Ha(),(a,c)=>{Jx(a,t,s)})])}),Rv=[Ao("onOpen"),Ao("onClose"),st("isPartOf"),st("getAttachPoint"),Pe("cloakVisibilityAttr","data-precloak-visibility")],J4=Object.freeze({__proto__:null,init:()=>{const t=Xo(),s=re("not-implemented");return ui({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Po=ya({fields:Rv,name:"sandboxing",active:mb,apis:Y4,state:J4}),dm=re("dismiss.popups"),hg=re("reposition.popups"),Mv=re("mouse.released"),Q4=ci([Pe("isExtraPart",at),jr("fireEventInstead",[Pe("event",hd())])]),Hc=t=>{const s=Fi("Dismissal",Q4,t);return{[dm()]:{schema:ci([st("target")]),onReceive:(a,c)=>{Po.isOpen(a)&&(Po.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>Po.close(a),h=>bo(a,h.event)))}}}},lM=ci([jr("fireEventInstead",[Pe("event",r2())]),_l("doReposition")]),gg=t=>{const s=Fi("Reposition",lM,t);return{[hg()]:{onReceive:a=>{Po.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>bo(a,c.event))}}}},fm=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Nv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var e3=Object.freeze({__proto__:null,onLoad:fm,onUnload:Nv,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Pv=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[er((c,d)=>{fm(c,t,s)}),sf((c,d)=>{Nv(c,t,s)})]:[qh(t,s,fm)];return ms(a)}});const pg=()=>{const t=mn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return ui({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},gb=()=>ui({readState:de}),Iv=()=>{const t=mn({}),s=mn({});return ui({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:b=>Tt(t.get(),b).orThunk(()=>Tt(s.get(),b)),update:b=>{const S=t.get(),T=s.get(),D={},P={};gt(b,F=>{D[F.value]=F,Tt(F,"meta").each(G=>{Tt(G,"text").each(J=>{P[J]=F})})}),t.set({...S,...D}),s.set({...T,...P})},clear:()=>{t.set({}),s.set({})}})};var rE=Object.freeze({__proto__:null,memory:pg,dataset:Iv,manual:gb,init:t=>t.store.manager.state(t)});const bg=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},pw=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},bw=(t,s,a)=>{s.store.initialValue.each(d=>{bg(t,s,a,d)})},Bv=(t,s,a)=>{a.clear()};var Ed=[Uo("initialValue"),st("getFallbackEntry"),st("getDataKey"),st("setValue"),tr("manager",{setValue:bg,getValue:pw,onLoad:bw,onUnload:Bv,state:Iv})];const aE=(t,s,a)=>s.store.getValue(t),pb=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},bb=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var n3=[st("getValue"),Pe("setValue",de),Uo("initialValue"),tr("manager",{setValue:pb,getValue:aE,onLoad:bb,onUnload:de,state:gd.init})];const iE=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},o3=(t,s,a)=>a.get(),s3=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},cE=(t,s,a)=>{a.clear()};var Lp=[Uo("initialValue"),tr("manager",{setValue:iE,getValue:o3,onLoad:s3,onUnload:cE,state:pg})],vw=[Zs("store",{mode:"memory"},aa("mode",{memory:Lp,manual:n3,dataset:Ed})),Ao("onSetValue"),Pe("resetOnDom",!1)];const Jt=ya({fields:vw,name:"representing",active:Pv,apis:e3,extra:{setValueFrom:(t,s)=>{const a=Jt.getValue(s);Jt.setValue(t,a)}},state:rE}),Za=(t,s)=>Z(t,{},$e(s,a=>O1(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([jo("dump",Xt)])),vb=t=>t.dump,Fr=(t,s)=>({...Et(s),...t.dump}),Al={field:Za,augment:Fr,get:vb},Lv="placeholder",vg=Se.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Fv=t=>go(t,"uiType"),yb=(t,s,a,c)=>t.exists(d=>d!==a.owner)?vg.single(!0,re(a)):Tt(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+xs(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),yw=(t,s,a,c)=>Fv(a)&&a.uiType===Lv?yb(t,s,a,c):vg.single(!1,re(a)),lE=(t,s,a,c)=>yw(t,s,a,c).fold((h,b)=>{const S=Fv(a)?b(s,a.config,a.validated):b(s),T=Tt(S,"components").getOr([]),D=xe(T,P=>lE(t,s,P,c));return[{...S,components:D}]},(h,b)=>{if(Fv(a)){const S=b(s,a.config,a.validated);return a.validated.preprocess.getOr(Xt)(S)}else return b(s)}),r3=(t,s,a,c)=>xe(a,d=>lE(t,s,d,c)),wf=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((b,S)=>b,(b,S)=>b);return{name:re(t),required:h,used:c,replace:d}},a3=(t,s,a,c)=>{const d=Ko(c,(b,S)=>wf(S,b)),h=r3(t,s,a,d);return Ts(d,b=>{if(b.used()===!1&&b.required())throw new Error("Placeholder: "+b.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},yg=vg.single,kc=vg.multiple,fa=re(Lv),$v=Se.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ac=Pe("factory",{sketch:Xt}),mm=Pe("schema",[]),wb=st("name"),hm=ia("pname","pname",po(t=>"<alloy."+on(t.name)+">"),Sl()),Fp=jo("schema",()=>[Uo("preprocess")]),Cb=Pe("defaults",re({})),Sb=Pe("overrides",re({})),i3=Fn([Ac,mm,wb,hm,Cb,Sb]),c3=Fn([Ac,mm,wb,Cb,Sb]),uE=Fn([Ac,mm,wb,hm,Cb,Sb]),dE=Fn([Ac,Fp,wb,st("unit"),hm,Cb,Sb]),fE=t=>t.fold(M.some,M.none,M.some,M.some),Hv=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},mE=t=>t.fold(Xt,Xt,Xt,Xt),xb=(t,s)=>a=>{const c=Fi("Converting part type",s,a);return t(c)},Mi=xb($v.required,i3),ou=xb($v.external,c3),zc=xb($v.optional,uE),Eb=xb($v.group,dE),gm=re("entirety");var $p=Object.freeze({__proto__:null,required:Mi,external:ou,optional:zc,group:Eb,asNamedPart:fE,name:Hv,asCommon:mE,original:gm});const hE=(t,s,a,c)=>Bs(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),gE=(t,s,a)=>{const c={},d={};return gt(a,h=>{h.fold(b=>{c[b.pname]=yg(!0,(S,T,D)=>b.factory.sketch(hE(S,b,T,D)))},b=>{const S=s.parts[b.name];d[b.name]=re(b.factory.sketch(hE(s,b,S[gm()]),S))},b=>{c[b.pname]=yg(!1,(S,T,D)=>b.factory.sketch(hE(S,b,T,D)))},b=>{c[b.pname]=kc(!0,(S,T,D)=>{const P=S[b.name];return $e(P,F=>b.factory.sketch(Bs(b.defaults(S,F,D),F,b.overrides(S,F))))})})}),{internals:re(c),externals:re(d)}},ww=(t,s)=>{const a={};return gt(s,c=>{fE(c).each(d=>{const h=dM(t,d.pname);a[d.name]=b=>{const S=Fi("Part: "+d.name+" in "+t,Fn(d.schema),b);return{...h,config:b,validated:S}}})}),a},dM=(t,s)=>({uiType:fa(),owner:t,name:s}),Cw=(t,s,a)=>({uiType:fa(),owner:t,name:s,config:a,validated:{}}),l3=t=>xe(t,s=>s.fold(M.none,M.some,M.none,M.none).map(a=>nf(a.name,a.schema.concat([eh(gm())]))).toArray()),pE=t=>$e(t,Hv),Sw=(t,s,a)=>gE(t,s,a),xw=(t,s,a)=>a3(M.some(t),s,s.components,a),Rs=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},nl=(t,s,a)=>Rs(t,s,a).getOrDie("Could not find part: "+a),Ew=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return gt(a,b=>{c[b]=re(h.getByUid(d[b]))}),c},_w=(t,s)=>{const a=t.getSystem();return Ko(s.partUids,(c,d)=>re(a.getByUid(c)))},Tw=t=>xs(t.partUids),zv=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return gt(a,b=>{c[b]=re(h.getByUid(d[b]).getOrDie())}),c},Hp=(t,s)=>{const a=pE(s);return ss($e(a,c=>({key:c,value:t+"-"+c})))},Vv=t=>ia("partUids","partUids",k(s=>Hp(s.uid,t)),Sl());var u3=Object.freeze({__proto__:null,generate:ww,generateOne:Cw,schemas:l3,names:pE,substitutes:Sw,components:xw,defaultUids:Hp,defaultUidsSchema:Vv,getAllParts:_w,getAllPartNames:Tw,getPart:Rs,getPartOrDie:nl,getParts:Ew,getPartsOrDie:zv});const kw=(t,s)=>(t.length>0?[nf("parts",t)]:[]).concat([st("uid"),Pe("dom",{}),Pe("components",[]),eh("originalSpec"),Pe("debug.sketcher",{})]).concat(s),Uv=(t,s,a,c,d)=>{const h=kw(c,d);return Fi(t+" [SpecSchema]",ci(h.concat(s)),a)},d3=(t,s,a,c)=>{const d=vE(c),h=Uv(t,s,d,[],[]);return a(h,d)},_b=(t,s,a,c,d)=>{const h=vE(d),b=l3(a),S=Vv(a),T=Uv(t,s,h,b,[S]),D=Sw(t,T,a),P=xw(t,T,D.internals());return c(T,P,h,D.externals())},bE=t=>go(t,"uid"),vE=t=>bE(t)?t:{...t,uid:ku("uid")},f3=t=>t.uid!==void 0,pm=ci([st("name"),st("factory"),st("configFields"),Pe("apis",{}),Pe("extraApis",{})]),zp=ci([st("name"),st("factory"),st("configFields"),st("partFields"),Pe("apis",{}),Pe("extraApis",{})]),ol=t=>{const s=Fi("Sketcher for "+t.name,pm,t),a=h=>d3(s.name,s.configFields,s.factory,h),c=Ko(s.apis,G0),d=Ko(s.extraApis,(h,b)=>z1(h,b));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},rc=t=>{const s=Fi("Sketcher for "+t.name,zp,t),a=b=>_b(s.name,s.configFields,s.partFields,s.factory,b),c=ww(s.name,s.partFields),d=Ko(s.apis,G0),h=Ko(s.extraApis,(b,S)=>z1(b,S));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...h}},Vp=t=>pa("input")(t)&&Vn(t,"type")!=="radio"||pa("textarea")(t);var m3=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const h3=[st("find")],Mo=ya({fields:h3,name:"composing",apis:m3}),Tb=["input","button","textarea","select"],Aw=(t,s,a)=>{(s.disabled()?Wv:kb)(t,s)},yE=(t,s)=>s.useNative===!0&&yt(Tb,Ns(t.element)),g3=t=>H(t.element,"disabled"),p3=t=>{$t(t.element,"disabled","disabled")},wE=t=>{ee(t.element,"disabled")},b3=t=>Vn(t.element,"aria-disabled")==="true",v3=t=>{$t(t.element,"aria-disabled","true")},y3=t=>{$t(t.element,"aria-disabled","false")},Wv=(t,s,a)=>{s.disableClass.each(d=>{Lr(t.element,d)}),(yE(t,s)?p3:v3)(t),s.onDisabled(t)},kb=(t,s,a)=>{s.disableClass.each(d=>{mr(t.element,d)}),(yE(t,s)?wE:y3)(t),s.onEnabled(t)},Ab=(t,s)=>yE(t,s)?g3(t):b3(t);var w3=Object.freeze({__proto__:null,enable:kb,disable:Wv,isDisabled:Ab,onLoad:Aw,set:(t,s,a,c)=>{(c?Wv:kb)(t,s)}}),S3=Object.freeze({__proto__:null,exhibit:(t,s)=>Fc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ms([i2(ki(),(a,c)=>Ab(a,t)),qh(t,s,Aw)])}),x3=[os("disabled",at),Pe("useNative",!0),Uo("disableClass"),Ao("onDisabled"),Ao("onEnabled")];const vn=ya({fields:x3,name:"disabling",active:S3,apis:w3}),l=(t,s,a,c)=>{const d=Tc(t.element,"."+s.highlightClass);gt(d,h=>{Mn(c,S=>So(S.element,h))||(mr(h,s.highlightClass),t.getSystem().getByDom(h).each(S=>{s.onDehighlight(t,S),bo(S,Gm())}))})},f=(t,s,a)=>l(t,s,a,[]),v=(t,s,a,c)=>{ae(t,s,a,c)&&(mr(c.element,s.highlightClass),s.onDehighlight(t,c),bo(c,Gm()))},C=(t,s,a,c)=>{l(t,s,a,[c]),ae(t,s,a,c)||(Lr(c.element,s.highlightClass),s.onHighlight(t,c),bo(c,a2()))},O=(t,s,a)=>{St(t,s).each(c=>{C(t,s,a,c)})},I=(t,s,a)=>{jt(t,s).each(c=>{C(t,s,a,c)})},U=(t,s,a,c)=>{Le(t,s,a,c).fold(d=>{throw d},d=>{C(t,s,a,d)})},Q=(t,s,a,c)=>{const d=vt(t,s);et(d,c).each(b=>{C(t,s,a,b)})},ae=(t,s,a,c)=>Sc(c.element,s.highlightClass),we=(t,s,a)=>ir(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),Le=(t,s,a,c)=>{const d=Tc(t.element,"."+s.itemClass);return M.from(d[c]).fold(()=>Gn.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},St=(t,s,a)=>ir(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),jt=(t,s,a)=>{const c=Tc(t.element,"."+s.itemClass);return(c.length>0?M.some(c[c.length-1]):M.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},zt=(t,s,a,c)=>{const d=Tc(t.element,"."+s.itemClass);return _t(d,b=>Sc(b,s.highlightClass)).bind(b=>{const S=tg(b,c,0,d.length-1);return t.getSystem().getByDom(d[S]).toOptional()})},Nt=(t,s,a)=>zt(t,s,a,-1),hn=(t,s,a)=>zt(t,s,a,1),vt=(t,s,a)=>{const c=Tc(t.element,"."+s.itemClass);return Ja($e(c,d=>t.getSystem().getByDom(d).toOptional()))};var Rn=Object.freeze({__proto__:null,dehighlightAll:f,dehighlight:v,highlight:C,highlightFirst:O,highlightLast:I,highlightAt:U,highlightBy:Q,isHighlighted:ae,getHighlighted:we,getFirst:St,getLast:jt,getPrevious:Nt,getNext:hn,getCandidates:vt}),so=[st("highlightClass"),st("itemClass"),Ao("onHighlight"),Ao("onDehighlight")];const ft=ya({fields:so,name:"highlighting",apis:Rn}),is=[8],Io=[9],Bo=[13],$r=[27],gr=[32],Nu=[37],Pu=[38],Iu=[39],rs=[40],Ht=(t,s,a)=>{const c=Do(t.slice(0,s)),d=Do(t.slice(s+1));return et(c.concat(d),a)},Ra=(t,s,a)=>{const c=Do(t.slice(0,s));return et(c,a)},Bu=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return et(d.concat(c),a)},Ol=(t,s,a)=>{const c=t.slice(s+1);return et(c,a)},fo=t=>s=>{const a=s.raw;return yt(t,a.which)},Tr=t=>s=>Oo(t,a=>a(s)),bm=t=>t.raw.shiftKey===!0,Up=t=>t.raw.ctrlKey===!0,Dl=Fe(bm),Jn=(t,s)=>({matches:t,classification:s}),SE=(t,s)=>et(t,c=>c.matches(s)).map(c=>c.classification),Zv=(t,s,a)=>{s.exists(d=>a.exists(h=>So(h,d)))||bn(t,I1(),{prevFocus:s,newFocus:a})},wg=()=>{const t=a=>tc(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const h=t(a);Zv(a,d,h)}}},xE=()=>{const t=a=>ft.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(de,b=>{ft.highlight(a,b)});const h=t(a);Zv(a,d,h)}}};var Cg;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Cg||(Cg={}));const vm=(t,s,a,c,d)=>{const h=()=>t.concat([Pe("focusManager",wg()),Zs("focusInside","onFocus",Lh(D=>yt(["onFocus","onEnterOrSpace","onApi"],D)?Gn.value(D):Gn.error("Invalid value for focusInside"))),tr("handler",T),tr("state",s),tr("sendFocusIn",d)]),b=(D,P,F,G,J)=>{const se=F(D,P,G,J);return SE(se,P.event).bind(ce=>ce(D,P,G,J))},T={schema:h,processKey:b,toEvents:(D,P)=>{const F=D.focusInside!==Cg.OnFocusMode?M.none():d(D).map(se=>ot(md(),(ce,De)=>{se(ce,D,P),De.stop()})),G=(se,ce)=>{const De=fo(gr.concat(Bo))(ce.event);D.focusInside===Cg.OnEnterOrSpaceMode&&De&&Yf(se,ce)&&d(D).each(ue=>{ue(se,D,P),ce.stop()})},J=[ot(Hi(),(se,ce)=>{b(se,ce,a,D,P).fold(()=>{G(se,ce)},De=>{ce.stop()})}),ot(yS(),(se,ce)=>{b(se,ce,c,D,P).each(De=>{ce.stop()})})];return ms(F.toArray().concat(J))}};return T},EE=t=>{const s=[Uo("onEscape"),Uo("onEnter"),Pe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Pe("firstTabstop",0),Pe("useTabstopAt",it),Uo("visibilitySelector")].concat([t]),a=(ue,Te)=>{const Oe=ue.visibilitySelector.bind(ze=>Sd(Te,ze)).getOr(Te);return xr(Oe)>0},c=(ue,Te)=>{const Oe=Tc(ue.element,Te.selector),ze=to(Oe,We=>a(Te,We));return M.from(ze[Te.firstTabstop])},d=(ue,Te)=>Te.focusManager.get(ue).bind(Oe=>Sd(Oe,Te.selector)),h=(ue,Te)=>a(ue,Te)&&ue.useTabstopAt(Te),b=(ue,Te,Oe)=>{c(ue,Te).each(ze=>{Te.focusManager.set(ue,ze)})},S=(ue,Te,Oe,ze,We)=>We(Te,Oe,Mt=>h(ze,Mt)).fold(()=>ze.cyclic?M.some(!0):M.none(),Mt=>(ze.focusManager.set(ue,Mt),M.some(!0))),T=(ue,Te,Oe,ze)=>{const We=Tc(ue.element,Oe.selector);return d(ue,Oe).bind(Mt=>_t(We,en(So,Mt)).bind(nt=>S(ue,We,nt,Oe,ze)))},D=(ue,Te,Oe)=>{const ze=Oe.cyclic?Ht:Ra;return T(ue,Te,Oe,ze)},P=(ue,Te,Oe)=>{const ze=Oe.cyclic?Bu:Ol;return T(ue,Te,Oe,ze)},F=ue=>Yu(ue).bind(ml).exists(Te=>So(Te,ue)),G=(ue,Te,Oe)=>d(ue,Oe).filter(ze=>!Oe.useTabstopAt(ze)).bind(ze=>(F(ze)?D:P)(ue,Te,Oe)),J=(ue,Te,Oe)=>Oe.onEnter.bind(ze=>ze(ue,Te)),se=(ue,Te,Oe)=>Oe.onEscape.bind(ze=>ze(ue,Te)),ce=re([Jn(Tr([bm,fo(Io)]),D),Jn(fo(Io),P),Jn(Tr([Dl,fo(Bo)]),J)]),De=re([Jn(fo($r),se),Jn(fo(Io),G)]);return vm(s,gd.init,ce,De,()=>M.some(b))};var Ob=EE(jo("cyclic",at)),w7=EE(jo("cyclic",it));const C7=(t,s,a)=>(x0(t,a,ki()),M.some(!0)),Ow=(t,s,a)=>Vp(a)&&fo(gr)(s.event)?M.none():C7(t,s,a),Sg=(t,s)=>M.some(!0),S7=[Pe("execute",Ow),Pe("useSpace",!1),Pe("useEnter",!0),Pe("useControlEnter",!1),Pe("useDown",!1)],E3=(t,s,a)=>a.execute(t,s,t.element),x7=(t,s,a,c)=>{const d=a.useSpace&&!Vp(t.element)?gr:[],h=a.useEnter?Bo:[],b=a.useDown?rs:[],S=d.concat(h).concat(b);return[Jn(fo(S),E3)].concat(a.useControlEnter?[Jn(Tr([Up,fo(Bo)]),E3)]:[])},_3=(t,s,a,c)=>a.useSpace&&!Vp(t.element)?[Jn(fo(gr),Sg)]:[];var E7=vm(S7,gd.init,x7,_3,()=>M.none());const mM=()=>{const t=Xo();return ui({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var T3=Object.freeze({__proto__:null,flatgrid:mM,init:t=>t.state(t)});const hM=t=>(s,a,c,d)=>{const h=t(s.element);return O3(h,s,a,c,d)},_E=(t,s)=>{const a=G2(t,s);return hM(a)},k3=(t,s)=>{const a=G2(s,t);return hM(a)},A3=t=>(s,a,c,d)=>O3(t,s,a,c,d),O3=(t,s,a,c,d)=>c.focusManager.get(s).bind(b=>t(s.element,b,c,d)).map(b=>(c.focusManager.set(s,b),!0)),gM=A3,pM=A3,jv=A3,bM=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Dw=t=>!bM(t.dom),TE=(t,s)=>_t(t,s).map(a=>({index:a,candidates:t})),Rw=(t,s,a)=>{const c=b=>So(b,s),d=Tc(t,a),h=to(d,Dw);return TE(h,c)},Wp=(t,s)=>_t(t,a=>So(s,a)),T7=(t,s,a,c)=>{const d=Math.floor(s/a),h=s%a;return c(d,h).bind(b=>{const S=b.row*a+b.column;return S>=0&&S<t.length?M.some(t[S]):M.none()})},vM=(t,s,a,c,d)=>T7(t,s,c,(h,b)=>{const T=h===a-1?t.length-h*c:c,D=tg(b,d,0,T-1);return M.some({row:h,column:D})}),yM=(t,s,a,c,d)=>T7(t,s,c,(h,b)=>{const S=tg(h,d,0,a-1),D=S===a-1?t.length-S*c:c,P=tu(b,0,D-1);return M.some({row:S,column:P})}),wM=(t,s,a,c)=>vM(t,s,a,c,1),k7=(t,s,a,c)=>vM(t,s,a,c,-1),lY=(t,s,a,c)=>yM(t,s,a,c,-1),uY=(t,s,a,c)=>yM(t,s,a,c,1),A7=[st("selector"),Pe("execute",Ow),ec("onEscape"),Pe("captureTab",!1),th()],O7=(t,s,a)=>{ir(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},D3=(t,s)=>s.focusManager.get(t).bind(a=>Sd(a,s.selector)),D7=(t,s,a,c)=>D3(t,a).bind(d=>a.execute(t,s,d)),kE=t=>(s,a,c,d)=>Rw(s,a,c.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),CM=(t,s,a)=>a.captureTab?M.some(!0):M.none(),SM=(t,s,a)=>a.onEscape(t,s),xM=kE(k7),EM=kE(wM),_M=kE(lY),TM=kE(uY),R7=re([Jn(fo(Nu),_E(xM,EM)),Jn(fo(Iu),k3(xM,EM)),Jn(fo(Pu),gM(_M)),Jn(fo(rs),pM(TM)),Jn(Tr([bm,fo(Io)]),CM),Jn(Tr([Dl,fo(Io)]),CM),Jn(fo(gr.concat(Bo)),D7)]),kM=re([Jn(fo($r),SM),Jn(fo(gr),Sg)]);var M7=vm(A7,mM,R7,kM,()=>M.some(O7));const AE=(t,s,a,c,d)=>{const h=S=>Ns(S)==="button"&&Vn(S,"disabled")==="disabled",b=(S,T,D)=>d(S,T,c,0,D.length-1,D[T],P=>h(D[P])?b(S,P,D):M.from(D[P]));return Rw(t,a,s).bind(S=>{const T=S.index,D=S.candidates;return b(T,T,D)})},R3=(t,s,a,c)=>AE(t,s,a,c,(d,h,b,S,T,D,P)=>{const F=tu(h+b,S,T);return F===d?M.from(D):P(F)}),Mw=(t,s,a,c)=>AE(t,s,a,c,(d,h,b,S,T,D,P)=>{const F=tg(h,b,S,T);return F===d?M.none():P(F)}),AM=[st("selector"),Pe("getInitial",M.none),Pe("execute",Ow),ec("onEscape"),Pe("executeOnMove",!1),Pe("allowVertical",!0),Pe("allowHorizontal",!0),Pe("cycles",!0)],N7=(t,s)=>s.focusManager.get(t).bind(a=>Sd(a,s.selector)),M3=(t,s,a)=>N7(t,a).bind(c=>a.execute(t,s,c)),P7=(t,s,a)=>{s.getInitial(t).orThunk(()=>ir(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},OM=(t,s,a)=>(a.cycles?Mw:R3)(t,a.selector,s,-1),DM=(t,s,a)=>(a.cycles?Mw:R3)(t,a.selector,s,1),qv=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?M3(s,a,c):M.some(!0)),RM=(t,s,a)=>a.onEscape(t,s),MM=(t,s,a,c)=>{const d=[...a.allowHorizontal?Nu:[]].concat(a.allowVertical?Pu:[]),h=[...a.allowHorizontal?Iu:[]].concat(a.allowVertical?rs:[]);return[Jn(fo(d),qv(_E(OM,DM))),Jn(fo(h),qv(k3(OM,DM))),Jn(fo(Bo),M3),Jn(fo(gr),M3)]},NM=re([Jn(fo(gr),Sg),Jn(fo($r),RM)]);var PM=vm(AM,gd.init,MM,NM,()=>M.some(P7));const Nw=(t,s,a)=>M.from(t[s]).bind(c=>M.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),IM=(t,s,a,c)=>{const h=t[s].length,b=tg(a,c,0,h-1);return Nw(t,s,b)},BM=(t,s,a,c)=>{const d=tg(a,c,0,t.length-1),h=t[d].length,b=tu(s,0,h-1);return Nw(t,d,b)},LM=(t,s,a,c)=>{const h=t[s].length,b=tu(a+c,0,h-1);return Nw(t,s,b)},OE=(t,s,a,c)=>{const d=tu(a+c,0,t.length-1),h=t[d].length,b=tu(s,0,h-1);return Nw(t,d,b)},I7=(t,s,a)=>IM(t,s,a,1),DE=(t,s,a)=>IM(t,s,a,-1),B7=(t,s,a)=>BM(t,a,s,-1),FM=(t,s,a)=>BM(t,a,s,1),sl=(t,s,a)=>LM(t,s,a,-1),L7=(t,s,a)=>LM(t,s,a,1),$M=(t,s,a)=>OE(t,a,s,-1),HM=(t,s,a)=>OE(t,a,s,1),F7=[nf("selectors",[st("row"),st("cell")]),Pe("cycles",!0),Pe("previousSelector",M.none),Pe("execute",Ow)],zM=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return ir(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},VM=(t,s,a)=>tc(t.element).bind(c=>a.execute(t,s,c)),$7=(t,s)=>$e(t,a=>Tc(a,s.selectors.cell)),RE=(t,s)=>(a,c,d)=>{const h=d.cycles?t:s;return Sd(c,d.selectors.row).bind(b=>{const S=Tc(b,d.selectors.cell);return Wp(S,c).bind(T=>{const D=Tc(a,d.selectors.row);return Wp(D,b).bind(P=>{const F=$7(D,d);return h(F,P,T).map(G=>G.cell)})})})},UM=RE(DE,sl),WM=RE(I7,L7),ZM=RE(B7,$M),H7=RE(FM,HM),z7=re([Jn(fo(Nu),_E(UM,WM)),Jn(fo(Iu),k3(UM,WM)),Jn(fo(Pu),gM(ZM)),Jn(fo(rs),pM(H7)),Jn(fo(gr.concat(Bo)),VM)]),jM=re([Jn(fo(gr),Sg)]);var qM=vm(F7,gd.init,z7,jM,()=>M.some(zM));const GM=[st("selector"),Pe("execute",Ow),Pe("moveOnTab",!1)],KM=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),V7=(t,s,a)=>{ir(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},YM=(t,s,a)=>Mw(t,a.selector,s,-1),XM=(t,s,a)=>Mw(t,a.selector,s,1),JM=(t,s,a,c)=>a.moveOnTab?jv(YM)(t,s,a,c):M.none(),QM=(t,s,a,c)=>a.moveOnTab?jv(XM)(t,s,a,c):M.none(),Zp=re([Jn(fo(Pu),jv(YM)),Jn(fo(rs),jv(XM)),Jn(Tr([bm,fo(Io)]),JM),Jn(Tr([Dl,fo(Io)]),QM),Jn(fo(Bo),KM),Jn(fo(gr),KM)]),eN=re([Jn(fo(gr),Sg)]);var tN=vm(GM,gd.init,Zp,eN,()=>M.some(V7));const nN=[ec("onSpace"),ec("onEnter"),ec("onShiftEnter"),ec("onLeft"),ec("onRight"),ec("onTab"),ec("onShiftTab"),ec("onUp"),ec("onDown"),ec("onEscape"),Pe("stopSpaceKeyup",!1),Uo("focusIn")],U7=(t,s,a)=>[Jn(fo(gr),a.onSpace),Jn(Tr([Dl,fo(Bo)]),a.onEnter),Jn(Tr([bm,fo(Bo)]),a.onShiftEnter),Jn(Tr([bm,fo(Io)]),a.onShiftTab),Jn(Tr([Dl,fo(Io)]),a.onTab),Jn(fo(Pu),a.onUp),Jn(fo(rs),a.onDown),Jn(fo(Nu),a.onLeft),Jn(fo(Iu),a.onRight),Jn(fo(gr),a.onSpace)],Gv=(t,s,a)=>[...a.stopSpaceKeyup?[Jn(fo(gr),Sg)]:[],Jn(fo($r),a.onEscape)];var W7=vm(nN,gd.init,U7,Gv,t=>t.focusIn);const Z7=Ob.schema(),oN=w7.schema(),j7=PM.schema(),q7=M7.schema(),G7=qM.schema(),sN=E7.schema(),N3=tN.schema(),P3=W7.schema();var K7=Object.freeze({__proto__:null,acyclic:Z7,cyclic:oN,flow:j7,flatgrid:q7,matrix:G7,execution:sN,menu:N3,special:P3});const jp=t=>Vr(t,"setGridSize"),Sn=V1({branchKey:"mode",branches:K7,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{jp(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:T3}),I3=(t,s)=>{I2(()=>{lg(t,s,()=>$e(s,t.getSystem().build))},t.element)},rN=(t,s)=>{I2(()=>{hw(t,s,()=>JS(t.element,s,t.getSystem().buildOrPatch))},t.element)},Y7=(t,s,a,c)=>{fw(s);const d=x2(t.element,a,c,t.getSystem().buildOrPatch);Xx(t,d),t.syncComponents()},Db=(t,s,a)=>{const c=t.getSystem().build(a);Vi(t,c,s)},Pw=(t,s,a,c)=>{yf(s),Db(t,(d,h)=>Uf(d,h,a),c)},aN=(t,s,a,c)=>(s.reuseDom?rN:I3)(t,c),B3=(t,s,a,c)=>{Db(t,vc,c)},qp=(t,s,a,c)=>{Db(t,Vf,c)},Gp=(t,s,a,c)=>{const d=ME(t);et(d,b=>So(c.element,b.element)).each(yf)},ME=(t,s)=>t.components(),iN=(t,s,a,c,d)=>{const h=ME(t);return M.from(h[c]).map(b=>(d.fold(()=>yf(b),S=>{(s.reuseDom?Y7:Pw)(t,b,c,S)}),b))};var xg=Object.freeze({__proto__:null,append:B3,prepend:qp,remove:Gp,replaceAt:iN,replaceBy:(t,s,a,c,d)=>{const h=ME(t);return _t(h,c).bind(b=>iN(t,s,a,b,d))},set:aN,contents:ME});const Wn=ya({fields:[Aa("reuseDom",!0)],name:"replacing",apis:xg}),J7=(t,s)=>{const a=ms(s);return ya({fields:[st("enabled")],name:t,active:{events:re(a)}})},Yn=(t,s)=>{const a=J7(t,s);return{key:t,value:{config:{},me:a,configAsRaw:re({}),initialConfig:{},state:gd}}},L3=(t,s)=>{s.ignore||($c(t.element),s.onFocus(t))};var lN=Object.freeze({__proto__:null,focus:L3,blur:(t,s)=>{s.ignore||Va(t.element)},isFocused:t=>hf(t.element)}),eH=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Fc(a)},events:t=>ms([ot(md(),(s,a)=>{L3(s,t),a.stop()})].concat(t.stopMousedown?[ot(Bc(),(s,a)=>{a.event.prevent()})]:[]))}),NE=[Ao("onFocus"),Pe("stopMousedown",!1),Pe("ignore",!1)];const $n=ya({fields:NE,name:"focusing",active:eH,apis:lN}),PE=t=>({init:()=>{const a=mn(t);return{get:()=>a.get(),set:S=>a.set(S),clear:()=>a.set(t),readState:()=>a.get()}}}),uN=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},tH=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?Lr(t.element,c):mr(t.element,c)})},Kv=(t,s,a,c)=>{const d=a.get();a.set(c),tH(t,s,a),uN(t,s,a),d!==c&&s.onToggled(t,c)},F3=(t,s,a)=>{Kv(t,s,a,!a.get())},dN=(t,s,a)=>{Kv(t,s,a,!0)},fN=(t,s,a)=>{Kv(t,s,a,!1)},nH=(t,s,a)=>a.get(),IE=(t,s,a)=>{Kv(t,s,a,s.selected)};var oH=Object.freeze({__proto__:null,onLoad:IE,toggle:F3,isOn:nH,on:dN,off:fN,set:Kv}),sH=Object.freeze({__proto__:null,exhibit:()=>Fc({}),events:(t,s)=>{const a=kS(t,s,F3),c=qh(t,s,IE);return ms(dt([t.toggleOnExecute?[a]:[],[c]]))}});const mN=(t,s,a)=>{$t(t.element,"aria-pressed",a),s.syncWithExpanded&&$3(t,s,a)},rH=(t,s,a)=>{$t(t.element,"aria-selected",a)},aH=(t,s,a)=>{$t(t.element,"aria-checked",a)},$3=(t,s,a)=>{$t(t.element,"aria-expanded",a)};var Iw=[Pe("selected",!1),Uo("toggleClass"),Pe("toggleOnExecute",!0),Ao("onToggled"),Zs("aria",{mode:"none"},aa("mode",{pressed:[Pe("syncWithExpanded",!1),tr("update",mN)],checked:[tr("update",aH)],expanded:[tr("update",$3)],selected:[tr("update",rH)],none:[tr("update",de)]}))];const mo=ya({fields:Iw,name:"toggling",active:sH,apis:oH,state:PE(!1)}),Yv=()=>{const t=(s,a)=>{a.stop(),Km(s)};return[ot(Uh(),t),ot(M1(),t),jh(xo()),jh(Bc())]},Xv=t=>{const s=a=>rf((c,d)=>{a(c),d.stop()});return ms(dt([t.map(s).toArray(),Yv()]))},H3="alloy.item-hover",z3="alloy.item-focus",hN="alloy.item-toggled",gN=t=>{(tc(t.element).isNone()||$n.isFocused(t))&&($n.isFocused(t)||$n.focus(t),bn(t,H3,{item:t}))},V3=t=>{bn(t,z3,{item:t})},iH=(t,s)=>{bn(t,hN,{item:t,state:s})},U3=re(H3),cH=re(z3),lH=re(hN),pN=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Xt),BE=(t,s)=>({aria:{mode:s?"selected":"checked"},...Pi(t,(a,c)=>c!=="exclusive"),onToggled:(a,c)=>{Ne(t.onToggled)&&t.onToggled(a,c),iH(a,c)}}),W3=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:pN(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Al.augment(t.itemBehaviours,[t.toggling.fold(mo.revoke,s=>mo.config(BE(s,t.role.exists(a=>a==="option")))),$n.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{V3(s)}}),Sn.config({mode:"execution"}),Jt.config({store:{mode:"memory",initialValue:t.data}}),Yn("item-type-events",[...Yv(),ot(dd(),gN),ot(w0(),$n.focus)])]),components:t.components,eventOrder:t.eventOrder}),Z3=[st("data"),st("components"),st("dom"),Pe("hasSubmenu",!1),Uo("toggling"),Uo("role"),Al.field("itemBehaviours",[mo,$n,Sn,Jt]),Pe("ignoreFocus",!1),Pe("domModification",{}),tr("builder",W3),Pe("eventOrder",{})],uH=t=>({dom:t.dom,components:t.components,events:ms([$1(w0())])}),dH=[st("dom"),st("components"),tr("builder",uH)],j3=re("item-widget"),q3=re([Mi({name:"widget",overrides:t=>({behaviours:Et([Jt.config({store:{mode:"manual",getValue:s=>t.data,setValue:de}})])})})]),bN=t=>{const s=Sw(j3(),t,q3()),a=xw(j3(),t,s.internals()),c=h=>Rs(h,t,"widget").map(b=>(Sn.focusIn(b),b)),d=(h,b)=>Vp(b.event.target)?M.none():(t.autofocus&&b.setSource(h.element),M.none());return{dom:t.dom,components:a,domModification:t.domModification,events:ms([rf((h,b)=>{c(h).each(S=>{b.stop()})}),ot(dd(),gN),ot(w0(),(h,b)=>{t.autofocus?c(h):$n.focus(h)})]),behaviours:Al.augment(t.widgetBehaviours,[Jt.config({store:{mode:"memory",initialValue:t.data}}),$n.config({ignore:t.ignoreFocus,onFocus:h=>{V3(h)}}),Sn.config({mode:"special",focusIn:t.autofocus?h=>{c(h)}:qk(),onLeft:d,onRight:d,onEscape:(h,b)=>!$n.isFocused(h)&&!t.autofocus?($n.focus(h),M.some(!0)):(t.autofocus&&b.setSource(h.element),M.none())})])}},vN=[st("uid"),st("data"),st("components"),st("dom"),Pe("autofocus",!1),Pe("ignoreFocus",!1),Al.field("widgetBehaviours",[Jt,$n,Sn]),Pe("domModification",{}),Vv(q3()),tr("builder",bN)],fH=aa("type",{widget:vN,item:Z3,separator:dH}),mH=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),hH=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),gH=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),pH=re([Eb({factory:{sketch:t=>{const s=Fi("menu.spec item",fH,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>go(s,"uid")?s:{...s,uid:ku("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),bH=re([hr("role"),st("value"),st("items"),st("dom"),st("components"),Pe("eventOrder",{}),Za("menuBehaviours",[ft,Jt,Mo,Sn]),Zs("movement",{mode:"menu",moveOnTab:!0},aa("mode",{grid:[th(),tr("config",mH)],matrix:[tr("config",hH),st("rowSelector"),Pe("previousSelector",M.none)],menu:[Pe("moveOnTab",!0),tr("config",gH)]})),q1(),Pe("fakeFocus",!1),Pe("focusManager",wg()),Ao("onHighlight"),Ao("onDehighlight"),Pe("showMenuRole",!0)]),G3=re("alloy.menu-focus"),vH=(t,s)=>{const a=Tc(t.element,'[role="menuitemradio"][aria-checked="true"]');gt(a,c=>{So(c,s.element)||t.getSystem().getByDom(c).each(d=>{mo.off(d)})})},yH=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Fr(t.menuBehaviours,[ft.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Jt.config({store:{mode:"memory",initialValue:t.value}}),Mo.config({find:M.some}),Sn.config(t.movement.config(t,t.movement))]),events:ms([ot(cH(),(d,h)=>{const b=h.event;d.getSystem().getByDom(b.target).each(S=>{ft.highlight(d,S),h.stop(),bn(d,G3(),{menu:d,item:S})})}),ot(U3(),(d,h)=>{const b=h.event.item;ft.highlight(d,b)}),ot(lH(),(d,h)=>{const{item:b,state:S}=h.event;S&&Vn(b.element,"role")==="menuitemradio"&&vH(d,b)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Rb=rc({name:"Menu",configFields:bH(),partFields:pH(),factory:yH}),wH=t=>Mc(t,(s,a)=>({k:s,v:a})),yN=(t,s,a,c)=>Tt(a,c).bind(d=>Tt(t,d).bind(h=>{const b=yN(t,s,a,h);return M.some([h].concat(b))})).getOr([]),Mb=(t,s)=>{const a={};Ts(t,(b,S)=>{gt(b,T=>{a[T]=S})});const c=s,d=wH(s),h=Ko(d,(b,S)=>[S].concat(yN(a,c,d,S)));return Ko(a,b=>Tt(h,b).getOr([b]))},CH=()=>{const t=mn({}),s=mn({}),a=mn({}),c=Xo(),d=mn({}),h=()=>{t.set({}),s.set({}),a.set({}),c.clear()},b=()=>c.get().isNone(),S=(We,Mt)=>{s.set({...s.get(),[We]:{type:"prepared",menu:Mt}})},T=(We,Mt,tn,nt)=>{c.set(We),t.set(tn),s.set(Mt),d.set(nt);const an=Mb(nt,tn);a.set(an)},D=We=>ts(t.get(),(Mt,tn)=>Mt===We),P=(We,Mt,tn)=>ce(We).bind(nt=>D(We).bind(an=>Mt(an).map(Vt=>({triggeredMenu:nt,triggeringItem:Vt,triggeringPath:tn})))),F=(We,Mt)=>{const tn=to(ue(We).toArray(),nt=>ce(nt).isSome());return Tt(a.get(),We).bind(nt=>{const an=Do(tn.concat(nt)),Vt=xe(an,(dn,wo)=>P(dn,Mt,an.slice(0,wo+1)).fold(()=>Ur(c.get(),dn)?[]:[M.none()],Ys=>[M.some(Ys)]));return Qo(Vt)})},G=We=>Tt(t.get(),We).map(Mt=>{const tn=Tt(a.get(),We).getOr([]);return[Mt].concat(tn)}),J=We=>Tt(a.get(),We).bind(Mt=>Mt.length>1?M.some(Mt.slice(1)):M.none()),se=We=>Tt(a.get(),We),ce=We=>De(We).bind(wN),De=We=>Tt(s.get(),We),ue=We=>Tt(t.get(),We);return{setMenuBuilt:S,setContents:T,expand:G,refresh:se,collapse:J,lookupMenu:De,lookupItem:ue,otherMenus:We=>{const Mt=d.get();return Kt(xs(Mt),We)},getPrimary:()=>c.get().bind(ce),getMenus:()=>s.get(),clear:h,isClear:b,getTriggeringPath:F}},wN=t=>t.type==="prepared"?M.some(t.menu):M.none(),Kp={init:CH,extractPreparedMenu:wN},K3=on("tiered-menu-item-highlight"),CN=on("tiered-menu-item-dehighlight");var ja;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ja||(ja={}));const SH=(t,s)=>{const a=Xo(),c=(pt,Wt,Un)=>Ko(Un,(ro,Tn)=>{const Xn=()=>Rb.sketch({...ro,value:Tn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ks,bs)=>{bn(ks,K3,{menuComp:ks,itemComp:bs})},onDehighlight:(ks,bs)=>{bn(ks,CN,{menuComp:ks,itemComp:bs})},focusManager:t.fakeFocus?xE():wg()});return Tn===Wt?{type:"prepared",menu:pt.getSystem().build(Xn())}:{type:"notbuilt",nbMenu:Xn}}),d=Kp.init(),h=pt=>{const Wt=c(pt,t.data.primary,t.data.menus),Un=T();return d.setContents(t.data.primary,Wt,t.data.expansions,Un),d.getPrimary()},b=pt=>Jt.getValue(pt).value,S=(pt,Wt,Un)=>Ss(Wt,ro=>{if(!ro.getSystem().isConnected())return M.none();const Tn=ft.getCandidates(ro);return et(Tn,Xn=>b(Xn)===Un)}),T=pt=>Ko(t.data.menus,(Wt,Un)=>xe(Wt.items,ro=>ro.type==="separator"?[]:[ro.data.value])),D=ft.highlight,P=(pt,Wt)=>{D(pt,Wt),ft.getHighlighted(Wt).orThunk(()=>ft.getFirst(Wt)).each(Un=>{t.fakeFocus?ft.highlight(Wt,Un):x0(pt,Un.element,w0())})},F=(pt,Wt)=>Ja($e(Wt,Un=>pt.lookupMenu(Un).bind(ro=>ro.type==="prepared"?M.some(ro.menu):M.none()))),G=(pt,Wt,Un)=>{const ro=F(Wt,Wt.otherMenus(Un));gt(ro,Tn=>{vd(Tn.element,[t.markers.backgroundMenu]),t.stayInDom||Wn.remove(pt,Tn)})},J=pt=>a.get().getOrThunk(()=>{const Wt={},Un=Tc(pt.element,`.${t.markers.item}`),ro=to(Un,Tn=>Vn(Tn,"aria-haspopup")==="true");return gt(ro,Tn=>{pt.getSystem().getByDom(Tn).each(Xn=>{const ks=b(Xn);Wt[ks]=Xn})}),a.set(Wt),Wt}),se=(pt,Wt)=>{const Un=J(pt);Ts(Un,(ro,Tn)=>{const Xn=yt(Wt,Tn);$t(ro.element,"aria-expanded",Xn)})},ce=(pt,Wt,Un)=>M.from(Un[0]).bind(ro=>Wt.lookupMenu(ro).bind(Tn=>{if(Tn.type==="notbuilt")return M.none();{const Xn=Tn.menu,ks=F(Wt,Un.slice(1));return gt(ks,bs=>{Lr(bs.element,t.markers.backgroundMenu)}),ke(Xn.element)||Wn.append(pt,Tl(Xn)),vd(Xn.element,[t.markers.backgroundMenu]),P(pt,Xn),G(pt,Wt,Un),M.some(Xn)}}));let De;(function(pt){pt[pt.HighlightSubmenu=0]="HighlightSubmenu",pt[pt.HighlightParent=1]="HighlightParent"})(De||(De={}));const ue=(pt,Wt,Un)=>{if(Un.type==="notbuilt"){const ro=pt.getSystem().build(Un.nbMenu());return d.setMenuBuilt(Wt,ro),ro}else return Un.menu},Te=(pt,Wt,Un=De.HighlightSubmenu)=>{if(Wt.hasConfigured(vn)&&vn.isDisabled(Wt))return M.some(Wt);{const ro=b(Wt);return d.expand(ro).bind(Tn=>(se(pt,Tn),M.from(Tn[0]).bind(Xn=>d.lookupMenu(Xn).bind(ks=>{const bs=ue(pt,Xn,ks);return ke(bs.element)||Wn.append(pt,Tl(bs)),t.onOpenSubmenu(pt,Wt,bs,Do(Tn)),Un===De.HighlightSubmenu?(ft.highlightFirst(bs),ce(pt,d,Tn)):(ft.dehighlightAll(bs),M.some(Wt))}))))}},Oe=(pt,Wt)=>{const Un=b(Wt);return d.collapse(Un).bind(ro=>(se(pt,ro),ce(pt,d,ro).map(Tn=>(t.onCollapseMenu(pt,Wt,Tn),Tn))))},ze=(pt,Wt)=>{const Un=b(Wt);return d.refresh(Un).bind(ro=>(se(pt,ro),ce(pt,d,ro)))},We=(pt,Wt)=>Vp(Wt.element)?M.none():Te(pt,Wt,De.HighlightSubmenu),Mt=(pt,Wt)=>Vp(Wt.element)?M.none():Oe(pt,Wt),tn=(pt,Wt)=>Oe(pt,Wt).orThunk(()=>t.onEscape(pt,Wt).map(()=>pt)),nt=pt=>(Wt,Un)=>Sd(Un.getSource(),`.${t.markers.item}`).bind(ro=>Wt.getSystem().getByDom(ro).toOptional().bind(Tn=>pt(Wt,Tn).map(it))),an=ms([ot(G3(),(pt,Wt)=>{const Un=Wt.event.item;d.lookupItem(b(Un)).each(()=>{const ro=Wt.event.menu;ft.highlight(pt,ro);const Tn=b(Wt.event.item);d.refresh(Tn).each(Xn=>G(pt,d,Xn))})}),rf((pt,Wt)=>{const Un=Wt.event.target;pt.getSystem().getByDom(Un).each(ro=>{b(ro).indexOf("collapse-item")===0&&Oe(pt,ro),Te(pt,ro,De.HighlightSubmenu).fold(()=>{t.onExecute(pt,ro)},de)})}),er((pt,Wt)=>{h(pt).each(Un=>{Wn.append(pt,Tl(Un)),t.onOpenMenu(pt,Un),t.highlightOnOpen===ja.HighlightMenuAndItem?P(pt,Un):t.highlightOnOpen===ja.HighlightJustMenu&&D(pt,Un)})}),ot(K3,(pt,Wt)=>{t.onHighlightItem(pt,Wt.event.menuComp,Wt.event.itemComp)}),ot(CN,(pt,Wt)=>{t.onDehighlightItem(pt,Wt.event.menuComp,Wt.event.itemComp)}),...t.navigateOnHover?[ot(U3(),(pt,Wt)=>{const Un=Wt.event.item;ze(pt,Un),Te(pt,Un,De.HighlightParent),t.onHover(pt,Un)})]:[]]),Vt=pt=>ft.getHighlighted(pt).bind(ft.getHighlighted),dn=pt=>{Vt(pt).each(Wt=>{Oe(pt,Wt)})},wo=pt=>{d.getPrimary().each(Wt=>{P(pt,Wt)})},Ys=pt=>M.from(pt.components()[0]).filter(Wt=>Vn(Wt.element,"role")==="menu"),gn={collapseMenu:dn,highlightPrimary:wo,repositionMenus:pt=>{d.getPrimary().bind(Un=>Vt(pt).bind(ro=>{const Tn=b(ro),Xn=Zc(d.getMenus()),ks=Ja($e(Xn,Kp.extractPreparedMenu));return d.getTriggeringPath(Tn,bs=>S(pt,ks,bs))}).map(ro=>({primary:Un,triggeringPath:ro}))).fold(()=>{Ys(pt).each(Un=>{t.onRepositionMenu(pt,Un,[])})},({primary:Un,triggeringPath:ro})=>{t.onRepositionMenu(pt,Un,ro)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Fr(t.tmenuBehaviours,[Sn.config({mode:"special",onRight:nt(We),onLeft:nt(Mt),onEscape:nt(tn),focusIn:(pt,Wt)=>{d.getPrimary().each(Un=>{x0(pt,Un.element,w0())})}}),ft.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Mo.config({find:pt=>ft.getHighlighted(pt)}),Wn.config({})]),eventOrder:t.eventOrder,apis:gn,events:an}},xH=re("collapse-item"),_d=(t,s,a)=>({primary:t,menus:s,expansions:a}),SN=(t,s)=>({primary:t,menus:as(t,s),expansions:{}}),xN=t=>({value:on(xH()),meta:{text:t}}),Yp=ol({name:"TieredMenu",configFields:[bp("onExecute"),bp("onEscape"),Qm("onOpenMenu"),Qm("onOpenSubmenu"),Ao("onRepositionMenu"),Ao("onCollapseMenu"),Pe("highlightOnOpen",ja.HighlightMenuAndItem),nf("data",[st("primary"),st("menus"),st("expansions")]),Pe("fakeFocus",!1),Ao("onHighlightItem"),Ao("onDehighlightItem"),Ao("onHover"),pp(),st("dom"),Pe("navigateOnHover",!0),Pe("stayInDom",!1),Za("tmenuBehaviours",[Sn,ft,Mo,Wn]),Pe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:SH,extraApis:{tieredData:_d,singleData:SN,collapseItem:xN}}),EH=(t,s,a,c,d)=>{const h=()=>t.lazySink(s),b=c.type==="horizontal"?{layouts:{onLtr:()=>yp(),onRtl:()=>ah()}}:{},S=D=>D.length===2,T=D=>S(D)?b:{};return Yp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Po.close(s),t.onEscape.map(D=>D(s)),M.some(!0)),onExecute:()=>M.some(!0),onOpenMenu:(D,P)=>{Wa.positionWithinBounds(h().getOrDie(),P,a,d())},onOpenSubmenu:(D,P,F,G)=>{const J=h().getOrDie();Wa.position(J,F,{anchor:{type:"submenu",item:P,...T(G)}})},onRepositionMenu:(D,P,F)=>{const G=h().getOrDie();Wa.positionWithinBounds(G,P,a,d()),gt(F,J=>{const se=T(J.triggeringPath);Wa.position(G,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem,...se}})})}})},LE=(t,s)=>{const a=(G,J)=>t.getRelated(G).exists(ce=>sh(ce,J)),c=(G,J)=>{Po.setContent(G,J)},d=(G,J,se)=>{const ce=M.none;h(G,J,se,ce)},h=(G,J,se,ce)=>{const De=t.lazySink(G).getOrDie();Po.openWhileCloaked(G,J,()=>Wa.positionWithinBounds(De,G,se,ce())),Jt.setValue(G,M.some({mode:"position",config:se,getBounds:ce}))},b=(G,J,se)=>{S(G,J,se,M.none)},S=(G,J,se,ce)=>{const De=EH(t,G,J,se,ce);Po.open(G,De),Jt.setValue(G,M.some({mode:"menu",menu:De}))},T=G=>{Po.isOpen(G)&&(Jt.setValue(G,M.none()),Po.close(G))},D=G=>Po.getState(G),P=G=>{Po.isOpen(G)&&Jt.getValue(G).each(J=>{switch(J.mode){case"menu":Po.getState(G).each(Yp.repositionMenus);break;case"position":const se=t.lazySink(G).getOrDie();Wa.positionWithinBounds(se,G,J.config,J.getBounds());break}})},F={setContent:c,showAt:d,showWithinBounds:h,showMenuAt:b,showMenuWithinBounds:S,hide:T,getContent:D,reposition:P,isOpen:Po.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Fr(t.inlineBehaviours,[Po.config({isPartOf:(G,J,se)=>sh(J,se)||a(G,se),getAttachPoint:G=>t.lazySink(G).getOrDie(),onOpen:G=>{t.onShow(G)},onClose:G=>{t.onHide(G)}}),Jt.config({store:{mode:"memory",initialValue:M.none()}}),el.config({channels:{...Hc({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({})}),...gg({...t.fireRepositionEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({}),doReposition:P})}})]),eventOrder:t.eventOrder,apis:F}},pr=ol({name:"InlineView",configFields:[st("lazySink"),Ao("onShow"),Ao("onHide"),cd("onEscape"),Za("inlineBehaviours",[Po,Jt,el]),jr("fireDismissalEventInstead",[Pe("event",hd())]),jr("fireRepositionEventInstead",[Pe("event",r2())]),Pe("getRelated",M.none),Pe("isExtraPart",at),Pe("eventOrder",M.none)],factory:LE,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var FE=tinymce.util.Tools.resolve("tinymce.util.Delay"),Bw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$E=tinymce.util.Tools.resolve("tinymce.EditorManager"),Xp=tinymce.util.Tools.resolve("tinymce.Env"),Lu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Lu||(Lu={}));var Jv;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Jv||(Jv={}));const Es=t=>s=>s.options.get(t),Lw=t=>s=>M.from(t(s)),HE=t=>{const s=Xp.deviceType.isPhone(),a=Xp.deviceType.isTablet()||s,c=t.options.register,d=b=>j(b)||b===!1,h=b=>j(b)||ln(b);c("skin",{processor:b=>j(b)||b===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:h,default:Bw.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:b=>j(b)||Lt(b),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:b=>Lt(b)||j(b)||Ce(b)?{value:b,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),fn(9,b=>{c("toolbar"+(b+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:Jv.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:b=>b==="both"||Lt(b),default:!Xp.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},Y3=Es("readonly"),zE=Es("disabled"),X3=Es("height"),J3=Es("width"),Fw=Lw(Es("min_width")),Q3=Lw(Es("min_height")),Jp=Lw(Es("max_width")),Qv=Lw(Es("max_height")),eA=Lw(Es("style_formats")),tA=Es("style_formats_merge"),EN=Es("style_formats_autohide"),_N=Es("content_langs"),TN=Es("removed_menuitems"),ey=Es("toolbar_mode"),VE=Es("toolbar_groups"),UE=Es("toolbar_location"),kN=Es("fixed_toolbar_container"),nA=Es("fixed_toolbar_container_target"),AN=Es("toolbar_persist"),oA=Es("toolbar_sticky_offset"),ON=Es("menubar"),WE=Es("toolbar"),DN=Es("file_picker_callback"),sA=Es("file_picker_validator_handler"),RN=Es("font_size_input_default_unit"),MN=Es("file_picker_types"),ZE=Es("typeahead_urls"),rA=Es("anchor_top"),aA=Es("anchor_bottom"),NN=Es("draggable_modal"),jE=Es("statusbar"),PN=Es("elementpath"),iA=Es("branding"),IN=Es("resize"),BN=Es("paste_as_text"),LN=Es("sidebar_show"),cA=Es("promotion"),qE=Es("help_accessibility"),FN=Es("default_font_stack"),$w=Es("skin"),lA=t=>t.options.get("skin")===!1,GE=t=>t.options.get("menubar")!==!1,$N=t=>{const s=t.options.get("skin_url");if(lA(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return $E.baseURL+"/skins/ui/"+a}},_H=t=>M.from(t.options.get("skin_url")),HN=t=>t.options.get("line_height_formats").split(" "),KE=t=>{const s=WE(t),a=j(s),c=Ce(s)&&s.length>0;return!Hw(t)&&(c||a||s===!0)},YE=t=>{const s=fn(9,c=>t.options.get("toolbar"+(c+1))),a=to(s,j);return En(a.length>0,a)},Hw=t=>YE(t).fold(()=>{const s=WE(t);return xt(s,j)&&s.length>0},it),uA=t=>UE(t)===Jv.bottom,XE=t=>{var s;if(!t.inline)return M.none();const a=(s=kN(t))!==null&&s!==void 0?s:"";if(a.length>0)return ir(Ye(),a);const c=nA(t);return Ct(c)?M.some(Ke.fromDom(c)):M.none()},Cf=t=>t.inline&&XE(t).isSome(),dA=t=>XE(t).getOrThunk(()=>Nr(br(Ke.fromDom(t.getElement())))),fA=t=>t.inline&&!GE(t)&&!KE(t)&&!Hw(t),Qp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Cf(t)&&!fA(t),Eg=t=>!Cf(t)&&t.options.get("ui_mode")==="split",zN=t=>{const s=t.options.get("menu");return Ko(s,a=>({...a,items:a.items}))};var TH=Object.freeze({__proto__:null,get ToolbarMode(){return Lu},get ToolbarLocation(){return Jv},register:HE,getSkinUrl:$N,getSkinUrlOption:_H,isReadOnly:Y3,isDisabled:zE,getSkin:$w,isSkinDisabled:lA,getHeightOption:X3,getWidthOption:J3,getMinWidthOption:Fw,getMinHeightOption:Q3,getMaxWidthOption:Jp,getMaxHeightOption:Qv,getUserStyleFormats:eA,shouldMergeStyleFormats:tA,shouldAutoHideStyleFormats:EN,getLineHeightFormats:HN,getContentLanguages:_N,getRemovedMenuItems:TN,isMenubarEnabled:GE,isMultipleToolbars:Hw,isToolbarEnabled:KE,isToolbarPersist:AN,getMultipleToolbarsOption:YE,getUiContainer:dA,useFixedContainer:Cf,isSplitUiMode:Eg,getToolbarMode:ey,isDraggableModal:NN,isDistractionFree:fA,isStickyToolbar:Qp,getStickyToolbarOffset:oA,getToolbarLocation:UE,isToolbarLocationBottom:uA,getToolbarGroups:VE,getMenus:zN,getMenubar:ON,getToolbar:WE,getFilePickerCallback:DN,getFilePickerTypes:MN,useTypeaheadUrls:ZE,getAnchorTop:rA,getAnchorBottom:aA,getFilePickerValidatorHandler:sA,getFontSizeInputDefaultUnit:RN,useStatusBar:jE,useElementPath:PN,promotionEnabled:cA,useBranding:iA,getResize:IN,getPasteAsText:BN,getSidebarShow:LN,useHelpAccessibility:qE,getDefaultFontStack:FN});const VN=["visible","hidden","clip"],UN=t=>Rr(t).length>0&&!yt(VN,t),mA=t=>{if(ds(t)){const s=ut(t,"overflow-x"),a=ut(t,"overflow-y");return UN(s)||UN(a)}else return!1},hA=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),gA=(t,s)=>{const a=Vx(s,mA),c=a.length===0?Hl(s).map(gu).map(d=>Vx(d,mA)).getOr([]):a;return zs(c).map(d=>({element:d,others:c.slice(1),isFullscreen:()=>hA(t)}))},e1=(t,s)=>Eg(t)?gA(t,s):M.none(),t1=t=>{const s=[...$e(t.others,Pr),ea()];return t.isFullscreen()?ea():Kd(Pr(t.element),s)},Ma=ol({name:"Button",factory:t=>{const s=Xv(t.action),a=t.dom.tag,c=h=>Tt(t.dom,"attributes").bind(b=>Tt(b,h)),d=()=>{if(a==="button"){const h=c("type").getOr("button"),b=c("role").map(S=>({role:S})).getOr({});return{type:h,...b}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Al.augment(t.buttonBehaviours,[$n.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Pe("uid",void 0),st("dom"),Pe("components",[]),Al.field("buttonBehaviours",[$n,Sn]),Uo("action"),Uo("role"),Pe("eventOrder",{})]}),kH=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return zo(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},AH=t=>Array.prototype.slice.call(t.dom.classList,0),ym=t=>{const s=Ke.fromHtml(t),a=Sr(s),c=kH(s),d=AH(s),h=a.length===0?{}:{innerHtml:Ai(s)};return{tag:Ns(s),classes:d,attributes:c,...h}},Jo=t=>{const s=f3(t)&&Vr(t,"uid")?t.uid:ku("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var pA=Object.freeze({__proto__:null,exhibit:(t,s)=>Fc({attributes:ss([{key:s.tabAttr,value:"true"}])})}),OH=[Pe("tabAttr","data-alloy-tabstop")];const cr=ya({fields:OH,name:"tabstopping",active:pA}),JE=on("tooltip.exclusive"),zw=on("tooltip.show"),Vw=on("tooltip.hide"),Uw=on("tooltip.immediateHide"),Ww=on("tooltip.immediateShow"),WN=(t,s,a)=>{t.getSystem().broadcastOn([JE],{})};var DH=Object.freeze({__proto__:null,hideAllExclusive:WN,immediateOpenClose:(t,s,a,c)=>bo(t,c?Ww:Uw),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Wn.set(d,c)})},setEnabled:(t,s,a,c)=>a.setEnabled(c)}),RH=Object.freeze({__proto__:null,events:(t,s)=>{const a=b=>{s.getTooltip().each(S=>{S.getSystem().isConnected()&&(yf(S),t.onHide(b,S),s.clearTooltip())}),s.clearTimer()},c=b=>{if(!s.isShowing()&&s.isEnabled()){WN(b);const S=t.lazySink(b).getOrDie(),T=b.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ms(t.mode==="normal"?[ot(dd(),D=>{bo(b,zw)}),ot(Xf(),D=>{bo(b,Vw)})]:[]),behaviours:Et([Wn.config({})])});s.setTooltip(T),vf(S,T),t.onShow(b,T),Wa.position(S,T,{anchor:t.anchor(b)})}},d=b=>{s.getTooltip().each(S=>{const T=t.lazySink(b).getOrDie();Wa.position(T,S,{anchor:t.anchor(b)})})},h=()=>{switch(t.mode){case"normal":return[ot(fd(),b=>{bo(b,Ww)}),ot(qm(),b=>{bo(b,Uw)}),ot(dd(),b=>{bo(b,zw)}),ot(Xf(),b=>{bo(b,Vw)})];case"follow-highlight":return[ot(a2(),(b,S)=>{bo(b,zw)}),ot(Gm(),b=>{bo(b,Vw)})];case"children-normal":return[ot(fd(),(b,S)=>{tc(b.element).each(T=>{ys(S.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{bo(b,Ww)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),ot(qm(),b=>{tc(b.element).fold(()=>{bo(b,Uw)},de)}),ot(dd(),b=>{ir(b.element,"[data-mce-tooltip]:hover").each(S=>{s.getTooltip().fold(()=>{bo(b,zw)},T=>{s.isShowing()&&(t.onShow(b,T),d(b))})})}),ot(Xf(),b=>{ir(b.element,"[data-mce-tooltip]:hover").fold(()=>{bo(b,Vw)},de)})];default:return[ot(fd(),(b,S)=>{tc(b.element).each(T=>{ys(S.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{bo(b,Ww)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),ot(qm(),b=>{tc(b.element).fold(()=>{bo(b,Uw)},de)})]}};return ms(dt([[TS(b=>{t.onSetup(b)}),ot(zw,b=>{s.resetTimer(()=>{c(b)},t.delayForShow())}),ot(Vw,b=>{s.resetTimer(()=>{a(b)},t.delayForHide())}),ot(Ww,b=>{s.resetTimer(()=>{c(b)},0)}),ot(Uw,b=>{s.resetTimer(()=>{a(b)},0)}),ot(Ql(),(b,S)=>{const T=S;T.universal||yt(T.channels,JE)&&a(b)}),sf(b=>{a(b)})],h()]))}}),bA=[st("lazySink"),st("tooltipDom"),Pe("exclusive",!0),Pe("tooltipComponents",[]),os("delayForShow",re(300)),os("delayForHide",re(300)),os("onSetup",de),li("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Pe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:re([da,za,wa,Da,Ca,ps]),onRtl:re([da,za,wa,Da,Ca,ps])},bubble:Du(0,-2,{})})),Ao("onHide"),Ao("onShow")],MH=Object.freeze({__proto__:null,init:()=>{const t=mn(!0),s=Xo(),a=Xo(),c=()=>{s.on(clearTimeout)},d=(b,S)=>{c(),s.set(setTimeout(b,S))},h=re("not-implemented");return ui({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:c,resetTimer:d,readState:h,isEnabled:()=>t.get(),setEnabled:b=>t.set(b)})}});const kr=ya({fields:bA,name:"tooltipping",active:RH,state:MH,apis:DH});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:vA,setPrototypeOf:ZN,isFrozen:NH,getPrototypeOf:PH,getOwnPropertyDescriptor:IH}=Object;let{freeze:su,seal:Sf,create:QE}=Object,{apply:yA,construct:wA}=typeof Reflect<"u"&&Reflect;su||(su=function(s){return s}),Sf||(Sf=function(s){return s}),yA||(yA=function(s,a,c){return s.apply(a,c)}),wA||(wA=function(s,a){return new s(...a)});const e_=Td(Array.prototype.forEach),jN=Td(Array.prototype.pop),Zw=Td(Array.prototype.push),t_=Td(String.prototype.toLowerCase),CA=Td(String.prototype.toString),qN=Td(String.prototype.match),jw=Td(String.prototype.replace),BH=Td(String.prototype.indexOf),LH=Td(String.prototype.trim),wm=Td(Object.prototype.hasOwnProperty),ru=Td(RegExp.prototype.test),n1=SA(TypeError);function Td(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return yA(t,s,c)}}function SA(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return wA(t,a)}}function qs(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t_;ZN&&ZN(t,null);let c=s.length;for(;c--;){let d=s[c];if(typeof d=="string"){const h=a(d);h!==d&&(NH(s)||(s[c]=h),d=h)}t[d]=!0}return t}function FH(t){for(let s=0;s<t.length;s++)wm(t,s)||(t[s]=null);return t}function Nb(t){const s=QE(null);for(const[a,c]of vA(t))wm(t,a)&&(Array.isArray(c)?s[a]=FH(c):c&&typeof c=="object"&&c.constructor===Object?s[a]=Nb(c):s[a]=c);return s}function ty(t,s){for(;t!==null;){const c=IH(t,s);if(c){if(c.get)return Td(c.get);if(typeof c.value=="function")return Td(c.value)}t=PH(t)}function a(){return null}return a}const GN=su(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qw=su(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Gw=su(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),KN=su(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Kw=su(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),n_=su(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xA=su(["#text"]),Cm=su(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Yw=su(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YN=su(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),o_=su(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$H=Sf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),HH=Sf(/<%[\w\W]*|[\w\W]*%>/gm),Xw=Sf(/\${[\w\W]*}/gm),zH=Sf(/^data-[\-\w.\u00B7-\uFFFF]/),XN=Sf(/^aria-[\-\w]+$/),s_=Sf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),VH=Sf(/^(?:\w+script|data):/i),EA=Sf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),r_=Sf(/^html$/i),UH=Sf(/^[a-z][.\w]*(-[.\w]+)+$/i);var _A=Object.freeze({__proto__:null,MUSTACHE_EXPR:$H,ERB_EXPR:HH,TMPLIT_EXPR:Xw,DATA_ATTR:zH,ARIA_ATTR:XN,IS_ALLOWED_URI:s_,IS_SCRIPT_OR_DATA:VH,ATTR_WHITESPACE:EA,DOCTYPE_NAME:r_,CUSTOM_ELEMENT:UH});const ny={element:1,text:3,progressingInstruction:7,comment:8,document:9},WH=function(){return typeof window>"u"?null:window},JN=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const h="dompurify"+(c?"#"+c:"");try{return s.createPolicy(h,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function TA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WH();const s=Ro=>TA(Ro);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==ny.document)return s.isSupported=!1,s;let{document:a}=t;const c=a,d=c.currentScript,{DocumentFragment:h,HTMLTemplateElement:b,Node:S,Element:T,NodeFilter:D,NamedNodeMap:P=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:F,DOMParser:G,trustedTypes:J}=t,se=T.prototype,ce=ty(se,"cloneNode"),De=ty(se,"remove"),ue=ty(se,"nextSibling"),Te=ty(se,"childNodes"),Oe=ty(se,"parentNode");if(typeof b=="function"){const Ro=a.createElement("template");Ro.content&&Ro.content.ownerDocument&&(a=Ro.content.ownerDocument)}let ze,We="";const{implementation:Mt,createNodeIterator:tn,createDocumentFragment:nt,getElementsByTagName:an}=a,{importNode:Vt}=c;let dn={};s.isSupported=typeof vA=="function"&&typeof Oe=="function"&&Mt&&Mt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:wo,ERB_EXPR:Ys,TMPLIT_EXPR:Go,DATA_ATTR:gn,ARIA_ATTR:pt,IS_SCRIPT_OR_DATA:Wt,ATTR_WHITESPACE:Un,CUSTOM_ELEMENT:ro}=_A;let{IS_ALLOWED_URI:Tn}=_A,Xn=null;const ks=qs({},[...GN,...qw,...Gw,...Kw,...xA]);let bs=null;const Ll=qs({},[...Cm,...Yw,...YN,...o_]);let yr=Object.seal(QE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Wu=null,fc=null,Zu=!0,ju=!0,Bf=!1,rS=!0,xh=!1,k5=!0,f0=!1,A5=!1,QG=!1,Ak=!1,E$=!1,_$=!1,EX=!0,_X=!1;const Aee="user-content-";let eK=!0,O5=!1,Ok={},Dk=null;const TX=qs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let kX=null;const AX=qs({},["audio","video","img","source","image","track"]);let tK=null;const OX=qs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),T$="http://www.w3.org/1998/Math/MathML",k$="http://www.w3.org/2000/svg",m0="http://www.w3.org/1999/xhtml";let Rk=m0,nK=!1,oK=null;const Oee=qs({},[T$,k$,m0],CA);let D5=null;const Dee=["application/xhtml+xml","text/html"],Ree="text/html";let Fl=null,Mk=null;const Mee=a.createElement("form"),DX=function(qe){return qe instanceof RegExp||qe instanceof Function},sK=function(){let qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Mk&&Mk===qe)){if((!qe||typeof qe!="object")&&(qe={}),qe=Nb(qe),D5=Dee.indexOf(qe.PARSER_MEDIA_TYPE)===-1?Ree:qe.PARSER_MEDIA_TYPE,Fl=D5==="application/xhtml+xml"?CA:t_,Xn=wm(qe,"ALLOWED_TAGS")?qs({},qe.ALLOWED_TAGS,Fl):ks,bs=wm(qe,"ALLOWED_ATTR")?qs({},qe.ALLOWED_ATTR,Fl):Ll,oK=wm(qe,"ALLOWED_NAMESPACES")?qs({},qe.ALLOWED_NAMESPACES,CA):Oee,tK=wm(qe,"ADD_URI_SAFE_ATTR")?qs(Nb(OX),qe.ADD_URI_SAFE_ATTR,Fl):OX,kX=wm(qe,"ADD_DATA_URI_TAGS")?qs(Nb(AX),qe.ADD_DATA_URI_TAGS,Fl):AX,Dk=wm(qe,"FORBID_CONTENTS")?qs({},qe.FORBID_CONTENTS,Fl):TX,Wu=wm(qe,"FORBID_TAGS")?qs({},qe.FORBID_TAGS,Fl):{},fc=wm(qe,"FORBID_ATTR")?qs({},qe.FORBID_ATTR,Fl):{},Ok=wm(qe,"USE_PROFILES")?qe.USE_PROFILES:!1,Zu=qe.ALLOW_ARIA_ATTR!==!1,ju=qe.ALLOW_DATA_ATTR!==!1,Bf=qe.ALLOW_UNKNOWN_PROTOCOLS||!1,rS=qe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,xh=qe.SAFE_FOR_TEMPLATES||!1,k5=qe.SAFE_FOR_XML!==!1,f0=qe.WHOLE_DOCUMENT||!1,Ak=qe.RETURN_DOM||!1,E$=qe.RETURN_DOM_FRAGMENT||!1,_$=qe.RETURN_TRUSTED_TYPE||!1,QG=qe.FORCE_BODY||!1,EX=qe.SANITIZE_DOM!==!1,_X=qe.SANITIZE_NAMED_PROPS||!1,eK=qe.KEEP_CONTENT!==!1,O5=qe.IN_PLACE||!1,Tn=qe.ALLOWED_URI_REGEXP||s_,Rk=qe.NAMESPACE||m0,yr=qe.CUSTOM_ELEMENT_HANDLING||{},qe.CUSTOM_ELEMENT_HANDLING&&DX(qe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(yr.tagNameCheck=qe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),qe.CUSTOM_ELEMENT_HANDLING&&DX(qe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(yr.attributeNameCheck=qe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),qe.CUSTOM_ELEMENT_HANDLING&&typeof qe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(yr.allowCustomizedBuiltInElements=qe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xh&&(ju=!1),E$&&(Ak=!0),Ok&&(Xn=qs({},xA),bs=[],Ok.html===!0&&(qs(Xn,GN),qs(bs,Cm)),Ok.svg===!0&&(qs(Xn,qw),qs(bs,Yw),qs(bs,o_)),Ok.svgFilters===!0&&(qs(Xn,Gw),qs(bs,Yw),qs(bs,o_)),Ok.mathMl===!0&&(qs(Xn,Kw),qs(bs,YN),qs(bs,o_))),qe.ADD_TAGS&&(Xn===ks&&(Xn=Nb(Xn)),qs(Xn,qe.ADD_TAGS,Fl)),qe.ADD_ATTR&&(bs===Ll&&(bs=Nb(bs)),qs(bs,qe.ADD_ATTR,Fl)),qe.ADD_URI_SAFE_ATTR&&qs(tK,qe.ADD_URI_SAFE_ATTR,Fl),qe.FORBID_CONTENTS&&(Dk===TX&&(Dk=Nb(Dk)),qs(Dk,qe.FORBID_CONTENTS,Fl)),eK&&(Xn["#text"]=!0),f0&&qs(Xn,["html","head","body"]),Xn.table&&(qs(Xn,["tbody"]),delete Wu.tbody),qe.TRUSTED_TYPES_POLICY){if(typeof qe.TRUSTED_TYPES_POLICY.createHTML!="function")throw n1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof qe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw n1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ze=qe.TRUSTED_TYPES_POLICY,We=ze.createHTML("")}else ze===void 0&&(ze=JN(J,d)),ze!==null&&typeof We=="string"&&(We=ze.createHTML(""));su&&su(qe),Mk=qe}},RX=qs({},["mi","mo","mn","ms","mtext"]),MX=qs({},["annotation-xml"]),Nee=qs({},["title","style","font","a","script"]),NX=qs({},[...qw,...Gw,...KN]),PX=qs({},[...Kw,...n_]),Pee=function(qe){let On=Oe(qe);(!On||!On.tagName)&&(On={namespaceURI:Rk,tagName:"template"});const Co=t_(qe.tagName),Ya=t_(On.tagName);return oK[qe.namespaceURI]?qe.namespaceURI===k$?On.namespaceURI===m0?Co==="svg":On.namespaceURI===T$?Co==="svg"&&(Ya==="annotation-xml"||RX[Ya]):!!NX[Co]:qe.namespaceURI===T$?On.namespaceURI===m0?Co==="math":On.namespaceURI===k$?Co==="math"&&MX[Ya]:!!PX[Co]:qe.namespaceURI===m0?On.namespaceURI===k$&&!MX[Ya]||On.namespaceURI===T$&&!RX[Ya]?!1:!PX[Co]&&(Nee[Co]||!NX[Co]):!!(D5==="application/xhtml+xml"&&oK[qe.namespaceURI]):!1},y1=function(qe){Zw(s.removed,{element:qe});try{Oe(qe).removeChild(qe)}catch{De(qe)}},R5=function(qe,On){try{Zw(s.removed,{attribute:On.getAttributeNode(qe),from:On})}catch{Zw(s.removed,{attribute:null,from:On})}if(On.removeAttribute(qe),qe==="is"&&!bs[qe])if(Ak||E$)try{y1(On)}catch{}else try{On.setAttribute(qe,"")}catch{}},IX=function(qe){let On=null,Co=null;if(QG)qe="<remove></remove>"+qe;else{const $l=qN(qe,/^[\r\n\t ]+/);Co=$l&&$l[0]}D5==="application/xhtml+xml"&&Rk===m0&&(qe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+qe+"</body></html>");const Ya=ze?ze.createHTML(qe):qe;if(Rk===m0)try{On=new G().parseFromString(Ya,D5)}catch{}if(!On||!On.documentElement){On=Mt.createDocument(Rk,"template",null);try{On.documentElement.innerHTML=nK?We:Ya}catch{}}const qu=On.body||On.documentElement;return qe&&Co&&qu.insertBefore(a.createTextNode(Co),qu.childNodes[0]||null),Rk===m0?an.call(On,f0?"html":"body")[0]:f0?On.documentElement:qu},BX=function(qe){return tn.call(qe.ownerDocument||qe,qe,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT|D.SHOW_PROCESSING_INSTRUCTION|D.SHOW_CDATA_SECTION,null)},LX=function(qe){return qe instanceof F&&(typeof qe.nodeName!="string"||typeof qe.textContent!="string"||typeof qe.removeChild!="function"||!(qe.attributes instanceof P)||typeof qe.removeAttribute!="function"||typeof qe.setAttribute!="function"||typeof qe.namespaceURI!="string"||typeof qe.insertBefore!="function"||typeof qe.hasChildNodes!="function")},FX=function(qe){return typeof S=="function"&&qe instanceof S},h0=function(qe,On,Co){dn[qe]&&e_(dn[qe],Ya=>{Ya.call(s,On,Co,Mk)})},$X=function(qe){let On=null;if(h0("beforeSanitizeElements",qe,null),LX(qe))return y1(qe),!0;const Co=Fl(qe.nodeName);if(h0("uponSanitizeElement",qe,{tagName:Co,allowedTags:Xn}),qe.hasChildNodes()&&!FX(qe.firstElementChild)&&ru(/<[/\w]/g,qe.innerHTML)&&ru(/<[/\w]/g,qe.textContent)||qe.nodeType===ny.progressingInstruction||k5&&qe.nodeType===ny.comment&&ru(/<[/\w]/g,qe.data))return y1(qe),!0;if(!Xn[Co]||Wu[Co]){if(!Wu[Co]&&zX(Co)&&(yr.tagNameCheck instanceof RegExp&&ru(yr.tagNameCheck,Co)||yr.tagNameCheck instanceof Function&&yr.tagNameCheck(Co)))return!1;if(eK&&!Dk[Co]){const Ya=Oe(qe)||qe.parentNode,qu=Te(qe)||qe.childNodes;if(qu&&Ya){const $l=qu.length;for(let Lf=$l-1;Lf>=0;--Lf){const w1=ce(qu[Lf],!0);w1.__removalCount=(qe.__removalCount||0)+1,Ya.insertBefore(w1,ue(qe))}}}return y1(qe),!0}return qe instanceof T&&!Pee(qe)||(Co==="noscript"||Co==="noembed"||Co==="noframes")&&ru(/<\/no(script|embed|frames)/i,qe.innerHTML)?(y1(qe),!0):(xh&&qe.nodeType===ny.text&&(On=qe.textContent,e_([wo,Ys,Go],Ya=>{On=jw(On,Ya," ")}),qe.textContent!==On&&(Zw(s.removed,{element:qe.cloneNode()}),qe.textContent=On)),h0("afterSanitizeElements",qe,null),!1)},HX=function(qe,On,Co){if(EX&&(On==="id"||On==="name")&&(Co in a||Co in Mee))return!1;if(!(ju&&!fc[On]&&ru(gn,On))){if(!(Zu&&ru(pt,On))){if(!bs[On]||fc[On]){if(!(zX(qe)&&(yr.tagNameCheck instanceof RegExp&&ru(yr.tagNameCheck,qe)||yr.tagNameCheck instanceof Function&&yr.tagNameCheck(qe))&&(yr.attributeNameCheck instanceof RegExp&&ru(yr.attributeNameCheck,On)||yr.attributeNameCheck instanceof Function&&yr.attributeNameCheck(On))||On==="is"&&yr.allowCustomizedBuiltInElements&&(yr.tagNameCheck instanceof RegExp&&ru(yr.tagNameCheck,Co)||yr.tagNameCheck instanceof Function&&yr.tagNameCheck(Co))))return!1}else if(!tK[On]){if(!ru(Tn,jw(Co,Un,""))){if(!((On==="src"||On==="xlink:href"||On==="href")&&qe!=="script"&&BH(Co,"data:")===0&&kX[qe])){if(!(Bf&&!ru(Wt,jw(Co,Un,"")))){if(Co)return!1}}}}}}return!0},zX=function(qe){return qe!=="annotation-xml"&&qN(qe,ro)},VX=function(qe){h0("beforeSanitizeAttributes",qe,null);const{attributes:On}=qe;if(!On)return;const Co={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:bs};let Ya=On.length;for(;Ya--;){const qu=On[Ya],{name:$l,namespaceURI:Lf,value:w1}=qu,M5=Fl($l);let mu=$l==="value"?w1:LH(w1);const Bee=mu;if(Co.attrName=M5,Co.attrValue=mu,Co.keepAttr=!0,Co.forceKeepAttr=void 0,h0("uponSanitizeAttribute",qe,Co),mu=Co.attrValue,Co.forceKeepAttr)continue;if(!Co.keepAttr){R5($l,qe);continue}if(!rS&&ru(/\/>/i,mu)){R5($l,qe);continue}xh&&e_([wo,Ys,Go],WX=>{mu=jw(mu,WX," ")});const UX=Fl(qe.nodeName);if(!HX(UX,M5,mu)){R5($l,qe);continue}if(_X&&(M5==="id"||M5==="name")&&(R5($l,qe),mu=Aee+mu),k5&&ru(/((--!?|])>)|<\/(style|title)/i,mu)){R5($l,qe);continue}if(ze&&typeof J=="object"&&typeof J.getAttributeType=="function"&&!Lf)switch(J.getAttributeType(UX,M5)){case"TrustedHTML":{mu=ze.createHTML(mu);break}case"TrustedScriptURL":{mu=ze.createScriptURL(mu);break}}if(mu!==Bee)try{Lf?qe.setAttributeNS(Lf,$l,mu):qe.setAttribute($l,mu),LX(qe)?y1(qe):jN(s.removed)}catch{}}h0("afterSanitizeAttributes",qe,null)},Iee=function Ro(qe){let On=null;const Co=BX(qe);for(h0("beforeSanitizeShadowDOM",qe,null);On=Co.nextNode();)h0("uponSanitizeShadowNode",On,null),!$X(On)&&(On.content instanceof h&&Ro(On.content),VX(On));h0("afterSanitizeShadowDOM",qe,null)};return s.sanitize=function(Ro){let qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},On=null,Co=null,Ya=null,qu=null;if(nK=!Ro,nK&&(Ro="<!-->"),typeof Ro!="string"&&!FX(Ro))if(typeof Ro.toString=="function"){if(Ro=Ro.toString(),typeof Ro!="string")throw n1("dirty is not a string, aborting")}else throw n1("toString is not a function");if(!s.isSupported)return Ro;if(A5||sK(qe),s.removed=[],typeof Ro=="string"&&(O5=!1),O5){if(Ro.nodeName){const w1=Fl(Ro.nodeName);if(!Xn[w1]||Wu[w1])throw n1("root node is forbidden and cannot be sanitized in-place")}}else if(Ro instanceof S)On=IX("<!---->"),Co=On.ownerDocument.importNode(Ro,!0),Co.nodeType===ny.element&&Co.nodeName==="BODY"||Co.nodeName==="HTML"?On=Co:On.appendChild(Co);else{if(!Ak&&!xh&&!f0&&Ro.indexOf("<")===-1)return ze&&_$?ze.createHTML(Ro):Ro;if(On=IX(Ro),!On)return Ak?null:_$?We:""}On&&QG&&y1(On.firstChild);const $l=BX(O5?Ro:On);for(;Ya=$l.nextNode();)$X(Ya)||(Ya.content instanceof h&&Iee(Ya.content),VX(Ya));if(O5)return Ro;if(Ak){if(E$)for(qu=nt.call(On.ownerDocument);On.firstChild;)qu.appendChild(On.firstChild);else qu=On;return(bs.shadowroot||bs.shadowrootmode)&&(qu=Vt.call(c,qu,!0)),qu}let Lf=f0?On.outerHTML:On.innerHTML;return f0&&Xn["!doctype"]&&On.ownerDocument&&On.ownerDocument.doctype&&On.ownerDocument.doctype.name&&ru(r_,On.ownerDocument.doctype.name)&&(Lf="<!DOCTYPE "+On.ownerDocument.doctype.name+`>
`+Lf),xh&&e_([wo,Ys,Go],w1=>{Lf=jw(Lf,w1," ")}),ze&&_$?ze.createHTML(Lf):Lf},s.setConfig=function(){let Ro=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sK(Ro),A5=!0},s.clearConfig=function(){Mk=null,A5=!1},s.isValidAttribute=function(Ro,qe,On){Mk||sK({});const Co=Fl(Ro),Ya=Fl(qe);return HX(Co,Ya,On)},s.addHook=function(Ro,qe){typeof qe=="function"&&(dn[Ro]=dn[Ro]||[],Zw(dn[Ro],qe))},s.removeHook=function(Ro){if(dn[Ro])return jN(dn[Ro])},s.removeHooks=function(Ro){dn[Ro]&&(dn[Ro]=[])},s.removeAllHooks=function(){dn={}},s}var ZH=TA();const QN=t=>ZH().sanitize(t);var kd=tinymce.util.Tools.resolve("tinymce.util.I18n");const jH={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},eP="temporary-placeholder",a_=t=>()=>Tt(t,eP).getOr("!not found!"),i_=(t,s)=>{const a=t.toLowerCase();if(kd.isRtl()){const c=vs(a,"-rtl");return go(s,c)?c:a}else return a},tP=(t,s)=>Tt(s,i_(t,s)),kA=(t,s)=>{const a=s();return tP(t,a).getOrThunk(a_(a))},Jw=(t,s,a)=>{const c=s();return tP(t,c).or(a).getOrThunk(a_(c))},nP=t=>kd.isRtl()?go(jH,t):!1,oP=()=>Yn("add-focusable",[er(t=>{nu(t.element,"svg").each(s=>$t(s,"focusable","false"))})]),sP=(t,s,a,c)=>{var d,h;const b=nP(s)?["tox-icon--flip"]:[],S=Tt(a,i_(s,a)).or(c).getOrThunk(a_(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(b),innerHtml:S},behaviours:Et([...(h=t.behaviours)!==null&&h!==void 0?h:[],oP()])}},Fu=(t,s,a,c=M.none())=>sP(s,t,a(),c),qH=(t,s,a)=>{const c=a(),d=et(t,h=>go(c,i_(h,c)));return sP(s,d.getOr(eP),c,M.none())},GH={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},c_=ol({name:"Notification",factory:t=>{const s=on("notification-text"),a=Jo({dom:ym(`<p id=${s}>${QN(t.backstageProvider.translate(t.text))}</p>`),behaviours:Et([Wn.config({})])}),c=se=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${se}%`}}}),d=se=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${se}%`}}),h=Jo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},d(0)],behaviours:Et([Wn.config({})])}),T={updateProgress:(se,ce)=>{se.getSystem().isConnected()&&h.getOpt(se).each(De=>{Wn.set(De,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(ce)]},d(ce)])})},updateText:(se,ce)=>{if(se.getSystem().isConnected()){const De=a.get(se);Wn.set(De,[nr(ce)])}}},D=dt([t.icon.toArray(),t.level.toArray(),t.level.bind(se=>M.from(GH[se])).toArray()]),P=Jo(Ma.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Fu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Et([cr.config({}),kr.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:se=>{t.onAction(se)}})),F=qH(D,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),G={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Et([Wn.config({})])},J=[F,G];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(se=>["tox-notification","tox-notification--in",`tox-notification--${se}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Et([cr.config({}),$n.config({}),Sn.config({mode:"special",onEscape:se=>(t.onAction(se),M.some(!0))})]),components:J.concat(t.progress?[h.asSpec()]:[]).concat([P.asSpec()]),apis:T}},configFields:[Uo("level"),st("progress"),Uo("icon"),st("onAction"),st("text"),st("iconProvider"),st("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var rP=(t,s,a,c)=>{const d=s.backstage.shared,h=()=>Ke.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),b=()=>{const F=Pr(h());return M.some(F)},S=F=>{b().each(G=>{gt(F,J=>{uo(J.element,"width"),no(J.element)>G.width&&It(J.element,"width",G.width+"px")})})};return{open:(F,G,J)=>{const se=()=>{const Te=Mt=>{Wn.remove(Mt,ce),De()},Oe=(Mt,tn)=>{Sr(Mt.element).length===0?ze(Mt,tn):We(Mt,tn)},ze=(Mt,tn)=>{pr.hide(Mt),c.clear(),tn&&t.focus()},We=(Mt,tn)=>{tn&&Sn.focusIn(Mt)};c.on(Mt=>{G();const tn=J();Te(Mt),Oe(Mt,tn)})},ce=Oi(c_.sketch({text:F.text,level:yt(["success","error","warning","warn","info"],F.type)?F.type:void 0,progress:F.progressBar===!0,icon:F.icon,onAction:se,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(c.isSet()){const Te=Tl(ce);c.on(Oe=>{Wn.append(Oe,Te),pr.reposition(Oe),js.refresh(Oe),S(Oe.components())})}else{const Te=Oi(pr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Sn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Wn.config({}),...Qp(t)&&!d.header.isPositionedAtTop()?[]:[js.config({contextual:{lazyContext:()=>M.some(Pr(h())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Mt=>e1(t,Mt.element).map(nt=>({bounds:t1(nt),optScrollEnv:M.some({currentScrollTop:nt.element.dom.scrollTop,scrollElmTop:_a(nt.element).top})})).getOrThunk(()=>({bounds:ea(),optScrollEnv:M.none()}))})]])})),Oe=Tl(ce),ze={maxHeightFunction:Sp()},We={...d.anchors.banner(),overrides:ze};c.set(Te),a.add(Te),pr.showWithinBounds(Te,Oe,{anchor:We},b)}ln(F.timeout)&&F.timeout>0&&FE.setEditorTimeout(t,()=>{se()},F.timeout);const De=()=>{c.on(Te=>{pr.reposition(Te),js.refresh(Te),S(Te.components())})};return{close:se,reposition:De,text:Te=>{c_.updateText(ce,Te)},settings:F,getEl:()=>ce.element.dom,progressBar:{value:Te=>{c_.updateProgress(ce,Te)}}}},close:F=>{F.close()},getArgs:F=>F.settings}};const XH={setup:(t,s)=>{const a=(d,h)=>{bn(d,Hi(),{raw:h})},c=()=>t.getMenu().bind(ft.getHighlighted);s.on("keydown",d=>{const h=d.which;t.isActive()&&(t.isMenuOpen()?h===13?(c().each(Km),d.preventDefault()):h===40?(c().fold(()=>{t.getMenu().each(ft.highlightFirst)},b=>{a(b,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&c().each(b=>{a(b,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var AA;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(AA||(AA={}));var xf=AA;const Qw="tox-menu-nav__js",oy="tox-collection__item",l_="tox-swatch",aP={normal:Qw,color:l_},OA="tox-collection__item--enabled",JH="tox-collection__group-heading",u_="tox-collection__item-icon",DA="tox-collection__item-label",iP="tox-collection__item-accessory",RA="tox-collection__item-caret",Pb="tox-collection__item-checkmark",Ib="tox-collection__item--active",d_="tox-collection__item-container",f_="tox-collection__item-container--column",cP="tox-collection__item-container--row",lP="tox-collection__item-container--align-right",uP="tox-collection__item-container--align-left",dP="tox-collection__item-container--valign-top",MA="tox-collection__item-container--valign-middle",fP="tox-collection__item-container--valign-bottom",mP=t=>Tt(aP,t).getOr(Qw),hP=t=>t==="color"?"tox-swatches":"tox-menu",m_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:hP(t),tieredMenu:"tox-tiered-menu"}),o1=t=>{const s=m_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:mP(t)}},gP=(t,s,a)=>{const c=m_(a);return{tag:"div",classes:dt([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},QH=[Rb.parts.items({})],eC=(t,s,a)=>{const c=m_(a);return{dom:{tag:"div",classes:dt([[c.tieredMenu]])},markers:o1(a)}},pP=re([Ls("type","text"),Uo("data"),Pe("inputAttributes",{}),Pe("inputStyles",{}),Pe("tag","input"),Pe("inputClasses",[]),Ao("onSetValue"),os("fromInputValue",Xt),os("toInputValue",Xt),Pe("styles",{}),Pe("eventOrder",{}),Za("inputBehaviours",[Jt,$n]),Pe("selectOnFocus",!0)]),bP=t=>Et([$n.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=Ou(a);t.type!=="range"&&a.dom.setSelectionRange(0,c.length)}:de})]),e9=t=>({...bP(t),...Fr(t.inputBehaviours,[Jt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(Ou(s.element)),setValue:(s,a)=>{Ou(s.element)!==a&&og(s.element,t.toInputValue(a))}},onSetValue:t.onSetValue})])}),vP=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),yP=(t,s)=>({uid:t.uid,dom:vP(t),components:[],behaviours:e9(t),eventOrder:t.eventOrder}),Ef=ol({name:"Input",configFields:pP(),factory:yP}),NA=on("refetch-trigger-event"),wP=on("redirect-menu-item-interaction"),CP="tox-menu__searcher",h_=t=>ir(t.element,`.${CP}`).bind(s=>t.getSystem().getByDom(s).toOptional()),SP=h_,t9=(t,s)=>{Jt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},tC=t=>{const s=Jt.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},n9=(t,s)=>{ko(s.element,"id").each(a=>$t(t.element,"aria-activedescendant",a))},xP=t=>{const s=(d,h)=>(h.cut(),M.none()),a=(d,h)=>{const b={interactionEvent:h.event,eventType:h.event.raw.type};return bn(d,wP,b),M.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[oy]},components:[Ef.sketch({inputClasses:[CP,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Et([Yn(c,[ot(Jl(),d=>{bo(d,NA)}),ot(Hi(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),Sn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,Sn.name()]}})]}},g_="tox-collection--results__js",PA=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:on("aria-item-search-result-id"),"aria-selected":"false"}}}:t},p_=(t,s)=>a=>{const c=io(a,s);return $e(c,d=>({dom:t,components:d}))},o9=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Rb.parts.items({preprocess:t!=="auto"?p_({tag:"div",classes:["tox-swatches__row"]},t):Xt})]}]}),EP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Rb.parts.items({preprocess:p_({tag:"div",classes:["tox-collection__group"]},t)})]}),IA=(t,s)=>{const a=[];let c=[];return gt(t,(d,h)=>{s(d,h)?(c.length>0&&a.push(c),c=[],(go(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),$e(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},b_=(t,s,a)=>Rb.parts.items({preprocess:c=>{const d=$e(c,a);return t!=="auto"&&t>1?p_({tag:"div",classes:["tox-collection__group"]},t)(d):IA(d,(h,b)=>s[b].type==="separator")}}),BA=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[b_(t,s,Xt)]}),s9=(t,s,a=!0)=>{const c=on("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",g_].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[b_(t,s,PA)]}},r9=(t,s,a)=>{const c=on("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[xP({i18n:kd.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],g_],attributes:{id:c}},components:[b_(t,s,PA)]}]}},a9=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Rb.parts.items({preprocess:a=>IA(a,(c,d)=>t[d].type==="separator")})]}),v_=t=>Mn(t,s=>"icon"in s&&s.icon!==void 0),fh=t=>(console.error(Gl(t)),console.log(t),M.none()),_P=(t,s,a,c,d)=>{const h=a9(a);return{value:t,dom:h.dom,components:h.components,items:a}},LA=(t,s,a,c,d)=>{const h=()=>d.menuType!=="searchable"?BA(c,a):d.searchMode.searchMode==="search-with-field"?r9(c,a,d.searchMode):s9(c,a);if(d.menuType==="color"){const b=o9(c);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const b=BA(c,a);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const b=h();return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const b=EP(c);return{value:t,dom:b.dom,components:b.components,items:a}}else return{value:t,dom:gP(s,c,d.menuType),components:QH,items:a}},ma=ta("type"),FA=ta("name"),$A=ta("label"),_g=ta("text"),TP=ta("title"),kP=ta("icon"),nC=ta("value"),HA=_l("fetch"),AP=_l("getSubmenuItems"),sy=_l("onAction"),i9=_l("onItemAction"),s1=os("onSetup",()=>de),c9=hr("name"),r1=hr("text"),OP=hr("role"),$u=hr("icon"),ry=hr("tooltip"),zA=hr("label"),VA=hr("shortcut"),l9=cd("select"),oC=Aa("active",!1),UA=Aa("borderless",!1),_f=Aa("enabled",!0),y_=Aa("primary",!1),DP=t=>Pe("columns",t),WA=Pe("meta",{}),ZA=os("onAction",de),ay=t=>Ls("type",t),w_=t=>ia("name","name",po(()=>on(`${t}-name`)),Ut),RP=t=>ia("value","value",po(()=>on(`${t}-value`)),Sl()),MP=Fn([ma,r1]),u9=t=>ar("separatormenuitem",MP,t),d9=Fn([ay("autocompleteitem"),oC,_f,WA,nC,r1,$u]),au=t=>ar("Autocompleter.Separator",MP,t),Tf=t=>ar("Autocompleter.Item",d9,t),iy=[_f,ry,$u,r1,s1,Ls("context","mode:design")],jA=Fn([ma,sy,VA].concat(iy)),C_=t=>ar("toolbarbutton",jA,t),cy=[oC].concat(iy),NP=Fn(cy.concat([ma,sy,VA])),ly=t=>ar("ToggleButton",NP,t),Bb=[os("predicate",at),li("scope","node",["node","editor"]),li("position","selection",["node","selection","line"])],qA=iy.concat([ay("contextformbutton"),Ls("align","end"),y_,sy,jo("original",Xt)]),PP=cy.concat([ay("contextformbutton"),Ls("align","end"),y_,sy,jo("original",Xt)]),sC=iy.concat([ay("contextformbutton")]),f9=cy.concat([ay("contextformtogglebutton")]),m9=aa("type",{contextformbutton:qA,contextformtogglebutton:PP}),Ad=[zA,wc("commands",m9),_u("launch",aa("type",{contextformbutton:sC,contextformtogglebutton:f9})),os("onInput",de),os("onSetup",de)],iu=[...Bb,...Ad,ka("type",["contextform"]),os("initValue",re("")),hr("placeholder")],rC=[...Bb,...Ad,ka("type",["contextsliderform"]),os("initValue",re(0)),os("min",re(0)),os("max",re(100))],Od=[...Bb,...Ad,ka("type",["contextsizeinputform"]),os("initValue",re({width:"",height:""}))],h9=aa("type",{contextform:iu,contextsliderform:rC,contextsizeinputform:Od}),Gs=t=>ar("ContextForm",h9,t),g9=Fn([ay("contexttoolbar"),qo("items",Qd([Ut,Xg([hr("name"),hr("label"),wc("items",Ut)])]))].concat(Bb)),Lb=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),aC=t=>({...t,items:j(t.items)?t.items:$e(t.items,Lb)}),IP=t=>ar("ContextToolbar",g9,t),GA=[ma,ta("src"),hr("alt"),R("classes",[],Ut)],KA=Fn(GA),p9=[ma,_g,c9,R("classes",["tox-collection__item-label"],Ut)],YA=Fn(p9),BP=Zr(()=>tf("type",{cardimage:KA,cardtext:YA,cardcontainer:LP})),LP=Fn([ma,Ls("direction","horizontal"),Ls("align","left"),Ls("valign","middle"),wc("items",BP)]),Fb=[_f,r1,OP,VA,RP("menuitem"),WA,Ls("context","mode:design")],XA=Fn([ma,zA,wc("items",BP),s1,ZA].concat(Fb)),FP=t=>ar("cardmenuitem",XA,t),S_=Fn([ma,oC,$u].concat(Fb)),b9=t=>ar("choicemenuitem",S_,t),$P=[ma,ta("fancytype"),ZA],v9=[Pe("initData",{})].concat($P),y9=[cd("select"),Z("initData",{},[Aa("allowCustomColors",!0),Ls("storageKey","default"),$h("colors",Sl())])].concat($P),w9=aa("fancytype",{inserttable:v9,colorswatch:y9}),HP=t=>ar("fancymenuitem",w9,t),C9=Fn([ma,s1,ZA,$u].concat(Fb)),S9=t=>ar("menuitem",C9,t),zP=Fn([ma,AP,s1,$u].concat(Fb)),x9=t=>ar("nestedmenuitem",zP,t),VP=Fn([ma,$u,oC,s1,sy].concat(Fb)),iC=t=>ar("togglemenuitem",VP,t),JA=(t,s,a)=>{const c=Tc(t.element,"."+a);if(c.length>0){const d=_t(c,h=>{const b=h.dom.getBoundingClientRect().top,S=c[0].dom.getBoundingClientRect().top;return Math.abs(b-S)>s}).getOr(c.length);return M.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return M.none()},UP=(t,s)=>Et([Yn(t,s)]),$b={namedEvents:UP,unnamedEvents:t=>UP(on("unnamed-events"),t)},WP=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Dd={item:t=>vn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>vn.config({disabled:t}),splitButton:t=>vn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>vn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},x_=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},kf=(t,s)=>er(a=>{Ne(t.onBeforeSetup)&&t.onBeforeSetup(a),x_(t,a)(d=>{const h=t.onSetup(d);Ne(h)&&s.set(h)})}),Ni=(t,s)=>sf(a=>x_(t,a)(s.get())),ZP="silver.uistate",Hb="setDisabled",jP="setEnabled",QA="init",qP=["switchmode",QA],uy=(t,s)=>{const a=t.mainUi.outerContainer,c=[t.mainUi.mothership,...t.uiMotherships];s===Hb&&gt(c,d=>{d.broadcastOn([dm()],{target:a.element})}),gt(c,d=>{d.broadcastOn([ZP],s)})},eO=(t,s)=>{t.on("init SwitchMode",a=>{uy(s,a.type)}),t.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const c=a.state?Hb:QA;uy(s,c),a.state||t.nodeChanged()}}),t.on("NodeChange",a=>{const c=t.ui.isEnabled()?a.type:Hb;uy(s,c)}),Y3(t)&&t.mode.set("readonly")},ha=t=>el.config({channels:{[ZP]:{onReceive:(s,a)=>{if(a===Hb||a===jP){vn.set(s,a===Hb);return}const{contextType:c,shouldDisable:d}=t();c==="mode"&&!yt(qP,a)||vn.set(s,d)}}}}),_9=(t,s)=>rf((a,c)=>{x_(t,a)(t.onAction),!t.triggersSubmenu&&s===xf.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&bo(a,Ha()),c.stop())}),T9={[ki()]:["disabling","alloy.base.behaviour","toggling","item-events"]},dy=Ja,fy=(t,s,a,c)=>{const d=mn(de);return{type:"item",dom:s.dom,components:dy(s.optComponents),data:t.data,eventOrder:T9,hasSubmenu:t.triggersSubmenu,itemBehaviours:Et([Yn("item-events",[_9(t,a),kf(t,d),Ni(t,d)]),Dd.item(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),ha(()=>c.checkUiComponentContext(t.context)),Wn.config({})].concat(t.itemBehaviours))}},my=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),tO=t=>{const s=Xp.os.isMacOS()||Xp.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),b=$e(h,S=>{const T=S.toLowerCase().trim();return go(d,T)?d[T]:S});return s?b.join(""):b.join("+")},E_=(t,s,a=[u_])=>Fu(t,{tag:"div",classes:a},s),nO=t=>({dom:{tag:"div",classes:[DA]},components:[nr(kd.translate(t))]}),oO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),k9=(t,s)=>({dom:{tag:"div",classes:[DA]},components:[{dom:{tag:t.tag,styles:t.styles},components:[nr(kd.translate(s))]}]}),A9=t=>({dom:{tag:"div",classes:[iP]},components:[nr(tO(t))]}),GP=t=>E_("checkmark",t,[Pb]),hy=t=>E_("chevron-right",t,[RA]),O9=t=>E_("chevron-down",t,[RA]),KP=(t,s)=>{const a=t.direction==="vertical"?f_:cP,c=t.align==="left"?uP:lP;return{dom:{tag:"div",classes:[d_,a,c,(()=>{switch(t.valign){case"top":return dP;case"middle":return MA;case"bottom":return fP}})()]},components:s}},YP=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),XP=(t,s,a)=>{const c="custom",d="remove",h=t.value,b=t.iconContent.map(D=>Jw(D,s.icons,a)),S=t.ariaLabel.map(D=>({"aria-label":s.translate(D),"data-mce-name":D})).getOr({});return{dom:(()=>{const D=l_,P=b.getOr(""),F={tag:"div",attributes:S,classes:[D]};return h===c?{...F,tag:"button",classes:[...F.classes,"tox-swatches__picker-btn"],innerHtml:P}:h===d?{...F,classes:[...F.classes,"tox-swatch--remove"],innerHtml:P}:Ct(h)?{...F,attributes:{...F.attributes,"data-mce-color":h},styles:{"background-color":h},innerHtml:P}:F})(),optComponents:[]}},sO=t=>{const s=t.map(a=>({attributes:{id:on("menu-item"),"aria-label":kd.translate(a)}})).getOr({});return{tag:"div",classes:[Qw,oy],...s}},rO=(t,s,a,c)=>{const d={tag:"div",classes:[u_]},h=G=>Fu(G,d,s.icons,c),b=()=>M.some({dom:d}),S=a?t.iconContent.map(h).orThunk(b):M.none(),T=t.checkMark,D=M.from(t.meta).fold(()=>nO,G=>go(G,"style")?en(k9,G.style):nO),P=t.htmlContent.fold(()=>t.textContent.map(D),G=>M.some(oO(G,[DA])));return{dom:sO(t.ariaLabel),optComponents:[S,P,t.shortcutContent.map(A9),T,t.caret]}},zb=(t,s,a,c=M.none())=>t.presets==="color"?XP(t,s,c):rO(t,s,a,c),__=(t,s,a)=>Tt(t,"tooltipWorker").map(c=>[kr.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Sp}}),mode:"follow-highlight",onShow:(d,h)=>{c(b=>{kr.setComponents(d,[E2({element:Ke.fromDom(b)})])})}})]).getOrThunk(()=>a.map(c=>[kr.config({...s.providers.tooltips.getConfig({tooltipText:c}),mode:"follow-highlight"})]).getOr([])),JP=t=>Bw.DOM.encode(t),QP=(t,s)=>{const a=kd.translate(t),c=JP(a);if(s.length>0){const d=new RegExp(WP(s),"gi");return c.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return c},eI=(t,s,a,c,d,h,b,S=!0)=>{const T=zb({presets:c,textContent:M.none(),htmlContent:a?t.text.map(P=>QP(P,s)):M.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:M.none(),checkMark:M.none(),caret:M.none(),value:t.value},b.providers,S,t.icon),D=t.text.filter(P=>!a&&P!=="");return fy({context:"mode:design",data:my(t),enabled:t.enabled,getApi:re({}),onAction:P=>d(t.value,t.meta),onSetup:re(de),triggersSubmenu:!1,itemBehaviours:__(t,b,D)},T,h,b.providers)},tI=(t,s)=>$e(t,a=>{switch(a.type){case"cardcontainer":return KP(a,tI(a.items,s));case"cardimage":return YP(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>yt(s.cardText.highlightOn,h))?M.from(s.cardText.matchText).getOr(""):"";return oO(QP(a.text,d),a.classes)}}),D9=(t,s,a,c)=>{const d=b=>({isEnabled:()=>!vn.isDisabled(b),setEnabled:S=>{vn.set(b,!S),gt(Tc(b.element,"*"),T=>{b.getSystem().getByDom(T).each(D=>{D.hasConfigured(vn)&&vn.set(D,!S)})})}}),h={dom:sO(t.label),optComponents:[M.some({dom:{tag:"div",classes:[d_,cP]},components:tI(t.items,c)})]};return fy({context:"mode:design",data:my({text:M.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:M.from(c.itemBehaviours).getOr([])},h,s,a.providers)},R9=(t,s,a,c,d,h,b,S=!0)=>{const T=F=>({setActive:G=>{mo.set(F,G)},isActive:()=>mo.isOn(F),isEnabled:()=>!vn.isDisabled(F),setEnabled:G=>vn.set(F,!G)}),D=zb({presets:a,textContent:s?t.text:M.none(),htmlContent:M.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:M.none(),checkMark:s?M.some(GP(b.icons)):M.none(),caret:M.none(),value:t.value},b,S),P=t.text.filter(re(!s)).map(F=>kr.config(b.tooltips.getConfig({tooltipText:b.translate(F)})));return Bs(fy({context:t.context,data:my(t),enabled:t.enabled,getApi:T,onAction:F=>c(t.value),onSetup:F=>(F.setActive(d),de),triggersSubmenu:!1,itemBehaviours:[...P.toArray()]},D,h,b),{toggling:{toggleClass:OA,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},aO=ww(j3(),q3()),iO=t=>({value:sI(t)}),cO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nI=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,oI=t=>cO.test(t)||nI.test(t),sI=t=>ul(t,"#").toUpperCase(),M9=t=>oI(t)?M.some({value:sI(t)}):M.none(),N9=t=>({value:t.value.replace(cO,(a,c,d,h)=>c+c+d+d+h+h)}),P9=t=>{const s=N9(t),a=nI.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},lO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},cC=t=>{const s=lO(t.red)+lO(t.green)+lO(t.blue);return iO(s)},rI=Math.min,aI=Math.max,T_=Math.round,iI=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,I9=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Vb=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),uO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},cI=t=>{let s,a,c;const d=(t.hue||0)%360;let h=t.saturation/100,b=t.value/100;if(h=aI(0,rI(h,1)),b=aI(0,rI(b,1)),h===0)return s=a=c=T_(255*b),Vb(s,a,c,1);const S=d/60,T=b*h,D=T*(1-Math.abs(S%2-1)),P=b-T;switch(Math.floor(S)){case 0:s=T,a=D,c=0;break;case 1:s=D,a=T,c=0;break;case 2:s=0,a=T,c=D;break;case 3:s=0,a=D,c=T;break;case 4:s=D,a=0,c=T;break;case 5:s=T,a=0,c=D;break;default:s=a=c=0}return s=T_(255*(s+P)),a=T_(255*(a+P)),c=T_(255*(c+P)),Vb(s,a,c,1)},lC=t=>{const s=P9(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return Vb(a,c,d,1)},uC=(t,s,a,c)=>{const d=parseInt(t,10),h=parseInt(s,10),b=parseInt(a,10),S=parseFloat(c);return Vb(d,h,b,S)},k_=t=>{const s=iI.exec(t);if(s!==null)return M.some(uC(s[1],s[2],s[3],"1"));const a=I9.exec(t);return a!==null?M.some(uC(a[1],a[2],a[3],a[4])):M.none()},lI=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,uI=Vb(255,0,0,1),B9=t=>{t.dispatch("SkinLoaded")},L9=(t,s)=>{t.dispatch("SkinLoadError",s)},F9=t=>{t.dispatch("ResizeEditor")},dO=(t,s)=>{t.dispatch("ResizeContent",s)},fO=(t,s)=>{t.dispatch("ScrollContent",s)},mO=(t,s)=>{t.dispatch("TextColorChange",s)},dI=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},$9=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),fI=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},H9=(t,s)=>{t.dispatch("StylesTextUpdate",s)},z9=(t,s)=>{t.dispatch("AlignTextUpdate",s)},V9=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},U9=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},W9=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},Z9=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},j9=t=>{t.dispatch("ToggleSidebar")},q9=t=>{t.dispatch("ToggleView")},mI=t=>{t.dispatch("ContextToolbarClose")},G9=t=>{t.dispatch("ContextFormSlideBack")},Ub=(t,s)=>()=>{t(),s()},ac=t=>Wb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),hO=(t,s)=>a=>{const c=Yi(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);c.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},dC=(t,s)=>a=>{const c=ac(t)(a),d=hO(t,s)(a);return()=>{c(),d()}},Wb=(t,s,a)=>c=>{const d=()=>a(c),h=()=>{a(c),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},hI=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},rl=(t,s)=>()=>t.execCommand(s);var Tg=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const fC={},gI=(t,s=10)=>{const a=Tg.getItem(t),c=j(a)?JSON.parse(a):[],h=(D=>s-D.length<0?D.slice(0,s):D)(c),b=D=>{Ae(h,D).each(S),h.unshift(D),h.length>s&&h.pop(),Tg.setItem(t,JSON.stringify(h))},S=D=>{h.splice(D,1)};return{add:b,state:()=>h.slice(0)}},pI=t=>Tt(fC,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Tg.getItem(s);if(Pt(a)){const d=Tg.getItem("tinymce-custom-colors");Tg.setItem(s,Ct(d)?d:"[]")}const c=gI(s,10);return fC[t]=c,c}),K9=t=>$e(pI(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),bI=(t,s)=>{pI(t).add(s)},mC=(t,s,a)=>({hue:t,saturation:s,value:a}),gO=t=>{let s=0,a=0,c=0;const d=t.red/255,h=t.green/255,b=t.blue/255,S=Math.min(d,Math.min(h,b)),T=Math.max(d,Math.max(h,b));if(S===T)return c=S,mC(0,0,c*100);const D=d===S?h-b:b===S?d-h:b-d;return s=d===S?3:b===S?1:5,s=60*(s-D/(T-S)),a=(T-S)/T,c=T,mC(Math.round(s),Math.round(a*100),Math.round(c*100))},Y9=t=>gO(lC(t)),vI=t=>cC(cI(t)),X9=t=>M9(t).orThunk(()=>k_(t).map(cC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],h=c[1],b=c[2],S=c[3];return cC(Vb(d,h,b,S))}),pO="forecolor",bO="hilitecolor",J9=5,Q9=t=>yI(t.map((s,a)=>a%2===0?"#"+X9(s).value:s)),yI=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:t[a],icon:"checkmark",type:"choiceitem"});return s},Af=t=>s=>s.options.get(t),vO="#000000",ez=t=>{const s=t.options.register,a=h=>xt(h,j)?{value:Q9(h),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=h=>xt(h,j)?{value:yI(h),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=h=>ln(h)&&h>0?{value:h,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:c}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:yO(t)}),s("color_cols_foreground",{processor:d,default:wI(t,pO)}),s("color_cols_background",{processor:d,default:wI(t,bO)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:vO}),s("color_default_background",{processor:"string",default:vO})},Rd=(t,s)=>s===pO&&t.options.isSet("color_map_foreground")?Af("color_map_foreground")(t):s===bO&&t.options.isSet("color_map_background")?Af("color_map_background")(t):t.options.isSet("color_map_raw")?Af("color_map_raw")(t):Af("color_map")(t),yO=(t,s="default")=>Math.max(J9,Math.ceil(Math.sqrt(Rd(t,s).length))),wI=(t,s)=>{const a=Af("color_cols")(t),c=yO(t,s);return a===yO(t)?c:a},A_=(t,s="default")=>Math.round(s===pO?Af("color_cols_foreground")(t):s===bO?Af("color_cols_background")(t):Af("color_cols")(t)),qa=Af("custom_colors"),tz=Af("color_default_foreground"),nz=Af("color_default_background"),oz="rgba(0, 0, 0, 0)",sz=t=>k_(t).exists(s=>s.alpha!==0),rz=t=>of(t,s=>{if(lr(s)){const a=ut(s,"background-color");return En(sz(a),a)}else return M.none()}).getOr(oz),CI=(t,s)=>{const a=Ke.fromDom(t.selection.getStart()),c=s==="hilitecolor"?rz(a):ut(a,"color");return k_(c).map(d=>"#"+cC(d).value)},az=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},iz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},cz=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{az(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{iz(t,s)})},SI=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},wO=(t,s,a,c)=>{a==="custom"?AI(t)(h=>{h.each(b=>{bI(s,b),t.execCommand("mceApplyTextcolor",s,b),c(b)})},CI(t,s).getOr(vO)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},CO=(t,s,a)=>t.concat(K9(s).concat(SI(a))),xI=(t,s,a)=>c=>{c(CO(t,s,a))},SO=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},EI=(t,s)=>{t.setTooltip(s)},_I=(t,s)=>a=>{const c=CI(t,s);return Ur(c,a.toUpperCase())},xO=(t,s,a)=>{if(fe(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=CO(Rd(t,s),s,!1),h=et(d,b=>b.value===a).getOr({text:""}).text;return t.translate([c,t.translate(h)])},TI=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:xO(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:_I(t,a),columns:A_(t,a),fetch:xI(Rd(t,a),a,qa(t)),onAction:d=>{wO(t,a,c.get(),de)},onItemAction:(d,h)=>{wO(t,a,h,b=>{c.set(b),mO(t,{name:s,color:b})})},onSetup:d=>{SO(d,s,c.get());const h=b=>{b.name===s&&(SO(d,b.name,b.color),EI(d,xO(t,a,b.color)))};return t.on("TextColorChange",h),Ub(ac(t)(d),()=>{t.off("TextColorChange",h)})}})},kI=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(EI(h,xO(t,a,d.get())),SO(h,s,d.get()),ac(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:_I(t,a),initData:{storageKey:a},onAction:h=>{wO(t,a,h.value,b=>{d.set(b),mO(t,{name:s,color:b})})}}]})},AI=t=>(s,a)=>{let c=!1;const d=S=>{const D=S.getData().colorpicker;c?(s(M.from(D)),S.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",D]))},h=(S,T)=>{T.name==="hex-valid"&&(c=T.value)},b={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:h,onSubmit:d,onClose:de,onCancel:()=>{s(M.none())}})},lz=t=>{cz(t);const s=tz(t),a=nz(t),c=mn(s),d=mn(a);TI(t,"forecolor","forecolor",c),TI(t,"backcolor","hilitecolor",d),kI(t,"forecolor","forecolor","Text color",c),kI(t,"backcolor","hilitecolor","Background color",d)},EO=(t,s,a,c,d,h,b,S)=>{const T=v_(s),P=uz(s,a,c,d!=="color"?"normal":"color",h,b,S);return LA(t,T,P,c,{menuType:d})},uz=(t,s,a,c,d,h,b)=>Ja($e(t,S=>S.type==="choiceitem"?b9(S).fold(fh,T=>M.some(R9(T,a===1,c,s,h(T.value),d,b,v_(t)))):M.none())),O_=(t,s)=>{const a=o1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?ir(d.element,"[aria-checked=true]"):M.none()}},dz=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${l_}`:`.${oy}`}},OI=(t,s)=>{const a=fz(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",b={...EO(on("menu-value"),a,S=>{t.onAction({value:S})},c,d,xf.CLOSE_ON_EXECUTE,t.select.getOr(at),s.shared.providers),markers:o1(d),movement:O_(c,d),showMenuRole:!1};return{type:"widget",data:{value:on("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[aO.widget(Rb.sketch(b))]}},fz=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>CO(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(SI(a)))},_O=on("cell-over"),DI=on("cell-execute"),mz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),hz=(t,s,a)=>{const c=b=>bn(b,_O,{row:t,col:s}),d=b=>bn(b,DI,{row:t,col:s}),h=(b,S)=>{S.stop(),d(b)};return Oi({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Et([Yn("insert-table-picker-cell",[ot(dd(),$n.focus),ot(ki(),d),ot(Uh(),h),ot(M1(),h)]),mo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),$n.config({onFocus:c})])})},RI=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const h=[];for(let b=0;b<a;b++){const S=t(d+1,b+1);h.push(hz(d,b,S))}c.push(h)}return c},gz=(t,s,a,c,d)=>{for(let h=0;h<c;h++)for(let b=0;b<d;b++)mo.set(t[h][b],h<=s&&b<=a)},pz=t=>xe(t,s=>$e(s,Tl)),MI=(t,s)=>nr(`${s}x${t}`),NI={inserttable:(t,s)=>{const d=mz(s),h=RI(d,10,10),b=MI(0,0),S=Jo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[b],behaviours:Et([Wn.config({})])});return{type:"widget",data:{value:on("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[aO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:pz(h).concat(S.asSpec()),behaviours:Et([Yn("insert-table-picker",[er(T=>{Wn.set(S.get(T),[b])}),k0(_O,(T,D,P)=>{const{row:F,col:G}=P.event;gz(h,F,G,10,10),Wn.set(S.get(T),[MI(F+1,G+1)])}),k0(DI,(T,D,P)=>{const{row:F,col:G}=P.event;bo(T,Ha()),t.onAction({numRows:F+1,numColumns:G+1})})]),Sn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:OI},bz=(t,s)=>Tt(NI,t.fancytype).map(a=>a(t,s)),PI=(t,s,a,c=!0,d=!1)=>{const h=d?O9(a.icons):hy(a.icons),b=T=>({isEnabled:()=>!vn.isDisabled(T),setEnabled:D=>vn.set(T,!D),setIconFill:(D,P)=>{ir(T.element,`svg path[class="${D}"], rect[class="${D}"]`).each(F=>{$t(F,"fill",P)})},setTooltip:D=>{const P=a.translate(D);$t(T.element,"aria-label",P)}}),S=zb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,caret:M.some(h),checkMark:M.none(),shortcutContent:t.shortcut},a,c);return fy({context:t.context,data:my(t),getApi:b,enabled:t.enabled,onAction:de,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},S,s,a)},vz=(t,s,a,c=!0)=>{const d=b=>({isEnabled:()=>!vn.isDisabled(b),setEnabled:S=>vn.set(b,!S)}),h=zb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,caret:M.none(),checkMark:M.none(),shortcutContent:t.shortcut},a,c);return fy({context:t.context,data:my(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},II=t=>({type:"separator",dom:{tag:"div",classes:[oy,JH]},components:t.text.map(nr).toArray()}),yz=(t,s,a,c=!0)=>{const d=b=>({setActive:S=>{mo.set(b,S)},isActive:()=>mo.isOn(b),isEnabled:()=>!vn.isDisabled(b),setEnabled:S=>vn.set(b,!S)}),h=zb({iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,checkMark:M.some(GP(a.icons)),caret:M.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Bs(fy({context:t.context,data:my(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:OA,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},wz=eI,BI=II,Cz=vz,Sz=PI,xz=yz,Ez=bz,_z=D9;var Tz=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),kz=[qo("others",ql(Gn.value,Sl()))],LI=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,b)=>{if(xs(h.others).length===0)throw new Error("Cannot find any known coupled components");return Tt(t,b)},a=(h,b,S)=>s(b,S).getOrThunk(()=>{const D=Tt(b.others,S).getOrDie("No information found for coupled component: "+S)(h),P=h.getSystem().build(D);return t[S]=P,P}),c=(h,b,S)=>s(b,S).orThunk(()=>(Tt(b.others,S).getOrDie("No information found for coupled component: "+S),M.none())),d=re({});return ui({readState:d,getExisting:c,getOrCreate:a})}});const qr=ya({fields:kz,name:"coupling",apis:Tz,state:LI}),TO=t=>{let s=M.none(),a=[];const c=D=>TO(P=>{d(F=>{P(D(F))})}),d=D=>{b()?T(D):a.push(D)},h=D=>{b()||(s=M.some(D),S(a),a=[])},b=()=>s.isSome(),S=D=>{gt(D,T)},T=D=>{s.each(P=>{setTimeout(()=>{D(P)},0)})};return t(h),{get:d,map:c,isReady:b}},Az={nu:TO,pure:t=>TO(s=>{s(t)})},Oz=t=>{setTimeout(()=>{throw t},0)},a1=t=>{const s=T=>{t().then(T,Oz)};return{map:T=>a1(()=>t().then(T)),bind:T=>a1(()=>t().then(D=>T(D).toPromise())),anonBind:T=>a1(()=>t().then(()=>T.toPromise())),toLazy:()=>Az.nu(s),toCached:()=>{let T=null;return a1(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},ic={nu:t=>a1(()=>new Promise(t)),pure:t=>a1(()=>Promise.resolve(t))},kO=re("sink"),AO=re(zc({name:kO(),overrides:re({dom:{tag:"div"},behaviours:Et([Wa.config({useFixed:it})]),events:ms([jh(Hi()),jh(Bc()),jh(Uh())])})})),FI=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),h=>({type:c,hotspot:a,overrides:d,layouts:h}))},Dz=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},$I=(t,s,a,c,d,h,b)=>{const S=Dz(t,s,c),T=HI(c,t);return S.map(D=>D.bind(P=>{const F=P.menus[P.primary];return M.from(F).each(G=>{t.listRole.each(J=>{G.role=J})}),M.from(Yp.sketch({...h.menu(),uid:ku(""),data:P,highlightOnOpen:b,onOpenMenu:(G,J)=>{const se=T().getOrDie();Wa.position(se,J,{anchor:a}),Po.decloak(d)},onOpenSubmenu:(G,J,se)=>{const ce=T().getOrDie();Wa.position(ce,se,{anchor:{type:"submenu",item:J}}),Po.decloak(d)},onRepositionMenu:(G,J,se)=>{const ce=T().getOrDie();Wa.position(ce,J,{anchor:a}),gt(se,De=>{Wa.position(ce,De.triggeredMenu,{anchor:{type:"submenu",item:De.triggeringItem}})})},onEscape:()=>($n.focus(c),Po.close(d),M.some(!0))}))}))},D_=(t,s,a,c,d,h,b)=>{const S=FI(t,a);return $I(t,s,S,a,c,d,b).map(D=>(D.fold(()=>{Po.isOpen(c)&&Po.close(c)},P=>{Po.cloak(c),Po.open(c,P),h(c)}),c))},Rz=(t,s,a,c,d,h,b)=>(Po.close(c),ic.pure(c)),OO=(t,s,a,c,d,h)=>{const b=qr.getCoupled(a,"sandbox");return(Po.isOpen(b)?Rz:D_)(t,s,a,b,c,d,h)},Mz=(t,s,a)=>{const c=Mo.getCurrent(s).getOr(s),d=no(t.element);a?It(c.element,"min-width",d+"px"):Nm(c.element,d)},HI=(t,s)=>t.getSystem().getByUid(s.uid+"-"+kO()).map(a=>()=>Gn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Gn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),zI=t=>{Po.getState(t).each(s=>{Yp.repositionMenus(s)})},gy=(t,s,a)=>{const c=ax(),d=(S,T)=>{const D=FI(t,s);c.link(s.element),t.matchWidth&&Mz(D.hotspot,T,t.useMinWidth),t.onOpen(D,S,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(S,T)},h=(S,T)=>{c.unlink(s.element),b().getOr(T).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(S,T)},b=HI(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id}},behaviours:Al.augment(t.sandboxBehaviours,[Jt.config({store:{mode:"memory",initialValue:s}}),Po.config({onOpen:d,onClose:h,isPartOf:(S,T,D)=>sh(T,D)||sh(s,D),getAttachPoint:()=>b().getOrDie()}),Mo.config({find:S=>Po.getState(S).bind(T=>Mo.getCurrent(T))}),el.config({channels:{...Hc({isExtraPart:at}),...gg({doReposition:zI})}})])}},VI=t=>{const s=qr.getCoupled(t,"sandbox");zI(s)},py=()=>[Pe("sandboxClasses",[]),Al.field("sandboxBehaviours",[Mo,el,Po,Jt])],Nz=re([st("dom"),st("fetch"),Ao("onOpen"),ec("onExecute"),Pe("getHotspot",M.some),Pe("getAnchorOverrides",re({})),ch(),Za("dropdownBehaviours",[mo,qr,Sn,$n]),st("toggleClass"),Pe("eventOrder",{}),Uo("lazySink"),Pe("matchWidth",!1),Pe("useMinWidth",!1),Uo("role"),Uo("listRole")].concat(py())),Pz=re([ou({schema:[pp(),Pe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),AO()]),Iz=(t,s,a,c)=>{const d=P=>Tt(t.dom,"attributes").bind(F=>Tt(F,P)),h=P=>{Po.getState(P).each(F=>{Yp.highlightPrimary(F)})},b=(P,F,G)=>OO(t,Xt,P,c,F,G),S=P=>{b(P,h,ja.HighlightMenuAndItem).get(de)},T={expand:P=>{mo.isOn(P)||b(P,de,ja.HighlightNone).get(de)},open:P=>{mo.isOn(P)||b(P,de,ja.HighlightMenuAndItem).get(de)},refetch:P=>qr.getExistingCoupled(P,"sandbox").fold(()=>b(P,de,ja.HighlightMenuAndItem).map(de),G=>D_(t,Xt,P,G,c,de,ja.HighlightMenuAndItem).map(de)),isOpen:mo.isOn,close:P=>{mo.isOn(P)&&b(P,de,ja.HighlightMenuAndItem).get(de)},repositionMenus:P=>{mo.isOn(P)&&VI(P)}},D=(P,F)=>(Km(P),M.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.dropdownBehaviours,[mo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),qr.config({others:{sandbox:P=>gy(t,P,{onOpen:()=>mo.on(P),onClose:()=>mo.off(P)})}}),Sn.config({mode:"special",onSpace:D,onEnter:D,onDown:(P,F)=>{if(Hu.isOpen(P)){const G=qr.getCoupled(P,"sandbox");h(G)}else Hu.open(P);return M.some(!0)},onEscape:(P,F)=>Hu.isOpen(P)?(Hu.close(P),M.some(!0)):M.none()}),$n.config({})]),events:Xv(M.some(S)),eventOrder:{...t.eventOrder,[ki()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),P=>({role:P})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Hu=rc({name:"Dropdown",configFields:Nz(),partFields:Pz(),factory:Iz,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),IY=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},R_=t=>{const s=Jt.getValue(t),a=h_(t).map(tC);Hu.refetch(s).get(()=>{const c=qr.getCoupled(s,"sandbox");a.each(d=>h_(c).each(h=>t9(h,d)))})},by=(t,s)=>{UI(t).each(a=>{_S(t,a.element,s.event.eventType,s.event.interactionEvent)})},UI=t=>Po.getState(t).bind(ft.getHighlighted).bind(ft.getHighlighted),WI=t=>Sc(t.element,g_)?M.some(t.element):ir(t.element,"."+g_),ZI=(t,s,a)=>{SP(t).each(c=>{n9(c,a),WI(s).each(h=>{ko(h,"id").each(b=>$t(c.element,"aria-controls",b))})}),$t(a.element,"aria-selected","true")},Bz=(t,s,a)=>{$t(a.element,"aria-selected","false")},Lz=t=>{SP(t).each(s=>$n.focus(s))},Fz=t=>qr.getExistingCoupled(t,"sandbox").bind(h_).map(tC).map(a=>a.fetchPattern).getOr("");var M_;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(M_||(M_={}));const $z=(t,s,a,c,d)=>{const h=a.shared.providers,b=S=>d?{...S,shortcut:M.none(),icon:S.text.isSome()?M.none():S.icon}:S;switch(t.type){case"menuitem":return S9(t).fold(fh,S=>M.some(Cz(b(S),s,h,c)));case"nestedmenuitem":return x9(t).fold(fh,S=>M.some(Sz(b(S),s,h,c,d)));case"togglemenuitem":return iC(t).fold(fh,S=>M.some(xz(b(S),s,h,c)));case"separator":return u9(t).fold(fh,S=>M.some(BI(S)));case"fancymenuitem":return HP(t).fold(fh,S=>Ez(S,a));default:return console.error("Unknown item in general menu",t),M.none()}},Hz=(t,s,a,c,d,h,b)=>{const S=c===1,T=!S||v_(t);return Ja($e(t,D=>{switch(D.type){case"separator":return au(D).fold(fh,P=>M.some(BI(P)));case"cardmenuitem":return FP(D).fold(fh,P=>M.some(_z({...P,onAction:F=>{P.onAction(F),a(P.value,P.meta)}},d,h,{itemBehaviours:__(P.meta,h,M.none()),cardText:{matchText:s,highlightOn:b}})));case"autocompleteitem":default:return Tf(D).fold(fh,P=>M.some(wz(P,s,S,"normal",a,d,h,T)))}}))},jI=(t,s,a,c,d,h)=>{const b=v_(s),S=Ja($e(s,P=>{const F=J=>d?!go(J,"text"):b,G=J=>$z(J,a,c,F(J),d);return P.type==="nestedmenuitem"&&P.getSubmenuItems().length<=0?G({...P,enabled:!1}):G(P)})),T=IY(h);return(d?_P:LA)(t,b,S,1,T)},DO=t=>Yp.singleData(t.value,t),zz=(t,s,a,c)=>{const d=O_(s,c),h=o1(c);return{data:DO({...t,movement:d,menuBehaviours:$b.unnamedEvents(s!=="auto"?[]:[er((b,S)=>{JA(b,4,h.item).each(({numColumns:T,numRows:D})=>{Sn.setGridSize(b,D,T)})})])}),menu:{markers:o1(c),fakeFocus:a===M_.ContentFocus}}},Vz=t=>cg.create(Ke.fromDom(t.startContainer),t.startOffset,Ke.fromDom(t.endContainer),t.endOffset),vy={register:(t,s)=>{const a=on("autocompleter"),c=mn(!1),d=mn(!1),h=Xo(),b=Oi(pr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Et([Yn("dismissAutocompleter",[ot(hd(),()=>F()),ot(a2(),(ue,Te)=>{ko(Te.event.target,"id").each(Oe=>$t(Ke.fromDom(t.getBody()),"aria-activedescendant",Oe))})])]),lazySink:s.getSink})),S=()=>pr.isOpen(b),T=d.get,D=()=>{if(S()){pr.hide(b),t.dom.remove(a,!1);const ue=Ke.fromDom(t.getBody());ko(ue,"aria-owns").filter(Te=>Te===a).each(()=>{ee(ue,"aria-owns"),ee(ue,"aria-activedescendant")})}},P=()=>pr.getContent(b).bind(ue=>Vo(ue.components(),0)),F=()=>t.execCommand("mceAutocompleterClose"),G=ue=>{const Te=Ss(ue,Oe=>M.from(Oe.columns)).getOr(1);return xe(ue,Oe=>{const ze=Oe.items;return Hz(ze,Oe.matchText,(We,Mt)=>{const tn={hide:()=>F(),reload:nt=>{D(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:nt})}};t.execCommand("mceAutocompleterRefreshActiveRange"),h.get().each(nt=>{c.set(!0),Oe.onAction(tn,nt,We,Mt),c.set(!1)})},Te,xf.BUBBLE_TO_SANDBOX,s,Oe.highlightOn)})},J=(ue,Te)=>{const Oe=Ss(ue,ze=>M.from(ze.columns)).getOr(1);pr.showMenuAt(b,{anchor:{type:"selection",getSelection:()=>h.get().map(Vz),root:Ke.fromDom(t.getBody())}},zz(LA("autocompleter-value",!0,Te,Oe,{menuType:"normal"}),Oe,M_.ContentFocus,"normal")),P().each(ft.highlightFirst)},se=ue=>{const Te=G(ue);Te.length>0?(J(ue,Te),$t(Ke.fromDom(t.getBody()),"aria-owns",a),t.inline||ce()):D()},ce=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const ue=t.getDoc().documentElement,Te=t.selection.getNode(),Oe=j1(b.element);$o(Oe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Te.offsetTop}px`,left:`${Te.offsetLeft}px`}),t.dom.add(ue,Oe.dom),ir(Oe,'[role="menu"]').each(ze=>{uo(ze,"position"),uo(ze,"max-height")})};t.on("AutocompleterStart",({lookupData:ue})=>{d.set(!0),c.set(!1),se(ue)}),t.on("AutocompleterUpdate",({lookupData:ue})=>se(ue)),t.on("AutocompleterUpdateActiveRange",({range:ue})=>h.set(ue)),t.on("AutocompleterEnd",()=>{D(),d.set(!1),c.set(!1),h.clear()});const De={cancelIfNecessary:F,isMenuOpen:S,isActive:T,isProcessingAction:c.get,getMenu:P};XH.setup(De,t)}},Sm=(t,s,a)=>Sd(t,s,a).isSome(),qI=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},RO=5,GI=400,hC=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?M.none():M.some(s.touches[0])},Wz=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>RO||c>RO},gC=t=>{const s=Xo(),a=mn(!1),c=qI(D=>{t.triggerEvent(Zh(),D),a.set(!0)},GI),d=D=>(hC(D).each(P=>{c.cancel();const F={x:P.clientX,y:P.clientY,target:D.target};c.schedule(D),a.set(!1),s.set(F)}),M.none()),h=D=>(c.cancel(),hC(D).each(P=>{s.on(F=>{Wz(P,F)&&s.clear()})}),M.none()),b=D=>{c.cancel();const P=F=>So(F.target,D.target);return s.get().filter(P).map(F=>a.get()?(D.prevent(),!1):t.triggerEvent(M1(),D))},S=ss([{key:xo(),value:d},{key:Fs(),value:h},{key:va(),value:b}]);return{fireIfReady:(D,P)=>Tt(S,P).bind(F=>F(D))}},pC=t=>t.raw.which===is[0]&&!yt(["input","textarea"],Ns(t.target))&&!Sm(t.target,'[contenteditable="true"]'),Zz=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=gC(a),h=$e(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),J=>nc(t,J,se=>{d.fireIfReady(se,J).each(De=>{De&&se.kill()}),a.triggerEvent(J,se)&&se.kill()})),b=Xo(),S=nc(t,"paste",J=>{d.fireIfReady(J,"paste").each(ce=>{ce&&J.kill()}),a.triggerEvent("paste",J)&&J.kill(),b.set(setTimeout(()=>{a.triggerEvent(np(),J)},0))}),T=nc(t,"keydown",J=>{a.triggerEvent("keydown",J)?J.kill():a.stopBackspace&&pC(J)&&J.prevent()}),D=nc(t,"focusin",J=>{a.triggerEvent("focusin",J)&&J.kill()}),P=Xo(),F=nc(t,"focusout",J=>{a.triggerEvent("focusout",J)&&J.kill(),P.set(setTimeout(()=>{a.triggerEvent(qm(),J)},0))});return{unbind:()=>{gt(h,J=>{J.unbind()}),T.unbind(),D.unbind(),F.unbind(),S.unbind(),b.on(clearTimeout),P.on(clearTimeout)}}},KI=(t,s)=>{const a=Tt(t,"target").getOr(s);return mn(a)},jz=(t,s)=>{const a=mn(!1),c=mn(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},qz=t=>{const s=mn(!1);return{stop:()=>{s.set(!0)},cut:de,isStopped:s.get,isCut:at,event:t,setSource:ve("Cannot set source of a broadcasted event"),getSource:ve("Cannot get source of a broadcasted event")}},bC=Se.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),YI=(t,s,a,c,d,h)=>{const b=t(s,c),S=jz(a,d);return b.fold(()=>(h.logEventNoHandlers(s,c),bC.complete()),T=>{const D=T.descHandler;return nh(D)(S),S.isStopped()?(h.logEventStopped(s,T.element,D.purpose),bC.stopped()):S.isCut()?(h.logEventCut(s,T.element,D.purpose),bC.complete()):Mr(T.element).fold(()=>(h.logNoParent(s,T.element,D.purpose),bC.complete()),F=>(h.logEventResponse(s,T.element,D.purpose),bC.resume(F)))})},vC=(t,s,a,c,d,h)=>YI(t,s,a,c,d,h).fold(it,b=>vC(t,s,a,b,d,h),at),Gz=(t,s,a,c,d)=>{const h=KI(a,c);return YI(t,s,a,c,h,d)},MO=(t,s,a)=>{const c=qz(s);return gt(t,d=>{const h=d.descHandler;nh(h)(c)}),c.isStopped()},Kz=(t,s,a,c)=>XI(t,s,a,a.target,c),XI=(t,s,a,c,d)=>{const h=KI(a,c);return vC(t,s,a,c,h,d)},JI=(t,s)=>({element:t,descHandler:s}),QI=(t,s)=>({id:t,descHandler:s}),e6=()=>{const t={},s=(b,S,T)=>{Ts(T,(D,P)=>{const F=t[P]!==void 0?t[P]:{};F[S]=GS(D,b),t[P]=F})},a=(b,S)=>Z0(S).bind(T=>Tt(b,T)).map(T=>JI(S,T));return{registerId:s,unregisterId:b=>{Ts(t,(S,T)=>{go(S,b)&&delete S[b]})},filterByType:b=>Tt(t,b).map(S=>qi(S,(T,D)=>QI(D,T))).getOr([]),find:(b,S,T)=>Tt(t,S).bind(D=>of(T,P=>a(D,P),b))}},kg=()=>{const t=e6(),s={},a=D=>{const P=D.element;return Z0(P).getOrThunk(()=>ZS("uid-",D.element))},c=(D,P)=>{const F=s[P];if(F===D)h(D);else throw new Error('The tagId "'+P+'" is already used by: '+nm(F.element)+`
Cannot use it for: `+nm(D.element)+`
The conflicting element is`+(ke(F.element)?" ":" not ")+"already in the DOM")},d=D=>{const P=a(D);Vr(s,P)&&c(D,P);const F=[D];t.registerId(F,P,D.events),s[P]=D},h=D=>{Z0(D.element).each(P=>{delete s[P],t.unregisterId(P)})};return{find:(D,P,F)=>t.find(D,P,F),filter:D=>t.filterByType(D),register:d,unregister:h,getById:D=>Tt(s,D)}},xm=ol({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:vb(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Pe("components",[]),Za("containerBehaviours",[]),Pe("events",{}),Pe("domModification",{}),Pe("eventOrder",{})]}),NO=t=>{const s=ue=>Mr(t.element).fold(it,Te=>So(ue,Te)),a=kg(),c=(ue,Te)=>a.find(s,ue,Te),d=Zz(t.element,{triggerEvent:(ue,Te)=>z0(ue,Te.target,Oe=>Kz(c,ue,Te,Oe))}),h={debugInfo:re("real"),triggerEvent:(ue,Te,Oe)=>{z0(ue,Te,ze=>XI(c,ue,Oe,Te,ze))},triggerFocus:(ue,Te)=>{Z0(ue).fold(()=>{$c(ue)},Oe=>{z0(md(),ue,ze=>(Gz(c,md(),{originator:Te,kill:de,prevent:de,target:ue},ue,ze),!1))})},triggerEscape:(ue,Te)=>{h.triggerEvent("keydown",ue.element,Te.event)},getByUid:ue=>ce(ue),getByDom:ue=>De(ue),build:Oi,buildOrPatch:vp,addToGui:ue=>{T(ue)},removeFromGui:ue=>{D(ue)},addToWorld:ue=>{b(ue)},removeFromWorld:ue=>{S(ue)},broadcast:ue=>{G(ue)},broadcastOn:(ue,Te)=>{J(ue,Te)},broadcastEvent:(ue,Te)=>{se(ue,Te)},isConnected:it},b=ue=>{ue.connect(h),rr(ue.element)||(a.register(ue),gt(ue.components(),b),h.triggerEvent(S0(),ue.element,{target:ue.element}))},S=ue=>{rr(ue.element)||(gt(ue.components(),S),a.unregister(ue)),ue.disconnect()},T=ue=>{vf(t,ue)},D=ue=>{yf(ue)},P=()=>{d.unbind(),Kc(t.element)},F=ue=>{const Te=a.filter(Ql());gt(Te,Oe=>{const ze=Oe.descHandler;nh(ze)(ue)})},G=ue=>{F({universal:!0,data:ue})},J=(ue,Te)=>{F({universal:!1,channels:ue,data:Te})},se=(ue,Te)=>{const Oe=a.filter(ue);return MO(Oe,Te)},ce=ue=>a.getById(ue).fold(()=>Gn.error(new Error('Could not find component with uid: "'+ue+'" in system.')),Gn.value),De=ue=>{const Te=Z0(ue).getOr("not found");return ce(Te)};return b(t),{root:t,element:t.element,destroy:P,add:T,remove:D,getByUid:ce,getByDom:De,addToWorld:b,removeFromWorld:S,broadcast:G,broadcastOn:J,broadcastEvent:se}},t6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:$e(t.items,s.interpreter)}),Yz=re([Pe("prefix","form-field"),Za("fieldBehaviours",[Mo,Jt])]),n6=re([zc({schema:[st("dom")],name:"label"}),zc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[st("text")],name:"aria-descriptor"}),Mi({factory:{sketch:t=>{const s=ao(t,["factory"]);return t.factory.sketch(s)}},schema:[st("factory")],name:"field"})]),Xz=(t,s,a,c)=>{const d=Fr(t.fieldBehaviours,[Mo.config({find:S=>Rs(S,t,"field")}),Jt.config({store:{mode:"manual",getValue:S=>Mo.getCurrent(S).bind(Jt.getValue),setValue:(S,T)=>{Mo.getCurrent(S).each(D=>{Jt.setValue(D,T)})}}})]),h=ms([er((S,T)=>{const D=Ew(S,t,["label","field","aria-descriptor"]);D.field().each(P=>{const F=on(t.prefix);D.label().each(G=>{$t(G.element,"for",F),$t(P.element,"id",F)}),D["aria-descriptor"]().each(G=>{const J=on(t.prefix);$t(G.element,"id",J),$t(P.element,"aria-describedby",J)})})})]),b={getField:S=>Rs(S,t,"field"),getLabel:S=>Rs(S,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:b}},Ho=rc({name:"FormField",configFields:Yz(),partFields:n6(),factory:Xz,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var Jz=tinymce.util.Tools.resolve("tinymce.html.Entities");const yC=(t,s,a,c)=>{const d=eV(t,s,a,c);return Ho.sketch(d)},Qz=(t,s)=>yC(t,s,[],[]),eV=(t,s,a,c)=>({dom:o6(a),components:t.toArray().concat([s]),fieldBehaviours:Et(c)}),tV=()=>o6([]),o6=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),mh=(t,s)=>Ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(t))]}),Rl=on("form-component-change"),s6=on("form-component-input"),wC=on("form-close"),Ag=on("form-cancel"),hh=on("form-action"),CC=on("form-submit"),PO=on("form-block"),N_=on("form-unblock"),r6=on("form-tabchange"),a6=on("form-resize"),nV=(t,s,a)=>{const c=t.label.map(J=>mh(J,s)),d=s.icons(),h=J=>{var se;return(se=d[J])!==null&&se!==void 0?se:J},b=J=>(se,ce)=>{Sd(ce.event.target,"[data-collection-item-value]").each(De=>{J(se,ce,De,Vn(De,"data-collection-item-value"))})},S=(J,se)=>{const De=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",ue=$e(se,ze=>{const We=kd.translate(ze.text),Mt=t.columns===1?`<div class="tox-collection__item-label">${We}</div>`:"",tn=`<div class="tox-collection__item-icon">${h(ze.icon)}</div>`,nt={_:" "," - ":" ","-":" "},an=We.replace(/\_| \- |\-/g,Vt=>nt[Vt]);return`<div data-mce-tooltip="${an}" class="tox-collection__item${De}" tabindex="-1" data-collection-item-value="${Jz.encodeAllRaw(ze.value)}" aria-label="${an}">${tn}${Mt}</div>`}),Te=t.columns!=="auto"&&t.columns>1?io(ue,t.columns):[ue],Oe=$e(Te,ze=>`<div class="tox-collection__group">${ze.join("")}</div>`);Tu(J.element,Oe.join(""))},T=b((J,se,ce,De)=>{se.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||bn(J,hh,{name:t.name,value:De})}),D=[ot(dd(),b((J,se,ce)=>{$c(ce,!0)})),ot(Uh(),T),ot(M1(),T),ot(fd(),b((J,se,ce)=>{ir(J.element,"."+Ib).each(De=>{mr(De,Ib)}),Lr(ce,Ib)})),ot(vS(),b(J=>{ir(J.element,"."+Ib).each(se=>{mr(se,Ib),Va(se)})})),rf(b((J,se,ce,De)=>{bn(J,hh,{name:t.name,value:De})}))],P=(J,se)=>$e(Tc(J.element,".tox-collection__item"),se),F=Ho.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Xt},behaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:J=>{P(J,se=>{Lr(se,"tox-collection__item--state-disabled"),$t(se,"aria-disabled",!0)})},onEnabled:J=>{P(J,se=>{mr(se,"tox-collection__item--state-disabled"),ee(se,"aria-disabled")})}}),ha(()=>s.checkUiComponentContext(t.context)),Wn.config({}),kr.config({...s.tooltips.getConfig({tooltipText:"",onShow:J=>{ir(J.element,"."+Ib+"[data-mce-tooltip]").each(se=>{ko(se,"data-mce-tooltip").each(ce=>{kr.setComponents(J,s.tooltips.getComponents({tooltipText:ce}))})})}}),mode:"children-keyboard-focus",anchor:J=>({type:"node",node:ir(J.element,"."+Ib).orThunk(()=>w4(".tox-collection__item")),root:J.element,layouts:{onLtr:re([da,za,wa,Da,Ca,ps]),onRtl:re([da,za,wa,Da,Ca,ps])},bubble:Du(0,-2,{})})}),Jt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(J,se)=>{S(J,se),t.columns==="auto"&&JA(J,5,"tox-collection__item").each(({numRows:ce,numColumns:De})=>{Sn.setGridSize(J,ce,De)}),bo(J,a6)}}),cr.config({}),Sn.config(dz(t.columns,"normal")),Yn("collection-events",D)]),eventOrder:{[ki()]:["disabling","alloy.base.behaviour","collection-events"],[fd()]:["collection-events","tooltipping"]}});return yC(c,F,["tox-form__group--collection"],[])},oV=["input","textarea"],i6=t=>{const s=Ns(t);return yt(oV,s)},IO=(t,s)=>{const a=s.getRoot(t).getOr(t.element);mr(a,s.invalidClass),s.notify.each(c=>{i6(t.element)&&$t(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Tu(d,c.validHtml)}),c.onValid(t)})},BO=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);Lr(d,s.invalidClass),s.notify.each(h=>{i6(t.element)&&$t(t.element,"aria-invalid",!0),h.getContainer(t).each(b=>{Tu(b,c)}),h.onInvalid(t,c)})},c6=(t,s,a)=>s.validator.fold(()=>ic.pure(Gn.value(!0)),c=>c.validate(t)),LO=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),c6(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(BO(t,s,a,d),Gn.error(d)),d=>(IO(t,s),Gn.value(d))):Gn.error("No longer in system")));var sV=Object.freeze({__proto__:null,markValid:IO,markInvalid:BO,query:c6,run:LO,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Sc(a,s.invalidClass)}}),l6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>ms([ot(a.onEvent,c=>{LO(c,t,s).get(Xt)})].concat(a.validateOnLoad?[er(c=>{LO(c,t,s).get(de)})]:[]))).getOr({})}),wy=[st("invalidClass"),Pe("getRoot",M.none),jr("notify",[Pe("aria","alert"),Pe("getContainer",M.none),Pe("validHtml",""),Ao("onValid"),Ao("onInvalid"),Ao("onValidate")]),jr("validator",[st("validate"),Pe("onEvent","input"),Pe("validateOnLoad",!0)])];const gh=ya({fields:wy,name:"invalidating",active:l6,apis:sV,extra:{validation:t=>s=>{const a=Jt.getValue(s);return ic.pure(t(a))}}});var P_=Object.freeze({__proto__:null,events:()=>ms([i2(wS(),it)]),exhibit:()=>Fc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const al=ya({fields:[],name:"unselecting",active:P_}),FO=(t,s)=>Hu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Et([Dd.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),ha(()=>s.providers.checkUiComponentContext(t.context)),al.config({}),cr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>ic.nu(c=>t.fetch(c)).map(c=>M.from(DO(Bs(EO(on("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,xf.CLOSE_ON_EXECUTE,at,s.providers),{movement:O_(t.columns,t.presets)})))),parts:{menu:eC(!1,1,t.presets)}}),$O=on("color-input-change"),u6=on("color-swatch-change"),d6=on("color-picker-cancel"),rV=(t,s,a,c)=>{const d=Ho.parts.field({factory:Ef,inputClasses:["tox-textfield"],data:c,onSetValue:D=>gh.run(D).get(de),inputBehaviours:Et([vn.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),ha(()=>s.providers.checkUiComponentContext(t.context)),cr.config({}),gh.config({invalidClass:"tox-textbox-field-invalid",getRoot:D=>bi(D.element),notify:{onValid:D=>{const P=Jt.getValue(D);bn(D,$O,{color:P})}},validator:{validateOnLoad:!1,validate:D=>{const P=Jt.getValue(D);if(P.length===0)return ic.pure(Gn.value(!0));{const F=Ke.fromTag("span");It(F,"background-color",P);const G=fs(F,"background-color").fold(()=>Gn.error("blah"),J=>Gn.value(P));return ic.pure(G)}}}})]),selectOnFocus:!1}),h=t.label.map(D=>mh(D,s.providers)),b=(D,P)=>{bn(D,u6,{value:P})},S=(D,P)=>{T.getOpt(D).each(F=>{P==="custom"?a.colorPicker(G=>{G.fold(()=>bo(F,d6),J=>{b(F,J),bI(t.storageKey,J)})},"#ffffff"):P==="remove"?b(F,""):b(F,P)})},T=Jo(FO({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Ca,wa,da],onLtr:()=>[wa,Ca,da]},components:[],fetch:xI(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:S,context:t.context},s));return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:Et([Yn("form-field-events",[ot($O,(D,P)=>{T.getOpt(D).each(F=>{It(F.element,"background-color",P.event.color)}),bn(D,Rl,{name:t.name})}),ot(u6,(D,P)=>{Ho.getField(D).each(F=>{Jt.setValue(F,P.event.value),Mo.getCurrent(D).each($n.focus)})}),ot(d6,(D,P)=>{Ho.getField(D).each(F=>{Mo.getCurrent(D).each($n.focus)})})])])})},aV=zc({schema:[st("dom")],name:"label"}),Og=t=>zc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:ms([_0(xo(),(d,h,b)=>c(d,b),[s]),_0(Bc(),(d,h,b)=>c(d,b),[s]),_0(Vh(),(d,h,b)=>{b.mouseIsDown.get()&&c(d,b)},[s])])}))}),f6=Og("top-left"),iV=Og("top"),cV=Og("top-right"),m6=Og("right"),lV=Og("bottom-right"),h6=Og("bottom"),g6=Og("bottom-left"),p6=Og("left"),uV=Mi({name:"thumb",defaults:re({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ms([sp(xo(),t,"spectrum"),sp(Fs(),t,"spectrum"),sp(va(),t,"spectrum"),sp(Bc(),t,"spectrum"),sp(Vh(),t,"spectrum"),sp(ud(),t,"spectrum")])})}),I_=t=>bm(t.event),dV=Mi({schema:[jo("mouseIsDown",()=>mn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,h)=>a.getValueFromEvent(h).map(b=>a.setValueFrom(d,t,b));return{behaviours:Et([Sn.config({mode:"special",onLeft:(d,h)=>a.onLeft(d,t,I_(h)),onRight:(d,h)=>a.onRight(d,t,I_(h)),onUp:(d,h)=>a.onUp(d,t,I_(h)),onDown:(d,h)=>a.onDown(d,t,I_(h))}),cr.config({}),$n.config({})]),events:ms([ot(xo(),c),ot(Fs(),c),ot(Bc(),c),ot(Vh(),(d,h)=>{t.mouseIsDown.get()&&c(d,h)})])}}});var fV=[aV,p6,m6,iV,h6,f6,cV,g6,lV,uV,dV];const SC=re("slider.change.value"),HO=t=>t.type.indexOf("touch")!==-1,zO=t=>{const s=t.event.raw;if(HO(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?M.some(a.touches[0]).map(c=>Ds(c.clientX,c.clientY)):M.none()}else{const a=s;return a.clientX!==void 0?M.some(a).map(c=>Ds(c.clientX,c.clientY)):M.none()}},mV="top",b6="right",hV="bottom",gV="left",Zb=t=>t.model.minX,jb=t=>t.model.minY,B_=t=>t.model.minX-1,L_=t=>t.model.minY-1,qb=t=>t.model.maxX,i1=t=>t.model.maxY,xC=t=>t.model.maxX+1,F_=t=>t.model.maxY+1,v6=(t,s,a)=>s(t)-a(t),VO=t=>v6(t,qb,Zb),UO=t=>v6(t,i1,jb),y6=t=>VO(t)/2,w6=t=>UO(t)/2,Gb=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,WO=t=>t.snapToGrid,ZO=t=>t.snapStart,$_=t=>t.rounded,H_=(t,s)=>t[s+"-edge"]!==void 0,jO=t=>H_(t,gV),C6=t=>H_(t,b6),S6=t=>H_(t,mV),x6=t=>H_(t,hV),Dg=t=>t.model.value.get(),ph=(t,s)=>({x:t,y:s}),cc=(t,s)=>{bn(t,SC(),{value:s})},pV=(t,s)=>{cc(t,ph(B_(s),L_(s)))},EC=(t,s)=>{cc(t,L_(s))},bV=(t,s)=>{cc(t,ph(y6(s),L_(s)))},qO=(t,s)=>{cc(t,ph(xC(s),L_(s)))},vV=(t,s)=>{cc(t,xC(s))},yV=(t,s)=>{cc(t,ph(xC(s),w6(s)))},wV=(t,s)=>{cc(t,ph(xC(s),F_(s)))},E6=(t,s)=>{cc(t,F_(s))},CV=(t,s)=>{cc(t,ph(y6(s),F_(s)))},GO=(t,s)=>{cc(t,ph(B_(s),F_(s)))},KO=(t,s)=>{cc(t,B_(s))},YO=(t,s)=>{cc(t,ph(B_(s),w6(s)))},XO=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),Ml=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),_6=(t,s,a)=>Math.max(s,Math.min(a,t)),SV=(t,s,a,c,d)=>d.fold(()=>{const h=t-s,b=Math.round(h/c)*c;return _6(s+b,s-1,a+1)},h=>{const b=(t-h)%c,S=Math.round(b/c),T=Math.floor((t-h)/c),D=Math.floor((a-h)/c),P=Math.min(D,T+S),F=h+P*c;return Math.max(h,F)}),T6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,JO=t=>{const{min:s,max:a,range:c,value:d,step:h,snap:b,snapStart:S,rounded:T,hasMinEdge:D,hasMaxEdge:P,minBound:F,maxBound:G,screenRange:J}=t,se=D?s-1:s,ce=P?a+1:a;if(d<F)return se;if(d>G)return ce;{const De=T6(d,F,G),ue=_6(De/J*c+s,se,ce);return b&&ue>=s&&ue<=a?SV(ue,s,a,h,S):T?Math.round(ue):ue}},k6=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:h,hasMaxEdge:b,maxBound:S,maxOffset:T,centerMinEdge:D,centerMaxEdge:P}=t;return d<s?h?0:D:d>a?b?S:P:(d-s)/c*T},QO="top",A6="right",O6="bottom",eD="left",xV="width",EV="height",Em=t=>t.element.dom.getBoundingClientRect(),Of=(t,s)=>t[s],z_=t=>{const s=Em(t);return Of(s,eD)},D6=t=>{const s=Em(t);return Of(s,A6)},_C=t=>{const s=Em(t);return Of(s,QO)},V_=t=>{const s=Em(t);return Of(s,O6)},tD=t=>{const s=Em(t);return Of(s,xV)},nD=t=>{const s=Em(t);return Of(s,EV)},oD=(t,s,a)=>(t+s)/2-a,sD=(t,s)=>{const a=Em(t),c=Em(s),d=Of(a,eD),h=Of(a,A6),b=Of(c,eD);return oD(d,h,b)},U_=(t,s)=>{const a=Em(t),c=Em(s),d=Of(a,QO),h=Of(a,O6),b=Of(c,QO);return oD(d,h,b)},W_=(t,s)=>{bn(t,SC(),{value:s})},TC=(t,s,a)=>{const c={min:Zb(s),max:qb(s),range:VO(s),value:a,step:Gb(s),snap:WO(s),snapStart:ZO(s),rounded:$_(s),hasMinEdge:jO(s),hasMaxEdge:C6(s),minBound:z_(t),maxBound:D6(t),screenRange:tD(t)};return JO(c)},Cy=(t,s,a)=>{const c=TC(t,s,a);return W_(t,c),c},R6=(t,s)=>{const a=Zb(s);W_(t,a)},M6=(t,s)=>{const a=qb(s);W_(t,a)},N6=(t,s,a,c)=>{const h=(t>0?Ml:XO)(Dg(a),Zb(a),qb(a),Gb(a,c));return W_(s,h),M.some(h)},P6=t=>(s,a,c)=>N6(t,s,a,c).map(it),_V=t=>zO(t).map(a=>a.left),Z_=(t,s,a,c,d)=>{const b=tD(t),S=c.bind(P=>M.some(sD(P,t))).getOr(0),T=d.bind(P=>M.some(sD(P,t))).getOr(b),D={min:Zb(s),max:qb(s),range:VO(s),value:a,hasMinEdge:jO(s),hasMaxEdge:C6(s),minBound:z_(t),maxBound:D6(t),maxOffset:b,centerMinEdge:S,centerMaxEdge:T};return k6(D)},rD=(t,s,a,c,d,h)=>{const b=Z_(s,h,a,c,d);return z_(s)-z_(t)+b},TV=(t,s,a,c)=>{const d=Dg(a),h=rD(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),b=no(s.element)/2;It(s.element,"left",h-b+"px")},I6=P6(-1),B6=P6(1),aD=M.none,L6=M.none,il={"top-left":M.none(),top:M.none(),"top-right":M.none(),right:M.some(vV),"bottom-right":M.none(),bottom:M.none(),"bottom-left":M.none(),left:M.some(KO)};var F6=Object.freeze({__proto__:null,setValueFrom:Cy,setToMin:R6,setToMax:M6,findValueOfOffset:TC,getValueFromEvent:_V,findPositionOfValue:rD,setPositionFromValue:TV,onLeft:I6,onRight:B6,onUp:aD,onDown:L6,edgeActions:il});const j_=(t,s)=>{bn(t,SC(),{value:s})},iD=(t,s,a)=>{const c={min:jb(s),max:i1(s),range:UO(s),value:a,step:Gb(s),snap:WO(s),snapStart:ZO(s),rounded:$_(s),hasMinEdge:S6(s),hasMaxEdge:x6(s),minBound:_C(t),maxBound:V_(t),screenRange:nD(t)};return JO(c)},$6=(t,s,a)=>{const c=iD(t,s,a);return j_(t,c),c},kV=(t,s)=>{const a=jb(s);j_(t,a)},AV=(t,s)=>{const a=i1(s);j_(t,a)},OV=(t,s,a,c)=>{const h=(t>0?Ml:XO)(Dg(a),jb(a),i1(a),Gb(a,c));return j_(s,h),M.some(h)},cD=t=>(s,a,c)=>OV(t,s,a,c).map(it),bh=t=>zO(t).map(a=>a.top),lD=(t,s,a,c,d)=>{const b=nD(t),S=c.bind(P=>M.some(U_(P,t))).getOr(0),T=d.bind(P=>M.some(U_(P,t))).getOr(b),D={min:jb(s),max:i1(s),range:UO(s),value:a,hasMinEdge:S6(s),hasMaxEdge:x6(s),minBound:_C(t),maxBound:V_(t),maxOffset:b,centerMinEdge:S,centerMaxEdge:T};return k6(D)},q_=(t,s,a,c,d,h)=>{const b=lD(s,h,a,c,d);return _C(s)-_C(t)+b},G_=(t,s,a,c)=>{const d=Dg(a),h=q_(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),b=xr(s.element)/2;It(s.element,"top",h-b+"px")},uD=M.none,DV=M.none,RV=cD(-1),MV=cD(1),NV={"top-left":M.none(),top:M.some(EC),"top-right":M.none(),right:M.none(),"bottom-right":M.none(),bottom:M.some(E6),"bottom-left":M.none(),left:M.none()};var PV=Object.freeze({__proto__:null,setValueFrom:$6,setToMin:kV,setToMax:AV,findValueOfOffset:iD,getValueFromEvent:bh,findPositionOfValue:q_,setPositionFromValue:G_,onLeft:uD,onRight:DV,onUp:RV,onDown:MV,edgeActions:NV});const K_=(t,s)=>{bn(t,SC(),{value:s})},Y_=(t,s)=>({x:t,y:s}),H6=(t,s,a)=>{const c=TC(t,s,a.left),d=iD(t,s,a.top),h=Y_(c,d);return K_(t,h),h},IV=(t,s,a,c,d)=>{const h=t>0?Ml:XO,b=s?Dg(c).x:h(Dg(c).x,Zb(c),qb(c),Gb(c,d)),S=s?h(Dg(c).y,jb(c),i1(c),Gb(c,d)):Dg(c).y;return K_(a,Y_(b,S)),M.some(b)},Md=(t,s)=>(a,c,d)=>IV(t,s,a,c,d).map(it),X_=(t,s)=>{const a=Zb(s),c=jb(s);K_(t,Y_(a,c))},BV=(t,s)=>{const a=qb(s),c=i1(s);K_(t,Y_(a,c))},LV=t=>zO(t),z6=(t,s,a,c)=>{const d=Dg(a),h=rD(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),b=q_(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),S=no(s.element)/2,T=xr(s.element)/2;It(s.element,"left",h-S+"px"),It(s.element,"top",b-T+"px")},V6=Md(-1,!1),dD=Md(1,!1),J_=Md(-1,!0),kC=Md(1,!0),AC={"top-left":M.some(pV),top:M.some(bV),"top-right":M.some(qO),right:M.some(yV),"bottom-right":M.some(wV),bottom:M.some(CV),"bottom-left":M.some(GO),left:M.some(YO)};var U6=Object.freeze({__proto__:null,setValueFrom:H6,setToMin:X_,setToMax:BV,getValueFromEvent:LV,setPositionFromValue:z6,onLeft:V6,onRight:dD,onUp:J_,onDown:kC,edgeActions:AC});const W6=[Pe("stepSize",1),Pe("speedMultiplier",10),Pe("onChange",de),Pe("onChoose",de),Pe("onInit",de),Pe("onDragStart",de),Pe("onDragEnd",de),Pe("snapToGrid",!1),Pe("rounded",!0),Uo("snapStart"),qo("model",aa("mode",{x:[Pe("minX",0),Pe("maxX",100),jo("value",t=>mn(t.mode.minX)),st("getInitialValue"),tr("manager",F6)],y:[Pe("minY",0),Pe("maxY",100),jo("value",t=>mn(t.mode.minY)),st("getInitialValue"),tr("manager",PV)],xy:[Pe("minX",0),Pe("maxX",100),Pe("minY",0),Pe("maxY",100),jo("value",t=>mn({x:t.mode.minX,y:t.mode.minY})),st("getInitialValue"),tr("manager",U6)]})),Za("sliderBehaviours",[Sn,Jt]),jo("mouseIsDown",()=>mn(!1))],Nd=rc({name:"Slider",configFields:W6,partFields:fV,factory:(t,s,a,c)=>{const d=We=>nl(We,t,"thumb"),h=We=>nl(We,t,"spectrum"),b=We=>Rs(We,t,"left-edge"),S=We=>Rs(We,t,"right-edge"),T=We=>Rs(We,t,"top-edge"),D=We=>Rs(We,t,"bottom-edge"),P=t.model,F=P.manager,G=(We,Mt)=>{F.setPositionFromValue(We,Mt,t,{getLeftEdge:b,getRightEdge:S,getTopEdge:T,getBottomEdge:D,getSpectrum:h})},J=(We,Mt)=>{P.value.set(Mt);const tn=d(We);G(We,tn)},se=(We,Mt)=>{J(We,Mt);const tn=d(We);return t.onChange(We,tn,Mt),M.some(!0)},ce=We=>{F.setToMin(We,t)},De=We=>{F.setToMax(We,t)},ue=We=>{const Mt=()=>{Rs(We,t,"thumb").each(nt=>{const an=P.value.get();t.onChoose(We,nt,an)})},tn=t.mouseIsDown.get();t.mouseIsDown.set(!1),tn&&Mt()},Te=(We,Mt)=>{Mt.stop(),t.mouseIsDown.set(!0),t.onDragStart(We,d(We))},Oe=(We,Mt)=>{Mt.stop(),t.onDragEnd(We,d(We)),ue(We)},ze=We=>{Rs(We,t,"spectrum").map(Sn.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.sliderBehaviours,[Sn.config({mode:"special",focusIn:ze}),Jt.config({store:{mode:"manual",getValue:We=>P.value.get(),setValue:J}}),el.config({channels:{[Mv()]:{onReceive:ue}}})]),events:ms([ot(SC(),(We,Mt)=>{se(We,Mt.event.value)}),er((We,Mt)=>{const tn=P.getInitialValue();P.value.set(tn);const nt=d(We);G(We,nt);const an=h(We);t.onInit(We,nt,an,P.value.get())}),ot(xo(),Te),ot(va(),Oe),ot(Bc(),(We,Mt)=>{ze(We),Te(We,Mt)}),ot(ud(),Oe)]),apis:{resetToMin:ce,resetToMax:De,setValue:J,refresh:G},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),fD=on("rgb-hex-update"),Z6=on("slider-update"),j6=on("palette-update"),$V=(t,s)=>{const a=Nd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Nd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:re(0)},components:[a,c],sliderBehaviours:Et([$n.config({})]),onChange:(d,h,b)=>{$t(d.element,"aria-valuenow",Math.floor(360-b*3.6)),bn(d,Z6,{value:b})}})},q6="form",G6=[Za("formBehaviours",[Jt])],mD=t=>"<alloy.field."+t+">",HV=t=>{const s=(()=>{const h=[];return{field:(S,T)=>(h.push(S),Cw(q6,mD(S),T)),record:re(h)}})(),a=t(s),c=s.record(),d=$e(c,h=>Mi({name:h,pname:mD(h)}));return _b(q6,G6,d,zV,a)},K6=(t,s)=>t.fold(()=>Gn.error(s),Gn.value),zV=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.formBehaviours,[Jt.config({store:{mode:"manual",getValue:a=>{const c=_w(a,t);return Ko(c,(d,h)=>d().bind(b=>{const S=Mo.getCurrent(b);return K6(S,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+nm(b.element)))}).map(Jt.getValue))},setValue:(a,c)=>{Ts(c,(d,h)=>{Rs(a,t,h).each(b=>{Mo.getCurrent(b).each(S=>{Jt.setValue(S,d)})})})}}})]),apis:{getField:(a,c)=>Rs(a,t,c).bind(Mo.getCurrent)}}),Kb={getField:G0((t,s,a)=>t.getField(s,a)),sketch:HV},Sy=on("valid-input"),Y6=on("invalid-input"),hD=on("validating-input"),gD="colorcustom.rgb.",VV={isEnabled:it,setEnabled:de,immediatelyShow:de,immediatelyHide:de},UV=(t,s,a,c,d,h)=>{const b=(ce,De)=>{const ue=De.get();ce!==ue.isEnabled()&&(ue.setEnabled(ce),ce?ue.immediatelyShow():ue.immediatelyHide())},S=(ce,De,ue)=>gh.config({invalidClass:s("invalid"),notify:{onValidate:Te=>{bn(Te,hD,{type:ce})},onValid:Te=>{b(!1,ue),bn(Te,Sy,{type:ce,value:Jt.getValue(Te)})},onInvalid:Te=>{b(!0,ue),bn(Te,Y6,{type:ce,value:Jt.getValue(Te)})}},validator:{validate:Te=>{const Oe=Jt.getValue(Te),ze=De(Oe)?Gn.value(!0):Gn.error(t("aria.input.invalid"));return ic.pure(ze)},validateOnLoad:!1}}),T=(ce,De,ue,Te,Oe)=>{const ze=mn(VV),We=t(gD+"range"),Mt=Ho.parts.label({dom:{tag:"label"},components:[nr(ue)]}),tn=Ho.parts.field({data:Oe,factory:Ef,inputAttributes:{type:"text","aria-label":Te,...De==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Et([S(De,ce,ze),cr.config({}),kr.config({...d({tooltipText:"",onSetup:Go=>{ze.set({isEnabled:()=>kr.isEnabled(Go),setEnabled:gn=>kr.setEnabled(Go,gn),immediatelyShow:()=>kr.immediateOpenClose(Go,!0),immediatelyHide:()=>kr.immediateOpenClose(Go,!1)}),kr.setEnabled(Go,!1)},onShow:(Go,gn)=>{kr.setComponents(Go,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[nr(t(De==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Go=>{gh.isInvalid(Go)&&gh.run(Go).get(de)}}),nt=on("aria-invalid"),an=Jo(h("invalid",M.some(nt),"warning")),Vt=Jo({dom:{tag:"div",classes:[s("invalid-icon")]},components:[an.asSpec()]}),dn=[Mt,tn,Vt.asSpec()],wo=De!=="hex"?[Ho.parts["aria-descriptor"]({text:We})]:[],Ys=dn.concat(wo);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Ys}},D=(ce,De)=>{const ue=cC(De);return Kb.getField(ce,"hex").each(Te=>{$n.isFocused(Te)||Jt.setValue(ce,{hex:ue.value})}),ue},P=(ce,De)=>{const ue=De.red,Te=De.green,Oe=De.blue;Jt.setValue(ce,{red:ue,green:Te,blue:Oe})},F=Jo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),G=(ce,De)=>{F.getOpt(ce).each(ue=>{It(ue.element,"background-color","#"+De.value)})};return ol({factory:()=>{const ce={red:mn(M.some(255)),green:mn(M.some(255)),blue:mn(M.some(255)),hex:mn(M.some("ffffff"))},De=(gn,pt)=>{const Wt=lC(pt);P(gn,Wt),ze(Wt)},ue=gn=>ce[gn].get(),Te=(gn,pt)=>{ce[gn].set(pt)},Oe=()=>ue("red").bind(gn=>ue("green").bind(pt=>ue("blue").map(Wt=>Vb(gn,pt,Wt,1)))),ze=gn=>{const pt=gn.red,Wt=gn.green,Un=gn.blue;Te("red",M.some(pt)),Te("green",M.some(Wt)),Te("blue",M.some(Un))},We=(gn,pt)=>{const Wt=pt.event;Wt.type!=="hex"?Te(Wt.type,M.none()):c(gn)},Mt=(gn,pt)=>{a(gn);const Wt=iO(pt);Te("hex",M.some(Wt.value));const Un=lC(Wt);P(gn,Un),ze(Un),bn(gn,fD,{hex:Wt}),G(gn,Wt)},tn=(gn,pt,Wt)=>{const Un=parseInt(Wt,10);Te(pt,M.some(Un)),Oe().each(ro=>{const Tn=D(gn,ro);bn(gn,fD,{hex:Tn}),G(gn,Tn)})},nt=gn=>gn.type==="hex",an=(gn,pt)=>{const Wt=pt.event;nt(Wt)?Mt(gn,Wt.value):tn(gn,Wt.type,Wt.value)},Vt=gn=>({label:t(gD+gn+".label"),description:t(gD+gn+".description")}),dn=Vt("red"),wo=Vt("green"),Ys=Vt("blue"),Go=Vt("hex");return Bs(Kb.sketch(gn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[gn.field("red",Ho.sketch(T(uO,"red",dn.label,dn.description,255))),gn.field("green",Ho.sketch(T(uO,"green",wo.label,wo.description,255))),gn.field("blue",Ho.sketch(T(uO,"blue",Ys.label,Ys.description,255))),gn.field("hex",Ho.sketch(T(oI,"hex",Go.label,Go.description,"ffffff"))),F.asSpec()],formBehaviours:Et([gh.config({invalidClass:s("form-invalid")}),Yn("rgb-form-events",[ot(Sy,an),ot(Y6,We),ot(hD,We)])])})),{apis:{updateHex:(gn,pt)=>{Jt.setValue(gn,{hex:pt.value}),De(gn,pt),G(gn,pt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ce,De,ue)=>{ce.updateHex(De,ue)}},extraApis:{}})},WV=(t,s)=>{const a=Nd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=Nd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(D,P)=>{const{width:F,height:G}=D,J=D.getContext("2d");if(J===null)return;J.fillStyle=P,J.fillRect(0,0,F,G);const se=J.createLinearGradient(0,0,F,0);se.addColorStop(0,"rgba(255,255,255,1)"),se.addColorStop(1,"rgba(255,255,255,0)"),J.fillStyle=se,J.fillRect(0,0,F,G);const ce=J.createLinearGradient(0,0,0,G);ce.addColorStop(0,"rgba(0,0,0,0)"),ce.addColorStop(1,"rgba(0,0,0,1)"),J.fillStyle=ce,J.fillRect(0,0,F,G)},h=(D,P)=>{const F=D.components()[0].element.dom,G=mC(P,100,100),J=cI(G);d(F,lI(J))},b=(D,P)=>{const F=gO(lC(P));Nd.setValue(D,{x:F.saturation,y:100-F.value}),$t(D.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",F.saturation,F.value]))};return ol({factory:D=>{const P=re({x:0,y:0}),F=(se,ce,De)=>{ln(De)||$t(se.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(De.x),Math.floor(100-De.y)])),bn(se,j6,{value:De})},G=(se,ce,De,ue)=>{d(De.element.dom,lI(uI))},J=Et([Mo.config({find:M.some}),$n.config({})]);return Nd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:P},rounded:!1,components:[a,c],onChange:F,onInit:G,sliderBehaviours:J})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(D,P,F)=>{h(P,F)},setThumb:(D,P,F)=>{b(P,F)}},extraApis:{}})},X6=(t,s,a,c)=>{const d=b=>{const S=UV(t,s,b.onValidHex,b.onInvalidHex,a,c),T=WV(t,s),D=nt=>(100-nt)/100*360,P=nt=>100-nt/360*100,F={paletteRgba:mn(uI),paletteHue:mn(0)},G=Jo($V(t,s)),J=Jo(T.sketch({})),se=Jo(S.sketch({})),ce=(nt,an,Vt)=>{J.getOpt(nt).each(dn=>{T.setHue(dn,Vt)})},De=(nt,an)=>{se.getOpt(nt).each(Vt=>{S.updateHex(Vt,an)})},ue=(nt,an,Vt)=>{G.getOpt(nt).each(dn=>{Nd.setValue(dn,P(Vt))})},Te=(nt,an)=>{J.getOpt(nt).each(Vt=>{T.setThumb(Vt,an)})},Oe=(nt,an)=>{const Vt=lC(nt);F.paletteRgba.set(Vt),F.paletteHue.set(an)},ze=(nt,an,Vt,dn)=>{Oe(an,Vt),gt(dn,wo=>{wo(nt,an,Vt)})},We=()=>{const nt=[De];return(an,Vt)=>{const dn=Vt.event.value,wo=F.paletteHue.get(),Ys=mC(wo,dn.x,100-dn.y),Go=vI(Ys);ze(an,Go,wo,nt)}},Mt=()=>{const nt=[ce,De];return(an,Vt)=>{const dn=D(Vt.event.value),wo=F.paletteRgba.get(),Ys=gO(wo),Go=mC(dn,Ys.saturation,Ys.value),gn=vI(Go);ze(an,gn,dn,nt)}},tn=()=>{const nt=[ce,ue,Te];return(an,Vt)=>{const dn=Vt.event.hex,wo=Y9(dn);ze(an,dn,wo.hue,nt)}};return{uid:b.uid,dom:b.dom,components:[J.asSpec(),G.asSpec(),se.asSpec()],behaviours:Et([Yn("colour-picker-events",[ot(fD,tn()),ot(j6,We()),ot(Z6,Mt())]),Mo.config({find:nt=>se.getOpt(nt)}),Sn.config({mode:"acyclic"})])}};return ol({name:"ColourPicker",configFields:[st("dom"),Pe("onValidHex",de),Pe("onInvalidHex",de)],factory:d})},lc={self:()=>Mo.config({find:M.some}),memento:t=>Mo.config({find:t.getOpt}),childAt:t=>Mo.config({find:s=>pc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},pD=Fn([Pe("preprocess",Xt),Pe("postprocess",Xt)]),Q6=(t,s)=>{const a=Fi("RepresentingConfigs.memento processors",pD,s);return Jt.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),h=Jt.getValue(d);return a.postprocess(h)},setValue:(c,d)=>{const h=a.preprocess(d),b=t.get(c);Jt.setValue(b,h)}}})},c1=(t,s,a)=>Jt.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),Q_=(t,s,a)=>c1(t,c=>s(c.element),(c,d)=>a(c.element,d)),eB=t=>Q_(t,Ai,Tu),Yb=t=>Jt.config({store:{mode:"memory",initialValue:t}}),tB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},nB=t=>s=>j(s)?t.translate(tB[s]):t.translate(s),jV=(t,s,a)=>{const c=D=>"tox-"+D,d=(D,P,F=D,G=D)=>Fu(F,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+D],attributes:{title:s.translate(G),"aria-live":"polite",...P.fold(()=>({}),J=>({id:J}))}},s.icons),h=X6(nB(s),c,s.tooltips.getConfig,d),b=D=>{bn(D,hh,{name:"hex-valid",value:!0})},S=D=>{bn(D,hh,{name:"hex-valid",value:!1})},T=Jo(h.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:b,onInvalidHex:S}));return{dom:{tag:"div"},components:[T.asSpec()],behaviours:Et([c1(a,D=>{const P=T.get(D);return Mo.getCurrent(P).bind(J=>Jt.getValue(J).hex).map(J=>"#"+ul(J,"#")).getOr("")},(D,P)=>{const F=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,G=M.from(F.exec(P)).bind(ce=>Vo(ce,1)),J=T.get(D);Mo.getCurrent(J).fold(()=>{console.log("Can not find form")},ce=>{Jt.setValue(ce,{hex:G.getOr("")}),Kb.getField(ce,"hex").each(De=>{bo(De,Jl())})})}),lc.self()])}};var qV=tinymce.util.Tools.resolve("tinymce.Resource");const oB=t=>go(t,"init"),GV=t=>{const s=Xo(),a=Jo({dom:{tag:t.tag}}),c=Xo(),d=!oB(t)&&t.onFocus.isSome()?[$n.config({onFocus:h=>{t.onFocus.each(b=>{b(h.element.dom)})}}),cr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Et([Yn("custom-editor-events",[er(h=>{a.getOpt(h).each(b=>{(oB(t)?t.init(b.element.dom):qV.load(t.scriptId,t.scriptUrl).then(S=>S(b.element.dom,t.settings))).then(S=>{c.on(T=>{S.setValue(T)}),c.clear(),s.set(S)})})})]),c1(M.none(),()=>s.get().fold(()=>c.get().getOr(""),h=>h.getValue()),(h,b)=>{s.get().fold(()=>c.set(b),S=>S.setValue(b))}),lc.self()].concat(d)),components:[a.asSpec()]}};var Rg=tinymce.util.Tools.resolve("tinymce.util.Tools");const eT=on("browse.files.event"),sB=(t,s)=>{const a=Rg.explode(s.getOption("images_file_types")),c=d=>Mn(a,h=>xa(d.name.toLowerCase(),`.${h.toLowerCase()}`));return to(_s(t),c)},KV=(t,s,a)=>{const c=(G,J)=>{J.stop()},d=G=>(J,se)=>{gt(G,ce=>{ce(J,se)})},h=(G,J)=>{var se;if(!vn.isDisabled(G)){const ce=J.event.raw;bn(G,eT,{files:(se=ce.dataTransfer)===null||se===void 0?void 0:se.files})}},b=(G,J)=>{const se=J.event.raw.target;bn(G,eT,{files:se.files})},S=(G,J)=>{J&&(Jt.setValue(G,sB(J,s)),bn(G,Rl,{name:t.name}))},T=Jo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Et([Yn("input-file-events",[jh(Uh()),jh(M1())])])}),D=t.label.map(G=>mh(G,s)),P=Ho.parts.field({factory:Ma,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[nr(s.translate("Browse for an image")),T.asSpec()],action:G=>{T.get(G).element.dom.click()},buttonBehaviours:Et([lc.self(),Yb(a.getOr([])),cr.config({}),Dd.button(()=>s.checkUiComponentContext(t.context).shouldDisable),ha(()=>s.checkUiComponentContext(t.context))])}),F={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),ha(()=>s.checkUiComponentContext(t.context)),mo.config({toggleClass:"dragenter",toggleOnExecute:!1}),Yn("dropzone-events",[ot("dragenter",d([c,mo.toggle])),ot("dragleave",d([c,mo.toggle])),ot("dragover",c),ot("drop",d([c,h])),ot(Jf(),b)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[nr(s.translate("Drop an image here"))]},P]}]};return yC(D,F,["tox-form__group--stretched"],[Yn("handle-files",[ot(eT,(G,J)=>{Ho.getField(G).each(se=>{S(se,J.event.files)})})])])},YV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:$e(t.items,s.interpreter)}),XV=(t,s)=>{let a=null,c=null;return{cancel:()=>{Xe(a)||(clearTimeout(a),a=null,c=null)},throttle:(...b)=>{c=b,Xe(a)&&(a=setTimeout(()=>{const S=c;a=null,c=null,t.apply(null,S)},s))}}},tT=(t,s)=>{let a=null;return{cancel:()=>{Xe(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{Xe(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},bD=(t,s)=>{let a=null;const c=()=>{Xe(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...h)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},vD=on("alloy-fake-before-tabstop"),nT=on("alloy-fake-after-tabstop"),yD=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Et([$n.config({ignore:!0}),cr.config({})])}),rB=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[yD([vD]),s,yD([nT])],behaviours:Et([lc.childAt(1)])}),aB=(t,s)=>{bn(t,Hi(),{raw:{which:9,shiftKey:s}})},wD=(t,s)=>{const a=s.element;Sc(a,vD)?aB(t,!0):Sc(a,nT)&&aB(t,!1)},OC=t=>Sm(t,["."+vD,"."+nT].join(","),at),DC=on("update-dialog"),iB=on("update-title"),cB=on("update-body"),lB=on("update-footer"),CD=on("body-send-message"),RC=on("dialog-focus-shifted"),SD=dr().browser,MC=SD.isSafari(),JV=SD.isFirefox(),uB=MC||JV,dB=SD.isChromium(),QV=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,xD=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),eU=(t,s)=>{const a=t.body;return M.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!dB&&!MC||Ct(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},fB=(t,s,a)=>{const c=t.dom;M.from(c.contentDocument).fold(a,d=>{let h=0;const b=eU(d,s).map(T=>(h=T.scrollTop,T)).forall(QV),S=()=>{const T=c.contentWindow;Ct(T)&&(b?xD(T,"bottom"):!b&&uB&&h!==0&&xD(T,h))};MC&&c.addEventListener("load",S,{once:!0}),d.open(),d.write(s),d.close(),MC||S()})},tU=En(uB,MC?500:200).map(t=>XV(fB,t)),nU=(t,s)=>{const a=mn(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const h=c.element,b=()=>$t(h,"srcdoc",d);s?tU.fold(re(fB),S=>S.throttle)(h,d,b):b()}a.set(d)}}},oU=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],h=t.border?["tox-navobj-bordered"]:[],b={...t.label.map(F=>({title:F})).getOr({}),...a.map(F=>({srcdoc:F})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},S=nU(a,t.streamContent),T=t.label.map(F=>mh(F,s)),D=F=>rB(M.from(h),{uid:F.uid,dom:{tag:"iframe",attributes:b,classes:[c,...d]},behaviours:Et([cr.config({}),$n.config({}),c1(a,S.getValue,S.setValue),el.config({channels:{[RC]:{onReceive:(G,J)=>{J.newFocus.each(se=>{bi(G.element).each(ce=>{(So(G.element,se)?Lr:mr)(ce,"tox-navobj-bordered-focus")})})}}}})])}),P=Ho.parts.field({factory:{sketch:D}});return yC(T,P,["tox-form__group--stretched"],[])},sU=t=>new Promise((s,a)=>{const c=()=>{h(),s(t)},d=[nc(t,"load",c),nc(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>gt(d,b=>b.unbind());t.dom.complete&&c()}),rU=(t,s,a,c,d)=>{const h=a*d,b=c*d,S=Math.max(0,t/2-h/2),T=Math.max(0,s/2-b/2);return{left:S.toString()+"px",top:T.toString()+"px",width:h.toString()+"px",height:b.toString()+"px"}},aU=(t,s,a)=>{const c=no(t),d=xr(t);return Math.min(c/s,d/a,1)},ED=(t,s)=>{const a=mn(s.getOr({url:""})),c=Jo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=Jo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),h=(T,D)=>{const P={url:D.url};D.zoom.each(G=>P.zoom=G),D.cachedWidth.each(G=>P.cachedWidth=G),D.cachedHeight.each(G=>P.cachedHeight=G),a.set(P);const F=()=>{const{cachedWidth:G,cachedHeight:J,zoom:se}=P;if(!Zt(G)&&!Zt(J)){if(Zt(se)){const De=aU(T.element,G,J);P.zoom=De}const ce=rU(no(T.element),xr(T.element),G,J,P.zoom);d.getOpt(T).each(De=>{$o(De.element,ce)})}};c.getOpt(T).each(G=>{const J=G.element;D.url!==Vn(J,"src")&&($t(J,"src",D.url),mr(T.element,"tox-imagepreview__loaded")),F(),sU(J).then(se=>{T.getSystem().isConnected()&&(Lr(T.element,"tox-imagepreview__loaded"),P.cachedWidth=se.dom.naturalWidth,P.cachedHeight=se.dom.naturalHeight,F())})})},b={};t.height.each(T=>b.height=T);const S=s.map(T=>({url:T.url,zoom:M.from(T.zoom),cachedWidth:M.from(T.cachedWidth),cachedHeight:M.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:b,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Et([lc.self(),c1(S,()=>a.get(),h)])}},iU=(t,s,a)=>{const c="tox-label",d=t.align==="center"?[`${c}--center`]:[],h=t.align==="end"?[`${c}--end`]:[],b=Jo({dom:{tag:"label",classes:[c,...d,...h]},components:[nr(s.providers.translate(t.label))]}),S=$e(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[b.asSpec(),...S],behaviours:Et([lc.self(),Wn.config({}),eB(M.none()),Sn.config({mode:"acyclic"}),Yn("label",[er(T=>{t.for.each(D=>{a(D).each(P=>{b.getOpt(T).each(F=>{var G;const J=(G=Vn(P.element,"id"))!==null&&G!==void 0?G:on("form-field");$t(P.element,"id",J),$t(F.element,"for",J)})})})})])])}},mB=on("toolbar.button.execute"),cU=t=>rf((s,a)=>{x_(t,s)(c=>{bn(s,mB,{buttonApi:c}),t.onAction(c)})}),Df=on("common-button-display-events"),oT={[ki()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Ji()]:["toolbar-button-events",Df],[Lc()]:["toolbar-button-events","dropdown-events","tooltipping"],[Bc()]:["focusing","alloy.base.behaviour",Df]},_D=t=>It(t.element,"width",ut(t.element,"width")),hB=(t,s,a)=>Fu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),NC=(t,s)=>hB(t,s,[]),l1=(t,s)=>hB(t,s,[Wn.config({})]),sT=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[nr(a.translate(t))],behaviours:Et([Wn.config({})])}),zu=on("update-menu-text"),Xb=on("update-menu-icon"),TD=(t,s,a,c)=>{const d=mn(de),h=t.text.map(ce=>Jo(sT(ce,s,a.providers))),b=t.icon.map(ce=>Jo(l1(ce,a.providers.icons))),S=(ce,De)=>{const ue=Jt.getValue(ce);return $n.focus(ue),bn(ue,"keydown",{raw:De.event.raw}),Hu.close(ue),M.some(!0)},T=t.role.fold(()=>({}),ce=>({role:ce})),D=M.from(t.listRole).map(ce=>({listRole:ce})).getOr({}),P=t.ariaLabel.fold(()=>({}),ce=>({"aria-label":a.providers.translate(ce)})),F=Fu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),G=on("common-button-display-events"),J="dropdown-events";return Jo(Hu.sketch({...t.uid?{uid:t.uid}:{},...T,...D,dom:{tag:"button",classes:[s,`${s}--select`].concat($e(t.classes,ce=>`${s}--${ce}`)),attributes:{...P,...Ct(c)?{"data-mce-name":c}:{}}},components:dy([b.map(ce=>ce.asSpec()),h.map(ce=>ce.asSpec()),M.some(F)]),matchWidth:!0,useMinWidth:!0,onOpen:(ce,De,ue)=>{t.searchable&&Lz(ue)},dropdownBehaviours:Et([...t.dropdownBehaviours,Dd.button(()=>t.disabled||a.providers.checkUiComponentContext(t.context).shouldDisable),ha(()=>a.providers.checkUiComponentContext(t.context)),al.config({}),Wn.config({}),...t.tooltip.map(ce=>kr.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(ce)}))).toArray(),Yn(J,[kf(t,d),Ni(t,d)]),Yn(G,[er((ce,De)=>{t.listRole!=="listbox"&&_D(ce)})]),Yn("update-dropdown-width-variable",[ot(Qf(),(ce,De)=>Hu.close(ce))]),Yn("menubutton-update-display-text",[ot(zu,(ce,De)=>{h.bind(ue=>ue.getOpt(ce)).each(ue=>{Wn.set(ue,[nr(a.providers.translate(De.event.text))])})}),ot(Xb,(ce,De)=>{b.bind(ue=>ue.getOpt(ce)).each(ue=>{Wn.set(ue,[l1(De.event.icon,a.providers.icons)])})})])]),eventOrder:Bs(oT,{[Bc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ji()]:["toolbar-button-events",kr.name(),J,G]}),sandboxBehaviours:Et([Sn.config({mode:"special",onLeft:S,onRight:S}),Yn("dropdown-sandbox-events",[ot(NA,(ce,De)=>{R_(ce),De.stop()}),ot(wP,(ce,De)=>{by(ce,De),De.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...eC(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:ZI,onCollapseMenu:(ce,De,ue)=>{ft.getHighlighted(ue).each(Te=>{ZI(ce,ue,Te)})},onDehighlightItem:Bz}}},getAnchorOverrides:()=>({maxHeightFunction:(ce,De)=>{mv()(ce,De-10)}}),fetch:ce=>ic.nu(en(t.fetch,ce))})).asSpec()},gB=t=>j(t),kD=t=>t.type==="separator",lU=t=>go(t,"getSubmenuItems"),pB={type:"separator"},bB=(t,s)=>{const a=zo(t,(c,d)=>gB(d)?d===""?c:d==="|"?c.length>0&&!kD(c[c.length-1])?c.concat([pB]):c:go(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&kD(a[a.length-1])&&a.pop(),a},uU=(t,s)=>{const a=t.getSubmenuItems(),c=AD(a,s),d=Bs(c.menus,{[t.value]:c.items}),h=Bs(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},vB=t=>{const s=Tt(t,"value").getOrThunk(()=>on("generated-menu-item"));return Bs({value:s},t)},AD=(t,s)=>{const a=bB(j(t)?t.split(" "):t,s);return To(a,(c,d)=>{if(lU(d)){const h=vB(d),b=uU(h,s);return{menus:Bs(c.menus,b.menus),items:[b.item,...c.items],expansions:Bs(c.expansions,b.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},yB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),dU=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),xy=(t,s,a,c)=>{const d=on("primary-menu"),h=AD(t,a.shared.providers.menuItems());if(h.items.length===0)return M.none();const b=yB(c),S=jI(d,h.items,s,a,c.isHorizontalMenu,b),T=dU(c),D=Ko(h.menus,(F,G)=>jI(G,F,s,a,!1,T)),P=Bs(D,as(d,S));return M.from(Yp.tieredData(d,P,h.expansions))},rT=t=>!go(t,"items"),OD="data-value",wB=(t,s,a,c,d)=>$e(a,h=>rT(h)?{type:"togglemenuitem",...d?{}:{role:"option"},text:h.text,value:h.value,active:h.value===c,onAction:()=>{Jt.setValue(t,h.value),bn(t,Rl,{name:s}),$n.focus(t)}}:{type:"nestedmenuitem",text:h.text,getSubmenuItems:()=>wB(t,s,h.items,c,d)}),aT=(t,s)=>Ss(t,a=>rT(a)?En(a.value===s,a):aT(a.items,s)),fU=(t,s,a)=>{const c=Mn(t.items,D=>!rT(D)),d=s.shared.providers,h=a.bind(D=>aT(t.items,D)).orThunk(()=>zs(t.items).filter(rT)),b=t.label.map(D=>mh(D,d)),S=Ho.parts.field({dom:{},factory:{sketch:D=>TD({context:t.context,uid:D.uid,text:h.map(P=>P.text),icon:M.none(),tooltip:M.none(),role:En(!c,"combobox"),...c?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(P,F)=>{const G=wB(P,t.name,t.items,Jt.getValue(P),c);F(xy(G,xf.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:M.none()}))},onSetup:re(de),getApi:re({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[cr.config({}),c1(h.map(P=>P.value),P=>Vn(P.element,OD),(P,F)=>{aT(t.items,F).each(G=>{$t(P.element,OD,G.value),bn(P,zu,{text:G.text})})})]},"tox-listbox",s.shared)}}),T={dom:{tag:"div",classes:["tox-listboxfield"]},components:[S]};return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([b.toArray(),[T]]),fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:D=>{Ho.getField(D).each(vn.disable)},onEnabled:D=>{Ho.getField(D).each(vn.enable)}})])})},mU=(t,s)=>({dom:{tag:"div",classes:t.classes},components:$e(t.items,s.shared.interpreter)}),DD=(t,s)=>{const a=$e(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>as("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Fr(t.selectBehaviours,[$n.config({}),Jt.config({store:{mode:"manual",getValue:d=>Ou(d.element),setValue:(d,h)=>{const b=zs(t.options);et(t.options,T=>T.value===h).isSome()?og(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&b.each(T=>og(d.element,T.value))},...c}})])}},hU=ol({name:"HtmlSelect",configFields:[st("options"),Za("selectBehaviours",[$n,Jt]),Pe("selectClasses",[]),Pe("selectAttributes",{}),Uo("data")],factory:DD}),gU=(t,s,a)=>{const c=$e(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>mh(T,s)),h=Ho.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:hU,selectBehaviours:Et([vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),cr.config({}),Yn("selectbox-change",[ot(Jf(),(T,D)=>{bn(T,Rl,{name:t.name})})])])}),b=t.size>1?M.none():M.some(Fu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),S={dom:{tag:"div",classes:["tox-selectfield"]},components:dt([[h],b.toArray()])};return Ho.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([d.toArray(),[S]]),fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{Ho.getField(T).each(vn.disable)},onEnabled:T=>{Ho.getField(T).each(vn.enable)}}),ha(()=>s.checkUiComponentContext(t.context))])})},pU=re([Pe("field1Name","field1"),Pe("field2Name","field2"),Qm("onLockedChange"),sm(["lockClass"]),Pe("locked",!1),Al.field("coupledFieldBehaviours",[Mo,Jt]),os("onInput",de)]),RD=(t,s,a)=>Rs(t,s,a).bind(Mo.getCurrent),CB=(t,s)=>Mi({factory:Ho,name:t,overrides:a=>({fieldBehaviours:Et([Yn("coupled-input-behaviour",[ot(Jl(),c=>{RD(c,a,s).each(d=>{Rs(c,a,"lock").each(h=>{mo.isOn(h)&&a.onLockedChange(c,d,h),a.onInput(c)})})})])])})}),SB=re([CB("field1","field2"),CB("field2","field1"),Mi({factory:Ma,schema:[st("dom")],name:"lock",overrides:t=>({buttonBehaviours:Et([mo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),bU=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Al.augment(t.coupledFieldBehaviours,[Mo.config({find:M.some}),Jt.config({store:{mode:"manual",getValue:d=>{const h=zv(d,t,["field1","field2"]);return{[t.field1Name]:Jt.getValue(h.field1()),[t.field2Name]:Jt.getValue(h.field2())}},setValue:(d,h)=>{const b=zv(d,t,["field1","field2"]);Vr(h,t.field1Name)&&Jt.setValue(b.field1(),h[t.field1Name]),Vr(h,t.field2Name)&&Jt.setValue(b.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>Rs(d,t,"field1"),getField2:d=>Rs(d,t,"field2"),getLock:d=>Rs(d,t,"lock")}}),cu=rc({name:"FormCoupledInputs",configFields:pU(),partFields:SB(),factory:bU,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),vU=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},MD=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return Gn.value({value:c,unit:d})}else return Gn.error(t)},xB=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>go(a,d);return t.unit===s?M.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?M.some(t.value):M.some(t.value/a[t.unit]*a[s]):M.none()},ND=t=>M.none(),yU=(t,s)=>a=>xB(a,s).map(c=>({value:c*t,unit:s})),EB=(t,s)=>{const a=MD(t).toOptional(),c=MD(s).toOptional();return La(a,c,(d,h)=>xB(d,h.unit).map(b=>h.value/b).map(b=>yU(b,h.unit)).getOr(ND)).getOr(ND)},_B=(t,s)=>{let a=ND;const c=on("ratio-event"),d=ue=>Fu(ue,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ue]},s.icons),h=()=>!t.enabled||t.context.exists(ue=>s.checkUiComponentContext(ue).shouldDisable),b=t.context.map(ue=>ha(()=>s.checkUiComponentContext(ue))),S=t.label.getOr("Constrain proportions"),T=s.translate(S),D=cu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":T,"data-mce-name":S}},components:[d("lock"),d("unlock")],buttonBehaviours:Et([vn.config({disabled:h}),...b.toArray(),cr.config({}),kr.config(s.tooltips.getConfig({tooltipText:T}))])}),P=ue=>({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:ue}),F=ue=>Ho.parts.field({factory:Ef,inputClasses:t.inDialog?["tox-textfield"]:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:ue?t.width:t.height,inputBehaviours:Et([vn.config({disabled:h}),...b.toArray(),cr.config({}),Yn("size-input-events",[ot(fd(),(Te,Oe)=>{bn(Te,c,{isField1:ue})}),ot(Jf(),(Te,Oe)=>{t.name.each(ze=>bn(Te,Rl,{name:ze}))})]),...t.onEnter.map(Te=>Sn.config({mode:"special",onEnter:Te})).toArray()]),selectOnFocus:!1}),G=ue=>({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(ue))]}),J=cu.parts.field1(P([Ho.parts.label(G("Width")),F(!0)])),se=cu.parts.field2(P([Ho.parts.label(G("Height")),F(!1)])),ce=mn(de),De=La(t.onSetup,t.getApi,(ue,Te)=>[kf({onSetup:ue,getApi:Te},ce),Ni({getApi:Te},ce)]).getOr([]);return cu.sketch({dom:{tag:"div",classes:[t.inDialog?"tox-form__group":"tox-context-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[J,se,P([G(Bx),D])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ue,Te,Oe)=>{MD(Jt.getValue(ue)).each(ze=>{a(ze).each(We=>{Jt.setValue(Te,vU(We))})})},onInput:ue=>bo(ue,s6),coupledFieldBehaviours:Et([vn.config({disabled:h,onDisabled:ue=>{cu.getField1(ue).bind(Ho.getField).each(vn.disable),cu.getField2(ue).bind(Ho.getField).each(vn.disable),cu.getLock(ue).each(vn.disable)},onEnabled:ue=>{cu.getField1(ue).bind(Ho.getField).each(vn.enable),cu.getField2(ue).bind(Ho.getField).each(vn.enable),cu.getLock(ue).each(vn.enable)}}),ha(()=>s.checkUiComponentContext("mode:design")),Yn("size-input-events",[ot(c,(ue,Te)=>{const Oe=Te.event.isField1,ze=Oe?cu.getField1(ue):cu.getField2(ue),We=Oe?cu.getField2(ue):cu.getField1(ue),Mt=ze.map(Jt.getValue).getOr(""),tn=We.map(Jt.getValue).getOr("");a=EB(Mt,tn)}),ot(s6,ue=>{t.onInput.each(Te=>Te(ue))}),...De])])})},wU=(t,s)=>_B({inDialog:!0,label:t.label,enabled:t.enabled,context:M.some(t.context),name:M.some(t.name),width:"",height:"",onEnter:M.none(),onInput:M.none(),onSetup:M.none(),getApi:M.none()},s),TB=(t,s,a)=>{const c=Nd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(t.label))]}),d=Nd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=Nd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:re(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,h],sliderBehaviours:Et([lc.self(),$n.config({})]),onChoose:(b,S,T)=>{bn(b,Rl,{name:t.name,value:T})},onChange:(b,S,T)=>{bn(b,Rl,{name:t.name,value:T})}})},CU=(t,s)=>{const a=S=>({dom:{tag:"th",innerHtml:s.translate(S)}}),c=S=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:$e(S,a)}]}),d=S=>({dom:{tag:"td",innerHtml:s.translate(S)}}),h=S=>({dom:{tag:"tr"},components:$e(S,d)}),b=S=>({dom:{tag:"tbody"},components:$e(S,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),b(t.cells)],behaviours:Et([cr.config({}),$n.config({})])}},kB=(t,s)=>{const a=t.label.map(J=>mh(J,s)),c=[vn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),ha(()=>s.checkUiComponentContext(t.context)),Sn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:J=>(bo(J,CC),M.some(!0))}),Yn("textfield-change",[ot(Jl(),(J,se)=>{bn(J,Rl,{name:t.name})}),ot(np(),(J,se)=>{bn(J,Rl,{name:t.name})})]),cr.config({})],d=t.validation.map(J=>gh.config({getRoot:se=>bi(se.element),invalidClass:"tox-invalid",validator:{validate:se=>{const ce=Jt.getValue(se),De=J.validator(ce);return ic.pure(De===!0?Gn.value(ce):Gn.error(De))},validateOnLoad:J.validateOnLoad}})).toArray(),h=t.placeholder.fold(re({}),J=>({placeholder:s.translate(J)})),b=t.inputMode.fold(re({}),J=>({inputmode:J})),S={...h,...b,"data-mce-name":t.name},T=Ho.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(J=>({data:J})).getOr({}),inputAttributes:S,inputClasses:[t.classname],inputBehaviours:Et(dt([c,d])),selectOnFocus:!1,factory:Ef}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,F=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),G=[vn.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:J=>{Ho.getField(J).each(vn.disable)},onEnabled:J=>{Ho.getField(J).each(vn.enable)}}),ha(()=>s.checkUiComponentContext(t.context))];return yC(a,D,F,G)},SU=(t,s,a)=>kB({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:M.none(),maximized:t.maximized,data:a,context:t.context},s),AB=(t,s,a)=>kB({name:t.name,multiline:!0,label:t.label,inputMode:M.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:M.none(),maximized:t.maximized,data:a,context:t.context},s),PC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Mg=t=>t.dimension.property,Jb=(t,s)=>t.dimension.getDimension(s),IC=(t,s)=>{const a=PC(t,s);vd(a,[s.shrinkingClass,s.growingClass])},iT=(t,s)=>{mr(t.element,s.openClass),Lr(t.element,s.closedClass),It(t.element,Mg(s),"0px"),yi(t.element)},cT=(t,s)=>{mr(t.element,s.closedClass),Lr(t.element,s.openClass),uo(t.element,Mg(s))},BC=(t,s,a,c)=>{a.setCollapsed(),It(t.element,Mg(s),Jb(s,t.element)),IC(t,s),iT(t,s),s.onStartShrink(t),s.onShrunk(t)},xU=(t,s,a,c)=>{const d=c.getOrThunk(()=>Jb(s,t.element));a.setCollapsed(),It(t.element,Mg(s),d),yi(t.element);const h=PC(t,s);mr(h,s.growingClass),Lr(h,s.shrinkingClass),iT(t,s),s.onStartShrink(t)},OB=(t,s,a)=>{const c=Jb(s,t.element);(c==="0px"?BC:xU)(t,s,a,M.some(c))},DB=(t,s,a)=>{const c=PC(t,s),d=Sc(c,s.shrinkingClass),h=Jb(s,t.element);cT(t,s);const b=Jb(s,t.element);(d?()=>{It(t.element,Mg(s),h),yi(t.element)}:()=>{iT(t,s)})(),mr(c,s.shrinkingClass),Lr(c,s.growingClass),cT(t,s),It(t.element,Mg(s),b),a.setExpanded(),s.onStartGrow(t)},EU=(t,s,a)=>{if(a.isExpanded()){uo(t.element,Mg(s));const c=Jb(s,t.element);It(t.element,Mg(s),c)}},RB=(t,s,a)=>{a.isExpanded()||DB(t,s,a)},_U=(t,s,a)=>{a.isExpanded()&&OB(t,s,a)},TU=(t,s,a)=>{a.isExpanded()&&BC(t,s,a)},kU=(t,s,a)=>a.isExpanded(),MB=(t,s,a)=>a.isCollapsed(),PD=(t,s,a)=>{const c=PC(t,s);return Sc(c,s.growingClass)===!0},NB=(t,s,a)=>{const c=PC(t,s);return Sc(c,s.shrinkingClass)===!0};var OU=Object.freeze({__proto__:null,refresh:EU,grow:RB,shrink:_U,immediateShrink:TU,hasGrown:kU,hasShrunk:MB,isGrowing:PD,isShrinking:NB,isTransitioning:(t,s,a)=>PD(t,s)||NB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?OB:DB)(t,s,a)},disableTransitions:IC,immediateGrow:(t,s,a)=>{a.isExpanded()||(cT(t,s),It(t.element,Mg(s),Jb(s,t.element)),IC(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),PB=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Fc(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:as(s.dimension.property,"0px")})},events:(t,s)=>ms([Ym(tp(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(IC(a,t),s.isExpanded()&&uo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),IB=[st("closedClass"),st("openClass"),st("shrinkingClass"),st("growingClass"),Uo("getAnimationRoot"),Ao("onShrunk"),Ao("onStartShrink"),Ao("onGrown"),Ao("onStartGrow"),Pe("expanded",!1),qo("dimension",aa("property",{width:[tr("property","width"),tr("getDimension",t=>no(t)+"px")],height:[tr("property","height"),tr("getDimension",t=>xr(t)+"px")]}))],BB=Object.freeze({__proto__:null,init:t=>{const s=mn(t.expanded),a=()=>"expanded: "+s.get();return ui({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:en(s.set,!1),setExpanded:en(s.set,!0),readState:a})}});const cl=ya({fields:IB,name:"sliding",active:PB,apis:OU,state:BB}),RU=t=>({isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setActive:s=>{const a=t.element;s?(Lr(a,"tox-tbtn--enabled"),$t(a,"aria-pressed",!0)):(mr(a,"tox-tbtn--enabled"),ee(a,"aria-pressed"))},isActive:()=>Sc(t.element,"tox-tbtn--enabled"),setText:s=>{bn(t,zu,{text:s})},setIcon:s=>bn(t,Xb,{icon:s})}),Ng=(t,s,a,c,d=!0,h)=>TD({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(b,S)=>{const T={pattern:t.search.isSome()?Fz(b):""};t.fetch(D=>{S(xy(D,xf.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},T,RU(b))},onSetup:t.onSetup,getApi:RU,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[cr.config({})]:[]],context:t.context},s,a.shared,h),MU=(t,s,a)=>{const c=h=>b=>{const S=!b.isActive();b.setActive(S),h.storage.set(S),a.shared.getSink().each(T=>{s().getOpt(T).each(D=>{$c(D.element),bn(D,hh,{name:h.name,value:h.storage.get()})})})},d=h=>b=>{b.setActive(h.storage.get())};return h=>{h($e(t,b=>{const S=b.text.fold(()=>({}),T=>({text:T}));return{type:b.type,active:!1,...S,context:b.context,onAction:c(b),onSetup:d(b)}}))}},ID=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[nr(t)]}),LB=(t,s,a)=>{t.customStateIcon.each(c=>s.push(LD(c,a.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[kr.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},FB=on("leaf-label-event-id"),BD=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:h})=>{const b=t.menu.map(T=>Ng(T,"tox-mbtn",h,M.none(),a)),S=[ID(t.title)];return LB(t,S,h),b.each(T=>S.push(T)),Ma.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:S,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[Hi()]:[FB,"keying"]},buttonBehaviours:Et([...a?[cr.config({})]:[],mo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),el.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,D)=>{(D.value===t.id?mo.on:mo.off)(T)}}}}),Yn(FB,[er((T,D)=>{d.each(P=>{(P===t.id?mo.on:mo.off)(T)})}),ot(Hi(),(T,D)=>{const P=D.event.raw.code==="ArrowLeft",F=D.event.raw.code==="ArrowRight";P?(ua(T.element,".tox-tree--directory").each(G=>{T.getSystem().getByDom(G).each(J=>{nu(G,".tox-tree--directory__label").each(se=>{J.getSystem().getByDom(se).each($n.focus)})})}),D.stop()):F&&D.stop()})])])})},LD=(t,s,a,c,d)=>Fu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(c||[]),behaviours:a,attributes:d},s),FD=(t,s)=>LD(t,s,[]),$D=on("directory-label-event-id"),NU=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(S=>Ng(S,"tox-mbtn",c,M.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[FD("chevron-right",c.shared.providers.icons)]},ID(t.title)];LB(t,h,c),d.each(S=>{h.push(S)});const b=S=>{ua(S.element,".tox-tree--directory").each(T=>{S.getSystem().getByDom(T).each(D=>{const P=!mo.isOn(D);mo.toggle(D),bn(S,"expand-tree-node",{expanded:P,node:t.id})})})};return Ma.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:b,eventOrder:{[Hi()]:[$D,"keying"]},buttonBehaviours:Et([...s?[cr.config({})]:[],Yn($D,[ot(Hi(),(S,T)=>{const D=T.event.raw.code==="ArrowRight",P=T.event.raw.code==="ArrowLeft";D&&a&&T.stop(),(D||P)&&ua(S.element,".tox-tree--directory").each(F=>{S.getSystem().getByDom(F).each(G=>{!mo.isOn(G)&&D||mo.isOn(G)&&P?(b(S),T.stop()):P&&!mo.isOn(G)&&(ua(G.element,".tox-tree--directory").each(J=>{nu(J,".tox-tree--directory__label").each(se=>{G.getSystem().getByDom(se).each($n.focus)})}),T.stop())})})})])])})},PU=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:h,backstage:b})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(S=>S.type==="leaf"?BD({leaf:S,selectedId:h,onLeafAction:s,visible:a,treeId:c,backstage:b}):HD({directory:S,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:b})),behaviours:Et([cl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Wn.config({})])}),IU=on("directory-event-id"),HD=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:h,selectedId:b})=>{const{children:S}=t,T=mn(h),D=F=>S.map(G=>G.type==="leaf"?BD({leaf:G,selectedId:b,onLeafAction:s,visible:F,treeId:c,backstage:d}):HD({directory:G,expandedIds:T.get(),selectedId:b,onLeafAction:s,labelTabstopping:F,treeId:c,backstage:d})),P=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[NU({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),PU({children:S,expandedIds:h,selectedId:b,onLeafAction:s,visible:P,treeId:c,backstage:d})],behaviours:Et([Yn(IU,[er((F,G)=>{mo.set(F,P)}),ot("expand-tree-node",(F,G)=>{const{expanded:J,node:se}=G.event;T.set(J?[...T.get(),se]:T.get().filter(ce=>ce!==se))})]),mo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(F,G)=>{const J=F.components()[1],se=D(G);G?cl.grow(J):cl.shrink(J),Wn.set(J,se)}})])}},BU=on("tree-event-id"),LU=(t,s)=>{const a=t.onLeafAction.getOr(de),c=t.onToggleExpand.getOr(de),d=t.defaultExpandedIds,h=mn(d),b=mn(t.defaultSelectedId),S=on("tree-id"),T=(D,P)=>t.items.map(F=>F.type==="leaf"?BD({leaf:F,selectedId:D,onLeafAction:a,visible:!0,treeId:S,backstage:s}):HD({directory:F,selectedId:D,onLeafAction:a,expandedIds:P,labelTabstopping:!0,treeId:S,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(b.get(),h.get()),behaviours:Et([Sn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Yn(BU,[ot("expand-tree-node",(D,P)=>{const{expanded:F,node:G}=P.event;h.set(F?[...h.get(),G]:h.get().filter(J=>J!==G)),c(h.get(),{expanded:F,node:G})})]),el.config({channels:{[`update-active-item-${S}`]:{onReceive:(D,P)=>{b.set(M.some(P.value)),Wn.set(D,T(M.some(P.value),h.get()))}}}}),Wn.config({})])}};var FU=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return ms([ot(t.event,c),sf(()=>s.cancel())].concat(t.cancelEvent.map(d=>[ot(d,()=>s.cancel())]).getOr([])))}});const $B=t=>{const s=mn(null);return ui({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var HB=Object.freeze({__proto__:null,throttle:$B,init:t=>t.stream.streams.state(t)});const $U=(t,s)=>{const a=t.stream,c=bD(t.onStream,a.delay);return s.setTimer(c),(d,h)=>{c.throttle(d,h),a.stopEvent&&h.stop()}};var HU=[qo("stream",aa("mode",{throttle:[st("delay"),Pe("stopEvent",!0),tr("streams",{setup:$U,state:$B})]})),Pe("event","input"),Uo("cancelEvent"),Qm("onStream")];const zD=ya({fields:HU,name:"streaming",active:FU,state:HB}),uT=(t,s,a)=>{const c=Jt.getValue(a);Jt.setValue(s,c),VB(s)},zB=(t,s)=>{const a=t.element,c=Ou(a),d=a.dom;Vn(a,"type")!=="number"&&s(d,c)},VB=t=>{zB(t,(s,a)=>s.setSelectionRange(a.length,a.length))},zU=(t,s)=>{zB(t,(a,c)=>a.setSelectionRange(s,c.length))},VU=(t,s,a)=>{if(t.selectsOver){const c=Jt.getValue(s),d=t.getDisplayText(c),h=Jt.getValue(a);return t.getDisplayText(h).indexOf(d)===0?M.some(()=>{uT(t,s,a),zU(s,d.length)}):M.none()}else return M.none()},VD=re("alloy.typeahead.itemexecute"),UU=(t,s,a,c)=>{const d=(F,G,J)=>{t.previewing.set(!1);const se=qr.getCoupled(F,"sandbox");if(Po.isOpen(se))Mo.getCurrent(se).each(ce=>{ft.getHighlighted(ce).fold(()=>{J(ce)},()=>{E0(se,ce.element,"keydown",G)})});else{const ce=De=>{Mo.getCurrent(De).each(J)};D_(t,b(F),F,se,c,ce,ja.HighlightMenuAndItem).get(de)}},h=bP(t),b=F=>G=>G.map(J=>{const se=Zc(J.menus),ce=xe(se,ue=>to(ue.items,Te=>Te.type==="item"));return Jt.getState(F).update($e(ce,ue=>ue.data)),J}),S=F=>Mo.getCurrent(F),T="typeaheadevents",D=[$n.config({}),Jt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:F=>Ou(F.element),getFallbackEntry:F=>({value:F,meta:{}}),setValue:(F,G)=>{og(F.element,t.model.getDisplayText(G))},...t.initialData.map(F=>as("initialValue",F)).getOr({})}}),zD.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(F,G)=>{const J=qr.getCoupled(F,"sandbox");if($n.isFocused(F)&&Ou(F.element).length>=t.minChars){const ce=S(J).bind(ue=>ft.getHighlighted(ue).map(Jt.getValue));t.previewing.set(!0);const De=ue=>{S(J).each(Te=>{ce.fold(()=>{t.model.selectsOver&&ft.highlightFirst(Te)},Oe=>{ft.highlightBy(Te,ze=>Jt.getValue(ze).value===Oe.value),ft.getHighlighted(Te).orThunk(()=>(ft.highlightFirst(Te),M.none()))})})};D_(t,b(F),F,J,c,De,ja.HighlightJustMenu).get(de)}},cancelEvent:C0()}),Sn.config({mode:"special",onDown:(F,G)=>(d(F,G,ft.highlightFirst),M.some(!0)),onEscape:F=>{const G=qr.getCoupled(F,"sandbox");return Po.isOpen(G)?(Po.close(G),M.some(!0)):M.none()},onUp:(F,G)=>(d(F,G,ft.highlightLast),M.some(!0)),onEnter:F=>{const G=qr.getCoupled(F,"sandbox"),J=Po.isOpen(G);if(J&&!t.previewing.get())return S(G).bind(se=>ft.getHighlighted(se)).map(se=>(bn(F,VD(),{item:se}),!0));{const se=Jt.getValue(F);return bo(F,C0()),t.onExecute(G,F,se),J&&Po.close(G),M.some(!0)}}}),mo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),qr.config({others:{sandbox:F=>gy(t,F,{onOpen:()=>mo.on(F),onClose:()=>{t.lazyTypeaheadComp.get().each(G=>ee(G.element,"aria-activedescendant")),mo.off(F)}})}}),Yn(T,[er(F=>{t.lazyTypeaheadComp.set(M.some(F))}),sf(F=>{t.lazyTypeaheadComp.set(M.none())}),rf(F=>{const G=de;OO(t,b(F),F,c,G,ja.HighlightMenuAndItem).get(de)}),ot(VD(),(F,G)=>{const J=qr.getCoupled(F,"sandbox");uT(t.model,F,G.event.item),bo(F,C0()),t.onItemExecute(F,J,G.event.item,Jt.getValue(F)),Po.close(J),VB(F)})].concat(t.dismissOnBlur?[ot(qm(),F=>{const G=qr.getCoupled(F,"sandbox");tc(G.element).isNone()&&Po.close(G)})]:[]))],P={[Lc()]:[Jt.name(),zD.name(),T],...t.eventOrder};return{uid:t.uid,dom:vP(Bs(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...Fr(t.typeaheadBehaviours,D)},eventOrder:P}},WU=re([Uo("lazySink"),st("fetch"),Pe("minChars",5),Pe("responseTime",1e3),Ao("onOpen"),Pe("getHotspot",M.some),Pe("getAnchorOverrides",re({})),Pe("layouts",M.none()),Pe("eventOrder",{}),Z("model",{},[Pe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Pe("selectsOver",!0),Pe("populateFromBrowse",!0)]),Ao("onSetValue"),ec("onExecute"),Ao("onItemExecute"),Pe("inputClasses",[]),Pe("inputAttributes",{}),Pe("inputStyles",{}),Pe("matchWidth",!0),Pe("useMinWidth",!1),Pe("dismissOnBlur",!0),sm(["openClass"]),Uo("initialData"),Uo("listRole"),Za("typeaheadBehaviours",[$n,Jt,zD,Sn,mo,qr]),jo("lazyTypeaheadComp",()=>mn(M.none)),jo("previewing",()=>mn(!0))].concat(pP()).concat(py())),UB=re([ou({schema:[pp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{VU(t.model,d,c).fold(()=>{t.model.selectsOver?(ft.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&uT(t.model,d,c),ko(c.element,"id").each(h=>$t(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(bn(c,VD(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&uT(t.model,c,a)})}})})]),ZU=rc({name:"Typeahead",configFields:WU(),partFields:UB(),factory:UU}),Rf=t=>({...t,toCached:()=>Rf(t.toCached()),bindFuture:T=>Rf(t.bind(D=>D.fold(P=>ic.pure(Gn.error(P)),P=>T(P)))),bindResult:T=>Rf(t.map(D=>D.bind(T))),mapResult:T=>Rf(t.map(D=>D.map(T))),mapError:T=>Rf(t.map(D=>D.mapError(T))),foldResult:(T,D)=>t.map(P=>P.fold(T,D)),withTimeout:(T,D)=>Rf(ic.nu(P=>{let F=!1;const G=setTimeout(()=>{F=!0,P(Gn.error(D()))},T);t.get(J=>{F||(clearTimeout(G),P(J))})}))}),WB=t=>Rf(ic.nu(t)),ZB=t=>Rf(ic.pure(Gn.value(t))),jB={nu:WB,wrap:Rf,pure:ZB,value:ZB,error:t=>Rf(ic.pure(Gn.error(t))),fromResult:t=>Rf(ic.pure(t)),fromFuture:t=>Rf(t.map(Gn.value)),fromPromise:t=>WB(s=>{t.then(a=>{s(Gn.value(a))},a=>{s(Gn.error(a))})})},dT=(t,s,a=[],c,d,h,b)=>{const S=s.fold(()=>({}),P=>({action:P})),T={buttonBehaviours:Et([Dd.item(()=>!t.enabled||b.checkUiComponentContext(t.context).shouldDisable),ha(()=>b.checkUiComponentContext(t.context)),cr.config({}),...h.map(P=>kr.config(b.tooltips.getConfig({tooltipText:b.translate(P)}))).toArray(),Yn("button press",[c2("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...S},D=Bs(T,{dom:c});return Bs(D,{components:d})},qB=(t,s,a,c=[],d)=>{const h=t.tooltip.map(D=>({"aria-label":a.translate(D)})).getOr({}),b={tag:"button",classes:["tox-tbtn"],attributes:{...h,"data-mce-name":d}},S=t.icon.map(D=>NC(D,a.icons)),T=dy([S]);return dT(t,s,c,b,T,t.tooltip,a)},fT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},mT=(t,s,a,c=[],d=[])=>{const h=a.translate(t.text),b=t.icon.map(J=>NC(J,a.icons)),S=[b.getOrThunk(()=>nr(h))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),F={tag:"button",classes:[...fT(T),...b.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":h,"data-mce-name":t.text}},G=t.icon.map(re(h));return dT(t,s,c,F,S,G,a)},GB=(t,s,a,c=[],d=[])=>{const h=mT(t,M.some(s),a,c,d);return Ma.sketch(h)},UD=(t,s)=>a=>{s==="custom"?bn(a,hh,{name:t,value:{}}):s==="submit"?bo(a,CC):s==="cancel"?bo(a,Ag):console.error("Unknown button type: ",s)},KB=(t,s)=>s==="menu",qU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",YB=(t,s)=>s==="togglebutton",GU=(t,s,a)=>{var c,d;const h=t.icon.map(Oe=>l1(Oe,s.icons)).map(Jo),b=Oe=>{bn(Oe,hh,{name:t.name,value:{setIcon:ze=>{h.map(We=>We.getOpt(Oe).each(Mt=>{Wn.set(Mt,[l1(ze,s.icons)])}))}}})},S=t.buttonType.getOr(t.primary?"primary":"secondary"),T={...t,name:(c=t.name)!==null&&c!==void 0?c:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},D=T.tooltip.or(t.text).map(Oe=>({"aria-label":s.translate(Oe)})).getOr({}),P=fT(S??"secondary"),F=t.icon.isSome()&&t.text.isSome(),G={tag:"button",classes:[...P.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...F?["tox-button--icon-and-text"]:[]],attributes:{...D,...Ct(a)?{"data-mce-name":a}:{}}},J=[],se=s.translate(t.text.getOr("")),ce=nr(se),ue=[...dy([h.map(Oe=>Oe.asSpec())]),...t.text.isSome()?[ce]:[]],Te=dT(T,M.some(b),J,G,ue,t.tooltip,s);return Ma.sketch(Te)},hT=(t,s,a)=>{if(KB(t,s)){const c=()=>b,d=t,h={...t,type:"menubutton",search:M.none(),onSetup:S=>(S.setEnabled(t.enabled),de),fetch:MU(d.items,c,a)},b=Jo(Ng(h,"tox-tbtn",a,M.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return b.asSpec()}else if(qU(t,s)){const c=UD(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return GB(d,c,a.shared.providers,[])}else{if(YB(t,s))return GU(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},_m=(t,s)=>{const a=UD(t.name,"custom");return Qz(M.none(),Ho.parts.field({factory:Ma,...mT(t,M.some(a),s,[Yb(""),lc.self()])}))},gT={type:"separator"},pT=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:de}),WD=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:de}),ZD=t=>$e(t,pT),KU=(t,s)=>to(s,a=>a.type===t),bT=(t,s)=>ZD(KU(t,s)),XB=t=>bT("header",t.targets),jD=t=>bT("anchor",t.targets),YU=t=>M.from(t.anchorTop).map(s=>WD("<top>",s)).toArray(),XU=t=>M.from(t.anchorBottom).map(s=>WD("<bottom>",s)).toArray(),JB=t=>$e(t,s=>WD(s,s)),JU=t=>zo(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(gT,a),[]),qD=(t,s)=>{const a=t.toLowerCase();return to(s,c=>{var d;const h=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,b=(d=c.value)!==null&&d!==void 0?d:"";return wr(h.toLowerCase(),a)||wr(b.toLowerCase(),a)})},GD=(t,s,a)=>{var c,d;const h=Jt.getValue(s),b=(d=(c=h==null?void 0:h.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],T=>{const D=qD(b,JB(a.getHistory(t)));return t==="file"?JU([D,qD(b,XB(T)),qD(b,dt([YU(T),jD(T),XU(T)]))]):D})},QB=on("aria-invalid"),QU=(t,s,a,c)=>{const d=s.shared.providers,h=Te=>{const Oe=Jt.getValue(Te);a.addToHistory(Oe.value,t.filetype)},b={...c.map(Te=>({initialData:Te})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":QB,type:"url"},minChars:0,responseTime:0,fetch:Te=>{const Oe=GD(t.filetype,Te,a),ze=xy(Oe,xf.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:M.none()});return ic.pure(ze)},getHotspot:Te=>se.getOpt(Te),onSetValue:(Te,Oe)=>{Te.hasConfigured(gh)&&gh.run(Te).get(de)},typeaheadBehaviours:Et([...a.getValidationHandler().map(Te=>gh.config({getRoot:Oe=>bi(Oe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Oe,ze)=>{P.getOpt(Oe).each(We=>{$t(We.element,"title",d.translate(ze))})}},validator:{validate:Oe=>{const ze=Jt.getValue(Oe);return jB.nu(We=>{Te({type:t.filetype,url:ze.value},Mt=>{if(Mt.status==="invalid"){const tn=Gn.error(Mt.message);We(tn)}else{const tn=Gn.value(Mt.message);We(tn)}})})},validateOnLoad:!1}})).toArray(),vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),cr.config({}),Yn("urlinput-events",[ot(Jl(),Te=>{const Oe=Ou(Te.element),ze=Oe.trim();ze!==Oe&&og(Te.element,ze),t.filetype==="file"&&bn(Te,Rl,{name:t.name})}),ot(Jf(),Te=>{bn(Te,Rl,{name:t.name}),h(Te)}),ot(np(),Te=>{bn(Te,Rl,{name:t.name}),h(Te)})])]),eventOrder:{[Jl()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Te=>Te.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:eC(!1,1,"normal")},onExecute:(Te,Oe,ze)=>{bn(Oe,CC,{})},onItemExecute:(Te,Oe,ze,We)=>{h(Te),bn(Te,Rl,{name:t.name})}},S=Ho.parts.field({...b,factory:ZU}),T=t.label.map(Te=>mh(Te,d)),P=Jo(((Te,Oe,ze=Te,We=Te)=>Fu(ze,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Te],attributes:{title:d.translate(We),"aria-live":"polite",...Oe.fold(()=>({}),Mt=>({id:Mt}))}},d.icons))("invalid",M.some(QB),"warning")),F=Jo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[P.asSpec()]}),G=a.getUrlPicker(t.filetype),J=on("browser.url.event"),se=Jo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[S,F.asSpec()],behaviours:Et([vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),ce=Jo(GB({context:t.context,name:t.name,icon:M.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:M.none(),borderless:!0},Te=>bo(Te,J),d,[],["tox-browse-url"])),De=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:dt([[se.asSpec()],G.map(()=>ce.asSpec()).toArray()])}),ue=Te=>{Mo.getCurrent(Te).each(Oe=>{const ze=Jt.getValue(Oe),We={fieldname:t.name,...ze};G.each(Mt=>{Mt(We).get(tn=>{Jt.setValue(Oe,tn),bn(Te,Rl,{name:t.name})})})})};return Ho.sketch({dom:tV(),components:T.toArray().concat([De()]),fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:Te=>{Ho.getField(Te).each(vn.disable),ce.getOpt(Te).each(vn.disable)},onEnabled:Te=>{Ho.getField(Te).each(vn.enable),ce.getOpt(Te).each(vn.enable)}}),ha(()=>d.checkUiComponentContext(t.context)),Yn("url-input-events",[ot(J,ue)])])})},eL=(t,s)=>{const a=kA(t.icon,s.icons);return xm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Ma.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>bn(c,hh,{name:"alert-banner",value:t.url}),buttonBehaviours:Et([oP()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},tL=(t,s)=>{t.dom.checked=s},eW=t=>t.dom.checked,tW=(t,s,a)=>{const c=T=>(T.element.dom.click(),M.some(!0)),d=Ho.parts.field({factory:{sketch:Xt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Et([lc.self(),vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{bi(T.element).each(D=>Lr(D,"tox-checkbox--disabled"))},onEnabled:T=>{bi(T.element).each(D=>mr(D,"tox-checkbox--disabled"))}}),cr.config({}),$n.config({}),Q_(a,eW,tL),Sn.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),Yn("checkbox-events",[ot(Jf(),(T,D)=>{bn(T,Rl,{name:t.name})})])])}),h=Ho.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[nr(s.translate(t.label))],behaviours:Et([al.config({})])}),b=T=>Fu(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),S=Jo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[b("checked"),b("unchecked")]});return Ho.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,S.asSpec(),h],fieldBehaviours:Et([vn.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),ha(()=>s.checkUiComponentContext(t.context))])})},nW=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],c=Yn("htmlpanel",[er(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?xm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:Et([kr.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{ir(d.element,"[data-mce-tooltip]:hover").orThunk(()=>tc(d.element)).each(h=>{ko(h,"data-mce-tooltip").each(b=>{kr.setComponents(d,s.tooltips.getComponents({tooltipText:b}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:ir(d.element,"[data-mce-tooltip]:hover").orThunk(()=>tc(d.element).filter(h=>ko(h,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:re([da,za,wa,Da,Ca,ps]),onRtl:re([da,za,wa,Da,Ca,ps])},bubble:Du(0,-2,{})})}),c])}):xm.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Et([cr.config({}),$n.config({}),c])})},Ga=t=>(s,a,c,d,h)=>Tt(a,"name").fold(()=>t(a,d,M.none(),h),b=>s.field(b,t(a,d,Tt(c,b),h))),nL=t=>(s,a,c,d,h)=>{const b=Bs(a,{source:"dynamic"});return Ga(t)(s,b,c,d,h)},Pd={bar:Ga((t,s)=>t6(t,s.shared)),collection:Ga((t,s,a)=>nV(t,s.shared.providers,a)),alertbanner:Ga((t,s)=>eL(t,s.shared.providers)),input:Ga((t,s,a)=>SU(t,s.shared.providers,a)),textarea:Ga((t,s,a)=>AB(t,s.shared.providers,a)),label:Ga((t,s,a,c)=>iU(t,s.shared,c)),iframe:nL((t,s,a)=>oU(t,s.shared.providers,a)),button:Ga((t,s)=>_m(t,s.shared.providers)),checkbox:Ga((t,s,a)=>tW(t,s.shared.providers,a)),colorinput:Ga((t,s,a)=>rV(t,s.shared,s.colorinput,a)),colorpicker:Ga((t,s,a)=>jV(t,s.shared.providers,a)),dropzone:Ga((t,s,a)=>KV(t,s.shared.providers,a)),grid:Ga((t,s)=>YV(t,s.shared)),listbox:Ga((t,s,a)=>fU(t,s,a)),selectbox:Ga((t,s,a)=>gU(t,s.shared.providers,a)),sizeinput:Ga((t,s)=>wU(t,s.shared.providers)),slider:Ga((t,s,a)=>TB(t,s.shared.providers,a)),urlinput:Ga((t,s,a)=>QU(t,s,s.urlinput,a)),customeditor:Ga(GV),htmlpanel:Ga((t,s)=>nW(t,s.shared.providers)),imagepreview:Ga((t,s,a)=>ED(t,a)),table:Ga((t,s)=>CU(t,s.shared.providers)),tree:Ga((t,s)=>LU(t,s)),panel:Ga((t,s)=>mU(t,s))},KD={field:(t,s)=>s,record:re([])},oL=(t,s,a,c,d)=>{const h=Bs(c,{shared:{interpreter:b=>YD(t,b,a,h,d)}});return YD(t,s,a,h,d)},YD=(t,s,a,c,d)=>Tt(Pd,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),h=>h(t,s,a,c,d)),sL=(t,s,a,c)=>YD(KD,t,s,a,c),u1="layout-inset",XD=t=>t.x,JD=(t,s)=>t.x+t.width/2-s.width/2,vT=(t,s)=>t.x+t.width-s.width,rL=t=>t.y,aL=(t,s)=>t.y+t.height-s.height,Wi=(t,s)=>t.y+t.height/2-s.height/2,Ey=(t,s,a)=>Di(vT(t,s),aL(t,s),a.insetSouthwest(),O2(),"southwest",Ri(t,{right:0,bottom:3}),u1),yT=(t,s,a)=>Di(XD(t),aL(t,s),a.insetSoutheast(),A2(),"southeast",Ri(t,{left:1,bottom:3}),u1),d1=(t,s,a)=>Di(vT(t,s),rL(t),a.insetNorthwest(),k2(),"northwest",Ri(t,{right:0,top:2}),u1),LC=(t,s,a)=>Di(XD(t),rL(t),a.insetNortheast(),rv(),"northeast",Ri(t,{left:1,top:2}),u1),Mf=(t,s,a)=>Di(JD(t,s),rL(t),a.insetNorth(),lx(),"north",Ri(t,{top:2}),u1),FC=(t,s,a)=>Di(JD(t,s),aL(t,s),a.insetSouth(),ux(),"south",Ri(t,{bottom:3}),u1),iL=(t,s,a)=>Di(vT(t,s),Wi(t,s),a.insetEast(),fx(),"east",Ri(t,{right:0}),u1),cL=(t,s,a)=>Di(XD(t),Wi(t,s),a.insetWest(),dx(),"west",Ri(t,{left:1}),u1),oW=t=>{switch(t){case"north":return Mf;case"northeast":return LC;case"northwest":return d1;case"south":return FC;case"southeast":return yT;case"southwest":return Ey;case"east":return iL;case"west":return cL}},lL=(t,s,a,c,d)=>z2(c).map(oW).getOr(Mf)(t,s,a,c,d),sW=t=>{switch(t){case"north":return FC;case"northeast":return yT;case"northwest":return Ey;case"south":return Mf;case"southeast":return LC;case"southwest":return d1;case"east":return cL;case"west":return iL}},uL=(t,s,a,c,d)=>z2(c).map(sW).getOr(Mf)(t,s,a,c,d),f1={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},dL=(t,s,a)=>{const d={maxHeightFunction:Sp()},h=()=>({type:"node",root:Nr(br(t())),node:M.from(t()),bubble:Du(12,12,f1),layouts:{onRtl:()=>[LC],onLtr:()=>[d1]},overrides:d}),b=()=>({type:"hotspot",hotspot:s(),bubble:Du(-12,12,f1),layouts:{onRtl:()=>[wa,Ca,da],onLtr:()=>[Ca,wa,da]},overrides:d});return()=>a()?h():b()},QD=(t,s,a,c)=>{const h={maxHeightFunction:Sp()},b=()=>({type:"node",root:Nr(br(s())),node:M.from(s()),bubble:Du(12,12,f1),layouts:{onRtl:()=>[Mf],onLtr:()=>[Mf]},overrides:h}),S=()=>t?{type:"node",root:Nr(br(s())),node:M.from(s()),bubble:Du(0,-zl(s()),f1),layouts:{onRtl:()=>[za],onLtr:()=>[za]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:Du(0,0,f1),layouts:{onRtl:()=>[za],onLtr:()=>[za]},overrides:h};return()=>c()?b():S()},rW=(t,s,a)=>{const c=()=>({type:"node",root:Nr(br(t())),node:M.from(t()),layouts:{onRtl:()=>[Mf],onLtr:()=>[Mf]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[da],onLtr:()=>[da]}});return()=>a()?c():d()},fL=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],h=c[c.length-1],b={firstCell:Ke.fromDom(d),lastCell:Ke.fromDom(h)};return M.some(b)}return M.some(Tp.range(Ke.fromDom(a.startContainer),a.startOffset,Ke.fromDom(a.endContainer),a.endOffset))}}),aW=t=>s=>({type:"node",root:t(),node:s}),iW=(t,s,a,c)=>{const d=Cf(t),h=()=>Ke.fromDom(t.getBody()),b=()=>Ke.fromDom(t.getContentAreaContainer()),S=()=>d||!c();return{inlineDialog:dL(b,s,S),inlineBottomDialog:QD(t.inline,b,a,S),banner:rW(b,s,S),cursor:fL(t,h),node:aW(h)}},mL=t=>(s,a)=>{AI(t)(s,a)},YY=t=>()=>qa(t),XY=t=>s=>Rd(t,s),hL=t=>s=>A_(t,s),cW=t=>({colorPicker:mL(t),hasCustomColors:YY(t),getColors:XY(t),getColorCols:hL(t)}),lW=t=>()=>NN(t),gL=t=>({isDraggableModal:lW(t)}),eR=t=>{const s=mn(uA(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},pL=t=>Vr(t,"items"),bL=t=>Vr(t,"format"),tR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],uW=t=>go(t,"items"),dW=t=>go(t,"block"),fW=t=>go(t,"inline"),mW=t=>go(t,"selector"),$C=t=>zo(t,(s,a)=>{if(uW(a)){const c=$C(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(fW(a)||dW(a)||mW(a)){const d=`custom-${j(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),nR=(t,s)=>{const a=$C(s),c=d=>{gt(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},vL=t=>eA(t).map(s=>{const a=nR(t,s);return tA(t)?tR.concat(a):a}).getOr(tR),hW=t=>{const s=xs(t);return s.length===1&&yt(s,"title")},yL=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),wL=(t,s,a,c)=>{const d=T=>yL(T,a,c),h=T=>{const D=S(T.items);return{...T,type:"submenu",getStyleItems:re(D)}},b=T=>{const D=j(T.name)?T.name:on(T.title),P=`custom-${D}`,F={...T,type:"formatter",format:P,isSelected:a(P),getStylePreview:c(P)};return t.formatter.register(D,F),F},S=T=>$e(T,D=>pL(D)?h(D):bL(D)?d(D):hW(D)?{...D,type:"separator"}:b(D));return S(s)},gW=t=>{const s=S=>()=>t.formatter.match(S),a=S=>()=>{const T=t.formatter.get(S);return T!==void 0?M.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(S))}):M.none()},c=mn([]),d=mn([]),h=mn(!1);return t.on("PreInit",S=>{const T=vL(t),D=wL(t,T,s,a);c.set(D)}),t.on("addStyleModifications",S=>{const T=wL(t,S.items,s,a);d.set(T),h.set(S.replace)}),{getData:()=>{const S=h.get()?[]:c.get(),T=d.get();return S.concat(T)}}},pW=t=>{let c=0;const d=()=>c>0,h=S=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[nr(S.tooltipText)]}];return{getConfig:S=>({delayForShow:()=>d()?60:300,delayForHide:re(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:h(S),onShow:(T,D)=>{c++,S.onShow&&S.onShow(T,D)},onHide:(T,D)=>{c--,S.onHide&&S.onHide(T,D)},onSetup:S.onSetup}),getComponents:h}},oR=t=>Ct(t)&&t.nodeType===1,bW=Rg.trim,HC=t=>s=>!!(oR(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),vW=HC("true"),_y=HC("false"),CL=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),sR=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return vW(s)}return!1},Ty=(t,s)=>$e(Tc(Ke.fromDom(s),t),a=>a.dom),rR=t=>t.innerText||t.textContent,SL=t=>t.id?t.id:on("h"),aR=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,xL=t=>aR(t)&&iR(t),wT=t=>t&&/^(H[1-6])$/.test(t.nodeName),iR=t=>sR(t)&&!_y(t),EL=t=>wT(t)&&iR(t),cR=t=>wT(t)?parseInt(t.nodeName.substr(1),10):0,Qb=t=>{var s;const a=SL(t),c=()=>{t.id=a};return CL("header",(s=rR(t))!==null&&s!==void 0?s:"","#"+a,cR(t),c)},yW=t=>{const s=t.id||t.name,a=rR(t);return CL("anchor",a||"#"+s,"#"+s,0,de)},wW=t=>$e(to(t,EL),Qb),ky=t=>$e(to(t,xL),yW),_L=t=>Ty("h1,h2,h3,h4,h5,h6,a:not([href])",t),CT=t=>bW(t.title).length>0,lR={find:t=>{const s=_L(t);return to(wW(s).concat(ky(s)),CT)}},Nf="tinymce-url-history",TL=5,kL=t=>j(t)&&/^https?/.test(t),SW=t=>Ce(t)&&t.length<=TL&&Oo(t,kL),ST=t=>le(t)&&ts(t,s=>!SW(s)).isNone(),AL=()=>{const t=Tg.getItem(Nf);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Nf+" was not valid JSON",a),{};throw a}return ST(s)?s:(console.log("Local storage "+Nf+" was not valid format",s),{})},xW=t=>{if(!ST(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Tg.setItem(Nf,JSON.stringify(t))},EW=t=>{const s=AL();return Tt(s,t).getOr([])},_W=(t,s)=>{if(!kL(t))return;const a=AL(),c=Tt(a,s).getOr([]),d=to(c,h=>h!==t);a[s]=[t].concat(d).slice(0,TL),xW(a)},OL=t=>!!t,TW=t=>Ko(Rg.makeMap(t,/[, ]/),OL),uR=t=>M.from(DN(t)),DL=t=>{const s=M.from(MN(t)).filter(OL).map(TW);return uR(t).fold(at,a=>s.fold(it,c=>xs(c).length>0?c:!1))},kW=(t,s)=>{const a=DL(t);return Lt(a)?a?uR(t):M.none():a[s]?uR(t):M.none()},zC=(t,s)=>kW(t,s).map(a=>c=>ic.nu(d=>{const h=(S,T)=>{if(!j(S))throw new Error("Expected value to be string");if(T!==void 0&&!le(T))throw new Error("Expected meta to be a object");d({value:S,meta:T})},b={filetype:s,fieldname:c.fieldname,...M.from(c.meta).getOr({})};a.call(t,h,c.value,b)})),RL=t=>M.from(t).filter(j).getOrUndefined(),AW=t=>ZE(t)?M.some({targets:lR.find(t.getBody()),anchorTop:RL(rA(t)),anchorBottom:RL(aA(t))}):M.none(),dR=t=>M.from(sA(t)),ML=t=>({getHistory:EW,addToHistory:_W,getLinkInformation:()=>AW(t),getValidationHandler:()=>dR(t),getUrlPicker:s=>zC(t,s)}),xT=(t,s,a,c)=>{const d=mn(!1),h=eR(s),b={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:kd.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:pW(t.dialog),checkUiComponentContext:ue=>{if(zE(s))return{contextType:"disabled",shouldDisable:!0};const[Te,Oe=""]=ue.split(":"),ze=s.ui.registry.getAll().contexts,We=Tt(ze,Te).fold(()=>Tt(ze,"mode").map(Mt=>Mt("design")).getOr(!1),Mt=>Oe.charAt(0)==="!"?!Mt(Oe.slice(1)):Mt(Oe));return{contextType:Te,shouldDisable:!We}}},S=ML(s),T=gW(s),D=cW(s),P=gL(s),F=()=>d.get(),G=ue=>d.set(ue),J={shared:{providers:b,anchors:iW(s,a,c,h.isPositionedAtTop),header:h},urlinput:S,styles:T,colorinput:D,dialog:P,isContextMenuOpen:F,setContextMenuState:G},se=ue=>M.none(),ce={...J,shared:{...J.shared,interpreter:ue=>sL(ue,{},ce,se),getSink:t.popup}},De={...J,shared:{...J.shared,interpreter:ue=>sL(ue,{},De,se),getSink:t.dialog}};return{popup:ce,dialog:De}},OW=(t,s,a)=>{const c=(nt,an)=>{gt([s,...a],Vt=>{Vt.broadcastEvent(nt,an)})},d=(nt,an)=>{gt([s,...a],Vt=>{Vt.broadcastOn([nt],an)})},h=nt=>d(dm(),{target:nt.target}),b=qd(),S=nc(b,"touchstart",h),T=nc(b,"touchmove",nt=>c(CS(),nt)),D=nc(b,"touchend",nt=>c(N1(),nt)),P=nc(b,"mousedown",h),F=nc(b,"mouseup",nt=>{nt.raw.button===0&&d(Mv(),{target:nt.target})}),G=nt=>d(dm(),{target:Ke.fromDom(nt.target)}),J=nt=>{nt.button===0&&d(Mv(),{target:Ke.fromDom(nt.target)})},se=()=>{gt(t.editorManager.get(),nt=>{t!==nt&&nt.dispatch("DismissPopups",{relatedTarget:t})})},ce=nt=>c(P1(),xx(nt)),De=nt=>{d(hg(),{}),c(Qf(),xx(nt))},ue=br(Ke.fromDom(t.getElement())),Te=U2(ue,"scroll",nt=>{requestAnimationFrame(()=>{const an=t.getContainer();if(an!=null){const dn=e1(t,s.element).map(wo=>[wo.element,...wo.others]).getOr([]);Mn(dn,wo=>So(wo,nt.target))&&(t.dispatch("ElementScroll",{target:nt.target.dom}),c(SS(),nt))}})}),Oe=()=>d(hg(),{}),ze=nt=>{nt.state&&d(dm(),{target:Ke.fromDom(t.getContainer())})},We=nt=>{d(dm(),{target:Ke.fromDom(nt.relatedTarget.getContainer())})},Mt=nt=>t.dispatch("focusin",nt),tn=nt=>t.dispatch("focusout",nt);t.on("PostRender",()=>{t.on("click",G),t.on("tap",G),t.on("mouseup",J),t.on("mousedown",se),t.on("ScrollWindow",ce),t.on("ResizeWindow",De),t.on("ResizeEditor",Oe),t.on("AfterProgressState",ze),t.on("DismissPopups",We),gt([s,...a],nt=>{nt.element.dom.addEventListener("focusin",Mt),nt.element.dom.addEventListener("focusout",tn)})}),t.on("remove",()=>{t.off("click",G),t.off("tap",G),t.off("mouseup",J),t.off("mousedown",se),t.off("ScrollWindow",ce),t.off("ResizeWindow",De),t.off("ResizeEditor",Oe),t.off("AfterProgressState",ze),t.off("DismissPopups",We),gt([s,...a],nt=>{nt.element.dom.removeEventListener("focusin",Mt),nt.element.dom.removeEventListener("focusout",tn)}),P.unbind(),S.unbind(),T.unbind(),D.unbind(),F.unbind(),Te.unbind()}),t.on("detach",()=>{gt([s,...a],Mu),gt([s,...a],nt=>nt.destroy())})},fi=u3,vh=$p,DW=re([Pe("shell",!1),st("makeItem"),Pe("setupItem",de),Al.field("listBehaviours",[Wn])]),fR=zc({name:"items",overrides:()=>({behaviours:Et([Wn.config({})])})}),RW=re([fR]),MW=re("CustomList"),NW=(t,s,a,c)=>{const d=(S,T)=>{b(S).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},D=>{const P=Wn.contents(D),F=T.length,G=F-P.length,J=G>0?fn(G,()=>t.makeItem()):[],se=P.slice(F);gt(se,De=>Wn.remove(D,De)),gt(J,De=>Wn.append(D,De));const ce=Wn.contents(D);gt(ce,(De,ue)=>{t.setupItem(S,De,T[ue],ue)})})},h=t.shell?{behaviours:[Wn.config({})],components:[]}:{behaviours:[],components:s},b=S=>t.shell?M.some(S):Rs(S,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Fr(t.listBehaviours,h.behaviours),apis:{setItems:d}}},NL=rc({name:MW(),configFields:DW(),partFields:RW(),factory:NW,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Ay=re([st("dom"),Pe("shell",!0),Za("toolbarBehaviours",[Wn])]),eX=re([zc({name:"groups",overrides:()=>({behaviours:Et([Wn.config({})])})})]),PW=(t,s,a,c)=>{const d=(S,T)=>{h(S).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},D=>{Wn.set(D,T)})},h=S=>t.shell?M.some(S):Rs(S,t,"groups"),b=t.shell?{behaviours:[Wn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:b.components,behaviours:Fr(t.toolbarBehaviours,b.behaviours),apis:{setGroups:d,refresh:de},domModification:{attributes:{role:"group"}}}},Pf=rc({name:"Toolbar",configFields:Ay(),partFields:eX(),factory:PW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),PL=de,ET=at,mR=re([]);var IW=Object.freeze({__proto__:null,setup:PL,isDocked:ET,getBehaviours:mR});const hR=re(on("toolbar-height-change")),yh={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},IL="tox-tinymce--toolbar-sticky-on",BL="tox-tinymce--toolbar-sticky-off",BW=(t,s)=>{const a=Us(s),d=Ic(s).dom.innerHeight,h=ri(a),b=Ke.fromDom(t.elm),S=Ki(b),T=xr(b),D=S.y,P=D+T,F=_a(s),G=xr(s),J=F.top,se=J+G,ce=Math.abs(J-h.top)<2,De=Math.abs(se-(h.top+d))<2;if(ce&&D<se)rd(h.left,D-G,a);else if(De&&P>J){const ue=D-d+T+G;rd(h.left,ue,a)}},_T=(t,s)=>yt(js.getModes(t),s),TT=t=>{const s=c=>zl(c)+(parseInt(ut(c,"margin-top"),10)||0)+(parseInt(ut(c,"margin-bottom"),10)||0),a=t.element;bi(a).each(c=>{const d="padding-"+js.getModes(t)[0];if(js.isDocked(t)){const h=no(c);It(a,"width",h+"px"),It(c,d,s(a)+"px")}else uo(a,"width"),uo(c,d)})},gR=(t,s)=>{s?(mr(t,yh.fadeOutClass),cp(t,[yh.transitionClass,yh.fadeInClass])):(mr(t,yh.fadeInClass),cp(t,[yh.fadeOutClass,yh.transitionClass]))},LL=(t,s)=>{const a=Ke.fromDom(t.getContainer());s?(Lr(a,IL),mr(a,BL)):(Lr(a,BL),mr(a,IL))},FL=(t,s)=>{const a=Us(s);cm(a).filter(c=>!So(s,c)).filter(c=>So(c,Ke.fromDom(a.dom.body))||Pc(t,c)).each(()=>$c(s))},LW=(t,s)=>tc(t).orThunk(()=>s().toOptional().bind(a=>tc(a.element))),FW=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(js.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(TT)}),t.on("SkinLoaded",()=>{a().each(c=>{js.isDocked(c)?js.reset(c):js.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(js.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{js.refresh(d);const h=d.element;Dw(h)&&BW(c,h)})}),t.on("PostRender",()=>{LL(t,!1)})},$W=t=>t().map(js.isDocked).getOr(!1),e0=()=>[el.config({channels:{[hR()]:{onReceive:TT}}})],pR=(t,s)=>{const a=Xo(),c=s.getSink,d=S=>{c().each(T=>S(T.element))},h=S=>{t.inline||TT(S),LL(t,js.isDocked(S)),S.getSystem().broadcastOn([hg()],{}),c().each(T=>T.getSystem().broadcastOn([hg()],{}))},b=t.inline?[]:e0();return[$n.config({}),js.config({contextual:{lazyContext:S=>{const T=zl(S.element),D=t.inline?t.getContentAreaContainer():t.getContainer();return M.from(D).map(P=>{const F=Pr(Ke.fromDom(P));return e1(t,S.element).fold(()=>{const J=F.height-T,se=F.y+(_T(S,"top")?0:T);return fr(F.x,se,F.width,J)},J=>{const se=Gd(F,t1(J)),ce=_T(S,"top")?se.y:se.y+T;return fr(se.x,ce,se.width,se.height-T)})})},onShow:()=>{d(S=>gR(S,!0))},onShown:S=>{d(T=>vd(T,[yh.transitionClass,yh.fadeInClass])),a.get().each(T=>{FL(S.element,T),a.clear()})},onHide:S=>{LW(S.element,c).fold(a.clear,a.set),d(T=>gR(T,!1))},onHidden:()=>{d(S=>vd(S,[yh.transitionClass]))},...yh},lazyViewport:S=>e1(t,S.element).fold(()=>{const D=ea(),P=oA(t),F=D.y+(_T(S,"top")&&!hA(t)?P:0),G=D.height-(_T(S,"bottom")?P:0);return{bounds:fr(D.x,F,D.width,G),optScrollEnv:M.none()}},D=>({bounds:t1(D),optScrollEnv:M.some({currentScrollTop:D.element.dom.scrollTop,scrollElmTop:_a(D.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...b]};var VC=Object.freeze({__proto__:null,setup:FW,isDocked:$W,getBehaviours:pR});const kT=t=>{const s=t.editor,a=t.sticky?pR:mR;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Et(a(s,t.sharedBackstage))}},$L=Fn([ma,qo("items",Qd([Xg([FA,wc("items",Ut)]),Ut]))].concat(iy)),HL=t=>ar("GroupToolbarButton",$L,t),zL=[hr("text"),hr("tooltip"),hr("icon"),Zs("search",!1,Qd([xl,Fn([hr("placeholder")])],t=>Lt(t)?t?M.some({placeholder:M.none()}):M.none():M.some(t))),_l("fetch"),os("onSetup",()=>de),Ls("context","mode:design")],HW=Fn([ma,...zL]),VL=t=>ar("menubutton",HW,t),zW=Fn([ma,ry,$u,r1,l9,HA,s1,li("presets","normal",["normal","color","listpreview"]),DP(1),sy,i9,Ls("context","mode:design")]),VW=t=>ar("SplitButton",zW,t);var bR=ol({factory:(t,s)=>{const a=(d,h)=>{const b=$e(h,S=>{const T={type:"menubutton",text:S.text,fetch:P=>{P(S.getItems())},context:"any"},D=VL(T).mapError(P=>Gl(P)).getOrDie();return Ng(D,"tox-mbtn",s.backstage,M.some("menuitem"))});Wn.set(d,b)},c={focus:Sn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Et([Wn.config({}),Yn("menubar-events",[er(d=>{t.onSetup(d)}),ot(dd(),(d,h)=>{ir(d.element,".tox-mbtn--active").each(b=>{Sd(h.event.target,".tox-mbtn").each(S=>{So(b,S)||d.getSystem().getByDom(b).each(T=>{d.getSystem().getByDom(S).each(D=>{Hu.expand(D),Hu.close(T),$n.focus(D)})})})})}),ot(I1(),(d,h)=>{h.event.prevFocus.bind(b=>d.getSystem().getByDom(b).toOptional()).each(b=>{h.event.newFocus.bind(S=>d.getSystem().getByDom(S).toOptional()).each(S=>{Hu.isOpen(b)&&(Hu.expand(S),Hu.close(b))})})})]),Sn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),M.some(!0))}),cr.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[st("dom"),st("uid"),st("onEscape"),st("backstage"),Pe("onSetup",de)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const Oy="⚡️Upgrade",UC="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",vR=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:UC,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Oy}}]}),UL="container",UW=[Za("slotBehaviours",[])],AT=t=>"<alloy.field."+t+">",WW=t=>{const s=(()=>{const h=[];return{slot:(S,T)=>(h.push(S),Cw(UL,AT(S),T)),record:re(h)}})(),a=t(s),c=s.record(),d=$e(c,h=>Mi({name:h,pname:AT(h)}));return _b(UL,UW,d,WC,a)},WC=(t,s)=>{const a=ce=>Tw(t),c=(ce,De)=>Rs(ce,t,De),d=(ce,De)=>(ue,Te)=>Rs(ue,t,Te).map(Oe=>ce(Oe,Te)).getOr(De),h=ce=>(De,ue)=>{gt(ue,Te=>ce(De,Te))},b=(ce,De)=>Vn(ce.element,"aria-hidden")!=="true",S=(ce,De)=>{if(!b(ce)){const ue=ce.element;uo(ue,"display"),ee(ue,"aria-hidden"),bn(ce,op(),{name:De,visible:!0})}},T=(ce,De)=>{if(b(ce)){const ue=ce.element;It(ue,"display","none"),$t(ue,"aria-hidden","true"),bn(ce,op(),{name:De,visible:!1})}},D=d(b,!1),P=d(T),F=h(P),G=ce=>F(ce,a()),J=d(S),se={getSlotNames:a,getSlot:c,isShowing:D,hideSlot:P,hideAllSlots:G,showSlot:J};return{uid:t.uid,dom:t.dom,components:s,behaviours:vb(t.slotBehaviours),apis:se}},Oc={...Ko({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>G0(t)),sketch:WW},jW=Fn([$u,ry,os("onShow",de),os("onHide",de),s1]),qW=t=>ar("sidebar",jW,t),GW=t=>{const{sidebars:s}=t.ui.registry.getAll();gt(xs(s),a=>{const c=s[a],d=()=>Ur(M.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const b=()=>h.setActive(d());return t.on("ToggleSidebar",b),()=>{t.off("ToggleSidebar",b)}},context:"any"})})},KW=t=>({element:()=>t.element.dom}),YW=(t,s)=>{const a=$e(xs(s),c=>{const d=s[c],h=bt(qW(d));return{name:c,getApi:KW,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return $e(a,c=>{const d=mn(de);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:$b.unnamedEvents([kf(c,d),Ni(c,d),ot(op(),(h,b)=>{const S=b.event;et(a,D=>D.name===S.name).each(D=>{(S.visible?D.onShow:D.onHide)(D.getApi(h))})})])})})},WL=t=>Oc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:YW(s,t),slotBehaviours:$b.unnamedEvents([er(a=>Oc.hideAllSlots(a))])})),ZL=(t,s,a)=>{Mo.getCurrent(t).each(d=>{Wn.set(d,[WL(s)]);const h=a==null?void 0:a.toLowerCase();j(h)&&go(s,h)&&Mo.getCurrent(d).each(b=>{Oc.showSlot(b,h),cl.immediateGrow(d),uo(d.element,"width"),Dy(t.element,"region")})})},Dy=(t,s)=>{$t(t,"role",s)},XW=(t,s)=>{Mo.getCurrent(t).each(c=>{Mo.getCurrent(c).each(h=>{cl.hasGrown(c)?Oc.isShowing(h,s)?(cl.shrink(c),Dy(t.element,"presentation")):(Oc.hideAllSlots(h),Oc.showSlot(h,s),Dy(t.element,"region")):(Oc.hideAllSlots(h),Oc.showSlot(h,s),cl.grow(c),Dy(t.element,"region"))})})},OT=t=>Mo.getCurrent(t).bind(a=>cl.isGrowing(a)||cl.hasGrown(a)?Mo.getCurrent(a).bind(h=>et(Oc.getSlotNames(h),b=>Oc.isShowing(h,b))):M.none()),Ry=on("FixSizeEvent"),DT=on("AutoSizeEvent"),JW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Et([cr.config({}),$n.config({}),cl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Mo.getCurrent(s).each(Oc.hideAllSlots),bo(s,DT)},onGrown:s=>{bo(s,DT)},onStartGrow:s=>{bn(s,Ry,{width:fs(s.element,"width").getOr("")})},onStartShrink:s=>{bn(s,Ry,{width:no(s.element)+"px"})}}),Wn.config({}),Mo.config({find:s=>{const a=Wn.contents(s);return zs(a)}})])}],behaviours:Et([lc.childAt(0),Yn("sidebar-sliding-events",[ot(Ry,(s,a)=>{It(s.element,"width",a.event.width)}),ot(DT,(s,a)=>{uo(s.element,"width")})])])});var yR=Object.freeze({__proto__:null,block:(t,s,a,c)=>{$t(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=Et([Sn.config({mode:"special",onTab:()=>M.some(!0),onShiftTab:()=>M.some(!0)}),$n.config({})]),b=c(d,h),S=d.getSystem().build(b);Wn.append(d,Tl(S)),S.hasConfigured(Sn)&&s.focus&&Sn.focusIn(S),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Wn.remove(d,S))},unblock:(t,s,a)=>{ee(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),QW=[os("getRoot",M.none),Aa("focus",!0),Ao("onBlock"),Ao("onUnblock")],eZ=Object.freeze({__proto__:null,init:()=>{const t=yl(),s=a=>{t.set({destroy:a})};return ui({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Id=ya({fields:QW,name:"blocking",apis:yR,state:eZ}),tZ=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ym('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),qL=t=>Mo.getCurrent(t).each(s=>$c(s.element,!0)),nZ=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;M.from(t.iframeElement).map(Ke.fromDom).each(d=>{s?(ko(d,a).each(h=>$t(d,c,h)),$t(d,a,-1)):(ee(d,a),ko(d,c).each(h=>{$t(d,a,h),ee(d,c)}))})},oZ=(t,s,a,c)=>{const d=s.element;if(nZ(t,a),a)Id.block(s,tZ(c)),uo(d,"display"),ee(d,"aria-hidden"),t.hasFocus()&&qL(s);else{const h=Mo.getCurrent(s).exists(b=>hf(b.element));Id.unblock(s),It(d,"display","none"),$t(d,"aria-hidden","true"),h&&t.focus()}},sZ=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Et([Wn.config({}),Id.config({focus:!1}),Mo.config({find:s=>zs(s.components())})]),components:[]}),rX=t=>t.type==="focusin",aX=t=>rX(t)?(t.composed?zs(t.composedPath()):M.from(t.target)).map(Ke.fromDom).filter(lr).exists(a=>Sc(a,"mce-pastebin")):!1,GL=(t,s,a)=>{const c=mn(!1),d=Xo(),h=S=>{c.get()&&!aX(S)&&(S.preventDefault(),qL(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",S=>{S.command.toLowerCase()==="mcefocus"&&S.value!==!0&&h(S)})});const b=S=>{S!==c.get()&&(c.set(S),oZ(t,s(),S,a.providers),dI(t,S))};t.on("ProgressState",S=>{if(d.on(clearTimeout),ln(S.time)){const T=FE.setEditorTimeout(t,()=>b(S.state),S.time);d.set(T)}else b(S.state),d.clear()})},rZ=(t,s)=>zo(t,(d,h)=>s(h,d.len).fold(re(d),S=>({len:S.finish,list:d.list.concat([S])})),{len:0,list:[]}).list,RT=(t,s,a)=>({within:t,extra:s,withinWidth:a}),KL=(t,s,a)=>{const c=rZ(t,(S,T)=>{const D=a(S);return M.some({element:S,start:T,finish:T+D,width:D})}),d=to(c,S=>S.finish<=s),h=To(d,(S,T)=>S+T.width,0),b=c.slice(d.length);return{within:d,extra:b,withinWidth:h}},MT=t=>$e(t,s=>s.element),aZ=(t,s,a)=>{const c=MT(t.concat(s));return RT(c,[],a)},iZ=(t,s,a,c)=>{const d=MT(t).concat([a]);return RT(d,MT(s),c)},cZ=(t,s,a)=>RT(MT(t),[],a),YL=(t,s,a)=>{const c=KL(s,t,a);return c.extra.length===0?M.some(c):M.none()},lZ=(t,s,a,c)=>{const d=YL(t,s,a).getOrThunk(()=>KL(s,t-a(c),a)),h=d.within,b=d.extra,S=d.withinWidth;return b.length===1&&b[0].width<=a(c)?aZ(h,b,S):b.length>=1?iZ(h,b,c,S):cZ(h,b,S)},XL=(t,s)=>{const a=$e(s,c=>Tl(c));Pf.setGroups(t,a)},uZ=t=>Ss(t,s=>tc(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),dZ=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=nl(t,s,"primary"),h=qr.getCoupled(t,"overflowGroup");It(d.element,"visibility","hidden");const b=c.concat([h]),S=uZ(b);a([]),XL(d,b);const T=no(d.element),D=lZ(T,s.builtGroups.get(),P=>Math.ceil(P.element.dom.getBoundingClientRect().width),h);D.extra.length===0?(Wn.remove(d,h),a([])):(XL(d,D.within),a(D.extra)),uo(d.element,"visibility"),yi(d.element),S.each($n.focus)},fZ=re([Za("splitToolbarBehaviours",[qr]),jo("builtGroups",()=>mn([]))]),JL=re([sm(["overflowToggledClass"]),cd("getOverflowBounds"),st("lazySink"),jo("overflowGroups",()=>mn([])),Ao("onOpened"),Ao("onClosed")].concat(fZ())),QL=re([Mi({factory:Pf,schema:Ay(),name:"primary"}),ou({schema:Ay(),name:"overflow"}),ou({name:"overflow-button"}),ou({name:"overflow-group"})]),wR=re((t,s)=>{Ul(t,Math.floor(s))}),mZ=re([sm(["toggledClass"]),st("lazySink"),_l("fetch"),cd("getBounds"),jr("fireDismissalEventInstead",[Pe("event",hd())]),ch(),Ao("onToggled")]),Vu=re([ou({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Et([mo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),ou({factory:Pf,schema:Ay(),name:"toolbar",overrides:t=>({toolbarBehaviours:Et([Sn.config({mode:"cyclic",onEscape:s=>(Rs(s,t,"button").each($n.focus),M.none())})])})})]),NT=Xo(),e8=(t,s)=>{NT.set(!0),PT(t,s),NT.clear()},PT=(t,s)=>{const a=qr.getCoupled(t,"toolbarSandbox");Po.isOpen(a)?Po.close(a):Po.open(a,s.toolbar())},CR=(t,s,a,c)=>{const d=a.getBounds.map(b=>b()),h=a.lazySink(t).getOrDie();Wa.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:wR()}}},d)},My=(t,s,a,c,d)=>{Pf.setGroups(s,d),CR(t,s,a,c),mo.on(t)},hZ=(t,s,a)=>{const c=ax(),d=(b,S)=>{const T=NT.get().getOr(!1);a.fetch().get(D=>{My(t,S,a,s.layouts,D),c.link(t.element),T||Sn.focusIn(S)})},h=()=>{mo.off(t),NT.get().getOr(!1)||$n.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:Et([Sn.config({mode:"special",onEscape:b=>(Po.close(b),M.some(!0))}),Po.config({onOpen:d,onClose:h,isPartOf:(b,S,T)=>sh(S,T)||sh(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),el.config({channels:{...Hc({isExtraPart:at,...a.fireDismissalEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({})}),...gg({doReposition:()=>{Po.getState(qr.getCoupled(t,"toolbarSandbox")).each(b=>{CR(t,b,a,s.layouts)})}})}})])}},m1=rc({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Ma.sketch({...c.button(),action:d=>{PT(d,c)},buttonBehaviours:Al.augment({dump:c.button().buttonBehaviours},[qr.config({others:{toolbarSandbox:d=>hZ(d,a,t)}})])}),apis:{setGroups:(d,h)=>{Po.getState(qr.getCoupled(d,"toolbarSandbox")).each(b=>{My(d,b,t,a.layouts,h)})},reposition:d=>{Po.getState(qr.getCoupled(d,"toolbarSandbox")).each(h=>{CR(d,h,t,a.layouts)})},toggle:d=>{PT(d,c)},toggleWithoutFocusing:d=>{e8(d,c)},getToolbar:d=>Po.getState(qr.getCoupled(d,"toolbarSandbox")),isOpen:d=>Po.isOpen(qr.getCoupled(d,"toolbarSandbox"))}}),configFields:mZ(),partFields:Vu(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),IT=re([st("items"),sm(["itemSelector"]),Za("tgroupBehaviours",[Sn])]),gZ=re([Eb({name:"items",unit:"item"})]),pZ=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.tgroupBehaviours,[Sn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),Nl=rc({name:"ToolbarGroup",configFields:IT(),partFields:gZ(),factory:pZ}),t8=t=>$e(t,s=>Tl(s)),ZC=(t,s,a)=>{dZ(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{m1.setGroups(d,t8(c))})})},n8=(t,s,a,c)=>{const d=Jo(m1.sketch({fetch:()=>ic.nu(h=>{h(t8(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Ca,wa],onRtl:()=>[wa,Ca],onBottomLtr:()=>[ps,Da],onBottomRtl:()=>[Da,ps]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(h,b)=>t[b?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.splitToolbarBehaviours,[qr.config({others:{overflowGroup:()=>Nl.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,b)=>{t.builtGroups.set($e(b,h.getSystem().build)),ZC(h,d,t)},refresh:h=>ZC(h,d,t),toggle:h=>{d.getOpt(h).each(b=>{m1.toggle(b)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(m1.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(m1.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(b=>{m1.reposition(b)})},getOverflow:h=>d.getOpt(h).bind(m1.getToolbar)},domModification:{attributes:{role:"group"}}}},xR=rc({name:"SplitFloatingToolbar",configFields:JL(),partFields:QL(),factory:n8,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),bZ=re([sm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ao("onOpened"),Ao("onClosed")].concat(fZ())),o8=re([Mi({factory:Pf,schema:Ay(),name:"primary"}),Mi({factory:Pf,schema:Ay(),name:"overflow",overrides:t=>({toolbarBehaviours:Et([cl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Rs(s,t,"overflow-button").each(a=>{mo.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Rs(s,t,"overflow-button").each(mo.on)}}),Sn.config({mode:"acyclic",onEscape:s=>(Rs(s,t,"overflow-button").each($n.focus),M.some(!0))})])})}),ou({name:"overflow-button",overrides:t=>({buttonBehaviours:Et([mo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ou({name:"overflow-group"})]),vZ=(t,s)=>Rs(t,s,"overflow").map(cl.hasGrown).getOr(!1),ER=(t,s,a)=>{Rs(t,s,"overflow-button").each(c=>{Rs(t,s,"overflow").each(d=>{if(_R(t,s),cl.hasShrunk(d)){const h=s.onOpened;s.onOpened=b=>{a||Sn.focusIn(d),h(b),s.onOpened=h}}else{const h=s.onClosed;s.onClosed=b=>{a||$n.focus(c),h(b),s.onClosed=h}}cl.toggleGrow(d)})})},_R=(t,s)=>{Rs(t,s,"overflow").each(a=>{dZ(t,s,c=>{const d=$e(c,h=>Tl(h));Pf.setGroups(a,d)}),Rs(t,s,"overflow-button").each(c=>{cl.hasGrown(a)&&mo.on(c)}),cl.refresh(a)})},yZ=(t,s,a,c)=>{const d="alloy.toolbar.toggle",h=(b,S)=>{const T=$e(S,b.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Fr(t.splitToolbarBehaviours,[qr.config({others:{overflowGroup:b=>Nl.sketch({...c["overflow-group"](),items:[Ma.sketch({...c["overflow-button"](),action:S=>{bo(b,d)}})]})}}),Yn("toolbar-toggle-events",[ot(d,b=>{ER(b,t,!1)})])]),apis:{setGroups:(b,S)=>{h(b,S),_R(b,t)},refresh:b=>_R(b,t),toggle:b=>{ER(b,t,!1)},toggleWithoutFocusing:b=>{ER(b,t,!0)},isOpen:b=>vZ(b,t)},domModification:{attributes:{role:"group"}}}},TR=rc({name:"SplitSlidingToolbar",configFields:bZ(),partFields:o8(),factory:yZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),s8=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),a=>({attributes:{title:a}})):t.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[nr(a)]})).toArray(),Nl.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Et([cr.config({}),$n.config({})])}},BT=t=>Nl.sketch(s8(t)),kR=(t,s)=>{const a=er(c=>{const d=$e(t.initGroups,BT);Pf.setGroups(c,d)});return Et([Dd.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),ha(()=>t.providers.checkUiComponentContext("any")),Sn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Yn("toolbar-events",[a])])},AR=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":s8({title:M.none(),label:M.none(),items:[]}),"overflow-button":qB({context:"any",icon:M.some("more-drawer"),enabled:!0,tooltip:M.some("Reveal or hide additional toolbar items")},M.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:kR(t,s)}},r8=t=>{const s=AR(t),a=4,c=xR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return xR.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=Ki(d),b=Gi(d),S=Ki(b),T=Math.max(b.dom.scrollHeight,S.height);return fr(h.x+a,S.y,h.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},wZ=t=>{const s=TR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=TR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=AR(t);return TR.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([hR()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([hR()],{type:"closed"}),t.onToggled(d,!1)}})},LT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Pf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Lu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Pf.parts.groups({})],toolbarBehaviours:kR(t,s)})},OR=[r1,$u,hr("tooltip"),li("buttonType","secondary",["primary","secondary"]),Aa("borderless",!1),_l("onAction"),Ls("context","mode:design")],a8=[...OR,_g,ka("type",["button"])],i8=[...OR,Aa("active",!1),ka("type",["togglebutton"])],c8={button:a8,togglebutton:i8},CZ=[ka("type",["group"]),R("buttons",[],aa("type",c8))],SZ=aa("type",{...c8,group:CZ}),l8=Fn([R("buttons",[],SZ),_l("onShow"),_l("onHide")]),xZ=t=>ar("view",l8,t),EZ=(t,s)=>{var a,c;const d=t.type==="togglebutton",h=t.icon.map(Oe=>l1(Oe,s.icons)).map(Jo),S=Oe=>{const ze=nt=>{h.map(an=>an.getOpt(Oe).each(Vt=>{Wn.set(Vt,[l1(nt,s.icons)])}))},We=nt=>{const an=Oe.element;nt?(Lr(an,"tox-button--enabled"),$t(an,"aria-pressed",!0)):(mr(an,"tox-button--enabled"),ee(an,"aria-pressed"))},Mt=()=>Sc(Oe.element,"tox-button--enabled"),tn=()=>$c(Oe.element);if(d)return t.onAction({setIcon:ze,setActive:We,isActive:Mt,focus:tn});if(t.type==="button")return t.onAction({setIcon:ze})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:M.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},D=fT((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),P=d?t.text.map(s.translate):M.some(s.translate(t.text)),F=P.map(nr),G=T.tooltip.or(P).map(Oe=>({"aria-label":s.translate(Oe)})).getOr({}),J=h.map(Oe=>Oe.asSpec()),se=dy([J,F]),ce=t.icon.isSome()&&F.isSome(),De={tag:"button",classes:D.concat(...t.icon.isSome()&&!ce?["tox-button--icon"]:[]).concat(...ce?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:G},ue=[],Te=dT(T,M.some(S),ue,De,se,t.tooltip,s);return Ma.sketch(Te)},u8=(t,s)=>EZ(t,s),_Z=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:$e(t.buttons,a=>u8(a,s))}),d8=dr().deviceType,TZ=d8.isPhone(),kZ=d8.isTablet(),AZ=t=>{let s=!1;const a=$e(t.buttons,c=>c.type==="group"?(s=!0,_Z(c,t.providers)):u8(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...TZ||kZ?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Et([$n.config({}),Sn.config({mode:"flow",selector:"button, .tox-button",focusInside:Cg.OnEnterOrSpaceMode})]),components:s?a:[xm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),xm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},OZ=t=>({uid:t.uid,behaviours:Et([$n.config({}),cr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),DZ=(t,s,a,c)=>{const d={getPane:h=>fi.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Et([$n.config({}),Sn.config({mode:"cyclic",focusInside:Cg.OnEnterOrSpaceMode})]),apis:d}};var t0=rc({name:"silver.View",configFields:[st("viewConfig")],partFields:[zc({factory:{sketch:AZ},schema:[st("buttons"),st("providers")],name:"header"}),zc({factory:{sketch:OZ},schema:[],name:"pane"})],factory:DZ,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const RZ=(t,s,a)=>qi(s,(c,d)=>{const h=bt(xZ(c));return t.slot(d,t0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[t0.parts.header({buttons:h.buttons,providers:a})]:[],t0.parts.pane({})]}))}),MZ=(t,s)=>Oc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:RZ(a,t,s),slotBehaviours:$b.unnamedEvents([er(c=>Oc.hideAllSlots(c))])})),FT=t=>et(Oc.getSlotNames(t),s=>Oc.isShowing(t,s)),NZ=t=>{const s=t.element;It(s,"display","none"),$t(s,"aria-hidden","true")},$T=t=>{const s=t.element;uo(s,"display"),ee(s,"aria-hidden")},PZ=t=>({getContainer:re(t)}),DR=(t,s,a)=>{Oc.getSlot(t,s).each(c=>{t0.getPane(c).each(d=>{a(c)(PZ(d.element.dom))})})},IZ=(t,s)=>DR(t,s,t0.getOnShow),BZ=(t,s)=>DR(t,s,t0.getOnHide);var HT=ol({factory:(t,s)=>{const h={setViews:(b,S)=>{Wn.set(b,[MZ(S,s.backstage.shared.providers)])},whichView:b=>Mo.getCurrent(b).bind(FT),toggleView:(b,S,T,D)=>Mo.getCurrent(b).exists(P=>{const F=FT(P),G=F.exists(se=>D===se),J=Oc.getSlot(P,D).isSome();return J&&(Oc.hideAllSlots(P),G?(NZ(b),S()):(T(),$T(b),Oc.showSlot(P,D),IZ(P,D)),F.each(se=>BZ(P,se))),J})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Et([Wn.config({}),Mo.config({find:b=>{const S=Wn.contents(b);return zs(S)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[st("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const LZ=(t,s,a)=>{let c=!1;const d=b=>{C4(b,".tox-statusbar").each(S=>{ut(S,"display")==="none"&&Vn(S,"aria-hidden")==="true"?(uo(S,"display"),ee(S,"aria-hidden")):(It(S,"display","none"),$t(S,"aria-hidden","true"))})},h={getSocket:b=>fi.getPart(b,t,"socket"),setSidebar:(b,S,T)=>{fi.getPart(b,t,"sidebar").each(D=>ZL(D,S,T))},toggleSidebar:(b,S)=>{fi.getPart(b,t,"sidebar").each(T=>XW(T,S))},whichSidebar:b=>fi.getPart(b,t,"sidebar").bind(OT).getOrNull(),getHeader:b=>fi.getPart(b,t,"header"),getToolbar:b=>fi.getPart(b,t,"toolbar"),setToolbar:(b,S)=>{fi.getPart(b,t,"toolbar").each(T=>{const D=$e(S,BT);T.getApis().setGroups(T,D)})},setToolbars:(b,S)=>{fi.getPart(b,t,"multiple-toolbar").each(T=>{const D=$e(S,P=>$e(P,BT));NL.setItems(T,D)})},refreshToolbar:b=>{fi.getPart(b,t,"toolbar").each(T=>T.getApis().refresh(T))},toggleToolbarDrawer:b=>{fi.getPart(b,t,"toolbar").each(S=>{Yo(S.getApis().toggle,T=>T(S))})},toggleToolbarDrawerWithoutFocusing:b=>{fi.getPart(b,t,"toolbar").each(S=>{Yo(S.getApis().toggleWithoutFocusing,T=>T(S))})},isToolbarDrawerToggled:b=>fi.getPart(b,t,"toolbar").bind(S=>M.from(S.getApis().isOpen).map(T=>T(S))).getOr(!1),getThrobber:b=>fi.getPart(b,t,"throbber"),focusToolbar:b=>{fi.getPart(b,t,"toolbar").orThunk(()=>fi.getPart(b,t,"multiple-toolbar")).each(T=>{Sn.focusIn(T)})},setMenubar:(b,S)=>{fi.getPart(b,t,"menubar").each(T=>{bR.setMenus(T,S)})},focusMenubar:b=>{fi.getPart(b,t,"menubar").each(S=>{bR.focus(S)})},setViews:(b,S)=>{fi.getPart(b,t,"viewWrapper").each(T=>{HT.setViews(T,S)})},toggleView:(b,S)=>fi.getPart(b,t,"viewWrapper").exists(T=>HT.toggleView(T,()=>h.showMainView(b),()=>h.hideMainView(b),S)),whichView:b=>fi.getPart(b,t,"viewWrapper").bind(HT.whichView).getOrNull(),hideMainView:b=>{c=h.isToolbarDrawerToggled(b),c&&h.toggleToolbarDrawer(b),fi.getPart(b,t,"editorContainer").each(S=>{const T=S.element;d(T),It(T,"display","none"),$t(T,"aria-hidden","true")})},showMainView:b=>{c&&h.toggleToolbarDrawer(b),fi.getPart(b,t,"editorContainer").each(S=>{const T=S.element;d(T),uo(T,"display"),ee(T,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:h,behaviours:t.behaviours}},RR=vh.optional({factory:bR,name:"menubar",schema:[st("backstage")]}),FZ=t=>t.type===Lu.sliding?wZ:t.type===Lu.floating?r8:LT,zT=vh.optional({factory:{sketch:t=>NL.sketch({uid:t.uid,dom:t.dom,listBehaviours:Et([Sn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>LT({type:t.type,uid:on("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),M.some(!0))}),setupItem:(s,a,c,d)=>{Pf.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[st("dom"),st("onEscape")]}),f8=vh.optional({factory:{sketch:t=>{const s=FZ(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),M.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[st("dom"),st("onEscape"),st("getSink")]}),m8=vh.optional({factory:{sketch:kT},name:"header",schema:[st("dom")]}),MR=vh.optional({factory:{sketch:vR},name:"promotion",schema:[st("dom")]}),$Z=vh.optional({name:"socket",schema:[st("dom")]}),h8=vh.optional({factory:{sketch:JW},name:"sidebar",schema:[st("dom")]}),Ny=vh.optional({factory:{sketch:sZ},name:"throbber",schema:[st("dom")]}),g8=vh.optional({factory:HT,name:"viewWrapper",schema:[st("backstage")]}),HZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),zZ=vh.optional({factory:{sketch:HZ},name:"editorContainer",schema:[]});var Ks=rc({name:"OuterContainer",factory:LZ,configFields:[st("dom"),st("behaviours")],partFields:[m8,RR,f8,zT,$Z,h8,MR,Ny,g8,zZ],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const NR="file edit view insert format tools table help",p8={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},VZ=(t,s,a)=>{const c=TN(a).split(/[ ,]/);return{text:t.title,getItems:()=>xe(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:Mn(c,b=>b===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},VT=t=>t.split(" "),PR=(t,s)=>{const a={...p8,...s.menus},c=xs(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?VT(NR):VT(s.menubar===!1?"":s.menubar),h=to(d,S=>{const T=go(p8,S);return c?T||Tt(s.menus,S).exists(D=>go(D,"items")):T}),b=$e(h,S=>{const T=a[S];return VZ({title:T.title,items:VT(T.items)},s,t)});return to(b,S=>{const T=D=>j(D)||D.type!=="separator";return S.getItems().length>0&&Mn(S.getItems(),T)})},UT=t=>{const s=()=>{t._skinLoaded=!0,B9(t)};return()=>{t.initialized?s():t.on("init",s)}},IR=(t,s)=>()=>L9(t,{message:s}),UZ=t=>{const s=$w(t);return s?M.from(s):M.none()},b8=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),jC=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),WZ=(t,s)=>"ui/"+t+"/"+s,ZZ=t=>M.from(tinymce.Resource.get(t)).filter(j),BR=(t,s,a="")=>{const c=UZ(t).map(h=>WZ(h,`${s}.css`)),d=c.bind(ZZ);return La(c,d,(h,b)=>({_kind:"load-raw",key:h,css:b})).getOrThunk(()=>{const h=t.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${h}.css`}})},v8=(t,s)=>{const a=t.ui.styleSheetLoader,c=BR(t,"skin",s);switch(c._kind){case"load-raw":const{key:d,css:h}=c;return jC(t,d,h,a),Promise.resolve();case"load-stylesheet":const{url:b}=c;return b8(t,b,a);default:return Promise.resolve()}},jZ=(t,s)=>{if(vi(Ke.fromDom(t.getElement()))){const c=Bw.DOM.styleSheetLoader,d=BR(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:h,css:b}=d;return jC(t,h,b,c),Promise.resolve();case"load-stylesheet":const{url:S}=d;return b8(t,S,c);default:return Promise.resolve()}}else return Promise.resolve()},qZ=(t,s,a)=>{const d=BR(t,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:h,css:b}=d;return s?jC(t,h,b,t.ui.styleSheetLoader):t.on("PostRender",()=>{jC(t,h,b,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:S}=d;return a&&t.contentCSS.push(S),Promise.resolve();default:return Promise.resolve()}},LR=async(t,s)=>{const a=$N(s);if(await qZ(s,t,a),!lA(s)&&j(a))return Promise.all([v8(s,a),jZ(s,a)]).then()},y8=(t,s)=>LR(t,s).then(UT(s),IR(s,"Skin could not be loaded")),GZ=en(y8,!1),w8=en(y8,!0),Py=(t,s,a)=>fe(a)?t.translate(s):t.translate([s,t.translate(a)]),C8=(t,s)=>{const a=(b,S,T,D)=>{const P=t.shared.providers.translate(b.title);if(b.type==="separator")return M.some({type:"separator",text:P});if(b.type==="submenu"){const F=xe(b.getStyleItems(),G=>c(G,S,D));return S===0&&F.length<=0?M.none():M.some({type:"nestedmenuitem",text:P,enabled:F.length>0,getSubmenuItems:()=>xe(b.getStyleItems(),G=>c(G,S,D))})}else return M.some({type:"togglemenuitem",text:P,icon:b.icon,active:b.isSelected(D),enabled:!T,onAction:s.onAction(b),...b.getStylePreview().fold(()=>({}),F=>({meta:{style:F}}))})},c=(b,S,T)=>{const D=b.type==="formatter"&&s.isInvalid(b);return S===0?D?[]:a(b,S,!1,T).toArray():a(b,S,D,T).toArray()},d=b=>{const S=s.getCurrentValue(),T=s.shouldHide?0:1;return xe(b,D=>c(D,T,S))};return{validateItems:d,getFetch:(b,S)=>(T,D)=>{const P=S(),F=d(P),G=xy(F,xf.CLOSE_ON_EXECUTE,b,{isHorizontalMenu:!1,search:M.none()});D(G)}}},Iy=(t,s)=>{const a=s.dataset,c=a.type==="basic"?()=>$e(a.data,d=>yL(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:C8(t,s),getStyleItems:c}},By=(t,s,a,c,d,h)=>{const{items:b,getStyleItems:S}=Iy(s,a),T=mn(a.tooltip),D=F=>({getComponent:re(F),setTooltip:G=>{const J=s.shared.providers.translate(G);$t(F.element,"aria-label",J),T.set(G)}}),P=F=>{const G=J=>F.setTooltip(Py(t,c(J.value),J.value));return t.on(d,G),Ub(Wb(t,"NodeChange",J=>{const se=J.getComponent();a.updateText(se),vn.set(J.getComponent(),!t.selection.isEditable())})(F),()=>t.off(d,G))};return TD({context:"mode:design",text:a.icon.isSome()?M.none():a.text,icon:a.icon,ariaLabel:M.some(a.tooltip),tooltip:M.none(),role:M.none(),fetch:b.getFetch(s,S),onSetup:P,getApi:D,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[kr.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:F=>{if(a.tooltip!==T.get()){const G=s.shared.providers.translate(T.get());kr.setComponents(F,s.shared.providers.tooltips.getComponents({tooltipText:G}))}}})})]},"tox-tbtn",s.shared,h)},KZ=t=>$e(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),YZ=t=>({type:"basic",data:t});var Ly;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Ly||(Ly={}));const S8=(t,s)=>s===Ly.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),FR=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:KZ(S8(c,a))}},XZ="Align",x8=re("Alignment {0}"),WT="left",qC=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],E8=t=>{const s=()=>et(qC,S=>t.formatter.match(S.format)),a=S=>()=>t.formatter.match(S),c=S=>M.none,d=S=>{const D=s().fold(re(WT),P=>P.title.toLowerCase());bn(S,Xb,{icon:`align-${D}`}),z9(t,{value:D})},h=YZ(qC),b=S=>()=>et(qC,T=>T.format===S.format).each(T=>t.execCommand(T.command));return{tooltip:Py(t,x8(),WT),text:M.none(),icon:M.some("align-left"),isSelectedFor:a,getCurrentValue:M.none,getPreviewFor:c,onAction:b,updateText:d,dataset:h,shouldHide:!1,isInvalid:S=>!t.formatter.canApply(S.format)}},JZ=(t,s)=>By(t,s,E8(t),x8,"AlignTextUpdate","align"),QZ=(t,s)=>{const a=Iy(s,E8(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(XZ),onSetup:ac(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_8=(t,s)=>{const a=s(),c=$e(a,d=>d.format);return M.from(t.formatter.closest(c)).bind(d=>et(a,h=>h.format===d))},ej="Blocks",T8=re("Block {0}"),$R="Paragraph",k8=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const b=t.formatter.get(h);return b?M.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):M.none()},c=h=>{const S=_8(t,()=>d.data).fold(re($R),T=>T.title);bn(h,zu,{text:S}),W9(t,{value:S})},d=FR(t,"block_formats",Ly.SemiColon);return{tooltip:Py(t,T8(),$R),text:M.some($R),icon:M.none(),isSelectedFor:s,getCurrentValue:M.none,getPreviewFor:a,onAction:hI(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},tj=(t,s)=>By(t,s,k8(t),T8,"BlocksTextUpdate","blocks"),A8=(t,s)=>{const a=Iy(s,k8(t));t.ui.registry.addNestedMenuItem("blocks",{text:ej,onSetup:ac(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},ZT="Fonts",jT=re("Font {0}"),qT="System Font",h1=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],HR=t=>{const s=t.split(/\s*,\s*/);return $e(s,a=>a.replace(/^['"]+|['"]+$/g,""))},O8=(t,s)=>s.length>0&&Oo(s,a=>t.indexOf(a.toLowerCase())>-1),nj=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=HR(t.toLowerCase());return O8(a,h1)||O8(a,s)}else return!1},D8=t=>{const s=()=>{const T=se=>se?HR(se)[0]:"",D=t.queryCommandValue("FontName"),P=S.data,F=D?D.toLowerCase():"",G=FN(t);return{matchOpt:et(P,se=>{const ce=se.format;return ce.toLowerCase()===F||T(ce).toLowerCase()===T(F).toLowerCase()}).orThunk(()=>En(nj(F,G),{title:qT,format:F})),font:D}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>M.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},b=T=>{const{matchOpt:D,font:P}=s(),F=D.fold(re(P),G=>G.title);bn(T,zu,{text:F}),Z9(t,{value:F})},S=FR(t,"font_family_formats",Ly.SemiColon);return{tooltip:Py(t,jT(),qT),text:M.some(qT),icon:M.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:h,updateText:b,dataset:S,shouldHide:!1,isInvalid:at}},oj=(t,s)=>By(t,s,D8(t),jT,"FontFamilyTextUpdate","fontfamily"),sj=(t,s)=>{const a=Iy(s,D8(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(ZT),onSetup:ac(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},rj={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},aj=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=S=>`(?:${S})?`,b=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${b})(.*)$`)})(),R8=(t,s)=>Mn(s,a=>Mn(rj[a],c=>t===c)),GT=(t,s)=>M.from(aj.exec(t)).bind(c=>{const d=Number(c[1]),h=c[2];return R8(h,s)?M.some({value:d,unit:h}):M.none()}),ij=(t,s)=>GT(t,s).map(({value:a,unit:c})=>a+c),KT={tab:re(9),escape:re(27),enter:re(13),backspace:re(8),delete:re(46),left:re(37),up:re(38),right:re(39),down:re(40),space:re(32),home:re(36),end:re(35),pageUp:re(33),pageDown:re(34)},cj=(t,s,a,c)=>{let d=M.none();const h=Oe=>Oe.map(ze=>Jt.getValue(ze)).getOr(""),b=Wb(t,"NodeChange SwitchMode DisabledStateChange",Oe=>{const ze=Oe.getComponent();d=M.some(ze),a.updateInputValue(ze),vn.set(ze,!t.selection.isEditable()||zE(t))}),S=Oe=>({getComponent:re(Oe)}),T=mn(de),D=on("custom-number-input-events"),P=(Oe,ze,We)=>{const Mt=h(d),tn=a.getNewValue(Mt,Oe),nt=Mt.length-`${tn}`.length,an=d.map(dn=>dn.element.dom.selectionStart-nt),Vt=d.map(dn=>dn.element.dom.selectionEnd-nt);a.onAction(tn,We),d.each(dn=>{Jt.setValue(dn,tn),ze&&(an.each(wo=>dn.element.dom.selectionStart=wo),Vt.each(wo=>dn.element.dom.selectionEnd=wo))})},F=(Oe,ze)=>P((We,Mt)=>We-Mt,Oe,ze),G=(Oe,ze)=>P((We,Mt)=>We+Mt,Oe,ze),J=Oe=>bi(Oe.element).fold(M.none,ze=>($c(ze),M.some(!0))),se=Oe=>hf(Oe.element)?(ml(Oe.element).each(ze=>$c(ze)),M.some(!0)):M.none(),ce=(Oe,ze,We,Mt)=>{const tn=mn(de),nt=s.shared.providers.translate(We),an=on("altExecuting"),Vt=Wb(t,"NodeChange SwitchMode DisabledStateChange",wo=>{vn.set(wo.getComponent(),!t.selection.isEditable()||zE(t))}),dn=wo=>{vn.isDisabled(wo)||Oe(!0)};return Ma.sketch({dom:{tag:"button",attributes:{"aria-label":nt,"data-mce-name":ze},classes:Mt.concat(ze)},components:[NC(ze,s.shared.providers.icons)],buttonBehaviours:Et([vn.config({}),kr.config(s.shared.providers.tooltips.getConfig({tooltipText:nt})),Yn(an,[kf({onSetup:Vt,getApi:S},tn),Ni({getApi:S},tn),ot(Hi(),(wo,Ys)=>{(Ys.event.raw.keyCode===KT.space()||Ys.event.raw.keyCode===KT.enter())&&(vn.isDisabled(wo)||Oe(!1))}),ot(Uh(),dn),ot(va(),dn)])]),eventOrder:{[Hi()]:[an,"keying"],[Uh()]:[an,"alloy.base.behaviour"],[va()]:[an,"alloy.base.behaviour"],[Ji()]:["alloy.base.behaviour",an,"tooltipping"],[Lc()]:[an,"tooltipping"]}})},De=Jo(ce(Oe=>F(!1,Oe),"minus","Decrease font size",[])),ue=Jo(ce(Oe=>G(!1,Oe),"plus","Increase font size",[])),Te=Jo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Ef.sketch({inputBehaviours:Et([vn.config({}),Yn(D,[kf({onSetup:b,getApi:S},T),Ni({getApi:S},T)]),Yn("input-update-display-text",[ot(zu,(Oe,ze)=>{Jt.setValue(Oe,ze.event.text)}),ot(vS(),Oe=>{a.onAction(Jt.getValue(Oe))}),ot(Jf(),Oe=>{a.onAction(Jt.getValue(Oe))})]),Sn.config({mode:"special",onEnter:Oe=>(P(Xt,!0,!0),M.some(!0)),onEscape:J,onUp:Oe=>(G(!0,!1),M.some(!0)),onDown:Oe=>(F(!0,!1),M.some(!0)),onLeft:(Oe,ze)=>(ze.cut(),M.none()),onRight:(Oe,ze)=>(ze.cut(),M.none())})])})],behaviours:Et([$n.config({}),Sn.config({mode:"special",onEnter:se,onSpace:se,onEscape:J}),Yn("input-wrapper-events",[ot(dd(),Oe=>{gt([De,ue],ze=>{const We=Ke.fromDom(ze.get(Oe).element.dom);hf(We)&&Va(We)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Ct(c)?{"data-mce-name":c}:{}}},components:[De.asSpec(),Te.asSpec(),ue.asSpec()],behaviours:Et([$n.config({}),Sn.config({mode:"flow",focusInside:Cg.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Oe=>hf(Oe.element)?M.none():($c(Oe.element),M.some(!0))})])}},lj="Font sizes",M8=re("Font size {0}"),N8="12pt",uj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},dj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},P8=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},I8=(t,s)=>/[0-9.]+px$/.test(t)?P8(parseInt(t,10)*72/96,s||0)+"pt":Tt(dj,t).getOr(t),B8=t=>Tt(uj,t).getOr(""),L8=t=>{const s=()=>{let T=M.none();const D=S.data,P=t.queryCommandValue("FontSize");if(P)for(let F=3;T.isNone()&&F>=0;F--){const G=I8(P,F),J=B8(G);T=et(D,se=>se.format===P||se.format===G||se.format===J)}return{matchOpt:T,size:P}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=re(M.none),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},b=T=>{const{matchOpt:D,size:P}=s(),F=D.fold(re(P),G=>G.title);bn(T,zu,{text:F}),V9(t,{value:F})},S=FR(t,"font_size_formats",Ly.Space);return{tooltip:Py(t,M8(),N8),text:M.some(N8),icon:M.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:h,updateText:b,dataset:S,shouldHide:!1,isInvalid:at}},F8=(t,s)=>By(t,s,L8(t),M8,"FontSizeTextUpdate","fontsize"),fj=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},mj=16,hj=t=>t>=0,$8=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>bn(c,zu,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{GT(c,["unsupportedLength","empty"]);const h=s(),b=GT(c,["unsupportedLength","empty"]).or(GT(h,["unsupportedLength","empty"])),S=b.map(G=>G.value).getOr(mj),T=RN(t),D=b.map(G=>G.unit).filter(G=>G!=="").getOr(T),P=d(S,fj(D).step),F=`${hj(P)?P:S}${D}`;return F!==h&&U9(t,{value:F}),F}}},gj=(t,s)=>cj(t,s,$8(t),"fontsizeinput"),H8=(t,s)=>{const a=Iy(s,L8(t));t.ui.registry.addNestedMenuItem("fontsize",{text:lj,onSetup:ac(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},pj="Formats",z8=t=>fe(t)?"Formats":"Format {0}",V8=(t,s)=>{const a="Formats",c=b=>()=>t.formatter.match(b),d=b=>()=>{const S=t.formatter.get(b);return S!==void 0?M.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(b))}):M.none()},h=b=>{const S=F=>pL(F)?xe(F.items,S):bL(F)?[{title:F.title,format:F.format}]:[],T=xe(vL(t),S),P=_8(t,re(T)).fold(re({title:a,tooltipLabel:""}),F=>({title:F.title,tooltipLabel:F.title}));bn(b,zu,{text:P.title}),H9(t,{value:P.tooltipLabel})};return{tooltip:Py(t,z8(""),""),text:M.some(a),icon:M.none(),isSelectedFor:c,getCurrentValue:M.none,getPreviewFor:d,onAction:hI(t),updateText:h,shouldHide:EN(t),isInvalid:b=>!t.formatter.canApply(b.format),dataset:s}},bj=(t,s)=>{const a={type:"advanced",...s.styles};return By(t,s,V8(t,a),z8,"StylesTextUpdate","styles")},vj=(t,s)=>{const a={type:"advanced",...s.styles},c=Iy(s,V8(t,a));t.ui.registry.addNestedMenuItem("styles",{text:pj,onSetup:ac(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},yj=re([st("toggleClass"),st("fetch"),Qm("onExecute"),Pe("getHotspot",M.some),Pe("getAnchorOverrides",re({})),ch(),Qm("onItemExecute"),Uo("lazySink"),st("dom"),Ao("onOpen"),Za("splitDropdownBehaviours",[qr,Sn,$n]),Pe("matchWidth",!1),Pe("useMinWidth",!1),Pe("eventOrder",{}),Uo("role"),Uo("listRole")].concat(py())),wj=Mi({factory:Ma,schema:[st("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Et([$n.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Km)},buttonBehaviours:Et([mo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),U8=Mi({factory:Ma,schema:[st("dom")],name:"button",defaults:()=>({buttonBehaviours:Et([$n.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),Cj=re([wj,U8,zc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[st("text")],name:"aria-descriptor"}),ou({schema:[pp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),AO()]),Sj=(t,s,a,c)=>{const d=P=>{Mo.getCurrent(P).each(F=>{ft.highlightFirst(F),Sn.focusIn(F)})},h=P=>{OO(t,Xt,P,c,d,ja.HighlightMenuAndItem).get(de)},b=P=>(h(P),M.some(!0)),S=P=>{const F=nl(P,t,"button");return Km(F),M.some(!0)},T={...ms([er((P,F)=>{Rs(P,t,"aria-descriptor").each(J=>{const se=on("aria");$t(J.element,"id",se),$t(P.element,"aria-describedby",se)})})]),...Xv(M.some(h))},D={repositionMenus:P=>{mo.isOn(P)&&VI(P)}};return{uid:t.uid,dom:t.dom,components:s,apis:D,eventOrder:{...t.eventOrder,[ki()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:Fr(t.splitDropdownBehaviours,[qr.config({others:{sandbox:P=>{const F=nl(P,t,"arrow");return gy(t,P,{onOpen:()=>{mo.on(F),mo.on(P)},onClose:()=>{mo.off(F),mo.off(P)}})}}}),Sn.config({mode:"special",onSpace:S,onEnter:S,onDown:b}),$n.config({}),mo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},YT=rc({name:"SplitDropdown",configFields:yj(),partFields:Cj(),factory:Sj,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),W8=t=>({isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setText:s=>bn(t,zu,{text:s}),setIcon:s=>bn(t,Xb,{icon:s})}),xj=t=>({setActive:s=>{mo.set(t,s)},isActive:()=>mo.isOn(t),isEnabled:()=>!vn.isDisabled(t),setEnabled:s=>vn.set(t,!s),setText:s=>bn(t,zu,{text:s}),setIcon:s=>bn(t,Xb,{icon:s})}),Z8=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),j8=on("focus-button"),XT=(t,s,a,c,d,h,b)=>{const S=s.map(D=>Jo(sT(D,"tox-tbtn",d))),T=t.map(D=>Jo(l1(D,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...Z8(a,d),...Ct(b)?{"data-mce-name":b}:{}}},components:dy([T.map(D=>D.asSpec()),S.map(D=>D.asSpec())]),eventOrder:{[Bc()]:["focusing","alloy.base.behaviour",Df],[Ji()]:[Df,"toolbar-group-button-events"],[Lc()]:[Df,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Et([Dd.toolbarButton(()=>d.checkUiComponentContext(h).shouldDisable),ha(()=>d.checkUiComponentContext(h)),Yn(Df,[er((D,P)=>_D(D)),ot(zu,(D,P)=>{S.bind(F=>F.getOpt(D)).each(F=>{Wn.set(F,[nr(d.translate(P.event.text))])})}),ot(Xb,(D,P)=>{T.bind(F=>F.getOpt(D)).each(F=>{Wn.set(F,[l1(P.event.icon,d.icons)])})}),ot(Bc(),(D,P)=>{P.event.prevent(),bo(D,j8)})])].concat(c.getOr([])))}},Ej=(t,s,a,c,d)=>{const h=s.shared,b=mn(de),S={toolbarButtonBehaviours:[],getApi:W8,onSetup:t.onSetup},T=[Yn("toolbar-group-button-events",[kf(S,b),Ni(S,b)]),...t.tooltip.map(D=>kr.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(D)}))).toArray()];return m1.sketch({lazySink:h.getSink,fetch:()=>ic.nu(D=>{D($e(a(t.items),BT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:XT(t.icon,t.text,t.tooltip,M.some(T),h.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},q8=(t,s,a,c)=>{var d;const h=mn(de),b=XT(t.icon,t.text,t.tooltip,M.none(),a,t.context,c);return Ma.sketch({dom:b.dom,components:b.components,eventOrder:oT,buttonBehaviours:{...Et([Yn("toolbar-button-events",[cU({onAction:t.onAction,getApi:s.getApi}),kf(s,h),Ni(s,h)]),...t.tooltip.map(S=>kr.config(a.tooltips.getConfig({tooltipText:a.translate(S)+t.shortcut.map(T=>` (${tO(T)})`).getOr("")}))).toArray(),Dd.toolbarButton(()=>!t.enabled||a.checkUiComponentContext(t.context).shouldDisable),ha(()=>a.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Df]:(d=b.buttonBehaviours)===null||d===void 0?void 0:d[Df]}})},G8=(t,s,a)=>K8(t,s,[],a),K8=(t,s,a,c)=>q8(t,{toolbarButtonBehaviours:a.length>0?[Yn("toolbarButtonWith",a)]:[],getApi:W8,onSetup:t.onSetup},s,c),Y8=(t,s,a)=>zR(t,s,[],a),zR=(t,s,a,c)=>q8(t,{toolbarButtonBehaviours:[Wn.config({}),mo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Yn("toolbarToggleButtonWith",a)]:[]),getApi:xj,onSetup:t.onSetup},s,c),_j=(t,s,a)=>c=>ic.nu(d=>s.fetch(d)).map(d=>M.from(DO(Bs(EO(on("menu-value"),d,h=>{s.onItemAction(t(c),h)},s.columns,s.presets,xf.CLOSE_ON_EXECUTE,s.select.getOr(at),a),{movement:O_(s.columns,s.presets),menuBehaviours:$b.unnamedEvents(s.columns!=="auto"?[]:[er((h,b)=>{JA(h,4,mP(s.presets)).each(({numRows:S,numColumns:T})=>{Sn.setGridSize(h,S,T)})})])})))),Tj=(t,s,a)=>{const c=mn(t.tooltip.getOr("")),d=S=>({isEnabled:()=>!vn.isDisabled(S),setEnabled:T=>vn.set(S,!T),setIconFill:(T,D)=>{ir(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(P=>{$t(P,"fill",D)})},setActive:T=>{$t(S.element,"aria-pressed",T),ir(S.element,"span").each(D=>{S.getSystem().getByDom(D).each(P=>mo.set(P,T))})},isActive:()=>ir(S.element,"span").exists(T=>S.getSystem().getByDom(T).exists(mo.isOn)),setText:T=>ir(S.element,"span").each(D=>S.getSystem().getByDom(D).each(P=>bn(P,zu,{text:T}))),setIcon:T=>ir(S.element,"span").each(D=>S.getSystem().getByDom(D).each(P=>bn(P,Xb,{icon:T}))),setTooltip:T=>{const D=s.providers.translate(T);$t(S.element,"aria-label",D),c.set(T)}}),h=mn(de),b={getApi:d,onSetup:t.onSetup};return YT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...Z8(t.tooltip,s.providers),...Ct(a)?{"data-mce-name":a}:{}}},onExecute:S=>{const T=d(S);T.isEnabled()&&t.onAction(T)},onItemExecute:(S,T,D)=>{},splitDropdownBehaviours:Et([Yn("split-dropdown-events",[er((S,T)=>_D(S)),ot(j8,$n.focus),kf(b,h),Ni(b,h)]),Dd.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),ha(()=>s.providers.checkUiComponentContext(t.context)),al.config({}),...t.tooltip.map(S=>kr.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(S),onShow:T=>{if(c.get()!==S){const D=s.providers.translate(c.get());kr.setComponents(T,s.providers.tooltips.getComponents({tooltipText:D}))}}})})).toArray()]),eventOrder:{[Ji()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Lc()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:_j(d,t,s.providers),parts:{menu:eC(!1,t.columns,t.presets)},components:[YT.parts.button(XT(t.icon,t.text,M.none(),M.some([mo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Dd.toolbarButton(at),ha(re({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),YT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:kA("chevron-down",s.providers.icons)},buttonBehaviours:Et([Dd.splitButton(at),ha(re({contextType:"any",shouldDisable:!1}))])}),YT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},kj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wh=(t,s)=>(a,c,d,h)=>{const b=t(a).mapError(S=>Gl(S)).getOrDie();return s(b,c,d,h)},Aj={button:wh(C_,(t,s,a,c)=>G8(t,s.shared.providers,c)),togglebutton:wh(ly,(t,s,a,c)=>Y8(t,s.shared.providers,c)),menubutton:wh(VL,(t,s,a,c)=>Ng(t,"tox-tbtn",s,M.none(),!1,c)),splitbutton:wh(VW,(t,s,a,c)=>Tj(t,s.shared,c)),grouptoolbarbutton:wh(HL,(t,s,a,c)=>{const d=a.ui.registry.getAll().buttons,h=S=>Fy(a,{buttons:d,toolbar:S,allowToolbarGroups:!1},s,M.none()),b={[ih]:s.shared.header.isPositionedAtTop()?lm.TopToBottom:lm.BottomToTop};switch(ey(a)){case Lu.floating:return Ej(t,s,h,b,c);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Oj=(t,s,a,c)=>Tt(Aj,t.type).fold(()=>(console.error("skipping button defined by",t),M.none()),d=>M.some(d(t,s,a,c))),X8={styles:bj,fontsize:F8,fontsizeinput:gj,fontfamily:oj,blocks:tj,align:JZ},Dj=t=>{const s=$e(kj,a=>{const c=to(a.items,d=>go(t,d)||go(X8,d));return{name:a.name,items:c}});return to(s,a=>a.items.length>0)},Rj=t=>{const s=t.split("|");return $e(s,a=>({items:a.trim().split(" ")}))},Mj=t=>xt(t,s=>(go(s,"name")||go(s,"label"))&&go(s,"items")),Nj=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Dj(a):j(s)?Rj(s):Mj(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Pj=(t,s,a,c,d,h)=>Tt(s,a.toLowerCase()).orThunk(()=>h.bind(b=>Ss(b,S=>Tt(s,S+a.toLowerCase())))).fold(()=>Tt(X8,a.toLowerCase()).map(b=>b(t,d)),b=>b.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),M.none()):Oj(b,d,t,a.toLowerCase())),Fy=(t,s,a,c)=>{const d=Nj(s),h=$e(d,b=>{const S=xe(b.items,T=>T.trim().length===0?[]:Pj(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:M.from(t.translate(b.name)),label:En(b.label!==void 0,t.translate(b.label)),items:S}});return to(h,b=>b.items.length>0)},J8=(t,s,a,c)=>{const d=s.mainUi.outerContainer,h=a.toolbar,b=a.buttons;if(xt(h,j)){const S=h.map(T=>{const D={toolbar:T,buttons:b,allowToolbarGroups:a.allowToolbarGroups};return Fy(t,D,c,M.none())});Ks.setToolbars(d,S)}else Ks.setToolbar(d,Fy(t,a,c,M.none()))},Q8=dr(),eF=Q8.os.isiOS()&&Q8.os.version.major<=12,tF=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,b=mn(Ds(d.innerWidth,d.innerHeight)),S=mn(Ds(h.offsetWidth,h.offsetHeight)),T=()=>{const G=b.get();(G.left!==d.innerWidth||G.top!==d.innerHeight)&&(b.set(Ds(d.innerWidth,d.innerHeight)),dO(t))},D=()=>{const G=t.getDoc().documentElement,J=S.get();(J.left!==G.offsetWidth||J.top!==G.offsetHeight)&&(S.set(Ds(G.offsetWidth,G.offsetHeight)),dO(t))},P=G=>{fO(t,G)};c.bind(d,"resize",T),c.bind(d,"scroll",P);const F=U2(Ke.fromDom(t.getBody()),"load",D);t.on("hide",()=>{gt(a,G=>{It(G.element,"display","none")})}),t.on("show",()=>{gt(a,G=>{uo(G.element,"display")})}),t.on("NodeChange",D),t.on("remove",()=>{F.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",P),d=null})},Ij=(t,s,a)=>{Eg(t)&&di(a.mainUi.mothership.element,a.popupUi.mothership),sc(s,a.dialogUi.mothership)};var Bj=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=s,S=mn(0),T=h.outerContainer;GZ(t);const D=Ke.fromDom(d.targetNode),P=Nr(br(D));di(D,h.mothership),Ij(t,P,s),t.on("PostRender",()=>{Ks.setSidebar(T,a.sidebar,LN(t))}),t.on("SkinLoaded",()=>{J8(t,s,a,c),S.set(t.getWin().innerWidth),Ks.setMenubar(T,PR(t,a)),Ks.setViews(T,a.views),tF(t,s)});const F=Ks.getSocket(T).getOrDie("Could not find expected socket element");if(eF){$o(F.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ce=tT(()=>{t.dispatch("ScrollContent")},20),De=nc(F.element,"scroll",ce.throttle);t.on("remove",De.unbind)}eO(t,s),t.addCommand("ToggleSidebar",(ce,De)=>{Ks.toggleSidebar(T,De),j9(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var ce;return(ce=Ks.whichSidebar(T))!==null&&ce!==void 0?ce:""}),t.addCommand("ToggleView",(ce,De)=>{if(Ks.toggleView(T,De)){const ue=T.element;h.mothership.broadcastOn([dm()],{target:ue}),gt(b,Te=>{Te.broadcastOn([dm()],{target:ue})}),Xe(Ks.whichView(T))&&(t.focus(),t.nodeChanged(),Ks.refreshToolbar(T)),q9(t)}}),t.addQueryValueHandler("ToggleView",()=>{var ce;return(ce=Ks.whichView(T))!==null&&ce!==void 0?ce:""});const G=ey(t),J=()=>{Ks.refreshToolbar(s.mainUi.outerContainer)};(G===Lu.sliding||G===Lu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ce=t.getWin().innerWidth;ce!==S.get()&&(J(),S.set(ce))});const se={setEnabled:ce=>{uy(s,ce?"setEnabled":"setDisabled")},isEnabled:()=>!vn.isDisabled(T)};return{iframeContainer:F.element.dom,editorContainer:T.element.dom,api:se}}});const nF=t=>/^[0-9\.]+(|px)$/i.test(""+t)?M.some(parseInt(""+t,10)):M.none(),VR=t=>ln(t)?t+"px":t,JT=(t,s,a)=>{const c=s.filter(h=>t<h),d=a.filter(h=>t>h);return c.or(d).getOr(t)},oF=t=>{const s=X3(t),a=Q3(t),c=Qv(t);return nF(s).map(d=>JT(d,a,c))},Lj=t=>oF(t).getOr(X3(t)),sF=t=>{const s=J3(t),a=Fw(t),c=Jp(t);return nF(s).map(d=>JT(d,a,c))},Fj=t=>sF(t).getOr(J3(t)),{ToolbarLocation:UR,ToolbarMode:WR}=TH,$j=40,QT=(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=a,S=Bw.DOM,T=Cf(t),D=Qp(t),P=Jp(t).or(sF(t)),F=c.shared.header,G=F.isPositionedAtTop,J=150,se=ey(t),ce=se===WR.sliding||se===WR.floating,De=mn(!1),ue=()=>De.get()&&!t.removed,Te=gn=>ce?gn.fold(re(0),pt=>pt.components().length>1?xr(pt.components()[1].element):0):0,Oe=gn=>{switch(UE(t)){case UR.auto:const pt=Ks.getToolbar(h.outerContainer),Wt=Te(pt),Un=xr(gn.element)-Wt,ro=Pr(s);if(ro.y>Un)return"top";{const Xn=Gi(s),ks=Math.max(Xn.dom.scrollHeight,xr(Xn));return ro.bottom<ks-Un||ea().bottom<ro.bottom-Un?"bottom":"top"}case UR.bottom:return"bottom";case UR.top:default:return"top"}},ze=gn=>{d.on(pt=>{js.setModes(pt,[gn]),F.setDockingMode(gn);const Wt=G()?lm.TopToBottom:lm.BottomToTop;$t(pt.element,ih,Wt)})},We=()=>{d.on(gn=>{const pt=P.getOrThunk(()=>bl().width-Ci(s).left-10);It(gn.element,"max-width",pt+"px")})},Mt=(gn,pt)=>{d.on(Wt=>{const Un=Ks.getToolbar(h.outerContainer),ro=Te(Un),Tn=Pr(s),Xn=tn(t,h.outerContainer.element),ks=()=>Xn.fold(()=>Tn.x,fc=>{const Zu=Pr(fc);return So(fc,Ye())?Tn.x:Tn.x-Zu.x}),bs=()=>Xn.fold(()=>G()?Math.max(Tn.y-xr(Wt.element)+ro,0):Tn.bottom,fc=>{var Zu;const ju=Pr(fc),Bf=(Zu=fc.dom.scrollTop)!==null&&Zu!==void 0?Zu:0,xh=So(fc,Ye())?Math.max(Tn.y-xr(Wt.element)+ro,0):Tn.y-ju.y+Bf-xr(Wt.element)+ro;return G()?xh:Tn.bottom}),Ll=ks(),yr=En(gn,Math.ceil(h.outerContainer.element.dom.getBoundingClientRect().width)).filter(fc=>fc>J).map(fc=>{const Zu=pt.getOr(ri()),ju=window.innerWidth-(Ll-Zu.left),Bf=Math.max(Math.min(fc,ju),J);return ju<fc&&It(h.outerContainer.element,"width",Bf+"px"),{width:Bf+"px"}}).getOr({width:"max-content"}),Wu={position:"absolute",left:Math.round(Ll)+"px",top:bs()+"px"};$o(h.outerContainer.element,{...Wu,...yr})})},tn=(gn,pt)=>Eg(gn)?lp(pt):M.none(),nt=()=>{gt(b,gn=>{gn.broadcastOn([hg()],{})})},an=()=>!T&&(_a(h.outerContainer.element).left+gl(h.outerContainer.element)>=window.innerWidth-$j||fs(h.outerContainer.element,"width").isSome())?(It(h.outerContainer.element,"position","absolute"),It(h.outerContainer.element,"left","0px"),uo(h.outerContainer.element,"width"),!0):!1,Vt=gn=>{if(!ue())return;T||We();const pt=ri(),Wt=T?!1:an();if(ce&&Ks.refreshToolbar(h.outerContainer),!T){const Un=ri(),ro=En(pt.left!==Un.left,pt);Mt(Wt,ro),ro.each(Tn=>{rd(Tn.left,Un.top)})}D&&d.on(gn),nt()},dn=()=>T||!D||!ue()?!1:d.get().exists(gn=>{const pt=F.getDockingMode(),Wt=Oe(gn);return Wt!==pt?(ze(Wt),!0):!1});return{isVisible:ue,isPositionedAtTop:G,show:()=>{De.set(!0),It(h.outerContainer.element,"display","flex"),S.addClass(t.getBody(),"mce-edit-focus"),gt(b,gn=>{uo(gn.element,"display")}),dn(),Eg(t)?Vt(gn=>js.isDocked(gn)?js.reset(gn):js.refresh(gn)):Vt(js.refresh)},hide:()=>{De.set(!1),It(h.outerContainer.element,"display","none"),S.removeClass(t.getBody(),"mce-edit-focus"),gt(b,gn=>{It(gn.element,"display","none")})},update:Vt,updateMode:()=>{dn()&&Vt(js.reset)},repositionPopups:nt}},GC=(t,s)=>{const a=Pr(t);return{pos:s?a.y:a.bottom,bounds:a}},rF=(t,s,a,c)=>{const d=mn(GC(s,a.isPositionedAtTop())),h=D=>{const{pos:P,bounds:F}=GC(s,a.isPositionedAtTop()),{pos:G,bounds:J}=d.get(),se=F.height!==J.height||F.width!==J.width;d.set({pos:P,bounds:F}),se&&dO(t,D),a.isVisible()&&(G!==P?a.update(js.reset):se&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(js.reset)),t.on("NodeChange keydown",D=>{requestAnimationFrame(()=>h(D))});let b=0;const S=bD(()=>a.update(js.refresh),33);t.on("ScrollWindow",()=>{const D=ri().left;D!==b&&(b=D,S.throttle()),a.updateMode()}),Eg(t)&&t.on("ElementScroll",D=>{a.update(js.refresh)});const T=Yi();T.set(U2(Ke.fromDom(t.getBody()),"load",D=>h(D.raw))),t.on("remove",()=>{T.clear()})};var Hj=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h}=s,b=Xo(),S=Ke.fromDom(d.targetNode),T=QT(t,S,s,c,b),D=AN(t);w8(t);const P=()=>{if(b.isSet()){T.show();return}b.set(Ks.getHeader(h.outerContainer).getOrDie());const G=dA(t);Eg(t)?(di(S,h.mothership),di(S,s.popupUi.mothership)):sc(G,h.mothership),sc(G,s.dialogUi.mothership);const J=()=>{J8(t,s,a,c),Ks.setMenubar(h.outerContainer,PR(t,a)),T.show(),rF(t,S,T,D),t.nodeChanged()};D?t.once("SkinLoaded",J):J()};t.on("show",P),t.on("hide",T.hide),D||(t.on("focus",P),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||D)&&P()}),eO(t,s);const F={show:P,hide:T.hide,setEnabled:G=>{uy(s,G?"setEnabled":"setDisabled")},isEnabled:()=>!vn.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:F}}});const zj=()=>{const t=Xo(),s=Xo(),a=Xo();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(S=>S.mothership),b=s.get().map(S=>S.mothership);return h.fold(()=>b.toArray(),S=>b.fold(()=>[S],T=>So(S.element,T.element)?[S]:[S,T]))},lazyGetInOuterOrDie:(h,b)=>()=>a.get().bind(S=>b(S.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},Vj="contexttoolbar-show",aF="contexttoolbar-hide",ek=".tox-toolbar-slider__input,.tox-toolbar-textfield",tk=t=>{pr.getContent(t).each(s=>{ir(s.element,ek).fold(()=>Sn.focusIn(s),$c)})},ZR=t=>tc(t.element).each(s=>{ua(s,'[tabindex="-1"]').each(a=>{$c(a)})}),jR=on("forward-slide"),nk=on("backward-slide"),qR=on("change-slide-event"),ok="tox-pop--resizing",Uj=t=>{const s=mn([]);return pr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),pr.getContent(a).each(c=>{uo(c.element,"visibility")}),mr(a.element,ok),uo(a.element,"width")},onHide:()=>{t.onHide()},inlineBehaviours:Et([Yn("context-toolbar-events",[Ym(tp(),(a,c)=>{c.event.raw.propertyName==="width"&&(mr(a.element,ok),uo(a.element,"width"))}),ot(qR,(a,c)=>{const d=a.element;uo(d,"width");const h=no(d);uo(d,"left"),uo(d,"right"),uo(d,"max-width"),pr.setContent(a,c.event.contents),Lr(d,ok);const b=no(d);It(d,"transition","none"),pr.reposition(a),uo(d,"transition"),It(d,"width",h+"px"),c.event.focus.fold(()=>tk(a),S=>{$c(S),tc(d).isNone()&&tk(a)}),setTimeout(()=>{It(a.element,"width",b+"px")},0)}),ot(jR,(a,c)=>{pr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:cm(br(a.element))}]))}),bn(a,qR,{contents:c.event.forwardContents,focus:M.none()})}),ot(nk,(a,c)=>{t.onBack(),Xa(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),bn(a,qR,{contents:Tl(d.bar),focus:d.focus})})})]),Sn.config({mode:"special",onEscape:a=>Xa(s.get()).fold(()=>t.onEscape(),c=>(bo(a,nk),M.some(!0)))})]),lazySink:()=>Gn.value(t.sink)})},Pg=t=>{const s=Xo();return{setInputEnabled:a=>{a||ZR(t),vn.set(t,!a)},isInputEnabled:()=>!vn.isDisabled(t),hide:()=>{s.isSet()||s.set(Jt.getValue(t)),bo(t,Ha())},back:()=>{s.isSet()||s.set(Jt.getValue(t)),bo(t,nk)},getValue:()=>s.get().getOrThunk(()=>Jt.getValue(t)),setValue:a=>{s.isSet()?s.set(a):Jt.setValue(t,a)}}},iF=(t,s)=>ot(mB,(a,c)=>{const d=t.get(a),h=Pg(d);s.onAction(h,c.event.buttonApi)}),Wj=(t,s,a)=>{const{primary:c,...d}=s.original,h=bt(C_({...d,type:"button",onAction:de}));return K8(h,a,[iF(t,s)])},Zj=(t,s,a)=>{const{primary:c,...d}=s.original,h=bt(ly({...d,type:"togglebutton",onAction:de}));return zR(h,a,[iF(t,s)])},KC=t=>t.type==="contextformtogglebutton",jj=(t,s,a)=>KC(s)?Zj(t,s,a):Wj(t,s,a),cF=(t,s,a)=>{const c=$e(s,b=>Jo(jj(t,b,a)));return{asSpecs:()=>$e(c,b=>b.asSpec()),findPrimary:b=>Ss(s,(S,T)=>S.primary?M.from(c[T]).bind(D=>D.getOpt(b)).filter(Fe(vn.isDisabled)):M.none())}},qj=(t,s,a)=>{const{width:c,height:d}=t.initValue();return _B({inDialog:!1,label:t.label,enabled:!0,context:M.none(),name:M.none(),width:c,height:d,onEnter:M.some(a),onInput:M.some(h=>t.onInput(Pg(h))),onSetup:M.some(t.onSetup),getApi:M.some(Pg)},s)},GR=(t,s,a)=>Ho.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:Et([vn.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:c=>{ZR(c),Ho.getField(c).each(vn.disable)},onEnabled:c=>{Ho.getField(c).each(vn.enable)}})])}),Gj=(t,s,a)=>{const c=mn(de),d=t.label.map(b=>Ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(b))]})),h=Ho.parts.field({factory:Ef,type:"range",inputClasses:["tox-toolbar-slider__input"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:b=>Ve(b).getOr(t.min()),toInputValue:b=>String(b),inputBehaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),ha(()=>s.checkUiComponentContext("mode:design")),Sn.config({mode:"special",onEnter:a,onLeft:(b,S)=>(S.cut(),M.none()),onRight:(b,S)=>(S.cut(),M.none())}),Yn("slider-events",[kf({onSetup:t.onSetup,getApi:Pg,onBeforeSetup:Sn.focusIn},c),Ni({getApi:Pg},c),ot(Jl(),b=>{t.onInput(Pg(b))})])])});return GR(d,h,s)},lF=(t,s,a)=>{const c=mn(de),d=t.label.map(T=>Ho.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[nr(s.translate(T))]})),b={...t.placeholder.map(T=>({placeholder:s.translate(T)})).getOr({})},S=Ho.parts.field({factory:Ef,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],inputAttributes:b,data:t.initValue(),selectOnFocus:!0,inputBehaviours:Et([vn.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),ha(()=>s.checkUiComponentContext("mode:design")),Sn.config({mode:"special",onEnter:a,onLeft:(T,D)=>(D.cut(),M.none()),onRight:(T,D)=>(D.cut(),M.none())}),Yn("input-events",[kf({onSetup:t.onSetup,getApi:Pg,onBeforeSetup:Sn.focusIn},c),Ni({getApi:Pg},c),ot(Jl(),T=>{t.onInput(Pg(T))})])])});return GR(d,S,s)},KR=(t,s,a)=>{const d=Jo(t(a,T=>b.findPrimary(T).orThunk(()=>S.findPrimary(T)).map(D=>(Km(D),!0)))),h=Hs(s.commands,T=>T.align==="start"),b=cF(d,h.pass,a),S=cF(d,h.fail,a);return to([{title:M.none(),label:M.none(),items:b.asSpecs()},{title:M.none(),label:M.none(),items:[d.asSpec()]},{title:M.none(),label:M.none(),items:S.asSpecs()}],T=>T.items.length>0)},uF=(t,s)=>{switch(t.type){case"contextform":return KR(en(lF,t),t,s);case"contextsliderform":return KR(en(Gj,t),t,s);case"contextsizeinputform":return KR(en(qj,t),t,s)}},Kj={renderContextForm:(t,s,a)=>LT({type:t,uid:on("context-toolbar"),initGroups:uF(s,a),onEscape:M.none,cyclicKeying:!0,providers:a}),buildInitGroups:uF},dF=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,YC=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=hl(Ke.fromDom(t.startContainer),t.startOffset).element;return(rr(a)?Mr(a):M.some(a)).filter(lr).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},sk=t=>{const s=t.selection.getRng(),a=YC(s);if(t.inline){const c=ri();return fr(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=Ki(Ke.fromDom(t.getBody()));return fr(c.x+a.left,c.y+a.top,a.width,a.height)}},Yj=(t,s)=>s.filter(a=>ke(a)&&ds(a)).map(Ki).getOrThunk(()=>sk(t)),Xj=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},fF=(t,s,a,c,d,h)=>{const b=Ke.fromDom(t.getContainer()),S=ir(b,".tox-editor-header").getOr(b),T=Pr(S),D=T.y>=s.bottom,P=c&&!D;if(t.inline&&P)return{y:Math.max(T.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!P)return{y:a.y,bottom:Math.min(T.y-h,a.bottom)};const F=d==="line"?Pr(b):s;return P?{y:Math.max(T.bottom+h,a.y),bottom:Math.min(F.bottom-h,a.bottom)}:{y:Math.max(F.y+h,a.y),bottom:Math.min(T.y-h,a.bottom)}},rk=(t,s,a,c=0)=>{const d=bl(window),h=Pr(Ke.fromDom(t.getContentAreaContainer())),b=GE(t)||KE(t)||Hw(t),{x:S,width:T}=Xj(h,d,c);if(t.inline&&!b)return fr(S,d.y,T,d.height);{const D=s.header.isPositionedAtTop(),{y:P,bottom:F}=fF(t,h,d,D,a,c);return fr(S,P,T,F-P)}},XC=12,YR={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},mF={maxHeightFunction:Sp(),maxWidthFunction:wR()},$y=(t,s)=>{const a=t.selection.getRng(),c=hl(Ke.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&So(c.element,s)},ak=(t,s,a)=>{const c=fs(t,"position");It(t,"position",s);const d=a(t);return c.each(h=>It(t,"position",h)),d},JC=t=>t==="node",XR=(t,s,a,c,d)=>{const h=sk(t),b=c.lastElement().exists(S=>So(a,S));if($y(t,a))return b?lL:Mf;if(b)return ak(s,c.getMode(),()=>dF(h,Pr(s),-20)&&!c.isReposition()?uL:lL);{const S=c.getMode()==="fixed"?d.y+ri().top:d.y,T=xr(s)+XC;return S+T<=h.y?Mf:FC}},JR=(t,s,a,c)=>{const d=T=>(D,P,F,G,J)=>{const se=XR(t,G,T,a,J),ce={...D,y:J.y,height:J.height};return{...se(ce,P,F,G,J),alwaysFit:!0}},h=T=>JC(c)?[d(T)]:[];return s?{onLtr:T=>[da,wa,Ca,Da,ps,za].concat(h(T)),onRtl:T=>[da,Ca,wa,ps,Da,za].concat(h(T))}:{onLtr:T=>[za,da,Da,wa,ps,Ca].concat(h(T)),onRtl:T=>[za,da,ps,Ca,Da,wa].concat(h(T))}},hF=(t,s,a,c)=>s==="line"?{bubble:Du(XC,0,YR),layouts:{onLtr:()=>[J1],onRtl:()=>[iv]},overrides:mF}:{bubble:Du(0,XC,YR,1/XC),layouts:JR(t,a,c,s),overrides:mF},Hy=(t,s)=>{const a=to(s,h=>h.predicate(t.dom)),{pass:c,fail:d}=Hs(a,h=>h.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},gF=t=>{if(t.length<=1)return t;{const s=h=>Mn(t,b=>b.position===h),a=h=>to(t,b=>b.position===h),c=s("selection"),d=s("node");if(c||d)if(d&&c){const h=a("node"),b=$e(a("selection"),S=>({...S,position:"node"}));return h.concat(b)}else return a(c?"selection":"node");else return a("line")}},pF=t=>{if(t.length<=1)return t;{const s=c=>et(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>to(t,d=>d.position===c))}},QR=(t,s,a)=>{const c=Hy(t,s);if(c.contextForms.length>0)return M.some({elem:t,toolbars:[c.contextForms[0]]});{const d=Hy(t,a);if(d.contextForms.length>0)return M.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const h=gF(c.contextToolbars.concat(d.contextToolbars));return M.some({elem:t,toolbars:h})}else return M.none()}},Jj=(t,s,a)=>t(s)?M.none():$i(s,c=>{if(lr(c)){const{contextToolbars:d,contextForms:h}=Hy(c,a.inNodeScope),b=h.length>0?h:pF(d);return b.length>0?M.some({elem:c,toolbars:b}):M.none()}else return M.none()},t),bF=(t,s)=>{const a=Ke.fromDom(s.getBody()),c=b=>So(b,a),d=b=>!c(b)&&!Pc(a,b),h=Ke.fromDom(s.selection.getNode());return d(h)?M.none():QR(h,t.inNodeScope,t.inEditorScope).orThunk(()=>Jj(c,h,t))},Qj=(t,s)=>{const a={},c=[],d=[],h={},b={},S=(P,F)=>{const G=bt(Gs(F));a[P]=G,G.launch.map(J=>{h["form:"+P]={...F.launch,type:J.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(G)}}}),G.scope==="editor"?d.push(G):c.push(G),b[P]=G},T=(P,F)=>{IP(F).each(G=>{F.scope==="editor"?d.push(G):c.push(G),b[P]=G})},D=xs(t);return gt(D,P=>{const F=t[P];F.type==="contextform"||F.type==="contextsliderform"||F.type==="contextsizeinputform"?S(P,F):F.type==="contexttoolbar"&&T(P,F)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:b,formNavigators:h}},e5="tox-pop--transition",ik=(t,s,a,c)=>{const d=c.backstage,h=d.shared,b=dr().deviceType.isTouch,S=Xo(),T=Xo(),D=Xo(),P=Oi(Uj({sink:a,onEscape:()=>(t.focus(),mI(t),M.some(!0)),onHide:()=>{mI(t)},onBack:()=>{G9(t)}})),F=()=>{const Vt=D.get().getOr("node"),dn=JC(Vt)?1:0;return rk(t,h,Vt,dn)},G=()=>!t.removed&&!(b()&&d.isContextMenuOpen()),J=Vt=>Ur(La(Vt,S.get(),So),!0),se=()=>{if(G()){const Vt=F(),dn=Ur(D.get(),"node")?Yj(t,S.get()):sk(t);return Vt.height<=0||!dF(dn,Vt,.01)}else return!0},ce=()=>{S.clear(),T.clear(),D.clear(),pr.hide(P)},De=()=>{if(pr.isOpen(P)){const Vt=P.element;uo(Vt,"display"),se()?It(Vt,"display","none"):(T.set(0),pr.reposition(P))}},ue=Vt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Vt],behaviours:Et([Sn.config({mode:"acyclic"}),Yn("pop-dialog-wrap-events",[er(dn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Sn.focusIn(dn))}),sf(dn=>{t.shortcuts.remove("ctrl+F9")})])])}),Te=Wl(()=>Qj(s,Vt=>{const dn=We([Vt]);bn(P,jR,{forwardContents:ue(dn)})})),Oe=(Vt,dn)=>Fy(t,{buttons:Vt,toolbar:dn.items,allowToolbarGroups:!1},c.backstage,M.some(["form:"])),ze=(Vt,dn)=>Kj.buildInitGroups(Vt,dn),We=Vt=>{const{buttons:dn}=t.ui.registry.getAll(),wo=Te(),Ys={...dn,...wo.formNavigators},Go=ey(t)===Lu.scrolling?Lu.scrolling:Lu.default,gn=dt($e(Vt,pt=>pt.type==="contexttoolbar"?Oe(Ys,aC(pt)):ze(pt,h.providers)));return LT({type:Go,uid:on("context-toolbar"),initGroups:gn,onEscape:M.none,cyclicKeying:!0,providers:h.providers})},Mt=(Vt,dn)=>{const wo=Vt==="node"?h.anchors.node(dn):h.anchors.cursor(),Ys=hF(t,Vt,b(),{lastElement:S.get,isReposition:()=>Ur(T.get(),0),getMode:()=>Wa.getMode(a)});return Bs(wo,Ys)},tn=(Vt,dn)=>{if(an.cancel(),!G())return;const wo=We(Vt),Ys=Vt[0].position,Go=Mt(Ys,dn);D.set(Ys),T.set(1);const gn=P.element;uo(gn,"display"),J(dn)||(mr(gn,e5),Wa.reset(a,P)),pr.showWithinBounds(P,ue(wo),{anchor:Go,transition:{classes:[e5],mode:"placement"}},()=>M.some(F())),dn.fold(S.clear,S.set),se()&&It(gn,"display","none")};let nt=!1;const an=bD(()=>{if(!(!t.hasFocus()||t.removed||nt))if(Sc(P.element,e5))an.throttle();else{const Vt=Te();bF(Vt,t).fold(ce,dn=>{tn(dn.toolbars,M.some(dn.elem))})}},17);t.on("init",()=>{t.on("remove",ce),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",De),t.on("click keyup focus SetContent",an.throttle),t.on(aF,ce),t.on(Vj,Vt=>{const dn=Te();Tt(dn.lookupTable,Vt.toolbarKey).each(wo=>{tn([wo],En(Vt.target!==t,Vt.target)),tk(P)})}),t.on("focusout",Vt=>{FE.setEditorTimeout(t,()=>{tc(a.element).isNone()&&tc(P.element).isNone()&&ce()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ce()}),t.on("DisabledStateChange",Vt=>{Vt.state&&ce()}),t.on("ExecCommand",({command:Vt})=>{Vt.toLowerCase()==="toggleview"&&ce()}),t.on("AfterProgressState",Vt=>{Vt.state?ce():t.hasFocus()&&an.throttle()}),t.on("dragstart",()=>{nt=!0}),t.on("dragend drop",()=>{nt=!1}),t.on("NodeChange",Vt=>{tc(P.element).fold(an.throttle,de)})})},vF=t=>{gt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:rl(t,a.cmd),onSetup:dC(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ac(t),onAction:rl(t,"JustifyNone")})},yF=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=Xo();return $e(c,b=>({type:"togglemenuitem",text:s.display(b),onSetup:S=>{const T=P=>{P&&(h.on(F=>F.setActive(!1)),h.set(S)),S.setActive(P)};T(Ur(d,s.hash(b)));const D=s.watcher(t,b,T);return()=>{h.clear(),D()}},onAction:()=>s.setCurrent(t,b)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},eq=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:HN,hash:s=>ij(s,["fixed","relative","empty"]).getOr(s),display:Xt,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>M.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:ac(t),onMenuSetup:ac(t)}),tq=t=>M.from(_N(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:re(a),hash:c=>Zt(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,h)=>{var b;return c.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(b=d.customCode)!==null&&b!==void 0?b:null}).unbind},getCurrent:c=>{const d=Ke.fromDom(c.selection.getNode());return of(d,h=>M.some(h).filter(lr).bind(b=>ko(b,"lang").map(T=>{const D=ko(b,"data-mce-lang").getOrUndefined();return{code:T,customCode:D,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=Yi();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),Ub(d.clear,ac(t)(c))},onMenuSetup:ac(t)})),nq=t=>{yF(t,eq(t)),tq(t).each(s=>yF(t,s))},oq=(t,s)=>{QZ(t,s),sj(t,s),vj(t,s),A8(t,s),H8(t,s)},wF=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",it),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},CF=t=>Wb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),SF=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:CF(t),onAction:rl(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ac(t),onAction:rl(t,"indent")})},xF=t=>{SF(t)},EF=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),Ub(()=>t.off("PastePlainTextToggle",c),ac(t)(a))},_F=t=>{const s=mn(BN(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:EF(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:EF(t,s)})},ck=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},sq=t=>{Rg.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:dC(t,s.name),onAction:ck(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,c=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:dC(t,a),onAction:ck(t,a),shortcut:c})}},uX=t=>{Rg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:rl(t,s.action),shortcut:s.shortcut,context:s.context})}),Rg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ac(t),onAction:rl(t,s.action)})})},rq=t=>{Rg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:rl(t,s.action),onSetup:dC(t,s.name)})})},aq=t=>{sq(t),uX(t),rq(t)},iq=t=>{Rg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:rl(t,s.action),context:s.context})}),Rg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ac(t),onAction:rl(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ac(t),onAction:ck(t,"code")})},cq=t=>{aq(t),iq(t)},lk=(t,s)=>Wb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),lq=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:lk(t,"hasUndo"),onAction:rl(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:lk(t,"hasRedo"),onAction:rl(t,"redo")})},uq=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:lk(t,"hasUndo"),onAction:rl(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:lk(t,"hasRedo"),onAction:rl(t,"redo"),shortcut:"Meta+Y"})},dq=t=>{lq(t),uq(t)},fq=t=>Wb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),mq=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:fq(t),onAction:rl(t,"mceToggleVisualAid"),context:"any"})},hq=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:rl(t,"mceToggleVisualAid"),context:"any"})},gq=t=>{hq(t),mq(t)},pq=(t,s)=>{vF(t),cq(t),oq(t,s),dq(t),lz(t),gq(t),xF(t),nq(t),_F(t),wF(t)},TF=t=>j(t)?t.split(/[ ,]/):t,kF=t=>s=>s.options.get(t),bq=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:j(a)||xt(a,j)?{value:TF(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},AF=kF("contextmenu_never_use_native"),vq=kF("contextmenu_avoid_overlap"),yq=t=>OF(t).length===0,OF=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:to(a,c=>go(s,c))},QC=(t,s)=>({type:"makeshift",x:t,y:s}),wq=(t,s,a)=>QC(t.x+s,t.y+a),DF=t=>t.type==="longpress"||t.type.indexOf("touch")===0,t5=t=>{if(DF(t)){const s=t.touches[0];return QC(s.pageX,s.pageY)}else return QC(t.pageX,t.pageY)},Cq=t=>{if(DF(t)){const s=t.touches[0];return QC(s.clientX,s.clientY)}else return QC(t.clientX,t.clientY)},Sq=(t,s)=>{const a=Bw.DOM.getPos(t);return wq(s,a.x,a.y)},n5=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?t5(s):Sq(t.getContentAreaContainer(),Cq(s)):o5(t),o5=t=>({type:"selection",root:Ke.fromDom(t.selection.getNode())}),RF=t=>({type:"node",node:M.some(Ke.fromDom(t.selection.getNode())),root:Ke.fromDom(t.getBody())}),MF=(t,s,a)=>{switch(a){case"node":return RF(t);case"point":return n5(t,s);case"selection":return o5(t)}},xq=(t,s,a,c,d,h)=>{const b=a(),S=MF(t,s,h);xy(b,xf.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:M.none()}).map(T=>{s.preventDefault(),pr.showMenuAt(d,{anchor:S},{menu:{markers:o1("normal")},data:T})})},Eq={onLtr:()=>[da,wa,Ca,Da,ps,za,Mf,FC,LC,yT,d1,Ey],onRtl:()=>[da,Ca,wa,ps,Da,za,Mf,FC,d1,Ey,LC,yT]},_q=12,Tq={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},s5=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return Ux(t.getWin(),Tp.domRange(d)).exists(b=>b.left<=c.clientX&&b.right>=c.clientX&&b.top<=c.clientY&&b.bottom>=c.clientY)}},kq=t=>{const s=t.selection.getRng(),a=()=>{FE.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const c=b=>{b.preventDefault(),b.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},NF=(t,s,a)=>{const c=MF(t,s,a);return{bubble:Du(0,a==="point"?_q:0,Tq),layouts:Eq,overrides:{maxWidthFunction:wR(),maxHeightFunction:Sp()},...c}},Aq=(t,s,a,c,d,h,b)=>{const S=NF(t,s,h);xy(a,xf.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:M.none()}).map(T=>{s.preventDefault();const D=b?ja.HighlightMenuAndItem:ja.HighlightNone;pr.showMenuWithinBounds(d,{anchor:S},{menu:{markers:o1("normal"),highlightOnOpen:D},data:T,type:"horizontal"},()=>M.some(rk(t,c.shared,h==="node"?"node":"selection"))),t.dispatch(aF)})},Oq=(t,s,a,c,d,h)=>{const b=dr(),S=b.os.isiOS(),T=b.os.isMacOS(),D=b.os.isAndroid(),P=b.deviceType.isTouch(),F=()=>!(D||S||T&&P),G=()=>{const J=a();Aq(t,s,J,c,d,h,F())};if((T||S)&&h!=="node"){const J=()=>{kq(t),G()};s5(t,s)?J():(t.once("selectionchange",J),t.once("touchend",()=>t.off("selectionchange",J)))}else G()},uk=t=>j(t)?t==="|":t.type==="separator",r5={type:"separator"},a5=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(j(t))return t;switch(t.type){case"separator":return r5;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return j(c)?c:$e(c,a5)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Je(a.onAction)}}},PF=(t,s)=>{if(s.length===0)return t;const c=Xa(t).filter(d=>!uk(d)).fold(()=>[],d=>[r5]);return t.concat(c).concat(s).concat([r5])},Dq=(t,s,a)=>{const c=zo(s,(d,h)=>Tt(t,h.toLowerCase()).map(b=>{const S=b.update(a);if(j(S)&&pe(Rr(S)))return PF(d,S.split(" "));if(Ce(S)&&S.length>0){const T=$e(S,a5);return PF(d,T)}else return d}).getOrThunk(()=>d.concat([h])),[]);return c.length>0&&uk(c[c.length-1])&&c.pop(),c},i5=(t,s)=>s.ctrlKey&&!AF(t),Rq=t=>t.type==="longpress"||go(t,"touches"),IF=(t,s)=>!Rq(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),BF=(t,s)=>IF(t,s)?t.selection.getStart(!0):s.target,Mq=(t,s)=>{const a=vq(t),c=IF(t,s)?"selection":"point";if(pe(a)){const d=BF(t,s);return Sm(Ke.fromDom(d),a)?"node":c}else return c},Nq=(t,s,a)=>{const d=dr().deviceType.isTouch,h=Oi(pr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Et([Yn("dismissContextMenu",[ot(hd(),(T,D)=>{Po.close(T),t.focus()})])])})),b=()=>pr.hide(h),S=T=>{if(AF(t)&&T.preventDefault(),i5(t,T)||yq(t))return;const D=Mq(t,T),P=()=>{const G=BF(t,T),J=t.ui.registry.getAll(),se=OF(t);return Dq(J.contextMenus,se,G)};(d()?Oq:xq)(t,T,P,a,h,D)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,b),t.on("longpress contextmenu",S)})},dk=Se.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),fk=t=>s=>s.translate(-t.left,-t.top),mk=t=>s=>s.translate(t.left,t.top),Ig=t=>(s,a)=>zo(t,(c,d)=>d(c),Ds(s,a)),hk=(t,s,a)=>t.fold(Ig([mk(a),fk(s)]),Ig([fk(s)]),Ig([])),zy=(t,s,a)=>t.fold(Ig([mk(a)]),Ig([]),Ig([mk(s)])),LF=(t,s,a)=>t.fold(Ig([]),Ig([fk(a)]),Ig([mk(s),fk(a)])),Pq=(t,s,a,c,d,h)=>{const b=zy(t,d,h),S=zy(s,d,h);return Math.abs(b.left-S.left)<=a&&Math.abs(b.top-S.top)<=c},Iq=(t,s,a,c,d,h)=>{const b=zy(t,d,h),S=zy(s,d,h),T=Math.abs(b.left-S.left),D=Math.abs(b.top-S.top);return Ds(T,D)},c5=(t,s,a)=>{const c=t.fold((d,h)=>({position:M.some("absolute"),left:M.some(d+"px"),top:M.some(h+"px")}),(d,h)=>({position:M.some("absolute"),left:M.some(d-a.left+"px"),top:M.some(h-a.top+"px")}),(d,h)=>({position:M.some("fixed"),left:M.some(d+"px"),top:M.some(h+"px")}));return{right:M.none(),bottom:M.none(),...c}},Bq=(t,s,a)=>t.fold((c,d)=>pk(c+s,d+a),(c,d)=>g1(c+s,d+a),(c,d)=>n0(c+s,d+a)),gk=(t,s,a,c)=>{const d=(h,b)=>(S,T)=>{const D=h(s,a,c);return b(S.getOr(D.left),T.getOr(D.top))};return t.fold(d(LF,pk),d(zy,g1),d(hk,n0))},pk=dk.offset,g1=dk.absolute,n0=dk.fixed,p1=(t,s)=>{const a=Vn(t,s);return Zt(a)?NaN:parseInt(a,10)},FF=(t,s)=>{const a=t.element,c=p1(a,s.leftAttr),d=p1(a,s.topAttr);return isNaN(c)||isNaN(d)?M.none():M.some(Ds(c,d))},Lq=(t,s,a)=>{const c=t.element;$t(c,s.leftAttr,a.left+"px"),$t(c,s.topAttr,a.top+"px")},Fq=(t,s)=>{const a=t.element;ee(a,s.leftAttr),ee(a,s.topAttr)},$q=(t,s,a,c)=>FF(t,s).fold(()=>a,d=>n0(d.left+c.left,d.top+c.top)),Hq=(t,s,a,c,d,h)=>{const b=$q(t,s,a,c),S=s.mustSnap?zq(t,s,b,d,h):Vq(t,s,b,d,h),T=hk(b,d,h);return Lq(t,s,T),S.fold(()=>({coord:n0(T.left,T.top),extra:M.none()}),D=>({coord:D.output,extra:D.extra}))},$F=(t,s)=>{Fq(t,s)},HF=(t,s,a,c)=>Ss(t,d=>{const h=d.sensor;return Pq(s,h,d.range.left,d.range.top,a,c)?M.some({output:gk(d.output,s,a,c),extra:d.extra}):M.none()}),zq=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return HF(h,a,c,d).orThunk(()=>zo(h,(T,D)=>{const P=D.sensor,F=Iq(a,P,D.range.left,D.range.top,c,d);return T.deltas.fold(()=>({deltas:M.some(F),snap:M.some(D)}),G=>{const J=(F.left+F.top)/2,se=(G.left+G.top)/2;return J<=se?{deltas:M.some(F),snap:M.some(D)}:T})},{deltas:M.none(),snap:M.none()}).snap.map(T=>({output:gk(T.output,a,c,d),extra:T.extra})))},Vq=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return HF(h,a,c,d)},Uq=(t,s,a)=>({coord:gk(t.output,t.output,s,a),extra:t.extra});var Wq=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Us(t.element),b=ri(h),S=Kh(d),T=Uq(c,b,S),D=c5(T.coord,b,S);na(d,D)}}});const l5="data-initial-z-index",Zq=t=>{Mr(t.element).filter(lr).each(s=>{ko(s,l5).fold(()=>uo(s,"z-index"),a=>It(s,"z-index",a)),ee(s,l5)})},jq=t=>{Mr(t.element).filter(lr).each(s=>{fs(s,"z-index").each(a=>{$t(s,l5,a)}),It(s,"z-index",ut(t.element,"z-index"))})},zF=(t,s)=>{t.getSystem().addToGui(s),jq(s)},VF=t=>{Zq(t),t.getSystem().removeFromGui(t)},u5=(t,s,a)=>t.getSystem().build(xm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var qq=jr("snaps",[st("getSnapPoints"),Ao("onSensor"),st("leftAttr"),st("topAttr"),Pe("lazyViewport",ea),Pe("mustSnap",!1)]);const o0=[Pe("useFixed",at),st("blockerClass"),Pe("getTarget",Xt),Pe("onDrag",de),Pe("repositionTarget",!0),Pe("onDrop",de),os("getBounds",ea),qq],Gq=t=>Ii(fs(t,"left"),fs(t,"top"),fs(t,"position"),(s,a,c)=>(c==="fixed"?n0:pk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=_a(t);return g1(s.left,s.top)}),Kq=(t,s,a,c,d)=>{const h=d.bounds,b=zy(s,a,c),S=tu(b.left,h.x,h.x+h.width-d.width),T=tu(b.top,h.y,h.y+h.height-d.height),D=g1(S,T);return s.fold(()=>{const P=LF(D,a,c);return pk(P.left,P.top)},re(D),()=>{const P=hk(D,a,c);return n0(P.left,P.top)})},d5=(t,s,a,c,d,h,b)=>{const S=s.fold(()=>{const T=Bq(a,h.left,h.top),D=hk(T,c,d);return n0(D.left,D.top)},T=>{const D=Hq(t,T,a,h,c,d);return D.extra.each(P=>{T.onSensor(t,P)}),D.coord});return Kq(t,S,c,d,b)},Yq=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Us(t.element),b=ri(h),S=Kh(d),T=Gq(d),D=d5(t,s.snaps,T,b,S,c,a),P=c5(D,b,S);na(d,P)}s.onDrag(t,d,c)},UF=(t,s)=>({bounds:t.getBounds(),height:zl(s.element),width:gl(s.element)}),f5=(t,s,a,c,d)=>{const h=a.update(c,d),b=a.getStartData().getOrThunk(()=>UF(s,t));h.each(S=>{Yq(t,s,b,S)})},WF=(t,s,a,c)=>{s.each(VF),a.snaps.each(h=>{$F(t,h)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},m5=t=>(s,a)=>{const c=d=>{a.setStartData(UF(s,d))};return ms([ot(P1(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},Xq=t=>ms([ot(Bc(),t.forceDrop),ot(ud(),t.drop),ot(Vh(),(s,a)=>{t.move(a.event)}),ot(Xf(),t.delayDrop)]);var Jq=Object.freeze({__proto__:null,getData:t=>M.from(Ds(t.x,t.y)),getDelta:(t,s)=>Ds(s.left-t.left,s.top-t.top)});const ZF=(t,s,a)=>[ot(Bc(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const b=()=>WF(c,M.some(D),t,s),S=qI(b,200),T={drop:b,delayDrop:S.schedule,forceDrop:b,move:F=>{S.cancel(),f5(c,t,s,Jq,F)}},D=u5(c,t.blockerClass,Xq(T));(()=>{a(c),zF(c,D)})()})],Qq=[...o0,tr("dragger",{handlers:m5(ZF)})],eG=t=>ms([ot(xo(),t.forceDrop),ot(va(),t.drop),ot(Cc(),t.drop),ot(Fs(),(s,a)=>{t.move(a.event)})]),tG=t=>{const s=t[0];return M.some(Ds(s.clientX,s.clientY))};var jF=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?tG(a):M.none()},getDelta:(t,s)=>Ds(s.left-t.left,s.top-t.top)});const qF=(t,s,a)=>{const c=Xo(),d=h=>{WF(h,c.get(),t,s),c.clear()};return[ot(xo(),(h,b)=>{b.stop();const S=()=>d(h),T={drop:S,delayDrop:de,forceDrop:S,move:F=>{f5(h,t,s,jF,F)}},D=u5(h,t.blockerClass,eG(T));c.set(D),(()=>{a(h),zF(h,D)})()}),ot(Fs(),(h,b)=>{b.stop(),f5(h,t,s,jF,b.event)}),ot(va(),(h,b)=>{b.stop(),d(h)}),ot(Cc(),d)]},bk=[...o0,tr("dragger",{handlers:m5(qF)})],nG=(t,s,a)=>[...ZF(t,s,a),...qF(t,s,a)],oG=[...o0,tr("dragger",{handlers:m5(nG)})];var sG=Object.freeze({__proto__:null,mouse:Qq,touch:bk,mouseOrTouch:oG}),aG=Object.freeze({__proto__:null,init:()=>{let t=M.none(),s=M.none();const a=()=>{t=M.none(),s=M.none()},c=(T,D)=>{const P=t.map(F=>T.getDelta(F,D));return t=M.some(D),P},d=(T,D)=>T.getData(D).bind(P=>c(T,P)),h=T=>{s=M.some(T)},b=()=>s,S=re({});return ui({readState:S,reset:a,update:d,getStartData:b,setStartData:h})}});const s0=V1({branchKey:"mode",branches:sG,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:M.from(t.extra)})},state:aG,apis:Wq}),h5=40,vk=h5/2,GF=(t,s,a,c,d,h)=>t.fold(()=>s0.snap({sensor:g1(a-vk,c-vk),range:Ds(d,h),output:g1(M.some(a),M.some(c)),extra:{td:s}}),b=>{const S=a-vk,T=c-vk,D=h5,P=h5,F=b.element.dom.getBoundingClientRect();return s0.snap({sensor:g1(S,T),range:Ds(D,P),output:g1(M.some(a-F.width/2),M.some(c-F.height/2)),extra:{td:s}})}),yk=(t,s,a)=>{const c=(d,h)=>d.exists(b=>So(b,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const b=h.td;c(s.get(),b)||(s.set(b),a(b))},mustSnap:!0}},g5=t=>Jo(Ma.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Et([s0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),al.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),iG=(t,s)=>{const a=mn([]),c=mn([]),d=mn(!1),h=Xo(),b=Xo(),S=tn=>{const nt=Ki(tn);return GF(J.getOpt(s),tn,nt.x,nt.y,nt.width,nt.height)},T=()=>$e(a.get(),tn=>S(tn)),D=tn=>{const nt=Ki(tn);return GF(se.getOpt(s),tn,nt.right,nt.bottom,nt.width,nt.height)},P=()=>$e(c.get(),tn=>D(tn)),F=yk(T,h,tn=>{b.get().each(nt=>{t.dispatch("TableSelectorChange",{start:tn,finish:nt})})}),G=yk(P,b,tn=>{h.get().each(nt=>{t.dispatch("TableSelectorChange",{start:nt,finish:tn})})}),J=g5(F),se=g5(G),ce=Oi(J.asSpec()),De=Oi(se.asSpec()),ue=(tn,nt,an,Vt)=>{const dn=nt.dom.getBoundingClientRect();uo(tn.element,"display");const wo=Ic(Ke.fromDom(t.getBody())).dom.innerHeight,Ys=an(dn),Go=Vt(dn,wo);(Ys||Go)&&It(tn.element,"display","none")},Te=(tn,nt,an,Vt)=>{const dn=an(nt);s0.snapTo(tn,dn),ue(tn,nt,Go=>Go[Vt]<0,(Go,gn)=>Go[Vt]>gn)},Oe=tn=>Te(ce,tn,S,"top"),ze=()=>h.get().each(Oe),We=tn=>Te(De,tn,D,"bottom"),Mt=()=>b.get().each(We);if(dr().deviceType.isTouch()){const tn=nt=>$e(nt,Ke.fromDom);t.on("TableSelectionChange",nt=>{d.get()||(vf(s,ce),vf(s,De),d.set(!0));const an=Ke.fromDom(nt.start),Vt=Ke.fromDom(nt.finish);h.set(an),b.set(Vt),M.from(nt.otherCells).each(dn=>{a.set(tn(dn.upOrLeftCells)),c.set(tn(dn.downOrRightCells)),Oe(an),We(Vt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ze(),Mt()}),t.on("TableSelectionClear",()=>{d.get()&&(yf(ce),yf(De),d.set(!1)),h.clear(),b.clear()})}};var cG=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const lG=(t,s)=>{const a=M.from(Vn(t,"id")).getOrThunk(()=>{const c=on("aria");return $t(s,"id",c),c});$t(t,"aria-describedby",a)},uG=t=>{ee(t,"aria-describedby")},dG=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",fG=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"›",h=(D,P,F)=>Ma.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":F}},components:[nr(D)],action:G=>{t.focus(),t.selection.select(P),t.nodeChanged()},buttonBehaviours:Et([kr.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",P.nodeName.toLowerCase()]),onShow:(G,J)=>{lG(G.element,J.element)},onHide:G=>{uG(G.element)}})}),Dd.button(a.isDisabled),ha(()=>a.checkUiComponentContext("any"))])}),b=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[nr(` ${d} `)]}),S=D=>zo(D,(P,F,G)=>{const J=h(F.name,F.element,G);return G===0?P.concat([J]):P.concat([b(),J])},[]),T=D=>{const P=[];let F=D.length;for(;F-- >0;){const G=D[F];if(G.nodeType===1&&!dG(G)){const J=$9(t,G);if(J.isDefaultPrevented()||P.push({name:J.name,element:G}),J.isPropagationStopped())break}}return P};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Et([Sn.config({mode:"flow",selector:"div[role=button]"}),vn.config({disabled:a.isDisabled}),ha(()=>a.checkUiComponentContext("any")),cr.config({}),Wn.config({}),Yn("elementPathEvents",[er((D,P)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Sn.focusIn(D)),t.on("NodeChange",F=>{const G=T(F.parents),J=G.length>0?S(G):[];Wn.set(D,J)})})])]),components:[]}};var b1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(b1||(b1={}));const mG=(t,s,a,c,d)=>{const h={height:JT(c+s.top,Q3(t),Qv(t))};return a===b1.Both&&(h.width=JT(d+s.left,Fw(t),Jp(t))),h},KF=(t,s,a)=>{const c=Ke.fromDom(t.getContainer()),d=mG(t,s,a,xr(c),no(c));Ts(d,(h,b)=>{ln(h)&&It(c,b,VR(h))}),F9(t)},hG=t=>{const s=IN(t);return s===!1?b1.None:s==="both"?b1.Both:b1.Vertical},wk=(t,s,a,c)=>{const h=Ds(a*20,c*20);return KF(t,h,s),M.some(!0)},gG=(t,s)=>{const a=hG(t);if(a===b1.None)return M.none();const c=a===b1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return M.some(Fu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(c),"data-mce-name":"resize-handle"},behaviours:[s0.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,b)=>KF(t,b,a),blockerClass:"tox-blocker"}),Sn.config({mode:"special",onLeft:()=>wk(t,a,-1,0),onRight:()=>wk(t,a,1,0),onUp:()=>wk(t,a,0,-1),onDown:()=>wk(t,a,0,1)}),cr.config({}),$n.config({}),kr.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},pG=(t,s)=>{const a=(c,d,h)=>Wn.set(c,[nr(s.translate(["{0} "+h,d[h]]))]);return Ma.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Et([Dd.button(s.isDisabled),ha(()=>s.checkUiComponentContext("any")),cr.config({}),Wn.config({}),Jt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Yn("wordcount-events",[rf(c=>{const d=Jt.getValue(c),h=d.mode==="words"?"characters":"words";Jt.setValue(c,{mode:h,count:d.count}),a(c,d.count,h)}),er(c=>{t.on("wordCountUpdate",d=>{const{mode:h}=Jt.getValue(c);Jt.setValue(c,{mode:h,count:d.wordCount}),a(c,d.wordCount,h)})})])]),eventOrder:{[ki()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},bG=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",cG.trim()])},behaviours:Et([$n.config({})])}]}),c=()=>{const S=tO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[nr(kd.translate(["Press {0} for help",S]))]}},d=()=>{const S=[];return t.hasPlugin("wordcount")&&S.push(pG(t,s)),iA(t)&&S.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:S}},h=()=>{const S=[],T=qE(t),D=PN(t),P=iA(t)||t.hasPlugin("wordcount"),F=()=>{const G="tox-statusbar__text-container--flex-start",J="tox-statusbar__text-container--flex-end",se="tox-statusbar__text-container--space-around";if(T){const ce="tox-statusbar__text-container-3-cols";return!P&&!D?[ce,se]:P&&!D?[ce,J]:[ce,G]}return[P&&!D?J:G]};return D&&S.push(fG(t,{},s)),T&&S.push(c()),P&&S.push(d()),S.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...F()]},components:S}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const S=h(),T=gG(t,s);return S.concat(T.toArray())})()}},p5=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),vG=(t,s)=>{const a=t.inline,c=a?Hj:Bj,d=Qp(t)?VC:IW,h=zj(),b=Xo(),S=Xo(),T=Xo(),G=dr().deviceType.isTouch()?["tox-platform-touch"]:[],J=uA(t),se=ey(t),ce=Jo({dom:{tag:"div",classes:["tox-anchorbar"]}}),De=Jo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ue=()=>h.mainUi.get().map(Tn=>Tn.outerContainer).bind(Ks.getHeader),Te=()=>Gn.fromOption(h.dialogUi.get().map(Tn=>Tn.sink),"UI has not been rendered"),Oe=()=>Gn.fromOption(h.popupUi.get().map(Tn=>Tn.sink),"(popup) UI has not been rendered"),ze=h.lazyGetInOuterOrDie("anchor bar",ce.getOpt),We=h.lazyGetInOuterOrDie("bottom anchor bar",De.getOpt),Mt=h.lazyGetInOuterOrDie("toolbar",Ks.getToolbar),tn=h.lazyGetInOuterOrDie("throbber",Ks.getThrobber),nt=xT({popup:Oe,dialog:Te},t,ze,We),an=()=>{const Tn={attributes:{[ih]:J?lm.BottomToTop:lm.TopToBottom}},Xn=Ks.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:nt.popup,onEscape:()=>{t.focus()}}),ks=Ks.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:nt.popup.shared.getSink,providers:nt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:xh=>{fI(t,xh)},type:se,lazyToolbar:Mt,lazyHeader:()=>ue().getOrDie("Could not find header element"),...Tn}),bs=Ks.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:nt.popup.shared.providers,onEscape:()=>{t.focus()},type:se}),Ll=Hw(t),yr=KE(t),Wu=GE(t),fc=cA(t),Zu=Vt(),ju=Ll||yr||Wu,Bf=()=>Ll?[bs]:yr?[ks]:[],rS=fc?[Zu,Xn]:[Xn];return Ks.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(ju?[]:["tox-editor-header--empty"]),...Tn},components:dt([Wu?rS:[],Bf(),Cf(t)?[]:[ce.asSpec()]]),sticky:Qp(t),editor:t,sharedBackstage:nt.popup.shared})},Vt=()=>Ks.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),dn=()=>{const Tn=Ks.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Xn=Ks.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Tn,Xn]}},wo=()=>{const Tn=dA(t),Xn=So(Ye(),Tn)&&ut(Tn,"display")==="grid",ks={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(G),attributes:{...kd.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Wa.config({useFixed:()=>d.isDocked(ue)})])},bs={dom:{styles:{width:document.body.clientWidth+"px"}},events:ms([ot(Qf(),Wu=>{It(Wu.element,"width",document.body.clientWidth+"px")})])},Ll=Oi(Bs(ks,Xn?bs:{})),yr=NO(Ll);return S.set(yr),{sink:Ll,mothership:yr}},Ys=()=>{const Tn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(G),attributes:{...kd.isRtl()?{dir:"rtl"}:{}}},behaviours:Et([Wa.config({useFixed:()=>d.isDocked(ue),getBounds:()=>s.getPopupSinkBounds()})])},Xn=Oi(Tn),ks=NO(Xn);return T.set(ks),{sink:Xn,mothership:ks}},Go=()=>{const Tn=an(),Xn=dn(),ks=Ks.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:nt.popup}),bs=Ks.parts.viewWrapper({backstage:nt.popup}),Ll=jE(t)&&!a?M.some(bG(t,nt.popup.shared.providers)):M.none(),yr=dt([J?[]:[Tn],a?[]:[Xn],J?[Tn]:[]]),Wu=Ks.parts.editorContainer({components:dt([yr,a?[]:[De.asSpec()]])}),fc=fA(t),Zu={role:"application",...kd.isRtl()?{dir:"rtl"}:{},...fc?{"aria-hidden":"true"}:{}},ju=Oi(Ks.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(J?["tox-tinymce--toolbar-bottom"]:[]).concat(G),styles:{visibility:"hidden",...fc?{opacity:"0",border:"0"}:{}},attributes:Zu},components:[Wu,...a?[]:[bs,...Ll.toArray()],ks],behaviours:Et([ha(()=>nt.popup.shared.providers.checkUiComponentContext("any")),vn.config({disableClass:"tox-tinymce--disabled"}),Sn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Bf=NO(ju);return b.set(Bf),{mothership:Bf,outerContainer:ju}},gn=Tn=>{const Xn=VR(Lj(t)),ks=VR(Fj(t));return t.inline||(ur("div","width",ks)&&It(Tn.element,"width",ks),ur("div","height",Xn)?It(Tn.element,"height",Xn):It(Tn.element,"height","400px")),Xn},pt=Tn=>{t.addShortcut("alt+F9","focus menubar",()=>{Ks.focusMenubar(Tn)}),t.addShortcut("alt+F10","focus toolbar",()=>{Ks.focusToolbar(Tn)}),t.addCommand("ToggleToolbarDrawer",(Xn,ks)=>{ks!=null&&ks.skipFocus?Ks.toggleToolbarDrawerWithoutFocusing(Tn):Ks.toggleToolbarDrawer(Tn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Ks.isToolbarDrawerToggled(Tn))},Wt=Tn=>{const{mainUi:Xn,popupUi:ks,uiMotherships:bs}=Tn;Ko(VE(t),(f0,A5)=>{t.ui.registry.addGroupToolbarButton(A5,f0)});const{buttons:Ll,menuItems:yr,contextToolbars:Wu,sidebars:fc,views:Zu}=t.ui.registry.getAll(),ju=YE(t),Bf={menuItems:yr,menus:zN(t),menubar:ON(t),toolbar:ju.getOrThunk(()=>WE(t)),allowToolbarGroups:se===Lu.floating,buttons:Ll,sidebar:fc,views:Zu};pt(Xn.outerContainer),OW(t,Xn.mothership,bs),d.setup(t,nt.popup.shared,ue),pq(t,nt.popup),Nq(t,nt.popup.shared.getSink,nt.popup),GW(t),GL(t,tn,nt.popup.shared),ik(t,Wu,ks.sink,{backstage:nt.popup}),iG(t,ks.sink);const rS=t.getElement(),xh=gn(Xn.outerContainer),k5={targetNode:rS,height:xh};return c.render(t,Tn,Bf,nt.popup,k5)},Un=Tn=>(T.set(Tn.mothership),Tn),ro=()=>{const Tn=Go(),Xn=wo(),ks=Eg(t)?Ys():Un(Xn);h.dialogUi.set(Xn),h.popupUi.set(ks),h.mainUi.set(Tn);const bs={popupUi:ks,dialogUi:Xn,mainUi:Tn,uiMotherships:h.getUiMotherships()};return Wt(bs)};return{popups:{backstage:nt.popup,getMothership:()=>p5("popups",T)},dialogs:{backstage:nt.dialog,getMothership:()=>p5("dialogs",S)},renderUI:ro}},yG=t=>t.dom.textContent,wG=(t,s)=>{const a=ko(t,"id").fold(()=>{const c=on("dialog-label");return $t(s,"id",c),c},Xt);$t(t,"aria-labelledby",a)},CG=re([st("lazySink"),Uo("dragBlockClass"),os("getBounds",ea),Pe("useTabstopAt",it),Pe("firstTabstop",0),Pe("eventOrder",{}),Za("modalBehaviours",[Sn]),ec("onExecute"),bp("onEscape")]),b5={sketch:Xt},SG=re([zc({name:"draghandle",overrides:(t,s)=>({behaviours:Et([s0.config({mode:"mouse",getTarget:a=>ua(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Mi({schema:[st("dom")],name:"title"}),Mi({factory:b5,schema:[st("dom")],name:"close"}),Mi({factory:b5,schema:[st("dom")],name:"body"}),zc({factory:b5,schema:[st("dom")],name:"footer"}),ou({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Pe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Pe("components",[])],name:"blocker"})]),xG=(t,s,a,c)=>{const d=Xo(),h=se=>{d.set(se);const ce=t.lazySink(se).getOrDie(),De=c.blocker(),ue=ce.getSystem().build({...De,components:De.components.concat([Tl(se)]),behaviours:Et([$n.config({}),Yn("dialog-blocker-events",[Ym(fd(),()=>{Id.isBlocked(se)?de():Sn.focusIn(se)})])])});vf(ce,ue),Sn.focusIn(se)},b=se=>{d.clear(),Mr(se.element).each(ce=>{se.getSystem().getByDom(ce).each(De=>{yf(De)})})},S=se=>nl(se,t,"body"),T=se=>Rs(se,t,"footer"),D=(se,ce)=>{Id.block(se,ce)},P=se=>{Id.unblock(se)},F=on("modal-events"),G={...t.eventOrder,[Ji()]:[F].concat(t.eventOrder["alloy.system.attached"]||[])},J=dr();return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:b,getBody:S,getFooter:T,setIdle:P,setBusy:D},eventOrder:G,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Fr(t.modalBehaviours,[Wn.config({}),Sn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),Id.config({getRoot:d.get}),Yn(F,[er(se=>{const ce=nl(se,t,"title").element,De=yG(ce);J.os.isMacOS()&&Ct(De)?$t(se.element,"aria-label",De):wG(se.element,ce)})])])}},Ka=rc({name:"ModalDialog",configFields:CG(),partFields:SG(),factory:xG,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),YF=Fn([ma,FA].concat(Fb)),XF=xl,v5=[w_("button"),$u,li("align","end",["start","end"]),y_,_f,ep("buttonType",["primary","secondary"]),Ls("context","mode:design")],Ck=[...v5,_g],r0=[ka("type",["submit","cancel","custom"]),...Ck],y5=[ka("type",["menu"]),r1,ry,$u,wc("items",YF),...v5],Sk=[...v5,ka("type",["togglebutton"]),ry,$u,r1,Aa("active",!1)],a0=aa("type",{submit:r0,cancel:r0,custom:r0,menu:y5,togglebutton:Sk}),xk=[ma,_g,ka("level",["info","warn","error","success"]),kP,Pe("url","")],EG=Fn(xk),JF=t=>[ma,t],QF=[ma,_g,_f,w_("button"),$u,UA,ep("buttonType",["primary","secondary","toolbar"]),y_,Ls("context","mode:design")],e$=Fn(QF),Vy=[ma,FA],Tm=Vy.concat([zA]),_G=Vy.concat([$A,_f,Ls("context","mode:design")]),t$=Fn(_G),n$=xl,w5=Tm.concat([DP("auto"),Ls("context","mode:design")]),TG=Fn(w5),kG=Xg([nC,_g,kP]),AG=Tm.concat([Ls("storageKey","default"),Ls("context","mode:design")]),OG=Fn(AG),eS=Ut,DG=Fn(Tm),o$=Ut,RG=Vy.concat([Ls("tag","textarea"),ta("scriptId"),ta("scriptUrl"),cd("onFocus"),_("settings",void 0)]),MG=Vy.concat([Ls("tag","textarea"),_l("init")]),NG=Lh(t=>ar("customeditor.old",ci(MG),t).orThunk(()=>ar("customeditor.new",ci(RG),t))),C5=Ut,S5=Tm.concat([Ls("context","mode:design")]),PG=Fn(S5),s$=Kf(),IG=t=>[ma,Qg("columns"),t],BG=[ma,ta("html"),li("presets","presentation",["presentation","document"]),os("onInit",de),Aa("stretched",!1)],r$=Fn(BG),LG=Tm.concat([Aa("border",!1),Aa("sandboxed",!0),Aa("streamContent",!1),Aa("transparent",!0)]),FG=Fn(LG),i0=Ut,a$=Fn(Vy.concat([hr("height")])),$G=Fn([ta("url"),Fh("zoom"),Fh("cachedWidth"),Fh("cachedHeight")]),Ek=Tm.concat([hr("inputMode"),hr("placeholder"),Aa("maximized",!1),_f,Ls("context","mode:design")]),Uy=Fn(Ek),_k=Ut,i$=t=>[ma,$A,t,li("align","start",["start","center","end"]),hr("for")],Tk=[_g,nC],Pl=[_g,wc("items",Zm("items",()=>tS))],tS=Qd([Fn(Tk),Fn(Pl)]),c$=Tm.concat([wc("items",tS),_f,Ls("context","mode:design")]),l$=Fn(c$),HG=Ut,zG=Tm.concat([D1("items",[_g,nC]),R1("size",1),_f,Ls("context","mode:design")]),v1=Fn(zG),wX=Ut,VG=Tm.concat([Aa("constrain",!0),_f,Ls("context","mode:design")]),u$=Fn(VG),c0=Fn([ta("width"),ta("height")]),kk=Vy.concat([$A,R1("min",0),R1("max",0)]),d$=Fn(kk),UG=ef,WG=[ma,wc("header",Ut),wc("cells",Jc(Ut))],ZG=Fn(WG),jG=Tm.concat([hr("placeholder"),Aa("maximized",!1),_f,Ls("context","mode:design")]),Wy=Fn(jG),CX=Ut,f$=[ka("type",["directory","leaf"]),TP,ta("id"),_u("menu",HW),hr("customStateIcon"),hr("customStateIconTooltip")],qG=Fn(f$),GG=f$.concat([wc("children",Zm("children",()=>tf("type",{directory:m$,leaf:qG})))]),m$=Fn(GG),nS=tf("type",{directory:m$,leaf:qG}),KG=[ma,wc("items",nS),cd("onLeafAction"),cd("onToggleExpand"),R("defaultExpandedIds",[],Ut),hr("defaultSelectedId")],YG=Fn(KG),h$=Tm.concat([li("filetype","file",["image","media","file"]),_f,hr("picker_text"),Ls("context","mode:design")]),XG=Fn(h$),xX=Fn([nC,WA]),e=t=>ia("items","items",Xc(),Jc(Lh(s=>ar(`Checking item of ${t}`,n,s).fold(a=>Gn.error(Gl(a)),a=>Gn.value(a))))),n=Zr(()=>tf("type",{alertbanner:EG,bar:Fn(JF(e("bar"))),button:e$,checkbox:t$,colorinput:OG,colorpicker:DG,dropzone:PG,grid:Fn(IG(e("grid"))),iframe:FG,input:Uy,listbox:l$,selectbox:v1,sizeinput:u$,slider:d$,textarea:Wy,urlinput:XG,customeditor:NG,htmlpanel:r$,imagepreview:a$,collection:TG,label:Fn(i$(e("label"))),table:ZG,tree:YG,panel:r})),o=[ma,Pe("classes",[]),wc("items",n)],r=Fn(o),i=[w_("tab"),TP,wc("items",n)],u=[ma,D1("tabs",i)],m=Fn(u),y=Ck,x=a0,A=Fn([ta("title"),qo("body",tf("type",{panel:r,tabpanel:m})),Ls("size","normal"),R("buttons",[],x),Pe("initialData",{}),os("onAction",de),os("onChange",de),os("onSubmit",de),os("onClose",de),os("onCancel",de),os("onTabChange",de)]),L=t=>ar("dialog",A,t),$=Fn([ka("type",["cancel","custom"]),...y]),z=Fn([ta("title"),ta("url"),Fh("height"),Fh("width"),$h("buttons",$),os("onAction",de),os("onCancel",de),os("onClose",de),os("onMessage",de)]),X=t=>ar("dialog",z,t),oe=t=>le(t)?[t].concat(xe(Zc(t),oe)):Ce(t)?xe(t,oe):[],te=t=>j(t.type)&&j(t.name),ie={checkbox:n$,colorinput:eS,colorpicker:o$,dropzone:s$,input:_k,iframe:i0,imagepreview:$G,selectbox:wX,sizeinput:c0,slider:UG,listbox:HG,size:c0,textarea:CX,urlinput:xX,customeditor:C5,collection:kG,togglemenuitem:XF},_e=t=>M.from(ie[t.type]),Re=t=>to(oe(t),te),Me=t=>{const s=Re(t),a=xe(s,c=>_e(c).fold(()=>[],d=>[qo(c.name,d)]));return Fn(a)},Ie=t=>{var s;const a=bt(L(t)),c=Me(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},ct={open:(t,s)=>{const a=Ie(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=bt(X(s));return t(a)},redial:t=>Ie(t)};var Qt=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(h=>{const b=h(c,d);s.set(b)}),t.renderComponents.each(h=>{const b=h(d,s.get());(t.reuseDom?rN:I3)(c,b)})};return ms([ot(Ql(),(c,d)=>{const h=d;if(!h.universal){const b=t.channel;yt(h.channels,b)&&a(c,h.data)}}),er((c,d)=>{t.initialData.each(h=>{a(c,h)})})])}}),Ze=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),mt=[st("channel"),Uo("renderComponents"),Uo("updateState"),Uo("initialData"),Aa("reuseDom",!0)],_n=Object.freeze({__proto__:null,init:()=>{const t=mn(M.none()),s=()=>t.set(M.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Zn=ya({fields:mt,name:"reflecting",active:Qt,apis:Ze,state:_n}),ho=t=>{const s=[],a={};return Ts(t,(c,d)=>{c.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?Gn.error(s):Gn.value(a)},cs=(t,s,a,c)=>{const d=Jo(Kb.sketch(h=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:$e(t.items,b=>oL(h,b,s,a,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:Fe(OC)}),lc.memento(d),Q6(d,{postprocess:h=>ho(h).fold(b=>(console.error(b),{}),Xt)}),Yn("dialog-body-panel",[ot(fd(),(h,b)=>{h.getSystem().broadcastOn([RC],{newFocus:M.some(b.event.target)})})])])}},Cs=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Xv(t.action),behaviours:Fr(t.tabButtonBehaviours,[$n.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0}),Jt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Gr=ol({name:"TabButton",configFields:[Pe("uid",void 0),st("value"),ia("dom","dom",k(()=>({attributes:{role:"tab",id:on("aria"),"aria-selected":"false"}})),Sl()),Uo("action"),Pe("domModification",{}),Za("tabButtonBehaviours",[$n,Sn,Jt]),st("view")],factory:Cs}),Zi=re([st("tabs"),st("dom"),Pe("clickToDismiss",!1),Za("tabbarBehaviours",[ft,Sn]),sm(["tabClass","selectedClass"])]),mi=Eb({factory:Gr,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{ft.dehighlight(c,d),bn(c,ES(),{tabbar:c,button:d})},a=(c,d)=>{ft.highlight(c,d),bn(c,xS(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),h=ft.isHighlighted(d,c);(h&&t.clickToDismiss?s:h?de:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),Ft=re([mi]),xn=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Fr(t.tabbarBehaviours,[ft.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{$t(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{$t(h.element,"aria-selected","false")}}),Sn.config({mode:"flow",getInitial:d=>ft.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Wo=rc({name:"Tabbar",configFields:Zi(),partFields:Ft(),factory:xn}),Yt=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Fr(t.tabviewBehaviours,[Wn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Bn=ol({name:"Tabview",configFields:[Za("tabviewBehaviours",[Wn])],factory:Yt}),zn=re([Pe("selectFirst",!0),Ao("onChangeTab"),Ao("onDismissTab"),Pe("tabs",[]),Za("tabSectionBehaviours",[])]),qt=Mi({factory:Wo,schema:[st("dom"),nf("markers",[st("tabClass"),st("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),vo=Mi({factory:Bn,name:"tabview"}),_o=re([qt,vo]),Na=(t,s,a,c)=>{const d=b=>{const S=Jt.getValue(b);Rs(b,t,"tabview").each(T=>{et(t.tabs,P=>P.value===S).each(P=>{const F=P.view();ko(b.element,"id").each(G=>{$t(T.element,"aria-labelledby",G)}),Wn.set(T,F),t.onChangeTab(T,b,F)})})},h=(b,S)=>{Rs(b,t,"tabbar").each(T=>{S(T).each(Km)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:vb(t.tabSectionBehaviours),events:ms(dt([t.selectFirst?[er((b,S)=>{h(b,ft.getFirst)})]:[],[ot(xS(),(b,S)=>{const T=S.event.button;d(T)}),ot(ES(),(b,S)=>{const T=S.event.button;t.onDismissTab(b,T)})]])),apis:{getViewItems:b=>Rs(b,t,"tabview").map(S=>Wn.contents(S)).getOr([]),showTab:(b,S)=>{h(b,D=>{const P=ft.getCandidates(D);return et(P,G=>Jt.getValue(G)===S).filter(G=>!ft.isHighlighted(D,G))})}}}},hs=rc({name:"TabSection",configFields:zn(),partFields:_o(),factory:Na,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),uc=(t,s,a)=>$e(t,(c,d)=>{Wn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return Wn.set(a,[]),h.height}),Il=t=>zs(zr(t,(s,a)=>s>a?-1:s<a?1:0)),km=(t,s,a)=>{const c=Gi(t).dom,d=ua(t,".tox-dialog-wrap").getOr(t),h=ut(d,"position")==="fixed";let b;h?b=Math.max(c.clientHeight,window.innerHeight):b=Math.max(c.offsetHeight,c.scrollHeight);const S=xr(s),D=s.dom.offsetLeft>=a.dom.offsetLeft+no(a)?Math.max(xr(a),S):S,P=parseInt(ut(t,"margin-top"),10)||0,F=parseInt(ut(t,"margin-bottom"),10)||0,J=xr(t)+P+F-D;return b-J},Dc=(t,s)=>{zs(t).each(a=>hs.showTab(s,a.value))},lu=(t,s)=>{It(t,"height",s+"px"),It(t,"flex-basis",s+"px")},uu=(t,s,a)=>{ua(t,'[role="dialog"]').each(c=>{ir(c,'[role="tablist"]').each(d=>{a.get().map(h=>(It(s,"height","0"),It(s,"flex-basis","0"),Math.min(h,km(c,s,d)))).each(h=>{lu(s,h)})})})},ji=t=>ir(t,'[role="tabpanel"]'),du=t=>{const s=Xo();return{extraEvents:[er(d=>{const h=d.element;ji(h).each(b=>{It(b,"visibility","hidden"),d.getSystem().getByDom(b).toOptional().each(S=>{const T=uc(t,b,S);Il(T).fold(s.clear,s.set)}),uu(h,b,s),uo(b,"visibility"),Dc(t,d),requestAnimationFrame(()=>{uu(h,b,s)})})}),ot(Qf(),d=>{const h=d.element;ji(h).each(b=>{uu(h,b,s)})}),ot(a6,(d,h)=>{const b=d.element;ji(b).each(S=>{const T=cm(br(S));It(S,"visibility","hidden");const D=fs(S,"height").map(G=>parseInt(G,10));uo(S,"height"),uo(S,"flex-basis");const P=S.dom.getBoundingClientRect().height;D.forall(G=>P>G)?(s.set(P),uu(b,S,s)):D.each(G=>{lu(S,G)}),uo(S,"visibility"),T.each($c)})})],selectFirst:!1}},wn="send-data-to-section",Lo="send-data-to-view",Kr=(t,s,a,c)=>{const d=mn({}),h=P=>{const F=Jt.getValue(P),G=ho(F).getOr({}),J=d.get(),se=Bs(J,G);d.set(se)},b=P=>{const F=d.get();Jt.setValue(P,F)},S=mn(null),T=$e(t.tabs,P=>({value:P.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[nr(a.shared.providers.translate(P.title))],view:()=>[Kb.sketch(F=>({dom:{tag:"div",classes:["tox-form"]},components:$e(P.items,G=>oL(F,G,s,a,c)),formBehaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:Fe(OC)}),Yn("TabView.form.events",[er(b),sf(h)]),el.config({channels:ss([{key:wn,value:{onReceive:h}},{key:Lo,value:{onReceive:b}}])})])}))]})),D=du(T);return hs.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(P,F,G)=>{const J=Jt.getValue(F);bn(P,r6,{name:J,oldName:S.get()}),S.set(J)},tabs:T,components:[hs.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Wo.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Et([cr.config({})])}),hs.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:D.selectFirst,tabSectionBehaviours:Et([Yn("tabpanel",D.extraEvents),Sn.config({mode:"acyclic"}),Mo.config({find:P=>zs(hs.getViewItems(P))}),c1(M.none(),P=>(P.getSystem().broadcastOn([wn],{}),d.get()),(P,F)=>{d.set(F),P.getSystem().broadcastOn([Lo],{})})])})},Pa=(t,s,a,c,d,h)=>{const b=D=>{const P=D.body;switch(P.type){case"tabpanel":return[Kr(P,D.initialData,c,h)];default:return[cs(P,D.initialData,c,h)]}},S=(D,P)=>M.some({isTabPanel:()=>P.body.type==="tabpanel"}),T={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(D=>({id:D})).getOr({}),...d?T:{}}},components:[],behaviours:Et([lc.childAt(0),Zn.config({channel:`${cB}-${s}`,updateState:S,renderComponents:b,initialData:t})])}},hi=(t,s,a,c,d,h)=>Pa(t,s,M.some(a),c,d,h),Ia=(t,s,a,c)=>{const d=Pa(t,s,M.none(),a,!1,c);return Ka.parts.body(d)},Ar=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[rB(M.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Et([cr.config({}),$n.config({})])})]}],behaviours:Et([Sn.config({mode:"acyclic",useTabstopAt:Fe(OC)})])};return Ka.parts.body(s)},Or=Xp.deviceType.isTouch(),Vc=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Bd=(t,s)=>Ka.parts.close(Ma.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Et([cr.config({})])})),Am=()=>Ka.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),If=(t,s)=>Ka.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ym(`<p>${QN(s.translate(t))}</p>`)}]}]}),l0=t=>Ka.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),u0=(t,s)=>[xm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),xm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Bg=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return Ka.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),M.some(!0)),useTabstopAt:h=>!OC(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ym(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Or?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:Et([$n.config({}),Yn("dialog-events",t.dialogEvents.concat([Ym(fd(),(h,b)=>{Id.isBlocked(h)?de():Sn.focusIn(h)}),ot(I1(),(h,b)=>{h.getSystem().broadcastOn([RC],{newFocus:b.event.newFocus})})])),Yn("scroll-lock",[er(()=>{Lr(Ye(),d)}),sf(()=>{mr(Ye(),d)})]),...t.extraBehaviours]),eventOrder:{[ki()]:["dialog-events"],[Ji()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Lc()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Ld=t=>Ma.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Et([cr.config({}),kr.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Fu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{bo(s,Ag)}}),Lg=(t,s,a,c)=>{const d=h=>[nr(c.translate(h.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:Et([Zn.config({channel:`${iB}-${s}`,initialData:t,renderComponents:d})])}},Zy=()=>({dom:ym('<div class="tox-dialog__draghandle"></div>')}),jy=(t,s,a,c)=>xm.sketch({dom:ym('<div class="tox-dialog__header"></div>'),components:[Lg(t,s,M.some(a),c),Zy(),Ld(c)],containerBehaviours:Et([s0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Sd(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),g$=(t,s,a)=>{const c=Ka.parts.title(Lg(t,s,M.none(),a)),d=Ka.parts.draghandle(Zy()),h=Ka.parts.close(Ld(a)),b=[c].concat(t.draggable?[d]:[]).concat([h]);return xm.sketch({dom:ym('<div class="tox-dialog__header"></div>'),components:b})},d0=(t,s,a)=>g$({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),x5=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ym('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),E5=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=ir(t().element,".tox-dialog__header").map(h=>xr(h));Ka.setBusy(t(),(h,b)=>x5(c.message,b,s,d))},onUnblock:()=>{Ka.setIdle(t())}}),dc="tox-dialog--fullscreen",fu="tox-dialog--width-lg",qy="tox-dialog--width-md",He=t=>{switch(t){case"large":return M.some(fu);case"medium":return M.some(qy);default:return M.none()}},Ue=(t,s)=>{const a=Ke.fromDom(s.element.dom);Sc(a,dc)||(vd(a,[fu,qy]),He(t).each(c=>Lr(a,c)))},Bt=(t,s)=>{const a=Ke.fromDom(t.element.dom),c=OS(a),d=et(c,h=>h===fu||h===qy).or(He(s));N0(a,[dc,...d.toArray()])},Dt=(t,s,a)=>Oi(Bg({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[Yb({}),...t.extraBehaviours],onEscape:c=>{bo(c,Ag)},dialogEvents:s,eventOrder:{[Ql()]:[Zn.name(),el.name()],[Ji()]:["scroll-lock",Zn.name(),"messages","dialog-events","alloy.base.behaviour"],[Lc()]:["alloy.base.behaviour","dialog-events","messages",Zn.name(),"scroll-lock"]}})),Pn=(t,s={})=>{const a=c=>{const d=$e(c.items,h=>{const b=Tt(s,h.name).getOr(mn(!1));return{...h,storage:b}});return{...c,items:d}};return $e(t,c=>c.type==="menu"?a(c):c)},Zo=t=>zo(t,(s,a)=>a.type==="menu"?zo(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),Hr=(t,s)=>[k0(fd(),wD),t(wC,(a,c,d,h)=>{hf(h.element)&&cm(br(h.element)).each(Va),s.onClose(),c.onClose()}),t(Ag,(a,c,d,h)=>{c.onCancel(a),bo(h,wC)}),ot(N_,(a,c)=>s.onUnblock()),ot(PO,(a,c)=>s.onBlock(c.event))],Om=(t,s)=>{const a=(d,h)=>ot(d,(b,S)=>{c(b,(T,D)=>{h(t(),T,S.event,b)})}),c=(d,h)=>{Zn.getState(d).get().each(b=>{h(b,d)})};return[...Hr(a,s),a(hh,(d,h,b)=>{h.onAction(d,{name:b.name})})]},Fd=(t,s,a)=>{const c=(h,b)=>ot(h,(S,T)=>{d(S,(D,P)=>{b(t(),D,T.event,S)})}),d=(h,b)=>{Zn.getState(h).get().each(S=>{b(S.internalDialog,h)})};return[...Hr(c,s),c(CC,(h,b)=>b.onSubmit(h)),c(Rl,(h,b,S)=>{b.onChange(h,{name:S.name})}),c(hh,(h,b,S,T)=>{const D=()=>T.getSystem().isConnected()?Sn.focusIn(T):void 0,P=J=>H(J,"disabled")||ko(J,"aria-disabled").exists(se=>se==="true"),F=br(T.element),G=cm(F);b.onAction(h,{name:S.name,value:S.value}),cm(F).fold(D,J=>{P(J)||G.exists(se=>Pc(J,se)&&P(se))?D():a().toOptional().filter(se=>!Pc(se.element,J)).each(D)})}),c(r6,(h,b,S)=>{b.onTabChange(h,{newTabName:S.name,oldTabName:S.oldName})}),sf(h=>{const b=t();Jt.setValue(h,b.getData())})]},oS=(t,s)=>hT(t,t.type,s),p$=(t,s,a)=>et(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),b$=(t,s)=>{const a=s.map(S=>S.footerButtons).getOr([]),c=Hs(a,S=>S.align==="start"),d=(S,T)=>xm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${S}`]},components:$e(T,D=>D.memento.asSpec())}),h=d("start",c.pass),b=d("end",c.fail);return[h,b]},_5=(t,s,a)=>{const c=(d,h)=>{const b=$e(h.buttons,T=>{const D=Jo(oS(T,a));return{name:T.name,align:T.align,memento:D}}),S=T=>p$(d,b,T);return M.some({lookupByName:S,footerButtons:b})};return{dom:ym('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Et([Zn.config({channel:`${lB}-${s}`,initialData:t,updateState:c,renderComponents:b$})])}},v$=(t,s,a)=>_5(t,s,a),Ch=(t,s,a)=>Ka.parts.footer(_5(t,s,a)),sS=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Mo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Kb.getField(c,s).orThunk(()=>t.getFooter().bind(b=>Zn.getState(b).get()).bind(b=>b.lookupByName(s)))}else return M.none()},y$=(t,s)=>{const a=t.getRoot();return Zn.getState(a).get().map(c=>bt(ar("data",c.dataValidator,s))).getOr(s)},T5=(t,s,a)=>{const c=se=>{const ce=t.getRoot();ce.getSystem().isConnected()&&se(ce)},J={getData:()=>{const se=t.getRoot(),ce=se.getSystem().isConnected()?t.getFormWrapper():se,De=Jt.getValue(ce),ue=Ko(a,Te=>Te.get());return{...De,...ue}},setData:se=>{c(ce=>{const De=J.getData(),ue=Bs(De,se),Te=y$(t,ue),Oe=t.getFormWrapper();Jt.setValue(Oe,Te),Ts(a,(ze,We)=>{go(ue,We)&&ze.set(ue[We])})})},setEnabled:(se,ce)=>{sS(t,se).each(ce?vn.enable:vn.disable)},focus:se=>{sS(t,se).each($n.focus)},block:se=>{if(!j(se))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(ce=>{bn(ce,PO,{message:se})})},unblock:()=>{c(se=>{bo(se,N_)})},showTab:se=>{c(ce=>{const De=t.getBody();Zn.getState(De).get().exists(Te=>Te.isTabPanel())&&Mo.getCurrent(De).each(Te=>{hs.showTab(Te,se)})})},redial:se=>{c(ce=>{const De=t.getId(),ue=s(se),Te=Pn(ue.internalDialog.buttons,a);ce.getSystem().broadcastOn([`${DC}-${De}`],ue),ce.getSystem().broadcastOn([`${iB}-${De}`],ue.internalDialog),ce.getSystem().broadcastOn([`${cB}-${De}`],ue.internalDialog),ce.getSystem().broadcastOn([`${lB}-${De}`],{...ue.internalDialog,buttons:Te}),J.setData(ue.initialData)})},close:()=>{c(se=>{bo(se,wC)})},toggleFullscreen:t.toggleFullscreen};return J},w$=(t,s,a)=>{const c=on("dialog"),d=t.internalDialog,h=d0(d.title,c,a),b=mn(d.size),S=Oe=>sS(ue,Oe),T=He(b.get()).toArray(),D=(Oe,ze)=>(b.set(ze.internalDialog.size),Ue(ze.internalDialog.size,Oe),M.some(ze)),P=Ia({body:d.body,initialData:d.initialData},c,a,S),F=Pn(d.buttons),G=Zo(F),J=En(F.length!==0,Ch({buttons:F},c,a)),se=Fd(()=>Te,E5(()=>De,a.shared.providers,s),a.shared.getSink),ce={id:c,header:h,body:P,footer:J,extraClasses:T,extraBehaviours:[Zn.config({channel:`${DC}-${c}`,updateState:D,initialData:t})],extraStyles:{}},De=Dt(ce,se,a),ue=(()=>{const Oe=()=>{const We=Ka.getBody(De);return Mo.getCurrent(We).getOr(We)},ze=()=>{Bt(De,b.get())};return{getId:re(c),getRoot:re(De),getBody:()=>Ka.getBody(De),getFooter:()=>Ka.getFooter(De),getFormWrapper:Oe,toggleFullscreen:ze}})(),Te=T5(ue,s.redial,G);return{dialog:De,instanceApi:Te}},C$=(t,s,a,c=!1,d)=>{const h=on("dialog"),b=on("dialog-label"),S=on("dialog-content"),T=t.internalDialog,D=an=>sS(tn,an),P=mn(T.size),F=He(P.get()).toArray(),G=(an,Vt)=>(P.set(Vt.internalDialog.size),Ue(Vt.internalDialog.size,an),d(),M.some(Vt)),J=Jo(jy({title:T.title,draggable:!0},h,b,a.shared.providers)),se=Jo(hi({body:T.body,initialData:T.initialData},h,S,a,c,D)),ce=Pn(T.buttons),De=Zo(ce),ue=En(ce.length!==0,Jo(v$({buttons:ce},h,a))),Te=Fd(()=>nt,{onBlock:an=>{Id.block(We,(Vt,dn)=>{const wo=J.getOpt(We).map(Ys=>xr(Ys.element));return x5(an.message,dn,a.shared.providers,wo)})},onUnblock:()=>{Id.unblock(We)},onClose:()=>s.closeWindow()},a.shared.getSink),Oe="tox-dialog-inline",ze=dr().os,We=Oi({dom:{tag:"div",classes:["tox-dialog",Oe,...F],attributes:{role:"dialog",...ze.isMacOS()?{"aria-label":T.title}:{"aria-labelledby":b}}},eventOrder:{[Ql()]:[Zn.name(),el.name()],[ki()]:["execute-on-form"],[Ji()]:["reflecting","execute-on-form"]},behaviours:Et([Sn.config({mode:"cyclic",onEscape:an=>(bo(an,wC),M.some(!0)),useTabstopAt:an=>!OC(an)&&(Ns(an)!=="button"||Vn(an,"disabled")!=="disabled"),firstTabstop:1}),Zn.config({channel:`${DC}-${h}`,updateState:G,initialData:t}),$n.config({}),Yn("execute-on-form",Te.concat([Ym(fd(),(an,Vt)=>{Sn.focusIn(an)}),ot(I1(),(an,Vt)=>{an.getSystem().broadcastOn([RC],{newFocus:Vt.event.newFocus})})])),Id.config({getRoot:()=>M.some(We)}),Wn.config({}),Yb({})]),components:[J.asSpec(),se.asSpec(),...ue.map(an=>an.asSpec()).toArray()]}),Mt=()=>{Bt(We,P.get())},tn={getId:re(h),getRoot:re(We),getFooter:()=>ue.map(an=>an.get(We)),getBody:()=>se.get(We),getFormWrapper:()=>{const an=se.get(We);return Mo.getCurrent(an).getOr(an)},toggleFullscreen:Mt},nt=T5(tn,s.redial,De);return{dialog:We,instanceApi:nt}};var yo=tinymce.util.Tools.resolve("tinymce.util.URI");const je=t=>{const s=b=>{t.getSystem().isConnected()&&b(t)};return{block:b=>{if(!j(b))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(S=>{bn(S,PO,{message:b})})},unblock:()=>{s(b=>{bo(b,N_)})},close:()=>{s(b=>{bo(b,wC)})},sendMessage:b=>{s(S=>{S.getSystem().broadcastOn([CD],b)})}}},An=["insertContent","setContent","execCommand","close","block","unblock"],co=t=>le(t)&&An.indexOf(t.mceAction)!==-1,Sa=t=>!co(t)&&le(t)&&go(t,"mceAction"),Bl=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=Lt(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Uc=(t,s,a,c)=>{const d=on("dialog"),h=d0(t.title,d,c),b=Ar(t),S=t.buttons.bind(Oe=>Oe.length===0?M.none():M.some(Ch({buttons:Oe},d,c))),T=Om(()=>Te,E5(()=>ue,c.shared.providers,s)),D={...t.height.fold(()=>({}),Oe=>({height:Oe+"px","max-height":Oe+"px"})),...t.width.fold(()=>({}),Oe=>({width:Oe+"px","max-width":Oe+"px"}))},P=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],F=new yo(t.url,{base_uri:new yo(window.location.href)}),G=`${F.protocol}://${F.host}${F.port?":"+F.port:""}`,J=Yi(),se=(Oe,ze)=>M.some(ze),ce=[Zn.config({channel:`${DC}-${d}`,updateState:se,initialData:t}),Yn("messages",[er(()=>{const Oe=nc(Ke.fromDom(window),"message",ze=>{if(F.isSameOrigin(new yo(ze.raw.origin))){const We=ze.raw.data;co(We)?Bl(a,Te,We):Sa(We)&&t.onMessage(Te,We)}});J.set(Oe)}),sf(J.clear)]),el.config({channels:{[CD]:{onReceive:(Oe,ze)=>{ir(Oe.element,"iframe").each(We=>{const Mt=We.dom.contentWindow;Ct(Mt)&&Mt.postMessage(ze,G)})}}}})],ue=Dt({id:d,header:h,body:b,footer:S,extraClasses:P,extraBehaviours:ce,extraStyles:D},T,c),Te=je(ue);return{dialog:ue,instanceApi:Te}},Uu=t=>{const s=t.shared;return{open:(c,d)=>{const h=()=>{Ka.hide(D),d()},b=Jo(hT({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"cancel",t)),S=Am(),T=Bd(h,s.providers),D=Oi(Bg({lazySink:()=>s.getSink(),header:Vc(S,T),body:If(c,s.providers),footer:M.some(l0(u0([],[b.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ot(Ag,h)],eventOrder:{}}));Ka.show(D);const P=b.get(D);$n.focus(P)}}},Sh=t=>{const s=t.shared;return{open:(c,d)=>{const h=G=>{Ka.hide(P),d(G)},b=Jo(hT({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"submit",t)),S=hT({context:"any",name:"no",text:"No",primary:!1,buttonType:M.some("secondary"),align:"end",enabled:!0,icon:M.none()},"cancel",t),T=Am(),D=Bd(()=>h(!1),s.providers),P=Oi(Bg({lazySink:()=>s.getSink(),header:Vc(T,D),body:If(c,s.providers),footer:M.some(l0(u0([],[S,b.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ot(Ag,()=>h(!1)),ot(CC,()=>h(!0))],eventOrder:{}}));Ka.show(P);const F=b.get(P);$n.focus(F)}}},Gy=(t,s)=>bt(ar("data",s,t)),Wc=t=>Sm(t,".tox-alert-dialog")||Sm(t,".tox-confirm-dialog"),JG=(t,s,a)=>s&&a?[]:[js.config({contextual:{lazyContext:()=>M.some(Pr(Ke.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>e1(t,c.element).map(h=>({bounds:t1(h),optScrollEnv:M.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:_a(h.element).top})})).getOrThunk(()=>({bounds:ea(),optScrollEnv:M.none()}))})],S$=t=>{const s=t.editor,a=Qp(s),c=Uu(t.backstages.dialog),d=Sh(t.backstages.dialog),h=(se,ce,De)=>{if(!Zt(ce)){if(ce.inline==="toolbar")return D(se,t.backstages.popup.shared.anchors.inlineDialog(),De,ce);if(ce.inline==="bottom")return P(se,t.backstages.popup.shared.anchors.inlineBottomDialog(),De,ce);if(ce.inline==="cursor")return D(se,t.backstages.popup.shared.anchors.cursor(),De,ce)}return T(se,De)},b=(se,ce)=>S(se,ce),S=(se,ce)=>{const De=ue=>{const Te=Uc(ue,{closeWindow:()=>{Ka.hide(Te.dialog),ce(Te.instanceApi)}},s,t.backstages.dialog);return Ka.show(Te.dialog),Te.instanceApi};return ct.openUrl(De,se)},T=(se,ce)=>{const De=(ue,Te,Oe)=>{const ze=Te,Mt=w$({dataValidator:Oe,initialData:ze,internalDialog:ue},{redial:ct.redial,closeWindow:()=>{Ka.hide(Mt.dialog),ce(Mt.instanceApi)}},t.backstages.dialog);return Ka.show(Mt.dialog),Mt.instanceApi.setData(ze),Mt.instanceApi};return ct.open(De,se)},D=(se,ce,De,ue)=>{const Te=(Oe,ze,We)=>{const Mt=Gy(ze,We),tn=Xo(),nt=t.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:We,initialData:Mt,internalDialog:Oe},Vt=()=>tn.on(Go=>{pr.reposition(Go),(!a||!nt)&&js.refresh(Go)}),dn=C$(an,{redial:ct.redial,closeWindow:()=>{tn.on(pr.hide),s.off("ResizeEditor",Vt),tn.clear(),De(dn.instanceApi)}},t.backstages.popup,ue.ariaAttrs,Vt),wo=Oi(pr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ue.persistent?{event:"doNotDismissYet"}:{},...nt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Yn("window-manager-inline-events",[ot(hd(),(Go,gn)=>{bo(dn.dialog,Ag)})]),...JG(s,a,nt)]),isExtraPart:(Go,gn)=>Wc(gn)}));tn.set(wo);const Ys=()=>{const Go=s.inline?Ye():Ke.fromDom(s.getContainer()),gn=Pr(Go);return M.some(gn)};return pr.showWithinBounds(wo,Tl(dn.dialog),{anchor:ce},Ys),(!a||!nt)&&(js.refresh(wo),s.on("ResizeEditor",Vt)),dn.instanceApi.setData(Mt),Sn.focusIn(dn.dialog),dn.instanceApi};return ct.open(Te,se)},P=(se,ce,De,ue)=>{const Te=(Oe,ze,We)=>{const Mt=Gy(ze,We),tn=Xo(),nt=t.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:We,initialData:Mt,internalDialog:Oe},Vt=()=>tn.on(Go=>{pr.reposition(Go),js.refresh(Go)}),dn=C$(an,{redial:ct.redial,closeWindow:()=>{tn.on(pr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Vt),tn.clear(),De(dn.instanceApi)}},t.backstages.popup,ue.ariaAttrs,Vt),wo=Oi(pr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ue.persistent?{event:"doNotDismissYet"}:{},...nt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Et([Yn("window-manager-inline-events",[ot(hd(),(Go,gn)=>{bo(dn.dialog,Ag)})]),js.config({contextual:{lazyContext:()=>M.some(Pr(Ke.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Go=>e1(s,Go.element).map(pt=>({bounds:t1(pt),optScrollEnv:M.some({currentScrollTop:pt.element.dom.scrollTop,scrollElmTop:_a(pt.element).top})})).getOrThunk(()=>({bounds:ea(),optScrollEnv:M.none()}))})]),isExtraPart:(Go,gn)=>Wc(gn)}));tn.set(wo);const Ys=()=>t.backstages.popup.shared.getSink().toOptional().bind(Go=>{const gn=e1(s,Go.element),pt=15,Wt=gn.map(Tn=>t1(Tn)).getOr(ea()),Un=Pr(Ke.fromDom(s.getContentAreaContainer())),ro=Gd(Un,Wt);return M.some(fr(ro.x,ro.y,ro.width,ro.height-pt))});return pr.showWithinBounds(wo,Tl(dn.dialog),{anchor:ce},Ys),js.refresh(wo),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Vt),dn.instanceApi.setData(Mt),Sn.focusIn(dn.dialog),dn.instanceApi};return ct.open(Te,se)};return{open:h,openUrl:b,alert:(se,ce)=>{c.open(se,ce)},close:se=>{se.close()},confirm:(se,ce)=>{d.open(se,ce)}}},x$=t=>{HE(t),ez(t),bq(t)};var kee=()=>{ad.add("silver",t=>{x$(t);let s=()=>ea();const{dialogs:a,popups:c,renderUI:d}=vG(t,{getPopupSinkBounds:()=>s()}),h=()=>{const D=d();return e1(t,c.getMothership().element).each(F=>{s=()=>t1(F)}),D};vy.register(t,c.backstage.shared);const b=S$({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),S=Xo(),T=()=>rP(t,{backstage:c.backstage},c.getMothership(),S);return{renderUI:h,getWindowManagerImpl:re(b),getNotificationManagerImpl:T}})};kee()}()),PJ}Cse();var BJ={},LJ;function Sse(){return LJ||(LJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.ModelManager");const g=(l,f,v)=>{var C;return v(l,f.prototype)?!0:((C=l.constructor)===null||C===void 0?void 0:C.name)===f.name},w=l=>{const f=typeof l;return l===null?"null":f==="object"&&Array.isArray(l)?"array":f==="object"&&g(l,String,(v,C)=>C.isPrototypeOf(v))?"string":f},E=l=>f=>w(f)===l,N=l=>f=>typeof f===l,V=l=>f=>l===f,K=E("string"),j=E("object"),le=E("array"),ge=V(null),Ce=N("boolean"),Xe=V(void 0),Lt=l=>l==null,Zt=l=>!Lt(l),Pt=N("function"),Ct=N("number"),Ne=()=>{},ln=(l,f)=>(...v)=>l(f.apply(null,v)),xt=(l,f)=>v=>l(f(v)),de=l=>()=>l,Je=l=>l,Dn=(l,f)=>l===f;function Gt(l,...f){return(...v)=>{const C=f.concat(v);return l.apply(null,C)}}const re=l=>f=>!l(f),Xt=l=>()=>{throw new Error(l)},In=l=>l(),en=de(!1),Fe=de(!0);class ve{constructor(f,v){this.tag=f,this.value=v}static some(f){return new ve(!0,f)}static none(){return ve.singletonNone}fold(f,v){return this.tag?v(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?ve.some(f(this.value)):ve.none()}bind(f){return this.tag?f(this.value):ve.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:ve.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return Zt(f)?ve.some(f):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const oo=Array.prototype.slice,at=Array.prototype.indexOf,it=Array.prototype.push,M=(l,f)=>at.call(l,f),Hn=(l,f)=>M(l,f)>-1,wt=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const O=l[v];if(f(O,v))return!0}return!1},Eo=(l,f)=>{const v=[];for(let C=0;C<l;C++)v.push(f(C));return v},yn=(l,f)=>{const v=l.length,C=new Array(v);for(let O=0;O<v;O++){const I=l[O];C[O]=f(I,O)}return C},Ae=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const O=l[v];f(O,v)}},yt=(l,f)=>{for(let v=l.length-1;v>=0;v--){const C=l[v];f(C,v)}},Mn=(l,f)=>{const v=[],C=[];for(let O=0,I=l.length;O<I;O++){const U=l[O];(f(U,O)?v:C).push(U)}return{pass:v,fail:C}},fn=(l,f)=>{const v=[];for(let C=0,O=l.length;C<O;C++){const I=l[C];f(I,C)&&v.push(I)}return v},io=(l,f,v)=>(yt(l,(C,O)=>{v=f(v,C,O)}),v),$e=(l,f,v)=>(Ae(l,(C,O)=>{v=f(v,C,O)}),v),gt=(l,f,v)=>{for(let C=0,O=l.length;C<O;C++){const I=l[C];if(f(I,C))return ve.some(I);if(v(I,C))break}return ve.none()},W=(l,f)=>gt(l,f,en),Hs=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const O=l[v];if(f(O,v))return ve.some(v)}return ve.none()},to=l=>{const f=[];for(let v=0,C=l.length;v<C;++v){if(!le(l[v]))throw new Error("Arr.flatten item "+v+" was not an array, input: "+l);it.apply(f,l[v])}return f},To=(l,f)=>to(yn(l,f)),zo=(l,f)=>{for(let v=0,C=l.length;v<C;++v){const O=l[v];if(f(O,v)!==!0)return!1}return!0},gi=l=>{const f=oo.call(l,0);return f.reverse(),f},et=(l,f)=>{const v={};for(let C=0,O=l.length;C<O;C++){const I=l[C];v[String(I)]=f(I,C)}return v},_t=(l,f)=>{const v=oo.call(l,0);return v.sort(f),v},dt=(l,f)=>f>=0&&f<l.length?ve.some(l[f]):ve.none(),xe=l=>dt(l,0),Oo=l=>dt(l,l.length-1),Do=(l,f)=>{for(let v=0;v<l.length;v++){const C=f(l[v],v);if(C.isSome())return C}return ve.none()},Kt=Object.keys,ls=Object.hasOwnProperty,Fo=(l,f)=>{const v=Kt(l);for(let C=0,O=v.length;C<O;C++){const I=v[C],U=l[I];f(U,I)}},zr=(l,f)=>Vo(l,(v,C)=>({k:C,v:f(v,C)})),Vo=(l,f)=>{const v={};return Fo(l,(C,O)=>{const I=f(C,O);v[I.k]=I.v}),v},zs=l=>(f,v)=>{l[v]=f},Xa=(l,f,v,C)=>{Fo(l,(O,I)=>{(f(O,I)?v:C)(O,I)})},_s=(l,f)=>{const v={};return Xa(l,f,zs(v),Ne),v},Ss=(l,f)=>{const v=[];return Fo(l,(C,O)=>{v.push(f(C,O))}),v},xs=l=>Ss(l,Je),Yr=(l,f)=>Ts(l,f)?ve.from(l[f]):ve.none(),Ts=(l,f)=>ls.call(l,f),Ko=(l,f)=>Ts(l,f)&&l[f]!==void 0&&l[f]!==null,Mc=l=>{for(const f in l)if(ls.call(l,f))return!1;return!0},lo=typeof window<"u"?window:Function("return this;")(),gs=(l,f)=>{let v=f??lo;for(let C=0;C<l.length&&v!==void 0&&v!==null;++C)v=v[l[C]];return v},Dr=(l,f)=>{const v=l.split(".");return gs(v,f)},Pi=(l,f)=>Dr(l,f),qi=(l,f)=>{const v=Pi(l,f);if(v==null)throw new Error(l+" not available on this browser");return v},ts=Object.getPrototypeOf,Zc=l=>qi("HTMLElement",l),Tt=l=>{const f=Dr("ownerDocument.defaultView",l);return j(l)&&(Zc(f).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(ts(l).constructor.name))},go=8,Vr=9,Ur=11,Ba=1,Ja=3,Qo=l=>l.dom.nodeName.toLowerCase(),La=l=>l.dom.nodeType,Ii=l=>f=>La(f)===l,Yo=l=>La(l)===go||Qo(l)==="#comment",En=l=>or(l)&&Tt(l.dom),or=Ii(Ba),Qa=Ii(Ja),ll=Ii(Vr),ul=Ii(Ur),vs=l=>f=>or(f)&&Qo(f)===l,wr=(l,f,v)=>{if(K(v)||Ce(v)||Ct(v))l.setAttribute(f,v+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",v,":: Element ",l),new Error("Attribute value was not simple")},Vs=(l,f,v)=>{wr(l.dom,f,v)},xa=(l,f)=>{const v=l.dom;Fo(f,(C,O)=>{wr(v,O,C)})},Nc=(l,f)=>{Fo(f,(v,C)=>{v.fold(()=>{fe(l,C)},O=>{wr(l.dom,C,O)})})},Rr=(l,f)=>{const v=l.dom.getAttribute(f);return v===null?void 0:v},pe=(l,f)=>ve.from(Rr(l,f)),fe=(l,f)=>{l.dom.removeAttribute(f)},Ve=l=>$e(l.dom.attributes,(f,v)=>(f[v.name]=v.value,f),{}),Ge=(l,f)=>{const C=(f||document).createElement("div");if(C.innerHTML=l,!C.hasChildNodes()||C.childNodes.length>1){const O="HTML does not have a single root node";throw console.error(O,l),new Error(O)}return Qn(C.childNodes[0])},Cn=(l,f)=>{const C=(f||document).createElement(l);return Qn(C)},Ln=(l,f)=>{const C=(f||document).createTextNode(l);return Qn(C)},Qn=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},lt={fromHtml:Ge,fromTag:Cn,fromText:Ln,fromDom:Qn,fromPoint:(l,f,v)=>ve.from(l.dom.elementFromPoint(f,v)).map(Qn)},Ke=(l,f)=>{const v=l.dom;if(v.nodeType!==Ba)return!1;{const C=v;if(C.matches!==void 0)return C.matches(f);if(C.msMatchesSelector!==void 0)return C.msMatchesSelector(f);if(C.webkitMatchesSelector!==void 0)return C.webkitMatchesSelector(f);if(C.mozMatchesSelector!==void 0)return C.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},sr=l=>l.nodeType!==Ba&&l.nodeType!==Vr&&l.nodeType!==Ur||l.childElementCount===0,Cr=(l,f)=>{const v=f===void 0?document:f.dom;return sr(v)?[]:yn(v.querySelectorAll(l),lt.fromDom)},ga=(l,f)=>{const v=f===void 0?document:f.dom;return sr(v)?ve.none():ve.from(v.querySelector(l)).map(lt.fromDom)},es=(l,f)=>l.dom===f.dom,jc=(l,f)=>{const v=l.dom,C=f.dom;return v===C?!1:v.contains(C)},Xr=Ke,Ea=l=>lt.fromDom(l.dom.ownerDocument),Ms=l=>ll(l)?l:Ea(l),ns=l=>lt.fromDom(Ms(l).dom.documentElement),us=l=>lt.fromDom(Ms(l).dom.defaultView),Wr=l=>ve.from(l.dom.parentNode).map(lt.fromDom),mc=l=>ve.from(l.dom.parentElement).map(lt.fromDom),Ns=(l,f)=>{const v=Pt(f)?f:en;let C=l.dom;const O=[];for(;C.parentNode!==null&&C.parentNode!==void 0;){const I=C.parentNode,U=lt.fromDom(I);if(O.push(U),v(U)===!0)break;C=I}return O},dl=l=>ve.from(l.dom.previousSibling).map(lt.fromDom),ei=l=>ve.from(l.dom.nextSibling).map(lt.fromDom),ds=l=>yn(l.dom.childNodes,lt.fromDom),lr=(l,f)=>{const v=l.dom.childNodes;return ve.from(v[f]).map(lt.fromDom)},rr=l=>lr(l,0),hc=(l,f)=>{Wr(l).each(C=>{C.dom.insertBefore(f.dom,l.dom)})},pi=(l,f)=>{ei(l).fold(()=>{Wr(l).each(O=>{ys(O,f)})},C=>{hc(C,f)})},pa=(l,f)=>{rr(l).fold(()=>{ys(l,f)},C=>{l.dom.insertBefore(f.dom,C.dom)})},ys=(l,f)=>{l.dom.appendChild(f.dom)},$d=(l,f,v)=>{lr(l,v).fold(()=>{ys(l,f)},C=>{hc(C,f)})},gc=(l,f)=>{hc(l,f),ys(f,l)},Ku=(l,f)=>{Ae(f,(v,C)=>{const O=C===0?l:f[C-1];pi(O,v)})},So=(l,f)=>{Ae(f,v=>{ys(l,v)})},Pc=l=>{l.dom.textContent="",Ae(ds(l),f=>{Us(f)})},Us=l=>{const f=l.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},hu=l=>{const f=ds(l);f.length>0&&Ku(l,f),Us(l)},Gi=(l,f)=>lt.fromDom(l.dom.cloneNode(f)),Ic=l=>Gi(l,!1),Mr=l=>Gi(l,!0),Yu=(l,f)=>{const v=lt.fromTag(f),C=Ve(l);return xa(v,C),v},bi=(l,f)=>{const v=Yu(l,f),C=ds(Mr(l));return So(v,C),v},Hd=(l,f)=>{const v=Yu(l,f);pi(l,v);const C=ds(l);return So(v,C),Us(l),v},fl=["tfoot","thead","tbody","colgroup"],zd=l=>Hn(fl,l),Sr=(l,f)=>({rows:l,columns:f}),pc=(l,f)=>({row:l,column:f}),ml=(l,f,v)=>({element:l,rowspan:f,colspan:v}),Xu=(l,f,v,C)=>({element:l,rowspan:f,colspan:v,isNew:C}),hl=(l,f,v,C,O,I)=>({element:l,rowspan:f,colspan:v,row:C,column:O,isLocked:I}),qc=(l,f,v)=>({element:l,cells:f,section:v}),br=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),Nr=(l,f,v)=>({element:l,isNew:f,isLocked:v}),vi=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),Hl=(l,f,v,C)=>({startRow:l,startCol:f,finishRow:v,finishCol:C}),gu=(l,f,v)=>({element:l,colspan:f,column:v}),Y=(l,f)=>({element:l,columns:f}),he=l=>ul(l)&&Zt(l.dom.host),ke=l=>lt.fromDom(l.dom.getRootNode()),Ye=l=>he(l)?l:lt.fromDom(Ms(l).dom.body),kt=l=>{const f=ke(l);return he(f)?ve.some(f):ve.none()},nn=l=>lt.fromDom(l.dom.host),$t=l=>{if(Zt(l.target)){const f=lt.fromDom(l.target);if(or(f)&&Nn(f)&&l.composed&&l.composedPath){const v=l.composedPath();if(v)return xe(v)}}return ve.from(l.target)},Nn=l=>Zt(l.dom.shadowRoot),Vn=l=>{const f=Qa(l)?l.dom.parentNode:l.dom;if(f==null||f.ownerDocument===null)return!1;const v=f.ownerDocument;return kt(lt.fromDom(f)).fold(()=>v.body.contains(f),xt(Vn,nn))},ko=()=>H(lt.fromDom(document)),H=l=>{const f=l.dom.body;if(f==null)throw new Error("Body is not available yet");return lt.fromDom(f)},ee=(l,f,v)=>fn(Ns(l,v),f),ye=(l,f)=>fn(ds(l),f),Be=(l,f)=>{let v=[];return Ae(ds(l),C=>{f(C)&&(v=v.concat([C])),v=v.concat(Be(C,f))}),v},cn=(l,f,v)=>ee(l,C=>Ke(C,f),v),It=(l,f)=>ye(l,v=>Ke(v,f)),$o=(l,f)=>Cr(f,l);var na=(l,f,v,C,O)=>l(v,C)?ve.some(v):Pt(O)&&O(v)?ve.none():f(v,C,O);const ut=(l,f,v)=>{let C=l.dom;const O=Pt(v)?v:en;for(;C.parentNode;){C=C.parentNode;const I=lt.fromDom(C);if(f(I))return ve.some(I);if(O(I))break}return ve.none()},ti=(l,f,v)=>na((O,I)=>I(O),ut,l,f,v),fs=(l,f)=>{const v=O=>f(lt.fromDom(O));return W(l.dom.childNodes,v).map(lt.fromDom)},Gc=(l,f)=>{const v=C=>{for(let O=0;O<C.childNodes.length;O++){const I=lt.fromDom(C.childNodes[O]);if(f(I))return ve.some(I);const U=v(C.childNodes[O]);if(U.isSome())return U}return ve.none()};return v(l.dom)},ur=(l,f,v)=>ut(l,C=>Ke(C,f),v),uo=(l,f)=>fs(l,v=>Ke(v,f)),yi=(l,f)=>ga(f,l),Jr=(l,f,v)=>na((O,I)=>Ke(O,I),ur,l,f,v),wi=(l,f,v=Dn)=>l.exists(C=>v(C,f)),xr=l=>{const f=[],v=C=>{f.push(C)};for(let C=0;C<l.length;C++)l[C].each(v);return f},zl=(l,f)=>l!=null?f(l):ve.none(),$g=(l,f)=>l?ve.some(f):ve.none(),E1=(l,f)=>l.substring(f),Ds=(l,f,v)=>f===""||l.length>=f.length&&l.substr(v,v+f.length)===f,Vl=(l,f)=>_a(l,f)?E1(l,f.length):l,Qr=(l,f,v=0,C)=>{const O=l.indexOf(f,v);return O!==-1?Xe(C)?!0:O+f.length<=C:!1},_a=(l,f)=>Ds(l,f,0),Ci=(l,f)=>Ds(l,f,l.length-f.length),Nm=(l=>f=>f.replace(l,""))(/^\s+|\s+$/g),no=l=>l.length>0,gl=l=>{const f=parseFloat(l);return isNaN(f)?ve.none():ve.some(f)},Ul=l=>l.style!==void 0&&Pt(l.style.getPropertyValue),Wl=(l,f,v)=>{if(!K(v))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",v,":: Element ",l),new Error("CSS value must be a string: "+v);Ul(l)&&l.style.setProperty(f,v)},Pm=(l,f)=>{Ul(l)&&l.style.removeProperty(f)},Ps=(l,f,v)=>{const C=l.dom;Wl(C,f,v)},oa=(l,f)=>{const v=l.dom;Fo(f,(C,O)=>{Wl(v,O,C)})},Ju=(l,f)=>{const v=l.dom,O=window.getComputedStyle(v).getPropertyValue(f);return O===""&&!Vn(l)?Ah(v,f):O},Ah=(l,f)=>Ul(l)?l.style.getPropertyValue(f):"",bu=(l,f)=>{const v=l.dom,C=Ah(v,f);return ve.from(C).filter(O=>O.length>0)},Si=(l,f)=>{const v=l.dom;Pm(v,f),wi(pe(l,"style").map(Nm),"")&&fe(l,"style")},sa=(l,f)=>{const v=l.dom,C=f.dom;Ul(v)&&Ul(C)&&(C.style.cssText=v.style.cssText)},Fa=(l,f,v=0)=>pe(l,f).map(C=>parseInt(C,10)).getOr(v),ni=(l,f)=>Fa(l,f,1),Er=l=>vs("col")(l)?Fa(l,"span",1)>1:ni(l,"colspan")>1,Qu=l=>ni(l,"rowspan")>1,Is=(l,f)=>parseInt(Ju(l,f),10),Vd=de(10),zf=de(10),Zl=(l,f)=>Ud(l,f,Fe),Ud=(l,f,v)=>To(ds(l),C=>Ke(C,f)?v(C)?[C]:[]:Ud(C,f,v)),Wd=(l,f,v=en)=>{if(v(f))return ve.none();if(Hn(l,Qo(f)))return ve.some(f);const C=O=>Ke(O,"table")||v(O);return ur(f,l.join(","),C)},ed=(l,f)=>Wd(["td","th"],l,f),td=l=>Zl(l,"th,td"),bc=l=>Ke(l,"colgroup")?It(l,"col"):To(pl(l),f=>It(f,"col")),oi=(l,f)=>Jr(l,"table",f),Hg=l=>Zl(l,"tr"),pl=l=>oi(l).fold(de([]),f=>It(f,"colgroup")),Im=(l,f)=>yn(l,v=>{if(Qo(v)==="colgroup"){const C=yn(bc(v),O=>{const I=Fa(O,"span",1);return ml(O,1,I)});return qc(v,C,"colgroup")}else{const C=yn(td(v),O=>{const I=Fa(O,"rowspan",1),U=Fa(O,"colspan",1);return ml(O,I,U)});return qc(v,C,f(v))}}),Zd=l=>Wr(l).map(f=>{const v=Qo(f);return zd(v)?v:"tbody"}).getOr("tbody"),Oh=l=>{const f=Hg(l),C=[...pl(l),...f];return Im(C,Zd)},Bm=(l,f)=>Im(l,()=>f),jd=l=>{let f=!1,v;return(...C)=>(f||(f=!0,v=l.apply(null,C)),v)},Lm=(l,f,v,C)=>{const O=l.isiOS()&&/ipad/i.test(v)===!0,I=l.isiOS()&&!O,U=l.isiOS()||l.isAndroid(),Q=U||C("(pointer:coarse)"),ae=O||!I&&U&&C("(min-device-width:768px)"),we=I||U&&!ae,Le=f.isSafari()&&l.isiOS()&&/safari/i.test(v)===!1,St=!we&&!ae&&!Le;return{isiPad:de(O),isiPhone:de(I),isTablet:de(ae),isPhone:de(we),isTouch:de(Q),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:de(Le),isDesktop:de(St)}},Dh=(l,f)=>{for(let v=0;v<l.length;v++){const C=l[v];if(C.test(f))return C}},nd=(l,f)=>{const v=Dh(l,f);if(!v)return{major:0,minor:0};const C=O=>Number(f.replace(v,"$"+O));return od(C(1),C(2))},Rh=(l,f)=>{const v=String(f).toLowerCase();return l.length===0?be():nd(l,v)},be=()=>od(0,0),od=(l,f)=>({major:l,minor:f}),xi={nu:od,detect:Rh,unknown:be},_1=(l,f)=>Do(f.brands,v=>{const C=v.brand.toLowerCase();return W(l,O=>{var I;return C===((I=O.brand)===null||I===void 0?void 0:I.toLowerCase())}).map(O=>({current:O.name,version:xi.nu(parseInt(v.version,10),0)}))}),zg=(l,f)=>{const v=String(f).toLowerCase();return W(l,C=>C.search(v))},vu=(l,f)=>zg(l,f).map(v=>{const C=xi.detect(v.versionRegexes,f);return{current:v.name,version:C}}),No=(l,f)=>zg(l,f).map(v=>{const C=xi.detect(v.versionRegexes,f);return{current:v.name,version:C}}),dr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ta=l=>f=>Qr(f,l),jl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Qr(l,"edge/")&&Qr(l,"chrome")&&Qr(l,"safari")&&Qr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dr],search:l=>Qr(l,"chrome")&&!Qr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Qr(l,"msie")||Qr(l,"trident")},{name:"Opera",versionRegexes:[dr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ta("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ta("firefox")},{name:"Safari",versionRegexes:[dr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Qr(l,"safari")||Qr(l,"mobile/"))&&Qr(l,"applewebkit")}],Mh=[{name:"Windows",search:Ta("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Qr(l,"iphone")||Qr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ta("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ta("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ta("linux"),versionRegexes:[]},{name:"Solaris",search:Ta("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ta("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ta("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sd={browsers:de(jl),oses:de(Mh)},si="Edge",Fm="Chromium",$m="IE",yu="Opera",wu="Firefox",Vf="Safari",vc=()=>Uf({current:void 0,version:xi.unknown()}),Uf=l=>{const f=l.current,v=l.version,C=O=>()=>f===O;return{current:f,version:v,isEdge:C(si),isChromium:C(Fm),isIE:C($m),isOpera:C(yu),isFirefox:C(wu),isSafari:C(Vf)}},ba={unknown:vc,nu:Uf},Cu="Windows",Kc="iOS",ri="Android",rd="Linux",T1="macOS",Hm="Solaris",bl="FreeBSD",qd="ChromeOS",Vg=()=>zm({current:void 0,version:xi.unknown()}),zm=l=>{const f=l.current,v=l.version,C=O=>()=>f===O;return{current:f,version:v,isWindows:C(Cu),isiOS:C(Kc),isAndroid:C(ri),isMacOS:C(T1),isLinux:C(rd),isSolaris:C(Hm),isFreeBSD:C(bl),isChromeOS:C(qd)}},Ug={unknown:Vg,nu:zm},Zg={detect:(l,f,v)=>{const C=sd.browsers(),O=sd.oses(),I=f.bind(ae=>_1(C,ae)).orThunk(()=>vu(C,l)).fold(ba.unknown,ba.nu),U=No(O,l).fold(Ug.unknown,Ug.nu),Q=Lm(U,I,l,v);return{browser:I,os:U,deviceType:Q}}},vl=l=>window.matchMedia(l).matches;let Nh=jd(()=>Zg.detect(window.navigator.userAgent,ve.from(window.navigator.userAgentData),vl));const Yc=()=>Nh(),fr=(l,f)=>{const v=(Q,ae)=>{if(!Ct(ae)&&!ae.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ae);const we=Q.dom;Ul(we)&&(we.style[l]=ae+"px")},C=Q=>{const ae=f(Q);if(ae<=0||ae===null){const we=Ju(Q,l);return parseFloat(we)||0}return ae},O=C,I=(Q,ae)=>$e(ae,(we,Le)=>{const St=Ju(Q,Le),jt=St===void 0?0:parseInt(St,10);return isNaN(jt)?we:we+jt},0);return{set:v,get:C,getOuter:O,aggregate:I,max:(Q,ae,we)=>{const Le=I(Q,we);return ae>Le?ae-Le:0}}},Pr=(l,f)=>gl(l).getOr(f),Ki=(l,f,v)=>Pr(Ju(l,f),v),Gd=(l,f,v,C)=>{const O=Ki(l,`padding-${v}`,0),I=Ki(l,`padding-${C}`,0),U=Ki(l,`border-${v}-width`,0),Q=Ki(l,`border-${C}-width`,0);return f-O-I-U-Q},Kd=(l,f)=>{const v=l.dom,C=v.getBoundingClientRect().width||v.offsetWidth;return Gd(l,C,"left","right")},ea=l=>Ki(l,"height",l.dom.offsetHeight),mn=l=>Ki(l,"width",l.dom.offsetWidth),Ph=l=>Kd(l),yl=fr("width",l=>l.dom.offsetWidth),Yi=l=>yl.get(l),Xo=l=>yl.getOuter(l),ad=Ph,Wf=mn,Zf=(l,f,v)=>{const C=l.cells,O=C.slice(0,f),I=C.slice(f),U=O.concat(v).concat(I);return vr(l,U)},jg=(l,f,v)=>Zf(l,f,[v]),Gn=(l,f,v)=>{const C=l.cells;C[f]=v},vr=(l,f)=>vi(l.element,f,l.section,l.isNew),Yd=(l,f)=>{const v=l.cells,C=yn(v,f);return vi(l.element,C,l.section,l.isNew)},Bi=(l,f)=>l.cells[f],ai=(l,f)=>Bi(l,f).element,Xi=l=>l.cells.length,ra=l=>{const f=Mn(l,v=>v.section==="colgroup");return{rows:f.fail,cols:f.pass}},Ei=(l,f,v)=>{const C=yn(l.cells,v);return vi(f(l.element),C,l.section,!0)},yc="data-snooker-locked-cols",Xd=l=>pe(l,yc).bind(f=>ve.from(f.match(/\d+/g))).map(f=>et(f,Fe)),Js=l=>{const f=$e(ra(l).rows,(C,O)=>(Ae(O.cells,(I,U)=>{I.isLocked&&(C[U]=!0)}),C),{}),v=Ss(f,(C,O)=>parseInt(O,10));return _t(v)},Vm=(l,f)=>l+","+f,_r=(l,f,v)=>ve.from(l.access[Vm(f,v)]),wl=(l,f,v)=>{const C=Cl(l,O=>v(f,O.element));return C.length>0?ve.some(C[0]):ve.none()},Cl=(l,f)=>{const v=To(l.all,C=>C.cells);return fn(v,f)},ws=l=>{const f={};let v=0;return Ae(l.cells,C=>{const O=C.colspan;Eo(O,I=>{const U=v+I;f[U]=gu(C.element,O,U)}),v+=O}),f},Li=l=>{const f={},v=[],O=xe(l).map(zt=>zt.element).bind(oi).bind(Xd).getOr({});let I=0,U=0,Q=0;const{pass:ae,fail:we}=Mn(l,zt=>zt.section==="colgroup");Ae(we,zt=>{const Nt=[];Ae(zt.cells,hn=>{let vt=0;for(;f[Vm(Q,vt)]!==void 0;)vt++;const Rn=Ko(O,vt.toString()),so=hl(hn.element,hn.rowspan,hn.colspan,Q,vt,Rn);for(let ft=0;ft<hn.colspan;ft++)for(let is=0;is<hn.rowspan;is++){const Io=Q+is,Bo=vt+ft,$r=Vm(Io,Bo);f[$r]=so,U=Math.max(U,Bo+1)}Nt.push(so)}),I++,v.push(qc(zt.element,Nt,zt.section)),Q++});const{columns:Le,colgroups:St}=Oo(ae).map(zt=>{const Nt=ws(zt);return{colgroups:[Y(zt.element,xs(Nt))],columns:Nt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Sr(I,U),access:f,all:v,columns:Le,colgroups:St}},po={fromTable:l=>{const f=Oh(l);return Li(f)},generate:Li,getAt:_r,findItem:wl,filterItems:Cl,justCells:l=>To(l.all,f=>f.cells),justColumns:l=>xs(l.columns),hasColumns:l=>Kt(l.columns).length>0,getColumnAt:(l,f)=>ve.from(l.columns[f])},Jd=(l,f=Fe)=>{const v=l.grid,C=Eo(v.columns,Je),O=Eo(v.rows,Je);return yn(C,I=>Um(()=>To(O,we=>po.getAt(l,we,I).filter(Le=>Le.column===I).toArray()),we=>we.colspan===1&&f(we.element),()=>po.getAt(l,0,I)))},Um=(l,f,v)=>{const C=l();return W(C,f).orThunk(()=>ve.from(C[0]).orThunk(v)).map(U=>U.element)},k=l=>{const f=l.grid,v=Eo(f.rows,Je),C=Eo(f.columns,Je);return yn(v,O=>Um(()=>To(C,ae=>po.getAt(l,O,ae).filter(we=>we.row===O).fold(de([]),we=>[we])),ae=>ae.rowspan===1,()=>po.getAt(l,O,0)))},B=(l,f)=>{if(f<0||f>=l.length-1)return ve.none();const v=l[f].fold(()=>{const O=gi(l.slice(0,f));return Do(O,(I,U)=>I.map(Q=>({value:Q,delta:U+1})))},O=>ve.some({value:O,delta:0})),C=l[f+1].fold(()=>{const O=l.slice(f+1);return Do(O,(I,U)=>I.map(Q=>({value:Q,delta:U+1})))},O=>ve.some({value:O,delta:1}));return v.bind(O=>C.map(I=>{const U=I.delta+O.delta;return Math.abs(I.value-O.value)/U}))},q=(l,f)=>v=>me(v)==="rtl"?f:l,me=l=>Ju(l,"direction")==="rtl"?"rtl":"ltr",Ee=fr("height",l=>{const f=l.dom;return Vn(l)?f.getBoundingClientRect().height:f.offsetHeight}),ht=l=>Ee.get(l),kn=l=>Ee.getOuter(l),eo=ea,Kn=(l,f)=>({left:l,top:f,translate:(C,O)=>Kn(l+C,f+O)}),pn=Kn,Ws=l=>{const f=l.getBoundingClientRect();return pn(f.left,f.top)},Ir=(l,f)=>l!==void 0?l:f!==void 0?f:0,_i=l=>{const f=l.dom.ownerDocument,v=f.body,C=f.defaultView,O=f.documentElement;if(v===l.dom)return pn(v.offsetLeft,v.offsetTop);const I=Ir(C==null?void 0:C.pageYOffset,O.scrollTop),U=Ir(C==null?void 0:C.pageXOffset,O.scrollLeft),Q=Ir(O.clientTop,v.clientTop),ae=Ir(O.clientLeft,v.clientLeft);return xu(l).translate(U-ae,I-Q)},xu=l=>{const f=l.dom,C=f.ownerDocument.body;return C===f?pn(C.offsetLeft,C.offsetTop):Vn(l)?Ws(f):pn(0,0)},qg=(l,f)=>({row:l,y:f}),qf=(l,f)=>({col:l,x:f}),Ih=l=>_i(l).left+Xo(l),ii=l=>_i(l).left,Gg=(l,f)=>qf(l,ii(f)),n2=(l,f)=>qf(l,Ih(f)),k1=l=>_i(l).top,$a=(l,f)=>qg(l,k1(f)),Kg=(l,f)=>qg(l,k1(f)+kn(f)),Zr=(l,f,v)=>{if(v.length===0)return[];const C=yn(v.slice(1),(I,U)=>I.map(Q=>l(U,Q))),O=v[v.length-1].map(I=>f(v.length-1,I));return C.concat([O])},Wm=l=>-l,ci={delta:Je,positions:l=>Zr($a,Kg,l),edge:k1},Qd=q({delta:Je,edge:ii,positions:l=>Zr(Gg,n2,l)},{delta:Wm,edge:Ih,positions:l=>Zr(n2,Gg,l)}),Yg={delta:(l,f)=>Qd(f).delta(l,f),positions:(l,f)=>Qd(f).positions(l,f),edge:l=>Qd(l).edge(l)},v0={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Xg=(()=>{const l="[0-9]+",v="[eE]"+("[+-]?"+l),C="\\.",O=Q=>`(?:${Q})?`,U=`[+-]?(?:${["Infinity",l+C+O(l)+O(v),C+l+O(v),l+O(v)].join("|")})`;return new RegExp(`^(${U})(.*)$`)})(),Sl=(l,f)=>wt(f,v=>wt(v0[v],C=>l===C)),Eu=(l,f)=>ve.from(Xg.exec(l)).bind(C=>{const O=Number(C[1]),I=C[2];return Sl(I,f)?ve.some({value:O,unit:I}):ve.none()}),ef=/(\d+(\.\d+)?)%/,Ut=/(\d+(\.\d+)?)px|em/,xl=vs("col"),A1=vs("tr"),Gf=(l,f,v)=>{const C=mc(l).getOrThunk(()=>H(Ea(l)));return f(l)/v(C)*100},El=(l,f)=>{Ps(l,"width",f+"px")},Bh=(l,f)=>{Ps(l,"width",f+"%")},tf=(l,f)=>{Ps(l,"height",f+"px")},Kf=l=>{Si(l,"height")},Lh=l=>eo(l)+"px",ql=(l,f,v,C)=>{const O=oi(l).map(I=>{const U=v(I);return Math.floor(f/100*U)}).getOr(f);return C(l,O),O},y0=(l,f,v,C)=>{const O=parseFloat(l);return Ci(l,"%")&&Qo(f)!=="table"?ql(f,O,v,C):O},ar=l=>{const f=Lh(l);return f?y0(f,l,ht,tf):ht(l)},bt=(l,f,v)=>{const C=v(l),O=ni(l,f);return C/O},Fi=(l,f)=>bu(l,f).orThunk(()=>pe(l,f).map(v=>v+"px")),Gl=l=>Fi(l,"width"),aa=l=>Fi(l,"height"),Zm=l=>Gf(l,Yi,ad),ia=l=>xl(l)?Yi(l):Wf(l),jo=l=>A1(l)?ht(l):bt(l,"rowspan",ar),Jg=l=>Gl(l).bind(v=>Eu(v,["fixed","relative","empty"])),st=(l,f,v)=>{Ps(l,"width",f+v)},qo=l=>Yi(l)+"px",Qg=l=>ht(l)+"px",ta=l=>Gf(l,Yi,ad)+"%",ka=l=>Gl(l).exists(f=>ef.test(f)),_l=l=>Gl(l).exists(f=>Ut.test(f)),O1=l=>Gl(l).isNone(),nf=de(ef),D1=vs("col"),wc=l=>Gl(l).getOrThunk(()=>ia(l)+"px"),Uo=l=>aa(l).getOrThunk(()=>jo(l)+"px"),_u=l=>yn(po.justColumns(l),f=>ve.from(f.element)),Fh=l=>{const f=Yc().browser,v=f.isChromium()||f.isFirefox();return D1(l)?v:!0},hr=(l,f,v,C,O,I)=>l.filter(C).fold(()=>I(B(v,f)),U=>O(U)),ep=(l,f,v,C)=>{const O=Jd(l),I=po.hasColumns(l)?_u(l):O,U=[ve.some(Yg.edge(f))].concat(yn(Yg.positions(O,f),ae=>ae.map(we=>we.x))),Q=re(Er);return yn(I,(ae,we)=>hr(ae,we,U,Q,Le=>{if(Fh(Le))return v(Le);{const St=zl(O[we],Je);return hr(St,we,U,Q,jt=>C(ve.some(Yi(jt))),C)}},C))},cd=l=>l.map(f=>f+"px").getOr(""),$h=(l,f)=>ep(l,f,wc,cd),jr=(l,f,v)=>ep(l,f,Zm,C=>C.fold(()=>v.minCellWidth(),O=>O/v.pixelWidth()*100)),ca=(l,f,v)=>ep(l,f,ia,C=>C.getOrThunk(v.minCellWidth)),Pe=(l,f,v,C)=>{const O=k(l),I=yn(l.all,Q=>ve.some(Q.element)),U=[ve.some(ci.edge(f))].concat(yn(ci.positions(O,f),Q=>Q.map(ae=>ae.y)));return yn(I,(Q,ae)=>hr(Q,ae,U,Fe,v,C))},Zs=(l,f)=>Pe(l,f,jo,v=>v.getOrThunk(zf)),R1=(l,f)=>Pe(l,f,Uo,cd),Ls=(l,f)=>()=>Vn(l)?f(l):parseFloat(bu(l,"width").getOr("0")),li=l=>{const f=Ls(l,Yi),v=de(0);return{width:f,pixelWidth:f,getWidths:(O,I)=>ca(O,l,I),getCellDelta:v,singleColumnWidth:de([0]),minCellWidth:v,setElementWidth:Ne,adjustTableWidth:Ne,isRelative:!0,label:"none"}},Aa=l=>{const f=Ls(l,ae=>parseFloat(ta(ae))),v=Ls(l,Yi);return{width:f,pixelWidth:v,getWidths:(ae,we)=>jr(ae,l,we),getCellDelta:ae=>ae/v()*100,singleColumnWidth:(ae,we)=>[100-ae],minCellWidth:()=>Vd()/v()*100,setElementWidth:Bh,adjustTableWidth:ae=>{const we=f(),Le=ae/100*we,St=we+Le;Bh(l,St)},isRelative:!0,label:"percent"}},os=l=>{const f=Ls(l,Yi);return{width:f,pixelWidth:f,getWidths:(U,Q)=>ca(U,l,Q),getCellDelta:Je,singleColumnWidth:(U,Q)=>[Math.max(Vd(),U+Q)-U],minCellWidth:Vd,setElementWidth:El,adjustTableWidth:U=>{const Q=f()+U;El(l,Q)},isRelative:!1,label:"pixel"}},_=(l,f)=>nf().exec(f)!==null?Aa(l):os(l),Z={getTableSize:l=>Gl(l).fold(()=>li(l),v=>_(l,v)),pixelSize:os,percentageSize:Aa,noneSize:li},ne=(l,f,v,C,O,I)=>({minRow:l,minCol:f,maxRow:v,maxCol:C,allCells:O,selectedCells:I}),Se=(l,f)=>{const v=l.grid.columns;let O=l.grid.rows,I=v,U=0,Q=0;const ae=[],we=[];return Fo(l.access,Le=>{if(ae.push(Le),f(Le)){we.push(Le);const St=Le.row,jt=St+Le.rowspan-1,zt=Le.column,Nt=zt+Le.colspan-1;St<O?O=St:jt>U&&(U=jt),zt<I?I=zt:Nt>Q&&(Q=Nt)}}),ne(O,I,U,Q,ae,we)},rt=(l,f,v)=>{const C=l[v].element,O=lt.fromTag("td");ys(O,lt.fromTag("br")),(f?ys:pa)(C,O)},At=(l,f,v,C)=>{const O=fn(l,Q=>Q.section!=="colgroup"),I=f.grid.columns,U=f.grid.rows;for(let Q=0;Q<U;Q++){let ae=!1;for(let we=0;we<I;we++)Q<v.minRow||Q>v.maxRow||we<v.minCol||we>v.maxCol||(po.getAt(f,Q,we).filter(C).isNone()?rt(O,ae,Q):ae=!0)}},un=(l,f,v,C)=>{Fo(v.columns,U=>{(U.column<f.minCol||U.column>f.maxCol)&&Us(U.element)});const O=fn(Zl(l,"tr"),U=>U.dom.childElementCount===0);Ae(O,Us),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&Ae(Zl(l,"th,td"),U=>{fe(U,"rowspan"),fe(U,"colspan")}),fe(l,yc),fe(l,"data-snooker-col-series"),Z.getTableSize(l).adjustTableWidth(C)},jn=(l,f,v,C)=>{if(C.minCol===0&&f.grid.columns===C.maxCol+1)return 0;const O=ca(f,l,v),I=$e(O,(we,Le)=>we+Le,0),ae=$e(O.slice(C.minCol,C.maxCol+1),(we,Le)=>we+Le,0)/I*v.pixelWidth()-v.pixelWidth();return v.getCellDelta(ae)},ao=(l,f)=>{const v=jt=>Ke(jt.element,f),C=Mr(l),O=Oh(C),I=Z.getTableSize(l),U=po.generate(O),Q=Se(U,v),ae="th:not("+f+"),td:not("+f+")",we=Ud(C,"th,td",jt=>Ke(jt,ae));Ae(we,Us),At(O,U,Q,v);const Le=po.fromTable(l),St=jn(l,Le,I,Q);return un(C,Q,U,St),C},as=" ",Qs=((l,f)=>{const v=I=>{if(!l(I))throw new Error("Can only get "+f+" value of a "+f+" node");return C(I).getOr("")},C=I=>l(I)?ve.from(I.dom.nodeValue):ve.none();return{get:v,getOption:C,set:(I,U)=>{if(!l(I))throw new Error("Can only set raw "+f+" value of a "+f+" node");I.dom.nodeValue=U}}})(Qa,"text"),Ti=l=>Qs.get(l),Kl=l=>Qs.getOption(l),ld=(l,f)=>Qs.set(l,f),$i=l=>Qo(l)==="img"?1:Kl(l).fold(()=>ds(l).length,f=>f.length),of=l=>Kl(l).filter(f=>f.trim().length!==0||f.indexOf(as)>-1).isSome(),Yf=l=>En(l)&&Rr(l,"contenteditable")==="false",Yl=["img","br"],Xl=l=>of(l)||Hn(Yl,Qo(l))||Yf(l),jm=l=>Gc(l,Xl),Hh=l=>zh(l,Xl),zh=(l,f)=>{const v=C=>{const O=ds(C);for(let I=O.length-1;I>=0;I--){const U=O[I];if(f(U))return ve.some(U);const Q=v(U);if(Q.isSome())return Q}return ve.none()};return v(l)},o2={scope:["row","col"]},la=l=>()=>{const f=lt.fromTag("td",l.dom);return ys(f,lt.fromTag("br",l.dom)),f},xo=l=>()=>lt.fromTag("col",l.dom),Fs=l=>()=>lt.fromTag("colgroup",l.dom),va=l=>()=>lt.fromTag("tr",l.dom),Cc=(l,f,v)=>{const C=bi(l,f);return Fo(v,(O,I)=>{O===null?fe(C,I):Vs(C,I,O)}),C},Bc=l=>l,Vh=(l,f,v)=>jm(l).map(O=>{const I=v.join(","),U=cn(O,I,Q=>es(Q,l));return io(U,(Q,ae)=>{const we=Ic(ae);return ys(Q,we),we},f)}).getOr(f),Xf=(l,f)=>{Fo(o2,(v,C)=>pe(l,C).filter(O=>Hn(v,O)).each(O=>Vs(f,C,O)))},ud=(l,f,v)=>{const C=(U,Q)=>{sa(U.element,Q),Si(Q,"height"),U.colspan!==1&&Si(Q,"width")},O=U=>{const Q=lt.fromTag(Qo(U.element),f.dom),ae=v.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),we=ae.length>0?Vh(U.element,Q,ae):Q;return ys(we,lt.fromTag("br")),C(U,Q),Xf(U.element,Q),l(U.element,Q),Q};return{col:U=>{const Q=lt.fromTag(Qo(U.element),f.dom);return C(U,Q),l(U.element,Q),Q},colgroup:Fs(f),row:va(f),cell:O,replace:Cc,colGap:xo(f),gap:la(f)}},dd=l=>({col:xo(l),colgroup:Fs(l),row:va(l),cell:la(l),replace:Bc,colGap:xo(l),gap:la(l)}),fd=(l,f)=>{const C=document.createElement("div");return C.innerHTML=l,ds(lt.fromDom(C))},vS=l=>yn(l,lt.fromDom),Hi=l=>f=>f.options.get(l),yS="100%",Jl=l=>{var f;const v=l.dom,C=(f=v.getParent(l.selection.getStart(),v.isBlock))!==null&&f!==void 0?f:l.getBody();return ad(lt.fromDom(C))+"px"},Jf=(l,f)=>ki(l)||!M1(l)?f:Ql(l)?{...f,width:Jl(l)}:{...f,width:yS},Uh=(l,f)=>ki(l)||M1(l)?f:Ql(l)?{...f,width:Jl(l)}:{...f,width:yS},Uk=l=>{const f=l.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:v=>{const C=Hn(["section","cells","sectionCells","auto"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:v=>{const C=Hn(["preservetable","resizetable"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},tp=l=>ve.from(l.options.get("table_clone_elements")),Wh=l=>{const f=l.options.get("object_resizing");return Hn(f.split(","),"table")},wS=Hi("table_header_type"),Br=Hi("table_column_resizing"),s2=l=>Br(l)==="preservetable",md=l=>Br(l)==="resizetable",qm=Hi("table_sizing_mode"),np=l=>qm(l)==="relative",Ql=l=>qm(l)==="fixed",ki=l=>qm(l)==="responsive",w0=Hi("table_resize_bars"),M1=Hi("table_style_by_css"),Zh=Hi("table_merge_content_on_paste"),Ha=l=>{const f=l.options,v=f.get("table_default_attributes");return f.isSet("table_default_attributes")?v:Uh(l,v)},C0=l=>{const f=l.options,v=f.get("table_default_styles");return f.isSet("table_default_styles")?v:Jf(l,v)},S0=Hi("table_use_colgroups"),CS=l=>Jr(l,"[contenteditable]"),N1=(l,f=!1)=>Vn(l)?l.dom.isContentEditable:CS(l).fold(de(f),v=>P1(v)==="true"),P1=l=>l.dom.contentEditable,Qf=l=>lt.fromDom(l.getBody()),Ji=l=>f=>es(f,Qf(l)),Lc=l=>{fe(l,"data-mce-style");const f=v=>fe(v,"data-mce-style");Ae(td(l),f),Ae(bc(l),f),Ae(Hg(l),f)},hd=l=>lt.fromDom(l.selection.getStart()),r2=l=>l.getBoundingClientRect().width,I1=l=>l.getBoundingClientRect().height,op=l=>(f,v)=>{const C=f.dom.getStyle(v,l)||f.dom.getAttrib(v,l);return ve.from(C).filter(no)},SS=op("width"),xS=op("height"),ES=l=>/^(\d+(\.\d+)?)%$/.test(l),a2=l=>/^(\d+(\.\d+)?)px$/.test(l),Gm=l=>ti(l,vs("table")).exists(N1),bo=(l,f)=>{const v=f.column,C=f.column+f.colspan-1,O=f.row,I=f.row+f.rowspan-1;return v<=l.finishCol&&C>=l.startCol&&O<=l.finishRow&&I>=l.startRow},bn=(l,f)=>f.column>=l.startCol&&f.column+f.colspan-1<=l.finishCol&&f.row>=l.startRow&&f.row+f.rowspan-1<=l.finishRow,Km=(l,f)=>{let v=!0;const C=Gt(bn,f);for(let O=f.startRow;O<=f.finishRow;O++)for(let I=f.startCol;I<=f.finishCol;I++)v=v&&po.getAt(l,O,I).exists(C);return v?ve.some(f):ve.none()},x0=(l,f)=>Hl(Math.min(l.row,f.row),Math.min(l.column,f.column),Math.max(l.row+l.rowspan-1,f.row+f.rowspan-1),Math.max(l.column+l.colspan-1,f.column+f.colspan-1)),B1=(l,f,v)=>{const C=po.findItem(l,f,es),O=po.findItem(l,v,es);return C.bind(I=>O.map(U=>x0(I,U)))},_S=(l,f,v)=>B1(l,f,v).bind(C=>Km(l,C)),E0=(l,f,v,C)=>po.findItem(l,f,es).bind(O=>{const I=v>0?O.row+O.rowspan-1:O.row,U=C>0?O.column+O.colspan-1:O.column;return po.getAt(l,I+v,U+C).map(ae=>ae.element)}),ms=(l,f,v)=>B1(l,f,v).map(C=>{const O=po.filterItems(l,Gt(bo,C));return yn(O,I=>I.element)}),i2=(l,f)=>{const v=(C,O)=>jc(O,C);return po.findItem(l,f,v).map(C=>C.element)},Wk=(l,f,v)=>oi(l).bind(C=>{const O=L1(C);return E0(O,l,f,v)}),c2=(l,f,v)=>{const C=L1(l);return ms(C,f,v)},ot=(l,f,v,C,O)=>{const I=L1(l),U=es(l,v)?ve.some(f):i2(I,f),Q=es(l,O)?ve.some(C):i2(I,C);return U.bind(ae=>Q.bind(we=>ms(I,ae,we)))},_0=(l,f,v)=>{const C=L1(l);return _S(C,f,v)},L1=po.fromTable;var T0=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],F1=()=>{const l=we=>lt.fromDom(we.dom.cloneNode(!1)),f=we=>Ms(we).dom,v=we=>or(we)?Qo(we)==="body"?!0:Hn(T0,Qo(we)):!1,C=we=>or(we)?Hn(["br","img","hr","input"],Qo(we)):!1,O=we=>or(we)&&Rr(we,"contenteditable")==="false",I=(we,Le)=>we.dom.compareDocumentPosition(Le.dom),U=(we,Le)=>{const St=Ve(we);xa(Le,St)},Q=we=>{const Le=Qo(we);return Hn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Le)},ae=we=>or(we)?pe(we,"lang"):ve.none();return{up:de({selector:ur,closest:Jr,predicate:ut,all:Ns}),down:de({selector:$o,predicate:Be}),styles:de({get:Ju,getRaw:bu,set:Ps,remove:Si}),attrs:de({get:Rr,set:Vs,remove:fe,copyTo:U}),insert:de({before:hc,after:pi,afterAll:Ku,append:ys,appendAll:So,prepend:pa,wrap:gc}),remove:de({unwrap:hu,remove:Us}),create:de({nu:lt.fromTag,clone:l,text:lt.fromText}),query:de({comparePosition:I,prevSibling:dl,nextSibling:ei}),property:de({children:ds,name:Qo,parent:Wr,document:f,isText:Qa,isComment:Yo,isElement:or,isSpecial:Q,getLanguage:ae,getText:Ti,setText:ld,isBoundary:v,isEmptyTag:C,isNonEditable:O}),eq:es,is:Xr}};const sp=(l,f,v,C)=>{const O=v[0],I=v.slice(1);return C(l,f,O,I)},k0=(l,f,v)=>v.length>0?sp(l,f,v,jh):ve.none(),jh=(l,f,v,C)=>{const O=f(l,v);return io(C,(I,U)=>{const Q=f(l,U);return $1(l,I,Q)},O)},$1=(l,f,v)=>f.bind(C=>v.filter(Gt(l.eq,C))),Ym=(l,f)=>Gt(l.eq,f),er=(l,f,v,C=en)=>{const O=[f].concat(l.up().all(f)),I=[v].concat(l.up().all(v)),U=Le=>Hs(Le,C).fold(()=>Le,jt=>Le.slice(0,jt+1)),Q=U(O),ae=U(I),we=W(Q,Le=>wt(ae,Ym(l,Le)));return{firstpath:Q,secondpath:ae,shared:we}},sf=k0,TS=er,rf=F1(),A0=(l,f)=>sf(rf,(v,C)=>l(C),f),H1=(l,f,v)=>TS(rf,l,f,v),z1=l=>ur(l,"table"),O0=(l,f,v)=>{const C=O=>I=>v!==void 0&&v(I)||es(I,O);return es(l,f)?ve.some({boxes:ve.some([l]),start:l,finish:f}):z1(l).bind(O=>z1(f).bind(I=>{if(es(O,I))return ve.some({boxes:c2(O,l,f),start:l,finish:f});if(jc(O,I)){const U=cn(f,"td,th",C(O)),Q=U.length>0?U[U.length-1]:f;return ve.some({boxes:ot(O,l,O,f,I),start:l,finish:Q})}else if(jc(I,O)){const U=cn(l,"td,th",C(I)),Q=U.length>0?U[U.length-1]:l;return ve.some({boxes:ot(I,l,O,f,I),start:l,finish:Q})}else return H1(l,f).shared.bind(U=>Jr(U,"table",v).bind(Q=>{const ae=cn(f,"td,th",C(Q)),we=ae.length>0?ae[ae.length-1]:f,Le=cn(l,"td,th",C(Q)),St=Le.length>0?Le[Le.length-1]:l;return ve.some({boxes:ot(Q,l,O,f,I),start:St,finish:we})}))}))},Fc=(l,f)=>{const v=$o(l,f);return v.length>0?ve.some(v):ve.none()},D0=(l,f)=>W(l,v=>Ke(v,f)),kS=(l,f,v)=>yi(l,f).bind(C=>yi(l,v).bind(O=>A0(z1,[C,O]).map(I=>({first:C,last:O,table:I})))),qh=(l,f)=>ur(l,"table").bind(v=>yi(v,f).bind(C=>O0(C,l).bind(O=>O.boxes.map(I=>({boxes:I,start:O.start,finish:O.finish}))))),Zk=(l,f,v,C,O)=>D0(l,O).bind(I=>Wk(I,f,v).bind(U=>qh(U,C))),Xm=(l,f)=>Fc(l,f),l2=(l,f,v)=>kS(l,f,v).bind(C=>{const O=ae=>es(l,ae),I="thead,tfoot,tbody,table",U=ur(C.first,I,O),Q=ur(C.last,I,O);return U.bind(ae=>Q.bind(we=>es(ae,we)?_0(C.table,C.first,C.last):ve.none()))}),AS=Je,R0=l=>{const f=(C,O)=>pe(C,O).exists(I=>parseInt(I,10)>1),v=C=>f(C,"rowspan")||f(C,"colspan");return l.length>0&&zo(l,v)?ve.some(l):ve.none()},gd=(l,f,v)=>f.length<=1?ve.none():l2(l,v.firstSelectedSelector,v.lastSelectedSelector).map(C=>({bounds:C,cells:f})),ui="data-mce-selected",Et="td["+ui+"],th["+ui+"]",rp="["+ui+"]",ya="data-mce-first-selected",jk="td["+ya+"],th["+ya+"]",V1="data-mce-last-selected",qk="td["+V1+"],th["+V1+"]",$s=rp,Gh={selected:ui,selectedSelector:Et,firstSelected:ya,firstSelectedSelector:jk,lastSelected:V1,lastSelectedSelector:qk},M0=(l,f,v)=>({element:v,mergable:gd(f,l,Gh),unmergable:R0(l),selection:AS(l)}),ap=(l,f,v)=>({element:l,clipboard:f,generators:v}),ip=(l,f,v,C)=>({selection:AS(l),clipboard:v,generators:C}),u2=l=>oi(l).bind(f=>Xm(f,Gh.firstSelectedSelector)).fold(de(l),f=>f[0]),pd=l=>(f,v)=>{const C=Qo(f),O=C==="col"||C==="colgroup"?u2(f):f;return Jr(O,l,v)},Gk=pd("th,td,caption"),Lr=pd("th,td"),bd=l=>vS(l.model.table.getSelectedCells()),mr=l=>fn(bd(l),f=>Ke(f,Gh.selectedSelector)),d2=l=>oi(l[0]).map(f=>{const v=ao(f,$s);return Lc(v),[v]}),Sc=(l,f)=>yn(f,v=>l.selection.serializer.serialize(v.dom,{})).join(""),cp=(l,f)=>{const v=l.getDoc(),C=ke(lt.fromDom(l.getBody())),O=lt.fromTag("div",v);Vs(O,"data-mce-bogus","all"),oa(O,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const I=Ye(C);So(O,f),ys(I,O);const U=O.dom.innerText;return Us(O),U},vd=(l,f)=>{l.on("BeforeGetContent",v=>{const C=O=>{v.preventDefault(),d2(O).each(I=>{const U=v.format==="text"?cp(l,I):Sc(l,I);v.content=U})};if(v.selection===!0){const O=mr(l);O.length>=1&&C(O)}}),l.on("BeforeSetContent",v=>{if(v.selection===!0&&v.paste===!0){const C=bd(l);xe(C).each(O=>{oi(O).each(I=>{const U=fn(fd(v.content),ae=>Qo(ae)!=="meta"),Q=vs("table");if(Zh(l)&&U.length===1&&Q(U[0])){v.preventDefault();const ae=lt.fromDom(l.getDoc()),we=dd(ae),Le=ap(O,U[0],we);f.pasteCells(I,Le).each(()=>{l.focus()})}})})}})},N0=(l,f)=>({element:l,offset:f}),Kk=(l,f,v)=>l.property().isText(f)&&l.property().getText(f).trim().length===0||l.property().isComment(f)?v(f).bind(C=>Kk(l,C,v).orThunk(()=>ve.some(C))):ve.none(),Yk=(l,f)=>l.property().isText(f)?l.property().getText(f).length:l.property().children(f).length,OS=(l,f)=>{const v=Kk(l,f,l.query().prevSibling).getOr(f);if(l.property().isText(v))return N0(v,Yk(l,v));const C=l.property().children(v);return C.length>0?OS(l,C[C.length-1]):N0(v,Yk(l,v))},yd=OS,wd=F1(),Qi=l=>yd(wd,l),lp=(l,f)=>{Er(l)||Jg(l).each(C=>{const O=C.value/2;st(l,O,C.unit),st(f,O,C.unit)})},Kh=l=>yn(l,de(0)),DS=(l,f,v,C,O)=>O(l.slice(0,f)).concat(C).concat(O(l.slice(v))),up=l=>(f,v,C,O)=>{if(l(C)){const I=Math.max(O,f[v]-Math.abs(C)),U=Math.abs(I-f[v]);return C>=0?U:-U}else return C},af=up(l=>l<0),Yh=up(Fe),Xh=()=>{const l=(Q,ae,we,Le,St)=>{const jt=af(Q,ae,Le,St);return DS(Q,ae,we+1,[jt,0],Kh)},f=(Q,ae,we,Le)=>{const St=(100+we)/100,jt=Math.max(Le,(Q[ae]+we)/St);return yn(Q,(zt,Nt)=>(Nt===ae?jt:zt/St)-zt)},v=(Q,ae,we,Le,St,jt)=>jt?f(Q,ae,Le,St):l(Q,ae,we,Le,St);return{resizeTable:(Q,ae)=>Q(ae),clampTableDelta:af,calcLeftEdgeDeltas:v,calcMiddleDeltas:(Q,ae,we,Le,St,jt,zt)=>v(Q,we,Le,St,jt,zt),calcRightEdgeDeltas:(Q,ae,we,Le,St,jt)=>{if(jt)return f(Q,we,Le,St);{const zt=af(Q,we,Le,St);return Kh(Q.slice(0,we)).concat([zt])}},calcRedestributedWidths:(Q,ae,we,Le)=>{if(Le){const jt=(ae+we)/ae,zt=yn(Q,Nt=>Nt/jt);return{delta:jt*100-100,newSizes:zt}}else return{delta:we,newSizes:Q}}}},em=()=>{const l=(U,Q,ae,we,Le)=>{const St=we>=0?ae:Q,jt=Yh(U,St,we,Le);return DS(U,Q,ae+1,[jt,-jt],Kh)};return{resizeTable:(U,Q,ae)=>{ae&&U(Q)},clampTableDelta:(U,Q,ae,we,Le)=>{if(Le){if(ae>=0)return ae;{const St=$e(U,(jt,zt)=>jt+zt-we,0);return Math.max(-St,ae)}}else return af(U,Q,ae,we)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(U,Q,ae,we,Le,St)=>l(U,ae,we,Le,St),calcRightEdgeDeltas:(U,Q,ae,we,Le,St)=>{if(St)return Kh(U);{const jt=we/U.length;return yn(U,de(jt))}},calcRedestributedWidths:(U,Q,ae,we)=>({delta:0,newSizes:U})}},cf=l=>po.fromTable(l).grid,Jh=vs("th"),U1=l=>zo(l,f=>Jh(f.element)),Xk=(l,f)=>l&&f?"sectionCells":l?"section":"cells",f2=l=>{const f=l.section==="thead",v=wi(P0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:f||v?{type:"header",subType:Xk(f,v)}:{type:"body"}},P0=l=>{const f=fn(l,v=>Jh(v.element));return f.length===0?ve.some("td"):f.length===l.length?ve.some("th"):ve.none()},I0=l=>{const f=yn(l,O=>f2(O).type),v=Hn(f,"header"),C=Hn(f,"footer");if(!v&&!C)return ve.some("body");{const O=Hn(f,"body");return v&&!O&&!C?ve.some("header"):!v&&!O&&C?ve.some("footer"):ve.none()}},RS=l=>Do(l.all,f=>{const v=f2(f);return v.type==="header"?ve.from(v.subType):ve.none()}),m2=(l,f,v)=>Nr(v(l.element,f),!0,l.isLocked),B0=(l,f)=>l.section!==f?vi(l.element,l.cells,f,l.isNew):l,MS=()=>({transformRow:B0,transformCell:(l,f,v)=>{const C=v(l.element,f),O=Qo(C)!=="td"?Hd(C,"td"):C;return Nr(O,l.isNew,l.isLocked)}}),W1=()=>({transformRow:B0,transformCell:m2}),h2=()=>({transformRow:(l,f)=>B0(l,f==="thead"?"tbody":f),transformCell:m2}),Z1={getTableSectionType:(l,f)=>{const v=po.fromTable(l);switch(RS(v).getOr(f)){case"section":return MS();case"sectionCells":return W1();case"cells":return h2()}},section:MS,sectionCells:W1,cells:h2,fallback:()=>({transformRow:Je,transformCell:m2})},dp=(l,f,v,C)=>{v===C?fe(l,f):Vs(l,f,v)},tm=(l,f,v)=>{Oo(It(l,f)).fold(()=>pa(l,v),C=>pi(C,v))},F0=(l,f)=>{const v=uo(l,f).getOrThunk(()=>{const C=lt.fromTag(f,Ea(l).dom);return f==="thead"?tm(l,"caption,colgroup",C):f==="colgroup"?tm(l,"caption",C):ys(l,C),C});return Pc(v),v},NS=(l,f)=>{const v=[],C=[],O=zt=>yn(zt,Nt=>{Nt.isNew&&v.push(Nt.element);const hn=Nt.element;return Pc(hn),Ae(Nt.cells,vt=>{vt.isNew&&C.push(vt.element),dp(vt.element,"colspan",vt.colspan,1),dp(vt.element,"rowspan",vt.rowspan,1),ys(hn,vt.element)}),hn}),I=zt=>To(zt,Nt=>yn(Nt.cells,hn=>(dp(hn.element,"span",hn.colspan,1),hn.element))),U=(zt,Nt)=>{const hn=F0(l,Nt),Rn=(Nt==="colgroup"?I:O)(zt);So(hn,Rn)},Q=zt=>{uo(l,zt).each(Us)},ae=(zt,Nt)=>{zt.length>0?U(zt,Nt):Q(Nt)},we=[],Le=[],St=[],jt=[];return Ae(f,zt=>{switch(zt.section){case"thead":we.push(zt);break;case"tbody":Le.push(zt);break;case"tfoot":St.push(zt);break;case"colgroup":jt.push(zt);break}}),ae(jt,"colgroup"),ae(we,"thead"),ae(Le,"tbody"),ae(St,"tfoot"),{newRows:v,newCells:C}},PS=l=>yn(l,f=>{const v=Ic(f.element);return Ae(f.cells,C=>{const O=Mr(C.element);dp(O,"colspan",C.colspan,1),dp(O,"rowspan",C.rowspan,1),ys(v,O)}),v}),IS=(l,f)=>yn(l,v=>Bi(v,f)),Qh=(l,f)=>l[f],Jk=(l,f)=>{if(l.length===0)return 0;const v=l[0];return Hs(l,O=>!f(v.element,O.element)).getOr(l.length)},fp=(l,f,v,C)=>{const O=Qh(l,f),I=O.section==="colgroup",U=Jk(O.cells.slice(v),C),Q=I?1:Jk(IS(l.slice(f),v),C);return{colspan:U,rowspan:Q}},mp=(l,f)=>{const v=yn(l,O=>yn(O.cells,en)),C=(O,I,U,Q)=>{for(let ae=O;ae<O+U;ae++)for(let we=I;we<I+Q;we++)v[ae][we]=!0};return yn(l,(O,I)=>{const U=To(O.cells,(Q,ae)=>{if(v[I][ae]===!1){const we=fp(l,I,ae,f);return C(I,ae,we.rowspan,we.colspan),[Xu(Q.element,we.rowspan,we.colspan,Q.isNew)]}else return[]});return br(O.element,U,O.section,O.isNew)})},hp=(l,f,v)=>{const C=[];Ae(l.colgroups,O=>{const I=[];for(let U=0;U<l.grid.columns;U++){const Q=po.getColumnAt(l,U).map(ae=>Nr(ae.element,v,!1)).getOrThunk(()=>Nr(f.colGap(),!0,!1));I.push(Q)}C.push(vi(O.element,I,"colgroup",v))});for(let O=0;O<l.grid.rows;O++){const I=[];for(let ae=0;ae<l.grid.columns;ae++){const we=po.getAt(l,O,ae).map(Le=>Nr(Le.element,v,Le.isLocked)).getOrThunk(()=>Nr(f.gap(),!0,!1));I.push(we)}const U=l.all[O],Q=vi(U.element,I,U.section,v);C.push(Q)}return C},BS=(l,f)=>hp(l,f,!1),$0=l=>mp(l,es),LS=(l,f)=>Do(l.all,v=>W(v.cells,C=>es(f,C.element))),FS=(l,f,v)=>{const C=yn(f.selection,I=>ed(I).bind(U=>LS(l,U)).filter(v)),O=xr(C);return $g(O.length>0,O)},zi=(l,f,v,C,O)=>(I,U,Q,ae)=>{const we=po.fromTable(I),Le=ve.from(ae==null?void 0:ae.section).getOrThunk(Z1.fallback);return f(we,U).map(jt=>{const zt=BS(we,Q),Nt=l(zt,jt,es,O(Q),Le),hn=Js(Nt.grid),vt=$0(Nt.grid);return{info:jt,grid:vt,cursor:Nt.cursor,lockedColumns:hn}}).bind(jt=>{const zt=NS(I,jt.grid),Nt=ve.from(ae==null?void 0:ae.sizing).getOrThunk(()=>Z.getTableSize(I)),hn=ve.from(ae==null?void 0:ae.resize).getOrThunk(em);return v(I,jt.grid,jt.info,{sizing:Nt,resize:hn,section:Le}),C(I),fe(I,yc),jt.lockedColumns.length>0&&Vs(I,yc,jt.lockedColumns.join(",")),ve.some({cursor:jt.cursor,newRows:zt.newRows,newCells:zt.newCells})})},Qk=(l,f)=>ed(f.element).bind(v=>LS(l,v).map(C=>({...C,generators:f.generators,clipboard:f.clipboard}))),$S=(l,f)=>FS(l,f,Fe).map(v=>({cells:v,generators:f.generators,clipboard:f.clipboard})),gp=(l,f)=>f.mergable,e4=(l,f)=>f.unmergable,Ai=(l,f)=>FS(l,f,Fe),Tu=(l,f)=>FS(l,f,v=>!v.isLocked),g2=(l,f)=>LS(l,f).exists(v=>!v.isLocked),Jm=(l,f)=>zo(f,v=>g2(l,v)),t4=(l,f)=>gp(l,f).filter(v=>Jm(l,v.cells)),j1=(l,f)=>e4(l,f).filter(v=>Jm(l,v)),H0=(l,f,v,C)=>{const O=ra(l).rows;if(O.length===0)return l;for(let I=f.startRow;I<=f.finishRow;I++)for(let U=f.startCol;U<=f.finishCol;U++){const Q=O[I],ae=Bi(Q,U).isLocked;Gn(Q,U,Nr(C(),!1,ae))}return l},nm=(l,f,v,C)=>{const O=ra(l).rows;let I=!0;for(let U=0;U<O.length;U++)for(let Q=0;Q<Xi(O[0]);Q++){const ae=O[U],we=Bi(ae,Q),Le=we.element,St=v(Le,f);St&&!I?Gn(ae,Q,Nr(C(),!0,we.isLocked)):St&&(I=!1)}return l},HS=(l,f)=>$e(l,(v,C)=>wt(v,O=>f(O.element,C.element))?v:v.concat([C]),[]),Cd=(l,f,v,C)=>(f>0&&f<l[0].cells.length&&Ae(l,O=>{const I=O.cells[f-1];let U=0;const Q=C();for(;O.cells.length>f+U&&v(I.element,O.cells[f+U].element);)Gn(O,f+U,Nr(Q,!0,O.cells[f+U].isLocked)),U++}),l),lf=(l,f,v,C)=>{const O=ra(l).rows;if(f>0&&f<O.length){const I=O[f-1].cells,U=HS(I,v);Ae(U,Q=>{let ae=ve.none();for(let we=f;we<O.length;we++)for(let Le=0;Le<Xi(O[0]);Le++){const St=O[we],jt=Bi(St,Le);v(jt.element,Q.element)&&(ae.isNone()&&(ae=ve.some(C())),ae.each(Nt=>{Gn(St,Le,Nr(Nt,!0,jt.isLocked))}))}})}return l},zS=l=>{const f=I=>I(l),v=de(l),C=()=>O,O={tag:!0,inner:l,fold:(I,U)=>U(l),isValue:Fe,isError:en,map:I=>xc.value(I(l)),mapError:C,bind:f,exists:f,forall:f,getOr:v,or:C,getOrThunk:v,orThunk:C,getOrDie:v,each:I=>{I(l)},toOptional:()=>ve.some(l)};return O},Oa=l=>{const f=()=>v,v={tag:!1,inner:l,fold:(C,O)=>C(l),isValue:en,isError:Fe,map:f,mapError:C=>xc.error(C(l)),bind:f,exists:en,forall:Fe,getOr:Je,or:Je,getOrThunk:In,orThunk:In,getOrDie:Xt(String(l)),each:Ne,toOptional:ve.none};return v},xc={value:zS,error:Oa,fromOption:(l,f)=>l.fold(()=>Oa(f),zS)},n4=(l,f,v)=>{if(l.row>=f.length||l.column>Xi(f[0]))return xc.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const C=f.slice(l.row),O=C[0].cells.slice(l.column),I=Xi(v[0]),U=v.length;return xc.value({rowDelta:C.length-U,colDelta:O.length-I})},z0=(l,f)=>{const v=Xi(l[0]),C=Xi(f[0]);return{rowDelta:0,colDelta:v-C}},eg=(l,f)=>{const v=l.length,C=f.length;return{rowDelta:v-C,colDelta:0}},om=(l,f,v,C)=>{const O=f.section==="colgroup"?v.col:v.cell;return Eo(l,I=>Nr(O(),!0,C(I)))},uf=(l,f,v,C)=>{const O=l[l.length-1];return l.concat(Eo(f,()=>{const I=O.section==="colgroup"?v.colgroup:v.row,U=Ei(O,I,Je),Q=om(U.cells.length,U,v,ae=>Ts(C,ae.toString()));return vr(U,Q)}))},eu=(l,f,v,C)=>yn(l,O=>{const I=om(f,O,v,en);return Zf(O,C,I)}),VS=(l,f,v)=>yn(l,C=>$e(v,(O,I)=>{const U=om(1,C,f,Fe)[0];return jg(O,I,U)},C)),q1=(l,f,v)=>{const C=f.colDelta<0?eu:Je,O=f.rowDelta<0?uf:Je,I=Js(l),U=Xi(l[0]),Q=wt(I,Le=>Le===U-1),ae=C(l,Math.abs(f.colDelta),v,Q?U-1:U),we=Js(ae);return O(ae,Math.abs(f.rowDelta),v,et(we,Fe))},pp=(l,f,v,C)=>{const O=Bi(l[f],v),I=Gt(C,O.element),U=l[f];return l.length>1&&Xi(U)>1&&(v>0&&I(ai(U,v-1))||v<U.cells.length-1&&I(ai(U,v+1))||f>0&&I(ai(l[f-1],v))||f<l.length-1&&I(ai(l[f+1],v)))},sm=(l,f,v,C,O,I)=>{const U=l.row,Q=l.column,ae=v.length,we=Xi(v[0]),Le=U+ae,St=Q+we+I.length,jt=et(I,Fe);for(let zt=U;zt<Le;zt++){let Nt=0;for(let hn=Q;hn<St;hn++){if(jt[hn]){Nt++;continue}pp(f,zt,hn,O)&&nm(f,ai(f[zt],hn),O,C.cell);const vt=hn-Q-Nt,Rn=Bi(v[zt-U],vt),so=Rn.element,ft=C.replace(so);Gn(f[zt],hn,Nr(ft,!0,Rn.isLocked))}}return f},V0=(l,f,v)=>{const C=Xi(f[0]),O=ra(f).cols.length+l.row,I=Eo(C-l.column,Q=>Q+l.column),U=W(I,Q=>zo(v,ae=>ae!==Q)).getOr(C-1);return{row:O,column:U}},Ao=(l,f,v)=>fn(v,C=>C>=l.column&&C<=Xi(f[0])+l.column),ec=(l,f,v,C,O)=>{const I=Js(f),U=V0(l,f,I),Q=ra(v).rows,ae=Ao(U,Q,I);return n4(U,f,Q).map(Le=>{const St={...Le,colDelta:Le.colDelta-ae.length},jt=q1(f,St,C),zt=Js(jt),Nt=Ao(U,Q,zt);return sm(U,jt,Q,C,O,Nt)})},Qm=(l,f,v,C,O)=>{Cd(f,l,O,C.cell);const I=eg(v,f),U=q1(v,I,C),Q=eg(f,U),ae=q1(f,Q,C);return yn(ae,(we,Le)=>Zf(we,l,U[Le].cells))},bp=(l,f,v,C,O)=>{lf(f,l,O,C.cell);const I=Js(f),U=z0(f,v),Q={...U,colDelta:U.colDelta-I.length},ae=q1(f,Q,C),{cols:we,rows:Le}=ra(ae),St=Js(ae),jt=z0(v,f),zt={...jt,colDelta:jt.colDelta+St.length},Nt=VS(v,C,St),hn=q1(Nt,zt,C);return[...we,...Le.slice(0,l),...hn,...Le.slice(l,Le.length)]},tr=(l,f,v,C)=>Ei(l,O=>C(O,v),f),eh=(l,f,v,C,O)=>{const{rows:I,cols:U}=ra(l),Q=I.slice(0,f),ae=I.slice(f),we=tr(I[v],(Le,St)=>f>0&&f<I.length&&C(ai(I[f-1],St),ai(I[f],St))?Bi(I[f],St):Nr(O(Le.element,C),!0,Le.isLocked),C,O);return[...U,...Q,we,...ae]},th=(l,f,v,C,O,I,U)=>{if(v==="colgroup"||!C){const Q=Bi(l,O);return Nr(U(Q.element,I),!0,!1)}else return Bi(l,f)},b2=(l,f,v,C,O)=>yn(l,I=>{const U=f>0&&f<Xi(I)&&C(ai(I,f-1),ai(I,f)),Q=th(I,f,I.section,U,v,C,O);return jg(I,f,Q)}),tM=(l,f)=>To(l,v=>{const C=v.cells,O=io(f,(I,U)=>U>=0&&U<I.length?I.slice(0,U).concat(I.slice(U+1)):I,C);return O.length>0?[vi(v.element,O,v.section,v.isNew)]:[]}),US=(l,f,v)=>{const{rows:C,cols:O}=ra(l);return[...O,...C.slice(0,f),...C.slice(v+1)]},js=(l,f,v,C)=>ai(l[f],v)!==void 0&&f>0&&C(ai(l[f-1],v),ai(l[f],v)),G1=(l,f,v)=>f>0&&v(ai(l,f-1),ai(l,f)),WS=(l,f,v,C)=>js(l,f,v,C)||G1(l[f],v,C),o4=(l,f)=>zo(f,Je)&&U1(l.cells)?Fe:(C,O,I)=>!(Qo(C.element)==="th"&&f[I]),tg=(l,f)=>zo(f,Je)&&U1(l)?Fe:(C,O,I)=>!(Qo(C.element)==="th"&&f[O]),tu=(l,f,v,C)=>{const O=U=>U==="row"?Qu(f):Er(f),I=U=>O(U)?`${U}group`:U;return l?Jh(f)?I(v):null:C&&Jh(f)?I(v==="row"?"col":"row"):null},U0=(l,f)=>(v,C,O)=>ve.some(tu(l,v.element,"col",f[O])),rm=(l,f)=>(v,C)=>ve.some(tu(l,v.element,"row",f[C])),on=(l,f,v)=>Nr(v(l.element,f),!0,l.isLocked),v2=(l,f,v,C,O,I,U)=>{const Q=ae=>wt(f,we=>v(ae.element,we.element));return yn(l,(ae,we)=>Yd(ae,(Le,St)=>{if(Q(Le)){const jt=U(Le,we,St)?O(Le,v,C):Le;return I(jt,we,St).each(zt=>{Nc(jt.element,{scope:ve.from(zt)})}),jt}else return Le}))},y2=(l,f,v)=>To(l,(C,O)=>WS(l,O,f,v)?[]:[Bi(C,f)]),s4=(l,f,v)=>{const C=l[f];return To(C.cells,(O,I)=>WS(l,f,I,v)?[]:[O])},w2=(l,f,v,C,O)=>{const I=ra(l).rows,U=To(f,Le=>y2(I,Le,C)),Q=yn(I,Le=>U1(Le.cells)),ae=tg(U,Q),we=rm(v,Q);return v2(l,U,C,O,on,we,ae)},ZS=(l,f,v,C,O,I,U)=>{const{cols:Q,rows:ae}=ra(l),we=ae[f[0]],Le=To(f,vt=>s4(ae,vt,O)),St=yn(we.cells,(vt,Rn)=>U1(y2(ae,Rn,O))),jt=[...ae];Ae(f,vt=>{jt[vt]=U.transformRow(ae[vt],v)});const zt=[...Q,...jt],Nt=o4(we,St),hn=U0(C,St);return v2(zt,Le,O,I,U.transformCell,hn,Nt)},W0=(l,f,v,C)=>{const O=ra(l).rows,I=yn(f,U=>Bi(O[U.row],U.column));return v2(l,I,v,C,on,ve.none,Fe)},ku={generate:l=>{if(!le(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const f=[],v={};return Ae(l,(C,O)=>{const I=Kt(C);if(I.length!==1)throw new Error("one and only one name per case");const U=I[0],Q=C[U];if(v[U]!==void 0)throw new Error("duplicate key detected:"+U);if(U==="cata")throw new Error("cannot have a case named cata (sorry)");if(!le(Q))throw new Error("case arguments must be an array");f.push(U),v[U]=(...ae)=>{const we=ae.length;if(we!==Q.length)throw new Error("Wrong number of arguments to case "+U+". Expected "+Q.length+" ("+Q+"), got "+we);return{fold:(...St)=>{if(St.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+St.length);return St[O].apply(null,ae)},match:St=>{const jt=Kt(St);if(f.length!==jt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+jt.join(","));if(!zo(f,Nt=>Hn(jt,Nt)))throw new Error("Not all branches were specified when using match. Specified: "+jt.join(", ")+`
Required: `+f.join(", "));return St[U].apply(null,ae)},log:St=>{console.log(St,{constructors:f,constructor:U,params:ae})}}}}),v}},df={...ku.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},r4=(l,f)=>l.length===0?df.none():l.length===1?df.only(0):f===0?df.left(0,1):f===l.length-1?df.right(f-1,f):f>0&&f<l.length-1?df.middle(f-1,f,f+1):df.none(),j0=(l,f,v,C,O)=>{const I=l.slice(0),U=r4(l,f),Q=de(yn(I,de(0))),ae=jt=>C.singleColumnWidth(I[jt],v),we=(jt,zt)=>O.calcLeftEdgeDeltas(I,jt,zt,v,C.minCellWidth(),C.isRelative),Le=(jt,zt,Nt)=>O.calcMiddleDeltas(I,jt,zt,Nt,v,C.minCellWidth(),C.isRelative),St=(jt,zt)=>O.calcRightEdgeDeltas(I,jt,zt,v,C.minCellWidth(),C.isRelative);return U.fold(Q,ae,we,Le,St)},Au=(l,f,v)=>{let C=0;for(let O=l;O<f;O++)C+=v[O]!==void 0?v[O]:0;return C},a4=(l,f)=>{const v=po.justCells(l);return yn(v,C=>{const O=Au(C.column,C.column+C.colspan,f);return{element:C.element,width:O,colspan:C.colspan}})},q0=(l,f)=>{const v=po.justColumns(l);return yn(v,(C,O)=>({element:C.element,width:f[O],colspan:C.colspan}))},G0=(l,f)=>yn(l.all,(v,C)=>({element:v.element,height:f[C]})),i4=l=>io(l,(f,v)=>f+v,0),c4=(l,f)=>po.hasColumns(l)?q0(l,f):a4(l,f),K0=(l,f,v)=>{const C=c4(l,f);Ae(C,O=>{v.setElementWidth(O.element,O.width)})},Y0=(l,f,v,C,O)=>{const I=po.fromTable(l),U=O.getCellDelta(f),Q=O.getWidths(I,O),ae=v===I.grid.columns-1,we=C.clampTableDelta(Q,v,U,O.minCellWidth(),ae),Le=j0(Q,v,we,O,C),St=yn(Le,(jt,zt)=>jt+Q[zt]);K0(I,St,O),C.resizeTable(O.adjustTableWidth,we,ae)},jS=(l,f,v)=>{const C=po.fromTable(l),O=Zs(C,l),I=yn(O,(ae,we)=>v===we?Math.max(f+ae,zf()):ae),U=G0(C,I);Ae(U,ae=>{tf(ae.element,ae.height)}),Ae(po.justCells(C),ae=>{Kf(ae.element)});const Q=i4(I);tf(l,Q)},qS=(l,f,v,C,O)=>{const I=po.generate(f),U=C.getWidths(I,C),Q=C.pixelWidth(),{newSizes:ae,delta:we}=O.calcRedestributedWidths(U,Q,v.pixelDelta,C.isRelative);K0(I,ae,C),C.adjustTableWidth(we)},l4=(l,f,v,C)=>{const O=po.generate(f),I=C.getWidths(O,C);K0(O,I,C)},ff=l=>$e(l,(v,C)=>wt(v,I=>I.column===C.column)?v:v.concat([C]),[]).sort((v,C)=>v.column-C.column),GS=vs("col"),nh=vs("colgroup"),X0=l=>Qo(l)==="tr"||nh(l),KS=l=>{const f=Fa(l,"colspan",1),v=Fa(l,"rowspan",1);return{element:l,colspan:f,rowspan:v}},J0=(l,f=KS)=>{const v=Q=>GS(Q.element)?l.col(Q):l.cell(Q),C=Q=>nh(Q.element)?l.colgroup(Q):l.row(Q),O=Q=>{if(X0(Q))return C({element:Q});{const ae=Q,we=v(f(ae));return I=ve.some({item:ae,replacement:we}),we}};let I=ve.none();return{getOrInit:(Q,ae)=>I.fold(()=>O(Q),we=>ae(Q,we.item)?we.replacement:O(Q))}},C2=l=>f=>{const v=[],C=(U,Q)=>W(v,ae=>Q(ae.item,U)),O=U=>{const Q=l==="td"?{scope:null}:{},ae=f.replace(U,l,Q);return v.push({item:U,sub:ae}),ae};return{replaceOrInit:(U,Q)=>{if(X0(U)||GS(U))return U;{const ae=U;return C(ae,Q).fold(()=>O(ae),we=>Q(U,we.item)?we.sub:O(ae))}}}},Q0=l=>pe(l,"scope").map(f=>f.substr(0,3)),Ec={modification:J0,transform:C2,merging:l=>({unmerge:C=>{const O=Q0(C);return O.each(I=>Vs(C,"scope",I)),()=>{const I=l.cell({element:C,colspan:1,rowspan:1});return Si(I,"width"),Si(C,"width"),O.each(U=>Vs(I,"scope",U)),I}},merge:C=>{const O=()=>{const I=xr(yn(C,Q0));if(I.length===0)return ve.none();{const U=I[0],Q=["row","col"];return wt(I,we=>we!==U&&Hn(Q,we))?ve.none():ve.from(U)}};return Si(C[0],"width"),O().fold(()=>fe(C[0],"scope"),I=>Vs(C[0],"scope",I+"group")),de(C[0])}})},d4=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ng=(l,f)=>{const v=l.property().name(f);return Hn(["ol","ul"],v)},YS=(l,f)=>{const v=l.property().name(f);return Hn(d4,v)},oh=(l,f)=>Hn(["br","img","hr","input"],l.property().name(f)),am=F1(),S2=l=>YS(am,l),Qe=l=>ng(am,l),Ou=l=>oh(am,l),og=l=>{const f=vs("br"),v=ae=>zo(ae,we=>f(we)||Qa(we)&&Ti(we).trim().length===0),C=ae=>Qo(ae)==="li"||ut(ae,Qe).isSome(),O=ae=>ei(ae).map(we=>S2(we)?!0:Ou(we)?Qo(we)!=="img":!1).getOr(!1),I=ae=>Hh(ae).bind(we=>{const Le=O(we);return Wr(we).map(St=>Le===!0||C(St)||f(we)||S2(St)&&!es(ae,St)?[]:[lt.fromTag("br")])}).getOr([]),Q=(()=>{const ae=To(l,we=>{const Le=ds(we);return v(Le)?[]:Le.concat(I(we))});return ae.length===0?[lt.fromTag("br")]:ae})();Pc(l[0]),So(l[0],Q)},XS=l=>N1(l,!0),K1=l=>{td(l).length===0&&Us(l)},Qc=(l,f)=>({grid:l,cursor:f}),x2=l=>Do(l,f=>Do(f.cells,v=>{const C=v.element;return $g(XS(C),C)})),JS=(l,f,v)=>{var C,O;const I=ra(l).rows;return ve.from((O=(C=I[f])===null||C===void 0?void 0:C.cells[v])===null||O===void 0?void 0:O.element).filter(XS).orThunk(()=>x2(I))},_c=(l,f,v)=>{const C=JS(l,f,v);return Qc(l,C)},sg=l=>$e(l,(v,C)=>wt(v,I=>I.row===C.row)?v:v.concat([C]),[]).sort((v,C)=>v.row-C.row),f4=(l,f,v,C)=>{const O=f[0].row,I=sg(f),U=io(I,(Q,ae)=>({grid:eh(Q.grid,O,ae.row+Q.delta,v,C.getOrInit),delta:Q.delta+1}),{grid:l,delta:0}).grid;return _c(U,O,f[0].column)},QS=(l,f,v,C)=>{const O=sg(f),I=O[O.length-1],U=I.row+I.rowspan,Q=io(O,(ae,we)=>eh(ae,U,we.row,v,C.getOrInit),l);return _c(Q,U,f[0].column)},m4=(l,f,v,C)=>{const O=f.details,I=ff(O),U=I[0].column,Q=io(I,(ae,we)=>({grid:b2(ae.grid,U,we.column+ae.delta,v,C.getOrInit),delta:ae.delta+1}),{grid:l,delta:0}).grid;return _c(Q,O[0].row,U)},ex=(l,f,v,C)=>{const O=f.details,I=O[O.length-1],U=I.column+I.colspan,Q=ff(O),ae=io(Q,(we,Le)=>b2(we,U,Le.column,v,C.getOrInit),l);return _c(ae,O[0].row,U)},h4=(l,f,v,C)=>{const O=ff(f),I=yn(O,Q=>Q.column),U=w2(l,I,!0,v,C.replaceOrInit);return _c(U,f[0].row,f[0].column)},tx=(l,f,v,C)=>{const O=W0(l,f,v,C.replaceOrInit);return _c(O,f[0].row,f[0].column)},g4=(l,f,v,C)=>{const O=ff(f),I=yn(O,Q=>Q.column),U=w2(l,I,!1,v,C.replaceOrInit);return _c(U,f[0].row,f[0].column)},p4=(l,f,v,C)=>{const O=W0(l,f,v,C.replaceOrInit);return _c(O,f[0].row,f[0].column)},ev=(l,f)=>(v,C,O,I,U)=>{const Q=sg(C),ae=yn(Q,Le=>Le.row),we=ZS(v,ae,l,f,O,I.replaceOrInit,U);return _c(we,C[0].row,C[0].column)},tv=ev("thead",!0),b4=ev("tbody",!1),nx=ev("tfoot",!1),v4=(l,f,v,C)=>{const O=ff(f.details),I=tM(l,yn(O,Q=>Q.column)),U=I.length>0?I[0].cells.length-1:0;return _c(I,O[0].row,Math.min(O[0].column,U))},nr=(l,f,v,C)=>{const O=sg(f),I=US(l,O[0].row,O[O.length-1].row),U=Math.max(ra(I).rows.length-1,0);return _c(I,Math.min(f[0].row,U),f[0].column)},E2=(l,f,v,C)=>{const O=f.cells;og(O);const I=H0(l,f.bounds,v,C.merge(O));return Qc(I,ve.from(O[0]))},ox=(l,f,v,C)=>{const I=io(f,(U,Q)=>nm(U,Q,v,C.unmerge(Q)),l);return Qc(I,ve.from(f[0]))},sx=(l,f,v,C)=>{const I=((ae,we)=>{const Le=po.fromTable(ae);return hp(Le,we,!0)})(f.clipboard,f.generators),U=pc(f.row,f.column);return ec(U,l,I,f.generators,v).fold(()=>Qc(l,ve.some(f.element)),ae=>_c(ae,f.row,f.column))},vp=(l,f,v)=>{const C=Bm(l,v.section),O=po.generate(C);return hp(O,f,!0)},Oi=(l,f,v,C)=>{const O=ra(l).rows,I=f.cells[0].column,U=O[f.cells[0].row],Q=vp(f.clipboard,f.generators,U),ae=Qm(I,l,Q,f.generators,v);return _c(ae,f.cells[0].row,f.cells[0].column)},Tl=(l,f,v,C)=>{const O=ra(l).rows,I=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,U=O[f.cells[0].row],Q=vp(f.clipboard,f.generators,U),ae=Qm(I,l,Q,f.generators,v);return _c(ae,f.cells[0].row,I)},rx=(l,f,v,C)=>{const O=ra(l).rows,I=f.cells[0].row,U=O[I],Q=vp(f.clipboard,f.generators,U),ae=bp(I,l,Q,f.generators,v);return _c(ae,f.cells[0].row,f.cells[0].column)},_2=(l,f,v,C)=>{const O=ra(l).rows,I=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,U=O[f.cells[0].row],Q=vp(f.clipboard,f.generators,U),ae=bp(I,l,Q,f.generators,v);return _c(ae,I,f.cells[0].column)},T2=(l,f)=>{const v=po.fromTable(l);return Ai(v,f).bind(O=>{const I=O[O.length-1],U=O[0].column,Q=I.column+I.colspan,ae=to(yn(v.all,we=>fn(we.cells,Le=>Le.column>=U&&Le.column<Q)));return P0(ae)}).getOr("")},y4=(l,f)=>{const v=po.fromTable(l);return Ai(v,f).bind(P0).getOr("")},nv=(l,f)=>{const v=po.fromTable(l);return Ai(v,f).bind(O=>{const I=O[O.length-1],U=O[0].row,Q=I.row+I.rowspan,ae=v.all.slice(U,Q);return I0(ae)}).getOr("")},ov=(l,f,v,C)=>l4(l,f,v,C.sizing),Y1=(l,f,v,C)=>qS(l,f,v,C.sizing,C.resize),w4=(l,f)=>wt(f,v=>v.column===0&&v.isLocked),ua=(l,f)=>wt(f,v=>v.column+v.colspan>=l.grid.columns&&v.isLocked),C4=(l,f)=>{const v=Jd(l),C=ff(f);return $e(C,(O,I)=>{const Q=v[I.column].map(Xo).getOr(0);return O+Q},0)},nu=l=>(f,v)=>Ai(f,v).filter(C=>!(l?w4:ua)(f,C)).map(C=>({details:C,pixelDelta:C4(f,C)})),ir=(l,f)=>Tu(l,f).map(v=>({details:v,pixelDelta:-C4(l,v)})),Sd=l=>(f,v)=>$S(f,v).filter(C=>!(l?w4:ua)(f,C.cells)),rg=Ec.transform("th"),sv=Ec.transform("td"),ax=zi(f4,Ai,Ne,Ne,Ec.modification),ix=zi(QS,Ai,Ne,Ne,Ec.modification),sh=zi(m4,nu(!0),Y1,Ne,Ec.modification),Di=zi(ex,nu(!1),Y1,Ne,Ec.modification),mf=zi(v4,ir,Y1,K1,Ec.modification),cx=zi(nr,Ai,Ne,K1,Ec.modification),S4=zi(h4,Tu,Ne,Ne,rg),x4=zi(g4,Tu,Ne,Ne,sv),rv=zi(tv,Ai,Ne,Ne,rg),k2=zi(b4,Ai,Ne,Ne,sv),A2=zi(nx,Ai,Ne,Ne,sv),O2=zi(tx,Tu,Ne,Ne,rg),lx=zi(p4,Tu,Ne,Ne,sv),ux=zi(E2,t4,ov,Ne,Ec.merging),dx=zi(ox,j1,ov,Ne,Ec.merging),fx=zi(sx,Qk,ov,Ne,Ec.modification),E4=zi(Oi,Sd(!0),Ne,Ne,Ec.modification),Ri=zi(Tl,Sd(!1),Ne,Ne,Ec.modification),mx=zi(rx,$S,Ne,Ne,Ec.modification),im=zi(_2,$S,Ne,Ne,Ec.modification),D2=T2,hx=y4,R2=nv,av=(l,f)=>l.dispatch("NewRow",{node:f}),X1=(l,f)=>l.dispatch("NewCell",{node:f}),rh=(l,f,v)=>{l.dispatch("TableModified",{...v,table:f})},_4=(l,f,v,C,O)=>{l.dispatch("TableSelectionChange",{cells:f,start:v,finish:C,otherCells:O})},M2=l=>{l.dispatch("TableSelectionClear")},wa=(l,f,v,C,O)=>{l.dispatch("ObjectResizeStart",{target:f,width:v,height:C,origin:O})},Ca=(l,f,v,C,O)=>{l.dispatch("ObjectResized",{target:f,width:v,height:C,origin:O})},Da={structure:!1,style:!0},ps={structure:!0,style:!1},za={structure:!0,style:!0},da=(l,f)=>np(l)?Z.percentageSize(f):Ql(l)?Z.pixelSize(f):Z.getTableSize(f),J1=(l,f,v)=>{const C=Tr=>Qo(Qf(Tr))==="table",O=Tr=>!C(l)||cf(Tr).rows>1,I=Tr=>!C(l)||cf(Tr).columns>1,U=tp(l),Q=md(l)?Ne:lp,ae=Tr=>{switch(wS(l)){case"section":return Z1.section();case"sectionCells":return Z1.sectionCells();case"cells":return Z1.cells();default:return Z1.getTableSectionType(Tr,"section")}},we=(Tr,bm)=>bm.cursor.fold(()=>{const Up=td(Tr);return xe(Up).filter(Vn).map(Dl=>{v.clearSelectedCells(Tr.dom);const Jn=l.dom.createRng();return Jn.selectNode(Dl.dom),l.selection.setRng(Jn),Vs(Dl,"data-mce-selected","1"),Jn})},Up=>{const Dl=Qi(Up),Jn=l.dom.createRng();return Jn.setStart(Dl.element.dom,Dl.offset),Jn.setEnd(Dl.element.dom,Dl.offset),l.selection.setRng(Jn),v.clearSelectedCells(Tr.dom),ve.some(Jn)}),Le=(Tr,bm,Up,Dl)=>(Jn,SE,Zv=!1)=>{Lc(Jn);const wg=lt.fromDom(l.getDoc()),xE=ud(Up,wg,U),Cg={sizing:da(l,Jn),resize:md(l)?Xh():em(),section:ae(Jn)};return bm(Jn)?Tr(Jn,SE,xE,Cg).bind(vm=>{f.refresh(Jn.dom),Ae(vm.newRows,Ob=>{av(l,Ob.dom)}),Ae(vm.newCells,Ob=>{X1(l,Ob.dom)});const EE=we(Jn,vm);return Vn(Jn)&&(Lc(Jn),Zv||rh(l,Jn.dom,Dl)),EE.map(Ob=>({rng:Ob,effect:Dl}))}):ve.none()},St=Le(cx,O,Ne,ps),jt=Le(mf,I,Ne,ps),zt=Le(ax,Fe,Ne,ps),Nt=Le(ix,Fe,Ne,ps),hn=Le(sh,Fe,Q,ps),vt=Le(Di,Fe,Q,ps),Rn=Le(ux,Fe,Ne,ps),so=Le(dx,Fe,Ne,ps),ft=Le(E4,Fe,Ne,ps),is=Le(Ri,Fe,Ne,ps),Io=Le(mx,Fe,Ne,ps),Bo=Le(im,Fe,Ne,ps),$r=Le(fx,Fe,Ne,za),gr=Le(O2,Fe,Ne,ps),Nu=Le(lx,Fe,Ne,ps),Pu=Le(S4,Fe,Ne,ps),Iu=Le(x4,Fe,Ne,ps),rs=Le(rv,Fe,Ne,ps),Ht=Le(k2,Fe,Ne,ps),Ra=Le(A2,Fe,Ne,ps);return{deleteRow:St,deleteColumn:jt,insertRowsBefore:zt,insertRowsAfter:Nt,insertColumnsBefore:hn,insertColumnsAfter:vt,mergeCells:Rn,unmergeCells:so,pasteColsBefore:ft,pasteColsAfter:is,pasteRowsBefore:Io,pasteRowsAfter:Bo,pasteCells:$r,makeCellsHeader:gr,unmakeCellsHeader:Nu,makeColumnsHeader:Pu,unmakeColumnsHeader:Iu,makeRowsHeader:rs,makeRowsBody:Ht,makeRowsFooter:Ra,getTableRowType:R2,getTableCellType:hx,getTableColType:D2}},iv=(l,f,v)=>{const C=Fa(l,f,1);v===1||C<=1?fe(l,f):Vs(l,f,Math.min(v,C))},N2=(l,f)=>v=>{const C=v.column+v.colspan-1,O=v.column;return C>=l&&O<f},gx=(l,f,v)=>{if(po.hasColumns(l)){const C=fn(po.justColumns(l),N2(f,v)),O=yn(C,U=>{const Q=Mr(U.element);return iv(Q,"span",v-f),Q}),I=lt.fromTag("colgroup");return So(I,O),[I]}else return[]},P2=(l,f,v)=>yn(l.all,C=>{const O=fn(C.cells,N2(f,v)),I=yn(O,Q=>{const ae=Mr(Q.element);return iv(ae,"colspan",v-f),ae}),U=lt.fromTag("tr");return So(U,I),U}),rn=(l,f)=>{const v=po.fromTable(l);return Tu(v,f).map(O=>{const I=O[O.length-1],U=O[0].column,Q=I.column+I.colspan,ae=gx(v,U,Q),we=P2(v,U,Q);return[...ae,...we]})},yp=(l,f,v)=>{const C=po.fromTable(l);return Ai(C,f).bind(I=>{const U=hp(C,v,!1),ae=ra(U).rows.slice(I[0].row,I[I.length-1].row+I[I.length-1].rowspan),we=To(ae,St=>{const jt=fn(St.cells,zt=>!zt.isLocked);return jt.length>0?[{...St,cells:jt}]:[]}),Le=$0(we);return $g(Le.length>0,Le)}).map(I=>PS(I))},ah=ku.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),px=(l,f,v)=>{const C=v.substring(0,v.length-l.length),O=parseFloat(C);return C===O.toString()?f(O):ah.invalid(v)},ag={...ah,from:l=>Ci(l,"%")?px("%",ah.percent,l):Ci(l,"px")?px("px",ah.pixels,l):ah.invalid(l)},bx=(l,f)=>yn(l,v=>ag.from(v).fold(()=>v,O=>O/f*100+"%",O=>O+"%")),el=(l,f,v)=>{const C=v/f;return yn(l,O=>ag.from(O).fold(()=>O,U=>U*C+"px",U=>U/100*v+"px"))},oM=(l,f)=>{const v=l.fold(()=>de(""),C=>{const O=C/f;return de(O+"px")},()=>{const C=100/f;return de(C+"%")});return Eo(f,v)},vx=(l,f,v)=>l.fold(()=>f,C=>el(f,v,C),C=>bx(f,v)),$c=(l,f,v)=>{const C=ag.from(v),O=zo(l,I=>I==="0px")?oM(C,l.length):vx(C,l,f);return tc(O)},Va=(l,f)=>l.length===0?f:io(l,(v,C)=>ag.from(C).fold(de(0),Je,Je)+v,0),hf=(l,f)=>{const v=Math.floor(l);return{value:v+f,remainder:l-v}},cm=(l,f)=>ag.from(l).fold(de(l),v=>v+f+"px",v=>v+f+"%"),tc=l=>{if(l.length===0)return l;const f=io(l,(C,O)=>{const I=ag.from(O).fold(()=>({value:O,remainder:0}),U=>hf(U,"px"),U=>({value:U+"%",remainder:0}));return{output:[I.value].concat(C.output),remainder:C.remainder+I.remainder}},{output:[],remainder:0}),v=f.output;return v.slice(0,v.length-1).concat([cm(v[v.length-1],Math.round(f.remainder))])},I2=ag.from,B2=(l,f,v)=>{Ae(f,C=>{const O=l.slice(C.column,C.colspan+C.column),I=Va(O,Vd());Ps(C.element,"width",I+v)})},yx=(l,f,v)=>{Ae(f,(C,O)=>{const I=Va([l[O]],Vd());Ps(C.element,"width",I+v)})},L2=(l,f,v)=>{Ae(v,C=>{Si(C.element,"height")}),Ae(f,(C,O)=>{Ps(C.element,"height",l[O])})},cv=l=>I2(l).fold(de("px"),de("px"),de("%")),F2=(l,f,v)=>{const C=po.fromTable(l),O=C.all,I=po.justCells(C),U=po.justColumns(C);f.each(Q=>{const ae=cv(Q),we=Yi(l),Le=$h(C,l),St=$c(Le,we,Q);po.hasColumns(C)?yx(St,U,ae):B2(St,I,ae),Ps(l,"width",Q)}),v.each(Q=>{const ae=ht(l),we=R1(C,l),Le=$c(we,ae,Q);L2(Le,O,I),Ps(l,"height",Q)})},lv=ka,wx=_l,Cx=O1,Q1=l=>{fe(l,"width"),fe(l,"height")},eb=l=>{const f=ta(l);F2(l,ve.some(f),ve.none()),Q1(l)},$2=l=>{const f=qo(l);F2(l,ve.some(f),ve.none()),Q1(l)},H2=l=>{const f=Qg(l);F2(l,ve.none(),ve.some(f)),Q1(l)},uv=l=>{Si(l,"width");const f=bc(l),v=f.length>0?f:td(l);Ae(v,C=>{Si(C,"width"),Q1(C)}),Q1(l)},z2={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},T4=()=>lt.fromTag("th"),tb=()=>lt.fromTag("td"),k4=()=>lt.fromTag("col"),A4=(l,f,v,C)=>{const O=lt.fromTag("tr");for(let I=0;I<l;I++){const U=C<f||I<v?T4():tb();I<v&&Vs(U,"scope","row"),C<f&&Vs(U,"scope","col"),ys(U,lt.fromTag("br")),ys(O,U)}return O},O4=l=>{const f=lt.fromTag("colgroup");return Eo(l,()=>ys(f,k4())),f},V2=(l,f,v,C)=>Eo(l,O=>A4(f,v,C,O)),D4=(l,f,v,C,O,I=z2)=>{const U=lt.fromTag("table"),Q=O!=="cells";oa(U,I.styles),xa(U,I.attributes),I.colGroups&&ys(U,O4(f));const ae=Math.min(l,v);if(Q&&v>0){const zt=lt.fromTag("thead");ys(U,zt);const hn=V2(v,f,O==="sectionCells"?ae:0,C);So(zt,hn)}const we=lt.fromTag("tbody");ys(U,we);const Le=Q?l-ae:l,jt=V2(Le,f,Q?0:v,C);return So(we,jt),U},Sx=l=>l.dom.innerHTML,nc=l=>{const f=lt.fromTag("div"),v=lt.fromDom(l.dom.cloneNode(!0));return ys(f,v),Sx(f)},U2=(l,f)=>{l.selection.select(f.dom,!0),l.selection.collapse(!0)},xx=(l,f)=>{yi(f,"td,th").each(Gt(U2,l))},W2=(l,f)=>{Ae($o(f,"tr"),v=>{av(l,v.dom),Ae($o(v,"th,td"),C=>{X1(l,C.dom)})})},dv=l=>K(l)&&l.indexOf("%")!==-1,wp=(l,f,v,C,O)=>{const I=C0(l),U={styles:I,attributes:Ha(l),colGroups:S0(l)};return l.undoManager.ignore(()=>{const Q=D4(v,f,O,C,wS(l),U);Vs(Q,"data-mce-id","__mce");const ae=nc(Q);l.insertContent(ae),l.addVisual()}),yi(Qf(l),'table[data-mce-id="__mce"]').map(Q=>(Ql(l)?$2(Q):ki(l)?uv(Q):(np(l)||dv(I.width))&&eb(Q),Lc(Q),fe(Q,"data-mce-id"),W2(l,Q),xx(l,Q),Q.dom)).getOrNull()},R4=(l,f,v,C={})=>{const O=I=>Ct(I)&&I>0;if(O(f)&&O(v)){const I=C.headerRows||0,U=C.headerColumns||0;return wp(l,v,f,U,I)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Cp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ex="x-tinymce/dom-table-",ig=Ex+"rows",Z2=Ex+"columns",_x=l=>{const f=Cp.FakeClipboardItem(l);Cp.write([f])},j2=l=>{var f;const v=(f=Cp.read())!==null&&f!==void 0?f:[];return Do(v,C=>ve.from(C.getType(l)))},Tx=l=>{j2(l).isSome()&&Cp.clear()},kx=l=>{l.fold(M4,f=>_x({[ig]:f}))},fv=()=>j2(ig),M4=()=>Tx(ig),Ax=l=>{l.fold(Dx,f=>_x({[Z2]:f}))},Ox=()=>j2(Z2),Dx=()=>Tx(Z2),mv=l=>Gk(hd(l),Ji(l)).filter(Gm),Sp=l=>Lr(hd(l),Ji(l)).filter(Gm),q2=(l,f)=>{const v=Ji(l),C=()=>mv(l).each(vt=>{oi(vt,v).filter(re(v)).each(Rn=>{const so=lt.fromText("");if(pi(Rn,so),Us(Rn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const ft=l.dom.createRng();ft.setStart(so.dom,0),ft.setEnd(so.dom,0),l.selection.setRng(ft),l.nodeChanged()}})}),O=vt=>mv(l).each(Rn=>{ki(l)||Ql(l)||np(l)||oi(Rn,v).each(ft=>{vt==="relative"&&!lv(ft)?eb(ft):vt==="fixed"&&!wx(ft)?$2(ft):vt==="responsive"&&!Cx(ft)&&uv(ft),Lc(ft),rh(l,ft.dom,ps)})}),I=vt=>oi(vt,v),U=vt=>Sp(l).bind(Rn=>I(Rn).map(so=>vt(so,Rn))),Q=(vt,Rn)=>{U(so=>{l.formatter.toggle("tableclass",{value:Rn},so.dom),rh(l,so.dom,Da)})},ae=(vt,Rn)=>{U(so=>{const ft=bd(l),Io=zo(ft,Bo=>l.formatter.match("tablecellclass",{value:Rn},Bo.dom))?l.formatter.remove:l.formatter.apply;Ae(ft,Bo=>Io("tablecellclass",{value:Rn},Bo.dom)),rh(l,so.dom,Da)})},we=()=>{mv(l).each(vt=>{oi(vt,v).each(Rn=>{uo(Rn,"caption").fold(()=>{const so=lt.fromTag("caption");ys(so,lt.fromText("Caption")),$d(Rn,so,0),l.selection.setCursorLocation(so.dom,0)},so=>{vs("caption")(vt)&&ga("td",Rn).each(ft=>l.selection.setCursorLocation(ft.dom,0)),Us(so)}),rh(l,Rn.dom,ps)})})},Le=vt=>{l.focus()},St=(vt,Rn=!1)=>U((so,ft)=>{const is=M0(bd(l),so,ft);vt(so,is,Rn).each(Le)}),jt=()=>U((vt,Rn)=>{const so=M0(bd(l),vt,Rn),ft=ud(Ne,lt.fromDom(l.getDoc()),ve.none());return yp(vt,so,ft)}),zt=()=>U((vt,Rn)=>{const so=M0(bd(l),vt,Rn);return rn(vt,so)}),Nt=(vt,Rn)=>Rn().each(so=>{const ft=yn(so,is=>Mr(is));U((is,Io)=>{const Bo=dd(lt.fromDom(l.getDoc())),$r=ip(bd(l),Io,ft,Bo);vt(is,$r).each(Le)})}),hn=vt=>(Rn,so)=>Yr(so,"type").each(ft=>{St(vt(ft),so.no_events)});Fo({mceTableSplitCells:()=>St(f.unmergeCells),mceTableMergeCells:()=>St(f.mergeCells),mceTableInsertRowBefore:()=>St(f.insertRowsBefore),mceTableInsertRowAfter:()=>St(f.insertRowsAfter),mceTableInsertColBefore:()=>St(f.insertColumnsBefore),mceTableInsertColAfter:()=>St(f.insertColumnsAfter),mceTableDeleteCol:()=>St(f.deleteColumn),mceTableDeleteRow:()=>St(f.deleteRow),mceTableCutCol:()=>zt().each(vt=>{Ax(vt),St(f.deleteColumn)}),mceTableCutRow:()=>jt().each(vt=>{kx(vt),St(f.deleteRow)}),mceTableCopyCol:()=>zt().each(vt=>Ax(vt)),mceTableCopyRow:()=>jt().each(vt=>kx(vt)),mceTablePasteColBefore:()=>Nt(f.pasteColsBefore,Ox),mceTablePasteColAfter:()=>Nt(f.pasteColsAfter,Ox),mceTablePasteRowBefore:()=>Nt(f.pasteRowsBefore,fv),mceTablePasteRowAfter:()=>Nt(f.pasteRowsAfter,fv),mceTableDelete:C,mceTableCellToggleClass:ae,mceTableToggleClass:Q,mceTableToggleCaption:we,mceTableSizingMode:(vt,Rn)=>O(Rn),mceTableCellType:hn(vt=>vt==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:hn(vt=>vt==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:hn(vt=>{switch(vt){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(vt,Rn)=>l.addCommand(Rn,vt)),l.addCommand("mceInsertTable",(vt,Rn)=>{R4(l,Rn.rows,Rn.columns,Rn.options)}),l.addCommand("mceTableApplyCellStyle",(vt,Rn)=>{const so=Io=>"tablecell"+Io.toLowerCase().replace("-","");if(!j(Rn))return;const ft=fn(bd(l),Gm);if(ft.length===0)return;const is=_s(Rn,(Io,Bo)=>l.formatter.has(so(Bo))&&K(Io));Mc(is)||(Fo(is,(Io,Bo)=>{const $r=so(Bo);Ae(ft,gr=>{Io===""?l.formatter.remove($r,{value:null},gr.dom,!0):l.formatter.apply($r,{value:Io},gr.dom)})}),I(ft[0]).each(Io=>rh(l,Io.dom,Da)))})},N4=(l,f)=>{const v=Ji(l),C=O=>Lr(hd(l)).bind(I=>oi(I,v).map(U=>{const Q=M0(bd(l),U,I);return O(U,Q)})).getOr("");Fo({mceTableRowType:()=>C(f.getTableRowType),mceTableCellType:()=>C(f.getTableCellType),mceTableColType:()=>C(f.getTableColType)},(O,I)=>l.addQueryValueHandler(I,O))},hv=ku.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),gv=(l,f,v,C)=>l.fold(f,v,C),Du=l=>l.fold(Je,Je,Je),pv=hv.before,bv=hv.on,G2=hv.after,oc={before:pv,on:bv,after:G2,cata:gv,getStart:Du},ih={create:(l,f)=>({selection:l,kill:f})},P4=(l,f)=>{const v=l.document.createRange();return v.selectNode(f.dom),v},ch=(l,f)=>{const v=l.document.createRange();return vv(v,f),v},vv=(l,f)=>l.selectNodeContents(f.dom),I4=(l,f)=>{f.fold(v=>{l.setStartBefore(v.dom)},(v,C)=>{l.setStart(v.dom,C)},v=>{l.setStartAfter(v.dom)})},B4=(l,f)=>{f.fold(v=>{l.setEndBefore(v.dom)},(v,C)=>{l.setEnd(v.dom,C)},v=>{l.setEndAfter(v.dom)})},Rx=(l,f,v)=>{const C=l.document.createRange();return I4(C,f),B4(C,v),C},xp=(l,f,v,C,O)=>{const I=l.document.createRange();return I.setStart(f.dom,v),I.setEnd(C.dom,O),I},Mx=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),L4=l=>{const f=l.getClientRects(),v=f.length>0?f[0]:l.getBoundingClientRect();return v.width>0||v.height>0?ve.some(v).map(Mx):ve.none()},nb=ku.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),K2=(l,f,v)=>f(lt.fromDom(v.startContainer),v.startOffset,lt.fromDom(v.endContainer),v.endOffset),F4=(l,f)=>f.match({domRange:v=>({ltr:de(v),rtl:ve.none}),relative:(v,C)=>({ltr:jd(()=>Rx(l,v,C)),rtl:jd(()=>ve.some(Rx(l,C,v)))}),exact:(v,C,O,I)=>({ltr:jd(()=>xp(l,v,C,O,I)),rtl:jd(()=>ve.some(xp(l,O,I,v,C)))})}),Nx=(l,f)=>{const v=f.ltr();return v.collapsed?f.rtl().filter(O=>O.collapsed===!1).map(O=>nb.rtl(lt.fromDom(O.endContainer),O.endOffset,lt.fromDom(O.startContainer),O.startOffset)).getOrThunk(()=>K2(l,nb.ltr,v)):K2(l,nb.ltr,v)},Px=(l,f)=>{const v=F4(l,f);return Nx(l,v)},Y2=(l,f)=>Px(l,f).match({ltr:(C,O,I,U)=>{const Q=l.document.createRange();return Q.setStart(C.dom,O),Q.setEnd(I.dom,U),Q},rtl:(C,O,I,U)=>{const Q=l.document.createRange();return Q.setStart(I.dom,U),Q.setEnd(C.dom,O),Q}});nb.ltr,nb.rtl;const Ep={create:(l,f,v,C)=>({start:l,soffset:f,finish:v,foffset:C})},X2={create:(l,f,v,C)=>({start:oc.on(l,f),finish:oc.on(v,C)})},J2=(l,f)=>{const v=Y2(l,f);return Ep.create(lt.fromDom(v.startContainer),v.startOffset,lt.fromDom(v.endContainer),v.endOffset)},yv=X2.create,$4=(l,f,v,C,O,I,U)=>es(v,O)&&C===I?ve.none():Jr(v,"td,th",f).bind(Q=>Jr(O,"td,th",f).bind(ae=>Bx(l,f,Q,ae,U))),Bx=(l,f,v,C,O)=>es(v,C)?ve.none():O0(v,C,f).bind(I=>{const U=I.boxes.getOr([]);return U.length>1?(O(l,U,I.start,I.finish),ve.some(ih.create(ve.some(yv(v,0,v,$i(v))),!0))):ve.none()}),rM=(l,f,v,C,O)=>{const I=U=>(O.clearBeforeUpdate(v),O.selectRange(v,U.boxes,U.start,U.finish),U.boxes);return Zk(C,l,f,O.firstSelectedSelector,O.lastSelectedSelector).map(I)},cg=(l,f)=>({item:l,mode:f}),wv=(l,f,v,C=_p)=>l.property().parent(f).map(O=>cg(O,C)),_p=(l,f,v,C=ob)=>v.sibling(l,f).map(O=>cg(O,C)),ob=(l,f,v,C=ob)=>{const O=l.property().children(f);return v.first(O).map(U=>cg(U,C))},H4=[{current:wv,next:_p,fallback:ve.none()},{current:_p,next:ob,fallback:ve.some(wv)},{current:ob,next:ob,fallback:ve.some(_p)}],Lx=(l,f,v,C,O=H4)=>W(O,U=>U.current===v).bind(U=>U.current(l,f,C,U.next).orThunk(()=>U.fallback.bind(Q=>Lx(l,f,Q,C)))),sb={left:()=>({sibling:(v,C)=>v.query().prevSibling(C),first:v=>v.length>0?ve.some(v[v.length-1]):ve.none()}),right:()=>({sibling:(v,C)=>v.query().nextSibling(C),first:v=>v.length>0?ve.some(v[0]):ve.none()})},Q2=(l,f,v,C,O,I)=>Lx(l,f,C,O).bind(Q=>I(Q.item)?ve.none():v(Q.item)?ve.some(Q.item):Q2(l,Q.item,v,Q.mode,O,I)),Fx=(l,f,v,C)=>Q2(l,f,v,_p,sb.left(),C),ew=(l,f,v,C)=>Q2(l,f,v,_p,sb.right(),C),$x=l=>f=>l.property().children(f).length===0,V4=(l,f,v)=>rb(l,f,$x(l),v),U4=(l,f,v)=>Tp(l,f,$x(l),v),rb=Fx,Tp=ew,ab=F1(),tw=(l,f)=>V4(ab,l,f),Cv=(l,f)=>U4(ab,l,f),nw=(l,f,v)=>rb(ab,l,f,v),ow=(l,f,v)=>Tp(ab,l,f,v),W4=(l,f,v)=>ut(l,f,v).isSome(),Sv=ku.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ib=(l,f,v)=>{const C=l.getRect(f),O=l.getRect(v);return O.right>C.left&&O.left<C.right},Hx=l=>Jr(l,"tr"),Ap={...Sv,verify:(l,f,v,C,O,I,U)=>Jr(C,"td,th",U).bind(Q=>Jr(f,"td,th",U).map(ae=>es(Q,ae)?es(C,Q)&&$i(Q)===O?I(ae):Sv.none("in same cell"):A0(Hx,[Q,ae]).fold(()=>ib(l,ae,Q)?Sv.success():I(ae),we=>I(ae)))).getOr(Sv.none("default")),cata:(l,f,v,C,O)=>l.fold(f,v,C,O)},zx=(l,f,v,C)=>({parent:l,children:f,element:v,index:C}),Vx=l=>Wr(l).bind(f=>{const v=ds(f);return Tc(v,l).map(C=>zx(f,v,l,C))}),Tc=(l,f)=>Hs(l,Gt(es,f)),xv=vs("br"),sw=(l,f,v)=>f(l,v).bind(C=>Qa(C)&&Ti(C).trim().length===0?sw(C,f,v):ve.some(C)),Z4=(l,f,v)=>v.traverse(f).orThunk(()=>sw(f,v.gather,l)).map(v.relative),rw=(l,f)=>lr(l,f).filter(xv).orThunk(()=>lr(l,f-1).filter(xv)),cb=(l,f,v,C)=>rw(f,v).bind(O=>C.traverse(O).fold(()=>sw(O,C.gather,l).map(C.relative),I=>Vx(I).map(U=>oc.on(U.parent,U.index)))),lb=(l,f,v,C)=>(xv(f)?Z4(l,f,C):cb(l,f,v,C)).map(I=>({start:I,finish:I})),Ux=l=>Ap.cata(l,f=>ve.none(),()=>ve.none(),f=>ve.some(N0(f,0)),f=>ve.some(N0(f,$i(f)))),Op=(l,f)=>({left:l.left,top:l.top+f,right:l.right,bottom:l.bottom+f}),aw=(l,f)=>({left:l.left,top:l.top-f,right:l.right,bottom:l.bottom-f}),iw=(l,f,v)=>({left:l.left+f,top:l.top+v,right:l.right+f,bottom:l.bottom+v}),Wx=l=>l.top,ub=l=>l.bottom,j4=(l,f,v)=>v>=0&&v<$i(f)?l.getRangedRect(f,v,f,v+1):v>0?l.getRangedRect(f,v-1,f,v):ve.none(),db=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Ev=(l,f)=>ve.some(l.getRect(f)),lh=(l,f,v)=>or(f)?Ev(l,f).map(db):Qa(f)?j4(l,f,v).map(db):ve.none(),uh=(l,f)=>or(f)?Ev(l,f).map(db):Qa(f)?l.getRangedRect(f,0,f,$i(f)).map(db):ve.none(),gf=5,dh=100,xd=ku.generate([{none:[]},{retry:["caret"]}]),um=(l,f)=>l.left<f.left||Math.abs(f.right-l.left)<1||l.left>f.right,Ru=(l,f,v)=>ti(f,S2).fold(en,C=>uh(l,C).exists(O=>um(v,O))),_v=(l,f,v,C,O)=>{const I=Op(O,gf);return Math.abs(v.bottom-C.bottom)<1||v.top>O.bottom?xd.retry(I):v.top===O.bottom?xd.retry(Op(O,1)):Ru(l,f,O)?xd.retry(iw(I,gf,0)):xd.none()},jx={point:Wx,adjuster:(l,f,v,C,O)=>{const I=aw(O,gf);return Math.abs(v.top-C.top)<1||v.bottom<O.top?xd.retry(I):v.bottom===O.top?xd.retry(aw(O,1)):Ru(l,f,O)?xd.retry(iw(I,gf,0)):xd.none()},move:aw,gather:tw},cw={point:ub,adjuster:_v,move:Op,gather:Cv},Dp=(l,f,v)=>l.elementFromPoint(f,v).filter(C=>Qo(C)==="table").isSome(),Rp=(l,f,v,C,O)=>Mp(l,f,v,f.move(C,gf),O),Mp=(l,f,v,C,O)=>O===0?ve.some(C):Dp(l,C.left,f.point(C))?Rp(l,f,v,C,O-1):l.situsFromPoint(C.left,f.point(C)).bind(I=>I.start.fold(ve.none,U=>uh(l,U).bind(Q=>f.adjuster(l,U,Q,v,C).fold(ve.none,ae=>Mp(l,f,v,ae,O-1))).orThunk(()=>ve.some(C)),ve.none)),qx=(l,f,v)=>l.point(f)>v.getInnerHeight()?ve.some(l.point(f)-v.getInnerHeight()):l.point(f)<0?ve.some(-l.point(f)):ve.none(),Np=(l,f,v)=>{const C=l.move(v,gf),O=Mp(f,l,v,C,dh).getOr(C);return qx(l,O,f).fold(()=>f.situsFromPoint(O.left,l.point(O)),I=>(f.scrollBy(0,I),f.situsFromPoint(O.left,l.point(O)-I)))},Pp={tryUp:Gt(Np,jx),tryDown:Gt(Np,cw),getJumpSize:de(gf)},q4=20,lw=(l,f,v)=>l.getSelection().bind(C=>lb(f,C.finish,C.foffset,v).fold(()=>ve.some(N0(C.finish,C.foffset)),O=>{const I=l.fromSitus(O),U=Ap.verify(l,C.finish,C.foffset,I.finish,I.foffset,v.failure,f);return Ux(U)})),Ip=(l,f,v,C,O,I)=>I===0?ve.none():pf(l,f,v,C,O).bind(U=>{const Q=l.fromSitus(U),ae=Ap.verify(l,v,C,Q.finish,Q.foffset,O.failure,f);return Ap.cata(ae,()=>ve.none(),()=>ve.some(U),we=>es(v,we)&&C===0?Ua(l,v,C,aw,O):Ip(l,f,we,0,O,I-1),we=>es(v,we)&&C===$i(we)?Ua(l,v,C,Op,O):Ip(l,f,we,$i(we),O,I-1))}),Ua=(l,f,v,C,O)=>lh(l,f,v).bind(I=>Gx(l,O,C(I,Pp.getJumpSize()))),Gx=(l,f,v)=>{const C=Yc().browser;return C.isChromium()||C.isSafari()||C.isFirefox()?f.retry(l,v):ve.none()},pf=(l,f,v,C,O)=>lh(l,v,C).bind(I=>Gx(l,O,I)),Kx=(l,f,v)=>lw(l,f,v).bind(C=>Ip(l,f,C.element,C.offset,v,q4).map(l.fromSitus)),Tv=(l,f)=>W4(l,v=>Wr(v).exists(C=>es(C,f))),Bp=(l,f,v,C,O)=>Jr(C,"td,th",f).bind(I=>Jr(I,"table",f).bind(U=>Tv(O,U)?Kx(l,f,v).bind(Q=>Jr(Q.finish,"td,th",f).map(ae=>({start:I,finish:ae,range:Q}))):ve.none())),Yx=(l,f,v,C,O,I)=>I(C,f).orThunk(()=>Bp(l,f,v,C,O).map(U=>{const Q=U.range;return ih.create(ve.some(yv(Q.start,Q.soffset,Q.finish,Q.foffset)),!0)})),kv=(l,f)=>Jr(l,"tr",f).bind(v=>Jr(v,"table",f).bind(C=>{const O=$o(C,"tr");return es(v,O[0])?nw(C,I=>Hh(I).isSome(),f).map(I=>{const U=$i(I);return ih.create(ve.some(yv(I,U,I,U)),!0)}):ve.none()})),cM=(l,f)=>Jr(l,"tr",f).bind(v=>Jr(v,"table",f).bind(C=>{const O=$o(C,"tr");return es(v,O[O.length-1])?ow(C,I=>jm(I).isSome(),f).map(I=>ih.create(ve.some(yv(I,0,I,0)),!0)):ve.none()})),uw=(l,f,v,C,O,I,U)=>Bp(l,v,C,O,I).bind(Q=>Bx(f,v,Q.start,Q.finish,U)),Wa=l=>{let f=l;return{get:()=>f,set:O=>{f=O}}},dw=l=>{const f=Wa(ve.none()),v=()=>f.get().each(l);return{clear:()=>{v(),f.set(ve.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:Q=>{v(),f.set(ve.some(Q))}}},bf=()=>{const l=dw(Ne);return{...l,on:v=>l.get().each(v)}},tl=(l,f)=>Jr(l,"td,th",f),Xx=l=>mc(l).exists(N1),fw=(l,f,v,C)=>{const O=bf(),I=O.clear,U=Le=>{O.on(St=>{C.clearBeforeUpdate(f),tl(Le.target,v).each(jt=>{O0(St,jt,v).each(zt=>{const Nt=zt.boxes.getOr([]);if(Nt.length===1){const hn=Nt[0],vt=P1(hn)==="false",Rn=wi(CS(Le.target),hn,es);vt&&Rn&&C.selectRange(f,Nt,hn,hn)}else Nt.length>1&&(C.selectRange(f,Nt,zt.start,zt.finish),l.selectContents(jt))})})})};return{clearstate:I,mousedown:Le=>{C.clear(f),tl(Le.target,v).filter(Xx).each(O.set)},mouseover:Le=>{U(Le)},mouseup:Le=>{U(Le),I()}}},Av={traverse:ei,gather:Cv,relative:oc.before,retry:Pp.tryDown,failure:Ap.failedDown},mw={traverse:dl,gather:tw,relative:oc.before,retry:Pp.tryUp,failure:Ap.failedUp},lg=l=>f=>f===l,hw=lg(38),vf=lg(40),Vi=l=>l>=37&&l<=40,ug={isBackward:lg(37),isForward:lg(39)},yf={isBackward:lg(39),isForward:lg(37)},dg=l=>{const f=l!==void 0?l.dom:document,v=f.body.scrollLeft||f.documentElement.scrollLeft,C=f.body.scrollTop||f.documentElement.scrollTop;return pn(v,C)},sc=(l,f,v)=>{const O=(v!==void 0?v.dom:document).defaultView;O&&O.scrollBy(l,f)},di=ku.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ui=l=>di.exact(l.start,l.soffset,l.finish,l.foffset),Mu=l=>l.match({domRange:f=>lt.fromDom(f.startContainer),relative:(f,v)=>oc.getStart(f),exact:(f,v,C,O)=>f}),Ov=di.domRange,kl=di.relative,fg=di.exact,G4=l=>{const f=Mu(l);return us(f)},Jx=Ep.create,mg={domRange:Ov,relative:kl,exact:fg,exactFromRange:Ui,getWin:G4,range:Jx},Qx=(l,f,v)=>{var C;return ve.from((C=l.caretPositionFromPoint)===null||C===void 0?void 0:C.call(l,f,v)).bind(O=>{if(O.offsetNode===null)return ve.none();const I=l.createRange();return I.setStart(O.offsetNode,O.offset),I.collapse(),ve.some(I)})},eE=(l,f,v)=>{var C;return ve.from((C=l.caretRangeFromPoint)===null||C===void 0?void 0:C.call(l,f,v))},Dv=(l,f,v)=>l.caretPositionFromPoint?Qx(l,f,v):l.caretRangeFromPoint?eE(l,f,v):ve.none(),tE=(l,f,v)=>{const C=l.document;return Dv(C,f,v).map(O=>Ep.create(lt.fromDom(O.startContainer),O.startOffset,lt.fromDom(O.endContainer),O.endOffset))},fb=(l,f)=>{const v=Qo(l);return v==="input"?oc.after(l):Hn(["br","img"],v)?f===0?oc.before(l):oc.after(l):oc.on(l,f)},K4=(l,f)=>{const v=l.fold(oc.before,fb,oc.after),C=f.fold(oc.before,fb,oc.after);return mg.relative(v,C)},nE=(l,f,v,C)=>{const O=fb(l,f),I=fb(v,C);return mg.relative(O,I)},Y4=(l,f,v,C)=>{const I=Ea(l).dom.createRange();return I.setStart(l.dom,f),I.setEnd(v.dom,C),I},X4=(l,f,v,C)=>{const O=Y4(l,f,v,C),I=es(l,v)&&f===C;return O.collapsed&&!I},mb=l=>ve.from(l.getSelection()),Rv=(l,f)=>{mb(l).each(v=>{v.removeAllRanges(),v.addRange(f)})},gw=(l,f,v,C,O)=>{const I=xp(l,f,v,C,O);Rv(l,I)},J4=(l,f,v,C,O,I)=>{f.collapse(v.dom,C),f.extend(O.dom,I)},Po=(l,f)=>Px(l,f).match({ltr:(v,C,O,I)=>{gw(l,v,C,O,I)},rtl:(v,C,O,I)=>{mb(l).each(U=>{if(U.setBaseAndExtent)U.setBaseAndExtent(v.dom,C,O.dom,I);else if(U.extend)try{J4(l,U,v,C,O,I)}catch{gw(l,O,I,v,C)}else gw(l,O,I,v,C)})}}),dm=(l,f,v,C,O)=>{const I=nE(f,v,C,O);Po(l,I)},hg=(l,f,v)=>{const C=K4(f,v);Po(l,C)},Mv=l=>{if(l.rangeCount>0){const f=l.getRangeAt(0),v=l.getRangeAt(l.rangeCount-1);return ve.some(Ep.create(lt.fromDom(f.startContainer),f.startOffset,lt.fromDom(v.endContainer),v.endOffset))}else return ve.none()},Q4=l=>{if(l.anchorNode===null||l.focusNode===null)return Mv(l);{const f=lt.fromDom(l.anchorNode),v=lt.fromDom(l.focusNode);return X4(f,l.anchorOffset,v,l.focusOffset)?ve.some(Ep.create(f,l.anchorOffset,v,l.focusOffset)):Mv(l)}},Hc=(l,f,v=!0)=>{const O=(v?ch:P4)(l,f);Rv(l,O)},lM=l=>mb(l).filter(f=>f.rangeCount>0).bind(Q4),gg=l=>lM(l).map(f=>mg.exact(f.start,f.soffset,f.finish,f.foffset)),fm=(l,f)=>{const v=Y2(l,f);return L4(v)},Nv=(l,f,v)=>tE(l,f,v),oE=l=>{mb(l).each(f=>f.removeAllRanges())},sE=l=>({elementFromPoint:(vt,Rn)=>lt.fromPoint(lt.fromDom(l.document),vt,Rn),getRect:vt=>vt.dom.getBoundingClientRect(),getRangedRect:(vt,Rn,so,ft)=>{const is=mg.exact(vt,Rn,so,ft);return fm(l,is)},getSelection:()=>gg(l).map(vt=>J2(l,vt)),fromSitus:vt=>{const Rn=mg.relative(vt.start,vt.finish);return J2(l,Rn)},situsFromPoint:(vt,Rn)=>Nv(l,vt,Rn).map(so=>X2.create(so.start,so.soffset,so.finish,so.foffset)),clearSelection:()=>{oE(l)},collapseSelection:(vt=!1)=>{gg(l).each(Rn=>Rn.fold(so=>so.collapse(vt),(so,ft)=>{const is=vt?so:ft;hg(l,is,is)},(so,ft,is,Io)=>{const Bo=vt?so:is,$r=vt?ft:Io;dm(l,Bo,$r,Bo,$r)}))},setSelection:vt=>{dm(l,vt.start,vt.soffset,vt.finish,vt.foffset)},setRelativeSelection:(vt,Rn)=>{hg(l,vt,Rn)},selectNode:vt=>{Hc(l,vt,!1)},selectContents:vt=>{Hc(l,vt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>dg(lt.fromDom(l.document)).top,scrollBy:(vt,Rn)=>{sc(vt,Rn,lt.fromDom(l.document))}}),hb=(l,f)=>({rows:l,cols:f}),e3=(l,f,v,C)=>{const O=sE(l),I=fw(O,f,v,C);return{clearstate:I.clearstate,mousedown:I.mousedown,mouseover:I.mouseover,mouseup:I.mouseup}},t3=l=>ti(l,En).exists(N1),Pv=(l,f)=>t3(l)||t3(f),pg=(l,f,v,C)=>{const O=sE(l),I=()=>(C.clear(f),ve.none());return{keydown:(ae,we,Le,St,jt,zt)=>{const Nt=ae.raw,hn=Nt.which,vt=Nt.shiftKey===!0;return Fc(f,C.selectedSelector).fold(()=>(Vi(hn)&&!vt&&C.clearBeforeUpdate(f),Vi(hn)&&vt&&!Pv(we,St)?ve.none:vf(hn)&&vt?Gt(uw,O,f,v,Av,St,we,C.selectRange):hw(hn)&&vt?Gt(uw,O,f,v,mw,St,we,C.selectRange):vf(hn)?Gt(Yx,O,v,Av,St,we,cM):hw(hn)?Gt(Yx,O,v,mw,St,we,kv):ve.none),so=>{const ft=is=>()=>Do(is,Bo=>rM(Bo.rows,Bo.cols,f,so,C)).fold(()=>kS(f,C.firstSelectedSelector,C.lastSelectedSelector).map(Bo=>{const $r=vf(hn)||zt.isForward(hn)?oc.after:oc.before;return O.setRelativeSelection(oc.on(Bo.first,0),$r(Bo.table)),C.clear(f),ih.create(ve.none(),!0)}),Bo=>ve.some(ih.create(ve.none(),!0)));return Vi(hn)&&vt&&!Pv(we,St)?ve.none:vf(hn)&&vt?ft([hb(1,0)]):hw(hn)&&vt?ft([hb(-1,0)]):zt.isBackward(hn)&&vt?ft([hb(0,-1),hb(-1,0)]):zt.isForward(hn)&&vt?ft([hb(0,1),hb(1,0)]):Vi(hn)&&!vt?I:ve.none})()},keyup:(ae,we,Le,St,jt)=>Fc(f,C.selectedSelector).fold(()=>{const zt=ae.raw,Nt=zt.which;return zt.shiftKey===!0&&Vi(Nt)&&Pv(we,St)?$4(f,v,we,Le,St,jt,C.selectRange):ve.none()},ve.none)}},gb=(l,f,v,C)=>{const O=sE(l);return(I,U)=>{C.clearBeforeUpdate(f),O0(I,U,v).each(Q=>{const ae=Q.boxes.getOr([]);C.selectRange(f,ae,Q.start,Q.finish),O.selectContents(U),O.collapseSelection()})}},Iv=(l,f)=>{const v=Rr(l,f);return v===void 0||v===""?[]:v.split(" ")},uM=(l,f,v)=>{const O=Iv(l,f).concat([v]);return Vs(l,f,O.join(" ")),!0},rE=(l,f,v)=>{const C=fn(Iv(l,f),O=>O!==v);return C.length>0?Vs(l,f,C.join(" ")):fe(l,f),!1},bg=l=>l.dom.classList!==void 0,pw=l=>Iv(l,"class"),bw=(l,f)=>uM(l,"class",f),Bv=(l,f)=>rE(l,"class",f),Ed=(l,f)=>{bg(l)?l.dom.classList.add(f):bw(l,f)},aE=l=>{(bg(l)?l.dom.classList:pw(l)).length===0&&fe(l,"class")},pb=(l,f)=>{bg(l)?l.dom.classList.remove(f):Bv(l,f),aE(l)},bb=(l,f)=>bg(l)&&l.dom.classList.contains(f),n3=(l,f)=>{Ae(f,v=>{pb(l,v)})},iE=l=>f=>{Ed(f,l)},o3=l=>f=>{n3(f,l)},Lp={byClass:l=>{const f=iE(l.selected),v=o3([l.selected,l.lastSelected,l.firstSelected]),C=I=>{const U=$o(I,l.selectedSelector);Ae(U,v)};return{clearBeforeUpdate:C,clear:C,selectRange:(I,U,Q,ae)=>{C(I),Ae(U,f),Ed(Q,l.firstSelected),Ed(ae,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,f,v)=>{const C=ae=>{fe(ae,l.selected),fe(ae,l.firstSelected),fe(ae,l.lastSelected)},O=ae=>{Vs(ae,l.selected,"1")},I=ae=>{U(ae),v()},U=ae=>{const we=$o(ae,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ae(we,C)};return{clearBeforeUpdate:U,clear:I,selectRange:(ae,we,Le,St)=>{I(ae),Ae(we,O),Vs(Le,l.firstSelected,"1"),Vs(St,l.lastSelected,"1"),f(we,Le,St)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},vw=(l,f,v,C)=>{switch(l.tag){case"none":return f();case"single":return C(l.element);case"multiple":return v(l.elements)}},Jt=()=>({tag:"none"}),Za=l=>({tag:"multiple",elements:l}),vb=l=>({tag:"single",element:l}),Fr=(l,f,v)=>({get:()=>Xm(l(),v).fold(()=>f().fold(Jt,vb),Za)}),Al=(l,f)=>{const v=l.slice(0,f[f.length-1].row+1),C=$0(v);return To(C,O=>{const I=O.cells.slice(0,f[f.length-1].column+1);return yn(I,U=>U.element)})},Lv=(l,f)=>{const v=l.slice(f[0].row+f[0].rowspan-1,l.length),C=$0(v);return To(C,O=>{const I=O.cells.slice(f[0].column+f[0].colspan-1,O.cells.length);return yn(I,U=>U.element)})},vg=(l,f,v)=>{const C=po.fromTable(l);return Ai(C,f).map(I=>{const U=hp(C,v,!1),{rows:Q}=ra(U),ae=Al(Q,I),we=Lv(Q,I);return{upOrLeftCells:ae,downOrRightCells:we}})},Fv=(l,f,v,C,O,I,U)=>({target:l,x:f,y:v,stop:C,prevent:O,kill:I,raw:U}),yb=l=>{const f=lt.fromDom($t(l).getOr(l.target)),v=()=>l.stopPropagation(),C=()=>l.preventDefault(),O=ln(C,v);return Fv(f,l.clientX,l.clientY,v,C,O,l)},yw=(l,f)=>v=>{l(v)&&f(yb(v))},lE=(l,f,v,C,O)=>{const I=yw(v,C);return l.dom.addEventListener(f,I,O),{unbind:Gt(wf,l,f,I,O)}},r3=(l,f,v,C)=>lE(l,f,v,C,!1),wf=(l,f,v,C)=>{l.dom.removeEventListener(f,v,C)},a3=Fe,yg=(l,f,v)=>r3(l,f,a3,v),kc=yb,fa=l=>!bb(lt.fromDom(l.target),"ephox-snooker-resizer-bar"),$v=(l,f)=>{const v=Fr(()=>lt.fromDom(l.getBody()),()=>Lr(hd(l),Ji(l)),Gh.selectedSelector),C=(ae,we,Le)=>{oi(we).each(jt=>{const zt=yn(ae,so=>so.dom),Nt=tp(l),hn=ud(Ne,lt.fromDom(l.getDoc()),Nt),vt=bd(l),Rn=vg(jt,{selection:vt},hn).map(so=>zr(so,ft=>yn(ft,is=>is.dom))).getOrUndefined();_4(l,zt,we.dom,Le.dom,Rn)})},O=()=>M2(l),I=Lp.byAttr(Gh,C,O);return l.on("init",ae=>{const we=l.getWin(),Le=Qf(l),St=Ji(l),jt=()=>{const rs=l.selection,Ht=lt.fromDom(rs.getStart()),Ra=lt.fromDom(rs.getEnd());A0(oi,[Ht,Ra]).fold(()=>I.clear(Le),Ne)},zt=e3(we,Le,St,I),Nt=pg(we,Le,St,I),hn=gb(we,Le,St,I),vt=rs=>rs.raw.shiftKey===!0;l.on("TableSelectorChange",rs=>hn(rs.start,rs.finish));const Rn=(rs,Ht)=>{vt(rs)&&(Ht.kill&&rs.kill(),Ht.selection.each(Ra=>{const Bu=mg.relative(Ra.start,Ra.finish),Ol=Y2(we,Bu);l.selection.setRng(Ol)}))},so=rs=>{const Ht=kc(rs);if(Ht.raw.shiftKey&&Vi(Ht.raw.which)){const Ra=l.selection.getRng(),Bu=lt.fromDom(Ra.startContainer),Ol=lt.fromDom(Ra.endContainer);Nt.keyup(Ht,Bu,Ra.startOffset,Ol,Ra.endOffset).each(fo=>{Rn(Ht,fo)})}},ft=rs=>{const Ht=kc(rs);f.hide();const Ra=l.selection.getRng(),Bu=lt.fromDom(Ra.startContainer),Ol=lt.fromDom(Ra.endContainer),fo=q(ug,yf)(lt.fromDom(l.selection.getStart()));Nt.keydown(Ht,Bu,Ra.startOffset,Ol,Ra.endOffset,fo).each(Tr=>{Rn(Ht,Tr)}),f.show()},is=rs=>rs.button===0,Io=rs=>rs.buttons===void 0?!0:(rs.buttons&1)!==0,Bo=rs=>{zt.clearstate()},$r=rs=>{is(rs)&&fa(rs)&&zt.mousedown(kc(rs))},gr=rs=>{Io(rs)&&fa(rs)&&zt.mouseover(kc(rs))},Nu=rs=>{is(rs)&&fa(rs)&&zt.mouseup(kc(rs))},Iu=(()=>{const rs=Wa(lt.fromDom(Le)),Ht=Wa(0);return{touchEnd:Bu=>{const Ol=lt.fromDom(Bu.target);if(vs("td")(Ol)||vs("th")(Ol)){const fo=rs.get(),Tr=Ht.get();es(fo,Ol)&&Bu.timeStamp-Tr<300&&(Bu.preventDefault(),hn(Ol,Ol))}rs.set(Ol),Ht.set(Bu.timeStamp)}}})();l.on("dragstart",Bo),l.on("mousedown",$r),l.on("mouseover",gr),l.on("mouseup",Nu),l.on("touchend",Iu.touchEnd),l.on("keyup",so),l.on("keydown",ft),l.on("NodeChange",jt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Gh.firstSelected),l.serializer.addTempAttr(Gh.lastSelected)}),{getSelectedCells:()=>vw(v.get(),de([]),ae=>yn(ae,we=>we.dom),ae=>[ae.dom]),clearSelectedCells:ae=>I.clear(lt.fromDom(ae))}},Ac=l=>{let f=[];return{bind:I=>{if(I===void 0)throw new Error("Event bind error: undefined handler");f.push(I)},unbind:I=>{f=fn(f,U=>U!==I)},trigger:(...I)=>{const U={};Ae(l,(Q,ae)=>{U[Q]=I[ae]}),Ae(f,Q=>{Q(U)})}}},mm=l=>{const f=zr(l,C=>({bind:C.bind,unbind:C.unbind})),v=zr(l,C=>C.trigger);return{registry:f,trigger:v}},wb=(l,f)=>{let v=null;const C=()=>{ge(v)||(clearTimeout(v),v=null)};return{cancel:C,throttle:(...I)=>{C(),v=setTimeout(()=>{v=null,l.apply(null,I)},f)}}},hm=l=>l.slice(0).sort(),Fp=(l,f)=>{throw new Error("All required keys ("+hm(l).join(", ")+") were not specified. Specified keys were: "+hm(f).join(", ")+".")},Cb=l=>{throw new Error("Unsupported keys for object: "+hm(l).join(", "))},Sb=(l,f)=>{if(!le(f))throw new Error("The "+l+" fields must be an array. Was: "+f+".");Ae(f,v=>{if(!K(v))throw new Error("The value "+v+" in the "+l+" fields was not a string.")})},i3=(l,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+hm(l).join(", ")+") were not.")},c3=l=>{const f=hm(l);W(f,(C,O)=>O<f.length-1&&C===f[O+1]).each(C=>{throw new Error("The field: "+C+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},uE=(l,f)=>dE(l,f,{validate:Pt,label:"function"}),dE=(l,f,v)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return Sb("required",f),c3(f),C=>{const O=Kt(C);zo(f,Q=>Hn(O,Q))||Fp(f,O),l(f,O);const U=fn(f,Q=>!v.validate(C[Q],Q));return U.length>0&&i3(U,v.label),C}},fE=(l,f)=>{const v=fn(f,C=>!Hn(l,C));v.length>0&&Cb(v)},Hv=l=>uE(fE,l),mE=Hv(["compare","extract","mutate","sink"]),xb=Hv(["element","start","stop","destroy"]),Mi=Hv(["forceDrop","drop","move","delayDrop"]),ou=()=>{let l=ve.none();const f=()=>{l=ve.none()},v=(I,U)=>{const Q=l.map(ae=>I.compare(ae,U));return l=ve.some(U),Q},C=(I,U)=>{U.extract(I).each(ae=>{v(U,ae).each(Le=>{O.trigger.move(Le)})})},O=mm({move:Ac(["info"])});return{onEvent:C,reset:f,events:O.registry}},zc=()=>{const l=mm({move:Ac(["info"])});return{onEvent:Ne,reset:Ne,events:l.registry}},Eb=()=>{const l=zc(),f=ou();let v=l;return{on:()=>{v.reset(),v=f},off:()=>{v.reset(),v=l},isOn:()=>v===f,onEvent:(Q,ae)=>{v.onEvent(Q,ae)},events:f.events}},gm=(l,f,v)=>{let C=!1;const O=mm({start:Ac([]),stop:Ac([])}),I=Eb(),U=()=>{Nt.stop(),I.isOn()&&(I.off(),O.trigger.stop())},Q=wb(U,200),ae=vt=>{Nt.start(vt),I.on(),O.trigger.start()},we=vt=>{Q.cancel(),I.onEvent(vt,f)};I.events.move.bind(vt=>{f.mutate(l,vt.info)});const Le=()=>{C=!0},St=()=>{C=!1},jt=()=>C,zt=vt=>(...Rn)=>{C&&vt.apply(null,Rn)},Nt=f.sink(Mi({forceDrop:U,drop:zt(U),move:zt(we),delayDrop:zt(Q.throttle)}),v),hn=()=>{Nt.destroy()};return{element:Nt.element,go:ae,on:Le,off:St,isActive:jt,destroy:hn,events:O.registry}},$p=l=>{const f=l.replace(/\./g,"-");return{resolve:C=>f+"-"+C}},gE=$p("ephox-dragster").resolve,ww=l=>{const f={layerClass:gE("blocker"),...l},v=lt.fromTag("div");return Vs(v,"role","presentation"),oa(v,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ed(v,gE("blocker")),Ed(v,f.layerClass),{element:de(v),destroy:()=>{Us(v)}}};var Sw=mE({compare:(l,f)=>pn(f.left-l.left,f.top-l.top),extract:l=>ve.some(pn(l.x,l.y)),sink:(l,f)=>{const v=ww(f),C=yg(v.element(),"mousedown",l.forceDrop),O=yg(v.element(),"mouseup",l.drop),I=yg(v.element(),"mousemove",l.move),U=yg(v.element(),"mouseout",l.delayDrop),Q=()=>{v.destroy(),O.unbind(),I.unbind(),U.unbind(),C.unbind()},ae=Le=>{ys(Le,v.element())},we=()=>{Us(v.element())};return xb({element:v.element,start:ae,stop:we,destroy:Q})},mutate:(l,f)=>{l.mutate(f.left,f.top)}});const xw=(l,f={})=>{var v;const C=(v=f.mode)!==null&&v!==void 0?v:Sw;return gm(l,C,f)},nl=$p("ephox-snooker").resolve,Ew=()=>{const l=mm({drag:Ac(["xDelta","yDelta"])});return{mutate:(v,C)=>{l.trigger.drag(v,C)},events:l.registry}},_w=()=>{const l=mm({drag:Ac(["xDelta","yDelta","target"])});let f=ve.none();const v=Ew();return v.events.drag.bind(I=>{f.each(U=>{l.trigger.drag(I.xDelta,I.yDelta,U)})}),{assign:I=>{f=ve.some(I)},get:()=>f,mutate:v.mutate,events:l.registry}},Tw=(l,f,v,C,O)=>{const I=lt.fromTag("div");return oa(I,{position:"absolute",left:f-C/2+"px",top:v+"px",height:O+"px",width:C+"px"}),xa(I,{"data-column":l,role:"presentation"}),I},zv=(l,f,v,C,O)=>{const I=lt.fromTag("div");return oa(I,{position:"absolute",left:f+"px",top:v-O/2+"px",height:O+"px",width:C+"px"}),xa(I,{"data-row":l,role:"presentation"}),I},Hp=nl("resizer-bar"),Vv=nl("resizer-rows"),u3=nl("resizer-cols"),kw=7,Uv=(l,f)=>To(l.all,(v,C)=>f(v.element)?[C]:[]),d3=(l,f)=>{const v=[];return Eo(l.grid.columns,C=>{po.getColumnAt(l,C).map(I=>I.element).forall(f)&&v.push(C)}),fn(v,C=>{const O=po.filterItems(l,I=>I.column===C);return zo(O,I=>f(I.element))})},_b=l=>{const f=$o(l.parent(),"."+Hp);Ae(f,Us)},bE=(l,f,v)=>{const C=l.origin();Ae(f,O=>{O.each(I=>{const U=v(C,I);Ed(U,Hp),ys(l.parent(),U)})})},vE=(l,f,v,C)=>{bE(l,f,(O,I)=>{const U=Tw(I.col,I.x-O.left,v.top-O.top,kw,C);return Ed(U,u3),U})},f3=(l,f,v,C)=>{bE(l,f,(O,I)=>{const U=zv(I.row,v.left-O.left,I.y-O.top,C,kw);return Ed(U,Vv),U})},pm=(l,f,v,C,O)=>{const I=_i(v),U=f.isResizable,Q=C.length>0?ci.positions(C,v):[],ae=Q.length>0?Uv(l,U):[],we=fn(Q,(zt,Nt)=>wt(ae,hn=>Nt===hn));f3(f,we,I,Xo(v));const Le=O.length>0?Yg.positions(O,v):[],St=Le.length>0?d3(l,U):[],jt=fn(Le,(zt,Nt)=>wt(St,hn=>Nt===hn));vE(f,jt,I,kn(v))},zp=(l,f)=>{if(_b(l),l.isResizable(f)){const v=po.fromTable(f),C=k(v),O=Jd(v);pm(v,l,f,C,O)}},ol=(l,f)=>{const v=$o(l.parent(),"."+Hp);Ae(v,f)},rc=l=>{ol(l,f=>{Ps(f,"display","none")})},Vp=l=>{ol(l,f=>{Ps(f,"display","block")})},fM=l=>bb(l,Vv),m3=l=>bb(l,u3),h3=nl("resizer-bar-dragging"),Mo=l=>{const f=_w(),v=xw(f,{});let C=ve.none();const O=(Nt,hn)=>ve.from(Rr(Nt,hn));f.events.drag.bind(Nt=>{O(Nt.target,"data-row").each(hn=>{const vt=Is(Nt.target,"top");Ps(Nt.target,"top",vt+Nt.yDelta+"px")}),O(Nt.target,"data-column").each(hn=>{const vt=Is(Nt.target,"left");Ps(Nt.target,"left",vt+Nt.xDelta+"px")})});const I=(Nt,hn)=>{const vt=Is(Nt,hn),Rn=Fa(Nt,"data-initial-"+hn,0);return vt-Rn};v.events.stop.bind(()=>{f.get().each(Nt=>{C.each(hn=>{O(Nt,"data-row").each(vt=>{const Rn=I(Nt,"top");fe(Nt,"data-initial-top"),zt.trigger.adjustHeight(hn,Rn,parseInt(vt,10))}),O(Nt,"data-column").each(vt=>{const Rn=I(Nt,"left");fe(Nt,"data-initial-left"),zt.trigger.adjustWidth(hn,Rn,parseInt(vt,10))}),zp(l,hn)})})});const U=(Nt,hn)=>{zt.trigger.startAdjust(),f.assign(Nt),Vs(Nt,"data-initial-"+hn,Is(Nt,hn)),Ed(Nt,h3),Ps(Nt,"opacity","0.2"),v.go(l.parent())},Q=yg(l.parent(),"mousedown",Nt=>{fM(Nt.target)&&U(Nt.target,"top"),m3(Nt.target)&&U(Nt.target,"left")}),ae=Nt=>es(Nt,l.view()),we=Nt=>Jr(Nt,"table",ae).filter(N1),Le=yg(l.view(),"mouseover",Nt=>{we(Nt.target).fold(()=>{Vn(Nt.target)&&_b(l)},hn=>{v.isActive()&&(C=ve.some(hn),zp(l,hn))})}),St=()=>{Q.unbind(),Le.unbind(),v.destroy(),_b(l)},jt=Nt=>{zp(l,Nt)},zt=mm({adjustHeight:Ac(["table","delta","row"]),adjustWidth:Ac(["table","delta","column"]),startAdjust:Ac([])});return{destroy:St,refresh:jt,on:v.on,off:v.off,hideBars:Gt(rc,l),showBars:Gt(Vp,l),events:zt.registry}},Aw={create:(l,f,v)=>{const C=ci,O=Yg,I=Mo(l),U=mm({beforeResize:Ac(["table","type"]),afterResize:Ac(["table","type"]),startDrag:Ac([])});return I.events.adjustHeight.bind(Q=>{const ae=Q.table;U.trigger.beforeResize(ae,"row");const we=C.delta(Q.delta,ae);jS(ae,we,Q.row),U.trigger.afterResize(ae,"row")}),I.events.startAdjust.bind(Q=>{U.trigger.startDrag()}),I.events.adjustWidth.bind(Q=>{const ae=Q.table;U.trigger.beforeResize(ae,"col");const we=O.delta(Q.delta,ae),Le=v(ae);Y0(ae,we,Q.column,f,Le),U.trigger.afterResize(ae,"col")}),{on:I.on,off:I.off,refreshBars:I.refresh,hideBars:I.hideBars,showBars:I.showBars,destroy:I.destroy,events:U.registry}}},wE={only:(l,f)=>{const v=ll(l)?ns(l):l;return{parent:de(v),view:de(l),origin:de(pn(0,0)),isResizable:f}},detached:(l,f,v)=>{const C=()=>_i(f);return{parent:de(f),view:de(l),origin:C,isResizable:v}},body:(l,f,v)=>({parent:de(f),view:de(l),origin:de(pn(0,0)),isResizable:v})},b3=()=>{const l=lt.fromTag("div");return oa(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ys(ko(),l),l},v3=(l,f)=>l.inline?wE.body(lt.fromDom(l.getBody()),b3(),f):wE.only(lt.fromDom(l.getDoc()),f),y3=(l,f)=>{l.inline&&Us(f.parent())},Wv=l=>Zt(l)&&l.nodeName==="TABLE",kb="bar-",Ab=l=>Rr(l,"data-mce-resize")!=="false",CE=l=>{const f=po.fromTable(l);po.hasColumns(f)||Ae(td(l),v=>{const C=Ju(v,"width");Ps(v,"width",C),fe(v,"width")})},w3=l=>_a(l,"corner-"),y7=l=>Vl(l,"corner-"),C3=l=>{const f=bf(),v=bf(),C=bf();let O,I,U,Q;const ae=ft=>da(l,ft),we=()=>s2(l)?em():Xh(),Le=ft=>cf(ft).columns,St=ft=>cf(ft).rows,jt=(ft,is,Io,Bo)=>{const $r=y7(is),gr=Ci($r,"e"),Nu=_a($r,"n");if(I===""&&eb(ft),Q===""&&H2(ft),Io!==O&&I!==""){Ps(ft,"width",I);const Pu=we(),Iu=ae(ft),rs=s2(l)||gr?Le(ft)-1:0;Y0(ft,Io-O,rs,Pu,Iu)}else if(ES(I)){const Pu=parseFloat(I.replace("%","")),Iu=Io*Pu/O;Ps(ft,"width",Iu+"%")}if(a2(I)&&CE(ft),Bo!==U&&Q!==""){Ps(ft,"height",Q);const Pu=Nu?0:St(ft)-1;jS(ft,Bo-U,Pu)}},zt=()=>{v.on(ft=>{ft.destroy()}),C.on(ft=>{y3(l,ft)})};l.on("init",()=>{const ft=v3(l,Ab);if(C.set(ft),Wh(l)&&w0(l)){const is=we(),Io=Aw.create(ft,is,ae);l.mode.isReadOnly()||Io.on(),Io.events.startDrag.bind(Bo=>{f.set(l.selection.getRng())}),Io.events.beforeResize.bind(Bo=>{const $r=Bo.table.dom;wa(l,$r,r2($r),I1($r),kb+Bo.type)}),Io.events.afterResize.bind(Bo=>{const $r=Bo.table,gr=$r.dom;Lc($r),f.on(Nu=>{l.selection.setRng(Nu),l.focus()}),Ca(l,gr,r2(gr),I1(gr),kb+Bo.type),l.undoManager.add()}),v.set(Io)}}),l.on("ObjectResizeStart",ft=>{const is=ft.target;if(Wv(is)&&!l.mode.isReadOnly()){const Io=lt.fromDom(is);Ae(l.dom.select(".mce-clonedresizable"),Bo=>{l.dom.addClass(Bo,"mce-"+Br(l)+"-columns")}),!wx(Io)&&Ql(l)?$2(Io):!lv(Io)&&np(l)&&eb(Io),Cx(Io)&&_a(ft.origin,kb)&&eb(Io),O=ft.width,I=ki(l)?"":SS(l,is).getOr(""),U=ft.height,Q=xS(l,is).getOr("")}}),l.on("ObjectResized",ft=>{const is=ft.target;if(Wv(is)){const Io=lt.fromDom(is),Bo=ft.origin;w3(Bo)&&jt(Io,Bo,ft.width,ft.height),Lc(Io),rh(l,Io.dom,Da)}});const Nt=()=>{v.on(ft=>{ft.on(),ft.showBars()})},hn=()=>{v.on(ft=>{ft.off(),ft.hideBars()})};return l.on("DisabledStateChange",ft=>{ft.state?hn():Nt()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?hn():Nt()}),l.on("dragstart dragend",ft=>{ft.type==="dragstart"?hn():Nt()}),l.on("remove",()=>{zt()}),{refresh:ft=>{v.on(is=>is.refreshBars(lt.fromDom(ft)))},hide:()=>{v.on(ft=>ft.hideBars())},show:()=>{v.on(ft=>ft.showBars())}}},S3=l=>{Uk(l);const f=C3(l),v=$v(l,f),C=J1(l,f,v);return q2(l,C),N4(l,C),vd(l,C),{getSelectedCells:v.getSelectedCells,clearSelectedCells:v.clearSelectedCells}},x3=l=>({table:S3(l)});var vn=()=>{p.add("dom",x3)};vn()}()),BJ}Sse();var FJ={},$J={},HJ;function xse(){return HJ||(HJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(_,R,Z)=>{var ne;return Z(_,R.prototype)?!0:((ne=_.constructor)===null||ne===void 0?void 0:ne.name)===R.name},w=_=>{const R=typeof _;return _===null?"null":R==="object"&&Array.isArray(_)?"array":R==="object"&&g(_,String,(Z,ne)=>ne.isPrototypeOf(Z))?"string":R},E=_=>R=>w(R)===_,N=_=>R=>typeof R===_,V=_=>R=>_===R,K=E("string"),j=E("array"),le=N("boolean"),ge=V(void 0),Ce=_=>_==null,Xe=_=>!Ce(_),Lt=N("function"),Zt=N("number"),Pt=()=>{},Ct=(_,R)=>Z=>_(R(Z)),Ne=_=>()=>_,ln=_=>_,xt=(_,R)=>_===R;function de(_,...R){return(...Z)=>{const ne=R.concat(Z);return _.apply(null,ne)}}const Je=_=>{_()},Dn=Ne(!1),Gt=Ne(!0);class re{constructor(R,Z){this.tag=R,this.value=Z}static some(R){return new re(!0,R)}static none(){return re.singletonNone}fold(R,Z){return this.tag?Z(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?re.some(R(this.value)):re.none()}bind(R){return this.tag?R(this.value):re.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:re.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Xe(R)?re.some(R):re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}re.singletonNone=new re(!1);const Xt=Object.keys,In=Object.hasOwnProperty,en=(_,R)=>{const Z=Xt(_);for(let ne=0,Se=Z.length;ne<Se;ne++){const rt=Z[ne],At=_[rt];R(At,rt)}},Fe=_=>(R,Z)=>{_[Z]=R},ve=(_,R,Z,ne)=>{en(_,(Se,rt)=>{(R(Se,rt)?Z:ne)(Se,rt)})},oo=(_,R)=>{const Z={};return ve(_,R,Fe(Z),Pt),Z},at=(_,R)=>{const Z=[];return en(_,(ne,Se)=>{Z.push(R(ne,Se))}),Z},it=_=>at(_,ln),M=_=>Xt(_).length,Hn=(_,R)=>wt(_,R)?re.from(_[R]):re.none(),wt=(_,R)=>In.call(_,R),Eo=(_,R)=>wt(_,R)&&_[R]!==void 0&&_[R]!==null,yn=_=>{for(const R in _)if(In.call(_,R))return!1;return!0},Ae=Array.prototype.indexOf,yt=Array.prototype.push,Mn=(_,R)=>Ae.call(_,R),fn=(_,R)=>Mn(_,R)>-1,io=(_,R)=>{for(let Z=0,ne=_.length;Z<ne;Z++){const Se=_[Z];if(R(Se,Z))return!0}return!1},$e=(_,R)=>{const Z=[];for(let ne=0;ne<_;ne++)Z.push(R(ne));return Z},gt=(_,R)=>{const Z=_.length,ne=new Array(Z);for(let Se=0;Se<Z;Se++){const rt=_[Se];ne[Se]=R(rt,Se)}return ne},W=(_,R)=>{for(let Z=0,ne=_.length;Z<ne;Z++){const Se=_[Z];R(Se,Z)}},Hs=(_,R)=>{for(let Z=_.length-1;Z>=0;Z--){const ne=_[Z];R(ne,Z)}},to=(_,R)=>{const Z=[],ne=[];for(let Se=0,rt=_.length;Se<rt;Se++){const At=_[Se];(R(At,Se)?Z:ne).push(At)}return{pass:Z,fail:ne}},To=(_,R)=>{const Z=[];for(let ne=0,Se=_.length;ne<Se;ne++){const rt=_[ne];R(rt,ne)&&Z.push(rt)}return Z},zo=(_,R,Z)=>(Hs(_,(ne,Se)=>{Z=R(Z,ne,Se)}),Z),gi=(_,R,Z)=>(W(_,(ne,Se)=>{Z=R(Z,ne,Se)}),Z),et=(_,R,Z)=>{for(let ne=0,Se=_.length;ne<Se;ne++){const rt=_[ne];if(R(rt,ne))return re.some(rt);if(Z(rt,ne))break}return re.none()},_t=(_,R)=>et(_,R,Dn),dt=_=>{const R=[];for(let Z=0,ne=_.length;Z<ne;++Z){if(!j(_[Z]))throw new Error("Arr.flatten item "+Z+" was not an array, input: "+_);yt.apply(R,_[Z])}return R},xe=(_,R)=>dt(gt(_,R)),Oo=(_,R)=>{for(let Z=0,ne=_.length;Z<ne;++Z){const Se=_[Z];if(R(Se,Z)!==!0)return!1}return!0},Do=(_,R)=>{const Z={};for(let ne=0,Se=_.length;ne<Se;ne++){const rt=_[ne];Z[String(rt)]=R(rt,ne)}return Z},Kt=(_,R)=>R>=0&&R<_.length?re.some(_[R]):re.none(),ls=_=>Kt(_,0),Fo=_=>Kt(_,_.length-1),zr=(_,R)=>{for(let Z=0;Z<_.length;Z++){const ne=R(_[Z],Z);if(ne.isSome())return ne}return re.none()},Vo=8,zs=9,Xa=11,_s=1,Ss=3,xs=(_,R)=>{const ne=(R||document).createElement("div");if(ne.innerHTML=_,!ne.hasChildNodes()||ne.childNodes.length>1){const Se="HTML does not have a single root node";throw console.error(Se,_),new Error(Se)}return Ko(ne.childNodes[0])},Yr=(_,R)=>{const ne=(R||document).createElement(_);return Ko(ne)},Ts=(_,R)=>{const ne=(R||document).createTextNode(_);return Ko(ne)},Ko=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},lo={fromHtml:xs,fromTag:Yr,fromText:Ts,fromDom:Ko,fromPoint:(_,R,Z)=>re.from(_.dom.elementFromPoint(R,Z)).map(Ko)},gs=(_,R)=>{const Z=_.dom;if(Z.nodeType!==_s)return!1;{const ne=Z;if(ne.matches!==void 0)return ne.matches(R);if(ne.msMatchesSelector!==void 0)return ne.msMatchesSelector(R);if(ne.webkitMatchesSelector!==void 0)return ne.webkitMatchesSelector(R);if(ne.mozMatchesSelector!==void 0)return ne.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Dr=_=>_.nodeType!==_s&&_.nodeType!==zs&&_.nodeType!==Xa||_.childElementCount===0,Pi=(_,R)=>{const Z=R===void 0?document:R.dom;return Dr(Z)?[]:gt(Z.querySelectorAll(_),lo.fromDom)},qi=(_,R)=>{const Z=R===void 0?document:R.dom;return Dr(Z)?re.none():re.from(Z.querySelector(_)).map(lo.fromDom)},ts=(_,R)=>_.dom===R.dom,Zc=gs;typeof window<"u"||Function("return this;")();const Tt=_=>_.dom.nodeName.toLowerCase(),go=_=>_.dom.nodeType,Vr=_=>R=>go(R)===_,Ur=_=>go(_)===Vo||Tt(_)==="#comment",Ba=Vr(_s),Ja=Vr(Ss),Qo=Vr(zs),La=Vr(Xa),Ii=_=>R=>Ba(R)&&Tt(R)===_,Yo=_=>lo.fromDom(_.dom.ownerDocument),En=_=>Qo(_)?_:Yo(_),or=_=>re.from(_.dom.parentNode).map(lo.fromDom),Qa=(_,R)=>{const Z=Lt(R)?R:Dn;let ne=_.dom;const Se=[];for(;ne.parentNode!==null&&ne.parentNode!==void 0;){const rt=ne.parentNode,At=lo.fromDom(rt);if(Se.push(At),Z(At)===!0)break;ne=rt}return Se},ll=_=>re.from(_.dom.previousSibling).map(lo.fromDom),ul=_=>re.from(_.dom.nextSibling).map(lo.fromDom),vs=_=>gt(_.dom.childNodes,lo.fromDom),wr=(_,R)=>{const Z=_.dom.childNodes;return re.from(Z[R]).map(lo.fromDom)},Vs=_=>wr(_,0),xa=_=>La(_)&&Xe(_.dom.host),Nc=_=>lo.fromDom(_.dom.getRootNode()),Rr=_=>{const R=Nc(_);return xa(R)?re.some(R):re.none()},pe=_=>lo.fromDom(_.dom.host),fe=_=>{const R=Ja(_)?_.dom.parentNode:_.dom;if(R==null||R.ownerDocument===null)return!1;const Z=R.ownerDocument;return Rr(lo.fromDom(R)).fold(()=>Z.body.contains(R),Ct(fe,pe))};var Ve=(_,R,Z,ne,Se)=>_(Z,ne)?re.some(Z):Lt(Se)&&Se(Z)?re.none():R(Z,ne,Se);const Ge=(_,R,Z)=>{let ne=_.dom;const Se=Lt(Z)?Z:Dn;for(;ne.parentNode;){ne=ne.parentNode;const rt=lo.fromDom(ne);if(R(rt))return re.some(rt);if(Se(rt))break}return re.none()},Cn=(_,R,Z)=>Ve((Se,rt)=>rt(Se),Ge,_,R,Z),Ln=(_,R)=>{const Z=Se=>R(lo.fromDom(Se));return _t(_.dom.childNodes,Z).map(lo.fromDom)},Qn=(_,R,Z)=>Ge(_,ne=>gs(ne,R),Z),Os=(_,R)=>Ln(_,Z=>gs(Z,R)),lt=(_,R)=>qi(R,_),Ke=(_,R,Z)=>Ve((Se,rt)=>gs(Se,rt),Qn,_,R,Z),sr=_=>Ke(_,"[contenteditable]"),Cr=(_,R=!1)=>fe(_)?_.dom.isContentEditable:sr(_).fold(Ne(R),Z=>ga(Z)==="true"),ga=_=>_.dom.contentEditable,es=_=>_.nodeName.toLowerCase(),jc=_=>lo.fromDom(_.getBody()),Xr=_=>R=>ts(R,jc(_)),Ea=_=>_?_.replace(/px$/,""):"",Ms=_=>/^\d+(\.\d+)?$/.test(_)?_+"px":_,ns=_=>lo.fromDom(_.selection.getStart()),us=_=>lo.fromDom(_.selection.getEnd()),Wr=_=>Cn(_,Ii("table")).forall(Cr),mc=(_,R)=>To(vs(_),R),Ns=(_,R)=>{let Z=[];return W(vs(_),ne=>{R(ne)&&(Z=Z.concat([ne])),Z=Z.concat(Ns(ne,R))}),Z},dl=(_,R)=>mc(_,Z=>gs(Z,R)),ei=(_,R)=>Pi(R,_),ds=(_,R,Z)=>{if(K(Z)||le(Z)||Zt(Z))_.setAttribute(R,Z+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",Z,":: Element ",_),new Error("Attribute value was not simple")},lr=(_,R,Z)=>{ds(_.dom,R,Z)},rr=(_,R)=>{const Z=_.dom;en(R,(ne,Se)=>{ds(Z,Se,ne)})},hc=(_,R)=>{const Z=_.dom.getAttribute(R);return Z===null?void 0:Z},pi=(_,R)=>re.from(hc(_,R)),pa=(_,R)=>{_.dom.removeAttribute(R)},ys=_=>gi(_.dom.attributes,(R,Z)=>(R[Z.name]=Z.value,R),{}),$d=(_,R,Z=xt)=>_.exists(ne=>Z(ne,R)),gc=_=>{const R=[],Z=ne=>{R.push(ne)};for(let ne=0;ne<_.length;ne++)_[ne].each(Z);return R},Ku=(_,R,Z)=>_.isSome()&&R.isSome()?re.some(Z(_.getOrDie(),R.getOrDie())):re.none(),So=_=>_.bind(ln),Pc=(_,R)=>_?re.some(R):re.none(),Us=(_,R)=>_.substring(R),hu=(_,R,Z)=>R===""||_.length>=R.length&&_.substr(Z,Z+R.length)===R,Gi=(_,R)=>Ic(_,R)?Us(_,R.length):_,Ic=(_,R)=>hu(_,R,0),Yu=(_=>R=>R.replace(_,""))(/^\s+|\s+$/g),bi=_=>_.length>0,Hd=_=>!bi(_),fl=(_,R=10)=>{const Z=parseInt(_,R);return isNaN(Z)?re.none():re.some(Z)},zd=_=>{const R=parseFloat(_);return isNaN(R)?re.none():re.some(R)},Sr=_=>_.style!==void 0&&Lt(_.style.getPropertyValue),pc=(_,R,Z)=>{if(!K(Z))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",Z,":: Element ",_),new Error("CSS value must be a string: "+Z);Sr(_)&&_.style.setProperty(R,Z)},ml=(_,R)=>{Sr(_)&&_.style.removeProperty(R)},Xu=(_,R,Z)=>{const ne=_.dom;pc(ne,R,Z)},hl=(_,R)=>{const Z=_.dom,Se=window.getComputedStyle(Z).getPropertyValue(R);return Se===""&&!fe(_)?qc(Z,R):Se},qc=(_,R)=>Sr(_)?_.style.getPropertyValue(R):"",br=(_,R)=>{const Z=_.dom,ne=qc(Z,R);return re.from(ne).filter(Se=>Se.length>0)},Nr=(_,R)=>{const Z=_.dom;ml(Z,R),$d(pi(_,"style").map(Yu),"")&&pa(_,"style")},vi=(_,R,Z=0)=>pi(_,R).map(ne=>parseInt(ne,10)).getOr(Z),Hl=(_,R)=>gu(_,R,Gt),gu=(_,R,Z)=>xe(vs(_),ne=>gs(ne,R)?Z(ne)?[ne]:[]:gu(ne,R,Z)),Y=["tfoot","thead","tbody","colgroup"],he=_=>fn(Y,_),ke=(_,R)=>({rows:_,columns:R}),Ye=(_,R,Z)=>({element:_,rowspan:R,colspan:Z}),kt=(_,R,Z,ne,Se,rt)=>({element:_,rowspan:R,colspan:Z,row:ne,column:Se,isLocked:rt}),nn=(_,R,Z)=>({element:_,cells:R,section:Z}),$t=(_,R,Z,ne)=>({startRow:_,startCol:R,finishRow:Z,finishCol:ne}),Nn=(_,R,Z)=>({element:_,colspan:R,column:Z}),Vn=(_,R)=>({element:_,columns:R}),ko=(_,R,Z=Dn)=>{if(Z(R))return re.none();if(fn(_,Tt(R)))return re.some(R);const ne=Se=>gs(Se,"table")||Z(Se);return Qn(R,_.join(","),ne)},H=(_,R)=>ko(["td","th"],_,R),ee=_=>Hl(_,"th,td"),ye=_=>gs(_,"colgroup")?dl(_,"col"):xe(It(_),R=>dl(R,"col")),Be=(_,R)=>Ke(_,"table",R),cn=_=>Hl(_,"tr"),It=_=>Be(_).fold(Ne([]),R=>dl(R,"colgroup")),$o=(_,R)=>gt(_,Z=>{if(Tt(Z)==="colgroup"){const ne=gt(ye(Z),Se=>{const rt=vi(Se,"span",1);return Ye(Se,1,rt)});return nn(Z,ne,"colgroup")}else{const ne=gt(ee(Z),Se=>{const rt=vi(Se,"rowspan",1),At=vi(Se,"colspan",1);return Ye(Se,rt,At)});return nn(Z,ne,R(Z))}}),na=_=>or(_).map(R=>{const Z=Tt(R);return he(Z)?Z:"tbody"}).getOr("tbody"),ut=_=>{const R=cn(_),ne=[...It(_),...R];return $o(ne,na)},ti="data-snooker-locked-cols",fs=_=>pi(_,ti).bind(R=>re.from(R.match(/\d+/g))).map(R=>Do(R,Gt)),Gc=(_,R)=>_+","+R,ur=(_,R,Z)=>re.from(_.access[Gc(R,Z)]),uo=(_,R,Z)=>{const ne=yi(_,Se=>Z(R,Se.element));return ne.length>0?re.some(ne[0]):re.none()},yi=(_,R)=>{const Z=xe(_.all,ne=>ne.cells);return To(Z,R)},Jr=_=>{const R={};let Z=0;return W(_.cells,ne=>{const Se=ne.colspan;$e(Se,rt=>{const At=Z+rt;R[At]=Nn(ne.element,Se,At)}),Z+=Se}),R},wi=_=>{const R={},Z=[],Se=ls(_).map(Ti=>Ti.element).bind(Be).bind(fs).getOr({});let rt=0,At=0,un=0;const{pass:jn,fail:ao}=to(_,Ti=>Ti.section==="colgroup");W(ao,Ti=>{const Kl=[];W(Ti.cells,ld=>{let $i=0;for(;R[Gc(un,$i)]!==void 0;)$i++;const of=Eo(Se,$i.toString()),Yf=kt(ld.element,ld.rowspan,ld.colspan,un,$i,of);for(let Yl=0;Yl<ld.colspan;Yl++)for(let Xl=0;Xl<ld.rowspan;Xl++){const jm=un+Xl,Hh=$i+Yl,zh=Gc(jm,Hh);R[zh]=Yf,At=Math.max(At,Hh+1)}Kl.push(Yf)}),rt++,Z.push(nn(Ti.element,Kl,Ti.section)),un++});const{columns:as,colgroups:ss}=Fo(jn).map(Ti=>{const Kl=Jr(Ti);return{colgroups:[Vn(Ti.element,it(Kl))],columns:Kl}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ke(rt,At),access:R,all:Z,columns:as,colgroups:ss}},Vl={fromTable:_=>{const R=ut(_);return wi(R)},generate:wi,getAt:ur,findItem:uo,filterItems:yi,justCells:_=>xe(_.all,R=>R.cells),justColumns:_=>it(_.columns),hasColumns:_=>Xt(_.columns).length>0,getColumnAt:(_,R)=>re.from(_.columns[R])};var Qr=tinymce.util.Tools.resolve("tinymce.util.Tools");const _a=(_,R,Z)=>{const ne=_.select("td,th",R);let Se;for(let rt=0;rt<ne.length;rt++){const At=_.getStyle(ne[rt],Z);if(ge(Se)&&(Se=At),Se!==At)return""}return Se},Ci=(_,R,Z)=>{Qr.each("left center right".split(" "),ne=>{ne!==Z&&_.formatter.remove("align"+ne,{},R)}),Z&&_.formatter.apply("align"+Z,{},R)},pu=(_,R,Z)=>{Qr.each("top middle bottom".split(" "),ne=>{ne!==Z&&_.formatter.remove("valign"+ne,{},R)}),Z&&_.formatter.apply("valign"+Z,{},R)},Nm=(_,R,Z)=>{_.dispatch("TableModified",{...Z,table:R})},no=(_,R)=>zd(_).getOr(R),gl=(_,R,Z)=>no(hl(_,R),Z),Ul=(_,R,Z,ne)=>{const Se=gl(_,`padding-${Z}`,0),rt=gl(_,`padding-${ne}`,0),At=gl(_,`border-${Z}-width`,0),un=gl(_,`border-${ne}-width`,0);return R-Se-rt-At-un},Wl=(_,R)=>{const Z=_.dom,ne=Z.getBoundingClientRect().width||Z.offsetWidth;return Ul(_,ne,"left","right")},Ps=_=>Wl(_);var oa=tinymce.util.Tools.resolve("tinymce.Env");const Ju="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Ah=$e(5,_=>{const R=`${_+1}px`;return{title:R,value:R}}),bu=gt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],_=>({title:_,value:_.toLowerCase()})),Si="100%",sa=_=>{var R;const Z=_.dom,ne=(R=Z.getParent(_.selection.getStart(),Z.isBlock))!==null&&R!==void 0?R:_.getBody();return Ps(lo.fromDom(ne))+"px"},Fa=(_,R)=>jd(_)||!bc(_)?R:Bm(_)?{...R,width:sa(_)}:{...R,width:Si},ni=(_,R)=>jd(_)||bc(_)?R:Bm(_)?{...R,width:sa(_)}:{...R,width:Si},Er=_=>R=>R.options.get(_),Qu=_=>{const R=_.options.register;R("table_border_widths",{processor:"object[]",default:Ah}),R("table_border_styles",{processor:"object[]",default:bu}),R("table_cell_advtab",{processor:"boolean",default:!0}),R("table_row_advtab",{processor:"boolean",default:!0}),R("table_advtab",{processor:"boolean",default:!0}),R("table_appearance_options",{processor:"boolean",default:!0}),R("table_grid",{processor:"boolean",default:!oa.deviceType.isTouch()}),R("table_cell_class_list",{processor:"object[]",default:[]}),R("table_row_class_list",{processor:"object[]",default:[]}),R("table_class_list",{processor:"object[]",default:[]}),R("table_toolbar",{processor:"string",default:Ju}),R("table_background_color_map",{processor:"object[]",default:[]}),R("table_border_color_map",{processor:"object[]",default:[]})},Is=Er("table_sizing_mode"),Vd=Er("table_border_widths"),zf=Er("table_border_styles"),Zl=Er("table_cell_advtab"),Ud=Er("table_row_advtab"),Wd=Er("table_advtab"),ed=Er("table_appearance_options"),td=Er("table_grid"),bc=Er("table_style_by_css"),oi=Er("table_cell_class_list"),Hg=Er("table_row_class_list"),pl=Er("table_class_list"),Im=Er("table_toolbar"),Zd=Er("table_background_color_map"),Oh=Er("table_border_color_map"),Bm=_=>Is(_)==="fixed",jd=_=>Is(_)==="responsive",Lm=_=>{const R=_.options,Z=R.get("table_default_styles");return R.isSet("table_default_styles")?Z:Fa(_,Z)},Dh=_=>{const R=_.options,Z=R.get("table_default_attributes");return R.isSet("table_default_attributes")?Z:ni(_,Z)},nd=(_,R)=>R.column>=_.startCol&&R.column+R.colspan-1<=_.finishCol&&R.row>=_.startRow&&R.row+R.rowspan-1<=_.finishRow,Rh=(_,R)=>{let Z=!0;const ne=de(nd,R);for(let Se=R.startRow;Se<=R.finishRow;Se++)for(let rt=R.startCol;rt<=R.finishCol;rt++)Z=Z&&Vl.getAt(_,Se,rt).exists(ne);return Z?re.some(R):re.none()},be=(_,R)=>$t(Math.min(_.row,R.row),Math.min(_.column,R.column),Math.max(_.row+_.rowspan-1,R.row+R.rowspan-1),Math.max(_.column+_.colspan-1,R.column+R.colspan-1)),od=(_,R,Z)=>{const ne=Vl.findItem(_,R,ts),Se=Vl.findItem(_,Z,ts);return ne.bind(rt=>Se.map(At=>be(rt,At)))},xi=(_,R,Z)=>od(_,R,Z).bind(ne=>Rh(_,ne)),_1=(_,R,Z)=>{const ne=zg(_);return xi(ne,R,Z)},zg=Vl.fromTable,vu=(_,R)=>{or(_).each(ne=>{ne.dom.insertBefore(R.dom,_.dom)})},No=(_,R)=>{ul(_).fold(()=>{or(_).each(Se=>{Ta(Se,R)})},ne=>{vu(ne,R)})},dr=(_,R)=>{Vs(_).fold(()=>{Ta(_,R)},ne=>{_.dom.insertBefore(R.dom,ne.dom)})},Ta=(_,R)=>{_.dom.appendChild(R.dom)},jl=(_,R)=>{vu(_,R),Ta(R,_)},Mh=(_,R)=>{W(R,(Z,ne)=>{const Se=ne===0?_:R[ne-1];No(Se,Z)})},sd=(_,R)=>{W(R,Z=>{Ta(_,Z)})},si=_=>{const R=_.dom;R.parentNode!==null&&R.parentNode.removeChild(R)},Fm=_=>{const R=vs(_);R.length>0&&Mh(_,R),si(_)},yu=((_,R)=>{const Z=rt=>{if(!_(rt))throw new Error("Can only get "+R+" value of a "+R+" node");return ne(rt).getOr("")},ne=rt=>_(rt)?re.from(rt.dom.nodeValue):re.none();return{get:Z,getOption:ne,set:(rt,At)=>{if(!_(rt))throw new Error("Can only set raw "+R+" value of a "+R+" node");rt.dom.nodeValue=At}}})(Ja,"text"),wu=_=>yu.get(_),Vf=(_,R)=>yu.set(_,R);var vc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Uf=()=>{const _=ao=>lo.fromDom(ao.dom.cloneNode(!1)),R=ao=>En(ao).dom,Z=ao=>Ba(ao)?Tt(ao)==="body"?!0:fn(vc,Tt(ao)):!1,ne=ao=>Ba(ao)?fn(["br","img","hr","input"],Tt(ao)):!1,Se=ao=>Ba(ao)&&hc(ao,"contenteditable")==="false",rt=(ao,as)=>ao.dom.compareDocumentPosition(as.dom),At=(ao,as)=>{const ss=ys(ao);rr(as,ss)},un=ao=>{const as=Tt(ao);return fn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],as)},jn=ao=>Ba(ao)?pi(ao,"lang"):re.none();return{up:Ne({selector:Qn,closest:Ke,predicate:Ge,all:Qa}),down:Ne({selector:ei,predicate:Ns}),styles:Ne({get:hl,getRaw:br,set:Xu,remove:Nr}),attrs:Ne({get:hc,set:lr,remove:pa,copyTo:At}),insert:Ne({before:vu,after:No,afterAll:Mh,append:Ta,appendAll:sd,prepend:dr,wrap:jl}),remove:Ne({unwrap:Fm,remove:si}),create:Ne({nu:lo.fromTag,clone:_,text:lo.fromText}),query:Ne({comparePosition:rt,prevSibling:ll,nextSibling:ul}),property:Ne({children:vs,name:Tt,parent:or,document:R,isText:Ja,isComment:Ur,isElement:Ba,isSpecial:un,getLanguage:jn,getText:wu,setText:Vf,isBoundary:Z,isEmptyTag:ne,isNonEditable:Se}),eq:ts,is:Zc}};const ba=(_,R,Z,ne)=>{const Se=Z[0],rt=Z.slice(1);return ne(_,R,Se,rt)},Cu=(_,R,Z)=>Z.length>0?ba(_,R,Z,Kc):re.none(),Kc=(_,R,Z,ne)=>{const Se=R(_,Z);return zo(ne,(rt,At)=>{const un=R(_,At);return ri(_,rt,un)},Se)},ri=(_,R,Z)=>R.bind(ne=>Z.filter(de(_.eq,ne))),rd=Cu,T1=Uf(),Hm=(_,R)=>rd(T1,(Z,ne)=>_(ne),R),bl=_=>Qn(_,"table"),qd=(_,R)=>{const Z=ei(_,R);return Z.length>0?re.some(Z):re.none()},Vg=(_,R,Z)=>lt(_,R).bind(ne=>lt(_,Z).bind(Se=>Hm(bl,[ne,Se]).map(rt=>({first:ne,last:Se,table:rt})))),zm=(_,R)=>qd(_,R),Ug=(_,R,Z)=>Vg(_,R,Z).bind(ne=>{const Se=jn=>ts(_,jn),rt="thead,tfoot,tbody,table",At=Qn(ne.first,rt,Se),un=Qn(ne.last,rt,Se);return At.bind(jn=>un.bind(ao=>ts(jn,ao)?_1(ne.table,ne.first,ne.last):re.none()))}),Wg=_=>gt(_,lo.fromDom),Zg="data-mce-selected",vl="data-mce-first-selected",Nh="td["+vl+"],th["+vl+"]",Yc="data-mce-last-selected",fr="td["+Yc+"],th["+Yc+"]",Pr={selected:Zg,firstSelectedSelector:Nh,lastSelectedSelector:fr},Ki=_=>Be(_).bind(R=>zm(R,Pr.firstSelectedSelector)).fold(Ne(_),R=>R[0]),Gd=_=>(R,Z)=>{const ne=Tt(R),Se=ne==="col"||ne==="colgroup"?Ki(R):R;return Ke(Se,_,Z)},Kd=Gd("th,td,caption"),ea=Gd("th,td"),mn=_=>Wg(_.model.table.getSelectedCells()),Ph=(_,R)=>{const Z=ea(_),ne=Z.bind(Se=>Be(Se)).map(Se=>cn(Se));return Ku(Z,ne,(Se,rt)=>To(rt,At=>io(Wg(At.dom.cells),un=>hc(un,R)==="1"||ts(un,Se)))).getOr([])},yl=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Yi=_=>({value:Zf(_)}),Xo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ad=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Wf=_=>Xo.test(_)||ad.test(_),Zf=_=>Gi(_,"#").toUpperCase(),jg=_=>Wf(_)?re.some({value:Zf(_)}):re.none(),Gn=_=>{const R=_.toString(16);return(R.length===1?"0"+R:R).toUpperCase()},vr=_=>{const R=Gn(_.red)+Gn(_.green)+Gn(_.blue);return Yi(R)},Yd=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Bi=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ai=(_,R,Z,ne)=>({red:_,green:R,blue:Z,alpha:ne}),Xi=(_,R,Z,ne)=>{const Se=parseInt(_,10),rt=parseInt(R,10),At=parseInt(Z,10),un=parseFloat(ne);return ai(Se,rt,At,un)},ra=_=>{const R=Yd.exec(_);if(R!==null)return re.some(Xi(R[1],R[2],R[3],"1"));const Z=Bi.exec(_);return Z!==null?re.some(Xi(Z[1],Z[2],Z[3],Z[4])):re.none()},Ei=_=>jg(_).orThunk(()=>ra(_).map(vr)).getOrThunk(()=>{const R=document.createElement("canvas");R.height=1,R.width=1;const Z=R.getContext("2d");Z.clearRect(0,0,R.width,R.height),Z.fillStyle="#FFFFFF",Z.fillStyle=_,Z.fillRect(0,0,1,1);const ne=Z.getImageData(0,0,1,1).data,Se=ne[0],rt=ne[1],At=ne[2],un=ne[3];return vr(ai(Se,rt,At,un))}),yc=_=>ra(_).map(vr).map(R=>"#"+R.value).getOr(_),Xd=_=>{let R=_;return{get:()=>R,set:Se=>{R=Se}}},Js=_=>{const R=Xd(re.none()),Z=()=>R.get().each(_);return{clear:()=>{Z(),R.set(re.none())},isSet:()=>R.get().isSome(),get:()=>R.get(),set:un=>{Z(),R.set(re.some(un))}}},Vm=()=>Js(_=>_.unbind()),_r=(_,R,Z)=>ne=>{const Se=Vm(),rt=Hd(Z),At=()=>{const un=mn(_),jn=ao=>_.formatter.match(R,{value:Z},ao.dom,rt);rt?(ne.setActive(!io(un,jn)),Se.set(_.formatter.formatChanged(R,ao=>ne.setActive(!ao),!0))):(ne.setActive(Oo(un,jn)),Se.set(_.formatter.formatChanged(R,ne.setActive,!1,{value:Z})))};return _.initialized?At():_.on("init",At),Se.clear},wl=_=>Eo(_,"menu"),Cl=_=>gt(_,R=>{const Z=R.text||R.title||"";return wl(R)?{text:Z,items:Cl(R.menu)}:{text:Z,value:R.value}}),ws=_=>_.length?re.some(Cl([{text:"Select...",value:"mce-no-match"},..._])):re.none(),Li=(_,R,Z,ne)=>gt(R,Se=>{const rt=Se.text||Se.title;return wl(Se)?{type:"nestedmenuitem",text:rt,getSubmenuItems:()=>Li(_,Se.menu,Z,ne)}:{text:rt,type:"togglemenuitem",onAction:()=>ne(Se.value),onSetup:_r(_,Z,Se.value)}}),jf=(_,R)=>Z=>{_.execCommand("mceTableApplyCellStyle",!1,{[R]:Z})},id=_=>xe(_,R=>wl(R)?[{...R,menu:id(R.menu)}]:bi(R.value)?[R]:[]),Bs=(_,R,Z,ne)=>Se=>Se(Li(_,R,Z,ne)),Su=(_,R,Z)=>{const ne=gt(R,Se=>({text:Se.title,value:"#"+Ei(Se.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:ne.length>0?ne:void 0,allowCustomColors:!1},onAction:Se=>{const rt=Se.value==="remove"?"":Se.value;_.execCommand("mceTableApplyCellStyle",!1,{[Z]:rt})}}]},Xc=_=>()=>{const Z=_.queryCommandValue("mceTableRowType")==="header"?"body":"header";_.execCommand("mceTableRowType",!1,{type:Z})},po=_=>()=>{const Z=_.queryCommandValue("mceTableColType")==="th"?"td":"th";_.execCommand("mceTableColType",!1,{type:Z})},Jd=_=>ws(oi(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),Um=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:yl}],k=_=>Um.concat(Jd(_).toArray()),B=(_,R)=>{const ne=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Cl(zf(_)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:R==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(ne):ne}},me={normal:(_,R)=>{const Z=_.dom;return{setAttrib:(At,un)=>{Z.setAttrib(R,At,un)},setStyle:(At,un)=>{Z.setStyle(R,At,un)},setFormat:(At,un)=>{un===""?_.formatter.remove(At,{value:null},R,!0):_.formatter.apply(At,{value:un},R)}}}},Ee=Ii("th"),ht=(_,R)=>_&&R?"sectionCells":_?"section":"cells",kn=_=>{const R=_.section==="thead",Z=$d(eo(_.cells),"th");return _.section==="tfoot"?{type:"footer"}:R||Z?{type:"header",subType:ht(R,Z)}:{type:"body"}},eo=_=>{const R=To(_,Z=>Ee(Z.element));return R.length===0?re.some("td"):R.length===_.length?re.some("th"):re.none()},Kn=_=>{const R=gt(_,Se=>kn(Se).type),Z=fn(R,"header"),ne=fn(R,"footer");if(!Z&&!ne)return re.some("body");{const Se=fn(R,"body");return Z&&!Se&&!ne?re.some("header"):!Z&&!Se&&ne?re.some("footer"):re.none()}},pn=_=>{let R=!1,Z;return(...ne)=>(R||(R=!0,Z=_.apply(null,ne)),Z)},Ws=(_,R)=>zr(_.all,Z=>_t(Z.cells,ne=>ts(R,ne.element))),Ir=(_,R,Z)=>{const ne=gt(R.selection,rt=>H(rt).bind(At=>Ws(_,At)).filter(Z)),Se=gc(ne);return Pc(Se.length>0,Se)},_i=(_,R)=>R.mergable,xu=(_,R)=>R.unmergable,qg=(_,R)=>Ir(_,R,Gt),qf=(_,R)=>Ws(_,R).exists(Z=>!Z.isLocked),Ih=(_,R)=>Oo(R,Z=>qf(_,Z)),ii=(_,R)=>_i(_,R).filter(Z=>Ih(_,Z.cells)),Gg=(_,R)=>xu(_,R).filter(Z=>Ih(_,Z));({...{generate:_=>{if(!j(_))throw new Error("cases must be an array");if(_.length===0)throw new Error("there must be at least one case");const R=[],Z={};return W(_,(ne,Se)=>{const rt=Xt(ne);if(rt.length!==1)throw new Error("one and only one name per case");const At=rt[0],un=ne[At];if(Z[At]!==void 0)throw new Error("duplicate key detected:"+At);if(At==="cata")throw new Error("cannot have a case named cata (sorry)");if(!j(un))throw new Error("case arguments must be an array");R.push(At),Z[At]=(...jn)=>{const ao=jn.length;if(ao!==un.length)throw new Error("Wrong number of arguments to case "+At+". Expected "+un.length+" ("+un+"), got "+ao);return{fold:(...ss)=>{if(ss.length!==_.length)throw new Error("Wrong number of arguments to fold. Expected "+_.length+", got "+ss.length);return ss[Se].apply(null,jn)},match:ss=>{const Qs=Xt(ss);if(R.length!==Qs.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+`
Actual: `+Qs.join(","));if(!Oo(R,Kl=>fn(Qs,Kl)))throw new Error("Not all branches were specified when using match. Specified: "+Qs.join(", ")+`
Required: `+R.join(", "));return ss[At].apply(null,jn)},log:ss=>{console.log(ss,{constructors:R,constructor:At,params:jn})}}}}),Z}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Zr=(_,R)=>{const Z=Vl.fromTable(_);return qg(Z,R).bind(Se=>{const rt=Se[Se.length-1],At=Se[0].row,un=rt.row+rt.rowspan,jn=Z.all.slice(At,un);return Kn(jn)}).getOr("")},Wm=_=>Ic(_,"rgb")?yc(_):_,ci=_=>{const R=lo.fromDom(_);return{borderwidth:br(R,"border-width").getOr(""),borderstyle:br(R,"border-style").getOr(""),bordercolor:br(R,"border-color").map(Wm).getOr(""),backgroundcolor:br(R,"background-color").map(Wm).getOr("")}},Fn=_=>{const R=_[0],Z=_.slice(1);return W(Z,ne=>{W(Xt(R),Se=>{en(ne,(rt,At)=>{const un=R[Se];un!==""&&Se===At&&un!==rt&&(R[Se]=Se==="class"?"mce-no-match":"")})})}),R},Jc=(_,R,Z,ne)=>_t(_,Se=>!ge(Z.formatter.matchNode(ne,R+Se))).getOr(""),Qd=de(Jc,["left","center","right"],"align"),Yg=de(Jc,["top","middle","bottom"],"valign"),v0=(_,R)=>{const Z=Lm(_),ne=Dh(_),Se=()=>({borderstyle:Hn(Z,"border-style").getOr(""),bordercolor:Wm(Hn(Z,"border-color").getOr("")),backgroundcolor:Wm(Hn(Z,"background-color").getOr(""))}),rt={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},At=()=>{const as=Z["border-width"];return bc(_)&&as?{border:as}:Hn(ne,"border").fold(()=>({}),ss=>({border:ss}))},un=R?Se():{},jn=()=>{const as=Hn(Z,"border-spacing").or(Hn(ne,"cellspacing")).fold(()=>({}),Qs=>({cellspacing:Qs})),ss=Hn(Z,"border-padding").or(Hn(ne,"cellpadding")).fold(()=>({}),Qs=>({cellpadding:Qs}));return{...as,...ss}};return{...rt,...Z,...ne,...un,...At(),...jn()}},Xg=_=>Be(lo.fromDom(_)).map(R=>{const Z={selection:Wg(_.cells)};return Zr(R,Z)}).getOr(""),Sl=(_,R,Z)=>{const ne=(un,jn)=>{const ao=br(lo.fromDom(jn),"border-width");return bc(_)&&ao.isSome()?ao.getOr(""):un.getAttrib(jn,"border")||_a(_.dom,jn,"border-width")||_a(_.dom,jn,"border")||""},Se=_.dom,rt=bc(_)?Se.getStyle(R,"border-spacing")||Se.getAttrib(R,"cellspacing"):Se.getAttrib(R,"cellspacing")||Se.getStyle(R,"border-spacing"),At=bc(_)?_a(Se,R,"padding")||Se.getAttrib(R,"cellpadding"):Se.getAttrib(R,"cellpadding")||_a(Se,R,"padding");return{width:Se.getStyle(R,"width")||Se.getAttrib(R,"width"),height:Se.getStyle(R,"height")||Se.getAttrib(R,"height"),cellspacing:rt??"",cellpadding:At??"",border:ne(Se,R),caption:!!Se.select("caption",R)[0],class:Se.getAttrib(R,"class",""),align:Qd(_,R),...Z?ci(R):{}}},Eu=(_,R,Z)=>{const ne=_.dom;return{height:ne.getStyle(R,"height")||ne.getAttrib(R,"height"),class:ne.getAttrib(R,"class",""),type:Xg(R),align:Qd(_,R),...Z?ci(R):{}}},ef=(_,R,Z,ne)=>{const Se=_.dom,rt=ne.getOr(R);return{width:((un,jn)=>Se.getStyle(un,jn)||Se.getAttrib(un,jn))(rt,"width"),scope:Se.getAttrib(R,"scope"),celltype:es(R),class:Se.getAttrib(R,"class",""),halign:Qd(_,R),valign:Yg(_,R),...Z?ci(R):{}}},Ut=(_,R)=>{const Z=Vl.fromTable(_),ne=Vl.justCells(Z),Se=To(ne,rt=>io(R,At=>ts(rt.element,At)));return gt(Se,rt=>({element:rt.element.dom,column:Vl.getColumnAt(Z,rt.column).map(At=>At.element.dom)}))},xl=(_,R,Z,ne)=>{ne("scope")&&_.setAttrib("scope",Z.scope),ne("class")&&Z.class!=="mce-no-match"&&_.setAttrib("class",Z.class),ne("width")&&R.setStyle("width",Ms(Z.width))},A1=(_,R,Z)=>{Z("backgroundcolor")&&_.setFormat("tablecellbackgroundcolor",R.backgroundcolor),Z("bordercolor")&&_.setFormat("tablecellbordercolor",R.bordercolor),Z("borderstyle")&&_.setFormat("tablecellborderstyle",R.borderstyle),Z("borderwidth")&&_.setFormat("tablecellborderwidth",Ms(R.borderwidth))},Gf=(_,R,Z,ne)=>{const Se=R.length===1;W(R,rt=>{const At=rt.element,un=Se?Gt:ne,jn=me.normal(_,At),ao=rt.column.map(as=>me.normal(_,as)).getOr(jn);xl(jn,ao,Z,un),Zl(_)&&A1(jn,Z,un),ne("halign")&&Ci(_,At,Z.halign),ne("valign")&&pu(_,At,Z.valign)})},El=(_,R)=>{_.execCommand("mceTableCellType",!1,{type:R.celltype,no_events:!0})},Bh=(_,R,Z,ne)=>{const Se=oo(ne,(rt,At)=>Z[At]!==rt);M(Se)>0&&R.length>=1&&Be(R[0]).each(rt=>{const At=Ut(rt,R),un=M(oo(Se,(ao,as)=>as!=="scope"&&as!=="celltype"))>0,jn=wt(Se,"celltype");(un||wt(Se,"scope"))&&Gf(_,At,ne,de(wt,Se)),jn&&El(_,ne),Nm(_,rt.dom,{structure:jn,style:un})})},tf=(_,R,Z,ne)=>{const Se=ne.getData();ne.close(),_.undoManager.transact(()=>{Bh(_,R,Z,Se),_.focus()})},Kf=(_,R)=>{const Z=Be(R[0]).map(ne=>gt(Ut(ne,R),Se=>ef(_,Se.element,Zl(_),Se.column)));return Fn(Z.getOrDie())},Lh=_=>{const R=mn(_);if(R.length===0)return;const Z=Kf(_,R),ne={type:"tabpanel",tabs:[{title:"General",name:"general",items:k(_)},B(_,"cell")]},Se={type:"panel",items:[{type:"grid",columns:2,items:k(_)}]};_.windowManager.open({title:"Cell Properties",size:"normal",body:Zl(_)?ne:Se,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Z,onSubmit:de(tf,_,R,Z)})},ql=_=>ws(Hg(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),y0=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],ar=_=>y0.concat(ql(_).toArray()),bt=(_,R,Z)=>{Z("class")&&R.class!=="mce-no-match"&&_.setAttrib("class",R.class),Z("height")&&_.setStyle("height",Ms(R.height))},Fi=(_,R,Z)=>{Z("backgroundcolor")&&_.setStyle("background-color",R.backgroundcolor),Z("bordercolor")&&_.setStyle("border-color",R.bordercolor),Z("borderstyle")&&_.setStyle("border-style",R.borderstyle)},Gl=(_,R,Z,ne)=>{const rt=R.length===1?Gt:ne;W(R,At=>{const un=dl(lo.fromDom(At),"td,th"),jn=me.normal(_,At);bt(jn,Z,rt),Ud(_)&&Fi(jn,Z,rt),ne("height")&&W(un,ao=>{_.dom.setStyle(ao.dom,"height",null)}),ne("align")&&Ci(_,At,Z.align)})},aa=(_,R)=>{_.execCommand("mceTableRowType",!1,{type:R.type,no_events:!0})},Zm=(_,R,Z,ne)=>{const Se=oo(ne,(rt,At)=>Z[At]!==rt);if(M(Se)>0){const rt=wt(Se,"type"),At=rt?M(Se)>1:!0;At&&Gl(_,R,ne,de(wt,Se)),rt&&aa(_,ne),Be(lo.fromDom(R[0])).each(un=>Nm(_,un.dom,{structure:rt,style:At}))}},ia=(_,R,Z,ne)=>{const Se=ne.getData();ne.close(),_.undoManager.transact(()=>{Zm(_,R,Z,Se),_.focus()})},jo=_=>{const R=Ph(ns(_),Pr.selected);if(R.length===0)return;const Z=gt(R,At=>Eu(_,At.dom,Ud(_))),ne=Fn(Z),Se={type:"tabpanel",tabs:[{title:"General",name:"general",items:ar(_)},B(_,"row")]},rt={type:"panel",items:[{type:"grid",columns:2,items:ar(_)}]};_.windowManager.open({title:"Row Properties",size:"normal",body:Ud(_)?Se:rt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ne,onSubmit:de(ia,_,gt(R,At=>At.dom),ne)})},Jg=(_,R,Z)=>{const ne=Z?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Se=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],rt=ed(_)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],At=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],un=R.length>0?[{name:"class",type:"listbox",label:"Class",items:R}]:[];return ne.concat(Se).concat(rt).concat(At).concat(un)},st=(_,R,Z,ne)=>{if(R.tagName==="TD"||R.tagName==="TH")K(Z)&&Xe(ne)?_.setStyle(R,Z,ne):_.setStyles(R,Z);else if(R.children)for(let Se=0;Se<R.children.length;Se++)st(_,R.children[Se],Z,ne)},qo=(_,R,Z,ne)=>{const Se=_.dom,rt={},At={},un=bc(_),jn=Wd(_),ao=parseFloat(Z.border)===0;if(!ge(Z.class)&&Z.class!=="mce-no-match"&&(rt.class=Z.class),At.height=Ms(Z.height),un?At.width=Ms(Z.width):Se.getAttrib(R,"width")&&(rt.width=Ea(Z.width)),un?(ao?(rt.border=0,At["border-width"]=""):(At["border-width"]=Ms(Z.border),rt.border=1),At["border-spacing"]=Ms(Z.cellspacing)):(rt.border=ao?0:Z.border,rt.cellpadding=Z.cellpadding,rt.cellspacing=Z.cellspacing),un&&R.children){const as={};if(ao?as["border-width"]="":ne.border&&(as["border-width"]=Ms(Z.border)),ne.cellpadding&&(as.padding=Ms(Z.cellpadding)),jn&&ne.bordercolor&&(as["border-color"]=Z.bordercolor),!yn(as))for(let ss=0;ss<R.children.length;ss++)st(Se,R.children[ss],as)}if(jn){const as=Z;At["background-color"]=as.backgroundcolor,At["border-color"]=as.bordercolor,At["border-style"]=as.borderstyle}Se.setStyles(R,{...Lm(_),...At}),Se.setAttribs(R,{...Dh(_),...rt})},Qg=(_,R,Z,ne)=>{const Se=_.dom,rt=ne.getData(),At=oo(rt,(un,jn)=>Z[jn]!==un);ne.close(),_.undoManager.transact(()=>{if(!R){const un=fl(rt.cols).getOr(1),jn=fl(rt.rows).getOr(1);_.execCommand("mceInsertTable",!1,{rows:jn,columns:un}),R=ea(ns(_),Xr(_)).bind(ao=>Be(ao,Xr(_))).map(ao=>ao.dom).getOrDie()}if(M(At)>0){const un={border:wt(At,"border"),bordercolor:wt(At,"bordercolor"),cellpadding:wt(At,"cellpadding")};qo(_,R,rt,un);const jn=Se.select("caption",R)[0];(jn&&!rt.caption||!jn&&rt.caption)&&_.execCommand("mceTableToggleCaption"),Ci(_,R,rt.align)}if(_.focus(),_.addVisual(),M(At)>0){const un=wt(At,"caption"),jn=un?M(At)>1:!0;Nm(_,R,{structure:un,style:jn})}})},ta=(_,R)=>{const Z=_.dom;let ne,Se=v0(_,Wd(_));R?(Se.cols="1",Se.rows="1",Wd(_)&&(Se.borderstyle="",Se.bordercolor="",Se.backgroundcolor="")):(ne=Z.getParent(_.selection.getStart(),"table",_.getBody()),ne?Se=Sl(_,ne,Wd(_)):Wd(_)&&(Se.borderstyle="",Se.bordercolor="",Se.backgroundcolor=""));const rt=ws(pl(_));rt.isSome()&&Se.class&&(Se.class=Se.class.replace(/\s*mce\-item\-table\s*/g,""));const At={type:"grid",columns:2,items:Jg(_,rt.getOr([]),R)},un=()=>({type:"panel",items:[At]}),jn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[At]},B(_,"table")]}),ao=Wd(_)?jn():un();_.windowManager.open({title:"Table Properties",size:"normal",body:ao,onSubmit:de(Qg,_,ne,Se),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Se})},ka=_=>{const R=Z=>{Wr(ns(_))&&Z()};en({mceTableProps:de(ta,_,!1),mceTableRowProps:de(jo,_),mceTableCellProps:de(Lh,_),mceInsertTableDialog:de(ta,_,!0)},(Z,ne)=>_.addCommand(ne,()=>R(Z)))},_l=(_,R)=>Os(_,R).isSome(),O1=ln,nf=_=>{const R=(ne,Se)=>pi(ne,Se).exists(rt=>parseInt(rt,10)>1),Z=ne=>R(ne,"rowspan")||R(ne,"colspan");return _.length>0&&Oo(_,Z)?re.some(_):re.none()},D1=(_,R,Z)=>R.length<=1?re.none():Ug(_,Z.firstSelectedSelector,Z.lastSelectedSelector).map(ne=>({bounds:ne,cells:R})),wc=_=>({element:_,mergable:re.none(),unmergable:re.none(),selection:[_]}),Uo=(_,R,Z)=>({element:Z,mergable:D1(R,_,Pr),unmergable:nf(_),selection:O1(_)}),_u=_=>{const R=Xd(re.none()),Z=Xd([]);let ne=re.none();const Se=Ii("caption"),rt=xo=>ne.forall(Fs=>!Fs[xo]),At=()=>Kd(ns(_),Xr(_)),un=()=>Kd(us(_),Xr(_)),jn=()=>At().bind(xo=>So(Ku(Be(xo),un().bind(Be),(Fs,va)=>ts(Fs,va)?Se(xo)?re.some(wc(xo)):re.some(Uo(mn(_),Fs,xo)):re.none()))),ao=xo=>Be(xo.element).map(va=>{const Cc=Vl.fromTable(va),Bc=qg(Cc,xo).getOr([]),Vh=gi(Bc,(Xf,ud)=>(ud.isLocked&&(Xf.onAny=!0,ud.column===0?Xf.onFirst=!0:ud.column+ud.colspan>=Cc.grid.columns&&(Xf.onLast=!0)),Xf),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ii(Cc,xo).isSome(),unmergeable:Gg(Cc,xo).isSome(),locked:Vh}}),as=()=>{R.set(pn(jn)()),ne=R.get().bind(ao),W(Z.get(),Je)},ss=xo=>(xo(),Z.set(Z.get().concat([xo])),()=>{Z.set(To(Z.get(),Fs=>Fs!==xo))}),Qs=(xo,Fs)=>ss(()=>R.get().fold(()=>{xo.setEnabled(!1)},va=>{xo.setEnabled(!Fs(va)&&_.selection.isEditable())})),Ti=(xo,Fs,va)=>ss(()=>R.get().fold(()=>{xo.setEnabled(!1),xo.setActive(!1)},Cc=>{xo.setEnabled(!Fs(Cc)&&_.selection.isEditable()),xo.setActive(va(Cc))})),Kl=xo=>ne.exists(Fs=>Fs.locked[xo]),ld=xo=>Qs(xo,Fs=>!1),$i=xo=>Qs(xo,Fs=>Se(Fs.element)),of=xo=>Fs=>Qs(Fs,va=>Se(va.element)||Kl(xo)),Yf=xo=>Fs=>Qs(Fs,va=>Se(va.element)||xo().isNone()),Yl=(xo,Fs)=>va=>Qs(va,Cc=>Se(Cc.element)||xo().isNone()||Kl(Fs)),Xl=xo=>Qs(xo,Fs=>rt("mergeable")),jm=xo=>Qs(xo,Fs=>rt("unmergeable")),Hh=xo=>Ti(xo,Dn,Fs=>Be(Fs.element,Xr(_)).exists(Cc=>_l(Cc,"caption"))),zh=(xo,Fs)=>va=>Ti(va,Cc=>Se(Cc.element),()=>_.queryCommandValue(xo)===Fs),o2=zh("mceTableRowType","header"),la=zh("mceTableColType","th");return _.on("NodeChange ExecCommand TableSelectorChange",as),{onSetupTable:ld,onSetupCellOrRow:$i,onSetupColumn:of,onSetupPasteable:Yf,onSetupPasteableColumn:Yl,onSetupMergeable:Xl,onSetupUnmergeable:jm,resetTargets:as,onSetupTableWithCaption:Hh,onSetupTableRowHeaders:o2,onSetupTableColumnHeaders:la,targets:R.get}};var Fh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const hr="x-tinymce/dom-table-",ep=hr+"rows",cd=hr+"columns",$h=_=>{var R;const Z=(R=Fh.read())!==null&&R!==void 0?R:[];return zr(Z,ne=>re.from(ne.getType(_)))},jr=()=>$h(ep),ca=()=>$h(cd),Pe=_=>R=>{const Z=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",Z),Z(),()=>{_.off("NodeChange",Z)}},Zs=(_,R)=>{_.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Pe(_),fetch:un=>un("inserttable | cell row column | advtablesort | tableprops deletetable")});const Z=un=>()=>_.execCommand(un),ne=(un,jn)=>{_.queryCommandSupported(jn.command)&&_.ui.registry.addButton(un,{...jn,onAction:Lt(jn.onAction)?jn.onAction:Z(jn.command)})},Se=(un,jn)=>{_.queryCommandSupported(jn.command)&&_.ui.registry.addToggleButton(un,{...jn,onAction:Lt(jn.onAction)?jn.onAction:Z(jn.command)})};ne("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:R.onSetupTable}),ne("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:R.onSetupTable}),ne("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:R.onSetupCellOrRow}),ne("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:R.onSetupMergeable}),ne("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:R.onSetupUnmergeable}),ne("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:R.onSetupCellOrRow}),ne("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:R.onSetupCellOrRow}),ne("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:R.onSetupCellOrRow}),ne("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:R.onSetupCellOrRow}),ne("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:R.onSetupColumn("onFirst")}),ne("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:R.onSetupColumn("onLast")}),ne("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:R.onSetupColumn("onAny")}),ne("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:R.onSetupCellOrRow}),ne("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:R.onSetupCellOrRow}),ne("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:R.onSetupPasteable(jr)}),ne("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:R.onSetupPasteable(jr)}),ne("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:R.onSetupColumn("onAny")}),ne("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:R.onSetupColumn("onAny")}),ne("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:R.onSetupPasteableColumn(ca,"onFirst")}),ne("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:R.onSetupPasteableColumn(ca,"onLast")}),ne("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Pe(_)});const rt=id(pl(_));rt.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Bs(_,rt,"tableclass",un=>_.execCommand("mceTableToggleClass",!1,un)),onSetup:R.onSetupTable});const At=id(oi(_));At.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Bs(_,At,"tablecellclass",un=>_.execCommand("mceTableCellToggleClass",!1,un)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Bs(_,yl,"tablecellverticalalign",jf(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Bs(_,Vd(_),"tablecellborderwidth",jf(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Bs(_,zf(_),"tablecellborderstyle",jf(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:un=>un(Su(_,Zd(_),"background-color")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:un=>un(Su(_,Oh(_),"border-color")),onSetup:R.onSetupCellOrRow})),Se("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),Se("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Xc(_),onSetup:R.onSetupTableRowHeaders}),Se("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:po(_),onSetup:R.onSetupTableColumnHeaders})},R1=_=>{const R=ne=>_.dom.is(ne,"table")&&_.getBody().contains(ne)&&_.dom.isEditable(ne.parentNode),Z=Im(_);Z.length>0&&_.ui.registry.addContextToolbar("table",{predicate:R,items:Z,scope:"node",position:"node"})},Ls=_=>R=>{const Z=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",Z),Z(),()=>{_.off("NodeChange",Z)}},li=(_,R)=>{const Z=ss=>()=>_.execCommand(ss),ne=(ss,Qs)=>_.queryCommandSupported(Qs.command)?(_.ui.registry.addMenuItem(ss,{...Qs,onAction:Lt(Qs.onAction)?Qs.onAction:Z(Qs.command)}),!0):!1,Se=(ss,Qs)=>{_.queryCommandSupported(Qs.command)&&_.ui.registry.addToggleMenuItem(ss,{...Qs,onAction:Lt(Qs.onAction)?Qs.onAction:Z(Qs.command)})},rt=ss=>{_.execCommand("mceInsertTable",!1,{rows:ss.numRows,columns:ss.numColumns})},At=[ne("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:R.onSetupCellOrRow}),ne("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:R.onSetupCellOrRow}),ne("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:R.onSetupCellOrRow}),ne("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:R.onSetupCellOrRow}),ne("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:R.onSetupCellOrRow}),ne("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:R.onSetupCellOrRow}),ne("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:R.onSetupPasteable(jr)}),ne("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:R.onSetupPasteable(jr)})],un=[ne("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:R.onSetupColumn("onFirst")}),ne("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:R.onSetupColumn("onLast")}),ne("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:R.onSetupColumn("onAny")}),ne("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:R.onSetupColumn("onAny")}),ne("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:R.onSetupColumn("onAny")}),ne("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:R.onSetupPasteableColumn(ca,"onFirst")}),ne("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:R.onSetupPasteableColumn(ca,"onLast")})],jn=[ne("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:R.onSetupCellOrRow}),ne("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:R.onSetupMergeable}),ne("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:R.onSetupUnmergeable})];td(_)?_.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:rt}],onSetup:Ls(_)}):_.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:Z("mceInsertTableDialog"),onSetup:Ls(_)}),_.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:Z("mceInsertTableDialog"),onSetup:Ls(_)}),ne("tableprops",{text:"Table properties",onSetup:R.onSetupTable,command:"mceTableProps"}),ne("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:R.onSetupTable,command:"mceTableDelete"}),fn(At,!0)&&_.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ne("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),fn(un,!0)&&_.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ne("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),fn(jn,!0)&&_.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ne("tablecellprops tablemergecells tablesplitcells")}),_.ui.registry.addContextMenu("table",{update:()=>(R.resetTargets(),R.targets().fold(Ne(""),ss=>Tt(ss.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const ao=id(pl(_));ao.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Li(_,ao,"tableclass",ss=>_.execCommand("mceTableToggleClass",!1,ss)),onSetup:R.onSetupTable});const as=id(oi(_));as.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Li(_,as,"tablecellclass",ss=>_.execCommand("mceTableCellToggleClass",!1,ss)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Li(_,yl,"tablecellverticalalign",jf(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Li(_,Vd(_),"tablecellborderwidth",jf(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Li(_,zf(_),"tablecellborderstyle",jf(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Su(_,Zd(_),"background-color"),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Su(_,Oh(_),"border-color"),onSetup:R.onSetupCellOrRow})),Se("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),Se("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Xc(_),onSetup:R.onSetupTableRowHeaders}),Se("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:po(_),onSetup:R.onSetupTableRowHeaders})},Aa=_=>{const R=_u(_);Qu(_),ka(_),li(_,R),Zs(_,R),R1(_)};var os=()=>{p.add("table",Aa)};os()}()),$J}var zJ;function Ese(){return zJ||(zJ=1,xse()),FJ}Ese();var VJ={},UJ={},WJ;function _se(){return WJ||(WJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Y,he,ke)=>{var Ye;return ke(Y,he.prototype)?!0:((Ye=Y.constructor)===null||Ye===void 0?void 0:Ye.name)===he.name},w=Y=>{const he=typeof Y;return Y===null?"null":he==="object"&&Array.isArray(Y)?"array":he==="object"&&g(Y,String,(ke,Ye)=>Ye.isPrototypeOf(ke))?"string":he},E=Y=>he=>w(he)===Y,N=Y=>he=>typeof he===Y,V=Y=>he=>Y===he,K=E("string"),j=E("object"),le=E("array"),ge=V(null),Ce=N("boolean"),Xe=Y=>Y==null,Lt=Y=>!Xe(Y),Zt=N("function"),Pt=(Y,he)=>{if(le(Y)){for(let ke=0,Ye=Y.length;ke<Ye;++ke)if(!he(Y[ke]))return!1;return!0}return!1},Ct=()=>{},Ne=Y=>()=>Y,ln=(Y,he)=>Y===he;class xt{constructor(he,ke){this.tag=he,this.value=ke}static some(he){return new xt(!0,he)}static none(){return xt.singletonNone}fold(he,ke){return this.tag?ke(this.value):he()}isSome(){return this.tag}isNone(){return!this.tag}map(he){return this.tag?xt.some(he(this.value)):xt.none()}bind(he){return this.tag?he(this.value):xt.none()}exists(he){return this.tag&&he(this.value)}forall(he){return!this.tag||he(this.value)}filter(he){return!this.tag||he(this.value)?this:xt.none()}getOr(he){return this.tag?this.value:he}or(he){return this.tag?this:he}getOrThunk(he){return this.tag?this.value:he()}orThunk(he){return this.tag?this:he()}getOrDie(he){if(this.tag)return this.value;throw new Error(he??"Called getOrDie on None")}static from(he){return Lt(he)?xt.some(he):xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(he){this.tag&&he(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xt.singletonNone=new xt(!1);const de=Array.prototype.indexOf,Je=Array.prototype.push,Dn=(Y,he)=>de.call(Y,he),Gt=(Y,he)=>Dn(Y,he)>-1,re=(Y,he)=>{const ke=Y.length,Ye=new Array(ke);for(let kt=0;kt<ke;kt++){const nn=Y[kt];Ye[kt]=he(nn,kt)}return Ye},Xt=(Y,he)=>{for(let ke=0,Ye=Y.length;ke<Ye;ke++){const kt=Y[ke];he(kt,ke)}},In=(Y,he,ke)=>(Xt(Y,(Ye,kt)=>{ke=he(ke,Ye,kt)}),ke),en=Y=>{const he=[];for(let ke=0,Ye=Y.length;ke<Ye;++ke){if(!le(Y[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+Y);Je.apply(he,Y[ke])}return he},Fe=(Y,he)=>en(re(Y,he)),ve=(Y,he)=>{for(let ke=0;ke<Y.length;ke++){const Ye=he(Y[ke],ke);if(Ye.isSome())return Ye}return xt.none()},oo=(Y,he,ke=ln)=>Y.exists(Ye=>ke(Ye,he)),at=Y=>{const he=[],ke=Ye=>{he.push(Ye)};for(let Ye=0;Ye<Y.length;Ye++)Y[Ye].each(ke);return he},it=(Y,he)=>Y?xt.some(he):xt.none(),M=Y=>he=>he.options.get(Y),Hn=Y=>{const he=Y.options.register;he("link_assume_external_targets",{processor:ke=>{const Ye=K(ke)||Ce(ke);return Ye?ke===!0?{value:1,valid:Ye}:ke==="http"||ke==="https"?{value:ke,valid:Ye}:{value:0,valid:Ye}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),he("link_context_toolbar",{processor:"boolean",default:!1}),he("link_list",{processor:ke=>K(ke)||Zt(ke)||Pt(ke,j)}),he("link_default_target",{processor:"string"}),he("link_default_protocol",{processor:"string",default:"https"}),he("link_target_list",{processor:ke=>Ce(ke)||Pt(ke,j),default:!0}),he("link_rel_list",{processor:"object[]",default:[]}),he("link_class_list",{processor:"object[]",default:[]}),he("link_title",{processor:"boolean",default:!0}),he("allow_unsafe_link_target",{processor:"boolean",default:!1}),he("link_quicklink",{processor:"boolean",default:!1})},wt=M("link_assume_external_targets"),Eo=M("link_context_toolbar"),yn=M("link_list"),Ae=M("link_default_target"),yt=M("link_default_protocol"),Mn=M("link_target_list"),fn=M("link_rel_list"),io=M("link_class_list"),$e=M("link_title"),gt=M("allow_unsafe_link_target"),W=M("link_quicklink"),Hs=Object.keys,to=Object.hasOwnProperty,To=(Y,he)=>{const ke=Hs(Y);for(let Ye=0,kt=ke.length;Ye<kt;Ye++){const nn=ke[Ye],$t=Y[nn];he($t,nn)}},zo=Y=>(he,ke)=>{Y[ke]=he},gi=(Y,he,ke,Ye)=>{To(Y,(kt,nn)=>{(he(kt,nn)?ke:Ye)(kt,nn)})},et=(Y,he)=>{const ke={};return gi(Y,he,zo(ke),Ct),ke},_t=(Y,he)=>to.call(Y,he),dt=(Y,he)=>_t(Y,he)&&Y[he]!==void 0&&Y[he]!==null;var xe=tinymce.util.Tools.resolve("tinymce.util.URI"),Oo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Do=tinymce.util.Tools.resolve("tinymce.util.Tools");const Kt=Y=>Lt(Y)&&Y.nodeName.toLowerCase()==="a",ls=Y=>Kt(Y)&&!!Vo(Y),Fo=(Y,he)=>{if(Y.collapsed)return[];{const ke=Y.cloneContents(),Ye=ke.firstChild,kt=new Oo(Ye,ke),nn=[];let $t=Ye;do he($t)&&nn.push($t);while($t=kt.next());return nn}},zr=Y=>/^\w+:/i.test(Y),Vo=Y=>{var he,ke;return(ke=(he=Y.getAttribute("data-mce-href"))!==null&&he!==void 0?he:Y.getAttribute("href"))!==null&&ke!==void 0?ke:""},zs=(Y,he)=>{const ke=["noopener"],Ye=Y?Y.split(/\s+/):[],kt=Vn=>Do.trim(Vn.sort().join(" ")),nn=Vn=>(Vn=$t(Vn),Vn.length>0?Vn.concat(ke):ke),$t=Vn=>Vn.filter(ko=>Do.inArray(ke,ko)===-1),Nn=he?nn(Ye):$t(Ye);return Nn.length>0?kt(Nn):""},Xa=Y=>Y.replace(/\uFEFF/g,""),_s=(Y,he)=>(he=he||Yr(Y.selection.getRng())[0]||Y.selection.getNode(),gs(he)?xt.from(Y.dom.select("a[href]",he)[0]):xt.from(Y.dom.getParent(he,"a[href]"))),Ss=(Y,he)=>_s(Y,he).isSome(),xs=(Y,he)=>{const ke=he.fold(()=>Y.getContent({format:"text"}),Ye=>Ye.innerText||Ye.textContent||"");return Xa(ke)},Yr=Y=>Fo(Y,ls),Ts=Y=>Do.grep(Y,ls),Ko=Y=>Ts(Y).length>0,Mc=Y=>Yr(Y).length>0,lo=Y=>{const he=Y.schema.getTextInlineElements(),ke=nn=>nn.nodeType===1&&!Kt(nn)&&!_t(he,nn.nodeName.toLowerCase());if(_s(Y).exists(nn=>nn.hasAttribute("data-mce-block")))return!1;const kt=Y.selection.getRng();return kt.collapsed?!0:Fo(kt,ke).length===0},gs=Y=>Lt(Y)&&Y.nodeName==="FIGURE"&&/\bimage\b/i.test(Y.className),Dr=Y=>In(["title","rel","class","target"],(ke,Ye)=>(Y[Ye].each(kt=>{ke[Ye]=kt.length>0?kt:null}),ke),{href:Y.href}),Pi=(Y,he)=>(he==="http"||he==="https")&&!zr(Y)?he+"://"+Y:Y,qi=(Y,he)=>{const ke={...he};if(fn(Y).length===0&&!gt(Y)){const Ye=zs(ke.rel,ke.target==="_blank");ke.rel=Ye||null}return xt.from(ke.target).isNone()&&Mn(Y)===!1&&(ke.target=Ae(Y)),ke.href=Pi(ke.href,wt(Y)),ke},ts=(Y,he,ke,Ye)=>{ke.each(kt=>{_t(he,"innerText")?he.innerText=kt:he.textContent=kt}),Y.dom.setAttribs(he,Ye),Y.selection.select(he)},Zc=(Y,he,ke,Ye)=>{const kt=Y.dom;gs(he)?Ii(kt,he,Ye):ke.fold(()=>{Y.execCommand("mceInsertLink",!1,Ye)},nn=>{Y.insertContent(kt.createHTML("a",Ye,kt.encode(nn)))})},Tt=(Y,he,ke)=>{const Ye=Y.selection.getNode(),kt=_s(Y,Ye),nn=qi(Y,Dr(ke));Y.undoManager.transact(()=>{ke.href===he.href&&he.attach(),kt.fold(()=>{Zc(Y,Ye,ke.text,nn)},$t=>{Y.focus(),ts(Y,$t,ke.text,nn)})})},go=Y=>{const he=Y.dom,ke=Y.selection,Ye=ke.getBookmark(),kt=ke.getRng().cloneRange(),nn=he.getParent(kt.startContainer,"a[href]",Y.getBody()),$t=he.getParent(kt.endContainer,"a[href]",Y.getBody());nn&&kt.setStartBefore(nn),$t&&kt.setEndAfter($t),ke.setRng(kt),Y.execCommand("unlink"),ke.moveToBookmark(Ye)},Vr=Y=>{Y.undoManager.transact(()=>{const he=Y.selection.getNode();gs(he)?La(Y,he):go(Y),Y.focus()})},Ur=Y=>{const{class:he,href:ke,rel:Ye,target:kt,text:nn,title:$t}=Y;return et({class:he.getOrNull(),href:ke,rel:Ye.getOrNull(),target:kt.getOrNull(),text:nn.getOrNull(),title:$t.getOrNull()},(Nn,Vn)=>ge(Nn)===!1)},Ba=(Y,he)=>{const ke=Y.options.get,Ye={allow_html_data_urls:ke("allow_html_data_urls"),allow_script_urls:ke("allow_script_urls"),allow_svg_data_urls:ke("allow_svg_data_urls")},kt=he.href;return{...he,href:xe.isDomSafe(kt,"a",Ye)?kt:""}},Ja=(Y,he,ke)=>{const Ye=Ba(Y,ke);Y.hasPlugin("rtc",!0)?Y.execCommand("createlink",!1,Ur(Ye)):Tt(Y,he,Ye)},Qo=Y=>{Y.hasPlugin("rtc",!0)?Y.execCommand("unlink"):Vr(Y)},La=(Y,he)=>{var ke;const Ye=Y.dom.select("img",he)[0];if(Ye){const kt=Y.dom.getParents(Ye,"a[href]",he)[0];kt&&((ke=kt.parentNode)===null||ke===void 0||ke.insertBefore(Ye,kt),Y.dom.remove(kt))}},Ii=(Y,he,ke)=>{var Ye;const kt=Y.select("img",he)[0];if(kt){const nn=Y.create("a",ke);(Ye=kt.parentNode)===null||Ye===void 0||Ye.insertBefore(nn,kt),nn.appendChild(kt)}},Yo=Y=>K(Y.value)?Y.value:"",En=Y=>K(Y.text)?Y.text:K(Y.title)?Y.title:"",or=(Y,he)=>{const ke=[];return Do.each(Y,Ye=>{const kt=En(Ye);if(Ye.menu!==void 0){const nn=or(Ye.menu,he);ke.push({text:kt,items:nn})}else{const nn=he(Ye);ke.push({text:kt,value:nn})}}),ke},Qa=(Y=Yo)=>he=>xt.from(he).map(ke=>or(ke,Y)),vs={sanitize:Y=>Qa(Yo)(Y),sanitizeWith:Qa,createUi:(Y,he)=>ke=>({name:Y,type:"listbox",label:he,items:ke}),getValue:Yo},wr=Y=>dt(Y,"items"),Vs=(Y,he)=>ve(he,ke=>wr(ke)?Vs(Y,ke.items):it(ke.value===Y,ke)),xa=(Y,he,ke,Ye)=>{const kt=Ye[he],nn=Y.length>0;return kt!==void 0?Vs(kt,ke).map($t=>({url:{value:$t.value,meta:{text:nn?Y:$t.text,attach:Ct}},text:nn?Y:$t.text})):xt.none()},Nc=(Y,he)=>he==="link"?Y.link:he==="anchor"?Y.anchor:xt.none(),pe={init:(Y,he)=>{const ke={text:Y.text,title:Y.title},Ye=Vn=>{var ko;return it(ke.title.length<=0,xt.from((ko=Vn.meta)===null||ko===void 0?void 0:ko.title).getOr(""))},kt=Vn=>{var ko;return it(ke.text.length<=0,xt.from((ko=Vn.meta)===null||ko===void 0?void 0:ko.text).getOr(Vn.value))},nn=Vn=>{const ko=kt(Vn.url),H=Ye(Vn.url);return ko.isSome()||H.isSome()?xt.some({...ko.map(ee=>({text:ee})).getOr({}),...H.map(ee=>({title:ee})).getOr({})}):xt.none()},$t=(Vn,ko)=>{const H=Nc(he,ko).getOr([]);return xa(ke.text,ko,H,Vn)};return{onChange:(Vn,ko)=>{const H=ko.name;return H==="url"?nn(Vn()):Gt(["anchor","link"],H)?$t(Vn(),H):((H==="text"||H==="title")&&(ke[H]=Vn()[H]),xt.none())}}},getDelta:xa};var fe=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ve=(Y,he,ke)=>{const Ye=Y.selection.getRng();fe.setEditorTimeout(Y,()=>{Y.windowManager.confirm(he,kt=>{Y.selection.setRng(Ye),ke(kt)})})},Ge=Y=>{const he=Y.href;return he.indexOf("@")>0&&he.indexOf("/")===-1&&he.indexOf("mailto:")===-1?xt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ye=>({...Ye,href:"mailto:"+he})}):xt.none()},Cn=(Y,he)=>ke=>{const Ye=ke.href;return Y===1&&!zr(Ye)||Y===0&&/^\s*www(\.|\d\.)/i.test(Ye)?xt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${he}:// prefix?`,preprocess:nn=>({...nn,href:he+"://"+Ye})}):xt.none()},Qn={preprocess:(Y,he)=>ve([Ge,Cn(wt(Y),yt(Y))],ke=>ke(he)).fold(()=>Promise.resolve(he),ke=>new Promise(Ye=>{Ve(Y,ke.message,kt=>{Ye(kt?ke.preprocess(he):he)})}))},lt={getAnchors:Y=>{const he=Y.dom.select("a:not([href])"),ke=Fe(he,Ye=>{const kt=Ye.name||Ye.id;return kt?[{text:kt,value:"#"+kt}]:[]});return ke.length>0?xt.some([{text:"None",value:""}].concat(ke)):xt.none()}},sr={getClasses:Y=>{const he=io(Y);return he.length>0?vs.sanitize(he):xt.none()}},Cr=Y=>{try{return xt.some(JSON.parse(Y))}catch{return xt.none()}},es={getLinks:Y=>{const he=Ye=>Y.convertURL(Ye.value||Ye.url||"","href"),ke=yn(Y);return new Promise(Ye=>{K(ke)?fetch(ke).then(kt=>kt.ok?kt.text().then(Cr):Promise.reject()).then(Ye,()=>Ye(xt.none())):Zt(ke)?ke(kt=>Ye(xt.some(kt))):Ye(xt.from(ke))}).then(Ye=>Ye.bind(vs.sanitizeWith(he)).map(kt=>kt.length>0?[{text:"None",value:""}].concat(kt):kt))}},Xr={getRels:(Y,he)=>{const ke=fn(Y);if(ke.length>0){const Ye=oo(he,"_blank"),kt=gt(Y)===!1,nn=Nn=>zs(vs.getValue(Nn),Ye);return(kt?vs.sanitizeWith(nn):vs.sanitize)(ke)}return xt.none()}},Ea=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ns={getTargets:Y=>{const he=Mn(Y);return le(he)?vs.sanitize(he).orThunk(()=>xt.some(Ea)):he===!1?xt.none():xt.some(Ea)}},us=(Y,he,ke)=>{const Ye=Y.getAttrib(he,ke);return Ye!==null&&Ye.length>0?xt.some(Ye):xt.none()},Wr=(Y,he)=>{const ke=Y.dom,kt=lo(Y)?xt.some(xs(Y.selection,he)):xt.none(),nn=he.bind(H=>xt.from(ke.getAttrib(H,"href"))),$t=he.bind(H=>xt.from(ke.getAttrib(H,"target"))),Nn=he.bind(H=>us(ke,H,"rel")),Vn=he.bind(H=>us(ke,H,"class")),ko=he.bind(H=>us(ke,H,"title"));return{url:nn,text:kt,title:ko,target:$t,rel:Nn,linkClass:Vn}},Ns={collect:(Y,he)=>es.getLinks(Y).then(ke=>{const Ye=Wr(Y,he);return{anchor:Ye,catalogs:{targets:ns.getTargets(Y),rels:Xr.getRels(Y,Ye.target),classes:sr.getClasses(Y),anchor:lt.getAnchors(Y),link:ke},optNode:he,flags:{titleEnabled:$e(Y)}}})},dl=(Y,he)=>ke=>{const Ye=ke.getData();if(!Ye.url.value){Qo(Y),ke.close();return}const kt=Nn=>xt.from(Ye[Nn]).filter(Vn=>!oo(he.anchor[Nn],Vn)),nn={href:Ye.url.value,text:kt("text"),target:kt("target"),rel:kt("rel"),class:kt("linkClass"),title:kt("title")},$t={href:Ye.url.value,attach:Ye.url.meta!==void 0&&Ye.url.meta.attach?Ye.url.meta.attach:Ct};Qn.preprocess(Y,nn).then(Nn=>{Ja(Y,$t,Nn)}),ke.close()},ei=Y=>{const he=_s(Y);return Ns.collect(Y,he)},ds=(Y,he)=>{const ke=Y.anchor,Ye=ke.url.getOr("");return{url:{value:Ye,meta:{original:{value:Ye}}},text:ke.text.getOr(""),title:ke.title.getOr(""),anchor:Ye,link:Ye,rel:ke.rel.getOr(""),target:ke.target.or(he).getOr(""),linkClass:ke.linkClass.getOr("")}},lr=(Y,he,ke)=>{const Ye=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],kt=Y.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),nn=Y.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],$t=xt.from(Ae(ke)),Nn=ds(Y,$t),Vn=Y.catalogs,ko=pe.init(Nn,Vn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:en([Ye,kt,nn,at([Vn.anchor.map(vs.createUi("anchor","Anchors")),Vn.rels.map(vs.createUi("rel","Rel")),Vn.targets.map(vs.createUi("target","Open link in...")),Vn.link.map(vs.createUi("link","Link list")),Vn.classes.map(vs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Nn,onChange:(ee,{name:ye})=>{ko.onChange(ee.getData,{name:ye}).each(Be=>{ee.setData(Be)})},onSubmit:he}},rr=Y=>{ei(Y).then(ke=>{const Ye=dl(Y,ke);return lr(ke,Ye,Y)}).then(ke=>{Y.windowManager.open(ke)})},hc=Y=>{Y.addCommand("mceLink",(he,ke)=>{(ke==null?void 0:ke.dialog)===!0||!W(Y)?rr(Y):Y.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},pi=Y=>{Y.addShortcut("Meta+K","",()=>{Y.execCommand("mceLink")})},pa=Y=>{let he=Y;return{get:()=>he,set:kt=>{he=kt}}},ys=Y=>{const he=pa(xt.none()),ke=()=>he.get().each(Y);return{clear:()=>{ke(),he.set(xt.none())},isSet:()=>he.get().isSome(),get:()=>he.get(),set:Nn=>{ke(),he.set(xt.some(Nn))}}},$d=()=>{const Y=ys(Ct);return{...Y,on:ke=>Y.get().each(ke)}},gc=(Y,he)=>Y.substring(he),Ku=(Y,he,ke)=>he===""||Y.length>=he.length&&Y.substr(ke,ke+he.length)===he,So=(Y,he)=>Pc(Y,he)?gc(Y,he.length):Y,Pc=(Y,he)=>Ku(Y,he,0);var Us=tinymce.util.Tools.resolve("tinymce.util.VK");const hu=(Y,he)=>{document.body.appendChild(Y),Y.dispatchEvent(he),document.body.removeChild(Y)},Gi=Y=>{const he=document.createElement("a");he.target="_blank",he.href=Y,he.rel="noreferrer noopener";const ke=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ke),hu(he,ke)},Ic=Y=>Y.altKey===!0&&Y.shiftKey===!1&&Y.ctrlKey===!1&&Y.metaKey===!1,Mr=(Y,he)=>{if(he){const ke=Vo(he);if(/^#/.test(ke)){const Ye=Y.dom.select(`${ke},[name="${So(ke,"#")}"]`);Ye.length&&Y.selection.scrollIntoView(Ye[0],!0)}else Gi(he.href)}},Yu=Y=>{const he=Y.selection.getRng(),ke=he.startContainer;return ls(ke)&&he.startContainer===he.endContainer&&Y.dom.select("img",ke).length===1},bi=(Y,he)=>{const ke=Ts(Y.dom.getParents(he));return it(ke.length===1,ke[0])},Hd=Y=>{const he=Yr(Y.selection.getRng());return it(he.length>0,he[0]).or(bi(Y,Y.selection.getNode()))},fl=Y=>Y.selection.isCollapsed()||Yu(Y)?bi(Y,Y.selection.getStart()):Hd(Y),zd=Y=>{const he=$d(),ke=()=>he.get().or(fl(Y)),Ye=()=>ke().each(kt=>Mr(Y,kt));return Y.on("contextmenu",kt=>{bi(Y,kt.target).each(he.set)}),Y.on("SelectionChange",()=>{he.isSet()||fl(Y).each(he.set)}),Y.on("click",kt=>{he.clear();const nn=Ts(Y.dom.getParents(kt.target));nn.length===1&&Us.metaKeyPressed(kt)&&(kt.preventDefault(),Mr(Y,nn[0]))}),Y.on("keydown",kt=>{he.clear(),!kt.isDefaultPrevented()&&kt.keyCode===13&&Ic(kt)&&ke().each(nn=>{kt.preventDefault(),Mr(Y,nn)})}),{gotoSelectedLink:Ye}},Sr=Y=>()=>{Y.execCommand("mceLink",!1,{dialog:!0})},pc=(Y,he)=>(Y.on("NodeChange",he),()=>Y.off("NodeChange",he)),ml=Y=>he=>{const ke=()=>{he.setActive(!Y.mode.isReadOnly()&&Ss(Y,Y.selection.getNode())),he.setEnabled(Y.selection.isEditable())};return ke(),pc(Y,ke)},Xu=Y=>he=>{const ke=()=>{he.setEnabled(Y.selection.isEditable())};return ke(),pc(Y,ke)},hl=Y=>he=>{const ke=nn=>Ko(nn)||Mc(Y.selection.getRng()),Ye=Y.dom.getParents(Y.selection.getStart()),kt=nn=>{he.setEnabled(ke(nn)&&Y.selection.isEditable())};return kt(Ye),pc(Y,nn=>kt(nn.parents))},qc=(Y,he)=>{Y.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Sr(Y),onSetup:ml(Y)}),Y.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:he.gotoSelectedLink,onSetup:hl(Y)}),Y.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Qo(Y),onSetup:hl(Y)})},br=(Y,he)=>{Y.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:he.gotoSelectedLink,onSetup:hl(Y)}),Y.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Sr(Y),onSetup:Xu(Y)}),Y.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Qo(Y),onSetup:hl(Y)})},Nr=Y=>{const he="link unlink openlink",ke="link";Y.ui.registry.addContextMenu("link",{update:Ye=>Y.dom.isEditable(Ye)?Ko(Y.dom.getParents(Ye,"a"))?he:ke:""})},vi=(Y,he)=>{const ke=nn=>{nn.selection.collapse(!1)},Ye=nn=>{const $t=Y.selection.getNode();return nn.setEnabled(Ss(Y,$t)&&Y.selection.isEditable()),Ct},kt=nn=>{const $t=_s(Y),Nn=lo(Y);if($t.isNone()&&Nn){const Vn=xs(Y.selection,$t);return it(Vn.length===0,nn)}else return xt.none()};Y.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ml(Y)},label:"Link",predicate:nn=>Eo(Y)&&Ss(Y,nn),initValue:()=>_s(Y).fold(Ne(""),Vo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:nn=>{const $t=Y.selection.getNode();return nn.setActive(Ss(Y,$t)),ml(Y)(nn)},onAction:nn=>{const $t=nn.getValue(),Nn=kt($t);Ja(Y,{href:$t,attach:Ct},{href:$t,text:Nn,title:xt.none(),rel:xt.none(),target:xt.from(Ae(Y)),class:xt.none()}),ke(Y),nn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ye,onAction:nn=>{Qo(Y),nn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ye,onAction:nn=>{he.gotoSelectedLink(),nn.hide()}}]})},Hl=Y=>{const he=zd(Y);qc(Y,he),br(Y,he),Nr(Y),vi(Y,he)};var gu=()=>{p.add("link",Y=>{Hn(Y),hc(Y),Hl(Y),pi(Y)})};gu()}()),UJ}var ZJ;function Tse(){return ZJ||(ZJ=1,_se()),VJ}Tse();var jJ={},qJ={},GJ;function kse(){return GJ||(GJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(k,B,q)=>{var me;return q(k,B.prototype)?!0:((me=k.constructor)===null||me===void 0?void 0:me.name)===B.name},w=k=>{const B=typeof k;return k===null?"null":B==="object"&&Array.isArray(k)?"array":B==="object"&&g(k,String,(q,me)=>me.isPrototypeOf(q))?"string":B},E=k=>B=>w(B)===k,N=k=>B=>typeof B===k,V=E("string"),K=E("object"),j=E("array"),le=N("boolean"),ge=k=>k==null,Ce=k=>!ge(k),Xe=N("function"),Lt=N("number"),Zt=()=>{},Pt=(k,B)=>q=>k(B(q)),Ct=k=>()=>k,Ne=(k,B)=>k===B;function ln(k,...B){return(...q)=>{const me=B.concat(q);return k.apply(null,me)}}const xt=k=>B=>!k(B),de=Ct(!1);class Je{constructor(B,q){this.tag=B,this.value=q}static some(B){return new Je(!0,B)}static none(){return Je.singletonNone}fold(B,q){return this.tag?q(this.value):B()}isSome(){return this.tag}isNone(){return!this.tag}map(B){return this.tag?Je.some(B(this.value)):Je.none()}bind(B){return this.tag?B(this.value):Je.none()}exists(B){return this.tag&&B(this.value)}forall(B){return!this.tag||B(this.value)}filter(B){return!this.tag||B(this.value)?this:Je.none()}getOr(B){return this.tag?this.value:B}or(B){return this.tag?this:B}getOrThunk(B){return this.tag?this.value:B()}orThunk(B){return this.tag?this:B()}getOrDie(B){if(this.tag)return this.value;throw new Error(B??"Called getOrDie on None")}static from(B){return Ce(B)?Je.some(B):Je.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(B){this.tag&&B(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Je.singletonNone=new Je(!1);const Dn=Array.prototype.slice,Gt=Array.prototype.indexOf,re=Array.prototype.push,Xt=(k,B)=>Gt.call(k,B),In=(k,B)=>Xt(k,B)>-1,en=(k,B)=>{for(let q=0,me=k.length;q<me;q++){const Ee=k[q];if(B(Ee,q))return!0}return!1},Fe=(k,B)=>{const q=k.length,me=new Array(q);for(let Ee=0;Ee<q;Ee++){const ht=k[Ee];me[Ee]=B(ht,Ee)}return me},ve=(k,B)=>{for(let q=0,me=k.length;q<me;q++){const Ee=k[q];B(Ee,q)}},oo=(k,B)=>{const q=[];for(let me=0,Ee=k.length;me<Ee;me++){const ht=k[me];B(ht,me)&&q.push(ht)}return q},at=(k,B)=>{if(k.length===0)return[];{let q=B(k[0]);const me=[];let Ee=[];for(let ht=0,kn=k.length;ht<kn;ht++){const eo=k[ht],Kn=B(eo);Kn!==q&&(me.push(Ee),Ee=[]),q=Kn,Ee.push(eo)}return Ee.length!==0&&me.push(Ee),me}},it=(k,B,q)=>(ve(k,(me,Ee)=>{q=B(q,me,Ee)}),q),M=(k,B,q)=>{for(let me=0,Ee=k.length;me<Ee;me++){const ht=k[me];if(B(ht,me))return Je.some(ht);if(q(ht,me))break}return Je.none()},Hn=(k,B)=>M(k,B,de),wt=k=>{const B=[];for(let q=0,me=k.length;q<me;++q){if(!j(k[q]))throw new Error("Arr.flatten item "+q+" was not an array, input: "+k);re.apply(B,k[q])}return B},Eo=(k,B)=>wt(Fe(k,B)),yn=k=>{const B=Dn.call(k,0);return B.reverse(),B},Ae=(k,B)=>B>=0&&B<k.length?Je.some(k[B]):Je.none(),yt=k=>Ae(k,0),Mn=k=>Ae(k,k.length-1),fn=(k,B)=>{const q=[],me=Xe(B)?Ee=>en(q,ht=>B(ht,Ee)):Ee=>In(q,Ee);for(let Ee=0,ht=k.length;Ee<ht;Ee++){const kn=k[Ee];me(kn)||q.push(kn)}return q},io=(k,B,q=Ne)=>k.exists(me=>q(me,B)),$e=(k,B,q=Ne)=>gt(k,B,q).getOr(k.isNone()&&B.isNone()),gt=(k,B,q)=>k.isSome()&&B.isSome()?Je.some(q(k.getOrDie(),B.getOrDie())):Je.none(),W=8,Hs=11,to=1,To=3,zo=(k,B)=>{const me=(B||document).createElement("div");if(me.innerHTML=k,!me.hasChildNodes()||me.childNodes.length>1){const Ee="HTML does not have a single root node";throw console.error(Ee,k),new Error(Ee)}return _t(me.childNodes[0])},gi=(k,B)=>{const me=(B||document).createElement(k);return _t(me)},et=(k,B)=>{const me=(B||document).createTextNode(k);return _t(me)},_t=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},xe={fromHtml:zo,fromTag:gi,fromText:et,fromDom:_t,fromPoint:(k,B,q)=>Je.from(k.dom.elementFromPoint(B,q)).map(_t)},Oo=(k,B)=>{const q=k.dom;if(q.nodeType!==to)return!1;{const me=q;if(me.matches!==void 0)return me.matches(B);if(me.msMatchesSelector!==void 0)return me.msMatchesSelector(B);if(me.webkitMatchesSelector!==void 0)return me.webkitMatchesSelector(B);if(me.mozMatchesSelector!==void 0)return me.mozMatchesSelector(B);throw new Error("Browser lacks native selectors")}},Do=(k,B)=>k.dom===B.dom,Kt=(k,B)=>{const q=k.dom,me=B.dom;return q===me?!1:q.contains(me)},ls=Oo,Fo=typeof window<"u"?window:Function("return this;")(),zr=(k,B)=>{let q=B??Fo;for(let me=0;me<k.length&&q!==void 0&&q!==null;++me)q=q[k[me]];return q},Vo=(k,B)=>{const q=k.split(".");return zr(q,B)},zs=(k,B)=>Vo(k,B),Xa=(k,B)=>{const q=zs(k,B);if(q==null)throw new Error(k+" not available on this browser");return q},_s=Object.getPrototypeOf,Ss=k=>Xa("HTMLElement",k),xs=k=>{const B=Vo("ownerDocument.defaultView",k);return K(k)&&(Ss(B).prototype.isPrototypeOf(k)||/^HTML\w*Element$/.test(_s(k).constructor.name))},Yr=k=>k.dom.nodeName.toLowerCase(),Ts=k=>k.dom.nodeType,Ko=k=>B=>Ts(B)===k,Mc=k=>Ts(k)===W||Yr(k)==="#comment",lo=k=>gs(k)&&xs(k.dom),gs=Ko(to),Dr=Ko(To),Pi=Ko(Hs),qi=k=>B=>gs(B)&&Yr(B)===k,ts=k=>Je.from(k.dom.parentNode).map(xe.fromDom),Zc=k=>Je.from(k.dom.parentElement).map(xe.fromDom),Tt=k=>Je.from(k.dom.nextSibling).map(xe.fromDom),go=k=>Fe(k.dom.childNodes,xe.fromDom),Vr=(k,B)=>{const q=k.dom.childNodes;return Je.from(q[B]).map(xe.fromDom)},Ur=k=>Vr(k,0),Ba=k=>Vr(k,k.dom.childNodes.length-1),Ja=k=>Pi(k)&&Ce(k.dom.host),Qo=k=>xe.fromDom(k.dom.getRootNode()),La=k=>{const B=Qo(k);return Ja(B)?Je.some(B):Je.none()},Ii=k=>xe.fromDom(k.dom.host),Yo=k=>{const B=Dr(k)?k.dom.parentNode:k.dom;if(B==null||B.ownerDocument===null)return!1;const q=B.ownerDocument;return La(xe.fromDom(B)).fold(()=>q.body.contains(B),Pt(Yo,Ii))};var En=(k,B,q,me,Ee)=>k(q,me)?Je.some(q):Xe(Ee)&&Ee(q)?Je.none():B(q,me,Ee);const or=(k,B,q)=>{let me=k.dom;const Ee=Xe(q)?q:de;for(;me.parentNode;){me=me.parentNode;const ht=xe.fromDom(me);if(B(ht))return Je.some(ht);if(Ee(ht))break}return Je.none()},Qa=(k,B,q)=>En((Ee,ht)=>ht(Ee),or,k,B,q),ll=(k,B,q)=>or(k,me=>Oo(me,B),q),ul=(k,B,q)=>En((Ee,ht)=>Oo(Ee,ht),ll,k,B,q),vs=k=>ul(k,"[contenteditable]"),wr=(k,B=!1)=>Yo(k)?k.dom.isContentEditable:vs(k).fold(Ct(B),q=>Vs(q)==="true"),Vs=k=>k.dom.contentEditable,xa=(k,B)=>{ts(k).each(me=>{me.dom.insertBefore(B.dom,k.dom)})},Nc=(k,B)=>{Tt(k).fold(()=>{ts(k).each(Ee=>{pe(Ee,B)})},me=>{xa(me,B)})},Rr=(k,B)=>{Ur(k).fold(()=>{pe(k,B)},me=>{k.dom.insertBefore(B.dom,me.dom)})},pe=(k,B)=>{k.dom.appendChild(B.dom)},fe=(k,B)=>{ve(B,q=>{xa(k,q)})},Ve=(k,B)=>{ve(B,q=>{pe(k,q)})},Ge=k=>{k.dom.textContent="",ve(go(k),B=>{Cn(B)})},Cn=k=>{const B=k.dom;B.parentNode!==null&&B.parentNode.removeChild(B)};var Ln=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Qn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Os=tinymce.util.Tools.resolve("tinymce.util.VK");const lt=k=>Fe(k,xe.fromDom),Ke=Object.keys,sr=(k,B)=>{const q=Ke(k);for(let me=0,Ee=q.length;me<Ee;me++){const ht=q[me],kn=k[ht];B(kn,ht)}},Cr=k=>(B,q)=>{k[q]=B},ga=(k,B,q,me)=>{sr(k,(Ee,ht)=>{(B(Ee,ht)?q:me)(Ee,ht)})},es=(k,B)=>{const q={};return ga(k,B,Cr(q),Zt),q},jc=(k,B,q)=>{if(V(q)||le(q)||Lt(q))k.setAttribute(B,q+"");else throw console.error("Invalid call to Attribute.set. Key ",B,":: Value ",q,":: Element ",k),new Error("Attribute value was not simple")},Xr=(k,B)=>{const q=k.dom;sr(B,(me,Ee)=>{jc(q,Ee,me)})},Ea=k=>it(k.dom.attributes,(B,q)=>(B[q.name]=q.value,B),{}),Ms=(k,B)=>xe.fromDom(k.dom.cloneNode(B)),ns=k=>Ms(k,!0),us=(k,B)=>{const q=xe.fromTag(B),me=Ea(k);return Xr(q,me),q},Wr=(k,B)=>{const q=us(k,B);Nc(k,q);const me=go(k);return Ve(q,me),Cn(k),q};var mc=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ns=tinymce.util.Tools.resolve("tinymce.util.Tools");const dl=k=>B=>Ce(B)&&B.nodeName.toLowerCase()===k,ei=k=>B=>Ce(B)&&k.test(B.nodeName),ds=k=>Ce(k)&&k.nodeType===3,lr=k=>Ce(k)&&k.nodeType===1,rr=ei(/^(OL|UL|DL)$/),hc=ei(/^(OL|UL)$/),pi=dl("ol"),pa=ei(/^(LI|DT|DD)$/),ys=ei(/^(DT|DD)$/),$d=ei(/^(TH|TD)$/),gc=dl("br"),Ku=k=>{var B;return((B=k.parentNode)===null||B===void 0?void 0:B.firstChild)===k},So=(k,B)=>Ce(B)&&B.nodeName in k.schema.getTextBlockElements(),Pc=(k,B)=>Ce(k)&&k.nodeName in B,Us=(k,B)=>Ce(B)&&B.nodeName in k.schema.getVoidElements(),hu=(k,B)=>gc(B)?k.isBlock(B.nextSibling)&&!gc(B.previousSibling):!1,Gi=(k,B,q)=>{const me=k.isEmpty(B);return q&&k.select("span[data-mce-type=bookmark]",B).length>0?!1:me},Ic=(k,B)=>k.isChildOf(B,k.getRoot()),Mr=k=>B=>B.options.get(k),Yu=k=>{const B=k.options.register;B("lists_indent_on_tab",{processor:"boolean",default:!0})},bi=Mr("lists_indent_on_tab"),Hd=Mr("forced_root_block"),fl=Mr("forced_root_block_attrs"),zd=(k,B,q={})=>{const me=k.dom,Ee=k.schema.getBlockElements(),ht=me.createFragment(),kn=Hd(k),eo=fl(k);let Kn,pn,Ws=!1;for(pn=me.create(kn,{...eo,...q.style?{style:q.style}:{}}),Pc(B.firstChild,Ee)||ht.appendChild(pn);Kn=B.firstChild;){const Ir=Kn.nodeName;!Ws&&(Ir!=="SPAN"||Kn.getAttribute("data-mce-type")!=="bookmark")&&(Ws=!0),Pc(Kn,Ee)?(ht.appendChild(Kn),pn=null):(pn||(pn=me.create(kn,eo),ht.appendChild(pn)),pn.appendChild(Kn))}return!Ws&&pn&&pn.appendChild(me.create("br",{"data-mce-bogus":"1"})),ht},Sr=mc.DOM,pc=(k,B,q)=>{const me=pn=>{const Ws=pn.parentNode;Ws&&Ns.each(Ee,Ir=>{Ws.insertBefore(Ir,q.parentNode)}),Sr.remove(pn)},Ee=Sr.select('span[data-mce-type="bookmark"]',B),ht=zd(k,q),kn=Sr.createRng();kn.setStartAfter(q),kn.setEndAfter(B);const eo=kn.extractContents();for(let pn=eo.firstChild;pn;pn=pn.firstChild)if(pn.nodeName==="LI"&&k.dom.isEmpty(pn)){Sr.remove(pn);break}k.dom.isEmpty(eo)||Sr.insertAfter(eo,B),Sr.insertAfter(ht,B);const Kn=q.parentElement;Kn&&Gi(k.dom,Kn)&&me(Kn),Sr.remove(q),Gi(k.dom,B)&&Sr.remove(B)},ml=qi("dd"),Xu=qi("dt"),hl=(k,B)=>{ml(B)?Wr(B,"dt"):Xu(B)&&Zc(B).each(q=>pc(k,q.dom,B.dom))},qc=k=>{Xu(k)&&Wr(k,"dd")},br=(k,B,q)=>{B==="Indent"?ve(q,qc):ve(q,me=>hl(k,me))},Nr=(k,B)=>{if(ds(k))return{container:k,offset:B};const q=Ln.getNode(k,B);return ds(q)?{container:q,offset:B>=k.childNodes.length?q.data.length:0}:q.previousSibling&&ds(q.previousSibling)?{container:q.previousSibling,offset:q.previousSibling.data.length}:q.nextSibling&&ds(q.nextSibling)?{container:q.nextSibling,offset:0}:{container:k,offset:B}},vi=k=>{const B=k.cloneRange(),q=Nr(k.startContainer,k.startOffset);B.setStart(q.container,q.offset);const me=Nr(k.endContainer,k.endOffset);return B.setEnd(me.container,me.offset),B},Hl=["OL","UL","DL"],gu=Hl.join(","),Y=(k,B)=>{const q=B||k.selection.getStart(!0);return k.dom.getParent(q,gu,ko(k,q))},he=(k,B)=>Ce(k)&&B.length===1&&B[0]===k,ke=k=>oo(k.querySelectorAll(gu),rr),Ye=k=>{const B=Y(k),q=k.selection.getSelectedBlocks();return he(B,q)?ke(B):oo(q,me=>rr(me)&&B!==me)},kt=(k,B)=>{const q=Ns.map(B,me=>{const Ee=k.dom.getParent(me,"li,dd,dt",ko(k,me));return Ee||me});return fn(q)},nn=k=>{const B=k.selection.getSelectedBlocks();return oo(kt(k,B),pa)},$t=k=>oo(nn(k),ys),Nn=(k,B)=>{const q=k.dom.getParents(B,"TD,TH");return q.length>0?q[0]:k.getBody()},Vn=(k,B)=>!rr(B)&&!pa(B)&&en(Hl,q=>k.isValidChild(B.nodeName,q)),ko=(k,B)=>{const q=k.dom.getParents(B,k.dom.isBlock),me=ht=>ht.nodeName.toLowerCase()!==Hd(k);return Hn(q,ht=>me(ht)&&Vn(k.schema,ht)).getOr(k.getBody())},H=k=>ts(k).exists(B=>pa(B.dom)&&Ur(B).exists(q=>!rr(q.dom))&&Ba(B).exists(q=>!rr(q.dom))),ee=(k,B)=>{const q=k.dom.getParents(B,"ol,ul",ko(k,B));return Mn(q)},ye=k=>{const B=ee(k,k.selection.getStart()),q=oo(k.selection.getSelectedBlocks(),hc);return B.toArray().concat(q)},Be=k=>{const B=k.selection.getStart();return k.dom.getParents(B,"ol,ul",ko(k,B))},cn=k=>{const B=ye(k),q=Be(k);return Hn(q,me=>H(xe.fromDom(me))).fold(()=>It(k,B),me=>[me])},It=(k,B)=>{const q=Fe(B,me=>ee(k,me).getOr(me));return fn(q)},$o=k=>/\btox\-/.test(k.className),na=(k,B)=>M(k,rr,$d).exists(q=>q.nodeName===B&&!$o(q)),ut=(k,B)=>B!==null&&!k.dom.isEditable(B),ti=k=>{const B=Y(k);return ut(k,B)||!k.selection.isEditable()},fs=(k,B)=>{const q=k.dom.getParent(B,"ol,ul,dl");return ut(k,q)||!k.selection.isEditable()},Gc=(k,B)=>{const q=k.selection.getNode();return B({parents:k.dom.getParents(q),element:q}),k.on("NodeChange",B),()=>k.off("NodeChange",B)},ur=(k,B)=>{const me=document.createDocumentFragment();return ve(k,Ee=>{me.appendChild(Ee.dom)}),xe.fromDom(me)},uo=(k,B,q)=>k.dispatch("ListMutation",{action:B,element:q}),Jr=(k=>B=>B.replace(k,""))(/^\s+|\s+$/g),wi=k=>k.length>0,xr=k=>!wi(k),zl=k=>k.style!==void 0&&Xe(k.style.getPropertyValue),$g=(k,B,q)=>{if(!V(q))throw console.error("Invalid call to CSS.set. Property ",B,":: Value ",q,":: Element ",k),new Error("CSS value must be a string: "+q);zl(k)&&k.style.setProperty(B,q)},E1=(k,B,q)=>{const me=k.dom;$g(me,B,q)},Ds=k=>ls(k,"OL,UL"),Vl=k=>ls(k,"LI"),Qr=k=>Ur(k).exists(Ds),_a=k=>Ba(k).exists(Ds),Ci=k=>"listAttributes"in k,pu=k=>"isComment"in k,Nm=k=>"isFragment"in k,no=k=>k.depth>0,gl=k=>k.isSelected,Ul=k=>{const B=go(k),q=_a(k)?B.slice(0,-1):B;return Fe(q,ns)},Wl=(k,B,q)=>ts(k).filter(gs).map(me=>({depth:B,dirty:!1,isSelected:q,content:Ul(k),itemAttributes:Ea(k),listAttributes:Ea(me),listType:Yr(me),isInPreviousLi:!1})),Pm=(k,B)=>{pe(k.item,B.list)},Ps=k=>{for(let B=1;B<k.length;B++)Pm(k[B-1],k[B])},oa=(k,B)=>{gt(Mn(k),yt(B),Pm)},Ju=(k,B)=>{const q={list:xe.fromTag(B,k),item:xe.fromTag("li",k)};return pe(q.list,q.item),q},Ah=(k,B,q)=>{const me=[];for(let Ee=0;Ee<q;Ee++)me.push(Ju(k,Ci(B)?B.listType:B.parentListType));return me},bu=(k,B)=>{for(let q=0;q<k.length-1;q++)E1(k[q].item,"list-style-type","none");Mn(k).each(q=>{Ci(B)&&(Xr(q.list,B.listAttributes),Xr(q.item,B.itemAttributes)),Ve(q.item,B.content)})},Si=(k,B)=>{Yr(k.list)!==B.listType&&(k.list=Wr(k.list,B.listType)),Xr(k.list,B.listAttributes)},sa=(k,B,q)=>{const me=xe.fromTag("li",k);return Xr(me,B),Ve(me,q),me},Fa=(k,B)=>{pe(k.list,B),k.item=B},ni=(k,B,q)=>{const me=B.slice(0,q.depth);return Mn(me).each(Ee=>{if(Ci(q)){const ht=sa(k,q.itemAttributes,q.content);Fa(Ee,ht),Si(Ee,q)}else if(Nm(q))Ve(Ee.item,q.content);else{const ht=xe.fromHtml(`<!--${q.content}-->`);pe(Ee.list,ht)}}),me},Er=(k,B,q)=>{const me=Ah(k,q,q.depth-B.length);return Ps(me),bu(me,q),oa(B,me),B.concat(me)},Qu=(k,B)=>{let q=Je.none();const me=it(B,(Ee,ht,kn)=>pu(ht)?kn===0?(q=Je.some(ht),Ee):ni(k,Ee,ht):ht.depth>Ee.length?Er(k,Ee,ht):ni(k,Ee,ht),[]);return q.each(Ee=>{const ht=xe.fromHtml(`<!--${Ee.content}-->`);yt(me).each(kn=>{Rr(kn.list,ht)})}),yt(me).map(Ee=>Ee.list)},Is=(k,B)=>{switch(k){case"Indent":B.depth++;break;case"Outdent":B.depth--;break;case"Flatten":B.depth=0}B.dirty=!0},Vd=(k,B)=>{Ci(k)&&Ci(B)&&(k.listType=B.listType,k.listAttributes={...B.listAttributes})},zf=k=>{k.listAttributes=es(k.listAttributes,(B,q)=>q!=="start")},Zl=(k,B)=>{const q=k[B].depth,me=ht=>ht.depth===q&&!ht.dirty,Ee=ht=>ht.depth<q;return M(yn(k.slice(0,B)),me,Ee).orThunk(()=>M(k.slice(B+1),me,Ee))},Ud=k=>(ve(k,(B,q)=>{Zl(k,q).fold(()=>{B.dirty&&Ci(B)&&zf(B)},me=>Vd(B,me))}),k),Wd=k=>{let B=k;return{get:()=>B,set:Ee=>{B=Ee}}},ed=(k,B,q,me)=>{var Ee;if(Mc(me))return[{depth:k+1,content:(Ee=me.dom.nodeValue)!==null&&Ee!==void 0?Ee:"",dirty:!1,isSelected:!1,isComment:!0}];B.each(eo=>{Do(eo.start,me)&&q.set(!0)});const ht=Wl(me,k,q.get());B.each(eo=>{Do(eo.end,me)&&q.set(!1)});const kn=Ba(me).filter(Ds).map(eo=>bc(k,B,q,eo)).getOr([]);return ht.toArray().concat(kn)},td=(k,B,q,me)=>Ur(me).filter(Ds).fold(()=>ed(k,B,q,me),Ee=>{const ht=it(go(me),(kn,eo,Kn)=>{if(Kn===0)return kn;if(Vl(eo))return kn.concat(ed(k,B,q,eo));{const pn={isFragment:!0,depth:k,content:[eo],isSelected:!1,dirty:!1,parentListType:Yr(Ee)};return kn.concat(pn)}},[]);return bc(k,B,q,Ee).concat(ht)}),bc=(k,B,q,me)=>Eo(go(me),Ee=>{const ht=Ds(Ee)?bc:td,kn=k+1;return ht(kn,B,q,Ee)}),oi=(k,B)=>{const q=Wd(!1),me=0;return Fe(k,Ee=>({sourceList:Ee,entries:bc(me,B,q,Ee)}))},Hg=(k,B)=>{const q=Ud(B);return Fe(q,me=>{const Ee=pu(me)?ur([xe.fromHtml(`<!--${me.content}-->`)]):ur(me.content),ht=Ci(me)?me.itemAttributes:{};return xe.fromDom(zd(k,Ee.dom,ht))})},pl=(k,B)=>{const q=Ud(B);return Qu(k.contentDocument,q).toArray()},Im=(k,B)=>Eo(at(B,no),q=>yt(q).exists(no)?pl(k,q):Hg(k,q)),Zd=(k,B)=>{ve(oo(k,gl),q=>Is(B,q))},Oh=k=>{const B=Fe(nn(k),xe.fromDom);return gt(Hn(B,xt(Qr)),Hn(yn(B),xt(Qr)),(q,me)=>({start:q,end:me}))},Bm=(k,B,q)=>{const me=oi(B,Oh(k));ve(me,Ee=>{Zd(Ee.entries,q);const ht=Im(k,Ee.entries);ve(ht,kn=>{uo(k,q==="Indent"?"IndentList":"OutdentList",kn.dom)}),fe(Ee.sourceList,ht),Cn(Ee.sourceList)})},jd=(k,B)=>{const q=lt(cn(k)),me=lt($t(k));let Ee=!1;if(q.length||me.length){const ht=k.selection.getBookmark();Bm(k,q,B),br(k,B,me),k.selection.moveToBookmark(ht),k.selection.setRng(vi(k.selection.getRng())),k.nodeChanged(),Ee=!0}return Ee},Lm=(k,B)=>!ti(k)&&jd(k,B),Dh=k=>Lm(k,"Indent"),nd=k=>Lm(k,"Outdent"),Rh=k=>Lm(k,"Flatten"),be="\uFEFF",od=k=>k===be,xi=(k,B,q)=>or(k,B,q).isSome(),_1=(k,B)=>xi(k,ln(Do,B));var zg=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const vu=mc.DOM,No=k=>{const B={},q=me=>{let Ee=k[me?"startContainer":"endContainer"],ht=k[me?"startOffset":"endOffset"];if(lr(Ee)){const kn=vu.create("span",{"data-mce-type":"bookmark"});Ee.hasChildNodes()?(ht=Math.min(ht,Ee.childNodes.length-1),me?Ee.insertBefore(kn,Ee.childNodes[ht]):vu.insertAfter(kn,Ee.childNodes[ht])):Ee.appendChild(kn),Ee=kn,ht=0}B[me?"startContainer":"endContainer"]=Ee,B[me?"startOffset":"endOffset"]=ht};return q(!0),k.collapsed||q(),B},dr=k=>{const B=me=>{const Ee=eo=>{var Kn;let pn=(Kn=eo.parentNode)===null||Kn===void 0?void 0:Kn.firstChild,Ws=0;for(;pn;){if(pn===eo)return Ws;(!lr(pn)||pn.getAttribute("data-mce-type")!=="bookmark")&&Ws++,pn=pn.nextSibling}return-1};let ht=k[me?"startContainer":"endContainer"],kn=k[me?"startOffset":"endOffset"];if(ht){if(lr(ht)&&ht.parentNode){const eo=ht;kn=Ee(ht),ht=ht.parentNode,vu.remove(eo),!ht.hasChildNodes()&&vu.isBlock(ht)&&ht.appendChild(vu.create("br"))}k[me?"startContainer":"endContainer"]=ht,k[me?"startOffset":"endOffset"]=kn}};B(!0),B();const q=vu.createRng();return q.setStart(k.startContainer,k.startOffset),k.endContainer&&q.setEnd(k.endContainer,k.endOffset),vi(q)},Ta=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},jl=(k,B,q)=>{const me=q["list-style-type"]?q["list-style-type"]:null;k.setStyle(B,"list-style-type",me)},Mh=(k,B)=>{Ns.each(B,(q,me)=>{k.setAttribute(me,q)})},sd=(k,B,q)=>{Mh(B,q["list-attributes"]),Ns.each(k.select("li",B),me=>{Mh(me,q["list-item-attributes"])})},si=(k,B,q)=>{jl(k,B,q),sd(k,B,q)},Fm=(k,B,q)=>{Ns.each(q,me=>k.setStyle(B,me,""))},$m=(k,B)=>Ce(B)&&!Pc(B,k.schema.getBlockElements()),yu=(k,B,q,me)=>{let Ee=B[q?"startContainer":"endContainer"];const ht=B[q?"startOffset":"endOffset"];lr(Ee)&&(Ee=Ee.childNodes[Math.min(ht,Ee.childNodes.length-1)]||Ee),!q&&gc(Ee.nextSibling)&&(Ee=Ee.nextSibling);const kn=Kn=>{for(;!k.dom.isBlock(Kn)&&Kn.parentNode&&me!==Kn;)Kn=Kn.parentNode;return Kn},eo=(Kn,pn)=>{var Ws;const Ir=new Qn(Kn,kn(Kn)),_i=pn?"next":"prev";let xu;for(;xu=Ir[_i]();)if(!(Us(k,xu)||od(xu.textContent)||((Ws=xu.textContent)===null||Ws===void 0?void 0:Ws.length)===0))return Je.some(xu);return Je.none()};if(q&&ds(Ee))if(od(Ee.textContent))Ee=eo(Ee,!1).getOr(Ee);else for(Ee.parentNode!==null&&$m(k,Ee.parentNode)&&(Ee=Ee.parentNode);Ee.previousSibling!==null&&($m(k,Ee.previousSibling)||ds(Ee.previousSibling));)Ee=Ee.previousSibling;if(!q&&ds(Ee))if(od(Ee.textContent))Ee=eo(Ee,!0).getOr(Ee);else for(Ee.parentNode!==null&&$m(k,Ee.parentNode)&&(Ee=Ee.parentNode);Ee.nextSibling!==null&&($m(k,Ee.nextSibling)||ds(Ee.nextSibling));)Ee=Ee.nextSibling;for(;Ee.parentNode!==me;){const Kn=Ee.parentNode;if(So(k,Ee)||/^(TD|TH)$/.test(Kn.nodeName))return Ee;Ee=Kn}return Ee},wu=(k,B,q)=>{const me=[],Ee=k.dom,ht=yu(k,B,!0,q),kn=yu(k,B,!1,q);let eo;const Kn=[];for(let pn=ht;pn&&(Kn.push(pn),pn!==kn);pn=pn.nextSibling);return Ns.each(Kn,pn=>{var Ws;if(So(k,pn)){me.push(pn),eo=null;return}if(Ee.isBlock(pn)||gc(pn)){gc(pn)&&Ee.remove(pn),eo=null;return}const Ir=pn.nextSibling;if(zg.isBookmarkNode(pn)&&(rr(Ir)||So(k,Ir)||!Ir&&pn.parentNode===q)){eo=null;return}eo||(eo=Ee.create("p"),(Ws=pn.parentNode)===null||Ws===void 0||Ws.insertBefore(eo,pn),me.push(eo)),eo.appendChild(pn)}),me},Vf=(k,B,q)=>{const me=k.getStyle(B,"list-style-type");let Ee=q?q["list-style-type"]:"";return Ee=Ee===null?"":Ee,me===Ee},vc=(k,B)=>{const q=k.selection.getStart(!0),me=yu(k,B,!0,k.getBody());return _1(xe.fromDom(me),xe.fromDom(B.commonAncestorContainer))?B.commonAncestorContainer:q},Uf=(k,B,q)=>{const me=k.selection.getRng();let Ee="LI";const ht=ko(k,vc(k,me)),kn=k.dom;if(kn.getContentEditable(k.selection.getNode())==="false")return;B=B.toUpperCase(),B==="DL"&&(Ee="DT");const eo=No(me),Kn=oo(wu(k,me,ht),k.dom.isEditable);Ns.each(Kn,pn=>{let Ws;const Ir=pn.previousSibling,_i=pn.parentNode;pa(_i)||(Ir&&rr(Ir)&&Ir.nodeName===B&&Vf(kn,Ir,q)?(Ws=Ir,pn=kn.rename(pn,Ee),Ir.appendChild(pn)):(Ws=kn.create(B),_i.insertBefore(Ws,pn),Ws.appendChild(pn),pn=kn.rename(pn,Ee)),Fm(kn,pn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),si(kn,Ws,q),rd(k.dom,Ws))}),k.selection.setRng(dr(eo))},ba=(k,B)=>rr(k)&&k.nodeName===(B==null?void 0:B.nodeName),Cu=(k,B,q)=>{const me=k.getStyle(B,"list-style-type",!0),Ee=k.getStyle(q,"list-style-type",!0);return me===Ee},Kc=(k,B)=>k.className===B.className,ri=(k,B,q)=>ba(B,q)&&Cu(k,B,q)&&Kc(B,q),rd=(k,B)=>{let q,me=B.nextSibling;if(ri(k,B,me)){const Ee=me;for(;q=Ee.firstChild;)B.appendChild(q);k.remove(Ee)}if(me=B.previousSibling,ri(k,B,me)){const Ee=me;for(;q=Ee.lastChild;)B.insertBefore(q,B.firstChild);k.remove(Ee)}},T1=(k,B,q,me)=>{if(B.nodeName!==q){const Ee=k.dom.rename(B,q);si(k.dom,Ee,me),uo(k,Ta(q),Ee)}else si(k.dom,B,me),uo(k,Ta(q),B)},Hm=(k,B,q,me)=>{if(B.classList.forEach((Ee,ht,kn)=>{Ee.startsWith("tox-")&&(kn.remove(Ee),kn.length===0&&B.removeAttribute("class"))}),B.nodeName!==q){const Ee=k.dom.rename(B,q);si(k.dom,Ee,me),uo(k,Ta(q),Ee)}else si(k.dom,B,me),uo(k,Ta(q),B)},bl=(k,B,q,me,Ee)=>{const ht=rr(B);if(ht&&B.nodeName===me&&!qd(Ee)&&!$o(B))Rh(k);else{Uf(k,me,Ee);const kn=No(k.selection.getRng()),eo=ht?[B,...q]:q,Kn=ht&&$o(B)?Hm:T1;Ns.each(eo,pn=>{Kn(k,pn,me,Ee)}),k.selection.setRng(dr(kn))}},qd=k=>"list-style-type"in k,Vg=(k,B,q,me)=>{if(B!==k.getBody())if(B)if(B.nodeName===q&&!qd(me)&&!$o(B))Rh(k);else{const Ee=No(k.selection.getRng());$o(B)&&B.classList.forEach((kn,eo,Kn)=>{kn.startsWith("tox-")&&(Kn.remove(kn),Kn.length===0&&B.removeAttribute("class"))}),si(k.dom,B,me);const ht=k.dom.rename(B,q);rd(k.dom,ht),k.selection.setRng(dr(Ee)),Uf(k,q,me),uo(k,Ta(q),ht)}else Uf(k,q,me),uo(k,Ta(q),B)},zm=(k,B,q)=>{const me=Y(k);if(fs(k,me))return;const Ee=Ye(k),ht=K(q)?q:{};Ee.length>0?bl(k,me,Ee,B,ht):Vg(k,me,B,ht)},Ug=mc.DOM,Wg=(k,B)=>{const q=B.parentElement;if(q&&q.nodeName==="LI"&&q.firstChild===B){const me=q.previousSibling;me&&me.nodeName==="LI"?(me.appendChild(B),Gi(k,q)&&Ug.remove(q)):Ug.setStyle(q,"listStyleType","none")}if(rr(q)){const me=q.previousSibling;me&&me.nodeName==="LI"&&me.appendChild(B)}},Zg=(k,B)=>{const q=Ns.grep(k.select("ol,ul",B));Ns.each(q,me=>{Wg(k,me)})},vl=(k,B,q,me)=>{let Ee=B.startContainer;const ht=B.startOffset;if(ds(Ee)&&(q?ht<Ee.data.length:ht>0))return Ee;const kn=k.schema.getNonEmptyElements();lr(Ee)&&(Ee=Ln.getNode(Ee,ht));const eo=new Qn(Ee,me);q&&hu(k.dom,Ee)&&eo.next();const Kn=q?eo.next.bind(eo):eo.prev2.bind(eo);for(;Ee=Kn();)if(Ee.nodeName==="LI"&&!Ee.hasChildNodes()||kn[Ee.nodeName]||ds(Ee)&&Ee.data.length>0)return Ee;return null},Nh=(k,B)=>{const q=B.childNodes;return q.length===1&&!rr(q[0])&&k.isBlock(q[0])},Yc=k=>Je.from(k).map(xe.fromDom).filter(lo).exists(B=>wr(B)&&!In(["details"],Yr(B))),fr=(k,B)=>{Nh(k,B)&&Yc(B.firstChild)&&k.remove(B.firstChild,!0)},Pr=(k,B,q)=>{let me;const Ee=Nh(k,q)?q.firstChild:q;if(fr(k,B),!Gi(k,B,!0))for(;me=B.firstChild;)Ee.appendChild(me)},Ki=(k,B,q)=>{let me;const Ee=B.parentNode;if(!Ic(k,B)||!Ic(k,q))return;rr(q.lastChild)&&(me=q.lastChild),Ee===q.lastChild&&gc(Ee.previousSibling)&&k.remove(Ee.previousSibling);const ht=q.lastChild;ht&&gc(ht)&&B.hasChildNodes()&&k.remove(ht),Gi(k,q,!0)&&Ge(xe.fromDom(q)),Pr(k,B,q),me&&q.appendChild(me);const eo=Kt(xe.fromDom(q),xe.fromDom(B))?k.getParents(B,rr,q):[];k.remove(B),ve(eo,Kn=>{Gi(k,Kn)&&Kn!==k.getRoot()&&k.remove(Kn)})},Gd=(k,B,q)=>{Ge(xe.fromDom(q)),Ki(k.dom,B,q),k.selection.setCursorLocation(q,0)},Kd=(k,B,q,me)=>{const Ee=k.dom;if(Ee.isEmpty(me))Gd(k,q,me);else{const ht=No(B);Ki(Ee,q,me),k.selection.setRng(dr(ht))}},ea=(k,B,q,me)=>{const Ee=No(B);Ki(k.dom,q,me);const ht=dr(Ee);k.selection.setRng(ht)},mn=(k,B)=>{const q=k.dom,me=k.selection,Ee=me.getStart(),ht=Nn(k,Ee),kn=q.getParent(me.getStart(),"LI",ht);if(kn){const eo=kn.parentElement;if(eo===k.getBody()&&Gi(q,eo))return!0;const Kn=vi(me.getRng()),pn=q.getParent(vl(k,Kn,B,ht),"LI",ht),Ws=pn&&(B?q.isChildOf(kn,pn):q.isChildOf(pn,kn));if(pn&&pn!==kn&&!Ws)return k.undoManager.transact(()=>{B?Kd(k,Kn,pn,kn):Ku(kn)?nd(k):ea(k,Kn,kn,pn)}),!0;if(Ws&&!B&&pn!==kn)return k.undoManager.transact(()=>{if(Kn.commonAncestorContainer.parentElement){const Ir=No(Kn),_i=Kn.commonAncestorContainer.parentElement;Pr(q,Kn.commonAncestorContainer.parentElement,pn),_i.remove();const xu=dr(Ir);k.selection.setRng(xu)}}),!0;if(!pn&&!B&&Kn.startOffset===0&&Kn.endOffset===0)return k.undoManager.transact(()=>{Rh(k)}),!0}return!1},Ph=(k,B,q)=>{const me=k.getParent(B.parentNode,k.isBlock,q);k.remove(B),me&&k.isEmpty(me)&&k.remove(me)},yl=(k,B)=>{const q=k.dom,me=k.selection.getStart(),Ee=Nn(k,me),ht=q.getParent(me,q.isBlock,Ee);if(ht&&q.isEmpty(ht,void 0,{checkRootAsContent:!0})){const kn=vi(k.selection.getRng()),eo=q.getParent(vl(k,kn,B,Ee),"LI",Ee);if(eo){const Kn=_i=>In(["td","th","caption"],Yr(_i)),pn=_i=>_i.dom===Ee,Ws=Qa(xe.fromDom(eo),Kn,pn),Ir=Qa(xe.fromDom(kn.startContainer),Kn,pn);return $e(Ws,Ir,Do)?(k.undoManager.transact(()=>{const _i=eo.parentNode;Ph(q,ht,Ee),rd(q,_i),k.selection.select(eo,!0),k.selection.collapse(B)}),!0):!1}}return!1},Yi=(k,B)=>mn(k,B)||yl(k,B),Xo=k=>{const B=k.selection.getStart(),q=Nn(k,B);return k.dom.getParent(B,"LI,DT,DD",q)||nn(k).length>0},ad=k=>Xo(k)?(k.undoManager.transact(()=>{let B=!0;const q=()=>B=!1;k.on("input",q),k.execCommand("Delete"),k.off("input",q),B&&k.dispatch("input"),Zg(k.dom,k.getBody())}),!0):!1,Wf=(k,B)=>{const q=k.selection;return!fs(k,q.getNode())&&(q.isCollapsed()?Yi(k,B):ad(k))},Zf=k=>{k.on("ExecCommand",B=>{const q=B.command.toLowerCase();(q==="delete"||q==="forwarddelete")&&Xo(k)&&Zg(k.dom,k.getBody())}),k.on("keydown",B=>{B.keyCode===Os.BACKSPACE?Wf(k,!1)&&B.preventDefault():B.keyCode===Os.DELETE&&Wf(k,!0)&&B.preventDefault()})},jg=k=>({backspaceDelete:B=>{Wf(k,B)}}),Gn=(k,B)=>{const q=Y(k);q===null||fs(k,q)||k.undoManager.transact(()=>{K(B.styles)&&k.dom.setStyles(q,B.styles),K(B.attrs)&&sr(B.attrs,(me,Ee)=>k.dom.setAttrib(q,Ee,me))})},vr=k=>{const B=yn(Jr(k).split("")),q=Fe(B,(me,Ee)=>{const ht=me.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Ee)*ht});return it(q,(me,Ee)=>me+Ee,0)},Yd=k=>{if(k--,k<0)return"";{const B=k%26,q=Math.floor(k/26),me=Yd(q),Ee=String.fromCharCode(65+B);return me+Ee}},Bi=k=>/^[A-Z]+$/.test(k),ai=k=>/^[a-z]+$/.test(k),Xi=k=>/^[0-9]+$/.test(k),ra=k=>Xi(k)?2:Bi(k)?0:ai(k)?1:xr(k)?3:4,Ei=k=>{switch(ra(k)){case 2:return Je.some({listStyleType:Je.none(),start:k});case 0:return Je.some({listStyleType:Je.some("upper-alpha"),start:vr(k).toString()});case 1:return Je.some({listStyleType:Je.some("lower-alpha"),start:vr(k).toString()});case 3:return Je.some({listStyleType:Je.none(),start:""});case 4:return Je.none()}},yc=k=>{const B=parseInt(k.start,10);return io(k.listStyleType,"upper-alpha")?Yd(B):io(k.listStyleType,"lower-alpha")?Yd(B).toLowerCase():k.start},Xd=k=>{const B=Y(k);!pi(B)||fs(k,B)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:yc({start:k.dom.getAttrib(B,"start","1"),listStyleType:Je.from(k.dom.getStyle(B,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:q=>{const me=q.getData();Ei(me.start).each(Ee=>{k.execCommand("mceListUpdate",!1,{attrs:{start:Ee.start==="1"?"":Ee.start},styles:{"list-style-type":Ee.listStyleType.getOr("")}})}),q.close()}})},Js=(k,B)=>()=>{const q=Y(k);return Ce(q)&&q.nodeName===B},Vm=k=>{k.addCommand("mceListProps",()=>{Xd(k)})},_r=k=>{k.on("BeforeExecCommand",B=>{const q=B.command.toLowerCase();q==="indent"?Dh(k):q==="outdent"&&nd(k)}),k.addCommand("InsertUnorderedList",(B,q)=>{zm(k,"UL",q)}),k.addCommand("InsertOrderedList",(B,q)=>{zm(k,"OL",q)}),k.addCommand("InsertDefinitionList",(B,q)=>{zm(k,"DL",q)}),k.addCommand("RemoveList",()=>{Rh(k)}),Vm(k),k.addCommand("mceListUpdate",(B,q)=>{K(q)&&Gn(k,q)}),k.addQueryStateHandler("InsertUnorderedList",Js(k,"UL")),k.addQueryStateHandler("InsertOrderedList",Js(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",Js(k,"DL"))};var wl=tinymce.util.Tools.resolve("tinymce.html.Node");const Cl=k=>k.type===3,ws=k=>k.length===0,Li=k=>{const B=(Ee,ht)=>{const kn=wl.create("li");ve(Ee,eo=>kn.append(eo)),ht?k.insert(kn,ht,!0):k.append(kn)},q=(Ee,ht)=>Cl(ht)?[...Ee,ht]:!ws(Ee)&&!Cl(ht)?(B(Ee,ht),[]):Ee,me=it(k.children(),q,[]);ws(me)||B(me)},jf=k=>{k.on("PreInit",()=>{const{parser:B}=k;B.addNodeFilter("ul,ol",q=>ve(q,Li))})},id=k=>{k.on("keydown",B=>{B.keyCode!==Os.TAB||Os.metaKeyPressed(B)||k.undoManager.transact(()=>{(B.shiftKey?nd(k):Dh(k))&&B.preventDefault()})})},Bs=k=>{bi(k)&&id(k),Zf(k)},Su=(k,B)=>q=>{const me=Ee=>{q.setActive(na(Ee.parents,B)),q.setEnabled(!fs(k,Ee.element)&&k.selection.isEditable())};return q.setEnabled(k.selection.isEditable()),Gc(k,me)},Xc=k=>{const B=q=>()=>k.execCommand(q);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:B("InsertOrderedList"),onSetup:Su(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:B("InsertUnorderedList"),onSetup:Su(k,"UL")}))},po=(k,B)=>q=>Gc(k,Ee=>q.setEnabled(na(Ee.parents,B)&&!fs(k,Ee.element))),Jd=k=>{const B={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:po(k,"OL")};k.ui.registry.addMenuItem("listprops",B),k.ui.registry.addContextMenu("lists",{update:q=>{const me=Y(k,q);return pi(me)?["listprops"]:[]}})};var Um=()=>{p.add("lists",k=>(Yu(k),jf(k),k.hasPlugin("rtc",!0)?Vm(k):(Bs(k),_r(k)),Xc(k),Jd(k),jg(k)))};Um()}()),qJ}var KJ;function Ase(){return KJ||(KJ=1,kse()),jJ}Ase();var YJ={},XJ={},JJ;function Ose(){return JJ||(JJ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=Object.getPrototypeOf,w=(H,ee,ye)=>{var Be;return ye(H,ee.prototype)?!0:((Be=H.constructor)===null||Be===void 0?void 0:Be.name)===ee.name},E=H=>{const ee=typeof H;return H===null?"null":ee==="object"&&Array.isArray(H)?"array":ee==="object"&&w(H,String,(ye,Be)=>Be.isPrototypeOf(ye))?"string":ee},N=H=>ee=>E(ee)===H,V=H=>ee=>typeof ee===H,K=H=>ee=>H===ee,j=(H,ee)=>ge(H)&&w(H,ee,(ye,Be)=>g(ye)===Be),le=N("string"),ge=N("object"),Ce=H=>j(H,Object),Xe=N("array"),Lt=K(null),Zt=V("boolean"),Pt=H=>H==null,Ct=H=>!Pt(H),Ne=V("function"),ln=V("number"),xt=(H,ee)=>{if(Xe(H)){for(let ye=0,Be=H.length;ye<Be;++ye)if(!ee(H[ye]))return!1;return!0}return!1},de=()=>{};class Je{constructor(ee,ye){this.tag=ee,this.value=ye}static some(ee){return new Je(!0,ee)}static none(){return Je.singletonNone}fold(ee,ye){return this.tag?ye(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?Je.some(ee(this.value)):Je.none()}bind(ee){return this.tag?ee(this.value):Je.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:Je.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return Ct(ee)?Je.some(ee):Je.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Je.singletonNone=new Je(!1);const Dn=Object.keys,Gt=Object.hasOwnProperty,re=(H,ee)=>{const ye=Dn(H);for(let Be=0,cn=ye.length;Be<cn;Be++){const It=ye[Be],$o=H[It];ee($o,It)}},Xt=H=>(ee,ye)=>{H[ye]=ee},In=(H,ee,ye,Be)=>{re(H,(cn,It)=>{(ee(cn,It)?ye:Be)(cn,It)})},en=(H,ee)=>{const ye={};return In(H,ee,Xt(ye),de),ye},Fe=(H,ee)=>Gt.call(H,ee),ve=(H,ee)=>Fe(H,ee)&&H[ee]!==void 0&&H[ee]!==null,oo=Array.prototype.push,at=H=>{const ee=[];for(let ye=0,Be=H.length;ye<Be;++ye){if(!Xe(H[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+H);oo.apply(ee,H[ye])}return ee},it=(H,ee)=>ee>=0&&ee<H.length?Je.some(H[ee]):Je.none(),M=H=>it(H,0),Hn=(H,ee)=>{for(let ye=0;ye<H.length;ye++){const Be=ee(H[ye],ye);if(Be.isSome())return Be}return Je.none()};typeof window<"u"||Function("return this;")();const wt=(H,ee,ye)=>{if(le(ye)||Zt(ye)||ln(ye))H.setAttribute(ee,ye+"");else throw console.error("Invalid call to Attribute.set. Key ",ee,":: Value ",ye,":: Element ",H),new Error("Attribute value was not simple")},Eo=(H,ee,ye)=>{wt(H.dom,ee,ye)},yn=(H,ee)=>{H.dom.removeAttribute(ee)},Ae=(H,ee)=>{const Be=(ee||document).createElement("div");if(Be.innerHTML=H,!Be.hasChildNodes()||Be.childNodes.length>1){const cn="HTML does not have a single root node";throw console.error(cn,H),new Error(cn)}return fn(Be.childNodes[0])},yt=(H,ee)=>{const Be=(ee||document).createElement(H);return fn(Be)},Mn=(H,ee)=>{const Be=(ee||document).createTextNode(H);return fn(Be)},fn=H=>{if(H==null)throw new Error("Node cannot be null or undefined");return{dom:H}},$e={fromHtml:Ae,fromTag:yt,fromText:Mn,fromDom:fn,fromPoint:(H,ee,ye)=>Je.from(H.dom.elementFromPoint(ee,ye)).map(fn)};var gt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),W=tinymce.util.Tools.resolve("tinymce.util.URI");const Hs=H=>H.length>0,to=H=>ee=>ee.options.get(H),To=H=>{const ee=H.options.register;ee("image_dimensions",{processor:"boolean",default:!0}),ee("image_advtab",{processor:"boolean",default:!1}),ee("image_uploadtab",{processor:"boolean",default:!0}),ee("image_prepend_url",{processor:"string",default:""}),ee("image_class_list",{processor:"object[]"}),ee("image_description",{processor:"boolean",default:!0}),ee("image_title",{processor:"boolean",default:!1}),ee("image_caption",{processor:"boolean",default:!1}),ee("image_list",{processor:ye=>{const Be=ye===!1||le(ye)||xt(ye,ge)||Ne(ye);return Be?{value:ye,valid:Be}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},zo=to("image_dimensions"),gi=to("image_advtab"),et=to("image_uploadtab"),_t=to("image_prepend_url"),dt=to("image_class_list"),xe=to("image_description"),Oo=to("image_title"),Do=to("image_caption"),Kt=to("image_list"),ls=to("a11y_advanced_options"),Fo=to("automatic_uploads"),zr=H=>Hs(H.options.get("images_upload_url")),Vo=H=>Ct(H.options.get("images_upload_handler")),zs=(H,ee)=>Math.max(parseInt(H,10),parseInt(ee,10)),Xa=H=>new Promise(ee=>{const ye=document.createElement("img"),Be=It=>{ye.onload=ye.onerror=null,ye.parentNode&&ye.parentNode.removeChild(ye),ee(It)};ye.onload=()=>{const It=zs(ye.width,ye.clientWidth),$o=zs(ye.height,ye.clientHeight),na={width:It,height:$o};Be(Promise.resolve(na))},ye.onerror=()=>{Be(Promise.reject(`Failed to get image dimensions for: ${H}`))};const cn=ye.style;cn.visibility="hidden",cn.position="fixed",cn.bottom=cn.left="0px",cn.width=cn.height="auto",document.body.appendChild(ye),ye.src=H}),_s=H=>(H&&(H=H.replace(/px$/,"")),H),Ss=H=>(H.length>0&&/^[0-9]+$/.test(H)&&(H+="px"),H),xs=H=>{if(H.margin){const ee=String(H.margin).split(" ");switch(ee.length){case 1:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[0],H["margin-bottom"]=H["margin-bottom"]||ee[0],H["margin-left"]=H["margin-left"]||ee[0];break;case 2:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[1],H["margin-bottom"]=H["margin-bottom"]||ee[0],H["margin-left"]=H["margin-left"]||ee[1];break;case 3:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[1],H["margin-bottom"]=H["margin-bottom"]||ee[2],H["margin-left"]=H["margin-left"]||ee[1];break;case 4:H["margin-top"]=H["margin-top"]||ee[0],H["margin-right"]=H["margin-right"]||ee[1],H["margin-bottom"]=H["margin-bottom"]||ee[2],H["margin-left"]=H["margin-left"]||ee[3]}delete H.margin}return H},Yr=(H,ee)=>{const ye=Kt(H);le(ye)?fetch(ye).then(Be=>{Be.ok&&Be.json().then(ee)}):Ne(ye)?ye(ee):ee(ye)},Ts=(H,ee,ye)=>{const Be=()=>{ye.onload=ye.onerror=null,H.selection&&(H.selection.select(ye),H.nodeChanged())};ye.onload=()=>{!ee.width&&!ee.height&&zo(H)&&H.dom.setAttribs(ye,{width:String(ye.clientWidth),height:String(ye.clientHeight)}),Be()},ye.onerror=Be},Ko=H=>new Promise((ee,ye)=>{const Be=new FileReader;Be.onload=()=>{ee(Be.result)},Be.onerror=()=>{var cn;ye((cn=Be.error)===null||cn===void 0?void 0:cn.message)},Be.readAsDataURL(H)}),Mc=H=>H.nodeName==="IMG"&&(H.hasAttribute("data-mce-object")||H.hasAttribute("data-mce-placeholder")),lo=(H,ee)=>{const ye=H.options.get;return W.isDomSafe(ee,"img",{allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")})},gs=gt.DOM,Dr=H=>H.style.marginLeft&&H.style.marginRight&&H.style.marginLeft===H.style.marginRight?_s(H.style.marginLeft):"",Pi=H=>H.style.marginTop&&H.style.marginBottom&&H.style.marginTop===H.style.marginBottom?_s(H.style.marginTop):"",qi=H=>H.style.borderWidth?_s(H.style.borderWidth):"",ts=(H,ee)=>{var ye;return H.hasAttribute(ee)&&(ye=H.getAttribute(ee))!==null&&ye!==void 0?ye:""},Zc=H=>H.parentNode!==null&&H.parentNode.nodeName==="FIGURE",Tt=(H,ee,ye)=>{ye===""||ye===null?H.removeAttribute(ee):H.setAttribute(ee,ye)},go=H=>{const ee=gs.create("figure",{class:"image"});gs.insertAfter(ee,H),ee.appendChild(H),ee.appendChild(gs.create("figcaption",{contentEditable:"true"},"Caption")),ee.contentEditable="false"},Vr=H=>{const ee=H.parentNode;Ct(ee)&&(gs.insertAfter(H,ee),gs.remove(ee))},Ur=H=>{Zc(H)?Vr(H):go(H)},Ba=(H,ee)=>{const ye=H.getAttribute("style"),Be=ee(ye!==null?ye:"");Be.length>0?(H.setAttribute("style",Be),H.setAttribute("data-mce-style",Be)):H.removeAttribute("style")},Ja=(H,ee)=>(ye,Be,cn)=>{const It=ye.style;It[Be]?(It[Be]=Ss(cn),Ba(ye,ee)):Tt(ye,Be,cn)},Qo=(H,ee)=>H.style[ee]?_s(H.style[ee]):ts(H,ee),La=(H,ee)=>{const ye=Ss(ee);H.style.marginLeft=ye,H.style.marginRight=ye},Ii=(H,ee)=>{const ye=Ss(ee);H.style.marginTop=ye,H.style.marginBottom=ye},Yo=(H,ee)=>{const ye=Ss(ee);H.style.borderWidth=ye},En=(H,ee)=>{H.style.borderStyle=ee},or=H=>{var ee;return(ee=H.style.borderStyle)!==null&&ee!==void 0?ee:""},Qa=H=>Ct(H)&&H.nodeName==="FIGURE",ll=H=>H.nodeName==="IMG",ul=H=>gs.getAttrib(H,"alt").length===0&&gs.getAttrib(H,"role")==="presentation",vs=H=>ul(H)?"":ts(H,"alt"),wr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Vs=(H,ee)=>{var ye;const Be=document.createElement("img");return Tt(Be,"style",ee.style),(Dr(Be)||ee.hspace!=="")&&La(Be,ee.hspace),(Pi(Be)||ee.vspace!=="")&&Ii(Be,ee.vspace),(qi(Be)||ee.border!=="")&&Yo(Be,ee.border),(or(Be)||ee.borderStyle!=="")&&En(Be,ee.borderStyle),H((ye=Be.getAttribute("style"))!==null&&ye!==void 0?ye:"")},xa=(H,ee)=>{const ye=document.createElement("img");if(Ge(H,{...ee,caption:!1},ye),pe(ye,ee.alt,ee.isDecorative),ee.caption){const Be=gs.create("figure",{class:"image"});return Be.appendChild(ye),Be.appendChild(gs.create("figcaption",{contentEditable:"true"},"Caption")),Be.contentEditable="false",Be}else return ye},Nc=(H,ee)=>({src:ts(ee,"src"),alt:vs(ee),title:ts(ee,"title"),width:Qo(ee,"width"),height:Qo(ee,"height"),class:ts(ee,"class"),style:H(ts(ee,"style")),caption:Zc(ee),hspace:Dr(ee),vspace:Pi(ee),border:qi(ee),borderStyle:or(ee),isDecorative:ul(ee)}),Rr=(H,ee,ye,Be,cn)=>{ye[Be]!==ee[Be]&&cn(H,Be,String(ye[Be]))},pe=(H,ee,ye)=>{if(ye){gs.setAttrib(H,"role","presentation");const Be=$e.fromDom(H);Eo(Be,"alt","")}else{if(Lt(ee)){const Be=$e.fromDom(H);yn(Be,"alt")}else{const Be=$e.fromDom(H);Eo(Be,"alt",ee)}gs.getAttrib(H,"role")==="presentation"&&gs.setAttrib(H,"role","")}},fe=(H,ee,ye)=>{(ye.alt!==ee.alt||ye.isDecorative!==ee.isDecorative)&&pe(H,ye.alt,ye.isDecorative)},Ve=(H,ee)=>(ye,Be,cn)=>{H(ye,cn),Ba(ye,ee)},Ge=(H,ee,ye)=>{const Be=Nc(H,ye);Rr(ye,Be,ee,"caption",(cn,It,$o)=>Ur(cn)),Rr(ye,Be,ee,"src",Tt),Rr(ye,Be,ee,"title",Tt),Rr(ye,Be,ee,"width",Ja("width",H)),Rr(ye,Be,ee,"height",Ja("height",H)),Rr(ye,Be,ee,"class",Tt),Rr(ye,Be,ee,"style",Ve((cn,It)=>Tt(cn,"style",It),H)),Rr(ye,Be,ee,"hspace",Ve(La,H)),Rr(ye,Be,ee,"vspace",Ve(Ii,H)),Rr(ye,Be,ee,"border",Ve(Yo,H)),Rr(ye,Be,ee,"borderStyle",Ve(En,H)),fe(ye,Be,ee)},Cn=(H,ee)=>{const ye=H.dom.styles.parse(ee),Be=xs(ye),cn=H.dom.styles.parse(H.dom.styles.serialize(Be));return H.dom.styles.serialize(cn)},Ln=H=>{const ee=H.selection.getNode(),ye=H.dom.getParent(ee,"figure.image");return ye?H.dom.select("img",ye)[0]:ee&&(ee.nodeName!=="IMG"||Mc(ee))?null:ee},Qn=(H,ee)=>{var ye;const Be=H.dom,cn=en(H.schema.getTextBlockElements(),($o,na)=>!H.schema.isValidChild(na,"figure")),It=Be.getParent(ee.parentNode,$o=>ve(cn,$o.nodeName),H.getBody());return It&&(ye=Be.split(It,ee))!==null&&ye!==void 0?ye:ee},Os=H=>{const ee=Ln(H);return ee?Nc(ye=>Cn(H,ye),ee):wr()},lt=(H,ee)=>{const ye=xa(cn=>Cn(H,cn),ee);H.dom.setAttrib(ye,"data-mce-id","__mcenew"),H.focus(),H.selection.setContent(ye.outerHTML);const Be=H.dom.select('*[data-mce-id="__mcenew"]')[0];if(H.dom.setAttrib(Be,"data-mce-id",null),Qa(Be)){const cn=Qn(H,Be);H.selection.select(cn)}else H.selection.select(Be)},Ke=(H,ee)=>{H.dom.setAttrib(ee,"src",ee.getAttribute("src"))},sr=(H,ee)=>{if(ee){const ye=H.dom.is(ee.parentNode,"figure.image")?ee.parentNode:ee;H.dom.remove(ye),H.focus(),H.nodeChanged(),H.dom.isEmpty(H.getBody())&&(H.setContent(""),H.selection.setCursorLocation())}},Cr=(H,ee)=>{const ye=Ln(H);if(ye)if(Ge(Be=>Cn(H,Be),ee,ye),Ke(H,ye),Qa(ye.parentNode)){const Be=ye.parentNode;Qn(H,Be),H.selection.select(ye.parentNode)}else H.selection.select(ye),Ts(H,ee,ye)},ga=(H,ee)=>{const ye=ee.src;return{...ee,src:lo(H,ye)?ye:""}},es=(H,ee)=>{const ye=Ln(H);if(ye){const cn={...Nc($o=>Cn(H,$o),ye),...ee},It=ga(H,cn);cn.src?Cr(H,It):sr(H,ye)}else ee.src&&lt(H,{...wr(),...ee})},Ea=(H=>(...ee)=>{if(ee.length===0)throw new Error("Can't merge zero objects");const ye={};for(let Be=0;Be<ee.length;Be++){const cn=ee[Be];for(const It in cn)Fe(cn,It)&&(ye[It]=H(ye[It],cn[It]))}return ye})((H,ee)=>Ce(H)&&Ce(ee)?Ea(H,ee):ee);var Ms=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ns=tinymce.util.Tools.resolve("tinymce.util.Tools");const us=H=>le(H.value)?H.value:"",Wr=H=>le(H.text)?H.text:le(H.title)?H.title:"",mc=(H,ee)=>{const ye=[];return ns.each(H,Be=>{const cn=Wr(Be);if(Be.menu!==void 0){const It=mc(Be.menu,ee);ye.push({text:cn,items:It})}else{const It=ee(Be);ye.push({text:cn,value:It})}}),ye},Ns=(H=us)=>ee=>ee?Je.from(ee).map(ye=>mc(ye,H)):Je.none(),dl=H=>Ns(us)(H),ei=H=>Fe(H,"items"),ds=(H,ee)=>Hn(H,ye=>ei(ye)?ds(ye.items,ee):ye.value===ee?Je.some(ye):Je.none()),rr={sanitizer:Ns,sanitize:dl,findEntry:(H,ee)=>H.bind(ye=>ds(ye,ee))},pi={makeTab:H=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},pa=H=>{const ee=rr.sanitizer(wi=>H.convertURL(wi.value||wi.url||"","src")),ye=new Promise(wi=>{Yr(H,xr=>{wi(ee(xr).map(zl=>at([[{text:"None",value:""}],zl])))})}),Be=rr.sanitize(dt(H)),cn=gi(H),It=et(H),$o=zr(H),na=Vo(H),ut=Os(H),ti=xe(H),fs=Oo(H),Gc=zo(H),ur=Do(H),uo=ls(H),yi=Fo(H),Jr=Je.some(_t(H)).filter(wi=>le(wi)&&wi.length>0);return ye.then(wi=>({image:ut,imageList:wi,classList:Be,hasAdvTab:cn,hasUploadTab:It,hasUploadUrl:$o,hasUploadHandler:na,hasDescription:ti,hasImageTitle:fs,hasDimensions:Gc,hasImageCaption:ur,prependURL:Jr,hasAccessibilityOptions:uo,automaticUploads:yi}))},ys=H=>{const ee={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ye=H.imageList.map(fs=>({name:"images",type:"listbox",label:"Image list",items:fs})),Be={name:"alt",type:"input",label:"Alternative description",enabled:!(H.hasAccessibilityOptions&&H.image.isDecorative)},cn={name:"title",type:"input",label:"Image title"},It={name:"dimensions",type:"sizeinput"},$o={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},na=H.classList.map(fs=>({name:"classes",type:"listbox",label:"Class",items:fs})),ut={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},ti=fs=>fs?{type:"grid",columns:2}:{type:"panel"};return at([[ee],ye.toArray(),H.hasAccessibilityOptions&&H.hasDescription?[$o]:[],H.hasDescription?[Be]:[],H.hasImageTitle?[cn]:[],H.hasDimensions?[It]:[],[{...ti(H.classList.isSome()&&H.hasImageCaption),items:at([na.toArray(),H.hasImageCaption?[ut]:[]])}]])},gc={makeTab:H=>({title:"General",name:"general",items:ys(H)}),makeItems:ys},So={makeTab:H=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Pc=H=>({prevImage:rr.findEntry(H.imageList,H.image.src),prevAlt:H.image.alt,open:!0}),Us=H=>({src:{value:H.src,meta:{}},images:H.src,alt:H.alt,title:H.title,dimensions:{width:H.width,height:H.height},classes:H.class,caption:H.caption,style:H.style,vspace:H.vspace,border:H.border,hspace:H.hspace,borderstyle:H.borderStyle,fileinput:[],isDecorative:H.isDecorative}),hu=(H,ee)=>({src:H.src.value,alt:(H.alt===null||H.alt.length===0)&&ee?null:H.alt,title:H.title,width:H.dimensions.width,height:H.dimensions.height,class:H.classes,style:H.style,caption:H.caption,hspace:H.hspace,vspace:H.vspace,border:H.border,borderStyle:H.borderstyle,isDecorative:H.isDecorative}),Gi=(H,ee)=>/^(?:[a-zA-Z]+:)?\/\//.test(ee)?Je.none():H.prependURL.bind(ye=>ee.substring(0,ye.length)!==ye?Je.some(ye+ee):Je.none()),Ic=(H,ee)=>{const ye=ee.getData();Gi(H,ye.src.value).each(Be=>{ee.setData({src:{value:Be,meta:ye.src.meta}})})},Mr=(H,ee,ye)=>{H.hasDescription&&le(ye.alt)&&(ee.alt=ye.alt),H.hasAccessibilityOptions&&(ee.isDecorative=ye.isDecorative||ee.isDecorative||!1),H.hasImageTitle&&le(ye.title)&&(ee.title=ye.title),H.hasDimensions&&(le(ye.width)&&(ee.dimensions.width=ye.width),le(ye.height)&&(ee.dimensions.height=ye.height)),le(ye.class)&&rr.findEntry(H.classList,ye.class).each(Be=>{ee.classes=Be.value}),H.hasImageCaption&&Zt(ye.caption)&&(ee.caption=ye.caption),H.hasAdvTab&&(le(ye.style)&&(ee.style=ye.style),le(ye.vspace)&&(ee.vspace=ye.vspace),le(ye.border)&&(ee.border=ye.border),le(ye.hspace)&&(ee.hspace=ye.hspace),le(ye.borderstyle)&&(ee.borderstyle=ye.borderstyle))},Yu=(H,ee)=>{const ye=ee.getData(),Be=ye.src.meta;if(Be!==void 0){const cn=Ea({},ye);Mr(H,cn,Be),ee.setData(cn)}},bi=(H,ee,ye,Be)=>{const cn=Be.getData(),It=cn.src.value,$o=cn.src.meta||{};!$o.width&&!$o.height&&ee.hasDimensions&&(Hs(It)?H.imageSize(It).then(na=>{ye.open&&Be.setData({dimensions:na})}).catch(na=>console.error(na)):Be.setData({dimensions:{width:"",height:""}}))},Hd=(H,ee,ye)=>{const Be=ye.getData(),cn=rr.findEntry(H.imageList,Be.src.value);ee.prevImage=cn,ye.setData({images:cn.map(It=>It.value).getOr("")})},fl=(H,ee,ye,Be)=>{Ic(ee,Be),Yu(ee,Be),bi(H,ee,ye,Be),Hd(ee,ye,Be)},zd=(H,ee,ye,Be)=>{const cn=Be.getData(),It=rr.findEntry(ee.imageList,cn.images);It.each($o=>{cn.alt===""||ye.prevImage.map(ut=>ut.text===cn.alt).getOr(!1)?$o.value===""?Be.setData({src:$o,alt:ye.prevAlt}):Be.setData({src:$o,alt:$o.text}):Be.setData({src:$o})}),ye.prevImage=It,fl(H,ee,ye,Be)},Sr=(H,ee,ye,Be)=>{const cn=Be.getData();Be.block("Uploading image"),M(cn.fileinput).fold(()=>{Be.unblock()},It=>{const $o=URL.createObjectURL(It),na=()=>{Be.unblock(),URL.revokeObjectURL($o)},ut=ti=>{Be.setData({src:{value:ti,meta:{}}}),Be.showTab("general"),fl(H,ee,ye,Be),Be.focus("src")};Ko(It).then(ti=>{const fs=H.createBlobCache(It,$o,ti);ee.automaticUploads?H.uploadImage(fs).then(Gc=>{ut(Gc.url),na()}).catch(Gc=>{na(),H.alertErr(Gc,()=>{Be.focus("fileinput")})}):(H.addToBlobCache(fs),ut(fs.blobUri()),Be.unblock())})})},pc=(H,ee,ye)=>(Be,cn)=>{cn.name==="src"?fl(H,ee,ye,Be):cn.name==="images"?zd(H,ee,ye,Be):cn.name==="alt"?ye.prevAlt=Be.getData().alt:cn.name==="fileinput"?Sr(H,ee,ye,Be):cn.name==="isDecorative"&&Be.setEnabled("alt",!Be.getData().isDecorative)},ml=H=>()=>{H.open=!1},Xu=H=>H.hasAdvTab||H.hasUploadUrl||H.hasUploadHandler?{type:"tabpanel",tabs:at([[gc.makeTab(H)],H.hasAdvTab?[pi.makeTab(H)]:[],H.hasUploadTab&&(H.hasUploadUrl||H.hasUploadHandler)?[So.makeTab(H)]:[]])}:{type:"panel",items:gc.makeItems(H)},hl=(H,ee,ye)=>Be=>{const cn=Ea(Us(ee.image),Be.getData()),It={...cn,style:Vs(ye.normalizeCss,hu(cn,!1))};H.execCommand("mceUpdateImage",!1,hu(It,ee.hasAccessibilityOptions)),H.editorUpload.uploadImagesAuto(),Be.close()},qc=H=>ee=>lo(H,ee)?Xa(H.documentBaseURI.toAbsolute(ee)).then(ye=>({width:String(ye.width),height:String(ye.height)})):Promise.resolve({width:"",height:""}),br=H=>(ee,ye,Be)=>{var cn;return H.editorUpload.blobCache.create({blob:ee,blobUri:ye,name:(cn=ee.name)===null||cn===void 0?void 0:cn.replace(/\.[^\.]+$/,""),filename:ee.name,base64:Be.split(",")[1]})},Nr=H=>ee=>{H.editorUpload.blobCache.add(ee)},vi=H=>(ee,ye)=>{H.windowManager.alert(ee,ye)},Hl=H=>ee=>Cn(H,ee),gu=H=>ee=>H.dom.parseStyle(ee),Y=H=>(ee,ye)=>H.dom.serializeStyle(ee,ye),he=H=>ee=>Ms(H).upload([ee],!1).then(ye=>{var Be;return ye.length===0?Promise.reject("Failed to upload image"):ye[0].status===!1?Promise.reject((Be=ye[0].error)===null||Be===void 0?void 0:Be.message):ye[0]}),ke=H=>{const ee={imageSize:qc(H),addToBlobCache:Nr(H),createBlobCache:br(H),alertErr:vi(H),normalizeCss:Hl(H),parseStyle:gu(H),serializeStyle:Y(H),uploadImage:he(H)};return{open:()=>{pa(H).then(Be=>{const cn=Pc(Be);return{title:"Insert/Edit Image",size:"normal",body:Xu(Be),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Us(Be.image),onSubmit:hl(H,Be,ee),onChange:pc(ee,Be,cn),onClose:ml(cn)}}).then(H.windowManager.open)}}},Ye=H=>{H.addCommand("mceImage",ke(H).open),H.addCommand("mceUpdateImage",(ee,ye)=>{H.undoManager.transact(()=>es(H,ye))})},kt=H=>{const ee=H.attr("class");return Ct(ee)&&/\bimage\b/.test(ee)},nn=H=>ee=>{let ye=ee.length;const Be=cn=>{cn.attr("contenteditable",H?"true":null)};for(;ye--;){const cn=ee[ye];kt(cn)&&(cn.attr("contenteditable",H?"false":null),ns.each(cn.getAll("figcaption"),Be))}},$t=H=>{H.on("PreInit",()=>{H.parser.addNodeFilter("figure",nn(!0)),H.serializer.addNodeFilter("figure",nn(!1))})},Nn=H=>ee=>{const ye=()=>{ee.setEnabled(H.selection.isEditable())};return H.on("NodeChange",ye),ye(),()=>{H.off("NodeChange",ye)}},Vn=H=>{H.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ke(H).open,onSetup:ee=>{ee.setActive(Ct(Ln(H)));const ye=H.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",ee.setActive).unbind,Be=Nn(H)(ee);return()=>{ye(),Be()}}}),H.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ke(H).open,onSetup:Nn(H)}),H.ui.registry.addContextMenu("image",{update:ee=>H.selection.isEditable()&&(Qa(ee)||ll(ee)&&!Mc(ee))?["image"]:[]})};var ko=()=>{p.add("image",H=>{To(H),$t(H),Vn(H),Ye(H)})};ko()}()),XJ}var QJ;function Dse(){return QJ||(QJ=1,Ose()),YJ}Dse();var eQ={},tQ={},nQ;function Rse(){return nQ||(nQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),w=tinymce.util.Tools.resolve("tinymce.util.Tools");const E=at=>it=>it.options.get(at),N=at=>{const it=at.options.register;it("allow_html_in_named_anchor",{processor:"boolean",default:!1})},V=E("allow_html_in_named_anchor"),K="a:not([href])",j=at=>!at,le=at=>at.getAttribute("id")||at.getAttribute("name")||"",ge=at=>at.nodeName.toLowerCase()==="a",Ce=at=>ge(at)&&!at.getAttribute("href")&&le(at)!=="",Xe=at=>Ce(at)&&!at.firstChild,Lt=at=>{const it=at.dom;g(it).walk(at.selection.getRng(),M=>{w.each(M,Hn=>{Xe(Hn)&&it.remove(Hn,!1)})})},Zt=at=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(at),Pt=at=>at.dom.getParent(at.selection.getStart(),K),Ct=at=>{const it=Pt(at);return it?le(it):""},Ne=(at,it)=>{at.undoManager.transact(()=>{V(at)||at.selection.collapse(!0),at.selection.isCollapsed()?at.insertContent(at.dom.createHTML("a",{id:it})):(Lt(at),at.formatter.remove("namedAnchor",void 0,void 0,!0),at.formatter.apply("namedAnchor",{value:it}),at.addVisual())})},ln=(at,it,M)=>{M.removeAttribute("name"),M.id=it,at.addVisual(),at.undoManager.add()},xt=(at,it)=>{const M=Pt(at);M?ln(at,it,M):Ne(at,it),at.focus()},de=(at,it)=>Zt(it)?(xt(at,it),!0):(at.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Je=at=>{const it=Ct(at);at.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:it},onSubmit:M=>{de(at,M.getData().id)&&M.close()}})},Dn=at=>{at.addCommand("mceAnchor",()=>{Je(at)})},Gt=at=>j(at.attr("href"))&&!j(at.attr("id")||at.attr("name")),re=at=>Gt(at)&&!at.firstChild,Xt=at=>it=>{for(let M=0;M<it.length;M++){const Hn=it[M];re(Hn)&&Hn.attr("contenteditable",at)}},In=at=>{at.on("PreInit",()=>{at.parser.addNodeFilter("a",Xt("false")),at.serializer.addNodeFilter("a",Xt(null))})},en=at=>{at.formatter.register("namedAnchor",{inline:"a",selector:K,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(it,M,Hn)=>Ce(it)})},Fe=at=>it=>{const M=()=>{it.setEnabled(at.selection.isEditable())};return at.on("NodeChange",M),M(),()=>{at.off("NodeChange",M)}},ve=at=>{const it=()=>at.execCommand("mceAnchor");at.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:it,onSetup:M=>{const Hn=at.selection.selectorChangedWithUnbind("a:not([href])",M.setActive).unbind,wt=Fe(at)(M);return()=>{Hn(),wt()}}}),at.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:it,onSetup:Fe(at)})};var oo=()=>{p.add("anchor",at=>{N(at),In(at),Dn(at),ve(at),at.on("PreInit",()=>{en(at)})})};oo()}()),tQ}var oQ;function Mse(){return oQ||(oQ=1,Rse()),eQ}Mse();var sQ={},rQ={},aQ;function Nse(){return aQ||(aQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=(et=>_t=>et===_t)(null),E=et=>et,N=(et,_t)=>{const dt=et.length,xe=new Array(dt);for(let Oo=0;Oo<dt;Oo++){const Do=et[Oo];xe[Oo]=_t(Do,Oo)}return xe},K={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},j={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},le=[new RegExp(K.aletter),new RegExp(K.midnumlet),new RegExp(K.midletter),new RegExp(K.midnum),new RegExp(K.numeric),new RegExp(K.cr),new RegExp(K.lf),new RegExp(K.newline),new RegExp(K.extend),new RegExp(K.format),new RegExp(K.katakana),new RegExp(K.extendnumlet),new RegExp("@")],ge="",Ce=new RegExp("^"+K.punctuation+"$"),Xe=/^\s+$/,Lt=le,Zt=j.OTHER,Pt=et=>{let _t=Zt;const dt=Lt.length;for(let xe=0;xe<dt;++xe){const Oo=Lt[xe];if(Oo&&Oo.test(et)){_t=xe;break}}return _t},Ct=et=>{const _t={};return dt=>{if(_t[dt])return _t[dt];{const xe=et(dt);return _t[dt]=xe,xe}}},Ne=et=>{const _t=Ct(Pt);return N(et,_t)},ln=(et,_t)=>{const dt=et[_t],xe=et[_t+1];if(_t<0||_t>et.length-1&&_t!==0||dt===j.ALETTER&&xe===j.ALETTER)return!1;const Oo=et[_t+2];if(dt===j.ALETTER&&(xe===j.MIDLETTER||xe===j.MIDNUMLET||xe===j.AT)&&Oo===j.ALETTER)return!1;const Do=et[_t-1];return(dt===j.MIDLETTER||dt===j.MIDNUMLET||xe===j.AT)&&xe===j.ALETTER&&Do===j.ALETTER||(dt===j.NUMERIC||dt===j.ALETTER)&&(xe===j.NUMERIC||xe===j.ALETTER)||(dt===j.MIDNUM||dt===j.MIDNUMLET)&&xe===j.NUMERIC&&Do===j.NUMERIC||dt===j.NUMERIC&&(xe===j.MIDNUM||xe===j.MIDNUMLET)&&Oo===j.NUMERIC||(dt===j.EXTEND||dt===j.FORMAT)&&(xe===j.ALETTER||xe===j.NUMERIC||xe===j.KATAKANA||xe===j.EXTEND||xe===j.FORMAT)||(xe===j.EXTEND||xe===j.FORMAT&&(Oo===j.ALETTER||Oo===j.NUMERIC||Oo===j.KATAKANA||Oo===j.EXTEND||Oo===j.FORMAT))&&(dt===j.ALETTER||dt===j.NUMERIC||dt===j.KATAKANA||dt===j.EXTEND||dt===j.FORMAT)||dt===j.CR&&xe===j.LF?!1:dt===j.NEWLINE||dt===j.CR||dt===j.LF||xe===j.NEWLINE||xe===j.CR||xe===j.LF?!0:!(dt===j.KATAKANA&&xe===j.KATAKANA||xe===j.EXTENDNUMLET&&(dt===j.ALETTER||dt===j.NUMERIC||dt===j.KATAKANA||dt===j.EXTENDNUMLET)||dt===j.EXTENDNUMLET&&(xe===j.ALETTER||xe===j.NUMERIC||xe===j.KATAKANA)||dt===j.AT)},xt=ge,de=Xe,Je=Ce,Dn=et=>et==="http"||et==="https",Gt=(et,_t)=>{let dt;for(dt=_t;dt<et.length&&!de.test(et[dt]);dt++);return dt},re=(et,_t)=>{const dt=Gt(et,_t+1);return et.slice(_t+1,dt).join(xt).substr(0,3)==="://"?dt:_t},Xt=(et,_t,dt,xe)=>{const Oo=[],Do=[];let Kt=[];for(let ls=0;ls<dt.length;++ls)if(Kt.push(et[ls]),ln(dt,ls)){const Fo=_t[ls];if((xe.includeWhitespace||!de.test(Fo))&&(xe.includePunctuation||!Je.test(Fo))){const zr=ls-Kt.length+1,Vo=ls+1,zs=_t.slice(zr,Vo).join(xt);if(Dn(zs)){const Xa=re(_t,ls),_s=et.slice(Vo,Xa);Array.prototype.push.apply(Kt,_s),ls=Xa}_t[ls+1]==="."&&/^([a-zA-Z]\.)+$/.test(zs+".")?(Kt.push(et[ls+1]),Do.push({start:zr,end:Vo+1})):Do.push({start:zr,end:Vo}),Oo.push(Kt)}Kt=[]}return{words:Oo,indices:Do}},In=()=>({includeWhitespace:!1,includePunctuation:!1}),en=(et,_t,dt)=>{dt={...In(),...dt};const xe=N(et,_t),Oo=Ne(xe);return Xt(et,xe,Oo,dt)},ve=(et,_t,dt)=>en(et,_t,dt).words,oo=et=>et.replace(/\uFEFF/g,"");var at=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const it=(et,_t)=>{const dt=_t.getBlockElements(),xe=_t.getVoidElements(),Oo=zr=>dt[zr.nodeName]||xe[zr.nodeName],Do=[];let Kt="";const ls=new at(et,et);let Fo;for(;Fo=ls.next();)Fo.nodeType===3?Kt+=oo(Fo.data):Oo(Fo)&&Kt.length&&(Do.push(Kt),Kt="");return Kt.length&&Do.push(Kt),Do},M=et=>et.replace(/\u200B/g,""),Hn=et=>et.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,wt=(et,_t)=>{const dt=M(it(et,_t).join(`
`));return ve(dt.split(""),E).length},Eo=(et,_t)=>{const dt=it(et,_t).join("");return Hn(dt)},yn=(et,_t)=>{const dt=it(et,_t).join("").replace(/\s/g,"");return Hn(dt)},Ae=(et,_t)=>()=>_t(et.getBody(),et.schema),yt=(et,_t)=>()=>_t(et.selection.getRng().cloneContents(),et.schema),Mn=et=>Ae(et,wt),fn=et=>({body:{getWordCount:Mn(et),getCharacterCount:Ae(et,Eo),getCharacterCountWithoutSpaces:Ae(et,yn)},selection:{getWordCount:yt(et,wt),getCharacterCount:yt(et,Eo),getCharacterCountWithoutSpaces:yt(et,yn)},getCount:Mn(et)}),io=(et,_t)=>{et.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(_t.body.getWordCount()),String(_t.selection.getWordCount())],["Characters (no spaces)",String(_t.body.getCharacterCountWithoutSpaces()),String(_t.selection.getCharacterCountWithoutSpaces())],["Characters",String(_t.body.getCharacterCount()),String(_t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},$e=(et,_t)=>{et.addCommand("mceWordCount",()=>io(et,_t))},gt=(et,_t)=>{let dt=null;return{cancel:()=>{w(dt)||(clearTimeout(dt),dt=null)},throttle:(...Do)=>{w(dt)&&(dt=setTimeout(()=>{dt=null,et.apply(null,Do)},_t))}}};var W=tinymce.util.Tools.resolve("tinymce.util.Delay");const Hs=(et,_t)=>{et.dispatch("wordCountUpdate",{wordCount:{words:_t.body.getWordCount(),characters:_t.body.getCharacterCount(),charactersWithoutSpaces:_t.body.getCharacterCountWithoutSpaces()}})},to=(et,_t)=>{Hs(et,_t)},To=(et,_t,dt)=>{const xe=gt(()=>to(et,_t),dt);et.on("init",()=>{to(et,_t),W.setEditorTimeout(et,()=>{et.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",xe.throttle)},0),et.on("remove",xe.cancel)})},zo=et=>{const _t=()=>et.execCommand("mceWordCount");et.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:_t,context:"any"}),et.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:_t,context:"any"})};var gi=(et=300)=>{p.add("wordcount",_t=>{const dt=fn(_t);return $e(_t,dt),zo(_t),To(_t,dt,et),dt})};gi()}()),rQ}var iQ;function Pse(){return iQ||(iQ=1,Nse()),sQ}Pse();var cQ={},lQ={},uQ;function Ise(){return uQ||(uQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(pe,fe,Ve)=>{var Ge;return Ve(pe,fe.prototype)?!0:((Ge=pe.constructor)===null||Ge===void 0?void 0:Ge.name)===fe.name},w=pe=>{const fe=typeof pe;return pe===null?"null":fe==="object"&&Array.isArray(pe)?"array":fe==="object"&&g(pe,String,(Ve,Ge)=>Ge.isPrototypeOf(Ve))?"string":fe},E=pe=>fe=>w(fe)===pe,N=E("string"),V=E("object"),K=E("array"),j=pe=>pe==null,le=pe=>!j(pe);class ge{constructor(fe,Ve){this.tag=fe,this.value=Ve}static some(fe){return new ge(!0,fe)}static none(){return ge.singletonNone}fold(fe,Ve){return this.tag?Ve(this.value):fe()}isSome(){return this.tag}isNone(){return!this.tag}map(fe){return this.tag?ge.some(fe(this.value)):ge.none()}bind(fe){return this.tag?fe(this.value):ge.none()}exists(fe){return this.tag&&fe(this.value)}forall(fe){return!this.tag||fe(this.value)}filter(fe){return!this.tag||fe(this.value)?this:ge.none()}getOr(fe){return this.tag?this.value:fe}or(fe){return this.tag?this:fe}getOrThunk(fe){return this.tag?this.value:fe()}orThunk(fe){return this.tag?this:fe()}getOrDie(fe){if(this.tag)return this.value;throw new Error(fe??"Called getOrDie on None")}static from(fe){return le(fe)?ge.some(fe):ge.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fe){this.tag&&fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ge.singletonNone=new ge(!1);const Ce=Array.prototype.push,Xe=(pe,fe)=>{for(let Ve=0,Ge=pe.length;Ve<Ge;Ve++){const Cn=pe[Ve];fe(Cn,Ve)}},Lt=pe=>{const fe=[];for(let Ve=0,Ge=pe.length;Ve<Ge;++Ve){if(!K(pe[Ve]))throw new Error("Arr.flatten item "+Ve+" was not an array, input: "+pe);Ce.apply(fe,pe[Ve])}return fe},Zt=pe=>{let fe=pe;return{get:()=>fe,set:Cn=>{fe=Cn}}},Pt=Object.keys,Ct=Object.hasOwnProperty,Ne=(pe,fe)=>{const Ve=Pt(pe);for(let Ge=0,Cn=Ve.length;Ge<Cn;Ge++){const Ln=Ve[Ge],Qn=pe[Ln];fe(Qn,Ln)}},ln=(pe,fe)=>xt(pe,fe)?ge.from(pe[fe]):ge.none(),xt=(pe,fe)=>Ct.call(pe,fe),de=pe=>fe=>fe.options.get(pe),Je=pe=>{const fe=pe.options.register;fe("audio_template_callback",{processor:"function"}),fe("video_template_callback",{processor:"function"}),fe("iframe_template_callback",{processor:"function"}),fe("media_live_embeds",{processor:"boolean",default:!0}),fe("media_filter_html",{processor:"boolean",default:!0}),fe("media_url_resolver",{processor:"function"}),fe("media_alt_source",{processor:"boolean",default:!0}),fe("media_poster",{processor:"boolean",default:!0}),fe("media_dimensions",{processor:"boolean",default:!0})},Dn=de("audio_template_callback"),Gt=de("video_template_callback"),re=de("iframe_template_callback"),Xt=de("media_live_embeds"),In=de("media_filter_html"),en=de("media_url_resolver"),Fe=de("media_alt_source"),ve=de("media_poster"),oo=de("media_dimensions");var at=tinymce.util.Tools.resolve("tinymce.util.Tools"),it=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Hn=it.DOM,wt=pe=>pe.replace(/px$/,""),Eo=pe=>{const fe=pe.attr("style"),Ve=fe?Hn.parseStyle(fe):{};return{type:"ephox-embed-iri",source:pe.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:ln(Ve,"max-width").map(wt).getOr(""),height:ln(Ve,"max-height").map(wt).getOr("")}},yn=(pe,fe)=>{let Ve={};const Cn=M({validate:!1,forced_root_block:!1},fe).parse(pe);for(let Ln=Cn;Ln;Ln=Ln.walk())if(Ln.type===1){const Qn=Ln.name;if(Ln.attr("data-ephox-embed-iri")){Ve=Eo(Ln);break}else!Ve.source&&Qn==="param"&&(Ve.source=Ln.attr("movie")),(Qn==="iframe"||Qn==="object"||Qn==="embed"||Qn==="video"||Qn==="audio")&&(Ve.type||(Ve.type=Qn),Ve=at.extend(Ln.attributes.map,Ve)),Qn==="source"&&(Ve.source?Ve.altsource||(Ve.altsource=Ln.attr("src")):Ve.source=Ln.attr("src")),Qn==="img"&&!Ve.poster&&(Ve.poster=Ln.attr("src"))}return Ve.source=Ve.source||Ve.src||"",Ve.altsource=Ve.altsource||"",Ve.poster=Ve.poster||"",Ve},Ae=pe=>{var fe;const Ve={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ge=(fe=pe.toLowerCase().split(".").pop())!==null&&fe!==void 0?fe:"";return ln(Ve,Ge).getOr("")};var yt=tinymce.util.Tools.resolve("tinymce.html.Node"),Mn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const fn=(pe,fe={})=>M({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...fe},pe),io=it.DOM,$e=pe=>/^[0-9.]+$/.test(pe)?pe+"px":pe,gt=(pe,fe)=>{const Ve=fe.attr("style"),Ge=Ve?io.parseStyle(Ve):{};le(pe.width)&&(Ge["max-width"]=$e(pe.width)),le(pe.height)&&(Ge["max-height"]=$e(pe.height)),fe.attr("style",io.serializeStyle(Ge))},W=["source","altsource"],Hs=(pe,fe,Ve,Ge)=>{let Cn=0,Ln=0;const Qn=fn(Ge);Qn.addNodeFilter("source",lt=>Cn=lt.length);const Os=Qn.parse(pe);for(let lt=Os;lt;lt=lt.walk())if(lt.type===1){const Ke=lt.name;if(lt.attr("data-ephox-embed-iri")){gt(fe,lt);break}else{switch(Ke){case"video":case"object":case"embed":case"img":case"iframe":fe.height!==void 0&&fe.width!==void 0&&(lt.attr("width",fe.width),lt.attr("height",fe.height));break}if(Ve)switch(Ke){case"video":lt.attr("poster",fe.poster),lt.attr("src",null);for(let Cr=Cn;Cr<2;Cr++)if(fe[W[Cr]]){const ga=new yt("source",1);ga.attr("src",fe[W[Cr]]),ga.attr("type",fe[W[Cr]+"mime"]||null),lt.append(ga)}break;case"iframe":lt.attr("src",fe.source);break;case"object":const sr=lt.getAll("img").length>0;if(fe.poster&&!sr){lt.attr("src",fe.poster);const Cr=new yt("img",1);Cr.attr("src",fe.poster),Cr.attr("width",fe.width),Cr.attr("height",fe.height),lt.append(Cr)}break;case"source":if(Ln<2&&(lt.attr("src",fe[W[Ln]]),lt.attr("type",fe[W[Ln]+"mime"]||null),!fe[W[Ln]])){lt.remove();continue}Ln++;break;case"img":fe.poster||lt.remove();break}}}return Mn({},Ge).serialize(Os)},to=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],To=pe=>{const fe=pe.match(/^(https?:\/\/|www\.)(.+)$/i);return fe&&fe.length>1?fe[1]==="www."?"https://":fe[1]:"https://"},zo=(pe,fe)=>{const Ve=To(fe),Ge=pe.regex.exec(fe);let Cn=Ve+pe.url;if(le(Ge))for(let Ln=0;Ln<Ge.length;Ln++)Cn=Cn.replace("$"+Ln,()=>Ge[Ln]?Ge[Ln]:"");return Cn.replace(/\?$/,"")},gi=pe=>{const fe=to.filter(Ve=>Ve.regex.test(pe));return fe.length>0?at.extend({},fe[0],{url:zo(fe[0],pe)}):null},et=(pe,fe)=>{if(fe)return fe(pe);{const Ve=pe.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+pe.source+'" width="'+pe.width+'" height="'+pe.height+'"'+Ve+"></iframe>"}},_t=pe=>{let fe='<object data="'+pe.source+'" width="'+pe.width+'" height="'+pe.height+'" type="application/x-shockwave-flash">';return pe.poster&&(fe+='<img src="'+pe.poster+'" width="'+pe.width+'" height="'+pe.height+'" />'),fe+="</object>",fe},dt=(pe,fe)=>fe?fe(pe):'<audio controls="controls" src="'+pe.source+'">'+(pe.altsource?`
<source src="`+pe.altsource+'"'+(pe.altsourcemime?' type="'+pe.altsourcemime+'"':"")+` />
`:"")+"</audio>",xe=(pe,fe)=>fe?fe(pe):'<video width="'+pe.width+'" height="'+pe.height+'"'+(pe.poster?' poster="'+pe.poster+'"':"")+` controls="controls">
<source src="`+pe.source+'"'+(pe.sourcemime?' type="'+pe.sourcemime+'"':"")+` />
`+(pe.altsource?'<source src="'+pe.altsource+'"'+(pe.altsourcemime?' type="'+pe.altsourcemime+'"':"")+` />
`:"")+"</video>",Oo=(pe,fe)=>{var Ve;const Ge=at.extend({},fe);if(!Ge.source&&(at.extend(Ge,yn((Ve=Ge.embed)!==null&&Ve!==void 0?Ve:"",pe.schema)),!Ge.source))return"";Ge.altsource||(Ge.altsource=""),Ge.poster||(Ge.poster=""),Ge.source=pe.convertURL(Ge.source,"source"),Ge.altsource=pe.convertURL(Ge.altsource,"source"),Ge.sourcemime=Ae(Ge.source),Ge.altsourcemime=Ae(Ge.altsource),Ge.poster=pe.convertURL(Ge.poster,"poster");const Cn=gi(Ge.source);if(Cn&&(Ge.source=Cn.url,Ge.type=Cn.type,Ge.allowfullscreen=Cn.allowFullscreen,Ge.width=Ge.width||String(Cn.w),Ge.height=Ge.height||String(Cn.h)),Ge.embed)return Hs(Ge.embed,Ge,!0,pe.schema);{const Ln=Dn(pe),Qn=Gt(pe),Os=re(pe);return Ge.width=Ge.width||"300",Ge.height=Ge.height||"150",at.each(Ge,(lt,Ke)=>{Ge[Ke]=pe.dom.encode(""+lt)}),Ge.type==="iframe"?et(Ge,Os):Ge.sourcemime==="application/x-shockwave-flash"?_t(Ge):Ge.sourcemime.indexOf("audio")!==-1?dt(Ge,Ln):xe(Ge,Qn)}},Do=pe=>pe.hasAttribute("data-mce-object")||pe.hasAttribute("data-ephox-embed-iri"),Kt=pe=>{pe.on("mousedown",fe=>{const Ve=pe.dom.getParent(fe.target,".mce-preview-object");Ve&&pe.dom.getAttrib(Ve,"data-mce-selected")==="2"&&fe.stopImmediatePropagation()}),pe.on("click keyup touchend",()=>{const fe=pe.selection.getNode();fe&&pe.dom.hasClass(fe,"mce-preview-object")&&pe.dom.getAttrib(fe,"data-mce-selected")&&fe.setAttribute("data-mce-selected","2")}),pe.on("ObjectResized",fe=>{const Ve=fe.target;if(Ve.getAttribute("data-mce-object")){let Ge=Ve.getAttribute("data-mce-html");Ge&&(Ge=unescape(Ge),Ve.setAttribute("data-mce-html",escape(Hs(Ge,{width:String(fe.width),height:String(fe.height)},!1,pe.schema))))}})},ls={},Fo=(pe,fe,Ve)=>new Promise((Ge,Cn)=>{const Ln=Qn=>(Qn.html&&(ls[pe.source]=Qn),Ge({url:pe.source,html:Qn.html?Qn.html:fe(pe)}));ls[pe.source]?Ln(ls[pe.source]):Ve({url:pe.source}).then(Ln).catch(Cn)}),zr=(pe,fe)=>Promise.resolve({html:fe(pe),url:pe.source}),Vo=pe=>fe=>Oo(pe,fe),zs=(pe,fe)=>{const Ve=en(pe);return Ve?Fo(fe,Vo(pe),Ve):zr(fe,Vo(pe))},Xa=pe=>xt(ls,pe),_s=(pe,fe)=>ln(fe,pe).bind(Ve=>ln(Ve,"meta")),Ss=(pe,fe,Ve)=>Ge=>{const Cn=()=>ln(pe,Ge),Ln=()=>ln(fe,Ge),Qn=Ke=>ln(Ke,"value").bind(sr=>sr.length>0?ge.some(sr):ge.none()),Os=()=>Cn().bind(Ke=>V(Ke)?Qn(Ke).orThunk(Ln):Ln().orThunk(()=>ge.from(Ke))),lt=()=>Ln().orThunk(()=>Cn().bind(Ke=>V(Ke)?Qn(Ke):ge.from(Ke)));return{[Ge]:(Ge===Ve?Os():lt()).getOr("")}},xs=(pe,fe)=>{const Ve={};return ln(pe,"dimensions").each(Ge=>{Xe(["width","height"],Cn=>{ln(fe,Cn).orThunk(()=>ln(Ge,Cn)).each(Ln=>Ve[Cn]=Ln)})}),Ve},Yr=(pe,fe)=>{const Ve=fe&&fe!=="dimensions"?_s(fe,pe).getOr({}):{},Ge=Ss(pe,Ve,fe);return{...Ge("source"),...Ge("altsource"),...Ge("poster"),...Ge("embed"),...xs(pe,Ve)}},Ts=pe=>{const fe={...pe,source:{value:ln(pe,"source").getOr("")},altsource:{value:ln(pe,"altsource").getOr("")},poster:{value:ln(pe,"poster").getOr("")}};return Xe(["width","height"],Ve=>{ln(pe,Ve).each(Ge=>{const Cn=fe.dimensions||{};Cn[Ve]=Ge,fe.dimensions=Cn})}),fe},Ko=pe=>fe=>{const Ve=fe&&fe.msg?"Media embed handler error: "+fe.msg:"Media embed handler threw unknown error.";pe.notificationManager.open({type:"error",text:Ve})},Mc=pe=>{const fe=pe.selection.getNode(),Ve=Do(fe)?pe.serializer.serialize(fe,{selection:!0}):"",Ge=yn(Ve,pe.schema),Ln=(()=>{if(Pi(Ge.source,Ge.type)){const Qn=pe.dom.getRect(fe);return{width:Qn.w.toString().replace(/px$/,""),height:Qn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Ve,...Ge,...Ln}},lo=(pe,fe)=>Ve=>{if(N(Ve.url)&&Ve.url.trim().length>0){const Ge=Ve.html,Ln={...yn(Ge,fe.schema),source:Ve.url,embed:Ge};pe.setData(Ts(Ln))}},gs=(pe,fe)=>{const Ve=pe.dom.select("*[data-mce-object]");for(let Ge=0;Ge<fe.length;Ge++)for(let Cn=Ve.length-1;Cn>=0;Cn--)fe[Ge]===Ve[Cn]&&Ve.splice(Cn,1);pe.selection.select(Ve[0])},Dr=(pe,fe)=>{const Ve=pe.dom.select("*[data-mce-object]");pe.insertContent(fe),gs(pe,Ve),pe.nodeChanged()},Pi=(pe,fe)=>le(fe)&&fe==="ephox-embed-iri"&&le(gi(pe)),qi=(pe,fe)=>((Ge,Cn)=>Ge.width!==Cn.width||Ge.height!==Cn.height)(pe,fe)&&Pi(fe.source,pe.type),ts=(pe,fe,Ve)=>{var Ge;fe.embed=qi(pe,fe)&&oo(Ve)?Oo(Ve,{...fe,embed:""}):Hs((Ge=fe.embed)!==null&&Ge!==void 0?Ge:"",fe,!1,Ve.schema),fe.embed&&(pe.source===fe.source||Xa(fe.source))?Dr(Ve,fe.embed):zs(Ve,fe).then(Cn=>{Dr(Ve,Cn.html)}).catch(Ko(Ve))},Zc=pe=>{const fe=Mc(pe),Ve=Zt(fe),Ge=Ts(fe),Cn=(Ms,ns)=>{const us=Yr(ns.getData(),"source");Ms.source!==us.source&&(lo(Ea,pe)({url:us.source,html:""}),zs(pe,us).then(lo(Ea,pe)).catch(Ko(pe)))},Ln=Ms=>{var ns;const us=Yr(Ms.getData()),Wr=yn((ns=us.embed)!==null&&ns!==void 0?ns:"",pe.schema);Ms.setData(Ts(Wr))},Qn=(Ms,ns,us)=>{const Wr=Yr(Ms.getData(),ns),mc=qi(us,Wr)&&oo(pe)?{...Wr,embed:""}:Wr,Ns=Oo(pe,mc);Ms.setData(Ts({...mc,embed:Ns}))},Os=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],lt=oo(pe)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Ke={title:"General",name:"general",items:Lt([Os,lt])},Cr={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},ga=[];Fe(pe)&&ga.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ve(pe)&&ga.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const es={title:"Advanced",name:"advanced",items:ga},jc=[Ke,Cr];ga.length>0&&jc.push(es);const Xr={type:"tabpanel",tabs:jc},Ea=pe.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Xr,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Ms=>{const ns=Yr(Ms.getData());ts(Ve.get(),ns,pe),Ms.close()},onChange:(Ms,ns)=>{switch(ns.name){case"source":Cn(Ve.get(),Ms);break;case"embed":Ln(Ms);break;case"dimensions":case"altsource":case"poster":Qn(Ms,ns.name,Ve.get());break}Ve.set(Yr(Ms.getData()))},initialData:Ge})},Tt=pe=>({showDialog:()=>{Zc(pe)}}),go=pe=>{const fe=()=>{Zc(pe)};pe.addCommand("mceMedia",fe)},Vr=(pe,fe,Ve)=>pe.length>=fe.length&&pe.substr(Ve,Ve+fe.length)===fe,Ur=(pe,fe)=>Vr(pe,fe,0);var Ba=tinymce.util.Tools.resolve("tinymce.Env");const Ja=pe=>{const fe=pe.name;return fe==="iframe"||fe==="video"||fe==="audio"},Qo=(pe,fe,Ve,Ge=null)=>{const Cn=pe.attr(Ve);return le(Cn)?Cn:xt(fe,Ve)?null:Ge},La=(pe,fe,Ve)=>{const Ge=fe.name==="img"||pe.name==="video",Cn=Ge?"300":null,Ln=pe.name==="audio"?"30":"150",Qn=Ge?Ln:null;fe.attr({width:Qo(pe,Ve,"width",Cn),height:Qo(pe,Ve,"height",Qn)})},Ii=(pe,fe,Ve,Ge)=>{const Cn=fn(pe.schema).parse(Ge,{context:fe});for(;Cn.firstChild;)Ve.append(Cn.firstChild)},Yo=(pe,fe)=>{const Ve=fe.name,Ge=new yt("img",1);return or(pe,fe,Ge),La(fe,Ge,{}),Ge.attr({style:fe.attr("style"),src:Ba.transparentSrc,"data-mce-object":Ve,class:"mce-object mce-object-"+Ve}),Ge},En=(pe,fe)=>{var Ve;const Ge=fe.name,Cn=new yt("span",1);Cn.attr({contentEditable:"false",style:fe.attr("style"),"data-mce-object":Ge,class:"mce-preview-object mce-object-"+Ge}),or(pe,fe,Cn);const Ln=pe.dom.parseStyle((Ve=fe.attr("style"))!==null&&Ve!==void 0?Ve:""),Qn=new yt(Ge,1);if(La(fe,Qn,Ln),Qn.attr({src:fe.attr("src"),style:fe.attr("style"),class:fe.attr("class")}),Ge==="iframe")Qn.attr({allowfullscreen:fe.attr("allowfullscreen"),frameborder:"0",sandbox:fe.attr("sandbox"),referrerpolicy:fe.attr("referrerpolicy")});else{Xe(["controls","crossorigin","currentTime","loop","muted","poster","preload"],sr=>{Qn.attr(sr,fe.attr(sr))});const Ke=Cn.attr("data-mce-html");le(Ke)&&Ii(pe,Ge,Qn,unescape(Ke))}const Os=new yt("span",1);return Os.attr("class","mce-shim"),Cn.append(Qn),Cn.append(Os),Cn},or=(pe,fe,Ve)=>{var Ge;const Cn=(Ge=fe.attributes)!==null&&Ge!==void 0?Ge:[];let Ln=Cn.length;for(;Ln--;){const Ke=Cn[Ln].name;let sr=Cn[Ln].value;Ke!=="width"&&Ke!=="height"&&Ke!=="style"&&!Ur(Ke,"data-mce-")&&((Ke==="data"||Ke==="src")&&(sr=pe.convertURL(sr,Ke)),Ve.attr("data-mce-p-"+Ke,sr))}const Qn=Mn({inner:!0},pe.schema),Os=new yt("div",1);Xe(fe.children(),Ke=>Os.append(Ke));const lt=Qn.serialize(Os);lt&&(Ve.attr("data-mce-html",escape(lt)),Ve.empty())},Qa=pe=>{const fe=pe.attr("class");return N(fe)&&/\btiny-pageembed\b/.test(fe)},ll=pe=>{let fe=pe;for(;fe=fe.parent;)if(fe.attr("data-ephox-embed-iri")||Qa(fe))return!0;return!1},ul=pe=>fe=>{let Ve=fe.length,Ge;for(;Ve--;)Ge=fe[Ve],Ge.parent&&(Ge.parent.attr("data-mce-object")||(Ja(Ge)&&Xt(pe)?ll(Ge)||Ge.replace(En(pe,Ge)):ll(Ge)||Ge.replace(Yo(pe,Ge))))},vs=(pe,fe,Ve)=>{const Ge=pe.options.get,Cn=Ge("xss_sanitization"),Ln=In(pe);return fn(pe.schema,{sanitize:Cn,validate:Ln}).parse(Ve,{context:fe})},wr=pe=>{pe.on("PreInit",()=>{const{schema:fe,serializer:Ve,parser:Ge}=pe,Cn=fe.getBoolAttrs();Xe("webkitallowfullscreen mozallowfullscreen".split(" "),Ln=>{Cn[Ln]={}}),Ne({embed:["wmode"]},(Ln,Qn)=>{const Os=fe.getElementRule(Qn);Os&&Xe(Ln,lt=>{Os.attributes[lt]={},Os.attributesOrder.push(lt)})}),Ge.addNodeFilter("iframe,video,audio,object,embed",ul(pe)),Ve.addAttributeFilter("data-mce-object",(Ln,Qn)=>{var Os;let lt=Ln.length;for(;lt--;){const Ke=Ln[lt];if(!Ke.parent)continue;const sr=Ke.attr(Qn),Cr=new yt(sr,1);if(sr!=="audio"){const Xr=Ke.attr("class");Xr&&Xr.indexOf("mce-preview-object")!==-1&&Ke.firstChild?Cr.attr({width:Ke.firstChild.attr("width"),height:Ke.firstChild.attr("height")}):Cr.attr({width:Ke.attr("width"),height:Ke.attr("height")})}Cr.attr({style:Ke.attr("style")});const ga=(Os=Ke.attributes)!==null&&Os!==void 0?Os:[];let es=ga.length;for(;es--;){const Xr=ga[es].name;Xr.indexOf("data-mce-p-")===0&&Cr.attr(Xr.substr(11),ga[es].value)}const jc=Ke.attr("data-mce-html");if(jc){const Xr=vs(pe,sr,unescape(jc));Xe(Xr.children(),Ea=>Cr.append(Ea))}Ke.replace(Cr)}})}),pe.on("SetContent",()=>{const fe=pe.dom;Xe(fe.select("span.mce-preview-object"),Ve=>{fe.select("span.mce-shim",Ve).length===0&&fe.add(Ve,"span",{class:"mce-shim"})})})},Vs=pe=>{pe.on("ResolveName",fe=>{let Ve;fe.target.nodeType===1&&(Ve=fe.target.getAttribute("data-mce-object"))&&(fe.name=Ve)})},xa=pe=>fe=>{const Ve=()=>{fe.setEnabled(pe.selection.isEditable())};return pe.on("NodeChange",Ve),Ve(),()=>{pe.off("NodeChange",Ve)}},Nc=pe=>{const fe=()=>pe.execCommand("mceMedia");pe.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:fe,onSetup:Ve=>{const Ge=pe.selection;Ve.setActive(Do(Ge.getNode()));const Cn=Ge.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ve.setActive).unbind,Ln=xa(pe)(Ve);return()=>{Cn(),Ln()}}}),pe.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:fe,onSetup:xa(pe)})};var Rr=()=>{p.add("media",pe=>(Je(pe),go(pe),Nc(pe),Vs(pe),wr(pe),Kt(pe),Tt(pe)))};Rr()}()),lQ}var dQ;function Bse(){return dQ||(dQ=1,Ise()),cQ}Bse();var fQ={},mQ={},hQ;function Lse(){return hQ||(hQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(j,le)=>{j.focus(),j.undoManager.transact(()=>{j.setContent(le)}),j.selection.setCursorLocation(),j.nodeChanged()},w=j=>j.getContent({source_view:!0}),E=j=>{const le=w(j);j.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:le},onSubmit:ge=>{g(j,ge.getData().code),ge.close()}})},N=j=>{j.addCommand("mceCodeEditor",()=>{E(j)})},V=j=>{const le=()=>j.execCommand("mceCodeEditor");j.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:le}),j.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:le})};var K=()=>{p.add("code",j=>(N(j),V(j),{}))};K()}()),mQ}var gQ;function Fse(){return gQ||(gQ=1,Lse()),fQ}Fse();var pQ={},bQ={},vQ;function $se(){return vQ||(vQ=1,function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Ae,yt,Mn)=>{const fn=yt==="UL"?"InsertUnorderedList":"InsertOrderedList";Ae.execCommand(fn,!1,Mn===!1?null:{"list-style-type":Mn})},w=Ae=>{Ae.addCommand("ApplyUnorderedListStyle",(yt,Mn)=>{g(Ae,"UL",Mn["list-style-type"])}),Ae.addCommand("ApplyOrderedListStyle",(yt,Mn)=>{g(Ae,"OL",Mn["list-style-type"])})},E=Ae=>yt=>yt.options.get(Ae),N=Ae=>{const yt=Ae.options.register;yt("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),yt("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},V=E("advlist_number_styles"),K=E("advlist_bullet_styles"),j=Ae=>Ae==null,le=Ae=>!j(Ae);class ge{constructor(yt,Mn){this.tag=yt,this.value=Mn}static some(yt){return new ge(!0,yt)}static none(){return ge.singletonNone}fold(yt,Mn){return this.tag?Mn(this.value):yt()}isSome(){return this.tag}isNone(){return!this.tag}map(yt){return this.tag?ge.some(yt(this.value)):ge.none()}bind(yt){return this.tag?yt(this.value):ge.none()}exists(yt){return this.tag&&yt(this.value)}forall(yt){return!this.tag||yt(this.value)}filter(yt){return!this.tag||yt(this.value)?this:ge.none()}getOr(yt){return this.tag?this.value:yt}or(yt){return this.tag?this:yt}getOrThunk(yt){return this.tag?this.value:yt()}orThunk(yt){return this.tag?this:yt()}getOrDie(yt){if(this.tag)return this.value;throw new Error(yt??"Called getOrDie on None")}static from(yt){return le(yt)?ge.some(yt):ge.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(yt){this.tag&&yt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ge.singletonNone=new ge(!1);const Ce=Array.prototype.indexOf,Xe=(Ae,yt)=>Ce.call(Ae,yt),Lt=(Ae,yt)=>Xe(Ae,yt)>-1,Zt=(Ae,yt,Mn)=>{for(let fn=0,io=Ae.length;fn<io;fn++){const $e=Ae[fn];if(yt($e,fn))return ge.some($e);if(Mn($e,fn))break}return ge.none()},Pt=Object.keys,Ct=(Ae,yt)=>{const Mn=Pt(Ae);for(let fn=0,io=Mn.length;fn<io;fn++){const $e=Mn[fn],gt=Ae[$e];yt(gt,$e)}},Ne=(Ae,yt)=>ln(Ae,(Mn,fn)=>({k:fn,v:yt(Mn,fn)})),ln=(Ae,yt)=>{const Mn={};return Ct(Ae,(fn,io)=>{const $e=yt(fn,io);Mn[$e.k]=$e.v}),Mn};var xt=tinymce.util.Tools.resolve("tinymce.util.Tools");const de=Ae=>/\btox\-/.test(Ae.className),Je=(Ae,yt)=>Ae.dom.isChildOf(yt,Ae.getBody()),Dn=Ae=>yt=>le(yt)&&Ae.test(yt.nodeName),Gt=Dn(/^(OL|UL|DL)$/),re=Dn(/^(TH|TD)$/),Xt=(Ae,yt,Mn)=>Zt(yt,fn=>Gt(fn)&&!de(fn),re).exists(fn=>fn.nodeName===Mn&&Je(Ae,fn)),In=Ae=>{const yt=Ae.dom.getParent(Ae.selection.getNode(),"ol,ul"),Mn=Ae.dom.getStyle(yt,"listStyleType");return ge.from(Mn)},en=(Ae,yt)=>yt!==null&&!Ae.dom.isEditable(yt),Fe=(Ae,yt)=>{const Mn=Ae.dom.getParent(yt,"ol,ul,dl");return en(Ae,Mn)||!Ae.selection.isEditable()},ve=(Ae,yt)=>{const Mn=Ae.selection.getNode();return yt({parents:Ae.dom.getParents(Mn),element:Mn}),Ae.on("NodeChange",yt),()=>Ae.off("NodeChange",yt)},oo=Ae=>Ae.replace(/\-/g," ").replace(/\b\w/g,yt=>yt.toUpperCase()),at=Ae=>j(Ae)||Ae==="default"?"":Ae,it=(Ae,yt)=>Mn=>{const fn=($e,gt)=>{const W=$e.selection.getStart(!0);Mn.setActive(Xt($e,gt,yt)),Mn.setEnabled(!Fe($e,W))};return ve(Ae,$e=>fn(Ae,$e.parents))},M=(Ae,yt,Mn,fn,io,$e)=>{const gt={"lower-latin":"lower-alpha","upper-latin":"upper-alpha","lower-alpha":"lower-latin","upper-alpha":"upper-latin"},W=Ne(gt,Hs=>Lt($e,Hs));Ae.ui.registry.addSplitButton(yt,{tooltip:Mn,icon:io==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Hs=>{const to=xt.map($e,To=>{const zo=io==="OL"?"num":"bull",gi=To==="disc"||To==="decimal"?"default":To,et=at(To),_t=oo(To);return{type:"choiceitem",value:et,icon:"list-"+zo+"-"+gi,text:_t}});Hs(to)},onAction:()=>Ae.execCommand(fn),onItemAction:(Hs,to)=>{g(Ae,io,to)},select:Hs=>In(Ae).exists(To=>Hs===To||gt[To]===Hs&&!W[Hs]),onSetup:it(Ae,io)})},Hn=(Ae,yt,Mn,fn,io,$e)=>{Ae.ui.registry.addToggleButton(yt,{active:!1,tooltip:Mn,icon:io==="OL"?"ordered-list":"unordered-list",onSetup:it(Ae,io),onAction:()=>Ae.queryCommandState(fn)||$e===""?Ae.execCommand(fn):g(Ae,io,$e)})},wt=(Ae,yt,Mn,fn,io,$e)=>{$e.length>1?M(Ae,yt,Mn,fn,io,$e):Hn(Ae,yt,Mn,fn,io,at($e[0]))},Eo=Ae=>{wt(Ae,"numlist","Numbered list","InsertOrderedList","OL",V(Ae)),wt(Ae,"bullist","Bullet list","InsertUnorderedList","UL",K(Ae))};var yn=()=>{p.add("advlist",Ae=>{Ae.hasPlugin("lists")?(N(Ae),Eo(Ae),w(Ae)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};yn()}()),bQ}var yQ;function Hse(){return yQ||(yQ=1,$se()),pQ}Hse();
