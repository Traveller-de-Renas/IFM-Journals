function jX(p,g){return function(){return p.apply(g,arguments)}}const{toString:lQ}=Object.prototype,{getPrototypeOf:tK}=Object,J6=(p=>g=>{const w=lQ.call(g);return p[w]||(p[w]=w.slice(8,-1).toLowerCase())})(Object.create(null)),Ug=p=>(p=p.toLowerCase(),g=>J6(g)===p),Q6=p=>g=>typeof g===p,{isArray:wk}=Array,gM=Q6("undefined");function uQ(p){return p!==null&&!gM(p)&&p.constructor!==null&&!gM(p.constructor)&&hm(p.constructor.isBuffer)&&p.constructor.isBuffer(p)}const qX=Ug("ArrayBuffer");function dQ(p){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(p):g=p&&p.buffer&&qX(p.buffer),g}const fQ=Q6("string"),hm=Q6("function"),GX=Q6("number"),e7=p=>p!==null&&typeof p=="object",mQ=p=>p===!0||p===!1,S6=p=>{if(J6(p)!=="object")return!1;const g=tK(p);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in p)&&!(Symbol.iterator in p)},hQ=Ug("Date"),gQ=Ug("File"),pQ=Ug("Blob"),bQ=Ug("FileList"),vQ=p=>e7(p)&&hm(p.pipe),yQ=p=>{let g;return p&&(typeof FormData=="function"&&p instanceof FormData||hm(p.append)&&((g=J6(p))==="formdata"||g==="object"&&hm(p.toString)&&p.toString()==="[object FormData]"))},wQ=Ug("URLSearchParams"),[CQ,SQ,xQ,EQ]=["ReadableStream","Request","Response","Headers"].map(Ug),_Q=p=>p.trim?p.trim():p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function CM(p,g,{allOwnKeys:w=!1}={}){if(p===null||typeof p>"u")return;let E,N;if(typeof p!="object"&&(p=[p]),wk(p))for(E=0,N=p.length;E<N;E++)g.call(null,p[E],E,p);else{const z=w?Object.getOwnPropertyNames(p):Object.keys(p),K=z.length;let j;for(E=0;E<K;E++)j=z[E],g.call(null,p[j],j,p)}}function KX(p,g){g=g.toLowerCase();const w=Object.keys(p);let E=w.length,N;for(;E-- >0;)if(N=w[E],g===N.toLowerCase())return N;return null}const NS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,YX=p=>!gM(p)&&p!==NS;function HG(){const{caseless:p}=YX(this)&&this||{},g={},w=(E,N)=>{const z=p&&KX(g,N)||N;S6(g[z])&&S6(E)?g[z]=HG(g[z],E):S6(E)?g[z]=HG({},E):wk(E)?g[z]=E.slice():g[z]=E};for(let E=0,N=arguments.length;E<N;E++)arguments[E]&&CM(arguments[E],w);return g}const TQ=(p,g,w,{allOwnKeys:E}={})=>(CM(g,(N,z)=>{w&&hm(N)?p[z]=jX(N,w):p[z]=N},{allOwnKeys:E}),p),kQ=p=>(p.charCodeAt(0)===65279&&(p=p.slice(1)),p),AQ=(p,g,w,E)=>{p.prototype=Object.create(g.prototype,E),p.prototype.constructor=p,Object.defineProperty(p,"super",{value:g.prototype}),w&&Object.assign(p.prototype,w)},OQ=(p,g,w,E)=>{let N,z,K;const j={};if(g=g||{},p==null)return g;do{for(N=Object.getOwnPropertyNames(p),z=N.length;z-- >0;)K=N[z],(!E||E(K,p,g))&&!j[K]&&(g[K]=p[K],j[K]=!0);p=w!==!1&&tK(p)}while(p&&(!w||w(p,g))&&p!==Object.prototype);return g},DQ=(p,g,w)=>{p=String(p),(w===void 0||w>p.length)&&(w=p.length),w-=g.length;const E=p.indexOf(g,w);return E!==-1&&E===w},RQ=p=>{if(!p)return null;if(wk(p))return p;let g=p.length;if(!GX(g))return null;const w=new Array(g);for(;g-- >0;)w[g]=p[g];return w},MQ=(p=>g=>p&&g instanceof p)(typeof Uint8Array<"u"&&tK(Uint8Array)),NQ=(p,g)=>{const E=(p&&p[Symbol.iterator]).call(p);let N;for(;(N=E.next())&&!N.done;){const z=N.value;g.call(p,z[0],z[1])}},PQ=(p,g)=>{let w;const E=[];for(;(w=p.exec(g))!==null;)E.push(w);return E},BQ=Ug("HTMLFormElement"),IQ=p=>p.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(w,E,N){return E.toUpperCase()+N}),oX=(({hasOwnProperty:p})=>(g,w)=>p.call(g,w))(Object.prototype),LQ=Ug("RegExp"),XX=(p,g)=>{const w=Object.getOwnPropertyDescriptors(p),E={};CM(w,(N,z)=>{let K;(K=g(N,z,p))!==!1&&(E[z]=K||N)}),Object.defineProperties(p,E)},FQ=p=>{XX(p,(g,w)=>{if(hm(p)&&["arguments","caller","callee"].indexOf(w)!==-1)return!1;const E=p[w];if(hm(E)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+w+"'")})}})},$Q=(p,g)=>{const w={},E=N=>{N.forEach(z=>{w[z]=!0})};return wk(p)?E(p):E(String(p).split(g)),w},HQ=()=>{},VQ=(p,g)=>p!=null&&Number.isFinite(p=+p)?p:g,OG="abcdefghijklmnopqrstuvwxyz",sX="0123456789",JX={DIGIT:sX,ALPHA:OG,ALPHA_DIGIT:OG+OG.toUpperCase()+sX},zQ=(p=16,g=JX.ALPHA_DIGIT)=>{let w="";const{length:E}=g;for(;p--;)w+=g[Math.random()*E|0];return w};function UQ(p){return!!(p&&hm(p.append)&&p[Symbol.toStringTag]==="FormData"&&p[Symbol.iterator])}const WQ=p=>{const g=new Array(10),w=(E,N)=>{if(e7(E)){if(g.indexOf(E)>=0)return;if(!("toJSON"in E)){g[N]=E;const z=wk(E)?[]:{};return CM(E,(K,j)=>{const ue=w(K,N+1);!gM(ue)&&(z[j]=ue)}),g[N]=void 0,z}}return E};return w(p,0)},ZQ=Ug("AsyncFunction"),jQ=p=>p&&(e7(p)||hm(p))&&hm(p.then)&&hm(p.catch),QX=((p,g)=>p?setImmediate:g?((w,E)=>(NS.addEventListener("message",({source:N,data:z})=>{N===NS&&z===w&&E.length&&E.shift()()},!1),N=>{E.push(N),NS.postMessage(w,"*")}))(`axios@${Math.random()}`,[]):w=>setTimeout(w))(typeof setImmediate=="function",hm(NS.postMessage)),qQ=typeof queueMicrotask<"u"?queueMicrotask.bind(NS):typeof process<"u"&&process.nextTick||QX,Dt={isArray:wk,isArrayBuffer:qX,isBuffer:uQ,isFormData:yQ,isArrayBufferView:dQ,isString:fQ,isNumber:GX,isBoolean:mQ,isObject:e7,isPlainObject:S6,isReadableStream:CQ,isRequest:SQ,isResponse:xQ,isHeaders:EQ,isUndefined:gM,isDate:hQ,isFile:gQ,isBlob:pQ,isRegExp:LQ,isFunction:hm,isStream:vQ,isURLSearchParams:wQ,isTypedArray:MQ,isFileList:bQ,forEach:CM,merge:HG,extend:TQ,trim:_Q,stripBOM:kQ,inherits:AQ,toFlatObject:OQ,kindOf:J6,kindOfTest:Ug,endsWith:DQ,toArray:RQ,forEachEntry:NQ,matchAll:PQ,isHTMLForm:BQ,hasOwnProperty:oX,hasOwnProp:oX,reduceDescriptors:XX,freezeMethods:FQ,toObjectSet:$Q,toCamelCase:IQ,noop:HQ,toFiniteNumber:VQ,findKey:KX,global:NS,isContextDefined:YX,ALPHABET:JX,generateString:zQ,isSpecCompliantForm:UQ,toJSONObject:WQ,isAsyncFn:ZQ,isThenable:jQ,setImmediate:QX,asap:qQ};function As(p,g,w,E,N){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=p,this.name="AxiosError",g&&(this.code=g),w&&(this.config=w),E&&(this.request=E),N&&(this.response=N,this.status=N.status?N.status:null)}Dt.inherits(As,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Dt.toJSONObject(this.config),code:this.code,status:this.status}}});const eJ=As.prototype,tJ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(p=>{tJ[p]={value:p}});Object.defineProperties(As,tJ);Object.defineProperty(eJ,"isAxiosError",{value:!0});As.from=(p,g,w,E,N,z)=>{const K=Object.create(eJ);return Dt.toFlatObject(p,K,function(ue){return ue!==Error.prototype},j=>j!=="isAxiosError"),As.call(K,p.message,g,w,E,N),K.cause=p,K.name=p.name,z&&Object.assign(K,z),K};const GQ=null;function VG(p){return Dt.isPlainObject(p)||Dt.isArray(p)}function nJ(p){return Dt.endsWith(p,"[]")?p.slice(0,-2):p}function rX(p,g,w){return p?p.concat(g).map(function(N,z){return N=nJ(N),!w&&z?"["+N+"]":N}).join(w?".":""):g}function KQ(p){return Dt.isArray(p)&&!p.some(VG)}const YQ=Dt.toFlatObject(Dt,{},null,function(g){return/^is[A-Z]/.test(g)});function t7(p,g,w){if(!Dt.isObject(p))throw new TypeError("target must be an object");g=g||new FormData,w=Dt.toFlatObject(w,{metaTokens:!0,dots:!1,indexes:!1},!1,function(vt,Ie){return!Dt.isUndefined(Ie[vt])});const E=w.metaTokens,N=w.visitor||be,z=w.dots,K=w.indexes,ue=(w.Blob||typeof Blob<"u"&&Blob)&&Dt.isSpecCompliantForm(g);if(!Dt.isFunction(N))throw new TypeError("visitor must be a function");function Se(Nt){if(Nt===null)return"";if(Dt.isDate(Nt))return Nt.toISOString();if(!ue&&Dt.isBlob(Nt))throw new As("Blob is not supported. Use a Buffer instead.");return Dt.isArrayBuffer(Nt)||Dt.isTypedArray(Nt)?ue&&typeof Blob=="function"?new Blob([Nt]):Buffer.from(Nt):Nt}function be(Nt,vt,Ie){let on=Nt;if(Nt&&!Ie&&typeof Nt=="object"){if(Dt.endsWith(vt,"{}"))vt=E?vt:vt.slice(0,-2),Nt=JSON.stringify(Nt);else if(Dt.isArray(Nt)&&KQ(Nt)||(Dt.isFileList(Nt)||Dt.endsWith(vt,"[]"))&&(on=Dt.toArray(Nt)))return vt=nJ(vt),on.forEach(function(ce,qe){!(Dt.isUndefined(ce)||ce===null)&&g.append(K===!0?rX([vt],qe,z):K===null?vt:vt+"[]",Se(ce))}),!1}return VG(Nt)?!0:(g.append(rX(Ie,vt,z),Se(Nt)),!1)}const Ge=[],Ht=Object.assign(YQ,{defaultVisitor:be,convertValue:Se,isVisitable:VG});function Ut(Nt,vt){if(!Dt.isUndefined(Nt)){if(Ge.indexOf(Nt)!==-1)throw Error("Circular reference detected in "+vt.join("."));Ge.push(Nt),Dt.forEach(Nt,function(on,Et){(!(Dt.isUndefined(on)||on===null)&&N.call(g,on,Dt.isString(Et)?Et.trim():Et,vt,Ht))===!0&&Ut(on,vt?vt.concat(Et):[Et])}),Ge.pop()}}if(!Dt.isObject(p))throw new TypeError("data must be an object");return Ut(p),g}function aX(p){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(p).replace(/[!'()~]|%20|%00/g,function(E){return g[E]})}function nK(p,g){this._pairs=[],p&&t7(p,this,g)}const oJ=nK.prototype;oJ.append=function(g,w){this._pairs.push([g,w])};oJ.toString=function(g){const w=g?function(E){return g.call(this,E,aX)}:aX;return this._pairs.map(function(N){return w(N[0])+"="+w(N[1])},"").join("&")};function XQ(p){return encodeURIComponent(p).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sJ(p,g,w){if(!g)return p;const E=w&&w.encode||XQ,N=w&&w.serialize;let z;if(N?z=N(g,w):z=Dt.isURLSearchParams(g)?g.toString():new nK(g,w).toString(E),z){const K=p.indexOf("#");K!==-1&&(p=p.slice(0,K)),p+=(p.indexOf("?")===-1?"?":"&")+z}return p}class iX{constructor(){this.handlers=[]}use(g,w,E){return this.handlers.push({fulfilled:g,rejected:w,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){Dt.forEach(this.handlers,function(E){E!==null&&g(E)})}}const rJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JQ=typeof URLSearchParams<"u"?URLSearchParams:nK,QQ=typeof FormData<"u"?FormData:null,eee=typeof Blob<"u"?Blob:null,tee={isBrowser:!0,classes:{URLSearchParams:JQ,FormData:QQ,Blob:eee},protocols:["http","https","file","blob","url","data"]},oK=typeof window<"u"&&typeof document<"u",zG=typeof navigator=="object"&&navigator||void 0,nee=oK&&(!zG||["ReactNative","NativeScript","NS"].indexOf(zG.product)<0),oee=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",see=oK&&window.location.href||"http://localhost",ree=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:oK,hasStandardBrowserEnv:nee,hasStandardBrowserWebWorkerEnv:oee,navigator:zG,origin:see},Symbol.toStringTag,{value:"Module"})),vf={...ree,...tee};function aee(p,g){return t7(p,new vf.classes.URLSearchParams,Object.assign({visitor:function(w,E,N,z){return vf.isNode&&Dt.isBuffer(w)?(this.append(E,w.toString("base64")),!1):z.defaultVisitor.apply(this,arguments)}},g))}function iee(p){return Dt.matchAll(/\w+|\[(\w*)]/g,p).map(g=>g[0]==="[]"?"":g[1]||g[0])}function cee(p){const g={},w=Object.keys(p);let E;const N=w.length;let z;for(E=0;E<N;E++)z=w[E],g[z]=p[z];return g}function aJ(p){function g(w,E,N,z){let K=w[z++];if(K==="__proto__")return!0;const j=Number.isFinite(+K),ue=z>=w.length;return K=!K&&Dt.isArray(N)?N.length:K,ue?(Dt.hasOwnProp(N,K)?N[K]=[N[K],E]:N[K]=E,!j):((!N[K]||!Dt.isObject(N[K]))&&(N[K]=[]),g(w,E,N[K],z)&&Dt.isArray(N[K])&&(N[K]=cee(N[K])),!j)}if(Dt.isFormData(p)&&Dt.isFunction(p.entries)){const w={};return Dt.forEachEntry(p,(E,N)=>{g(iee(E),N,w,0)}),w}return null}function lee(p,g,w){if(Dt.isString(p))try{return(g||JSON.parse)(p),Dt.trim(p)}catch(E){if(E.name!=="SyntaxError")throw E}return(w||JSON.stringify)(p)}const SM={transitional:rJ,adapter:["xhr","http","fetch"],transformRequest:[function(g,w){const E=w.getContentType()||"",N=E.indexOf("application/json")>-1,z=Dt.isObject(g);if(z&&Dt.isHTMLForm(g)&&(g=new FormData(g)),Dt.isFormData(g))return N?JSON.stringify(aJ(g)):g;if(Dt.isArrayBuffer(g)||Dt.isBuffer(g)||Dt.isStream(g)||Dt.isFile(g)||Dt.isBlob(g)||Dt.isReadableStream(g))return g;if(Dt.isArrayBufferView(g))return g.buffer;if(Dt.isURLSearchParams(g))return w.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let j;if(z){if(E.indexOf("application/x-www-form-urlencoded")>-1)return aee(g,this.formSerializer).toString();if((j=Dt.isFileList(g))||E.indexOf("multipart/form-data")>-1){const ue=this.env&&this.env.FormData;return t7(j?{"files[]":g}:g,ue&&new ue,this.formSerializer)}}return z||N?(w.setContentType("application/json",!1),lee(g)):g}],transformResponse:[function(g){const w=this.transitional||SM.transitional,E=w&&w.forcedJSONParsing,N=this.responseType==="json";if(Dt.isResponse(g)||Dt.isReadableStream(g))return g;if(g&&Dt.isString(g)&&(E&&!this.responseType||N)){const K=!(w&&w.silentJSONParsing)&&N;try{return JSON.parse(g)}catch(j){if(K)throw j.name==="SyntaxError"?As.from(j,As.ERR_BAD_RESPONSE,this,null,this.response):j}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vf.classes.FormData,Blob:vf.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Dt.forEach(["delete","get","head","post","put","patch"],p=>{SM.headers[p]={}});const uee=Dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dee=p=>{const g={};let w,E,N;return p&&p.split(`
`).forEach(function(K){N=K.indexOf(":"),w=K.substring(0,N).trim().toLowerCase(),E=K.substring(N+1).trim(),!(!w||g[w]&&uee[w])&&(w==="set-cookie"?g[w]?g[w].push(E):g[w]=[E]:g[w]=g[w]?g[w]+", "+E:E)}),g},cX=Symbol("internals");function aM(p){return p&&String(p).trim().toLowerCase()}function x6(p){return p===!1||p==null?p:Dt.isArray(p)?p.map(x6):String(p)}function fee(p){const g=Object.create(null),w=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=w.exec(p);)g[E[1]]=E[2];return g}const mee=p=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(p.trim());function DG(p,g,w,E,N){if(Dt.isFunction(E))return E.call(this,g,w);if(N&&(g=w),!!Dt.isString(g)){if(Dt.isString(E))return g.indexOf(E)!==-1;if(Dt.isRegExp(E))return E.test(g)}}function hee(p){return p.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,w,E)=>w.toUpperCase()+E)}function gee(p,g){const w=Dt.toCamelCase(" "+g);["get","set","has"].forEach(E=>{Object.defineProperty(p,E+w,{value:function(N,z,K){return this[E].call(this,g,N,z,K)},configurable:!0})})}class yf{constructor(g){g&&this.set(g)}set(g,w,E){const N=this;function z(j,ue,Se){const be=aM(ue);if(!be)throw new Error("header name must be a non-empty string");const Ge=Dt.findKey(N,be);(!Ge||N[Ge]===void 0||Se===!0||Se===void 0&&N[Ge]!==!1)&&(N[Ge||ue]=x6(j))}const K=(j,ue)=>Dt.forEach(j,(Se,be)=>z(Se,be,ue));if(Dt.isPlainObject(g)||g instanceof this.constructor)K(g,w);else if(Dt.isString(g)&&(g=g.trim())&&!mee(g))K(dee(g),w);else if(Dt.isHeaders(g))for(const[j,ue]of g.entries())z(ue,j,E);else g!=null&&z(w,g,E);return this}get(g,w){if(g=aM(g),g){const E=Dt.findKey(this,g);if(E){const N=this[E];if(!w)return N;if(w===!0)return fee(N);if(Dt.isFunction(w))return w.call(this,N,E);if(Dt.isRegExp(w))return w.exec(N);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,w){if(g=aM(g),g){const E=Dt.findKey(this,g);return!!(E&&this[E]!==void 0&&(!w||DG(this,this[E],E,w)))}return!1}delete(g,w){const E=this;let N=!1;function z(K){if(K=aM(K),K){const j=Dt.findKey(E,K);j&&(!w||DG(E,E[j],j,w))&&(delete E[j],N=!0)}}return Dt.isArray(g)?g.forEach(z):z(g),N}clear(g){const w=Object.keys(this);let E=w.length,N=!1;for(;E--;){const z=w[E];(!g||DG(this,this[z],z,g,!0))&&(delete this[z],N=!0)}return N}normalize(g){const w=this,E={};return Dt.forEach(this,(N,z)=>{const K=Dt.findKey(E,z);if(K){w[K]=x6(N),delete w[z];return}const j=g?hee(z):String(z).trim();j!==z&&delete w[z],w[j]=x6(N),E[j]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const w=Object.create(null);return Dt.forEach(this,(E,N)=>{E!=null&&E!==!1&&(w[N]=g&&Dt.isArray(E)?E.join(", "):E)}),w}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,w])=>g+": "+w).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...w){const E=new this(g);return w.forEach(N=>E.set(N)),E}static accessor(g){const E=(this[cX]=this[cX]={accessors:{}}).accessors,N=this.prototype;function z(K){const j=aM(K);E[j]||(gee(N,K),E[j]=!0)}return Dt.isArray(g)?g.forEach(z):z(g),this}}yf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Dt.reduceDescriptors(yf.prototype,({value:p},g)=>{let w=g[0].toUpperCase()+g.slice(1);return{get:()=>p,set(E){this[w]=E}}});Dt.freezeMethods(yf);function RG(p,g){const w=this||SM,E=g||w,N=yf.from(E.headers);let z=E.data;return Dt.forEach(p,function(j){z=j.call(w,z,N.normalize(),g?g.status:void 0)}),N.normalize(),z}function iJ(p){return!!(p&&p.__CANCEL__)}function Ck(p,g,w){As.call(this,p??"canceled",As.ERR_CANCELED,g,w),this.name="CanceledError"}Dt.inherits(Ck,As,{__CANCEL__:!0});function cJ(p,g,w){const E=w.config.validateStatus;!w.status||!E||E(w.status)?p(w):g(new As("Request failed with status code "+w.status,[As.ERR_BAD_REQUEST,As.ERR_BAD_RESPONSE][Math.floor(w.status/100)-4],w.config,w.request,w))}function pee(p){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(p);return g&&g[1]||""}function bee(p,g){p=p||10;const w=new Array(p),E=new Array(p);let N=0,z=0,K;return g=g!==void 0?g:1e3,function(ue){const Se=Date.now(),be=E[z];K||(K=Se),w[N]=ue,E[N]=Se;let Ge=z,Ht=0;for(;Ge!==N;)Ht+=w[Ge++],Ge=Ge%p;if(N=(N+1)%p,N===z&&(z=(z+1)%p),Se-K<g)return;const Ut=be&&Se-be;return Ut?Math.round(Ht*1e3/Ut):void 0}}function vee(p,g){let w=0,E=1e3/g,N,z;const K=(Se,be=Date.now())=>{w=be,N=null,z&&(clearTimeout(z),z=null),p.apply(null,Se)};return[(...Se)=>{const be=Date.now(),Ge=be-w;Ge>=E?K(Se,be):(N=Se,z||(z=setTimeout(()=>{z=null,K(N)},E-Ge)))},()=>N&&K(N)]}const k6=(p,g,w=3)=>{let E=0;const N=bee(50,250);return vee(z=>{const K=z.loaded,j=z.lengthComputable?z.total:void 0,ue=K-E,Se=N(ue),be=K<=j;E=K;const Ge={loaded:K,total:j,progress:j?K/j:void 0,bytes:ue,rate:Se||void 0,estimated:Se&&j&&be?(j-K)/Se:void 0,event:z,lengthComputable:j!=null,[g?"download":"upload"]:!0};p(Ge)},w)},lX=(p,g)=>{const w=p!=null;return[E=>g[0]({lengthComputable:w,total:p,loaded:E}),g[1]]},uX=p=>(...g)=>Dt.asap(()=>p(...g)),yee=vf.hasStandardBrowserEnv?function(){const g=vf.navigator&&/(msie|trident)/i.test(vf.navigator.userAgent),w=document.createElement("a");let E;function N(z){let K=z;return g&&(w.setAttribute("href",K),K=w.href),w.setAttribute("href",K),{href:w.href,protocol:w.protocol?w.protocol.replace(/:$/,""):"",host:w.host,search:w.search?w.search.replace(/^\?/,""):"",hash:w.hash?w.hash.replace(/^#/,""):"",hostname:w.hostname,port:w.port,pathname:w.pathname.charAt(0)==="/"?w.pathname:"/"+w.pathname}}return E=N(window.location.href),function(K){const j=Dt.isString(K)?N(K):K;return j.protocol===E.protocol&&j.host===E.host}}():function(){return function(){return!0}}(),wee=vf.hasStandardBrowserEnv?{write(p,g,w,E,N,z){const K=[p+"="+encodeURIComponent(g)];Dt.isNumber(w)&&K.push("expires="+new Date(w).toGMTString()),Dt.isString(E)&&K.push("path="+E),Dt.isString(N)&&K.push("domain="+N),z===!0&&K.push("secure"),document.cookie=K.join("; ")},read(p){const g=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(p){this.write(p,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cee(p){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(p)}function See(p,g){return g?p.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):p}function lJ(p,g){return p&&!Cee(g)?See(p,g):g}const dX=p=>p instanceof yf?{...p}:p;function IS(p,g){g=g||{};const w={};function E(Se,be,Ge){return Dt.isPlainObject(Se)&&Dt.isPlainObject(be)?Dt.merge.call({caseless:Ge},Se,be):Dt.isPlainObject(be)?Dt.merge({},be):Dt.isArray(be)?be.slice():be}function N(Se,be,Ge){if(Dt.isUndefined(be)){if(!Dt.isUndefined(Se))return E(void 0,Se,Ge)}else return E(Se,be,Ge)}function z(Se,be){if(!Dt.isUndefined(be))return E(void 0,be)}function K(Se,be){if(Dt.isUndefined(be)){if(!Dt.isUndefined(Se))return E(void 0,Se)}else return E(void 0,be)}function j(Se,be,Ge){if(Ge in g)return E(Se,be);if(Ge in p)return E(void 0,Se)}const ue={url:z,method:z,data:z,baseURL:K,transformRequest:K,transformResponse:K,paramsSerializer:K,timeout:K,timeoutMessage:K,withCredentials:K,withXSRFToken:K,adapter:K,responseType:K,xsrfCookieName:K,xsrfHeaderName:K,onUploadProgress:K,onDownloadProgress:K,decompress:K,maxContentLength:K,maxBodyLength:K,beforeRedirect:K,transport:K,httpAgent:K,httpsAgent:K,cancelToken:K,socketPath:K,responseEncoding:K,validateStatus:j,headers:(Se,be)=>N(dX(Se),dX(be),!0)};return Dt.forEach(Object.keys(Object.assign({},p,g)),function(be){const Ge=ue[be]||N,Ht=Ge(p[be],g[be],be);Dt.isUndefined(Ht)&&Ge!==j||(w[be]=Ht)}),w}const uJ=p=>{const g=IS({},p);let{data:w,withXSRFToken:E,xsrfHeaderName:N,xsrfCookieName:z,headers:K,auth:j}=g;g.headers=K=yf.from(K),g.url=sJ(lJ(g.baseURL,g.url),p.params,p.paramsSerializer),j&&K.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):"")));let ue;if(Dt.isFormData(w)){if(vf.hasStandardBrowserEnv||vf.hasStandardBrowserWebWorkerEnv)K.setContentType(void 0);else if((ue=K.getContentType())!==!1){const[Se,...be]=ue?ue.split(";").map(Ge=>Ge.trim()).filter(Boolean):[];K.setContentType([Se||"multipart/form-data",...be].join("; "))}}if(vf.hasStandardBrowserEnv&&(E&&Dt.isFunction(E)&&(E=E(g)),E||E!==!1&&yee(g.url))){const Se=N&&z&&wee.read(z);Se&&K.set(N,Se)}return g},xee=typeof XMLHttpRequest<"u",Eee=xee&&function(p){return new Promise(function(w,E){const N=uJ(p);let z=N.data;const K=yf.from(N.headers).normalize();let{responseType:j,onUploadProgress:ue,onDownloadProgress:Se}=N,be,Ge,Ht,Ut,Nt;function vt(){Ut&&Ut(),Nt&&Nt(),N.cancelToken&&N.cancelToken.unsubscribe(be),N.signal&&N.signal.removeEventListener("abort",be)}let Ie=new XMLHttpRequest;Ie.open(N.method.toUpperCase(),N.url,!0),Ie.timeout=N.timeout;function on(){if(!Ie)return;const ce=yf.from("getAllResponseHeaders"in Ie&&Ie.getAllResponseHeaders()),On={data:!j||j==="text"||j==="json"?Ie.responseText:Ie.response,status:Ie.status,statusText:Ie.statusText,headers:ce,config:p,request:Ie};cJ(function(ne){w(ne),vt()},function(ne){E(ne),vt()},On),Ie=null}"onloadend"in Ie?Ie.onloadend=on:Ie.onreadystatechange=function(){!Ie||Ie.readyState!==4||Ie.status===0&&!(Ie.responseURL&&Ie.responseURL.indexOf("file:")===0)||setTimeout(on)},Ie.onabort=function(){Ie&&(E(new As("Request aborted",As.ECONNABORTED,p,Ie)),Ie=null)},Ie.onerror=function(){E(new As("Network Error",As.ERR_NETWORK,p,Ie)),Ie=null},Ie.ontimeout=function(){let qe=N.timeout?"timeout of "+N.timeout+"ms exceeded":"timeout exceeded";const On=N.transitional||rJ;N.timeoutErrorMessage&&(qe=N.timeoutErrorMessage),E(new As(qe,On.clarifyTimeoutError?As.ETIMEDOUT:As.ECONNABORTED,p,Ie)),Ie=null},z===void 0&&K.setContentType(null),"setRequestHeader"in Ie&&Dt.forEach(K.toJSON(),function(qe,On){Ie.setRequestHeader(On,qe)}),Dt.isUndefined(N.withCredentials)||(Ie.withCredentials=!!N.withCredentials),j&&j!=="json"&&(Ie.responseType=N.responseType),Se&&([Ht,Nt]=k6(Se,!0),Ie.addEventListener("progress",Ht)),ue&&Ie.upload&&([Ge,Ut]=k6(ue),Ie.upload.addEventListener("progress",Ge),Ie.upload.addEventListener("loadend",Ut)),(N.cancelToken||N.signal)&&(be=ce=>{Ie&&(E(!ce||ce.type?new Ck(null,p,Ie):ce),Ie.abort(),Ie=null)},N.cancelToken&&N.cancelToken.subscribe(be),N.signal&&(N.signal.aborted?be():N.signal.addEventListener("abort",be)));const Et=pee(N.url);if(Et&&vf.protocols.indexOf(Et)===-1){E(new As("Unsupported protocol "+Et+":",As.ERR_BAD_REQUEST,p));return}Ie.send(z||null)})},_ee=(p,g)=>{const{length:w}=p=p?p.filter(Boolean):[];if(g||w){let E=new AbortController,N;const z=function(Se){if(!N){N=!0,j();const be=Se instanceof Error?Se:this.reason;E.abort(be instanceof As?be:new Ck(be instanceof Error?be.message:be))}};let K=g&&setTimeout(()=>{K=null,z(new As(`timeout ${g} of ms exceeded`,As.ETIMEDOUT))},g);const j=()=>{p&&(K&&clearTimeout(K),K=null,p.forEach(Se=>{Se.unsubscribe?Se.unsubscribe(z):Se.removeEventListener("abort",z)}),p=null)};p.forEach(Se=>Se.addEventListener("abort",z));const{signal:ue}=E;return ue.unsubscribe=()=>Dt.asap(j),ue}},Tee=function*(p,g){let w=p.byteLength;if(!g||w<g){yield p;return}let E=0,N;for(;E<w;)N=E+g,yield p.slice(E,N),E=N},kee=async function*(p,g){for await(const w of Aee(p))yield*Tee(w,g)},Aee=async function*(p){if(p[Symbol.asyncIterator]){yield*p;return}const g=p.getReader();try{for(;;){const{done:w,value:E}=await g.read();if(w)break;yield E}}finally{await g.cancel()}},fX=(p,g,w,E)=>{const N=kee(p,g);let z=0,K,j=ue=>{K||(K=!0,E&&E(ue))};return new ReadableStream({async pull(ue){try{const{done:Se,value:be}=await N.next();if(Se){j(),ue.close();return}let Ge=be.byteLength;if(w){let Ht=z+=Ge;w(Ht)}ue.enqueue(new Uint8Array(be))}catch(Se){throw j(Se),Se}},cancel(ue){return j(ue),N.return()}},{highWaterMark:2})},n7=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",dJ=n7&&typeof ReadableStream=="function",Oee=n7&&(typeof TextEncoder=="function"?(p=>g=>p.encode(g))(new TextEncoder):async p=>new Uint8Array(await new Response(p).arrayBuffer())),fJ=(p,...g)=>{try{return!!p(...g)}catch{return!1}},Dee=dJ&&fJ(()=>{let p=!1;const g=new Request(vf.origin,{body:new ReadableStream,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),mX=64*1024,UG=dJ&&fJ(()=>Dt.isReadableStream(new Response("").body)),A6={stream:UG&&(p=>p.body)};n7&&(p=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!A6[g]&&(A6[g]=Dt.isFunction(p[g])?w=>w[g]():(w,E)=>{throw new As(`Response type '${g}' is not supported`,As.ERR_NOT_SUPPORT,E)})})})(new Response);const Ree=async p=>{if(p==null)return 0;if(Dt.isBlob(p))return p.size;if(Dt.isSpecCompliantForm(p))return(await new Request(vf.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(Dt.isArrayBufferView(p)||Dt.isArrayBuffer(p))return p.byteLength;if(Dt.isURLSearchParams(p)&&(p=p+""),Dt.isString(p))return(await Oee(p)).byteLength},Mee=async(p,g)=>{const w=Dt.toFiniteNumber(p.getContentLength());return w??Ree(g)},Nee=n7&&(async p=>{let{url:g,method:w,data:E,signal:N,cancelToken:z,timeout:K,onDownloadProgress:j,onUploadProgress:ue,responseType:Se,headers:be,withCredentials:Ge="same-origin",fetchOptions:Ht}=uJ(p);Se=Se?(Se+"").toLowerCase():"text";let Ut=_ee([N,z&&z.toAbortSignal()],K),Nt;const vt=Ut&&Ut.unsubscribe&&(()=>{Ut.unsubscribe()});let Ie;try{if(ue&&Dee&&w!=="get"&&w!=="head"&&(Ie=await Mee(be,E))!==0){let On=new Request(g,{method:"POST",body:E,duplex:"half"}),jt;if(Dt.isFormData(E)&&(jt=On.headers.get("content-type"))&&be.setContentType(jt),On.body){const[ne,Kt]=lX(Ie,k6(uX(ue)));E=fX(On.body,mX,ne,Kt)}}Dt.isString(Ge)||(Ge=Ge?"include":"omit");const on="credentials"in Request.prototype;Nt=new Request(g,{...Ht,signal:Ut,method:w.toUpperCase(),headers:be.normalize().toJSON(),body:E,duplex:"half",credentials:on?Ge:void 0});let Et=await fetch(Nt);const ce=UG&&(Se==="stream"||Se==="response");if(UG&&(j||ce&&vt)){const On={};["status","statusText","headers"].forEach(Pn=>{On[Pn]=Et[Pn]});const jt=Dt.toFiniteNumber(Et.headers.get("content-length")),[ne,Kt]=j&&lX(jt,k6(uX(j),!0))||[];Et=new Response(fX(Et.body,mX,ne,()=>{Kt&&Kt(),vt&&vt()}),On)}Se=Se||"text";let qe=await A6[Dt.findKey(A6,Se)||"text"](Et,p);return!ce&&vt&&vt(),await new Promise((On,jt)=>{cJ(On,jt,{data:qe,headers:yf.from(Et.headers),status:Et.status,statusText:Et.statusText,config:p,request:Nt})})}catch(on){throw vt&&vt(),on&&on.name==="TypeError"&&/fetch/i.test(on.message)?Object.assign(new As("Network Error",As.ERR_NETWORK,p,Nt),{cause:on.cause||on}):As.from(on,on&&on.code,p,Nt)}}),WG={http:GQ,xhr:Eee,fetch:Nee};Dt.forEach(WG,(p,g)=>{if(p){try{Object.defineProperty(p,"name",{value:g})}catch{}Object.defineProperty(p,"adapterName",{value:g})}});const hX=p=>`- ${p}`,Pee=p=>Dt.isFunction(p)||p===null||p===!1,mJ={getAdapter:p=>{p=Dt.isArray(p)?p:[p];const{length:g}=p;let w,E;const N={};for(let z=0;z<g;z++){w=p[z];let K;if(E=w,!Pee(w)&&(E=WG[(K=String(w)).toLowerCase()],E===void 0))throw new As(`Unknown adapter '${K}'`);if(E)break;N[K||"#"+z]=E}if(!E){const z=Object.entries(N).map(([j,ue])=>`adapter ${j} `+(ue===!1?"is not supported by the environment":"is not available in the build"));let K=g?z.length>1?`since :
`+z.map(hX).join(`
`):" "+hX(z[0]):"as no adapter specified";throw new As("There is no suitable adapter to dispatch the request "+K,"ERR_NOT_SUPPORT")}return E},adapters:WG};function MG(p){if(p.cancelToken&&p.cancelToken.throwIfRequested(),p.signal&&p.signal.aborted)throw new Ck(null,p)}function gX(p){return MG(p),p.headers=yf.from(p.headers),p.data=RG.call(p,p.transformRequest),["post","put","patch"].indexOf(p.method)!==-1&&p.headers.setContentType("application/x-www-form-urlencoded",!1),mJ.getAdapter(p.adapter||SM.adapter)(p).then(function(E){return MG(p),E.data=RG.call(p,p.transformResponse,E),E.headers=yf.from(E.headers),E},function(E){return iJ(E)||(MG(p),E&&E.response&&(E.response.data=RG.call(p,p.transformResponse,E.response),E.response.headers=yf.from(E.response.headers))),Promise.reject(E)})}const hJ="1.7.7",sK={};["object","boolean","number","function","string","symbol"].forEach((p,g)=>{sK[p]=function(E){return typeof E===p||"a"+(g<1?"n ":" ")+p}});const pX={};sK.transitional=function(g,w,E){function N(z,K){return"[Axios v"+hJ+"] Transitional option '"+z+"'"+K+(E?". "+E:"")}return(z,K,j)=>{if(g===!1)throw new As(N(K," has been removed"+(w?" in "+w:"")),As.ERR_DEPRECATED);return w&&!pX[K]&&(pX[K]=!0,console.warn(N(K," has been deprecated since v"+w+" and will be removed in the near future"))),g?g(z,K,j):!0}};function Bee(p,g,w){if(typeof p!="object")throw new As("options must be an object",As.ERR_BAD_OPTION_VALUE);const E=Object.keys(p);let N=E.length;for(;N-- >0;){const z=E[N],K=g[z];if(K){const j=p[z],ue=j===void 0||K(j,z,p);if(ue!==!0)throw new As("option "+z+" must be "+ue,As.ERR_BAD_OPTION_VALUE);continue}if(w!==!0)throw new As("Unknown option "+z,As.ERR_BAD_OPTION)}}const ZG={assertOptions:Bee,validators:sK},Ny=ZG.validators;class PS{constructor(g){this.defaults=g,this.interceptors={request:new iX,response:new iX}}async request(g,w){try{return await this._request(g,w)}catch(E){if(E instanceof Error){let N;Error.captureStackTrace?Error.captureStackTrace(N={}):N=new Error;const z=N.stack?N.stack.replace(/^.+\n/,""):"";try{E.stack?z&&!String(E.stack).endsWith(z.replace(/^.+\n.+\n/,""))&&(E.stack+=`
`+z):E.stack=z}catch{}}throw E}}_request(g,w){typeof g=="string"?(w=w||{},w.url=g):w=g||{},w=IS(this.defaults,w);const{transitional:E,paramsSerializer:N,headers:z}=w;E!==void 0&&ZG.assertOptions(E,{silentJSONParsing:Ny.transitional(Ny.boolean),forcedJSONParsing:Ny.transitional(Ny.boolean),clarifyTimeoutError:Ny.transitional(Ny.boolean)},!1),N!=null&&(Dt.isFunction(N)?w.paramsSerializer={serialize:N}:ZG.assertOptions(N,{encode:Ny.function,serialize:Ny.function},!0)),w.method=(w.method||this.defaults.method||"get").toLowerCase();let K=z&&Dt.merge(z.common,z[w.method]);z&&Dt.forEach(["delete","get","head","post","put","patch","common"],Nt=>{delete z[Nt]}),w.headers=yf.concat(K,z);const j=[];let ue=!0;this.interceptors.request.forEach(function(vt){typeof vt.runWhen=="function"&&vt.runWhen(w)===!1||(ue=ue&&vt.synchronous,j.unshift(vt.fulfilled,vt.rejected))});const Se=[];this.interceptors.response.forEach(function(vt){Se.push(vt.fulfilled,vt.rejected)});let be,Ge=0,Ht;if(!ue){const Nt=[gX.bind(this),void 0];for(Nt.unshift.apply(Nt,j),Nt.push.apply(Nt,Se),Ht=Nt.length,be=Promise.resolve(w);Ge<Ht;)be=be.then(Nt[Ge++],Nt[Ge++]);return be}Ht=j.length;let Ut=w;for(Ge=0;Ge<Ht;){const Nt=j[Ge++],vt=j[Ge++];try{Ut=Nt(Ut)}catch(Ie){vt.call(this,Ie);break}}try{be=gX.call(this,Ut)}catch(Nt){return Promise.reject(Nt)}for(Ge=0,Ht=Se.length;Ge<Ht;)be=be.then(Se[Ge++],Se[Ge++]);return be}getUri(g){g=IS(this.defaults,g);const w=lJ(g.baseURL,g.url);return sJ(w,g.params,g.paramsSerializer)}}Dt.forEach(["delete","get","head","options"],function(g){PS.prototype[g]=function(w,E){return this.request(IS(E||{},{method:g,url:w,data:(E||{}).data}))}});Dt.forEach(["post","put","patch"],function(g){function w(E){return function(z,K,j){return this.request(IS(j||{},{method:g,headers:E?{"Content-Type":"multipart/form-data"}:{},url:z,data:K}))}}PS.prototype[g]=w(),PS.prototype[g+"Form"]=w(!0)});class rK{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let w;this.promise=new Promise(function(z){w=z});const E=this;this.promise.then(N=>{if(!E._listeners)return;let z=E._listeners.length;for(;z-- >0;)E._listeners[z](N);E._listeners=null}),this.promise.then=N=>{let z;const K=new Promise(j=>{E.subscribe(j),z=j}).then(N);return K.cancel=function(){E.unsubscribe(z)},K},g(function(z,K,j){E.reason||(E.reason=new Ck(z,K,j),w(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const w=this._listeners.indexOf(g);w!==-1&&this._listeners.splice(w,1)}toAbortSignal(){const g=new AbortController,w=E=>{g.abort(E)};return this.subscribe(w),g.signal.unsubscribe=()=>this.unsubscribe(w),g.signal}static source(){let g;return{token:new rK(function(N){g=N}),cancel:g}}}function Iee(p){return function(w){return p.apply(null,w)}}function Lee(p){return Dt.isObject(p)&&p.isAxiosError===!0}const jG={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jG).forEach(([p,g])=>{jG[g]=p});function gJ(p){const g=new PS(p),w=jX(PS.prototype.request,g);return Dt.extend(w,PS.prototype,g,{allOwnKeys:!0}),Dt.extend(w,g,null,{allOwnKeys:!0}),w.create=function(N){return gJ(IS(p,N))},w}const Hc=gJ(SM);Hc.Axios=PS;Hc.CanceledError=Ck;Hc.CancelToken=rK;Hc.isCancel=iJ;Hc.VERSION=hJ;Hc.toFormData=t7;Hc.AxiosError=As;Hc.Cancel=Hc.CanceledError;Hc.all=function(g){return Promise.all(g)};Hc.spread=Iee;Hc.isAxiosError=Lee;Hc.mergeConfig=IS;Hc.AxiosHeaders=yf;Hc.formToJSON=p=>aJ(Dt.isHTMLForm(p)?new FormData(p):p);Hc.getAdapter=mJ.getAdapter;Hc.HttpStatusCode=jG;Hc.default=Hc;window.axios=Hc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Fee=function(){function p(g,w){w===void 0&&(w=[]),this._eventType=g,this._eventFunctions=w}return p.prototype.init=function(){var g=this;this._eventFunctions.forEach(function(w){typeof window<"u"&&window.addEventListener(g._eventType,w)})},p}(),$ee=function(){function p(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{},Datepicker:{}}}return p.prototype.addInstance=function(g,w,E,N){if(N===void 0&&(N=!1),!this._instances[g])return console.warn("Flowbite: Component ".concat(g," does not exist.")),!1;if(this._instances[g][E]&&!N){console.warn("Flowbite: Instance with ID ".concat(E," already exists."));return}N&&this._instances[g][E]&&this._instances[g][E].destroyAndRemoveInstance(),this._instances[g][E||this._generateRandomId()]=w},p.prototype.getAllInstances=function(){return this._instances},p.prototype.getInstances=function(g){return this._instances[g]?this._instances[g]:(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p.prototype.getInstance=function(g,w){if(this._componentAndInstanceCheck(g,w)){if(!this._instances[g][w]){console.warn("Flowbite: Instance with ID ".concat(w," does not exist."));return}return this._instances[g][w]}},p.prototype.destroyAndRemoveInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&(this.destroyInstanceObject(g,w),this.removeInstance(g,w))},p.prototype.removeInstance=function(g,w){this._componentAndInstanceCheck(g,w)&&delete this._instances[g][w]},p.prototype.destroyInstanceObject=function(g,w){this._componentAndInstanceCheck(g,w)&&this._instances[g][w].destroy()},p.prototype.instanceExists=function(g,w){return!(!this._instances[g]||!this._instances[g][w])},p.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},p.prototype._componentAndInstanceCheck=function(g,w){return this._instances[g]?this._instances[g][w]?!0:(console.warn("Flowbite: Instance with ID ".concat(w," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(g," does not exist.")),!1)},p}(),Ws=new $ee;typeof window<"u"&&(window.FlowbiteInstances=Ws);var O6=function(){return O6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},O6.apply(this,arguments)},D6={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},Hee={id:null,override:!0},pJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=D6),N===void 0&&(N=Hee),this._instanceId=N.id?N.id:g.id,this._accordionEl=g,this._items=w,this._options=O6(O6({},D6),E),this._initialized=!1,this.init(),Ws.addInstance("Accordion",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.forEach(function(w){w.active&&g.open(w.id);var E=function(){g.toggle(w.id)};w.triggerEl.addEventListener("click",E),w.clickHandler=E}),this._initialized=!0)},p.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(g){g.triggerEl.removeEventListener("click",g.clickHandler),delete g.clickHandler}),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Accordion",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.open=function(g){var w,E,N=this,z=this.getItem(g);this._options.alwaysOpen||this._items.map(function(K){var j,ue;K!==z&&((j=K.triggerEl.classList).remove.apply(j,N._options.activeClasses.split(" ")),(ue=K.triggerEl.classList).add.apply(ue,N._options.inactiveClasses.split(" ")),K.targetEl.classList.add("hidden"),K.triggerEl.setAttribute("aria-expanded","false"),K.active=!1,K.iconEl&&K.iconEl.classList.add("rotate-180"))}),(w=z.triggerEl.classList).add.apply(w,this._options.activeClasses.split(" ")),(E=z.triggerEl.classList).remove.apply(E,this._options.inactiveClasses.split(" ")),z.triggerEl.setAttribute("aria-expanded","true"),z.targetEl.classList.remove("hidden"),z.active=!0,z.iconEl&&z.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,z)},p.prototype.toggle=function(g){var w=this.getItem(g);w.active?this.close(g):this.open(g),this._options.onToggle(this,w)},p.prototype.close=function(g){var w,E,N=this.getItem(g);(w=N.triggerEl.classList).remove.apply(w,this._options.activeClasses.split(" ")),(E=N.triggerEl.classList).add.apply(E,this._options.inactiveClasses.split(" ")),N.targetEl.classList.add("hidden"),N.triggerEl.setAttribute("aria-expanded","false"),N.active=!1,N.iconEl&&N.iconEl.classList.add("rotate-180"),this._options.onClose(this,N)},p.prototype.updateOnOpen=function(g){this._options.onOpen=g},p.prototype.updateOnClose=function(g){this._options.onClose=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function aK(){document.querySelectorAll("[data-accordion]").forEach(function(p){var g=p.getAttribute("data-accordion"),w=p.getAttribute("data-active-classes"),E=p.getAttribute("data-inactive-classes"),N=[];p.querySelectorAll("[data-accordion-target]").forEach(function(z){if(z.closest("[data-accordion]")===p){var K={id:z.getAttribute("data-accordion-target"),triggerEl:z,targetEl:document.querySelector(z.getAttribute("data-accordion-target")),iconEl:z.querySelector("[data-accordion-icon]"),active:z.getAttribute("aria-expanded")==="true"};N.push(K)}}),new pJ(p,N,{alwaysOpen:g==="open",activeClasses:w||D6.activeClasses,inactiveClasses:E||D6.inactiveClasses})})}typeof window<"u"&&(window.Accordion=pJ,window.initAccordions=aK);var R6=function(){return R6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},R6.apply(this,arguments)},bX={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},Vee={id:null,override:!0},qG=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=bX),N===void 0&&(N=Vee),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=R6(R6({},bX),E),this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Collapse",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){g.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Collapse",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},p.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},p.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},p.prototype.updateOnCollapse=function(g){this._options.onCollapse=g},p.prototype.updateOnExpand=function(g){this._options.onExpand=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function iK(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(p){var g=p.getAttribute("data-collapse-toggle"),w=document.getElementById(g);w?Ws.instanceExists("Collapse",w.getAttribute("id"))?new qG(w,p,{},{id:w.getAttribute("id")+"_"+Ws._generateRandomId()}):new qG(w,p):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=qG,window.initCollapses=iK);var RS=function(){return RS=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},RS.apply(this,arguments)},E6={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},zee={id:null,override:!0},bJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=E6),N===void 0&&(N=zee),this._instanceId=N.id?N.id:g.id,this._carouselEl=g,this._items=w,this._options=RS(RS(RS({},E6),E),{indicators:RS(RS({},E6.indicators),E.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Ws.addInstance("Carousel",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._items.map(function(w){w.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(w,E){w.el.addEventListener("click",function(){g.slideTo(E)})}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Carousel",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getItem=function(g){return this._items[g]},p.prototype.slideTo=function(g){var w=this._items[g],E={left:w.position===0?this._items[this._items.length-1]:this._items[w.position-1],middle:w,right:w.position===this._items.length-1?this._items[0]:this._items[w.position+1]};this._rotate(E),this._setActiveItem(w),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},p.prototype.next=function(){var g=this.getActiveItem(),w=null;g.position===this._items.length-1?w=this._items[0]:w=this._items[g.position+1],this.slideTo(w.position),this._options.onNext(this)},p.prototype.prev=function(){var g=this.getActiveItem(),w=null;g.position===0?w=this._items[this._items.length-1]:w=this._items[g.position-1],this.slideTo(w.position),this._options.onPrev(this)},p.prototype._rotate=function(g){if(this._items.map(function(w){w.el.classList.add("hidden")}),this._items.length===1){g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-20");return}g.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),g.left.el.classList.add("-translate-x-full","z-10"),g.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),g.middle.el.classList.add("translate-x-0","z-30"),g.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),g.right.el.classList.add("translate-x-full","z-20")},p.prototype.cycle=function(){var g=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){g.next()},this._intervalDuration))},p.prototype.pause=function(){clearInterval(this._intervalInstance)},p.prototype.getActiveItem=function(){return this._activeItem},p.prototype._setActiveItem=function(g){var w,E,N=this;this._activeItem=g;var z=g.position;this._indicators.length&&(this._indicators.map(function(K){var j,ue;K.el.setAttribute("aria-current","false"),(j=K.el.classList).remove.apply(j,N._options.indicators.activeClasses.split(" ")),(ue=K.el.classList).add.apply(ue,N._options.indicators.inactiveClasses.split(" "))}),(w=this._indicators[z].el.classList).add.apply(w,this._options.indicators.activeClasses.split(" ")),(E=this._indicators[z].el.classList).remove.apply(E,this._options.indicators.inactiveClasses.split(" ")),this._indicators[z].el.setAttribute("aria-current","true"))},p.prototype.updateOnNext=function(g){this._options.onNext=g},p.prototype.updateOnPrev=function(g){this._options.onPrev=g},p.prototype.updateOnChange=function(g){this._options.onChange=g},p}();function cK(){document.querySelectorAll("[data-carousel]").forEach(function(p){var g=p.getAttribute("data-carousel-interval"),w=p.getAttribute("data-carousel")==="slide",E=[],N=0;p.querySelectorAll("[data-carousel-item]").length&&Array.from(p.querySelectorAll("[data-carousel-item]")).map(function(Se,be){E.push({position:be,el:Se}),Se.getAttribute("data-carousel-item")==="active"&&(N=be)});var z=[];p.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(p.querySelectorAll("[data-carousel-slide-to]")).map(function(Se){z.push({position:parseInt(Se.getAttribute("data-carousel-slide-to")),el:Se})});var K=new bJ(p,E,{defaultPosition:N,indicators:{items:z},interval:g||E6.interval});w&&K.cycle();var j=p.querySelector("[data-carousel-next]"),ue=p.querySelector("[data-carousel-prev]");j&&j.addEventListener("click",function(){K.next()}),ue&&ue.addEventListener("click",function(){K.prev()})})}typeof window<"u"&&(window.Carousel=bJ,window.initCarousels=cK);var M6=function(){return M6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},M6.apply(this,arguments)},vX={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},Uee={id:null,override:!0},vJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=vX),N===void 0&&(N=Uee),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=M6(M6({},vX),E),this._initialized=!1,this.init(),Ws.addInstance("Dismiss",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){g.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Dismiss",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){g._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function lK(){document.querySelectorAll("[data-dismiss-target]").forEach(function(p){var g=p.getAttribute("data-dismiss-target"),w=document.querySelector(g);w?new vJ(w,p):console.error('The dismiss element with id "'.concat(g,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=vJ,window.initDismisses=lK);var wf="top",Ah="bottom",Oh="right",Cf="left",uK="auto",xM=[wf,Ah,Oh,Cf],gk="start",pM="end",Wee="clippingParents",yJ="viewport",iM="popper",Zee="reference",yX=xM.reduce(function(p,g){return p.concat([g+"-"+gk,g+"-"+pM])},[]),wJ=[].concat(xM,[uK]).reduce(function(p,g){return p.concat([g,g+"-"+gk,g+"-"+pM])},[]),jee="beforeRead",qee="read",Gee="afterRead",Kee="beforeMain",Yee="main",Xee="afterMain",Jee="beforeWrite",Qee="write",ete="afterWrite",tte=[jee,qee,Gee,Kee,Yee,Xee,Jee,Qee,ete];function f1(p){return p?(p.nodeName||"").toLowerCase():null}function pm(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var g=p.ownerDocument;return g&&g.defaultView||window}return p}function LS(p){var g=pm(p).Element;return p instanceof g||p instanceof Element}function kh(p){var g=pm(p).HTMLElement;return p instanceof g||p instanceof HTMLElement}function dK(p){if(typeof ShadowRoot>"u")return!1;var g=pm(p).ShadowRoot;return p instanceof g||p instanceof ShadowRoot}function nte(p){var g=p.state;Object.keys(g.elements).forEach(function(w){var E=g.styles[w]||{},N=g.attributes[w]||{},z=g.elements[w];!kh(z)||!f1(z)||(Object.assign(z.style,E),Object.keys(N).forEach(function(K){var j=N[K];j===!1?z.removeAttribute(K):z.setAttribute(K,j===!0?"":j)}))})}function ote(p){var g=p.state,w={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,w.popper),g.styles=w,g.elements.arrow&&Object.assign(g.elements.arrow.style,w.arrow),function(){Object.keys(g.elements).forEach(function(E){var N=g.elements[E],z=g.attributes[E]||{},K=Object.keys(g.styles.hasOwnProperty(E)?g.styles[E]:w[E]),j=K.reduce(function(ue,Se){return ue[Se]="",ue},{});!kh(N)||!f1(N)||(Object.assign(N.style,j),Object.keys(z).forEach(function(ue){N.removeAttribute(ue)}))})}}const ste={name:"applyStyles",enabled:!0,phase:"write",fn:nte,effect:ote,requires:["computeStyles"]};function d1(p){return p.split("-")[0]}var BS=Math.max,N6=Math.min,pk=Math.round;function GG(){var p=navigator.userAgentData;return p!=null&&p.brands&&Array.isArray(p.brands)?p.brands.map(function(g){return g.brand+"/"+g.version}).join(" "):navigator.userAgent}function CJ(){return!/^((?!chrome|android).)*safari/i.test(GG())}function bk(p,g,w){g===void 0&&(g=!1),w===void 0&&(w=!1);var E=p.getBoundingClientRect(),N=1,z=1;g&&kh(p)&&(N=p.offsetWidth>0&&pk(E.width)/p.offsetWidth||1,z=p.offsetHeight>0&&pk(E.height)/p.offsetHeight||1);var K=LS(p)?pm(p):window,j=K.visualViewport,ue=!CJ()&&w,Se=(E.left+(ue&&j?j.offsetLeft:0))/N,be=(E.top+(ue&&j?j.offsetTop:0))/z,Ge=E.width/N,Ht=E.height/z;return{width:Ge,height:Ht,top:be,right:Se+Ge,bottom:be+Ht,left:Se,x:Se,y:be}}function fK(p){var g=bk(p),w=p.offsetWidth,E=p.offsetHeight;return Math.abs(g.width-w)<=1&&(w=g.width),Math.abs(g.height-E)<=1&&(E=g.height),{x:p.offsetLeft,y:p.offsetTop,width:w,height:E}}function SJ(p,g){var w=g.getRootNode&&g.getRootNode();if(p.contains(g))return!0;if(w&&dK(w)){var E=g;do{if(E&&p.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function Gb(p){return pm(p).getComputedStyle(p)}function rte(p){return["table","td","th"].indexOf(f1(p))>=0}function Hy(p){return((LS(p)?p.ownerDocument:p.document)||window.document).documentElement}function o7(p){return f1(p)==="html"?p:p.assignedSlot||p.parentNode||(dK(p)?p.host:null)||Hy(p)}function wX(p){return!kh(p)||Gb(p).position==="fixed"?null:p.offsetParent}function ate(p){var g=/firefox/i.test(GG()),w=/Trident/i.test(GG());if(w&&kh(p)){var E=Gb(p);if(E.position==="fixed")return null}var N=o7(p);for(dK(N)&&(N=N.host);kh(N)&&["html","body"].indexOf(f1(N))<0;){var z=Gb(N);if(z.transform!=="none"||z.perspective!=="none"||z.contain==="paint"||["transform","perspective"].indexOf(z.willChange)!==-1||g&&z.willChange==="filter"||g&&z.filter&&z.filter!=="none")return N;N=N.parentNode}return null}function EM(p){for(var g=pm(p),w=wX(p);w&&rte(w)&&Gb(w).position==="static";)w=wX(w);return w&&(f1(w)==="html"||f1(w)==="body"&&Gb(w).position==="static")?g:w||ate(p)||g}function mK(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function uM(p,g,w){return BS(p,N6(g,w))}function ite(p,g,w){var E=uM(p,g,w);return E>w?w:E}function xJ(){return{top:0,right:0,bottom:0,left:0}}function EJ(p){return Object.assign({},xJ(),p)}function _J(p,g){return g.reduce(function(w,E){return w[E]=p,w},{})}var cte=function(g,w){return g=typeof g=="function"?g(Object.assign({},w.rects,{placement:w.placement})):g,EJ(typeof g!="number"?g:_J(g,xM))};function lte(p){var g,w=p.state,E=p.name,N=p.options,z=w.elements.arrow,K=w.modifiersData.popperOffsets,j=d1(w.placement),ue=mK(j),Se=[Cf,Oh].indexOf(j)>=0,be=Se?"height":"width";if(!(!z||!K)){var Ge=cte(N.padding,w),Ht=fK(z),Ut=ue==="y"?wf:Cf,Nt=ue==="y"?Ah:Oh,vt=w.rects.reference[be]+w.rects.reference[ue]-K[ue]-w.rects.popper[be],Ie=K[ue]-w.rects.reference[ue],on=EM(z),Et=on?ue==="y"?on.clientHeight||0:on.clientWidth||0:0,ce=vt/2-Ie/2,qe=Ge[Ut],On=Et-Ht[be]-Ge[Nt],jt=Et/2-Ht[be]/2+ce,ne=uM(qe,jt,On),Kt=ue;w.modifiersData[E]=(g={},g[Kt]=ne,g.centerOffset=ne-jt,g)}}function ute(p){var g=p.state,w=p.options,E=w.element,N=E===void 0?"[data-popper-arrow]":E;N!=null&&(typeof N=="string"&&(N=g.elements.popper.querySelector(N),!N)||SJ(g.elements.popper,N)&&(g.elements.arrow=N))}const dte={name:"arrow",enabled:!0,phase:"main",fn:lte,effect:ute,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vk(p){return p.split("-")[1]}var fte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mte(p,g){var w=p.x,E=p.y,N=g.devicePixelRatio||1;return{x:pk(w*N)/N||0,y:pk(E*N)/N||0}}function CX(p){var g,w=p.popper,E=p.popperRect,N=p.placement,z=p.variation,K=p.offsets,j=p.position,ue=p.gpuAcceleration,Se=p.adaptive,be=p.roundOffsets,Ge=p.isFixed,Ht=K.x,Ut=Ht===void 0?0:Ht,Nt=K.y,vt=Nt===void 0?0:Nt,Ie=typeof be=="function"?be({x:Ut,y:vt}):{x:Ut,y:vt};Ut=Ie.x,vt=Ie.y;var on=K.hasOwnProperty("x"),Et=K.hasOwnProperty("y"),ce=Cf,qe=wf,On=window;if(Se){var jt=EM(w),ne="clientHeight",Kt="clientWidth";if(jt===pm(w)&&(jt=Hy(w),Gb(jt).position!=="static"&&j==="absolute"&&(ne="scrollHeight",Kt="scrollWidth")),jt=jt,N===wf||(N===Cf||N===Oh)&&z===pM){qe=Ah;var Pn=Ge&&jt===On&&On.visualViewport?On.visualViewport.height:jt[ne];vt-=Pn-E.height,vt*=ue?1:-1}if(N===Cf||(N===wf||N===Ah)&&z===pM){ce=Oh;var Qt=Ge&&jt===On&&On.visualViewport?On.visualViewport.width:jt[Kt];Ut-=Qt-E.width,Ut*=ue?1:-1}}var $e=Object.assign({position:j},Se&&fte),ve=be===!0?mte({x:Ut,y:vt},pm(w)):{x:Ut,y:vt};if(Ut=ve.x,vt=ve.y,ue){var so;return Object.assign({},$e,(so={},so[qe]=Et?"0":"",so[ce]=on?"0":"",so.transform=(On.devicePixelRatio||1)<=1?"translate("+Ut+"px, "+vt+"px)":"translate3d("+Ut+"px, "+vt+"px, 0)",so))}return Object.assign({},$e,(g={},g[qe]=Et?vt+"px":"",g[ce]=on?Ut+"px":"",g.transform="",g))}function hte(p){var g=p.state,w=p.options,E=w.gpuAcceleration,N=E===void 0?!0:E,z=w.adaptive,K=z===void 0?!0:z,j=w.roundOffsets,ue=j===void 0?!0:j,Se={placement:d1(g.placement),variation:vk(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:N,isFixed:g.options.strategy==="fixed"};g.modifiersData.popperOffsets!=null&&(g.styles.popper=Object.assign({},g.styles.popper,CX(Object.assign({},Se,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:K,roundOffsets:ue})))),g.modifiersData.arrow!=null&&(g.styles.arrow=Object.assign({},g.styles.arrow,CX(Object.assign({},Se,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ue})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})}const gte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hte,data:{}};var p6={passive:!0};function pte(p){var g=p.state,w=p.instance,E=p.options,N=E.scroll,z=N===void 0?!0:N,K=E.resize,j=K===void 0?!0:K,ue=pm(g.elements.popper),Se=[].concat(g.scrollParents.reference,g.scrollParents.popper);return z&&Se.forEach(function(be){be.addEventListener("scroll",w.update,p6)}),j&&ue.addEventListener("resize",w.update,p6),function(){z&&Se.forEach(function(be){be.removeEventListener("scroll",w.update,p6)}),j&&ue.removeEventListener("resize",w.update,p6)}}const bte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:pte,data:{}};var vte={left:"right",right:"left",bottom:"top",top:"bottom"};function _6(p){return p.replace(/left|right|bottom|top/g,function(g){return vte[g]})}var yte={start:"end",end:"start"};function SX(p){return p.replace(/start|end/g,function(g){return yte[g]})}function hK(p){var g=pm(p),w=g.pageXOffset,E=g.pageYOffset;return{scrollLeft:w,scrollTop:E}}function gK(p){return bk(Hy(p)).left+hK(p).scrollLeft}function wte(p,g){var w=pm(p),E=Hy(p),N=w.visualViewport,z=E.clientWidth,K=E.clientHeight,j=0,ue=0;if(N){z=N.width,K=N.height;var Se=CJ();(Se||!Se&&g==="fixed")&&(j=N.offsetLeft,ue=N.offsetTop)}return{width:z,height:K,x:j+gK(p),y:ue}}function Cte(p){var g,w=Hy(p),E=hK(p),N=(g=p.ownerDocument)==null?void 0:g.body,z=BS(w.scrollWidth,w.clientWidth,N?N.scrollWidth:0,N?N.clientWidth:0),K=BS(w.scrollHeight,w.clientHeight,N?N.scrollHeight:0,N?N.clientHeight:0),j=-E.scrollLeft+gK(p),ue=-E.scrollTop;return Gb(N||w).direction==="rtl"&&(j+=BS(w.clientWidth,N?N.clientWidth:0)-z),{width:z,height:K,x:j,y:ue}}function pK(p){var g=Gb(p),w=g.overflow,E=g.overflowX,N=g.overflowY;return/auto|scroll|overlay|hidden/.test(w+N+E)}function TJ(p){return["html","body","#document"].indexOf(f1(p))>=0?p.ownerDocument.body:kh(p)&&pK(p)?p:TJ(o7(p))}function dM(p,g){var w;g===void 0&&(g=[]);var E=TJ(p),N=E===((w=p.ownerDocument)==null?void 0:w.body),z=pm(E),K=N?[z].concat(z.visualViewport||[],pK(E)?E:[]):E,j=g.concat(K);return N?j:j.concat(dM(o7(K)))}function KG(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function Ste(p,g){var w=bk(p,!1,g==="fixed");return w.top=w.top+p.clientTop,w.left=w.left+p.clientLeft,w.bottom=w.top+p.clientHeight,w.right=w.left+p.clientWidth,w.width=p.clientWidth,w.height=p.clientHeight,w.x=w.left,w.y=w.top,w}function xX(p,g,w){return g===yJ?KG(wte(p,w)):LS(g)?Ste(g,w):KG(Cte(Hy(p)))}function xte(p){var g=dM(o7(p)),w=["absolute","fixed"].indexOf(Gb(p).position)>=0,E=w&&kh(p)?EM(p):p;return LS(E)?g.filter(function(N){return LS(N)&&SJ(N,E)&&f1(N)!=="body"}):[]}function Ete(p,g,w,E){var N=g==="clippingParents"?xte(p):[].concat(g),z=[].concat(N,[w]),K=z[0],j=z.reduce(function(ue,Se){var be=xX(p,Se,E);return ue.top=BS(be.top,ue.top),ue.right=N6(be.right,ue.right),ue.bottom=N6(be.bottom,ue.bottom),ue.left=BS(be.left,ue.left),ue},xX(p,K,E));return j.width=j.right-j.left,j.height=j.bottom-j.top,j.x=j.left,j.y=j.top,j}function kJ(p){var g=p.reference,w=p.element,E=p.placement,N=E?d1(E):null,z=E?vk(E):null,K=g.x+g.width/2-w.width/2,j=g.y+g.height/2-w.height/2,ue;switch(N){case wf:ue={x:K,y:g.y-w.height};break;case Ah:ue={x:K,y:g.y+g.height};break;case Oh:ue={x:g.x+g.width,y:j};break;case Cf:ue={x:g.x-w.width,y:j};break;default:ue={x:g.x,y:g.y}}var Se=N?mK(N):null;if(Se!=null){var be=Se==="y"?"height":"width";switch(z){case gk:ue[Se]=ue[Se]-(g[be]/2-w[be]/2);break;case pM:ue[Se]=ue[Se]+(g[be]/2-w[be]/2);break}}return ue}function bM(p,g){g===void 0&&(g={});var w=g,E=w.placement,N=E===void 0?p.placement:E,z=w.strategy,K=z===void 0?p.strategy:z,j=w.boundary,ue=j===void 0?Wee:j,Se=w.rootBoundary,be=Se===void 0?yJ:Se,Ge=w.elementContext,Ht=Ge===void 0?iM:Ge,Ut=w.altBoundary,Nt=Ut===void 0?!1:Ut,vt=w.padding,Ie=vt===void 0?0:vt,on=EJ(typeof Ie!="number"?Ie:_J(Ie,xM)),Et=Ht===iM?Zee:iM,ce=p.rects.popper,qe=p.elements[Nt?Et:Ht],On=Ete(LS(qe)?qe:qe.contextElement||Hy(p.elements.popper),ue,be,K),jt=bk(p.elements.reference),ne=kJ({reference:jt,element:ce,strategy:"absolute",placement:N}),Kt=KG(Object.assign({},ce,ne)),Pn=Ht===iM?Kt:jt,Qt={top:On.top-Pn.top+on.top,bottom:Pn.bottom-On.bottom+on.bottom,left:On.left-Pn.left+on.left,right:Pn.right-On.right+on.right},$e=p.modifiersData.offset;if(Ht===iM&&$e){var ve=$e[N];Object.keys(Qt).forEach(function(so){var Me=[Oh,Ah].indexOf(so)>=0?1:-1,Pe=[wf,Ah].indexOf(so)>=0?"y":"x";Qt[so]+=ve[Pe]*Me})}return Qt}function _te(p,g){g===void 0&&(g={});var w=g,E=w.placement,N=w.boundary,z=w.rootBoundary,K=w.padding,j=w.flipVariations,ue=w.allowedAutoPlacements,Se=ue===void 0?wJ:ue,be=vk(E),Ge=be?j?yX:yX.filter(function(Nt){return vk(Nt)===be}):xM,Ht=Ge.filter(function(Nt){return Se.indexOf(Nt)>=0});Ht.length===0&&(Ht=Ge);var Ut=Ht.reduce(function(Nt,vt){return Nt[vt]=bM(p,{placement:vt,boundary:N,rootBoundary:z,padding:K})[d1(vt)],Nt},{});return Object.keys(Ut).sort(function(Nt,vt){return Ut[Nt]-Ut[vt]})}function Tte(p){if(d1(p)===uK)return[];var g=_6(p);return[SX(p),g,SX(g)]}function kte(p){var g=p.state,w=p.options,E=p.name;if(!g.modifiersData[E]._skip){for(var N=w.mainAxis,z=N===void 0?!0:N,K=w.altAxis,j=K===void 0?!0:K,ue=w.fallbackPlacements,Se=w.padding,be=w.boundary,Ge=w.rootBoundary,Ht=w.altBoundary,Ut=w.flipVariations,Nt=Ut===void 0?!0:Ut,vt=w.allowedAutoPlacements,Ie=g.options.placement,on=d1(Ie),Et=on===Ie,ce=ue||(Et||!Nt?[_6(Ie)]:Tte(Ie)),qe=[Ie].concat(ce).reduce(function(to,os){return to.concat(d1(os)===uK?_te(g,{placement:os,boundary:be,rootBoundary:Ge,padding:Se,flipVariations:Nt,allowedAutoPlacements:vt}):os)},[]),On=g.rects.reference,jt=g.rects.popper,ne=new Map,Kt=!0,Pn=qe[0],Qt=0;Qt<qe.length;Qt++){var $e=qe[Qt],ve=d1($e),so=vk($e)===gk,Me=[wf,Ah].indexOf(ve)>=0,Pe=Me?"width":"height",M=bM(g,{placement:$e,boundary:be,rootBoundary:Ge,altBoundary:Ht,padding:Se}),cn=Me?so?Oh:Cf:so?Ah:wf;On[Pe]>jt[Pe]&&(cn=_6(cn));var ct=_6(cn),Hn=[];if(z&&Hn.push(M[ve]<=0),j&&Hn.push(M[cn]<=0,M[ct]<=0),Hn.every(function(to){return to})){Pn=$e,Kt=!1;break}ne.set($e,Hn)}if(Kt)for(var rn=Nt?3:1,nt=function(os){var tt=qe.find(function(wt){var W=ne.get(wt);if(W)return W.slice(0,os).every(function(ta){return ta})});if(tt)return Pn=tt,"break"},eo=rn;eo>0;eo--){var ms=nt(eo);if(ms==="break")break}g.placement!==Pn&&(g.modifiersData[E]._skip=!0,g.placement=Pn,g.reset=!0)}}const Ate={name:"flip",enabled:!0,phase:"main",fn:kte,requiresIfExists:["offset"],data:{_skip:!1}};function EX(p,g,w){return w===void 0&&(w={x:0,y:0}),{top:p.top-g.height-w.y,right:p.right-g.width+w.x,bottom:p.bottom-g.height+w.y,left:p.left-g.width-w.x}}function _X(p){return[wf,Oh,Ah,Cf].some(function(g){return p[g]>=0})}function Ote(p){var g=p.state,w=p.name,E=g.rects.reference,N=g.rects.popper,z=g.modifiersData.preventOverflow,K=bM(g,{elementContext:"reference"}),j=bM(g,{altBoundary:!0}),ue=EX(K,E),Se=EX(j,N,z),be=_X(ue),Ge=_X(Se);g.modifiersData[w]={referenceClippingOffsets:ue,popperEscapeOffsets:Se,isReferenceHidden:be,hasPopperEscaped:Ge},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":be,"data-popper-escaped":Ge})}const Dte={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ote};function Rte(p,g,w){var E=d1(p),N=[Cf,wf].indexOf(E)>=0?-1:1,z=typeof w=="function"?w(Object.assign({},g,{placement:p})):w,K=z[0],j=z[1];return K=K||0,j=(j||0)*N,[Cf,Oh].indexOf(E)>=0?{x:j,y:K}:{x:K,y:j}}function Mte(p){var g=p.state,w=p.options,E=p.name,N=w.offset,z=N===void 0?[0,0]:N,K=wJ.reduce(function(be,Ge){return be[Ge]=Rte(Ge,g.rects,z),be},{}),j=K[g.placement],ue=j.x,Se=j.y;g.modifiersData.popperOffsets!=null&&(g.modifiersData.popperOffsets.x+=ue,g.modifiersData.popperOffsets.y+=Se),g.modifiersData[E]=K}const Nte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Mte};function Pte(p){var g=p.state,w=p.name;g.modifiersData[w]=kJ({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})}const Bte={name:"popperOffsets",enabled:!0,phase:"read",fn:Pte,data:{}};function Ite(p){return p==="x"?"y":"x"}function Lte(p){var g=p.state,w=p.options,E=p.name,N=w.mainAxis,z=N===void 0?!0:N,K=w.altAxis,j=K===void 0?!1:K,ue=w.boundary,Se=w.rootBoundary,be=w.altBoundary,Ge=w.padding,Ht=w.tether,Ut=Ht===void 0?!0:Ht,Nt=w.tetherOffset,vt=Nt===void 0?0:Nt,Ie=bM(g,{boundary:ue,rootBoundary:Se,padding:Ge,altBoundary:be}),on=d1(g.placement),Et=vk(g.placement),ce=!Et,qe=mK(on),On=Ite(qe),jt=g.modifiersData.popperOffsets,ne=g.rects.reference,Kt=g.rects.popper,Pn=typeof vt=="function"?vt(Object.assign({},g.rects,{placement:g.placement})):vt,Qt=typeof Pn=="number"?{mainAxis:Pn,altAxis:Pn}:Object.assign({mainAxis:0,altAxis:0},Pn),$e=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,ve={x:0,y:0};if(jt){if(z){var so,Me=qe==="y"?wf:Cf,Pe=qe==="y"?Ah:Oh,M=qe==="y"?"height":"width",cn=jt[qe],ct=cn+Ie[Me],Hn=cn-Ie[Pe],rn=Ut?-Kt[M]/2:0,nt=Et===gk?ne[M]:Kt[M],eo=Et===gk?-Kt[M]:-ne[M],ms=g.elements.arrow,to=Ut&&ms?fK(ms):{width:0,height:0},os=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:xJ(),tt=os[Me],wt=os[Pe],W=uM(0,ne[M],to[M]),ta=ce?ne[M]/2-rn-W-tt-Qt.mainAxis:nt-W-tt-Qt.mainAxis,uo=ce?-ne[M]/2+rn+W+wt+Qt.mainAxis:eo+W+wt+Qt.mainAxis,qo=g.elements.arrow&&EM(g.elements.arrow),Ho=qo?qe==="y"?qo.clientTop||0:qo.clientLeft||0:0,Wi=(so=$e==null?void 0:$e[qe])!=null?so:0,et=cn+ta-Wi-Ho,kt=cn+uo-Wi,dt=uM(Ut?N6(ct,et):ct,cn,Ut?BS(Hn,kt):Hn);jt[qe]=dt,ve[qe]=dt-cn}if(j){var xe,_o=qe==="x"?wf:Cf,To=qe==="x"?Ah:Oh,Zt=jt[On],ss=On==="y"?"height":"width",Mo=Zt+Ie[_o],$r=Zt-Ie[To],Po=[wf,Cf].indexOf(on)!==-1,Is=(xe=$e==null?void 0:$e[On])!=null?xe:0,Xa=Po?Mo:Zt-ne[ss]-Kt[ss]-Is+Qt.altAxis,ws=Po?Zt+ne[ss]+Kt[ss]-Is-Qt.altAxis:$r,bs=Ut&&Po?ite(Xa,Zt,ws):uM(Ut?Xa:Mo,Zt,Ut?ws:$r);jt[On]=bs,ve[On]=bs-Zt}g.modifiersData[E]=ve}}const Fte={name:"preventOverflow",enabled:!0,phase:"main",fn:Lte,requiresIfExists:["offset"]};function $te(p){return{scrollLeft:p.scrollLeft,scrollTop:p.scrollTop}}function Hte(p){return p===pm(p)||!kh(p)?hK(p):$te(p)}function Vte(p){var g=p.getBoundingClientRect(),w=pk(g.width)/p.offsetWidth||1,E=pk(g.height)/p.offsetHeight||1;return w!==1||E!==1}function zte(p,g,w){w===void 0&&(w=!1);var E=kh(g),N=kh(g)&&Vte(g),z=Hy(g),K=bk(p,N,w),j={scrollLeft:0,scrollTop:0},ue={x:0,y:0};return(E||!E&&!w)&&((f1(g)!=="body"||pK(z))&&(j=Hte(g)),kh(g)?(ue=bk(g,!0),ue.x+=g.clientLeft,ue.y+=g.clientTop):z&&(ue.x=gK(z))),{x:K.left+j.scrollLeft-ue.x,y:K.top+j.scrollTop-ue.y,width:K.width,height:K.height}}function Ute(p){var g=new Map,w=new Set,E=[];p.forEach(function(z){g.set(z.name,z)});function N(z){w.add(z.name);var K=[].concat(z.requires||[],z.requiresIfExists||[]);K.forEach(function(j){if(!w.has(j)){var ue=g.get(j);ue&&N(ue)}}),E.push(z)}return p.forEach(function(z){w.has(z.name)||N(z)}),E}function Wte(p){var g=Ute(p);return tte.reduce(function(w,E){return w.concat(g.filter(function(N){return N.phase===E}))},[])}function Zte(p){var g;return function(){return g||(g=new Promise(function(w){Promise.resolve().then(function(){g=void 0,w(p())})})),g}}function jte(p){var g=p.reduce(function(w,E){var N=w[E.name];return w[E.name]=N?Object.assign({},N,E,{options:Object.assign({},N.options,E.options),data:Object.assign({},N.data,E.data)}):E,w},{});return Object.keys(g).map(function(w){return g[w]})}var TX={placement:"bottom",modifiers:[],strategy:"absolute"};function kX(){for(var p=arguments.length,g=new Array(p),w=0;w<p;w++)g[w]=arguments[w];return!g.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function qte(p){p===void 0&&(p={});var g=p,w=g.defaultModifiers,E=w===void 0?[]:w,N=g.defaultOptions,z=N===void 0?TX:N;return function(j,ue,Se){Se===void 0&&(Se=z);var be={placement:"bottom",orderedModifiers:[],options:Object.assign({},TX,z),modifiersData:{},elements:{reference:j,popper:ue},attributes:{},styles:{}},Ge=[],Ht=!1,Ut={state:be,setOptions:function(on){var Et=typeof on=="function"?on(be.options):on;vt(),be.options=Object.assign({},z,be.options,Et),be.scrollParents={reference:LS(j)?dM(j):j.contextElement?dM(j.contextElement):[],popper:dM(ue)};var ce=Wte(jte([].concat(E,be.options.modifiers)));return be.orderedModifiers=ce.filter(function(qe){return qe.enabled}),Nt(),Ut.update()},forceUpdate:function(){if(!Ht){var on=be.elements,Et=on.reference,ce=on.popper;if(kX(Et,ce)){be.rects={reference:zte(Et,EM(ce),be.options.strategy==="fixed"),popper:fK(ce)},be.reset=!1,be.placement=be.options.placement,be.orderedModifiers.forEach(function(Qt){return be.modifiersData[Qt.name]=Object.assign({},Qt.data)});for(var qe=0;qe<be.orderedModifiers.length;qe++){if(be.reset===!0){be.reset=!1,qe=-1;continue}var On=be.orderedModifiers[qe],jt=On.fn,ne=On.options,Kt=ne===void 0?{}:ne,Pn=On.name;typeof jt=="function"&&(be=jt({state:be,options:Kt,name:Pn,instance:Ut})||be)}}}},update:Zte(function(){return new Promise(function(Ie){Ut.forceUpdate(),Ie(be)})}),destroy:function(){vt(),Ht=!0}};if(!kX(j,ue))return Ut;Ut.setOptions(Se).then(function(Ie){!Ht&&Se.onFirstUpdate&&Se.onFirstUpdate(Ie)});function Nt(){be.orderedModifiers.forEach(function(Ie){var on=Ie.name,Et=Ie.options,ce=Et===void 0?{}:Et,qe=Ie.effect;if(typeof qe=="function"){var On=qe({state:be,name:on,instance:Ut,options:ce}),jt=function(){};Ge.push(On||jt)}})}function vt(){Ge.forEach(function(Ie){return Ie()}),Ge=[]}return Ut}}var Gte=[bte,Bte,gte,ste,Nte,Ate,Fte,dte,Dte],bK=qte({defaultModifiers:Gte}),Py=function(){return Py=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Py.apply(this,arguments)},b6=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,z;E<N;E++)(z||!(E in g))&&(z||(z=Array.prototype.slice.call(g,0,E)),z[E]=g[E]);return p.concat(z||Array.prototype.slice.call(g))},By={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},Kte={id:null,override:!0},AJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=By),N===void 0&&(N=Kte),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Py(Py({},By),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Dropdown",this,this._instanceId,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},p.prototype.destroy=function(){var g=this,w=this._getTriggerEvents();this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._clickHandler)}),this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.removeEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hoverHideHandler),g._targetEl.removeEventListener(E,g._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},p.prototype.removeInstance=function(){Ws.removeInstance("Dropdown",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._clickHandler=function(){g.toggle()},this._options.triggerType==="click"&&w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._clickHandler)}),this._hoverShowTriggerElHandler=function(E){E.type==="click"?g.toggle():setTimeout(function(){g.show()},g._options.delay)},this._hoverShowTargetElHandler=function(){g.show()},this._hoverHideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},g._options.delay)},this._options.triggerType==="hover"&&(w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverShowTriggerElHandler),g._targetEl.addEventListener(E,g._hoverShowTargetElHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hoverHideHandler),g._targetEl.addEventListener(E,g._hoverHideHandler)}))},p.prototype._createPopperInstance=function(){return bK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target,N=this._options.ignoreClickOutsideClass,z=!1;if(N){var K=document.querySelectorAll(".".concat(N));K.forEach(function(j){if(j.contains(E)){z=!0;return}})}E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&!z&&this.isVisible()&&this.hide()},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.isVisible=function(){return this._visible},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(g){return Py(Py({},g),{modifiers:b6(b6([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(g){return Py(Py({},g),{modifiers:b6(b6([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function vK(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(p){var g=p.getAttribute("data-dropdown-toggle"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-dropdown-placement"),N=p.getAttribute("data-dropdown-offset-skidding"),z=p.getAttribute("data-dropdown-offset-distance"),K=p.getAttribute("data-dropdown-trigger"),j=p.getAttribute("data-dropdown-delay"),ue=p.getAttribute("data-dropdown-ignore-click-outside-class");new AJ(w,p,{placement:E||By.placement,triggerType:K||By.triggerType,offsetSkidding:N?parseInt(N):By.offsetSkidding,offsetDistance:z?parseInt(z):By.offsetDistance,delay:j?parseInt(j):By.delay,ignoreClickOutsideClass:ue||By.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(g,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=AJ,window.initDropdowns=vK);var P6=function(){return P6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},P6.apply(this,arguments)},B6={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},Yte={id:null,override:!0},OJ=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=B6),E===void 0&&(E=Yte),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=P6(P6({},B6),w),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Ws.addInstance("Modal",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(w){g._targetEl.classList.add(w)}),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Modal",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._createBackdrop=function(){var g;if(this._isHidden){var w=document.createElement("div");(g=w.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(w),this._backdropEl=w}},p.prototype._destroyBackdropEl=function(){!this._isHidden&&this._backdropEl&&(this._backdropEl.remove(),this._backdropEl=null)},p.prototype._setupModalCloseEventListeners=function(){var g=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(w){g._handleOutsideClick(w.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._handleOutsideClick=function(g){(g===this._targetEl||g===this._backdropEl&&this.isVisible())&&this.hide()},p.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},p.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},p.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},p.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},p.prototype.isVisible=function(){return!this._isHidden},p.prototype.isHidden=function(){return this._isHidden},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function yK(){document.querySelectorAll("[data-modal-target]").forEach(function(p){var g=p.getAttribute("data-modal-target"),w=document.getElementById(g);if(w){var E=w.getAttribute("data-modal-placement"),N=w.getAttribute("data-modal-backdrop");new OJ(w,{placement:E||B6.placement,backdrop:N||B6.backdrop})}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(p){var g=p.getAttribute("data-modal-toggle"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Modal",g);if(E){var N=function(){E.toggle()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(p){var g=p.getAttribute("data-modal-show"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Modal",g);if(E){var N=function(){E.show()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(p){var g=p.getAttribute("data-modal-hide"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Modal",g);if(E){var N=function(){E.hide()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Modal with id ".concat(g," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(g," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=OJ,window.initModals=yK);var I6=function(){return I6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},I6.apply(this,arguments)},MS={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},Xte={id:null,override:!0},DJ=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=MS),E===void 0&&(E=Xte),this._eventListenerInstances=[],this._instanceId=E.id?E.id:g.id,this._targetEl=g,this._options=I6(I6({},MS),w),this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Drawer",this,this._instanceId,E.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(w){g._targetEl.classList.add(w)}),this._handleEscapeKey=function(w){w.key==="Escape"&&g.isVisible()&&g.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("Drawer",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.add(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.remove(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.add(w)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){var g=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(w){g._targetEl.classList.remove(w)})):(this._getPlacementClasses(this._options.placement).active.map(function(w){g._targetEl.classList.add(w)}),this._getPlacementClasses(this._options.placement).inactive.map(function(w){g._targetEl.classList.remove(w)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype._createBackdrop=function(){var g,w=this;if(!this._visible){var E=document.createElement("div");E.setAttribute("drawer-backdrop",""),(g=E.classList).add.apply(g,this._options.backdropClasses.split(" ")),document.querySelector("body").append(E),E.addEventListener("click",function(){w.hide()})}},p.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},p.prototype._getPlacementClasses=function(g){switch(g){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype.addEventListenerInstance=function(g,w,E){this._eventListenerInstances.push({element:g,type:w,handler:E})},p.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(g){g.element.removeEventListener(g.type,g.handler)}),this._eventListenerInstances=[]},p.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function wK(){document.querySelectorAll("[data-drawer-target]").forEach(function(p){var g=p.getAttribute("data-drawer-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-drawer-placement"),N=p.getAttribute("data-drawer-body-scrolling"),z=p.getAttribute("data-drawer-backdrop"),K=p.getAttribute("data-drawer-edge"),j=p.getAttribute("data-drawer-edge-offset");new DJ(w,{placement:E||MS.placement,bodyScrolling:N?N==="true":MS.bodyScrolling,backdrop:z?z==="true":MS.backdrop,edge:K?K==="true":MS.edge,edgeOffset:j||MS.edgeOffset})}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(p){var g=p.getAttribute("data-drawer-toggle"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Drawer",g);if(E){var N=function(){E.toggle()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(p){var g=p.getAttribute("data-drawer-dismiss")?p.getAttribute("data-drawer-dismiss"):p.getAttribute("data-drawer-hide"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Drawer",g);if(E){var N=function(){E.hide()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(p){var g=p.getAttribute("data-drawer-show"),w=document.getElementById(g);if(w){var E=Ws.getInstance("Drawer",g);if(E){var N=function(){E.show()};p.addEventListener("click",N),E.addEventListenerInstance(p,"click",N)}else console.error("Drawer with id ".concat(g," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(g," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=DJ,window.initDrawers=wK);var L6=function(){return L6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},L6.apply(this,arguments)},F6={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},Jte={id:null,override:!0},RJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=[]),E===void 0&&(E=F6),N===void 0&&(N=Jte),this._instanceId=N.id?N.id:g.id,this._tabsEl=g,this._items=w,this._activeTab=E?this.getTab(E.defaultTabId):null,this._options=L6(L6({},F6),E),this._initialized=!1,this.init(),Ws.addInstance("Tabs",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(w){w.triggerEl.addEventListener("click",function(E){E.preventDefault(),g.show(w.id)})}))},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},p.prototype.removeInstance=function(){this.destroy(),Ws.removeInstance("Tabs",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getActiveTab=function(){return this._activeTab},p.prototype.setActiveTab=function(g){this._activeTab=g},p.prototype.getTab=function(g){return this._items.filter(function(w){return w.id===g})[0]},p.prototype.show=function(g,w){var E,N,z=this;w===void 0&&(w=!1);var K=this.getTab(g);K===this._activeTab&&!w||(this._items.map(function(j){var ue,Se;j!==K&&((ue=j.triggerEl.classList).remove.apply(ue,z._options.activeClasses.split(" ")),(Se=j.triggerEl.classList).add.apply(Se,z._options.inactiveClasses.split(" ")),j.targetEl.classList.add("hidden"),j.triggerEl.setAttribute("aria-selected","false"))}),(E=K.triggerEl.classList).add.apply(E,this._options.activeClasses.split(" ")),(N=K.triggerEl.classList).remove.apply(N,this._options.inactiveClasses.split(" ")),K.triggerEl.setAttribute("aria-selected","true"),K.targetEl.classList.remove("hidden"),this.setActiveTab(K),this._options.onShow(this,K))},p.prototype.updateOnShow=function(g){this._options.onShow=g},p}();function CK(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(p){var g=[],w=p.getAttribute("data-tabs-active-classes"),E=p.getAttribute("data-tabs-inactive-classes"),N=null;p.querySelectorAll('[role="tab"]').forEach(function(z){var K=z.getAttribute("aria-selected")==="true",j={id:z.getAttribute("data-tabs-target"),triggerEl:z,targetEl:document.querySelector(z.getAttribute("data-tabs-target"))};g.push(j),K&&(N=j.id)}),new RJ(p,g,{defaultTabId:N,activeClasses:w||F6.activeClasses,inactiveClasses:E||F6.inactiveClasses})})}typeof window<"u"&&(window.Tabs=RJ,window.initTabs=CK);var Iy=function(){return Iy=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Iy.apply(this,arguments)},v6=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,z;E<N;E++)(z||!(E in g))&&(z||(z=Array.prototype.slice.call(g,0,E)),z[E]=g[E]);return p.concat(z||Array.prototype.slice.call(g))},$6={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Qte={id:null,override:!0},MJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=$6),N===void 0&&(N=Qte),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Iy(Iy({},$6),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Tooltip",this,this._instanceId,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Ws.removeInstance("Tooltip",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){g.hide()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return bK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Iy(Iy({},g),{modifiers:v6(v6([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Iy(Iy({},g),{modifiers:v6(v6([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function SK(){document.querySelectorAll("[data-tooltip-target]").forEach(function(p){var g=p.getAttribute("data-tooltip-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-tooltip-trigger"),N=p.getAttribute("data-tooltip-placement");new MJ(w,p,{placement:N||$6.placement,triggerType:E||$6.triggerType})}else console.error('The tooltip element with id "'.concat(g,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=MJ,window.initTooltips=SK);var Ly=function(){return Ly=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},Ly.apply(this,arguments)},y6=function(p,g,w){if(w||arguments.length===2)for(var E=0,N=g.length,z;E<N;E++)(z||!(E in g))&&(z||(z=Array.prototype.slice.call(g,0,E)),z[E]=g[E]);return p.concat(z||Array.prototype.slice.call(g))},fM={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},ene={id:null,override:!0},NJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=fM),N===void 0&&(N=ene),this._instanceId=N.id?N.id:g.id,this._targetEl=g,this._triggerEl=w,this._options=Ly(Ly({},fM),E),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Popover",this,N.id?N.id:this._targetEl.id,N.override)}return p.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEvents();w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showHandler),g._targetEl.removeEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._hideHandler),g._targetEl.removeEventListener(E,g._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},p.prototype.removeInstance=function(){Ws.removeInstance("Popover",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype._setupEventListeners=function(){var g=this,w=this._getTriggerEvents();this._showHandler=function(){g.show()},this._hideHandler=function(){setTimeout(function(){g._targetEl.matches(":hover")||g.hide()},100)},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showHandler),g._targetEl.addEventListener(E,g._showHandler)}),w.hideEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._hideHandler),g._targetEl.addEventListener(E,g._hideHandler)})},p.prototype._createPopperInstance=function(){return bK(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},p.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype._setupKeydownListener=function(){var g=this;this._keydownEventListener=function(w){w.key==="Escape"&&g.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},p.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},p.prototype._setupClickOutsideListener=function(){var g=this;this._clickOutsideEventListener=function(w){g._handleClickOutside(w,g._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},p.prototype._handleClickOutside=function(g,w){var E=g.target;E!==w&&!w.contains(E)&&!this._triggerEl.contains(E)&&this.isVisible()&&this.hide()},p.prototype.isVisible=function(){return this._visible},p.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},p.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(g){return Ly(Ly({},g),{modifiers:y6(y6([],g.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},p.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(g){return Ly(Ly({},g),{modifiers:y6(y6([],g.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function xK(){document.querySelectorAll("[data-popover-target]").forEach(function(p){var g=p.getAttribute("data-popover-target"),w=document.getElementById(g);if(w){var E=p.getAttribute("data-popover-trigger"),N=p.getAttribute("data-popover-placement"),z=p.getAttribute("data-popover-offset");new NJ(w,p,{placement:N||fM.placement,offset:z?parseInt(z):fM.offset,triggerType:E||fM.triggerType})}else console.error('The popover element with id "'.concat(g,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=NJ,window.initPopovers=xK);var H6=function(){return H6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},H6.apply(this,arguments)},YG={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},tne={id:null,override:!0},PJ=function(){function p(g,w,E,N,z){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),N===void 0&&(N=YG),z===void 0&&(z=tne),this._instanceId=z.id?z.id:E.id,this._parentEl=g,this._triggerEl=w,this._targetEl=E,this._options=H6(H6({},YG),N),this._visible=!1,this._initialized=!1,this.init(),Ws.addInstance("Dial",this,this._instanceId,z.override)}return p.prototype.init=function(){var g=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){g.show()},w.showEvents.forEach(function(E){g._triggerEl.addEventListener(E,g._showEventHandler),g._targetEl.addEventListener(E,g._showEventHandler)}),this._hideEventHandler=function(){g._parentEl.matches(":hover")||g.hide()},w.hideEvents.forEach(function(E){g._parentEl.addEventListener(E,g._hideEventHandler)}),this._initialized=!0}},p.prototype.destroy=function(){var g=this;if(this._initialized){var w=this._getTriggerEventTypes(this._options.triggerType);w.showEvents.forEach(function(E){g._triggerEl.removeEventListener(E,g._showEventHandler),g._targetEl.removeEventListener(E,g._showEventHandler)}),w.hideEvents.forEach(function(E){g._parentEl.removeEventListener(E,g._hideEventHandler)}),this._initialized=!1}},p.prototype.removeInstance=function(){Ws.removeInstance("Dial",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},p.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},p.prototype.toggle=function(){this._visible?this.hide():this.show()},p.prototype.isHidden=function(){return!this._visible},p.prototype.isVisible=function(){return this._visible},p.prototype._getTriggerEventTypes=function(g){switch(g){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p.prototype.updateOnToggle=function(g){this._options.onToggle=g},p}();function EK(){document.querySelectorAll("[data-dial-init]").forEach(function(p){var g=p.querySelector("[data-dial-toggle]");if(g){var w=g.getAttribute("data-dial-toggle"),E=document.getElementById(w);if(E){var N=g.getAttribute("data-dial-trigger");new PJ(p,g,E,{triggerType:N||YG.triggerType})}else console.error("Dial with id ".concat(w," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(p.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=PJ,window.initDials=EK);var V6=function(){return V6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},V6.apply(this,arguments)},AX={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},nne={id:null,override:!0},BJ=function(){function p(g,w,E,N,z){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=null),N===void 0&&(N=AX),z===void 0&&(z=nne),this._instanceId=z.id?z.id:g.id,this._targetEl=g,this._incrementEl=w,this._decrementEl=E,this._options=V6(V6({},AX),N),this._initialized=!1,this.init(),Ws.addInstance("InputCounter",this,this._instanceId,z.override)}return p.prototype.init=function(){var g=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(w){{var E=w.target;/^\d*$/.test(E.value)||(E.value=E.value.replace(/[^\d]/g,"")),g._options.maxValue!==null&&parseInt(E.value)>g._options.maxValue&&(E.value=g._options.maxValue.toString()),g._options.minValue!==null&&parseInt(E.value)<g._options.minValue&&(E.value=g._options.minValue.toString())}},this._incrementClickHandler=function(){g.increment()},this._decrementClickHandler=function(){g.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("InputCounter",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},p.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},p.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},p.prototype.updateOnIncrement=function(g){this._options.onIncrement=g},p.prototype.updateOnDecrement=function(g){this._options.onDecrement=g},p}();function _K(){document.querySelectorAll("[data-input-counter]").forEach(function(p){var g=p.id,w=document.querySelector('[data-input-counter-increment="'+g+'"]'),E=document.querySelector('[data-input-counter-decrement="'+g+'"]'),N=p.getAttribute("data-input-counter-min"),z=p.getAttribute("data-input-counter-max");p?Ws.instanceExists("InputCounter",p.getAttribute("id"))||new BJ(p,w||null,E||null,{minValue:N?parseInt(N):null,maxValue:z?parseInt(z):null}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=BJ,window.initInputCounters=_K);var z6=function(){return z6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},z6.apply(this,arguments)},U6={htmlEntities:!1,contentType:"input",onCopy:function(){}},one={id:null,override:!0},IJ=function(){function p(g,w,E,N){g===void 0&&(g=null),w===void 0&&(w=null),E===void 0&&(E=U6),N===void 0&&(N=one),this._instanceId=N.id?N.id:w.id,this._triggerEl=g,this._targetEl=w,this._options=z6(z6({},U6),E),this._initialized=!1,this.init(),Ws.addInstance("CopyClipboard",this,this._instanceId,N.override)}return p.prototype.init=function(){var g=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){g.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},p.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},p.prototype.removeInstance=function(){Ws.removeInstance("CopyClipboard",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},p.prototype.copy=function(){var g=this.getTargetValue();this._options.htmlEntities&&(g=this.decodeHTML(g));var w=document.createElement("textarea");return w.value=g,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),this._options.onCopy(this),g},p.prototype.decodeHTML=function(g){var w=document.createElement("textarea");return w.innerHTML=g,w.textContent},p.prototype.updateOnCopyCallback=function(g){this._options.onCopy=g},p}();function TK(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(p){var g=p.getAttribute("data-copy-to-clipboard-target"),w=document.getElementById(g),E=p.getAttribute("data-copy-to-clipboard-content-type"),N=p.getAttribute("data-copy-to-clipboard-html-entities");w?Ws.instanceExists("CopyClipboard",w.getAttribute("id"))||new IJ(p,w,{htmlEntities:N&&N==="true"?!0:U6.htmlEntities,contentType:E||U6.contentType}):console.error('The target element with id "'.concat(g,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=IJ,window.initClipboards=TK);function XG(p,g){(g==null||g>p.length)&&(g=p.length);for(var w=0,E=Array(g);w<g;w++)E[w]=p[w];return E}function sne(p){if(Array.isArray(p))return p}function rne(p){if(Array.isArray(p))return XG(p)}function ane(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function kK(p,g,w){return g=$y(g),dne(p,LJ()?Reflect.construct(g,w||[],$y(p).constructor):g.apply(p,w))}function $S(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function OX(p,g){for(var w=0;w<g.length;w++){var E=g[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,hne(E.key),E)}}function HS(p,g,w){return g&&OX(p.prototype,g),w&&OX(p,w),Object.defineProperty(p,"prototype",{writable:!1}),p}function vM(){return vM=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(p,g,w){var E=fne(p,g);if(E){var N=Object.getOwnPropertyDescriptor(E,g);return N.get?N.get.call(arguments.length<3?p:w):N.value}},vM.apply(null,arguments)}function $y(p){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},$y(p)}function AK(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),g&&JG(p,g)}function LJ(){try{var p=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LJ=function(){return!!p})()}function ine(p){if(typeof Symbol<"u"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function cne(p,g){var w=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var E,N,z,K,j=[],ue=!0,Se=!1;try{if(z=(w=w.call(p)).next,g===0){if(Object(w)!==w)return;ue=!1}else for(;!(ue=(E=z.call(w)).done)&&(j.push(E.value),j.length!==g);ue=!0);}catch(be){Se=!0,N=be}finally{try{if(!ue&&w.return!=null&&(K=w.return(),Object(K)!==K))return}finally{if(Se)throw N}}return j}}function lne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function une(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dne(p,g){if(g&&(typeof g=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ane(p)}function JG(p,g){return JG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w},JG(p,g)}function gm(p,g){return sne(p)||cne(p,g)||FJ(p,g)||lne()}function fne(p,g){for(;!{}.hasOwnProperty.call(p,g)&&(p=$y(p))!==null;);return p}function _M(p){return rne(p)||ine(p)||FJ(p)||une()}function mne(p,g){if(typeof p!="object"||!p)return p;var w=p[Symbol.toPrimitive];if(w!==void 0){var E=w.call(p,g);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}function hne(p){var g=mne(p,"string");return typeof g=="symbol"?g:g+""}function W6(p){"@babel/helpers - typeof";return W6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},W6(p)}function FJ(p,g){if(p){if(typeof p=="string")return XG(p,g);var w={}.toString.call(p).slice(8,-1);return w==="Object"&&p.constructor&&(w=p.constructor.name),w==="Map"||w==="Set"?Array.from(p):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?XG(p,g):void 0}}function Kb(p,g){return Object.prototype.hasOwnProperty.call(p,g)}function OK(p){return p[p.length-1]}function FS(p){for(var g=arguments.length,w=new Array(g>1?g-1:0),E=1;E<g;E++)w[E-1]=arguments[E];return w.forEach(function(N){p.includes(N)||p.push(N)}),p}function NG(p,g){return p?p.split(g):[]}function DK(p,g,w){var E=g===void 0||p>=g,N=w===void 0||p<=w;return E&&N}function $J(p,g,w){return p<g?g:p>w?w:p}function yk(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",z=Object.keys(w).reduce(function(j,ue){var Se=w[ue];return typeof Se=="function"&&(Se=Se(E)),"".concat(j," ").concat(ue,'="').concat(Se,'"')},p);N+="<".concat(z,"></").concat(p,">");var K=E+1;return K<g?yk(p,g,w,K,N):N}function RK(p){return p.replace(/>\s+/g,">").replace(/\s+</,"<")}function QG(p){return new Date(p).setHours(0,0,0,0)}function VS(){return new Date().setHours(0,0,0,0)}function Fy(){switch(arguments.length){case 0:return VS();case 1:return QG(arguments.length<=0?void 0:arguments[0])}var p=new Date(0);return p.setFullYear.apply(p,arguments),p.setHours(0,0,0,0)}function fk(p,g){var w=new Date(p);return w.setDate(w.getDate()+g)}function gne(p,g){return fk(p,g*7)}function Z6(p,g){var w=new Date(p),E=w.getMonth()+g,N=E%12;N<0&&(N+=12);var z=w.setMonth(E);return w.getMonth()!==N?w.setDate(0):z}function mk(p,g){var w=new Date(p),E=w.getMonth(),N=w.setFullYear(w.getFullYear()+g);return E===1&&w.getMonth()===2?w.setDate(0):N}function DX(p,g){return(p-g+7)%7}function j6(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=new Date(p).getDay();return fk(p,DX(g,w)-DX(E,w))}function pne(p){var g=j6(p,4,1),w=j6(new Date(g).setMonth(0,4),4,1);return Math.round((g-w)/6048e5)+1}function DS(p,g){var w=new Date(p).getFullYear();return Math.floor(w/g)*g}var eK=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,bne=/[\s!-/:-@[-`{-~年月日]+/,PG={},RX={y:function(g,w){return new Date(g).setFullYear(parseInt(w,10))},m:function(g,w,E){var N=new Date(g),z=parseInt(w,10)-1;if(isNaN(z)){if(!w)return NaN;var K=w.toLowerCase(),j=function(Se){return Se.toLowerCase().startsWith(K)};if(z=E.monthsShort.findIndex(j),z<0&&(z=E.months.findIndex(j)),z<0)return NaN}return N.setMonth(z),N.getMonth()!==HJ(z)?N.setDate(0):N.getTime()},d:function(g,w){return new Date(g).setDate(parseInt(w,10))}},vne={d:function(g){return g.getDate()},dd:function(g){return w6(g.getDate(),2)},D:function(g,w){return w.daysShort[g.getDay()]},DD:function(g,w){return w.days[g.getDay()]},m:function(g){return g.getMonth()+1},mm:function(g){return w6(g.getMonth()+1,2)},M:function(g,w){return w.monthsShort[g.getMonth()]},MM:function(g,w){return w.months[g.getMonth()]},y:function(g){return g.getFullYear()},yy:function(g){return w6(g.getFullYear(),2).slice(-2)},yyyy:function(g){return w6(g.getFullYear(),4)}};function HJ(p){return p>-1?p%12:HJ(p+12)}function w6(p,g){return p.toString().padStart(g,"0")}function VJ(p){if(typeof p!="string")throw new Error("Invalid date format.");if(p in PG)return PG[p];var g=p.split(eK),w=p.match(new RegExp(eK,"g"));if(g.length===0||!w)throw new Error("Invalid date format.");var E=w.map(function(z){return vne[z]}),N=Object.keys(RX).reduce(function(z,K){var j=w.find(function(ue){return ue[0]!=="D"&&ue[0].toLowerCase()===K});return j&&z.push(K),z},[]);return PG[p]={parser:function(K,j){var ue=K.split(bne).reduce(function(Se,be,Ge){if(be.length>0&&w[Ge]){var Ht=w[Ge][0];Ht==="M"?Se.m=be:Ht!=="D"&&(Se[Ht]=be)}return Se},{});return N.reduce(function(Se,be){var Ge=RX[be](Se,ue[be],j);return isNaN(Ge)?Se:Ge},VS())},formatter:function(K,j){var ue=E.reduce(function(Se,be,Ge){return Se+="".concat(g[Ge]).concat(be(K,j))},"");return ue+=OK(g)}}}function yM(p,g,w){if(p instanceof Date||typeof p=="number"){var E=QG(p);return isNaN(E)?void 0:E}if(p){if(p==="today")return VS();if(g&&g.toValue){var N=g.toValue(p,g,w);return isNaN(N)?void 0:QG(N)}return VJ(g).parser(p,w)}}function wM(p,g,w){if(isNaN(p)||!p&&p!==0)return"";var E=typeof p=="number"?new Date(p):p;return g.toDisplay?g.toDisplay(E,g,w):VJ(g).formatter(E,w)}var q6=new WeakMap,zJ=EventTarget.prototype,MX=zJ.addEventListener,NX=zJ.removeEventListener;function MK(p,g){var w=q6.get(p);w||(w=[],q6.set(p,w)),g.forEach(function(E){MX.call.apply(MX,_M(E)),w.push(E)})}function UJ(p){var g=q6.get(p);g&&(g.forEach(function(w){NX.call.apply(NX,_M(w))}),q6.delete(p))}if(!Event.prototype.composedPath){var yne=function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];w.push(g);var E;return g.parentNode?E=g.parentNode:g.host?E=g.host:g.defaultView&&(E=g.defaultView),E?p(E,w):w};Event.prototype.composedPath=function(){return yne(this.target)}}function WJ(p,g,w){var E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=p[E];return g(N)?N:N===w||!N.parentElement?void 0:WJ(p,g,w,E+1)}function ZJ(p,g){var w=typeof g=="function"?g:function(E){return E.matches(g)};return WJ(p.composedPath(),w,p.currentTarget)}var cM={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},TM={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4 rtl:rotate-180 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},wne=document.createRange();function Yb(p){return wne.createContextualFragment(p)}function mM(p){p.style.display!=="none"&&(p.style.display&&(p.dataset.styleDisplay=p.style.display),p.style.display="none")}function hM(p){p.style.display==="none"&&(p.dataset.styleDisplay?(p.style.display=p.dataset.styleDisplay,delete p.dataset.styleDisplay):p.style.display="")}function G6(p){p.firstChild&&(p.removeChild(p.firstChild),G6(p))}function Cne(p,g){G6(p),g instanceof DocumentFragment?p.appendChild(g):typeof g=="string"?p.appendChild(Yb(g)):typeof g.forEach=="function"&&g.forEach(function(w){p.appendChild(w)})}var BG=TM.language,Sne=TM.format,xne=TM.weekStart;function PX(p,g){return p.length<6&&g>=0&&g<7?FS(p,g):p}function BX(p){return(p+6)%7}function IX(p,g,w,E){var N=yM(p,g,w);return N!==void 0?N:E}function IG(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,E=parseInt(p,10);return E>=0&&E<=w?E:g}function LG(p,g){var w=Object.assign({},p),E={},N=g.constructor.locales,z=g.config||{},K=z.format,j=z.language,ue=z.locale,Se=z.maxDate,be=z.maxView,Ge=z.minDate,Ht=z.pickLevel,Ut=z.startView,Nt=z.weekStart;if(w.language){var vt;if(w.language!==j&&(N[w.language]?vt=w.language:(vt=w.language.split("-")[0],N[vt]===void 0&&(vt=!1))),delete w.language,vt){j=E.language=vt;var Ie=ue||N[BG];ue=Object.assign({format:Sne,weekStart:xne},N[BG]),j!==BG&&Object.assign(ue,N[j]),E.locale=ue,K===Ie.format&&(K=E.format=ue.format),Nt===Ie.weekStart&&(Nt=E.weekStart=ue.weekStart,E.weekEnd=BX(ue.weekStart))}}if(w.format){var on=typeof w.format.toDisplay=="function",Et=typeof w.format.toValue=="function",ce=eK.test(w.format);(on&&Et||ce)&&(K=E.format=w.format),delete w.format}var qe=Ge,On=Se;if(w.minDate!==void 0&&(qe=w.minDate===null?Fy(0,0,1):IX(w.minDate,K,ue,qe),delete w.minDate),w.maxDate!==void 0&&(On=w.maxDate===null?void 0:IX(w.maxDate,K,ue,On),delete w.maxDate),On<qe?(Ge=E.minDate=On,Se=E.maxDate=qe):(Ge!==qe&&(Ge=E.minDate=qe),Se!==On&&(Se=E.maxDate=On)),w.datesDisabled&&(E.datesDisabled=w.datesDisabled.reduce(function(Pe,M){var cn=yM(M,K,ue);return cn!==void 0?FS(Pe,cn):Pe},[]),delete w.datesDisabled),w.defaultViewDate!==void 0){var jt=yM(w.defaultViewDate,K,ue);jt!==void 0&&(E.defaultViewDate=jt),delete w.defaultViewDate}if(w.weekStart!==void 0){var ne=Number(w.weekStart)%7;isNaN(ne)||(Nt=E.weekStart=ne,E.weekEnd=BX(ne)),delete w.weekStart}if(w.daysOfWeekDisabled&&(E.daysOfWeekDisabled=w.daysOfWeekDisabled.reduce(PX,[]),delete w.daysOfWeekDisabled),w.daysOfWeekHighlighted&&(E.daysOfWeekHighlighted=w.daysOfWeekHighlighted.reduce(PX,[]),delete w.daysOfWeekHighlighted),w.maxNumberOfDates!==void 0){var Kt=parseInt(w.maxNumberOfDates,10);Kt>=0&&(E.maxNumberOfDates=Kt,E.multidate=Kt!==1),delete w.maxNumberOfDates}w.dateDelimiter&&(E.dateDelimiter=String(w.dateDelimiter),delete w.dateDelimiter);var Pn=Ht;w.pickLevel!==void 0&&(Pn=IG(w.pickLevel,2),delete w.pickLevel),Pn!==Ht&&(Ht=E.pickLevel=Pn);var Qt=be;w.maxView!==void 0&&(Qt=IG(w.maxView,be),delete w.maxView),Qt=Ht>Qt?Ht:Qt,Qt!==be&&(be=E.maxView=Qt);var $e=Ut;if(w.startView!==void 0&&($e=IG(w.startView,$e),delete w.startView),$e<Ht?$e=Ht:$e>be&&($e=be),$e!==Ut&&(E.startView=$e),w.prevArrow){var ve=Yb(w.prevArrow);ve.childNodes.length>0&&(E.prevArrow=ve.childNodes),delete w.prevArrow}if(w.nextArrow){var so=Yb(w.nextArrow);so.childNodes.length>0&&(E.nextArrow=so.childNodes),delete w.nextArrow}if(w.disableTouchKeyboard!==void 0&&(E.disableTouchKeyboard="ontouchstart"in document&&!!w.disableTouchKeyboard,delete w.disableTouchKeyboard),w.orientation){var Me=w.orientation.toLowerCase().split(/\s+/g);E.orientation={x:Me.find(function(Pe){return Pe==="left"||Pe==="right"})||"auto",y:Me.find(function(Pe){return Pe==="top"||Pe==="bottom"})||"auto"},delete w.orientation}if(w.todayBtnMode!==void 0){switch(w.todayBtnMode){case 0:case 1:E.todayBtnMode=w.todayBtnMode}delete w.todayBtnMode}return Object.keys(w).forEach(function(Pe){w[Pe]!==void 0&&Kb(TM,Pe)&&(E[Pe]=w[Pe])}),E}var Ene=RK(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 rtl:space-x-reverse mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 !bg-primary-700 dark:bg-blue-600 dark:!bg-primary-600 hover:bg-blue-800 hover:!bg-primary-800 dark:hover:bg-blue-700 dark:hover:!bg-primary-700 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 focus:!ring-primary-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),_ne=RK(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">`.concat(yk("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">`).concat(yk("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"}),`</div>
</div>`)),Tne=RK(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">`.concat(yk("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"}),`</div>
</div>`)),NK=function(){function p(g,w){$S(this,p),Object.assign(this,w,{picker:g,element:Yb('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}return HS(p,[{key:"init",value:function(w){w.pickLevel!==void 0&&(this.isMinView=this.id===w.pickLevel),this.setOptions(w),this.updateFocus(),this.updateSelection()}},{key:"performBeforeHook",value:function(w,E,N){var z=this.beforeShow(new Date(N));switch(W6(z)){case"boolean":z={enabled:z};break;case"string":z={classes:z}}if(z){if(z.enabled===!1&&(w.classList.add("disabled"),FS(this.disabled,E)),z.classes){var K,j=z.classes.split(/\s+/);(K=w.classList).add.apply(K,_M(j)),j.includes("disabled")&&FS(this.disabled,E)}z.content&&Cne(w,z.content)}}}])}(),kne=function(p){function g(w){return $S(this,g),kK(this,g,[w,{id:0,name:"days",cellClass:"day"}])}return AK(g,p),HS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(N){var z=Yb(_ne).firstChild;this.dow=z.firstChild,this.grid=z.lastChild,this.element.appendChild(z)}vM($y(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){var N=this,z;if(Kb(E,"minDate")&&(this.minDate=E.minDate),Kb(E,"maxDate")&&(this.maxDate=E.maxDate),E.datesDisabled&&(this.datesDisabled=E.datesDisabled),E.daysOfWeekDisabled&&(this.daysOfWeekDisabled=E.daysOfWeekDisabled,z=!0),E.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=E.daysOfWeekHighlighted),E.todayHighlight!==void 0&&(this.todayHighlight=E.todayHighlight),E.weekStart!==void 0&&(this.weekStart=E.weekStart,this.weekEnd=E.weekEnd,z=!0),E.locale){var K=this.locale=E.locale;this.dayNames=K.daysMin,this.switchLabelFormat=K.titleFormat,z=!0}if(E.beforeShowDay!==void 0&&(this.beforeShow=typeof E.beforeShowDay=="function"?E.beforeShowDay:void 0),E.calendarWeeks!==void 0)if(E.calendarWeeks&&!this.calendarWeeks){var j=Yb(Tne).firstChild;this.calendarWeeks={element:j,dow:j.firstChild,weeks:j.lastChild},this.element.insertBefore(j,this.element.firstChild)}else this.calendarWeeks&&!E.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);E.showDaysOfWeek!==void 0&&(E.showDaysOfWeek?(hM(this.dow),this.calendarWeeks&&hM(this.calendarWeeks.dow)):(mM(this.dow),this.calendarWeeks&&mM(this.calendarWeeks.dow))),z&&Array.from(this.dow.children).forEach(function(ue,Se){var be=(N.weekStart+Se)%7;ue.textContent=N.dayNames[be],ue.className=N.daysOfWeekDisabled.includes(be)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),N=E.getFullYear(),z=E.getMonth(),K=Fy(N,z,1),j=j6(K,this.weekStart,this.weekStart);this.first=K,this.last=Fy(N,z+1,0),this.start=j,this.focused=this.picker.viewDate}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,N=E.dates,z=E.rangepicker;this.selected=N,z&&(this.range=z.dates)}},{key:"render",value:function(){var E=this;this.today=this.todayHighlight?VS():void 0,this.disabled=_M(this.datesDisabled);var N=wM(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(N),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){var z=j6(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(function(K,j){K.textContent=pne(gne(z,j))})}Array.from(this.grid.children).forEach(function(K,j){var ue=K.classList,Se=fk(E.start,j),be=new Date(Se),Ge=be.getDay();if(K.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),K.dataset.date=Se,K.textContent=be.getDate(),Se<E.first?ue.add("prev","text-gray-500","dark:text-white"):Se>E.last&&ue.add("next","text-gray-500","dark:text-white"),E.today===Se&&ue.add("today","bg-gray-100","dark:bg-gray-600"),(Se<E.minDate||Se>E.maxDate||E.disabled.includes(Se))&&(ue.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),ue.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer")),E.daysOfWeekDisabled.includes(Ge)&&(ue.add("disabled","cursor-not-allowed","text-gray-400","dark:text-gray-500"),ue.remove("hover:bg-gray-100","dark:hover:bg-gray-600","text-gray-900","dark:text-white","cursor-pointer"),FS(E.disabled,Se)),E.daysOfWeekHighlighted.includes(Ge)&&ue.add("highlighted"),E.range){var Ht=gm(E.range,2),Ut=Ht[0],Nt=Ht[1];Se>Ut&&Se<Nt&&(ue.add("range","bg-gray-200","dark:bg-gray-600"),ue.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),Se===Ut&&(ue.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),ue.remove("rounded-lg","rounded-r-lg")),Se===Nt&&(ue.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),ue.remove("rounded-lg","rounded-l-lg"))}E.selected.includes(Se)&&(ue.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),ue.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","dark:bg-gray-600","bg-gray-100","bg-gray-200")),Se===E.focused&&ue.add("focused"),E.beforeShow&&E.performBeforeHook(K,Se,Se)})}},{key:"refresh",value:function(){var E=this,N=this.range||[],z=gm(N,2),K=z[0],j=z[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ue){ue.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white","focused"),ue.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(function(ue){var Se=Number(ue.dataset.date),be=ue.classList;be.remove("bg-gray-200","dark:bg-gray-600","rounded-l-lg","rounded-r-lg"),Se>K&&Se<j&&(be.add("range","bg-gray-200","dark:bg-gray-600"),be.remove("rounded-lg")),Se===K&&(be.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),be.remove("rounded-lg")),Se===j&&(be.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),be.remove("rounded-lg")),E.selected.includes(Se)&&(be.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),be.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600","bg-gray-100","bg-gray-200","dark:bg-gray-600")),Se===E.focused&&be.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(function(N){N.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(NK);function LX(p,g){if(!(!p||!p[0]||!p[1])){var w=gm(p,2),E=gm(w[0],2),N=E[0],z=E[1],K=gm(w[1],2),j=K[0],ue=K[1];if(!(N>g||j<g))return[N===g?z:-1,j===g?ue:12]}}var Ane=function(p){function g(w){return $S(this,g),kK(this,g,[w,{id:1,name:"months",cellClass:"month"}])}return AK(g,p),HS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;N&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Yb(yk("span",12,{"data-month":function(K){return K}})))),vM($y(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(E.locale&&(this.monthNames=E.locale.monthsShort),Kb(E,"minDate"))if(E.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{var N=new Date(E.minDate);this.minYear=N.getFullYear(),this.minMonth=N.getMonth(),this.minDate=N.setDate(1)}if(Kb(E,"maxDate"))if(E.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{var z=new Date(E.maxDate);this.maxYear=z.getFullYear(),this.maxMonth=z.getMonth(),this.maxDate=Fy(this.maxYear,this.maxMonth+1,0)}E.beforeShowMonth!==void 0&&(this.beforeShow=typeof E.beforeShowMonth=="function"?E.beforeShowMonth:void 0)}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate);this.year=E.getFullYear(),this.focused=E.getMonth()}},{key:"updateSelection",value:function(){var E=this.picker.datepicker,N=E.dates,z=E.rangepicker;this.selected=N.reduce(function(K,j){var ue=new Date(j),Se=ue.getFullYear(),be=ue.getMonth();return K[Se]===void 0?K[Se]=[be]:FS(K[Se],be),K},{}),z&&z.dates&&(this.range=z.dates.map(function(K){var j=new Date(K);return isNaN(j)?void 0:[j.getFullYear(),j.getMonth()]}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);var N=this.selected[this.year]||[],z=this.year<this.minYear||this.year>this.maxYear,K=this.year===this.minYear,j=this.year===this.maxYear,ue=LX(this.range,this.year);Array.from(this.grid.children).forEach(function(Se,be){var Ge=Se.classList,Ht=Fy(E.year,be,1);if(Se.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(Se.dataset.date=Ht),Se.textContent=E.monthNames[be],(z||K&&be<E.minMonth||j&&be>E.maxMonth)&&Ge.add("disabled"),ue){var Ut=gm(ue,2),Nt=Ut[0],vt=Ut[1];be>Nt&&be<vt&&Ge.add("range"),be===Nt&&Ge.add("range-start"),be===vt&&Ge.add("range-end")}N.includes(be)&&(Ge.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ge.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),be===E.focused&&Ge.add("focused"),E.beforeShow&&E.performBeforeHook(Se,be,Ht)})}},{key:"refresh",value:function(){var E=this,N=this.selected[this.year]||[],z=LX(this.range,this.year)||[],K=gm(z,2),j=K[0],ue=K[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(Se){Se.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","dark:bg-blue-600","dark:!bg-primary-700","dark:text-white","text-white","focused"),Se.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach(function(Se,be){var Ge=Se.classList;be>j&&be<ue&&Ge.add("range"),be===j&&Ge.add("range-start"),be===ue&&Ge.add("range-end"),N.includes(be)&&(Ge.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),Ge.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),be===E.focused&&Ge.add("focused")})}},{key:"refreshFocus",value:function(){this.grid.querySelectorAll(".focused").forEach(function(E){E.classList.remove("focused")}),this.grid.children[this.focused].classList.add("focused")}}])}(NK);function One(p){return _M(p).reduce(function(g,w,E){return g+=E?w:w.toUpperCase()},"")}var FX=function(p){function g(w,E){return $S(this,g),kK(this,g,[w,E])}return AK(g,p),HS(g,[{key:"init",value:function(E){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;N&&(this.navStep=this.step*10,this.beforeShowOption="beforeShow".concat(One(this.cellClass)),this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(Yb(yk("span",12)))),vM($y(g.prototype),"init",this).call(this,E)}},{key:"setOptions",value:function(E){if(Kb(E,"minDate")&&(E.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=DS(E.minDate,this.step),this.minDate=Fy(this.minYear,0,1))),Kb(E,"maxDate")&&(E.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=DS(E.maxDate,this.step),this.maxDate=Fy(this.maxYear,11,31))),E[this.beforeShowOption]!==void 0){var N=E[this.beforeShowOption];this.beforeShow=typeof N=="function"?N:void 0}}},{key:"updateFocus",value:function(){var E=new Date(this.picker.viewDate),N=DS(E,this.navStep),z=N+9*this.step;this.first=N,this.last=z,this.start=N-this.step,this.focused=DS(E,this.step)}},{key:"updateSelection",value:function(){var E=this,N=this.picker.datepicker,z=N.dates,K=N.rangepicker;this.selected=z.reduce(function(j,ue){return FS(j,DS(ue,E.step))},[]),K&&K.dates&&(this.range=K.dates.map(function(j){if(j!==void 0)return DS(j,E.step)}))}},{key:"render",value:function(){var E=this;this.disabled=[],this.picker.setViewSwitchLabel("".concat(this.first,"-").concat(this.last)),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(function(N,z){var K=N.classList,j=E.start+z*E.step,ue=Fy(j,0,1);if(N.className="datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ".concat(E.cellClass),E.isMinView&&(N.dataset.date=ue),N.textContent=N.dataset.year=j,z===0?K.add("prev"):z===11&&K.add("next"),(j<E.minYear||j>E.maxYear)&&K.add("disabled"),E.range){var Se=gm(E.range,2),be=Se[0],Ge=Se[1];j>be&&j<Ge&&K.add("range"),j===be&&K.add("range-start"),j===Ge&&K.add("range-end")}E.selected.includes(j)&&(K.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),K.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),j===E.focused&&K.add("focused"),E.beforeShow&&E.performBeforeHook(N,j,ue)})}},{key:"refresh",value:function(){var E=this,N=this.range||[],z=gm(N,2),K=z[0],j=z[1];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(function(ue){ue.classList.remove("range","range-start","range-end","selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark!bg-primary-600","dark:text-white","focused")}),Array.from(this.grid.children).forEach(function(ue){var Se=Number(ue.textContent),be=ue.classList;Se>K&&Se<j&&be.add("range"),Se===K&&be.add("range-start"),Se===j&&be.add("range-end"),E.selected.includes(Se)&&(be.add("selected","bg-blue-700","!bg-primary-700","text-white","dark:bg-blue-600","dark:!bg-primary-600","dark:text-white"),be.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),Se===E.focused&&be.add("focused")})}},{key:"refreshFocus",value:function(){var E=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(function(N){N.classList.remove("focused")}),this.grid.children[E].classList.add("focused")}}])}(NK);function hk(p,g){var w={date:p.getDate(),viewDate:new Date(p.picker.viewDate),viewId:p.picker.currentView.id,datepicker:p};p.element.dispatchEvent(new CustomEvent(g,{detail:w}))}function K6(p,g){var w=p.config,E=w.minDate,N=w.maxDate,z=p.picker,K=z.currentView,j=z.viewDate,ue;switch(K.id){case 0:ue=Z6(j,g);break;case 1:ue=mk(j,g);break;default:ue=mk(j,g*K.navStep)}ue=$J(ue,E,N),p.picker.changeFocus(ue).render()}function jJ(p){var g=p.picker.currentView.id;g!==p.config.maxView&&p.picker.changeView(g+1).render()}function qJ(p){p.config.updateOnBlur?p.update({autohide:!0}):(p.refresh("input"),p.hide())}function $X(p,g){var w=p.picker,E=new Date(w.viewDate),N=w.currentView.id,z=N===1?Z6(E,g-E.getMonth()):mk(E,g-E.getFullYear());w.changeFocus(z).changeView(N-1).render()}function Dne(p){var g=p.picker,w=VS();if(p.config.todayBtnMode===1){if(p.config.autohide){p.setDate(w);return}p.setDate(w,{render:!1}),g.update()}g.viewDate!==w&&g.changeFocus(w),g.changeView(0).render()}function Rne(p){p.setDate({clear:!0})}function Mne(p){jJ(p)}function Nne(p){K6(p,-1)}function Pne(p){K6(p,1)}function Bne(p,g){var w=ZJ(g,".datepicker-cell");if(!(!w||w.classList.contains("disabled"))){var E=p.picker.currentView,N=E.id,z=E.isMinView;z?p.setDate(Number(w.dataset.date)):N===1?$X(p,Number(w.dataset.month)):$X(p,Number(w.dataset.year))}}function Ine(p){!p.inline&&!p.config.disableTouchKeyboard&&p.inputField.focus()}function HX(p,g){if(g.title!==void 0&&(g.title?(p.controls.title.textContent=g.title,hM(p.controls.title)):(p.controls.title.textContent="",mM(p.controls.title))),g.prevArrow){var w=p.controls.prevBtn;G6(w),g.prevArrow.forEach(function(j){w.appendChild(j.cloneNode(!0))})}if(g.nextArrow){var E=p.controls.nextBtn;G6(E),g.nextArrow.forEach(function(j){E.appendChild(j.cloneNode(!0))})}if(g.locale&&(p.controls.todayBtn.textContent=g.locale.today,p.controls.clearBtn.textContent=g.locale.clear),g.todayBtn!==void 0&&(g.todayBtn?hM(p.controls.todayBtn):mM(p.controls.todayBtn)),Kb(g,"minDate")||Kb(g,"maxDate")){var N=p.datepicker.config,z=N.minDate,K=N.maxDate;p.controls.todayBtn.disabled=!DK(VS(),z,K)}g.clearBtn!==void 0&&(g.clearBtn?hM(p.controls.clearBtn):mM(p.controls.clearBtn))}function VX(p){var g=p.dates,w=p.config,E=g.length>0?OK(g):w.defaultViewDate;return $J(E,w.minDate,w.maxDate)}function zX(p,g){var w=new Date(p.viewDate),E=new Date(g),N=p.currentView,z=N.id,K=N.year,j=N.first,ue=N.last,Se=E.getFullYear();switch(p.viewDate=g,Se!==w.getFullYear()&&hk(p.datepicker,"changeYear"),E.getMonth()!==w.getMonth()&&hk(p.datepicker,"changeMonth"),z){case 0:return g<j||g>ue;case 1:return Se!==K;default:return Se<j||Se>ue}}function FG(p){return window.getComputedStyle(p).direction}var Lne=function(){function p(g){$S(this,p),this.datepicker=g;var w=Ene.replace(/%buttonClass%/g,g.config.buttonClass),E=this.element=Yb(w).firstChild,N=gm(E.firstChild.children,3),z=N[0],K=N[1],j=N[2],ue=z.firstElementChild,Se=gm(z.lastElementChild.children,3),be=Se[0],Ge=Se[1],Ht=Se[2],Ut=gm(j.firstChild.children,2),Nt=Ut[0],vt=Ut[1],Ie={title:ue,prevBtn:be,viewSwitch:Ge,nextBtn:Ht,todayBtn:Nt,clearBtn:vt};this.main=K,this.controls=Ie;var on=g.inline?"inline":"dropdown";E.classList.add("datepicker-".concat(on)),on==="dropdown"&&E.classList.add("dropdown","absolute","top-0","left-0","z-50","pt-2"),HX(this,g.config),this.viewDate=VX(g),MK(g,[[E,"click",Ine.bind(null,g),{capture:!0}],[K,"click",Bne.bind(null,g)],[Ie.viewSwitch,"click",Mne.bind(null,g)],[Ie.prevBtn,"click",Nne.bind(null,g)],[Ie.nextBtn,"click",Pne.bind(null,g)],[Ie.todayBtn,"click",Dne.bind(null,g)],[Ie.clearBtn,"click",Rne.bind(null,g)]]),this.views=[new kne(this),new Ane(this),new FX(this,{id:2,name:"years",cellClass:"year",step:1}),new FX(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[g.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),g.config.container.appendChild(this.element)}return HS(p,[{key:"setOptions",value:function(w){HX(this,w),this.views.forEach(function(E){E.init(w,!1)}),this.currentView.render()}},{key:"detach",value:function(){this.datepicker.config.container.removeChild(this.element)}},{key:"show",value:function(){if(!this.active){this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;var w=this.datepicker;if(!w.inline){var E=FG(w.inputField);E!==FG(w.config.container)?this.element.dir=E:this.element.dir&&this.element.removeAttribute("dir"),this.place(),w.config.disableTouchKeyboard&&w.inputField.blur()}hk(w,"show")}}},{key:"hide",value:function(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,hk(this.datepicker,"hide"))}},{key:"place",value:function(){var w=this.element,E=w.classList,N=w.style,z=this.datepicker,K=z.config,j=z.inputField,ue=K.container,Se=this.element.getBoundingClientRect(),be=Se.width,Ge=Se.height,Ht=ue.getBoundingClientRect(),Ut=Ht.left,Nt=Ht.top,vt=Ht.width,Ie=j.getBoundingClientRect(),on=Ie.left,Et=Ie.top,ce=Ie.width,qe=Ie.height,On=K.orientation,jt=On.x,ne=On.y,Kt,Pn,Qt;ue===document.body?(Kt=window.scrollY,Pn=on+window.scrollX,Qt=Et+Kt):(Kt=ue.scrollTop,Pn=on-Ut,Qt=Et-Nt+Kt),jt==="auto"&&(Pn<0?(jt="left",Pn=10):Pn+be>vt?jt="right":jt=FG(j)==="rtl"?"right":"left"),jt==="right"&&(Pn-=be-ce),ne==="auto"&&(ne=Qt-Ge<Kt?"bottom":"top"),ne==="top"?Qt-=Ge:Qt+=qe,E.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),E.add("datepicker-orient-".concat(ne),"datepicker-orient-".concat(jt)),N.top=Qt&&"".concat(Qt,"px"),N.left=Pn&&"".concat(Pn,"px")}},{key:"setViewSwitchLabel",value:function(w){this.controls.viewSwitch.textContent=w}},{key:"setPrevBtnDisabled",value:function(w){this.controls.prevBtn.disabled=w}},{key:"setNextBtnDisabled",value:function(w){this.controls.nextBtn.disabled=w}},{key:"changeView",value:function(w){var E=this.currentView,N=this.views[w];return N.id!==E.id&&(this.currentView=N,this._renderMethod="render",hk(this.datepicker,"changeView"),this.main.replaceChild(N.element,E.element)),this}},{key:"changeFocus",value:function(w){return this._renderMethod=zX(this,w)?"render":"refreshFocus",this.views.forEach(function(E){E.updateFocus()}),this}},{key:"update",value:function(){var w=VX(this.datepicker);return this._renderMethod=zX(this,w)?"render":"refresh",this.views.forEach(function(E){E.updateFocus(),E.updateSelection()}),this}},{key:"render",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,E=w&&this._renderMethod||"render";delete this._renderMethod,this.currentView[E]()}}])}();function GJ(p,g,w,E,N,z){if(DK(p,N,z)){if(E(p)){var K=g(p,w);return GJ(K,g,w,E,N,z)}return p}}function C6(p,g,w,E){var N=p.picker,z=N.currentView,K=z.step||1,j=N.viewDate,ue,Se;switch(z.id){case 0:E?j=fk(j,w*7):g.ctrlKey||g.metaKey?j=mk(j,w):j=fk(j,w),ue=fk,Se=function(Ge){return z.disabled.includes(Ge)};break;case 1:j=Z6(j,E?w*4:w),ue=Z6,Se=function(Ge){var Ht=new Date(Ge),Ut=z.year,Nt=z.disabled;return Ht.getFullYear()===Ut&&Nt.includes(Ht.getMonth())};break;default:j=mk(j,w*(E?4:1)*K),ue=mk,Se=function(Ge){return z.disabled.includes(DS(Ge,K))}}j=GJ(j,ue,w<0?-K:K,Se,z.minDate,z.maxDate),j!==void 0&&N.changeFocus(j).render()}function Fne(p,g){if(g.key==="Tab"){qJ(p);return}var w=p.picker,E=w.currentView,N=E.id,z=E.isMinView;if(w.active)if(p.editMode)switch(g.key){case"Escape":w.hide();break;case"Enter":p.exitEditMode({update:!0,autohide:p.config.autohide});break;default:return}else switch(g.key){case"Escape":w.hide();break;case"ArrowLeft":if(g.ctrlKey||g.metaKey)K6(p,-1);else if(g.shiftKey){p.enterEditMode();return}else C6(p,g,-1,!1);break;case"ArrowRight":if(g.ctrlKey||g.metaKey)K6(p,1);else if(g.shiftKey){p.enterEditMode();return}else C6(p,g,1,!1);break;case"ArrowUp":if(g.ctrlKey||g.metaKey)jJ(p);else if(g.shiftKey){p.enterEditMode();return}else C6(p,g,-1,!0);break;case"ArrowDown":if(g.shiftKey&&!g.ctrlKey&&!g.metaKey){p.enterEditMode();return}C6(p,g,1,!0);break;case"Enter":z?p.setDate(w.viewDate):w.changeView(N-1).render();break;case"Backspace":case"Delete":p.enterEditMode();return;default:g.key.length===1&&!g.ctrlKey&&!g.metaKey&&p.enterEditMode();return}else switch(g.key){case"ArrowDown":case"Escape":w.show();break;case"Enter":p.update();break;default:return}g.preventDefault(),g.stopPropagation()}function $ne(p){p.config.showOnFocus&&!p._showing&&p.show()}function Hne(p,g){var w=g.target;(p.picker.active||p.config.showOnClick)&&(w._active=w===document.activeElement,w._clicking=setTimeout(function(){delete w._active,delete w._clicking},2e3))}function Vne(p,g){var w=g.target;w._clicking&&(clearTimeout(w._clicking),delete w._clicking,w._active&&p.enterEditMode(),delete w._active,p.config.showOnClick&&p.show())}function zne(p,g){g.clipboardData.types.includes("text/plain")&&p.enterEditMode()}function Une(p,g){var w=p.element;if(w===document.activeElement){var E=p.picker.element;ZJ(g,function(N){return N===w||N===E})||qJ(p)}}function KJ(p,g){return p.map(function(w){return wM(w,g.format,g.locale)}).join(g.dateDelimiter)}function YJ(p,g){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,E=p.config,N=p.dates,z=p.rangepicker;if(g.length===0)return w?[]:void 0;var K=z&&p===z.datepickers[1],j=g.reduce(function(ue,Se){var be=yM(Se,E.format,E.locale);if(be===void 0)return ue;if(E.pickLevel>0){var Ge=new Date(be);E.pickLevel===1?be=K?Ge.setMonth(Ge.getMonth()+1,0):Ge.setDate(1):be=K?Ge.setFullYear(Ge.getFullYear()+1,0,0):Ge.setMonth(0,1)}return DK(be,E.minDate,E.maxDate)&&!ue.includes(be)&&!E.datesDisabled.includes(be)&&!E.daysOfWeekDisabled.includes(new Date(be).getDay())&&ue.push(be),ue},[]);if(j.length!==0)return E.multidate&&!w&&(j=j.reduce(function(ue,Se){return N.includes(Se)||ue.push(Se),ue},N.filter(function(ue){return!j.includes(ue)}))),E.maxNumberOfDates&&j.length>E.maxNumberOfDates?j.slice(E.maxNumberOfDates*-1):j}function Y6(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=p.config,N=p.picker,z=p.inputField;if(g&2){var K=N.active?E.pickLevel:E.startView;N.update().changeView(K).render(w)}g&1&&z&&(z.value=KJ(p.dates,E))}function UX(p,g,w){var E=w.clear,N=w.render,z=w.autohide;N===void 0&&(N=!0),N?z===void 0&&(z=p.config.autohide):z=!1;var K=YJ(p,g,E);K&&(K.toString()!==p.dates.toString()?(p.dates=K,Y6(p,N?3:1),hk(p,"changeDate")):Y6(p,1),z&&p.hide())}var T6=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;$S(this,p),g.datepicker=this,this.element=g;var N=this.config=Object.assign({buttonClass:w.buttonClass&&String(w.buttonClass)||"button",container:document.body,defaultViewDate:VS(),maxDate:void 0,minDate:void 0},LG(TM,this));this._options=w,Object.assign(N,LG(w,this));var z=this.inline=g.tagName!=="INPUT",K,j;if(z)N.container=g,j=NG(g.dataset.date,N.dateDelimiter),delete g.dataset.date;else{var ue=w.container?document.querySelector(w.container):null;ue&&(N.container=ue),K=this.inputField=g,K.classList.add("datepicker-input"),j=NG(K.value,N.dateDelimiter)}if(E){var Se=E.inputs.indexOf(K),be=E.datepickers;if(Se<0||Se>1||!Array.isArray(be))throw Error("Invalid rangepicker object.");be[Se]=this,Object.defineProperty(this,"rangepicker",{get:function(){return E}})}this.dates=[];var Ge=YJ(this,j);Ge&&Ge.length>0&&(this.dates=Ge),K&&(K.value=KJ(this.dates,N));var Ht=this.picker=new Lne(this);if(z)this.show();else{var Ut=Une.bind(null,this),Nt=[[K,"keydown",Fne.bind(null,this)],[K,"focus",$ne.bind(null,this)],[K,"mousedown",Hne.bind(null,this)],[K,"click",Vne.bind(null,this)],[K,"paste",zne.bind(null,this)],[document,"mousedown",Ut],[document,"touchstart",Ut],[window,"resize",Ht.place.bind(Ht)]];MK(this,Nt)}}return HS(p,[{key:"active",get:function(){return!!(this.picker&&this.picker.active)}},{key:"pickerElement",get:function(){return this.picker?this.picker.element:void 0}},{key:"setOptions",value:function(w){var E=this.picker,N=LG(w,this);Object.assign(this._options,w),Object.assign(this.config,N),E.setOptions(N),Y6(this,3)}},{key:"show",value:function(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}},{key:"hide",value:function(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}},{key:"destroy",value:function(){return this.hide(),UJ(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}},{key:"getDate",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,N=E?function(z){return wM(z,E,w.config.locale)}:function(z){return new Date(z)};if(this.config.multidate)return this.dates.map(N);if(this.dates.length>0)return N(this.dates[0])}},{key:"setDate",value:function(){for(var w=arguments.length,E=new Array(w),N=0;N<w;N++)E[N]=arguments[N];var z=[].concat(E),K={},j=OK(E);W6(j)==="object"&&!Array.isArray(j)&&!(j instanceof Date)&&j&&Object.assign(K,z.pop());var ue=Array.isArray(z[0])?z[0]:z;UX(this,ue,K)}},{key:"update",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!this.inline){var E={clear:!0,autohide:!!(w&&w.autohide)},N=NG(this.inputField.value,this.config.dateDelimiter);UX(this,N,E)}}},{key:"refresh",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;w&&typeof w!="string"&&(E=w,w=void 0);var N;w==="picker"?N=2:w==="input"?N=1:N=3,Y6(this,N,!E)}},{key:"enterEditMode",value:function(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700","!border-primary-700"))}},{key:"exitEditMode",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(!(this.inline||!this.editMode)){var E=Object.assign({update:!1},w);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700","!border-primary-700"),E.update&&this.update(E)}}}],[{key:"formatDate",value:function(w,E,N){return wM(w,E,N&&cM[N]||cM.en)}},{key:"parseDate",value:function(w,E,N){return yM(w,E,N&&cM[N]||cM.en)}},{key:"locales",get:function(){return cM}}])}();function WX(p){var g=Object.assign({},p);return delete g.inputs,delete g.allowOneSidedRange,delete g.maxNumberOfDates,g}function ZX(p,g,w,E){MK(p,[[w,"changeDate",g]]),new T6(w,E,p)}function lM(p,g){if(!p._updating){p._updating=!0;var w=g.target;if(w.datepicker!==void 0){var E=p.datepickers,N={render:!1},z=p.inputs.indexOf(w),K=z===0?1:0,j=E[z].dates[0],ue=E[K].dates[0];j!==void 0&&ue!==void 0?z===0&&j>ue?(E[0].setDate(ue,N),E[1].setDate(j,N)):z===1&&j<ue&&(E[0].setDate(j,N),E[1].setDate(ue,N)):p.allowOneSidedRange||(j!==void 0||ue!==void 0)&&(N.clear=!0,E[K].setDate(E[z].dates,N)),E[0].picker.update().render(),E[1].picker.update().render(),delete p._updating}}}var $G=function(){function p(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$S(this,p);var E=Array.isArray(w.inputs)?w.inputs:Array.from(g.querySelectorAll("input"));if(!(E.length<2)){g.rangepicker=this,this.element=g,this.inputs=E.slice(0,2),this.allowOneSidedRange=!!w.allowOneSidedRange;var N=lM.bind(null,this),z=WX(w),K=[];Object.defineProperty(this,"datepickers",{get:function(){return K}}),ZX(this,N,this.inputs[0],z),ZX(this,N,this.inputs[1],z),Object.freeze(K),K[0].dates.length>0?lM(this,{target:this.inputs[0]}):K[1].dates.length>0&&lM(this,{target:this.inputs[1]})}}return HS(p,[{key:"dates",get:function(){return this.datepickers.length===2?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}},{key:"setOptions",value:function(w){this.allowOneSidedRange=!!w.allowOneSidedRange;var E=WX(w);this.datepickers[0].setOptions(E),this.datepickers[1].setOptions(E)}},{key:"destroy",value:function(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),UJ(this),delete this.element.rangepicker}},{key:"getDates",value:function(){var w=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,N=E?function(z){return wM(z,E,w.datepickers[0].config.locale)}:function(z){return new Date(z)};return this.dates.map(function(z){return z===void 0?z:N(z)})}},{key:"setDates",value:function(w,E){var N=gm(this.datepickers,2),z=N[0],K=N[1],j=this.dates;this._updating=!0,z.setDate(w),K.setDate(E),delete this._updating,K.dates[0]!==j[1]?lM(this,{target:this.inputs[1]}):z.dates[0]!==j[0]&&lM(this,{target:this.inputs[0]})}}])}(),X6=function(){return X6=Object.assign||function(p){for(var g,w=1,E=arguments.length;w<E;w++){g=arguments[w];for(var N in g)Object.prototype.hasOwnProperty.call(g,N)&&(p[N]=g[N])}return p},X6.apply(this,arguments)},Th={defaultDatepickerId:null,autohide:!1,format:"mm/dd/yyyy",maxDate:null,minDate:null,orientation:"bottom",buttons:!1,autoSelectToday:0,title:null,language:"en",rangePicker:!1,onShow:function(){},onHide:function(){}},Wne={id:null,override:!0},XJ=function(){function p(g,w,E){g===void 0&&(g=null),w===void 0&&(w=Th),E===void 0&&(E=Wne),this._instanceId=E.id?E.id:g.id,this._datepickerEl=g,this._datepickerInstance=null,this._options=X6(X6({},Th),w),this._initialized=!1,this.init(),Ws.addInstance("Datepicker",this,this._instanceId,E.override)}return p.prototype.init=function(){this._datepickerEl&&!this._initialized&&(this._options.rangePicker?this._datepickerInstance=new $G(this._datepickerEl,this._getDatepickerOptions(this._options)):this._datepickerInstance=new T6(this._datepickerEl,this._getDatepickerOptions(this._options)),this._initialized=!0)},p.prototype.destroy=function(){this._initialized&&(this._initialized=!1,this._datepickerInstance.destroy())},p.prototype.removeInstance=function(){this.destroy(),Ws.removeInstance("Datepicker",this._instanceId)},p.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},p.prototype.getDatepickerInstance=function(){return this._datepickerInstance},p.prototype.getDate=function(){if(this._options.rangePicker&&this._datepickerInstance instanceof $G)return this._datepickerInstance.getDates();if(!this._options.rangePicker&&this._datepickerInstance instanceof T6)return this._datepickerInstance.getDate()},p.prototype.setDate=function(g){if(this._options.rangePicker&&this._datepickerInstance instanceof $G)return this._datepickerInstance.setDates(g);if(!this._options.rangePicker&&this._datepickerInstance instanceof T6)return this._datepickerInstance.setDate(g)},p.prototype.show=function(){this._datepickerInstance.show(),this._options.onShow(this)},p.prototype.hide=function(){this._datepickerInstance.hide(),this._options.onHide(this)},p.prototype._getDatepickerOptions=function(g){var w={};return g.buttons&&(w.todayBtn=!0,w.clearBtn=!0,g.autoSelectToday&&(w.todayBtnMode=1)),g.autohide&&(w.autohide=!0),g.format&&(w.format=g.format),g.maxDate&&(w.maxDate=g.maxDate),g.minDate&&(w.minDate=g.minDate),g.orientation&&(w.orientation=g.orientation),g.title&&(w.title=g.title),g.language&&(w.language=g.language),w},p.prototype.updateOnShow=function(g){this._options.onShow=g},p.prototype.updateOnHide=function(g){this._options.onHide=g},p}();function PK(){document.querySelectorAll("[datepicker], [inline-datepicker], [date-rangepicker]").forEach(function(p){if(p){var g=p.hasAttribute("datepicker-buttons"),w=p.hasAttribute("datepicker-autoselect-today"),E=p.hasAttribute("datepicker-autohide"),N=p.getAttribute("datepicker-format"),z=p.getAttribute("datepicker-max-date"),K=p.getAttribute("datepicker-min-date"),j=p.getAttribute("datepicker-orientation"),ue=p.getAttribute("datepicker-title"),Se=p.getAttribute("datepicker-language"),be=p.hasAttribute("date-rangepicker");new XJ(p,{buttons:g||Th.buttons,autoSelectToday:w||Th.autoSelectToday,autohide:E||Th.autohide,format:N||Th.format,maxDate:z||Th.maxDate,minDate:K||Th.minDate,orientation:j||Th.orientation,title:ue||Th.title,language:Se||Th.language,rangePicker:be||Th.rangePicker})}else console.error("The datepicker element does not exist. Please check the datepicker attribute.")})}typeof window<"u"&&(window.Datepicker=XJ,window.initDatepickers=PK);function Zne(){aK(),iK(),cK(),lK(),vK(),yK(),wK(),CK(),SK(),xK(),EK(),_K(),TK(),PK()}typeof window<"u"&&(window.initFlowbite=Zne);var jne=new Fee("load",[aK,iK,cK,lK,vK,yK,wK,CK,SK,xK,EK,_K,TK,PK]);jne.init();var qne={exports:{}};(function(p){(function(){var g=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},w=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},E=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},N=function(e,n){return z(function(o,r){return e.eq(n(o),n(r))})},z=function(e){return{eq:e}},K=z(function(e,n){return e===n}),j=K,ue=function(e){return z(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},Se=function(e,n){return N(ue(e),function(o){return E(o,n)})},be=function(e){return z(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!Se(j).eq(r,i))return!1;for(var u=r.length,m=0;m<u;m++){var y=r[m];if(!e.eq(n[y],o[y]))return!1}return!0})},Ge=z(function(e,n){if(e===n)return!0;var o=g(e),r=g(n);return o!==r?!1:w(o)?e===n:o==="array"?ue(Ge).eq(e,n):o==="object"?be(Ge).eq(e,n):!1});const Ht=Object.getPrototypeOf,Ut=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Nt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Ut(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},vt=e=>n=>Nt(n)===e,Ie=e=>n=>typeof n===e,on=e=>n=>e===n,Et=(e,n)=>qe(e)&&Ut(e,n,(o,r)=>Ht(o)===r),ce=vt("string"),qe=vt("object"),On=e=>Et(e,Object),jt=vt("array"),ne=on(null),Kt=Ie("boolean"),Pn=on(void 0),Qt=e=>e==null,$e=e=>!Qt(e),ve=Ie("function"),so=Ie("number"),Me=(e,n)=>{if(jt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Pe=()=>{},M=(e,n)=>(...o)=>e(n.apply(null,o)),cn=(e,n)=>o=>e(n(o)),ct=e=>()=>e,Hn=e=>e,rn=(e,n)=>e===n;function nt(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const eo=e=>n=>!e(n),ms=e=>()=>{throw new Error(e)},to=e=>e(),os=e=>{e()},tt=ct(!1),wt=ct(!0);class W{constructor(n,o){this.tag=n,this.value=o}static some(n){return new W(!0,n)}static none(){return W.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?W.some(n(this.value)):W.none()}bind(n){return this.tag?n(this.value):W.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:W.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return $e(n)?W.some(n):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const ta=Array.prototype.slice,uo=Array.prototype.indexOf,qo=Array.prototype.push,Ho=(e,n)=>uo.call(e,n),Wi=(e,n)=>{const o=Ho(e,n);return o===-1?W.none():W.some(o)},et=(e,n)=>Ho(e,n)>-1,kt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},dt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},xe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},_o=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},To=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const m=e[i];(n(m,i)?o:r).push(m)}return{pass:o,fail:r}},Zt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},ss=(e,n,o)=>(_o(e,(r,i)=>{o=n(o,r,i)}),o),Mo=(e,n,o)=>(xe(e,(r,i)=>{o=n(o,r,i)}),o),$r=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return W.some(u);if(o(u,r))break}return W.none()},Po=(e,n)=>$r(e,n,tt),Is=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return W.some(o)}return W.none()},Xa=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!jt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);qo.apply(n,e[o])}return n},ws=(e,n)=>Xa(dt(e,n)),bs=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},vs=e=>{const n=ta.call(e,0);return n.reverse(),n},qr=(e,n)=>Zt(e,o=>!et(n,o)),Cs=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Vo=(e,n)=>{const o=ta.call(e,0);return o.sort(n),o},vc=(e,n)=>n>=0&&n<e.length?W.some(e[n]):W.none(),fo=e=>vc(e,0),cs=e=>vc(e,e.length-1),_r=ve(Array.from)?Array.from:e=>ta.call(e),Oi=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return W.none()},Zi=(e,n)=>{const o=[],r=ve(n)?i=>kt(o,u=>n(u,i)):i=>et(o,i);for(let i=0,u=e.length;i<u;i++){const m=e[i];r(m)||o.push(m)}return o},Go=Object.keys,Vc=Object.hasOwnProperty,At=(e,n)=>{const o=Go(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],m=e[u];n(m,u)}},po=(e,n)=>Hr(e,(o,r)=>({k:r,v:n(o,r)})),Hr=(e,n)=>{const o={};return At(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Vr=e=>(n,o)=>{e[o]=n},Ba=(e,n,o,r)=>{At(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},Ja=(e,n)=>{const o={},r={};return Ba(e,n,Vr(o),Vr(r)),{t:o,f:r}},Wo=(e,n)=>{const o={};return Ba(e,n,Vr(o),Pe),o},hi=(e,n)=>{const o=[];return At(e,(r,i)=>{o.push(n(r,i))}),o},Di=e=>hi(e,Hn),zo=(e,n)=>Sn(e,n)?W.from(e[n]):W.none(),Sn=(e,n)=>Vc.call(e,n),Ys=(e,n)=>Sn(e,n)&&e[n]!==void 0&&e[n]!==null,Qa=(e,n,o=Ge)=>be(o).eq(e,n),ul=e=>{const n={};return xe(e,o=>{n[o]={}}),Go(n)},dl=e=>e.length!==void 0,hs=Array.isArray,pr=e=>{if(hs(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Zs=(e,n,o)=>{if(!e)return!1;if(o=o||e,dl(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Sn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ta=(e,n)=>{const o=[];return Zs(e,(r,i)=>{o.push(n(r,i,e))}),o},yc=(e,n)=>{const o=[];return Zs(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},Tr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ge=(e,n,o,r)=>{let i=Pn(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},de=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Ve=e=>e[e.length-1],Ye=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},gn=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,m=e.isiOS()||e.isAndroid(),y=m||r("(pointer:coarse)"),S=i||!u&&m&&r("(min-device-width:768px)"),O=u||m&&!S,L=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,F=!O&&!S&&!L;return{isiPad:ct(i),isiPhone:ct(u),isTablet:ct(S),isPhone:ct(O),isTouch:ct(y),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ct(L),isDesktop:ct(F)}},Bn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Wn=(e,n)=>{const o=Bn(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return Zn(r(1),r(2))},or=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?_e():Wn(e,o)},_e=()=>Zn(0,0),Zn=(e,n)=>({major:e,minor:n}),Xs={nu:Zn,detect:or,unknown:_e},ur=(e,n)=>Oi(n.brands,o=>{const r=o.brand.toLowerCase();return Po(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:Xs.nu(parseInt(o.version,10),0)}))}),ka=(e,n)=>{const o=String(n).toLowerCase();return Po(e,r=>r.search(o))},Zo=(e,n)=>ka(e,n).map(o=>{const r=Xs.detect(o.versionRegexes,n);return{current:o.name,version:r}}),zc=(e,n)=>ka(e,n).map(o=>{const r=Xs.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Gr=(e,n)=>e.substring(n),Aa=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ps=(e,n)=>es(e,n)?Gr(e,n.length):e,Ko=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?Pn(r)?!0:i+n.length<=r:!1},es=(e,n)=>Aa(e,n,0),na=(e,n)=>Aa(e,n,e.length-n.length),oa=e=>n=>n.replace(e,""),kr=oa(/^\s+|\s+$/g),Ji=oa(/^\s+/g),Ri=oa(/\s+$/g),xo=e=>e.length>0,sa=e=>!xo(e),zr=(e,n)=>n<=0?"":new Array(n+1).join(e),Qi=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?W.none():W.some(o)},ei=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ar=e=>n=>Ko(n,e),Ls=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ko(e,"edge/")&&Ko(e,"chrome")&&Ko(e,"safari")&&Ko(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ei],search:e=>Ko(e,"chrome")&&!Ko(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ko(e,"msie")||Ko(e,"trident")},{name:"Opera",versionRegexes:[ei,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ar("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ar("firefox")},{name:"Safari",versionRegexes:[ei,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ko(e,"safari")||Ko(e,"mobile/"))&&Ko(e,"applewebkit")}],Sf=[{name:"Windows",search:Ar("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ko(e,"iphone")||Ko(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ar("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ar("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ar("linux"),versionRegexes:[]},{name:"Solaris",search:Ar("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ar("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ar("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ji={browsers:ct(Ls),oses:ct(Sf)},Uo="Edge",Oa="Chromium",ma="IE",br="Opera",$l="Firefox",Da="Safari",Ia=()=>ec({current:void 0,version:Xs.unknown()}),ec=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(Uo),isChromium:r(Oa),isIE:r(ma),isOpera:r(br),isFirefox:r($l),isSafari:r(Da)}},Mi={unknown:Ia,nu:ec,edge:ct(Uo),chromium:ct(Oa),ie:ct(ma),opera:ct(br),firefox:ct($l),safari:ct(Da)},uu="Windows",fl="iOS",Uc="Android",ti="Linux",Or="macOS",du="Solaris",fu="FreeBSD",mu="ChromeOS",hu=()=>vr({current:void 0,version:Xs.unknown()}),vr=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(uu),isiOS:r(fl),isAndroid:r(Uc),isMacOS:r(Or),isLinux:r(ti),isSolaris:r(du),isFreeBSD:r(fu),isChromeOS:r(mu)}},gi={unknown:hu,nu:vr,windows:ct(uu),ios:ct(fl),android:ct(Uc),linux:ct(ti),macos:ct(Or),solaris:ct(du),freebsd:ct(fu),chromeos:ct(mu)},me={detect:(e,n,o)=>{const r=ji.browsers(),i=ji.oses(),u=n.bind(S=>ur(r,S)).orThunk(()=>Zo(r,e)).fold(Mi.unknown,Mi.nu),m=zc(i,e).fold(gi.unknown,gi.nu),y=gn(m,u,e,o);return{browser:u,os:m,deviceType:y}}},Re=e=>window.matchMedia(e).matches;let at=Ye(()=>me.detect(window.navigator.userAgent,W.from(window.navigator.userAgentData),Re));const St=()=>at(),en=window.navigator.userAgent,io=St(),ls=io.browser,vo=io.os,qt=io.deviceType,sr=en.indexOf("Windows Phone")!==-1,pn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ls.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ls.isIE(),windowsPhone:sr,browser:{current:ls.current,version:ls.version,isChromium:ls.isChromium,isEdge:ls.isEdge,isFirefox:ls.isFirefox,isIE:ls.isIE,isOpera:ls.isOpera,isSafari:ls.isSafari},os:{current:vo.current,version:vo.version,isAndroid:vo.isAndroid,isChromeOS:vo.isChromeOS,isFreeBSD:vo.isFreeBSD,isiOS:vo.isiOS,isLinux:vo.isLinux,isMacOS:vo.isMacOS,isSolaris:vo.isSolaris,isWindows:vo.isWindows},deviceType:{isDesktop:qt.isDesktop,isiPad:qt.isiPad,isiPhone:qt.isiPhone,isPhone:qt.isPhone,isTablet:qt.isTablet,isTouch:qt.isTouch,isWebView:qt.isWebView}},Dr=/^\s*|\s*$/g,wc=e=>Qt(e)?"":(""+e).replace(Dr,""),H=(e,n)=>n?n==="array"&&hs(e)?!0:typeof e===n:e!==void 0,oe=(e,n,o={})=>{const r=ce(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ye=Sn,Le=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(Sn(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},lt=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Zs(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(lt(i,n,o,r),!0)))},yt={trim:wc,isArray:hs,is:H,toArray:pr,makeMap:oe,each:Zs,map:Ta,grep:yc,inArray:Tr,hasOwn:ye,extend:Le,walk:lt,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>jt(e)?e:e===""?[]:Ta(e.split(n||","),wc),_addCacheSuffix:e=>{const n=pn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Os=(e,n,o=rn)=>e.exists(r=>o(r,n)),ha=(e,n,o=rn)=>Xn(e,n,o).getOr(e.isNone()&&n.isNone()),ni=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Xn=(e,n,o)=>e.isSome()&&n.isSome()?W.some(o(e.getOrDie(),n.getOrDie())):W.none(),oi=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?W.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):W.none(),lr=(e,n)=>e?W.some(n):W.none(),ed=typeof window<"u"?window:Function("return this;")(),xs=(e,n)=>{let o=n??ed;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ml=(e,n)=>{const o=e.split(".");return xs(o,n)},bm=(e,n)=>ml(e,n),m1=(e,n)=>{const o=bm(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Js=Object.getPrototypeOf,vm=e=>m1("HTMLElement",e),yr=e=>{const n=ml("ownerDocument.defaultView",e);return qe(e)&&(vm(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Js(e).constructor.name))},ga=8,Wc=9,Cc=11,Ld=1,La=3,yo=e=>e.dom.nodeName.toLowerCase(),hl=e=>e.dom.nodeType,Sc=e=>n=>hl(n)===e,h1=e=>hl(e)===ga||yo(e)==="#comment",Kr=e=>Fa(e)&&yr(e.dom),Fa=Sc(Ld),Yr=Sc(La),Dh=Sc(Wc),xf=Sc(Cc),si=e=>n=>Fa(n)&&yo(n)===e,Rh=(e,n,o)=>{if(ce(o)||Kt(o)||so(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},js=(e,n,o)=>{Rh(e.dom,n,o)},Zc=(e,n)=>{const o=e.dom;At(n,(r,i)=>{Rh(o,i,r)})},ri=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},wr=(e,n)=>W.from(ri(e,n)),pi=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Cr=(e,n)=>{e.dom.removeAttribute(n)},Mh=e=>{const n=e.dom.attributes;return n==null||n.length===0},gu=e=>Mo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),pu=(e,n)=>{const o=ri(e,n);return o===void 0||o===""?[]:o.split(" ")},Ef=(e,n,o)=>{const i=pu(e,n).concat([o]);return js(e,n,i.join(" ")),!0},bu=(e,n,o)=>{const r=Zt(pu(e,n),i=>i!==o);return r.length>0?js(e,n,r.join(" ")):Cr(e,n),!1},xc=e=>e.dom.classList!==void 0,_f=e=>pu(e,"class"),Sr=(e,n)=>Ef(e,"class",n),Tf=(e,n)=>bu(e,"class",n),Nh=(e,n)=>et(_f(e),n)?Tf(e,n):Sr(e,n),gl=(e,n)=>{xc(e)?e.dom.classList.add(n):Sr(e,n)},Ph=e=>{(xc(e)?e.dom.classList:_f(e)).length===0&&Cr(e,"class")},vu=(e,n)=>{xc(e)?e.dom.classList.remove(n):Tf(e,n),Ph(e)},Bh=(e,n)=>{const o=xc(e)?e.dom.classList.toggle(n):Nh(e,n);return Ph(e),o},Hl=(e,n)=>xc(e)&&e.dom.classList.contains(n),Ih=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return yu(r.childNodes[0])},kf=(e,n)=>{const r=(n||document).createElement(e);return yu(r)},ym=(e,n)=>{const r=(n||document).createTextNode(e);return yu(r)},yu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},pe={fromHtml:Ih,fromTag:kf,fromText:ym,fromDom:yu,fromPoint:(e,n,o)=>W.from(e.dom.elementFromPoint(n,o)).map(yu)},Vl=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},pl=(e,n)=>{const o=e.dom;if(o.nodeType!==Ld)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Lh=e=>e.nodeType!==Ld&&e.nodeType!==Wc&&e.nodeType!==Cc||e.childElementCount===0,g1=(e,n)=>{const o=n===void 0?document:n.dom;return Lh(o)?[]:dt(o.querySelectorAll(e),pe.fromDom)},wu=(e,n)=>{const o=n===void 0?document:n.dom;return Lh(o)?W.none():W.from(o.querySelector(e)).map(pe.fromDom)},ro=(e,n)=>e.dom===n.dom,Rr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Ec=e=>pe.fromDom(e.dom.ownerDocument),Cu=e=>Dh(e)?e:Ec(e),Af=e=>pe.fromDom(Cu(e).dom.documentElement),Fd=e=>pe.fromDom(Cu(e).dom.defaultView),$a=e=>W.from(e.dom.parentNode).map(pe.fromDom),Of=e=>W.from(e.dom.parentElement).map(pe.fromDom),zl=(e,n)=>{const o=ve(n)?n:tt;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,m=pe.fromDom(u);if(i.push(m),o(m)===!0)break;r=u}return i},Df=e=>{const n=o=>Zt(o,r=>!ro(e,r));return $a(e).map(ra).map(n).getOr([])},Ul=e=>W.from(e.dom.previousSibling).map(pe.fromDom),bi=e=>W.from(e.dom.nextSibling).map(pe.fromDom),Fh=e=>vs(Vl(e,Ul)),$d=e=>Vl(e,bi),ra=e=>dt(e.dom.childNodes,pe.fromDom),Ni=(e,n)=>{const o=e.dom.childNodes;return W.from(o[n]).map(pe.fromDom)},ai=e=>Ni(e,0),td=e=>Ni(e,e.dom.childNodes.length-1),Hd=e=>e.dom.childNodes.length,$h=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return pe.fromDom(n)},Vd=e=>xf(e)&&$e(e.dom.host),jc=e=>pe.fromDom(e.dom.getRootNode()),Rf=e=>Vd(e)?e:$h(Cu(e)),Wg=e=>Vd(e)?e:pe.fromDom(Cu(e).dom.body),Hh=e=>{const n=jc(e);return Vd(n)?W.some(n):W.none()},Xb=e=>pe.fromDom(e.dom.host),Cm=e=>{if($e(e.target)){const n=pe.fromDom(e.target);if(Fa(n)&&zd(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return fo(o)}}return W.from(e.target)},zd=e=>$e(e.dom.shadowRoot),nd=e=>{const n=Yr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Hh(pe.fromDom(n)).fold(()=>o.body.contains(n),cn(nd,Xb))};var Ud=(e,n,o,r,i)=>e(o,r)?W.some(o):ve(i)&&i(o)?W.none():n(o,r,i);const qs=(e,n,o)=>{let r=e.dom;const i=ve(o)?o:tt;for(;r.parentNode;){r=r.parentNode;const u=pe.fromDom(r);if(n(u))return W.some(u);if(i(u))break}return W.none()},Qs=(e,n,o)=>Ud((i,u)=>u(i),qs,e,n,o),tc=(e,n)=>{const o=e.dom;return o.parentNode?od(pe.fromDom(o.parentNode),r=>!ro(e,r)&&n(r)):W.none()},od=(e,n)=>{const o=i=>n(pe.fromDom(i));return Po(e.dom.childNodes,o).map(pe.fromDom)},Vh=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=pe.fromDom(r.childNodes[i]);if(n(u))return W.some(u);const m=o(r.childNodes[i]);if(m.isSome())return m}return W.none()};return o(e.dom)},Ur=(e,n,o)=>qs(e,r=>pl(r,n),o),mn=(e,n)=>wu(n,e),Wl=(e,n,o)=>Ud((i,u)=>pl(i,u),Ur,e,n,o),Sm=e=>Wl(e,"[contenteditable]"),pa=(e,n=!1)=>nd(e)?e.dom.isContentEditable:Sm(e).fold(ct(n),o=>ts(o)==="true"),ts=e=>e.dom.contentEditable,Su=e=>e.style!==void 0&&ve(e.style.getPropertyValue),zh=(e,n,o)=>{if(!ce(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Su(e)&&e.style.setProperty(n,o)},Wd=(e,n)=>{Su(e)&&e.style.removeProperty(n)},Zg=(e,n,o)=>{const r=e.dom;zh(r,n,o)},Yn=(e,n)=>{const o=e.dom;At(n,(r,i)=>{zh(o,i,r)})},Wr=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!nd(e)?sd(o,n):i},sd=(e,n)=>Su(e)?e.style.getPropertyValue(n):"",Ra=(e,n)=>{const o=e.dom,r=sd(o,n);return W.from(r).filter(i=>i.length>0)},vi=e=>{const n={},o=e.dom;if(Su(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},nc=(e,n)=>{const o=e.dom;Wd(o,n),Os(wr(e,"style").map(kr),"")&&Cr(e,"style")},aa=e=>e.dom.offsetWidth,ii=(e,n)=>{$a(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},qi=(e,n)=>{bi(e).fold(()=>{$a(e).each(i=>{rr(i,n)})},r=>{ii(r,n)})},xm=(e,n)=>{ai(e).fold(()=>{rr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},rr=(e,n)=>{e.dom.appendChild(n.dom)},rd=(e,n)=>{ii(e,n),rr(n,e)},dr=(e,n)=>{xe(n,(o,r)=>{const i=r===0?e:n[r-1];qi(i,o)})},xu=(e,n)=>{xe(n,o=>{rr(e,o)})},ad=e=>{e.dom.textContent="",xe(ra(e),n=>{gs(n)})},gs=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},_c=e=>{const n=ra(e);n.length>0&&dr(e,n),gs(e)},jg=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ra(pe.fromDom(r))},Zl=e=>dt(e,pe.fromDom),Ds=e=>e.dom.innerHTML,Eu=(e,n)=>{const r=Ec(e).dom,i=pe.fromDom(r.createDocumentFragment()),u=jg(n,r);xu(i,u),ad(e),rr(e,i)},Pi=e=>{const n=pe.fromTag("div"),o=pe.fromDom(e.dom.cloneNode(!0));return rr(n,o),Ds(n)},co=(e,n,o,r,i,u,m)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:m}),id=e=>{const n=pe.fromDom(Cm(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=M(r,o);return co(n,e.clientX,e.clientY,o,r,i,e)},Mf=(e,n)=>o=>{e(o)&&n(id(o))},Em=(e,n,o,r,i)=>{const u=Mf(o,r);return e.dom.addEventListener(n,u,i),{unbind:nt(I,e,n,u,i)}},k=(e,n,o,r)=>Em(e,n,o,r,!1),I=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},q=(e,n)=>({left:e,top:n,translate:(r,i)=>q(e+r,n+i)}),fe=q,Ee=e=>{const n=e.getBoundingClientRect();return fe(n.left,n.top)},mt=(e,n)=>e!==void 0?e:n!==void 0?n:0,kn=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return fe(o.offsetLeft,o.offsetTop);const u=mt(r==null?void 0:r.pageYOffset,i.scrollTop),m=mt(r==null?void 0:r.pageXOffset,i.scrollLeft),y=mt(i.clientTop,o.clientTop),S=mt(i.clientLeft,o.clientLeft);return Jn(e).translate(m-S,u-y)},Jn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?fe(r.offsetLeft,r.offsetTop):nd(e)?Ee(n):fe(0,0)},Rn=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return fe(o,r)},An=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},Rs=(e,n)=>{St().browser.isSafari()&&ve(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},xr=e=>{const n=e===void 0?window:e;return St().browser.isFirefox()?W.none():W.from(n.visualViewport)},oc=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),jl=e=>{const n=e===void 0?window:e,o=n.document,r=Rn(pe.fromDom(o));return xr(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,m=i.clientHeight;return oc(r.left,r.top,u,m)},i=>oc(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},Nf=(e,n)=>Zt(ra(e),n),Uh=(e,n)=>{let o=[];return xe(ra(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Uh(r,n))}),o},ci=(e,n)=>g1(n,e),Wh=(e,n,o)=>qs(e,n,o).isSome(),Jb=(e,n)=>tc(e,n).isSome(),qg=(e,n)=>Vh(e,n).isSome();class Ha{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let m=n.parentNode;m&&m!==this.rootNode;m=m.parentNode)if(u=m[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const Gg="\uFEFF",Xr=" ",Qb=e=>e===Gg,Bi=e=>e.replace(/\uFEFF/g,""),Dn=/^[ \t\r\n]*$/,Tc=e=>Dn.test(e),_m=e=>{for(const n of e)if(!Qb(n))return!1;return!0},Zh=e=>" \f	\v".indexOf(e)!==-1,Kg=e=>e===`
`||e==="\r",p1=(e,n)=>n<e.length&&n>=0?Kg(e[n]):!1,bl=(e,n=4,o=!0,r=!0)=>{const i=zr(" ",n),u=e.replace(/\t/g,i);return Mo(u,(y,S)=>Zh(S)||S===Xr?y.pcIsSpace||y.str===""&&o||y.str.length===u.length-1&&r||p1(u,y.str.length+1)?{pcIsSpace:!1,str:y.str+Xr}:{pcIsSpace:!0,str:y.str+" "}:{pcIsSpace:Kg(S),str:y.str+S},{pcIsSpace:!1,str:""}).str},_u=e=>n=>!!n&&n.nodeType===e,Zd=e=>!!e&&!Object.getPrototypeOf(e),Wt=_u(1),qc=e=>Wt(e)&&Kr(pe.fromDom(e)),Yg=e=>Wt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Pf=e=>{const n=e.toLowerCase();return o=>$e(o)&&o.nodeName.toLowerCase()===n},vl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return et(n,r)}return!1}},jh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Wt(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const m=i.getComputedStyle(r,null);if((m?m.getPropertyValue(e):null)===o[u])return!0}}return!1}},jd=e=>n=>Wt(n)&&n.hasAttribute(e),Bf=e=>Wt(e)&&e.hasAttribute("data-mce-bogus"),qh=e=>Wt(e)&&e.getAttribute("data-mce-bogus")==="all",ql=e=>Wt(e)&&e.tagName==="TABLE",ev=e=>n=>!!(qc(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ar=vl(["textarea","input"]),pt=_u(3),yi=_u(4),Gl=_u(7),ba=_u(8),Tm=_u(9),ia=_u(11),Lo=Pf("br"),Xg=Pf("img"),rt=ev("true"),Fo=ev("false"),Gh=vl(["td","th"]),Jr=vl(["td","th","caption"]),wi=vl(["video","audio","object","embed"]),tv=Pf("li"),kc=Pf("details"),Vy=Pf("summary"),cd={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},nv=(e,n,o)=>{const r=pe.fromDom(n),i=pe.fromDom(e),u=o.getWhitespaceElements();return Wh(i,y=>Sn(u,yo(y)),nt(ro,r))},Ac=e=>Wt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Bo=(e,n)=>Wt(e)&&Sn(n.getNonEmptyElements(),e.nodeName),Tu=jd("data-mce-bookmark"),If=e=>Of(pe.fromDom(e)).exists(n=>!pa(n)),ca=(e,n,o)=>Tc(e.data)&&!nv(e,n,o),Jg=(e,n,o,r)=>pt(e)&&!ca(e,n,o)&&(!r.includeZwsp||!_m(e.data)),ku=(e,n,o,r)=>ve(r.isContent)&&r.isContent(n)||Bo(n,e)||Tu(n)||Ac(n)||Jg(n,o,e,r)||Fo(n)||rt(n)&&If(n),Au=(e,n,o)=>{const r={...cd,...o};if(r.checkRootAsContent&&ku(e,n,n,r))return!1;let i=n.firstChild,u=0;if(!i)return!0;const m=new Ha(i,n);do{if(r.skipBogus&&Wt(i)){const y=i.getAttribute("data-mce-bogus");if(y){i=m.next(y==="all");continue}}if(ba(i)){i=m.next(!0);continue}if(Lo(i)){u++,i=m.next();continue}if(ku(e,i,n,r))return!1;i=m.next()}while(i);return u<=1},Bs=(e,n,o)=>Au(e,n.dom,{checkRootAsContent:!0,...o}),km=(e,n,o)=>ku(e,n,n,{includeZwsp:cd.includeZwsp,...o}),Be=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},Oc=e=>{const n=Be(W.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(y))}}},Am=e=>{const n=Be(W.none()),o=()=>n.get().each(y=>clearInterval(y));return{clear:()=>{o(),n.set(W.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(W.some(setInterval(y,e)))}}},Ci=()=>{const e=Oc(Pe);return{...e,on:o=>e.get().each(o)}},Dc=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Mr=e=>Dc(e)!=="html",fr=e=>Mr(e.nodeName),zy=e=>Dc(e.nodeName),_=["svg","math"],R=()=>{const e=Ci(),n=()=>e.get().map(zy).getOr("html");return{track:i=>(fr(i)?e.set(i):e.get().exists(u=>!u.contains(i))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Z="data-mce-block",te=e=>Zt(Go(e),n=>!/[A-Z]/.test(n)),Te=e=>dt(te(e),n=>{const o=CSS.escape(n);return`${o}:`+dt(_,r=>`not(${r} ${o})`).join(":")}).join(","),ot=(e,n)=>$e(n.querySelector(e))?(n.setAttribute(Z,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Z),!1),Ot=(e,n)=>{const o=Te(e.getTransparentElements()),r=Te(e.getBlockElements());return Zt(n.querySelectorAll(o),i=>ot(r,i))},sn=(e,n,o)=>{var r;const i=o?"lastChild":"firstChild";for(let u=n[i];u;u=u[i])if(Au(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},jn=(e,n,o)=>{const r=document.createRange(),i=n.parentNode;if(i){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();sn(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const m=r.extractContents();sn(e,m,!1),Au(e,u,{checkRootAsContent:!0})||i.insertBefore(u,n),Au(e,o,{checkRootAsContent:!0})||i.insertBefore(o,n),Au(e,m,{checkRootAsContent:!0})||i.insertBefore(m,n),i.removeChild(n)}},oo=(e,n,o)=>{const r=e.getBlockElements(),i=pe.fromDom(n),u=y=>yo(y)in r,m=y=>ro(y,i);xe(Zl(o),y=>{qs(y,u,m).each(S=>{const O=Nf(y,L=>u(L)&&!e.isValidChild(yo(S),yo(L)));if(O.length>0){const L=Of(S);xe(O,F=>{qs(F,u,m).each(V=>{jn(e,V.dom,F.dom)})}),L.each(F=>Ot(e,F.dom))}})})},Yo=(e,n,o)=>{xe([...o,...Ou(e,n)?[n]:[]],r=>xe(ci(pe.fromDom(r),r.nodeName.toLowerCase()),i=>{Kh(e,i.dom)&&_c(i)}))},Xo=(e,n)=>{const o=Ot(e,n);oo(e,n,o),Yo(e,n,o)},er=(e,n)=>{if(yl(e,n)){const o=Te(e.getBlockElements());ot(o,n)}},Rc=(e,n,o)=>{const r=u=>ro(u,pe.fromDom(n)),i=zl(pe.fromDom(o),r);vc(i,i.length-2).filter(Fa).fold(()=>Xo(e,n),u=>Xo(e,u.dom))},Va=e=>e.hasAttribute(Z),Kl=(e,n)=>Sn(e.getTransparentElements(),n),yl=(e,n)=>Wt(n)&&Kl(e,n.nodeName),Ou=(e,n)=>yl(e,n)&&Va(n),Kh=(e,n)=>yl(e,n)&&!Va(n),Gc=(e,n)=>n.type===1&&Kl(e,n.name)&&ce(n.attr(Z)),Om=St().browser,Qg=e=>Po(e,Fa),ep=e=>Om.isFirefox()&&yo(e)==="table"?Qg(ra(e)).filter(n=>yo(n)==="caption").bind(n=>Qg($d(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,Lf=(e,n)=>e.children&&et(e.children,n),va=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Wr(pe.fromDom(e),"position")==="static"){const y=n.getBoundingClientRect();return r=y.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=y.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let m=n;for(;m&&m!==o&&m.nodeType&&!Lf(m,o);){const y=m;r+=y.offsetLeft||0,i+=y.offsetTop||0,m=y.offsetParent}for(m=n.parentNode;m&&m!==o&&m.nodeType&&!Lf(m,o);)r-=m.scrollLeft||0,i-=m.scrollTop||0,m=m.parentNode;i+=ep(pe.fromDom(n))}return{x:r,y:i}},Yl=(e,n={})=>{let o=0;const r={},i=pe.fromDom(e),u=Cu(i),m=we=>{n.referrerPolicy=we},y=we=>{n.contentCssCors=we},S=we=>{rr(Rf(i),we)},O=we=>{const De=Rf(i);mn(De,"#"+we).each(gs)},L=we=>zo(r,we).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),F=we=>new Promise((De,Oe)=>{let He;const ft=yt._addCacheSuffix(we),Rt=L(ft);r[ft]=Rt,Rt.count++;const Yt=(an,wn)=>{xe(an,os),Rt.status=wn,Rt.passed=[],Rt.failed=[],He&&(He.onload=null,He.onerror=null,He=null)},Je=()=>Yt(Rt.passed,2),Ue=()=>Yt(Rt.failed,3);if(De&&Rt.passed.push(De),Oe&&Rt.failed.push(Oe),Rt.status===1)return;if(Rt.status===2){Je();return}if(Rt.status===3){Ue();return}Rt.status=1;const ut=pe.fromTag("link",u.dom);Zc(ut,{rel:"stylesheet",type:"text/css",id:Rt.id}),n.contentCssCors&&js(ut,"crossOrigin","anonymous"),n.referrerPolicy&&js(ut,"referrerpolicy",n.referrerPolicy),He=ut.dom,He.onload=Je,He.onerror=Ue,S(ut),js(ut,"href",ft)}),V=(we,De)=>{const Oe=L(we);r[we]=Oe,Oe.count++;const He=pe.fromTag("style",u.dom);Zc(He,{rel:"stylesheet",type:"text/css",id:Oe.id}),He.dom.innerHTML=De,S(He)},Q=we=>Promise.allSettled(dt(we,Oe=>F(Oe).then(ct(Oe)))).then(Oe=>{const He=To(Oe,ft=>ft.status==="fulfilled");return He.fail.length>0?Promise.reject(dt(He.fail,ft=>ft.reason)):dt(He.pass,ft=>ft.value)}),re=we=>{const De=yt._addCacheSuffix(we);zo(r,De).each(Oe=>{--Oe.count===0&&(delete r[De],O(Oe.id))})};return{load:F,loadRawCss:V,loadAll:Q,unload:re,unloadRawCss:we=>{zo(r,we).each(De=>{--De.count===0&&(delete r[we],O(De.id))})},unloadAll:we=>{xe(we,De=>{re(De)})},_setReferrerPolicy:m,_setContentCssCors:y}},Ms=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=jc(o).dom;return W.from(e.get(u)).getOrThunk(()=>{const m=Yl(u,r);return e.set(u,m),m})}}})(),Ii=e=>e.nodeName.toLowerCase()==="span",Er=(e,n)=>$e(e)&&(km(n,e)||n.isInline(e.nodeName.toLowerCase())),tp=(e,n,o)=>{const r=new Ha(e,n).prev(!1),i=new Ha(e,n).next(!1),u=Pn(r)||Er(r,o),m=Pn(i)||Er(i,o);return u&&m},Ff=e=>Ii(e)&&e.getAttribute("data-mce-type")==="bookmark",$f=(e,n,o)=>pt(e)&&e.data.length>0&&tp(e,n,o),Kc=e=>Wt(e)?e.childNodes.length>0:!1,ld=e=>ia(e)||Tm(e),qd=(e,n,o,r)=>{var i;const u=r||n;if(Wt(n)&&Ff(n))return n;const m=n.childNodes;for(let y=m.length-1;y>=0;y--)qd(e,m[y],o,u);if(Wt(n)){const y=n.childNodes;y.length===1&&Ff(y[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(y[0],n))}return!ld(n)&&!km(o,n)&&!Kc(n)&&!$f(n,u,o)&&e.remove(n),n},Du=yt.makeMap,b1=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gd=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,np=/[<>&\"\']/g,Yh=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,zS={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},ud={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},US={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Uy=e=>{const n=pe.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Nr=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!ud[u]){const m="&"+r[i+1]+";";o[u]=m,o[m]=u}}return o}else return},ov=Nr("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),dd=(e,n)=>e.replace(n?b1:Gd,o=>ud[o]||o),Dm=e=>(""+e).replace(np,n=>ud[n]||n),Hf=(e,n)=>e.replace(n?b1:Gd,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ud[o]||"&#"+o.charCodeAt(0)+";"),Xl=(e,n,o)=>{const r=o||ov;return e.replace(n?b1:Gd,i=>ud[i]||r[i]||i)},fd={encodeRaw:dd,encodeAllRaw:Dm,encodeNumeric:Hf,encodeNamed:Xl,getEncodeFunc:(e,n)=>{const o=Nr(n)||ov,r=(m,y)=>m.replace(y?b1:Gd,S=>ud[S]!==void 0?ud[S]:o[S]!==void 0?o[S]:S.length>1?"&#"+((S.charCodeAt(0)-55296)*1024+(S.charCodeAt(1)-56320)+65536)+";":"&#"+S.charCodeAt(0)+";"),i=(m,y)=>Xl(m,y,o),u=Du(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:Xl:u.numeric?Hf:dd},decode:e=>e.replace(Yh,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):zS[o]||String.fromCharCode(o)):US[n]||ov[n]||Uy(n))},Li=(e,n)=>(e=yt.trim(e),e?e.split(n||" "):[]),y1=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Wy=e=>qe(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",w1=e=>{const n=o=>jt(o)?dt(o,n):Wy(o)?new RegExp(o.source,o.flags):qe(o)?po(o,n):o;return n(e)},C1=e=>{const n=/^(~)?(.+)$/;return ws(Li(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",m=r[2];return[{cloneName:u,name:m}]}else return[]})},Zy=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Xh=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},md=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Xh(e),i=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:i(n),phrasingContent:i(o),flowContent:i(r)})},sc={html4:Ye(()=>md("html4")),html5:Ye(()=>md("html5")),"html5-strict":Ye(()=>md("html5-strict"))},Ql=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:i}=sc[e]();return n==="blocks"?W.some(o):n==="phrasing"?W.some(r):n==="flow"?W.some(i):W.none()},Rm=e=>{const n=Zy(e),{phrasingContent:o,flowContent:r}=Xh(e),i={},u=(S,O,L)=>{i[S]={attributes:Cs(O,ct({})),attributesOrder:O,children:Cs(L,ct({}))}},m=(S,O="",L="")=>{const F=Li(L),V=Li(S);let Q=V.length;const re=[...n,...Li(O)];for(;Q--;)u(V[Q],re.slice(),F)},y=(S,O)=>{const L=Li(S),F=Li(O);let V=L.length;for(;V--;){const Q=i[L[V]];for(let re=0,ee=F.length;re<ee;re++)Q.attributes[F[re]]={},Q.attributesOrder.push(F[re])}};return e!=="html5-strict"&&(xe(Li("acronym applet basefont big font strike tt"),L=>{m(L,"",o)}),xe(Li("center dir isindex noframes"),L=>{m(L,"",r)})),m("html","manifest","head body"),m("head","","base command link meta noscript script style title"),m("title hr noscript br"),m("base","href target"),m("link","href rel media hreflang type sizes hreflang"),m("meta","name http-equiv content charset"),m("style","media type scoped"),m("script","src async defer type charset"),m("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),m("dd div","",r),m("address dt caption","",e==="html4"?o:r),m("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),m("blockquote","cite",r),m("ol","reversed start type","li"),m("ul","","li"),m("li","value",r),m("dl","","dt dd"),m("a","href target rel media hreflang type",e==="html4"?o:r),m("q","cite",o),m("ins del","cite datetime",r),m("img","src sizes srcset alt usemap ismap width height"),m("iframe","src name width height",r),m("embed","src type width height"),m("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),m("param","name value"),m("map","name",[r,"area"].join(" ")),m("area","alt coords shape href target rel media hreflang type"),m("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),m("colgroup","span","col"),m("col","span"),m("tbody thead tfoot","","tr"),m("tr","","td th"),m("td","colspan rowspan headers",r),m("th","colspan rowspan headers scope abbr",r),m("form","accept-charset action autocomplete enctype method name novalidate target",r),m("fieldset","disabled form name",[r,"legend"].join(" ")),m("label","form for",o),m("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),m("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),m("select","disabled form multiple name required size","option optgroup"),m("optgroup","disabled label","option"),m("option","disabled label selected value"),m("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),m("menu","type label",[r,"li"].join(" ")),m("noscript","",r),e!=="html4"&&(m("wbr"),m("ruby","",[o,"rt rp"].join(" ")),m("figcaption","",r),m("mark rt rp bdi","",o),m("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),m("canvas","width height",r),m("data","value",o),m("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),m("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),m("picture","","img source"),m("source","src srcset type media sizes"),m("track","kind src srclang label default"),m("datalist","",[o,"option"].join(" ")),m("article section nav aside main header footer","",r),m("hgroup","","h1 h2 h3 h4 h5 h6"),m("figure","",[r,"figcaption"].join(" ")),m("time","datetime",o),m("dialog","open",r),m("command","type label icon disabled checked radiogroup command"),m("output","for form name",o),m("progress","value max",o),m("meter","value min max low high optimum",o),m("details","open",[r,"summary"].join(" ")),m("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),e!=="html4"&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&xe([i.video,i.audio],S=>{delete S.children.audio,delete S.children.video}),xe(Li("a form meter progress dfn"),S=>{i[S]&&delete i[S].children[S]}),delete i.caption.children.table,delete i.script,i},jy=e=>e==="-"?"remove":"add",Jh=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return W.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},qy=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ws(Li(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?jy(i):"replace",m=r[2],y=ws(Li(r[3],"|"),S=>Jh(S).toArray());return[{operation:u,name:m,validChildren:y}]}else return[]})},WS=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return xe(Li(e,"|"),m=>{const y=o.exec(m);if(y){const S={},O=y[1],L=y[2].replace(/[\\:]:/g,":"),F=y[3],V=y[4];if(O==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(L),S.required=!0),O==="-"){delete i[L],u.splice(yt.inArray(u,L),1);return}if(F&&(F==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:L,value:V}),S.defaultValue=V):F==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:L,value:V}),S.forcedValue=V):F==="<"&&(S.validValues=yt.makeMap(V,"?"))),r.test(L)){const Q=S;n.attributePatterns=n.attributePatterns||[],Q.pattern=y1(L),n.attributePatterns.push(Q)}else i[L]||u.push(L),i[L]=S}})},ZS=(e,n)=>{At(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},jS=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ws(Li(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],m=i[2],y=i[3],S=i[4],O=i[5],L={attributes:{},attributesOrder:[]};if(e.each(F=>ZS(F,L)),u==="#"?L.paddEmpty=!0:u==="-"&&(L.removeEmpty=!0),S==="!"&&(L.removeEmptyAttrs=!0),O&&WS(O,L),y&&(L.outputName=m),m==="@")if(e.isNone())e=W.some(L);else return[];return[y?{name:m,element:L,aliasName:y}:{name:m,element:L}]}else return[]})},Mm={},Qh=yt.makeMap,ao=yt.each,_n=yt.extend,Nm=yt.explode,S1=(e,n={})=>{const o=Qh(e," ",Qh(e.toUpperCase()," "));return _n(o,n)},sv=e=>S1("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Gy=(e,n)=>{if(e){const o={};return ce(e)&&(e={"*":e}),ao(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Qh(r,/[, ]/):Nm(r,/[, ]/)}),o}else return},Kd=(e={})=>{var n;const o={},r={};let i=[];const u={},m={},y=(Cn,Oo,cr)=>{const Fr=e[Cn];if(Fr)return Qh(Fr,/[, ]/,Qh(Fr.toUpperCase(),/[, ]/));{let ua=Mm[Cn];return ua||(ua=S1(Oo,cr),Mm[Cn]=ua),ua}},S=(n=e.schema)!==null&&n!==void 0?n:"html5",O=Rm(S);e.verify_html===!1&&(e.valid_elements="*[*]");const L=Gy(e.valid_styles),F=Gy(e.invalid_styles,"map"),V=Gy(e.valid_classes,"map"),Q=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),re=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),ee=y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),le=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),we="td th iframe video audio object script code",De=y("non_empty_elements",we+" pre svg textarea summary",ee),Oe=y("move_caret_before_on_enter_elements",we+" table",ee),He="h1 h2 h3 h4 h5 h6",ft=y("text_block_elements",He+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Rt=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",ft),Yt=y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Je=y("transparent_elements","a ins del canvas map"),Ue=y("wrap_block_elements","pre "+He);ao("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Cn=>{m[Cn]=new RegExp("</"+Cn+"[^>]*>","gi")});const ut=Cn=>{const Oo=W.from(o["@"]),cr=/[*?+]/;xe(jS(Oo,Cn??""),({name:Fr,element:ua,aliasName:mi})=>{if(mi&&(o[mi]=ua),cr.test(Fr)){const da=ua;da.pattern=y1(Fr),i.push(da)}else o[Fr]=ua})},an=Cn=>{i=[],xe(Go(o),Oo=>{delete o[Oo]}),ut(Cn)},wn=(Cn,Oo)=>{var cr,Fr;delete Mm.text_block_elements,delete Mm.block_elements;const ua=Oo.extends?!Pl(Oo.extends):!1,mi=Oo.extends;if(r[Cn]=mi?r[mi]:{},u[Cn]=mi??Cn,De[Cn.toUpperCase()]={},De[Cn]={},ua||(Rt[Cn.toUpperCase()]={},Rt[Cn]={}),mi&&!o[Cn]&&o[mi]){const da=w1(o[mi]);delete da.removeEmptyAttrs,delete da.removeEmpty,o[Cn]=da}else o[Cn]={attributesOrder:[],attributes:{}};if(jt(Oo.attributes)){const da=pc=>{fa.attributesOrder.push(pc),fa.attributes[pc]={}},fa=(cr=o[Cn])!==null&&cr!==void 0?cr:{};delete fa.attributesDefault,delete fa.attributesForced,delete fa.attributePatterns,delete fa.attributesRequired,fa.attributesOrder=[],fa.attributes={},xe(Oo.attributes,pc=>{const Md=Zy(S);Jh(pc).each(({preset:Nd,name:Pd})=>{Nd?Pd==="global"&&xe(Md,da):da(Pd)})}),o[Cn]=fa}if(Kt(Oo.padEmpty)){const da=(Fr=o[Cn])!==null&&Fr!==void 0?Fr:{};da.paddEmpty=Oo.padEmpty,o[Cn]=da}if(jt(Oo.children)){const da={},fa=Md=>{da[Md]={}},pc=Md=>{Ql(S,Md).each(Nd=>{xe(Nd,fa)})};xe(Oo.children,Md=>{Jh(Md).each(({preset:Nd,name:Pd})=>{Nd?pc(Pd):fa(Pd)})}),r[Cn]=da}mi&&At(r,(da,fa)=>{da[mi]&&(r[fa]=da=_n({},r[fa]),da[Cn]=da[mi])})},go=Cn=>{xe(C1(Cn??""),({name:Oo,cloneName:cr})=>{wn(Oo,{extends:cr})})},wo=Cn=>{qe(Cn)?At(Cn,(Oo,cr)=>wn(cr,Oo)):ce(Cn)&&go(Cn)},ns=Cn=>{xe(qy(Cn??""),({operation:Oo,name:cr,validChildren:Fr})=>{const ua=Oo==="replace"?{"#comment":{}}:r[cr],mi=fa=>{Oo==="remove"?delete ua[fa]:ua[fa]={}},da=fa=>{Ql(S,fa).each(pc=>{xe(pc,mi)})};xe(Fr,({preset:fa,name:pc})=>{fa?da(pc):mi(pc)}),r[cr]=ua})},ps=Cn=>{const Oo=o[Cn];if(Oo)return Oo;let cr=i.length;for(;cr--;){const Fr=i[cr];if(Fr.pattern.test(Cn))return Fr}},Lr=()=>{e.valid_elements?(an(e.valid_elements),ao(O,(Cn,Oo)=>{r[Oo]=Cn.children})):(ao(O,(Cn,Oo)=>{o[Oo]={attributes:Cn.attributes,attributesOrder:Cn.attributesOrder},r[Oo]=Cn.children}),ao(Li("strong/b em/i"),Cn=>{const Oo=Li(Cn,"/");o[Oo[1]].outputName=Oo[0]}),ao(Yt,(Cn,Oo)=>{o[Oo]&&(e.padd_empty_block_inline_children&&(o[Oo].paddInEmptyBlock=!0),o[Oo].removeEmpty=!0)}),ao(Li("ol ul blockquote a table tbody"),Cn=>{o[Cn]&&(o[Cn].removeEmpty=!0)}),ao(Li("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Cn=>{o[Cn]&&(o[Cn].paddEmpty=!0)}),ao(Li("span"),Cn=>{o[Cn].removeEmptyAttrs=!0})),delete o.svg,wo(e.custom_elements),ns(e.valid_children),ut(e.extended_valid_elements),ns("+ol[ul|ol],+ul[ul|ol]"),ao({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Cn,Oo)=>{o[Oo]&&(o[Oo].parentsRequired=Li(Cn))}),e.invalid_elements&&ao(Nm(e.invalid_elements),Cn=>{o[Cn]&&delete o[Cn]}),ps("span")||ut("span[!data-mce-type|*]")},Ea=ct(L),Ts=ct(F),Bt=ct(V),vn=ct(le),$o=ct(Rt),zt=ct(ft),Tn=ct(Yt),mo=ct(Object.seal(ee)),Gt=ct(re),ho=ct(De),Co=ct(Oe),Ya=ct(Q),is=ct(Je),Pa=ct(Ue),Rd=ct(Object.seal(m)),fm=(Cn,Oo)=>{const cr=r[Cn.toLowerCase()];return!!(cr&&cr[Oo.toLowerCase()])},Fc=(Cn,Oo)=>{const cr=ps(Cn);if(cr)if(Oo){if(cr.attributes[Oo])return!0;const Fr=cr.attributePatterns;if(Fr){let ua=Fr.length;for(;ua--;)if(Fr[ua].pattern.test(Oo))return!0}}else return!0;return!1},Pl=Cn=>Sn($o(),Cn),Yu=Cn=>!es(Cn,"#")&&Fc(Cn)&&!Pl(Cn),Bl=Cn=>Sn(Pa(),Cn)||Yu(Cn),Xu=ct(u);return Lr(),{type:S,children:r,elements:o,getValidStyles:Ea,getValidClasses:Bt,getBlockElements:$o,getInvalidStyles:Ts,getVoidElements:mo,getTextBlockElements:zt,getTextInlineElements:Tn,getBoolAttrs:vn,getElementRule:ps,getSelfClosingElements:Gt,getNonEmptyElements:ho,getMoveCaretBeforeOnEnterElements:Co,getWhitespaceElements:Ya,getTransparentElements:is,getSpecialElements:Rd,isValidChild:fm,isValid:Fc,isBlock:Pl,isInline:Yu,isWrapper:Bl,getCustomElements:Xu,addValidElements:ut,setValidElements:an,addCustomElements:wo,addValidChildren:ns}},Fs=e=>({value:qS(e)}),qS=e=>Ps(e,"#").toUpperCase(),Ky=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Yy=e=>{const n=Ky(e.red)+Ky(e.green)+Ky(e.blue);return Fs(n)},it=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,eg=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Sk=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Pm=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),m=parseInt(o,10),y=parseFloat(r);return Sk(i,u,m,y)},xk=e=>it.test(e)?"rgb":eg.test(e)?"rgba":"other",tg=e=>{const n=it.exec(e);if(n!==null)return W.some(Pm(n[1],n[2],n[3],"1"));const o=eg.exec(e);return o!==null?W.some(Pm(o[1],o[2],o[3],o[4])):W.none()},Xy=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,hd=e=>tg(e).map(Yy).map(n=>"#"+n.value).getOr(e),Jy=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let m,y;const S=Gg;n&&(m=n.getValidStyles(),y=n.getInvalidStyles());const O=(`\\" \\' \\; \\: ; : `+S).split(" ");for(let F=0;F<O.length;F++)u[O[F]]=S+F,u[S+F]=O[F];const L={parse:F=>{const V={};let Q=!1;const re=e.url_converter,ee=e.url_converter_scope||L,le=(Je,Ue,ut)=>{const an=V[Je+"-top"+Ue];if(!an)return;const wn=V[Je+"-right"+Ue];if(!wn)return;const go=V[Je+"-bottom"+Ue];if(!go)return;const wo=V[Je+"-left"+Ue];if(!wo)return;const ns=[an,wn,go,wo];let ps=ns.length-1;for(;ps--&&ns[ps]===ns[ps+1];);ps>-1&&ut||(V[Je+Ue]=ps===-1?ns[0]:ns.join(" "),delete V[Je+"-top"+Ue],delete V[Je+"-right"+Ue],delete V[Je+"-bottom"+Ue],delete V[Je+"-left"+Ue])},we=Je=>{const Ue=V[Je];if(!Ue)return;const ut=Ue.indexOf(",")>-1?[Ue]:Ue.split(" ");let an=ut.length;for(;an--;)if(ut[an]!==ut[0])return!1;return V[Je]=ut[0],!0},De=(Je,Ue,ut,an)=>{we(Ue)&&we(ut)&&we(an)&&(V[Je]=V[Ue]+" "+V[ut]+" "+V[an],delete V[Ue],delete V[ut],delete V[an])},Oe=Je=>(Q=!0,u[Je]),He=(Je,Ue)=>(Q&&(Je=Je.replace(/\uFEFF[0-9]/g,ut=>u[ut])),Ue||(Je=Je.replace(/\\([\'\";:])/g,"$1")),Je),ft=Je=>String.fromCharCode(parseInt(Je.slice(1),16)),Rt=Je=>Je.replace(/\\[0-9a-f]+/gi,ft),Yt=(Je,Ue,ut,an,wn,go)=>{if(wn=wn||go,wn)return wn=He(wn),"'"+wn.replace(/\'/g,"\\'")+"'";if(Ue=He(Ue||ut||an||""),!e.allow_script_urls){const wo=Ue.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(wo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(wo))return""}return re&&(Ue=re.call(ee,Ue,"style")),"url('"+Ue.replace(/\'/g,"\\'")+"')"};if(F){F=F.replace(/[\u0000-\u001F]/g,""),F=F.replace(/\\[\"\';:\uFEFF]/g,Oe).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ue=>Ue.replace(/[;:]/g,Oe));let Je;for(;Je=r.exec(F);){r.lastIndex=Je.index+Je[0].length;let Ue=Je[1].replace(i,"").toLowerCase(),ut=Je[2].replace(i,"");if(Ue&&ut){if(Ue=Rt(Ue),ut=Rt(ut),Ue.indexOf(S)!==-1||Ue.indexOf('"')!==-1||!e.allow_script_urls&&(Ue==="behavior"||/expression\s*\(|\/\*|\*\//.test(ut)))continue;Ue==="font-weight"&&ut==="700"?ut="bold":(Ue==="color"||Ue==="background-color")&&(ut=ut.toLowerCase()),xk(ut)==="rgb"&&tg(ut).each(an=>{ut=hd(Xy(an)).toLowerCase()}),ut=ut.replace(o,Yt),V[Ue]=Q?He(ut,!0):ut}}le("border","",!0),le("border","-width"),le("border","-color"),le("border","-style"),le("padding",""),le("margin",""),De("border","border-width","border-style","border-color"),V.border==="medium none"&&delete V.border,V["border-image"]==="none"&&delete V["border-image"]}return V},serialize:(F,V)=>{let Q="";const re=(le,we)=>{const De=we[le];if(De)for(let Oe=0,He=De.length;Oe<He;Oe++){const ft=De[Oe],Rt=F[ft];Rt&&(Q+=(Q.length>0?" ":"")+ft+": "+Rt+";")}},ee=(le,we)=>{if(!y||!we)return!0;let De=y["*"];return De&&De[le]?!1:(De=y[we],!(De&&De[le]))};return V&&m?(re("*",m),re(V,m)):At(F,(le,we)=>{le&&ee(we,V)&&(Q+=(Q.length>0?" ":"")+we+": "+le+";")}),Q}};return L},op={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Gs=e=>e instanceof Event||ve(e.initEvent),Yd=e=>e.isDefaultPrevented===wt||e.isDefaultPrevented===tt,Qy=e=>Qt(e.preventDefault)||Gs(e),Ru=(e,n)=>{const o=n??{};for(const r in e)Sn(op,r)||(o[r]=e[r]);return $e(e.composedPath)&&(o.composedPath=()=>e.composedPath()),$e(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),$e(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},ew=(e,n,o,r)=>{var i;const u=Ru(n,r);return u.type=e,Qt(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),Qy(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=wt,ve(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=wt,ve(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=wt,u.stopPropagation()},Yd(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?wt:tt,u.isPropagationStopped=u.cancelBubble===!0?wt:tt,u.isImmediatePropagationStopped=tt)),u},x1="mce-data-",sp=/^(?:mouse|contextmenu)|click/,E1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Yc=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},GS=e=>$e(e)&&sp.test(e.type),_1=(e,n)=>{const o=ew(e.type,e,document,n);if(GS(e)&&Pn(e.pageX)&&!Pn(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,m=o;m.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),m.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},tw=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,m=()=>{Yc(e,"DOMContentLoaded",m),Yc(e,"load",m),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?m():E1(e,"DOMContentLoaded",m),o.domLoaded||E1(e,"load",m)};class Bm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=x1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let m;const y=window,S=V=>{u.executeHandlers(_1(V||y.event),O)};if(!n||pt(n)||ba(n))return r;let O;n[u.expando]?O=n[u.expando]:(O=u.count++,n[u.expando]=O,u.events[O]={}),i=i||n;const L=o.split(" ");let F=L.length;for(;F--;){let V=L[F],Q=S,re=!1,ee=!1;if(V==="DOMContentLoaded"&&(V="ready"),u.domLoaded&&V==="ready"&&n.readyState==="complete"){r.call(i,_1({type:V}));continue}!u.hasFocusIn&&(V==="focusin"||V==="focusout")&&(re=!0,ee=V==="focusin"?"focus":"blur",Q=le=>{const we=_1(le||y.event);we.type=we.type==="focus"?"focusin":"focusout",u.executeHandlers(we,O)}),m=u.events[O][V],m?V==="ready"&&u.domLoaded?r(_1({type:V})):m.push({func:r,scope:i}):(u.events[O][V]=m=[{func:r,scope:i}],m.fakeName=ee,m.capture=re,m.nativeHandler=Q,V==="ready"?tw(n,Q,u):E1(n,ee||V,Q,re))}return n=m=null,r}unbind(n,o,r){if(!n||pt(n)||ba(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const m=o.split(" ");let y=m.length;for(;y--;){const S=m[y],O=u[S];if(O){if(r){let L=O.length;for(;L--;)if(O[L].func===r){const F=O.nativeHandler,V=O.fakeName,Q=O.capture,re=O.slice(0,L).concat(O.slice(L+1));re.nativeHandler=F,re.fakeName=V,re.capture=Q,u[S]=re}}(!r||O.length===0)&&(delete u[S],Yc(n,O.fakeName||S,O.nativeHandler,O.capture))}}}else At(u,(m,y)=>{Yc(n,m.fakeName||y,m.nativeHandler,m.capture)}),u={};for(const m in u)if(Sn(u,m))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||pt(n)||ba(n))return this;const i=_1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||pt(n)||ba(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,m=i.length;u<m;u++){const y=i[u];if(y&&y.func.call(y.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Bm.Event=new Bm;const nw=yt.each,KS=yt.grep,ow="data-mce-style",YS=yt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Gi=(e,n,o)=>{Qt(o)||o===""?Cr(e,n):js(e,n,o)},Xc=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),xt=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&pt(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},rv=(e,n)=>{const o=ri(n,"style"),r=e.serialize(e.parse(o),yo(n));Gi(n,ow,r)},li=(e,n)=>so(e)?Sn(YS,n)?e+"":e+"px":e,av=(e,n,o)=>{const r=Xc(n);Qt(o)||o===""?nc(e,r):Zg(e,r,li(o,r))},XS=(e,n,o)=>{const r=n.keep_values,i={set:(m,y,S)=>{const O=pe.fromDom(m);ve(n.url_converter)&&$e(y)&&(y=n.url_converter.call(n.url_converter_scope||o(),String(y),S,m));const L="data-mce-"+S;Gi(O,L,y),Gi(O,S,y)},get:(m,y)=>{const S=pe.fromDom(m);return ri(S,"data-mce-"+y)||ri(S,y)}},u={style:{set:(m,y)=>{const S=pe.fromDom(m);r&&Gi(S,ow,y),Cr(S,"style"),ce(y)&&Yn(S,e.parse(y))},get:m=>{const y=pe.fromDom(m),S=ri(y,ow)||ri(y,"style");return e.serialize(e.parse(S),yo(y))}}};return r&&(u.href=u.src=i),u},Ks=(e,n={})=>{const o={},r=window,i={};let u=0;const m=!0,y=!0,S=Ms.forElement(pe.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),O=[],L=n.schema?n.schema:Kd({}),F=Jy({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),V=n.ownEvents?new Bm:Bm.Event,Q=L.getBlockElements(),re=ze=>ce(ze)?Sn(Q,ze):Wt(ze)&&(Sn(Q,ze.nodeName)||Ou(L,ze)),ee=ze=>ze&&e&&ce(ze)?e.getElementById(ze):ze,le=ze=>{const We=ee(ze);return $e(We)?pe.fromDom(We):null},we=(ze,We,Pt="")=>{let _t;const In=le(ze);if($e(In)&&Fa(In)){const Eo=kS[We];Eo&&Eo.get?_t=Eo.get(In.dom,We):_t=ri(In,We)}return $e(_t)?_t:Pt},De=ze=>{const We=ee(ze);return Qt(We)?[]:We.attributes},Oe=(ze,We,Pt)=>{vn(ze,_t=>{if(Wt(_t)){const In=pe.fromDom(_t),Eo=Pt===""?null:Pt,gr=ri(In,We),Bd=kS[We];Bd&&Bd.set?Bd.set(In.dom,Eo,We):Gi(In,We,Eo),gr!==Eo&&n.onSetAttrib&&n.onSetAttrib({attrElm:In.dom,attrName:We,attrValue:Eo})}})},He=(ze,We)=>ze.cloneNode(We),ft=()=>n.root_element||e.body,Rt=ze=>{const We=jl(ze);return{x:We.x,y:We.y,w:We.width,h:We.height}},Yt=(ze,We)=>va(e.body,ee(ze),We),Je=(ze,We,Pt)=>{vn(ze,_t=>{const In=pe.fromDom(_t);av(In,We,Pt),n.update_styles&&rv(F,In)})},Ue=(ze,We)=>{vn(ze,Pt=>{const _t=pe.fromDom(Pt);At(We,(In,Eo)=>{av(_t,Eo,In)}),n.update_styles&&rv(F,_t)})},ut=(ze,We,Pt)=>{const _t=ee(ze);if(!(Qt(_t)||!qc(_t)&&!Yg(_t)))return Pt?Wr(pe.fromDom(_t),Xc(We)):(We=We.replace(/-(\D)/g,(In,Eo)=>Eo.toUpperCase()),We==="float"&&(We="cssFloat"),_t.style?_t.style[We]:void 0)},an=ze=>{const We=ee(ze);if(!We)return{w:0,h:0};let Pt=ut(We,"width"),_t=ut(We,"height");return(!Pt||Pt.indexOf("px")===-1)&&(Pt="0"),(!_t||_t.indexOf("px")===-1)&&(_t="0"),{w:parseInt(Pt,10)||We.offsetWidth||We.clientWidth,h:parseInt(_t,10)||We.offsetHeight||We.clientHeight}},wn=ze=>{const We=ee(ze),Pt=Yt(We),_t=an(We);return{x:Pt.x,y:Pt.y,w:_t.w,h:_t.h}},go=(ze,We)=>{if(!ze)return!1;const Pt=jt(ze)?ze:[ze];return kt(Pt,_t=>pl(pe.fromDom(_t),We))},wo=(ze,We,Pt,_t)=>{const In=[];let Eo=ee(ze);_t=_t===void 0;const gr=Pt||(ft().nodeName!=="BODY"?ft().parentNode:null);if(ce(We))if(We==="*")We=Wt;else{const Bd=We;We=Ry=>go(Ry,Bd)}for(;Eo&&!(Eo===gr||Qt(Eo.nodeType)||Tm(Eo)||ia(Eo));){if(!We||We(Eo))if(_t)In.push(Eo);else return[Eo];Eo=Eo.parentNode}return _t?In:null},ns=(ze,We,Pt)=>{const _t=wo(ze,We,Pt,!1);return _t&&_t.length>0?_t[0]:null},ps=(ze,We,Pt)=>{let _t=We;if(ze){ce(We)&&(_t=In=>go(In,We));for(let In=ze[Pt];In;In=In[Pt])if(ve(_t)&&_t(In))return In}return null},Lr=(ze,We)=>ps(ze,We,"nextSibling"),Ea=(ze,We)=>ps(ze,We,"previousSibling"),Ts=ze=>ve(ze.querySelectorAll),Bt=(ze,We)=>{var Pt,_t;const In=(_t=(Pt=ee(We))!==null&&Pt!==void 0?Pt:n.root_element)!==null&&_t!==void 0?_t:e;return Ts(In)?_r(In.querySelectorAll(ze)):[]},vn=function(ze,We,Pt){const _t=Pt??this;if(jt(ze)){const In=[];return nw(ze,(Eo,gr)=>{const Bd=ee(Eo);Bd&&In.push(We.call(_t,Bd,gr))}),In}else{const In=ee(ze);return In?We.call(_t,In):!1}},$o=(ze,We)=>{vn(ze,Pt=>{At(We,(_t,In)=>{Oe(Pt,In,_t)})})},zt=(ze,We)=>{vn(ze,Pt=>{const _t=pe.fromDom(Pt);Eu(_t,We)})},Tn=(ze,We,Pt,_t,In)=>vn(ze,Eo=>{const gr=ce(We)?e.createElement(We):We;return $e(Pt)&&$o(gr,Pt),_t&&(!ce(_t)&&_t.nodeType?gr.appendChild(_t):ce(_t)&&zt(gr,_t)),In?gr:Eo.appendChild(gr)}),mo=(ze,We,Pt)=>Tn(e.createElement(ze),ze,We,Pt,!0),Gt=fd.decode,ho=fd.encodeAllRaw,Co=(ze,We,Pt="")=>{let _t="<"+ze;for(const In in We)Ys(We,In)&&(_t+=" "+In+'="'+ho(We[In])+'"');return sa(Pt)&&Sn(L.getVoidElements(),ze)?_t+" />":_t+">"+Pt+"</"+ze+">"},Ya=ze=>{const We=e.createElement("div"),Pt=e.createDocumentFragment();Pt.appendChild(We),ze&&(We.innerHTML=ze);let _t;for(;_t=We.firstChild;)Pt.appendChild(_t);return Pt.removeChild(We),Pt},is=(ze,We)=>vn(ze,Pt=>{const _t=pe.fromDom(Pt);return We&&xe(ra(_t),In=>{Yr(In)&&In.dom.length===0?gs(In):ii(_t,In)}),gs(_t),_t.dom}),Pa=ze=>vn(ze,We=>{const Pt=We.attributes;for(let _t=Pt.length-1;_t>=0;_t--)We.removeAttributeNode(Pt.item(_t))}),Rd=ze=>F.parse(ze),fm=(ze,We)=>F.serialize(ze,We),Fc=ze=>{if(Ch!==Ks.DOM&&e===document){if(o[ze])return;o[ze]=!0}let We=e.getElementById("mceDefaultStyles");if(!We){We=e.createElement("style"),We.id="mceDefaultStyles",We.type="text/css";const Pt=e.head;Pt.firstChild?Pt.insertBefore(We,Pt.firstChild):Pt.appendChild(We)}We.styleSheet?We.styleSheet.cssText+=ze:We.appendChild(e.createTextNode(ze))},Pl=ze=>{ze||(ze=""),xe(ze.split(","),We=>{i[We]=!0,S.load(We).catch(Pe)})},Yu=(ze,We,Pt)=>{vn(ze,_t=>{if(Wt(_t)){const In=pe.fromDom(_t),Eo=We.split(" ");xe(Eo,gr=>{$e(Pt)?(Pt?gl:vu)(In,gr):Bh(In,gr)})}})},Bl=(ze,We)=>{Yu(ze,We,!0)},Xu=(ze,We)=>{Yu(ze,We,!1)},Cn=(ze,We)=>{const Pt=le(ze),_t=We.split(" ");return $e(Pt)&&bs(_t,In=>Hl(Pt,In))},Oo=ze=>{vn(ze,We=>nc(pe.fromDom(We),"display"))},cr=ze=>{vn(ze,We=>Zg(pe.fromDom(We),"display","none"))},Fr=ze=>{const We=le(ze);return $e(We)&&Os(Ra(We,"display"),"none")},ua=ze=>(ze||"mce_")+u++,mi=ze=>{const We=le(ze);return $e(We)?Wt(We.dom)?We.dom.outerHTML:Pi(We):""},da=(ze,We)=>{vn(ze,Pt=>{Wt(Pt)&&(Pt.outerHTML=We)})},fa=(ze,We)=>{const Pt=ee(We);return vn(ze,_t=>{const In=Pt==null?void 0:Pt.parentNode,Eo=Pt==null?void 0:Pt.nextSibling;return In&&(Eo?In.insertBefore(_t,Eo):In.appendChild(_t)),_t})},pc=(ze,We,Pt)=>vn(We,_t=>{var In;const Eo=jt(We)?ze.cloneNode(!0):ze;return Pt&&nw(KS(_t.childNodes),gr=>{Eo.appendChild(gr)}),(In=_t.parentNode)===null||In===void 0||In.replaceChild(Eo,_t),_t}),Md=(ze,We)=>{if(ze.nodeName!==We.toUpperCase()){const Pt=mo(We);return nw(De(ze),_t=>{Oe(Pt,_t.nodeName,we(ze,_t.nodeName))}),pc(Pt,ze,!0),Pt}else return ze},Nd=(ze,We)=>{let Pt=ze;for(;Pt;){let _t=We;for(;_t&&Pt!==_t;)_t=_t.parentNode;if(Pt===_t)break;Pt=Pt.parentNode}return!Pt&&ze.ownerDocument?ze.ownerDocument.documentElement:Pt},Pd=(ze,We,Pt)=>On(We)?Au(L,ze,{...Pt,isContent:In=>{const Eo=In.nodeName.toLowerCase();return!!We[Eo]}}):Au(L,ze,Pt),lu=()=>e.createRange(),yh=(ze,We,Pt)=>{let _t=lu(),In,Eo;if(ze&&We&&ze.parentNode&&We.parentNode){const gr=ze.parentNode;return _t.setStart(gr,xt(ze)),_t.setEnd(We.parentNode,xt(We)),In=_t.extractContents(),_t=lu(),_t.setStart(We.parentNode,xt(We)+1),_t.setEnd(gr,xt(ze)+1),Eo=_t.extractContents(),gr.insertBefore(qd(Ch,In,L),ze),Pt?gr.insertBefore(Pt,ze):gr.insertBefore(We,ze),gr.insertBefore(qd(Ch,Eo,L),ze),is(ze),Pt||We}else return},zg=(ze,We,Pt,_t)=>{if(jt(ze)){let In=ze.length;const Eo=[];for(;In--;)Eo[In]=zg(ze[In],We,Pt,_t);return Eo}else return n.collect&&(ze===e||ze===r)&&O.push([ze,We,Pt,_t]),V.bind(ze,We,Pt,_t||Ch)},Ub=(ze,We,Pt)=>{if(jt(ze)){let _t=ze.length;const In=[];for(;_t--;)In[_t]=Ub(ze[_t],We,Pt);return In}else{if(O.length>0&&(ze===e||ze===r)){let _t=O.length;for(;_t--;){const[In,Eo,gr]=O[_t];ze===In&&(!We||We===Eo)&&(!Pt||Pt===gr)&&V.unbind(In,Eo,gr)}}return V.unbind(ze,We,Pt)}},rk=(ze,We,Pt)=>V.dispatch(ze,We,Pt),wh=(ze,We,Pt)=>V.dispatch(ze,We,Pt),Dy=ze=>{if(ze&&qc(ze)){const We=ze.getAttribute("data-mce-contenteditable");return We&&We!=="inherit"?We:ze.contentEditable!=="inherit"?ze.contentEditable:null}else return null},Ch={doc:e,settings:n,win:r,files:i,stdMode:m,boxModel:y,styleSheetLoader:S,boundEvents:O,styles:F,schema:L,events:V,isBlock:re,root:null,clone:He,getRoot:ft,getViewPort:Rt,getRect:wn,getSize:an,getParent:ns,getParents:wo,get:ee,getNext:Lr,getPrev:Ea,select:Bt,is:go,add:Tn,create:mo,createHTML:Co,createFragment:Ya,remove:is,setStyle:Je,getStyle:ut,setStyles:Ue,removeAllAttribs:Pa,setAttrib:Oe,setAttribs:$o,getAttrib:we,getPos:Yt,parseStyle:Rd,serializeStyle:fm,addStyle:Fc,loadCSS:Pl,addClass:Bl,removeClass:Xu,hasClass:Cn,toggleClass:Yu,show:Oo,hide:cr,isHidden:Fr,uniqueId:ua,setHTML:zt,getOuterHTML:mi,setOuterHTML:da,decode:Gt,encode:ho,insertAfter:fa,replace:pc,rename:Md,findCommonAncestor:Nd,run:vn,getAttribs:De,isEmpty:Pd,createRng:lu,nodeIndex:xt,split:yh,bind:zg,unbind:Ub,fire:wh,dispatch:rk,getContentEditable:Dy,getContentEditableParent:ze=>{const We=ft();let Pt=null;for(let _t=ze;_t&&_t!==We&&(Pt=Dy(_t),Pt===null);_t=_t.parentNode);return Pt},isEditable:ze=>{if($e(ze)){const We=Wt(ze)?ze:ze.parentElement;return $e(We)&&qc(We)&&pa(pe.fromDom(We))}else return!1},destroy:()=>{if(O.length>0){let ze=O.length;for(;ze--;){const[We,Pt,_t]=O[ze];V.unbind(We,Pt,_t)}}At(i,(ze,We)=>{S.unload(We),delete i[We]})},isChildOf:(ze,We)=>ze===We||We.contains(ze),dumpRng:ze=>"startContainer: "+ze.startContainer.nodeName+", startOffset: "+ze.startOffset+", endContainer: "+ze.endContainer.nodeName+", endOffset: "+ze.endOffset},kS=XS(F,n,ct(Ch));return Ch};Ks.DOM=Ks(document),Ks.nodeIndex=xt;const Vf=Ks.DOM,iv=0,Ek=1,zf=2,cv=3;class gd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=Vf;let u;const m=()=>{i.remove(O),u&&(u.onerror=u.onload=u=null)},y=()=>{m(),o()},S=()=>{m(),r("Failed to load script: "+n)},O=i.uniqueId();u=document.createElement("script"),u.id=O,u.type="text/javascript",u.src=yt._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=y,u.onerror=S,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===zf}markDone(n){this.states[n]=zf}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=iv),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(S,O)=>{zo(o.scriptLoadedCallbacks,O).each(L=>{xe(L,F=>F[S](O))}),delete o.scriptLoadedCallbacks[O]},i=S=>{const O=Zt(S,L=>L.status==="rejected");return O.length>0?Promise.reject(ws(O,({reason:L})=>jt(L)?L:[L])):Promise.resolve()},u=S=>Promise.allSettled(dt(S,O=>o.states[O]===zf?(r("resolve",O),Promise.resolve()):o.states[O]===cv?(r("reject",O),Promise.reject(O)):(o.states[O]=Ek,o.loadScript(O).then(()=>{o.states[O]=zf,r("resolve",O);const L=o.queue;return L.length>0?(o.queue=[],u(L).then(i)):Promise.resolve()},()=>(o.states[O]=cv,r("reject",O),Promise.reject(O)))))),m=S=>(o.loading=!0,u(S).then(O=>{o.loading=!1;const L=o.queueLoadedCallbacks.shift();return W.from(L).each(os),i(O)})),y=ul(n);return o.loading?new Promise((S,O)=>{o.queueLoadedCallbacks.push(()=>{m(y).then(S,O)})}):m(y)}}gd.ScriptLoader=new gd;const JS=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},sw=e=>qe(e)&&Sn(e,"raw"),$s=e=>jt(e)&&e.length>1,rp={},mr=Be("en"),QS=()=>zo(rp,mr.get()),za={getData:()=>po(rp,e=>({...e})),setCode:e=>{e&&mr.set(e)},getCode:()=>mr.get(),add:(e,n)=>{let o=rp[e];o||(rp[e]=o={});const r=dt(Go(n),i=>i.toLowerCase());At(n,(i,u)=>{const m=u.toLowerCase();m!==u&&JS(r,m)?(Sn(n,m)||(o[m]=i),o[u]=i):o[m]=i})},translate:e=>{const n=QS().getOr({}),o=m=>ve(m)?Object.prototype.toString.call(m):r(m)?"":""+m,r=m=>m===""||m===null||m===void 0,i=m=>{const y=o(m);return Sn(n,y)?o(n[y]):zo(n,y.toLowerCase()).map(o).getOr(y)},u=m=>m.replace(/{context:\w+}$/,"");if(r(e))return"";if(sw(e))return o(e.raw);if($s(e)){const m=e.slice(1),y=i(e[0]).replace(/\{([0-9]+)\}/g,(S,O)=>Sn(m,O)?o(m[O]):S);return u(y)}return u(i(e))},isRtl:()=>QS().bind(e=>zo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Sn(rp,e)},rc=()=>{const e=[],n={},o={},r=[],i=(ee,le)=>{const we=Zt(r,De=>De.name===ee&&De.state===le);xe(we,De=>De.resolve())},u=ee=>Sn(n,ee),m=ee=>Sn(o,ee),y=ee=>{if(o[ee])return o[ee].instance},S=(ee,le)=>{const we=za.getCode(),De=","+(le||"")+",";!we||le&&De.indexOf(","+we+",")===-1||gd.ScriptLoader.add(n[ee]+"/langs/"+we+".js")},O=(ee,le)=>{rc.languageLoad!==!1&&(u(ee)?S(ee,le):re(ee,"loaded").then(()=>S(ee,le)))},L=(ee,le)=>(e.push(le),o[ee]={instance:le},i(ee,"added"),le),F=ee=>{delete n[ee],delete o[ee]},V=(ee,le)=>ce(le)?ce(ee)?{prefix:"",resource:le,suffix:""}:{prefix:ee.prefix,resource:le,suffix:ee.suffix}:le,Q=(ee,le)=>{if(n[ee])return Promise.resolve();let we=ce(le)?le:le.prefix+le.resource+le.suffix;we.indexOf("/")!==0&&we.indexOf("://")===-1&&(we=rc.baseURL+"/"+we),n[ee]=we.substring(0,we.lastIndexOf("/"));const De=()=>(i(ee,"loaded"),Promise.resolve());return o[ee]?De():gd.ScriptLoader.add(we).then(De)},re=(ee,le="added")=>le==="added"&&m(ee)||le==="loaded"&&u(ee)?Promise.resolve():new Promise(we=>{r.push({name:ee,state:le,resolve:we})});return{items:e,urls:n,lookup:o,get:y,requireLangPack:O,add:L,remove:F,createUrl:V,load:Q,waitFor:re}};rc.languageLoad=!0,rc.baseURL="",rc.PluginManager=rc(),rc.ThemeManager=rc(),rc.ModelManager=rc();const T1=(e,n)=>{let o=null;return{cancel:()=>{ne(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ne(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Im=(e,n)=>{let o=null;const r=()=>{ne(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},rw=(e,n,o)=>Ur(e,n,o).isSome(),ip=ct("mce-annotation"),Xd=ct("data-mce-annotation"),cp=ct("data-mce-annotation-uid"),ng=ct("data-mce-annotation-active"),Lm=ct("data-mce-annotation-classes"),Jd=ct("data-mce-annotation-attrs"),og=e=>n=>ro(n,e),sg=(e,n)=>{const o=e.selection.getRng(),r=pe.fromDom(o.startContainer),i=pe.fromDom(e.getBody()),u=n.fold(()=>"."+ip(),S=>`[${Xd()}="${S}"]`),m=Ni(r,o.startOffset).getOr(r);return Wl(m,u,og(i)).bind(S=>wr(S,`${cp()}`).bind(O=>wr(S,`${Xd()}`).map(L=>{const F=lv(e,O);return{uid:O,name:L,elements:F}})))},Ok=e=>Fa(e)&&Hl(e,ip()),aw=(e,n)=>pi(e,"data-mce-bogus")||rw(e,'[data-mce-bogus="all"]',og(n)),lv=(e,n)=>{const o=pe.fromDom(e.getBody()),r=ci(o,`[${cp()}="${n}"]`);return Zt(r,i=>!aw(i,o))},ex=(e,n)=>{const o=pe.fromDom(e.getBody()),r=ci(o,`[${Xd()}="${n}"]`),i={};return xe(r,u=>{if(!aw(u,o)){const m=ri(u,cp()),y=zo(i,m).getOr([]);i[m]=y.concat([u])}}),i},iw=(e,n)=>{const o=Be({}),r=()=>({listeners:[],previous:Ci()}),i=(F,V)=>{u(F,Q=>(V(Q),Q))},u=(F,V)=>{const Q=o.get(),re=zo(Q,F).getOrThunk(r),ee=V(re);Q[F]=ee,o.set(Q)},m=(F,V,Q)=>{i(F,re=>{xe(re.listeners,ee=>ee(!0,F,{uid:V,nodes:dt(Q,le=>le.dom)}))})},y=F=>{i(F,V=>{xe(V.listeners,Q=>Q(!1,F))})},S=(F,V)=>{xe(lv(e,F),Q=>{V?js(Q,ng(),"true"):Cr(Q,ng())})},O=Im(()=>{const F=Vo(n.getNames());xe(F,V=>{u(V,Q=>{const re=Q.previous.get();return sg(e,W.some(V)).fold(()=>{re.each(ee=>{y(V),Q.previous.clear(),S(ee,!1)})},({uid:ee,name:le,elements:we})=>{Os(re,ee)||(re.each(De=>S(De,!1)),m(le,ee,we),Q.previous.set(ee),S(ee,!0))}),{previous:Q.previous,listeners:Q.listeners}})})},30);return e.on("remove",()=>{O.cancel()}),e.on("NodeChange",()=>{O.throttle()}),{addListener:(F,V)=>{u(F,Q=>({previous:Q.previous,listeners:Q.listeners.concat([V])}))}}},uv=(e,n)=>{const o=Xd(),r=u=>W.from(u.attr(o)).bind(n.lookup),i=u=>{var m,y;u.attr(cp(),null),u.attr(Xd(),null),u.attr(ng(),null);const S=W.from(u.attr(Jd())).map(V=>V.split(",")).getOr([]),O=W.from(u.attr(Lm())).map(V=>V.split(",")).getOr([]);xe(S,V=>u.attr(V,null));const L=(y=(m=u.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&y!==void 0?y:[],F=qr(L,[ip()].concat(O));u.attr("class",F.length>0?F.join(" "):null),u.attr(Lm(),null),u.attr(Jd(),null)};e.serializer.addTempAttr(ng()),e.serializer.addAttributeFilter(o,u=>{for(const m of u)r(m).each(y=>{y.persistent===!1&&(m.name==="span"?m.unwrap():i(m))})})},cw=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>zo(e,i).map(u=>u.settings),getNames:()=>Go(e)}},lw=(e,n,o)=>Math.min(Math.max(e,n),o),uw=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let k1=0;const dv=e=>{const o=new Date().getTime(),r=Math.floor(uw()*1e9);return k1++,e+"_"+r+k1+String(o)},kM=(e,n)=>{xe(n,o=>{gl(e,o)})},A1=(e,n)=>{xe(n,o=>{vu(e,o)})},lp=(e,n)=>pe.fromDom(e.dom.cloneNode(n)),Fm=e=>lp(e,!1),dw=e=>lp(e,!0),fw=(e,n)=>{const o=pe.fromTag(n),r=gu(e);return Zc(o,r),o},tx=(e,n)=>{const o=fw(e,n);qi(e,o);const r=ra(e);return xu(o,r),gs(e),o},mw=(e,n,o=tt)=>{const r=new Ha(e,n),i=u=>{let m;do m=r[u]();while(m&&!pt(m)&&!o(m));return W.from(m).filter(pt)};return{current:()=>W.from(r.current()).filter(pt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},rg=(e,n)=>{const o=n||(m=>e.isBlock(m)||Lo(m)||Fo(m)),r=(m,y,S,O)=>{if(pt(m)){const L=O(m,y,m.data);if(L!==-1)return W.some({container:m,offset:L})}return S().bind(L=>r(L.container,L.offset,S,O))};return{backwards:(m,y,S,O)=>{const L=mw(m,O??e.getRoot(),o);return r(m,y,()=>L.prev().map(F=>({container:F,offset:F.length})),S).getOrNull()},forwards:(m,y,S,O)=>{const L=mw(m,O??e.getRoot(),o);return r(m,y,()=>L.next().map(F=>({container:F,offset:0})),S).getOrNull()}}},hw=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?W.from(u.dom.nodeValue):W.none();return{get:o,getOption:r,set:(u,m)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=m}}})(Yr,"text"),$m=e=>hw.get(e),up=e=>hw.getOption(e),gw=(e,n)=>hw.set(e,n),fv=["td","th"],pw=["thead","tbody","tfoot"],nx=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Fi=["li","dd","dt"],AM=["ul","ol","dl"],bw=["pre","script","textarea","style"],O1=e=>{let n;return o=>(n=n||Cs(e,wt),Sn(n,yo(o)))},Rk=e=>yo(e)==="table",el=e=>Fa(e)&&yo(e)==="br",Mu=O1(nx),Hm=O1(AM),ag=O1(Fi),ox=O1(pw),D1=O1(fv),mv=O1(bw),sx=e=>{const n=[];let o=e.dom;for(;o;)n.push(pe.fromDom(o)),o=o.lastChild;return n},Vm=e=>{const n=ci(e,"br"),o=Zt(sx(e).slice(-1),el);n.length===o.length&&xe(o,gs)},ig=()=>{const e=pe.fromTag("br");return js(e,"data-mce-bogus","1"),e},eu=e=>{ad(e),rr(e,ig())},hv=(e,n)=>{td(e).each(o=>{Ul(o).each(r=>{n.isBlock(yo(e))&&el(o)&&n.isBlock(yo(r))&&gs(o)})})},Ma=Gg,vw=Qb,ac=Bi,Mk=e=>e.insertContent(Ma,{preserve_zwsp:!0}),rx=Wt,Uf=pt,zm=e=>(Uf(e)&&(e=e.parentNode),rx(e)&&e.hasAttribute("data-mce-caret")),Wf=e=>Uf(e)&&vw(e.data),tl=e=>zm(e)||Wf(e),ax=e=>e.firstChild!==e.lastChild||!Lo(e.firstChild),R1=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ma),u=e.parentNode;if(n){const m=e.previousSibling;if(Uf(m)){if(tl(m))return m;if(ko(m))return m.splitText(m.data.length-1)}u==null||u.insertBefore(i,e)}else{const m=e.nextSibling;if(Uf(m)){if(tl(m))return m;if(Um(m))return m.splitText(1),m}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},yw=e=>{const n=e.container();return pt(n)?n.data.charAt(e.offset())===Ma||e.isAtStart()&&Wf(n.previousSibling):!1},dp=e=>{const n=e.container();return pt(n)?n.data.charAt(e.offset()-1)===Ma||e.isAtEnd()&&Wf(n.nextSibling):!1},cg=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(ig().dom);const m=n.parentNode;return o?m==null||m.insertBefore(u,n):n.nextSibling?m==null||m.insertBefore(u,n.nextSibling):m==null||m.appendChild(u),u},Um=e=>Uf(e)&&e.data[0]===Ma,ko=e=>Uf(e)&&e.data[e.data.length-1]===Ma,Mc=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Bf(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Qd=e=>e&&e.hasAttribute("data-mce-caret")?(Mc(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,gv=e=>zm(e.startContainer),ys=Math.round,Wm=e=>e?{left:ys(e.left),top:ys(e.top),bottom:ys(e.bottom),right:ys(e.right),width:ys(e.width),height:ys(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},pv=(e,n)=>(e=Wm(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Nk=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Pk=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,M1=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Pk(n.top-e.bottom,e,n)},Hs=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Pk(n.bottom-e.top,e,n),ix=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Bk=e=>Mo(e,(n,o)=>n.fold(()=>W.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),m=Math.max(o.right,r.right),y=Math.max(o.bottom,r.bottom);return W.some({top:u,right:m,bottom:y,left:i,width:m-i,height:y-u})}),W.none()),cx=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},lg=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),nl=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Zm=(e,n)=>{if(Wt(e)&&e.hasChildNodes()){const o=e.childNodes,r=lw(n,0,o.length-1);return o[r]}else return e},ww=(e,n)=>{if(!(n<0&&Wt(e)&&e.hasChildNodes()))return Zm(e,n)},tn=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Cw=e=>ce(e)&&e.charCodeAt(0)>=768&&tn.test(e),Ik=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},lx=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Sw=rt,ux=Fo,dx=Lo,pd=pt,N1=vl(["script","style","textarea"]),ug=vl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),bv=vl(["table"]),Lk=tl,wl=e=>Lk(e)?!1:pd(e)?!N1(e.parentNode):ug(e)||dx(e)||bv(e)||xw(e),fx=e=>Wt(e)&&e.getAttribute("unselectable")==="true",xw=e=>!fx(e)&&ux(e),mx=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(xw(o))return!1;if(Sw(o))return!0}return!0},vv=e=>xw(e)?!Mo(_r(e.getElementsByTagName("*")),(n,o)=>n||Sw(o),!1):!1,Fk=e=>ug(e)||vv(e),yv=(e,n)=>wl(e)&&mx(e,n),Ew=Wt,_w=wl,hx=jh("display","block table"),$k=jh("float","left right"),ef=lx(Ew,_w,eo($k)),gx=eo(jh("white-space","pre pre-line pre-wrap")),fp=pt,mp=Lo,px=Ks.nodeIndex,wv=ww,Tw=e=>e?e.createRange():Ks.DOM.createRng(),Cv=e=>ce(e)&&/[\r\n\t ]/.test(e),Hk=e=>!!e.setStart&&!!e.setEnd,ic=e=>{const n=e.startContainer,o=e.startOffset;if(Cv(e.toString())&&gx(n.parentNode)&&pt(n)){const r=n.data;if(Cv(r[o-1])||Cv(r[o+1]))return!0}return!1},Vk=e=>{const n=e.ownerDocument,o=Tw(n),r=n.createTextNode(Xr),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Wm(o.getBoundingClientRect());return i.removeChild(r),u},zk=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&pt(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),qm(u)}else return null},jm=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,qm=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Wm(r[0]):o=Wm(e.getBoundingClientRect()),!Hk(e)&&mp(e)&&jm(o)?Vk(e):jm(o)&&Hk(e)&&(n=zk(e))!==null&&n!==void 0?n:o},Zf=(e,n)=>{const o=pv(e,n);return o.width=1,o.right=o.left+1,o},kw=e=>{const n=[],o=m=>{m.height!==0&&(n.length>0&&Nk(m,n[n.length-1])||n.push(m))},r=(m,y)=>{const S=Tw(m.ownerDocument);if(y<m.data.length){if(Cw(m.data[y]))return;if(Cw(m.data[y-1])&&(S.setStart(m,y),S.setEnd(m,y+1),!ic(S))){o(Zf(qm(S),!1));return}}y>0&&(S.setStart(m,y-1),S.setEnd(m,y),ic(S)||o(Zf(qm(S),!1))),y<m.data.length&&(S.setStart(m,y),S.setEnd(m,y+1),ic(S)||o(Zf(qm(S),!0)))},i=e.container(),u=e.offset();if(fp(i))return r(i,u),n;if(Ew(i))if(e.isAtEnd()){const m=wv(i,u);fp(m)&&r(m,m.data.length),ef(m)&&!mp(m)&&o(Zf(qm(m),!1))}else{const m=wv(i,u);if(fp(m)&&r(m,0),ef(m)&&e.isAtEnd())return o(Zf(qm(m),!1)),n;const y=wv(e.container(),e.offset()-1);ef(y)&&!mp(y)&&(hx(y)||hx(m)||!ef(m))&&o(Zf(qm(y),!1)),ef(m)&&o(Zf(qm(m),!0))}return n},Xe=(e,n,o)=>{const r=()=>(fp(e),n===0),i=()=>fp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const L=Tw(e.ownerDocument);return L.setStart(e,n),L.setEnd(e,n),L},m=()=>(o||(o=kw(Xe(e,n))),o),y=()=>m().length>0,S=L=>L&&e===L.container()&&n===L.offset(),O=L=>wv(e,L?n-1:n);return{container:ct(e),offset:ct(n),toRange:u,getClientRects:m,isVisible:y,isAtStart:r,isAtEnd:i,isEqual:S,getNode:O}};Xe.fromRangeStart=e=>Xe(e.startContainer,e.startOffset),Xe.fromRangeEnd=e=>Xe(e.endContainer,e.endOffset),Xe.after=e=>Xe(e.parentNode,px(e)+1),Xe.before=e=>Xe(e.parentNode,px(e)),Xe.isAbove=(e,n)=>Xn(fo(n.getClientRects()),cs(e.getClientRects()),M1).getOr(!1),Xe.isBelow=(e,n)=>Xn(cs(n.getClientRects()),fo(e.getClientRects()),Hs).getOr(!1),Xe.isAtStart=e=>e?e.isAtStart():!1,Xe.isAtEnd=e=>e?e.isAtEnd():!1,Xe.isTextPosition=e=>e?pt(e.container()):!1,Xe.isElementPosition=e=>!Xe.isTextPosition(e);const Sv=(e,n)=>{pt(n)&&n.data.length===0&&e.remove(n)},jf=(e,n,o)=>{n.insertNode(o),Sv(e,o.previousSibling),Sv(e,o.nextSibling)},Gm=(e,n,o)=>{const r=W.from(o.firstChild),i=W.from(o.lastChild);n.insertNode(o),r.each(u=>Sv(e,u.previousSibling)),i.each(u=>Sv(e,u.nextSibling))},xv=(e,n,o)=>{ia(o)?Gm(e,n,o):jf(e,n,o)},ol=pt,Aw=Bf,Ow=Ks.nodeIndex,cc=e=>{const n=e.parentNode;return Aw(n)?cc(n):n},hp=e=>e?ge(e.childNodes,(n,o)=>(Aw(o)&&o.nodeName!=="BR"?n=n.concat(hp(o)):n.push(o),n),[]):[],bx=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&ol(o);)n+=o.data.length;return n},vx=e=>n=>e===n,Uk=e=>{let n,o;n=hp(cc(e)),o=de(n,vx(e),e),n=n.slice(0,o+1);const r=ge(n,(i,u,m)=>(ol(u)&&ol(n[m-1])&&i++,i),0);return n=yc(n,vl([e.nodeName])),o=de(n,vx(e),e),o-r},yx=e=>(ol(e)?"text()":e.nodeName.toLowerCase())+"["+Uk(e)+"]",Wk=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},wx=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(ol(r))u=bx(r,i);else{const y=r.childNodes;i>=y.length?(u="after",i=y.length-1):u="before",r=y[i]}o.push(yx(r));let m=Wk(e,r);return m=yc(m,eo(Bf)),o=o.concat(Ta(m,y=>yx(y))),o.reverse().join("/")+","+u},Zk=(e,n,o)=>{let r=hp(e);return r=yc(r,(i,u)=>!ol(i)||!ol(r[u-1])),r=yc(r,vl([n])),r[o]},jk=(e,n)=>{let o=e,r=0;for(;ol(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!ol(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return ol(e)&&n>e.data.length&&(n=e.data.length),Xe(e,n)},Ev=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=ge(r,(m,y)=>{const S=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(y);return S?(S[1]==="text()"&&(S[1]="#text"),Zk(m,S[1],parseInt(S[2],10))):null},e);if(!u)return null;if(!ol(u)&&u.parentNode){let m;return i==="after"?m=Ow(u)+1:m=Ow(u),Xe(u.parentNode,m)}return jk(u,parseInt(i,10))},_v=Fo,qk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&pt(i);i=i.previousSibling)r+=e(i.data).length;return r},Cx=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let m=i?r.startOffset:r.endOffset;const y=[],S=e.getRoot();if(pt(u))y.push(o?qk(n,u,m):m);else{let O=0;const L=u.childNodes;m>=L.length&&L.length&&(O=1,m=Math.max(0,L.length-1)),y.push(e.nodeIndex(L[m],o)+O)}for(let O=u;O&&O!==S;O=O.parentNode)y.push(e.nodeIndex(O,o));return y},Gk=(e,n,o,r)=>{const i=n.dom,u=Cx(i,e,o,r,!0),m=n.isForward(),y=gv(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:m,...y};{const S=Cx(i,e,o,r,!1);return{start:u,end:S,forward:m,...y}}},Dw=(e,n,o)=>{let r=0;return yt.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},hr=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Wt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Rw=e=>(hr(e,!0),hr(e,!1),e),Sx=(e,n)=>{if(Wt(e)&&(e=Zm(e,n),_v(e)))return e;if(tl(e)){pt(e)&&zm(e)&&(e=e.parentNode);let o=e.previousSibling;if(_v(o)||(o=e.nextSibling,_v(o)))return o}},Tv=e=>Sx(e.startContainer,e.startOffset)||Sx(e.endContainer,e.endOffset),kv=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||_v(r)){const m=r.nodeName;return{name:m,index:Dw(o.dom,m,r)}}const u=Tv(i);if(u){const m=u.tagName;return{name:m,index:Dw(o.dom,m,u)}}return Gk(e,o,n,i)},$i=e=>{const n=e.getRng();return{start:wx(e.dom.getRoot(),Xe.fromRangeStart(n)),end:wx(e.dom.getRoot(),Xe.fromRangeEnd(n)),forward:e.isForward()}},Cl=e=>({rng:e.getRng(),forward:e.isForward()}),Mw=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Nw=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),m=e.getNode(),y=m.nodeName,S=e.isForward();if(y==="IMG")return{name:y,index:Dw(o,y,m)};const O=Rw(r.cloneRange());if(!u){O.collapse(!1);const F=Mw(o,i+"_end",n);xv(o,O,F)}r=Rw(r),r.collapse(!0);const L=Mw(o,i+"_start",n);return xv(o,r,L),e.moveToBookmark({id:i,keep:!0,forward:S}),{id:i,forward:S}},xx=(e,n,o=!1)=>n===2?kv(ac,o,e):n===3?$i(e):n?Cl(e):Nw(e,!1),Pw=nt(kv,Hn,!0),P1=e=>{const n=u=>u(e),o=ct(e),r=()=>i,i={tag:!0,inner:e,fold:(u,m)=>m(e),isValue:wt,isError:tt,map:u=>lc.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>W.some(e)};return i},Av=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:tt,isError:wt,map:n,mapError:r=>lc.error(r(e)),bind:n,exists:tt,forall:wt,getOr:Hn,or:Hn,getOrThunk:to,orThunk:to,getOrDie:ms(String(e)),each:Pe,toOptional:W.none};return o},lc={value:P1,error:Av,fromOption:(e,n)=>e.fold(()=>Av(n),P1)},bd={generate:e=>{if(!jt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return xe(e,(r,i)=>{const u=Go(r);if(u.length!==1)throw new Error("one and only one name per case");const m=u[0],y=r[m];if(o[m]!==void 0)throw new Error("duplicate key detected:"+m);if(m==="cata")throw new Error("cannot have a case named cata (sorry)");if(!jt(y))throw new Error("case arguments must be an array");n.push(m),o[m]=(...S)=>{const O=S.length;if(O!==y.length)throw new Error("Wrong number of arguments to case "+m+". Expected "+y.length+" ("+y+"), got "+O);return{fold:(...F)=>{if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);return F[i].apply(null,S)},match:F=>{const V=Go(F);if(n.length!==V.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+V.join(","));if(!bs(n,re=>et(V,re)))throw new Error("Not all branches were specified when using match. Specified: "+V.join(", ")+`
Required: `+n.join(", "));return F[m].apply(null,S)},log:F=>{console.log(F,{constructors:n,constructor:m,params:S})}}}}),o}};bd.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Bw=e=>{const n=[],o=[];return xe(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},tr=e=>e.type==="inline-command"||e.type==="inline-format",Nu=e=>e.type==="block-command"||e.type==="block-format",Ym=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Kk=e=>{var n;const o=i=>lc.error({message:i,pattern:e}),r=(i,u,m)=>{if(e.format!==void 0){let y;if(jt(e.format)){if(!bs(e.format,ce))return o(i+" pattern has non-string items in the `format` array");y=e.format}else if(ce(e.format))y=[e.format];else return o(i+" pattern has non-string `format` parameter");return lc.value(u(y))}else return e.cmd!==void 0?ce(e.cmd)?lc.value(m(e.cmd,e.value)):o(i+" pattern has non-string `cmd` parameter"):o(i+" pattern is missing both `format` and `cmd` parameters")};if(!qe(e))return o("Raw pattern is not an object");if(!ce(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ce(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let i=e.start,u=e.end;return u.length===0&&(u=i,i=""),r("Inline",m=>({type:"inline-format",start:i,end:u,format:m}),(m,y)=>({type:"inline-command",start:i,end:u,cmd:m,value:y}))}else{if(e.replacement!==void 0)return ce(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):lc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const i=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:i}),(u,m)=>({type:"block-command",start:e.start,cmd:u,value:m,trigger:i}))}}},Iw=e=>Zt(e,Nu),_x=e=>Zt(e,tr),dg=(e,n)=>({inlinePatterns:_x(e),blockPatterns:Iw(e),dynamicPatternsLookup:n}),Ua=(e,n)=>({...e,blockPatterns:Zt(e.blockPatterns,o=>Ym(o,n))}),qf=e=>{const n=Bw(dt(e,Kk));return xe(n.errors,o=>console.error(o.message,o.pattern)),n.values},Yk=e=>n=>{const o=e(n);return qf(o)},Lw=St().deviceType,Xk=Lw.isTouch(),Ov=Ks.DOM,Fw=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Mo(n,(o,r)=>{const i=r.split("="),u=i[0],m=i.length>1?i[1]:u;return o[kr(u)]=kr(m),o},{})},Dv=e=>Et(e,RegExp),nn=e=>n=>n.options.get(e),B1=e=>ce(e)||qe(e),$w=(e,n="")=>o=>{const r=ce(o);if(r)if(o.indexOf("=")!==-1){const i=Fw(o);return{value:zo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Tx=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:$w(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:$w(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ce(o)&&xo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=et(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Kt(o)?{valid:!0,value:o}:ce(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ce(o)||Me(o,ce);return r?ce(o)?{value:dt(o.split(","),kr),valid:r}:jt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:$1(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ce(o)||Me(o,ce);return r?{value:jt(o)?o:dt(o.split(","),kr),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Kt(o)||ce(o);return r?o===!1||Lw.isiPhone()||Lw.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Xk}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ce(o)||ve(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ce(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:B1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:B1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:B1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:B1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ce(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Me(o,qe)||o===!1?{value:qf(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ve(o)?{value:Yk(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Me(o,Dv)?{value:o,valid:!0}:Dv(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=et(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:za.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Ov.getAttrib(e.getElement(),"placeholder")})})},kx=nn("iframe_attrs"),Jk=nn("doctype"),ui=nn("document_base_url"),Qk=nn("body_id"),Xm=nn("body_class"),Hw=nn("content_security_policy"),Ax=nn("br_in_pre"),Si=nn("forced_root_block"),Jm=nn("forced_root_block_attrs"),Gf=nn("newline_behavior"),Ox=nn("br_newline_selector"),eA=nn("no_newline_selector"),tA=nn("keep_styles"),ya=nn("end_container_on_empty_block"),Pr=nn("automatic_uploads"),us=nn("images_reuse_filename"),xi=nn("images_replace_blob_uris"),wa=nn("icons"),Ca=nn("icons_url"),Rv=nn("images_upload_url"),Mv=nn("images_upload_base_path"),Dx=nn("images_upload_credentials"),Rx=nn("images_upload_handler"),Mx=nn("content_css_cors"),Nv=nn("referrer_policy"),Qm=nn("language"),Pv=nn("language_url"),nA=nn("indent_use_margin"),gp=nn("indentation"),oA=nn("content_css"),sA=nn("content_style"),Nc=nn("font_css"),OM=nn("directionality"),Nx=nn("inline_boundaries_selector"),Sl=nn("object_resizing"),Bv=nn("resize_img_proportional"),I1=nn("placeholder"),vd=nn("event_root"),uc=nn("service_message"),eh=nn("theme"),Vw=nn("theme_url"),Iv=nn("model"),Px=nn("model_url"),Kf=nn("inline_boundaries"),Bx=nn("formats"),zw=nn("preview_styles"),Ix=nn("format_empty_lines"),L1=nn("format_noneditable_selector"),F1=nn("custom_ui_selector"),$1=nn("inline"),rA=nn("hidden_input"),Lv=nn("submit_patch"),aA=nn("add_form_submit_trigger"),Lx=nn("add_unload_trigger"),iA=nn("custom_undo_redo_levels"),Fv=nn("disable_nodechange"),Fx=nn("readonly"),cA=nn("editable_root"),Uw=nn("content_css_cors"),$v=nn("plugins"),lA=nn("external_plugins"),$x=nn("block_unsupported_drop"),dc=nn("visual"),Ww=nn("visual_table_class"),Zw=nn("visual_anchor_class"),jw=nn("iframe_aria_text"),Hv=nn("setup"),uA=nn("init_instance_callback"),Vv=nn("urlconverter_callback"),Hx=nn("auto_focus"),qw=nn("browser_spellcheck"),Gw=nn("protect"),Vx=nn("paste_block_drop"),pp=nn("paste_data_images"),zx=nn("paste_preprocess"),Ux=nn("paste_postprocess"),Wx=nn("newdocument_content"),dA=nn("paste_webkit_styles"),Zx=nn("paste_remove_styles_if_webkit"),jx=nn("paste_merge_formats"),fA=nn("smart_paste"),zv=nn("paste_as_text"),qx=nn("paste_tab_spaces"),bp=nn("allow_html_data_urls"),Gx=nn("text_patterns"),Kw=nn("text_patterns_lookup"),Kx=nn("noneditable_class"),mA=nn("editable_class"),Pu=nn("noneditable_regexp"),Uv=nn("preserve_cdata"),Wv=nn("highlight_on_focus"),Ei=nn("xss_sanitization"),DM=nn("init_content_sync"),xl=e=>e.options.isSet("text_patterns_lookup"),Yw=e=>yt.explode(e.options.get("font_size_style_values")),hA=e=>yt.explode(e.options.get("font_size_classes")),th=e=>e.options.get("encoding")==="xml",H1=e=>yt.explode(e.options.get("images_file_types")),gA=nn("table_tab_navigation"),Yx=nn("details_initial_state"),Xw=nn("details_serialized_state"),Xx=nn("sandbox_iframes"),Zv=e=>e.options.get("sandbox_iframes_exclusions"),V1=nn("convert_unsafe_embeds"),Jx=nn("license_key"),Qx=nn("api_key"),pA=Wt,jv=pt,qv=e=>{const n=e.parentNode;n&&n.removeChild(e)},bA=e=>{const n=ac(e);return{count:e.length-n.length,text:n}},vp=e=>{let n;for(;(n=e.data.lastIndexOf(Ma))!==-1;)e.deleteData(n,1)},eE=(e,n)=>(fg(e),n),Gv=(e,n)=>{const o=bA(e.data.substr(0,n.offset())),r=bA(e.data.substr(n.offset()));return(o.text+r.text).length>0?(vp(e),Xe(e,n.offset()-o.count)):n},Jw=(e,n)=>{const o=n.container(),r=Wi(_r(o.childNodes),e).map(i=>i<n.offset()?Xe(o,n.offset()-1):n).getOr(n);return fg(e),r},Kv=(e,n)=>jv(e)&&n.container()===e?Gv(e,n):eE(e,n),vA=(e,n)=>n.container()===e.parentNode?Jw(e,n):eE(e,n),tE=(e,n)=>Xe.isTextPosition(n)?Kv(e,n):vA(e,n),fg=e=>{pA(e)&&tl(e)&&(ax(e)?e.removeAttribute("data-mce-caret"):qv(e)),jv(e)&&(vp(e),e.data.length===0&&qv(e))},nE=Fo,z1=wi,nh=Gh,U1="*[contentEditable=false],video,audio,embed,object",oE=(e,n,o)=>{const r=pv(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const y=e.ownerDocument.documentElement;i=e.scrollLeft||y.scrollLeft,u=e.scrollTop||y.scrollTop}else{const y=e.getBoundingClientRect();i=e.scrollLeft-y.left,u=e.scrollTop-y.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let m=n.offsetWidth-n.clientWidth;return m>0&&(o&&(m*=-1),r.left+=m,r.right+=m),r},sE=e=>{var n,o;const r=ci(pe.fromDom(e),U1);for(let i=0;i<r.length;i++){const u=r[i].dom;let m=u.previousSibling;if(ko(m)){const y=m.data;y.length===1?(n=m.parentNode)===null||n===void 0||n.removeChild(m):m.deleteData(y.length-1,1)}m=u.nextSibling,Um(m)&&(m.data.length===1?(o=m.parentNode)===null||o===void 0||o.removeChild(m):m.deleteData(0,1))}},RM=(e,n,o,r)=>{const i=Ci();let u,m;const y=Si(e),S=e.dom,O=(ee,le)=>{let we;if(L(),nh(le))return null;if(o(le)){const De=cg(y,le,ee),Oe=oE(n,le,ee);S.setStyle(De,"top",Oe.top),S.setStyle(De,"caret-color","transparent"),m=De;const He=S.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});S.setStyles(He,{...Oe}),S.add(n,He),i.set({caret:He,element:le,before:ee}),ee&&S.addClass(He,"mce-visual-caret-before"),F(),we=le.ownerDocument.createRange(),we.setStart(De,0),we.setEnd(De,0)}else return m=R1(le,ee),we=le.ownerDocument.createRange(),yp(m.nextSibling)?(we.setStart(m,0),we.setEnd(m,0)):(we.setStart(m,1),we.setEnd(m,1)),we;return we},L=()=>{sE(n),m&&(fg(m),m=null),i.on(ee=>{S.remove(ee.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},F=()=>{u=setInterval(()=>{i.on(ee=>{r()?S.toggleClass(ee.caret,"mce-visual-caret-hidden"):S.addClass(ee.caret,"mce-visual-caret-hidden")})},500)};return{show:O,hide:L,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(ee=>{const le=oE(n,ee.element,ee.before);S.setStyles(ee.caret,{...le})})},destroy:()=>clearInterval(u)}},yA=()=>pn.browser.isFirefox(),yp=e=>nE(e)||z1(e),tf=e=>(yp(e)||ql(e)&&yA())&&Of(pe.fromDom(e)).exists(pa),wA=rt,Qw=Fo,rE=wi,aE=jh("display","block table table-cell table-caption list-item"),iE=tl,eC=zm,cE=Wt,oh=pt,lE=wl,mg=e=>e>0,sh=e=>e<0,W1=(e,n)=>{let o;for(;o=e(n);)if(!eC(o))return o;return null},wp=(e,n,o,r,i)=>{const u=new Ha(e,r),m=Qw(e)||eC(e);let y;if(sh(n)){if(m&&(y=W1(u.prev.bind(u),!0),o(y)))return y;for(;y=W1(u.prev.bind(u),i);)if(o(y))return y}if(mg(n)){if(m&&(y=W1(u.next.bind(u),!0),o(y)))return y;for(;y=W1(u.next.bind(u),i);)if(o(y))return y}return null},Yv=(e,n)=>{const o=i=>wA(i.dom),r=i=>i.dom===n;return qs(pe.fromDom(e),o,r).map(i=>i.dom).getOr(n)},rh=(e,n)=>{for(;e&&e!==n;){if(aE(e))return e;e=e.parentNode}return null},El=(e,n,o)=>rh(e.container(),o)===rh(n.container(),o),tC=(e,n)=>{if(!n)return W.none();const o=n.container(),r=n.offset();return cE(o)?W.from(o.childNodes[r+e]):W.none()},CA=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},Cp=(e,n,o)=>rh(n,e)===rh(o,e),uE=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&iE(u)&&(u=u[r]),Qw(u)||rE(u)){if(Cp(n,u,i))return u;break}if(lE(u))break;i=i.parentNode}return null},Sp=nt(CA,!0),xp=nt(CA,!1),di=(e,n,o)=>{let r;const i=nt(uE,!0,n),u=nt(uE,!1,n),m=o.startContainer,y=o.startOffset;if(zm(m)){const S=oh(m)?m.parentNode:m,O=S.getAttribute("data-mce-caret");if(O==="before"&&(r=S.nextSibling,tf(r)))return Sp(r);if(O==="after"&&(r=S.previousSibling,tf(r)))return xp(r)}if(!o.collapsed)return o;if(pt(m)){if(iE(m)){if(e===1){if(r=u(m),r)return Sp(r);if(r=i(m),r)return xp(r)}if(e===-1){if(r=i(m),r)return xp(r);if(r=u(m),r)return Sp(r)}return o}if(ko(m)&&y>=m.data.length-1)return e===1&&(r=u(m),r)?Sp(r):o;if(Um(m)&&y<=1)return e===-1&&(r=i(m),r)?xp(r):o;if(y===m.data.length)return r=u(m),r?Sp(r):o;if(y===0)return r=i(m),r?xp(r):o}return o},Xv=(e,n)=>tC(e?0:-1,n).filter(Qw),Z1=(e,n,o)=>{const r=di(e,n,o);return e===-1?Xe.fromRangeStart(r):Xe.fromRangeEnd(r)},Jv=e=>W.from(e.getNode()).map(pe.fromDom),dE=e=>W.from(e.getNode(!0)).map(pe.fromDom),nC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Qv=(e,n)=>{const o=El(e,n);return!o&&Lo(e.getNode())?!0:o};var la;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(la||(la={}));const e0=Fo,nf=pt,fE=Wt,oC=Lo,Yf=wl,j1=Fk,Ep=yv,t0=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},n0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,ah=(e,n)=>{if(mg(e)){if(Yf(n.previousSibling)&&!nf(n.previousSibling))return Xe.before(n);if(nf(n))return Xe(n,0)}if(sh(e)){if(Yf(n.nextSibling)&&!nf(n.nextSibling))return Xe.after(n);if(nf(n))return Xe(n,n.data.length)}return sh(e)?oC(n)?Xe.before(n):Xe.after(n):Xe.before(n)},SA=(e,n)=>{const o=n.nextSibling;return o&&Yf(o)?nf(o)?Xe(o,0):Xe.before(o):sl(la.Forwards,Xe.after(n),e)},sl=(e,n,o)=>{let r,i,u,m;if(!fE(o)||!n)return null;if(n.isEqual(Xe.after(o))&&o.lastChild){if(m=Xe.after(o.lastChild),sh(e)&&Yf(o.lastChild)&&fE(o.lastChild))return oC(o.lastChild)?Xe.before(o.lastChild):m}else m=n;const y=m.container();let S=m.offset();if(nf(y)){if(sh(e)&&S>0)return Xe(y,--S);if(mg(e)&&S<y.length)return Xe(y,++S);r=y}else{if(sh(e)&&S>0&&(i=n0(y,S-1),Yf(i)))return!j1(i)&&(u=wp(i,e,Ep,i),u)?nf(u)?Xe(u,u.data.length):Xe.after(u):nf(i)?Xe(i,i.data.length):Xe.before(i);if(mg(e)&&S<y.childNodes.length&&(i=n0(y,S),Yf(i)))return oC(i)?SA(o,i):!j1(i)&&(u=wp(i,e,Ep,i),u)?nf(u)?Xe(u,0):Xe.before(u):nf(i)?Xe(i,0):Xe.after(i);r=i||m.getNode()}if(r&&(mg(e)&&m.isAtEnd()||sh(e)&&m.isAtStart())&&(r=wp(r,e,wt,o,!0),Ep(r,o)))return ah(e,r);i=r&&wp(r,e,Ep,o);const O=Ve(Zt(t0(y,o),e0));return O&&(!i||!O.contains(i))?(mg(e)?m=Xe.after(O):m=Xe.before(O),m):i?ah(e,i):null},yd=e=>({next:n=>sl(la.Forwards,n,e),prev:n=>sl(la.Backwards,n,e)}),sC=(e,n,o)=>{const r=e?Xe.before(o):Xe.after(o);return Pc(e,n,r)},mE=e=>Lo(e)?Xe.before(e):Xe.after(e),hE=e=>Xe.isTextPosition(e)?e.offset()===0:wl(e.getNode()),rC=e=>{if(Xe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return wl(e.getNode(!0))},aC=(e,n)=>!Xe.isTextPosition(e)&&!Xe.isTextPosition(n)&&e.getNode()===n.getNode(!0),gE=e=>!Xe.isTextPosition(e)&&Lo(e.getNode()),pE=(e,n,o)=>e?!aC(n,o)&&!gE(n)&&rC(n)&&hE(o):!aC(o,n)&&hE(n)&&rC(o),Pc=(e,n,o)=>{const r=yd(n);return W.from(e?r.next(o):r.prev(o))},hg=(e,n,o)=>Pc(e,n,o).bind(r=>El(o,r,n)&&pE(e,o,r)?Pc(e,n,r):W.some(r)),iC=(e,n,o,r)=>hg(e,n,o).bind(i=>r(i)?iC(e,n,i,r):W.some(i)),ih=(e,n)=>{const o=e?n.firstChild:n.lastChild;return pt(o)?W.some(Xe(o,e?0:o.data.length)):o?wl(o)?W.some(e?Xe.before(o):mE(o)):sC(e,n,o):W.none()},Bc=nt(Pc,!0),rl=nt(Pc,!1),_i=nt(ih,!0),tu=nt(ih,!1),o0="_mce_caret",nu=e=>Wt(e)&&e.id===o0,gg=(e,n)=>{let o=n;for(;o&&o!==e;){if(nu(o))return o;o=o.parentNode}return null},xA=e=>ce(e.start),cC=e=>Sn(e,"rng"),EA=e=>Sn(e,"id"),_A=e=>Sn(e,"name"),bE=e=>yt.isArray(e.start),s0=e=>!_A(e)&&Kt(e.forward)?e.forward:!0,r0=(e,n)=>(Wt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Hi=(e,n)=>{const o=W.from(Ev(e.getRoot(),n.start)),r=W.from(Ev(e.getRoot(),n.end));return Xn(o,r,(i,u)=>{const m=e.createRng();return m.setStart(i.container(),i.offset()),m.setEnd(u.container(),u.offset()),{range:m,forward:s0(n)}})},_p=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ma);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},Tp=e=>!e.hasChildNodes(),q1=(e,n)=>tu(e).fold(tt,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),lC=(e,n,o)=>Tp(n)&&gg(e,n)?(_p(n,o),!0):!1,G1=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let m=u,y=i[0];for(let S=i.length-1;m&&S>=1;S--){const O=m.childNodes;if(lC(u,m,r))return!0;if(i[S]>O.length-1)return lC(u,m,r)?!0:q1(m,r);m=O[i[S]]}pt(m)&&(y=Math.min(i[0],m.data.length)),Wt(m)&&(y=Math.min(i[0],m.childNodes.length)),n?r.setStart(m,y):r.setEnd(m,y)}return!0},K1=e=>pt(e)&&e.data.length>0,pg=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let m,y;if(n==="start"?u?r.hasChildNodes()?(m=r.firstChild,y=1):K1(r.nextSibling)?(m=r.nextSibling,y=0):K1(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)+1):(m=i,y=e.nodeIndex(r)):u?r.hasChildNodes()?(m=r.firstChild,y=1):K1(r.previousSibling)?(m=r.previousSibling,y=r.previousSibling.data.length):(m=i,y=e.nodeIndex(r)):(m=i,y=e.nodeIndex(r)),!u){const S=r.previousSibling,O=r.nextSibling;yt.each(yt.grep(r.childNodes),F=>{pt(F)&&(F.data=F.data.replace(/\uFEFF/g,""))});let L;for(;L=e.get(o.id+"_"+n);)e.remove(L,!0);if(pt(O)&&pt(S)&&!pn.browser.isOpera()){const F=S.data.length;S.appendData(O.data),e.remove(O),m=S,y=F}}return W.some(Xe(m,y))}else return W.none()},uC=(e,n)=>{const o=e.createRng();return G1(e,!0,n,o)&&G1(e,!1,n,o)?W.some({range:o,forward:s0(n)}):W.none()},a0=(e,n)=>{const o=pg(e,"start",n),r=pg(e,"end",n);return Xn(o,r.or(o),(i,u)=>{const m=e.createRng();return m.setStart(r0(e,i.container()),i.offset()),m.setEnd(r0(e,u.container()),u.offset()),{range:m,forward:s0(n)}})},Bu=(e,n)=>W.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),vE=(e,n)=>{const o=e.dom;if(n){if(bE(n))return uC(o,n);if(xA(n))return Hi(o,n);if(EA(n))return a0(o,n);if(_A(n))return Bu(o,n);if(cC(n))return W.some({range:n.rng,forward:s0(n)})}return W.none()},yE=(e,n,o)=>xx(e,n,o),Xf=(e,n)=>{vE(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},_l=e=>Wt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",bg=(e=>n=>e===n)(Xr),ch=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,dC=e=>!ch(e)&&!bg(e)&&!Qb(e),i0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},wE=e=>ws(e,n=>{const o=nl(n);return o?[pe.fromDom(o)]:[]}),TA=e=>i0(e).length>1,kA=e=>Zt(wE(e),D1),vg=e=>ci(e,"td[data-mce-selected],th[data-mce-selected]"),fC=(e,n)=>{const o=vg(n);return o.length>0?o:kA(e)},kp=e=>fC(i0(e.selection.getSel()),pe.fromDom(e.getBody())),X1=(e,n)=>Ur(e,"table",n),AA=e=>{const n=e.startContainer,o=e.startOffset;return pt(n)?o===0?W.some(pe.fromDom(n)):W.none():W.from(n.childNodes[o]).map(pe.fromDom)},c0=e=>{const n=e.endContainer,o=e.endOffset;return pt(n)?o===n.data.length?W.some(pe.fromDom(n)):W.none():W.from(n.childNodes[o-1]).map(pe.fromDom)},mC=e=>ai(e).fold(ct([e]),n=>[e].concat(mC(n))),hC=e=>td(e).fold(ct([e]),n=>yo(n)==="br"?Ul(n).map(o=>[e].concat(hC(o))).getOr([]):[e].concat(hC(n))),l0=(e,n)=>Xn(AA(n),c0(n),(o,r)=>{const i=Po(mC(e),nt(ro,o)),u=Po(hC(e),nt(ro,r));return i.isSome()&&u.isSome()}).getOr(!1),gC=(e,n,o,r)=>{const i=o,u=new Ha(o,i),m=Wo(e.schema.getMoveCaretBeforeOnEnterElements(),(S,O)=>!et(["td","th","table"],O.toLowerCase()));let y=o;do{if(pt(y)&&yt.trim(y.data).length!==0){r?n.setStart(y,0):n.setEnd(y,y.data.length);return}if(m[y.nodeName]){r?n.setStartBefore(y):y.nodeName==="BR"?n.setEndBefore(y):n.setEndAfter(y);return}}while(y=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},Ap=e=>{const n=e.selection.getSel();return $e(n)&&n.rangeCount>0},u0=(e,n)=>{const o=kp(e);o.length>0?xe(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},d0=(e,n,o)=>{const r=Nw(e,n);o(r),e.moveToBookmark(r)},f0=e=>so(e==null?void 0:e.nodeType),m0=e=>Wt(e)&&!_l(e)&&!nu(e)&&!Bf(e),Do=(e,n)=>{if(m0(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},of=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),m=Fo(u);d0(r,!0,()=>{n()}),m&&Fo(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&yg(i,r)},yg=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:m}=i,y=n.getNode();if(!Do(e,y)&&Wt(u)){const S=u.childNodes,O=e.getRoot();let L;if(m<S.length){const F=S[m];L=new Ha(F,(o=e.getParent(F,e.isBlock))!==null&&o!==void 0?o:O)}else{const F=S[S.length-1];L=new Ha(F,(r=e.getParent(F,e.isBlock))!==null&&r!==void 0?r:O),L.next(!0)}for(let F=L.current();F;F=L.next()){if(e.getContentEditable(F)==="false")return;if(pt(F)&&!p0(F)){i.setStart(F,0),n.setRng(i);return}}}},h0=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Wt(e)||!p0(e))return e}},g0=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Ou(e,n),lh=(e,n,o)=>e.schema.isValidChild(n,o),p0=(e,n=!1)=>{if($e(e)&&pt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Tc(o)}else return!1},pC=e=>$e(e)&&pt(e)&&e.length===0,bC=(e,n)=>{const o="[data-mce-cef-wrappable]",r=L1(e),i=sa(r)?o:`${o},${r}`;return pl(pe.fromDom(n),i)},vC=(e,n)=>{const o=e.dom;return m0(n)&&o.getContentEditable(n)==="false"&&bC(e,n)&&o.select('[contenteditable="true"]',n).length===0},Jf=(e,n)=>ve(e)?e(n):($e(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),wg=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),CE=(e,n)=>{if(Qt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=hd(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},J1=(e,n,o)=>{const r=e.getStyle(n,o);return CE(r,o)},yC=(e,n)=>{let o;return e.getParent(n,r=>Wt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},b0=(e,n,o)=>e.getParents(n,o,e.getRoot()),v0=(e,n,o)=>{const r=e.formatter.get(n);return $e(r)&&kt(r,o)},wC=(e,n)=>v0(e,n,r=>{const i=u=>ve(u)||u.length>1&&u.charAt(0)==="%";return kt(["styles","attributes"],u=>zo(r,u).exists(m=>{const y=jt(m)?m:Di(m);return kt(y,i)}))}),SE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>Wo(u,(m,y)=>kt(r,S=>S===y));return v0(e,n,u=>{const m=i(u);return v0(e,o,y=>{const S=i(y);return Qa(m,S)})})},Qf=e=>Ys(e,"block"),y0=e=>Qf(e)&&e.wrapper===!0,xE=e=>Qf(e)&&e.wrapper!==!0,ou=e=>Ys(e,"selector"),Wa=e=>Ys(e,"inline"),em=e=>ou(e)&&Wa(e)&&Os(zo(e,"mixed"),!0),CC=e=>ou(e)&&e.expand!==!1&&!Wa(e),OA=e=>{const n=[];let o=e;for(;o;){if(pt(o)&&o.data!==Ma||o.childNodes.length>1)return[];Wt(o)&&n.push(o),o=o.firstChild}return n},w0=e=>OA(e).length>0,SC=e=>nu(e.dom)&&w0(e.dom),Op=_l,EE=b0,DA=p0,MM=g0,RA=e=>Lo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,_E=(e,n)=>{let o=n;for(;o;){if(Wt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},TE=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},Xt=(e,n,o)=>TE(e,n,o,r=>bg(r)||ch(r)),Za=(e,n,o)=>TE(e,n,o,dC),Q1=(e,n,o,r,i,u)=>{let m;const y=e.getParent(o,e.isBlock)||n,S=(L,F,V)=>{const Q=rg(e),re=i?Q.backwards:Q.forwards;return W.from(re(L,F,(ee,le)=>Op(ee.parentNode)?-1:(m=ee,V(i,ee,le)),y))};return S(o,r,Xt).bind(L=>u?S(L.container,L.offset+(i?-1:0),Za):W.some(L)).orThunk(()=>m?W.some({container:m,offset:i?0:m.length}):W.none())},ja=(e,n,o,r,i)=>{const u=r[i];pt(r)&&sa(r.data)&&u&&(r=u);const m=EE(e,r);for(let y=0;y<m.length;y++)for(let S=0;S<n.length;S++){const O=n[S];if(!($e(O.collapsed)&&O.collapsed!==o.collapsed)&&ou(O)&&e.is(m[y],O.selector))return m[y]}return r},su=(e,n,o,r)=>{var i;let u=o;const m=e.getRoot(),y=n[0];if(Qf(y)&&(u=y.wrapper?null:e.getParent(o,y.block,m)),!u){const S=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:m;u=e.getParent(pt(o)?o.parentNode:o,O=>O!==m&&MM(e.schema,O),S)}if(u&&Qf(y)&&y.wrapper&&(u=EE(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!wg(u,"br")););return u||o},xC=(e,n,o,r)=>{const i=o.parentNode;return $e(o[r])?!1:i===n||Qt(i)||e.isBlock(i)?!0:xC(e,n,i,r)},Cg=(e,n,o,r,i)=>{let u=o;const m=i?"previousSibling":"nextSibling",y=e.getRoot();if(pt(o)&&!DA(o)&&(i?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let S=u[m];S;S=S[m]){const O=pt(S)&&!xC(e,y,S,m);if(!Op(S)&&!RA(S)&&!DA(S,O))return u}if(u===y||u.parentNode===y){o=u;break}u=u.parentNode}return o},eb=e=>Op(e.parentNode)||Op(e),Sg=(e,n,o,r=!1)=>{let{startContainer:i,startOffset:u,endContainer:m,endOffset:y}=n;const S=o[0];return Wt(i)&&i.hasChildNodes()&&(i=Zm(i,u),pt(i)&&(u=0)),Wt(m)&&m.hasChildNodes()&&(m=Zm(m,n.collapsed?y:y-1),pt(m)&&(y=m.data.length)),i=_E(e,i),m=_E(e,m),eb(i)&&(i=Op(i)?i:i.parentNode,n.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,pt(i)&&(u=n.collapsed?i.length:0)),eb(m)&&(m=Op(m)?m:m.parentNode,n.collapsed?m=m.nextSibling||m:m=m.previousSibling||m,pt(m)&&(y=n.collapsed?0:m.length)),n.collapsed&&(Q1(e,e.getRoot(),i,u,!0,r).each(({container:F,offset:V})=>{i=F,u=V}),Q1(e,e.getRoot(),m,y,!1,r).each(({container:F,offset:V})=>{m=F,y=V})),(Wa(S)||S.block_expand)&&((!Wa(S)||!pt(i)||u===0)&&(i=Cg(e,o,i,u,!0)),(!Wa(S)||!pt(m)||y===m.data.length)&&(m=Cg(e,o,m,y,!1))),CC(S)&&(i=ja(e,o,n,i,"previousSibling"),m=ja(e,o,n,m,"nextSibling")),(Qf(S)||ou(S))&&(i=su(e,o,i,"previousSibling"),m=su(e,o,m,"nextSibling"),Qf(S)&&(e.isBlock(i)||(i=Cg(e,o,i,u,!0),pt(i)&&(u=0)),e.isBlock(m)||(m=Cg(e,o,m,y,!1),pt(m)&&(y=m.data.length)))),Wt(i)&&i.parentNode&&(u=e.nodeIndex(i),i=i.parentNode),Wt(m)&&m.parentNode&&(y=e.nodeIndex(m)+1,m=m.parentNode),{startContainer:i,startOffset:u,endContainer:m,endOffset:y}},tb=(e,n,o)=>{var r;const i=n.startOffset,u=Zm(n.startContainer,i),m=n.endOffset,y=Zm(n.endContainer,m-1),S=le=>{const we=le[0];pt(we)&&we===u&&i>=we.data.length&&le.splice(0,1);const De=le[le.length-1];return m===0&&le.length>0&&De===y&&pt(De)&&le.splice(le.length-1,1),le},O=(le,we,De)=>{const Oe=[];for(;le&&le!==De;le=le[we])Oe.push(le);return Oe},L=(le,we)=>e.getParent(le,De=>De.parentNode===we,we),F=(le,we,De)=>{const Oe=De?"nextSibling":"previousSibling";for(let He=le,ft=He.parentNode;He&&He!==we;He=ft){ft=He.parentNode;const Rt=O(He===le?He:He[Oe],Oe);Rt.length&&(De||Rt.reverse(),o(S(Rt)))}};if(u===y)return o(S([u]));const V=(r=e.findCommonAncestor(u,y))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,y))return F(u,V,!0);if(e.isChildOf(y,u))return F(y,V);const Q=L(u,V)||u,re=L(y,V)||y;F(u,Q,!0);const ee=O(Q===u?Q:Q.nextSibling,"nextSibling",re===y?re.nextSibling:re);ee.length&&o(S(ee)),F(y,re)},kE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],MA=e=>Yr(e)&&$m(e)===Ma,NA=(e,n,o,r)=>$a(n).fold(()=>"skipping",i=>r==="br"||MA(n)?"valid":Ok(n)?"existing":nu(n.dom)?"caret":kt(kE,u=>pl(n,u))?"valid-block":!lh(e,o,r)||!lh(e,yo(i),o)?"invalid-child":"valid"),Dp=(e,n)=>{const o=Sg(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},xg=(e,n,o,r,i,u)=>{const{uid:m=n,...y}=o;gl(e,ip()),js(e,`${cp()}`,m),js(e,`${Xd()}`,r);const{attributes:S={},classes:O=[]}=i(m,y);if(Zc(e,S),kM(e,O),u){O.length>0&&js(e,`${Lm()}`,O.join(","));const L=Go(S);L.length>0&&js(e,`${Jd()}`,L.join(","))}},EC=e=>{vu(e,ip()),Cr(e,`${cp()}`),Cr(e,`${Xd()}`),Cr(e,`${ng()}`);const n=wr(e,`${Jd()}`).map(r=>r.split(",")).getOr([]),o=wr(e,`${Lm()}`).map(r=>r.split(",")).getOr([]);xe(n,r=>Cr(e,r)),A1(e,o),Cr(e,`${Lm()}`),Cr(e,`${Jd()}`)},_C=(e,n,o,r,i)=>{const u=pe.fromTag("span",e);return xg(u,n,o,r,i,!1),u},al=(e,n,o,r,i,u)=>{const m=[],y=_C(e.getDoc(),o,u,r,i),S=Ci(),O=()=>{S.clear()},L=()=>S.get().getOrThunk(()=>{const re=Fm(y);return m.push(re),S.set(re),re}),F=re=>{xe(re,V)},V=re=>{switch(NA(e,re,"span",yo(re))){case"invalid-child":{O();const le=ra(re);F(le),O();break}case"valid-block":{O(),xg(re,o,u,r,i,!0);break}case"valid":{const le=L();rd(re,le);break}}},Q=re=>{const ee=dt(re,pe.fromDom);F(ee)};return tb(e.dom,n,re=>{O(),Q(re)}),m},sf=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),m=kp(e).length>0,y=dv("mce-annotation");if(u.collapsed&&!m&&Dp(e,u),i.getRng().collapsed&&!m){const S=_C(e.getDoc(),y,r,n,o.decorate);Eu(S,Xr),i.getRng().insertNode(S.dom),i.select(S.dom)}else d0(i,!1,()=>{u0(e,S=>{al(e,S,y,n,o.decorate,r)})})})},C0=e=>{const n=cw();uv(e,n);const o=iw(e,n),r=si("span"),i=u=>{xe(u,m=>{r(m)?_c(m):EC(m)})};return{register:(u,m)=>{n.register(u,m)},annotate:(u,m)=>{n.lookup(u).each(y=>{sf(e,u,y,m)})},annotationChanged:(u,m)=>{o.addListener(u,m)},remove:u=>{sg(e,W.some(u)).each(({elements:m})=>{const y=e.selection.getBookmark();i(m),e.selection.moveToBookmark(y)})},removeAll:u=>{const m=e.selection.getBookmark();At(ex(e,u),(y,S)=>{i(y)}),e.selection.moveToBookmark(m)},getAll:u=>{const m=ex(e,u);return po(m,y=>dt(y,S=>S.dom))}}},Iu=e=>({getBookmark:nt(yE,e),moveToBookmark:nt(Xf,e)});Iu.isBookmarkNode=_l;const S0=(e,n,o)=>o.collapsed?!1:kt(o.getClientRects(),r=>ix(r,e,n)),PA=(e,n)=>e.dispatch("PreProcess",n),x0=(e,n)=>e.dispatch("PostProcess",n),E0=e=>{e.dispatch("remove")},BA=e=>{e.dispatch("detach")},IA=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},LA=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},FA=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},_0=e=>{e.dispatch("PreInit")},AE=e=>{e.dispatch("PostRender")},$A=e=>{e.dispatch("Init")},T0=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Ti=(e,n,o)=>{e.dispatch(n,o)},ru=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Tl=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},k0=(e,n)=>e.dispatch("BeforeSetContent",n),nb=(e,n)=>e.dispatch("SetContent",n),NM=(e,n)=>e.dispatch("BeforeGetContent",n),ob=(e,n)=>e.dispatch("GetContent",n),HA=(e,n)=>{e.dispatch("AutocompleterStart",n)},OE=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},DE=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},RE=e=>{e.dispatch("AutocompleterEnd")},VA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),ME=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),A0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),NE=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),bt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||bt.metaKeyPressed(e),metaKeyPressed:e=>pn.os.isMacOS()||pn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},kl="data-mce-selected",PE="table,img,figure.image,hr,video,span.mce-preview-object,details",TC=Math.abs,sb=Math.round,Eg={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},kC=e=>e.type==="longpress"||e.type.indexOf("touch")===0,rb=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let m,y,S,O,L,F,V,Q,re,ee,le,we,De,Oe,He,ft,Rt;const Yt=Gt=>$e(Gt)&&(Xg(Gt)||o.is(Gt,"figure.image")),Je=Gt=>wi(Gt)||o.hasClass(Gt,"mce-preview-object"),Ue=(Gt,ho)=>{if(kC(Gt)){const Co=Gt.touches[0];return Yt(Gt.target)&&!S0(Co.clientX,Co.clientY,ho)}else return Yt(Gt.target)&&!S0(Gt.clientX,Gt.clientY,ho)},ut=Gt=>{const ho=Gt.target;Ue(Gt,n.selection.getRng())&&!Gt.isDefaultPrevented()&&n.selection.select(ho)},an=Gt=>o.hasClass(Gt,"mce-preview-object")&&$e(Gt.firstElementChild)?[Gt,Gt.firstElementChild]:o.is(Gt,"figure.image")?[Gt.querySelector("img")]:[Gt],wn=Gt=>{const ho=Sl(n);return!ho||Gt.getAttribute("data-mce-resize")==="false"||Gt===n.getBody()?!1:o.hasClass(Gt,"mce-preview-object")&&$e(Gt.firstElementChild)?pl(pe.fromDom(Gt.firstElementChild),ho):pl(pe.fromDom(Gt),ho)},go=(Gt,ho)=>{if(Je(ho))return Gt.create("img",{src:pn.transparentSrc});if(ql(ho)){const Ya=es(O.name,"n")?fo:cs,is=ho.cloneNode(!0);return Ya(Gt.select("tr",is)).each(Pa=>{const Rd=Gt.select("td,th",Pa);Gt.setStyle(Pa,"height",null),xe(Rd,fm=>Gt.setStyle(fm,"height",null))}),is}else return ho.cloneNode(!0)},wo=(Gt,ho,Co)=>{if($e(Co)){const Ya=an(Gt);xe(Ya,is=>{is.style[ho]||!n.schema.isValid(is.nodeName.toLowerCase(),ho)?o.setStyle(is,ho,Co):o.setAttrib(is,ho,""+Co)})}},ns=(Gt,ho,Co)=>{wo(Gt,"width",ho),wo(Gt,"height",Co)},ps=Gt=>{let ho,Co,Ya,is,Pa;ho=Gt.screenX-F,Co=Gt.screenY-V,Oe=ho*O[2]+ee,He=Co*O[3]+le,Oe=Oe<5?5:Oe,He=He<5?5:He,(Yt(m)||Je(m))&&Bv(n)!==!1?Ya=!bt.modifierPressed(Gt):Ya=bt.modifierPressed(Gt),Ya&&(TC(ho)>TC(Co)?(He=sb(Oe*we),Oe=sb(He/we)):(Oe=sb(He/we),He=sb(Oe*we))),ns(y,Oe,He),is=O.startPos.x+ho,Pa=O.startPos.y+Co,is=is>0?is:0,Pa=Pa>0?Pa:0,o.setStyles(S,{left:is,top:Pa,display:"block"}),S.innerHTML=Oe+" &times; "+He,O[2]<0&&y.clientWidth<=Oe&&o.setStyle(y,"left",Q+(ee-Oe)),O[3]<0&&y.clientHeight<=He&&o.setStyle(y,"top",re+(le-He)),ho=u.scrollWidth-ft,Co=u.scrollHeight-Rt,ho+Co!==0&&o.setStyles(S,{left:is-ho,top:Pa-Co}),De||(LA(n,m,ee,le,"corner-"+O.name),De=!0)},Lr=()=>{const Gt=De;De=!1,Gt&&(wo(m,"width",Oe),wo(m,"height",He)),o.unbind(r,"mousemove",ps),o.unbind(r,"mouseup",Lr),i!==r&&(o.unbind(i,"mousemove",ps),o.unbind(i,"mouseup",Lr)),o.remove(y),o.remove(S),o.remove(L),Ea(m),Gt&&(FA(n,m,Oe,He,"corner-"+O.name),o.setAttrib(m,"style",o.getAttrib(m,"style"))),n.nodeChanged()},Ea=Gt=>{zt();const ho=o.getPos(Gt,u),Co=ho.x,Ya=ho.y,is=Gt.getBoundingClientRect(),Pa=is.width||is.right-is.left,Rd=is.height||is.bottom-is.top;m!==Gt&&(Bt(),m=Gt,Oe=He=0);const fm=n.dispatch("ObjectSelected",{target:Gt});wn(Gt)&&!fm.isDefaultPrevented()?At(Eg,(Fc,Pl)=>{const Yu=Xu=>{const Cn=an(m)[0];F=Xu.screenX,V=Xu.screenY,ee=Cn.clientWidth,le=Cn.clientHeight,we=le/ee,O=Fc,O.name=Pl,O.startPos={x:Pa*Fc[0]+Co,y:Rd*Fc[1]+Ya},ft=u.scrollWidth,Rt=u.scrollHeight,L=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(L,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),y=go(o,m),o.addClass(y,"mce-clonedresizable"),o.setAttrib(y,"data-mce-bogus","all"),y.contentEditable="false",o.setStyles(y,{left:Co,top:Ya,margin:0}),ns(y,Pa,Rd),y.removeAttribute(kl),u.appendChild(y),o.bind(r,"mousemove",ps),o.bind(r,"mouseup",Lr),i!==r&&(o.bind(i,"mousemove",ps),o.bind(i,"mouseup",Lr)),S=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ee+" &times; "+le)};let Bl=o.get("mceResizeHandle"+Pl);Bl&&o.remove(Bl),Bl=o.add(u,"div",{id:"mceResizeHandle"+Pl,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Pl+"-resize; margin:0; padding:0"}),o.bind(Bl,"mousedown",Xu=>{Xu.stopImmediatePropagation(),Xu.preventDefault(),Yu(Xu)}),Fc.elm=Bl,o.setStyles(Bl,{left:Pa*Fc[0]+Co-Bl.offsetWidth/2,top:Rd*Fc[1]+Ya-Bl.offsetHeight/2})}):Bt(!1)},Ts=T1(Ea,0),Bt=(Gt=!0)=>{Ts.cancel(),zt(),m&&Gt&&m.removeAttribute(kl),At(Eg,(ho,Co)=>{const Ya=o.get("mceResizeHandle"+Co);Ya&&(o.unbind(Ya),o.remove(Ya))})},vn=(Gt,ho)=>o.isChildOf(Gt,ho),$o=Gt=>{if(De||n.removed||n.composing)return;const ho=Gt.type==="mousedown"?Gt.target:e.getNode(),Co=Wl(pe.fromDom(ho),PE).map(is=>is.dom).filter(is=>o.isEditable(is.parentElement)||is.nodeName==="IMG"&&o.isEditable(is)).getOrUndefined(),Ya=$e(Co)?o.getAttrib(Co,kl,"1"):"1";if(xe(o.select(`img[${kl}],hr[${kl}]`),is=>{is.removeAttribute(kl)}),$e(Co)&&vn(Co,u)&&n.hasFocus()){Tn();const is=e.getStart(!0);if(vn(is,Co)&&vn(e.getEnd(!0),Co)){o.setAttrib(Co,kl,Ya),Ts.throttle(Co);return}}Bt()},zt=()=>{At(Eg,Gt=>{Gt.elm&&(o.unbind(Gt.elm),delete Gt.elm)})},Tn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Tn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",$o),n.on("keyup compositionend",Gt=>{m&&m.nodeName==="TABLE"&&$o(Gt)}),n.on("hide blur",Bt),n.on("contextmenu longpress",ut,!0)}),n.on("remove",zt),{isResizable:wn,showResizeRect:Ea,hideResizeRect:Bt,updateResizeRect:$o,destroy:()=>{Ts.cancel(),m=y=L=null}}},BE=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},zA=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},AC=(e,n,o)=>{const r=e.document.createRange();return BE(r,n),zA(r,o),r},ab=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},uh=bd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),IE=(e,n,o)=>n(pe.fromDom(o.startContainer),o.startOffset,pe.fromDom(o.endContainer),o.endOffset),LE=(e,n)=>n.match({domRange:o=>({ltr:ct(o),rtl:W.none}),relative:(o,r)=>({ltr:Ye(()=>AC(e,o,r)),rtl:Ye(()=>W.some(AC(e,r,o)))}),exact:(o,r,i,u)=>({ltr:Ye(()=>ab(e,o,r,i,u)),rtl:Ye(()=>W.some(ab(e,i,u,o,r)))})}),UA=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>uh.rtl(pe.fromDom(i.endContainer),i.endOffset,pe.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>IE(e,uh.ltr,o)):IE(e,uh.ltr,o)},OC=(e,n)=>{const o=LE(e,n);return UA(e,o)};uh.ltr,uh.rtl;const il={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Ki=(e,n,o)=>{var r;return W.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(i=>{if(i.offsetNode===null)return W.none();const u=e.createRange();return u.setStart(i.offsetNode,i.offset),u.collapse(),W.some(u)})},Rp=(e,n,o)=>{var r;return W.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},PM=(e,n,o)=>e.caretPositionFromPoint?Ki(e,n,o):e.caretRangeFromPoint?Rp(e,n,o):W.none(),ZA=(e,n,o)=>{const r=e.document;return PM(r,n,o).map(i=>il.create(pe.fromDom(i.startContainer),i.startOffset,pe.fromDom(i.endContainer),i.endOffset))},DC=bd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ro=(e,n,o,r)=>e.fold(n,o,r),jA=e=>e.fold(Hn,Hn,Hn),qA=DC.before,FE=DC.on,BM=DC.after,rf={before:qA,on:FE,after:BM,cata:Ro,getStart:jA},O0=bd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),GA=e=>O0.exact(e.start,e.soffset,e.finish,e.foffset),KA=e=>e.match({domRange:n=>pe.fromDom(n.startContainer),relative:(n,o)=>rf.getStart(n),exact:(n,o,r,i)=>n}),$E=O0.domRange,ib=O0.relative,RC=O0.exact,HE=e=>{const n=KA(e);return Fd(n)},IM=il.create,Mp={domRange:$E,relative:ib,exact:RC,exactFromRange:GA,getWin:HE,range:IM},MC=(e,n)=>{const o=yo(e);return o==="input"?rf.after(e):et(["br","img"],o)?n===0?rf.before(e):rf.after(e):rf.on(e,n)},LM=(e,n)=>{const o=e.fold(rf.before,MC,rf.after),r=n.fold(rf.before,MC,rf.after);return Mp.relative(o,r)},VE=(e,n,o,r)=>{const i=MC(e,n),u=MC(o,r);return Mp.relative(i,u)},YA=e=>e.match({domRange:n=>{const o=pe.fromDom(n.startContainer),r=pe.fromDom(n.endContainer);return VE(o,n.startOffset,r,n.endOffset)},relative:LM,exact:VE}),l=(e,n)=>{const r=document.createDocumentFragment();return xe(e,i=>{r.appendChild(i.dom)}),pe.fromDom(r)},f=e=>{const n=Mp.getWin(e).dom,o=(i,u,m,y)=>ab(n,i,u,m,y),r=YA(e);return OC(n,r).match({ltr:o,rtl:o})},v=(e,n,o)=>ZA(e,n,o),C=(e,n,o)=>{const r=Fd(pe.fromDom(o));return v(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},A=(e,n)=>$e(e)&&$e(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,B=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},U=(e,n,o)=>B(e,n,o)!==null,J=(e,n,o)=>U(e,n,r=>r.nodeName===o),ae=(e,n)=>tl(e)&&!U(e,n,nu),Ce=(e,n,o)=>{const r=n.parentNode;if(r){const i=new Ha(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(Lo(u))return!0}return!1},Fe=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Ct=(e,n)=>{let o=n;for(;o&&o!==e;){if(Fo(o))return!0;o=o.parentNode}return!1},Vt=(e,n,o,r,i)=>{const u=e.getRoot(),m=e.schema.getNonEmptyElements(),y=i.parentNode;let S,O;if(!y)return W.none();const L=e.getParent(y,e.isBlock)||u;if(r&&Lo(i)&&n&&e.isEmpty(L))return W.some(Xe(y,e.nodeIndex(i)));const F=new Ha(i,L);for(;O=F[r?"prev":"next"]();){if(e.getContentEditableParent(O)==="false"||ae(O,u))return W.none();if(pt(O)&&O.data.length>0)return J(O,u,"A")?W.none():W.some(Xe(O,r?O.data.length:0));if(e.isBlock(O)||m[O.nodeName.toLowerCase()])return W.none();S=O}return ba(S)?W.none():o&&S?W.some(Xe(S,0)):W.none()},Lt=(e,n,o,r)=>{const i=e.getRoot();let u,m=!1,y=o?r.startContainer:r.endContainer,S=o?r.startOffset:r.endOffset;const O=Wt(y)&&S===y.childNodes.length,L=e.schema.getNonEmptyElements();let F=o;if(tl(y))return W.none();if(Wt(y)&&S>y.childNodes.length-1&&(F=!1),Tm(y)&&(y=i,S=0),y===i){if(F&&(u=y.childNodes[S>0?S-1:0],u&&(tl(u)||L[u.nodeName]||ql(u))))return W.none();if(y.hasChildNodes()){if(S=Math.min(!F&&S>0?S-1:S,y.childNodes.length-1),y=y.childNodes[S],S=pt(y)&&O?y.data.length:0,!n&&y===i.lastChild&&ql(y)||Ct(i,y)||tl(y)||kc(y))return W.none();if(y.hasChildNodes()&&!ql(y)){u=y;const V=new Ha(y,i);do{if(Fo(u)||tl(u)){m=!1;break}if(pt(u)&&u.data.length>0){S=F?0:u.data.length,y=u,m=!0;break}if(L[u.nodeName.toLowerCase()]&&!Jr(u)){S=e.nodeIndex(u),y=u.parentNode,F||S++,m=!0;break}}while(u=F?V.next():V.prev())}}}return n&&(pt(y)&&S===0&&Vt(e,O,n,!0,y).each(V=>{y=V.container(),S=V.offset(),m=!0}),Wt(y)&&(u=y.childNodes[S],u||(u=y.childNodes[S-1]),u&&Lo(u)&&!Fe(u,"A")&&!Ce(e,u,!1)&&!Ce(e,u,!0)&&Vt(e,O,n,!0,u).each(V=>{y=V.container(),S=V.offset(),m=!0}))),F&&!n&&pt(y)&&S===y.data.length&&Vt(e,O,n,!1,y).each(V=>{y=V.container(),S=V.offset(),m=!0}),m&&y?W.some(Xe(y,S)):W.none()},Mt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Xe.fromRangeStart(n);return Lt(e,o,!0,r).each(u=>{(!o||!Xe.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||Lt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),A(n,r)?W.none():W.some(r)},un=(e,n)=>e.splitText(n),ht=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&pt(n)){if(o>0&&o<n.data.length)if(r=un(n,o),n=r.previousSibling,i>o){i=i-o;const u=un(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(pt(n)&&o>0&&o<n.data.length&&(n=un(n,o),o=0),pt(r)&&i>0&&i<r.data.length){const u=un(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},Tt=e=>({walk:(u,m)=>tb(e,u,m),split:ht,expand:(u,m={type:"word"})=>{if(m.type==="word"){const y=Sg(e,u,[{inline:"span"}]),S=e.createRng();return S.setStart(y.startContainer,y.startOffset),S.setEnd(y.endContainer,y.endOffset),S}return u},normalize:u=>Mt(e,u).fold(tt,m=>(u.setStart(m.startContainer,m.startOffset),u.setEnd(m.endContainer,m.endOffset),!0))});Tt.compareRanges=A,Tt.getCaretRangeFromPoint=C,Tt.getSelectedNode=nl,Tt.getNode=Zm;const Ln=((e,n)=>{const o=(y,S)=>{if(!so(S)&&!S.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+S);const O=y.dom;Su(O)&&(O.style[e]=S+"px")},r=y=>{const S=n(y);if(S<=0||S===null){const O=Wr(y,e);return parseFloat(O)||0}return S},i=r,u=(y,S)=>Mo(S,(O,L)=>{const F=Wr(y,L),V=F===void 0?0:parseInt(F,10);return isNaN(V)?O:O+V},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(y,S,O)=>{const L=u(y,O);return S>L?S-L:0}}})("height",e=>{const n=e.dom;return nd(e)?n.getBoundingClientRect().height:n.offsetHeight}),bn=e=>Ln.get(e),ir=()=>pe.fromDom(document),ds=(e,n)=>e.view(n).fold(ct([]),r=>{const i=e.owner(r),u=ds(e,i);return[r].concat(u)}),Br=(e,n)=>{const o=n.owner(e);return ds(n,o)};var _g=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?W.none():W.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(pe.fromDom)},owner:e=>Cu(e)});const Tg=e=>{const n=ir(),o=Rn(n),r=Br(e,_g),i=Jn(e),u=ss(r,(m,y)=>{const S=Jn(y);return{left:m.left+S.left,top:m.top+S.top}},{left:0,top:0});return fe(u.left+i.left+o.left,u.top+i.top+o.top)},as=e=>yo(e)==="textarea",qa=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),fc=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Lu=(e,n)=>{const o=ra(e);if(o.length===0||as(e))return{element:e,offset:n};if(n<o.length&&!as(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return as(r)?{element:e,offset:n}:yo(r)==="img"?{element:r,offset:1}:Yr(r)?{element:r,offset:$m(r).length}:{element:r,offset:ra(r).length}}},Ol=(e,n)=>{const o=kn(e),r=bn(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Np=(e,n)=>{const o=Lu(e,n),r=pe.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ma+"</span>");return ii(o.element,r),Ol(r,()=>gs(r))},Qn=e=>Ol(pe.fromDom(e),Pe),Dl=(e,n,o,r)=>{Io(e,(i,u)=>af(e,n,o,r),o)},Fu=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(qa(e,u))return;const m=Rn(n).top;o(e,n,m,r,i),fc(e,u)},af=(e,n,o,r)=>{const i=pe.fromDom(e.getBody()),u=pe.fromDom(e.getDoc());aa(i);const m=Np(pe.fromDom(o.startContainer),o.startOffset);Fu(e,u,n,m,r),m.cleanup()},Sa=(e,n,o,r)=>{const i=pe.fromDom(e.getDoc());Fu(e,i,o,Qn(n),r)},Io=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,m=o.endOffset;n(pe.fromDom(r),pe.fromDom(u));const y=e.dom.createRng();y.setStart(r,i),y.setEnd(u,m),e.selection.setRng(o)},NC=(e,n,o,r,i)=>{const u=n.pos;if(r)An(u.left,u.top,i);else{const m=u.top-o+n.height;An(-e.getBody().getBoundingClientRect().left,m,i)}},PC=(e,n,o,r,i,u)=>{const m=r+o,y=i.pos.top,S=i.bottom,O=S-y>=r;y<o?NC(e,i,r,u!==!1,n):y>m?NC(e,i,r,O?u!==!1:u===!0,n):S>m&&!O&&NC(e,i,r,u===!0,n)},D0=(e,n,o,r,i)=>{const u=Fd(n).dom.innerHeight;PC(e,n,o,u,r,i)},zE=(e,n,o,r,i)=>{const u=Fd(n).dom.innerHeight;PC(e,n,o,u,r,i);const m=Tg(r.element),y=jl(window);m.top<y.y?Rs(r.element,i!==!1):m.top>y.bottom&&Rs(r.element,i===!0)},tm=(e,n,o)=>Dl(e,D0,n,o),kg=(e,n,o)=>Sa(e,n,D0,o),Pp=(e,n,o)=>Dl(e,zE,n,o),s7=(e,n,o)=>Sa(e,n,zE,o),r7=(e,n,o)=>{(e.inline?kg:s7)(e,n,o)},BC=(e,n,o)=>{(e.inline?tm:Pp)(e,n,o)},R0=(e,n=!1)=>e.dom.focus({preventScroll:n}),cb=e=>{const n=jc(e).dom;return e.dom===n.activeElement},XA=(e=ir())=>W.from(e.dom.activeElement).map(pe.fromDom),FM=e=>XA(jc(e)).filter(n=>e.dom.contains(n.dom)),$M=(e,n)=>{const o=Yr(n)?$m(n).length:ra(n).length+1;return e>o?o:e<0?0:e},a7=e=>Mp.range(e.start,$M(e.soffset,e.start),e.finish,$M(e.foffset,e.finish)),HM=(e,n)=>!Zd(n.dom)&&(Rr(e,n)||ro(e,n)),JA=e=>n=>HM(e,n.start)&&HM(e,n.finish),BK=e=>e.inline||pn.browser.isFirefox(),i7=e=>Mp.range(pe.fromDom(e.startContainer),e.startOffset,pe.fromDom(e.endContainer),e.endOffset),VM=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?W.none():W.from(n.getRangeAt(0))).map(i7)},QA=e=>{const n=Fd(e);return VM(n.dom).filter(JA(e))},eO=(e,n)=>W.from(n).filter(JA(e)).map(a7),tO=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),W.some(n)}catch{return W.none()}},IC=e=>{const n=BK(e)?QA(pe.fromDom(e.getBody())):W.none();e.bookmark=n.isSome()?n:e.bookmark},UE=e=>(e.bookmark?e.bookmark:W.none()).bind(o=>eO(pe.fromDom(e.getBody()),o)).bind(tO),zM=e=>{UE(e).each(n=>e.selection.setRng(n))},UM={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},WM=(e,n)=>(so(n)||(n=0),setTimeout(e,n)),c7=(e,n)=>(so(n)||(n=0),setInterval(e,n)),$u={setEditorTimeout:(e,n,o)=>WM(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=c7(()=>{e.removed?clearInterval(r):n()},o);return r}},ZM=e=>e.type==="nodechange"&&e.selectionChange,jM=(e,n)=>{const o=()=>{n.throttle()};Ks.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Ks.DOM.unbind(document,"mouseup",o)})},qM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},GM=(e,n)=>{qM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{ZM(o)||IC(e)})},l7=e=>{const n=T1(()=>{IC(e)},0);e.on("init",()=>{e.inline&&jM(e,n),GM(e,n)}),e.on("remove",()=>{n.cancel()})};let M0;const oO=Ks.DOM,u7=e=>Wt(e)&&UM.isEditorUIElement(e),sO=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},WE=(e,n)=>{const o=F1(e);return oO.getParent(n,i=>u7(i)||(o?e.dom.is(i,o):!1))!==null},rO=e=>{try{const n=jc(pe.fromDom(e.getElement()));return XA(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},d7=(e,n)=>{const o=n.editor;l7(o);const r=(i,u)=>{if(Wv(i)&&i.inline!==!0){const m=pe.fromDom(i.getContainer());u(m,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;sO(rO(o))&&r(o,gl),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{$u.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!sO(rO(o))||i!==o)&&r(o,vu),!WE(o,rO(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),M0||(M0=i=>{const u=e.activeEditor;u&&Cm(i).each(m=>{const y=m;y.ownerDocument===document&&y!==document.body&&!WE(u,y)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},oO.bind(document,"focusin",M0))},ZE=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&M0&&(oO.unbind(document,"focusin",M0),M0=null)},KM=e=>{e.on("AddEditor",nt(d7,e)),e.on("RemoveEditor",nt(ZE,e))},f7=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),YM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,XM=e=>e.collapsed?W.from(Zm(e.startContainer,e.startOffset)).map(pe.fromDom):W.none(),m7=(e,n)=>XM(n).bind(o=>ox(o)?W.some(o):Rr(e,o)?W.none():W.some(e)),JM=(e,n)=>{m7(pe.fromDom(e.getBody()),n).bind(o=>_i(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},jE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},h7=e=>cb(e)||FM(e).isSome(),g7=e=>$e(e.iframeElement)&&cb(pe.fromDom(e.iframeElement)),QM=e=>{const n=e.getBody();return n&&h7(pe.fromDom(n))},eN=e=>{const n=jc(pe.fromDom(e.getElement()));return XA(n).filter(o=>!sO(o.dom)&&WE(e,o.dom)).isSome()},Ag=e=>e.inline?QM(e):g7(e),tN=e=>Ag(e)||eN(e),p7=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const i=m=>{UE(m).each(y=>{m.selection.setRng(y),r=y})};!Ag(e)&&e.hasEditableRoot()&&i(e);const u=f7(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){YM(e,u)||jE(o),jE(u),e.hasEditableRoot()||i(e),JM(e,r),LC(e);return}e.inline||(pn.browser.isOpera()||jE(o),e.getWin().focus()),(pn.browser.isFirefox()||e.inline)&&(jE(o),JM(e,r)),LC(e)},LC=e=>e.editorManager.setActive(e),b7=(e,n)=>{e.removed||(n?LC(e):p7(e))},aO=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),iO=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,m=o?n.startOffset:n.endOffset;return W.from(u).map(pe.fromDom).map(y=>!r||!n.collapsed?Ni(y,i(y,m)).getOr(y):y).bind(y=>Fa(y)?W.some(y):$a(y).filter(Fa)).map(y=>y.dom).getOr(e)},cO=(e,n,o=!1)=>iO(e,n,!0,o,(r,i)=>Math.min(Hd(r),i)),nN=(e,n,o=!1)=>iO(e,n,!1,o,(r,i)=>i>0?i-1:i),oN=(e,n)=>{const o=e;for(;e&&pt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},v7=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let m=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(m=o.childNodes[i]),pt(o)&&pt(r)&&(o.length===i?o=oN(o.nextSibling,!0):o=o.parentNode,u===0?r=oN(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(m=o)));const y=pt(m)?m.parentNode:m;return qc(y)?y:e},y7=(e,n,o,r)=>{const i=[],u=e.getRoot(),m=e.getParent(o||cO(u,n,n.collapsed),e.isBlock),y=e.getParent(r||nN(u,n,n.collapsed),e.isBlock);if(m&&m!==u&&i.push(m),m&&y&&m!==y){let S;const O=new Ha(m,u);for(;(S=O.next())&&S!==y;)e.isBlock(S)&&i.push(S)}return y&&m!==y&&y!==u&&i.push(y),i},qE=(e,n,o)=>W.from(n).bind(r=>W.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),m=e.createRng();return m.setStart(i,u),m.setEnd(i,u+1),o&&(gC(e,m,r,!0),gC(e,m,r,!1)),m})),GE=(e,n)=>dt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),sN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},FC=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let m=e.parent;m&&m!==n;m=m.parent)if(u=m[i],u)return u}},rN=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Tc(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},aN=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class cl{static create(n,o){const r=new cl(n,sN[n]||1);return o&&At(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ce(n))return $e(n)&&At(n,(u,m)=>{r.attr(m,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new cl(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,m=r.length;u<m;u++){const y=r[u];y.name!=="id"&&(i[i.length]={name:y.name,value:y.value},i.map[y.name]=y.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=FC(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=FC(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let m=u.firstChild;if(aN(u))return!1;if(m)do{if(m.type===1){if(m.attr("data-mce-bogus"))continue;if(n[m.name]||aN(m))return!1}if(m.type===8||m.type===3&&!rN(m)||m.type===3&&m.parent&&o[m.parent.name]&&Tc((i=m.value)!==null&&i!==void 0?i:"")||r&&r(m))return!1}while(m=FC(m,u));return!0}walk(n){return FC(this,null,n)}}const w7=yt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),iN=e=>ce(e.nodeValue)&&e.nodeValue.includes(Ma),cN=e=>`${e.length===0?"":`${dt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,C7=(e,n)=>n.querySelectorAll(cN(e)),lN=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>iN(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),uN=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(iN(n)){const o=n.parentNode;return o&&Sn(w7,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),S7=e=>lN(e).nextNode()!==null,x7=e=>uN(e).nextNode()!==null,E7=(e,n)=>n.querySelector(cN(e))!==null,_7=(e,n)=>{xe(C7(e,n),o=>{const r=pe.fromDom(o);ri(r,"data-mce-bogus")==="all"?gs(r):xe(e,i=>{pi(r,i)&&Cr(r,i)})})},$C=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},dN=M($C,lN),fN=M($C,uN),mN=(e,n)=>{const o=[{condition:nt(E7,n),action:nt(_7,n)},{condition:S7,action:dN},{condition:x7,action:fN}];let r=e,i=!1;return xe(o,({condition:u,action:m})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),m(r))}),r},hN=e=>{const n=ci(e,"[data-mce-bogus]");xe(n,o=>{ri(o,"data-mce-bogus")==="all"?gs(o):el(o)?(ii(o,pe.fromText(Gg)),gs(o)):_c(o)})},gN=e=>{const n=ci(e,"input");xe(n,o=>{Cr(o,"name")})},T7=(e,n)=>{const o=Si(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},k7=(e,n)=>{const o=e.getDoc(),r=jc(pe.fromDom(e.getBody())),i=pe.fromTag("div",o);js(i,"data-mce-bogus","all"),Yn(i,{position:"fixed",left:"-9999999px",top:"0"}),Eu(i,n.innerHTML),hN(i),gN(i);const u=Wg(r);rr(u,i);const m=ac(i.dom.innerText);return gs(i),m},A7=(e,n,o)=>{let r;return n.format==="raw"?r=yt.trim(ac(mN(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=k7(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=T7(e,e.serializer.serialize(o,n)),n.format!=="text"&&!mv(pe.fromDom(o))&&ce(r)?yt.trim(r):r},pN=(e,n)=>W.from(e.getBody()).fold(ct(n.format==="tree"?new cl("body",11):""),o=>A7(e,n,o)),bN=yt.makeMap,lO=e=>{const n=[];e=e||{};const o=e.indent,r=bN(e.indent_before||""),i=bN(e.indent_after||""),u=fd.getEncodeFunc(e.entity_encoding||"raw",e.entities),m=e.element_format!=="xhtml";return{start:(y,S,O)=>{if(o&&r[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}if(n.push("<",y),S)for(let L=0,F=S.length;L<F;L++){const V=S[L];n.push(" ",V.name,'="',u(V.value,!0),'"')}if(!O||m?n[n.length]=">":n[n.length]=" />",O&&o&&i[y]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}},end:y=>{let S;n.push("</",y,">"),o&&i[y]&&n.length>0&&(S=n[n.length-1],S.length>0&&S!==`
`&&n.push(`
`))},text:(y,S)=>{y.length>0&&(n[n.length]=S?y:u(y))},cdata:y=>{n.push("<![CDATA[",y,"]]>")},comment:y=>{n.push("<!--",y,"-->")},pi:(y,S)=>{S?n.push("<?",y," ",u(S),"?>"):n.push("<?",y,"?>"),o&&n.push(`
`)},doctype:y=>{n.push("<!DOCTYPE",y,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Og=(e={},n=Kd())=>{const o=lO(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,m={3:S=>{var O;o.text((O=S.value)!==null&&O!==void 0?O:"",S.raw)},8:S=>{var O;o.comment((O=S.value)!==null&&O!==void 0?O:"")},7:S=>{o.pi(S.name,S.value)},10:S=>{var O;o.doctype((O=S.value)!==null&&O!==void 0?O:"")},4:S=>{var O;o.cdata((O=S.value)!==null&&O!==void 0?O:"")},11:S=>{let O=S;if(O=O.firstChild)do y(O);while(O=O.next)}};o.reset();const y=S=>{var O;const L=m[S.type];if(L)L(S);else{const F=S.name,V=F in n.getVoidElements();let Q=S.attributes;if(u&&Q&&Q.length>1){const re=[];re.map={};const ee=n.getElementRule(S.name);if(ee){for(let le=0,we=ee.attributesOrder.length;le<we;le++){const De=ee.attributesOrder[le];if(De in Q.map){const Oe=Q.map[De];re.map[De]=Oe,re.push({name:De,value:Oe})}}for(let le=0,we=Q.length;le<we;le++){const De=Q[le].name;if(!(De in re.map)){const Oe=Q.map[De];re.map[De]=Oe,re.push({name:De,value:Oe})}}Q=re}}if(o.start(F,Q,V),Mr(F))ce(S.value)&&o.text(S.value,!0),o.end(F);else if(!V){let re=S.firstChild;if(re){(F==="pre"||F==="textarea")&&re.type===3&&((O=re.value)===null||O===void 0?void 0:O[0])===`
`&&o.text(`
`,!0);do y(re);while(re=re.next)}o.end(F)}}};return i.type===1&&!e.inner?y(i):i.type===3?m[3](i):m[11](i),o.getContent()}}},vN=new Set;xe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{vN.add(n)});const yN=new Set;xe(["background-color"],n=>{yN.add(n)});const wN=["font","text-decoration","text-emphasis"],O7=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),N0=(e,n)=>Go(O7(e,n)),D7=e=>vN.has(e),R7=e=>yN.has(e),CN=(e,n)=>kt(N0(e,n),o=>D7(o)),M7=(e,n)=>CN(e,n)&&kt(N0(e,n),o=>R7(o)),N7=e=>Zt(e,n=>kt(wN,o=>es(n,o))),P7=(e,n,o)=>{const r=N0(e,n),i=N0(e,o),u=m=>{var y,S;const O=(y=e.getStyle(n,m))!==null&&y!==void 0?y:"",L=(S=e.getStyle(o,m))!==null&&S!==void 0?S:"";return xo(O)&&xo(L)&&O!==L};return kt(r,m=>{const y=S=>kt(S,O=>O===m);if(!y(i)&&y(wN)){const S=N7(i);return kt(S,u)}else return u(m)})},SN=(e,n,o)=>W.from(o.container()).filter(pt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),uO=nt(SN,!0,ch),dO=nt(SN,!1,ch),B7=e=>{const n=e.container();return pt(n)&&(n.data.length===0||vw(n.data)&&Iu.isBookmarkNode(n.parentNode))},Bp=(e,n)=>o=>tC(e?0:-1,o).filter(n).isSome(),xN=e=>Xg(e)&&Wr(pe.fromDom(e),"display")==="block",EN=e=>Fo(e)&&!qh(e),I7=Bp(!0,xN),En=Bp(!1,xN),P0=Bp(!0,wi),B0=Bp(!1,wi),_N=Bp(!0,ql),HC=Bp(!1,ql),Ip=Bp(!0,EN),Lp=Bp(!1,EN),L7=e=>e.slice(0,-1),F7=(e,n,o)=>Rr(n,e)?L7(zl(e,r=>o(r)||ro(r,n))):[],TN=(e,n)=>F7(e,n,tt),cf=(e,n)=>[e].concat(TN(e,n)),KE=(e,n,o)=>iC(e,n,o,B7),IK=e=>n=>e.isBlock(yo(n)),kN=(e,n,o)=>Po(cf(pe.fromDom(n.container()),e),IK(o)),zn=(e,n,o,r)=>KE(e,n.dom,o).forall(i=>kN(n,o,r).fold(()=>!El(i,o,n.dom),u=>!El(i,o,n.dom)&&Rr(u,pe.fromDom(i.container())))),AN=(e,n,o,r)=>kN(n,o,r).fold(()=>KE(e,n.dom,o).forall(i=>!El(i,o,n.dom)),i=>KE(e,i.dom,o).isNone()),no=nt(AN,!1),fO=nt(AN,!0),LK=nt(zn,!1),FK=nt(zn,!0),$7=e=>Jv(e).exists(el),mO=(e,n,o,r)=>{const i=Zt(cf(pe.fromDom(o.container()),n),m=>r.isBlock(yo(m))),u=fo(i).getOr(n);return Pc(e,u.dom,o).filter($7)},ON=(e,n,o)=>Jv(n).exists(el)||mO(!0,e,n,o).isSome(),YE=(e,n,o)=>dE(n).exists(el)||mO(!1,e,n,o).isSome(),DN=nt(mO,!1),Fn=nt(mO,!0),RN=e=>Xe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),MN=(e,n,o)=>{const r=Zt(cf(pe.fromDom(n.container()),e),i=>o.isBlock(yo(i)));return fo(r).getOr(e)},NN=(e,n,o)=>RN(n)?dO(n):dO(n)||rl(MN(e,n,o).dom,n).exists(dO),I0=(e,n,o)=>RN(n)?uO(n):uO(n)||Bc(MN(e,n,o).dom,n).exists(uO),PN=e=>et(["pre","pre-wrap"],e),hO=e=>Jv(e).bind(n=>Qs(n,Fa)).exists(n=>PN(Wr(n,"white-space"))),H7=(e,n)=>rl(e.dom,n).isNone(),V7=(e,n)=>Bc(e.dom,n).isNone(),BN=(e,n,o)=>H7(e,n)||V7(e,n)||no(e,n,o)||fO(e,n,o)||YE(e,n,o)||ON(e,n,o),z7=e=>$e(e)&&Fo(e)&&aE(e),U7=(e,n)=>o=>z7(new Ha(o,e)[n]()),$K=(e,n)=>{const o=Bc(e.dom,n).getOr(n),r=U7(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},W7=(e,n)=>{const o=rl(e.dom,n).getOr(n),r=U7(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},IN=(e,n,o)=>hO(n)?!1:BN(e,n,o)||NN(e,n,o)||I0(e,n,o),VC=(e,n,o)=>hO(n)?!1:no(e,n,o)||LK(e,n,o)||YE(e,n,o)||NN(e,n,o)||W7(e,n),Z7=e=>{const n=e.container(),o=e.offset();return pt(n)&&o<n.data.length?Xe(n,o+1):e},L0=(e,n,o)=>hO(n)?!1:fO(e,n,o)||FK(e,n,o)||ON(e,n,o)||I0(e,n,o)||$K(e,n),gO=(e,n,o)=>VC(e,n,o)||L0(e,Z7(n),o),lo=(e,n)=>bg(e.charAt(n)),pO=(e,n)=>ch(e.charAt(n)),XE=e=>{const n=e.container();return pt(n)&&Ko(n.data,Xr)},LN=e=>{const n=e.split("");return dt(n,(o,r)=>bg(o)&&r>0&&r<n.length-1&&dC(n[r-1])&&dC(n[r+1])?" ":o).join("")},bO=(e,n,o,r)=>{const i=n.data,u=Xe(n,0);return!o&&lo(i,0)&&!gO(e,u,r)?(n.data=" "+i.slice(1),!0):o&&pO(i,0)&&VC(e,u,r)?(n.data=Xr+i.slice(1),!0):!1},FN=e=>{const n=e.data,o=LN(n);return o!==n?(e.data=o,!0):!1},vO=(e,n,o,r)=>{const i=n.data,u=Xe(n,i.length-1);return!o&&lo(i,i.length-1)&&!gO(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&pO(i,i.length-1)&&L0(e,u,r)?(n.data=i.slice(0,-1)+Xr,!0):!1},$N=(e,n,o)=>{const r=n.container();if(!pt(r))return W.none();if(XE(n)){const i=bO(e,r,!1,o)||FN(r)||vO(e,r,!1,o);return lr(i,n)}else if(gO(e,n,o)){const i=bO(e,r,!0,o)||vO(e,r,!0,o);return lr(i,n)}else return W.none()},j7=e=>{const n=pe.fromDom(e.getBody());e.selection.isCollapsed()&&$N(n,Xe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},yO=(e,n,o,r)=>{if(o===0)return;const i=pe.fromDom(e),u=qs(i,O=>r.isBlock(yo(O))).getOr(i),m=e.data.slice(n,n+o),y=n+o>=e.data.length&&L0(u,Xe(e,e.data.length),r),S=n===0&&VC(u,Xe(e,0),r);e.replaceData(n,o,bl(m,4,S,y))},JE=(e,n,o)=>{const r=e.data.slice(n),i=r.length-Ji(r).length;yO(e,n,i,o)},wO=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-Ri(r).length;yO(e,n-i,i,o)},CO=(e,n,o,r,i=!0)=>{const u=Ri(e.data).length,m=i?e:n,y=i?n:e;return i?m.appendData(y.data):m.insertData(0,y.data),gs(pe.fromDom(y)),r&&JE(m,u,o),m},q7=(e,n)=>{const o=e.container(),r=e.offset();return!Xe.isTextPosition(e)&&o===n.parentNode&&r>Xe.before(n).offset()},G7=(e,n)=>q7(n,e)?Xe(n.container(),n.offset()-1):n,K7=e=>pt(e)?Xe(e,0):Xe.before(e),Y7=e=>pt(e)?Xe(e,e.data.length):Xe.after(e),HN=e=>wl(e.previousSibling)?W.some(Y7(e.previousSibling)):e.previousSibling?tu(e.previousSibling):W.none(),QE=e=>wl(e.nextSibling)?W.some(K7(e.nextSibling)):e.nextSibling?_i(e.nextSibling):W.none(),SO=(e,n)=>W.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>rl(e,Xe.before(o))).orThunk(()=>Bc(e,Xe.after(n))),X7=(e,n)=>Bc(e,Xe.after(n)).orThunk(()=>rl(e,Xe.before(n))),J7=(e,n)=>HN(n).orThunk(()=>QE(n)).orThunk(()=>SO(e,n)),Q7=(e,n)=>QE(n).orThunk(()=>HN(n)).orThunk(()=>X7(e,n)),e8=(e,n,o)=>e?Q7(n,o):J7(n,o),t8=(e,n,o)=>e8(e,n,o).map(nt(G7,o)),VN=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},n8=e=>n=>n.dom===e,o8=(e,n)=>n&&Sn(e.schema.getBlockElements(),yo(n)),zN=(e,n,o)=>{if(Bs(e,n)){const r=pe.fromHtml('<br data-mce-bogus="1">');return o?xe(ra(n),i=>{SC(i)||gs(i)}):ad(n),rr(n,r),W.some(Xe.before(r.dom))}else return W.none()},s8=(e,n,o,r)=>{const i=Ul(e).filter(Yr),u=bi(e).filter(Yr);return gs(e),oi(i,u,n,(m,y,S)=>{const O=m.dom,L=y.dom,F=O.data.length;return CO(O,L,o,r),S.container()===L?Xe(O,F):S}).orThunk(()=>(r&&(i.each(m=>wO(m.dom,m.dom.length,o)),u.each(m=>JE(m.dom,0,o))),n))},r8=(e,n)=>Sn(e.schema.getTextInlineElements(),yo(n)),wd=(e,n,o,r=!0,i=!1)=>{const u=t8(n,e.getBody(),o.dom),m=qs(o,nt(o8,e),n8(e.getBody())),y=s8(o,u,e.schema,r8(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):m.bind(S=>zN(e.schema,S,i)).fold(()=>{r&&VN(e,n,y)},S=>{r&&VN(e,n,W.some(S))})},a8=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,UN=e=>a8.test(e),lb=(e,n)=>pl(pe.fromDom(n),Nx(e))&&!Ou(e.schema,n)&&e.dom.isEditable(n),WN=e=>{var n;return Ks.DOM.getStyle(e,"direction",!0)==="rtl"||UN((n=e.textContent)!==null&&n!==void 0?n:"")},ZN=(e,n,o)=>Zt(Ks.DOM.getParents(o.container(),"*",n),e),Dg=(e,n,o)=>{const r=ZN(e,n,o);return W.from(r[r.length-1])},jN=(e,n,o)=>{const r=rh(n,e),i=rh(o,e);return $e(r)&&r===i},qN=e=>yw(e)||dp(e),Zr=(e,n)=>{const o=n.container(),r=n.offset();return e?Wf(o)?pt(o.nextSibling)?Xe(o.nextSibling,0):Xe.after(o):yw(n)?Xe(o,r+1):n:Wf(o)?pt(o.previousSibling)?Xe(o.previousSibling,o.previousSibling.data.length):Xe.before(o):dp(n)?Xe(o,r-1):n},GN=nt(Zr,!0),KN=nt(Zr,!1),YN=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},i8=e=>{e.execCommand("delete")},e_=e=>YN(e,"Delete"),Fp=e=>YN(e,"ForwardDelete"),c8=e=>n=>Os($a(n),e,ro),l8=e=>Mu(e)||ag(e),nr=(e,n)=>Rr(e,n)?Qs(n,l8,c8(e)):W.none(),F0=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},ub=(e,n,o)=>Xn(_i(o),tu(o),(r,i)=>{const u=Zr(!0,r),m=Zr(!1,i),y=Zr(!1,n);return e?Bc(o,y).exists(S=>S.isEqual(m)&&n.isEqual(u)):rl(o,y).exists(S=>S.isEqual(u)&&n.isEqual(m))}).getOr(!0),XN=e=>(h1(e)?Ul(e):td(e)).bind(XN).orThunk(()=>W.some(e)),db=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=XN(o).getOr(o),m=pe.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(m.dom===e.getBody()?F0(e,r):Bs(e.schema,m,{checkRootAsContent:!1})&&(eu(m),r&&e.selection.setCursorLocation(m.dom,0)),!ro(o,m)){const y=Os($a(m),o)?[]:Df(m);xe(y.concat(ra(o)),S=>{!ro(S,m)&&!Rr(S,m)&&Bs(e.schema,S)&&gs(S)})}},Cd=e=>n=>ro(e,n),fb=e=>ci(e,"td,th"),Ns=(e,n)=>X1(pe.fromDom(e),n),zC=e=>Xn(e.startTable,e.endTable,(n,o)=>{const r=qg(n,u=>ro(u,o)),i=qg(o,u=>ro(u,n));return!r&&!i?e:{...e,startTable:r?W.none():e.startTable,endTable:i?W.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),JN=e=>zC(e),QN=(e,n)=>{const o=Ns(e.startContainer,n),r=Ns(e.endContainer,n),i=o.isSome(),u=r.isSome(),m=Xn(o,r,ro).getOr(!1);return JN({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:m,isMultiTable:!m&&i&&u})},UC=(e,n)=>({start:e,end:n}),xO=(e,n,o)=>({rng:e,table:n,cells:o}),mb=bd.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),$0=(e,n)=>Wl(pe.fromDom(e),"td,th",n),WC=e=>!ro(e.start,e.end),t_=(e,n)=>X1(e.start,n).bind(o=>X1(e.end,n).bind(r=>lr(ro(o,r),o))),eP=(e,n)=>!WC(e)&&t_(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),tP=(e,n)=>{const o=$0(e.startContainer,n),r=$0(e.endContainer,n);return Xn(o,r,UC)},nP=e=>n=>X1(n,e).bind(o=>cs(fb(o)).map(r=>UC(n,r))),oP=e=>n=>X1(n,e).bind(o=>fo(fb(o)).map(r=>UC(r,n))),n_=e=>n=>t_(n,e).map(o=>xO(n,o,fb(o))),hb=(e,n,o,r)=>{if(o.collapsed||!e.forall(WC))return W.none();if(n.isSameTable){const i=e.bind(n_(r));return W.some({start:i,end:i})}else{const i=$0(o.startContainer,r),u=$0(o.endContainer,r),m=i.bind(nP(r)).bind(n_(r)),y=u.bind(oP(r)).bind(n_(r));return W.some({start:m,end:y})}},EO=(e,n)=>Is(e,o=>ro(o,n)),ZC=e=>Xn(EO(e.cells,e.rng.start),EO(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),u8=(e,n,o)=>e.exists(r=>eP(r,o)&&l0(r.start,n)),sP=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},rP=(e,n,o,r)=>hb(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,m=ZC(i).getOr([]);if(u&&i.cells.length===m.length)return W.some(mb.fullTable(i.table));if(m.length>0){if(u)return W.some(mb.partialTable(m,W.none()));{const y=sP(o,n);return W.some(mb.partialTable(m,W.some({...n,rng:y})))}}else return W.none()}),aP=(e,n,o,r)=>hb(e,n,o,r).bind(({start:i,end:u})=>{const m=i.bind(ZC).getOr([]),y=u.bind(ZC).getOr([]);if(m.length>0&&y.length>0){const S=sP(o,n);return W.some(mb.multiTable(m,y,S))}else return W.none()}),iP=(e,n)=>{const o=Cd(e),r=tP(n,o),i=QN(n,o);return u8(r,n,o)?r.map(u=>mb.singleCellTable(n,u.start)):i.isMultiTable?aP(r,i,n,o):rP(r,i,n,o)},jC=e=>xe(e,n=>{Cr(n,"contenteditable"),eu(n)}),cP=(e,n)=>W.from(e.dom.getParent(n,e.dom.isBlock)).map(pe.fromDom),lP=(e,n,o)=>{o.each(r=>{n?gs(r):(eu(r),e.selection.setCursorLocation(r.dom,0))})},o_=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),s_(e,i,n,!1).each(u=>u())},_O=e=>{const n=kp(e),o=pe.fromDom(e.selection.getNode());Gh(o.dom)&&Bs(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&kt(n,r=>ro(r,o))&&js(o,"data-mce-selected","1")},TO=(e,n,o)=>W.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:m})=>{const y=cP(e,m?u.endContainer:u.startContainer);u.deleteContents(),lP(e,m,y.filter(nt(Bs,e.schema)));const S=m?n[0]:n[n.length-1];return o_(e,S,r,m),Bs(e.schema,S)?W.none():W.some(m?n.slice(1):n.slice(0,-1))}).getOr(n);jC(i),_O(e)}),uP=(e,n,o,r)=>W.some(()=>{const i=e.selection.getRng(),u=n[0],m=o[o.length-1];o_(e,u,i,!0),o_(e,m,i,!1);const y=Bs(e.schema,u)?n:n.slice(1),S=Bs(e.schema,m)?o:o.slice(0,-1);jC(y.concat(S)),r.deleteContents(),_O(e)}),s_=(e,n,o,r=!0)=>W.some(()=>{db(e,n,o,r)}),dP=(e,n)=>W.some(()=>wd(e,!1,n)),fP=(e,n,o)=>iP(n,o).bind(r=>r.fold(nt(s_,e),nt(dP,e),nt(TO,e),nt(uP,e))),mP=(e,n)=>qC(e,n),kO=(e,n,o,r)=>r_(n,r).fold(()=>fP(e,n,o),i=>mP(e,i)),hP=(e,n,o)=>{const r=pe.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?TO(e,o,W.none()):kO(e,r,i,n)},AO=(e,n)=>Po(cf(n,e),D1),r_=(e,n)=>Po(cf(n,e),si("caption")),gP=(e,n,o,r,i)=>hg(o,e.getBody(),i).bind(u=>AO(n,pe.fromDom(u.getNode())).bind(m=>ro(m,r)?W.none():W.some(Pe))),qC=(e,n)=>W.some(()=>{eu(n),e.selection.setCursorLocation(n.dom,0)}),pP=(e,n,o,r)=>_i(e.dom).bind(i=>tu(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),OO=(e,n)=>qC(e,n),a_=(e,n,o)=>r_(e,pe.fromDom(o.getNode())).fold(()=>W.some(Pe),r=>lr(!ro(r,n),Pe)),DO=(e,n,o,r,i)=>hg(o,e.getBody(),i).fold(()=>W.some(Pe),u=>pP(r,o,i,u)?OO(e,r):a_(n,r,u)),i_=(e,n,o,r)=>{const i=Xe.fromRangeStart(e.selection.getRng());return AO(o,r).bind(u=>Bs(e.schema,u,{checkRootAsContent:!1})?qC(e,u):gP(e,o,n,u,i))},bP=(e,n,o,r)=>{const i=Xe.fromRangeStart(e.selection.getRng());return Bs(e.schema,r)?qC(e,r):DO(e,o,n,r,i)},GC=(e,n)=>e?_N(n):HC(n),RO=(e,n)=>{const o=Xe.fromRangeStart(e.selection.getRng());return GC(n,o)||Pc(n,e.getBody(),o).exists(r=>GC(n,r))},KC=(e,n,o)=>{const r=pe.fromDom(e.getBody());return r_(r,o).fold(()=>i_(e,n,r,o).orThunk(()=>lr(RO(e,n),Pe)),i=>bP(e,n,r,i))},YC=(e,n)=>{const o=pe.fromDom(e.selection.getStart(!0)),r=kp(e);return e.selection.isCollapsed()&&r.length===0?KC(e,n,o):hP(e,o,r)},$p=(e,n)=>{let o=n;for(;o&&o!==e;){if(rt(o)||Fo(o))return o;o=o.parentNode}return null},H0=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],MO=yt.each,XC=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,m)=>{if(u.nodeName!==m.nodeName||u.nodeType!==m.nodeType)return!1;const y=O=>{const L={};return MO(n.getAttribs(O),F=>{const V=F.nodeName.toLowerCase();V!=="style"&&!i(V)&&(L[V]=n.getAttrib(O,V))}),L},S=(O,L)=>{for(const F in O)if(Sn(O,F)){const V=L[F];if(Pn(V)||O[F]!==V)return!1;delete L[F]}for(const F in L)if(Sn(L,F))return!1;return!0};return Wt(u)&&Wt(m)&&(!S(y(u),y(m))||!S(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(m,"style"))))?!1:!_l(u)&&!_l(m)},i=u=>kt(H0,m=>es(u,m))||o.has(u);return{compare:r,isAttributeInternal:i}},gb=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Hp=e=>e.name==="summary",vP=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},yP=(e,n,o,r)=>{const i=o.name;for(let u=0,m=e.length;u<m;u++){const y=e[u];if(y.name===i){const S=r.nodes[i];S?S.nodes.push(o):r.nodes[i]={filter:y,nodes:[o]}}}if(o.attributes)for(let u=0,m=n.length;u<m;u++){const y=n[u],S=y.name;if(S in o.attributes.map){const O=r.attributes[S];O?O.nodes.push(o):r.attributes[S]={filter:y,nodes:[o]}}}},d8=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&vP(o,i=>{yP(e,n,i,r)}),r},NO=(e,n)=>{const o=(r,i)=>{At(r,u=>{const m=_r(u.nodes);xe(u.filter.callbacks,y=>{for(let S=m.length-1;S>=0;S--){const O=m[S];(!(i?O.attr(u.filter.name)!==void 0:O.name===u.filter.name)||Qt(O.parent))&&m.splice(S,1)}m.length>0&&y(m,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},PO=(e,n,o,r={})=>{const i=d8(e,n,o);NO(i,r)},BO=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new cl("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new cl("#text",3)).value=Xr},f8=e=>{var n;return Rg(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Xr},Rg=(e,n)=>{const o=e==null?void 0:e.firstChild;return $e(o)&&o===e.lastChild&&o.name===n},pb=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},c_=(e,n,o,r)=>r.isEmpty(n,o,i=>pb(e,i)),Vi=(e,n)=>$e(e)&&(n(e)||e.name==="br"),m8=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return W.from(n)},IO=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&IO(i,n,o);e.unwrap()}},nm=(e,n,o,r=Pe)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=yt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),S=new Set,O=L=>L!==o&&!y[L.name];for(let L=0;L<e.length;L++){const F=e[L];let V,Q,re;if(!F.parent||S.has(F))continue;if(i[F.name]&&F.parent.name==="li"){let le=F.next;for(;le&&i[le.name];){le.name="li",S.add(le),F.parent.insert(le,F.parent);le=le.next}F.unwrap();continue}const ee=[F];for(V=F.parent;V&&!n.isValidChild(V.name,F.name)&&O(V);V=V.parent)ee.push(V);if(V&&ee.length>1)if(wP(n,F,V))IO(F,n);else{ee.reverse(),Q=ee[0].clone(),r(Q);let le=Q;for(let we=0;we<ee.length-1;we++){n.isValidChild(le.name,ee[we].name)&&we>0?(re=ee[we].clone(),r(re),le.append(re)):re=le;for(let De=ee[we].firstChild;De&&De!==ee[we+1];){const Oe=De.next;re.append(De),De=Oe}le=re}c_(n,u,m,Q)?V.insert(F,ee[0],!0):(V.insert(Q,ee[0],!0),V.insert(F,Q)),V=ee[0],(c_(n,u,m,V)||Rg(V,"br"))&&V.empty().remove()}else if(F.parent){if(F.name==="li"){let le=F.prev;if(le&&(le.name==="ul"||le.name==="ol")){le.append(F);continue}if(le=F.next,le&&(le.name==="ul"||le.name==="ol")&&le.firstChild){le.insert(F,le.firstChild,!0);continue}const we=new cl("ul",1);r(we),F.wrap(we);continue}if(n.isValidChild(F.parent.name,"div")&&n.isValidChild("div",F.name)){const le=new cl("div",1);r(le),F.wrap(le)}else IO(F,n)}}},Jo=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},wP=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&Jo(o,"a")?!0:Hp(o)&&gb(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,h8=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},g8=e=>{const n=Xe.fromRangeStart(e),o=Xe.fromRangeEnd(e),r=e.commonAncestorContainer;return Pc(!1,r,o).map(i=>!El(n,o,r)&&El(n,i,r)?h8(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},Vs=e=>e.collapsed?e:g8(e),CP=e=>$e(e.firstChild)&&e.firstChild===e.lastChild,JC=e=>e.name==="br"||e.value===Xr,QC=(e,n)=>e.getBlockElements()[n.name]&&CP(n)&&JC(n.firstChild),e2=(e,n)=>{const o=e.getNonEmptyElements();return $e(n)&&(n.isEmpty(o)||QC(e,n))},t2=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),e2(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},SP=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},HK=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return SP(i)},VK=e=>{var n;return Zt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},zK=e=>e.data===Xr||Lo(e),UK=e=>$e(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&zK(e.firstChild),p8=e=>!e.firstChild||UK(e),WK=e=>e.length>0&&p8(e[e.length-1])?e.slice(0,-1):e,LO=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},b8=(e,n)=>!!LO(e,n),ZK=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},v8=(e,n)=>{const o=Xe.before(e),i=yd(n).next(o);return i?i.toRange():null},Ir=(e,n)=>{const o=Xe.after(e),i=yd(n).prev(o);return i?i.toRange():null},xP=(e,n,o,r)=>{const i=ZK(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),yt.each(n,m=>{u.insertBefore(m,e)}),u.insertBefore(i[1],e),u.removeChild(e)),Ir(n[n.length-1],o)},EP=(e,n,o)=>{const r=e.parentNode;return r&&yt.each(n,i=>{r.insertBefore(i,e)}),v8(e,o)},y8=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),Ir(n[0],o)),w8=(e,n,o,r)=>{const i=HK(n,e,r),u=LO(n,o.startContainer),m=WK(VK(i.firstChild)),y=1,S=2,O=n.getRoot(),L=F=>{const V=Xe.fromRangeStart(o),Q=yd(n.getRoot()),re=F===y?Q.prev(V):Q.next(V),ee=re==null?void 0:re.getNode();return ee?LO(n,ee)!==u:!0};return u?L(y)?EP(u,m,O):L(S)?y8(u,m,O,n):xP(u,m,O,o):null},C8=["pre"],au=(e,n,o,r)=>{var i;const u=n.firstChild,m=n.lastChild,y=m.attr("data-mce-type")==="bookmark"?m.prev:m,S=u===y,O=et(C8,u.name);if(S&&O){const L=u.attr("contenteditable")!=="false",F=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,V=W.from($p(r,o)).forall(rt);return L&&F&&V}else return!1},Sd=Gh,S8=(e,n,o)=>{if($e(o)){const r=e.getParent(n.endContainer,Sd);return o===r&&l0(pe.fromDom(o),n)}else return!1},FO=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const i=o.firstChild,u=o.lastChild;!i||i===u&&i.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},$O=(e,n,o)=>{W.from(e.getParent(n,"td,th")).map(pe.fromDom).each(r=>hv(r,o))},x8=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=XC(e),m="*[data-mce-fragment]",y=r.select(m);yt.each(y,S=>{const O=V=>$e(o[V.nodeName.toLowerCase()]),L=V=>V.childNodes.length===1;if((V=>!(CN(r,V)||M7(r,V)))(S)&&O(S)&&L(S)){const V=N0(r,S),Q=(we,De)=>bs(we,Oe=>et(De,Oe)),re=we=>L(S)&&r.is(we,m)&&O(we)&&(we.nodeName===S.nodeName&&Q(V,N0(r,we))||re(we.children[0])),ee=we=>$e(we)&&we!==i&&(u.compare(S,we)||ee(we.parentElement)),le=we=>$e(we)&&we!==i&&r.is(we,m)&&(P7(r,S,we)||le(we.parentElement));(re(S.children[0])||ee(S.parentElement)&&!le(S.parentElement))&&r.remove(S,!0)}})}},E8=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},n2=e=>{yt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},l_=e=>!!e.getAttribute("data-mce-fragment"),HO=(e,n)=>$e(n)&&!e.schema.getVoidElements()[n.nodeName],_8=(e,n)=>{var o,r,i;let u;const m=e.dom,y=e.selection;if(!n)return;y.scrollIntoView(n);const S=$p(e.getBody(),n);if(S&&m.getContentEditable(S)==="false"){m.remove(n),y.select(S);return}let O=m.createRng();const L=n.previousSibling;if(pt(L)){O.setStart(L,(r=(o=L.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Q=n.nextSibling;pt(Q)&&(L.appendData(Q.data),(i=Q.parentNode)===null||i===void 0||i.removeChild(Q))}else O.setStartBefore(n),O.setEndBefore(n);const F=Q=>{let re=Xe.fromRangeStart(Q);return re=yd(e.getBody()).next(re),re==null?void 0:re.toRange()},V=m.getParent(n,m.isBlock);if(m.remove(n),V&&m.isEmpty(V)){const Q=Sd(V);ad(pe.fromDom(V)),O.setStart(V,0),O.setEnd(V,0),!Q&&!l_(V)&&(u=F(O))?(O=u,m.remove(V)):m.add(V,m.create("br",Q?{}:{"data-mce-bogus":"1"}))}y.setRng(O)},om=e=>{const n=e.dom,o=Vs(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Sd);S8(n,o,r)?s_(e,o,pe.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&pt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},T8=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return W.some(n);return W.none()},k8=(e,n,o)=>{var r;return kt(o.children(),gb)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},xd=(e,n,o)=>{var r,i;const u=e.selection,m=e.dom,y=e.parser,S=o.merge,O=Og({validate:!0},e.schema),L='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=ac(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,L);let F=u.getRng();const V=F.startContainer,Q=e.getBody();V===Q&&u.isCollapsed()&&m.isBlock(Q.firstChild)&&HO(e,Q.firstChild)&&m.isEmpty(Q.firstChild)&&(F=m.createRng(),F.setStart(Q.firstChild,0),F.setEnd(Q.firstChild,0),u.setRng(F)),u.isCollapsed()||om(e);const re=u.getNode(),ee={context:re.nodeName.toLowerCase(),data:o.data,insert:!0},le=y.parse(n,ee);if(o.paste===!0&&t2(e.schema,le)&&b8(m,re))return F=w8(O,m,u.getRng(),le),F&&u.setRng(F),n;o.paste===!0&&au(m,le,re,e.getBody())&&((r=le.firstChild)===null||r===void 0||r.unwrap()),E8(le);let we=le.lastChild;if(we&&we.attr("id")==="mce_marker"){const De=we;for(we=we.prev;we;we=we.walk(!0))if(we.type===3||!m.isBlock(we.name)){we.parent&&e.schema.isValidChild(we.parent.name,"span")&&we.parent.insert(De,we,we.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(re),!ee.invalid&&!k8(m,re,le))n=O.serialize(le),FO(e,n,re);else{e.selection.setContent(L);let De=u.getNode(),Oe;const He=e.getBody();for(Tm(De)?De=Oe=He:Oe=De;Oe&&Oe!==He;)De=Oe,Oe=Oe.parentNode;n=De===He?He.innerHTML:m.getOuterHTML(De);const ft=y.parse(n),Rt=T8(ft),Yt=Rt.bind(m8).getOr(ft);Rt.each(an=>an.replace(le));const Je=le.children(),Ue=(i=le.parent)!==null&&i!==void 0?i:ft;le.unwrap();const ut=Zt(Je,an=>wP(e.schema,an,Ue));nm(ut,e.schema,Yt),PO(y.getNodeFilters(),y.getAttributeFilters(),ft),n=O.serialize(ft),De===He?m.setHTML(He,n):m.setOuterHTML(De,n)}return x8(e,S),_8(e,m.get("mce_marker")),n2(e.getBody()),$O(m,u.getStart(),e.schema),Rc(e.schema,e.getBody(),u.getStart()),n},Vp=e=>e instanceof cl,lf=e=>{Ag(e)&&_i(e.getBody()).each(n=>{const o=n.getNode(),r=ql(o)?_i(o).getOr(n):n;e.selection.setRng(r.toRange())})},VO=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&lf(e)},Es=(e,n,o,r)=>{if(o=ac(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=Si(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,Jm(e),o)):o||(o=i),VO(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Og({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=mv(pe.fromDom(n))?o:yt.trim(o);return VO(e,i,r.no_selection),{content:i,html:i}}},V0=(e,n,o,r)=>{PO(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Og({validate:!1},e.schema).serialize(o),u=ac(mv(pe.fromDom(n))?i:yt.trim(i));return VO(e,u,r.no_selection),{content:o,html:u}},u_=(e,n,o)=>W.from(e.getBody()).map(r=>Vp(n)?V0(e,r,n,o):Es(e,r,n,o)).getOr({content:n,html:Vp(o.content)?"":o.content}),zO=e=>ve(e)?e:tt,UO=(e,n,o)=>{let r=e.dom;const i=zO(o);for(;r.parentNode;){r=r.parentNode;const u=pe.fromDom(r),m=n(u);if(m.isSome())return m;if(i(u))break}return W.none()},o2=(e,n,o)=>{const r=n(e),i=zO(o);return r.orThunk(()=>i(e)?W.none():UO(e,n,i))},WO=wg,d_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(ou(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},ZO=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const m=e.dom.getParent(n,y=>d_(e,y,o)?!0:y.parentNode===u||!!uf(e,y,o,r,!0));return!!uf(e,m,o,r,i)},s2=(e,n,o)=>Wa(o)&&WO(n,o.inline)||Qf(o)&&WO(n,o.block)?!0:ou(o)?Wt(n)&&e.is(n,o.selector):!1,jO=(e,n,o,r,i,u)=>{const m=o[r],y=r==="attributes";if(ve(o.onmatch))return o.onmatch(n,o,r);if(m){if(dl(m)){for(let S=0;S<m.length;S++)if(y?e.getAttrib(n,m[S]):J1(e,n,m[S]))return!0}else for(const S in m)if(Sn(m,S)){const O=y?e.getAttrib(n,S):J1(e,n,S),L=Jf(m[S],u),F=Qt(O)||sa(O);if(F&&Qt(L))continue;if(i&&F&&!o.exact||(!i||o.exact)&&!WO(O,CE(L,S)))return!1}}return!0},uf=(e,n,o,r,i)=>{const u=e.formatter.get(o),m=e.dom;if(u&&Wt(n))for(let y=0;y<u.length;y++){const S=u[y];if(s2(e.dom,n,S)&&jO(m,n,S,"attributes",i,r)&&jO(m,n,S,"styles",i,r)){const O=S.classes;if(O){for(let L=0;L<O.length;L++)if(!e.dom.hasClass(n,Jf(O[L],r)))return}return S}}},f_=(e,n,o,r,i)=>{if(r)return ZO(e,r,n,o,i);if(r=e.selection.getNode(),ZO(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&ZO(e,u,n,o,i))},m_=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,m=>{for(let y=0;y<n.length;y++){const S=n[y];!i[S]&&uf(e,m,S,o)&&(i[S]=!0,r.push(S))}},e.dom.getRoot()),r},A8=(e,n)=>{const o=i=>ro(i,pe.fromDom(e.getBody())),r=(i,u)=>uf(e,i.dom,u)?W.some(u):W.none();return W.from(e.selection.getStart(!0)).bind(i=>o2(pe.fromDom(i),u=>Oi(n,m=>r(u,m)),o)).getOrNull()},O8=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=b0(r,i);for(let m=o.length-1;m>=0;m--){const y=o[m];if(!ou(y))return!0;for(let S=u.length-1;S>=0;S--)if(r.is(u[S],y.selector))return!0}}return!1},D8=(e,n,o)=>Mo(o,(r,i)=>{const u=wC(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),r2=Ma,R8=(e,n)=>e.importNode(n,!0),qO=e=>{if(e){const n=new Ha(e,e);for(let o=n.current();o;o=n.next())if(pt(o))return o}return null},GO=e=>{const n=pe.fromTag("span");return Zc(n,{id:o0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&rr(n,pe.fromText(r2)),n},M8=e=>{const n=qO(e);return n&&n.data.charAt(0)===r2&&n.deleteData(0,1),n},h_=(e,n,o)=>{const r=e.dom,i=e.selection;if(w0(n))wd(e,!1,pe.fromDom(n),o,!0);else{const u=i.getRng(),m=r.getParent(n,r.isBlock),y=u.startContainer,S=u.startOffset,O=u.endContainer,L=u.endOffset,F=M8(n);r.remove(n,!0),y===F&&S>0&&u.setStart(F,S-1),O===F&&L>0&&u.setEnd(F,L-1),m&&r.isEmpty(m)&&eu(pe.fromDom(m)),i.setRng(u)}},g_=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)h_(e,n,o);else if(n=gg(e.getBody(),i.getStart()),!n)for(;n=r.get(o0);)h_(e,n,o)},N8=(e,n,o)=>{var r,i;const u=e.dom,m=u.getParent(o,nt(g0,e.schema));m&&u.isEmpty(m)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Vm(pe.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},_P=(e,n)=>(e.appendChild(n),n),KO=(e,n)=>{var o;const r=ss(e,(u,m)=>_P(u,m.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return _P(r,i.createTextNode(r2))},P8=(e,n,o,r,i,u)=>{const m=e.formatter,y=e.dom,S=Zt(Go(m.get()),F=>F!==r&&!Ko(F,"removeformat")),O=D8(e,o,S);if(Zt(O,F=>!SE(e,F,r)).length>0){const F=o.cloneNode(!1);return y.add(n,F),m.remove(r,i,F,u),y.remove(F),W.some(F)}else return W.none()},YO=e=>gw(e,$m(e).replace(new RegExp(`${Xr}$`)," ")),Hu=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Ul(pe.fromDom(n)).each(r=>{Yr(r)?YO(r):Vh(r,i=>Yr(i)).each(i=>{Yr(i)&&YO(i)})})};e.once("input",r=>{r.data&&!ch(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},B8=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const m=i.getRng();let y=m.startOffset;const O=m.startContainer.nodeValue;r=gg(e.getBody(),i.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(O&&y>0&&y<O.length&&L.test(O.charAt(y))&&L.test(O.charAt(y-1))){const F=i.getBookmark();m.collapse(!0);let V=Sg(e.dom,m,u);V=ht(V),e.formatter.apply(n,o,V),i.moveToBookmark(F)}else{let F=r?qO(r):null;(!r||(F==null?void 0:F.data)!==r2)&&(r=R8(e.getDoc(),GO(!0).dom),F=r.firstChild,m.insertNode(r),y=1,Hu(e,r)),e.formatter.apply(n,o,r),i.setCursorLocation(F,y)}},TP=(e,n,o,r)=>{const i=e.dom,u=e.selection;let m=!1;const y=e.formatter.get(n);if(!y)return;const S=u.getRng(),O=S.startContainer,L=S.startOffset;let F=O;pt(O)&&(L!==O.data.length&&(m=!0),F=F.parentNode);const V=[];let Q;for(;F;){if(uf(e,F,n,o,r)){Q=F;break}F.nextSibling&&(m=!0),V.push(F),F=F.parentNode}if(Q)if(m){const re=u.getBookmark();S.collapse(!0);let ee=Sg(i,S,y,!0);ee=ht(ee),e.formatter.remove(n,o,ee,r),u.moveToBookmark(re)}else{const re=gg(e.getBody(),Q),ee=$e(re)?i.getParents(Q.parentNode,wt,re):[],le=GO(!1).dom;N8(e,le,re??Q);const we=P8(e,le,Q,n,o,r),De=KO([...V,...we.toArray(),...ee],le);re&&h_(e,re,$e(re)),u.setCursorLocation(De,1),Hu(e,le),i.isEmpty(Q)&&i.remove(Q)}},XO=(e,n,o)=>{const r=e.selection,i=e.getBody();g_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===r2&&g_(e,gg(i,r.getStart()),!0),(n===37||n===39)&&g_(e,gg(i,r.getStart()),!0)},JO=e=>pt(e)&&na(e.data,Xr),kP=e=>{e.on("mouseup keydown",n=>{XO(e,n.keyCode,JO(e.selection.getRng().endContainer))})},QO=e=>{const n=GO(!1),o=KO(e,n.dom);return{caretContainer:n,caretPosition:Xe(o,0)}},AP=(e,n)=>{const{caretContainer:o,caretPosition:r}=QO(n);return ii(pe.fromDom(e),o),gs(pe.fromDom(e)),r},I8=(e,n)=>{const{caretContainer:o,caretPosition:r}=QO(n);return e.insertNode(o.dom),r},p_=(e,n)=>{if(nu(n.dom))return!1;const o=e.schema.getTextInlineElements();return Sn(o,yo(n))&&!nu(n.dom)&&!Bf(n.dom)},z0={},Vu=vl(["pre"]),L8=(e,n)=>{z0[e]||(z0[e]=[]),z0[e].push(n)},F8=(e,n)=>{Sn(z0,e)&&xe(z0[e],o=>{o(n)})};L8("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const m=u.previousSibling;return Vu(m)&&et(i,m)},r=(i,u)=>{const m=pe.fromDom(u),y=Cu(m).dom;gs(m),xu(pe.fromDom(i),[pe.fromTag("br",y),pe.fromTag("br",y),...ra(m)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=Zt(Zt(i,Vu),o(i));xe(u,m=>{r(m.previousSibling,m)})}});const $8=["fontWeight","fontStyle","color","fontSize","fontFamily"],eD=e=>qe(e.styles)&&kt(Go(e.styles),n=>et($8,n)),H8=e=>Po(e,n=>Wa(n)&&n.inline==="span"&&eD(n)),V8=(e,n)=>{const o=e.get(n);return jt(o)?H8(o):W.none()},OP=(e,n)=>rl(n,Xe.fromRangeStart(e)).isNone(),b_=(e,n)=>Bc(n,Xe.fromRangeEnd(e)).exists(o=>!Lo(o.getNode())||Bc(n,o).isSome())===!1,df=e=>n=>tv(n)&&e.isEditable(n),tD=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return OP(o,n[0])&&b_(o,n[0])?n:[];{const r=fo(n).filter(m=>OP(o,m)).toArray(),i=cs(n).filter(m=>b_(o,m)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},v_=e=>Zt(tD(e),df(e.dom)),y_=e=>Zt(e.getSelectedBlocks(),df(e.dom)),nD=yt.each,w_=e=>Wt(e)&&!_l(e)&&!nu(e)&&!Bf(e),DP=(e,n)=>{for(let o=e;o;o=o[n]){if(pt(o)&&xo(o.data))return e;if(Wt(o)&&!_l(o))return o}return e},oD=(e,n,o)=>{const r=XC(e),i=qc(n)&&e.dom.isEditable(n),u=qc(o)&&e.dom.isEditable(o);if(i&&u){const m=DP(n,"previousSibling"),y=DP(o,"nextSibling");if(r.compare(m,y)){for(let S=m.nextSibling;S&&S!==y;){const O=S;S=S.nextSibling,m.appendChild(O)}return e.dom.remove(y),yt.each(yt.grep(y.childNodes),S=>{m.appendChild(S)}),m}}return o},C_=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=oD(e,h0(r),r))!==null&&i!==void 0?i:r;oD(e,u,h0(u,!0))}},z8=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";nD(e.select(r,o),i=>{w_(i)&&e.isEditable(i)&&nD(n.styles,(u,m)=>{e.setStyle(i,m,"")})})}},S_=(e,n,o)=>{nD(e.childNodes,r=>{w_(r)&&(n(r)&&o(r),r.hasChildNodes()&&S_(r,n,o))})},U8=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},zp=(e,n)=>o=>!!(o&&J1(e,o,n)),sD=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),U8(e,r)},bb=bd.generate([{keep:[]},{rename:["name"]},{removed:[]}]),RP=/^(src|href|style)$/,rD=yt.each,x_=wg,W8=e=>/^(TR|TH|TD)$/.test(e.nodeName),MP=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),NP=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Wt(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return pt(r)&&o&&i>=r.data.length&&(r=new Ha(r,e.getBody()).next()||r),pt(r)&&!o&&i===0&&(r=new Ha(r,e.getBody()).prev()||r),r},aD=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return W8(e)&&r?e.nodeName==="TR"&&r[o]||r:e},iD=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},E_=(e,n,o,r,i)=>{const u=pe.fromDom(n),m=pe.fromDom(e.create(r,i)),y=o?$d(u):Fh(u);return xu(m,y),o?(ii(u,m),xm(m,u)):(qi(u,m),rr(m,u)),m.dom},vb=(e,n)=>n.links&&e.nodeName==="A",PP=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,m=Si(e);Qf(o)&&r===u.getRoot()&&(!o.list_block||!x_(n,o.list_block))&&xe(_r(n.childNodes),y=>{lh(e,m,y.nodeName.toLowerCase())?i?i.appendChild(y):(i=iD(u,y,m),u.setAttribs(i,Jm(e))):i=null}),!(em(o)&&!x_(o.inline,n))&&u.remove(n,!0)},BP=(e,n,o)=>so(e)?{name:n,value:null}:{name:e,value:Jf(n,o)},a2=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},cD=(e,n,o,r,i)=>{let u=!1;rD(o.styles,(m,y)=>{const{name:S,value:O}=BP(y,m,r),L=CE(O,S);(o.remove_similar||ne(O)||!Wt(i)||x_(J1(e,i,S),L))&&e.setStyle(n,S,""),u=!0}),u&&a2(e,n)},IP=(e,n,o)=>{n==="removeformat"?xe(y_(e.selection),r=>{xe($8,i=>e.dom.setStyle(r,i,"")),a2(e.dom,r)}):V8(e.formatter,n).each(r=>{xe(y_(e.selection),i=>cD(e.dom,i,r,o,null))})},LP=(e,n,o,r,i)=>{const u=e.dom,m=XC(e),y=e.schema;if(Wa(n)&&Kl(y,n.inline)&&Ou(y,r)&&r.parentElement===e.getBody())return PP(e,r,n),bb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!s2(u,r,n)&&!vb(r,n))return bb.keep();const S=r,O=n.preserve_attributes;if(Wa(n)&&n.remove==="all"&&jt(O)){const L=Zt(u.getAttribs(S),F=>et(O,F.name.toLowerCase()));if(u.removeAllAttribs(S),xe(L,F=>u.setAttrib(S,F.name,F.value)),L.length>0)return bb.rename("span")}if(n.remove!=="all"){cD(u,S,n,o,i),rD(n.attributes,(F,V)=>{const{name:Q,value:re}=BP(V,F,o);if(n.remove_similar||ne(re)||!Wt(i)||x_(u.getAttrib(i,Q),re)){if(Q==="class"){const ee=u.getAttrib(S,Q);if(ee){let le="";if(xe(ee.split(/\s+/),we=>{/mce\-\w+/.test(we)&&(le+=(le?" ":"")+we)}),le){u.setAttrib(S,Q,le);return}}}if(RP.test(Q)&&S.removeAttribute("data-mce-"+Q),Q==="style"&&vl(["li"])(S)&&u.getStyle(S,"list-style-type")==="none"){S.removeAttribute(Q),u.setStyle(S,"list-style-type","none");return}Q==="class"&&S.removeAttribute("className"),S.removeAttribute(Q)}}),rD(n.classes,F=>{F=Jf(F,o),(!Wt(i)||u.hasClass(i,F))&&u.removeClass(S,F)});const L=u.getAttribs(S);for(let F=0;F<L.length;F++){const V=L[F].nodeName;if(!m.isAttributeInternal(V))return bb.keep()}}return n.remove!=="none"?(PP(e,S,n),bb.removed()):bb.keep()},FP=(e,n,o,r,i)=>{let u;return n.parentNode&&xe(b0(e.dom,n.parentNode).reverse(),m=>{if(!u&&Wt(m)&&m.id!=="_start"&&m.id!=="_end"){const y=uf(e,m,o,r,i);y&&y.split!==!1&&(u=m)}}),u},Z8=(e,n,o,r)=>LP(e,n,o,r,r).fold(ct(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),ct(null)),yb=(e,n,o,r,i,u,m,y)=>{var S,O;let L,F;const V=e.dom;if(o){const Q=o.parentNode;for(let re=r.parentNode;re&&re!==Q;re=re.parentNode){let ee=V.clone(re,!1);for(let le=0;le<n.length&&(ee=Z8(e,n[le],y,ee),ee!==null);le++);ee&&(L&&ee.appendChild(L),F||(F=ee),L=ee)}(!m.mixed||!V.isBlock(o))&&(r=(S=V.split(o,r))!==null&&S!==void 0?S:r),L&&F&&((O=i.parentNode)===null||O===void 0||O.insertBefore(L,i),F.appendChild(i),Wa(m)&&C_(e,m,y,L))}return r},$P=(e,n,o,r,i)=>{const u=e.formatter.get(n),m=u[0],y=e.dom,S=e.selection,O=ee=>{const le=FP(e,ee,n,o,i);return yb(e,u,le,ee,ee,!0,m,o)},L=ee=>_l(ee)&&Wt(ee)&&(ee.id==="_start"||ee.id==="_end"),F=ee=>kt(u,le=>U0(e,le,o,ee,ee)),V=ee=>{const le=_r(ee.childNodes),De=F(ee)||kt(u,ft=>s2(y,ee,ft)),Oe=ee.parentNode;if(!De&&$e(Oe)&&CC(m)&&F(Oe),m.deep&&le.length)for(let ft=0;ft<le.length;ft++)V(le[ft]);xe(["underline","line-through","overline"],ft=>{Wt(ee)&&e.dom.getStyle(ee,"text-decoration")===ft&&ee.parentNode&&yC(y,ee.parentNode)===ft&&U0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ft}},void 0,ee)})},Q=ee=>{const le=y.get(ee?"_start":"_end");if(le){let we=le[ee?"firstChild":"lastChild"];return L(we)&&(we=we[ee?"firstChild":"lastChild"]),pt(we)&&we.data.length===0&&(we=ee?le.previousSibling||le.nextSibling:le.nextSibling||le.previousSibling),y.remove(le,!0),we}else return null},re=ee=>{let le,we,De=Sg(y,ee,u,ee.collapsed);if(m.split){if(De=ht(De),le=NP(e,De,!0),we=NP(e,De),le!==we){if(le=aD(le,!0),we=aD(we,!1),MP(y,le,we)){const He=W.from(le.firstChild).getOr(le);O(E_(y,He,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Q(!0);return}if(MP(y,we,le)){const He=W.from(we.lastChild).getOr(we);O(E_(y,He,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Q(!1);return}le=iD(y,le,"span",{id:"_start","data-mce-type":"bookmark"}),we=iD(y,we,"span",{id:"_end","data-mce-type":"bookmark"});const Oe=y.createRng();Oe.setStartAfter(le),Oe.setEndBefore(we),tb(y,Oe,He=>{xe(He,ft=>{!_l(ft)&&!_l(ft.parentNode)&&O(ft)})}),O(le),O(we),le=Q(!0),we=Q()}else le=we=O(le);De.startContainer=le.parentNode?le.parentNode:le,De.startOffset=y.nodeIndex(le),De.endContainer=we.parentNode?we.parentNode:we,De.endOffset=y.nodeIndex(we)+1}tb(y,De,Oe=>{xe(Oe,V)})};if(r){if(f0(r)){const ee=y.createRng();ee.setStartBefore(r),ee.setEndAfter(r),re(ee)}else re(r);Tl(e,n,r,o);return}!S.isCollapsed()||!Wa(m)||kp(e).length?(of(e,()=>u0(e,re),ee=>Wa(m)&&f_(e,n,o,ee)),e.nodeChanged()):TP(e,n,o,i),IP(e,n,o),Tl(e,n,r,o)},lD=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&$P(e,n,o,r,i)},U0=(e,n,o,r,i)=>LP(e,n,o,r,i).fold(tt,u=>(e.dom.rename(r,u),!0),wt),i2=yt.each,HP=(e,n,o,r)=>{const i=u=>{if(qc(u)&&Wt(u.parentNode)&&e.isEditable(u)){const m=yC(e,u.parentNode);e.getStyle(u,"color")&&m?e.setStyle(u,"text-decoration",m):e.getStyle(u,"text-decoration")===m&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(yt.walk(r,i,"childNodes"),i(r))},j8=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=zp(e,"fontSize");S_(r,u=>i(u)&&e.isEditable(u),sD(e,"backgroundColor",Jf(n.styles.backgroundColor,o)))}},VP=(e,n,o,r)=>{if(Wa(n)&&(n.inline==="sub"||n.inline==="sup")){const i=zp(e,"fontSize");S_(r,m=>i(m)&&e.isEditable(m),sD(e,"fontSize",""));const u=Zt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},q8=(e,n,o,r)=>{i2(n,i=>{Wa(i)&&i2(e.dom.select(i.inline,r),u=>{w_(u)&&U0(e,i,o,u,i.exact?u:null)}),z8(e.dom,i,r)})},G8=(e,n,o,r,i)=>{const u=i.parentNode;uf(e,u,o,r)&&U0(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,m=>uf(e,m,o,r)?(U0(e,n,r,i),!0):!1)},wb=yt.each,zP=(e,n,o,r)=>{if(Ix(e)&&Wa(n)&&o.parentNode){const i=sv(e.schema),u=Jb(pe.fromDom(o),m=>nu(m.dom));return Ys(i,r)&&Au(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},__=(e,n,o,r)=>{if(wb(o.styles,(i,u)=>{e.setStyle(n,u,Jf(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},K8=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],m=!r&&e.selection.isCollapsed(),y=e.dom,S=e.selection,O=(re,ee=u)=>{ve(ee.onformat)&&ee.onformat(re,ee,o,r),__(y,re,ee,o),wb(ee.attributes,(le,we)=>{y.setAttrib(re,we,Jf(le,o))}),wb(ee.classes,le=>{const we=Jf(le,o);y.hasClass(re,we)||y.addClass(re,we)})},L=(re,ee)=>{let le=!1;return wb(re,we=>ou(we)?y.getContentEditable(ee)==="false"&&!we.ceFalseOverride||$e(we.collapsed)&&we.collapsed!==m?!0:y.is(ee,we.selector)&&!nu(ee)?(O(ee,we),le=!0,!1):!0:!1),le},F=re=>{if(ce(re)){const ee=y.create(re);return O(ee),ee}else return null},V=(re,ee,le)=>{const we=[];let De=!0;const Oe=u.inline||u.block,He=F(Oe),ft=Je=>y0(u)&&uf(e,Je,n,o),Rt=(Je,Ue,ut)=>{const an=xE(u)&&g0(e.schema,Je)&&lh(e,Ue,Oe);return ut&&an},Yt=(Je,Ue,ut,an)=>{const wn=Je.nodeName.toLowerCase(),go=lh(e,Oe,wn)&&lh(e,Ue,Oe),wo=!le&&pt(Je)&&vw(Je.data),ns=nu(Je),ps=!Wa(u)||!re.isBlock(Je);return(ut||an)&&go&&!wo&&!ns&&ps};tb(re,ee,Je=>{let Ue;const ut=an=>{let wn=!1,go=De,wo=!1;const ns=an.parentNode,ps=ns.nodeName.toLowerCase(),Lr=re.getContentEditable(an);$e(Lr)&&(go=De,De=Lr==="true",wn=!0,wo=vC(e,an));const Ea=De&&!wn;if(Lo(an)&&!zP(e,u,an,ps)){Ue=null,Qf(u)&&re.remove(an);return}if(ft(an)){Ue=null;return}if(Rt(an,ps,Ea)){const Ts=re.rename(an,Oe);O(Ts),we.push(Ts),Ue=null;return}if(ou(u)){let Ts=L(i,an);if(!Ts&&$e(ns)&&CC(u)&&(Ts=L(i,ns)),!Wa(u)||Ts){Ue=null;return}}$e(He)&&Yt(an,ps,Ea,wo)?(Ue||(Ue=re.clone(He,!1),ns.insertBefore(Ue,an),we.push(Ue)),wo&&wn&&(De=go),Ue.appendChild(an)):(Ue=null,xe(_r(an.childNodes),ut),wn&&(De=go),Ue=null)};xe(Je,ut)}),u.links===!0&&xe(we,Je=>{const Ue=ut=>{ut.nodeName==="A"&&O(ut,u),xe(_r(ut.childNodes),Ue)};Ue(Je)}),xe(we,Je=>{const Ue=wn=>{let go=0;return xe(wn.childNodes,wo=>{!pC(wo)&&!_l(wo)&&go++}),go},ut=wn=>Po(wn.childNodes,m0).filter(wo=>re.getContentEditable(wo)!=="false"&&s2(re,wo,u)).map(wo=>{const ns=re.clone(wo,!1);return O(ns),re.replace(ns,wn,!0),re.remove(wo,!0),ns}).getOr(wn),an=Ue(Je);if((we.length>1||!re.isBlock(Je))&&an===0){re.remove(Je,!0);return}(Wa(u)||Qf(u)&&u.wrapper)&&(!u.exact&&an===1&&(Je=ut(Je)),q8(e,i,o,Je),G8(e,u,n,o,Je),j8(re,u,o,Je),HP(re,u,o,Je),VP(re,u,o,Je),C_(e,u,o,Je))})},Q=f0(r)?r:S.getNode();if(y.getContentEditable(Q)==="false"&&!vC(e,Q)){r=Q,L(i,r),ru(e,n,r,o);return}if(u){if(r)if(f0(r)){if(!L(i,r)){const re=y.createRng();re.setStartBefore(r),re.setEndAfter(r),V(y,Sg(y,re,i),!0)}}else V(y,r,!0);else!m||!Wa(u)||kp(e).length?(S.setRng(Vs(S.getRng())),of(e,()=>{u0(e,(re,ee)=>{const le=ee?re:Sg(y,re,i);V(y,le,!1)})},wt),e.nodeChanged()):B8(e,n,o),V8(e.formatter,n).each(re=>{xe(v_(e.selection),ee=>__(y,ee,re,o))});F8(n,e)}ru(e,n,r,o)},UP=(e,n,o,r)=>{(r||e.selection.isEditable())&&K8(e,n,o,r)},uD=e=>Sn(e,"vars"),dD=(e,n)=>{e.set({}),n.on("NodeChange",o=>{jP(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=W.from(o.node).map(i=>f0(i)?i:i.startContainer).bind(i=>Wt(i)?W.some(i):W.from(i.parentElement)).getOrThunk(()=>fD(n));jP(n,r,e.get())})},fD=e=>e.selection.getStart(),WP=(e,n,o,r,i)=>$r(n,y=>{const S=e.formatter.matchNode(y,o,i??{},r);return!Pn(S)},y=>d_(e,y,o)?!0:r?!1:$e(e.formatter.matchNode(y,o,i,!0))),ZP=(e,n)=>{const o=n??fD(e);return Zt(b0(e.dom,o),r=>Wt(r)&&!Bf(r))},jP=(e,n,o)=>{const r=ZP(e,n);At(o,(i,u)=>{const m=y=>{const S=WP(e,r,u,y.similar,uD(y)?y.vars:void 0),O=S.isSome();if(y.state.get()!==O){y.state.set(O);const L=S.getOr(n);uD(y)?y.callback(O,{node:L,format:u,parents:r}):xe(y.callbacks,F=>F(O,{node:L,format:u,parents:r}))}};xe([i.withSimilar,i.withoutSimilar],m),xe(i.withVars,m)})},T_=(e,n,o,r,i,u)=>{const m=n.get();xe(o.split(","),y=>{const S=zo(m,y).getOrThunk(()=>{const L={withSimilar:{state:Be(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Be(!1),similar:!1,callbacks:[]},withVars:[]};return m[y]=L,L}),O=()=>{const L=ZP(e);return WP(e,L,y,i,u).isSome()};if(Pn(u)){const L=i?S.withSimilar:S.withoutSimilar;L.callbacks.push(r),L.callbacks.length===1&&L.state.set(O())}else S.withVars.push({state:Be(O()),similar:i,vars:u,callback:r})}),n.set(m)},Mg=(e,n,o)=>{const r=e.get();xe(n.split(","),i=>zo(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:Zt(u.withSimilar.callbacks,m=>m!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Zt(u.withoutSimilar.callbacks,m=>m!==o)},withVars:Zt(u.withVars,m=>m.callback!==o)}})),e.set(r)},Y8=(e,n,o,r,i,u)=>(T_(e,n,o,r,i,u),{unbind:()=>Mg(n,o,r)}),mD=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(f_(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?lD(e,n,o,r):UP(e,n,o,r))},Qr=yt.explode,k_=()=>{const e={};return{addFilter:(i,u)=>{xe(Qr(i),m=>{Sn(e,m)||(e[m]={name:m,callbacks:[]}),e[m].callbacks.push(u)})},getFilters:()=>Di(e),removeFilter:(i,u)=>{xe(Qr(i),m=>{if(Sn(e,m))if($e(u)){const y=e[m],S=Zt(y.callbacks,O=>O!==u);S.length>0?y.callbacks=S:delete e[m]}else delete e[m]})}}},hD=(e,n)=>{xe(n,o=>{e.attr(o,null)})},Ng=(e,n,o)=>{e.addNodeFilter("font",r=>{xe(r,i=>{const u=n.parse(i.attr("style")),m=i.attr("color"),y=i.attr("face"),S=i.attr("size");m&&(u.color=m),y&&(u["font-family"]=y),S&&Qi(S).each(O=>{u["font-size"]=o[O-1]}),i.name="span",i.attr("style",n.serialize(u)),hD(i,["color","face","size"])})})},qP=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";xe(r,u=>{if(i)u.name="s";else{const m=o.parse(u.attr("style"));m["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(m))}})})},GP=(e,n,o)=>{var r;const i=Jy();n.convert_fonts_to_spans&&Ng(e,i,yt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),qP(e,o,i)},c2=(e,n,o)=>{n.inline_styles&&GP(e,n,o)},X8=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),J8=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Up=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",m=u?J8(r):decodeURIComponent(r);return W.some({type:i[1],data:m,base64Encoded:u})}else return W.none()},KP=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return W.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return W.some(new Blob([i],{type:e}))},Cb=e=>new Promise((n,o)=>{Up(e).bind(({type:r,data:i,base64Encoded:u})=>KP(r,i,u)).fold(()=>o("Invalid data URI"),n)}),Q8=e=>es(e,"blob:")?X8(e):es(e,"data:")?Cb(e):Promise.reject("Unknown URI format"),Pg=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let eH=0;const Ed=e=>"blobid"+eH++,W0=(e,n,o)=>Up(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return W.none();{const m=u?r:btoa(r);return o(m,i)}}),A_=(e,n,o)=>{const r=e.create(Ed(),n,o);return e.add(r),r},O_=(e,n,o=!1)=>W0(n,o,(r,i)=>W.from(e.getByData(r,i)).orThunk(()=>KP(i,r).map(u=>A_(e,u,r)))),tH=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(es(n,"blob:")){const r=e.getByUri(n);return $e(r)?Promise.resolve(r):Q8(n).then(i=>Pg(i).then(u=>W0(u,!1,m=>W.some(A_(e,i,m))).getOrThunk(o)))}else return es(n,"data:")?O_(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},D_=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,nH=e=>W.from(e.match(D_)).bind(n=>vc(n,1)).map(n=>es(n,"www.")?n.substring(4):n),_d=(e,n)=>{W.from(e.attr("src")).bind(nH).forall(o=>!et(n,o))&&e.attr("sandbox","")},Z0=(e,n)=>es(e,`${n}/`),YP=e=>Pn(e)?"iframe":Z0(e,"image")?"img":Z0(e,"video")?"video":Z0(e,"audio")?"audio":"iframe",gD=({type:e,src:n,width:o,height:r}={},i,u)=>{const m=YP(e),y=new cl(m,1);return y.attr(m==="audio"?{src:n}:{src:n,width:o,height:r}),(m==="audio"||m==="video")&&y.attr("controls",""),m==="iframe"&&i&&_d(y,u),y},pD=e=>$e(e.attr("data-mce-bogus")),Sb=e=>e.attr("src")===pn.transparentSrc||$e(e.attr("data-mce-placeholder")),bD=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");Sb(i)||pD(i)||Qt(u)||O_(o,u,!0).each(m=>{i.attr("src",m.blobUri())})};e.addAttributeFilter("src",i=>xe(i,r))}},oH=(e,n)=>{var o,r;const i=e.schema;e.addAttributeFilter("href",S=>{let O=S.length;const L=V=>V.split(" ").filter(re=>re.length>0).concat(["noopener"]).sort().join(" "),F=V=>{const Q=V?yt.trim(V):"";return/\b(noopener)\b/g.test(Q)?Q:L(Q)};if(!n.allow_unsafe_link_target)for(;O--;){const V=S[O];V.name==="a"&&V.attr("target")==="_blank"&&V.attr("rel",F(V.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",S=>{let O=S.length,L,F,V,Q;for(;O--;)if(Q=S[O],Q.name==="a"&&Q.firstChild&&!Q.attr("href"))for(V=Q.parent,L=Q.lastChild;L&&V;)F=L.prev,V.insert(L,Q),L=F}),n.fix_list_elements&&e.addNodeFilter("ul,ol",S=>{let O=S.length,L,F;for(;O--;)if(L=S[O],F=L.parent,F&&(F.name==="ul"||F.name==="ol"))if(L.prev&&L.prev.name==="li")L.prev.append(L);else{const V=new cl("li",1);V.attr("style","list-style-type: none"),L.wrap(V)}});const u=i.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",S=>{var O;let L=S.length;for(;L--;){const F=S[L],V=(O=F.attr("class"))!==null&&O!==void 0?O:"",Q=yt.explode(V," ");let re="";for(let ee=0;ee<Q.length;ee++){const le=Q[ee];let we=!1,De=u["*"];De&&De[le]&&(we=!0),De=u[F.name],!we&&De&&De[le]&&(we=!0),we&&(re&&(re+=" "),re+=le)}re.length||(re=null),F.attr("class",re)}}),bD(e,n);const m=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,y=Zi((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",S=>xe(S,O=>{O.replace(gD({type:O.attr("type"),src:O.name==="object"?O.attr("data"):O.attr("src"),width:O.attr("width"),height:O.attr("height")},m,y))})),m&&e.addNodeFilter("iframe",S=>xe(S,O=>_d(O,y)))},{entries:vD,setPrototypeOf:XP,isFrozen:sH,getPrototypeOf:rH,getOwnPropertyDescriptor:aH}=Object;let{freeze:mc,seal:sm,create:JP}=Object,{apply:l2,construct:yD}=typeof Reflect<"u"&&Reflect;l2||(l2=function(n,o,r){return n.apply(o,r)}),mc||(mc=function(n){return n}),sm||(sm=function(n){return n}),yD||(yD=function(n,o){return new n(...o)});const QP=ff(Array.prototype.forEach),eB=ff(Array.prototype.pop),u2=ff(Array.prototype.push),R_=ff(String.prototype.toLowerCase),wD=ff(String.prototype.toString),iH=ff(String.prototype.match),rm=ff(String.prototype.replace),cH=ff(String.prototype.indexOf),lH=ff(String.prototype.trim),Td=ff(RegExp.prototype.test),d2=uH(TypeError);function ff(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return l2(e,n,r)}}function uH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return yD(e,o)}}function _s(e,n,o){var r;o=(r=o)!==null&&r!==void 0?r:R_,XP&&XP(e,null);let i=n.length;for(;i--;){let u=n[i];if(typeof u=="string"){const m=o(u);m!==u&&(sH(n)||(n[i]=m),u=m)}e[u]=!0}return e}function j0(e){const n=JP(null);for(const[o,r]of vD(e))n[o]=r;return n}function f2(e,n){for(;e!==null;){const r=aH(e,n);if(r){if(r.get)return ff(r.get);if(typeof r.value=="function")return ff(r.value)}e=rH(e)}function o(r){return console.warn("fallback value for",r),null}return o}const tB=mc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wp=mc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),CD=mc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dH=mc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),SD=mc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),fH=mc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xD=mc(["#text"]),nB=mc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ED=mc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oB=mc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M_=mc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mH=sm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hH=sm(/<%[\w\W]*|[\w\W]*%>/gm),gH=sm(/\${[\w\W]*}/gm),pH=sm(/^data-[\-\w.\u00B7-\uFFFF]/),bH=sm(/^aria-[\-\w]+$/),sB=sm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_D=sm(/^(?:\w+script|data):/i),rB=sm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vH=sm(/^html$/i);var q0=Object.freeze({__proto__:null,MUSTACHE_EXPR:mH,ERB_EXPR:hH,TMPLIT_EXPR:gH,DATA_ATTR:pH,ARIA_ATTR:bH,IS_ALLOWED_URI:sB,IS_SCRIPT_OR_DATA:_D,ATTR_WHITESPACE:rB,DOCTYPE_NAME:vH});const yH=()=>typeof window>"u"?null:window,aB=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(m){return m},createScriptURL(m){return m}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function iB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yH();const n=So=>iB(So);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:i}=e;const{DocumentFragment:u,HTMLTemplateElement:m,Node:y,Element:S,NodeFilter:O,NamedNodeMap:L=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:F,DOMParser:V,trustedTypes:Q}=e,re=S.prototype,ee=f2(re,"cloneNode"),le=f2(re,"nextSibling"),we=f2(re,"childNodes"),De=f2(re,"parentNode");if(typeof m=="function"){const So=i.createElement("template");So.content&&So.content.ownerDocument&&(i=So.content.ownerDocument)}let Oe,He="";const{implementation:ft,createNodeIterator:Rt,createDocumentFragment:Yt,getElementsByTagName:Je}=i,{importNode:Ue}=o;let ut={};n.isSupported=typeof vD=="function"&&typeof De=="function"&&ft&&ft.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:an,ERB_EXPR:wn,TMPLIT_EXPR:go,DATA_ATTR:wo,ARIA_ATTR:ns,IS_SCRIPT_OR_DATA:ps,ATTR_WHITESPACE:Lr}=q0;let{IS_ALLOWED_URI:Ea}=q0,Ts=null;const Bt=_s({},[...tB,...Wp,...CD,...SD,...xD]);let vn=null;const $o=_s({},[...nB,...ED,...oB,...M_]);let zt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Tn=null,mo=null,Gt=!0,ho=!0,Co=!1,Ya=!0,is=!1,Pa=!1,Rd=!1,fm=!1,Fc=!1,Pl=!1,Yu=!1,Bl=!0,Xu=!1;const Cn="user-content-";let Oo=!0,cr=!1,Fr={},ua=null;const mi=_s({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let da=null;const fa=_s({},["audio","video","img","source","image","track"]);let pc=null;const Md=_s({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Nd="http://www.w3.org/1998/Math/MathML",Pd="http://www.w3.org/2000/svg",lu="http://www.w3.org/1999/xhtml";let yh=lu,zg=!1,Ub=null;const rk=_s({},[Nd,Pd,lu],wD);let wh;const Dy=["application/xhtml+xml","text/html"],eM="text/html";let Yi,Wb=null;const tM=i.createElement("form"),nM=function(Ze){return Ze instanceof RegExp||Ze instanceof Function},Ch=function(Ze){if(!(Wb&&Wb===Ze)){if((!Ze||typeof Ze!="object")&&(Ze={}),Ze=j0(Ze),wh=Dy.indexOf(Ze.PARSER_MEDIA_TYPE)===-1?wh=eM:wh=Ze.PARSER_MEDIA_TYPE,Yi=wh==="application/xhtml+xml"?wD:R_,Ts="ALLOWED_TAGS"in Ze?_s({},Ze.ALLOWED_TAGS,Yi):Bt,vn="ALLOWED_ATTR"in Ze?_s({},Ze.ALLOWED_ATTR,Yi):$o,Ub="ALLOWED_NAMESPACES"in Ze?_s({},Ze.ALLOWED_NAMESPACES,wD):rk,pc="ADD_URI_SAFE_ATTR"in Ze?_s(j0(Md),Ze.ADD_URI_SAFE_ATTR,Yi):Md,da="ADD_DATA_URI_TAGS"in Ze?_s(j0(fa),Ze.ADD_DATA_URI_TAGS,Yi):fa,ua="FORBID_CONTENTS"in Ze?_s({},Ze.FORBID_CONTENTS,Yi):mi,Tn="FORBID_TAGS"in Ze?_s({},Ze.FORBID_TAGS,Yi):{},mo="FORBID_ATTR"in Ze?_s({},Ze.FORBID_ATTR,Yi):{},Fr="USE_PROFILES"in Ze?Ze.USE_PROFILES:!1,Gt=Ze.ALLOW_ARIA_ATTR!==!1,ho=Ze.ALLOW_DATA_ATTR!==!1,Co=Ze.ALLOW_UNKNOWN_PROTOCOLS||!1,Ya=Ze.ALLOW_SELF_CLOSE_IN_ATTR!==!1,is=Ze.SAFE_FOR_TEMPLATES||!1,Pa=Ze.WHOLE_DOCUMENT||!1,Fc=Ze.RETURN_DOM||!1,Pl=Ze.RETURN_DOM_FRAGMENT||!1,Yu=Ze.RETURN_TRUSTED_TYPE||!1,fm=Ze.FORCE_BODY||!1,Bl=Ze.SANITIZE_DOM!==!1,Xu=Ze.SANITIZE_NAMED_PROPS||!1,Oo=Ze.KEEP_CONTENT!==!1,cr=Ze.IN_PLACE||!1,Ea=Ze.ALLOWED_URI_REGEXP||sB,yh=Ze.NAMESPACE||lu,zt=Ze.CUSTOM_ELEMENT_HANDLING||{},Ze.CUSTOM_ELEMENT_HANDLING&&nM(Ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zt.tagNameCheck=Ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ze.CUSTOM_ELEMENT_HANDLING&&nM(Ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zt.attributeNameCheck=Ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ze.CUSTOM_ELEMENT_HANDLING&&typeof Ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zt.allowCustomizedBuiltInElements=Ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),is&&(ho=!1),Pl&&(Fc=!0),Fr&&(Ts=_s({},[...xD]),vn=[],Fr.html===!0&&(_s(Ts,tB),_s(vn,nB)),Fr.svg===!0&&(_s(Ts,Wp),_s(vn,ED),_s(vn,M_)),Fr.svgFilters===!0&&(_s(Ts,CD),_s(vn,ED),_s(vn,M_)),Fr.mathMl===!0&&(_s(Ts,SD),_s(vn,oB),_s(vn,M_))),Ze.ADD_TAGS&&(Ts===Bt&&(Ts=j0(Ts)),_s(Ts,Ze.ADD_TAGS,Yi)),Ze.ADD_ATTR&&(vn===$o&&(vn=j0(vn)),_s(vn,Ze.ADD_ATTR,Yi)),Ze.ADD_URI_SAFE_ATTR&&_s(pc,Ze.ADD_URI_SAFE_ATTR,Yi),Ze.FORBID_CONTENTS&&(ua===mi&&(ua=j0(ua)),_s(ua,Ze.FORBID_CONTENTS,Yi)),Oo&&(Ts["#text"]=!0),Pa&&_s(Ts,["html","head","body"]),Ts.table&&(_s(Ts,["tbody"]),delete Tn.tbody),Ze.TRUSTED_TYPES_POLICY){if(typeof Ze.TRUSTED_TYPES_POLICY.createHTML!="function")throw d2('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ze.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw d2('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Oe=Ze.TRUSTED_TYPES_POLICY,He=Oe.createHTML("")}else Oe===void 0&&(Oe=aB(Q,r)),Oe!==null&&typeof He=="string"&&(He=Oe.createHTML(""));mc&&mc(Ze),Wb=Ze}},kS=_s({},["mi","mo","mn","ms","mtext"]),ze=_s({},["foreignobject","desc","title","annotation-xml"]),We=_s({},["title","style","font","a","script"]),Pt=_s({},Wp);_s(Pt,CD),_s(Pt,dH);const _t=_s({},SD);_s(_t,fH);const In=function(Ze){let hn=De(Ze);(!hn||!hn.tagName)&&(hn={namespaceURI:yh,tagName:"template"});const Vn=R_(Ze.tagName),ea=R_(hn.tagName);return Ub[Ze.namespaceURI]?Ze.namespaceURI===Pd?hn.namespaceURI===lu?Vn==="svg":hn.namespaceURI===Nd?Vn==="svg"&&(ea==="annotation-xml"||kS[ea]):!!Pt[Vn]:Ze.namespaceURI===Nd?hn.namespaceURI===lu?Vn==="math":hn.namespaceURI===Pd?Vn==="math"&&ze[ea]:!!_t[Vn]:Ze.namespaceURI===lu?hn.namespaceURI===Pd&&!ze[ea]||hn.namespaceURI===Nd&&!kS[ea]?!1:!_t[Vn]&&(We[Vn]||!Pt[Vn]):!!(wh==="application/xhtml+xml"&&Ub[Ze.namespaceURI]):!1},Eo=function(Ze){u2(n.removed,{element:Ze});try{Ze.parentNode.removeChild(Ze)}catch{Ze.remove()}},gr=function(Ze,hn){try{u2(n.removed,{attribute:hn.getAttributeNode(Ze),from:hn})}catch{u2(n.removed,{attribute:null,from:hn})}if(hn.removeAttribute(Ze),Ze==="is"&&!vn[Ze])if(Fc||Pl)try{Eo(hn)}catch{}else try{hn.setAttribute(Ze,"")}catch{}},Bd=function(Ze){let hn,Vn;if(fm)Ze="<remove></remove>"+Ze;else{const t=iH(Ze,/^[\r\n\t ]+/);Vn=t&&t[0]}wh==="application/xhtml+xml"&&yh===lu&&(Ze='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ze+"</body></html>");const ea=Oe?Oe.createHTML(Ze):Ze;if(yh===lu)try{hn=new V().parseFromString(ea,wh)}catch{}if(!hn||!hn.documentElement){hn=ft.createDocument(yh,"template",null);try{hn.documentElement.innerHTML=zg?He:ea}catch{}}const $c=hn.body||hn.documentElement;return Ze&&Vn&&$c.insertBefore(i.createTextNode(Vn),$c.childNodes[0]||null),yh===lu?Je.call(hn,Pa?"html":"body")[0]:Pa?hn.documentElement:$c},Ry=function(Ze){return Rt.call(Ze.ownerDocument||Ze,Ze,O.SHOW_ELEMENT|O.SHOW_COMMENT|O.SHOW_TEXT,null,!1)},wG=function(Ze){return Ze instanceof F&&(typeof Ze.nodeName!="string"||typeof Ze.textContent!="string"||typeof Ze.removeChild!="function"||!(Ze.attributes instanceof L)||typeof Ze.removeAttribute!="function"||typeof Ze.setAttribute!="function"||typeof Ze.namespaceURI!="string"||typeof Ze.insertBefore!="function"||typeof Ze.hasChildNodes!="function")},ak=function(Ze){return typeof y=="object"?Ze instanceof y:Ze&&typeof Ze=="object"&&typeof Ze.nodeType=="number"&&typeof Ze.nodeName=="string"},Sh=function(Ze,hn,Vn){ut[Ze]&&QP(ut[Ze],ea=>{ea.call(n,hn,Vn,Wb)})},i6=function(Ze){let hn;if(Sh("beforeSanitizeElements",Ze,null),wG(Ze))return Eo(Ze),!0;const Vn=Yi(Ze.nodeName);if(Sh("uponSanitizeElement",Ze,{tagName:Vn,allowedTags:Ts}),Ze.hasChildNodes()&&!ak(Ze.firstElementChild)&&(!ak(Ze.content)||!ak(Ze.content.firstElementChild))&&Td(/<[/\w]/g,Ze.innerHTML)&&Td(/<[/\w]/g,Ze.textContent))return Eo(Ze),!0;if(!Ts[Vn]||Tn[Vn]){if(!Tn[Vn]&&l6(Vn)&&(zt.tagNameCheck instanceof RegExp&&Td(zt.tagNameCheck,Vn)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Vn)))return!1;if(Oo&&!ua[Vn]){const ea=De(Ze)||Ze.parentNode,$c=we(Ze)||Ze.childNodes;if($c&&ea){const t=$c.length;for(let s=t-1;s>=0;--s)ea.insertBefore(ee($c[s],!0),le(Ze))}}return Eo(Ze),!0}return Ze instanceof S&&!In(Ze)||(Vn==="noscript"||Vn==="noembed"||Vn==="noframes")&&Td(/<\/no(script|embed|frames)/i,Ze.innerHTML)?(Eo(Ze),!0):(is&&Ze.nodeType===3&&(hn=Ze.textContent,hn=rm(hn,an," "),hn=rm(hn,wn," "),hn=rm(hn,go," "),Ze.textContent!==hn&&(u2(n.removed,{element:Ze.cloneNode()}),Ze.textContent=hn)),Sh("afterSanitizeElements",Ze,null),!1)},c6=function(Ze,hn,Vn){if(Bl&&(hn==="id"||hn==="name")&&(Vn in i||Vn in tM))return!1;if(!(ho&&!mo[hn]&&Td(wo,hn))){if(!(Gt&&Td(ns,hn))){if(!vn[hn]||mo[hn]){if(!(l6(Ze)&&(zt.tagNameCheck instanceof RegExp&&Td(zt.tagNameCheck,Ze)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Ze))&&(zt.attributeNameCheck instanceof RegExp&&Td(zt.attributeNameCheck,hn)||zt.attributeNameCheck instanceof Function&&zt.attributeNameCheck(hn))||hn==="is"&&zt.allowCustomizedBuiltInElements&&(zt.tagNameCheck instanceof RegExp&&Td(zt.tagNameCheck,Vn)||zt.tagNameCheck instanceof Function&&zt.tagNameCheck(Vn))))return!1}else if(!pc[hn]){if(!Td(Ea,rm(Vn,Lr,""))){if(!((hn==="src"||hn==="xlink:href"||hn==="href")&&Ze!=="script"&&cH(Vn,"data:")===0&&da[Ze])){if(!(Co&&!Td(ps,rm(Vn,Lr,"")))){if(Vn)return!1}}}}}}return!0},l6=function(Ze){return Ze.indexOf("-")>0},u6=function(Ze){let hn,Vn,ea,$c;Sh("beforeSanitizeAttributes",Ze,null);const{attributes:t}=Ze;if(!t)return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vn};for($c=t.length;$c--;){hn=t[$c];const{name:a,namespaceURI:c}=hn;Vn=a==="value"?hn.value:lH(hn.value);const d=Vn;if(ea=Yi(a),s.attrName=ea,s.attrValue=Vn,s.keepAttr=!0,s.forceKeepAttr=void 0,Sh("uponSanitizeAttribute",Ze,s),Vn=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){gr(a,Ze);continue}if(!Ya&&Td(/\/>/i,Vn)){gr(a,Ze);continue}is&&(Vn=rm(Vn,an," "),Vn=rm(Vn,wn," "),Vn=rm(Vn,go," "));const h=Yi(Ze.nodeName);if(!c6(h,ea,Vn)){gr(a,Ze);continue}if(Xu&&(ea==="id"||ea==="name")&&(gr(a,Ze),Vn=Cn+Vn),Oe&&typeof Q=="object"&&typeof Q.getAttributeType=="function"&&!c)switch(Q.getAttributeType(h,ea)){case"TrustedHTML":{Vn=Oe.createHTML(Vn);break}case"TrustedScriptURL":{Vn=Oe.createScriptURL(Vn);break}}if(Vn!==d)try{c?Ze.setAttributeNS(c,a,Vn):Ze.setAttribute(a,Vn)}catch{gr(a,Ze)}}Sh("afterSanitizeAttributes",Ze,null)},CG=function So(Ze){let hn;const Vn=Ry(Ze);for(Sh("beforeSanitizeShadowDOM",Ze,null);hn=Vn.nextNode();)Sh("uponSanitizeShadowNode",hn,null),!i6(hn)&&(hn.content instanceof u&&So(hn.content),u6(hn));Sh("afterSanitizeShadowDOM",Ze,null)};return n.sanitize=function(So){let Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},hn,Vn,ea,$c;if(zg=!So,zg&&(So="<!-->"),typeof So!="string"&&!ak(So))if(typeof So.toString=="function"){if(So=So.toString(),typeof So!="string")throw d2("dirty is not a string, aborting")}else throw d2("toString is not a function");if(!n.isSupported)return So;if(Rd||Ch(Ze),n.removed=[],typeof So=="string"&&(cr=!1),cr){if(So.nodeName){const a=Yi(So.nodeName);if(!Ts[a]||Tn[a])throw d2("root node is forbidden and cannot be sanitized in-place")}}else if(So instanceof y)hn=Bd("<!---->"),Vn=hn.ownerDocument.importNode(So,!0),Vn.nodeType===1&&Vn.nodeName==="BODY"||Vn.nodeName==="HTML"?hn=Vn:hn.appendChild(Vn);else{if(!Fc&&!is&&!Pa&&So.indexOf("<")===-1)return Oe&&Yu?Oe.createHTML(So):So;if(hn=Bd(So),!hn)return Fc?null:Yu?He:""}hn&&fm&&Eo(hn.firstChild);const t=Ry(cr?So:hn);for(;ea=t.nextNode();)i6(ea)||(ea.content instanceof u&&CG(ea.content),u6(ea));if(cr)return So;if(Fc){if(Pl)for($c=Yt.call(hn.ownerDocument);hn.firstChild;)$c.appendChild(hn.firstChild);else $c=hn;return(vn.shadowroot||vn.shadowrootmode)&&($c=Ue.call(o,$c,!0)),$c}let s=Pa?hn.outerHTML:hn.innerHTML;return Pa&&Ts["!doctype"]&&hn.ownerDocument&&hn.ownerDocument.doctype&&hn.ownerDocument.doctype.name&&Td(vH,hn.ownerDocument.doctype.name)&&(s="<!DOCTYPE "+hn.ownerDocument.doctype.name+`>
`+s),is&&(s=rm(s,an," "),s=rm(s,wn," "),s=rm(s,go," ")),Oe&&Yu?Oe.createHTML(s):s},n.setConfig=function(So){Ch(So),Rd=!0},n.clearConfig=function(){Wb=null,Rd=!1},n.isValidAttribute=function(So,Ze,hn){Wb||Ch({});const Vn=Yi(So),ea=Yi(Ze);return c6(Vn,ea,hn)},n.addHook=function(So,Ze){typeof Ze=="function"&&(ut[So]=ut[So]||[],u2(ut[So],Ze))},n.removeHook=function(So){if(ut[So])return eB(ut[So])},n.removeHooks=function(So){ut[So]&&(ut[So]=[])},n.removeAllHooks=function(){ut={}},n}var G0=iB();const TD=yt.each,Ga=yt.trim,jK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],qK={ftp:21,http:80,https:443,mailto:25},GK=["img","video"],KK=(e,n)=>$e(e)?!e:$e(n)?!et(GK,n):!0,mf=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},m2=(e,n,o)=>{const r=mf(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?KK(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class hc{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=fd.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!m2(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=Ga(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const y=r?r.path:new hc(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(y,n);else{const S=/([^#?]*)([#?]?.*)/.exec(n);S&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(y,S[1])+S[2])}}n=n.replace(/@@/g,"(mce_at)");const m=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);m&&TD(jK,(y,S)=>{let O=m[S];O&&(O=O.replace(/\(mce_at\)/g,"@@")),i[y]=O}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new hc(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new hc(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?qK[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,m;const y=n.substring(0,n.lastIndexOf("/")).split("/"),S=o.split("/");if(y.length>=S.length){for(u=0,m=y.length;u<m;u++)if(u>=S.length||y[u]!==S[u]){r=u+1;break}}if(y.length<S.length){for(u=0,m=S.length;u<m;u++)if(u>=y.length||y[u]!==S[u]){r=u+1;break}}if(r===1)return o;for(u=0,m=y.length-(r-1);u<m;u++)i+="../";for(u=r-1,m=S.length;u<m;u++)u!==r-1?i+="/"+S[u]:i+=S[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),m=o.split("/"),y=[];TD(u,F=>{F&&y.push(F)});const S=[];for(let F=m.length-1;F>=0;F--)if(!(m[F].length===0||m[F]===".")){if(m[F]===".."){r++;continue}if(r>0){r--;continue}S.push(m[F])}const O=y.length-r;let L;return O<=0?L=vs(S).join("/"):L=y.slice(0,O).join("/")+"/"+vs(S).join("/"),L.indexOf("/")!==0&&(L="/"+L),i&&L.lastIndexOf("/")!==L.length-1&&(L+=i),L}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Zp=yt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),kD="data-mce-type";let cB=0;const xb=(e,n,o,r,i)=>{var u,m,y,S;const O=n.validate,L=o.getSpecialElements();e.nodeType===ga&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const F=(m=i==null?void 0:i.tagName)!==null&&m!==void 0?m:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){$e(i)&&(i.allowedTags[F]=!0);return}if(e.nodeType!==Ld||F==="body")return;const V=pe.fromDom(e),Q=pi(V,kD),re=ri(V,"data-mce-bogus");if(!Q&&ce(re)){re==="all"?gs(V):_c(V);return}const ee=o.getElementRule(F);if(O&&!ee){Sn(L,F)?gs(V):_c(V);return}else $e(i)&&(i.allowedTags[F]=!0);if(O&&ee&&!Q){if(xe((y=ee.attributesForced)!==null&&y!==void 0?y:[],le=>{js(V,le.name,le.value==="{$uid}"?`mce_${cB++}`:le.value)}),xe((S=ee.attributesDefault)!==null&&S!==void 0?S:[],le=>{pi(V,le.name)||js(V,le.name,le.value==="{$uid}"?`mce_${cB++}`:le.value)}),ee.attributesRequired&&!kt(ee.attributesRequired,le=>pi(V,le))){_c(V);return}if(ee.removeEmptyAttrs&&Mh(V)){_c(V);return}ee.outputName&&ee.outputName!==F&&tx(V,ee.outputName)}},K0=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:m,attrValue:y}=i;i.keepAttr=Eb(n,o,r,u,m,y),i.keepAttr?(i.allowedAttributes[m]=!0,P_(m,o)&&(i.attrValue=m),n.allow_svg_data_urls&&es(y,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):N_(e,m)&&(i.forceKeepAttr=!0)},Eb=(e,n,o,r,i,u)=>o!=="html"&&!Mr(r)?!0:!(i in Zp&&m2(e,u,r))&&(!e.validate||n.isValid(r,i)||es(i,"data-")||es(i,"aria-")),N_=(e,n)=>e.hasAttribute(kD)&&(n==="id"||n==="class"||n==="style"),P_=(e,n)=>e in n.getBoolAttrs(),lB=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const m=i[u],y=m.name,S=m.value;!Eb(n,o,r,e.tagName.toLowerCase(),y,S)&&!N_(e,y)?e.removeAttribute(y):P_(y,o)&&e.setAttribute(y,y)}},uB=(e,n,o)=>{const r=G0();return r.addHook("uponSanitizeElement",(i,u)=>{xb(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{K0(i,e,n,o.current(),u)}),r},wH=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},CH=e=>{const n=zy(e);if(n==="svg"){const o=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(i=>`xlink:${i}`),r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:o};G0().sanitize(e,r)}else if(n==="math"){const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};G0().sanitize(e,o)}else throw new Error("Not a namespace element")},dB=(e,n)=>{const o=R();if(e.sanitize){const r=uB(e,n,o);return{sanitizeHtmlElement:(u,m)=>{r.sanitize(u,wH(e,m)),r.removed=[],o.reset()},sanitizeNamespaceElement:CH}}else return{sanitizeHtmlElement:(u,m)=>{const y=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let S;for(;S=y.nextNode();){const O=o.track(S);xb(S,e,n,O),Wt(S)&&lB(S,e,n,O)}o.reset()},sanitizeNamespaceElement:Pe}},fB=yt.makeMap,mB=yt.extend,hB=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",m=n.childNodes;for(let y=0,S=m.length;y<S;y++){const O=m[y],L=new cl(O.nodeName.toLowerCase(),O.nodeType);if(Wt(O)){const F=O.attributes;for(let V=0,Q=F.length;V<Q;V++){const re=F[V];L.attr(re.name,re.value)}Mr(L.name)&&(r(O),L.value=O.innerHTML)}else pt(O)?(L.value=O.data,u&&(L.raw=!0)):(ba(O)||yi(O)||Gl(O))&&(L.value=O.data);Mr(L.name)||hB(L,O,o,r),e.append(L)}},SH=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const m=i;xe(n,y=>y(m)),Qt(m.parent)&&m!==e?i=u:r.push(m)}for(let i=r.length-1;i>=0;i--){const u=r[i];xe(o,m=>m(u))}},xH=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),m=n.getWhitespaceElements(),y=mB(fB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),S=sv(n),O=/[ \t\r\n]+/g,L=/^[ \t\r\n]+/,F=/[ \t\r\n]+$/,V=De=>{let Oe=De.parent;for(;$e(Oe);){if(Oe.name in m)return!0;Oe=Oe.parent}return!1},Q=De=>{let Oe=De;for(;$e(Oe);){if(Oe.name in S)return c_(n,u,m,Oe);Oe=Oe.parent}return!1},re=De=>De.name in y||Gc(n,De)||Mr(De.name)&&De.parent===e,ee=(De,Oe)=>{const He=Oe?De.prev:De.next;return $e(He)||Qt(De.parent)?!1:re(De.parent)&&(De.parent!==e||r.isRootContent===!0)};return[De=>{var Oe;if(De.type===3&&!V(De)){let He=(Oe=De.value)!==null&&Oe!==void 0?Oe:"";He=He.replace(O," "),(Vi(De.prev,re)||ee(De,!0))&&(He=He.replace(L,"")),He.length===0||He===" "&&De.prev&&De.prev.type===ga&&De.next&&De.next.type===ga?De.remove():De.value=He}},De=>{var Oe;if(De.type===1){const He=n.getElementRule(De.name);if(i&&He){const ft=c_(n,u,m,De);He.paddInEmptyBlock&&ft&&Q(De)?BO(o,r,re,De):He.removeEmpty&&ft?re(De)?De.remove():De.unwrap():He.paddEmpty&&(ft||f8(De))&&BO(o,r,re,De)}}else if(De.type===3&&!V(De)){let He=(Oe=De.value)!==null&&Oe!==void 0?Oe:"";(De.next&&re(De.next)||ee(De,!1))&&(He=He.replace(F,"")),He.length===0?De.remove():De.value=He}}]},gB=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Y0=(e={},n=Kd())=>{const o=k_(),r=k_(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,m=dB(i,n),y=(Oe,He,ft="html")=>{const Rt=ft==="xhtml"?"application/xhtml+xml":"text/html",Yt=Sn(n.getSpecialElements(),He.toLowerCase()),Je=Yt?`<${He}>${Oe}</${He}>`:Oe,Ue=()=>ft==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Je}</body></html>`:/^[\s]*<head/i.test(Oe)||/^[\s]*<html/i.test(Oe)||/^[\s]*<!DOCTYPE/i.test(Oe)?`<html>${Je}</html>`:`<body>${Je}</body>`,ut=u.parseFromString(Ue(),Rt).body;return m.sanitizeHtmlElement(ut,Rt),Yt?ut.firstChild:ut},S=o.addFilter,O=o.getFilters,L=o.removeFilter,F=r.addFilter,V=r.getFilters,Q=r.removeFilter,re=(Oe,He)=>{wP(n,Oe)&&He.push(Oe)},ee=(Oe,He)=>{const ft=ce(He.attr(kD)),Rt=He.type===1&&!Sn(Oe,He.name)&&!Gc(n,He)&&!Mr(He.name);return He.type===3||Rt&&!ft},le=(Oe,He)=>{const ft=mB(fB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Rt=/^[ \t\r\n]+/,Yt=/[ \t\r\n]+$/;let Je=Oe.firstChild,Ue=null;const ut=an=>{var wn,go;an&&(Je=an.firstChild,Je&&Je.type===3&&(Je.value=(wn=Je.value)===null||wn===void 0?void 0:wn.replace(Rt,"")),Je=an.lastChild,Je&&Je.type===3&&(Je.value=(go=Je.value)===null||go===void 0?void 0:go.replace(Yt,"")))};if(n.isValidChild(Oe.name,He.toLowerCase())){for(;Je;){const an=Je.next;ee(ft,Je)?(Ue||(Ue=new cl(He,1),Ue.attr(i.forced_root_block_attrs),Oe.insert(Ue,Je)),Ue.append(Je)):(ut(Ue),Ue=null),Je=an}ut(Ue)}},De={schema:n,addAttributeFilter:F,getAttributeFilters:V,removeAttributeFilter:Q,addNodeFilter:S,getNodeFilters:O,removeNodeFilter:L,parse:(Oe,He={})=>{var ft;const Rt=i.validate,Yt=(ft=He.context)!==null&&ft!==void 0?ft:i.root_name,Je=y(Oe,Yt,He.format);Xo(n,Je);const Ue=new cl(Yt,11);hB(Ue,Je,n.getSpecialElements(),m.sanitizeNamespaceElement),Je.innerHTML="";const[ut,an]=xH(Ue,n,i,He),wn=[],go=Rt?Lr=>re(Lr,wn):Pe,wo={nodes:{},attributes:{}},ns=Lr=>yP(O(),V(),Lr,wo);if(SH(Ue,[ut,ns],[an,go]),wn.reverse(),Rt&&wn.length>0)if(He.context){const{pass:Lr,fail:Ea}=To(wn,Ts=>Ts.parent===Ue);nm(Ea,n,Ue,ns),He.invalid=Lr.length>0}else nm(wn,n,Ue,ns);const ps=gB(i,He);return ps&&(Ue.name==="body"||He.isRootContent)&&le(Ue,ps),He.invalid||NO(wo,He),Ue}};return oH(De,i),c2(De,i,n),De},h2=e=>Vp(e)?Og({validate:!1}).serialize(e):e,AD=(e,n,o)=>{const r=h2(e),i=n(r);if(i.isDefaultPrevented())return i;if(Vp(e))if(i.content!==r){const u=Y0({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},pB=e=>({sanitize:Ei(e),sandbox_iframes:Xx(e),sandbox_iframes_exclusions:Zv(e)}),OD=(e,n)=>{if(n.no_events)return lc.value(n);{const o=NM(e,n);return o.isDefaultPrevented()?lc.error(ob(e,{content:"",...o}).content):lc.value(o)}},bB=(e,n,o)=>o.no_events?n:AD(n,i=>ob(e,{...o,content:i}),pB(e)).content,B_=(e,n)=>{if(n.no_events)return lc.value(n);{const o=AD(n.content,r=>k0(e,{...n,content:r}),pB(e));return o.isDefaultPrevented()?(nb(e,o),lc.error(void 0)):lc.value(o)}},DD=(e,n,o)=>{o.no_events||nb(e,{...o,content:n})},RD=(e,n,o)=>({element:e,width:n,rows:o}),MD=(e,n)=>({element:e,cells:n}),vB=(e,n)=>({x:e,y:n}),ND=(e,n)=>wr(e,n).bind(Qi).getOr(1),yB=(e,n,o,r,i)=>{const u=ND(i,"rowspan"),m=ND(i,"colspan"),y=e.rows;for(let S=o;S<o+u;S++){y[S]||(y[S]=MD(dw(r),[]));for(let O=n;O<n+m;O++){const L=y[S].cells;L[O]=S===o&&O===n?i:Fm(i)}}},wB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},CB=(e,n,o)=>{for(;wB(e,n,o);)n++;return n},SB=e=>Mo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),xB=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(ro(i[u],n))return W.some(vB(u,r))}return W.none()},EB=(e,n,o,r,i)=>{const u=[],m=e.rows;for(let y=o;y<=i;y++){const S=m[y].cells,O=n<r?S.slice(n,r+1):S.slice(r,n+1);u.push(MD(m[y].element,O))}return u},PD=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,m=o.y,y=i<m?EB(e,r,i,u,m):EB(e,r,m,u,i);return RD(e.element,SB(y),y)},g2=(e,n)=>{const o=Fm(e.element),r=pe.fromTag("tbody");return xu(r,n),rr(o,r),o},_B=e=>dt(e.rows,n=>{const o=dt(n.cells,i=>{const u=dw(i);return Cr(u,"colspan"),Cr(u,"rowspan"),u}),r=Fm(n.element);return xu(r,o),r}),TB=e=>{const n=RD(Fm(e),0,[]);return xe(ci(e,"tr"),(o,r)=>{xe(ci(o,"td,th"),(i,u)=>{yB(n,CB(n,u,r),r,o,i)})}),RD(n.element,SB(n.rows),n.rows)},I_=e=>g2(e,_B(e)),EH=(e,n,o)=>xB(e,n).bind(r=>xB(e,o).map(i=>PD(e,r,i))),_H=e=>Po(e,n=>yo(n)==="ul"||yo(n)==="ol"),_b=(e,n)=>Po(e,o=>yo(o)==="li"&&l0(o,n)).fold(ct([]),o=>_H(e).map(r=>{const i=pe.fromTag(yo(r)),u=Wo(vi(r),(m,y)=>es(y,"list-style"));return Yn(i,u),[pe.fromTag("li"),i]}).getOr([])),BD=(e,n)=>{const o=Mo(n,(r,i)=>(rr(i,r),i),e);return n.length>0?l([o]):o},kB=e=>ag(e)?$a(e).filter(Hm).fold(ct([]),n=>[e,n]):Hm(e)?[e]:[],p2=(e,n,o)=>{const r=pe.fromDom(n.commonAncestorContainer),i=cf(r,e),u=Zt(i,S=>o.isWrapper(yo(S))),m=_b(i,n),y=u.concat(m.length?m:kB(r));return dt(y,Fm)},ID=()=>l([]),LD=(e,n,o)=>BD(pe.fromDom(n.cloneContents()),p2(e,n,o)),AB=(e,n)=>Ur(n,"table",nt(ro,e)),OB=(e,n)=>AB(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=TB(o);return EH(u,r,i).map(m=>l([I_(m)]))}).getOrThunk(ID),TH=(e,n,o)=>n.length>0&&n[0].collapsed?ID():LD(e,n[0],o),kH=(e,n,o)=>{const r=fC(n,e);return r.length>0?OB(e,r):TH(e,n,o)},L_=(e,n)=>n>=0&&n<e.length&&ch(e.charAt(n)),F_=e=>ac(e.innerText),AH=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),DB=e=>W.from(e.selection.getRng()).map(n=>{var o;const r=W.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=AH(r),m=pe.fromDom(n.cloneContents());hN(m),gN(m);const y=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},m.dom),S=F_(y),O=ac((o=y.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(y),L_(O,0)||L_(O,O.length-1)){const L=r.getOr(i),F=F_(L),V=F.indexOf(S);if(V===-1)return S;{const Q=L_(F,V-1),re=L_(F,V+S.length);return(Q?" ":"")+S+(re?" ":"")}}else return S}).getOr(""),OH=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=GE(e,i0(i)),m=n.contextual?kH(pe.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return m&&r.appendChild(m),e.selection.serializer.serialize(r,n)},DH=(e,n)=>{if(n.format==="text")return DB(e);{const o=OH(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},RH=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),MH=(e,n,o={})=>{const r=RH(o,n);return OD(e,r).fold(Hn,i=>{const u=DH(e,i);return bB(e,u,i)})},FD=0,RB=1,MB=2,NH=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(L,F,V)=>({start:L,end:F,diag:V}),m=(L,F,V,Q,re)=>{const ee=S(L,F,V,Q);if(ee===null||ee.start===F&&ee.diag===F-Q||ee.end===L&&ee.diag===L-V){let le=L,we=V;for(;le<F||we<Q;)le<F&&we<Q&&e[le]===n[we]?(re.push([FD,e[le]]),++le,++we):F-L>Q-V?(re.push([MB,e[le]]),++le):(re.push([RB,n[we]]),++we)}else{m(L,ee.start,V,ee.start-ee.diag,re);for(let le=ee.start;le<ee.end;++le)re.push([FD,e[le]]);m(ee.end,F,ee.end-ee.diag,Q,re)}},y=(L,F,V,Q)=>{let re=L;for(;re-F<Q&&re<V&&e[re]===n[re-F];)++re;return u(L,re,F)},S=(L,F,V,Q)=>{const re=F-L,ee=Q-V;if(re===0||ee===0)return null;const le=re-ee,we=ee+re,De=(we%2===0?we:we+1)/2;r[1+De]=L,i[1+De]=F+1;let Oe,He,ft,Rt,Yt;for(Oe=0;Oe<=De;++Oe){for(He=-Oe;He<=Oe;He+=2){for(ft=He+De,He===-Oe||He!==Oe&&r[ft-1]<r[ft+1]?r[ft]=r[ft+1]:r[ft]=r[ft-1]+1,Rt=r[ft],Yt=Rt-L+V-He;Rt<F&&Yt<Q&&e[Rt]===n[Yt];)r[ft]=++Rt,++Yt;if(le%2!==0&&le-Oe<=He&&He<=le+Oe&&i[ft-le]<=r[ft])return y(i[ft-le],He+L-V,F,Q)}for(He=le-Oe;He<=le+Oe;He+=2){for(ft=He+De-le,He===le-Oe||He!==le+Oe&&i[ft+1]<=i[ft-1]?i[ft]=i[ft+1]-1:i[ft]=i[ft-1],Rt=i[ft]-1,Yt=Rt-L+V-He;Rt>=L&&Yt>=V&&e[Rt]===n[Yt];)i[ft]=Rt--,Yt--;if(le%2===0&&-Oe<=He&&He<=Oe&&i[ft]<=r[ft+le])return y(i[ft],He+L-V,F,Q)}}return null},O=[];return m(0,e.length,0,n.length,O),O},NB=e=>Wt(e)?e.outerHTML:pt(e)?fd.encodeRaw(e.data,!1):ba(e)?"<!--"+e.data+"-->":"",PH=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},BH=(e,n,o)=>{const r=PH(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},$_=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},Ic=(e,n)=>{let o=0;xe(e,r=>{r[0]===FD?o++:r[0]===RB?(BH(n,r[1],o),o++):r[0]===MB&&$_(n,o)})},IH=(e,n)=>Zt(dt(_r(e.childNodes),M(ac,NB)),o=>o.length>0),H_=(e,n)=>{const o=dt(_r(n.childNodes),NB);return Ic(NH(o,e),n),n},Tb=Ye(()=>document.implementation.createHTMLDocument("undo")),PB=e=>e.querySelector("iframe")!==null,iu=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),kb=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),b2=e=>{const n=e.serializer.getTempAttrs(),o=mN(e.getBody(),n);return PB(o)?iu(IH(o)):kb(ac(o.innerHTML))},$D=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?H_(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:$e(r)&&bE(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},V_=e=>e.type==="fragmented"?e.fragments.join(""):e.content,BB=e=>{const n=pe.fromTag("body",Tb());return Eu(n,V_(e)),xe(ci(n,"*[data-mce-bogus]"),_c),Ds(n)},IB=(e,n)=>V_(e)===V_(n),v2=(e,n)=>BB(e)===BB(n),y2=(e,n)=>!e||!n?!1:IB(e,n)?!0:v2(e,n),HD=e=>e.get()===0,w2=(e,n,o)=>{HD(o)&&(e.typing=n)},LB=(e,n)=>{e.typing&&(w2(e,!1,n),e.add())},VD=e=>{e.typing&&(e.typing=!1,e.add())},zD=(e,n,o)=>{HD(n)&&o.set(Pw(e.selection))},LH=(e,n,o,r,i,u,m)=>{const y=b2(e),S=yt.extend(u||{},y);if(!HD(r)||e.removed)return null;const O=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:S,lastLevel:O,originalEvent:m}).isDefaultPrevented()||O&&y2(O,S))return null;n.data[o.get()]&&i.get().each(V=>{n.data[o.get()].beforeBookmark=V});const L=iA(e);if(L&&n.data.length>L){for(let V=0;V<n.data.length-1;V++)n.data[V]=n.data[V+1];n.data.length--,o.set(n.data.length)}S.bookmark=Pw(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(S),o.set(n.data.length-1);const F={level:S,lastLevel:O,originalEvent:m};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",F),e.dispatch("change",F)):e.dispatch("AddUndo",F),S},FH=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},dh=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,m=n.data[o.get()-1];$D(e,m,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},UD=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],$D(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},$H=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,w2(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],$D(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},z_=e=>{e.clear(),e.add()},WD=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!y2(b2(e),n.data[0]),FB=(e,n)=>n.get()<e.data.length-1&&!e.typing,$B=(e,n,o)=>(LB(e,n),e.beforeChange(),e.ignore(o),e.add()),HB=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},HH=(e,n)=>{const o=e.dom,r=$e(n)?n:e.getBody();xe(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=Ww(e),m=o.getAttrib(i,"border");(!m||m==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const y=o.getAttrib(i,"name")||i.id,S=Zw(e);y&&e.hasVisual?o.addClass(i,S):o.removeClass(i,S)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},VB=e=>({init:{bindEvents:Pe},undoManager:{beforeChange:(n,o)=>zD(e,n,o),add:(n,o,r,i,u,m)=>LH(e,n,o,r,i,u,m),undo:(n,o,r)=>$H(e,n,o,r),redo:(n,o)=>UD(e,n,o),clear:(n,o)=>FH(e,n,o),reset:n=>z_(n),hasUndo:(n,o)=>WD(e,n,o),hasRedo:(n,o)=>FB(n,o),transact:(n,o,r)=>$B(n,o,r),ignore:(n,o)=>HB(n,o),extra:(n,o,r,i)=>dh(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>f_(e,n,o,r,i),matchAll:(n,o)=>m_(e,n,o),matchNode:(n,o,r,i)=>uf(e,n,o,r,i),canApply:n=>O8(e,n),closest:n=>A8(e,n),apply:(n,o,r)=>UP(e,n,o,r),remove:(n,o,r,i)=>lD(e,n,o,r,i),toggle:(n,o,r)=>mD(e,n,o,r),formatChanged:(n,o,r,i,u)=>Y8(e,n,o,r,i,u)},editor:{getContent:n=>pN(e,n),setContent:(n,o)=>u_(e,n,o),insertContent:(n,o)=>xd(e,n,o),addVisual:n=>HH(e,n)},selection:{getContent:(n,o)=>MH(e,n,o)},autocompleter:{addDecoration:Pe,removeDecoration:Pe},raw:{getModel:()=>W.none()}}),VH=e=>{const n=O=>qe(O)?O:{},{init:o,undoManager:r,formatter:i,editor:u,selection:m,autocompleter:y,raw:S}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(O,L,F)=>r.transact(F),ignore:(O,L)=>r.ignore(L),extra:(O,L,F,V)=>r.extra(F,V)},formatter:{match:(O,L,F,V)=>i.match(O,n(L),V),matchAll:i.matchAll,matchNode:i.matchNode,canApply:O=>i.canApply(O),closest:O=>i.closest(O),apply:(O,L,F)=>i.apply(O,n(L)),remove:(O,L,F,V)=>i.remove(O,n(L)),toggle:(O,L,F)=>i.toggle(O,n(L)),formatChanged:(O,L,F,V,Q)=>i.formatChanged(L,F,V,Q)},editor:{getContent:O=>u.getContent(O),setContent:(O,L)=>({content:u.setContent(O,L),html:""}),insertContent:(O,L)=>(u.insertContent(O),""),addVisual:u.addVisual},selection:{getContent:(O,L)=>m.getContent(L)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>W.some(S.getRawModel())}}},zH=()=>{const e=ct(null),n=ct("");return{init:{bindEvents:Pe},undoManager:{beforeChange:Pe,add:e,undo:e,redo:e,clear:Pe,reset:Pe,hasUndo:tt,hasRedo:tt,transact:e,ignore:Pe,extra:Pe},formatter:{match:tt,matchAll:ct([]),matchNode:ct(void 0),canApply:tt,closest:n,apply:Pe,remove:Pe,toggle:Pe,formatChanged:ct({unbind:Pe})},editor:{getContent:n,setContent:ct({content:"",html:""}),insertContent:ct(""),addVisual:Pe},selection:{getContent:n},autocompleter:{addDecoration:Pe,removeDecoration:Pe},raw:{getModel:ct(W.none())}}},fh=e=>Sn(e.plugins,"rtc"),zB=e=>zo(e.plugins,"rtc").bind(n=>W.from(n.setup)),UH=e=>{const n=e;return zB(e).fold(()=>(n.rtcInstance=VB(e),W.none()),o=>(n.rtcInstance=zH(),W.some(()=>o().then(r=>(n.rtcInstance=VH(r),r.rtc.isRemote)))))},ZD=e=>e.rtcInstance?e.rtcInstance:VB(e),fi=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},UB=(e,n,o)=>{fi(e).undoManager.beforeChange(n,o)},jD=(e,n,o,r,i,u,m)=>fi(e).undoManager.add(n,o,r,i,u,m),qD=(e,n,o,r)=>fi(e).undoManager.undo(n,o,r),WB=(e,n,o)=>fi(e).undoManager.redo(n,o),GD=(e,n,o)=>{fi(e).undoManager.clear(n,o)},ZB=(e,n)=>{fi(e).undoManager.reset(n)},jB=(e,n,o)=>fi(e).undoManager.hasUndo(n,o),KD=(e,n,o)=>fi(e).undoManager.hasRedo(n,o),qB=(e,n,o,r)=>fi(e).undoManager.transact(n,o,r),GB=(e,n,o)=>{fi(e).undoManager.ignore(n,o)},KB=(e,n,o,r,i)=>{fi(e).undoManager.extra(n,o,r,i)},WH=(e,n,o,r,i)=>fi(e).formatter.match(n,o,r,i),YD=(e,n,o)=>fi(e).formatter.matchAll(n,o),ZH=(e,n,o,r,i)=>fi(e).formatter.matchNode(n,o,r,i),U_=(e,n)=>fi(e).formatter.canApply(n),jH=(e,n)=>fi(e).formatter.closest(n),qH=(e,n,o,r)=>{fi(e).formatter.apply(n,o,r)},GH=(e,n,o,r,i)=>{fi(e).formatter.remove(n,o,r,i)},YB=(e,n,o,r)=>{fi(e).formatter.toggle(n,o,r)},XB=(e,n,o,r,i,u)=>fi(e).formatter.formatChanged(n,o,r,i,u),KH=(e,n)=>ZD(e).editor.getContent(n),YH=(e,n,o)=>ZD(e).editor.setContent(n,o),XH=(e,n,o)=>ZD(e).editor.insertContent(n,o),JH=(e,n,o)=>fi(e).selection.getContent(n,o),QH=(e,n)=>fi(e).editor.addVisual(n),XD=e=>fi(e).init.bindEvents(),YK=(e,n={})=>{const o=n.format?n.format:"html";return JH(e,o,n)},JB=e=>e.dom.length===0?(gs(e),W.none()):W.some(e),e9=(e,n)=>e.filter(o=>Iu.isBookmarkNode(o.dom)).bind(n?bi:Ul),t9=(e,n,o,r,i)=>{const u=e.dom,m=n.dom,y=r?u.length:m.length;r?(CO(u,m,i,!1,!r),o.setStart(m,y)):(CO(m,u,i,!1,!r),o.setEnd(m,y))},n9=(e,n,o)=>{$a(e).each(r=>{const i=e.dom;n&&VC(r,Xe(i,0),o)?JE(i,0,o):!n&&L0(r,Xe(i,i.length),o)&&wO(i,i.length,o)})},QB=(e,n,o,r,i)=>{e.bind(u=>((r?wO:JE)(u.dom,r?u.dom.length:0,i),n.filter(Yr).map(y=>t9(u,y,o,r,i)))).orThunk(()=>e9(n,r).or(n).filter(Yr).map(m=>n9(m,r,i)))},o9=(e,n,o)=>{const r=W.from(n.firstChild).map(pe.fromDom),i=W.from(n.lastChild).map(pe.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Ul).filter(Yr).bind(JB),m=i.bind(bi).filter(Yr).bind(JB);QB(u,r,e,!0,o),QB(m,i,e,!1,o),e.collapse(!1)},s9=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),eI=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Og({validate:!1},e.schema).serialize(u)}else return n.content},r9=(e,n,o={})=>{const r=s9(o,n);B_(e,r).each(i=>{const u=eI(e,i),m=e.selection.getRng();o9(m,m.createContextualFragment(u),e.schema),e.selection.setRng(m),BC(e,m),DD(e,u,i)})},tI=(e,n,o)=>{if(Sn(e,n)){const r=Zt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var a9=(e,n)=>{let o,r;const i=(y,S)=>Po(S,O=>e.is(O,y)),u=y=>e.getParents(y,void 0,e.getRoot()),m=()=>{o={},r={},n.on("NodeChange",y=>{const S=y.element,O=u(S),L={};At(o,(F,V)=>{i(V,O).each(Q=>{r[V]||(xe(F,re=>{re(!0,{node:Q,selector:V,parents:O})}),r[V]=F),L[V]=F})}),At(r,(F,V)=>{L[V]||(delete r[V],xe(F,Q=>{Q(!1,{node:S,selector:V,parents:O})}))})})};return{selectorChangedWithUnbind:(y,S)=>(o||m(),o[y]||(o[y]=[]),o[y].push(S),i(y,u(n.selection.getStart())).each(()=>{r[y]=o[y]}),{unbind:()=>{tI(o,y,S),tI(r,y,S)}})}};const nI=e=>!!(e&&e.ownerDocument)&&Rr(pe.fromDom(e.ownerDocument),pe.fromDom(e)),i9=e=>e?nI(e.startContainer)&&nI(e.endContainer):!1,c9=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:m}=a9(e,r),y=(Bt,vn)=>{const $o=e.createRng();$e(Bt)&&$e(vn)?($o.setStart(Bt,vn),$o.setEnd(Bt,vn),He($o),we(!1)):(gC(e,$o,r.getBody(),!0),He($o))},S=Bt=>YK(r,Bt),O=(Bt,vn)=>r9(r,Bt,vn),L=Bt=>cO(r.getBody(),Oe(),Bt),F=Bt=>nN(r.getBody(),Oe(),Bt),V=(Bt,vn)=>Ea.getBookmark(Bt,vn),Q=Bt=>Ea.moveToBookmark(Bt),re=(Bt,vn)=>(qE(e,Bt,vn).each(He),Bt),ee=()=>{const Bt=Oe(),vn=De();return!Bt||Bt.item?!1:Bt.compareEndPoints?Bt.compareEndPoints("StartToEnd",Bt)===0:!vn||Bt.collapsed},le=()=>{const Bt=Oe(),vn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return vn.length>0?bs(vn,$o=>e.isEditable($o.parentElement)):aO(e,Bt)},we=Bt=>{const vn=Oe();vn.collapse(!!Bt),He(vn)},De=()=>n.getSelection?n.getSelection():n.document.selection,Oe=()=>{let Bt;const vn=(zt,Tn,mo)=>{try{return Tn.compareBoundaryPoints(zt,mo)}catch{return-1}},$o=n.document;if($e(r.bookmark)&&!Ag(r)){const zt=UE(r);if(zt.isSome())return zt.map(Tn=>GE(r,[Tn])[0]).getOr($o.createRange())}try{const zt=De();zt&&!Zd(zt.anchorNode)&&(zt.rangeCount>0?Bt=zt.getRangeAt(0):Bt=$o.createRange(),Bt=GE(r,[Bt])[0])}catch{}if(Bt||(Bt=$o.createRange()),Tm(Bt.startContainer)&&Bt.collapsed){const zt=e.getRoot();Bt.setStart(zt,0),Bt.setEnd(zt,0)}return i&&u&&(vn(Bt.START_TO_START,Bt,i)===0&&vn(Bt.END_TO_END,Bt,i)===0?Bt=u:(i=null,u=null)),Bt},He=(Bt,vn)=>{if(!i9(Bt))return;const $o=De();if(Bt=r.dispatch("SetSelectionRange",{range:Bt,forward:vn}).range,$o){u=Bt;try{$o.removeAllRanges(),$o.addRange(Bt)}catch{}vn===!1&&$o.extend&&($o.collapse(Bt.endContainer,Bt.endOffset),$o.extend(Bt.startContainer,Bt.startOffset)),i=$o.rangeCount>0?$o.getRangeAt(0):null}if(!Bt.collapsed&&Bt.startContainer===Bt.endContainer&&($o!=null&&$o.setBaseAndExtent)&&Bt.endOffset-Bt.startOffset<2&&Bt.startContainer.hasChildNodes()){const Tn=Bt.startContainer.childNodes[Bt.startOffset];Tn&&Tn.nodeName==="IMG"&&($o.setBaseAndExtent(Bt.startContainer,Bt.startOffset,Bt.endContainer,Bt.endOffset),($o.anchorNode!==Bt.startContainer||$o.focusNode!==Bt.endContainer)&&$o.setBaseAndExtent(Tn,0,Tn,1))}r.dispatch("AfterSetSelectionRange",{range:Bt,forward:vn})},ft=Bt=>(O(e.getOuterHTML(Bt)),Bt),Rt=()=>v7(r.getBody(),Oe()),Yt=(Bt,vn)=>y7(e,Oe(),Bt,vn),Je=()=>{const Bt=De(),vn=Bt==null?void 0:Bt.anchorNode,$o=Bt==null?void 0:Bt.focusNode;if(!Bt||!vn||!$o||Zd(vn)||Zd($o))return!0;const zt=e.createRng(),Tn=e.createRng();try{zt.setStart(vn,Bt.anchorOffset),zt.collapse(!0),Tn.setStart($o,Bt.focusOffset),Tn.collapse(!0)}catch{return!0}return zt.compareBoundaryPoints(zt.START_TO_START,Tn)<=0},Lr={dom:e,win:n,serializer:o,editor:r,expand:(Bt={type:"word"})=>He(Tt(e).expand(Oe(),Bt)),collapse:we,setCursorLocation:y,getContent:S,setContent:O,getBookmark:V,moveToBookmark:Q,select:re,isCollapsed:ee,isEditable:le,isForward:Je,setNode:ft,getNode:Rt,getSel:De,setRng:He,getRng:Oe,getStart:L,getEnd:F,getSelectedBlocks:Yt,normalize:()=>{const Bt=Oe(),vn=De();if(!TA(vn)&&Ap(r)){const $o=Mt(e,Bt);return $o.each(zt=>{He(zt,Je())}),$o.getOr(Bt)}return Bt},selectorChanged:(Bt,vn)=>(m(Bt,vn),Lr),selectorChangedWithUnbind:m,getScrollContainer:()=>{let Bt,vn=e.getRoot();for(;vn&&vn.nodeName!=="BODY";){if(vn.scrollHeight>vn.clientHeight){Bt=vn;break}vn=vn.parentNode}return Bt},scrollIntoView:(Bt,vn)=>{$e(Bt)?r7(r,Bt,vn):BC(r,Oe(),vn)},placeCaretAt:(Bt,vn)=>He(C(Bt,vn,r.getDoc())),getBoundingClientRect:()=>{const Bt=Oe();return Bt.collapsed?Xe.fromRangeStart(Bt).getClientRects()[0]:Bt.getBoundingClientRect()},destroy:()=>{n=i=u=null,Ts.destroy()}},Ea=Iu(Lr),Ts=rb(Lr,r);return Lr.bookmarkManager=Ea,Lr.controlSelection=Ts,Lr},XK=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const m=yt.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),S=o.getWhitespaceElements();m.body=1;const O=L=>L.name in m||Gc(o,L);for(let L=0,F=r.length;L<F;L++){let V=r[L],Q=V.parent;if(Q&&O(Q)&&V===Q.lastChild){let re=V.prev;for(;re;){const ee=re.name;if(ee!=="span"||re.attr("data-mce-type")!=="bookmark"){ee==="br"&&(V=null);break}re=re.prev}if(V&&(V.remove(),c_(o,y,S,Q))){const ee=o.getElementRule(Q.name);ee&&(ee.removeEmpty?Q.remove():ee.paddEmpty&&BO(e,u,O,Q))}}else{let re=V;for(;Q&&Q.firstChild===re&&Q.lastChild===re&&(re=Q,!m[Q.name]);)Q=Q.parent;if(re===Q){const ee=new cl("#text",3);ee.value=Xr,V.replace(ee)}}}})},l9=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.attr("tabindex",m.attr("data-mce-tabindex")),m.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,m=n.url_converter,y=n.url_converter_scope;let S=r.length;for(;S--;){const O=r[S];let L=O.attr(u);L!==void 0?(O.attr(i,L.length>0?L:null),O.attr(u,null)):(L=O.attr(i),i==="style"?L=o.serializeStyle(o.parseStyle(L),O.name):m&&(L=m.call(y,L,i,O.name)),O.attr(i,L.length>0?L:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let m=u.attr("class");m&&(m=m.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",m.length>0?m:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let m=r.length;for(;m--;){const y=r[m];y.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(W.from(y.firstChild).exists(O=>{var L;return!vw((L=O.value)!==null&&L!==void 0?L:"")})?y.unwrap():y.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const m=S=>S.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=r.length;for(;y--;){const S=r[y],O=S.firstChild,L=(u=O==null?void 0:O.value)!==null&&u!==void 0?u:"";if(i==="script"){const F=S.attr("type");F&&S.attr("type",F==="mce-no/type"?null:F.replace(/^mce\-/,"")),n.element_format==="xhtml"&&O&&L.length>0&&(O.value=`// <![CDATA[
`+m(L)+`
// ]]>`)}else n.element_format==="xhtml"&&O&&L.length>0&&(O.value=`<!--
`+m(L)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],m=u.value;n.preserve_cdata&&(m==null?void 0:m.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(m.replace(/^\[CDATA\[|\]\]$/g,""))):(m==null?void 0:m.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(m).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const m=r[u];m.type===7?m.remove():m.type===1&&i==="input"&&!m.attr("type")&&m.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{xe(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&XK(n,e,e.schema)},u9=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},JK=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const m=document.implementation;if(m.createHTMLDocument){const y=m.createHTMLDocument("");yt.each(u.nodeName==="BODY"?u.childNodes:[u],S=>{y.body.appendChild(y.importNode(S,!0))}),u.nodeName!=="BODY"?u=y.body.firstChild:u=y.body,r=i.doc,i.doc=y}return PA(e,{...o,node:u}),r&&(i.doc=r),u},d9=(e,n)=>$e(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,jr=(e,n,o)=>d9(e,o)?JK(e,n,o):n,JD=(e,n,o)=>{yt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},QK=(e,n,o)=>!n.no_events&&e?x0(e,{...n,content:o}).content:o,f9=(e,n,o)=>{const r=ac(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||mv(pe.fromDom(n))?r:yt.trim(r)},m9=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return u9(i),i},X0=(e,n,o)=>Og(e,n).serialize(o),eY=(e,n,o,r,i)=>{const u=X0(n,o,r);return QK(e,i,u)},tY=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Ks.DOM,u=n&&n.schema?n.schema:Kd(r),m=Y0(r,u);l9(m,r,i);const y=(S,O={})=>{const L={format:"html",...O},F=jr(n,S,L),V=f9(i,F,L),Q=m9(m,V,L);return L.format==="tree"?Q:eY(n,r,u,Q,L)};return{schema:u,addNodeFilter:m.addNodeFilter,addAttributeFilter:m.addAttributeFilter,serialize:y,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:nt(JD,m,o),getTempAttrs:ct(o),getNodeFilters:m.getNodeFilters,getAttributeFilters:m.getAttributeFilters,removeNodeFilter:m.removeNodeFilter,removeAttributeFilter:m.removeAttributeFilter}},zi=(e,n)=>{const o=tY(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},oI="html",sI=(e,n)=>({...e,format:n,get:!0,getInner:!0}),rI=(e,n={})=>{const o=n.format?n.format:oI,r=sI(n,o);return OD(e,r).fold(Hn,i=>{const u=KH(e,i);return bB(e,u,i)})},h9="html",g9=(e,n)=>({format:h9,...e,set:!0,content:n}),J0=(e,n,o={})=>{const r=g9(o,n);return B_(e,r).map(i=>{const u=YH(e,i.content,i);return DD(e,u.html,i),u.content}).getOr(n)},p9="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),QD=[],b9="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),e4=[],t4=(e,n)=>{const o=Zt(n,r=>Sn(e,r));return Vo(o)},n4=e=>{const n=t4(e,p9),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Vo(n)},aI=e=>t4(e,QD),W_=(e,n)=>{const o=yt.makeMap(e.plugins," "),i=Zt(n,u=>Sn(o,u));return Vo(i)},v9=e=>W_(e,b9),y9=e=>W_(e,e4.map(n=>n.name)),w9=(e,n)=>{const o=n4(e),r=v9(n),i=r.length>0,u=o.length>0,m=n.theme==="mobile";if(i||u||m){const y=`
- `,S=m?`

Themes:${y}mobile`:"",O=i?`

Plugins:${y}${r.join(y)}`:"",L=u?`

Options:${y}${o.join(y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+S+O+L)}},kd=e=>Po(e4,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),C9=(e,n)=>{const o=aI(e),r=y9(n),i=r.length>0,u=o.length>0;if(i||u){const m=`
- `,y=i?`

Plugins:${m}${r.map(kd).join(m)}`:"",S=u?`

Options:${m}${o.join(m)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+y+S)}},S9=(e,n)=>{w9(e,n),C9(e,n)},Z_=Ks.DOM,x9=e=>{Z_.setStyle(e.id,"display",e.orgDisplay)},j_=e=>W.from(e).each(n=>n.destroy()),iI=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},E9=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Z_.unbind(n,"submit reset",e.formEventDelegate))},_9=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&$e(i==null?void 0:i.nextSibling)&&Z_.remove(i.nextSibling),E0(e),e.editorManager.remove(e),!e.inline&&r&&x9(e),BA(e),Z_.remove(e.getContainer()),j_(n),j_(o),e.destroy()}},T9=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),j_(o),j_(r)),E9(e),iI(e),e.destroyed=!0}},q_=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>Sn(e,i)}})(),Q0=rc.ModelManager,s4=(e,n)=>n.dom[e],G_=(e,n)=>parseInt(Wr(n,e),10),k9=nt(s4,"clientWidth"),A9=nt(s4,"clientHeight"),nY=nt(G_,"margin-top"),O9=nt(G_,"margin-left"),C2=e=>e.dom.getBoundingClientRect(),cI=(e,n,o)=>{const r=k9(e),i=A9(e);return n>=0&&o>=0&&n<=r&&o<=i},lI=(e,n,o,r)=>{const i=C2(n),u=e?i.left+n.dom.clientLeft+O9(n):0,m=e?i.top+n.dom.clientTop+nY(n):0,y=o-u,S=r-m;return{x:y,y:S}},D9=(e,n,o)=>{const r=pe.fromDom(e.getBody()),i=e.inline?r:Af(r),u=lI(e.inline,i,n,o);return cI(i,u.x,u.y)},uI=e=>W.from(e).map(pe.fromDom),R9=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return uI(n).map(nd).getOr(!1)};var M9=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const dI=e=>{const n=[],o=()=>{const V=e.theme;return V&&V.getNotificationManagerImpl?V.getNotificationManagerImpl():M9()},r=()=>W.from(n[0]),i=(V,Q)=>V.type===Q.type&&V.text===Q.text&&!V.progressBar&&!V.timeout&&!Q.progressBar&&!Q.timeout,u=()=>{r().each(V=>{V.reposition()})},m=V=>{n.push(V)},y=V=>{Is(n,Q=>Q===V).each(Q=>{n.splice(Q,1)})},S=(V,Q=!0)=>e.removed||!R9(e)?{}:(Q&&e.dispatch("BeforeOpenNotification",{notification:V}),Po(n,re=>i(o().getArgs(re),V)).getOrThunk(()=>{e.editorManager.setActive(e);const re=o().open(V,()=>{y(re)},()=>tN(e));return m(re),u(),e.dispatch("OpenNotification",{notification:{...re}}),re})),O=()=>{r().each(V=>{o().close(V),y(V),u()})},L=ct(n);return(V=>{V.on("SkinLoaded",()=>{const Q=uc(V);Q&&S({text:Q,type:"warning",timeout:0},!1),u()}),V.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),V.on("remove",()=>{xe(n.slice(),Q=>{o().close(Q)})}),V.addShortcut("alt+F12","Focus to notification",()=>r().map(Q=>pe.fromDom(Q.getEl())).each(Q=>R0(Q)))})(e),{open:S,close:O,getNotifications:L}},ey=rc.PluginManager,jp=rc.ThemeManager;var N9=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const fI=e=>{let n=[];const o=()=>{const ee=e.theme;return ee&&ee.getWindowManagerImpl?ee.getWindowManagerImpl():N9()},r=(ee,le)=>(...we)=>le?le.apply(ee,we):void 0,i=ee=>{e.dispatch("OpenWindow",{dialog:ee})},u=ee=>{e.dispatch("CloseWindow",{dialog:ee})},m=ee=>{n.push(ee),i(ee)},y=ee=>{u(ee),n=Zt(n,le=>le!==ee),n.length===0&&e.focus()},S=()=>W.from(n[n.length-1]),O=ee=>{e.editorManager.setActive(e),IC(e),e.ui.show();const le=ee();return m(le),le},L=(ee,le)=>O(()=>o().open(ee,le,y)),F=ee=>O(()=>o().openUrl(ee,y)),V=(ee,le,we)=>{const De=o();De.alert(ee,r(we||De,le))},Q=(ee,le,we)=>{const De=o();De.confirm(ee,r(we||De,le))},re=()=>{S().each(ee=>{o().close(ee),y(ee)})};return e.on("remove",()=>{xe(n,ee=>{o().close(ee)})}),{open:L,openUrl:F,alert:V,confirm:Q,close:re}},ty=(e,n)=>{e.notificationManager.open({type:"error",text:n})},S2=(e,n)=>{e._skinLoaded?ty(e,n):e.on("SkinLoaded",()=>{ty(e,n)})},mI=(e,n)=>{S2(e,za.translate(["Failed to upload image: {0}",n]))},x2=(e,n,o)=>{Ti(e,n,{message:o}),console.error(o)},E2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,P9=(e,n,o)=>{x2(e,"PluginLoadError",E2("plugin",n,o))},hI=(e,n,o)=>{x2(e,"IconsLoadError",E2("icons",n,o))},B9=(e,n,o)=>{x2(e,"LanguageLoadError",E2("language",n,o))},I9=(e,n,o)=>{x2(e,"ThemeLoadError",E2("theme",n,o))},L9=(e,n,o)=>{x2(e,"ModelLoadError",E2("model",n,o))},F9=(e,n,o)=>{const r=za.translate(["Failed to initialize plugin: {0}",n]);Ti(e,"PluginLoadError",{message:r}),r4(r,o),S2(e,r)},r4=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},am=e=>/^[a-z0-9\-]+$/i.test(e),_2=e=>"content/"+e+"/content.css",$9=e=>tinymce.Resource.has(_2(e)),H9=e=>gI(e,oA(e)),V9=e=>gI(e,Nc(e)),gI=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return dt(n,u=>$9(u)?u:am(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},fs=e=>{e.contentCSS=e.contentCSS.concat(H9(e),V9(e))},z9=e=>e?_r(e.getElementsByTagName("img")):[],T2=(e,n)=>{const o={};return{findAll:(i,u=wt)=>{const m=Zt(z9(i),S=>{const O=S.src;return S.hasAttribute("data-mce-bogus")||S.hasAttribute("data-mce-placeholder")||!O||O===pn.transparentSrc?!1:es(O,"blob:")?!e.isUploaded(O)&&u(S):es(O,"data:")?u(S):!1}),y=dt(m,S=>{const O=S.src;if(Sn(o,O))return o[O].then(L=>ce(L)?L:{image:S,blobInfo:L.blobInfo});{const L=tH(n,O).then(F=>(delete o[O],{image:S,blobInfo:F})).catch(F=>(delete o[O],F));return o[O]=L,L}});return Promise.all(y)}}},pI=()=>{let o={};const r=(V,Q)=>({status:V,resultUri:Q}),i=V=>V in o;return{hasBlobUri:i,getResultUri:V=>{const Q=o[V];return Q?Q.resultUri:null},isPending:V=>i(V)?o[V].status===1:!1,isUploaded:V=>i(V)?o[V].status===2:!1,markPending:V=>{o[V]=r(1,null)},markUploaded:(V,Q)=>{o[V]=r(2,Q)},removeFailed:V=>{delete o[V]},destroy:()=>{o={}}}};let U9=0;const W9=()=>{const e=()=>Math.round(uw()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},bI=e=>e+U9+++W9(),qp=()=>{let e=[];const n=F=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[F.toLowerCase()]||"dat",o=(F,V,Q,re,ee)=>{if(ce(F))return r({id:F,name:re,filename:ee,blob:V,base64:Q});if(qe(F))return r(F);throw new Error("Unknown input type")},r=F=>{if(!F.blob||!F.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const V=F.id||bI("blobid"),Q=F.name||V,re=F.blob;return{id:ct(V),name:ct(Q),filename:ct(F.filename||Q+"."+n(re.type)),blob:ct(re),base64:ct(F.base64),blobUri:ct(F.blobUri||URL.createObjectURL(re)),uri:ct(F.uri)}},i=F=>{m(F.id())||e.push(F)},u=F=>Po(e,F).getOrUndefined(),m=F=>u(V=>V.id()===F);return{create:o,add:i,get:m,getByUri:F=>u(V=>V.blobUri()===F),getByData:(F,V)=>u(Q=>Q.base64()===F&&Q.blob().type===V),findFirst:u,removeByUri:F=>{e=Zt(e,V=>V.blobUri()===F?(URL.revokeObjectURL(V.blobUri()),!1):!0)},destroy:()=>{xe(e,F=>{URL.revokeObjectURL(F.blobUri())}),e=[]}}},Rl=(e,n)=>{const o={},r=(ee,le)=>ee?ee.replace(/\/$/,"")+"/"+le.replace(/^\//,""):le,i=(ee,le)=>new Promise((we,De)=>{const Oe=new XMLHttpRequest;Oe.open("POST",n.url),Oe.withCredentials=n.credentials,Oe.upload.onprogress=ft=>{le(ft.loaded/ft.total*100)},Oe.onerror=()=>{De("Image upload failed due to a XHR Transport error. Code: "+Oe.status)},Oe.onload=()=>{if(Oe.status<200||Oe.status>=300){De("HTTP Error: "+Oe.status);return}const ft=JSON.parse(Oe.responseText);if(!ft||!ce(ft.location)){De("Invalid JSON: "+Oe.responseText);return}we(r(n.basePath,ft.location))};const He=new FormData;He.append("file",ee.blob(),ee.filename()),Oe.send(He)}),u=ve(n.handler)?n.handler:i,m=()=>new Promise(ee=>{ee([])}),y=(ee,le)=>({url:le,blobInfo:ee,status:!0}),S=(ee,le)=>({url:"",blobInfo:ee,status:!1,error:le}),O=(ee,le)=>{yt.each(o[ee],we=>{we(le)}),delete o[ee]},L=(ee,le,we)=>(e.markPending(ee.blobUri()),new Promise(De=>{let Oe,He;try{const ft=()=>{Oe&&(Oe.close(),He=Pe)},Rt=Je=>{ft(),e.markUploaded(ee.blobUri(),Je),O(ee.blobUri(),y(ee,Je)),De(y(ee,Je))},Yt=Je=>{ft(),e.removeFailed(ee.blobUri()),O(ee.blobUri(),S(ee,Je)),De(S(ee,Je))};He=Je=>{Je<0||Je>100||W.from(Oe).orThunk(()=>W.from(we).map(to)).each(Ue=>{Oe=Ue,Ue.progressBar.value(Je)})},le(ee,He).then(Rt,Je=>{Yt(ce(Je)?{message:Je}:Je)})}catch(ft){De(S(ee,ft))}})),F=ee=>ee===i,V=ee=>{const le=ee.blobUri();return new Promise(we=>{o[le]=o[le]||[],o[le].push(we)})},Q=(ee,le)=>(ee=yt.grep(ee,we=>!e.isUploaded(we.blobUri())),Promise.all(yt.map(ee,we=>e.isPending(we.blobUri())?V(we):L(we,u,le))));return{upload:(ee,le)=>!n.url&&F(u)?m():Q(ee,le)}},ny=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Bg=(e,n)=>Rl(n,{url:Rv(e),basePath:Mv(e),credentials:Dx(e),handler:Rx(e)}),mh=e=>{const n=pI(),o=Bg(e,n);return{upload:(r,i=!0)=>o.upload(r,i?ny(e):void 0)}},k2=(e,n)=>e.dom.isEmpty(n.dom)&&$e(e.schema.getTextBlockElements()[yo(n)]),a4=e=>n=>{k2(e,n)&&rr(n,pe.fromHtml('<br data-mce-bogus="1" />'))},i4=e=>{const n=qp();let o,r;const i=pI(),u=[],m=Oe=>He=>e.selection?Oe(He):[],y=Oe=>Oe+(Oe.indexOf("?")===-1?"?":"&")+new Date().getTime(),S=(Oe,He,ft)=>{let Rt=0;do Rt=Oe.indexOf(He,Rt),Rt!==-1&&(Oe=Oe.substring(0,Rt)+ft+Oe.substr(Rt+He.length),Rt+=ft.length-He.length+1);while(Rt!==-1);return Oe},O=(Oe,He,ft)=>{const Rt=`src="${ft}"${ft===pn.transparentSrc?' data-mce-placeholder="1"':""}`;return Oe=S(Oe,`src="${He}"`,Rt),Oe=S(Oe,'data-mce-src="'+He+'"','data-mce-src="'+ft+'"'),Oe},L=(Oe,He)=>{xe(e.undoManager.data,ft=>{ft.type==="fragmented"?ft.fragments=dt(ft.fragments,Rt=>O(Rt,Oe,He)):ft.content=O(ft.content,Oe,He)})},F=(Oe,He)=>{const ft=e.convertURL(He,"src");L(Oe.src,He),Zc(pe.fromDom(Oe),{src:us(e)?y(He):He,"data-mce-src":ft})},V=()=>(o||(o=Bg(e,i)),le().then(m(Oe=>{const He=dt(Oe,ft=>ft.blobInfo);return o.upload(He,ny(e)).then(m(ft=>{const Rt=[];let Yt=!1;const Je=dt(ft,(Ue,ut)=>{const{blobInfo:an,image:wn}=Oe[ut];let go=!1;return Ue.status&&xi(e)?(Ue.url&&!Ko(wn.src,Ue.url)&&(Yt=!0),n.removeByUri(wn.src),fh(e)||F(wn,Ue.url)):Ue.error&&(Ue.error.remove&&(L(wn.src,pn.transparentSrc),Rt.push(wn),go=!0),mI(e,Ue.error.message)),{element:wn,status:Ue.status,uploadUri:Ue.url,blobInfo:an,removed:go}});return Rt.length>0&&!fh(e)?e.undoManager.transact(()=>{xe(Zl(Rt),Ue=>{const ut=$a(Ue);gs(Ue),ut.each(a4(e)),n.removeByUri(Ue.dom.src)})}):Yt&&e.undoManager.dispatchChange(),Je}))}))),Q=()=>Pr(e)?V():Promise.resolve([]),re=Oe=>bs(u,He=>He(Oe)),ee=Oe=>{u.push(Oe)},le=()=>(r||(r=T2(i,n)),r.findAll(e.getBody(),re).then(m(Oe=>{const He=Zt(Oe,ft=>ce(ft)?(S2(e,ft),!1):ft.uriType!=="blob");return fh(e)||xe(He,ft=>{L(ft.image.src,ft.blobInfo.blobUri()),ft.image.src=ft.blobInfo.blobUri(),ft.image.removeAttribute("data-mce-src")}),He}))),we=()=>{n.destroy(),i.destroy(),r=o=null},De=Oe=>Oe.replace(/src="(blob:[^"]+)"/g,(He,ft)=>{const Rt=i.getResultUri(ft);if(Rt)return'src="'+Rt+'"';let Yt=n.getByUri(ft);return Yt||(Yt=Mo(e.editorManager.get(),(Je,Ue)=>Je||Ue.editorUpload&&Ue.editorUpload.blobCache.getByUri(ft),void 0)),Yt?'src="data:'+Yt.blob().type+";base64,"+Yt.base64()+'"':He});return e.on("SetContent",()=>{Pr(e)?Q():le()}),e.on("RawSaveContent",Oe=>{Oe.content=De(Oe.content)}),e.on("GetContent",Oe=>{Oe.source_view||Oe.format==="raw"||Oe.format==="tree"||(Oe.content=De(Oe.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Oe=>{xe(Oe,He=>{const ft=He.attr("src");if(!ft||n.getByUri(ft))return;const Rt=i.getResultUri(ft);Rt&&He.attr("src",Rt)})})}),{blobCache:n,addFilter:ee,uploadImages:V,uploadImagesAuto:Q,scanForImages:le,destroy:we}},vI=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[m,i,u]:[i,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,m)=>Wt(i)&&i.hasAttribute("href"),onformat:(i,u,m)=>{yt.each(m,(y,S)=>{n.setAttrib(i,S,y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return yt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},c4={remove_similar:!0,inherit:!1},oy={selector:"td,th",...c4},Z9={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...oy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...oy},tablecellbordercolor:{styles:{borderColor:"%value"},...oy},tablecellclass:{classes:["%value"],...oy},tableclass:{selector:"table",classes:["%value"],...c4},tablecellborderstyle:{styles:{borderStyle:"%value"},...oy},tablecellborderwidth:{styles:{borderWidth:"%value"},...oy}},yI=ct(Z9),wI=e=>{const n={},o=m=>$e(m)?n[m]:n,r=m=>Sn(n,m),i=(m,y)=>{m&&(ce(m)?(jt(y)||(y=[y]),xe(y,S=>{Pn(S.deep)&&(S.deep=!ou(S)),Pn(S.split)&&(S.split=!ou(S)||Wa(S)),Pn(S.remove)&&ou(S)&&!Wa(S)&&(S.remove="none"),ou(S)&&Wa(S)&&(S.mixed=!0,S.block_expand=!0),ce(S.classes)&&(S.classes=S.classes.split(/\s+/))}),n[m]=y):At(m,(S,O)=>{i(O,S)}))},u=m=>(m&&n[m]&&delete n[m],n);return i(vI(e)),i(yI()),i(Bx(e)),{get:o,has:r,register:i,unregister:u}},A2=yt.each,zu=Ks.DOM,O2=e=>$e(e)&&qe(e),j9=(e,n)=>{const o=n&&n.schema||Kd({}),r=(S,O)=>{O.classes.length>0&&zu.addClass(S,O.classes.join(" ")),zu.setAttribs(S,O.attrs)},i=S=>{const O=ce(S)?{name:S,classes:[],attrs:{}}:S,L=zu.create(O.name);return r(L,O),L},u=(S,O)=>{const L=o.getElementRule(S.nodeName.toLowerCase()),F=L==null?void 0:L.parentsRequired;return F&&F.length?O&&et(F,O)?O:F[0]:!1},m=(S,O,L)=>{let F;const V=O[0],Q=O2(V)?V.name:void 0,re=u(S,Q);if(re)Q===re?(F=V,O=O.slice(1)):F=re;else if(V)F=V,O=O.slice(1);else if(!L)return S;const ee=F?i(F):zu.create("div");ee.appendChild(S),L&&yt.each(L,we=>{const De=i(we);ee.insertBefore(De,S)});const le=O2(F)?F.siblings:void 0;return m(ee,O,le)},y=zu.create("div");if(e.length>0){const S=e[0],O=i(S),L=O2(S)?S.siblings:void 0;y.appendChild(m(O,e.slice(1),L))}return y},q9=e=>{e=yt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,m,y)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":yt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(m==="["){const S=y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);S&&(o.attrs[S[1]]=S[2])}return""})),o.name=n||"div",o},oY=e=>ce(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),yt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=yt.map(n.split(/(?:~\+|~|\+)/),q9),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],G9=(e,n)=>{let o="",r=zw(e);if(r==="")return"";const i=V=>ce(V)?V.replace(/%(\w+)/g,""):"",u=(V,Q)=>zu.getStyle(Q??e.getBody(),V,!0);if(ce(n)){const V=e.formatter.get(n);if(!V)return"";n=V[0]}if("preview"in n){const V=n.preview;if(V===!1)return"";r=V||r}let m=n.block||n.inline||"span",y;const S=oY(n.selector);S.length>0?(S[0].name||(S[0].name=m),m=n.selector,y=j9(S,e)):y=j9([m],e);const O=zu.select(m,y)[0]||y.firstChild;A2(n.styles,(V,Q)=>{const re=i(V);re&&zu.setStyle(O,Q,re)}),A2(n.attributes,(V,Q)=>{const re=i(V);re&&zu.setAttrib(O,Q,re)}),A2(n.classes,V=>{const Q=i(V);zu.hasClass(O,Q)||zu.addClass(O,Q)}),e.dispatch("PreviewFormats"),zu.setStyles(y,{position:"absolute",left:-65535}),e.getBody().appendChild(y);const L=u("fontSize"),F=/px$/.test(L)?parseInt(L,10):0;return A2(r.split(" "),V=>{let Q=u(V,O);if(!(V==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Q)&&(Q=u(V),hd(Q).toLowerCase()==="#ffffff"))&&!(V==="color"&&hd(Q).toLowerCase()==="#000000")){if(V==="font-size"&&/em|%$/.test(Q)){if(F===0)return;Q=parseFloat(Q)/(/%$/.test(Q)?100:1)*F+"px"}V==="border"&&Q&&(o+="padding:0 2px;"),o+=V+":"+Q+";"}}),e.dispatch("AfterPreviewFormats"),zu.remove(y),o},K9=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},im=e=>{const n=wI(e),o=Be({});return K9(e),kP(e),fh(e)||dD(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{qH(e,r,i,u)},remove:(r,i,u,m)=>{GH(e,r,i,u,m)},toggle:(r,i,u)=>{YB(e,r,i,u)},match:(r,i,u,m)=>WH(e,r,i,u,m),closest:r=>jH(e,r),matchAll:(r,i)=>YD(e,r,i),matchNode:(r,i,u,m)=>ZH(e,r,i,u,m),canApply:r=>U_(e,r),formatChanged:(r,i,u,m)=>XB(e,o,r,i,u,m),getCssText:nt(G9,e)}},Y9=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},sY=(e,n,o)=>{const r=Be(!1),i=S=>{w2(n,!1,o),n.add({},S)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",S=>{const O=S.command;Y9(O)||(LB(n,o),n.beforeChange())}),e.on("ExecCommand",S=>{const O=S.command;Y9(O)||i(S)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",S=>{const O=S.keyCode;if(S.isDefaultPrevented())return;const L=pn.os.isMacOS()&&S.key==="Meta";(O>=33&&O<=36||O>=37&&O<=40||O===45||S.ctrlKey||L)&&(i(),e.nodeChanged()),(O===46||O===8)&&e.nodeChanged(),r.get()&&n.typing&&!y2(b2(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",S=>{const O=S.keyCode;if(S.isDefaultPrevented())return;if(O>=33&&O<=36||O>=37&&O<=40||O===45){n.typing&&i(S);return}const L=S.ctrlKey&&!S.altKey||S.metaKey;if((O<16||O>20)&&O!==224&&O!==91&&!n.typing&&!L){n.beforeChange(),w2(n,!0,o),n.add({},S),r.set(!0);return}(pn.os.isMacOS()?S.metaKey:S.ctrlKey&&!S.altKey)&&n.beforeChange()}),e.on("mousedown",S=>{n.typing&&i(S)});const u=S=>S.inputType==="insertReplacementText",m=S=>S.inputType==="insertText"&&S.data===null,y=S=>S.inputType==="insertFromPaste"||S.inputType==="insertFromDrop";e.on("input",S=>{S.inputType&&(u(S)||m(S)||y(S))&&i(S)}),e.on("AddUndo Undo Redo ClearUndos",S=>{S.isDefaultPrevented()||e.nodeChanged()})},X9=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},sy=e=>{const n=Ci(),o=Be(0),r=Be(0),i={data:[],typing:!1,beforeChange:()=>{UB(e,o,n)},add:(u,m)=>jD(e,i,r,o,n,u,m),dispatchChange:()=>{e.setDirty(!0);const u=b2(e);u.bookmark=Pw(e.selection),e.dispatch("change",{level:u,lastLevel:vc(i.data,r.get()).getOrUndefined()})},undo:()=>qD(e,i,o,r),redo:()=>WB(e,r,i.data),clear:()=>{GD(e,i,r)},reset:()=>{ZB(e,i)},hasUndo:()=>jB(e,i,r),hasRedo:()=>KD(e,i,r),transact:u=>qB(e,i,o,u),ignore:u=>{GB(e,o,u)},extra:(u,m)=>{KB(e,i,r,u,m)}};return fh(e)||sY(e,i,o),X9(e),i},J9=[9,27,bt.HOME,bt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,bt.DOWN,bt.UP,bt.LEFT,bt.RIGHT].concat(pn.browser.isFirefox()?[224]:[]),l4="data-mce-placeholder",u4=e=>e.type==="keydown"||e.type==="keyup",d4=e=>{const n=e.keyCode;return n===bt.BACKSPACE||n===bt.DELETE},Q9=e=>{if(u4(e)){const n=e.keyCode;return!d4(e)&&(bt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||et(J9,n))}else return!1},eV=e=>u4(e)&&!(d4(e)||e.type==="keyup"&&e.keyCode===229),Gp=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},tV=e=>{var n;const o=e.dom,r=Si(e),i=(n=I1(e))!==null&&n!==void 0?n:"",u=(m,y)=>{if(Q9(m))return;const S=e.getBody(),O=eV(m)?!1:Gp(o,S,r);(o.getAttrib(S,l4)!==""!==O||y)&&(o.setAttrib(S,l4,O?i:null),T0(e,O),e.on(O?"keydown":"keyup",u),e.off(O?"keyup":"keydown",u))};xo(i)&&e.on("init",m=>{u(m,!0),e.on("change SetContent ExecCommand",u),e.on("paste",y=>$u.setEditorTimeout(e,()=>u(y)))})},nV=(e,n)=>({block:e,position:n}),oV=(e,n)=>({from:e,to:n}),f4=(e,n)=>{const o=pe.fromDom(e),r=pe.fromDom(n.container());return nr(o,r).map(i=>nV(i,n))},sV=e=>!(Rr(e.to.block,e.from.block)||Rr(e.from.block,e.to.block)),rV=e=>!ro(e.from.block,e.to.block),CI=(e,n)=>Qs(n,i=>D1(i)||rt(i.dom),i=>ro(i,e)).filter(Fa).getOr(e),aV=(e,n)=>{const o=pe.fromDom(e);return ro(CI(o,n.from.block),CI(o,n.to.block))},iV=e=>Fo(e.from.block.dom)===!1&&Fo(e.to.block.dom)===!1,K_=e=>{const n=o=>Mu(o)||Va(o.dom)||ag(o);return n(e.from.block)&&n(e.to.block)},cV=(e,n,o,r)=>Lo(r.position.getNode())&&!Bs(e,r.block)?ih(!1,r.block.dom).bind(i=>i.isEqual(r.position)?Pc(o,n,i).bind(u=>f4(n,u)):W.some(r)).getOr(r):r,lV=(e,n,o,r)=>{const i=f4(n,Xe.fromRangeStart(r)),u=i.bind(m=>Pc(o,n,m.position).bind(y=>f4(n,y).map(S=>cV(e,n,o,S))));return Xn(i,u,oV).filter(m=>rV(m)&&aV(n,m)&&iV(m)&&K_(m)&&sV(m))},rY=(e,n,o,r)=>r.collapsed?lV(e,n,o,r):W.none(),D2=(e,n)=>{const o=ra(e);return Is(o,r=>n.isBlock(yo(r))).fold(ct(o),r=>o.slice(0,r))},SI=(e,n)=>{const o=D2(e,n);return xe(o,gs),o},Y_=(e,n,o)=>{const r=cf(o,n);return Po(r.reverse(),i=>Bs(e,i)).each(gs)},uV=(e,n)=>Zt(Fh(n),o=>!Bs(e,o)).length===0,dV=(e,n,o,r,i)=>{if(Bs(r,o))return eu(o),_i(o.dom);uV(r,i)&&Bs(r,n)&&ii(i,pe.fromTag("br"));const u=rl(o.dom,Xe.before(i.dom));return xe(SI(n,r),m=>{ii(i,m)}),Y_(r,e,n),u},fV=(e,n)=>e.isInline(yo(n)),mV=(e,n,o,r)=>{if(Bs(r,o)){if(Bs(r,n)){const m=ss((y=>{const S=(O,L)=>ai(O).fold(()=>L,F=>fV(r,F)?S(F,L.concat(Fm(F))):L);return S(y,[])})(o),(y,S)=>(rd(y,S),S),ig());ad(n),rr(n,m)}return gs(o),_i(n.dom)}const i=tu(o.dom);return xe(SI(n,r),u=>{rr(o,u)}),Y_(r,e,n),i},Ab=(e,n)=>{const o=cf(n,e);return W.from(o[o.length-1])},Ob=(e,n)=>Rr(n,e)?Ab(n,e):W.none(),R2=(e,n)=>{ih(e,n.dom).bind(o=>W.from(o.getNode())).map(pe.fromDom).filter(el).each(gs)},M2=(e,n,o,r)=>(R2(!0,n),R2(!1,o),Ob(n,o).fold(nt(mV,e,n,o,r),nt(dV,e,n,o,r))),Kp=(e,n,o,r,i)=>n?M2(e,r,o,i):M2(e,o,r,i),Ig=(e,n)=>{const o=pe.fromDom(e.getBody());return rY(e.schema,o.dom,n,e.selection.getRng()).map(i=>()=>{Kp(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},X_=(e,n,o)=>{const r=n.getRng();return Xn(nr(e,pe.fromDom(r.startContainer)),nr(e,pe.fromDom(r.endContainer)),(i,u)=>ro(i,u)?W.none():W.some(()=>{r.deleteContents(),Kp(e,!0,i,u,o).each(m=>{n.setRng(m.toRange())})})).getOr(W.none())},N2=(e,n)=>{const o=pe.fromDom(n),r=nt(ro,e);return qs(o,D1,r).isSome()},xI=(e,n)=>N2(e,n.startContainer)||N2(e,n.endContainer),m4=(e,n)=>{const o=rl(e.dom,Xe.fromRangeStart(n)).isNone(),r=Bc(e.dom,Xe.fromRangeEnd(n)).isNone();return!xI(e,n)&&o&&r},h4=e=>W.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),EI=e=>{const n=pe.fromDom(e.getBody()),o=e.selection.getRng();return m4(n,o)?h4(e):X_(n,e.selection,e.schema)},J_=(e,n)=>e.selection.isCollapsed()?W.none():EI(e),Uu=(e,n,o,r,i)=>W.from(n._selectionOverrides.showCaret(e,o,r,i)),_I=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},ry=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?W.none():W.some(_I(n)),TI=(e,n,o)=>{const r=di(1,e.getBody(),n),i=Xe.fromRangeStart(r),u=i.getNode();if(yp(u))return Uu(1,e,u,!i.isAtEnd(),!1);const m=i.getNode(!0);if(yp(m))return Uu(1,e,m,!1,!1);const y=$p(e.dom.getRoot(),i.getNode());return yp(y)?Uu(1,e,y,!1,o):W.none()},ay=(e,n,o)=>n.collapsed?TI(e,n,o).getOr(n):n,kI=e=>Ip(e)||P0(e),AI=e=>Lp(e)||B0(e),OI=(e,n)=>{pt(n)&&n.data.length===0&&e.remove(n)},g4=(e,n,o,r,i,u)=>{Uu(r,e,u.getNode(!i),i,!0).each(m=>{if(n.collapsed){const y=n.cloneRange();i?y.setEnd(m.startContainer,m.startOffset):y.setStart(m.endContainer,m.endOffset),y.deleteContents()}else n.deleteContents();e.selection.setRng(m)}),OI(e.dom,o)},Lg=(e,n)=>{const o=e.selection.getRng();if(!pt(o.commonAncestorContainer))return W.none();const r=n?la.Forwards:la.Backwards,i=yd(e.getBody()),u=nt(nC,n?i.next:i.prev),m=n?kI:AI,y=Z1(r,e.getBody(),o),S=u(y),O=S&&Zr(n,S);if(!O||!Qv(y,O))return W.none();if(m(O))return W.some(()=>g4(e,o,y.getNode(),r,n,O));const L=u(O);return L&&m(L)&&Qv(O,L)?W.some(()=>g4(e,o,y.getNode(),r,n,L)):W.none()},hh=(e,n)=>Lg(e,n),Wu=(e,n)=>{const o=e.getBody();return n?_i(o).filter(Ip):tu(o).filter(Lp)},p4=e=>{const n=e.selection.getRng();return!n.collapsed&&(Wu(e,!0).exists(o=>o.isEqual(Xe.fromRangeStart(n)))||Wu(e,!1).exists(o=>o.isEqual(Xe.fromRangeEnd(n))))},hV=e=>$e(e)&&(D1(pe.fromDom(e))||ag(pe.fromDom(e))),Zu=bd.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),gV=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Wt(o)&&o.getAttribute("data-mce-caret")===r},pV=(e,n,o,r,i)=>{const u=m=>i.isInline(m.nodeName.toLowerCase())&&!El(o,r,e);return Xv(!n,o).fold(()=>Xv(n,r).fold(tt,u),u)},DI=(e,n,o,r,i)=>{const u=i.getNode(!o);return nr(pe.fromDom(n),pe.fromDom(r.getNode())).map(m=>Bs(e,m)?Zu.remove(m.dom):Zu.moveToElement(u)).orThunk(()=>W.some(Zu.moveToElement(u)))},RI=(e,n,o,r)=>Pc(n,e,o).bind(i=>hV(i.getNode())||pV(e,n,o,i,r)?W.none():n&&Fo(i.getNode())||!n&&Fo(i.getNode(!0))?DI(r,e,n,o,i):n&&Lp(o)||!n&&Ip(o)?W.some(Zu.moveToPosition(i)):W.none()),bV=(e,n)=>Qt(n)?W.none():e&&Fo(n.nextSibling)?W.some(Zu.moveToElement(n.nextSibling)):!e&&Fo(n.previousSibling)?W.some(Zu.moveToElement(n.previousSibling)):W.none(),vV=(e,n,o)=>o.fold(r=>W.some(Zu.remove(r)),r=>W.some(Zu.moveToElement(r)),r=>El(n,r,e)?W.none():W.some(Zu.moveToPosition(r))),yV=(e,n,o,r)=>gV(n,o)?bV(n,o.getNode(!n)).orThunk(()=>RI(e,n,o,r)):RI(e,n,o,r).bind(i=>vV(e,o,i)),wV=(e,n,o,r)=>{const i=di(n?1:-1,e,o),u=Xe.fromRangeStart(i),m=pe.fromDom(e);return!n&&Lp(u)?W.some(Zu.remove(u.getNode(!0))):n&&Ip(u)?W.some(Zu.remove(u.getNode())):!n&&Ip(u)&&YE(m,u,r)?DN(m,u,r).map(y=>Zu.remove(y.getNode())):n&&Lp(u)&&ON(m,u,r)?Fn(m,u,r).map(y=>Zu.remove(y.getNode())):yV(e,n,u,r)},CV=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),wd(e,n,pe.fromDom(o)),!0),b4=(e,n)=>o=>{const r=n?Xe.before(o):Xe.after(o);return e.selection.setRng(r.toRange()),!0},v4=e=>n=>(e.selection.setRng(n.toRange()),!0),y4=(e,n)=>W.from($p(e.getBody(),n)),SV=(e,n)=>{const o=e.selection.getNode();return y4(e,o).filter(Fo).fold(()=>wV(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(CV(e,n),b4(e,n),v4(e))),()=>W.some(Pe))},xV=e=>{xe(ci(e,".mce-offscreen-selection"),gs)},MI=(e,n)=>{const o=e.selection.getNode();return Fo(o)&&!Gh(o)?y4(e,o.parentNode).filter(Fo).fold(()=>W.some(()=>{xV(pe.fromDom(e.getBody())),wd(e,n,pe.fromDom(e.selection.getNode())),F0(e)}),()=>W.some(Pe)):p4(e)?W.some(()=>{db(e,e.selection.getRng(),pe.fromDom(e.getBody()))}):W.none()},w4=e=>{const n=e.dom,o=e.selection,r=$p(e.getBody(),o.getNode());if(rt(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Xe.before(i).toRange())}return!0},P2=(e,n)=>e.selection.isCollapsed()?SV(e,n):MI(e,n),C4=e=>e.hasOwnProperty("text"),S4=e=>e.hasOwnProperty("marker"),Q_=(e,n)=>{const o=(u,m)=>{if(pt(u))return{text:u,offset:m};{const y=n(),S=u.childNodes;return m<S.length?(u.insertBefore(y,S[m]),{marker:y,before:!0}):(u.appendChild(y),{marker:y,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},NI=e=>{var n,o;const{start:r,end:i}=e,u=new window.Range;return C4(r)?u.setStart(r.text,r.offset):S4(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),C4(i)?u.setEnd(i.text,i.offset):S4(i)&&(i.before?u.setEndBefore(i.marker):u.setEndAfter(i.marker),(o=i.marker.parentNode)===null||o===void 0||o.removeChild(i.marker)),u},x4=(e,n)=>{var o;const r=e.dom,i=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),m=e.getBody();if(((o=i==null?void 0:i.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&i&&u&&i===m.firstChild&&u===m.lastChild&&!r.isEmpty(m)){const S=i.cloneNode(!1),O=()=>{if(n?Fp(e):e_(e),m.firstChild!==i){const L=Q_(e.selection.getRng(),()=>document.createElement("span"));Array.from(m.childNodes).forEach(F=>S.appendChild(F)),m.appendChild(S),e.selection.setRng(NI(L))}};return W.some(O)}return W.none()},gh=(e,n)=>{const o=Xe.fromRangeStart(e.selection.getRng());return Pc(n,e.getBody(),o).filter(r=>n?I7(r):En(r)).bind(r=>tC(n?0:-1,r)).map(r=>()=>e.selection.select(r))},ju=(e,n)=>e.selection.isCollapsed()?gh(e,n):W.none(),Fg=pt,E4=e=>Fg(e)&&e.data[0]===Ma,B2=e=>Fg(e)&&e.data[e.data.length-1]===Ma,_4=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ma)},PI=e=>{var n;if(Fg(e.previousSibling))return B2(e.previousSibling)||e.previousSibling.appendData(Ma),e.previousSibling;if(Fg(e))return E4(e)||e.insertData(0,Ma),e;{const o=_4(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},BI=e=>{var n,o;if(Fg(e.nextSibling))return E4(e.nextSibling)||e.nextSibling.insertData(0,Ma),e.nextSibling;if(Fg(e))return B2(e)||e.appendData(Ma),e;{const r=_4(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},I2=(e,n)=>e?PI(n):BI(n),II=nt(I2,!0),LI=nt(I2,!1),L2=(e,n)=>pt(e.container())?I2(n,e.container()):I2(n,e.getNode()),eT=(e,n)=>{const o=n.get();return o&&e.container()===o&&Wf(o)},T4=(e,n)=>n.fold(o=>{fg(e.get());const r=II(o);return e.set(r),W.some(Xe(r,r.length-1))},o=>_i(o).map(r=>{if(eT(r,e)){const i=e.get();return Xe(i,1)}else{fg(e.get());const i=L2(r,!0);return e.set(i),Xe(i,1)}}),o=>tu(o).map(r=>{if(eT(r,e)){const i=e.get();return Xe(i,i.length-1)}else{fg(e.get());const i=L2(r,!1);return e.set(i),Xe(i,i.length-1)}}),o=>{fg(e.get());const r=LI(o);return e.set(r),W.some(Xe(r,1))}),FI=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return W.none()},ll=bd.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),$I=(e,n)=>{const o=rh(n,e);return o||e},HI=(e,n,o)=>{const r=GN(o),i=$I(n,r.container());return Dg(e,i,r).fold(()=>Bc(i,r).bind(nt(Dg,e,i)).map(u=>ll.before(u)),W.none)},EV=(e,n)=>gg(e,n)===null,VI=(e,n,o)=>Dg(e,n,o).filter(nt(EV,n)),k4=(e,n,o)=>{const r=KN(o);return VI(e,n,r).bind(i=>rl(i,r).isNone()?W.some(ll.start(i)):W.none())},_V=(e,n,o)=>{const r=GN(o);return VI(e,n,r).bind(i=>Bc(i,r).isNone()?W.some(ll.end(i)):W.none())},TV=(e,n,o)=>{const r=KN(o),i=$I(n,r.container());return Dg(e,i,r).fold(()=>rl(i,r).bind(nt(Dg,e,i)).map(u=>ll.after(u)),W.none)},zI=e=>!WN(A4(e)),ph=(e,n,o)=>FI([HI,k4,_V,TV],[e,n,o]).filter(zI),A4=e=>e.fold(Hn,Hn,Hn,Hn),UI=e=>e.fold(ct("before"),ct("start"),ct("end"),ct("after")),tT=e=>e.fold(ll.before,ll.before,ll.after,ll.after),iy=e=>e.fold(ll.start,ll.start,ll.end,ll.end),O4=(e,n)=>UI(e)===UI(n)&&A4(e)===A4(n),kV=(e,n,o,r,i,u)=>Xn(Dg(n,o,r),Dg(n,o,i),(m,y)=>m!==y&&jN(o,m,y)?ll.after(e?m:y):u).getOr(u),AV=(e,n)=>e.fold(wt,o=>!O4(o,n)),OV=(e,n,o,r,i)=>{const u=Zr(e,i);return Pc(e,o,u).map(nt(Zr,e)).fold(()=>r.map(tT),S=>ph(n,o,S).map(nt(kV,e,n,o,u,S)).filter(nt(AV,r))).filter(zI)},DV=(e,n)=>e?n.fold(M(W.some,ll.start),W.none,M(W.some,ll.after),W.none):n.fold(W.none,M(W.some,ll.before),W.none,M(W.some,ll.end)),WI=(e,n,o,r)=>{const i=Zr(e,r),u=ph(n,o,i);return ph(n,o,i).bind(nt(DV,e)).orThunk(()=>OV(e,n,o,u,r))},RV=e=>ve(e.selection.getSel().modify),ZI=(e,n,o)=>{const r=e?1:-1;return n.setRng(Xe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},D4=(e,n)=>{const o=n.selection.getRng(),r=e?Xe.fromRangeEnd(o):Xe.fromRangeStart(o);return RV(n)?e&&yw(r)?ZI(!0,n.selection,r):!e&&dp(r)?ZI(!1,n.selection,r):!1:!1};var bh;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(bh||(bh={}));const nT=(e,n)=>e===la.Backwards?vs(n):n,MV=(e,n,o)=>e===la.Forwards?n.next(o):n.prev(o),NV=(e,n,o,r)=>Lo(r.getNode(n===la.Forwards))?bh.Br:El(o,r)===!1?bh.Block:bh.Wrap,jI=(e,n,o,r)=>{const i=yd(o);let u=r;const m=[];for(;u;){const y=MV(n,i,u);if(!y)break;if(Lo(y.getNode(!1)))return n===la.Forwards?{positions:nT(n,m).concat([y]),breakType:bh.Br,breakAt:W.some(y)}:{positions:nT(n,m),breakType:bh.Br,breakAt:W.some(y)};if(!y.isVisible()){u=y;continue}if(e(u,y)){const S=NV(o,n,u,y);return{positions:nT(n,m),breakType:S,breakAt:W.some(y)}}m.push(y),u=y}return{positions:nT(n,m),breakType:bh.Eol,breakAt:W.none()}},qI=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===la.Backwards?u.concat(i):[i].concat(u)}).getOr([]),R4=(e,n)=>Mo(e,(o,r)=>o.fold(()=>W.some(r),i=>Xn(fo(i.getClientRects()),fo(r.getClientRects()),(u,m)=>{const y=Math.abs(n-u.left);return Math.abs(n-m.left)<=y?r:i}).or(o)),W.none()),Db=(e,n)=>fo(n.getClientRects()).bind(o=>R4(e,o.left)),Yp=nt(jI,Xe.isAbove,-1),F2=nt(jI,Xe.isBelow,1),GI=nt(qI,-1,Yp),$2=nt(qI,1,F2),KI=(e,n)=>Yp(e,n).breakAt.isNone(),YI=(e,n)=>F2(e,n).breakAt.isNone(),PV=e=>_i(e).map(n=>[n].concat(F2(e,n).positions)).getOr([]),BV=e=>tu(e).map(n=>Yp(e,n).positions.concat(n)).getOr([]),IV=(e,n)=>Db(GI(e,n),n),LV=(e,n)=>Db($2(e,n),n),FV=Fo,XI=(e,n)=>Math.abs(e.left-n),JI=(e,n)=>Math.abs(e.right-n),$V=e=>Ys(e,"node"),QI=(e,n)=>ge(e,(o,r)=>{const i=Math.min(XI(o,n),JI(o,n)),u=Math.min(XI(r,n),JI(r,n));return u===i&&$V(r)&&FV(r.node)||u<i?r:o}),aY=e=>{const n=o=>dt(o,r=>{const i=Wm(r);return i.node=e,i});if(Wt(e))return n(e.getClientRects());if(pt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Ad=e=>ws(e,aY);var Rb;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Rb||(Rb={}));const eL=(e,n,o,r)=>{let i=r;for(;i=wp(i,e,yv,n);)if(o(i))return},M4=(e,n,o,r,i,u)=>{let m=0;const y=[],S=F=>{let V=Ad([F]);e===-1&&(V=V.reverse());for(let Q=0;Q<V.length;Q++){const re=V[Q];if(!o(re,O)){if(y.length>0&&n(re,Ve(y))&&m++,re.line=m,i(re))return!0;y.push(re)}}return!1},O=Ve(u.getClientRects());if(!O)return y;const L=u.getNode();return L&&(S(L),eL(e,r,S,L)),y},HV=(e,n)=>n.line>e,tL=(e,n)=>n.line===e,VV=nt(M4,Rb.Up,M1,Hs),nL=nt(M4,Rb.Down,Hs,M1),oL=e=>Ve(e.getClientRects()),zV=(e,n,o,r)=>{const i=yd(n);let u,m,y,S;const O=[];let L=0;e===1?(u=i.next,m=Hs,y=M1,S=Xe.after(r)):(u=i.prev,m=M1,y=Hs,S=Xe.before(r));const F=oL(S);do{if(!S.isVisible())continue;const V=oL(S);if(y(V,F))continue;O.length>0&&m(V,Ve(O))&&L++;const Q=Wm(V);if(Q.position=S,Q.line=L,o(Q))return O;O.push(Q)}while(S=u(S));return O},sL=e=>n=>HV(e,n),Xp=e=>n=>tL(e,n),vh=(e,n)=>{e.selection.setRng(n),BC(e,e.selection.getRng())},oT=(e,n,o)=>W.some(ay(e,n,o)),N4=(e,n,o,r,i,u)=>{const m=n===la.Forwards,y=yd(e.getBody()),S=nt(nC,m?y.next:y.prev),O=m?r:i;if(!o.collapsed){const re=nl(o);if(u(re))return Uu(n,e,re,n===la.Backwards,!1);if(p4(e)){const ee=o.cloneRange();return ee.collapse(n===la.Backwards),W.from(ee)}}const L=Z1(n,e.getBody(),o);if(O(L))return ry(e,L.getNode(!m));let F=S(L);const V=gv(o);if(F)F=Zr(m,F);else return V?W.some(o):W.none();if(O(F))return Uu(n,e,F.getNode(!m),m,!1);const Q=S(F);return Q&&O(Q)&&Qv(F,Q)?Uu(n,e,Q.getNode(!m),m,!1):V?oT(e,F.toRange(),!1):W.none()},sT=(e,n,o,r,i,u)=>{const m=Z1(n,e.getBody(),o),y=Ve(m.getClientRects()),S=n===Rb.Down,O=e.getBody();if(!y)return W.none();if(p4(e)){const le=S?Xe.fromRangeEnd(o):Xe.fromRangeStart(o);return(S?LV:IV)(O,le).orThunk(()=>W.from(le)).map(De=>De.toRange())}const F=(S?nL:VV)(O,sL(1),m),V=Zt(F,Xp(1)),Q=y.left,re=QI(V,Q);if(re&&u(re.node)){const le=Math.abs(Q-re.left),we=Math.abs(Q-re.right);return Uu(n,e,re.node,le<we,!1)}let ee;if(r(m)?ee=m.getNode():i(m)?ee=m.getNode(!0):ee=nl(o),ee){const le=zV(n,O,sL(1),ee);let we=QI(Zt(le,Xp(1)),Q);if(we||(we=Ve(Zt(le,Xp(0))),we))return oT(e,we.position.toRange(),!1)}return V.length===0?P4(e,S).filter(S?i:r).map(le=>ay(e,le.toRange(),!1)):W.none()},P4=(e,n)=>{const o=e.selection.getRng(),r=n?Xe.fromRangeEnd(o):Xe.fromRangeStart(o),i=Yv(r.container(),e.getBody());if(n){const u=F2(i,r);return cs(u.positions)}else{const u=Yp(i,r);return fo(u.positions)}},rL=(e,n,o)=>P4(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),rT=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},aL=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},UV=(e,n,o)=>T4(n,o).map(r=>(rT(e,r),o)),iY=(e,n,o)=>{const r=Xe.fromRangeStart(e);if(e.collapsed)return r;{const i=Xe.fromRangeEnd(e);return o?rl(n,i).getOr(i):Bc(n,r).getOr(r)}},cY=(e,n,o)=>{const r=e.getBody(),i=iY(e.selection.getRng(),r,o),u=nt(lb,e);return WI(o,u,r,i).bind(y=>UV(e,n,y))},hf=(e,n,o)=>{const r=dt(ci(pe.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),m=>m.dom),i=Zt(r,e),u=Zt(o,e);xe(qr(i,u),nt(aL,!1)),xe(qr(u,i),nt(aL,!0))},WV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Xe.fromRangeStart(e.selection.getRng());Xe.isTextPosition(r)&&!qN(r)&&(rT(e,tE(o,r)),n.set(null))}},ZV=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Zt(r,e);xe(i,u=>{const m=Xe.fromRangeStart(n.selection.getRng());ph(e,n.getBody(),m).bind(y=>UV(n,o,y))})}},Jp=(e,n,o)=>Kf(e)?cY(e,n,o).isSome():!1,B4=(e,n,o)=>Kf(n)?D4(e,n):!1,jV=e=>{const n=Be(null),o=nt(lb,e);return e.on("NodeChange",r=>{Kf(e)&&(hf(o,e.dom,r.parents),WV(e,n),ZV(o,e,n,r.parents))}),n},aT=nt(B4,!0),qV=nt(B4,!1),iT=(e,n,o)=>{if(Kf(e)){const r=P4(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Xe.fromRangeEnd(i):Xe.fromRangeStart(i)});return ph(nt(lb,e),e.getBody(),r).exists(i=>{const u=tT(i);return T4(o,u).exists(m=>(rT(e,m),!0))})}else return!1},GV=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},KV=e=>Xn(_i(e),tu(e),(n,o)=>{const r=Zr(!0,n),i=Zr(!1,o);return Bc(e,r).forall(u=>u.isEqual(i))}).getOr(!0),I4=(e,n)=>o=>T4(n,o).map(r=>()=>rT(e,r)),iL=(e,n,o,r)=>{const i=e.getBody(),u=nt(lb,e);e.undoManager.ignore(()=>{e.selection.setRng(GV(o,r)),e_(e),ph(u,i,Xe.fromRangeStart(e.selection.getRng())).map(iy).bind(I4(e,n)).each(os)}),e.nodeChanged()},$g=(e,n)=>{const o=rh(n,e);return o||e},YV=(e,n,o,r)=>{const i=$g(e.getBody(),r.container()),u=nt(lb,e),m=ph(u,i,r);return m.bind(S=>o?S.fold(ct(W.some(iy(S))),W.none,ct(W.some(tT(S))),W.none):S.fold(W.none,ct(W.some(tT(S))),W.none,ct(W.some(iy(S))))).map(I4(e,n)).getOrThunk(()=>{const S=hg(o,i,r),O=S.bind(L=>ph(u,i,L));return Xn(m,O,()=>Dg(u,i,r).bind(L=>KV(L)?W.some(()=>{wd(e,o,pe.fromDom(L))}):W.none())).getOrThunk(()=>O.bind(()=>S.map(L=>()=>{o?iL(e,n,r,L):iL(e,n,L,r)})))})},L4=(e,n,o)=>{if(e.selection.isCollapsed()&&Kf(e)){const r=Xe.fromRangeStart(e.selection.getRng());return YV(e,n,o,r)}return W.none()},XV=e=>Hd(e)>1,cL=(e,n)=>{const o=pe.fromDom(e.getBody()),r=pe.fromDom(e.selection.getStart()),i=cf(r,o);return Is(i,n).fold(ct(i),u=>i.slice(0,u))},JV=e=>Hd(e)===1,F4=e=>cL(e,n=>e.schema.isBlock(yo(n))||XV(n)),$4=e=>cL(e,n=>e.schema.isBlock(yo(n))),cT=(e,n)=>{const o=nt(p_,e);return ws(n,r=>o(r)?[r.dom]:[])},H4=e=>{const n=$4(e);return cT(e,n)},lL=(e,n,o,r)=>{const i=cT(n,r);if(i.length===0)wd(n,e,o);else{const u=AP(o.dom,i);n.selection.setRng(u.toRange())}},uL=(e,n)=>{const o=Zt(F4(e),JV);return cs(o).bind(r=>{const i=Xe.fromRangeStart(e.selection.getRng());return ub(n,i,r.dom)&&!SC(r)?W.some(()=>lL(n,e,r,o)):W.none()})},QV=(e,n)=>{const o=n.parentElement;return Lo(n)&&!ne(o)&&e.dom.isEmpty(o)},H2=e=>SC(pe.fromDom(e)),V2=(e,n)=>{const o=e.selection.getStart(),r=QV(e,o)||H2(o)?AP(o,n):I8(e.selection.getRng(),n);e.selection.setRng(r.toRange())},dL=(e,n)=>{const o=qr(n,H4(e));o.length>0&&V2(e,o)},V4=e=>pt(e.startContainer),fL=e=>e.startOffset===0&&V4(e),mL=(e,n)=>{const o=n.startContainer.parentElement;return!ne(o)&&p_(e,pe.fromDom(o))},lT=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ne(n)&&!ne(o)&&n.isEqualNode(o)},z4=e=>{const n=e.endContainer;return e.endOffset===(pt(n)?n.length:n.childNodes.length)},z2=e=>lT(e)&&z4(e),ez=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),hL=e=>z2(e)||ez(e),tz=e=>{const n=e.selection.getRng();return fL(n)&&mL(e,n)&&hL(n)},nz=e=>{if(tz(e)){const n=H4(e);return W.some(()=>{e_(e),dL(e,n)})}else return W.none()},uT=(e,n)=>e.selection.isCollapsed()?uL(e,n):nz(e),oz=(e,n)=>Wh(e,o=>nu(o.dom),o=>n.isBlock(yo(o))),gL=e=>oz(pe.fromDom(e.selection.getStart()),e.schema),lY=e=>{const n=e.selection.getRng();return n.collapsed&&(V4(n)||e.dom.isEmpty(n.startContainer))&&!gL(e)},U2=e=>(lY(e)&&V2(e,[]),!0),U4=(e,n,o)=>$e(o)?W.some(()=>{e._selectionOverrides.hideFakeCaret(),wd(e,n,pe.fromDom(o))}):W.none(),sz=(e,n)=>{const o=n?P0:B0,r=n?la.Forwards:la.Backwards,i=Z1(r,e.getBody(),e.selection.getRng());return o(i)?U4(e,n,i.getNode(!n)):W.from(Zr(n,i)).filter(u=>o(u)&&Qv(i,u)).bind(u=>U4(e,n,u.getNode(!n)))},rz=(e,n)=>{const o=e.selection.getNode();return wi(o)?U4(e,n,o):W.none()},W4=(e,n)=>e.selection.isCollapsed()?sz(e,n):rz(e,n),az=e=>Qs(e,n=>rt(n.dom)||Fo(n.dom)).exists(n=>rt(n.dom)),Z4=e=>Qi(e??"").getOr(0),pL=(e,n)=>{const o=e||Rk(n)?"margin":"padding",r=Wr(n,"direction")==="rtl"?"-right":"-left";return o+r},bL=(e,n,o,r,i,u)=>{const m=pL(o,pe.fromDom(u)),y=Z4(e.getStyle(u,m));if(n==="outdent"){const S=Math.max(0,y-r);e.setStyle(u,m,S?S+i:"")}else{const S=y+r+i;e.setStyle(u,m,S)}},iz=(e,n)=>bs(n,o=>{const r=pL(nA(e),o),i=Ra(o,r).map(Z4).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),Qp=e=>{const n=G4(e);return!e.mode.isReadOnly()&&(n.length>1||iz(e,n))},j4=e=>Hm(e)||ag(e),q4=e=>$a(e).exists(j4),G4=e=>Zt(Zl(e.selection.getSelectedBlocks()),n=>!j4(n)&&!q4(n)&&az(n)),dT=(e,n)=>{var o,r;const{dom:i}=e,u=gp(e),m=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",y=Z4(u),S=nA(e);xe(G4(e),O=>{bL(i,n,S,y,m,O.dom)})},e1=e=>dT(e,"indent"),K4=e=>dT(e,"outdent"),qu=e=>{if(e.selection.isCollapsed()&&Qp(e)){const n=e.dom,o=e.selection.getRng(),r=Xe.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&no(pe.fromDom(i),r,e.schema))return W.some(()=>K4(e))}return W.none()},t1=(e,n,o)=>Oi([qu,P2,hh,(r,i)=>L4(r,n,i),Ig,YC,ju,W4,J_,uT,x4],r=>r(e,o)).filter(r=>e.selection.isEditable()),Y4=(e,n)=>{t1(e,n,!1).fold(()=>{e.selection.isEditable()&&(e_(e),F0(e))},os)},cz=(e,n)=>{t1(e,n,!0).fold(()=>{e.selection.isEditable()&&Fp(e)},os)},vL=(e,n)=>{e.addCommand("delete",()=>{Y4(e,n)}),e.addCommand("forwardDelete",()=>{cz(e,n)})},yL=5,lz=400,wL=e=>e.touches===void 0||e.touches.length!==1?W.none():W.some(e.touches[0]),uz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>yL||r>yL},dz=e=>{const n=Ci(),o=Be(!1),r=Im(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},lz);e.on("touchstart",i=>{wL(i).each(u=>{r.cancel();const m={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(m)})},!0),e.on("touchmove",i=>{r.cancel(),wL(i).each(u=>{n.on(m=>{uz(u,m)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},fT=(e,n)=>Sn(e,n.nodeName),fz=(e,n)=>pt(n)?!0:Wt(n)?!fT(e.getBlockElements(),n)&&!_l(n)&&!Ou(e,n)&&!fr(n):!1,mz=(e,n,o)=>kt(TN(pe.fromDom(o),pe.fromDom(n)),r=>fT(e,r.dom)),cy=(e,n)=>{if(pt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||fT(e,n.nextSibling)||fr(n.nextSibling)}return!1},ly=e=>e.dom.create(Si(e),Jm(e)),CL=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),m=e.getBody();let y,S,O=null;const L=Si(e);if(!u||!Wt(u))return;const F=m.nodeName.toLowerCase();if(!r.isValidChild(F,L.toLowerCase())||mz(i,m,u))return;if(m.firstChild===m.lastChild&&Lo(m.firstChild)){y=ly(e),y.appendChild(ig().dom),m.replaceChild(y,m.firstChild),e.selection.setCursorLocation(y,0),e.nodeChanged();return}let V=m.firstChild;for(;V;)if(Wt(V)&&er(r,V),fz(r,V)){if(cy(i,V)){S=V,V=V.nextSibling,n.remove(S);continue}if(!y){if(!O&&e.hasFocus()&&(O=Q_(e.selection.getRng(),()=>document.createElement("span"))),!V.parentNode){V=null;break}y=ly(e),m.insertBefore(y,V)}S=V,V=V.nextSibling,y.appendChild(S)}else y=null,V=V.nextSibling;O&&(e.selection.setRng(NI(O)),e.nodeChanged())},X4=(e,n,o)=>{const r=pe.fromDom(ly(e)),i=ig();rr(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},J4=e=>{e.on("NodeChange",()=>CL(e))},SL=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,hz=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],m=u>0?n.charAt(u-1):"";if(m==='"')return r;if(m===">"){const y=n.lastIndexOf("<",u);if(y!==-1&&n.substring(y,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},gz=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],hz(e,i,Kx(e)));o.content=i}},pz=(e,n)=>bs(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),bz=e=>{const n="contenteditable",o=" "+yt.trim(mA(e))+" ",r=" "+yt.trim(Kx(e))+" ",i=SL(o),u=SL(r),m=Pu(e);m.length>0&&e.on("BeforeSetContent",y=>{gz(e,m,y)}),e.parser.addAttributeFilter("class",y=>{let S=y.length;for(;S--;){const O=y[S];i(O)?O.attr(n,"true"):u(O)&&O.attr(n,"false")}}),e.serializer.addAttributeFilter(n,y=>{let S=y.length;for(;S--;){const O=y[S];if(!i(O)&&!u(O))continue;const L=O.attr("data-mce-content");m.length>0&&L?pz(m,L)?(O.name="#text",O.type=3,O.raw=!0,O.value=L):O.remove():O.attr(n,null)}})},vz=e=>mn(pe.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),xL=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Qd(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},EL=(e,n)=>{const o=vz(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),xL(e,o);return}ax(o)&&(xL(e,o),e.undoManager.add())}},yz=e=>{e.on("keyup compositionstart",nt(EL,e))},_L=Fo,Gu=(e,n,o)=>N4(n,e,o,Ip,Lp,_L),wz=(e,n,o)=>sT(n,e,o,u=>Ip(u)||_N(u),u=>Lp(u)||HC(u),_L),Q4=e=>{const n=e.dom.create(Si(e));return n.innerHTML='<br data-mce-bogus="1">',n},e3=(e,n,o)=>{const r=yd(e.getBody()),i=nt(nC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(Xe.fromRangeStart(o))){const y=pe.fromDom(Q4(e));n===1?qi(pe.fromDom(u),y):ii(pe.fromDom(u),y),e.selection.select(y.dom,!0),e.selection.collapse()}}},t3=(e,n)=>{const o=n?la.Forwards:la.Backwards,r=e.selection.getRng();return Gu(o,e,r).orThunk(()=>(e3(e,o,r),W.none()))},Cz=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return wz(o,e,r).orThunk(()=>(e3(e,o,r),W.none()))},Sz=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return WN(o)?!n:n},TL=(e,n)=>t3(e,Sz(e.selection,n)).exists(o=>(vh(e,o),!0)),kL=(e,n)=>Cz(e,n).exists(o=>(vh(e,o),!0)),AL=(e,n)=>rL(e,n,n?Lp:Ip),W2=(e,n)=>Wu(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(vh(e,o),!0)),xz=e=>et(["figcaption"],yo(e)),Ez=(e,n,o)=>{const r=nt(ro,n);return Qs(pe.fromDom(e.container()),i=>o.isBlock(yo(i)),r).filter(xz)},Z2=(e,n,o)=>n?YI(e.dom,o):KI(e.dom,o),Hg=(e,n)=>{const o=pe.fromDom(e.getBody()),r=Xe.fromRangeStart(e.selection.getRng());return Ez(r,o,e.schema).exists(()=>{if(Z2(o,n,r)){const u=X4(e,o,n?rr:xm);return e.selection.setRng(u),!0}else return!1})},n1=(e,n)=>e.selection.isCollapsed()?Hg(e,n):!1,mT=(e,n,o)=>{const r=e.selection.getRng(),i=Xe.fromRangeStart(r);return e.getBody().firstChild===n&&KI(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},n3=(e,n)=>{const o=e.selection.getRng(),r=Xe.fromRangeStart(o);return e.getBody().lastChild===n&&YI(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},o3=(e,n)=>n?W.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>n3(e,o)).getOr(!1):W.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>W.from(e.dom.getParent(o,"details")).map(r=>mT(e,r,o))).getOr(!1),s3=(e,n)=>o3(e,n),OL={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},DL=e=>dt(e,n=>({...OL,...n})),RL=e=>dt(e,n=>({...OL,...n})),ML=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,_z=(e,n)=>ws(DL(e),o=>ML(o,n)?[o]:[]),Tz=(e,n)=>ws(RL(e),o=>ML(o,n)?[o]:[]),Un=(e,...n)=>()=>e.apply(null,n),j2=(e,n)=>Po(_z(e,n),o=>o.action()),NL=(e,n)=>Oi(Tz(e,n),o=>o.action()),r3=(e,n)=>{const o=n?la.Forwards:la.Backwards,r=e.selection.getRng();return N4(e,o,r,P0,B0,wi).exists(i=>(vh(e,i),!0))},a3=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return sT(e,o,r,P0,B0,wi).exists(i=>(vh(e,i),!0))},kz=(e,n)=>rL(e,n,n?B0:P0),Az=bd.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),q2={...Az,none:e=>Az.none(e)},uY=(e,n)=>Oz(e,n,wt),Oz=(e,n,o)=>ws(ra(e),r=>pl(r,n)?o(r)?[r]:[]:Oz(r,n,o)),Dz=(e,n,o=tt)=>{if(o(n))return W.none();if(et(e,yo(n)))return W.some(n);const r=i=>pl(i,"table")||o(i);return Ur(n,e.join(","),r)},Rz=(e,n)=>Dz(["td","th"],e,n),dY=e=>uY(e,"th,td"),PL=(e,n)=>Wl(e,"table",n),Lc=(e,n,o,r,i=wt)=>{const u=r===1;if(!u&&o<=0)return q2.first(e[0]);if(u&&o>=e.length-1)return q2.last(e[e.length-1]);{const m=o+r,y=e[m];return i(y)?q2.middle(n,y):Lc(e,n,m,r,i)}},i3=(e,n)=>PL(e,n).bind(o=>{const r=dY(o);return Is(r,u=>ro(e,u)).map(u=>({index:u,all:r}))}),G2=(e,n,o)=>i3(e,o).fold(()=>q2.none(e),i=>Lc(i.all,e,i.index,1,n)),Mz=(e,n,o)=>i3(e,o).fold(()=>q2.none(),i=>Lc(i.all,e,i.index,-1,n)),BL=e=>up(e).filter(n=>n.trim().length!==0||n.indexOf(Xr)>-1).isSome(),IL=e=>Kr(e)&&ri(e,"contenteditable")==="false",c3=["img","br"],Nz=e=>BL(e)||et(c3,yo(e))||IL(e),Pz=e=>Vh(e,Nz),LL=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),Bz=(e,n)=>ws(n,o=>{const r=LL(Wm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),Iz=(e,n,o)=>Mo(e,(r,i)=>r.fold(()=>W.some(i),u=>{const m=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),y=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return W.some(y<m?i:u)}),W.none()),FL=(e,n,o,r,i)=>{const u=ci(pe.fromDom(o),"td,th,caption").map(y=>y.dom),m=Zt(Bz(e,u),y=>n(y,i));return Iz(m,r,i).map(y=>y.cell)},l3=e=>e.bottom,Lz=e=>e.top,Fz=(e,n)=>e.y<n,fY=(e,n)=>e.y>n,$z=nt(FL,l3,Fz),$L=nt(FL,Lz,fY),mY=(e,n)=>fo(n.getClientRects()).bind(o=>$z(e,o.left,o.top)).bind(o=>Db(BV(o),n)),Hz=(e,n)=>cs(n.getClientRects()).bind(o=>$L(e,o.left,o.top)).bind(o=>Db(PV(o),n)),Vz=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),zz=e=>e.breakType===bh.Wrap&&e.positions.length===0,u3=e=>e.breakType===bh.Br&&e.positions.length===1,K2=(e,n,o)=>{const r=e(n,o);return zz(r)||!Lo(o.getNode())&&u3(r)?!Vz(e,n,r):r.breakAt.isNone()},HL=nt(K2,Yp),VL=nt(K2,F2),Uz=(e,n,o)=>{const r=Xe.fromRangeStart(n);return ih(!e,o).exists(i=>i.isEqual(r))},Wz=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return yA()&&Uz(n,i,o)?(Uu(u,e,o,!n,!1).each(m=>{vh(e,m)}),!0):!1},d3=(e,n,o)=>mY(n,o).orThunk(()=>fo(o.getClientRects()).bind(r=>R4(GI(e,Xe.before(n)),r.left))).getOr(Xe.before(n)),Zz=(e,n,o)=>Hz(n,o).orThunk(()=>fo(o.getClientRects()).bind(r=>R4($2(e,Xe.after(n)),r.left))).getOr(Xe.after(n)),zL=(e,n)=>{const o=n.getNode(e);return ql(o)?W.some(o):W.none()},jz=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?qi:ii,i=X4(n,pe.fromDom(o),r);vh(n,i)})},UL=(e,n,o)=>{const r=zL(!!n,o),i=n===!1;r.fold(()=>vh(e,o.toRange()),u=>ih(i,e.getBody()).filter(m=>m.isEqual(o)).fold(()=>vh(e,o.toRange()),m=>jz(n,e,u)))},gf=(e,n,o,r)=>{const i=e.selection.getRng(),u=Xe.fromRangeStart(i),m=e.getBody();if(!n&&HL(r,u)){const y=d3(m,o,u);return UL(e,n,y),!0}else if(n&&VL(r,u)){const y=Zz(m,o,u);return UL(e,n,y),!0}else return!1},f3=(e,n,o)=>W.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>W.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),m3=(e,n)=>f3(e,n,Wz),WL=(e,n)=>f3(e,n,gf),hY=e=>{const n=Mp.exact(e,0,e,0);return f(n)},qz=(e,n,o)=>o.fold(W.none,W.none,(r,i)=>Pz(i).map(u=>hY(u)),r=>(e.execCommand("mceTableInsertRowAfter"),Gz(e,n,r))),Gz=(e,n,o)=>qz(e,n,G2(o,pa)),Kz=(e,n,o)=>qz(e,n,Mz(o,pa)),Y2=(e,n)=>{const o=["table","li","dl"],r=pe.fromDom(e.getBody()),i=y=>{const S=yo(y);return ro(y,r)||et(o,S)},u=e.selection.getRng(),m=pe.fromDom(n?u.endContainer:u.startContainer);return Rz(m,i).map(y=>(PL(y,i).each(L=>{e.model.table.clearSelectedCells(L.dom)}),e.selection.collapse(!n),(n?Gz:Kz)(e,i,y).each(L=>{e.selection.setRng(L)}),!0)).getOr(!1)},Yz=(e,n,o)=>{const r=pn.os.isMacOS()||pn.os.isiOS();j2([{keyCode:bt.RIGHT,action:Un(TL,e,!0)},{keyCode:bt.LEFT,action:Un(TL,e,!1)},{keyCode:bt.UP,action:Un(kL,e,!1)},{keyCode:bt.DOWN,action:Un(kL,e,!0)},...r?[{keyCode:bt.UP,action:Un(W2,e,!1),metaKey:!0,shiftKey:!0},{keyCode:bt.DOWN,action:Un(W2,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:bt.RIGHT,action:Un(m3,e,!0)},{keyCode:bt.LEFT,action:Un(m3,e,!1)},{keyCode:bt.UP,action:Un(WL,e,!1)},{keyCode:bt.DOWN,action:Un(WL,e,!0)},{keyCode:bt.UP,action:Un(WL,e,!1)},{keyCode:bt.UP,action:Un(s3,e,!1)},{keyCode:bt.DOWN,action:Un(s3,e,!0)},{keyCode:bt.RIGHT,action:Un(r3,e,!0)},{keyCode:bt.LEFT,action:Un(r3,e,!1)},{keyCode:bt.UP,action:Un(a3,e,!1)},{keyCode:bt.DOWN,action:Un(a3,e,!0)},{keyCode:bt.RIGHT,action:Un(Jp,e,n,!0)},{keyCode:bt.LEFT,action:Un(Jp,e,n,!1)},{keyCode:bt.RIGHT,ctrlKey:!r,altKey:r,action:Un(aT,e,n)},{keyCode:bt.LEFT,ctrlKey:!r,altKey:r,action:Un(qV,e,n)},{keyCode:bt.UP,action:Un(n1,e,!1)},{keyCode:bt.DOWN,action:Un(n1,e,!0)}],o).each(i=>{o.preventDefault()})},h3=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Yz(e,n,o)})},pf=(e,n)=>({container:e,offset:n}),X2=Ks.DOM,J2=e=>n=>e===n?-1:0,Xz=e=>n=>e.isBlock(n)||et(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",g3=(e,n,o)=>{if(pt(e)&&n>=0)return W.some(pf(e,n));{const r=rg(X2);return W.from(r.backwards(e,n,J2(e),o)).map(i=>pf(i.container,i.container.data.length))}},Jz=(e,n,o)=>{if(pt(e)&&n>=e.length)return W.some(pf(e,n));{const r=rg(X2);return W.from(r.forwards(e,n,J2(e),o)).map(i=>pf(i.container,0))}},p3=(e,n,o)=>{if(!pt(e))return W.none();const r=e.data;if(n>=0&&n<=r.length)return W.some(pf(e,n));{const i=rg(X2);return W.from(i.backwards(e,n,J2(e),o)).bind(u=>{const m=u.container.data;return p3(u.container,n+m.length,o)})}},Q2=(e,n,o)=>{if(!pt(e))return W.none();const r=e.data;if(n<=r.length)return W.some(pf(e,n));{const i=rg(X2);return W.from(i.forwards(e,n,J2(e),o)).bind(u=>Q2(u.container,n-r.length,o))}},b3=(e,n,o,r,i)=>{const u=rg(e,Xz(e));return W.from(u.backwards(n,o,r,i))},Qz=e=>e.collapsed&&pt(e.startContainer),eU=e=>ac(e.toString().replace(/\u00A0/g," ")),hT=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,tU=(e,n)=>e.substring(n.length),nU=(e,n,o,r=!1)=>{let i;const u=o.charAt(0);for(i=n-1;i>=0;i--){const m=e.charAt(i);if(!r&&hT(m))return W.none();if(u===m&&Ko(e,o,i,n))break}return W.some(i)},gT=(e,n,o,r=!1)=>{if(!Qz(n))return W.none();const i={text:"",offset:0},u=(y,S,O)=>(i.text=O+i.text,i.offset+=S,nU(i.text,i.offset,o,r).getOr(S)),m=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return b3(e,n.startContainer,n.startOffset,u,m).bind(y=>{const S=n.cloneRange();if(S.setStart(y.container,y.offset),S.setEnd(n.endContainer,n.endOffset),S.collapsed)return W.none();const O=eU(S);return O.lastIndexOf(o)!==0?W.none():W.some({text:tU(O,o),range:S,trigger:o})})},oU=e=>e.nodeType===La,sU=e=>e.nodeType===Ld,ZL=e=>{if(oU(e))return pf(e,e.data.length);{const n=e.childNodes;return n.length>0?ZL(n[n.length-1]):pf(e,n.length)}},jL=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?jL(o[n],0):o.length>0&&sU(e)&&o.length===n?ZL(o[o.length-1]):pf(e,n)},rU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return b3(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!hT(u)}).isSome()},aU=e=>n=>{const o=jL(n.startContainer,n.startOffset);return!rU(e,o)},v3=(e,n,o)=>Oi(o.triggers,r=>gT(e,n,r)),iU=(e,n)=>{const o=n(),r=e.selection.getRng();return v3(e.dom,r,o).bind(i=>y3(e,n,i))},y3=(e,n,o,r={})=>{var i;const u=n(),y=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",S=Zt(u.lookupByTrigger(o.trigger),L=>o.text.length>=L.minChars&&L.matches.getOrThunk(()=>aU(e.dom))(o.range,y,o.text));if(S.length===0)return W.none();const O=Promise.all(dt(S,L=>L.fetch(o.text,L.maxResults,r).then(V=>({matchText:o.text,items:V,columns:L.columns,onAction:L.onAction,highlightOn:L.highlightOn}))));return W.some({lookupData:O,context:o})};var cm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(cm||(cm={}));const w3=(e,n,o)=>e.stype===cm.Error?n(e.serror):o(e.svalue),cU=e=>{const n=[],o=[];return xe(e,r=>{w3(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},lU=(e,n)=>e.stype===cm.Error?{stype:cm.Error,serror:n(e.serror)}:e,uU=(e,n)=>e.stype===cm.Value?{stype:cm.Value,svalue:n(e.svalue)}:e,dU=(e,n)=>e.stype===cm.Value?n(e.svalue):e,Ka=(e,n)=>e.stype===cm.Error?n(e.serror):e,qL=e=>({stype:cm.Value,svalue:e}),GL=e=>({stype:cm.Error,serror:e}),Ai={fromResult:e=>e.fold(GL,qL),toResult:e=>w3(e,lc.error,lc.value),svalue:qL,partition:cU,serror:GL,bind:dU,bindError:Ka,map:uU,mapError:lU,fold:w3},pT=e=>qe(e)&&Go(e).length>100?" removed due to size":JSON.stringify(e,null,2),o1=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ct("... (only showing first ten failures)")}]):e;return dt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},uy=(e,n)=>Ai.serror([{path:e,getErrorInfo:n}]),KL=(e,n,o)=>uy(e,()=>'Could not find valid *required* value for "'+n+'" in '+pT(o)),C3=(e,n)=>uy(e,()=>'Choice schema did not contain choice key: "'+n+'"'),S3=(e,n,o)=>uy(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+pT(n)),x3=(e,n)=>uy(e,ct(n)),YL=(e,n,o,r)=>zo(o,r).fold(()=>S3(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),bT=(e,n)=>({extract:(i,u)=>zo(u,e).fold(()=>C3(i,e),y=>YL(i,u,n,y)),toString:()=>"chooseOn("+e+"). Possible values: "+Go(n)}),vT=(e,n)=>n,eS=(e,n)=>On(e)&&On(n)?cu(e,n):n,dy=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)Sn(i,u)&&(o[u]=e(o[u],i[u]))}return o},cu=dy(eS),fy=dy(vT),E3=()=>({tag:"required",process:{}}),XL=e=>({tag:"defaultedThunk",process:e}),JL=e=>XL(ct(e)),QL=()=>({tag:"option",process:{}}),mU=(e,n)=>e.length>0?Ai.svalue(cu(n,fy.apply(void 0,e))):Ai.svalue(n),e5=e=>M(Ai.serror,Xa)(e),hU={consolidateObj:(e,n)=>{const o=Ai.partition(e);return o.errors.length>0?e5(o.errors):mU(o.values,n)},consolidateArr:e=>{const n=Ai.partition(e);return n.errors.length>0?e5(n.errors):Ai.svalue(n.values)}},gU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),pU=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),t5=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},_3=e=>{const n=(r,i)=>Ai.bindError(e(i),u=>x3(r,u)),o=ct("val");return{extract:n,toString:o}},bU=_3(Ai.svalue),vU=(e,n,o,r)=>zo(n,o).fold(()=>KL(e,o,n),r),n5=(e,n,o,r)=>{const i=zo(e,n).getOrThunk(()=>o(e));return r(i)},yU=(e,n,o)=>o(zo(e,n)),wU=(e,n,o,r)=>{const i=zo(e,n).map(u=>u===!0?o(e):u);return r(i)},CU=(e,n,o,r,i)=>{const u=y=>i.extract(n.concat([r]),y),m=y=>y.fold(()=>Ai.svalue(W.none()),S=>{const O=i.extract(n.concat([r]),S);return Ai.map(O,W.some)});switch(e.tag){case"required":return vU(n,o,r,u);case"defaultedThunk":return n5(o,r,e.process,u);case"option":return yU(o,r,m);case"defaultedOptionThunk":return wU(o,r,e.process,m);case"mergeWithThunk":return n5(o,r,ct({}),y=>{const S=cu(e.process(o),y);return u(S)})}},SU=(e,n,o)=>{const r={},i=[];for(const u of o)t5(u,(m,y,S,O)=>{const L=CU(S,e,n,m,O);Ai.fold(L,F=>{i.push(...F)},F=>{r[y]=F})},(m,y)=>{r[m]=y(n)});return i.length>0?Ai.serror(i):Ai.svalue(r)},T3=e=>({extract:(r,i)=>SU(r,i,e),toString:()=>`obj{
`+dt(e,i=>t5(i,(u,m,y,S)=>u+" -> "+S.toString(),(u,m)=>"state("+u+")")).join(`
`)+"}"}),k3=e=>({extract:(r,i)=>{const u=dt(i,(m,y)=>e.extract(r.concat(["["+y+"]"]),m));return hU.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),o5=e=>_3(n=>e(n).fold(Ai.serror,Ai.svalue)),s5=(e,n,o)=>{const r=n.extract([e],o);return Ai.mapError(r,i=>({input:o,errors:i}))},xU=(e,n,o)=>Ai.toResult(s5(e,n,o)),EU=e=>`Errors: 
`+o1(e.errors).join(`
`)+`

Input object: `+pT(e.input),r5=(e,n)=>bT(e,po(n,T3)),_U=ct(bU),tS=(e,n)=>_3(o=>{const r=typeof o;return e(o)?Ai.svalue(o):Ai.serror(`Expected type: ${n} but got: ${r}`)}),TU=tS(so,"number"),nS=tS(ce,"string"),kU=tS(Kt,"boolean"),wT=tS(ve,"function"),my=gU,a5=pU,AU=e=>o5(n=>et(e,n)?lc.value(n):lc.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),i5=(e,n)=>my(e,e,E3(),n),c5=e=>i5(e,nS),A3=e=>i5(e,wT),OU=(e,n)=>my(e,e,E3(),k3(n)),O3=(e,n)=>my(e,e,QL(),n),oS=e=>O3(e,nS),DU=e=>O3(e,wT),RU=(e,n)=>my(e,e,JL(n),_U()),Mb=(e,n,o)=>my(e,e,JL(n),o),l5=(e,n)=>Mb(e,n,TU),MU=(e,n)=>Mb(e,n,nS),u5=(e,n,o)=>Mb(e,n,AU(o)),CT=(e,n)=>Mb(e,n,kU),ST=(e,n)=>Mb(e,n,wT),NU=(e,n,o)=>Mb(e,n,k3(o)),PU=c5("type"),BU=A3("fetch"),D3=A3("onAction"),IU=ST("onSetup",()=>Pe),LU=oS("text"),FU=oS("icon"),$U=oS("tooltip"),bY=oS("label"),HU=CT("active",!1),xT=CT("enabled",!0),R3=CT("primary",!1),d5=e=>RU("columns",e),sS=e=>MU("type",e),f5=T3([PU,c5("trigger"),l5("minChars",1),d5(1),l5("maxResults",10),DU("matches"),BU,D3,NU("highlightOn",[],nS)]),m5=e=>xU("Autocompleter",f5,e),M3=[xT,$U,FU,LU,IU],h5=[HU].concat(M3),VU=[ST("predicate",tt),u5("scope","node",["node","editor"]),u5("position","selection",["node","selection","line"])],g5=M3.concat([sS("contextformbutton"),R3,D3,a5("original",Hn)]),zU=h5.concat([sS("contextformbutton"),R3,D3,a5("original",Hn)]),N3=M3.concat([sS("contextformbutton")]),UU=h5.concat([sS("contextformtogglebutton")]),WU=r5("type",{contextformbutton:g5,contextformtogglebutton:zU});T3([sS("contextform"),ST("initValue",ct("")),bY,OU("commands",WU),O3("launch",r5("type",{contextformbutton:N3,contextformtogglebutton:UU}))].concat(VU));const ZU=e=>{const n=e.ui.registry.getAll().popups,o=po(n,m=>m5(m).fold(y=>{throw new Error(EU(y))},Hn)),r=ul(hi(o,m=>m.trigger)),i=Di(o);return{dataset:o,triggers:r,lookupByTrigger:m=>Zt(i,y=>y.trigger===m)}},p5=(e,n)=>{const o=Im(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27?(o.cancel(),n.cancelIfNecessary()):(i===38||i===40)&&o.cancel()},!0),e.on("remove",o.cancel)},jU=e=>{const n=Ci(),o=Be(!1),r=n.isSet,i=()=>{r()&&(RE(e),o.set(!1),n.clear())},u=F=>{r()||n.set({trigger:F.trigger,matchLength:F.text.length})},m=Ye(()=>ZU(e)),y=F=>n.get().map(V=>gT(e.dom,e.selection.getRng(),V.trigger,!0).bind(Q=>y3(e,m,Q,F))).getOrThunk(()=>iU(e,m)),S=F=>{y(F).fold(i,V=>{u(V.context),V.lookupData.then(Q=>{n.get().map(re=>{const ee=V.context;re.trigger===ee.trigger&&(n.set({...re,matchLength:ee.text.length}),o.get()?(DE(e,{range:ee.range}),OE(e,{lookupData:Q})):(o.set(!0),DE(e,{range:ee.range}),HA(e,{lookupData:Q})))})})})},O=(F,V)=>{const Q=F.compareBoundaryPoints(window.Range.START_TO_START,V),re=F.compareBoundaryPoints(window.Range.END_TO_END,V);return Q>=0&&re<=0},L=()=>n.get().bind(({trigger:F})=>{const V=e.selection.getRng();return gT(e.dom,V,F,o.get()).filter(({range:Q})=>O(V,Q)).map(({range:Q})=>Q)});e.addCommand("mceAutocompleterReload",(F,V)=>{const Q=qe(V)?V.fetchOptions:{};S(Q)}),e.addCommand("mceAutocompleterClose",i),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{L().each(F=>{DE(e,{range:F})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>L().isSome()),p5(e,{cancelIfNecessary:i,load:S})},qU=St().browser.isSafari(),b5=e=>eu(pe.fromDom(e)),v5=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},xa=(e,n)=>W.from(e.getParent(n.container(),"details")),lm=(e,n)=>xa(e,n).isSome(),GU=(e,n)=>{const o=W.from(e.getParent(n.startContainer,"details")),r=W.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>W.from(e.select("summary",u)[0]));return W.some({startSummary:i,startDetails:o,endDetails:r})}else return W.none()},yY=(e,n)=>_i(n).exists(o=>o.isEqual(e)),KU=(e,n)=>tu(n).exists(o=>Lo(o.getNode())&&rl(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),YU=(e,n)=>n.startSummary.exists(o=>yY(e,o)),XU=(e,n)=>n.startSummary.exists(o=>KU(e,o)),JU=(e,n)=>n.startDetails.exists(o=>rl(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),y5=(e,n,o)=>o.startDetails.exists(r=>Bc(e,n).forall(i=>!r.contains(i.container()))),Nb=(e,n)=>{const o=n.getNode();Pn(o)||e.selection.setCursorLocation(o,n.offset())},QU=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?_i(i):tu(i)).each(m=>Nb(e,m))}else Nb(e,n)},eW=(e,n)=>{const o=S=>S.contains(e.startContainer),r=S=>S.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),m=n.startDetails.forall(S=>n.endDetails.forall(O=>S!==O));return(i||u)&&!(i&&u)||m},w5=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const m=Xe.fromRangeStart(i.getRng()),y=r.getParent(m.container(),r.isBlock),S=xa(r,m),O=y&&r.isEmpty(y),L=ne(y==null?void 0:y.previousSibling),F=ne(y==null?void 0:y.nextSibling);return O&&(n?F:L)&&hg(!n,u,m).exists(re=>lm(r,re)&&!ha(S,xa(r,re)))?!0:hg(n,u,m).fold(tt,V=>{const Q=xa(r,V);if(lm(r,V)&&!ha(S,Q)){if(n||QU(e,V,!1),y&&O){if(n&&L)return!0;if(!n&&F)return!0;QU(e,V,n),e.dom.remove(y)}return!0}else return!1})}else return!1},um=(e,n,o,r)=>{const u=e.selection.getRng(),m=Xe.fromRangeStart(u),y=e.getBody();return r==="selection"?eW(u,n):o?XU(m,n)||y5(y,m,n):YU(m,n)||JU(m,n)},tW=(e,n,o)=>GU(e.dom,e.selection.getRng()).fold(()=>w5(e,n,o),r=>um(e,r,n,o)||w5(e,n,o)),nW=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),m=Xe.fromRangeStart(u);return Vy(i)?(o==="selection"&&v5(u,i)||ub(n,m,i)?b5(i):e.undoManager.transact(()=>{const y=r.getSel();let{anchorNode:S,anchorOffset:O,focusNode:L,focusOffset:F}=y??{};const V=()=>{$e(S)&&$e(O)&&$e(L)&&$e(F)&&(y==null||y.setBaseAndExtent(S,O,L,F))},Q=()=>{S=y==null?void 0:y.anchorNode,O=y==null?void 0:y.anchorOffset,L=y==null?void 0:y.focusNode,F=y==null?void 0:y.focusOffset},re=(le,we)=>{xe(le.childNodes,De=>{f0(De)&&we.appendChild(De)})},ee=e.dom.create("span",{"data-mce-bogus":"1"});re(i,ee),i.appendChild(ee),V(),(o==="word"||o==="line")&&(y==null||y.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&v5(r.getRng(),ee)?b5(i):(e.execCommand(n?"ForwardDelete":"Delete"),Q(),re(ee,i),V()),e.dom.remove(ee)}),!0):!1},s1=(e,n,o)=>tW(e,n,o)||qU&&nW(e,n,o)?W.some(Pe):W.none(),C5=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Pe,inputType:o},m=Ru(new InputEvent(e));return n.dispatch(e,{...m,...u,...r})},Pb=C5("input"),Od=C5("beforeinput"),P3=St(),B3=P3.os,S5=B3.isMacOS()||B3.isiOS(),L3=P3.browser.isFirefox(),x5=(e,n,o)=>{const r=o.keyCode===bt.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",m=y=>i?y?"word":"line":"selection";NL([{keyCode:bt.BACKSPACE,action:Un(qu,e)},{keyCode:bt.BACKSPACE,action:Un(P2,e,!1)},{keyCode:bt.DELETE,action:Un(P2,e,!0)},{keyCode:bt.BACKSPACE,action:Un(hh,e,!1)},{keyCode:bt.DELETE,action:Un(hh,e,!0)},{keyCode:bt.BACKSPACE,action:Un(L4,e,n,!1)},{keyCode:bt.DELETE,action:Un(L4,e,n,!0)},{keyCode:bt.BACKSPACE,action:Un(YC,e,!1)},{keyCode:bt.DELETE,action:Un(YC,e,!0)},{keyCode:bt.BACKSPACE,action:Un(s1,e,!1,u)},{keyCode:bt.DELETE,action:Un(s1,e,!0,u)},...S5?[{keyCode:bt.BACKSPACE,altKey:!0,action:Un(s1,e,!1,m(!0))},{keyCode:bt.DELETE,altKey:!0,action:Un(s1,e,!0,m(!0))},{keyCode:bt.BACKSPACE,metaKey:!0,action:Un(s1,e,!1,m(!1))}]:[{keyCode:bt.BACKSPACE,ctrlKey:!0,action:Un(s1,e,!1,m(!0))},{keyCode:bt.DELETE,ctrlKey:!0,action:Un(s1,e,!0,m(!0))}],{keyCode:bt.BACKSPACE,action:Un(ju,e,!1)},{keyCode:bt.DELETE,action:Un(ju,e,!0)},{keyCode:bt.BACKSPACE,action:Un(W4,e,!1)},{keyCode:bt.DELETE,action:Un(W4,e,!0)},{keyCode:bt.BACKSPACE,action:Un(J_,e,!1)},{keyCode:bt.DELETE,action:Un(J_,e,!0)},{keyCode:bt.BACKSPACE,action:Un(Ig,e,!1)},{keyCode:bt.DELETE,action:Un(Ig,e,!0)},{keyCode:bt.BACKSPACE,action:Un(uT,e,!1)},{keyCode:bt.DELETE,action:Un(uT,e,!0)},{keyCode:bt.BACKSPACE,action:Un(x4,e,!1)},{keyCode:bt.DELETE,action:Un(x4,e,!0)}],o).filter(y=>e.selection.isEditable()).each(y=>{o.preventDefault(),Od(e,r).isDefaultPrevented()||(y(),Pb(e,r))})},E5=(e,n,o)=>j2([{keyCode:bt.BACKSPACE,action:Un(w4,e)},{keyCode:bt.DELETE,action:Un(w4,e)},...S5?[{keyCode:bt.BACKSPACE,altKey:!0,action:Un(U2,e)},{keyCode:bt.DELETE,altKey:!0,action:Un(U2,e)},...o?[{keyCode:L3?224:91,action:Un(U2,e)}]:[]]:[{keyCode:bt.BACKSPACE,ctrlKey:!0,action:Un(U2,e)},{keyCode:bt.DELETE,ctrlKey:!0,action:Un(U2,e)}]],n),oW=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===bt.BACKSPACE,r.isDefaultPrevented()||x5(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||E5(e,r,o),o=!1})},sW=e=>{for(;e;){if(Wt(e)||pt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},hy=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=sW(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Xr),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Ha(n,n);let m=n,y;for(;y=u.current();){if(pt(y)){i.setStart(y,0),i.setEnd(y,0);break}if(r[y.nodeName.toLowerCase()]){i.setStartBefore(y),i.setEndBefore(y);break}m=y,y=u.next()}y||(i.setStart(m,0),i.setEnd(m,0))}else Lo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),BC(e,i)},rS=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},F3=e=>W.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),_5=e=>F3(e).fold(ct(""),n=>n.nodeName.toUpperCase()),rW=e=>F3(e).filter(n=>ag(pe.fromDom(n))).isSome(),$3=e=>{e.innerHTML='<br data-mce-bogus="1">'},aW=(e,n,o)=>{const r=e.dom;W.from(o.style).map(r.parseStyle).each(S=>{const L={...vi(pe.fromDom(n)),...S};r.setStyles(n,L)});const i=W.from(o.class).map(S=>S.split(/\s+/)),u=W.from(n.className).map(S=>Zt(S.split(/\s+/),O=>O!==""));Xn(i,u,(S,O)=>{const L=Zt(O,V=>!et(S,V)),F=[...S,...L];r.setAttrib(n,"class",F.join(" "))});const m=["style","class"],y=Wo(o,(S,O)=>!et(m,O));r.setAttribs(n,y)},aS=(e,n)=>{if(Si(e).toLowerCase()===n.tagName.toLowerCase()){const r=Jm(e);aW(e,n,r)}},T5=(e,n,o,r,i=!0,u,m)=>{const y=e.dom,S=e.schema,O=Si(e),L=o?o.nodeName.toUpperCase():"";let F=n;const V=S.getTextInlineElements();let Q;u||L==="TABLE"||L==="HR"?Q=y.create(u||O,m||{}):Q=o.cloneNode(!1);let re=Q;if(!i)y.setAttrib(Q,"style",null),y.setAttrib(Q,"class",null);else do if(V[F.nodeName]){if(nu(F)||_l(F))continue;const ee=F.cloneNode(!1);y.setAttrib(ee,"id",""),Q.hasChildNodes()?(ee.appendChild(Q.firstChild),Q.appendChild(ee)):(re=ee,Q.appendChild(ee))}while((F=F.parentNode)&&F!==r);return aS(e,Q),$3(re),Q},k5=(e,n)=>e.dom.getParent(n,kc),A5=(e,n,o)=>{let r=n;for(;r&&r!==e&&ne(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return kc(i);r=i}return!1},iW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Si(e)&&e.dom.isEmpty(o)&&A5(e.getBody(),o,r=>Sn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),cW=(e,n,o)=>{var r,i,u;const m=n(Si(e)),y=k5(e,o);y&&(e.dom.insertAfter(m,y),hy(e,m),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},wY=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,H3=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},O5=(e,n)=>{const o=e==null?void 0:e.parentNode;return $e(o)&&o.nodeName===n},D5=e=>$e(e)&&/^(OL|UL|LI)$/.test(e.nodeName),V3=e=>$e(e)&&/^(LI|DT|DD)$/.test(e.nodeName),R5=e=>D5(e)&&D5(e.parentNode),ET=e=>{const n=e.parentNode;return V3(n)?n:e},iS=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Wt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},M5=e=>Mo(hi(vi(pe.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),lW=(e,n,o,r,i)=>{const u=e.dom,m=e.selection.getRng(),y=o.parentNode;if(o===e.getBody()||!y)return;R5(o)&&(i="LI");const S=V3(r)?M5(r):void 0;let O=V3(r)&&S?n(i,{style:M5(r)}):n(i);if(iS(o,r,!0)&&iS(o,r,!1))if(O5(o,"LI")){const L=ET(o);u.insertAfter(O,L),H3(o)?u.remove(L):u.remove(o)}else u.replace(O,o);else if(iS(o,r,!0))O5(o,"LI")?(u.insertAfter(O,ET(o)),O.appendChild(u.doc.createTextNode(" ")),O.appendChild(o)):y.insertBefore(O,o),u.remove(r);else if(iS(o,r,!1))u.insertAfter(O,ET(o)),u.remove(r);else{o=ET(o);const L=m.cloneRange();L.setStartAfter(r),L.setEndAfter(o);const F=L.extractContents();if(i==="LI"&&wY(F,"LI")){const V=Zt(dt(O.children,pe.fromDom),eo(si("br")));O=F.firstChild,u.insertAfter(F,o),xe(V,Q=>xm(pe.fromDom(O),Q)),S&&O.setAttribute("style",S)}else u.insertAfter(F,o),u.insertAfter(O,o);u.remove(r)}hy(e,O)},CY=e=>{xe(Uh(pe.fromDom(e),Yr),n=>{const o=n.dom;o.nodeValue=ac(o.data)})},gc=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},uW=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),z3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,U3=(e,n)=>$e(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",dW=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Wt(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let m=i.length;for(;m--;)u=i[m],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||uW(e,u))&&e.remove(u)},W3=(e,n,o)=>pt(n)?e?o===1&&n.data.charAt(o-1)===Ma?0:o:o===n.data.length-1&&n.data.charAt(o)===Ma?n.data.length:o:o,fW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,W3(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,W3(!1,e.endContainer,e.endOffset)),n},mW=e=>{let n=e;do pt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},_T=(e,n,o,r,i)=>{var u,m;const y=e.dom,S=(u=rS(y,r))!==null&&u!==void 0?u:y.getRoot();let O=y.getParent(r,y.isBlock);if(!O||!U3(y,O)){if(O=O||S,!O.hasChildNodes()){const Q=y.create(n);return aS(e,Q),O.appendChild(Q),o.setStart(Q,0),o.setEnd(Q,0),Q}let L=r;for(;L&&L.parentNode!==O;)L=L.parentNode;let F;for(;L&&!y.isBlock(L);)F=L,L=L.previousSibling;const V=(m=F==null?void 0:F.parentElement)===null||m===void 0?void 0:m.nodeName;if(F&&V&&e.schema.isValidChild(V,n.toLowerCase())){const Q=F.parentNode,re=y.create(n);for(aS(e,re),Q.insertBefore(re,F),L=F;L&&!y.isBlock(L);){const ee=L.nextSibling;re.appendChild(L),L=ee}o.setStart(r,i),o.setEnd(r,i)}}return r},hW=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Wt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},gW=(e,n)=>{const o=ya(e);return Qt(n)?!1:ce(o)?et(yt.explode(o),n.nodeName.toLowerCase()):o},B5={insert:(e,n)=>{let o,r,i,u,m=!1;const y=e.dom,S=e.schema,O=S.getNonEmptyElements(),L=e.selection.getRng(),F=Si(e),V=pe.fromDom(L.startContainer),Q=Ni(V,L.startOffset),re=Q.exists(ut=>Kr(ut)&&!pa(ut)),ee=L.collapsed&&re,le=(ut,an)=>T5(e,o,Rt,ft,tA(e),ut,an),we=ut=>{const an=W3(ut,o,r);if(pt(o)&&(ut?an>0:an<o.data.length))return!1;if((o.parentNode===Rt||o===Rt)&&m&&!ut||ut&&Wt(o)&&o===Rt.firstChild)return!0;if(z3(o,"TABLE")||z3(o,"HR"))return m&&!ut||!m&&ut;const wn=new Ha(o,Rt);pt(o)&&(ut&&an===0?wn.prev():!ut&&an===o.data.length&&wn.next());let go;for(;go=wn.current();){if(Wt(go)){if(!go.getAttribute("data-mce-bogus")){const wo=go.nodeName.toLowerCase();if(O[wo]&&wo!=="br")return!1}}else if(pt(go)&&!Tc(go.data))return!1;ut?wn.prev():wn.next()}return!0},De=()=>{let ut;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Yt!=="HGROUP"?ut=le(F):ut=le(),gW(e,u)&&U3(y,u)&&y.isEmpty(Rt,void 0,{includeZwsp:!0})?ut=y.split(u,Rt):y.insertAfter(ut,Rt),hy(e,ut),ut};Mt(y,L).each(ut=>{L.setStart(ut.startContainer,ut.startOffset),L.setEnd(ut.endContainer,ut.endOffset)}),o=L.startContainer,r=L.startOffset;const Oe=!!(n&&n.shiftKey),He=!!(n&&n.ctrlKey);Wt(o)&&o.hasChildNodes()&&!ee&&(m=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,m&&pt(o)?r=o.data.length:r=0);const ft=rS(y,o);if(!ft||gc(e,o))return;Oe||(o=_T(e,F,L,o,r));let Rt=y.getParent(o,y.isBlock)||y.getRoot();u=$e(Rt==null?void 0:Rt.parentNode)?y.getParent(Rt.parentNode,y.isBlock):null,i=Rt?Rt.nodeName.toUpperCase():"";const Yt=u?u.nodeName.toUpperCase():"";if(Yt==="LI"&&!He){const ut=u;Rt=ut,u=ut.parentNode,i=Yt}if(Wt(u)&&iW(e,Oe,Rt))return cW(e,le,Rt);if(/^(LI|DT|DD)$/.test(i)&&Wt(u)&&y.isEmpty(Rt)){lW(e,le,u,Rt,F);return}if(!ee&&(Rt===e.getBody()||!U3(y,Rt)))return;const Je=Rt.parentNode;let Ue;if(ee)Ue=le(F),Q.fold(()=>{rr(V,pe.fromDom(Ue))},ut=>{ii(ut,pe.fromDom(Ue))}),e.selection.setCursorLocation(Ue,0);else if(zm(Rt))Ue=Qd(Rt),y.isEmpty(Rt)&&$3(Rt),aS(e,Ue),hy(e,Ue);else if(we(!1))Ue=De();else if(we(!0)&&Je){const ut=Xe.fromRangeStart(L),an=HC(ut),wn=pe.fromDom(Rt),wo=YE(wn,ut,e.schema)?DN(wn,ut,e.schema).bind(ps=>W.from(ps.getNode())):W.none();Ue=Je.insertBefore(le(),Rt);const ns=z3(Rt,"HR")||an?Ue:wo.getOr(Rt);hy(e,ns)}else{const ut=fW(L).cloneRange();ut.setEndAfter(Rt);const an=ut.extractContents();CY(an),mW(an),Ue=an.firstChild,y.insertAfter(an,Rt),dW(y,O,Ue),hW(y,Rt),y.isEmpty(Rt)&&$3(Rt),Ue.normalize(),y.isEmpty(Ue)?(y.remove(Ue),De()):(aS(e,Ue),hy(e,Ue))}y.setAttrib(Ue,"id",""),e.dispatch("NewBlock",{newBlock:Ue})},fakeEventName:"insertParagraph"},SY=(e,n,o)=>{const r=new Ha(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||pt(i)&&i.length>0)return!0;return!1},pW=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),BC(e,r)},xY=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,m=!1;Mt(r,i).each(Q=>{i.setStart(Q.startContainer,Q.startOffset),i.setEnd(Q.endContainer,Q.endOffset)});let y=i.startOffset,S=i.startContainer;if(Wt(S)&&S.hasChildNodes()){const Q=y>S.childNodes.length-1;S=S.childNodes[Math.min(y,S.childNodes.length-1)]||S,Q&&pt(S)?y=S.data.length:y=0}let O=r.getParent(S,r.isBlock);const L=O&&O.parentNode?r.getParent(O.parentNode,r.isBlock):null,F=L?L.nodeName.toUpperCase():"",V=!!(n&&n.ctrlKey);F==="LI"&&!V&&(O=L),pt(S)&&y>=S.data.length&&(SY(e.schema,S,O||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),m=!0)),u=r.create("br"),xv(r,i,u),pW(e,u,m),e.undoManager.add()},bW=(e,n)=>{const o=pe.fromTag("br");ii(pe.fromDom(n),o),e.undoManager.add()},vW=(e,n)=>{yW(e.getBody(),n)||qi(pe.fromDom(n),pe.fromTag("br"));const o=pe.fromTag("br");qi(pe.fromDom(n),o),pW(e,o.dom,!1),e.undoManager.add()},EY=e=>Lo(e.getNode()),yW=(e,n)=>EY(Xe.after(n))?!0:Bc(e,Xe.after(n)).map(o=>Lo(o.getNode())).getOr(!1),bf=e=>e&&e.nodeName==="A"&&"href"in e,wW=e=>e.fold(tt,bf,bf,tt),I5=e=>{const n=nt(lb,e),o=Xe.fromRangeStart(e.selection.getRng());return ph(n,e.getBody(),o).filter(wW)},CW=(e,n)=>{n.fold(Pe,nt(bW,e),nt(vW,e),Pe)},L5={insert:(e,n)=>{const o=I5(e);o.isSome()?o.each(nt(CW,e)):xY(e,n)},fakeEventName:"insertLineBreak"},F5=(e,n)=>F3(e).filter(o=>n.length>0&&pl(pe.fromDom(o),n)).isSome(),SW=e=>F5(e,Ox(e)),xW=e=>F5(e,eA(e)),Ml=bd.generate([{br:[]},{block:[]},{none:[]}]),$5=(e,n)=>xW(e),cS=e=>(n,o)=>rW(n)===e,H5=(e,n)=>(o,r)=>_5(o)===e.toUpperCase()===n,EW=e=>{const n=rS(e.dom,e.selection.getStart());return Qt(n)},lS=e=>H5("pre",e),_W=()=>H5("summary",!0),TT=e=>(n,o)=>Ax(n)===e,V5=(e,n)=>SW(e),kT=(e,n)=>n,z5=e=>{const n=Si(e),o=rS(e.dom,e.selection.getStart());return $e(o)&&e.schema.isValidChild(o.nodeName,n)},U5=e=>{const n=e.selection.getRng(),o=pe.fromDom(n.startContainer),i=Ni(o,n.startOffset).map(u=>Kr(u)&&!pa(u));return n.collapsed&&i.getOr(!0)},Dd=(e,n)=>(o,r)=>Mo(e,(u,m)=>u&&m(o,r),!0)?W.some(n):W.none(),TW=(e,n)=>FI([Dd([$5],Ml.none()),Dd([lS(!0),EW],Ml.none()),Dd([_W()],Ml.br()),Dd([lS(!0),TT(!1),kT],Ml.br()),Dd([lS(!0),TT(!1)],Ml.block()),Dd([lS(!0),TT(!0),kT],Ml.block()),Dd([lS(!0),TT(!0)],Ml.br()),Dd([cS(!0),kT],Ml.br()),Dd([cS(!0)],Ml.block()),Dd([V5],Ml.br()),Dd([kT],Ml.br()),Dd([z5],Ml.block()),Dd([U5],Ml.block())],[e,!!(n&&n.shiftKey)]).getOr(Ml.none()),gy=(e,n,o)=>{n.selection.isCollapsed()||i8(n),!($e(o)&&Od(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),$e(o)&&Pb(n,e.fakeEventName))},W5=(e,n)=>{const o=()=>gy(L5,e,n),r=()=>gy(B5,e,n),i=TW(e,n);switch(Gf(e)){case"linebreak":i.fold(o,o,Pe);break;case"block":i.fold(r,r,Pe);break;case"invert":i.fold(r,o,Pe);break;default:i.fold(o,r,Pe);break}},Z5=St(),AT=Z5.os.isiOS()&&Z5.browser.isSafari(),j5=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),VD(e.undoManager),e.undoManager.transact(()=>{W5(e,n)}))},Z3=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(pt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},j3=e=>{let n=W.none();const o=i=>{n=W.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(Pe,m=>i.selection.moveToBookmark(m)),j5(i,u),n=W.none()};e.on("keydown",i=>{i.keyCode===bt.ENTER&&(AT&&Z3(e.selection.getRng())?o(e):j5(e,i))}),e.on("keyup",i=>{i.keyCode===bt.ENTER&&n.each(()=>r(e,i))})},q5=(e,n,o)=>{const r=pn.os.isMacOS()||pn.os.isiOS();j2([{keyCode:bt.END,action:Un(AL,e,!0)},{keyCode:bt.HOME,action:Un(AL,e,!1)},...r?[]:[{keyCode:bt.HOME,action:Un(W2,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:bt.END,action:Un(W2,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:bt.END,action:Un(kz,e,!0)},{keyCode:bt.HOME,action:Un(kz,e,!1)},{keyCode:bt.END,action:Un(iT,e,!0,n)},{keyCode:bt.HOME,action:Un(iT,e,!1,n)}],o).each(i=>{o.preventDefault()})},kW=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||q5(e,n,o)})},kY=e=>{e.on("input",n=>{n.isComposing||j7(e)})},r1=St(),AW=(e,n,o)=>{j2([{keyCode:bt.PAGE_UP,action:Un(iT,e,!1,n)},{keyCode:bt.PAGE_DOWN,action:Un(iT,e,!0,n)}],o)},G5=e=>e.stopImmediatePropagation(),K5=e=>e.keyCode===bt.PAGE_UP||e.keyCode===bt.PAGE_DOWN,uS=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",G5,!0):!o&&e.get()&&n.off("NodeChange",G5),e.set(o)},Y5=(e,n)=>{if(r1.os.isMacOS())return;const o=Be(!1);e.on("keydown",r=>{K5(r)&&uS(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||AW(e,n,r),K5(r)&&o.get()&&(uS(o,e,!1),e.nodeChanged())})},X5=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||kt(n.getTargetRanges(),o=>!aO(e.dom,o)))&&n.preventDefault()})},J5=(e,n)=>{const o=n.container(),r=n.offset();return pt(o)?(o.insertData(r,e),W.some(Xe(o,r+e.length))):Jv(n).map(i=>{const u=pe.fromText(e);return n.isAtEnd()?qi(i,u):ii(i,u),Xe(u.dom,e.length)})},q3=nt(J5,Xr),Q5=nt(J5," "),OW=(e,n,o)=>IN(e,n,o)?q3(n):Q5(n),DW=e=>n=>n.fold(o=>rl(e.dom,Xe.before(o)),o=>_i(o),o=>tu(o),o=>Bc(e.dom,Xe.after(o))),G3=(e,n,o)=>r=>IN(e,r,o)?q3(n):Q5(n),OT=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},RW=(e,n)=>e.isEditable(e.getParent(n,"summary")),K3=e=>{const n=Xe.fromRangeStart(e.selection.getRng()),o=pe.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=nt(lb,e),i=Xe.fromRangeStart(e.selection.getRng());return ph(r,e.getBody(),i).bind(DW(o)).map(u=>()=>G3(o,n,e.schema)(u).each(OT(e)))}else return W.none()},eF=e=>{const n=()=>{const o=pe.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Xe.fromRangeStart(e.selection.getRng());OW(o,r,e.schema).each(OT(e))};return lr(pn.browser.isFirefox()&&e.selection.isEditable()&&RW(e.dom,e.selection.getRng().startContainer),n)},DT=(e,n)=>{NL([{keyCode:bt.SPACEBAR,action:Un(K3,e)},{keyCode:bt.SPACEBAR,action:Un(eF,e)}],n).each(o=>{n.preventDefault(),Od(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Pb(e,"insertText",{data:" "}))})},tF=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||DT(e,n)})},nF=e=>gA(e)?[{keyCode:bt.TAB,action:Un(Y2,e,!0)},{keyCode:bt.TAB,shiftKey:!0,action:Un(Y2,e,!1)}]:[],MW=(e,n)=>{j2([...nF(e)],n).each(o=>{n.preventDefault()})},NW=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||MW(e,n)})},RT=e=>{if(e.addShortcut("Meta+P","","mcePrint"),jU(e),fh(e))return Be(null);{const n=jV(e);return X5(e),yz(e),h3(e,n),oW(e,n),j3(e),tF(e),kY(e),NW(e),kW(e,n),Y5(e,n),n}};class oF{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),m={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!A(m,o))&&n.dispatch("SelectionChange"),o=m}),n.on("contextmenu",()=>{IC(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&Ap(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&Ap(n)&&(n.selection.getNode().nodeName==="IMG"?$u.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Fv(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();r=o.getStart(!0)||i,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,i))&&(r=i);const u=[];this.editor.dom.getParent(r,m=>m===i?!0:(u.push(m),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,i=vs(r.dom.getParents(n,wt,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const sF=dv("image"),PW=e=>{const n=e;return W.from(n[sF])},rF=(e,n)=>{const o=e;o[sF]=n},Y3=dv("event"),BW=e=>{const n=e;return W.from(n[Y3])},MT=e=>n=>{const o=n;o[Y3]=e},IW=(e,n)=>MT(n)(e),aF=MT(0),iF=MT(2),LW=MT(1),$W=(e=>n=>{const o=n;return W.from(o[Y3]).exists(r=>r===e)})(0),HW=()=>Object.freeze({length:0,item:e=>null}),X3=dv("mode"),VW=e=>{const n=e;return W.from(n[X3])},NT=e=>n=>{const o=n;o[X3]=e},Bb=(e,n)=>NT(n)(e),cF=NT(0),J3=NT(2),lF=NT(1),uF=e=>n=>{const o=n;return W.from(o[X3]).exists(r=>r===e)},py=uF(0),dF=uF(1),fF=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(py(e))if(ce(o)){if(!Pn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{py(e)&&n.remove(o)},clear:()=>{py(e)&&n.clear()}}),zW=["none","copy","link","move"],UW=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],mF=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){et(zW,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){$W(r)&&et(UW,i)&&(o=i)},get items(){return fF(r,e.items)},get files(){return dF(r)?HW():e.files},get types(){return e.types},setDragImage:(i,u,m)=>{py(r)&&(rF(r,{image:i,x:u,y:m}),e.setDragImage(i,u,m))},getData:i=>dF(r)?"":e.getData(i),setData:(i,u)=>{py(r)&&e.setData(i,u)},clearData:i=>{py(r)&&e.clearData(i)}};return cF(r),r},PT=e=>{const n=mF(),o=VW(e);return J3(e),aF(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,PW(e).each(r=>n.setDragImage(r.image,r.x,r.y)),xe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),xe(e.files,r=>n.items.add(r)),BW(e).each(r=>{IW(n,r)}),o.each(r=>{Bb(e,r),Bb(n,r)}),n},WW=e=>{const n=e.getData("text/html");return n===""?W.none():W.some(n)},hF=(e,n)=>e.setData("text/html",n),gF="x-tinymce/html",BT=ct(gF),Q3="<!-- "+gF+" -->",ZW=e=>Q3+e,jW=e=>e.replace(Q3,""),pF=e=>e.indexOf(Q3)!==-1,qW=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),GW=(e,n)=>{let o="<"+e;const r=hi(n,(i,u)=>u+'="'+fd.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},KW=(e,n,o)=>{const r=e.split(/\n\n/),i=GW(n,o),u="</"+n+">",m=dt(r,S=>S.split(/\n/).join("<br />")),y=S=>i+S+u;return m.length===1?m[0]:dt(m,y).join("")},bF="%MCEPASTEBIN%",YW=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},bF);pn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),r.select(u,!0)},zs=(e,n)=>{const o=e.dom;if(eR(e)){let r;const i=n.get();for(;r=eR(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},eR=e=>e.dom.get("mcepastebin"),vF=e=>$e(e)&&e.id==="mcepastebin",XW=e=>{const n=e.dom,o=(m,y)=>{m.appendChild(y),n.remove(y,!0)},[r,...i]=Zt(e.getBody().childNodes,vF);xe(i,m=>{o(r,m)});const u=n.select("div[id=mcepastebin]",r);for(let m=u.length-1;m>=0;m--){const y=n.create("div");r.insertBefore(y,u[m]),o(y,u[m])}return r?r.innerHTML:""},IT=e=>e===bF,yF=e=>{const n=Be(null);return{create:()=>YW(e,n),remove:()=>zs(e,n),getEl:()=>eR(e),getHtml:()=>XW(e),getLastRng:n.get}},wF=(e,n)=>(yt.each(n,o=>{Et(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),JW=e=>{const n=Kd(),o=Y0({},n);let r="";const i=n.getVoidElements(),u=yt.makeMap("script noscript style textarea video audio iframe object"," "),m=n.getBlockElements(),y=S=>{const O=S.name,L=S;if(O==="br"){r+=`
`;return}if(O!=="wbr"){if(i[O]&&(r+=" "),u[O]){r+=" ";return}if(S.type===3&&(r+=S.value),!(S.name in n.getVoidElements())){let F=S.firstChild;if(F)do y(F);while(F=F.next)}m[O]&&L.next&&(r+=`
`,O==="p"&&(r+=`
`))}};return e=wF(e,[/<!\[[^\]]+\]>/g]),y(o.parse(e)),r},tR=e=>(e=wF(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":Xr],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),nR=e=>{let n=0;return()=>e+n++},QW=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return yt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},eZ=(e,n)=>{const o=Y0({sanitize:Ei(e),sandbox_iframes:Xx(e),sandbox_iframes_exclusions:Zv(e),convert_unsafe_embeds:V1(e)},e.schema);o.addNodeFilter("meta",i=>{yt.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Og({validate:!0},e.schema).serialize(r)},CF=(e,n)=>({content:e,cancelled:n}),SF=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=ME(e,r,o);return CF(i.node.innerHTML,i.isDefaultPrevented())},tZ=(e,n,o)=>{const r=VA(e,n,o),i=eZ(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?SF(e,i,o):CF(i,r.isDefaultPrevented())},nZ=(e,n,o)=>tZ(e,n,o),a1=(e,n)=>(e.insertContent(n,{merge:jx(e),paste:!0}),!0),oR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),by=(e,n)=>oR(n)&&kt(H1(e),o=>na(n.toLowerCase(),`.${o.toLowerCase()}`)),dS=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),oZ=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),sZ=(e,n,o)=>!e.selection.isCollapsed()&&oR(n)?oZ(e,n,o):!1,vy=(e,n,o)=>by(e,n)?dS(e,n,o):!1,rZ=(e,n)=>{yt.each([sZ,vy,a1],o=>!o(e,n,a1))},sR=(e,n,o)=>{o||!fA(e)?a1(e,n):rZ(e,n)},aZ=nR("mceclip"),xF=e=>{const n=mF();return hF(n,e),J3(n),n},rR=(e,n,o,r,i)=>{const u=nZ(e,n,o);if(!u.cancelled){const m=u.content,y=()=>sR(e,m,r);i?Od(e,"insertFromPaste",{dataTransfer:xF(m)}).isDefaultPrevented()||(y(),Pb(e,"insertFromPaste")):y()}},yy=(e,n,o,r)=>{const i=o||pF(n);rR(e,jW(n),i,!1,r)},LT=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=bl(r,qx(e)),u=KW(i,Si(e),Jm(e));rR(e,u,!1,!0,o)},EF=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},i1=(e,n)=>n in e&&e[n].length>0,aR=e=>i1(e,"text/html")||i1(e,"text/plain"),iZ=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return $e(o)?e.dom.encode(o[1]):void 0},_F=(e,n,o,r)=>{const i=aZ(),u=us(e)&&$e(o.name),m=u?iZ(e,o.name):i,y=u?o.name:void 0,S=n.create(i,o,r,m,y);return n.add(S),S},iR=(e,n)=>{Up(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),m=n.file,y=e.editorUpload.blobCache,S=y.getByData(u,r),O=S??_F(e,y,m,u);yy(e,`<img src="${O.blobUri()}">`,!1,!0)})},TF=e=>e.type==="paste",cZ=e=>Promise.all(dt(e,n=>Pg(n).then(o=>({file:n,uri:o})))),lZ=e=>{const n=H1(e);return o=>es(o.type,"image/")&&kt(n,r=>QW(r)===o.type)},uZ=(e,n)=>{const o=n.items?ws(_r(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?_r(n.files):[];return Zt(o.length>0?o:r,lZ(e))},cR=(e,n,o)=>{const r=TF(n)?n.clipboardData:n.dataTransfer;if(pp(e)&&r){const i=uZ(e,r);if(i.length>0)return n.preventDefault(),cZ(i).then(u=>{o&&e.selection.setRng(o),xe(u,m=>{iR(e,m)})}),!0}return!1},lR=e=>{var n,o;return pn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},dZ=e=>bt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,FT=(e,n,o,r,i)=>{let u=tR(o);const m=i1(n,BT())||pF(o),y=!m&&qW(u),S=oR(u);(IT(u)||!u.length||y&&!S)&&(r=!0),(r||S)&&(i1(n,"text/plain")&&y?u=n["text/plain"]:u=JW(u)),!IT(u)&&(r?LT(e,u,i):yy(e,u,m,i))},kF=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{dZ(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||lR(u))return;const m=o.get()==="text"||r;r=!1;const y=EF(u.clipboardData);!aR(y)&&cR(e,u,i())||(i1(y,"text/html")?(u.preventDefault(),FT(e,y,y["text/html"],m,!0)):i1(y,"text/plain")&&i1(y,"text/uri-list")?(u.preventDefault(),FT(e,y,y["text/plain"],m,!0)):(n.create(),$u.setEditorTimeout(e,()=>{const S=n.getHtml();n.remove(),FT(e,y,S,m,!1)},0)))})},fZ=e=>{const n=i=>es(i,"webkit-fake-url"),o=i=>es(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,m)=>{if(!pp(e)&&r(m))for(const y of i){const S=y.attr("src");ce(S)&&!y.attr("data-mce-object")&&S!==pn.transparentSrc&&(n(S)||!bp(e)&&o(S))&&y.remove()}})},AF=(e,n,o)=>{kF(e,n,o),fZ(e)},mZ=(e,n)=>{n.get()==="text"?(n.set("html"),A0(e,!1)):(n.set("text"),A0(e,!0)),e.focus()},hZ=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{mZ(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&yy(e,r.html,r.internal,!1),r.text&&LT(e,r.text,!1)})},gZ=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(BT(),n),!0}catch{return!1}else return!1},OF=(e,n,o,r)=>{gZ(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},DF=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),m=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(m),r.add(e.getBody(),u);const y=i.getRng();m.focus();const S=r.createRng();S.selectNodeContents(m),i.setRng(S),$u.setEditorTimeout(e,()=>{i.setRng(y),r.remove(u),o()},0)},fS=e=>({html:ZW(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),pZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),uR=e=>!e.selection.isCollapsed()||pZ(e),bZ=e=>n=>{!n.isDefaultPrevented()&&uR(e)&&e.selection.isEditable()&&OF(n,fS(e),DF(e),()=>{if(pn.browser.isChromium()||pn.browser.isFirefox()){const o=e.selection.getRng();$u.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},vZ=e=>n=>{!n.isDefaultPrevented()&&uR(e)&&OF(n,fS(e),DF(e),Pe)},RF=e=>{e.on("cut",bZ(e)),e.on("copy",vZ(e))},dR=(e,n)=>{var o,r;return Tt.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},yZ=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},MF=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},wZ=e=>kt(e.files,n=>/^image\//.test(n.type)),CZ=(e,n,o,r)=>{const i=e.getParent(o,m=>Ou(n,m));if(!ne(e.getParent(o,"summary")))return!0;if(i&&Sn(r,"text/html")){const m=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ne(m.querySelector(i.nodeName.toLowerCase()))}else return!1},SZ=e=>{e.on("input",n=>{const o=r=>ne(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Zt(e.dom.select("details"),o);xe(r,i=>{Lo(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(ig().dom),i.prepend(u)})}})},NF=(e,n)=>{Vx(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),pp(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&wZ(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=dR(e,o);if(Qt(r))return;const i=EF(o.dataTransfer),u=i1(i,BT());if((!aR(i)||yZ(i))&&cR(e,o,r))return;const m=i[BT()],y=m||i["text/html"]||i["text/plain"],S=CZ(e.dom,e.schema,r.startContainer,i),O=n.get();O&&!S||y&&(o.preventDefault(),$u.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(m||O&&S)&&e.execCommand("Delete"),MF(e,r);const L=tR(y);i["text/html"]?yy(e,L,u,!0):LT(e,L,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{pp(e)&&!n.get()&&(o.preventDefault(),MF(e,dR(e,o))),o.type==="dragend"&&n.set(!1)}),SZ(e)},xZ=e=>{const n=i=>u=>{i(e,u)},o=zx(e);ve(o)&&e.on("PastePreProcess",n(o));const r=Ux(e);ve(r)&&e.on("PastePostProcess",n(r))},EZ=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},_Z=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,PF=e=>yt.trim(e).replace(_Z,hd).toLowerCase(),TZ=(e,n,o)=>{const r=dA(e);if(o||r==="all"||!Zx(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,m=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(y,S,O,L)=>{const F=u.parseStyle(u.decode(O)),V={};for(let re=0;re<i.length;re++){const ee=F[i[re]];let le=ee,we=u.getStyle(m,i[re],!0);/color/.test(i[re])&&(le=PF(le),we=PF(we)),we!==le&&(V[i[re]]=ee)}const Q=u.serializeStyle(V,"span");return Q?S+' style="'+Q+'"'+L:S+L})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,m,y,S)=>m+' style="'+y+'"'+S),n},kZ=e=>{(pn.browser.isChromium()||pn.browser.isSafari())&&EZ(e,TZ)},AZ=e=>{const n=Be(!1),o=Be(zv(e)?"text":"html"),r=yF(e);kZ(e),hZ(e,o),xZ(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{RF(e),NF(e,n),AF(e,r,o)})},OZ=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},BF=e=>{e.parser.addNodeFilter("details",n=>{const o=Yx(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Xw(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},IF=e=>{OZ(e),BF(e)},DZ=Lo,LF=pt,RZ=e=>Fo(e.dom),MZ=e=>rt(e.dom),FF=e=>n=>ro(pe.fromDom(e),n),NZ=(e,n,o)=>Qs(pe.fromDom(e),r=>MZ(r)||o.isBlock(yo(r)),FF(n)).getOr(pe.fromDom(n)).dom,$F=(e,n)=>Qs(pe.fromDom(e),RZ,FF(n)),mS=(e,n,o)=>{const r=new Ha(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let m=o?e:i();m&&!DZ(m);m=i())wl(m)&&(u=m);return u},HF=(e,n,o)=>{const i=Xe.fromRangeStart(e).getNode(),u=NZ(i,n,o),m=mS(i,u,!1),y=mS(i,u,!0),S=document.createRange();return $F(m,u).fold(()=>{LF(m)?S.setStart(m,0):S.setStartBefore(m)},O=>S.setStartBefore(O.dom)),$F(y,u).fold(()=>{LF(y)?S.setEnd(y,y.data.length):S.setEndAfter(y)},O=>S.setEndAfter(O.dom)),S},PZ=e=>{const n=HF(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Vs(n))},VF=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),PZ(e))})};var Ib;(function(e){e.Before="before",e.After="after"})(Ib||(Ib={}));const fR=(e,n)=>Math.abs(e.left-n),BZ=(e,n)=>Math.abs(e.right-n),zF=(e,n)=>e>=n.top&&e<=n.bottom,IZ=(e,n)=>e.top<n.bottom&&e.bottom>n.top,UF=(e,n)=>{const o=lg(e,n)/Math.min(e.height,n.height);return IZ(e,n)&&o>.5},LZ=(e,n)=>{const o=Zt(e,r=>zF(n,r));return Bk(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=To(e,m=>UF(m,r));return[i,u]})},WF=(e,n)=>({node:e.node,position:fR(e,n)<BZ(e,n)?Ib.Before:Ib.After}),FZ=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),mR=(e,n,o,r)=>{const i=F=>wl(F.node)?W.some(F):Wt(F.node)?mR(_r(F.node.childNodes),n,o,!1):W.none(),u=(F,V,Q)=>i(V).filter(re=>Math.abs(Q(F,n,o)-Q(re,n,o))<2&&pt(re.node)),m=(F,V)=>{const Q=Vo(F,(re,ee)=>V(re,n,o)-V(ee,n,o));return Oi(Q,i).map(re=>r&&!pt(re.node)&&Q.length>1?u(re,Q[1],V).getOr(re):re)},[y,S]=LZ(Ad(e),o),{pass:O,fail:L}=To(S,F=>F.top<o);return m(y,FZ).orThunk(()=>m(L,cx)).orThunk(()=>m(O,cx))},$Z=(e,n,o,r)=>{const i=(u,m)=>{const y=O=>Wt(O)&&O.classList.contains("mce-drag-container"),S=Zt(u.dom.childNodes,eo(y));return m.fold(()=>mR(S,o,r,!0),O=>{const L=Zt(S,F=>F!==O.dom);return mR(L,o,r,!0)}).orThunk(()=>(ro(u,e)?W.none():Of(u)).bind(L=>i(L,W.some(u))))};return i(n,W.none())},hS=(e,n,o)=>{const r=pe.fromDom(e),i=Cu(r),m=pe.fromPoint(i,n,o).filter(y=>Rr(r,y)).getOr(r);return $Z(r,m,n,o)},ZF=(e,n,o)=>hS(e,n,o).filter(r=>tf(r.node)).map(r=>WF(r,n)),jF=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,m=i.defaultView;return{top:r.top+((n=m==null?void 0:m.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=m==null?void 0:m.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},qF=e=>e.inline?jF(e.getBody()):{left:0,top:0},HZ=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},VZ=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},zZ=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=jF(e.getContentAreaContainer()),r=VZ(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},UZ=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),WZ=(e,n)=>UZ(qF(e),HZ(e),zZ(e,n)),gS=e=>({target:e,srcElement:e}),GF=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...gS(o)}),KF=(e,n,o)=>{const r=ms("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Pe,stopImmediatePropagation:Pe,stopPropagation:Pe,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...gS(n)}},ZZ=(e,n)=>{const o=PT(e);return n==="dragstart"?(aF(o),cF(o)):n==="drop"?(iF(o),J3(o)):(LW(o),lF(o)),o},jZ=(e,n,o,r)=>{const i=ZZ(o,e);return Pn(r)?KF(e,n,i):GF(e,r,n,i)},$T=32,AY=100,HT=8,pS=16,VT=Fo,zT=Ik(VT,rt),qZ=(e,n,o)=>VT(o)&&o!==n&&e.isEditable(o.parentElement),GZ=(e,n,o)=>Qt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),YF=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const m=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(m,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),m.appendChild(u),m},KZ=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},wy=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},hR=wy("left",-$T),XF=wy("left",$T),JF=wy("top",-$T),gR=wy("top",$T),YZ=(e,n,o,r,i,u,m,y,S,O,L,F)=>{let V=0,Q=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(V=n.pageX+o-i),n.pageY+r>u&&(Q=n.pageY+r-u),e.style.width=o-V+"px",e.style.height=r-Q+"px";const re=S.clientHeight,ee=S.clientWidth,le=m+S.getBoundingClientRect().top,we=y+S.getBoundingClientRect().left;L.on(De=>{De.intervalId.clear(),De.dragging&&F&&(m+HT>=re?De.intervalId.set(gR(O)):m-HT<=0?De.intervalId.set(JF(O)):y+HT>=ee?De.intervalId.set(XF(O)):y-HT<=0?De.intervalId.set(hR(O)):le+pS>=window.innerHeight?De.intervalId.set(gR(window)):le-pS<=0?De.intervalId.set(JF(window)):we+pS>=window.innerWidth?De.intervalId.set(XF(window)):we-pS<=0&&De.intervalId.set(hR(window)))})},XZ=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},JZ=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);XZ(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&eu(pe.fromDom(o))},QZ=e=>e.button===0,ej=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),QF=(e,n)=>o=>{if(QZ(o)){const r=Po(n.dom.getParents(o.target),zT).getOr(null);if($e(r)&&qZ(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),m=n.getDoc().documentElement;e.set({element:r,dataTransfer:mF(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:m.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:m.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:YF(n,r,r.offsetWidth,r.offsetHeight),intervalId:Am(AY)})}}},tj=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),ZF(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===Ib.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},Cy=(e,n,o,r,i)=>{n==="dragstart"&&hF(r,e.dom.getOuterHTML(o));const u=jZ(n,o,r,i);return e.dispatch(n,u)},nj=(e,n)=>{const o=T1((i,u)=>tj(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const m=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&m>10){const y=Cy(n,"dragstart",u.element,u.dataTransfer,i);if($e(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const y=i.currentTarget===n.getDoc().documentElement,S=ej(u,WZ(n,i));KZ(u.ghost,n.getBody()),YZ(u.ghost,S,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,y),o.throttle(i.clientX,i.clientY)}})},oj=e=>{const n=e.getSel();if($e(n)){const r=n.getRangeAt(0).startContainer;return pt(r)?r.parentNode:r}else return null},sj=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(GZ(n,oj(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();Cy(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{JZ(n.dom,r.element),WW(r.dataTransfer).each(y=>n.insertContent(y)),n._selectionOverrides.hideFakeCaret()})}Cy(n,"dragend",n.getBody(),r.dataTransfer,o)}}),pR(e)},e$=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Cy(n,"dragend",r.element,r.dataTransfer),i=>Cy(n,"dragend",r.element,r.dataTransfer,i))}),pR(e)},rj=(e,n)=>o=>e$(e,n,W.some(o)),pR=e=>{e.on(n=>{n.intervalId.clear(),XZ(n.ghost)}),e.clear()},OY=e=>{const n=Ci(),o=Ks.DOM,r=document,i=QF(n,e),u=nj(n,e),m=sj(n,e),y=rj(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",m),o.bind(r,"mousemove",u),o.bind(r,"mouseup",y),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",y)}),e.on("keydown",S=>{S.keyCode===bt.ESC&&e$(n,e,W.none())})},aj=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(et(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&S2(e,"Dropped file type is not supported"))}},o=i=>{WE(e,i.target)&&n(i)},r=()=>{const i=Ks.DOM,u=e.dom,m=document,y=e.inline?e.getBody():e.getDoc(),S=["drop","dragover"];xe(S,O=>{i.bind(m,O,o),u.bind(y,O,n)}),e.on("remove",()=>{xe(S,O=>{i.unbind(m,O,o),u.unbind(y,O,n)})})};e.on("init",()=>{$u.setEditorTimeout(e,r,0)})},t$=e=>{OY(e),$x(e)&&aj(e)},ij=e=>{const n=T1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=ay(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},bR=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(wi(o)){const r=$p(e.getBody(),o),i=Fo(r)?r:o;e.selection.getNode()!==i&&ry(e,i).each(u=>e.selection.setRng(u))}})})},bS=Fo,n$=(e,n)=>$p(e.getBody(),n),cj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=RM(e,r,o.isBlock,()=>Ag(e)),u="sel-"+o.uniqueId(),m="data-mce-selected";let y;const S=Yt=>$e(Yt)&&o.hasClass(Yt,"mce-offscreen-selection"),O=Yt=>Yt!==r&&(bS(Yt)||wi(Yt))&&o.isChildOf(Yt,r)&&o.isEditable(Yt.parentNode),L=Yt=>{Yt&&n.setRng(Yt)},F=(Yt,Je,Ue,ut=!0)=>e.dispatch("ShowCaret",{target:Je,direction:Yt,before:Ue}).isDefaultPrevented()?null:(ut&&n.scrollIntoView(Je,Yt===-1),i.show(Ue,Je)),V=Yt=>{Yt.hasAttribute("data-mce-caret")&&(Qd(Yt),n.scrollIntoView(Yt))},Q=()=>{e.on("click",Je=>{o.isEditable(Je.target)||(Je.preventDefault(),e.focus())}),e.on("blur NewBlock",He),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Je=>{const Ue=Je.target,ut=n$(e,Ue);bS(ut)?(Je.preventDefault(),ry(e,ut).each(Oe)):O(Ue)&&ry(e,Ue).each(Oe)},!0),e.on("mousedown",Je=>{const Ue=Je.target;if(Ue!==r&&Ue.nodeName!=="HTML"&&!o.isChildOf(Ue,r)||!D9(e,Je.clientX,Je.clientY))return;He(),Rt();const ut=n$(e,Ue);bS(ut)?(Je.preventDefault(),ry(e,ut).each(Oe)):ZF(r,Je.clientX,Je.clientY).each(an=>{Je.preventDefault();const wn=F(1,an.node,an.position===Ib.Before,!1);L(wn),qc(ut)?ut.focus():e.getBody().focus()})}),e.on("keypress",Je=>{bt.modifierPressed(Je)||bS(n.getNode())&&Je.preventDefault()}),e.on("GetSelectionRange",Je=>{let Ue=Je.range;if(y){if(!y.parentNode){y=null;return}Ue=Ue.cloneRange(),Ue.selectNode(y),Je.range=Ue}}),e.on("SetSelectionRange",Je=>{Je.range=le(Je.range);const Ue=Oe(Je.range,Je.forward);Ue&&(Je.range=Ue)});const Yt=Je=>Wt(Je)&&Je.id==="mcepastebin";e.on("AfterSetSelectionRange",Je=>{const Ue=Je.range,ut=Ue.startContainer.parentElement;!ee(Ue)&&!Yt(ut)&&Rt(),S(ut)||He()}),t$(e),ij(e),bR(e)},re=Yt=>tl(Yt)||Um(Yt)||ko(Yt),ee=Yt=>re(Yt.startContainer)||re(Yt.endContainer),le=Yt=>{const Je=e.schema.getVoidElements(),Ue=o.createRng(),ut=Yt.startContainer,an=Yt.startOffset,wn=Yt.endContainer,go=Yt.endOffset;return Sn(Je,ut.nodeName.toLowerCase())?an===0?Ue.setStartBefore(ut):Ue.setStartAfter(ut):Ue.setStart(ut,an),Sn(Je,wn.nodeName.toLowerCase())?go===0?Ue.setEndBefore(wn):Ue.setEndAfter(wn):Ue.setEnd(wn,go),Ue},we=(Yt,Je)=>{const Ue=pe.fromDom(e.getBody()),ut=e.getDoc(),an=mn(Ue,"#"+u).getOrThunk(()=>{const wo=pe.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ut);return js(wo,"id",u),rr(Ue,wo),wo}),wn=o.createRng();ad(an),xu(an,[pe.fromText(Xr,ut),pe.fromDom(Je),pe.fromText(Xr,ut)]),wn.setStart(an.dom.firstChild,1),wn.setEnd(an.dom.lastChild,0),Yn(an,{top:o.getPos(Yt,e.getBody()).y+"px"}),R0(an);const go=n.getSel();return go&&(go.removeAllRanges(),go.addRange(wn)),wn},De=Yt=>{const Je=Yt.cloneNode(!0),Ue=e.dispatch("ObjectSelected",{target:Yt,targetClone:Je});if(Ue.isDefaultPrevented())return null;const ut=we(Yt,Ue.targetClone),an=pe.fromDom(Yt);return xe(ci(pe.fromDom(e.getBody()),`*[${m}]`),wn=>{ro(an,wn)||Cr(wn,m)}),o.getAttrib(Yt,m)||Yt.setAttribute(m,"1"),y=Yt,Rt(),ut},Oe=(Yt,Je)=>{if(!Yt)return null;if(Yt.collapsed){if(!ee(Yt)){const wn=Je?1:-1,go=Z1(wn,r,Yt),wo=go.getNode(!Je);if($e(wo)){if(tf(wo))return F(wn,wo,Je?!go.isAtEnd():!1,!1);if(Wf(wo)&&Fo(wo.nextSibling)){const ps=o.createRng();return ps.setStart(wo,0),ps.setEnd(wo,0),ps}}const ns=go.getNode(Je);if($e(ns)){if(tf(ns))return F(wn,ns,Je?!1:!go.isAtEnd(),!1);if(Wf(ns)&&Fo(ns.previousSibling)){const ps=o.createRng();return ps.setStart(ns,1),ps.setEnd(ns,1),ps}}}return null}let Ue=Yt.startContainer,ut=Yt.startOffset;const an=Yt.endOffset;if(pt(Ue)&&ut===0&&bS(Ue.parentNode)&&(Ue=Ue.parentNode,ut=o.nodeIndex(Ue),Ue=Ue.parentNode),!Wt(Ue))return null;if(an===ut+1&&Ue===Yt.endContainer){const wn=Ue.childNodes[ut];if(O(wn))return De(wn)}return null},He=()=>{y&&y.removeAttribute(m),mn(pe.fromDom(e.getBody()),"#"+u).each(gs),y=null},ft=()=>{i.destroy(),y=null},Rt=()=>{i.hide()};return fh(e)||Q(),{showCaret:F,showBlockCaretContainer:V,hideFakeCaret:Rt,destroy:ft}},o$=(e,n)=>{let o=n;for(let r=e.previousSibling;pt(r);r=r.previousSibling)o+=r.data.length;return o},vS=(e,n,o,r,i)=>{if(pt(o)&&(r<0||r>o.data.length))return[];const u=i&&pt(o)?[o$(o,r)]:[r];let m=o;for(;m!==n&&m.parentNode;)u.push(e.nodeIndex(m,i)),m=m.parentNode;return m===n?u.reverse():[]},UT=(e,n,o,r,i,u,m=!1)=>{const y=vS(e,n,o,r,m),S=vS(e,n,i,u,m);return{start:y,end:S}},vR=(e,n)=>{const o=n.slice(),r=o.pop();return so(r)?Mo(o,(u,m)=>u.bind(y=>W.from(y.childNodes[m])),W.some(e)).bind(u=>pt(u)&&(r<0||r>u.data.length)?W.none():W.some({node:u,offset:r})):W.none()},s$=(e,n)=>vR(e,n.start).bind(({node:o,offset:r})=>vR(e,n.end).map(({node:i,offset:u})=>{const m=document.createRange();return m.setStart(o,r),m.setEnd(i,u),m})),lj=(e,n,o,r=!1)=>UT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Lb=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,pt(n.firstChild)&&Tc(n.firstChild.data)),Lb(e,r,o)}},WT=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(pt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),pt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Lb(e,i,o),i!==u&&Lb(e,u,o))},ZT=(e,n)=>W.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),yR=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Iw(r).concat(e.blockPatterns),inlinePatterns:_x(r).concat(e.inlinePatterns)}},yS=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},r$=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),jT=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},a$=(e,n,o)=>{const r=s$(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,m=r.endOffset===0?u:u.splitText(r.endOffset),y=r.startOffset===0?i:i.splitText(r.startOffset),S=y.parentNode,O=m.parentNode;return{prefix:n,end:O.insertBefore(r$(e,n+"-end"),m),start:S.insertBefore(r$(e,n+"-start"),y)}},i$=(e,n,o)=>{Lb(e,e.get(n.prefix+"-end"),o),Lb(e,e.get(n.prefix+"-start"),o)},wR=e=>e.start.length===0,uj=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),m=i.lastIndexOf(e);return m!==-1?m+e.length:u!==-1?u+1:-1},CR=(e,n,o,r)=>{const i=n.start;return b3(e,r.container,r.offset,uj(i),o).bind(m=>{var y,S;const O=(S=(y=o.textContent)===null||y===void 0?void 0:y.indexOf(i))!==null&&S!==void 0?S:-1;if(O!==-1&&m.offset>=O+i.length){const F=e.createRng();return F.setStart(m.container,m.offset-i.length),F.setEnd(m.container,m.offset),W.some(F)}else{const F=m.offset-i.length;return p3(m.container,F,o).map(V=>{const Q=e.createRng();return Q.setStart(V.container,V.offset),Q.setEnd(m.container,m.offset),Q}).filter(V=>V.toString()===i).orThunk(()=>CR(e,n,o,pf(m.container,0)))}})},c$=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const m=e.createRng();return m.setStart(o,r),m.setEnd(o,r),W.some(m)}return g3(o,r,i).bind(m=>CR(e,n,i,m).bind(S=>{var O;if(u){if(S.endContainer===m.container&&S.endOffset===m.offset)return W.none();if(m.offset===0&&((O=S.endContainer.textContent)===null||O===void 0?void 0:O.length)===S.endOffset)return W.none()}return W.some(S)}))},SR=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),m=o.pattern,y=o.position.container,S=o.position.offset;return p3(y,S-o.pattern.end.length,n).bind(O=>{const L=UT(i,u,O.container,O.offset,y,S,r);if(wR(m))return W.some({matches:[{pattern:m,startRng:L,endRng:L}],position:O});{const F=Sy(e,o.remainingPatterns,O.container,O.offset,n,r),V=F.getOr({matches:[],position:O}),Q=V.position;return c$(i,m,Q.container,Q.offset,n,F.isNone()).map(ee=>{const le=lj(i,u,ee,r);return{matches:V.matches.concat([{pattern:m,startRng:le,endRng:L}]),position:pf(ee.startContainer,ee.startOffset)}})}})},Sy=(e,n,o,r,i,u)=>{const m=e.dom;return g3(o,r,m.getRoot()).bind(y=>{const S=yS(m,i,o,r);for(let O=0;O<n.length;O++){const L=n[O];if(!na(S,L.end))continue;const F=n.slice();F.splice(O,1);const V=SR(e,i,{pattern:L,remainingPatterns:F,position:y},u);if(V.isNone()&&r>0)return Sy(e,n,o,r-1,i,u);if(V.isSome())return V}return W.none()})},l$=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?xe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},xR=(e,n,o,r)=>{const i=jT(e.dom,o);WT(e.dom,i,r),l$(e,n,i)},dj=(e,n,o,r,i)=>{const u=e.dom,m=jT(u,r),y=jT(u,o);WT(u,y,i),WT(u,m,i);const S={prefix:o.prefix,start:o.end,end:r.start},O=jT(u,S);l$(e,n,O)},fj=(e,n)=>{const o=dv("mce_textpattern"),r=ss(n,(i,u)=>{const m=a$(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:m}])},[]);return ss(r,(i,u)=>{const m=r.length-i.length-1,y=wR(u.pattern)?u.endMarker:a$(e,o+`_start${m}`,u.startRng);return i.concat([{...u,startMarker:y}])},[])},u$=e=>Vo(e,(n,o)=>o.end.length-n.end.length),mj=(e,n)=>{const o=bs(e,r=>kt(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},d$=(e,n,o,r,i,u)=>{const m=Sy(e,i.inlinePatterns,o,r,n,u).fold(()=>[],S=>S.matches),y=Sy(e,u$(i.inlinePatterns),o,r,n,u).fold(()=>[],S=>S.matches);return mj(m,y)},f$=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=fj(o,n);xe(i,u=>{const m=o.getParent(u.startMarker.start,o.isBlock),y=S=>S===m;wR(u.pattern)?xR(e,u.pattern,u.endMarker,y):dj(e,u.pattern,u.startMarker,u.endMarker,y),i$(o,u.endMarker,y),i$(o,u.startMarker,y)}),e.selection.moveToBookmark(r)},m$=(e,n,o)=>Jz(n,0,n).map(r=>{const i=r.container;return Q2(i,o.start.length,n).each(u=>{const m=e.createRng();m.setStart(i,0),m.setEnd(u.container,u.offset),WT(e,m,y=>y===n)}),i}),h$=e=>(n,o)=>{const r=n.dom,i=o.pattern,u=s$(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),m=(y,S)=>{const O=S.get(y);return jt(O)&&fo(O).exists(L=>Sn(L,"block"))};return ZT(n,u).each(y=>{i.type==="block-format"?m(i.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,y,i),n.formatter.apply(i.format)}):i.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,y,i),n.execCommand(i.cmd,!1,i.value)})}),!0},hj=e=>Vo(e,(n,o)=>o.start.length-n.start.length),g$=e=>(n,o)=>{const r=hj(n),i=o.replace(Xr," ");return Po(r,u=>e(u,o,i))},ER=(e,n)=>(o,r,i,u,m)=>{var y;m===void 0&&(m=(y=r.textContent)!==null&&y!==void 0?y:"");const S=o.dom,O=Si(o);return S.is(r,O)?e(i.blockPatterns,m).map(L=>n&&yt.trim(m).length===L.start.length?[]:[{pattern:L,range:UT(S,S.getRoot(),r,0,r,0,u)}]).getOr([]):[]},gj=e=>/^\s[^\s]/.test(e),pj=h$((e,n,o)=>{m$(e,n,o).each(r=>{const i=pe.fromDom(r),u=$m(i);gj(u)&&gw(i,u.slice(1))})}),bj=g$((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),vj=ER(bj,!0),yj=(e,n)=>{const o=e.selection.getRng();return ZT(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),m=yR(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),y=d$(e,r,o.startContainer,u,m,!0),S=vj(e,r,m,!0);return{inlineMatches:y,blockMatches:S}}).filter(({inlineMatches:r,blockMatches:i})=>i.length>0||r.length>0)},wj=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();xe(n,r=>pj(e,r)),e.selection.moveToBookmark(o)},Cj=h$(m$),qT=g$((e,n,o)=>n===e.start||o===e.start),Sj=ER(qT,!1),xj=(e,n)=>{const o=e.selection.getRng();return ZT(e,o).map(r=>{const i=Math.max(0,o.startOffset),u=yS(e.dom,r,o.startContainer,i),m=yR(n,r,u);return Sj(e,r,m,!1,u)}).filter(r=>r.length>0)},Ej=(e,n)=>{xe(n,o=>Cj(e,o))},_j=(e,n)=>yj(e,n).fold(tt,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Mk(e),f$(e,o),wj(e,r);const i=e.selection.getRng(),u=g3(i.startContainer,i.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(m=>{const y=m.container;y.data.charAt(m.offset-1)===Gg&&(y.deleteData(m.offset-1,1),Lb(e.dom,y.parentNode,S=>S===e.dom.getRoot()))})}),!0)),Tj=(e,n)=>{const o=e.selection.getRng();ZT(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=yS(e.dom,r,o.startContainer,i),m=yR(n,r,u),y=d$(e,r,o.startContainer,i,m,!1);y.length>0&&e.undoManager.transact(()=>{f$(e,y)})})},kj=(e,n)=>xj(e,n).fold(tt,o=>(e.undoManager.transact(()=>{Ej(e,o)}),!0)),b$=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},Aj=(e,n)=>b$(e,n,(o,r)=>o===r.keyCode&&!bt.modifierPressed(r)),Oj=(e,n)=>b$(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),v$=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>dg(Gx(e).filter(m=>m.type==="inline-command"||m.type==="block-command"?e.queryCommandSupported(m.cmd):!0),Kw(e)),i=()=>xl(e);e.on("keydown",m=>{if(m.keyCode===13&&!bt.modifierPressed(m)&&e.selection.isCollapsed()){const y=Ua(r(),"enter");(y.inlinePatterns.length>0||y.blockPatterns.length>0||i())&&_j(e,y)&&m.preventDefault()}},!0),e.on("keydown",m=>{if(m.keyCode===32&&e.selection.isCollapsed()){const y=Ua(r(),"space");(y.blockPatterns.length>0||i())&&kj(e,y)&&m.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const m=Ua(r(),"space");(m.inlinePatterns.length>0||i())&&Tj(e,m)}};e.on("keyup",m=>{Aj(o,m)&&u()}),e.on("keypress",m=>{Oj(n,m)&&$u.setEditorTimeout(e,u)})},Dj=e=>{v$(e)},y$=e=>{const n=yt.each,o=bt.BACKSPACE,r=bt.DELETE,i=e.dom,u=e.selection,m=e.parser,y=pn.browser,S=y.isFirefox(),O=y.isChromium()||y.isSafari(),L=pn.deviceType.isiPhone()||pn.deviceType.isiPad(),F=pn.os.isMacOS()||pn.os.isiOS(),V=(zt,Tn)=>{try{e.getDoc().execCommand(zt,!1,String(Tn))}catch{}},Q=zt=>zt.isDefaultPrevented(),re=()=>{const zt=mo=>{const Gt=i.create("body"),ho=mo.cloneContents();return Gt.appendChild(ho),u.serializer.serialize(Gt,{format:"html"})},Tn=mo=>{const Gt=zt(mo),ho=i.createRng();ho.selectNode(e.getBody());const Co=zt(ho);return Gt===Co};e.on("keydown",mo=>{const Gt=mo.keyCode;if(!Q(mo)&&(Gt===r||Gt===o)&&e.selection.isEditable()){const ho=e.selection.isCollapsed(),Co=e.getBody();if(ho&&!Au(e.schema,Co)||!ho&&!Tn(e.selection.getRng()))return;mo.preventDefault(),e.setContent(""),Co.firstChild&&i.isBlock(Co.firstChild)?e.selection.setCursorLocation(Co.firstChild,0):e.selection.setCursorLocation(Co,0),e.nodeChanged()}})},ee=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},le=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",zt=>{let Tn;if(zt.target===e.getDoc().documentElement)if(Tn=u.getRng(),e.getBody().focus(),zt.type==="mousedown"){if(tl(Tn.startContainer))return;u.placeCaretAt(zt.clientX,zt.clientY)}else u.setRng(Tn)})},we=()=>{e.on("keydown",zt=>{if(!Q(zt)&&zt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Tn=u.getNode(),mo=Tn.previousSibling;if(Tn.nodeName==="HR"){i.remove(Tn),zt.preventDefault();return}mo&&mo.nodeName&&mo.nodeName.toLowerCase()==="hr"&&(i.remove(mo),zt.preventDefault())}}})},De=()=>{Range.prototype.getClientRects||e.on("mousedown",zt=>{if(!Q(zt)&&zt.target.nodeName==="HTML"){const Tn=e.getBody();Tn.blur(),$u.setEditorTimeout(e,()=>{Tn.focus()})}})},Oe=()=>{const zt=Zw(e);e.on("click",Tn=>{const mo=Tn.target;/^(IMG|HR)$/.test(mo.nodeName)&&i.isEditable(mo)&&(Tn.preventDefault(),e.selection.select(mo),e.nodeChanged()),mo.nodeName==="A"&&i.hasClass(mo,zt)&&mo.childNodes.length===0&&i.isEditable(mo.parentNode)&&(Tn.preventDefault(),u.select(mo))})},He=()=>{const zt=()=>{const mo=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const Gt=u.getStart();Gt!==e.getBody()&&(i.setAttrib(Gt,"style",null),n(mo,ho=>{Gt.setAttributeNode(ho.cloneNode(!0))}))}},Tn=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",mo=>{let Gt;return!Q(mo)&&(mo.keyCode===8||mo.keyCode===46)&&Tn()?(Gt=zt(),e.getDoc().execCommand("delete",!1),Gt(),mo.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",mo=>{if(!Q(mo)&&Tn()){const Gt=zt();$u.setEditorTimeout(e,()=>{Gt()})}})},ft=()=>{e.on("keydown",zt=>{if(!Q(zt)&&zt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Tn=u.getNode().previousSibling;if(Tn&&Tn.nodeName&&Tn.nodeName.toLowerCase()==="table")return zt.preventDefault(),!1}return!0})},Rt=()=>{e.on("keydown",zt=>{if(Q(zt)||zt.keyCode!==bt.BACKSPACE)return;let Tn=u.getRng();const mo=Tn.startContainer,Gt=Tn.startOffset,ho=i.getRoot();let Co=mo;if(!(!Tn.collapsed||Gt!==0)){for(;Co.parentNode&&Co.parentNode.firstChild===Co&&Co.parentNode!==ho;)Co=Co.parentNode;Co.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Co),Tn=i.createRng(),Tn.setStart(mo,0),Tn.setEnd(mo,0),u.setRng(Tn))}})},Yt=()=>{const zt=()=>{V("StyleWithCSS",!1),V("enableInlineTableEditing",!1),Sl(e)||V("enableObjectResizing",!1)};Fx(e)||e.on("BeforeExecCommand mousedown",zt)},Je=()=>{const zt=()=>{n(i.select("a:not([data-mce-block])"),Tn=>{var mo;let Gt=Tn.parentNode;const ho=i.getRoot();if((Gt==null?void 0:Gt.lastChild)===Tn){for(;Gt&&!i.isBlock(Gt);){if(((mo=Gt.parentNode)===null||mo===void 0?void 0:mo.lastChild)!==Gt||Gt===ho)return;Gt=Gt.parentNode}i.add(Gt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Tn=>{(Tn.type==="setcontent"||Tn.command==="mceInsertLink")&&zt()})},Ue=()=>{e.on("init",()=>{V("DefaultParagraphSeparator",Si(e))})},ut=zt=>{const Tn=zt.getBody(),mo=zt.selection.getRng();return mo.startContainer===mo.endContainer&&mo.startContainer===Tn&&mo.startOffset===0&&mo.endOffset===Tn.childNodes.length},an=()=>{e.on("keyup focusin mouseup",zt=>{!bt.modifierPressed(zt)&&!ut(e)&&u.normalize()},!0)},wn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},go=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},wo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",zt=>{let Tn;zt.target.nodeName==="HTML"&&(Tn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Tn),e.selection.normalize(),e.nodeChanged())}))},ns=()=>{F&&e.on("keydown",zt=>{bt.metaKeyPressed(zt)&&!zt.shiftKey&&(zt.keyCode===37||zt.keyCode===39)&&(zt.preventDefault(),e.selection.getSel().modify("move",zt.keyCode===37?"backward":"forward","lineboundary"))})},ps=()=>{e.on("click",zt=>{let Tn=zt.target;do if(Tn.tagName==="A"){zt.preventDefault();return}while(Tn=Tn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Lr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",zt=>{zt.preventDefault()})})},Ea=()=>{m.addNodeFilter("br",zt=>{let Tn=zt.length;for(;Tn--;)zt[Tn].attr("class")==="Apple-interchange-newline"&&zt[Tn].remove()})},Ts=Pe,Bt=()=>{if(!S||e.removed)return!1;const zt=e.selection.getSel();return!zt||!zt.rangeCount||zt.rangeCount===0},vn=()=>{O&&(le(),Oe(),Lr(),ee(),L&&(go(),wo(),ps())),S&&(De(),Yt(),wn(),ns())},$o=()=>{Rt(),re(),pn.windowsPhone||an(),O&&(le(),Oe(),Ue(),Lr(),ft(),Ea(),L?(go(),wo(),ps()):ee()),S&&(we(),De(),He(),Yt(),Je(),wn(),ns(),ft())};return fh(e)?vn():$o(),{refreshContentEditable:Ts,isHidden:Bt}},Rj=e=>e.toLowerCase()==="gpl",Mj=e=>e.length>=64&&e.length<=255,w$=e=>Rj(e)||Mj(e)?"VALID":"INVALID",wS=e=>{const n=Jx(e);!ce(Qx(e))&&(Pn(n)||w$(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},_R=Ks.DOM,C$=(e,n)=>{const o=pe.fromDom(e.getBody()),r=Rf(jc(o)),i=pe.fromTag("style");js(i,"type","text/css"),rr(i,pe.fromText(n)),rr(r,i),e.on("remove",()=>{gs(i)})},Nj=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,TR=e=>Wo(e,n=>Pn(n)===!1),S$=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return TR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:Nj(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Zv(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},x$=e=>{const n=e.options.get;return TR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},E$=e=>{const n=e.options.get;return{...S$(e),...x$(e),...TR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},Pj=e=>{const n=Y0(S$(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let m=o.length;for(;m--;){const y=o[m];let S=y.attr(r);if(S&&!y.attr(u)){if(S.indexOf("data:")===0||S.indexOf("blob:")===0)continue;r==="style"?(S=i.serializeStyle(i.parseStyle(S),y.name),S.length||(S=null),y.attr(u,S),y.attr(r,S)):r==="tabindex"?(y.attr(u,S),y.attr(r,null)):y.attr(u,e.convertURL(S,r,y.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),Uv(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new cl("br",1))}}),n},_$=e=>{const n=Hx(e);n&&$u.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Bj=e=>{const n=e.dom.getRoot();!e.inline&&(!Ap(e)||e.selection.getStart(!0)===n)&&_i(n).each(o=>{const r=o.getNode(),i=ql(r)?_i(r).getOr(o):o;e.selection.setRng(i.toRange())})},Ij=e=>{e.bindPendingEventDelegates(),e.initialized=!0,$A(e),e.focus(!0),Bj(e),e.nodeChanged({initial:!0});const n=uA(e);ve(n)&&n.call(e,e),_$(e)},kR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Lj=(e,n,o)=>{const{pass:r,fail:i}=To(n,y=>tinymce.Resource.has(_2(y))),m=[...r.map(y=>{const S=tinymce.Resource.get(_2(y));return ce(S)?Promise.resolve(kR(e).loadRawCss(y,S)):Promise.resolve()}),kR(e).loadAll(i)];return e.inline?m:m.concat([e.ui.styleSheetLoader.loadAll(o)])},T$=e=>{const n=kR(e),o=Nc(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let S="";yt.each(e.contentStyles,O=>{S+=O+`\r
`}),e.dom.addStyle(S)}const m=Promise.all(Lj(e,r,o)).then(u).catch(u),y=sA(e);return y&&C$(e,y),m},Fj=e=>{const n=e.getDoc(),o=e.getBody();_0(e),qw(e)||(n.body.spellcheck=!1,_R.setAttrib(o,"spellcheck","false")),e.quirks=y$(e),AE(e);const r=OM(e);r!==void 0&&(o.dir=r);const i=Gw(e);i&&e.on("BeforeSetContent",u=>{yt.each(i,m=>{u.content=u.content.replace(m,y=>"<!--mce:protected "+escape(y)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},$j=e=>{fh(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},AR=e=>{e.removed!==!0&&($j(e),Ij(e))},Hj=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},OR=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(_R.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Fx(e),e._editableRoot=cA(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&_R.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=i4(e),e.schema=Kd(x$(e)),e.dom=Ks(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Mx(e),referrerPolicy:Nv(e),onSetAttrib:m=>{e.dispatch("SetAttrib",m)}}),e.parser=Pj(e),e.serializer=zi(E$(e),e),e.selection=c9(e.dom,e.getWin(),e.serializer,e),e.annotator=C0(e),e.formatter=im(e),e.undoManager=sy(e),e._nodeChangeDispatcher=new oF(e),e._selectionOverrides=cj(e),dz(e),IF(e),bz(e),fh(e)||(VF(e),Dj(e));const i=RT(e);vL(e,i),J4(e),tV(e),AZ(e);const u=UH(e);Fj(e),wS(e),u.fold(()=>{const m=Hj(e);T$(e).then(()=>{AR(e),m()})},m=>{e.setProgressState(!0),T$(e).then(()=>{m().then(y=>{e.setProgressState(!1),AR(e),XD(e)},y=>{e.notificationManager.open({type:"error",text:String(y)}),AR(e),XD(e)})})})},DR=wt,k$=(e,n,o)=>k(e,n,DR,o),GT=Ks.DOM,Vj=(e,n,o,r)=>{const i=pe.fromTag("iframe");return r.each(u=>js(i,"tabindex",u)),Zc(i,o),Zc(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),gl(i,"tox-edit-area__iframe"),i},zj=e=>{let n=Jk(e)+"<html><head>";ui(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Qk(e),r=Xm(e),i=e.translate(jw(e));return Hw(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Hw(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},Uj=(e,n)=>{const o=pn.browser.isFirefox()?jw(e):"Rich Text Area",r=e.translate(o),i=wr(pe.fromDom(e.getElement()),"tabindex").bind(Qi),u=Vj(e.id,r,kx(e),i).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=zj(e),GT.add(n.iframeContainer,u)},A$=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,OR(e)};if(DM(e)||pn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=k$(pe.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},O$=(e,n)=>{Uj(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=GT.isHidden(n.editorContainer)),e.getElement().style.display="none",GT.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,A$(e)},D$=Ks.DOM,Wj=(e,n,o)=>{const r=ey.get(o),i=ey.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=yt.trim(o),r&&yt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,ve(u.init)&&(u.init(e,i),n.push(o))}catch(u){F9(e,o,u)}}},RR=e=>e.replace(/^\-/,""),KT=e=>{const n=[];xe($v(e),o=>{Wj(e,n,RR(o))})},YT=e=>{const n=yt.trim(wa(e)),o=e.ui.registry.getAll().icons,r={...q_.get("default").icons,...q_.get(n).icons};At(r,(i,u)=>{Sn(o,u)||e.ui.registry.addIcon(u,i)})},Vg=e=>{const n=eh(e);if(ce(n)){const o=jp.get(n);e.theme=o(e,jp.urls[n])||{},ve(e.theme.init)&&e.theme.init(e,jp.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},XT=e=>{const n=Iv(e),o=Q0.get(n);e.model=o(e,Q0.urls[n])},xy=e=>{const n=e.theme.renderUI;return n?n():MR(e)},R$=e=>{const n=e.getElement(),r=eh(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},M$=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Zj=e=>{const n=D$.create("div");return D$.insertAfter(n,e),M$(n,n)},MR=e=>{const n=e.getElement();return e.inline?M$(null):Zj(n)},jj=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ce(eh(e))?xy(e):ve(eh(e))?R$(e):MR(e)},NR=(e,n)=>{const o={show:W.from(n.show).getOr(Pe),hide:W.from(n.hide).getOr(Pe),isEnabled:W.from(n.isEnabled).getOr(wt),setEnabled:r=>{e.mode.isReadOnly()||W.from(n.setEnabled).each(i=>i(r))}};e.ui={...e.ui,...o}},JT=async e=>{e.dispatch("ScriptsLoaded"),YT(e),Vg(e),XT(e),KT(e);const n=await jj(e);NR(e,W.from(n.api).getOr({})),e.editorContainer=n.editorContainer,fs(e),e.inline?OR(e):O$(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Ku=Ks.DOM,c1=e=>e.charAt(0)==="-",N$=(e,n)=>{const o=Qm(n),r=Pv(n);if(!za.hasCode(o)&&o!=="en"){const i=xo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{B9(n,i,o)})}},qj=(e,n)=>{const o=eh(e);if(ce(o)&&!c1(o)&&!Sn(jp.urls,o)){const r=Vw(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;jp.load(o,i).catch(()=>{I9(e,i,o)})}},Gj=(e,n)=>{const o=Iv(e);if(o!=="plugin"&&!Sn(Q0.urls,o)){const r=Px(e),i=ce(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Q0.load(o,i).catch(()=>{L9(e,i,o)})}},Kj=e=>W.from(Ca(e)).filter(xo).map(n=>({url:n,name:W.none()})),P$=(e,n,o)=>W.from(n).filter(r=>xo(r)&&!q_.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:W.some(r)})),Yj=(e,n,o)=>{const r=P$(n,"default",o),i=Kj(n).orThunk(()=>P$(n,wa(n),""));xe(ni([r,i]),u=>{e.add(u.url).catch(()=>{hI(n,u.url,u.name.getOrUndefined())})})},Xj=(e,n)=>{const o=(r,i)=>{ey.load(r,i).catch(()=>{P9(e,i,r)})};At(lA(e),(r,i)=>{o(i,r),e.options.set("plugins",$v(e).concat(i))}),xe($v(e),r=>{r=yt.trim(r),r&&!ey.urls[r]&&!c1(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},B$=e=>{const n=eh(e);return!ce(n)||$e(jp.get(n))},Jj=e=>{const n=Iv(e);return $e(Q0.get(n))},Qj=(e,n)=>{const o=gd.ScriptLoader,r=()=>{!e.removed&&B$(e)&&Jj(e)&&JT(e)};qj(e,n),Gj(e,n),N$(o,e),Yj(o,e,n),Xj(e,n),o.loadQueue().then(r,r)},eq=(e,n)=>Ms.forElement(e,{contentCssCors:Uw(n),referrerPolicy:Nv(n)}),DY=e=>{const n=e.id;za.setCode(Qm(e));const o=()=>{Ku.unbind(window,"ready",o),e.render()};if(!Bm.Event.domLoaded){Ku.bind(window,"ready",o);return}if(!e.getElement())return;const r=pe.fromDom(e.getElement()),i=gu(r);e.on("remove",()=>{_o(r.dom.attributes,m=>Cr(r,m.name)),Zc(r,i)}),e.ui.styleSheetLoader=eq(r,e),$1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Ku.getParent(n,"form");u&&(e.formElement=u,rA(e)&&!ar(e.getElement())&&(Ku.insertAfter(Ku.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=m=>{e.dispatch(m.type,m)},Ku.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Lv(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=fI(e),e.notificationManager=dI(e),th(e)&&e.on("GetContent",m=>{m.save&&(m.content=Ku.encode(m.content))}),aA(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Lx(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Qj(e,e.suffix)},tq=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),NE(e,n))},PR=e=>e._editableRoot,nq=(e,n)=>({sections:ct(e),options:ct(n)}),I$=St().deviceType,BR=I$.isPhone(),oq=I$.isTablet(),Ey=e=>{if(Qt(e))return[];{const n=jt(e)?e:e.split(/[ ,]/),o=dt(n,kr);return Zt(o,xo)}},sq=(e,n)=>{const o=Ja(n,(r,i)=>et(e,i));return nq(o.t,o.f)},IR=(e,n,o={})=>{const r=e.sections(),i=zo(r,n).getOr({});return yt.extend({},o,i)},LR=(e,n)=>Sn(e.sections(),n),rq=(e,n)=>LR(e,n)?e.sections()[n]:{},aq=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:zo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),iq=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?yt.extend({},e.external_plugins,r):r},L$=(e,n)=>[...Ey(e),...Ey(n)],FR=(e,n,o,r)=>e&&LR(n,"mobile")?r:o,F$=(e,n,o,r)=>{const i=Ey(o.forced_plugins),u=Ey(r.plugins),m=rq(n,"mobile"),y=m.plugins?Ey(m.plugins):u,S=FR(e,n,u,y),O=L$(i,S);return yt.extend(r,{forced_plugins:i,plugins:O})},$R=(e,n)=>e&&LR(n,"mobile"),cq=(e,n,o,r,i)=>{var u;const m=e?{mobile:aq((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},y=sq(["mobile"],cu(m,i)),S=yt.extend(o,r,y.options(),$R(e,y)?IR(y,"mobile"):{},{external_plugins:iq(r,y.options())});return F$(e,y,r,S)},RY=(e,n)=>{const o=fy(n);return cq(BR||oq,BR,o,e,o)},MY=(e,n)=>QH(e,n),lq=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{xe("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},$$=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return kt(i,u=>$e(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},uq=e=>{lq(e),$$(e)},dq=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(pn.os.isMacOS()||pn.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},fq=(e,n,o,r)=>{const i=pe.fromDom(e.getRoot());return VC(i,Xe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),L0(i,Xe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},NY=e=>{if(typeof e!="string"){const n=yt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},PY=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?fq(r,o.getRng(),n,e.schema):n},CS=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=NY(n);B_(e,{...r,content:PY(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=XH(e,i.content,r);DD(e,u,i),e.addVisual()})}},H$=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{CS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{CS(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{CS(e,r)},mceInsertContent:(n,o,r)=>{CS(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Wx(e))}})},mq={"font-size":"size","font-family":"face"},hq=si("font"),gq=(e,n,o)=>{const r=u=>Ra(u,e).orThunk(()=>hq(u)?zo(mq,e).bind(m=>wr(u,m)):W.none()),i=u=>ro(pe.fromDom(n),u);return o2(pe.fromDom(o),u=>r(u),i)},BY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),IY=(e,n)=>W.from(Ks.DOM.getStyle(n,e,!0)),pq=e=>(n,o)=>W.from(o).map(pe.fromDom).filter(Fa).bind(r=>gq(e,n,r.dom).or(IY(e,r.dom))).getOr(""),bq=pq("font-size"),LY=M(BY,pq("font-family")),vq=e=>_i(e.getBody()).bind(n=>{const o=n.container();return W.from(pt(o)?o.parentNode:o)}),Fb=e=>W.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?W.none():W.from(e.selection.getStart(!0))}),HR=(e,n)=>Fb(e).orThunk(nt(vq,e)).map(pe.fromDom).filter(Fa).bind(n),_y=(e,n)=>HR(e,cn(W.some,n)),VR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Yw(e),i=hA(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},V$=e=>{const n=e.split(/\s*,\s*/);return dt(n,o=>o.indexOf(" ")!==-1&&!(es(o,'"')||es(o,"'"))?`'${o}'`:o).join(",")},z$=(e,n)=>{const o=VR(e,n);e.formatter.toggle("fontname",{value:V$(o)}),e.nodeChanged()},yq=e=>_y(e,n=>LY(e.getBody(),n.dom)).getOr(""),wq=(e,n)=>{e.formatter.toggle("fontsize",{value:VR(e,n)}),e.nodeChanged()},Cq=e=>_y(e,n=>bq(e.getBody(),n.dom)).getOr(""),Sq=e=>_y(e,n=>{const o=pe.fromDom(e.getBody()),r=o2(n,u=>Ra(u,"line-height"),nt(ro,o)),i=()=>{const u=parseFloat(Wr(n,"line-height")),m=parseFloat(Wr(n,"font-size"));return String(u/m)};return r.getOrThunk(i)}).getOr(""),xq=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Eq=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{z$(e,i)},FontSize:(o,r,i)=>{wq(e,i)},LineHeight:(o,r,i)=>{xq(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(ce(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},l1=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>yq(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Cq(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>Sq(e))},_q=e=>{Eq(e),l1(e)},U$=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Tq=e=>{e.editorCommands.addCommands({Indent:()=>{e1(e)},Outdent:()=>{K4(e)}}),e.editorCommands.addCommands({Outdent:()=>Qp(e)},"state")},QT=e=>{const n=(o,r,i)=>{const u=ce(i)?{href:i}:i,m=e.dom.getParent(e.selection.getNode(),"a");qe(u)&&ce(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!m||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,m))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},kq=(e,n,o,r)=>{const i=e.dom,u=y=>i.isBlock(y)&&y.parentElement===o,m=u(n)?n:i.getParent(r,u,o);return W.from(m).map(pe.fromDom)},W$=(e,n)=>{const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,m=rS(o,u);if(!m||!m.isContentEditable)return;const y=n?ii:qi,S=Si(e);kq(e,i,m,u).each(O=>{const L=T5(e,u,O.dom,m,!1,S);y(O,pe.fromDom(L)),e.selection.setCursorLocation(L,0),e.dispatch("NewBlock",{newBlock:L}),Pb(e,"insertParagraph")})},Aq=e=>W$(e,!0),Z$=e=>W$(e,!1),Oq=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Aq(e)},InsertNewBlockAfter:()=>{Z$(e)}})},Dq=e=>{e.editorCommands.addCommands({insertParagraph:()=>{gy(B5,e)},mceInsertNewLine:(n,o,r)=>{W5(e,r)},InsertLineBreak:(n,o,r)=>{gy(L5,e)}})},Rq=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>Wt(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),rt);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Mq=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{b7(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},zR=e=>{uq(e),dq(e),U$(e),Rq(e),H$(e),QT(e),Tq(e),Oq(e),Dq(e),_q(e),Mq(e)},Nq=["toggleview"],j$=e=>et(Nq,e.toLowerCase());class Na{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,m=n.toLowerCase(),y=i==null?void 0:i.skip_focus;if(u.removed||(m!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(m)&&!y?u.focus():zM(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const O=this.commands.exec[m];return ve(O)?(O(m,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!j$(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ve(r)?r(o):!1}queryCommandValue(n){if(!j$(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ve(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;At(n,(i,u)=>{xe(u.toLowerCase().split(","),m=>{r[o][m]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,m,y)=>o.call(r??this.editor,m,y)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const $b="data-mce-contenteditable",Pq=(e,n,o)=>{Hl(e,n)&&!o?vu(e,n):o&&gl(e,n)},SS=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},xS=(e,n)=>{e.dom.contentEditable=n?"true":"false"},UR=e=>{xe(ci(e,'*[contenteditable="true"]'),n=>{js(n,$b,"true"),xS(n,!1)})},Bq=e=>{xe(ci(e,`*[${$b}="true"]`),n=>{Cr(n,$b),xS(n,!0)})},Iq=e=>{W.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},Lq=e=>{e.selection.setRng(e.selection.getRng())},Fq=(e,n)=>{const o=pe.fromDom(e.getBody());Pq(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Iq(e),e.readonly=!0,xS(o,!1),UR(o)):(e.readonly=!1,e.hasEditableRoot()&&xS(o,!0),Bq(o),SS(e,"StyleWithCSS",!1),SS(e,"enableInlineTableEditing",!1),SS(e,"enableObjectResizing",!1),tN(e)&&e.focus(),Lq(e),e.nodeChanged())},Hb=e=>e.readonly,q$=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Hb(e)&&xe(n,o=>{o.attr($b,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter($b,n=>{Hb(e)&&xe(n,o=>{o.attr("contenteditable",o.attr($b))})}),e.serializer.addTempAttr($b)},$q=e=>{e.serializer?q$(e):e.on("PreInit",()=>{q$(e)})},Hq=e=>e.type==="click",Ty=["copy"],dm=e=>et(Ty,e.type),Vq=(e,n)=>Wl(n,"a",r=>ro(r,pe.fromDom(e.getBody()))).bind(r=>wr(r,"href")),zq=(e,n)=>{if(Hq(n)&&!bt.metaKeyPressed(n)){const o=pe.fromDom(n.target);Vq(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Ps(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else dm(n)&&e.dispatch(n.type,n)},Uq=e=>{e.on("ShowCaret",n=>{Hb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Hb(e)&&n.preventDefault()})},Wq=yt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class WR{static isNative(n){return!!Wq[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||tt}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=ew(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let m=0,y=u.length;m<y;m++){const S=u[m];if(!S.removed){if(S.once&&this.off(r,S.func),i.isImmediatePropagationStopped())return i;if(S.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=tt),o){const u={func:o,removed:!1};i&&yt.extend(u,i);const m=n.toLowerCase().split(" ");let y=m.length;for(;y--;){const S=m[y];let O=this.bindings[S];O||(O=[],this.toggleEvent(S,!0)),r?O=[u,...O]:O=[...O,u],this.bindings[S]=O}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let m=this.bindings[u];if(!u)return At(this.bindings,(y,S)=>{this.toggleEvent(S,!1),delete this.bindings[S]}),this;if(m){if(!o)m.length=0;else{const y=To(m,S=>S.func===o);m=y.fail,this.bindings[u]=m,xe(y.pass,S=>{S.removed=!0})}m.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else At(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const ES=e=>(e._eventDispatcher||(e._eventDispatcher=new WR({scope:e,toggleEvent:(n,o)=>{WR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),ZR={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return ew(e.toLowerCase(),n??{},r);const i=ES(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return ES(this).on(e,n,o)},off(e,n){return ES(this).off(e,n)},once(e,n){return ES(this).once(e,n)},hasEventListeners(e){return ES(this).has(e)}},ek=Ks.DOM;let Vb;const jR=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=vd(e);return o?(e.eventRoot||(e.eventRoot=ek.select(o)[0]),e.eventRoot):e.getBody()},Zq=e=>!e.hidden&&!Hb(e),G$=(e,n,o)=>{Zq(e)?e.dispatch(n,o):Hb(e)&&zq(e,o)},K$=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=jR(e,n);if(vd(e)){if(Vb||(Vb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Vb&&(At(Vb,(i,u)=>{e.dom.unbind(jR(e,u))}),Vb=null)})),Vb[n])return;const r=i=>{const u=i.target,m=e.editorManager.get();let y=m.length;for(;y--;){const S=m[y].getBody();(S===u||ek.isChildOf(u,S))&&G$(m[y],n,i)}};Vb[n]=r,ek.bind(o,n,r)}else{const r=i=>{G$(e,n,i)};ek.bind(o,n,r),e.delegates[n]=r}},Y$={...ZR,bindPendingEventDelegates(){const e=this;yt.each(e._pendingNativeEvents,n=>{K$(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?K$(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(jR(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(At(e.delegates,(r,i)=>{e.dom.unbind(jR(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},jq=e=>ce(e)?{value:e.split(/[ ,]/),valid:!0}:Me(e,ce)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},qq=e=>{const n=(()=>{switch(e){case"array":return jt;case"boolean":return Kt;case"function":return ve;case"number":return so;case"object":return qe;case"string":return ce;case"string[]":return jq;case"object[]":return o=>Me(o,qe);case"regexp":return o=>Et(o,RegExp);default:return wt}})();return o=>qR(o,n,`The value must be a ${e}.`)},FY=e=>ce(e.processor),X$=(e,n)=>{const o=sa(n.message)?"":`. ${n.message}`;return e+o},J$=e=>e.valid,qR=(e,n,o="")=>{const r=n(e);return Kt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Gq=(e,n,o)=>{if(!Pn(n)){const r=qR(n,o);if(J$(r))return r.value;console.error(X$(`Invalid default value passed for the "${e}" option`,r))}},Kq=(e,n,o=n)=>{const r={},i={},u=(Q,re,ee)=>{const le=qR(re,ee);return J$(le)?(i[Q]=le.value,!0):(console.warn(X$(`Invalid value passed for the ${Q} option`,le)),!1)},m=(Q,re)=>{const ee=FY(re)?qq(re.processor):re.processor,le=Gq(Q,re.default,ee);r[Q]={...re,default:le,processor:ee},zo(i,Q).orThunk(()=>zo(n,Q)).each(De=>u(Q,De,ee))},y=Q=>Sn(r,Q);return{register:m,isRegistered:y,get:Q=>zo(i,Q).orThunk(()=>zo(r,Q).map(re=>re.default)).getOrUndefined(),set:(Q,re)=>{if(y(Q)){const ee=r[Q];return ee.immutable?(console.error(`"${Q}" is an immutable option and cannot be updated`),!1):u(Q,re,ee.processor)}else return console.warn(`"${Q}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:Q=>{const re=y(Q);return re&&delete i[Q],re},isSet:Q=>Sn(i,Q),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(Q,re)=>Kt(re)||so(re)||ce(re)||ne(re)||jt(re)||On(re)?re:Object.prototype.toString.call(re))))}catch(Q){console.error(Q)}}}},Yq=["design","readonly"],Q$=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(m){console.error(`problem while activating editor mode ${r}:`,m);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&Fq(e,u.editorReadOnly),n.set(r),IA(e,r)},Xq=(e,n,o,r)=>{if(r!==o.get()){if(!Sn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Q$(e,o,n,r):e.on("init",()=>Q$(e,o,n,r))}},Jq=(e,n,o)=>{if(et(Yq,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Qq=e=>{const n=Be("design"),o=Be({design:{activate:Pe,deactivate:Pe,editorReadOnly:!1},readonly:{activate:Pe,deactivate:Pe,editorReadOnly:!0}});return $q(e),Uq(e),{isReadOnly:()=>Hb(e),set:r=>Xq(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(Jq(o.get(),r,i))}}},GR=yt.each,KR=yt.explode,eG={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},e6=yt.makeMap("alt,ctrl,shift,meta,access"),tG=e=>e in e6,nG=e=>{const n={},o=pn.os.isMacOS()||pn.os.isiOS();GR(KR(e.toLowerCase(),"+"),u=>{tG(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=eG[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in e6)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class YR{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(GR(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,m=u.normalizeCommandFunc(r);return GR(KR(yt.trim(n)),y=>{const S=u.createShortcut(y,o,m,i);u.shortcuts[S.id]=S}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:yt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=yt.map(KR(n,">"),nG);return u[u.length-1]=yt.extend(u[u.length-1],{func:r,scope:i||this.editor}),yt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const oG=()=>{const e={},n={},o={},r={},i={},u={},m={},y={},S=(L,F)=>(V,Q)=>{L[V.toLowerCase()]={...Q,type:F}},O=(L,F)=>r[L.toLowerCase()]=F;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(n,"menuitem"),addNestedMenuItem:S(n,"nestedmenuitem"),addToggleMenuItem:S(n,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(i,"contextmenu"),addContextToolbar:S(u,"contexttoolbar"),addContextForm:S(u,"contextform"),addSidebar:S(m,"sidebar"),addView:S(y,"views"),addIcon:O,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:m,views:y})}},sG=()=>{const e=oG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},zb=Ks.DOM,t6=yt.extend,rG=yt.each;class tk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,t6(this,Y$);const i=this;this.id=n,this.hidden=!1;const u=RY(r.defaultOptions,o);this.options=Kq(i,u,o),Tx(i);const m=this.options.get;m("deprecation_warnings")&&S9(o,u);const y=m("suffix");y&&(r.suffix=y),this.suffix=r.suffix;const S=m("base_url");S&&r._setBaseUrl(S),this.baseUri=r.baseURI;const O=Nv(i);O&&(gd.ScriptLoader._setReferrerPolicy(O),Ks.DOM.styleSheetLoader._setReferrerPolicy(O));const L=Uw(i);$e(L)&&Ks.DOM.styleSheetLoader._setContentCssCors(L),rc.languageLoad=m("language_load"),rc.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new hc(ui(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=$1(i),this.hasVisual=dc(i),this.shortcuts=new YR(this),this.editorCommands=new Na(this),zR(this);const F=m("cache_suffix");F&&(pn.cacheSuffix=F.replace(/^[\?\&]+/,"")),this.ui={registry:sG(),styleSheetLoader:void 0,show:Pe,hide:Pe,setEnabled:Pe,isEnabled:wt},this.mode=Qq(i),r.dispatch("SetupEditor",{editor:this});const V=Hv(i);ve(V)&&V.call(i,i)}render(){DY(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Ag(this)}translate(n){return za.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||($e(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:wt,default:o})),!i.isSet(n)&&!Pn(o)?o:i.get(n)}hasPlugin(n,o){return et($v(this),n)?o?ey.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(zb.show(n.getContainer()),zb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(zb.hide(n.getContainer()),zb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=ar(r)?r.value:r.innerHTML,m=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),m}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const m={...i,content:u};if(m.no_events||o.dispatch("SaveContent",m),m.format==="raw"&&o.dispatch("RawSaveContent",m),u=m.content,ar(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const y=zb.getParent(o.id,"form");y&&rG(y.elements,S=>S.name===o.id?(S.value=u,!1):!0)}return m.element=i.element=r=null,m.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return J0(this,n,o)}getContent(n){return rI(this,n)}insertContent(n,o){o&&(n=t6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?J0(this,this.startContent,{format:"raw"}):J0(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||zb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=zb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,m=Vv(i);if(ve(m))return m.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||qe(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const y=new hc(n);return y.protocol!=="http"&&y.protocol!=="https"&&y.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){MY(this,n)}setEditableRoot(n){tq(this,n)}hasEditableRoot(){return PR(this)}remove(){_9(this)}destroy(n){T9(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ky=Ks.DOM,nk=yt.each;let XR=!1,ok,Nl=[];const sk=e=>{const n=e.type;nk(u1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},n6=e=>{if(e!==XR){const n=Ks.DOM;e?(n.bind(window,"resize",sk),n.bind(window,"scroll",sk)):(n.unbind(window,"resize",sk),n.unbind(window,"scroll",sk)),XR=e}},o6=e=>{const n=Nl;return Nl=Zt(Nl,o=>e!==o),u1.activeEditor===e&&(u1.activeEditor=Nl.length>0?Nl[0]:null),u1.focusedEditor===e&&(u1.focusedEditor=null),n.length!==Nl.length},aG=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(o6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},iG=document.compatMode!=="CSS1Compat",u1={...ZR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:za,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=hc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let m=0;m<u.length;m++){const y=u[m].src||"";if(y==="")continue;const S=y.substring(y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(y)){S.indexOf(".min")!==-1&&(o=".min"),n=y.substring(0,y.lastIndexOf("/"));break}}if(!n&&document.currentScript){const m=document.currentScript.src;m.indexOf(".min")!==-1&&(o=".min"),n=m.substring(0,m.lastIndexOf("/"))}}e.baseURL=new hc(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new hc(e.baseURL),e.suffix=o,KM(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&At(r,(i,u)=>{rc.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=yt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(L,F)=>L.inline&&F.tagName.toLowerCase()in r,u=L=>{let F=L.id;return F||(F=zo(L,"name").filter(V=>!ky.get(V)).getOrThunk(ky.uniqueId),L.setAttribute("id",F)),F},m=L=>{const F=e[L];if(F)return F.apply(n,[])},y=L=>pn.browser.isIE()||pn.browser.isEdge()?(r4("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):iG?(r4("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ce(L.selector)?ky.select(L.selector):$e(L.target)?[L.target]:[];let S=L=>{o=L};const O=()=>{let L=0;const F=[];let V;const Q=(re,ee,le)=>{const we=new tk(re,ee,n);F.push(we),we.on("init",()=>{++L===V.length&&S(F)}),we.targetElm=we.targetElm||le,we.render()};ky.unbind(window,"ready",O),m("onpageload"),V=Zi(y(e)),yt.each(V,re=>{aG(n.get(re.id))}),V=yt.grep(V,re=>!n.get(re.id)),V.length===0?S([]):nk(V,re=>{i(e,re)?r4("Could not initialize inline editor on invalid inline target element",re):Q(u(re),e,re)})};return ky.bind(window,"ready",O),new Promise(L=>{o?L(o):S=F=>{L(F)}})},get(e){return arguments.length===0?Nl.slice(0):ce(e)?Po(Nl,n=>n.id===e).getOr(null):so(e)&&Nl[e]?Nl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Nl.push(e),n6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),ok||(ok=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",ok))),e},createEditor(e,n){return this.add(new tk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Nl.length-1;r>=0;r--)n.remove(Nl[r]);return}if(ce(e)){nk(ky.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ne(n.get(o.id))?null:(o6(o)&&n.dispatch("RemoveEditor",{editor:o}),Nl.length===0&&window.removeEventListener("beforeunload",ok),o.remove(),n6(Nl.length>0),o)},execCommand(e,n,o){var r;const i=this,u=qe(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const m=o.options;new tk(u,m,i).render()}return!0}case"mceRemoveEditor":{const m=i.get(u);return m&&m.remove(),!0}case"mceToggleEditor":{const m=i.get(u);return m?(m.isHidden()?m.show():m.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{nk(Nl,e=>{e.save()})},addI18n:(e,n)=>{za.add(e,n)},translate:e=>za.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new hc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new hc(this.baseURL)}};u1.setup();const $Y=(()=>{const e=Ci(),n=u=>({items:u,types:Go(u),getType:m=>zo(u,m).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),JR=Math.min,Ay=Math.max,_S=Math.round,s6=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,m=e.h,y=n.w,S=n.h,O=(o||"").split("");return O[0]==="b"&&(i+=S),O[1]==="r"&&(r+=y),O[0]==="c"&&(i+=_S(S/2)),O[1]==="c"&&(r+=_S(y/2)),O[3]==="b"&&(i-=m),O[4]==="r"&&(r-=u),O[3]==="c"&&(i-=_S(m/2)),O[4]==="c"&&(r-=_S(u/2)),Oy(r,i,u,m)},lG=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=s6(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},uG=(e,n,o)=>Oy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),dG=(e,n)=>{const o=Ay(e.x,n.x),r=Ay(e.y,n.y),i=JR(e.x+e.w,n.x+n.w),u=JR(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:Oy(o,r,i-o,u-r)},fG=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,m=e.y+e.h;const y=n.x+n.w,S=n.y+n.h,O=Ay(0,n.x-r),L=Ay(0,n.y-i),F=Ay(0,u-y),V=Ay(0,m-S);return r+=O,i+=L,o&&(u+=O,m+=L,r-=F,i-=V),u-=F,m-=V,Oy(r,i,u-r,m-i)},Oy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),QR={inflate:uG,relativePosition:s6,findBestRelativePosition:lG,intersect:dG,clamp:fG,create:Oy,fromClientRect:e=>Oy(e.left,e.top,e.width,e.height)},mG=(e,n,o=1e3)=>{let r=!1,i=null;const u=O=>(...L)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),O.apply(null,L))},m=u(e),y=u(n);return{start:(...O)=>{!r&&i===null&&(i=setTimeout(()=>y.apply(null,O),o))},resolve:m,reject:y}},gG=(()=>{const e={},n={},o={};return{load:(S,O)=>{const L=`Script at URL "${O}" failed to load`,F=`Script at URL "${O}" did not call \`tinymce.Resource.add('${S}', data)\` within 1 second`;if(e[S]!==void 0)return e[S];{const V=new Promise((Q,re)=>{const ee=mG(Q,re);n[S]=ee.resolve,gd.ScriptLoader.loadScript(O).then(()=>ee.start(F),()=>ee.reject(L))});return e[S]=V,V}},add:(S,O)=>{n[S]!==void 0&&(n[S](O),delete n[S]),e[S]=Promise.resolve(O),o[S]=O},has:S=>S in o,get:S=>o[S],unload:S=>{delete e[S],delete o[S]}}})(),pG=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let TS;try{const e="__storage_test__";TS=window.localStorage,TS.setItem(e,e),TS.removeItem(e)}catch{TS=pG()}var bG=TS;const vG={geom:{Rect:QR},util:{Delay:$u,Tools:yt,VK:bt,URI:hc,EventDispatcher:WR,Observable:ZR,I18n:za,LocalStorage:bG,ImageUploader:mh},dom:{EventUtils:Bm,TreeWalker:Ha,TextSeeker:rg,DOMUtils:Ks,ScriptLoader:gd,RangeUtils:Tt,Serializer:zi,StyleSheetLoader:Yl,ControlSelection:rb,BookmarkManager:Iu,Selection:c9,Event:Bm.Event},html:{Styles:Jy,Entities:fd,Node:cl,Schema:Kd,DomParser:Y0,Writer:lO,Serializer:Og},Env:pn,AddOnManager:rc,Annotator:C0,Formatter:im,UndoManager:sy,EditorCommands:Na,WindowManager:fI,NotificationManager:dI,EditorObservable:Y$,Shortcuts:YR,Editor:tk,FocusManager:UM,EditorManager:u1,DOM:Ks.DOM,ScriptLoader:gd.ScriptLoader,PluginManager:ey,ThemeManager:jp,ModelManager:Q0,IconManager:q_,Resource:gG,FakeClipboard:$Y,trim:yt.trim,isArray:yt.isArray,is:yt.is,toArray:yt.toArray,makeMap:yt.makeMap,each:yt.each,map:yt.map,grep:yt.grep,inArray:yt.inArray,extend:yt.extend,walk:yt.walk,resolve:yt.resolve,explode:yt.explode,_addCacheSuffix:yt._addCacheSuffix},a6=yt.extend(u1,vG),yG=e=>{try{p.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(a6),yG(a6)})()})(qne);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const p=Object.getPrototypeOf,g=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},w=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&g(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},E=t=>s=>w(s)===t,N=t=>s=>typeof s===t,z=t=>s=>t===s,K=(t,s)=>ue(t)&&g(t,s,(a,c)=>p(a)===c),j=E("string"),ue=E("object"),Se=t=>K(t,Object),be=E("array"),Ge=z(null),Ht=N("boolean"),Ut=z(void 0),Nt=t=>t==null,vt=t=>!Nt(t),Ie=N("function"),on=N("number"),Et=(t,s)=>{if(be(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},ce=()=>{},qe=t=>()=>t(),On=(t,s)=>(...a)=>t(s.apply(null,a)),jt=(t,s)=>a=>t(s(a)),ne=t=>()=>t,Kt=t=>t,Pn=(t,s)=>t===s;function Qt(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const $e=t=>s=>!t(s),ve=t=>()=>{throw new Error(t)},so=t=>t(),Me=ne(!1),Pe=ne(!0);class M{constructor(s,a){this.tag=s,this.value=a}static some(s){return new M(!0,s)}static none(){return M.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?M.some(s(this.value)):M.none()}bind(s){return this.tag?s(this.value):M.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:M.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return vt(s)?M.some(s):M.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}M.singletonNone=new M(!1);const cn=Array.prototype.slice,ct=Array.prototype.indexOf,Hn=Array.prototype.push,rn=(t,s)=>ct.call(t,s),nt=(t,s)=>{const a=rn(t,s);return a===-1?M.none():M.some(a)},eo=(t,s)=>rn(t,s)>-1,ms=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},to=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},os=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=cn.call(t,c,c+s);a.push(d)}return a},tt=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const h=t[d];c[d]=s(h,d)}return c},wt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},W=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},ta=(t,s)=>{const a=[],c=[];for(let d=0,h=t.length;d<h;d++){const b=t[d];(s(b,d)?a:c).push(b)}return{pass:a,fail:c}},uo=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];s(h,c)&&a.push(h)}return a},qo=(t,s,a)=>(W(t,(c,d)=>{a=s(a,c,d)}),a),Ho=(t,s,a)=>(wt(t,(c,d)=>{a=s(a,c,d)}),a),Wi=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const h=t[c];if(s(h,c))return M.some(h);if(a(h,c))break}return M.none()},et=(t,s)=>Wi(t,s,Me),kt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return M.some(a)}return M.none()},dt=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!be(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Hn.apply(s,t[a])}return s},xe=(t,s)=>dt(tt(t,s)),_o=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},To=t=>{const s=cn.call(t,0);return s.reverse(),s},Zt=(t,s)=>uo(t,a=>!eo(s,a)),ss=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const h=t[c];a[String(h)]=s(h,c)}return a},Mo=t=>[t],$r=(t,s)=>{const a=cn.call(t,0);return a.sort(s),a},Po=(t,s)=>s>=0&&s<t.length?M.some(t[s]):M.none(),Is=t=>Po(t,0),Xa=t=>Po(t,t.length-1),ws=Ie(Array.from)?Array.from:t=>cn.call(t),bs=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return M.none()},vs=Object.keys,qr=Object.hasOwnProperty,Cs=(t,s)=>{const a=vs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];s(b,h)}},Vo=(t,s)=>vc(t,(a,c)=>({k:c,v:s(a,c)})),vc=(t,s)=>{const a={};return Cs(t,(c,d)=>{const h=s(c,d);a[h.k]=h.v}),a},fo=t=>(s,a)=>{t[a]=s},cs=(t,s,a,c)=>{Cs(t,(d,h)=>{(s(d,h)?a:c)(d,h)})},_r=(t,s)=>{const a={},c={};return cs(t,s,fo(a),fo(c)),{t:a,f:c}},Oi=(t,s)=>{const a={};return cs(t,s,fo(a),ce),a},Zi=(t,s)=>{const a=[];return Cs(t,(c,d)=>{a.push(s(c,d))}),a},Go=(t,s)=>{const a=vs(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],b=t[h];if(s(b,h,t))return M.some(b)}return M.none()},Vc=t=>Zi(t,Kt),At=(t,s)=>po(t,s)?M.from(t[s]):M.none(),po=(t,s)=>qr.call(t,s),Hr=(t,s)=>po(t,s)&&t[s]!==void 0&&t[s]!==null,Vr=(t,s,a=Pn)=>t.exists(c=>a(c,s)),Ba=(t,s,a=Pn)=>hi(t,s,a).getOr(t.isNone()&&s.isNone()),Ja=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},Wo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return M.none()}return M.some(s)},hi=(t,s,a)=>t.isSome()&&s.isSome()?M.some(a(t.getOrDie(),s.getOrDie())):M.none(),Di=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?M.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):M.none(),zo=(t,s)=>t!=null?M.some(s(t)):M.none(),Sn=(t,s)=>t?M.some(s):M.none(),Ys=(t,s)=>t+s,Qa=(t,s)=>t.substring(s),ul=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,dl=(t,s)=>Zs(t,s)?Qa(t,s.length):t,hs=(t,s)=>Ta(t,s)?t:Ys(t,s),pr=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?Ut(c)?!0:d+s.length<=c:!1},Zs=(t,s)=>ul(t,s,0),Ta=(t,s)=>ul(t,s,t.length-s.length),Tr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),ge=t=>t.length>0,de=t=>!ge(t),Ve=t=>t.style!==void 0&&Ie(t.style.getPropertyValue),Ye=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Wn(c.childNodes[0])},gn=(t,s)=>{const c=(s||document).createElement(t);return Wn(c)},Bn=(t,s)=>{const c=(s||document).createTextNode(t);return Wn(c)},Wn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},_e={fromHtml:Ye,fromTag:gn,fromText:Bn,fromDom:Wn,fromPoint:(t,s,a)=>M.from(t.dom.elementFromPoint(s,a)).map(Wn)},Zn=typeof window<"u"?window:Function("return this;")(),Xs=(t,s)=>{let a=s??Zn;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},ur=(t,s)=>{const a=t.split(".");return Xs(a,s)},ka=(t,s)=>ur(t,s),Zo=(t,s)=>{const a=ka(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},zc=Object.getPrototypeOf,Gr=t=>Zo("HTMLElement",t),Aa=t=>{const s=ur("ownerDocument.defaultView",t);return ue(t)&&(Gr(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(zc(t).constructor.name))},Ps=9,Ko=11,es=1,na=3,oa=t=>t.dom.nodeName.toLowerCase(),kr=t=>t.dom.nodeType,Ji=t=>s=>kr(s)===t,Ri=t=>xo(t)&&Aa(t.dom),xo=Ji(es),sa=Ji(na),zr=Ji(Ps),Qi=Ji(Ko),ei=t=>s=>xo(s)&&oa(s)===t,Ar=(t,s)=>{const a=t.dom;if(a.nodeType!==es)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Ls=t=>t.nodeType!==es&&t.nodeType!==Ps&&t.nodeType!==Ko||t.childElementCount===0,Sf=(t,s)=>{const a=s===void 0?document:s.dom;return Ls(a)?[]:tt(a.querySelectorAll(t),_e.fromDom)},ji=(t,s)=>{const a=s===void 0?document:s.dom;return Ls(a)?M.none():M.from(a.querySelector(t)).map(_e.fromDom)},Uo=(t,s)=>t.dom===s.dom,Oa=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},ma=t=>_e.fromDom(t.dom.ownerDocument),br=t=>zr(t)?t:ma(t),$l=t=>_e.fromDom(br(t).dom.documentElement),Da=t=>_e.fromDom(br(t).dom.defaultView),Ia=t=>M.from(t.dom.parentNode).map(_e.fromDom),ec=t=>Ia(t),Mi=t=>M.from(t.dom.parentElement).map(_e.fromDom),uu=(t,s)=>{const a=Ie(s)?s:Me;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const h=c.parentNode,b=_e.fromDom(h);if(d.push(b),a(b)===!0)break;c=h}return d},fl=t=>M.from(t.dom.offsetParent).map(_e.fromDom),Uc=t=>M.from(t.dom.nextSibling).map(_e.fromDom),ti=t=>tt(t.dom.childNodes,_e.fromDom),Or=(t,s)=>{const a=t.dom.childNodes;return M.from(a[s]).map(_e.fromDom)},du=t=>Or(t,0),fu=(t,s)=>({element:t,offset:s}),mu=(t,s)=>{const a=ti(t);return a.length>0&&s<a.length?fu(a[s],0):fu(t,s)},hu=t=>Qi(t)&&vt(t.dom.host),vr=t=>_e.fromDom(t.dom.getRootNode()),gi=t=>hu(t)?t:_e.fromDom(br(t).dom.body),X=t=>me(t).isSome(),me=t=>{const s=vr(t);return hu(s)?M.some(s):M.none()},Re=t=>_e.fromDom(t.dom.host),at=t=>{if(vt(t.target)){const s=_e.fromDom(t.target);if(xo(s)&&St(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Is(a)}}return M.from(t.target)},St=t=>vt(t.dom.shadowRoot),en=t=>{const s=sa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return me(_e.fromDom(s)).fold(()=>a.body.contains(s),jt(en,Re))},io=()=>ls(_e.fromDom(document)),ls=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return _e.fromDom(s)},vo=(t,s,a)=>{if(j(a)||Ht(a)||on(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},qt=(t,s,a)=>{vo(t.dom,s,a)},sr=(t,s)=>{const a=t.dom;Cs(s,(c,d)=>{vo(a,d,c)})},pn=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Dr=(t,s)=>M.from(pn(t,s)),wc=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},H=(t,s)=>{t.dom.removeAttribute(s)},oe=t=>Ho(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),ye=(t,s,a)=>{if(!j(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ve(t)&&t.style.setProperty(s,a)},Le=(t,s)=>{Ve(t)&&t.style.removeProperty(s)},lt=(t,s,a)=>{const c=t.dom;ye(c,s,a)},Gn=(t,s)=>{const a=t.dom;Cs(s,(c,d)=>{ye(a,d,c)})},Ss=(t,s)=>{const a=t.dom;Cs(s,(c,d)=>{c.fold(()=>{Le(a,d)},h=>{ye(a,d,h)})})},rs=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!en(t)?yt(a,s):d},yt=(t,s)=>Ve(t)?t.style.getPropertyValue(s):"",Os=(t,s)=>{const a=t.dom,c=yt(a,s);return M.from(c).filter(d=>d.length>0)},ha=t=>{const s={},a=t.dom;if(Ve(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},ni=(t,s,a)=>{const c=_e.fromTag(t);return lt(c,s,a),Os(c,s).isSome()},Xn=(t,s)=>{const a=t.dom;Le(a,s),Vr(Dr(t,"style").map(Tr),"")&&H(t,"style")},oi=t=>t.dom.offsetWidth,lr=(t,s)=>{const a=(x,T)=>{if(!on(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const D=x.dom;Ve(D)&&(D.style[t]=T+"px")},c=x=>{const T=s(x);if(T<=0||T===null){const D=rs(x,t);return parseFloat(D)||0}return T},d=c,h=(x,T)=>Ho(T,(D,P)=>{const $=rs(x,P),G=$===void 0?0:parseInt($,10);return isNaN(G)?D:D+G},0);return{set:a,get:c,getOuter:d,aggregate:h,max:(x,T,D)=>{const P=h(x,D);return T>P?T-P:0}}},ed=lr("height",t=>{const s=t.dom;return en(t)?s.getBoundingClientRect().height:s.offsetHeight}),xs=t=>ed.get(t),ml=t=>ed.getOuter(t),bm=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=ed.max(t,s,a);lt(t,"max-height",c+"px")},m1=(t,s)=>({left:t,top:s,translate:(c,d)=>m1(t+c,s+d)}),Js=m1,vm=t=>{const s=t.getBoundingClientRect();return Js(s.left,s.top)},yr=(t,s)=>t!==void 0?t:s!==void 0?s:0,ga=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return Js(a.offsetLeft,a.offsetTop);const h=yr(c==null?void 0:c.pageYOffset,d.scrollTop),b=yr(c==null?void 0:c.pageXOffset,d.scrollLeft),x=yr(d.clientTop,a.clientTop),T=yr(d.clientLeft,a.clientLeft);return Wc(t).translate(b-T,h-x)},Wc=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?Js(c.offsetLeft,c.offsetTop):en(t)?vm(s):Js(0,0)},Cc=lr("width",t=>t.dom.offsetWidth),Ld=(t,s)=>Cc.set(t,s),La=t=>Cc.get(t),yo=t=>Cc.getOuter(t),hl=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Cc.max(t,s,a);lt(t,"max-width",c+"px")},Sc=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},h1=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,b=t.isiOS()||t.isAndroid(),x=b||c("(pointer:coarse)"),T=d||!h&&b&&c("(min-device-width:768px)"),D=h||b&&!T,P=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,$=!D&&!T&&!P;return{isiPad:ne(d),isiPhone:ne(h),isTablet:ne(T),isPhone:ne(D),isTouch:ne(x),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ne(P),isDesktop:ne($)}},Kr=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},Fa=(t,s)=>{const a=Kr(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return xf(c(1),c(2))},Yr=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Dh():Fa(t,a)},Dh=()=>xf(0,0),xf=(t,s)=>({major:t,minor:s}),si={nu:xf,detect:Yr,unknown:Dh},Rh=(t,s)=>bs(s.brands,a=>{const c=a.brand.toLowerCase();return et(t,d=>{var h;return c===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:si.nu(parseInt(a.version,10),0)}))}),js=(t,s)=>{const a=String(s).toLowerCase();return et(t,c=>c.search(a))},Zc=(t,s)=>js(t,s).map(a=>{const c=si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),ri=(t,s)=>js(t,s).map(a=>{const c=si.detect(a.versionRegexes,s);return{current:a.name,version:c}}),wr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pi=t=>s=>pr(s,t),Cr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>pr(t,"edge/")&&pr(t,"chrome")&&pr(t,"safari")&&pr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wr],search:t=>pr(t,"chrome")&&!pr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>pr(t,"msie")||pr(t,"trident")},{name:"Opera",versionRegexes:[wr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pi("firefox")},{name:"Safari",versionRegexes:[wr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(pr(t,"safari")||pr(t,"mobile/"))&&pr(t,"applewebkit")}],Mh=[{name:"Windows",search:pi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>pr(t,"iphone")||pr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pi("linux"),versionRegexes:[]},{name:"Solaris",search:pi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gu={browsers:ne(Cr),oses:ne(Mh)},pu="Edge",Ef="Chromium",bu="IE",xc="Opera",_f="Firefox",Sr="Safari",Tf=()=>Nh({current:void 0,version:si.unknown()}),Nh=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(pu),isChromium:c(Ef),isIE:c(bu),isOpera:c(xc),isFirefox:c(_f),isSafari:c(Sr)}},gl={unknown:Tf,nu:Nh,edge:ne(pu),chromium:ne(Ef),ie:ne(bu),opera:ne(xc),firefox:ne(_f),safari:ne(Sr)},Ph="Windows",vu="iOS",Bh="Android",Hl="Linux",Ih="macOS",kf="Solaris",ym="FreeBSD",yu="ChromeOS",wm=()=>pe({current:void 0,version:si.unknown()}),pe=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(Ph),isiOS:c(vu),isAndroid:c(Bh),isMacOS:c(Ih),isLinux:c(Hl),isSolaris:c(kf),isFreeBSD:c(ym),isChromeOS:c(yu)}},Vl={unknown:wm,nu:pe,windows:ne(Ph),ios:ne(vu),android:ne(Bh),linux:ne(Hl),macos:ne(Ih),solaris:ne(kf),freebsd:ne(ym),chromeos:ne(yu)},Lh={detect:(t,s,a)=>{const c=gu.browsers(),d=gu.oses(),h=s.bind(T=>Rh(c,T)).orThunk(()=>Zc(c,t)).fold(gl.unknown,gl.nu),b=ri(d,t).fold(Vl.unknown,Vl.nu),x=h1(b,h,t,a);return{browser:h,os:b,deviceType:x}}},g1=t=>window.matchMedia(t).matches;let wu=Sc(()=>Lh.detect(window.navigator.userAgent,M.from(window.navigator.userAgentData),g1));const ro=()=>wu(),Rr=(t,s,a,c,d,h,b)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:h,raw:b}),Ec=t=>{const s=_e.fromDom(at(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=On(c,a);return Rr(s,t.clientX,t.clientY,a,c,d,t)},Cu=(t,s)=>a=>{t(a)&&s(Ec(a))},Af=(t,s,a,c,d)=>{const h=Cu(a,c);return t.dom.addEventListener(s,h,d),{unbind:Qt(Of,t,s,h,d)}},Fd=(t,s,a,c)=>Af(t,s,a,c,!1),$a=(t,s,a,c)=>Af(t,s,a,c,!0),Of=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},zl=(t,s)=>{Ia(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},Df=(t,s)=>{Uc(t).fold(()=>{Ia(t).each(d=>{bi(d,s)})},c=>{zl(c,s)})},Ul=(t,s)=>{du(t).fold(()=>{bi(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},bi=(t,s)=>{t.dom.appendChild(s.dom)},Fh=(t,s,a)=>{Or(t,a).fold(()=>{bi(t,s)},c=>{zl(c,s)})},$d=(t,s)=>{wt(s,a=>{bi(t,a)})},ra=t=>{t.dom.textContent="",wt(ti(t),s=>{Ni(s)})},Ni=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},ai=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return Js(a,c)},td=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Hd=t=>{const s=t===void 0?window:t;return ro().browser.isFirefox()?M.none():M.from(s.visualViewport)},$h=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Vd=t=>{const s=t===void 0?window:t,a=s.document,c=ai(_e.fromDom(a));return Hd(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,b=d.clientHeight;return $h(c.left,c.top,h,b)},d=>$h(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},jc=()=>_e.fromDom(document),Rf=(t,s)=>t.view(s).fold(ne([]),c=>{const d=t.owner(c),h=Rf(t,d);return[c].concat(h)}),Wg=(t,s)=>{const a=s.owner(t),c=Rf(s,a);return M.some(c)};var Cm=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?M.none():M.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(_e.fromDom)},owner:t=>ma(t)});const zd=t=>{const s=jc(),a=ai(s);return Wg(t,Cm).fold(Qt(ga,t),d=>{const h=Wc(t),b=qo(d,(x,T)=>{const D=Wc(T);return{left:x.left+D.left,top:x.top+D.top}},{left:0,top:0});return Js(b.left+h.left+a.left,b.top+h.top+a.top)})},nd=(t,s,a)=>({point:t,width:s,height:a}),Ud=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),qs=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Qs=t=>{const s=ga(t),a=yo(t),c=ml(t);return qs(s.left,s.top,a,c)},tc=t=>{const s=zd(t),a=yo(t),c=ml(t);return qs(s.left,s.top,a,c)},od=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),b=d-a,x=h-c;return qs(a,c,b,x)},Vh=(t,s)=>Ho(s,(a,c)=>od(a,c),t),Ur=()=>Vd(window),mn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Wl=t=>{const s=mn(M.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(M.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:x=>{a(),s.set(M.some(x))}}},Sm=()=>Wl(t=>t.destroy()),pa=()=>Wl(t=>t.unbind()),ts=()=>{const t=Wl(ce);return{...t,on:a=>t.get().each(a)}};var Su=tinymce.util.Tools.resolve("tinymce.ThemeManager");const zh=t=>{const s=h=>h(t),a=ne(t),c=()=>d,d={tag:!0,inner:t,fold:(h,b)=>b(t),isValue:Pe,isError:Me,map:h=>Yn.value(h(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:h=>{h(t)},toOptional:()=>M.some(t)};return d},Wd=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:Me,isError:Pe,map:s,mapError:c=>Yn.error(c(t)),bind:s,exists:Me,forall:Pe,getOr:Kt,or:Kt,getOrThunk:so,orThunk:so,getOrDie:ve(String(t)),each:ce,toOptional:M.none};return a},Yn={value:zh,error:Wd,fromOption:(t,s)=>t.fold(()=>Wd(s),zh)};var Wr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Wr||(Wr={}));const sd=(t,s,a)=>t.stype===Wr.Error?s(t.serror):a(t.svalue),Ra=t=>{const s=[],a=[];return wt(t,c=>{sd(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},vi=(t,s)=>t.stype===Wr.Error?{stype:Wr.Error,serror:s(t.serror)}:t,nc=(t,s)=>t.stype===Wr.Value?{stype:Wr.Value,svalue:s(t.svalue)}:t,aa=(t,s)=>t.stype===Wr.Value?s(t.svalue):t,ii=(t,s)=>t.stype===Wr.Error?s(t.serror):t,qi=t=>({stype:Wr.Value,svalue:t}),xm=t=>({stype:Wr.Error,serror:t}),dr={fromResult:t=>t.fold(xm,qi),toResult:t=>sd(t,Yn.error,Yn.value),svalue:qi,partition:Ra,serror:xm,bind:aa,bindError:ii,map:nc,mapError:vi,fold:sd},xu=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),ad=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),gs=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},_c=(t,s)=>s,jg=(t,s)=>Se(t)&&Se(s)?Ds(t,s):s,Zl=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const h in d)po(d,h)&&(a[h]=t(a[h],d[h]))}return a},Ds=Zl(jg),Eu=Zl(_c),Pi=()=>({tag:"required",process:{}}),co=t=>({tag:"defaultedThunk",process:t}),id=t=>co(ne(t)),Mf=()=>({tag:"option",process:{}}),Em=t=>({tag:"mergeWithThunk",process:t}),k=t=>Em(ne(t)),I=(t,s)=>t.length>0?dr.svalue(Ds(s,Eu.apply(void 0,t))):dr.svalue(s),q=t=>On(dr.serror,dt)(t),mt={consolidateObj:(t,s)=>{const a=dr.partition(t);return a.errors.length>0?q(a.errors):I(a.values,s)},consolidateArr:t=>{const s=dr.partition(t);return s.errors.length>0?q(s.errors):dr.svalue(s.values)}},kn=t=>ue(t)&&vs(t).length>100?" removed due to size":JSON.stringify(t,null,2),Jn=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ne("... (only showing first ten failures)")}]):t;return tt(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Rn=(t,s)=>dr.serror([{path:t,getErrorInfo:s}]),An=(t,s,a)=>Rn(t,()=>'Could not find valid *required* value for "'+s+'" in '+kn(a)),Rs=(t,s)=>Rn(t,()=>'Choice schema did not contain choice key: "'+s+'"'),xr=(t,s,a)=>Rn(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+kn(s)),oc=(t,s)=>Rn(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),jl=(t,s)=>Rn(t,ne(s)),Nf=t=>{const s=(c,d)=>dr.bindError(t(d),h=>jl(c,h)),a=ne("val");return{extract:s,toString:a}},Uh=Nf(dr.svalue),ci=(t,s,a,c)=>At(s,a).fold(()=>An(t,a,s),c),Wh=(t,s,a,c)=>{const d=At(t,s).getOrThunk(()=>a(t));return c(d)},Jb=(t,s,a)=>a(At(t,s)),qg=(t,s,a,c)=>{const d=At(t,s).map(h=>h===!0?a(t):h);return c(d)},Ha=(t,s,a,c,d)=>{const h=x=>d.extract(s.concat([c]),x),b=x=>x.fold(()=>dr.svalue(M.none()),T=>{const D=d.extract(s.concat([c]),T);return dr.map(D,M.some)});switch(t.tag){case"required":return ci(s,a,c,h);case"defaultedThunk":return Wh(a,c,t.process,h);case"option":return Jb(a,c,b);case"defaultedOptionThunk":return qg(a,c,t.process,b);case"mergeWithThunk":return Wh(a,c,ne({}),x=>{const T=Ds(t.process(a),x);return h(T)})}},Gg=(t,s,a)=>{const c={},d=[];for(const h of a)gs(h,(b,x,T,D)=>{const P=Ha(T,t,s,b,D);dr.fold(P,$=>{d.push(...$)},$=>{c[x]=$})},(b,x)=>{c[b]=x(s)});return d.length>0?dr.serror(d):dr.svalue(c)},Xr=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),Qb=t=>vs(Oi(t,vt)),Bi=t=>{const s=Dn(t),a=qo(t,(d,h)=>gs(h,b=>Ds(d,{[b]:!0}),ne(d)),{});return{extract:(d,h)=>{const b=Ht(h)?[]:Qb(h),x=uo(b,T=>!Hr(a,T));return x.length===0?s.extract(d,h):oc(d,x)},toString:s.toString}},Dn=t=>({extract:(c,d)=>Gg(c,d,t),toString:()=>`obj{
`+tt(t,d=>gs(d,(h,b,x,T)=>h+" -> "+T.toString(),(h,b)=>"state("+h+")")).join(`
`)+"}"}),Tc=t=>({extract:(c,d)=>{const h=tt(d,(b,x)=>t.extract(c.concat(["["+x+"]"]),b));return mt.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),_m=(t,s)=>{const a=s!==void 0?s:Kt;return{extract:(h,b)=>{const x=[];for(const T of t){const D=T.extract(h,b);if(D.stype===Wr.Value)return{stype:Wr.Value,svalue:a(D.svalue)};x.push(D)}return mt.consolidateArr(x)},toString:()=>"oneOf("+tt(t,h=>h.toString()).join(", ")+")"}},Zh=(t,s)=>{const a=(h,b)=>Tc(Nf(t)).extract(h,b);return{extract:(h,b)=>{const x=vs(b),T=a(h,x);return dr.bind(T,D=>{const P=tt(D,$=>xu($,$,Pi(),s));return Dn(P).extract(h,b)})},toString:()=>"setOf("+s.toString()+")"}},Kg=(t,s)=>{const a=Sc(s);return{extract:(h,b)=>a().extract(h,b),toString:()=>a().toString()}},p1=On(Tc,Dn),bl=ne(Uh),_u=(t,s)=>Nf(a=>{const c=typeof a;return t(a)?dr.svalue(a):dr.serror(`Expected type: ${s} but got: ${c}`)}),Zd=_u(on,"number"),Wt=_u(j,"string"),qc=_u(Ht,"boolean"),Yg=_u(Ie,"function"),Pf=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Pf(t[s]));default:return!1}},vl=Nf(t=>Pf(t)?dr.svalue(t):dr.serror("Expected value to be acceptable for sending via postMessage")),jh=(t,s,a,c)=>At(a,c).fold(()=>xr(t,a,c),h=>h.extract(t.concat(["branch: "+c]),s)),jd=(t,s)=>({extract:(d,h)=>At(h,t).fold(()=>Rs(d,t),x=>jh(d,h,s,x)),toString:()=>"chooseOn("+t+"). Possible values: "+vs(s)}),Bf=()=>Tc(Uh),qh=t=>Nf(s=>t(s).fold(dr.serror,dr.svalue)),ql=(t,s)=>Zh(a=>dr.fromResult(t(a)),s),ev=(t,s,a)=>{const c=s.extract([t],a);return dr.mapError(c,d=>({input:a,errors:d}))},ar=(t,s,a)=>dr.toResult(ev(t,s,a)),pt=t=>t.fold(s=>{throw new Error(Gl(s))},Kt),yi=(t,s,a)=>pt(ar(t,s,a)),Gl=t=>`Errors: 
`+Jn(t.errors).join(`
`)+`

Input object: `+kn(t.input),ba=(t,s)=>jd(t,Vo(s,Dn)),Tm=(t,s)=>Kg(t,s),ia=xu,Lo=ad,Xg=t=>qh(s=>eo(t,s)?Yn.value(s):Yn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),rt=t=>ia(t,t,Pi(),bl()),Fo=(t,s)=>ia(t,t,Pi(),s),Gh=t=>Fo(t,Zd),Jr=t=>Fo(t,Wt),wi=(t,s)=>ia(t,t,Pi(),Xg(s)),tv=t=>Fo(t,qc),kc=t=>Fo(t,Yg),Vy=(t,s)=>ia(t,t,Mf(),Nf(a=>dr.serror("The field: "+t+" is forbidden. "+s))),cd=(t,s)=>ia(t,t,Pi(),Dn(s)),nv=(t,s)=>ia(t,t,Pi(),p1(s)),Ac=(t,s)=>ia(t,t,Pi(),Tc(s)),Bo=t=>ia(t,t,Mf(),bl()),Tu=(t,s)=>ia(t,t,Mf(),s),If=t=>Tu(t,Zd),ca=t=>Tu(t,Wt),Jg=(t,s)=>Tu(t,Xg(s)),ku=t=>Tu(t,Yg),Au=(t,s)=>Tu(t,Tc(s)),Bs=(t,s)=>Tu(t,Dn(s)),km=(t,s)=>Tu(t,Bi(s)),Be=(t,s)=>ia(t,t,id(s),bl()),Oc=(t,s,a)=>ia(t,t,id(s),a),Am=(t,s)=>Oc(t,s,Zd),Ci=(t,s)=>Oc(t,s,Wt),Dc=(t,s,a)=>Oc(t,s,Xg(a)),Mr=(t,s)=>Oc(t,s,qc),fr=(t,s)=>Oc(t,s,Yg),zy=(t,s)=>Oc(t,s,vl),_=(t,s,a)=>Oc(t,s,Tc(a)),R=(t,s,a)=>Oc(t,s,Dn(a)),te={generate:t=>{if(!be(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return wt(t,(c,d)=>{const h=vs(c);if(h.length!==1)throw new Error("one and only one name per case");const b=h[0],x=c[b];if(a[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!be(x))throw new Error("case arguments must be an array");s.push(b),a[b]=(...T)=>{const D=T.length;if(D!==x.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+x.length+" ("+x+"), got "+D);return{fold:(...$)=>{if($.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+$.length);return $[d].apply(null,T)},match:$=>{const G=vs($);if(s.length!==G.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+G.join(","));if(!_o(s,se=>eo(G,se)))throw new Error("Not all branches were specified when using match. Specified: "+G.join(", ")+`
Required: `+s.join(", "));return $[b].apply(null,T)},log:$=>{console.log($,{constructors:s,constructor:b,params:T})}}}}),a}};te.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Te=t=>{const s=[],a=[];return wt(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ot=(t,s)=>{const a={};return Cs(t,(c,d)=>{eo(s,d)||(a[d]=c)}),a},Ot=(t,s)=>({[t]:s}),sn=t=>{const s={};return wt(t,a=>{s[a.key]=a.value}),s},jn=(t,s)=>ot(t,s),oo=(t,s)=>Ot(t,s),Yo=t=>sn(t),Xo=(t,s)=>t.length===0?Yn.value(s):Yn.value(Ds(s,Eu.apply(void 0,t))),er=t=>Yn.error(dt(t)),Rc=(t,s)=>{const a=Te(t);return a.errors.length>0?er(a.errors):Xo(a.values,s)},Va=t=>Ie(t)?t:Me,Kl=(t,s,a)=>{let c=t.dom;const d=Va(a);for(;c.parentNode;){c=c.parentNode;const h=_e.fromDom(c),b=s(h);if(b.isSome())return b;if(d(h))break}return M.none()},yl=(t,s,a)=>{const c=s(t),d=Va(a);return c.orThunk(()=>d(t)?M.none():Kl(t,s,d))},Ou=(t,s)=>Uo(t.element,s.event.target),Kh={can:Pe,abort:Me,run:ce},Gc=t=>{if(!Hr(t,"can")&&!Hr(t,"abort")&&!Hr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Kh,...t}},Om=(t,s)=>(...a)=>Ho(t,(c,d)=>c&&s(d).apply(void 0,a),!0),Qg=(t,s)=>(...a)=>Ho(t,(c,d)=>c||s(d).apply(void 0,a),!1),ep=t=>Ie(t)?{can:Pe,abort:Me,run:t}:t,Lf=t=>{const s=Om(t,d=>d.can),a=Qg(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{wt(t,h=>{h.run.apply(void 0,d)})}}},va=ne,Yl=va("touchstart"),No=va("touchmove"),Ms=va("touchend"),Ii=va("touchcancel"),Er=va("mousedown"),tp=va("mousemove"),Ff=va("mouseout"),$f=va("mouseup"),Kc=va("mouseover"),ld=va("focusin"),qd=va("focusout"),Du=va("keydown"),b1=va("keyup"),Gd=va("input"),np=va("change"),Yh=va("click"),zS=va("transitioncancel"),ud=va("transitionend"),US=va("transitionstart"),Uy=va("selectstart"),Nr=t=>ne("alloy."+t),ov={tap:Nr("tap")},dd=Nr("focus"),Dm=Nr("blur.post"),Hf=Nr("paste.post"),Xl=Nr("receive"),Jl=Nr("execute"),v1=Nr("focus.item"),fd=ov.tap,Li=Nr("longpress"),y1=Nr("sandbox.close"),Wy=Nr("typeahead.cancel"),w1=Nr("system.init"),C1=Nr("system.touchmove"),Zy=Nr("system.touchend"),Xh=Nr("system.scroll"),md=Nr("system.resize"),sc=Nr("system.attached"),Ql=Nr("system.detached"),Rm=Nr("system.dismissRequested"),jy=Nr("system.repositionRequested"),Jh=Nr("focusmanager.shifted"),qy=Nr("slotcontainer.visibility"),WS=Nr("system.external.element.scroll"),ZS=Nr("change.tab"),jS=Nr("dismiss.tab"),Mm=Nr("highlight"),Qh=Nr("dehighlight"),ao=(t,s)=>{sv(t,t.element,s,{})},_n=(t,s,a)=>{sv(t,t.element,s,a)},Nm=t=>{ao(t,Jl())},S1=(t,s,a)=>{sv(t,s,a,{})},sv=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},Gy=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},Kd=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},Fs=t=>Yo(t),qS=(t,s)=>({key:t,value:Gc({abort:s})}),Ky=(t,s)=>({key:t,value:Gc({can:s})}),Yy=t=>({key:t,value:Gc({run:(s,a)=>{a.event.prevent()}})}),it=(t,s)=>({key:t,value:Gc({run:s})}),eg=(t,s,a)=>({key:t,value:Gc({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),Sk=t=>s=>it(t,s),Pm=t=>s=>({key:t,value:Gc({run:(a,c)=>{Ou(a,c)&&s(a,c)}})}),xk=(t,s)=>it(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{Kd(d,d.element,t,c)})}),tg=(t,s,a)=>{const c=s.partUids[a];return xk(t,c)},Xy=(t,s)=>it(t,(a,c)=>{const d=c.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>yl(d.target,x=>a.getSystem().getByDom(x).toOptional(),Me).getOr(a));s(a,h,c)}),hd=t=>it(t,(s,a)=>{a.cut()}),Jy=t=>it(t,(s,a)=>{a.stop()}),op=(t,s)=>Pm(t)(s),Gs=Pm(sc()),Yd=Pm(Ql()),Qy=Pm(w1()),Ru=Sk(Jl()),ew=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,h=c.indexOf("("),b=c.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:x1(b.slice(0,1).concat(b.slice(3)))}),t},x1=t=>tt(t,s=>Ta(s,"/*")?s.substring(0,s.length-2):s),sp=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:x1(h)}),t},E1=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:x1(h.slice(1))}),t},Yc=t=>({classes:Ut(t.classes)?[]:t.classes,attributes:Ut(t.attributes)?{}:t.attributes,styles:Ut(t.styles)?{}:t.styles}),GS=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),_1=(t,s,a)=>Ru(c=>{a(c,t,s)}),tw=(t,s,a)=>Qy((c,d)=>{a(c,t,s)}),Bm=(t,s,a,c,d,h)=>{const b=Bi(t),x=Bs(s,[km("config",t)]);return YS(b,x,s,a,c,d,h)},nw=(t,s,a,c,d,h)=>{const b=t,x=Bs(s,[Tu("config",t)]);return YS(b,x,s,a,c,d,h)},KS=(t,s,a)=>ew((d,...h)=>{const b=[d].concat(h);return d.config({name:ne(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},x=>{const T=Array.prototype.slice.call(b,1);return s.apply(void 0,[d,x.config,x.state].concat(T))})},a,s),ow=t=>({key:t,value:void 0}),YS=(t,s,a,c,d,h,b)=>{const x=$=>Hr($,a)?$[a]():M.none(),T=Vo(d,($,G)=>KS(a,$,G)),P={...Vo(h,($,G)=>sp($,G)),...T,revoke:Qt(ow,a),config:$=>{const G=yi(a+"-config",t,$);return{key:a,value:{config:G,me:P,configAsRaw:Sc(()=>yi(a+"-config",t,$)),initialConfig:$,state:b}}},schema:ne(s),exhibit:($,G)=>hi(x($),At(c,"exhibit"),(Y,se)=>se(G,Y.config,Y.state)).getOrThunk(()=>Yc({})),name:ne(a),handlers:$=>x($).map(G=>At(c,"events").getOr(()=>({}))(G.config,G.state)).getOr({})};return P},Gi={init:()=>Xc({readState:ne("No State required")})},Xc=t=>t,xt=t=>Yo(t),rv=Bi([rt("fields"),rt("name"),Be("active",{}),Be("apis",{}),Be("state",Gi),Be("extra",{})]),li=t=>{const s=yi("Creating behaviour: "+t.name,rv,t);return Bm(s.fields,s.name,s.active,s.apis,s.extra,s.state)},av=Bi([rt("branchKey"),rt("branches"),rt("name"),Be("active",{}),Be("apis",{}),Be("state",Gi),Be("extra",{})]),XS=t=>{const s=yi("Creating behaviour: "+t.name,av,t);return nw(ba(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Ks=ne(void 0),Vf=(t,s)=>{const a=pn(t,s);return a===void 0||a===""?[]:a.split(" ")},iv=(t,s,a)=>{const d=Vf(t,s).concat([a]);return qt(t,s,d.join(" ")),!0},Ek=(t,s,a)=>{const c=uo(Vf(t,s),d=>d!==a);return c.length>0?qt(t,s,c.join(" ")):H(t,s),!1},zf=t=>t.dom.classList!==void 0,cv=t=>Vf(t,"class"),gd=(t,s)=>iv(t,"class",s),JS=(t,s)=>Ek(t,"class",s),sw=(t,s)=>eo(cv(t),s)?JS(t,s):gd(t,s),$s=(t,s)=>{zf(t)?t.dom.classList.add(s):gd(t,s)},rp=t=>{(zf(t)?t.dom.classList:cv(t)).length===0&&H(t,"class")},mr=(t,s)=>{zf(t)?t.dom.classList.remove(s):JS(t,s),rp(t)},QS=(t,s)=>{const a=zf(t)?t.dom.classList.toggle(s):sw(t,s);return rp(t),a},Jc=(t,s)=>zf(t)&&t.dom.classList.contains(s),ap=(t,s)=>{wt(s,a=>{$s(t,a)})},Qc=(t,s)=>{wt(s,a=>{mr(t,a)})},_k=(t,s)=>{wt(s,a=>{QS(t,a)})},Tk=(t,s)=>_o(s,a=>Jc(t,a)),kk=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},Ak=t=>zf(t)?kk(t):cv(t),za=(t,s,a,c,d)=>{const h=b=>b+"px";return{position:t,left:s.map(h),top:a.map(h),right:c.map(h),bottom:d.map(h)}},rc=t=>({...t,position:M.some(t.position)}),T1=(t,s)=>{Ss(t,rc(s))},Im=t=>(Vr(Os(t,"position"),"fixed")?M.none():fl(t)).orThunk(()=>{const c=_e.fromTag("span");return Ia(t).bind(d=>{bi(d,c);const h=fl(c);return Ni(c),h})}),rw=t=>Im(t).map(ga).getOrThunk(()=>Js(0,0)),ip=(t,s)=>{const a=t.element;$s(a,s.transitionClass),mr(a,s.fadeOutClass),$s(a,s.fadeInClass),s.onShow(t)},Xd=(t,s)=>{const a=t.element;$s(a,s.transitionClass),mr(a,s.fadeInClass),$s(a,s.fadeOutClass),s.onHide(t)},cp=(t,s)=>t.y<s.bottom&&t.bottom>s.y,ng=(t,s)=>t.y>=s.y,Lm=(t,s)=>t.bottom<=s.bottom,Jd=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),og=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),sg=t=>t.box.x-t.win.x,Ok=(t,s,a)=>{const c=s.win,d=s.box,h=sg(s);return bs(t,b=>{switch(b){case"bottom":return Lm(d,a.bounds)?M.none():M.some(og(c,h,a));case"top":return ng(d,a.bounds)?M.none():M.some(Jd(c,h,a));default:return M.none()}}).getOr({location:"no-dock"})},aw=(t,s,a)=>_o(t,c=>{switch(c){case"bottom":return Lm(s,a.bounds);case"top":return ng(s,a.bounds)}}),lv=(t,s)=>{const a=s.optScrollEnv.fold(ne(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return Js(t.bounds.x,a)},ex=(t,s)=>{const a=s.optScrollEnv.fold(ne(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return Js(t.x,a)},iw=(t,s,a)=>a.getInitialPos().map(c=>{const d=lv(c,s);return{box:qs(d.left,d.top,La(t),xs(t)),location:c.location}}),uv=(t,s,a,c,d)=>{const h=ex(s,a),b=qs(h.left,h.top,s.width,s.height);c.setInitialPos({style:ha(t),position:rs(t,"position")||"static",bounds:b,location:d.location})},cw=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>uv(t,s,a,c,d),()=>ce)},lw=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return M.some({morph:"static"});case"absolute":const h=Im(t).getOr(io()),b=Qs(h),x=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return M.some({morph:"absolute",positionCss:za("absolute",At(c.style,"left").map(T=>s.x-b.x),At(c.style,"top").map(T=>s.y-b.y+x),At(c.style,"right").map(T=>b.right-s.right),At(c.style,"bottom").map(T=>b.bottom-s.bottom))});default:return M.none()}}),uw=(t,s,a)=>iw(t,s,a).filter(({box:c})=>aw(a.getModes(),c,s)).bind(({box:c})=>lw(t,c,a)),k1=t=>{switch(t.location){case"top":return M.some({morph:"fixed",positionCss:za("fixed",M.some(t.leftX),M.some(t.topY),M.none(),M.none())});case"bottom":return M.some({morph:"fixed",positionCss:za("fixed",M.some(t.leftX),M.none(),M.none(),M.some(t.bottomY))});default:return M.none()}},dv=(t,s,a)=>{const c=Qs(t),d=Ur(),h=Ok(a.getModes(),{win:d,box:c},s);return h.location==="top"||h.location==="bottom"?(uv(t,c,s,a,h),k1(h)):M.none()},kM=(t,s,a)=>uw(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>iw(t,s,a)).bind(({box:c,location:d})=>{const h=Ur(),b=sg({win:h,box:c}),x=d==="top"?Jd(h,b,s):og(h,b,s);return k1(x)})),A1=(t,s,a)=>{const c=t.element;return Vr(Os(c,"position"),"fixed")?kM(c,s,a):dv(c,s,a)},lp=(t,s,a)=>{const c=t.element;return iw(c,s,a).bind(({box:d})=>lw(c,d,a))},Fm=(t,s,a,c)=>{const d=Qs(t),h=Ur(),b=sg({win:h,box:d}),x=c(h,b,s);return x.location==="bottom"||x.location==="top"?(cw(t,d,s,a,x),k1(x)):M.none()},dw=(t,s,a)=>{a.setDocked(!1),wt(["left","right","top","bottom","position"],c=>Xn(t.element,c)),s.onUndocked(t)},fw=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),T1(t.element,c),(d?s.onDocked:s.onUndocked)(t)},tx=(t,s,a,c,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(b=>{const x=cp(b,c.bounds);x!==a.isVisible()&&(a.setVisible(x),d&&!x?(ap(t.element,[h.fadeOutClass]),h.onHide(t)):(x?ip:Xd)(t,h))})})},mw=(t,s,a,c,d)=>{tx(t,s,a,c,!0),fw(t,s,a,d.positionCss)},rg=(t,s,a,c,d)=>{switch(d.morph){case"static":return dw(t,s,a);case"absolute":return fw(t,s,a,d.positionCss);case"fixed":return mw(t,s,a,c,d)}},Dk=(t,s,a)=>{const c=s.lazyViewport(t);tx(t,s,a,c),A1(t,c,a).each(d=>{rg(t,s,a,c,d)})},hw=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);lp(t,d,a).each(h=>{switch(h.morph){case"static":{dw(t,s,a);break}case"absolute":{fw(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{Qc(c,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),$m(t,s,a)},$m=(t,s,a)=>{t.getSystem().isConnected()&&Dk(t,s,a)},up=(t,s,a)=>{a.isDocked()&&hw(t,s,a)},gw=t=>(s,a,c)=>{const d=a.lazyViewport(s);Fm(s.element,d,c,t).each(b=>{mw(s,a,c,d,b)})},fv=gw(Jd),pw=gw(og);var bw=Object.freeze({__proto__:null,refresh:$m,reset:up,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:fv,forceDockToBottom:pw}),Rk=Object.freeze({__proto__:null,events:(t,s)=>Fs([op(ud(),(a,c)=>{t.contextual.each(d=>{Jc(a.element,d.transitionClass)&&(Qc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),it(Xh(),(a,c)=>{$m(a,t,s)}),it(WS(),(a,c)=>{$m(a,t,s)}),it(md(),(a,c)=>{up(a,t,s)})])});const el=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,ti(_e.fromDom(c))},Mu=t=>t.dom.innerHTML,Hm=(t,s)=>{const c=ma(t).dom,d=_e.fromDom(c.createDocumentFragment()),h=el(s,c);$d(d,h),ra(t),bi(t,d)},ag=t=>{const s=_e.fromTag("div"),a=_e.fromDom(t.dom.cloneNode(!0));return bi(s,a),Mu(s)},ox=(t,s)=>_e.fromDom(t.dom.cloneNode(s)),D1=t=>ox(t,!1),mv=t=>ox(t,!0),sx=t=>{if(hu(t))return"#shadow-root";{const s=D1(t);return ag(s)}},Vm=t=>sx(t),ig="unknown";var eu;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(eu||(eu={}));const hv=mn({}),Ma=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,h,b)=>{a.push({outcome:"cut",target:h,purpose:b})},logEventStopped:(d,h,b)=>{a.push({outcome:"stopped",target:h,purpose:b})},logNoParent:(d,h,b)=>{a.push({outcome:"no-parent",target:h,purpose:b})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,b)=>{a.push({outcome:"response",purpose:b,target:h})},write:()=>{const d=new Date().getTime();eo(["mousemove","mouseover","mouseout",w1()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:tt(a,h=>eo(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+Vm(h.target)+")":h.outcome)})}}},vw=(t,s,a)=>{switch(At(hv.get(),t).orThunk(()=>{const d=vs(hv.get());return bs(d,h=>t.indexOf(h)>-1?M.some(hv.get()[h]):M.none())}).getOr(eu.NORMAL)){case eu.NORMAL:return a(zm());case eu.LOGGING:{const d=Ma(t,s),h=a(d);return d.write(),h}case eu.STOP:return!0}},ac=["alloy/data/Fields","alloy/debugging/Debugging"],Mk=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return et(s,a=>a.indexOf("alloy")>0&&!ms(ac,c=>a.indexOf(c)>-1)).getOr(ig)}else return ig},rx={logEventCut:ce,logEventStopped:ce,logNoParent:ce,logEventNoHandlers:ce,logEventResponse:ce,write:ce},Uf=(t,s,a)=>vw(t,s,a),zm=ne(rx),Wf=ne([rt("menu"),rt("selectedMenu")]),tl=ne([rt("item"),rt("selectedItem")]);ne(Dn(tl().concat(Wf())));const ax=ne(Dn(tl())),R1=cd("initSize",[rt("numColumns"),rt("numRows")]),yw=()=>Fo("markers",ax()),dp=()=>cd("markers",[rt("backgroundMenu")].concat(Wf()).concat(tl())),cg=t=>cd("markers",tt(t,rt)),Um=(t,s,a)=>(Mk(),ia(s,s,a,qh(c=>Yn.value((...d)=>c.apply(void 0,d))))),ko=t=>Um("onHandler",t,id(ce)),Mc=t=>Um("onKeyboardHandler",t,id(M.none)),Qd=t=>Um("onHandler",t,Pi()),gv=t=>Um("onKeyboardHandler",t,Pi()),ys=(t,s)=>Lo(t,ne(s)),Wm=t=>Lo(t,Kt),pv=ne(R1);var Nk=[Bs("contextual",[Jr("fadeInClass"),Jr("fadeOutClass"),Jr("transitionClass"),kc("lazyContext"),ko("onShow"),ko("onShown"),ko("onHide"),ko("onHidden")]),fr("lazyViewport",()=>({bounds:Ur(),optScrollEnv:M.none()})),_("modes",["top","bottom"],Wt),ko("onDocked"),ko("onUndocked")],M1=Object.freeze({__proto__:null,init:t=>{const s=mn(!1),a=mn(!0),c=ts(),d=mn(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Xc({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const Hs=li({fields:Nk,name:"docking",active:Rk,apis:bw,state:M1}),ix=(t,s,a)=>Uo(s,t.element)&&!Uo(s,a),Bk=Fs([Ky(dd(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return ix(t,c,d)?(console.warn(dd()+` did not get interpreted by the desired target. 
Originator: `+Vm(c)+`
Target: `+Vm(d)+`
Check the `+dd()+" event handlers"),!1):!0})]);var cx=Object.freeze({__proto__:null,events:Bk});const lg=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},nl=(t,s,a)=>Math.min(Math.max(t,s),a),Zm=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ww=0;const tn=t=>{const a=new Date().getTime(),c=Math.floor(Zm()*1e9);return ww++,t+"_"+c+ww+String(a)},Cw=ne("alloy-id-"),Ik=ne("data-alloy-id"),lx=Cw(),Sw=Ik(),ux=(t,s)=>{const a=tn(lx+t);return dx(s,a),a},dx=(t,s)=>{Object.defineProperty(t.dom,Sw,{value:s,writable:!0})},pd=t=>{const s=xo(t)?t.dom[Sw]:null;return M.from(s)},N1=t=>tn(t),ug=Kt,bv=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Vm(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:ne("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Me}},Lk=bv(),wl=tn("alloy-premade"),fx=t=>(Object.defineProperty(t.element.dom,wl,{value:t.uid,writable:!0}),oo(wl,t)),xw=t=>po(t.dom,wl),mx=t=>At(t,wl),vv=t=>E1((s,...a)=>t(s.getApis(),s,...a),t),Fk=(t,s)=>{const a=tt(s,d=>Bs(d.name(),[rt("config"),Be("state",Gi)])),c=ar("component.behaviours",Dn(a),t.behaviours).fold(d=>{throw new Error(Gl(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Kt);return{list:s,data:Vo(c,d=>{const h=d.map(b=>({config:b.config,state:b.state.init(b.config)}));return ne(h)})}},yv=t=>t.list,Ew=t=>t.data,_w=(t,s)=>{const a={};return Cs(t,(c,d)=>{Cs(c,(h,b)=>{const x=At(a,b).getOr([]);a[b]=x.concat([s(d,h)])})}),a},hx=(t,s,a,c)=>{const d={...s};wt(a,P=>{d[P.name()]=P.exhibit(t,c)});const h=_w(d,(P,$)=>({name:P,modification:$})),b=P=>qo(P,($,G)=>({...G.modification,...$}),{}),x=qo(h.classes,(P,$)=>$.modification.concat(P),[]),T=b(h.attributes),D=b(h.styles);return Yc({classes:x,attributes:T,styles:D})},$k=(t,s,a,c)=>{try{const d=$r(a,(h,b)=>{const x=h[s],T=b[s],D=c.indexOf(x),P=c.indexOf(T);if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(c,null,2));if(P===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return D<P?-1:P<D?1:0});return Yn.value(d)}catch(d){return Yn.error([d])}},ef=(t,s)=>({handler:t,purpose:s}),gx=(t,s)=>({cHandler:t,purpose:s}),fp=(t,s)=>gx(Qt.apply(void 0,[t.handler].concat(s)),t.purpose),mp=t=>t.cHandler,px=(t,s)=>({name:t,handler:s}),wv=(t,s)=>{const a={};return wt(t,c=>{a[c.name()]=c.handlers(s)}),a},Tw=(t,s,a)=>{const c={...a,...wv(s,t)};return _w(c,px)},Cv=(t,s,a,c)=>{const d=Tw(t,a,c);return zk(d,s)},Hk=t=>{const s=ep(t);return(a,c,...d)=>{const h=[a,c].concat(d);s.abort.apply(void 0,h)?c.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},ic=(t,s)=>Yn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(tt(s,a=>a.name),null,2)]),Vk=(t,s,a)=>{const c=s[a];return c?$k("Event: "+a,"name",t,c).map(d=>{const h=tt(d,b=>b.handler);return Lf(h)}):ic(a,t)},zk=(t,s)=>{const a=Zi(t,(c,d)=>(c.length===1?Yn.value(c[0].handler):Vk(c,s,d)).map(b=>{const x=Hk(b),T=c.length>1?uo(s[d],D=>ms(c,P=>P.name===D)).join(" > "):c[0].name;return oo(d,ef(x,T))}));return Rc(a,{})},jm="alloy.base.behaviour",qm=Dn([ia("dom","dom",Pi(),Dn([rt("tag"),Be("styles",{}),Be("classes",[]),Be("attributes",{}),Bo("value"),Bo("innerHtml")])),rt("components"),rt("uid"),Be("events",{}),Be("apis",{}),ia("eventOrder","eventOrder",k({[Jl()]:["disabling",jm,"toggling","typeaheadevents"],[dd()]:[jm,"focusing","keying"],[w1()]:[jm,"disabling","toggling","representing","tooltipping"],[Gd()]:[jm,"representing","streaming","invalidating"],[Ql()]:[jm,"representing","item-events","toolbar-button-events","tooltipping"],[Er()]:["focusing",jm,"item-type-events"],[Yl()]:["focusing",jm,"item-type-events"],[Kc()]:["item-type-events","tooltipping"],[Xl()]:["receiving","reflecting","tooltipping"]}),bl()),Bo("domModification")]),Zf=t=>ar("custom.definition",qm,t),kw=t=>({...t.dom,uid:t.uid,domChildren:tt(t.components,s=>s.element)}),Xe=t=>t.domModification.fold(()=>Yc({}),Yc),Sv=t=>t.events,jf=t=>t.dom.value,Gm=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},xv=(t,s,a)=>Or(t,s).map(d=>{if(a.exists(b=>!Uo(b,d))){const b=a.map(oa).getOr("span"),x=_e.fromTag(b);return zl(d,x),x}else return d}),ol=(t,s,a)=>{a.fold(()=>bi(t,s),c=>{Uo(c,s)||(zl(c,s),Ni(c))})},Aw=(t,s,a)=>{const c=tt(s,a),d=ti(t);return wt(d.slice(c.length),Ni),c},Ow=(t,s,a,c)=>{const d=Or(t,s),h=c(a,d),b=xv(t,s,d);return ol(t,h.element,b),h},cc=(t,s,a)=>Aw(t,s,(c,d)=>Ow(t,d,c,a)),hp=(t,s)=>Aw(t,s,(a,c)=>{const d=Or(t,c);return ol(t,a,d),a}),bx=(t,s)=>{const a=vs(t),c=vs(s),d=Zt(c,a),h=_r(t,(b,x)=>!po(s,x)||b!==s[x]).t;return{toRemove:d,toSet:h}},vx=(t,s)=>{const{class:a,style:c,...d}=oe(s),{toSet:h,toRemove:b}=bx(t.attributes,d),x=()=>{wt(b,Ae=>H(s,Ae)),sr(s,h)},T=ha(s),{toSet:D,toRemove:P}=bx(t.styles,T),$=()=>{wt(P,Ae=>Xn(s,Ae)),Gn(s,D)},G=Ak(s),Y=Zt(G,t.classes),se=Zt(t.classes,G),ie=()=>{ap(s,se),Qc(s,Y)},Ne=Ae=>{Hm(s,Ae)},he=()=>{const Ae=t.domChildren;hp(s,Ae)},ke=()=>{const Ae=s,st=t.value.getOrUndefined();st!==jf(Ae)&&Gm(Ae,st??"")};return x(),ie(),$(),t.innerHtml.fold(he,Ne),ke(),s},Uk=t=>{const s=_e.fromTag(t.tag);sr(s,t.attributes),ap(s,t.classes),Gn(s,t.styles),t.innerHtml.each(c=>Hm(s,c));const a=t.domChildren;return $d(s,a),t.value.each(c=>{Gm(s,c)}),s},yx=(t,s)=>{try{const a=vx(t,s);return M.some(a)}catch{return M.none()}},Wk=t=>t.innerHtml.isSome()&&t.domChildren.length>0,wx=(t,s)=>{const a=d=>oa(d)===t.tag&&!Wk(t)&&!xw(d),c=s.filter(a).bind(d=>yx(t,d)).getOrThunk(()=>Uk(t));return dx(c,t.uid),c},Zk=t=>{const s=At(t,"behaviours").getOr({});return xe(vs(s),a=>{const c=s[a];return vt(c)?[c.me]:[]})},jk=(t,s)=>Fk(t,s),Ev=t=>{const s=Zk(t);return jk(t,s)},_v=(t,s,a)=>{const c=kw(t),d=Xe(t),h={"alloy.base.modification":d},b=s.length>0?hx(a,h,s,c):d;return GS(c,b)},qk=(t,s,a)=>{const c={"alloy.base.behaviour":Sv(t)};return Cv(a,t.eventOrder,s,c).getOrDie()},Cx=(t,s)=>{const a=()=>Ae,c=mn(Lk),d=pt(Zf(t)),h=Ev(t),b=yv(h),x=Ew(h),T=_v(d,b,x),D=wx(T,s),P=qk(d,b,x),$=mn(d.components),G=st=>{c.set(st)},Y=()=>{c.set(bv(a))},se=()=>{const st=ti(D),Ke=xe(st,Ft=>c.get().getByDom(Ft).fold(()=>[],Mo));$.set(Ke)},ie=st=>{const Ke=x;return(Ie(Ke[st.name()])?Ke[st.name()]:()=>{throw new Error("Could not find "+st.name()+" in "+JSON.stringify(t,null,2))})()},Ne=st=>Ie(x[st.name()]),he=()=>d.apis,ke=st=>x[st]().map(Ke=>Ke.state.readState()).getOr("not enabled"),Ae={uid:t.uid,getSystem:c.get,config:ie,hasConfigured:Ne,spec:t,readState:ke,getApis:he,connect:G,disconnect:Y,element:D,syncComponents:se,components:$.get,events:P};return Ae},Gk=(t,s)=>{const a=At(t,"components").getOr([]);return s.fold(()=>tt(a,$i),c=>tt(a,(d,h)=>kv(d,Or(c,h))))},Dw=(t,s)=>{const{events:a,...c}=ug(t),d=Gk(c,s),h={...c,events:{...cx,...a},components:d};return Yn.value(Cx(h,s))},hr=t=>{const s=_e.fromText(t);return Rw({element:s})},Rw=t=>{const s=yi("external.component",Bi([rt("element"),Bo("uid")]),t),a=mn(bv()),c=x=>{a.set(x)},d=()=>{a.set(bv(()=>b))},h=s.uid.getOrThunk(()=>N1("external"));dx(s.element,h);const b={uid:h,getSystem:a.get,config:M.none,hasConfigured:Me,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ne("No state"),syncComponents:ce,components:ne([]),events:{}};return fx(b)},Sx=N1,Tv=t=>po(t,"uid"),kv=(t,s)=>mx(t).getOrThunk(()=>{const a=Tv(t)?t:{uid:Sx(""),...t};return Dw(a,s).getOrDie()}),$i=t=>kv(t,M.none()),Cl=fx;var Mw=(t,s,a,c,d)=>t(a,c)?M.some(a):Ie(d)&&d(a)?M.none():s(a,c,d);const Nw=(t,s,a)=>{let c=t.dom;const d=Ie(a)?a:Me;for(;c.parentNode;){c=c.parentNode;const h=_e.fromDom(c);if(s(h))return M.some(h);if(d(h))break}return M.none()},xx=(t,s,a)=>Mw((d,h)=>h(d),Nw,t,s,a),Pw=(t,s)=>{const a=t.dom;return a.parentNode?P1(_e.fromDom(a.parentNode),c=>!Uo(t,c)&&s(c)):M.none()},P1=(t,s)=>{const a=d=>s(_e.fromDom(d));return et(t.dom.childNodes,a).map(_e.fromDom)},Av=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const h=_e.fromDom(c.childNodes[d]);if(s(h))return M.some(h);const b=a(c.childNodes[d]);if(b.isSome())return b}return M.none()};return a(t.dom)},Ex=(t,s,a)=>xx(t,s,a).isSome(),lc=t=>ji(t),Km=(t,s,a)=>Nw(t,c=>Ar(c,s),a),bd=(t,s)=>Pw(t,a=>Ar(a,s)),Bw=(t,s)=>P1(t,a=>Ar(a,s)),tr=(t,s)=>ji(s,t),Nu=(t,s,a)=>Mw((d,h)=>Ar(d,h),Km,t,s,a),Ym="aria-controls",Kk=t=>xx(t,a=>{if(!xo(a))return!1;const c=pn(a,"id");return c!==void 0&&c.indexOf(Ym)>-1}).bind(a=>{const c=pn(a,"id"),d=vr(a);return tr(d,`[${Ym}="${c}"]`)}),Iw=()=>{const t=tn(Ym);return{id:t,link:c=>{qt(c,Ym,t)},unlink:c=>{H(c,Ym)}}},_x=(t,s)=>Kk(s).exists(a=>dg(t,a)),dg=(t,s)=>Ex(s,a=>Uo(a,t.element),Me)||_x(t,s),Ua=(t,s,a,c,d,h,b,x=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:h,label:`${b}-${d}`,alwaysFit:x}),qf=te.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Yk=(t,s,a,c,d,h,b,x,T)=>t.fold(s,a,c,d,h,b,x,T),Lw=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),Xk=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),Ov=qf.southeast,Fw=qf.southwest,Dv=qf.northeast,nn=qf.northwest,B1=qf.south,$w=qf.north,Tx=qf.east,kx=qf.west,Jk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ui=(t,s)=>ss(["left","right","top","bottom"],a=>At(s,a).map(c=>Jk(t,c))),Qk=(t,s,a)=>{const c=(T,D)=>s[T].map(P=>{const $=T==="top"||T==="bottom",G=$?a.top:a.left,se=(T==="left"||T==="top"?Math.max:Math.min)(P,D)+G;return $?nl(se,t.y,t.bottom):nl(se,t.x,t.right)}).getOr(D),d=c("left",t.x),h=c("top",t.y),b=c("right",t.right),x=c("bottom",t.bottom);return qs(d,h,b-d,x-h)},Xm="layout",Hw=t=>t.x,Ax=(t,s)=>t.x+t.width/2-s.width/2,Si=(t,s)=>t.x+t.width-s.width,Jm=(t,s)=>t.y-s.height,Gf=t=>t.y+t.height,Ox=(t,s)=>t.y+t.height/2-s.height/2,eA=t=>t.x+t.width,tA=(t,s)=>t.x-s.width,ya=(t,s,a)=>Ua(Hw(t),Gf(t),a.southeast(),Ov(),"southeast",ui(t,{left:1,top:3}),Xm),Pr=(t,s,a)=>Ua(Si(t,s),Gf(t),a.southwest(),Fw(),"southwest",ui(t,{right:0,top:3}),Xm),us=(t,s,a)=>Ua(Hw(t),Jm(t,s),a.northeast(),Dv(),"northeast",ui(t,{left:1,bottom:2}),Xm),xi=(t,s,a)=>Ua(Si(t,s),Jm(t,s),a.northwest(),nn(),"northwest",ui(t,{right:0,bottom:2}),Xm),wa=(t,s,a)=>Ua(Ax(t,s),Jm(t,s),a.north(),$w(),"north",ui(t,{bottom:2}),Xm),Ca=(t,s,a)=>Ua(Ax(t,s),Gf(t),a.south(),B1(),"south",ui(t,{top:3}),Xm),Rv=(t,s,a)=>Ua(eA(t),Ox(t,s),a.east(),Tx(),"east",ui(t,{left:0}),Xm),Mv=(t,s,a)=>Ua(tA(t,s),Ox(t,s),a.west(),kx(),"west",ui(t,{right:1}),Xm),Dx=()=>[ya,Pr,us,xi,Ca,wa,Rv,Mv],Rx=()=>[Pr,ya,xi,us,Ca,wa,Rv,Mv],Mx=()=>[us,xi,ya,Pr,wa,Ca],Nv=()=>[xi,us,Pr,ya,wa,Ca],Qm=()=>[ya,Pr,us,xi,Ca,wa],Pv=()=>[Pr,ya,xi,us,Ca,wa],nA=(t,s)=>s.universal?t:uo(t,a=>eo(s.channels,a));var oA=Object.freeze({__proto__:null,events:t=>Fs([it(Xl(),(s,a)=>{const c=t.channels,d=vs(c),h=a,b=nA(d,h);wt(b,x=>{const T=c[x],D=T.schema,P=yi("channel["+x+`] data
Receiver: `+Vm(s.element),D,h.data);T.onReceive(s,P)})})])}),sA=[Fo("channels",ql(Yn.value,Bi([Qd("onReceive"),Be("schema",bl())])))];const Nc=li({fields:sA,name:"receiving",active:oA});var Nx=Object.freeze({__proto__:null,exhibit:(t,s)=>Yc({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Sl=(t,s=!1)=>t.dom.focus({preventScroll:s}),Bv=t=>t.dom.blur(),I1=t=>{const s=vr(t).dom;return t.dom===s.activeElement},vd=(t=jc())=>M.from(t.dom.activeElement).map(_e.fromDom),uc=t=>vd(vr(t)).filter(s=>t.dom.contains(s.dom)),eh=(t,s)=>{const a=vr(s),c=vd(a).bind(h=>{const b=x=>Uo(h,x);return b(s)?M.some(s):Av(s,b)}),d=t(s);return c.each(h=>{vd(a).filter(b=>Uo(b,h)).fold(()=>{Sl(h)},ce)}),d},Vw=te.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Iv=(t,s,a,c,d,h)=>{const b=s.rect,x=b.x-a,T=b.y-c,D=b.width,P=b.height,$=d-(x+D),G=h-(T+P),Y=M.some(x),se=M.some(T),ie=M.some($),Ne=M.some(G),he=M.none();return Yk(s.direction,()=>za(t,Y,se,he,he),()=>za(t,he,se,ie,he),()=>za(t,Y,he,he,Ne),()=>za(t,he,he,ie,Ne),()=>za(t,Y,se,he,he),()=>za(t,Y,he,he,Ne),()=>za(t,Y,se,he,he),()=>za(t,he,se,ie,he))},Px=(t,s)=>t.fold(()=>{const a=s.rect;return za("absolute",M.some(a.x),M.some(a.y),M.none(),M.none())},(a,c,d,h)=>Iv("absolute",s,a,c,d,h),(a,c,d,h)=>Iv("fixed",s,a,c,d,h)),Kf=(t,s)=>{const a=Qt(zd,s),c=t.fold(a,a,()=>{const b=ai();return zd(s).translate(-b.left,-b.top)}),d=yo(s),h=ml(s);return qs(c.left,c.top,d,h)},Bx=(t,s)=>s.fold(()=>t.fold(Ur,Ur,qs),a=>t.fold(ne(a),ne(a),()=>{const c=zw(t,a.x,a.y);return qs(c.left,c.top,a.width,a.height)})),zw=(t,s,a)=>{const c=Js(s,a),d=()=>{const h=ai();return c.translate(-h.left,-h.top)};return t.fold(ne(c),ne(c),d)},Ix=(t,s,a,c)=>t.fold(s,a,c);Vw.none;const L1=Vw.relative,F1=Vw.fixed,$1=(t,s)=>({anchorBox:t,origin:s}),rA=(t,s)=>$1(t,s),Lv="data-alloy-placement",aA=(t,s)=>{qt(t,Lv,s)},Lx=t=>Dr(t,Lv),iA=t=>H(t,Lv),Fv=te.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Fx=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:x,right:T,bottom:D,width:P,height:$}=t,G=b>=a&&b<=d,Y=x>=c&&x<=h,se=G&&Y,ie=T<=d&&T>=a,Ne=D<=h&&D>=c,he=ie&&Ne,ke=Math.min(P,b>=a?d-b:T-a),Ae=Math.min($,x>=c?h-x:D-c);return{originInBounds:se,sizeInBounds:he,visibleW:ke,visibleH:Ae}},cA=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:b,y:x,width:T,height:D}=t,P=Math.max(a,d-T),$=Math.max(c,h-D),G=nl(b,a,P),Y=nl(x,c,$),se=Math.min(G+T,d)-G,ie=Math.min(Y+D,h)-Y;return qs(G,Y,se,ie)},Uw=(t,s,a)=>{const c=ne(s.bottom-a.y),d=ne(a.bottom-s.y),h=Lw(t,d,d,c),b=ne(s.right-a.x),x=ne(a.right-s.x);return{maxWidth:Xk(t,x,x,b),maxHeight:h}},$v=(t,s,a,c)=>{const d=t.bubble,h=d.offset,b=Qk(c,t.restriction,h),x=t.x+h.left,T=t.y+h.top,D=qs(x,T,s,a),{originInBounds:P,sizeInBounds:$,visibleW:G,visibleH:Y}=Fx(D,b),se=P&&$,ie=se?D:cA(D,b),Ne=ie.width>0&&ie.height>0,{maxWidth:he,maxHeight:ke}=Uw(t.direction,ie,c),Ae={rect:ie,maxHeight:ke,maxWidth:he,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return se||t.alwaysFit?Fv.fit(Ae):Fv.nofit(Ae,G,Y,Ne)},lA=(t,s,a,c,d,h)=>{const b=c.width,x=c.height,T=(P,$,G,Y,se)=>{const ie=P(a,c,d,t,h),Ne=$v(ie,b,x,h);return Ne.fold(ne(Ne),(he,ke,Ae,st)=>(se===st?Ae>Y||ke>G:!se&&st)?Ne:Fv.nofit($,G,Y,se))};return Ho(s,(P,$)=>{const G=Qt(T,$);return P.fold(ne(P),G)},Fv.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:Ov(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Kt,Kt)},$x=Pe,dc=(t,s,a)=>Fd(t,s,$x,a),Ww=(t,s,a)=>$a(t,s,$x,a),Zw=Ec,jw=["top","bottom","right","left"],Hv="data-alloy-transition-timer",uA=(t,s)=>Tk(t,s.classes),Vv=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),Hx=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return Go(s,(c,d)=>{const h=t[d].map(a),b=c.map(a);return!Ba(h,b)}).isSome()},qw=t=>{const s=h=>{const x=rs(t,h).split(/\s*,\s*/);return uo(x,ge)},a=h=>{if(j(h)&&/^[\d.]+/.test(h)){const b=parseFloat(h);return Ta(h,"ms")?b:b*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return Ho(d,(h,b,x)=>{const T=a(c[x])+a(b);return Math.max(h,T)},0)},Gw=(t,s)=>{const a=pa(),c=pa();let d;const h=D=>{var P;const $=(P=D.raw.pseudoElement)!==null&&P!==void 0?P:"";return Uo(D.target,t)&&de($)&&eo(jw,D.raw.propertyName)},b=D=>{if(Nt(D)||h(D)){a.clear(),c.clear();const P=D==null?void 0:D.raw.type;(Nt(P)||P===ud())&&(clearTimeout(d),H(t,Hv),Qc(t,s.classes))}},x=dc(t,US(),D=>{h(D)&&(x.unbind(),a.set(dc(t,ud(),b)),c.set(dc(t,zS(),b)))}),T=qw(t);requestAnimationFrame(()=>{d=setTimeout(b,T+17),qt(t,Hv,d)})},Vx=(t,s)=>{ap(t,s.classes),Dr(t,Hv).each(a=>{clearTimeout(parseInt(a,10)),H(t,Hv)}),Gw(t,s)},pp=(t,s,a,c,d,h)=>{const b=Vv(c,d,h);if(b||uA(t,c)){lt(t,"position",a.position);const x=Kf(s,t),T=Px(s,{...d,rect:x}),D=ss(jw,P=>T[P]);Hx(a,D)&&(Ss(t,D),b&&Vx(t,c),oi(t))}else Qc(t,c.classes)},zx=t=>({width:yo(t),height:ml(t)}),Ux=(t,s,a,c)=>{Xn(s,"max-height"),Xn(s,"max-width");const d=zx(s);return lA(s,c.preference,t,d,a,c.bounds)},Wx=(t,s)=>{const a=s.classes;Qc(t,a.off),ap(t,a.on)},dA=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},Zx=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},jx=(t,s,a)=>{const c=Px(a.origin,s);a.transition.each(d=>{pp(t,a.origin,c,d,s,a.lastPlacement)}),T1(t,c)},fA=(t,s)=>{aA(t,s.placement)},zv=(t,s)=>{bm(t,Math.floor(s))},qx=ne((t,s)=>{zv(t,s),Gn(t,{"overflow-x":"hidden","overflow-y":"auto"})}),bp=ne((t,s)=>{zv(t,s)}),Gx=(t,s,a)=>t[s]===void 0?a:t[s],Kw=(t,s,a,c,d,h,b,x)=>{const T=Gx(b,"maxHeightFunction",qx()),D=Gx(b,"maxWidthFunction",ce),P=t.anchorBox,$=t.origin,G={bounds:Bx($,h),origin:$,preference:c,maxHeightFunction:T,maxWidthFunction:D,lastPlacement:d,transition:x};return Kx(P,s,a,G)},Kx=(t,s,a,c)=>{const d=Ux(t,s,a,c);return jx(s,d,c),fA(s,d),Wx(s,d),dA(s,d,c),Zx(s,d,c),{layout:d.layout,placement:d.placement}},mA=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Pu=(t,s,a,c=1)=>{const d=t*c,h=s*c,b=T=>At(a,T).getOr([]),x=(T,D,P)=>{const $=Zt(mA,P);return{offset:Js(T,D),classesOn:xe(P,b),classesOff:xe($,b)}};return{southeast:()=>x(-t,s,["top","alignLeft"]),southwest:()=>x(t,s,["top","alignRight"]),south:()=>x(-t/2,s,["top","alignCentre"]),northeast:()=>x(-t,-s,["bottom","alignLeft"]),northwest:()=>x(t,-s,["bottom","alignRight"]),north:()=>x(-t/2,-s,["bottom","alignCentre"]),east:()=>x(t,-s/2,["valignCentre","left"]),west:()=>x(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>x(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>x(-d,h,["top","alignRight","inset"]),insetNorth:()=>x(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>x(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>x(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>x(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>x(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>x(d,-h/2,["valignCentre","left","inset"])}},Uv=()=>Pu(0,0,{}),Wv=Kt,Ei=(t,s)=>a=>DM(a)==="rtl"?s:t,DM=t=>rs(t,"direction")==="rtl"?"rtl":"ltr";var xl;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(xl||(xl={}));const Yw="data-alloy-vertical-dir",hA=t=>Ex(t,s=>xo(s)&&pn(s,"data-alloy-vertical-dir")===xl.BottomToTop),th=()=>Bs("layouts",[rt("onLtr"),rt("onRtl"),Bo("onBottomLtr"),Bo("onBottomRtl")]),H1=(t,s,a,c,d,h,b)=>{const x=b.map(hA).getOr(!1),T=s.layouts.map(Y=>Y.onLtr(t)),D=s.layouts.map(Y=>Y.onRtl(t)),P=x?s.layouts.bind(Y=>Y.onBottomLtr.map(se=>se(t))).or(T).getOr(d):T.getOr(a),$=x?s.layouts.bind(Y=>Y.onBottomRtl.map(se=>se(t))).or(D).getOr(h):D.getOr(c);return Ei(P,$)(t)},gA=(t,s,a)=>{const c=s.hotspot,d=Kf(a,c.element),h=H1(t.element,s,Qm(),Pv(),Mx(),Nv(),M.some(s.hotspot.element));return M.some(Wv({anchorBox:d,bubble:s.bubble.getOr(Uv()),overrides:s.overrides,layouts:h}))};var Yx=[rt("hotspot"),Bo("bubble"),Be("overrides",{}),th(),ys("placement",gA)];const Xw=(t,s,a)=>{const c=zw(a,s.x,s.y),d=qs(c.left,c.top,s.width,s.height),h=H1(t.element,s,Dx(),Rx(),Dx(),Rx(),M.none());return M.some(Wv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var Xx=[rt("x"),rt("y"),Be("height",0),Be("width",0),Be("bubble",Uv()),Be("overrides",{}),th(),ys("placement",Xw)];const Zv=te.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),V1=t=>t.fold(Kt,(s,a,c)=>s.translate(-a,-c)),Jx=t=>t.fold(Kt,Kt),Qx=t=>Ho(t,(s,a)=>s.translate(a.left,a.top),Js(0,0)),pA=t=>{const s=tt(t,V1);return Qx(s)},jv=t=>{const s=tt(t,Jx);return Qx(s)},qv=Zv.screen,bA=Zv.absolute,vp=(t,s,a)=>{const c=Da(a.root).dom,d=h=>{const b=ma(h),x=ma(t.element);return Uo(b,x)};return M.from(c.frameElement).map(_e.fromDom).filter(d).map(ga)},eE=(t,s,a)=>{const c=ma(t.element),d=ai(c),h=vp(t,s,a).getOr(d);return bA(h,d.left,d.top)},Gv=(t,s,a,c)=>{const d=qv(Js(t,s));return M.some(nd(d,a,c))},Jw=(t,s,a,c,d)=>t.map(h=>{const b=[s,h.point],x=Ix(c,()=>jv(b),()=>jv(b),()=>pA(b)),T=Ud(x.left,x.top,h.width,h.height),D=a.showAbove?Mx():Qm(),P=a.showAbove?Nv():Pv(),$=H1(d,a,D,P,D,P,M.none());return Wv({anchorBox:T,bubble:a.bubble.getOr(Uv()),overrides:a.overrides,layouts:$})}),Kv=(t,s,a)=>{const c=eE(t,a,s);return s.node.filter(en).bind(d=>{const h=d.dom.getBoundingClientRect(),b=Gv(h.left,h.top,h.width,h.height),x=s.node.getOr(t.element);return Jw(b,c,s,a,x)})};var vA=[rt("node"),rt("root"),Bo("bubble"),th(),Be("overrides",{}),Be("showAbove",!1),ys("placement",Kv)];const tE="\uFEFF",fg=" ",z1={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},nh=te.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),U1=(t,s,a,c)=>t.fold(s,a,c),oE=t=>t.fold(Kt,Kt,Kt),sE=nh.before,RM=nh.on,yA=nh.after,yp={before:sE,on:RM,after:yA,cata:U1,getStart:oE},tf=te.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wA=t=>tf.exact(t.start,t.soffset,t.finish,t.foffset),Qw=t=>t.match({domRange:s=>_e.fromDom(s.startContainer),relative:(s,a)=>yp.getStart(s),exact:(s,a,c,d)=>s}),rE=tf.domRange,aE=tf.relative,iE=tf.exact,eC=t=>{const s=Qw(t);return Da(s)},cE=z1.create,oh={domRange:rE,relative:aE,exact:iE,exactFromRange:wA,getWin:eC,range:cE},lE=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},mg=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},sh=(t,s,a)=>{const c=t.document.createRange();return lE(c,s),mg(c,a),c},W1=(t,s,a,c,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(c.dom,d),h},wp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Yv=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?M.some(a).map(wp):M.none()},rh=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?M.some(s).map(wp):M.none()},El=te.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),tC=(t,s,a)=>s(_e.fromDom(a.startContainer),a.startOffset,_e.fromDom(a.endContainer),a.endOffset),CA=(t,s)=>s.match({domRange:a=>({ltr:ne(a),rtl:M.none}),relative:(a,c)=>({ltr:Sc(()=>sh(t,a,c)),rtl:Sc(()=>M.some(sh(t,c,a)))}),exact:(a,c,d,h)=>({ltr:Sc(()=>W1(t,a,c,d,h)),rtl:Sc(()=>M.some(W1(t,d,h,a,c)))})}),Cp=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>El.rtl(_e.fromDom(d.endContainer),d.endOffset,_e.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>tC(t,El.ltr,a)):tC(t,El.ltr,a)},uE=(t,s)=>{const a=CA(t,s);return Cp(t,a)},Sp=(t,s)=>uE(t,s).match({ltr:(c,d,h,b)=>{const x=t.document.createRange();return x.setStart(c.dom,d),x.setEnd(h.dom,b),x},rtl:(c,d,h,b)=>{const x=t.document.createRange();return x.setStart(h.dom,b),x.setEnd(c.dom,d),x}});El.ltr,El.rtl;const xp=(t,s,a)=>uo(uu(t,a),s),di=(t,s)=>Sf(s,t),Xv=(t,s,a,c)=>{const h=ma(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,c),h},Z1=(t,s,a,c)=>{const d=Xv(t,s,a,c),h=Uo(t,a)&&s===c;return d.collapsed&&!h},Jv=t=>M.from(t.getSelection()),dE=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return M.some(z1.create(_e.fromDom(s.startContainer),s.startOffset,_e.fromDom(a.endContainer),a.endOffset))}else return M.none()},nC=t=>{if(t.anchorNode===null||t.focusNode===null)return dE(t);{const s=_e.fromDom(t.anchorNode),a=_e.fromDom(t.focusNode);return Z1(s,t.anchorOffset,a,t.focusOffset)?M.some(z1.create(s,t.anchorOffset,a,t.focusOffset)):dE(t)}},Qv=t=>Jv(t).filter(s=>s.rangeCount>0).bind(nC),la=(t,s)=>{const a=Sp(t,s);return Yv(a)},e0=(t,s)=>{const a=Sp(t,s);return rh(a)},fE=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return c(h).getOr("")},c=h=>t(h)?M.from(h.dom.nodeValue):M.none();return{get:a,getOption:c,set:(h,b)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=b}}})(sa,"text"),oC=t=>fE.get(t),Yf=(t,s)=>({element:t,offset:s}),j1=(t,s)=>{const a=ti(t);if(a.length===0)return Yf(t,s);if(s<a.length)return Yf(a[s],0);{const c=a[a.length-1],d=sa(c)?oC(c).length:ti(c).length;return Yf(c,d)}},Ep=(t,s)=>sa(t)?Yf(t,s):j1(t,s),t0=t=>t.foffset!==void 0,n0=(t,s)=>s.getSelection.getOrThunk(()=>()=>Qv(t))().map(c=>{if(t0(c)){const d=Ep(c.start,c.soffset),h=Ep(c.finish,c.foffset);return oh.range(d.element,d.offset,h.element,h.offset)}else return c}),ah=(t,s,a)=>{const c=Da(s.root).dom,d=eE(t,a,s),h=n0(c,s).bind(T=>{if(t0(T))return e0(c,oh.exactFromRange(T)).orThunk(()=>{const P=_e.fromText(tE);zl(T.start,P);const $=la(c,oh.exact(P,0,P,1));return Ni(P),$}).bind(P=>Gv(P.left,P.top,P.width,P.height));{const D=Vo(T,$=>$.dom.getBoundingClientRect()),P={left:Math.min(D.firstCell.left,D.lastCell.left),right:Math.max(D.firstCell.right,D.lastCell.right),top:Math.min(D.firstCell.top,D.lastCell.top),bottom:Math.max(D.firstCell.bottom,D.lastCell.bottom)};return Gv(P.left,P.top,P.right-P.left,P.bottom-P.top)}}),x=n0(c,s).bind(T=>t0(T)?xo(T.start)?M.some(T.start):Mi(T.start):M.some(T.firstCell)).getOr(t.element);return Jw(h,d,s,a,x)};var SA=[Bo("getSelection"),rt("root"),Bo("bubble"),th(),Be("overrides",{}),Be("showAbove",!1),ys("placement",ah)];const sl="link-layout",yd=t=>t.x+t.width,sC=(t,s)=>t.x-s.width,mE=(t,s)=>t.y-s.height+t.height,hE=t=>t.y,rC=(t,s,a)=>Ua(yd(t),hE(t),a.southeast(),Ov(),"southeast",ui(t,{left:0,top:2}),sl),aC=(t,s,a)=>Ua(sC(t,s),hE(t),a.southwest(),Fw(),"southwest",ui(t,{right:1,top:2}),sl),gE=(t,s,a)=>Ua(yd(t),mE(t,s),a.northeast(),Dv(),"northeast",ui(t,{left:0,bottom:3}),sl),pE=(t,s,a)=>Ua(sC(t,s),mE(t,s),a.northwest(),nn(),"northwest",ui(t,{right:1,bottom:3}),sl),Pc=()=>[rC,aC,gE,pE],hg=()=>[aC,rC,pE,gE],iC=(t,s,a)=>{const c=Kf(a,s.item.element),d=H1(t.element,s,Pc(),hg(),Pc(),hg(),M.none());return M.some(Wv({anchorBox:c,bubble:Uv(),overrides:s.overrides,layouts:d}))};var ih=[rt("item"),th(),Be("overrides",{}),ys("placement",iC)],Bc=ba("type",{selection:SA,node:vA,hotspot:Yx,submenu:ih,makeshift:Xx});const rl=[Ac("classes",Wt),Dc("mode","all",["all","layout","placement"])],_i=[Be("useFixed",Me),Bo("getBounds")],tu=[Fo("anchor",Bc),Bs("transition",rl)],o0=()=>{const t=document.documentElement;return F1(0,0,t.clientWidth,t.clientHeight)},nu=t=>{const s=ga(t.element),a=t.element.dom.getBoundingClientRect();return L1(s.left,s.top,a.width,a.height)},gg=(t,s,a,c,d,h)=>{const b=rA(s.anchorBox,t);return Kw(b,c.element,s.bubble,s.layouts,d,a,s.overrides,h)},xA=(t,s,a,c,d)=>{const h=M.none();cC(t,s,a,c,d,h)},cC=(t,s,a,c,d,h)=>{const b=yi("placement.info",Dn(tu),d),x=b.anchor,T=c.element,D=a.get(c.uid);eh(()=>{lt(T,"position","fixed");const P=Os(T,"visibility");lt(T,"visibility","hidden");const $=s.useFixed()?o0():nu(t);x.placement(t,x,$).each(G=>{const Y=h.orThunk(()=>s.getBounds.map(so)),se=gg($,G,Y,c,D,b.transition);a.set(c.uid,se)}),P.fold(()=>{Xn(T,"visibility")},G=>{lt(T,"visibility",G)}),Os(T,"left").isNone()&&Os(T,"top").isNone()&&Os(T,"right").isNone()&&Os(T,"bottom").isNone()&&Vr(Os(T,"position"),"fixed")&&Xn(T,"position")},T)};var bE=Object.freeze({__proto__:null,position:xA,positionWithinBounds:cC,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;wt(["position","left","right","top","bottom"],h=>Xn(d,h)),iA(d),a.clear(c.uid)}}),r0=Object.freeze({__proto__:null,init:()=>{let t={};return Xc({readState:()=>t,clear:d=>{vt(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>At(t,d)})}});const Hi=li({fields:_i,name:"positioning",active:Nx,apis:bE,state:r0}),_p=t=>t.getSystem().isConnected(),Tp=t=>{ao(t,Ql());const s=t.components();wt(s,Tp)},q1=t=>{const s=t.components();wt(s,q1),ao(t,sc())},lC=(t,s)=>{t.getSystem().addToWorld(s),en(t.element)&&q1(s)},G1=t=>{Tp(t),t.getSystem().removeFromWorld(t)},K1=(t,s)=>{bi(t.element,s.element)},pg=t=>{wt(t.components(),s=>Ni(s.element)),ra(t.element),t.syncComponents()},uC=(t,s,a)=>{const c=t.components();pg(t);const d=a(s),h=Zt(c,d);wt(h,b=>{Tp(b),t.getSystem().removeFromWorld(b)}),wt(d,b=>{_p(b)?K1(t,b):(t.getSystem().addToWorld(b),K1(t,b),en(t.element)&&q1(b))}),t.syncComponents()},a0=(t,s,a)=>{const c=t.components(),d=xe(s,x=>mx(x).toArray());wt(c,x=>{eo(d,x)||G1(x)});const h=a(s),b=Zt(c,h);wt(b,x=>{_p(x)&&G1(x)}),wt(h,x=>{_p(x)||lC(t,x)}),t.syncComponents()},Bu=(t,s)=>{vE(t,s,bi)},vE=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),en(t.element)&&q1(s),t.syncComponents()},yE=t=>{Tp(t),Ni(t.element),t.getSystem().removeFromWorld(t)},Xf=t=>{const s=Ia(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());yE(t),s.each(a=>{a.syncComponents()})},_l=t=>{const s=t.components();wt(s,yE),ra(t.element),t.syncComponents()},Y1=(t,s)=>{ch(t,s,bi)},bg=(t,s)=>{ch(t,s,Df)},ch=(t,s,a)=>{a(t,s.element);const c=ti(s.element);wt(c,d=>{s.getByDom(d).each(q1)})},dC=t=>{const s=ti(t.element);wt(s,a=>{t.getByDom(a).each(Tp)}),Ni(t.element)},i0=(t,s,a,c)=>{a.get().each(b=>{_l(t)});const d=s.getAttachPoint(t);Bu(d,t);const h=t.getSystem().build(c);return Bu(t,h),a.set(h),h},wE=(t,s,a,c)=>{const d=i0(t,s,a,c);return s.onOpen(t,d),d},TA=(t,s,a,c)=>a.get().map(()=>i0(t,s,a,c)),kA=(t,s,a,c,d)=>{mC(t,s),wE(t,s,a,c),d(),l0(t,s)},vg=(t,s,a)=>{a.get().each(c=>{_l(t),Xf(t),s.onClose(t,c),a.clear()})},fC=(t,s,a)=>a.isOpen(),kp=(t,s,a,c)=>fC(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),X1=(t,s,a)=>a.get(),AA=(t,s,a,c)=>{Os(t.element,s).fold(()=>{H(t.element,a)},d=>{qt(t.element,a,d)}),lt(t.element,s,c)},c0=(t,s,a)=>{Dr(t.element,a).fold(()=>Xn(t.element,s),c=>lt(t.element,s,c))},mC=(t,s,a)=>{const c=s.getAttachPoint(t);lt(t.element,"position",Hi.getMode(c)),AA(t,"visibility",s.cloakVisibilityAttr,"hidden")},hC=t=>ms(["top","left","right","bottom"],s=>Os(t,s).isSome()),l0=(t,s,a)=>{hC(t.element)||Xn(t.element,"position"),c0(t,"visibility",s.cloakVisibilityAttr)};var gC=Object.freeze({__proto__:null,cloak:mC,decloak:l0,open:wE,openWhileCloaked:kA,close:vg,isOpen:fC,isPartOf:kp,getState:X1,setContent:TA}),u0=Object.freeze({__proto__:null,events:(t,s)=>Fs([it(y1(),(a,c)=>{vg(a,t,s)})])}),d0=[ko("onOpen"),ko("onClose"),rt("isPartOf"),rt("getAttachPoint"),Be("cloakVisibilityAttr","data-precloak-visibility")],m0=Object.freeze({__proto__:null,init:()=>{const t=ts(),s=ne("not-implemented");return Xc({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Do=li({fields:d0,name:"sandboxing",active:u0,apis:gC,state:m0}),of=ne("dismiss.popups"),yg=ne("reposition.popups"),h0=ne("mouse.released"),g0=Bi([Be("isExtraPart",Me),Bs("fireEventInstead",[Be("event",Rm())])]),lh=t=>{const s=yi("Dismissal",g0,t);return{[of()]:{schema:Bi([rt("target")]),onReceive:(a,c)=>{Do.isOpen(a)&&(Do.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>Do.close(a),h=>ao(a,h.event)))}}}},p0=Bi([Bs("fireEventInstead",[Be("event",jy())]),kc("doReposition")]),pC=t=>{const s=yi("Reposition",p0,t);return{[yg()]:{onReceive:a=>{Do.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>ao(a,c.event))}}}},bC=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},vC=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var J1=Object.freeze({__proto__:null,onLoad:bC,onUnload:vC,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),b0=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Gs((c,d)=>{bC(c,t,s)}),Yd((c,d)=>{vC(c,t,s)})]:[tw(t,s,bC)];return Fs(a)}});const v0=()=>{const t=mn(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return Xc({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},wC=()=>Xc({readState:ce}),SE=()=>{const t=mn({}),s=mn({});return Xc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:b=>At(t.get(),b).orThunk(()=>At(s.get(),b)),update:b=>{const x=t.get(),T=s.get(),D={},P={};wt(b,$=>{D[$.value]=$,At($,"meta").each(G=>{At(G,"text").each(Y=>{P[Y]=$})})}),t.set({...x,...D}),s.set({...T,...P})},clear:()=>{t.set({}),s.set({})}})};var y0=Object.freeze({__proto__:null,memory:v0,dataset:SE,manual:wC,init:t=>t.store.manager.state(t)});const xE=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},ou=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},Wa=(t,s,a)=>{s.store.initialValue.each(d=>{xE(t,s,a,d)})},em=(t,s,a)=>{a.clear()};var CC=[Bo("initialValue"),rt("getFallbackEntry"),rt("getDataKey"),rt("setValue"),ys("manager",{setValue:xE,getValue:ou,onLoad:Wa,onUnload:em,state:SE})];const OA=(t,s,a)=>s.store.getValue(t),w0=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},SC=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var Op=[rt("getValue"),Be("setValue",ce),Bo("initialValue"),ys("manager",{setValue:w0,getValue:OA,onLoad:SC,onUnload:ce,state:Gi.init})];const EE=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},DA=(t,s,a)=>a.get(),MM=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},RA=(t,s,a)=>{a.clear()};var _E=[Bo("initialValue"),ys("manager",{setValue:EE,getValue:DA,onLoad:MM,onUnload:RA,state:v0})],TE=[Oc("store",{mode:"memory"},ba("mode",{memory:_E,manual:Op,dataset:CC})),ko("onSetValue"),Be("resetOnDom",!1)];const Xt=li({fields:TE,name:"representing",active:b0,apis:J1,extra:{setValueFrom:(t,s)=>{const a=Xt.getValue(s);Xt.setValue(t,a)}},state:y0}),Za=(t,s)=>R(t,{},tt(s,a=>Vy(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Lo("dump",Kt)])),Q1=t=>t.dump,ja=(t,s)=>({...xt(s),...t.dump}),su={field:Za,augment:ja,get:Q1},xC="placeholder",Cg=te.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),eb=t=>po(t,"uiType"),Sg=(t,s,a,c)=>t.exists(d=>d!==a.owner)?Cg.single(!0,ne(a)):At(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+vs(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),tb=(t,s,a,c)=>eb(a)&&a.uiType===xC?Sg(t,s,a,c):Cg.single(!1,ne(a)),kE=(t,s,a,c)=>tb(t,s,a,c).fold((h,b)=>{const x=eb(a)?b(s,a.config,a.validated):b(s),T=At(x,"components").getOr([]),D=xe(T,P=>kE(t,s,P,c));return[{...x,components:D}]},(h,b)=>{if(eb(a)){const x=b(s,a.config,a.validated);return a.validated.preprocess.getOr(Kt)(x)}else return b(s)}),MA=(t,s,a,c)=>xe(a,d=>kE(t,s,d,c)),NA=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((b,x)=>b,(b,x)=>b);return{name:ne(t),required:h,used:c,replace:d}},Dp=(t,s,a,c)=>{const d=Vo(c,(b,x)=>NA(x,b)),h=MA(t,s,a,d);return Cs(d,b=>{if(b.used()===!1&&b.required())throw new Error("Placeholder: "+b.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},xg=Cg.single,EC=Cg.multiple,_C=ne(xC),al=te.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),sf=Be("factory",{sketch:Kt}),C0=Be("schema",[]),Iu=rt("name"),S0=ia("pname","pname",co(t=>"<alloy."+tn(t.name)+">"),bl()),PA=Lo("schema",()=>[Bo("preprocess")]),x0=Be("defaults",ne({})),E0=Be("overrides",ne({})),BA=Dn([sf,C0,Iu,S0,x0,E0]),IA=Dn([sf,C0,Iu,x0,E0]),LA=Dn([sf,C0,Iu,S0,x0,E0]),FA=Dn([sf,PA,Iu,rt("unit"),S0,x0,E0]),_0=t=>t.fold(M.some,M.none,M.some,M.some),AE=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},$A=t=>t.fold(Kt,Kt,Kt,Kt),T0=(t,s)=>a=>{const c=yi("Converting part type",s,a);return t(c)},Ti=T0(al.required,BA),ru=T0(al.external,IA),Tl=T0(al.optional,LA),k0=T0(al.group,FA),nb=ne("entirety");var NM=Object.freeze({__proto__:null,required:Ti,external:ru,optional:Tl,group:k0,asNamedPart:_0,name:AE,asCommon:$A,original:nb});const ob=(t,s,a,c)=>Ds(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),HA=(t,s,a)=>{const c={},d={};return wt(a,h=>{h.fold(b=>{c[b.pname]=xg(!0,(x,T,D)=>b.factory.sketch(ob(x,b,T,D)))},b=>{const x=s.parts[b.name];d[b.name]=ne(b.factory.sketch(ob(s,b,x[nb()]),x))},b=>{c[b.pname]=xg(!1,(x,T,D)=>b.factory.sketch(ob(x,b,T,D)))},b=>{c[b.pname]=EC(!0,(x,T,D)=>{const P=x[b.name];return tt(P,$=>b.factory.sketch(Ds(b.defaults(x,$,D),$,b.overrides(x,$))))})})}),{internals:ne(c),externals:ne(d)}},OE=(t,s)=>{const a={};return wt(s,c=>{_0(c).each(d=>{const h=DE(t,d.pname);a[d.name]=b=>{const x=yi("Part: "+d.name+" in "+t,Dn(d.schema),b);return{...h,config:b,validated:x}}})}),a},DE=(t,s)=>({uiType:_C(),owner:t,name:s}),RE=(t,s,a)=>({uiType:_C(),owner:t,name:s,config:a,validated:{}}),VA=t=>xe(t,s=>s.fold(M.none,M.some,M.none,M.none).map(a=>cd(a.name,a.schema.concat([Wm(nb())]))).toArray()),ME=t=>tt(t,AE),A0=(t,s,a)=>HA(t,s,a),NE=(t,s,a)=>Dp(M.some(t),s,s.components,a),bt=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},kl=(t,s,a)=>bt(t,s,a).getOrDie("Could not find part: "+a),PE=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return wt(a,b=>{c[b]=ne(h.getByUid(d[b]))}),c},TC=(t,s)=>{const a=t.getSystem();return Vo(s.partUids,(c,d)=>ne(a.getByUid(c)))},sb=t=>vs(t.partUids),Eg=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return wt(a,b=>{c[b]=ne(h.getByUid(d[b]).getOrDie())}),c},kC=(t,s)=>{const a=ME(s);return Yo(tt(a,c=>({key:c,value:t+"-"+c})))},rb=t=>ia("partUids","partUids",Em(s=>kC(s.uid,t)),bl());var BE=Object.freeze({__proto__:null,generate:OE,generateOne:RE,schemas:VA,names:ME,substitutes:A0,components:NE,defaultUids:kC,defaultUidsSchema:rb,getAllParts:TC,getAllPartNames:sb,getPart:bt,getPartOrDie:kl,getParts:PE,getPartsOrDie:Eg});const zA=(t,s)=>(t.length>0?[cd("parts",t)]:[]).concat([rt("uid"),Be("dom",{}),Be("components",[]),Wm("originalSpec"),Be("debug.sketcher",{})]).concat(s),AC=(t,s,a,c,d)=>{const h=zA(c,d);return yi(t+" [SpecSchema]",Bi(h.concat(s)),a)},ab=(t,s,a,c)=>{const d=LE(c),h=AC(t,s,d,[],[]);return a(h,d)},uh=(t,s,a,c,d)=>{const h=LE(d),b=VA(a),x=rb(a),T=AC(t,s,h,b,[x]),D=A0(t,T,a),P=NE(t,T,D.internals());return c(T,P,h,D.externals())},IE=t=>po(t,"uid"),LE=t=>IE(t)?t:{...t,uid:N1("uid")},UA=t=>t.uid!==void 0,OC=Bi([rt("name"),rt("factory"),rt("configFields"),Be("apis",{}),Be("extraApis",{})]),WA=Bi([rt("name"),rt("factory"),rt("configFields"),rt("partFields"),Be("apis",{}),Be("extraApis",{})]),il=t=>{const s=yi("Sketcher for "+t.name,OC,t),a=h=>ab(s.name,s.configFields,s.factory,h),c=Vo(s.apis,vv),d=Vo(s.extraApis,(h,b)=>sp(h,b));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},Ki=t=>{const s=yi("Sketcher for "+t.name,WA,t),a=b=>uh(s.name,s.configFields,s.partFields,s.factory,b),c=OE(s.name,s.partFields),d=Vo(s.apis,vv),h=Vo(s.extraApis,(b,x)=>sp(b,x));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...h}},Rp=t=>ei("input")(t)&&pn(t,"type")!=="radio"||ei("textarea")(t);var ZA=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const DC=[rt("find")],Ro=li({fields:DC,name:"composing",apis:ZA}),jA=["input","button","textarea","select"],qA=(t,s,a)=>{(s.disabled()?ib:RC)(t,s)},FE=(t,s)=>s.useNative===!0&&eo(jA,oa(t.element)),BM=t=>wc(t.element,"disabled"),rf=t=>{qt(t.element,"disabled","disabled")},O0=t=>{H(t.element,"disabled")},GA=t=>pn(t.element,"aria-disabled")==="true",KA=t=>{qt(t.element,"aria-disabled","true")},$E=t=>{qt(t.element,"aria-disabled","false")},ib=(t,s,a)=>{s.disableClass.each(d=>{$s(t.element,d)}),(FE(t,s)?rf:KA)(t),s.onDisabled(t)},RC=(t,s,a)=>{s.disableClass.each(d=>{mr(t.element,d)}),(FE(t,s)?O0:$E)(t),s.onEnabled(t)},HE=(t,s)=>FE(t,s)?BM(t):GA(t);var Mp=Object.freeze({__proto__:null,enable:RC,disable:ib,isDisabled:HE,onLoad:qA,set:(t,s,a,c)=>{(c?ib:RC)(t,s)}}),VE=Object.freeze({__proto__:null,exhibit:(t,s)=>Yc({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Fs([qS(Jl(),(a,c)=>HE(a,t)),tw(t,s,qA)])}),YA=[fr("disabled",Me),Be("useNative",!0),Bo("disableClass"),ko("onDisabled"),ko("onEnabled")];const l=li({fields:YA,name:"disabling",active:VE,apis:Mp}),f=(t,s,a,c)=>{const d=di(t.element,"."+s.highlightClass);wt(d,h=>{ms(c,x=>Uo(x.element,h))||(mr(h,s.highlightClass),t.getSystem().getByDom(h).each(x=>{s.onDehighlight(t,x),ao(x,Qh())}))})},v=(t,s,a)=>f(t,s,a,[]),C=(t,s,a,c)=>{Ce(t,s,a,c)&&(mr(c.element,s.highlightClass),s.onDehighlight(t,c),ao(c,Qh()))},A=(t,s,a,c)=>{f(t,s,a,[c]),Ce(t,s,a,c)||($s(c.element,s.highlightClass),s.onHighlight(t,c),ao(c,Mm()))},B=(t,s,a)=>{Vt(t,s).each(c=>{A(t,s,a,c)})},U=(t,s,a)=>{Lt(t,s).each(c=>{A(t,s,a,c)})},J=(t,s,a,c)=>{Ct(t,s,a,c).fold(d=>{throw d},d=>{A(t,s,a,d)})},ae=(t,s,a,c)=>{const d=Tt(t,s);et(d,c).each(b=>{A(t,s,a,b)})},Ce=(t,s,a,c)=>Jc(c.element,s.highlightClass),Fe=(t,s,a)=>tr(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),Ct=(t,s,a,c)=>{const d=di(t.element,"."+s.itemClass);return M.from(d[c]).fold(()=>Yn.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},Vt=(t,s,a)=>tr(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),Lt=(t,s,a)=>{const c=di(t.element,"."+s.itemClass);return(c.length>0?M.some(c[c.length-1]):M.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},Mt=(t,s,a,c)=>{const d=di(t.element,"."+s.itemClass);return kt(d,b=>Jc(b,s.highlightClass)).bind(b=>{const x=lg(b,c,0,d.length-1);return t.getSystem().getByDom(d[x]).toOptional()})},un=(t,s,a)=>Mt(t,s,a,-1),ht=(t,s,a)=>Mt(t,s,a,1),Tt=(t,s,a)=>{const c=di(t.element,"."+s.itemClass);return Ja(tt(c,d=>t.getSystem().getByDom(d).toOptional()))};var Nn=Object.freeze({__proto__:null,dehighlightAll:v,dehighlight:C,highlight:A,highlightFirst:B,highlightLast:U,highlightAt:J,highlightBy:ae,isHighlighted:Ce,getHighlighted:Fe,getFirst:Vt,getLast:Lt,getPrevious:un,getNext:ht,getCandidates:Tt}),Ln=[rt("highlightClass"),rt("itemClass"),ko("onHighlight"),ko("onDehighlight")];const bn=li({fields:Ln,name:"highlighting",apis:Nn}),ir=[8],ds=[9],Br=[13],Al=[27],ki=[32],_g=[37],Tg=[38],as=[39],qa=[40],fc=(t,s,a)=>{const c=To(t.slice(0,s)),d=To(t.slice(s+1));return et(c.concat(d),a)},Lu=(t,s,a)=>{const c=To(t.slice(0,s));return et(c,a)},Ol=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return et(d.concat(c),a)},Np=(t,s,a)=>{const c=t.slice(s+1);return et(c,a)},Qn=t=>s=>{const a=s.raw;return eo(t,a.which)},Dl=t=>s=>_o(t,a=>a(s)),Fu=t=>t.raw.shiftKey===!0,af=t=>t.raw.ctrlKey===!0,Sa=$e(Fu),Io=(t,s)=>({matches:t,classification:s}),NC=(t,s)=>et(t,c=>c.matches(s)).map(c=>c.classification),PC=(t,s,a)=>{s.exists(d=>a.exists(h=>Uo(h,d)))||_n(t,Jh(),{prevFocus:s,newFocus:a})},D0=()=>{const t=a=>uc(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const h=t(a);PC(a,d,h)}}},zE=()=>{const t=a=>bn.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(ce,b=>{bn.highlight(a,b)});const h=t(a);PC(a,d,h)}}};var tm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(tm||(tm={}));const kg=(t,s,a,c,d)=>{const h=()=>t.concat([Be("focusManager",D0()),Oc("focusInside","onFocus",qh(D=>eo(["onFocus","onEnterOrSpace","onApi"],D)?Yn.value(D):Yn.error("Invalid value for focusInside"))),ys("handler",T),ys("state",s),ys("sendFocusIn",d)]),b=(D,P,$,G,Y)=>{const se=$(D,P,G,Y);return NC(se,P.event).bind(ie=>ie(D,P,G,Y))},T={schema:h,processKey:b,toEvents:(D,P)=>{const $=D.focusInside!==tm.OnFocusMode?M.none():d(D).map(se=>it(dd(),(ie,Ne)=>{se(ie,D,P),Ne.stop()})),G=(se,ie)=>{const Ne=Qn(ki.concat(Br))(ie.event);D.focusInside===tm.OnEnterOrSpaceMode&&Ne&&Ou(se,ie)&&d(D).each(he=>{he(se,D,P),ie.stop()})},Y=[it(Du(),(se,ie)=>{b(se,ie,a,D,P).fold(()=>{G(se,ie)},Ne=>{ie.stop()})}),it(b1(),(se,ie)=>{b(se,ie,c,D,P).each(Ne=>{ie.stop()})})];return Fs($.toArray().concat(Y))}};return T},Pp=t=>{const s=[Bo("onEscape"),Bo("onEnter"),Be("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Be("firstTabstop",0),Be("useTabstopAt",Pe),Bo("visibilitySelector")].concat([t]),a=(he,ke)=>{const Ae=he.visibilitySelector.bind(st=>Nu(ke,st)).getOr(ke);return xs(Ae)>0},c=(he,ke)=>{const Ae=di(he.element,ke.selector),st=uo(Ae,Ke=>a(ke,Ke));return M.from(st[ke.firstTabstop])},d=(he,ke)=>ke.focusManager.get(he).bind(Ae=>Nu(Ae,ke.selector)),h=(he,ke)=>a(he,ke)&&he.useTabstopAt(ke),b=(he,ke,Ae)=>{c(he,ke).each(st=>{ke.focusManager.set(he,st)})},x=(he,ke,Ae,st,Ke)=>Ke(ke,Ae,Ft=>h(st,Ft)).fold(()=>st.cyclic?M.some(!0):M.none(),Ft=>(st.focusManager.set(he,Ft),M.some(!0))),T=(he,ke,Ae,st)=>{const Ke=di(he.element,Ae.selector);return d(he,Ae).bind(Ft=>kt(Ke,Qt(Uo,Ft)).bind(Qe=>x(he,Ke,Qe,Ae,st)))},D=(he,ke,Ae)=>{const st=Ae.cyclic?fc:Lu;return T(he,ke,Ae,st)},P=(he,ke,Ae)=>{const st=Ae.cyclic?Ol:Np;return T(he,ke,Ae,st)},$=he=>ec(he).bind(du).exists(ke=>Uo(ke,he)),G=(he,ke,Ae)=>d(he,Ae).filter(st=>!Ae.useTabstopAt(st)).bind(st=>($(st)?D:P)(he,ke,Ae)),Y=(he,ke,Ae)=>Ae.onEnter.bind(st=>st(he,ke)),se=(he,ke,Ae)=>Ae.onEscape.bind(st=>st(he,ke)),ie=ne([Io(Dl([Fu,Qn(ds)]),D),Io(Qn(ds),P),Io(Dl([Sa,Qn(Br)]),Y)]),Ne=ne([Io(Qn(Al),se),Io(Qn(ds),G)]);return kg(s,Gi.init,ie,Ne,()=>M.some(b))};var s7=Pp(Lo("cyclic",Me)),r7=Pp(Lo("cyclic",Pe));const BC=(t,s,a)=>(S1(t,a,Jl()),M.some(!0)),R0=(t,s,a)=>Rp(a)&&Qn(ki)(s.event)?M.none():BC(t,s,a),cb=(t,s)=>M.some(!0),XA=[Be("execute",R0),Be("useSpace",!1),Be("useEnter",!0),Be("useControlEnter",!1),Be("useDown",!1)],FM=(t,s,a)=>a.execute(t,s,t.element),$M=(t,s,a,c)=>{const d=a.useSpace&&!Rp(t.element)?ki:[],h=a.useEnter?Br:[],b=a.useDown?qa:[],x=d.concat(h).concat(b);return[Io(Qn(x),FM)].concat(a.useControlEnter?[Io(Dl([af,Qn(Br)]),FM)]:[])},a7=(t,s,a,c)=>a.useSpace&&!Rp(t.element)?[Io(Qn(ki),cb)]:[];var HM=kg(XA,Gi.init,$M,a7,()=>M.none());const JA=()=>{const t=ts();return Xc({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var i7=Object.freeze({__proto__:null,flatgrid:JA,init:t=>t.state(t)});const VM=t=>(s,a,c,d)=>{const h=t(s.element);return IC(h,s,a,c,d)},QA=(t,s)=>{const a=Ei(t,s);return VM(a)},eO=(t,s)=>{const a=Ei(s,t);return VM(a)},tO=t=>(s,a,c,d)=>IC(t,s,a,c,d),IC=(t,s,a,c,d)=>c.focusManager.get(s).bind(b=>t(s.element,b,c,d)).map(b=>(c.focusManager.set(s,b),!0)),UE=tO,zM=tO,nO=tO,UM=t=>t.offsetWidth<=0&&t.offsetHeight<=0,WM=t=>!UM(t.dom),c7=(t,s)=>kt(t,s).map(a=>({index:a,candidates:t})),$u=(t,s,a)=>{const c=b=>Uo(b,s),d=di(t,a),h=uo(d,WM);return c7(h,c)},ZM=(t,s)=>kt(t,a=>Uo(s,a)),jM=(t,s,a,c)=>{const d=Math.floor(s/a),h=s%a;return c(d,h).bind(b=>{const x=b.row*a+b.column;return x>=0&&x<t.length?M.some(t[x]):M.none()})},qM=(t,s,a,c,d)=>jM(t,s,c,(h,b)=>{const T=h===a-1?t.length-h*c:c,D=lg(b,d,0,T-1);return M.some({row:h,column:D})}),GM=(t,s,a,c,d)=>jM(t,s,c,(h,b)=>{const x=lg(h,d,0,a-1),D=x===a-1?t.length-x*c:c,P=nl(b,0,D-1);return M.some({row:x,column:P})}),l7=(t,s,a,c)=>qM(t,s,a,c,1),M0=(t,s,a,c)=>qM(t,s,a,c,-1),oO=(t,s,a,c)=>GM(t,s,a,c,-1),u7=(t,s,a,c)=>GM(t,s,a,c,1),sO=[rt("selector"),Be("execute",R0),Mc("onEscape"),Be("captureTab",!1),pv()],WE=(t,s,a)=>{tr(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},rO=(t,s)=>s.focusManager.get(t).bind(a=>Nu(a,s.selector)),d7=(t,s,a,c)=>rO(t,a).bind(d=>a.execute(t,s,d)),ZE=t=>(s,a,c,d)=>$u(s,a,c.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),KM=(t,s,a)=>a.captureTab?M.some(!0):M.none(),f7=(t,s,a)=>a.onEscape(t,s),YM=ZE(M0),XM=ZE(l7),m7=ZE(oO),JM=ZE(u7),jE=ne([Io(Qn(_g),QA(YM,XM)),Io(Qn(as),eO(YM,XM)),Io(Qn(Tg),UE(m7)),Io(Qn(qa),zM(JM)),Io(Dl([Fu,Qn(ds)]),KM),Io(Dl([Sa,Qn(ds)]),KM),Io(Qn(ki.concat(Br)),d7)]),h7=ne([Io(Qn(Al),f7),Io(Qn(ki),cb)]);var g7=kg(sO,JA,jE,h7,()=>M.some(WE));const QM=(t,s,a,c,d)=>{const h=x=>oa(x)==="button"&&pn(x,"disabled")==="disabled",b=(x,T,D)=>d(x,T,c,0,D.length-1,D[T],P=>h(D[P])?b(x,P,D):M.from(D[P]));return $u(t,a,s).bind(x=>{const T=x.index,D=x.candidates;return b(T,T,D)})},eN=(t,s,a,c)=>QM(t,s,a,c,(d,h,b,x,T,D,P)=>{const $=nl(h+b,x,T);return $===d?M.from(D):P($)}),Ag=(t,s,a,c)=>QM(t,s,a,c,(d,h,b,x,T,D,P)=>{const $=lg(h,b,x,T);return $===d?M.none():P($)}),tN=[rt("selector"),Be("getInitial",M.none),Be("execute",R0),Mc("onEscape"),Be("executeOnMove",!1),Be("allowVertical",!0),Be("allowHorizontal",!0),Be("cycles",!0)],p7=(t,s)=>s.focusManager.get(t).bind(a=>Nu(a,s.selector)),LC=(t,s,a)=>p7(t,a).bind(c=>a.execute(t,s,c)),b7=(t,s,a)=>{s.getInitial(t).orThunk(()=>tr(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},aO=(t,s,a)=>(a.cycles?Ag:eN)(t,a.selector,s,-1),iO=(t,s,a)=>(a.cycles?Ag:eN)(t,a.selector,s,1),cO=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?LC(s,a,c):M.some(!0)),nN=(t,s,a)=>a.onEscape(t,s),oN=(t,s,a,c)=>{const d=[...a.allowHorizontal?_g:[]].concat(a.allowVertical?Tg:[]),h=[...a.allowHorizontal?as:[]].concat(a.allowVertical?qa:[]);return[Io(Qn(d),cO(QA(aO,iO))),Io(Qn(h),cO(eO(aO,iO))),Io(Qn(Br),LC),Io(Qn(ki),LC)]},v7=ne([Io(Qn(ki),cb),Io(Qn(Al),nN)]);var y7=kg(tN,Gi.init,oN,v7,()=>M.some(b7));const qE=(t,s,a)=>M.from(t[s]).bind(c=>M.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),GE=(t,s,a,c)=>{const h=t[s].length,b=lg(a,c,0,h-1);return qE(t,s,b)},sN=(t,s,a,c)=>{const d=lg(a,c,0,t.length-1),h=t[d].length,b=nl(s,0,h-1);return qE(t,d,b)},FC=(t,s,a,c)=>{const h=t[s].length,b=nl(a+c,0,h-1);return qE(t,s,b)},rN=(t,s,a,c)=>{const d=nl(a+c,0,t.length-1),h=t[d].length,b=nl(s,0,h-1);return qE(t,d,b)},aN=(t,s,a)=>GE(t,s,a,1),cl=(t,s,a)=>GE(t,s,a,-1),w7=(t,s,a)=>sN(t,a,s,-1),iN=(t,s,a)=>sN(t,a,s,1),cN=(t,s,a)=>FC(t,s,a,-1),C7=(t,s,a)=>FC(t,s,a,1),lN=(t,s,a)=>rN(t,a,s,-1),uN=(t,s,a)=>rN(t,a,s,1),S7=[cd("selectors",[rt("row"),rt("cell")]),Be("cycles",!0),Be("previousSelector",M.none),Be("execute",R0)],x7=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return tr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},E7=(t,s,a)=>uc(t.element).bind(c=>a.execute(t,s,c)),_7=(t,s)=>tt(t,a=>di(a,s.selectors.cell)),$C=(t,s)=>(a,c,d)=>{const h=d.cycles?t:s;return Nu(c,d.selectors.row).bind(b=>{const x=di(b,d.selectors.cell);return ZM(x,c).bind(T=>{const D=di(a,d.selectors.row);return ZM(D,b).bind(P=>{const $=_7(D,d);return h($,P,T).map(G=>G.cell)})})})},dN=$C(cl,cN),fN=$C(aN,C7),mN=$C(w7,lN),hN=$C(iN,uN),gN=ne([Io(Qn(_g),QA(dN,fN)),Io(Qn(as),eO(dN,fN)),Io(Qn(Tg),UE(mN)),Io(Qn(qa),zM(hN)),Io(Qn(ki.concat(Br)),E7)]),T7=ne([Io(Qn(ki),cb)]);var k7=kg(S7,Gi.init,gN,T7,()=>M.some(x7));const A7=[rt("selector"),Be("execute",R0),Be("moveOnTab",!1)],pN=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),bN=(t,s,a)=>{tr(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},lO=(t,s,a)=>Ag(t,a.selector,s,-1),Og=(t,s,a)=>Ag(t,a.selector,s,1),vN=(t,s,a,c)=>a.moveOnTab?nO(lO)(t,s,a,c):M.none(),yN=(t,s,a,c)=>a.moveOnTab?nO(Og)(t,s,a,c):M.none(),wN=ne([Io(Qn(Tg),nO(lO)),Io(Qn(qa),nO(Og)),Io(Dl([Fu,Qn(ds)]),vN),Io(Dl([Sa,Qn(ds)]),yN),Io(Qn(Br),pN),Io(Qn(ki),pN)]),O7=ne([Io(Qn(ki),cb)]);var N0=kg(A7,Gi.init,wN,O7,()=>M.some(bN));const D7=[Mc("onSpace"),Mc("onEnter"),Mc("onShiftEnter"),Mc("onLeft"),Mc("onRight"),Mc("onTab"),Mc("onShiftTab"),Mc("onUp"),Mc("onDown"),Mc("onEscape"),Be("stopSpaceKeyup",!1),Bo("focusIn")],R7=(t,s,a)=>[Io(Qn(ki),a.onSpace),Io(Dl([Sa,Qn(Br)]),a.onEnter),Io(Dl([Fu,Qn(Br)]),a.onShiftEnter),Io(Dl([Fu,Qn(ds)]),a.onShiftTab),Io(Dl([Sa,Qn(ds)]),a.onTab),Io(Qn(Tg),a.onUp),Io(Qn(qa),a.onDown),Io(Qn(_g),a.onLeft),Io(Qn(as),a.onRight),Io(Qn(ki),a.onSpace)],CN=(t,s,a)=>[...a.stopSpaceKeyup?[Io(Qn(ki),cb)]:[],Io(Qn(Al),a.onEscape)];var M7=kg(D7,Gi.init,R7,CN,t=>t.focusIn);const N7=s7.schema(),P7=r7.schema(),SN=y7.schema(),uO=g7.schema(),dO=k7.schema(),B7=HM.schema(),Bp=N0.schema(),xN=M7.schema();var EN=Object.freeze({__proto__:null,acyclic:N7,cyclic:P7,flow:SN,flatgrid:uO,matrix:dO,execution:B7,menu:Bp,special:xN});const I7=t=>Hr(t,"setGridSize"),En=XS({branchKey:"mode",branches:EN,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{I7(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:i7}),P0=(t,s)=>{eh(()=>{uC(t,s,()=>tt(s,t.getSystem().build))},t.element)},B0=(t,s)=>{eh(()=>{a0(t,s,()=>cc(t.element,s,t.getSystem().buildOrPatch))},t.element)},_N=(t,s,a,c)=>{G1(s);const d=Ow(t.element,a,c,t.getSystem().buildOrPatch);lC(t,d),t.syncComponents()},HC=(t,s,a)=>{const c=t.getSystem().build(a);vE(t,c,s)},Ip=(t,s,a,c)=>{Xf(s),HC(t,(d,h)=>Fh(d,h,a),c)},Lp=(t,s,a,c)=>(s.reuseDom?B0:P0)(t,c),L7=(t,s,a,c)=>{HC(t,bi,c)},F7=(t,s,a,c)=>{HC(t,Ul,c)},TN=(t,s,a,c)=>{const d=cf(t);et(d,b=>Uo(c.element,b.element)).each(Xf)},cf=(t,s)=>t.components(),KE=(t,s,a,c,d)=>{const h=cf(t);return M.from(h[c]).map(b=>(d.fold(()=>Xf(b),x=>{(s.reuseDom?_N:Ip)(t,b,c,x)}),b))};var kN=Object.freeze({__proto__:null,append:L7,prepend:F7,remove:TN,replaceAt:KE,replaceBy:(t,s,a,c,d)=>{const h=cf(t);return kt(h,c).bind(b=>KE(t,s,a,b,d))},set:Lp,contents:cf});const zn=li({fields:[Mr("reuseDom",!0)],name:"replacing",apis:kN}),AN=(t,s)=>{const a=Fs(s);return li({fields:[rt("enabled")],name:t,active:{events:ne(a)}})},no=(t,s)=>{const a=AN(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ne({}),initialConfig:{},state:Gi}}},fO=(t,s)=>{s.ignore||(Sl(t.element),s.onFocus(t))};var $7=Object.freeze({__proto__:null,focus:fO,blur:(t,s)=>{s.ignore||Bv(t.element)},isFocused:t=>I1(t.element)}),YE=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Yc(a)},events:t=>Fs([it(dd(),(s,a)=>{fO(s,t),a.stop()})].concat(t.stopMousedown?[it(Er(),(s,a)=>{a.event.prevent()})]:[]))}),DN=[ko("onFocus"),Be("stopMousedown",!1),Be("ignore",!1)];const Fn=li({fields:DN,name:"focusing",active:YE,apis:$7}),RN=t=>({init:()=>{const a=mn(t);return{get:()=>a.get(),set:x=>a.set(x),clear:()=>a.set(t),readState:()=>a.get()}}}),MN=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},NN=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?$s(t.element,c):mr(t.element,c)})},I0=(t,s,a,c)=>{const d=a.get();a.set(c),NN(t,s,a),MN(t,s,a),d!==c&&s.onToggled(t,c)},PN=(t,s,a)=>{I0(t,s,a,!a.get())},hO=(t,s,a)=>{I0(t,s,a,!0)},H7=(t,s,a)=>{I0(t,s,a,!1)},V7=(t,s,a)=>a.get(),BN=(t,s,a)=>{I0(t,s,a,s.selected)};var z7=Object.freeze({__proto__:null,onLoad:BN,toggle:PN,isOn:V7,on:hO,off:H7,set:I0}),W7=Object.freeze({__proto__:null,exhibit:()=>Yc({}),events:(t,s)=>{const a=_1(t,s,PN),c=tw(t,s,BN);return Fs(dt([t.toggleOnExecute?[a]:[],[c]]))}});const IN=(t,s,a)=>{qt(t.element,"aria-pressed",a),s.syncWithExpanded&&L0(t,s,a)},VC=(t,s,a)=>{qt(t.element,"aria-selected",a)},Z7=(t,s,a)=>{qt(t.element,"aria-checked",a)},L0=(t,s,a)=>{qt(t.element,"aria-expanded",a)};var gO=[Be("selected",!1),Bo("toggleClass"),Be("toggleOnExecute",!0),ko("onToggled"),Oc("aria",{mode:"none"},ba("mode",{pressed:[Be("syncWithExpanded",!1),ys("update",IN)],checked:[ys("update",Z7)],expanded:[ys("update",L0)],selected:[ys("update",VC)],none:[ys("update",ce)]}))];const lo=li({fields:gO,name:"toggling",active:W7,apis:z7,state:RN(!1)}),pO=()=>{const t=(s,a)=>{a.stop(),Nm(s)};return[it(Yh(),t),it(fd(),t),hd(Yl()),hd(Er())]},XE=t=>{const s=a=>Ru((c,d)=>{a(c),d.stop()});return Fs(dt([t.map(s).toArray(),pO()]))},LN="alloy.item-hover",bO="alloy.item-focus",FN="alloy.item-toggled",vO=t=>{(uc(t.element).isNone()||Fn.isFocused(t))&&(Fn.isFocused(t)||Fn.focus(t),_n(t,LN,{item:t}))},$N=t=>{_n(t,bO,{item:t})},j7=(t,s)=>{_n(t,FN,{item:t,state:s})},yO=ne(LN),JE=ne(bO),wO=ne(FN),CO=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Kt),q7=(t,s)=>({aria:{mode:s?"selected":"checked"},...Oi(t,(a,c)=>c!=="exclusive"),onToggled:(a,c)=>{Ie(t.onToggled)&&t.onToggled(a,c),j7(a,c)}}),G7=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:CO(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:su.augment(t.itemBehaviours,[t.toggling.fold(lo.revoke,s=>lo.config(q7(s,t.role.exists(a=>a==="option")))),Fn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{$N(s)}}),En.config({mode:"execution"}),Xt.config({store:{mode:"memory",initialValue:t.data}}),no("item-type-events",[...pO(),it(Kc(),vO),it(v1(),Fn.focus)])]),components:t.components,eventOrder:t.eventOrder}),K7=[rt("data"),rt("components"),rt("dom"),Be("hasSubmenu",!1),Bo("toggling"),Bo("role"),su.field("itemBehaviours",[lo,Fn,En,Xt]),Be("ignoreFocus",!1),Be("domModification",{}),ys("builder",G7),Be("eventOrder",{})],Y7=t=>({dom:t.dom,components:t.components,events:Fs([Jy(v1())])}),HN=[rt("dom"),rt("components"),ys("builder",Y7)],QE=ne("item-widget"),SO=ne([Ti({name:"widget",overrides:t=>({behaviours:xt([Xt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ce}})])})})]),X7=t=>{const s=A0(QE(),t,SO()),a=NE(QE(),t,s.internals()),c=h=>bt(h,t,"widget").map(b=>(En.focusIn(b),b)),d=(h,b)=>Rp(b.event.target)?M.none():(t.autofocus&&b.setSource(h.element),M.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Fs([Ru((h,b)=>{c(h).each(x=>{b.stop()})}),it(Kc(),vO),it(v1(),(h,b)=>{t.autofocus?c(h):Fn.focus(h)})]),behaviours:su.augment(t.widgetBehaviours,[Xt.config({store:{mode:"memory",initialValue:t.data}}),Fn.config({ignore:t.ignoreFocus,onFocus:h=>{$N(h)}}),En.config({mode:"special",focusIn:t.autofocus?h=>{c(h)}:Ks(),onLeft:d,onRight:d,onEscape:(h,b)=>!Fn.isFocused(h)&&!t.autofocus?(Fn.focus(h),M.some(!0)):(t.autofocus&&b.setSource(h.element),M.none())})])}},J7=[rt("uid"),rt("data"),rt("components"),rt("dom"),Be("autofocus",!1),Be("ignoreFocus",!1),su.field("widgetBehaviours",[Xt,Fn,En]),Be("domModification",{}),rb(SO()),ys("builder",X7)],Q7=ba("type",{widget:J7,item:K7,separator:HN}),e8=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),t8=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),VN=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),n8=ne([k0({factory:{sketch:t=>{const s=yi("menu.spec item",Q7,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>po(s,"uid")?s:{...s,uid:N1("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),o8=ne([ca("role"),rt("value"),rt("items"),rt("dom"),rt("components"),Be("eventOrder",{}),Za("menuBehaviours",[bn,Xt,Ro,En]),Oc("movement",{mode:"menu",moveOnTab:!0},ba("mode",{grid:[pv(),ys("config",e8)],matrix:[ys("config",t8),rt("rowSelector"),Be("previousSelector",M.none)],menu:[Be("moveOnTab",!0),ys("config",VN)]})),yw(),Be("fakeFocus",!1),Be("focusManager",D0()),ko("onHighlight"),ko("onDehighlight"),Be("showMenuRole",!0)]),zN=ne("alloy.menu-focus"),s8=(t,s)=>{const a=di(t.element,'[role="menuitemradio"][aria-checked="true"]');wt(a,c=>{Uo(c,s.element)||t.getSystem().getByDom(c).each(d=>{lo.off(d)})})},r8=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ja(t.menuBehaviours,[bn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Xt.config({store:{mode:"memory",initialValue:t.value}}),Ro.config({find:M.some}),En.config(t.movement.config(t,t.movement))]),events:Fs([it(JE(),(d,h)=>{const b=h.event;d.getSystem().getByDom(b.target).each(x=>{bn.highlight(d,x),h.stop(),_n(d,zN(),{menu:d,item:x})})}),it(yO(),(d,h)=>{const b=h.event.item;bn.highlight(d,b)}),it(wO(),(d,h)=>{const{item:b,state:x}=h.event;x&&pn(b.element,"role")==="menuitemradio"&&s8(d,b)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),wd=Ki({name:"Menu",configFields:o8(),partFields:n8(),factory:r8}),a8=t=>vc(t,(s,a)=>({k:s,v:a})),UN=(t,s,a,c)=>At(a,c).bind(d=>At(t,d).bind(h=>{const b=UN(t,s,a,h);return M.some([h].concat(b))})).getOr([]),lb=(t,s)=>{const a={};Cs(t,(b,x)=>{wt(b,T=>{a[T]=x})});const c=s,d=a8(s),h=Vo(d,(b,x)=>[x].concat(UN(a,c,d,x)));return Vo(a,b=>At(h,b).getOr([b]))},WN=()=>{const t=mn({}),s=mn({}),a=mn({}),c=ts(),d=mn({}),h=()=>{t.set({}),s.set({}),a.set({}),c.clear()},b=()=>c.get().isNone(),x=(Ke,Ft)=>{s.set({...s.get(),[Ke]:{type:"prepared",menu:Ft}})},T=(Ke,Ft,Jt,Qe)=>{c.set(Ke),t.set(Jt),s.set(Ft),d.set(Qe);const ln=lb(Qe,Jt);a.set(ln)},D=Ke=>Go(t.get(),(Ft,Jt)=>Ft===Ke),P=(Ke,Ft,Jt)=>ie(Ke).bind(Qe=>D(Ke).bind(ln=>Ft(ln).map(It=>({triggeredMenu:Qe,triggeringItem:It,triggeringPath:Jt})))),$=(Ke,Ft)=>{const Jt=uo(he(Ke).toArray(),Qe=>ie(Qe).isSome());return At(a.get(),Ke).bind(Qe=>{const ln=To(Jt.concat(Qe)),It=xe(ln,(fn,bo)=>P(fn,Ft,ln.slice(0,bo+1)).fold(()=>Vr(c.get(),fn)?[]:[M.none()],Us=>[M.some(Us)]));return Wo(It)})},G=Ke=>At(t.get(),Ke).map(Ft=>{const Jt=At(a.get(),Ke).getOr([]);return[Ft].concat(Jt)}),Y=Ke=>At(a.get(),Ke).bind(Ft=>Ft.length>1?M.some(Ft.slice(1)):M.none()),se=Ke=>At(a.get(),Ke),ie=Ke=>Ne(Ke).bind(ZN),Ne=Ke=>At(s.get(),Ke),he=Ke=>At(t.get(),Ke);return{setMenuBuilt:x,setContents:T,expand:G,refresh:se,collapse:Y,lookupMenu:Ne,lookupItem:he,otherMenus:Ke=>{const Ft=d.get();return Zt(vs(Ft),Ke)},getPrimary:()=>c.get().bind(ie),getMenus:()=>s.get(),clear:h,isClear:b,getTriggeringPath:$}},ZN=t=>t.type==="prepared"?M.some(t.menu):M.none(),Dg={init:WN,extractPreparedMenu:ZN},jN=tn("tiered-menu-item-highlight"),qN=tn("tiered-menu-item-dehighlight");var Zr;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Zr||(Zr={}));const GN=(t,s)=>{const a=ts(),c=(gt,$t,$n)=>Vo($n,(Mn,xn)=>{const Kn=()=>wd.sketch({...Mn,value:xn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(ks,Qo)=>{_n(ks,jN,{menuComp:ks,itemComp:Qo})},onDehighlight:(ks,Qo)=>{_n(ks,qN,{menuComp:ks,itemComp:Qo})},focusManager:t.fakeFocus?zE():D0()});return xn===$t?{type:"prepared",menu:gt.getSystem().build(Kn())}:{type:"notbuilt",nbMenu:Kn}}),d=Dg.init(),h=gt=>{const $t=c(gt,t.data.primary,t.data.menus),$n=T();return d.setContents(t.data.primary,$t,t.data.expansions,$n),d.getPrimary()},b=gt=>Xt.getValue(gt).value,x=(gt,$t,$n)=>bs($t,Mn=>{if(!Mn.getSystem().isConnected())return M.none();const xn=bn.getCandidates(Mn);return et(xn,Kn=>b(Kn)===$n)}),T=gt=>Vo(t.data.menus,($t,$n)=>xe($t.items,Mn=>Mn.type==="separator"?[]:[Mn.data.value])),D=bn.highlight,P=(gt,$t)=>{D(gt,$t),bn.getHighlighted($t).orThunk(()=>bn.getFirst($t)).each($n=>{t.fakeFocus?bn.highlight($t,$n):S1(gt,$n.element,v1())})},$=(gt,$t)=>Ja(tt($t,$n=>gt.lookupMenu($n).bind(Mn=>Mn.type==="prepared"?M.some(Mn.menu):M.none()))),G=(gt,$t,$n)=>{const Mn=$($t,$t.otherMenus($n));wt(Mn,xn=>{Qc(xn.element,[t.markers.backgroundMenu]),t.stayInDom||zn.remove(gt,xn)})},Y=gt=>a.get().getOrThunk(()=>{const $t={},$n=di(gt.element,`.${t.markers.item}`),Mn=uo($n,xn=>pn(xn,"aria-haspopup")==="true");return wt(Mn,xn=>{gt.getSystem().getByDom(xn).each(Kn=>{const ks=b(Kn);$t[ks]=Kn})}),a.set($t),$t}),se=(gt,$t)=>{const $n=Y(gt);Cs($n,(Mn,xn)=>{const Kn=eo($t,xn);qt(Mn.element,"aria-expanded",Kn)})},ie=(gt,$t,$n)=>M.from($n[0]).bind(Mn=>$t.lookupMenu(Mn).bind(xn=>{if(xn.type==="notbuilt")return M.none();{const Kn=xn.menu,ks=$($t,$n.slice(1));return wt(ks,Qo=>{$s(Qo.element,t.markers.backgroundMenu)}),en(Kn.element)||zn.append(gt,Cl(Kn)),Qc(Kn.element,[t.markers.backgroundMenu]),P(gt,Kn),G(gt,$t,$n),M.some(Kn)}}));let Ne;(function(gt){gt[gt.HighlightSubmenu=0]="HighlightSubmenu",gt[gt.HighlightParent=1]="HighlightParent"})(Ne||(Ne={}));const he=(gt,$t,$n)=>{if($n.type==="notbuilt"){const Mn=gt.getSystem().build($n.nbMenu());return d.setMenuBuilt($t,Mn),Mn}else return $n.menu},ke=(gt,$t,$n=Ne.HighlightSubmenu)=>{if($t.hasConfigured(l)&&l.isDisabled($t))return M.some($t);{const Mn=b($t);return d.expand(Mn).bind(xn=>(se(gt,xn),M.from(xn[0]).bind(Kn=>d.lookupMenu(Kn).bind(ks=>{const Qo=he(gt,Kn,ks);return en(Qo.element)||zn.append(gt,Cl(Qo)),t.onOpenSubmenu(gt,$t,Qo,To(xn)),$n===Ne.HighlightSubmenu?(bn.highlightFirst(Qo),ie(gt,d,xn)):(bn.dehighlightAll(Qo),M.some($t))}))))}},Ae=(gt,$t)=>{const $n=b($t);return d.collapse($n).bind(Mn=>(se(gt,Mn),ie(gt,d,Mn).map(xn=>(t.onCollapseMenu(gt,$t,xn),xn))))},st=(gt,$t)=>{const $n=b($t);return d.refresh($n).bind(Mn=>(se(gt,Mn),ie(gt,d,Mn)))},Ke=(gt,$t)=>Rp($t.element)?M.none():ke(gt,$t,Ne.HighlightSubmenu),Ft=(gt,$t)=>Rp($t.element)?M.none():Ae(gt,$t),Jt=(gt,$t)=>Ae(gt,$t).orThunk(()=>t.onEscape(gt,$t).map(()=>gt)),Qe=gt=>($t,$n)=>Nu($n.getSource(),`.${t.markers.item}`).bind(Mn=>$t.getSystem().getByDom(Mn).toOptional().bind(xn=>gt($t,xn).map(Pe))),ln=Fs([it(zN(),(gt,$t)=>{const $n=$t.event.item;d.lookupItem(b($n)).each(()=>{const Mn=$t.event.menu;bn.highlight(gt,Mn);const xn=b($t.event.item);d.refresh(xn).each(Kn=>G(gt,d,Kn))})}),Ru((gt,$t)=>{const $n=$t.event.target;gt.getSystem().getByDom($n).each(Mn=>{b(Mn).indexOf("collapse-item")===0&&Ae(gt,Mn),ke(gt,Mn,Ne.HighlightSubmenu).fold(()=>{t.onExecute(gt,Mn)},ce)})}),Gs((gt,$t)=>{h(gt).each($n=>{zn.append(gt,Cl($n)),t.onOpenMenu(gt,$n),t.highlightOnOpen===Zr.HighlightMenuAndItem?P(gt,$n):t.highlightOnOpen===Zr.HighlightJustMenu&&D(gt,$n)})}),it(jN,(gt,$t)=>{t.onHighlightItem(gt,$t.event.menuComp,$t.event.itemComp)}),it(qN,(gt,$t)=>{t.onDehighlightItem(gt,$t.event.menuComp,$t.event.itemComp)}),...t.navigateOnHover?[it(yO(),(gt,$t)=>{const $n=$t.event.item;st(gt,$n),ke(gt,$n,Ne.HighlightParent),t.onHover(gt,$n)})]:[]]),It=gt=>bn.getHighlighted(gt).bind(bn.getHighlighted),fn=gt=>{It(gt).each($t=>{Ae(gt,$t)})},bo=gt=>{d.getPrimary().each($t=>{P(gt,$t)})},Us=gt=>M.from(gt.components()[0]).filter($t=>pn($t.element,"role")==="menu"),dn={collapseMenu:fn,highlightPrimary:bo,repositionMenus:gt=>{d.getPrimary().bind($n=>It(gt).bind(Mn=>{const xn=b(Mn),Kn=Vc(d.getMenus()),ks=Ja(tt(Kn,Dg.extractPreparedMenu));return d.getTriggeringPath(xn,Qo=>x(gt,ks,Qo))}).map(Mn=>({primary:$n,triggeringPath:Mn}))).fold(()=>{Us(gt).each($n=>{t.onRepositionMenu(gt,$n,[])})},({primary:$n,triggeringPath:Mn})=>{t.onRepositionMenu(gt,$n,Mn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ja(t.tmenuBehaviours,[En.config({mode:"special",onRight:Qe(Ke),onLeft:Qe(Ft),onEscape:Qe(Jt),focusIn:(gt,$t)=>{d.getPrimary().each($n=>{S1(gt,$n.element,v1())})}}),bn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Ro.config({find:gt=>bn.getHighlighted(gt)}),zn.config({})]),eventOrder:t.eventOrder,apis:dn,events:ln}},KN=ne("collapse-item"),YN=(t,s,a)=>({primary:t,menus:s,expansions:a}),i8=(t,s)=>({primary:t,menus:oo(t,s),expansions:{}}),e_=t=>({value:tn(KN()),meta:{text:t}}),Fp=il({name:"TieredMenu",configFields:[gv("onExecute"),gv("onEscape"),Qd("onOpenMenu"),Qd("onOpenSubmenu"),ko("onRepositionMenu"),ko("onCollapseMenu"),Be("highlightOnOpen",Zr.HighlightMenuAndItem),cd("data",[rt("primary"),rt("menus"),rt("expansions")]),Be("fakeFocus",!1),ko("onHighlightItem"),ko("onDehighlightItem"),ko("onHover"),dp(),rt("dom"),Be("navigateOnHover",!0),Be("stayInDom",!1),Za("tmenuBehaviours",[En,bn,Ro,zn]),Be("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:GN,extraApis:{tieredData:YN,singleData:i8,collapseItem:e_}}),c8=(t,s,a,c,d)=>{const h=()=>t.lazySink(s),b=c.type==="horizontal"?{layouts:{onLtr:()=>Qm(),onRtl:()=>Pv()}}:{},x=D=>D.length===2,T=D=>x(D)?b:{};return Fp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Do.close(s),t.onEscape.map(D=>D(s)),M.some(!0)),onExecute:()=>M.some(!0),onOpenMenu:(D,P)=>{Hi.positionWithinBounds(h().getOrDie(),P,a,d())},onOpenSubmenu:(D,P,$,G)=>{const Y=h().getOrDie();Hi.position(Y,$,{anchor:{type:"submenu",item:P,...T(G)}})},onRepositionMenu:(D,P,$)=>{const G=h().getOrDie();Hi.positionWithinBounds(G,P,a,d()),wt($,Y=>{const se=T(Y.triggeringPath);Hi.position(G,Y.triggeredMenu,{anchor:{type:"submenu",item:Y.triggeringItem,...se}})})}})},l8=(t,s)=>{const a=(G,Y)=>t.getRelated(G).exists(ie=>dg(ie,Y)),c=(G,Y)=>{Do.setContent(G,Y)},d=(G,Y,se)=>{const ie=M.none;h(G,Y,se,ie)},h=(G,Y,se,ie)=>{const Ne=t.lazySink(G).getOrDie();Do.openWhileCloaked(G,Y,()=>Hi.positionWithinBounds(Ne,G,se,ie())),Xt.setValue(G,M.some({mode:"position",config:se,getBounds:ie}))},b=(G,Y,se)=>{x(G,Y,se,M.none)},x=(G,Y,se,ie)=>{const Ne=c8(t,G,Y,se,ie);Do.open(G,Ne),Xt.setValue(G,M.some({mode:"menu",menu:Ne}))},T=G=>{Do.isOpen(G)&&(Xt.setValue(G,M.none()),Do.close(G))},D=G=>Do.getState(G),P=G=>{Do.isOpen(G)&&Xt.getValue(G).each(Y=>{switch(Y.mode){case"menu":Do.getState(G).each(Fp.repositionMenus);break;case"position":const se=t.lazySink(G).getOrDie();Hi.positionWithinBounds(se,G,Y.config,Y.getBounds());break}})},$={setContent:c,showAt:d,showWithinBounds:h,showMenuAt:b,showMenuWithinBounds:x,hide:T,getContent:D,reposition:P,isOpen:Do.isOpen};return{uid:t.uid,dom:t.dom,behaviours:ja(t.inlineBehaviours,[Do.config({isPartOf:(G,Y,se)=>dg(Y,se)||a(G,se),getAttachPoint:G=>t.lazySink(G).getOrDie(),onOpen:G=>{t.onShow(G)},onClose:G=>{t.onHide(G)}}),Xt.config({store:{mode:"memory",initialValue:M.none()}}),Nc.config({channels:{...lh({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({})}),...pC({...t.fireRepositionEventInstead.map(G=>({fireEventInstead:{event:G.event}})).getOr({}),doReposition:P})}})]),eventOrder:t.eventOrder,apis:$}},nr=il({name:"InlineView",configFields:[rt("lazySink"),ko("onShow"),ko("onHide"),ku("onEscape"),Za("inlineBehaviours",[Do,Xt,Nc]),Bs("fireDismissalEventInstead",[Be("event",Rm())]),Bs("fireRepositionEventInstead",[Be("event",jy())]),Be("getRelated",M.none),Be("isExtraPart",Me),Be("eventOrder",M.none)],factory:l8,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var F0=tinymce.util.Tools.resolve("tinymce.util.Delay"),ub=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),XN=tinymce.util.Tools.resolve("tinymce.EditorManager"),db=tinymce.util.Tools.resolve("tinymce.Env"),Cd;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Cd||(Cd={}));var fb;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(fb||(fb={}));const Ns=t=>s=>s.options.get(t),zC=t=>s=>M.from(t(s)),JN=t=>{const s=db.deviceType.isPhone(),a=db.deviceType.isTablet()||s,c=t.options.register,d=b=>j(b)||b===!1,h=b=>j(b)||on(b);c("skin",{processor:b=>j(b)||b===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:h,default:ub.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:b=>j(b)||Ht(b),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:b=>Ht(b)||j(b)||be(b)?{value:b,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),to(9,b=>{c("toolbar"+(b+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:fb.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:b=>b==="both"||Ht(b),default:!db.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},QN=Ns("readonly"),UC=Ns("height"),xO=Ns("width"),mb=zC(Ns("min_width")),$0=zC(Ns("min_height")),WC=zC(Ns("max_width")),t_=zC(Ns("max_height")),eP=zC(Ns("style_formats")),tP=Ns("style_formats_merge"),nP=Ns("style_formats_autohide"),oP=Ns("content_langs"),n_=Ns("removed_menuitems"),hb=Ns("toolbar_mode"),EO=Ns("toolbar_groups"),ZC=Ns("toolbar_location"),u8=Ns("fixed_toolbar_container"),sP=Ns("fixed_toolbar_container_target"),rP=Ns("toolbar_persist"),aP=Ns("toolbar_sticky_offset"),iP=Ns("menubar"),jC=Ns("toolbar"),cP=Ns("file_picker_callback"),lP=Ns("file_picker_validator_handler"),o_=Ns("font_size_input_default_unit"),_O=Ns("file_picker_types"),TO=Ns("typeahead_urls"),uP=Ns("anchor_top"),s_=Ns("anchor_bottom"),dP=Ns("draggable_modal"),fP=Ns("statusbar"),mP=Ns("elementpath"),kO=Ns("branding"),hP=Ns("resize"),AO=Ns("paste_as_text"),r_=Ns("sidebar_show"),gP=Ns("promotion"),qC=Ns("help_accessibility"),pP=Ns("default_font_stack"),OO=t=>t.options.get("skin")===!1,a_=t=>t.options.get("menubar")!==!1,DO=t=>{const s=t.options.get("skin_url");if(OO(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return XN.baseURL+"/skins/ui/"+a}},i_=t=>M.from(t.options.get("skin_url")),bP=t=>t.options.get("line_height_formats").split(" "),GC=t=>{const s=jC(t),a=j(s),c=be(s)&&s.length>0;return!KC(t)&&(c||a||s===!0)},RO=t=>{const s=to(9,c=>t.options.get("toolbar"+(c+1))),a=uo(s,j);return Sn(a.length>0,a)},KC=t=>RO(t).fold(()=>{const s=jC(t);return Et(s,j)&&s.length>0},Pe),YC=t=>ZC(t)===fb.bottom,$p=t=>{var s;if(!t.inline)return M.none();const a=(s=u8(t))!==null&&s!==void 0?s:"";if(a.length>0)return tr(io(),a);const c=sP(t);return vt(c)?M.some(_e.fromDom(c)):M.none()},H0=t=>t.inline&&$p(t).isSome(),MO=t=>$p(t).getOrThunk(()=>gi(vr(_e.fromDom(t.getElement())))),XC=t=>t.inline&&!a_(t)&&!GC(t)&&!KC(t),gb=t=>(t.options.get("toolbar_sticky")||t.inline)&&!H0(t)&&!XC(t),Hp=t=>!H0(t)&&t.options.get("ui_mode")==="split",vP=t=>{const s=t.options.get("menu");return Vo(s,a=>({...a,items:a.items}))};var yP=Object.freeze({__proto__:null,get ToolbarMode(){return Cd},get ToolbarLocation(){return fb},register:JN,getSkinUrl:DO,getSkinUrlOption:i_,isReadOnly:QN,isSkinDisabled:OO,getHeightOption:UC,getWidthOption:xO,getMinWidthOption:mb,getMinHeightOption:$0,getMaxWidthOption:WC,getMaxHeightOption:t_,getUserStyleFormats:eP,shouldMergeStyleFormats:tP,shouldAutoHideStyleFormats:nP,getLineHeightFormats:bP,getContentLanguages:oP,getRemovedMenuItems:n_,isMenubarEnabled:a_,isMultipleToolbars:KC,isToolbarEnabled:GC,isToolbarPersist:rP,getMultipleToolbarsOption:RO,getUiContainer:MO,useFixedContainer:H0,isSplitUiMode:Hp,getToolbarMode:hb,isDraggableModal:dP,isDistractionFree:XC,isStickyToolbar:gb,getStickyToolbarOffset:aP,getToolbarLocation:ZC,isToolbarLocationBottom:YC,getToolbarGroups:EO,getMenus:vP,getMenubar:iP,getToolbar:jC,getFilePickerCallback:cP,getFilePickerTypes:_O,useTypeaheadUrls:TO,getAnchorTop:uP,getAnchorBottom:s_,getFilePickerValidatorHandler:lP,getFontSizeInputDefaultUnit:o_,useStatusBar:fP,useElementPath:mP,promotionEnabled:gP,useBranding:kO,getResize:hP,getPasteAsText:AO,getSidebarShow:r_,useHelpAccessibility:qC,getDefaultFontStack:pP});const d8=["visible","hidden","clip"],NO=t=>Tr(t).length>0&&!eo(d8,t),PO=t=>{if(Ri(t)){const s=rs(t,"overflow-x"),a=rs(t,"overflow-y");return NO(s)||NO(a)}else return!1},BO=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),f8=(t,s)=>{const a=xp(s,PO),c=a.length===0?me(s).map(Re).map(d=>xp(d,PO)).getOr([]):a;return Is(c).map(d=>({element:d,others:c.slice(1),isFullscreen:()=>BO(t)}))},Rg=(t,s)=>Hp(t)?f8(t,s):M.none(),pb=t=>{const s=[...tt(t.others,Qs),Ur()];return t.isFullscreen()?Ur():Vh(Qs(t.element),s)},Vi=il({name:"Button",factory:t=>{const s=XE(t.action),a=t.dom.tag,c=h=>At(t.dom,"attributes").bind(b=>At(b,h)),d=()=>{if(a==="button"){const h=c("type").getOr("button"),b=c("role").map(x=>({role:x})).getOr({});return{type:h,...b}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:su.augment(t.buttonBehaviours,[Fn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Be("uid",void 0),rt("dom"),Be("components",[]),su.field("buttonBehaviours",[Fn,En]),Bo("action"),Bo("role"),Be("eventOrder",{})]}),m8=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Ho(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},IO=t=>Array.prototype.slice.call(t.dom.classList,0),nm=t=>{const s=_e.fromHtml(t),a=ti(s),c=m8(s),d=IO(s),h=a.length===0?{}:{innerHtml:Mu(s)};return{tag:oa(s),classes:d,attributes:c,...h}},Jo=t=>{const s=UA(t)&&Hr(t,"uid")?t.uid:N1("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var h8=Object.freeze({__proto__:null,exhibit:(t,s)=>Yc({attributes:Yo([{key:s.tabAttr,value:"true"}])})}),g8=[Be("tabAttr","data-alloy-tabstop")];const Vs=li({fields:g8,name:"tabstopping",active:h8}),CP=tn("tooltip.exclusive"),JC=tn("tooltip.show"),QC=tn("tooltip.hide"),e2=tn("tooltip.immediateHide"),t2=tn("tooltip.immediateShow"),SP=(t,s,a)=>{t.getSystem().broadcastOn([CP],{})};var p8=Object.freeze({__proto__:null,hideAllExclusive:SP,immediateOpenClose:(t,s,a,c)=>ao(t,c?t2:e2),isEnabled:(t,s,a)=>a.isEnabled(),setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&zn.set(d,c)})},setEnabled:(t,s,a,c)=>a.setEnabled(c)}),LO=Object.freeze({__proto__:null,events:(t,s)=>{const a=b=>{s.getTooltip().each(x=>{x.getSystem().isConnected()&&(Xf(x),t.onHide(b,x),s.clearTooltip())}),s.clearTimer()},c=b=>{if(!s.isShowing()&&s.isEnabled()){SP(b);const x=t.lazySink(b).getOrDie(),T=b.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Fs(t.mode==="normal"?[it(Kc(),D=>{ao(b,JC)}),it(Ff(),D=>{ao(b,QC)})]:[]),behaviours:xt([zn.config({})])});s.setTooltip(T),Bu(x,T),t.onShow(b,T),Hi.position(x,T,{anchor:t.anchor(b)})}},d=b=>{s.getTooltip().each(x=>{const T=t.lazySink(b).getOrDie();Hi.position(T,x,{anchor:t.anchor(b)})})},h=()=>{switch(t.mode){case"normal":return[it(ld(),b=>{ao(b,t2)}),it(Dm(),b=>{ao(b,e2)}),it(Kc(),b=>{ao(b,JC)}),it(Ff(),b=>{ao(b,QC)})];case"follow-highlight":return[it(Mm(),(b,x)=>{ao(b,JC)}),it(Qh(),b=>{ao(b,QC)})];case"children-normal":return[it(ld(),(b,x)=>{uc(b.element).each(T=>{Ar(x.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{ao(b,t2)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),it(Dm(),b=>{uc(b.element).fold(()=>{ao(b,e2)},ce)}),it(Kc(),b=>{tr(b.element,"[data-mce-tooltip]:hover").each(x=>{s.getTooltip().fold(()=>{ao(b,JC)},T=>{s.isShowing()&&(t.onShow(b,T),d(b))})})}),it(Ff(),b=>{tr(b.element,"[data-mce-tooltip]:hover").fold(()=>{ao(b,QC)},ce)})];default:return[it(ld(),(b,x)=>{uc(b.element).each(T=>{Ar(x.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{ao(b,t2)},D=>{s.isShowing()&&(t.onShow(b,D),d(b))})})}),it(Dm(),b=>{uc(b.element).fold(()=>{ao(b,e2)},ce)})]}};return Fs(dt([[Qy(b=>{t.onSetup(b)}),it(JC,b=>{s.resetTimer(()=>{c(b)},t.delayForShow())}),it(QC,b=>{s.resetTimer(()=>{a(b)},t.delayForHide())}),it(t2,b=>{s.resetTimer(()=>{c(b)},0)}),it(e2,b=>{s.resetTimer(()=>{a(b)},0)}),it(Xl(),(b,x)=>{const T=x;T.universal||eo(T.channels,CP)&&a(b)}),Yd(b=>{a(b)})],h()]))}}),b8=[rt("lazySink"),rt("tooltipDom"),Be("exclusive",!0),Be("tooltipComponents",[]),fr("delayForShow",ne(300)),fr("delayForHide",ne(300)),fr("onSetup",ce),Dc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Be("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ne([Ca,wa,ya,us,Pr,xi]),onRtl:ne([Ca,wa,ya,us,Pr,xi])},bubble:Pu(0,-2,{})})),ko("onHide"),ko("onShow")],v8=Object.freeze({__proto__:null,init:()=>{const t=mn(!0),s=ts(),a=ts(),c=()=>{s.on(clearTimeout)},d=(b,x)=>{c(),s.set(setTimeout(b,x))},h=ne("not-implemented");return Xc({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:c,resetTimer:d,readState:h,isEnabled:()=>t.get(),setEnabled:b=>t.set(b)})}});const Ir=li({fields:b8,name:"tooltipping",active:LO,state:v8,apis:p8}),{entries:xP,setPrototypeOf:EP,isFrozen:y8,getPrototypeOf:w8,getOwnPropertyDescriptor:C8}=Object;let{freeze:au,seal:Sd,create:S8}=Object,{apply:FO,construct:$O}=typeof Reflect<"u"&&Reflect;FO||(FO=function(s,a,c){return s.apply(a,c)}),au||(au=function(s){return s}),Sd||(Sd=function(s){return s}),$O||($O=function(s,a){return new s(...a)});const x8=lf(Array.prototype.forEach),E8=lf(Array.prototype.pop),n2=lf(Array.prototype.push),l_=lf(String.prototype.toLowerCase),HO=lf(String.prototype.toString),_8=lf(String.prototype.match),om=lf(String.prototype.replace),T8=lf(String.prototype.indexOf),k8=lf(String.prototype.trim),xd=lf(RegExp.prototype.test),Vp=VO(TypeError);function lf(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return FO(t,s,c)}}function VO(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return $O(t,a)}}function Es(t,s,a){var c;a=(c=a)!==null&&c!==void 0?c:l_,EP&&EP(t,null);let d=s.length;for(;d--;){let h=s[d];if(typeof h=="string"){const b=a(h);b!==h&&(y8(s)||(s[d]=b),h=b)}t[h]=!0}return t}function V0(t){const s=S8(null);for(const[a,c]of xP(t))s[a]=c;return s}function u_(t,s){for(;t!==null;){const c=C8(t,s);if(c){if(c.get)return lf(c.get);if(typeof c.value=="function")return lf(c.value)}t=w8(t)}function a(c){return console.warn("fallback value for",c),null}return a}const zO=au(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),UO=au(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),o2=au(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),WO=au(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),d_=au(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ZO=au(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),s2=au(["#text"]),jO=au(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),uf=au(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),f_=au(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),m_=au(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),A8=Sd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),O8=Sd(/<%[\w\W]*|[\w\W]*%>/gm),D8=Sd(/\${[\w\W]*}/gm),r2=Sd(/^data-[\-\w.\u00B7-\uFFFF]/),R8=Sd(/^aria-[\-\w]+$/),qO=Sd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),GO=Sd(/^(?:\w+script|data):/i),M8=Sd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),h_=Sd(/^html$/i);var g_=Object.freeze({__proto__:null,MUSTACHE_EXPR:A8,ERB_EXPR:O8,TMPLIT_EXPR:D8,DATA_ATTR:r2,ARIA_ATTR:R8,IS_ALLOWED_URI:qO,IS_SCRIPT_OR_DATA:GO,ATTR_WHITESPACE:M8,DOCTYPE_NAME:h_});const N8=()=>typeof window>"u"?null:window,_P=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const h="dompurify"+(c?"#"+c:"");try{return s.createPolicy(h,{createHTML(b){return b},createScriptURL(b){return b}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function KO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N8();const s=Ao=>KO(Ao);if(s.version="3.0.5",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;const a=t.document,c=a.currentScript;let{document:d}=t;const{DocumentFragment:h,HTMLTemplateElement:b,Node:x,Element:T,NodeFilter:D,NamedNodeMap:P=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:$,DOMParser:G,trustedTypes:Y}=t,se=T.prototype,ie=u_(se,"cloneNode"),Ne=u_(se,"nextSibling"),he=u_(se,"childNodes"),ke=u_(se,"parentNode");if(typeof b=="function"){const Ao=d.createElement("template");Ao.content&&Ao.content.ownerDocument&&(d=Ao.content.ownerDocument)}let Ae,st="";const{implementation:Ke,createNodeIterator:Ft,createDocumentFragment:Jt,getElementsByTagName:Qe}=d,{importNode:ln}=a;let It={};s.isSupported=typeof xP=="function"&&typeof ke=="function"&&Ke&&Ke.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:fn,ERB_EXPR:bo,TMPLIT_EXPR:Us,DATA_ATTR:jo,ARIA_ATTR:dn,IS_SCRIPT_OR_DATA:gt,ATTR_WHITESPACE:$t}=g_;let{IS_ALLOWED_URI:$n}=g_,Mn=null;const xn=Es({},[...zO,...UO,...o2,...d_,...s2]);let Kn=null;const ks=Es({},[...jO,...uf,...f_,...m_]);let Qo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bc=null,Ju=null,mm=!0,Xi=!0,Qu=!1,Id=!0,Il=!1,xh=!1,Zb=!1,oM=!1,My=!1,ik=!1,d6=!1,VY=!0,zY=!1;const QJ="user-content-";let SG=!0,sM=!1,ck={},lk=null;const UY=Es({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let WY=null;const ZY=Es({},["audio","video","img","source","image","track"]);let xG=null;const jY=Es({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),f6="http://www.w3.org/1998/Math/MathML",m6="http://www.w3.org/2000/svg",jb="http://www.w3.org/1999/xhtml";let uk=jb,EG=!1,_G=null;const eQ=Es({},[f6,m6,jb],HO);let AS;const tQ=["application/xhtml+xml","text/html"],nQ="text/html";let Ll,dk=null;const oQ=d.createElement("form"),qY=function(je){return je instanceof RegExp||je instanceof Function},TG=function(je){if(!(dk&&dk===je)){if((!je||typeof je!="object")&&(je={}),je=V0(je),AS=tQ.indexOf(je.PARSER_MEDIA_TYPE)===-1?AS=nQ:AS=je.PARSER_MEDIA_TYPE,Ll=AS==="application/xhtml+xml"?HO:l_,Mn="ALLOWED_TAGS"in je?Es({},je.ALLOWED_TAGS,Ll):xn,Kn="ALLOWED_ATTR"in je?Es({},je.ALLOWED_ATTR,Ll):ks,_G="ALLOWED_NAMESPACES"in je?Es({},je.ALLOWED_NAMESPACES,HO):eQ,xG="ADD_URI_SAFE_ATTR"in je?Es(V0(jY),je.ADD_URI_SAFE_ATTR,Ll):jY,WY="ADD_DATA_URI_TAGS"in je?Es(V0(ZY),je.ADD_DATA_URI_TAGS,Ll):ZY,lk="FORBID_CONTENTS"in je?Es({},je.FORBID_CONTENTS,Ll):UY,bc="FORBID_TAGS"in je?Es({},je.FORBID_TAGS,Ll):{},Ju="FORBID_ATTR"in je?Es({},je.FORBID_ATTR,Ll):{},ck="USE_PROFILES"in je?je.USE_PROFILES:!1,mm=je.ALLOW_ARIA_ATTR!==!1,Xi=je.ALLOW_DATA_ATTR!==!1,Qu=je.ALLOW_UNKNOWN_PROTOCOLS||!1,Id=je.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Il=je.SAFE_FOR_TEMPLATES||!1,xh=je.WHOLE_DOCUMENT||!1,My=je.RETURN_DOM||!1,ik=je.RETURN_DOM_FRAGMENT||!1,d6=je.RETURN_TRUSTED_TYPE||!1,oM=je.FORCE_BODY||!1,VY=je.SANITIZE_DOM!==!1,zY=je.SANITIZE_NAMED_PROPS||!1,SG=je.KEEP_CONTENT!==!1,sM=je.IN_PLACE||!1,$n=je.ALLOWED_URI_REGEXP||qO,uk=je.NAMESPACE||jb,Qo=je.CUSTOM_ELEMENT_HANDLING||{},je.CUSTOM_ELEMENT_HANDLING&&qY(je.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Qo.tagNameCheck=je.CUSTOM_ELEMENT_HANDLING.tagNameCheck),je.CUSTOM_ELEMENT_HANDLING&&qY(je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Qo.attributeNameCheck=je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),je.CUSTOM_ELEMENT_HANDLING&&typeof je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Qo.allowCustomizedBuiltInElements=je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Il&&(Xi=!1),ik&&(My=!0),ck&&(Mn=Es({},[...s2]),Kn=[],ck.html===!0&&(Es(Mn,zO),Es(Kn,jO)),ck.svg===!0&&(Es(Mn,UO),Es(Kn,uf),Es(Kn,m_)),ck.svgFilters===!0&&(Es(Mn,o2),Es(Kn,uf),Es(Kn,m_)),ck.mathMl===!0&&(Es(Mn,d_),Es(Kn,f_),Es(Kn,m_))),je.ADD_TAGS&&(Mn===xn&&(Mn=V0(Mn)),Es(Mn,je.ADD_TAGS,Ll)),je.ADD_ATTR&&(Kn===ks&&(Kn=V0(Kn)),Es(Kn,je.ADD_ATTR,Ll)),je.ADD_URI_SAFE_ATTR&&Es(xG,je.ADD_URI_SAFE_ATTR,Ll),je.FORBID_CONTENTS&&(lk===UY&&(lk=V0(lk)),Es(lk,je.FORBID_CONTENTS,Ll)),SG&&(Mn["#text"]=!0),xh&&Es(Mn,["html","head","body"]),Mn.table&&(Es(Mn,["tbody"]),delete bc.tbody),je.TRUSTED_TYPES_POLICY){if(typeof je.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof je.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ae=je.TRUSTED_TYPES_POLICY,st=Ae.createHTML("")}else Ae===void 0&&(Ae=_P(Y,c)),Ae!==null&&typeof st=="string"&&(st=Ae.createHTML(""));au&&au(je),dk=je}},GY=Es({},["mi","mo","mn","ms","mtext"]),KY=Es({},["foreignobject","desc","title","annotation-xml"]),sQ=Es({},["title","style","font","a","script"]),h6=Es({},UO);Es(h6,o2),Es(h6,WO);const kG=Es({},d_);Es(kG,ZO);const rQ=function(je){let yn=ke(je);(!yn||!yn.tagName)&&(yn={namespaceURI:uk,tagName:"template"});const qn=l_(je.tagName),_a=l_(yn.tagName);return _G[je.namespaceURI]?je.namespaceURI===m6?yn.namespaceURI===jb?qn==="svg":yn.namespaceURI===f6?qn==="svg"&&(_a==="annotation-xml"||GY[_a]):!!h6[qn]:je.namespaceURI===f6?yn.namespaceURI===jb?qn==="math":yn.namespaceURI===m6?qn==="math"&&KY[_a]:!!kG[qn]:je.namespaceURI===jb?yn.namespaceURI===m6&&!KY[_a]||yn.namespaceURI===f6&&!GY[_a]?!1:!kG[qn]&&(sQ[qn]||!h6[qn]):!!(AS==="application/xhtml+xml"&&_G[je.namespaceURI]):!1},OS=function(je){n2(s.removed,{element:je});try{je.parentNode.removeChild(je)}catch{je.remove()}},rM=function(je,yn){try{n2(s.removed,{attribute:yn.getAttributeNode(je),from:yn})}catch{n2(s.removed,{attribute:null,from:yn})}if(yn.removeAttribute(je),je==="is"&&!Kn[je])if(My||ik)try{OS(yn)}catch{}else try{yn.setAttribute(je,"")}catch{}},YY=function(je){let yn,qn;if(oM)je="<remove></remove>"+je;else{const Eh=_8(je,/^[\r\n\t ]+/);qn=Eh&&Eh[0]}AS==="application/xhtml+xml"&&uk===jb&&(je='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+je+"</body></html>");const _a=Ae?Ae.createHTML(je):je;if(uk===jb)try{yn=new G().parseFromString(_a,AS)}catch{}if(!yn||!yn.documentElement){yn=Ke.createDocument(uk,"template",null);try{yn.documentElement.innerHTML=EG?st:_a}catch{}}const Fl=yn.body||yn.documentElement;return je&&qn&&Fl.insertBefore(d.createTextNode(qn),Fl.childNodes[0]||null),uk===jb?Qe.call(yn,xh?"html":"body")[0]:xh?yn.documentElement:Fl},XY=function(je){return Ft.call(je.ownerDocument||je,je,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT,null,!1)},aQ=function(je){return je instanceof $&&(typeof je.nodeName!="string"||typeof je.textContent!="string"||typeof je.removeChild!="function"||!(je.attributes instanceof P)||typeof je.removeAttribute!="function"||typeof je.setAttribute!="function"||typeof je.namespaceURI!="string"||typeof je.insertBefore!="function"||typeof je.hasChildNodes!="function")},g6=function(je){return typeof x=="object"?je instanceof x:je&&typeof je=="object"&&typeof je.nodeType=="number"&&typeof je.nodeName=="string"},qb=function(je,yn,qn){It[je]&&x8(It[je],_a=>{_a.call(s,yn,qn,dk)})},JY=function(je){let yn;if(qb("beforeSanitizeElements",je,null),aQ(je))return OS(je),!0;const qn=Ll(je.nodeName);if(qb("uponSanitizeElement",je,{tagName:qn,allowedTags:Mn}),je.hasChildNodes()&&!g6(je.firstElementChild)&&(!g6(je.content)||!g6(je.content.firstElementChild))&&xd(/<[/\w]/g,je.innerHTML)&&xd(/<[/\w]/g,je.textContent))return OS(je),!0;if(!Mn[qn]||bc[qn]){if(!bc[qn]&&eX(qn)&&(Qo.tagNameCheck instanceof RegExp&&xd(Qo.tagNameCheck,qn)||Qo.tagNameCheck instanceof Function&&Qo.tagNameCheck(qn)))return!1;if(SG&&!lk[qn]){const _a=ke(je)||je.parentNode,Fl=he(je)||je.childNodes;if(Fl&&_a){const Eh=Fl.length;for(let Ui=Eh-1;Ui>=0;--Ui)_a.insertBefore(ie(Fl[Ui],!0),Ne(je))}}return OS(je),!0}return je instanceof T&&!rQ(je)||(qn==="noscript"||qn==="noembed"||qn==="noframes")&&xd(/<\/no(script|embed|frames)/i,je.innerHTML)?(OS(je),!0):(Il&&je.nodeType===3&&(yn=je.textContent,yn=om(yn,fn," "),yn=om(yn,bo," "),yn=om(yn,Us," "),je.textContent!==yn&&(n2(s.removed,{element:je.cloneNode()}),je.textContent=yn)),qb("afterSanitizeElements",je,null),!1)},QY=function(je,yn,qn){if(VY&&(yn==="id"||yn==="name")&&(qn in d||qn in oQ))return!1;if(!(Xi&&!Ju[yn]&&xd(jo,yn))){if(!(mm&&xd(dn,yn))){if(!Kn[yn]||Ju[yn]){if(!(eX(je)&&(Qo.tagNameCheck instanceof RegExp&&xd(Qo.tagNameCheck,je)||Qo.tagNameCheck instanceof Function&&Qo.tagNameCheck(je))&&(Qo.attributeNameCheck instanceof RegExp&&xd(Qo.attributeNameCheck,yn)||Qo.attributeNameCheck instanceof Function&&Qo.attributeNameCheck(yn))||yn==="is"&&Qo.allowCustomizedBuiltInElements&&(Qo.tagNameCheck instanceof RegExp&&xd(Qo.tagNameCheck,qn)||Qo.tagNameCheck instanceof Function&&Qo.tagNameCheck(qn))))return!1}else if(!xG[yn]){if(!xd($n,om(qn,$t,""))){if(!((yn==="src"||yn==="xlink:href"||yn==="href")&&je!=="script"&&T8(qn,"data:")===0&&WY[je])){if(!(Qu&&!xd(gt,om(qn,$t,"")))){if(qn)return!1}}}}}}return!0},eX=function(je){return je.indexOf("-")>0},tX=function(je){let yn,qn,_a,Fl;qb("beforeSanitizeAttributes",je,null);const{attributes:Eh}=je;if(!Eh)return;const Ui={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Kn};for(Fl=Eh.length;Fl--;){yn=Eh[Fl];const{name:_h,namespaceURI:AG}=yn;qn=_h==="value"?yn.value:k8(yn.value);const cQ=qn;if(_a=Ll(_h),Ui.attrName=_a,Ui.attrValue=qn,Ui.keepAttr=!0,Ui.forceKeepAttr=void 0,qb("uponSanitizeAttribute",je,Ui),qn=Ui.attrValue,Ui.forceKeepAttr)continue;if(!Ui.keepAttr){rM(_h,je);continue}if(!Id&&xd(/\/>/i,qn)){rM(_h,je);continue}Il&&(qn=om(qn,fn," "),qn=om(qn,bo," "),qn=om(qn,Us," "));const nX=Ll(je.nodeName);if(!QY(nX,_a,qn)){rM(_h,je);continue}if(zY&&(_a==="id"||_a==="name")&&(rM(_h,je),qn=QJ+qn),Ae&&typeof Y=="object"&&typeof Y.getAttributeType=="function"&&!AG)switch(Y.getAttributeType(nX,_a)){case"TrustedHTML":{qn=Ae.createHTML(qn);break}case"TrustedScriptURL":{qn=Ae.createScriptURL(qn);break}}if(qn!==cQ)try{AG?je.setAttributeNS(AG,_h,qn):je.setAttribute(_h,qn)}catch{rM(_h,je)}}qb("afterSanitizeAttributes",je,null)},iQ=function Ao(je){let yn;const qn=XY(je);for(qb("beforeSanitizeShadowDOM",je,null);yn=qn.nextNode();)qb("uponSanitizeShadowNode",yn,null),!JY(yn)&&(yn.content instanceof h&&Ao(yn.content),tX(yn));qb("afterSanitizeShadowDOM",je,null)};return s.sanitize=function(Ao){let je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yn,qn,_a,Fl;if(EG=!Ao,EG&&(Ao="<!-->"),typeof Ao!="string"&&!g6(Ao))if(typeof Ao.toString=="function"){if(Ao=Ao.toString(),typeof Ao!="string")throw Vp("dirty is not a string, aborting")}else throw Vp("toString is not a function");if(!s.isSupported)return Ao;if(Zb||TG(je),s.removed=[],typeof Ao=="string"&&(sM=!1),sM){if(Ao.nodeName){const _h=Ll(Ao.nodeName);if(!Mn[_h]||bc[_h])throw Vp("root node is forbidden and cannot be sanitized in-place")}}else if(Ao instanceof x)yn=YY("<!---->"),qn=yn.ownerDocument.importNode(Ao,!0),qn.nodeType===1&&qn.nodeName==="BODY"||qn.nodeName==="HTML"?yn=qn:yn.appendChild(qn);else{if(!My&&!Il&&!xh&&Ao.indexOf("<")===-1)return Ae&&d6?Ae.createHTML(Ao):Ao;if(yn=YY(Ao),!yn)return My?null:d6?st:""}yn&&oM&&OS(yn.firstChild);const Eh=XY(sM?Ao:yn);for(;_a=Eh.nextNode();)JY(_a)||(_a.content instanceof h&&iQ(_a.content),tX(_a));if(sM)return Ao;if(My){if(ik)for(Fl=Jt.call(yn.ownerDocument);yn.firstChild;)Fl.appendChild(yn.firstChild);else Fl=yn;return(Kn.shadowroot||Kn.shadowrootmode)&&(Fl=ln.call(a,Fl,!0)),Fl}let Ui=xh?yn.outerHTML:yn.innerHTML;return xh&&Mn["!doctype"]&&yn.ownerDocument&&yn.ownerDocument.doctype&&yn.ownerDocument.doctype.name&&xd(h_,yn.ownerDocument.doctype.name)&&(Ui="<!DOCTYPE "+yn.ownerDocument.doctype.name+`>
`+Ui),Il&&(Ui=om(Ui,fn," "),Ui=om(Ui,bo," "),Ui=om(Ui,Us," ")),Ae&&d6?Ae.createHTML(Ui):Ui},s.setConfig=function(Ao){TG(Ao),Zb=!0},s.clearConfig=function(){dk=null,Zb=!1},s.isValidAttribute=function(Ao,je,yn){dk||TG({});const qn=Ll(Ao),_a=Ll(je);return QY(qn,_a,yn)},s.addHook=function(Ao,je){typeof je=="function"&&(It[Ao]=It[Ao]||[],n2(It[Ao],je))},s.removeHook=function(Ao){if(It[Ao])return E8(It[Ao])},s.removeHooks=function(Ao){It[Ao]&&(It[Ao]=[])},s.removeAllHooks=function(){It={}},s}var P8=KO();const YO=t=>P8().sanitize(t);var Hu=tinymce.util.Tools.resolve("tinymce.util.I18n");const B8={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},TP="temporary-placeholder",XO=t=>()=>At(t,TP).getOr("!not found!"),JO=(t,s)=>{const a=t.toLowerCase();if(Hu.isRtl()){const c=hs(a,"-rtl");return po(s,c)?c:a}else return a},kP=(t,s)=>At(s,JO(t,s)),QO=(t,s)=>{const a=s();return kP(t,a).getOrThunk(XO(a))},AP=(t,s,a)=>{const c=s();return kP(t,c).or(a).getOrThunk(XO(c))},I8=t=>Hu.isRtl()?po(B8,t):!1,p_=()=>no("add-focusable",[Gs(t=>{Bw(t.element,"svg").each(s=>qt(s,"focusable","false"))})]),z0=(t,s,a,c)=>{var d,h;const b=I8(s)?["tox-icon--flip"]:[],x=At(a,JO(s,a)).or(c).getOrThunk(XO(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(b),innerHtml:x},behaviours:xt([...(h=t.behaviours)!==null&&h!==void 0?h:[],p_()])}},Vu=(t,s,a,c=M.none())=>z0(s,t,a(),c),L8=(t,s,a)=>{const c=a(),d=et(t,h=>po(c,JO(h,c)));return z0(s,d.getOr(TP),c,M.none())},F8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},eD=il({name:"Notification",factory:t=>{const s=tn("notification-text"),a=Jo({dom:nm(`<p id=${s}>${YO(t.backstageProvider.translate(t.text))}</p>`),behaviours:xt([zn.config({})])}),c=se=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${se}%`}}}),d=se=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${se}%`}}),h=Jo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},d(0)],behaviours:xt([zn.config({})])}),T={updateProgress:(se,ie)=>{se.getSystem().isConnected()&&h.getOpt(se).each(Ne=>{zn.set(Ne,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(ie)]},d(ie)])})},updateText:(se,ie)=>{if(se.getSystem().isConnected()){const Ne=a.get(se);zn.set(Ne,[hr(ie)])}}},D=dt([t.icon.toArray(),t.level.toArray(),t.level.bind(se=>M.from(F8[se])).toArray()]),P=Jo(Vi.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Vu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:xt([Vs.config({}),Ir.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:se=>{t.onAction(se)}})),$=L8(D,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),G={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:xt([zn.config({})])},Y=[$,G];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(se=>["tox-notification","tox-notification--in",`tox-notification--${se}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:xt([Vs.config({}),Fn.config({}),En.config({mode:"special",onEscape:se=>(t.onAction(se),M.some(!0))})]),components:Y.concat(t.progress?[h.asSpec()]:[]).concat([P.asSpec()]),apis:T}},configFields:[Bo("level"),rt("progress"),Bo("icon"),rt("onAction"),rt("text"),rt("iconProvider"),rt("backstageProvider")],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var H8=(t,s,a,c)=>{const d=s.backstage.shared,h=()=>_e.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),b=()=>{const $=Qs(h());return M.some($)},x=$=>{b().each(G=>{wt($,Y=>{Xn(Y.element,"width"),La(Y.element)>G.width&&lt(Y.element,"width",G.width+"px")})})};return{open:($,G,Y)=>{const se=()=>{const ke=Ft=>{zn.remove(Ft,ie),Ne()},Ae=(Ft,Jt)=>{ti(Ft.element).length===0?st(Ft,Jt):Ke(Ft,Jt)},st=(Ft,Jt)=>{nr.hide(Ft),c.clear(),Jt&&t.focus()},Ke=(Ft,Jt)=>{Jt&&En.focusIn(Ft)};c.on(Ft=>{G();const Jt=Y();ke(Ft),Ae(Ft,Jt)})},ie=$i(eD.sketch({text:$.text,level:eo(["success","error","warning","warn","info"],$.type)?$.type:void 0,progress:$.progressBar===!0,icon:$.icon,onAction:se,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(c.isSet()){const ke=Cl(ie);c.on(Ae=>{zn.append(Ae,ke),nr.reposition(Ae),Hs.refresh(Ae),x(Ae.components())})}else{const ke=$i(nr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([En.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),zn.config({}),...gb(t)&&!d.header.isPositionedAtTop()?[]:[Hs.config({contextual:{lazyContext:()=>M.some(Qs(h())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ft=>Rg(t,Ft.element).map(Qe=>({bounds:pb(Qe),optScrollEnv:M.some({currentScrollTop:Qe.element.dom.scrollTop,scrollElmTop:ga(Qe.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:M.none()}))})]])})),Ae=Cl(ie),st={maxHeightFunction:bp()},Ke={...d.anchors.banner(),overrides:st};c.set(ke),a.add(ke),nr.showWithinBounds(ke,Ae,{anchor:Ke},b)}on($.timeout)&&$.timeout>0&&F0.setEditorTimeout(t,()=>{se()},$.timeout);const Ne=()=>{c.on(ke=>{nr.reposition(ke),Hs.refresh(ke),x(ke.components())})};return{close:se,reposition:Ne,text:ke=>{eD.updateText(ie,ke)},settings:$,getEl:()=>ie.element.dom,progressBar:{value:ke=>{eD.updateProgress(ie,ke)}}}},close:$=>{$.close()},getArgs:$=>$.settings}};const OP={setup:(t,s)=>{const a=(d,h)=>{_n(d,Du(),{raw:h})},c=()=>t.getMenu().bind(bn.getHighlighted);s.on("keydown",d=>{const h=d.which;t.isActive()&&(t.isMenuOpen()?h===13?(c().each(Nm),d.preventDefault()):h===40?(c().fold(()=>{t.getMenu().each(bn.highlightFirst)},b=>{a(b,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&c().each(b=>{a(b,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var b_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(b_||(b_={}));var df=b_;const tD="tox-menu-nav__js",v_="tox-collection__item",y_="tox-swatch",nD={normal:tD,color:y_},w_="tox-collection__item--enabled",DP="tox-collection__group-heading",oD="tox-collection__item-icon",C_="tox-collection__item-label",z8="tox-collection__item-accessory",S_="tox-collection__item-caret",U8="tox-collection__item-checkmark",zp="tox-collection__item--active",sD="tox-collection__item-container",bb="tox-collection__item-container--column",RP="tox-collection__item-container--row",rD="tox-collection__item-container--align-right",x_="tox-collection__item-container--align-left",W8="tox-collection__item-container--valign-top",MP="tox-collection__item-container--valign-middle",NP="tox-collection__item-container--valign-bottom",aD=t=>At(nD,t).getOr(tD),iD=t=>t==="color"?"tox-swatches":"tox-menu",E_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:iD(t),tieredMenu:"tox-tiered-menu"}),vb=t=>{const s=E_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:aD(t)}},PP=(t,s,a)=>{const c=E_(a);return{tag:"div",classes:dt([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},BP=[wd.parts.items({})],a2=(t,s,a)=>{const c=E_(a);return{dom:{tag:"div",classes:dt([[c.tieredMenu]])},markers:vb(a)}},cD=ne([Bo("data"),Be("inputAttributes",{}),Be("inputStyles",{}),Be("tag","input"),Be("inputClasses",[]),ko("onSetValue"),Be("styles",{}),Be("eventOrder",{}),Za("inputBehaviours",[Xt,Fn]),Be("selectOnFocus",!0)]),IP=t=>xt([Fn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=jf(a);a.dom.setSelectionRange(0,c.length)}:ce})]),LP=t=>({...IP(t),...ja(t.inputBehaviours,[Xt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>jf(s.element),setValue:(s,a)=>{jf(s.element)!==a&&Gm(s.element,a)}},onSetValue:t.onSetValue})])}),FP=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),Z8=(t,s)=>({uid:t.uid,dom:FP(t),components:[],behaviours:LP(t),eventOrder:t.eventOrder}),yb=il({name:"Input",configFields:cD(),factory:Z8}),$P=tn("refetch-trigger-event"),lD=tn("redirect-menu-item-interaction"),U0="tox-menu__searcher",i2=t=>tr(t.element,`.${U0}`).bind(s=>t.getSystem().getByDom(s).toOptional()),HP=i2,j8=(t,s)=>{Xt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},VP=t=>{const s=Xt.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},q8=(t,s)=>{Dr(s.element,"id").each(a=>qt(t.element,"aria-activedescendant",a))},G8=t=>{const s=(d,h)=>(h.cut(),M.none()),a=(d,h)=>{const b={interactionEvent:h.event,eventType:h.event.raw.type};return _n(d,lD,b),M.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[v_]},components:[yb.sketch({inputClasses:[U0,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:xt([no(c,[it(Gd(),d=>{ao(d,$P)}),it(Du(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),En.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,En.name()]}})]}},wb="tox-collection--results__js",zP=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:tn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},__=(t,s)=>a=>{const c=os(a,s);return tt(c,d=>({dom:t,components:d}))},K8=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[wd.parts.items({preprocess:t!=="auto"?__({tag:"div",classes:["tox-swatches__row"]},t):Kt})]}]}),UP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[wd.parts.items({preprocess:__({tag:"div",classes:["tox-collection__group"]},t)})]}),uD=(t,s)=>{const a=[];let c=[];return wt(t,(d,h)=>{s(d,h)?(c.length>0&&a.push(c),c=[],(po(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),tt(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},dD=(t,s,a)=>wd.parts.items({preprocess:c=>{const d=tt(c,a);return t!=="auto"&&t>1?__({tag:"div",classes:["tox-collection__group"]},t)(d):uD(d,(h,b)=>s[b].type==="separator")}}),fD=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[dD(t,s,Kt)]}),WP=(t,s,a=!0)=>{const c=tn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",wb].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[dD(t,s,zP)]}},ZP=(t,s,a)=>{const c=tn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[G8({i18n:Hu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],wb],attributes:{id:c}},components:[dD(t,s,zP)]}]}},jP=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[wd.parts.items({preprocess:a=>uD(a,(c,d)=>t[d].type==="separator")})]}),T_=t=>ms(t,s=>"icon"in s&&s.icon!==void 0),Mg=t=>(console.error(Gl(t)),console.log(t),M.none()),Y8=(t,s,a,c,d)=>{const h=jP(a);return{value:t,dom:h.dom,components:h.components,items:a}},mD=(t,s,a,c,d)=>{const h=()=>d.menuType!=="searchable"?fD(c,a):d.searchMode.searchMode==="search-with-field"?ZP(c,a,d.searchMode):WP(c,a);if(d.menuType==="color"){const b=K8(c);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const b=fD(c,a);return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const b=h();return{value:t,dom:b.dom,components:b.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const b=UP(c);return{value:t,dom:b.dom,components:b.components,items:a}}else return{value:t,dom:PP(s,c,d.menuType),components:BP,items:a}},Qr=Jr("type"),k_=Jr("name"),hD=Jr("label"),Ng=Jr("text"),qP=Jr("title"),GP=Jr("icon"),c2=Jr("value"),X8=kc("fetch"),J8=kc("getSubmenuItems"),Up=kc("onAction"),KP=kc("onItemAction"),Cb=fr("onSetup",()=>ce),Q8=ca("name"),Pg=ca("text"),eH=ca("role"),Ed=ca("icon"),W0=ca("tooltip"),A_=ca("label"),O_=ca("shortcut"),tH=ku("select"),D_=Mr("active",!1),nH=Mr("borderless",!1),_d=Mr("enabled",!0),Z0=Mr("primary",!1),YP=t=>Be("columns",t),gD=Be("meta",{}),pD=fr("onAction",ce),Sb=t=>Ci("type",t),bD=t=>ia("name","name",co(()=>tn(`${t}-name`)),Wt),oH=t=>ia("value","value",co(()=>tn(`${t}-value`)),bl()),vD=Dn([Qr,Pg]),XP=t=>ar("separatormenuitem",vD,t),sH=Dn([Sb("autocompleteitem"),D_,_d,gD,c2,Pg,Ed]),rH=t=>ar("Autocompleter.Separator",vD,t),aH=t=>ar("Autocompleter.Item",sH,t),mc=[_d,W0,Ed,Pg,Cb],sm=Dn([Qr,Up,O_].concat(mc)),JP=t=>ar("toolbarbutton",sm,t),l2=[D_].concat(mc),yD=Dn(l2.concat([Qr,Up,O_])),QP=t=>ar("ToggleButton",yD,t),eB=[fr("predicate",Me),Dc("scope","node",["node","editor"]),Dc("position","selection",["node","selection","line"])],u2=mc.concat([Sb("contextformbutton"),Z0,Up,Lo("original",Kt)]),R_=l2.concat([Sb("contextformbutton"),Z0,Up,Lo("original",Kt)]),wD=mc.concat([Sb("contextformbutton")]),iH=l2.concat([Sb("contextformtogglebutton")]),rm=ba("type",{contextformbutton:u2,contextformtogglebutton:R_}),cH=Dn([Sb("contextform"),fr("initValue",ne("")),A_,Ac("commands",rm),Tu("launch",ba("type",{contextformbutton:wD,contextformtogglebutton:iH}))].concat(eB)),lH=t=>ar("ContextForm",cH,t),Td=Dn([Sb("contexttoolbar"),Jr("items")].concat(eB)),d2=t=>ar("ContextToolbar",Td,t),ff=[Qr,Jr("src"),ca("alt"),_("classes",[],Wt)],uH=Dn(ff),_s=[Qr,Ng,Q8,_("classes",["tox-collection__item-label"],Wt)],j0=Dn(_s),f2=Xr(()=>jd("type",{cardimage:uH,cardtext:j0,cardcontainer:tB})),tB=Dn([Qr,Ci("direction","horizontal"),Ci("align","left"),Ci("valign","middle"),Ac("items",f2)]),Wp=[_d,Pg,eH,O_,oH("menuitem"),gD],CD=Dn([Qr,A_,Ac("items",f2),Cb,pD].concat(Wp)),dH=t=>ar("cardmenuitem",CD,t),SD=Dn([Qr,D_,Ed].concat(Wp)),fH=t=>ar("choicemenuitem",SD,t),xD=[Qr,Jr("fancytype"),pD],nB=[Be("initData",{})].concat(xD),ED=[ku("select"),R("initData",{},[Mr("allowCustomColors",!0),Ci("storageKey","default"),Au("colors",bl())])].concat(xD),oB=ba("fancytype",{inserttable:nB,colorswatch:ED}),M_=t=>ar("fancymenuitem",oB,t),mH=Dn([Qr,Cb,pD,Ed].concat(Wp)),hH=t=>ar("menuitem",mH,t),gH=Dn([Qr,J8,Cb,Ed].concat(Wp)),pH=t=>ar("nestedmenuitem",gH,t),bH=Dn([Qr,Ed,D_,Cb,Up].concat(Wp)),sB=t=>ar("togglemenuitem",bH,t),_D=(t,s,a)=>{const c=di(t.element,"."+a);if(c.length>0){const d=kt(c,h=>{const b=h.dom.getBoundingClientRect().top,x=c[0].dom.getBoundingClientRect().top;return Math.abs(b-x)>s}).getOr(c.length);return M.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return M.none()},rB=(t,s)=>xt([no(t,s)]),q0={namedEvents:rB,unnamedEvents:t=>rB(tn("unnamed-events"),t)},yH=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),aB="silver.readonly",iB=Dn([tv("readonly")]),G0=(t,s)=>{const c=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&wt(d,h=>{h.broadcastOn([of()],{target:c})}),wt(d,h=>{h.broadcastOn([aB],{readonly:s})})},TD=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&G0(s,!0)}),t.on("SwitchMode",()=>G0(s,t.mode.isReadOnly())),QN(t)&&t.mode.set("readonly")},Ga=()=>Nc.config({channels:{[aB]:{schema:iB,onReceive:(t,s)=>{l.set(t,s.readonly)}}}}),mf={item:t=>l.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>l.config({disabled:t}),splitButton:t=>l.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>l.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},m2=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},hc=(t,s)=>Gs(a=>{m2(t,a)(d=>{const h=t.onSetup(d);Ie(h)&&s.set(h)})}),Zp=(t,s)=>Yd(a=>m2(t,a)(s.get())),kD=(t,s)=>Ru((a,c)=>{m2(t,a)(t.onAction),!t.triggersSubmenu&&s===df.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&ao(a,y1()),c.stop())}),cB={[Jl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},xb=Ja,K0=(t,s,a,c)=>{const d=mn(ce);return{type:"item",dom:s.dom,components:xb(s.optComponents),data:t.data,eventOrder:cB,hasSubmenu:t.triggersSubmenu,itemBehaviours:xt([no("item-events",[kD(t,a),hc(t,d),Zp(t,d)]),mf.item(()=>!t.enabled||c.isDisabled()),Ga(),zn.config({})].concat(t.itemBehaviours))}},Eb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),N_=t=>{const s=db.os.isMacOS()||db.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),b=tt(h,x=>{const T=x.toLowerCase().trim();return po(d,T)?d[T]:x});return s?b.join(""):b.join("+")},P_=(t,s,a=[oD])=>Vu(t,{tag:"div",classes:a},s),lB=t=>({dom:{tag:"div",classes:[C_]},components:[hr(Hu.translate(t))]}),uB=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),wH=(t,s)=>({dom:{tag:"div",classes:[C_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[hr(Hu.translate(s))]}]}),CH=t=>({dom:{tag:"div",classes:[z8]},components:[hr(N_(t))]}),dB=t=>P_("checkmark",t,[U8]),fB=t=>P_("chevron-right",t,[S_]),mB=t=>P_("chevron-down",t,[S_]),hB=(t,s)=>{const a=t.direction==="vertical"?bb:RP,c=t.align==="left"?x_:rD;return{dom:{tag:"div",classes:[sD,a,c,(()=>{switch(t.valign){case"top":return W8;case"middle":return MP;case"bottom":return NP}})()]},components:s}},SH=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),xH=(t,s,a)=>{const c="custom",d="remove",h=t.value,b=t.iconContent.map(D=>AP(D,s.icons,a)),x=t.ariaLabel.map(D=>({"aria-label":s.translate(D),"data-mce-name":D})).getOr({});return{dom:(()=>{const D=y_,P=b.getOr(""),$={tag:"div",attributes:x,classes:[D]};return h===c?{...$,tag:"button",classes:[...$.classes,"tox-swatches__picker-btn"],innerHtml:P}:h===d?{...$,classes:[...$.classes,"tox-swatch--remove"],innerHtml:P}:vt(h)?{...$,attributes:{...$.attributes,"data-mce-color":h},styles:{"background-color":h},innerHtml:P}:$})(),optComponents:[]}},gB=t=>{const s=t.map(a=>({attributes:{id:tn("menu-item"),"aria-label":Hu.translate(a)}})).getOr({});return{tag:"div",classes:[tD,v_],...s}},Y0=(t,s,a,c)=>{const d={tag:"div",classes:[oD]},h=G=>Vu(G,d,s.icons,c),b=()=>M.some({dom:d}),x=a?t.iconContent.map(h).orThunk(b):M.none(),T=t.checkMark,D=M.from(t.meta).fold(()=>lB,G=>po(G,"style")?Qt(wH,G.style):lB),P=t.htmlContent.fold(()=>t.textContent.map(D),G=>M.some(uB(G,[C_])));return{dom:gB(t.ariaLabel),optComponents:[x,P,t.shortcutContent.map(CH),T,t.caret]}},h2=(t,s,a,c=M.none())=>t.presets==="color"?xH(t,s,c):Y0(t,s,a,c),AD=(t,s,a)=>At(t,"tooltipWorker").map(c=>[Ir.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:bp}}),mode:"follow-highlight",onShow:(d,h)=>{c(b=>{Ir.setComponents(d,[Rw({element:_e.fromDom(b)})])})}})]).getOrThunk(()=>a.map(c=>[Ir.config({...s.providers.tooltips.getConfig({tooltipText:c}),mode:"follow-highlight"})]).getOr([])),pB=t=>ub.DOM.encode(t),OD=(t,s)=>{const a=Hu.translate(t),c=pB(a);if(s.length>0){const d=new RegExp(yH(s),"gi");return c.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return c},bB=(t,s,a,c,d,h,b,x=!0)=>{const T=h2({presets:c,textContent:M.none(),htmlContent:a?t.text.map(P=>OD(P,s)):M.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:M.none(),checkMark:M.none(),caret:M.none(),value:t.value},b.providers,x,t.icon),D=t.text.filter(P=>!a&&P!=="");return K0({data:Eb(t),enabled:t.enabled,getApi:ne({}),onAction:P=>d(t.value,t.meta),onSetup:ne(ce),triggersSubmenu:!1,itemBehaviours:AD(t,b,D)},T,h,b.providers)},B_=(t,s)=>tt(t,a=>{switch(a.type){case"cardcontainer":return hB(a,B_(a.items,s));case"cardimage":return SH(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>eo(s.cardText.highlightOn,h))?M.from(s.cardText.matchText).getOr(""):"";return uB(OD(a.text,d),a.classes)}}),DD=(t,s,a,c)=>{const d=b=>({isEnabled:()=>!l.isDisabled(b),setEnabled:x=>{l.set(b,!x),wt(di(b.element,"*"),T=>{b.getSystem().getByDom(T).each(D=>{D.hasConfigured(l)&&l.set(D,!x)})})}}),h={dom:gB(t.label),optComponents:[M.some({dom:{tag:"div",classes:[sD,RP]},components:B_(t.items,c)})]};return K0({data:Eb({text:M.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:M.from(c.itemBehaviours).getOr([])},h,s,a.providers)},RD=(t,s,a,c,d,h,b,x=!0)=>{const T=$=>({setActive:G=>{lo.set($,G)},isActive:()=>lo.isOn($),isEnabled:()=>!l.isDisabled($),setEnabled:G=>l.set($,!G)}),D=h2({presets:a,textContent:s?t.text:M.none(),htmlContent:M.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:M.none(),checkMark:s?M.some(dB(b.icons)):M.none(),caret:M.none(),value:t.value},b,x),P=t.text.filter(ne(!s)).map($=>Ir.config(b.tooltips.getConfig({tooltipText:b.translate($)})));return Ds(K0({data:Eb(t),enabled:t.enabled,getApi:T,onAction:$=>c(t.value),onSetup:$=>($.setActive(d),ce),triggersSubmenu:!1,itemBehaviours:[...P.toArray()]},D,h,b),{toggling:{toggleClass:w_,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},MD=OE(QE(),SO()),vB=t=>({value:CB(t)}),ND=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,yB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,wB=t=>ND.test(t)||yB.test(t),CB=t=>dl(t,"#").toUpperCase(),SB=t=>wB(t)?M.some({value:CB(t)}):M.none(),xB=t=>({value:t.value.replace(ND,(a,c,d,h)=>c+c+d+d+h+h)}),EB=t=>{const s=xB(t),a=yB.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},PD=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},g2=t=>{const s=PD(t.red)+PD(t.green)+PD(t.blue);return vB(s)},_B=Math.min,TB=Math.max,I_=Math.round,EH=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,_H=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,_b=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),BD=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},kB=t=>{let s,a,c;const d=(t.hue||0)%360;let h=t.saturation/100,b=t.value/100;if(h=TB(0,_B(h,1)),b=TB(0,_B(b,1)),h===0)return s=a=c=I_(255*b),_b(s,a,c,1);const x=d/60,T=b*h,D=T*(1-Math.abs(x%2-1)),P=b-T;switch(Math.floor(x)){case 0:s=T,a=D,c=0;break;case 1:s=D,a=T,c=0;break;case 2:s=0,a=T,c=D;break;case 3:s=0,a=D,c=T;break;case 4:s=D,a=0,c=T;break;case 5:s=T,a=0,c=D;break;default:s=a=c=0}return s=I_(255*(s+P)),a=I_(255*(a+P)),c=I_(255*(c+P)),_b(s,a,c,1)},p2=t=>{const s=EB(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return _b(a,c,d,1)},ID=(t,s,a,c)=>{const d=parseInt(t,10),h=parseInt(s,10),b=parseInt(a,10),x=parseFloat(c);return _b(d,h,b,x)},LD=t=>{const s=EH.exec(t);if(s!==null)return M.some(ID(s[1],s[2],s[3],"1"));const a=_H.exec(t);return a!==null?M.some(ID(a[1],a[2],a[3],a[4])):M.none()},AB=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,OB=_b(255,0,0,1),TH=t=>{t.dispatch("SkinLoaded")},kH=(t,s)=>{t.dispatch("SkinLoadError",s)},L_=t=>{t.dispatch("ResizeEditor")},F_=(t,s)=>{t.dispatch("ResizeContent",s)},AH=(t,s)=>{t.dispatch("ScrollContent",s)},DB=(t,s)=>{t.dispatch("TextColorChange",s)},OH=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},DH=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),RH=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},MH=(t,s)=>{t.dispatch("StylesTextUpdate",s)},FD=(t,s)=>{t.dispatch("AlignTextUpdate",s)},RB=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},MB=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},NH=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},NB=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},PH=t=>{t.dispatch("ToggleSidebar")},BH=t=>{t.dispatch("ToggleView")},$_=(t,s)=>()=>{t(),s()},Ic=t=>Tb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),IH=(t,s)=>a=>{const c=pa(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);c.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},H_=(t,s)=>a=>{const c=Ic(t)(a),d=IH(t,s)(a);return()=>{c(),d()}},Tb=(t,s,a)=>c=>{const d=()=>a(c),h=()=>{a(c),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},PB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},iu=(t,s)=>()=>t.execCommand(s);var kb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const b2={},$D=(t,s=10)=>{const a=kb.getItem(t),c=j(a)?JSON.parse(a):[],h=(D=>s-D.length<0?D.slice(0,s):D)(c),b=D=>{nt(h,D).each(x),h.unshift(D),h.length>s&&h.pop(),kb.setItem(t,JSON.stringify(h))},x=D=>{h.splice(D,1)};return{add:b,state:()=>h.slice(0)}},V_=t=>At(b2,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=kb.getItem(s);if(Nt(a)){const d=kb.getItem("tinymce-custom-colors");kb.setItem(s,vt(d)?d:"[]")}const c=$D(s,10);return b2[t]=c,c}),BB=t=>tt(V_(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),IB=(t,s)=>{V_(t).add(s)},v2=(t,s,a)=>({hue:t,saturation:s,value:a}),y2=t=>{let s=0,a=0,c=0;const d=t.red/255,h=t.green/255,b=t.blue/255,x=Math.min(d,Math.min(h,b)),T=Math.max(d,Math.max(h,b));if(x===T)return c=x,v2(0,0,c*100);const D=d===x?h-b:b===x?d-h:b-d;return s=d===x?3:b===x?1:5,s=60*(s-D/(T-x)),a=(T-x)/T,c=T,v2(Math.round(s),Math.round(a*100),Math.round(c*100))},HD=t=>y2(p2(t)),w2=t=>g2(kB(t)),LB=t=>SB(t).orThunk(()=>LD(t).map(g2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],h=c[1],b=c[2],x=c[3];return g2(_b(d,h,b,x))}),VD="forecolor",zD="hilitecolor",LH=5,FH=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+LB(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},dh=t=>s=>s.options.get(t),UD="#000000",$H=t=>{const s=t.options.register,a=d=>Et(d,j)?{value:FH(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=d=>on(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:c,default:WD(t)}),s("color_cols_foreground",{processor:c,default:FB(t,VD)}),s("color_cols_background",{processor:c,default:FB(t,zD)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:UD}),s("color_default_background",{processor:"string",default:UD})},z_=(t,s)=>s===VD&&t.options.isSet("color_map_foreground")?dh("color_map_foreground")(t):s===zD&&t.options.isSet("color_map_background")?dh("color_map_background")(t):dh("color_map")(t),WD=(t,s="default")=>Math.max(LH,Math.ceil(Math.sqrt(z_(t,s).length))),FB=(t,s)=>{const a=dh("color_cols")(t),c=WD(t,s);return a===WD(t)?c:a},$B=(t,s="default")=>Math.round(s===VD?dh("color_cols_foreground")(t):s===zD?dh("color_cols_background")(t):dh("color_cols")(t)),HB=dh("custom_colors"),HH=dh("color_default_foreground"),VB=dh("color_default_background"),VH="rgba(0, 0, 0, 0)",zH=t=>LD(t).exists(s=>s.alpha!==0),fh=t=>yl(t,s=>{if(xo(s)){const a=rs(s,"background-color");return Sn(zH(a),a)}else return M.none()}).getOr(VH),zB=(t,s)=>{const a=_e.fromDom(t.selection.getStart()),c=s==="hilitecolor"?fh(a):rs(a,"color");return LD(c).map(d=>"#"+g2(d).value)},UH=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},ZD=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},fi=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{UH(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{ZD(t,s)})},UB=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},jD=(t,s,a,c)=>{a==="custom"?KB(t)(h=>{h.each(b=>{IB(s,b),t.execCommand("mceApplyTextcolor",s,b),c(b)})},zB(t,s).getOr(UD)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},qD=(t,s,a)=>t.concat(BB(s).concat(UB(a))),WB=(t,s,a)=>c=>{c(qD(t,s,a))},GD=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},ZB=(t,s)=>{t.setTooltip(s)},jB=(t,s)=>a=>{const c=zB(t,s);return Vr(c,a.toUpperCase())},KD=(t,s,a)=>{if(de(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=qD(z_(t,s),s,!1),h=et(d,b=>b.value===a).getOr({text:""}).text;return t.translate([c,t.translate(h)])},qB=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:KD(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:jB(t,a),columns:$B(t,a),fetch:WB(z_(t,a),a,HB(t)),onAction:d=>{jD(t,a,c.get(),ce)},onItemAction:(d,h)=>{jD(t,a,h,b=>{c.set(b),DB(t,{name:s,color:b})})},onSetup:d=>{GD(d,s,c.get());const h=b=>{b.name===s&&(GD(d,b.name,b.color),ZB(d,KD(t,a,b.color)))};return t.on("TextColorChange",h),$_(Ic(t)(d),()=>{t.off("TextColorChange",h)})}})},GB=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(ZB(h,KD(t,a,d.get())),GD(h,s,d.get()),Ic(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:jB(t,a),initData:{storageKey:a},onAction:h=>{jD(t,a,h.value,b=>{d.set(b),DB(t,{name:s,color:b})})}}]})},KB=t=>(s,a)=>{let c=!1;const d=x=>{const D=x.getData().colorpicker;c?(s(M.from(D)),x.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",D]))},h=(x,T)=>{T.name==="hex-valid"&&(c=T.value)},b={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:h,onSubmit:d,onClose:ce,onCancel:()=>{s(M.none())}})},WH=t=>{fi(t);const s=HH(t),a=VB(t),c=mn(s),d=mn(a);qB(t,"forecolor","forecolor",c),qB(t,"backcolor","hilitecolor",d),GB(t,"forecolor","forecolor","Text color",c),GB(t,"backcolor","hilitecolor","Background color",d)},YD=(t,s,a,c,d,h,b,x)=>{const T=T_(s),P=ZH(s,a,c,d!=="color"?"normal":"color",h,b,x);return mD(t,T,P,c,{menuType:d})},ZH=(t,s,a,c,d,h,b)=>Ja(tt(t,x=>x.type==="choiceitem"?fH(x).fold(Mg,T=>M.some(RD(T,a===1,c,s,h(T.value),d,b,T_(t)))):M.none())),U_=(t,s)=>{const a=vb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?tr(d.element,"[aria-checked=true]"):M.none()}},jH=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${y_}`:`.${v_}`}},qH=(t,s)=>{const a=GH(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",b={...YD(tn("menu-value"),a,x=>{t.onAction({value:x})},c,d,df.CLOSE_ON_EXECUTE,t.select.getOr(Me),s.shared.providers),markers:vb(d),movement:U_(c,d),showMenuRole:!1};return{type:"widget",data:{value:tn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[MD.widget(wd.sketch(b))]}},GH=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>qD(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(UB(a)))},YB=tn("cell-over"),XB=tn("cell-execute"),KH=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),YH=(t,s,a)=>{const c=b=>_n(b,YB,{row:t,col:s}),d=b=>_n(b,XB,{row:t,col:s}),h=(b,x)=>{x.stop(),d(b)};return $i({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:xt([no("insert-table-picker-cell",[it(Kc(),Fn.focus),it(Jl(),d),it(Yh(),h),it(fd(),h)]),lo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Fn.config({onFocus:c})])})},XH=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const h=[];for(let b=0;b<a;b++){const x=t(d+1,b+1);h.push(YH(d,b,x))}c.push(h)}return c},JH=(t,s,a,c,d)=>{for(let h=0;h<c;h++)for(let b=0;b<d;b++)lo.set(t[h][b],h<=s&&b<=a)},QH=t=>xe(t,s=>tt(s,Cl)),XD=(t,s)=>hr(`${s}x${t}`),JB={inserttable:(t,s)=>{const d=KH(s),h=XH(d,10,10),b=XD(0,0),x=Jo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[b],behaviours:xt([zn.config({})])});return{type:"widget",data:{value:tn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[MD.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:QH(h).concat(x.asSpec()),behaviours:xt([no("insert-table-picker",[Gs(T=>{zn.set(x.get(T),[b])}),Xy(YB,(T,D,P)=>{const{row:$,col:G}=P.event;JH(h,$,G,10,10),zn.set(x.get(T),[XD($+1,G+1)])}),Xy(XB,(T,D,P)=>{const{row:$,col:G}=P.event;ao(T,y1()),t.onAction({numRows:$+1,numColumns:G+1})})]),En.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:qH},e9=(t,s)=>At(JB,t.fancytype).map(a=>a(t,s)),t9=(t,s,a,c=!0,d=!1)=>{const h=d?mB(a.icons):fB(a.icons),b=T=>({isEnabled:()=>!l.isDisabled(T),setEnabled:D=>l.set(T,!D),setIconFill:(D,P)=>{tr(T.element,`svg path[class="${D}"], rect[class="${D}"]`).each($=>{qt($,"fill",P)})},setTooltip:D=>{const P=a.translate(D);qt(T.element,"aria-label",P)}}),x=h2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,caret:M.some(h),checkMark:M.none(),shortcutContent:t.shortcut},a,c);return K0({data:Eb(t),getApi:b,enabled:t.enabled,onAction:ce,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},x,s,a)},n9=(t,s,a,c=!0)=>{const d=b=>({isEnabled:()=>!l.isDisabled(b),setEnabled:x=>l.set(b,!x)}),h=h2({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,caret:M.none(),checkMark:M.none(),shortcutContent:t.shortcut},a,c);return K0({data:Eb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},QB=t=>({type:"separator",dom:{tag:"div",classes:[v_,DP]},components:t.text.map(hr).toArray()}),o9=(t,s,a,c=!0)=>{const d=b=>({setActive:x=>{lo.set(b,x)},isActive:()=>lo.isOn(b),isEnabled:()=>!l.isDisabled(b),setEnabled:x=>l.set(b,!x)}),h=h2({iconContent:t.icon,textContent:t.text,htmlContent:M.none(),ariaLabel:t.text,checkMark:M.some(dB(a.icons)),caret:M.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Ds(K0({data:Eb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:w_,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},s9=bB,eI=QB,r9=n9,tI=t9,a9=o9,nI=e9,i9=DD;var l9=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),u9=[Fo("others",ql(Yn.value,bl()))],d9=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,b)=>{if(vs(h.others).length===0)throw new Error("Cannot find any known coupled components");return At(t,b)},a=(h,b,x)=>s(b,x).getOrThunk(()=>{const D=At(b.others,x).getOrDie("No information found for coupled component: "+x)(h),P=h.getSystem().build(D);return t[x]=P,P}),c=(h,b,x)=>s(b,x).orThunk(()=>(At(b.others,x).getOrDie("No information found for coupled component: "+x),M.none())),d=ne({});return Xc({readState:d,getExisting:c,getOrCreate:a})}});const jr=li({fields:u9,name:"coupling",apis:l9,state:d9}),JD=t=>{let s=M.none(),a=[];const c=D=>JD(P=>{d($=>{P(D($))})}),d=D=>{b()?T(D):a.push(D)},h=D=>{b()||(s=M.some(D),x(a),a=[])},b=()=>s.isSome(),x=D=>{wt(D,T)},T=D=>{s.each(P=>{setTimeout(()=>{D(P)},0)})};return t(h),{get:d,map:c,isReady:b}},f9={nu:JD,pure:t=>JD(s=>{s(t)})},m9=t=>{setTimeout(()=>{throw t},0)},X0=t=>{const s=T=>{t().then(T,m9)};return{map:T=>X0(()=>t().then(T)),bind:T=>X0(()=>t().then(D=>T(D).toPromise())),anonBind:T=>X0(()=>t().then(()=>T.toPromise())),toLazy:()=>f9.nu(s),toCached:()=>{let T=null;return X0(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},zi={nu:t=>X0(()=>new Promise(t)),pure:t=>X0(()=>Promise.resolve(t))},oI=ne("sink"),sI=ne(Tl({name:oI(),overrides:ne({dom:{tag:"div"},behaviours:xt([Hi.config({useFixed:Pe})]),events:Fs([hd(Du()),hd(Er()),hd(Yh())])})})),rI=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),h=>({type:c,hotspot:a,overrides:d,layouts:h}))},h9=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},g9=(t,s,a,c,d,h,b)=>{const x=h9(t,s,c),T=e4(c,t);return x.map(D=>D.bind(P=>{const $=P.menus[P.primary];return M.from($).each(G=>{t.listRole.each(Y=>{G.role=Y})}),M.from(Fp.sketch({...h.menu(),uid:N1(""),data:P,highlightOnOpen:b,onOpenMenu:(G,Y)=>{const se=T().getOrDie();Hi.position(se,Y,{anchor:a}),Do.decloak(d)},onOpenSubmenu:(G,Y,se)=>{const ie=T().getOrDie();Hi.position(ie,se,{anchor:{type:"submenu",item:Y}}),Do.decloak(d)},onRepositionMenu:(G,Y,se)=>{const ie=T().getOrDie();Hi.position(ie,Y,{anchor:a}),wt(se,Ne=>{Hi.position(ie,Ne.triggeredMenu,{anchor:{type:"submenu",item:Ne.triggeringItem}})})},onEscape:()=>(Fn.focus(c),Do.close(d),M.some(!0))}))}))},J0=(t,s,a,c,d,h,b)=>{const x=rI(t,a);return g9(t,s,x,a,c,d,b).map(D=>(D.fold(()=>{Do.isOpen(c)&&Do.close(c)},P=>{Do.cloak(c),Do.open(c,P),h(c)}),c))},p9=(t,s,a,c,d,h,b)=>(Do.close(c),zi.pure(c)),QD=(t,s,a,c,d,h)=>{const b=jr.getCoupled(a,"sandbox");return(Do.isOpen(b)?p9:J0)(t,s,a,b,c,d,h)},b9=(t,s,a)=>{const c=Ro.getCurrent(s).getOr(s),d=La(t.element);a?lt(c.element,"min-width",d+"px"):Ld(c.element,d)},e4=(t,s)=>t.getSystem().getByUid(s.uid+"-"+oI()).map(a=>()=>Yn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Yn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),t4=t=>{Do.getState(t).each(s=>{Fp.repositionMenus(s)})},n4=(t,s,a)=>{const c=Iw(),d=(x,T)=>{const D=rI(t,s);c.link(s.element),t.matchWidth&&b9(D.hotspot,T,t.useMinWidth),t.onOpen(D,x,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(x,T)},h=(x,T)=>{c.unlink(s.element),b().getOr(T).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(x,T)},b=e4(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id}},behaviours:su.augment(t.sandboxBehaviours,[Xt.config({store:{mode:"memory",initialValue:s}}),Do.config({onOpen:d,onClose:h,isPartOf:(x,T,D)=>dg(T,D)||dg(s,D),getAttachPoint:()=>b().getOrDie()}),Ro.config({find:x=>Do.getState(x).bind(T=>Ro.getCurrent(T))}),Nc.config({channels:{...lh({isExtraPart:Me}),...pC({doReposition:t4})}})])}},aI=t=>{const s=jr.getCoupled(t,"sandbox");t4(s)},W_=()=>[Be("sandboxClasses",[]),su.field("sandboxBehaviours",[Ro,Nc,Do,Xt])],v9=ne([rt("dom"),rt("fetch"),ko("onOpen"),Mc("onExecute"),Be("getHotspot",M.some),Be("getAnchorOverrides",ne({})),th(),Za("dropdownBehaviours",[lo,jr,En,Fn]),rt("toggleClass"),Be("eventOrder",{}),Bo("lazySink"),Be("matchWidth",!1),Be("useMinWidth",!1),Bo("role"),Bo("listRole")].concat(W_())),y9=ne([ru({schema:[dp(),Be("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),sI()]),w9=(t,s,a,c)=>{const d=P=>At(t.dom,"attributes").bind($=>At($,P)),h=P=>{Do.getState(P).each($=>{Fp.highlightPrimary($)})},b=(P,$,G)=>QD(t,Kt,P,c,$,G),x=P=>{b(P,h,Zr.HighlightMenuAndItem).get(ce)},T={expand:P=>{lo.isOn(P)||b(P,ce,Zr.HighlightNone).get(ce)},open:P=>{lo.isOn(P)||b(P,ce,Zr.HighlightMenuAndItem).get(ce)},refetch:P=>jr.getExistingCoupled(P,"sandbox").fold(()=>b(P,ce,Zr.HighlightMenuAndItem).map(ce),G=>J0(t,Kt,P,G,c,ce,Zr.HighlightMenuAndItem).map(ce)),isOpen:lo.isOn,close:P=>{lo.isOn(P)&&b(P,ce,Zr.HighlightMenuAndItem).get(ce)},repositionMenus:P=>{lo.isOn(P)&&aI(P)}},D=(P,$)=>(Nm(P),M.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.dropdownBehaviours,[lo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),jr.config({others:{sandbox:P=>n4(t,P,{onOpen:()=>lo.on(P),onClose:()=>lo.off(P)})}}),En.config({mode:"special",onSpace:D,onEnter:D,onDown:(P,$)=>{if(kd.isOpen(P)){const G=jr.getCoupled(P,"sandbox");h(G)}else kd.open(P);return M.some(!0)},onEscape:(P,$)=>kd.isOpen(P)?(kd.close(P),M.some(!0)):M.none()}),Fn.config({})]),events:XE(M.some(x)),eventOrder:{...t.eventOrder,[Jl()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),P=>({role:P})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},kd=Ki({name:"Dropdown",configFields:v9(),partFields:y9(),factory:w9,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),C9=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},S9=t=>{const s=Xt.getValue(t),a=i2(t).map(VP);kd.refetch(s).get(()=>{const c=jr.getCoupled(s,"sandbox");a.each(d=>i2(c).each(h=>j8(h,d)))})},Z_=(t,s)=>{x9(t).each(a=>{Gy(t,a.element,s.event.eventType,s.event.interactionEvent)})},x9=t=>Do.getState(t).bind(bn.getHighlighted).bind(bn.getHighlighted),j_=t=>Jc(t.element,wb)?M.some(t.element):tr(t.element,"."+wb),iI=(t,s,a)=>{HP(t).each(c=>{q8(c,a),j_(s).each(h=>{Dr(h,"id").each(b=>qt(c.element,"aria-controls",b))})}),qt(a.element,"aria-selected","true")},E9=(t,s,a)=>{qt(a.element,"aria-selected","false")},_9=t=>{HP(t).each(s=>Fn.focus(s))},T9=t=>jr.getExistingCoupled(t,"sandbox").bind(i2).map(VP).map(a=>a.fetchPattern).getOr("");var o4;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(o4||(o4={}));const q_=(t,s,a,c,d)=>{const h=a.shared.providers,b=x=>d?{...x,shortcut:M.none(),icon:x.text.isSome()?M.none():x.icon}:x;switch(t.type){case"menuitem":return hH(t).fold(Mg,x=>M.some(r9(b(x),s,h,c)));case"nestedmenuitem":return pH(t).fold(Mg,x=>M.some(tI(b(x),s,h,c,d)));case"togglemenuitem":return sB(t).fold(Mg,x=>M.some(a9(b(x),s,h,c)));case"separator":return XP(t).fold(Mg,x=>M.some(eI(x)));case"fancymenuitem":return M_(t).fold(Mg,x=>nI(x,a));default:return console.error("Unknown item in general menu",t),M.none()}},Q0=(t,s,a,c,d,h,b)=>{const x=c===1,T=!x||T_(t);return Ja(tt(t,D=>{switch(D.type){case"separator":return rH(D).fold(Mg,P=>M.some(eI(P)));case"cardmenuitem":return dH(D).fold(Mg,P=>M.some(i9({...P,onAction:$=>{P.onAction($),a(P.value,P.meta)}},d,h,{itemBehaviours:AD(P.meta,h,M.none()),cardText:{matchText:s,highlightOn:b}})));case"autocompleteitem":default:return aH(D).fold(Mg,P=>M.some(s9(P,s,x,"normal",a,d,h,T)))}}))},s4=(t,s,a,c,d,h)=>{const b=T_(s),x=Ja(tt(s,P=>{const $=Y=>d?!po(Y,"text"):b,G=Y=>q_(Y,a,c,$(Y),d);return P.type==="nestedmenuitem"&&P.getSubmenuItems().length<=0?G({...P,enabled:!1}):G(P)})),T=C9(h);return(d?Y8:mD)(t,b,x,1,T)},G_=t=>Fp.singleData(t.value,t),k9=(t,s,a,c)=>{const d=U_(s,c),h=vb(c);return{data:G_({...t,movement:d,menuBehaviours:q0.unnamedEvents(s!=="auto"?[]:[Gs((b,x)=>{_D(b,4,h.item).each(({numColumns:T,numRows:D})=>{En.setGridSize(b,D,T)})})])}),menu:{markers:vb(c),fakeFocus:a===o4.ContentFocus}}},A9=t=>z1.create(_e.fromDom(t.startContainer),t.startOffset,_e.fromDom(t.endContainer),t.endOffset),O9={register:(t,s)=>{const a=tn("autocompleter"),c=mn(!1),d=mn(!1),h=ts(),b=$i(nr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:xt([no("dismissAutocompleter",[it(Rm(),()=>$()),it(Mm(),(he,ke)=>{Dr(ke.event.target,"id").each(Ae=>qt(_e.fromDom(t.getBody()),"aria-activedescendant",Ae))})])]),lazySink:s.getSink})),x=()=>nr.isOpen(b),T=d.get,D=()=>{if(x()){nr.hide(b),t.dom.remove(a,!1);const he=_e.fromDom(t.getBody());Dr(he,"aria-owns").filter(ke=>ke===a).each(()=>{H(he,"aria-owns"),H(he,"aria-activedescendant")})}},P=()=>nr.getContent(b).bind(he=>Po(he.components(),0)),$=()=>t.execCommand("mceAutocompleterClose"),G=he=>{const ke=bs(he,Ae=>M.from(Ae.columns)).getOr(1);return xe(he,Ae=>{const st=Ae.items;return Q0(st,Ae.matchText,(Ke,Ft)=>{const Jt={hide:()=>$(),reload:Qe=>{D(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Qe})}};t.execCommand("mceAutocompleterRefreshActiveRange"),h.get().each(Qe=>{c.set(!0),Ae.onAction(Jt,Qe,Ke,Ft),c.set(!1)})},ke,df.BUBBLE_TO_SANDBOX,s,Ae.highlightOn)})},Y=(he,ke)=>{const Ae=bs(he,st=>M.from(st.columns)).getOr(1);nr.showMenuAt(b,{anchor:{type:"selection",getSelection:()=>h.get().map(A9),root:_e.fromDom(t.getBody())}},k9(mD("autocompleter-value",!0,ke,Ae,{menuType:"normal"}),Ae,o4.ContentFocus,"normal")),P().each(bn.highlightFirst)},se=he=>{const ke=G(he);ke.length>0?(Y(he,ke),qt(_e.fromDom(t.getBody()),"aria-owns",a),t.inline||ie()):D()},ie=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const he=t.getDoc().documentElement,ke=t.selection.getNode(),Ae=mv(b.element);Gn(Ae,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ke.offsetTop}px`,left:`${ke.offsetLeft}px`}),t.dom.add(he,Ae.dom),tr(Ae,'[role="menu"]').each(st=>{Xn(st,"position"),Xn(st,"max-height")})};t.on("AutocompleterStart",({lookupData:he})=>{d.set(!0),c.set(!1),se(he)}),t.on("AutocompleterUpdate",({lookupData:he})=>se(he)),t.on("AutocompleterUpdateActiveRange",({range:he})=>h.set(he)),t.on("AutocompleterEnd",()=>{D(),d.set(!1),c.set(!1),h.clear()});const Ne={cancelIfNecessary:$,isMenuOpen:x,isActive:T,isProcessingAction:c.get,getMenu:P};OP.setup(Ne,t)}},C2=(t,s,a)=>Nu(t,s,a).isSome(),cI=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},lI=5,D9=400,uI=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?M.none():M.some(s.touches[0])},R9=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>lI||c>lI},M9=t=>{const s=ts(),a=mn(!1),c=cI(D=>{t.triggerEvent(Li(),D),a.set(!0)},D9),d=D=>(uI(D).each(P=>{c.cancel();const $={x:P.clientX,y:P.clientY,target:D.target};c.schedule(D),a.set(!1),s.set($)}),M.none()),h=D=>(c.cancel(),uI(D).each(P=>{s.on($=>{R9(P,$)&&s.clear()})}),M.none()),b=D=>{c.cancel();const P=$=>Uo($.target,D.target);return s.get().filter(P).map($=>a.get()?(D.prevent(),!1):t.triggerEvent(fd(),D))},x=Yo([{key:Yl(),value:d},{key:No(),value:h},{key:Ms(),value:b}]);return{fireIfReady:(D,P)=>At(x,P).bind($=>$(D))}},dI=t=>t.raw.which===ir[0]&&!eo(["input","textarea"],oa(t.target))&&!C2(t.target,'[contenteditable="true"]'),ey=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=M9(a),h=tt(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),Y=>dc(t,Y,se=>{d.fireIfReady(se,Y).each(Ne=>{Ne&&se.kill()}),a.triggerEvent(Y,se)&&se.kill()})),b=ts(),x=dc(t,"paste",Y=>{d.fireIfReady(Y,"paste").each(ie=>{ie&&Y.kill()}),a.triggerEvent("paste",Y)&&Y.kill(),b.set(setTimeout(()=>{a.triggerEvent(Hf(),Y)},0))}),T=dc(t,"keydown",Y=>{a.triggerEvent("keydown",Y)?Y.kill():a.stopBackspace&&dI(Y)&&Y.prevent()}),D=dc(t,"focusin",Y=>{a.triggerEvent("focusin",Y)&&Y.kill()}),P=ts(),$=dc(t,"focusout",Y=>{a.triggerEvent("focusout",Y)&&Y.kill(),P.set(setTimeout(()=>{a.triggerEvent(Dm(),Y)},0))});return{unbind:()=>{wt(h,Y=>{Y.unbind()}),T.unbind(),D.unbind(),$.unbind(),x.unbind(),b.on(clearTimeout),P.on(clearTimeout)}}},jp=(t,s)=>{const a=At(t,"target").getOr(s);return mn(a)},N9=(t,s)=>{const a=mn(!1),c=mn(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},fI=t=>{const s=mn(!1);return{stop:()=>{s.set(!0)},cut:ce,isStopped:s.get,isCut:Me,event:t,setSource:ve("Cannot set source of a broadcasted event"),getSource:ve("Cannot get source of a broadcasted event")}},ty=te.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),S2=(t,s,a,c,d,h)=>{const b=t(s,c),x=N9(a,d);return b.fold(()=>(h.logEventNoHandlers(s,c),ty.complete()),T=>{const D=T.descHandler;return mp(D)(x),x.isStopped()?(h.logEventStopped(s,T.element,D.purpose),ty.stopped()):x.isCut()?(h.logEventCut(s,T.element,D.purpose),ty.complete()):Ia(T.element).fold(()=>(h.logNoParent(s,T.element,D.purpose),ty.complete()),$=>(h.logEventResponse(s,T.element,D.purpose),ty.resume($)))})},mI=(t,s,a,c,d,h)=>S2(t,s,a,c,d,h).fold(Pe,b=>mI(t,s,a,b,d,h),Me),x2=(t,s,a,c,d)=>{const h=jp(a,c);return S2(t,s,a,c,h,d)},E2=(t,s,a)=>{const c=fI(s);return wt(t,d=>{const h=d.descHandler;mp(h)(c)}),c.isStopped()},P9=(t,s,a,c)=>hI(t,s,a,a.target,c),hI=(t,s,a,c,d)=>{const h=jp(a,c);return mI(t,s,a,c,h,d)},B9=(t,s)=>({element:t,descHandler:s}),I9=(t,s)=>({id:t,descHandler:s}),L9=()=>{const t={},s=(b,x,T)=>{Cs(T,(D,P)=>{const $=t[P]!==void 0?t[P]:{};$[x]=fp(D,b),t[P]=$})},a=(b,x)=>pd(x).bind(T=>At(b,T)).map(T=>B9(x,T));return{registerId:s,unregisterId:b=>{Cs(t,(x,T)=>{po(x,b)&&delete x[b]})},filterByType:b=>At(t,b).map(x=>Zi(x,(T,D)=>I9(D,T))).getOr([]),find:(b,x,T)=>At(t,x).bind(D=>yl(T,P=>a(D,P),b))}},F9=()=>{const t=L9(),s={},a=D=>{const P=D.element;return pd(P).getOrThunk(()=>ux("uid-",D.element))},c=(D,P)=>{const $=s[P];if($===D)h(D);else throw new Error('The tagId "'+P+'" is already used by: '+Vm($.element)+`
Cannot use it for: `+Vm(D.element)+`
The conflicting element is`+(en($.element)?" ":" not ")+"already in the DOM")},d=D=>{const P=a(D);Hr(s,P)&&c(D,P);const $=[D];t.registerId($,P,D.events),s[P]=D},h=D=>{pd(D.element).each(P=>{delete s[P],t.unregisterId(P)})};return{find:(D,P,$)=>t.find(D,P,$),filter:D=>t.filterByType(D),register:d,unregister:h,getById:D=>At(s,D)}},am=il({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Q1(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Be("components",[]),Za("containerBehaviours",[]),Be("events",{}),Be("domModification",{}),Be("eventOrder",{})]}),_2=t=>{const s=he=>Ia(t.element).fold(Pe,ke=>Uo(he,ke)),a=F9(),c=(he,ke)=>a.find(s,he,ke),d=ey(t.element,{triggerEvent:(he,ke)=>Uf(he,ke.target,Ae=>P9(c,he,ke,Ae))}),h={debugInfo:ne("real"),triggerEvent:(he,ke,Ae)=>{Uf(he,ke,st=>hI(c,he,Ae,ke,st))},triggerFocus:(he,ke)=>{pd(he).fold(()=>{Sl(he)},Ae=>{Uf(dd(),he,st=>(x2(c,dd(),{originator:ke,kill:ce,prevent:ce,target:he},he,st),!1))})},triggerEscape:(he,ke)=>{h.triggerEvent("keydown",he.element,ke.event)},getByUid:he=>ie(he),getByDom:he=>Ne(he),build:$i,buildOrPatch:kv,addToGui:he=>{T(he)},removeFromGui:he=>{D(he)},addToWorld:he=>{b(he)},removeFromWorld:he=>{x(he)},broadcast:he=>{G(he)},broadcastOn:(he,ke)=>{Y(he,ke)},broadcastEvent:(he,ke)=>{se(he,ke)},isConnected:Pe},b=he=>{he.connect(h),sa(he.element)||(a.register(he),wt(he.components(),b),h.triggerEvent(w1(),he.element,{target:he.element}))},x=he=>{sa(he.element)||(wt(he.components(),x),a.unregister(he)),he.disconnect()},T=he=>{Bu(t,he)},D=he=>{Xf(he)},P=()=>{d.unbind(),Ni(t.element)},$=he=>{const ke=a.filter(Xl());wt(ke,Ae=>{const st=Ae.descHandler;mp(st)(he)})},G=he=>{$({universal:!0,data:he})},Y=(he,ke)=>{$({universal:!1,channels:he,data:ke})},se=(he,ke)=>{const Ae=a.filter(he);return E2(Ae,ke)},ie=he=>a.getById(he).fold(()=>Yn.error(new Error('Could not find component with uid: "'+he+'" in system.')),Yn.value),Ne=he=>{const ke=pd(he).getOr("not found");return ie(ke)};return b(t),{root:t,element:t.element,destroy:P,add:T,remove:D,getByUid:ie,getByDom:Ne,addToWorld:b,removeFromWorld:x,broadcast:G,broadcastOn:Y,broadcastEvent:se}},$9=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:tt(t.items,s.interpreter)}),H9=ne([Be("prefix","form-field"),Za("fieldBehaviours",[Ro,Xt])]),V9=ne([Tl({schema:[rt("dom")],name:"label"}),Tl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[rt("text")],name:"aria-descriptor"}),Ti({factory:{sketch:t=>{const s=jn(t,["factory"]);return t.factory.sketch(s)}},schema:[rt("factory")],name:"field"})]),gI=(t,s,a,c)=>{const d=ja(t.fieldBehaviours,[Ro.config({find:x=>bt(x,t,"field")}),Xt.config({store:{mode:"manual",getValue:x=>Ro.getCurrent(x).bind(Xt.getValue),setValue:(x,T)=>{Ro.getCurrent(x).each(D=>{Xt.setValue(D,T)})}}})]),h=Fs([Gs((x,T)=>{const D=PE(x,t,["label","field","aria-descriptor"]);D.field().each(P=>{const $=tn(t.prefix);D.label().each(G=>{qt(G.element,"for",$),qt(P.element,"id",$)}),D["aria-descriptor"]().each(G=>{const Y=tn(t.prefix);qt(G.element,"id",Y),qt(P.element,"aria-describedby",Y)})})})]),b={getField:x=>bt(x,t,"field"),getLabel:x=>bt(x,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:b}},fs=Ki({name:"FormField",configFields:H9(),partFields:V9(),factory:gI,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var z9=tinymce.util.Tools.resolve("tinymce.html.Entities");const T2=(t,s,a,c)=>{const d=U9(t,s,a,c);return fs.sketch(d)},pI=(t,s)=>T2(t,s,[],[]),U9=(t,s,a,c)=>({dom:bI(a),components:t.toArray().concat([s]),fieldBehaviours:xt(c)}),W9=()=>bI([]),bI=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),qp=(t,s)=>fs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[hr(s.translate(t))]}),Rl=tn("form-component-change"),ny=tn("form-close"),Bg=tn("form-cancel"),mh=tn("form-action"),k2=tn("form-submit"),a4=tn("form-block"),i4=tn("form-unblock"),vI=tn("form-tabchange"),c4=tn("form-resize"),oy=(t,s,a)=>{const c=t.label.map(Y=>qp(Y,s)),d=s.icons(),h=Y=>{var se;return(se=d[Y])!==null&&se!==void 0?se:Y},b=Y=>(se,ie)=>{Nu(ie.event.target,"[data-collection-item-value]").each(Ne=>{Y(se,ie,Ne,pn(Ne,"data-collection-item-value"))})},x=(Y,se)=>{const ie=tt(se,ke=>{const Ae=Hu.translate(ke.text),st=t.columns===1?`<div class="tox-collection__item-label">${Ae}</div>`:"",Ke=`<div class="tox-collection__item-icon">${h(ke.icon)}</div>`,Ft={_:" "," - ":" ","-":" "},Jt=Ae.replace(/\_| \- |\-/g,ln=>Ft[ln]),Qe=s.isDisabled()?" tox-collection__item--state-disabled":"";return`<div data-mce-tooltip="${Jt}" class="tox-collection__item${Qe}" tabindex="-1" data-collection-item-value="${z9.encodeAllRaw(ke.value)}" aria-label="${Jt}">${Ke}${st}</div>`}),Ne=t.columns!=="auto"&&t.columns>1?os(ie,t.columns):[ie],he=tt(Ne,ke=>`<div class="tox-collection__group">${ke.join("")}</div>`);Hm(Y.element,he.join(""))},T=b((Y,se,ie,Ne)=>{se.stop(),s.isDisabled()||_n(Y,mh,{name:t.name,value:Ne})}),D=[it(Kc(),b((Y,se,ie)=>{Sl(ie)})),it(Yh(),T),it(fd(),T),it(ld(),b((Y,se,ie)=>{tr(Y.element,"."+zp).each(Ne=>{mr(Ne,zp)}),$s(ie,zp)})),it(qd(),b(Y=>{tr(Y.element,"."+zp).each(se=>{mr(se,zp),Bv(se)})})),Ru(b((Y,se,ie,Ne)=>{_n(Y,mh,{name:t.name,value:Ne})}))],P=(Y,se)=>tt(di(Y.element,".tox-collection__item"),se),$=fs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Kt},behaviours:xt([l.config({disabled:s.isDisabled,onDisabled:Y=>{P(Y,se=>{$s(se,"tox-collection__item--state-disabled"),qt(se,"aria-disabled",!0)})},onEnabled:Y=>{P(Y,se=>{mr(se,"tox-collection__item--state-disabled"),H(se,"aria-disabled")})}}),Ga(),zn.config({}),Ir.config({...s.tooltips.getConfig({tooltipText:"",onShow:Y=>{tr(Y.element,"."+zp+"[data-mce-tooltip]").each(se=>{Dr(se,"data-mce-tooltip").each(ie=>{Ir.setComponents(Y,s.tooltips.getComponents({tooltipText:ie}))})})}}),mode:"children-keyboard-focus",anchor:Y=>({type:"node",node:tr(Y.element,"."+zp).orThunk(()=>lc(".tox-collection__item")),root:Y.element,layouts:{onLtr:ne([Ca,wa,ya,us,Pr,xi]),onRtl:ne([Ca,wa,ya,us,Pr,xi])},bubble:Pu(0,-2,{})})}),Xt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(Y,se)=>{x(Y,se),t.columns==="auto"&&_D(Y,5,"tox-collection__item").each(({numRows:ie,numColumns:Ne})=>{En.setGridSize(Y,ie,Ne)}),ao(Y,c4)}}),Vs.config({}),En.config(jH(t.columns,"normal")),no("collection-events",D)]),eventOrder:{[Jl()]:["disabling","alloy.base.behaviour","collection-events"],[ld()]:["collection-events","tooltipping"]}});return T2(c,$,["tox-form__group--collection"],[])},Z9=["input","textarea"],yI=t=>{const s=oa(t);return eo(Z9,s)},wI=(t,s)=>{const a=s.getRoot(t).getOr(t.element);mr(a,s.invalidClass),s.notify.each(c=>{yI(t.element)&&qt(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Hm(d,c.validHtml)}),c.onValid(t)})},A2=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);$s(d,s.invalidClass),s.notify.each(h=>{yI(t.element)&&qt(t.element,"aria-invalid",!0),h.getContainer(t).each(b=>{Hm(b,c)}),h.onInvalid(t,c)})},zu=(t,s,a)=>s.validator.fold(()=>zi.pure(Yn.value(!0)),c=>c.validate(t)),O2=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),zu(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(A2(t,s,a,d),Yn.error(d)),d=>(wI(t,s),Yn.value(d))):Yn.error("No longer in system")));var q9=Object.freeze({__proto__:null,markValid:wI,markInvalid:A2,query:zu,run:O2,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Jc(a,s.invalidClass)}}),G9=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Fs([it(a.onEvent,c=>{O2(c,t,s).get(Kt)})].concat(a.validateOnLoad?[Gs(c=>{O2(c,t,s).get(ce)})]:[]))).getOr({})}),K9=[rt("invalidClass"),Be("getRoot",M.none),Bs("notify",[Be("aria","alert"),Be("getContainer",M.none),Be("validHtml",""),ko("onValid"),ko("onInvalid"),ko("onValidate")]),Bs("validator",[rt("validate"),Be("onEvent","input"),Be("validateOnLoad",!0)])];const im=li({fields:K9,name:"invalidating",active:G9,apis:q9,extra:{validation:t=>s=>{const a=Xt.getValue(s);return zi.pure(t(a))}}});var X9=Object.freeze({__proto__:null,events:()=>Fs([qS(Uy(),Pe)]),exhibit:()=>Yc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const sy=li({fields:[],name:"unselecting",active:X9}),J9=(t,s)=>kd.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:xt([mf.button(s.providers.isDisabled),Ga(),sy.config({}),Vs.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>zi.nu(c=>t.fetch(c)).map(c=>M.from(G_(Ds(YD(tn("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,df.CLOSE_ON_EXECUTE,Me,s.providers),{movement:U_(t.columns,t.presets)})))),parts:{menu:a2(!1,1,t.presets)}}),l4=tn("color-input-change"),u4=tn("color-swatch-change"),d4=tn("color-picker-cancel"),Q9=(t,s,a,c)=>{const d=fs.parts.field({factory:yb,inputClasses:["tox-textfield"],data:c,onSetValue:D=>im.run(D).get(ce),inputBehaviours:xt([l.config({disabled:s.providers.isDisabled}),Ga(),Vs.config({}),im.config({invalidClass:"tox-textbox-field-invalid",getRoot:D=>Mi(D.element),notify:{onValid:D=>{const P=Xt.getValue(D);_n(D,l4,{color:P})}},validator:{validateOnLoad:!1,validate:D=>{const P=Xt.getValue(D);if(P.length===0)return zi.pure(Yn.value(!0));{const $=_e.fromTag("span");lt($,"background-color",P);const G=Os($,"background-color").fold(()=>Yn.error("blah"),Y=>Yn.value(P));return zi.pure(G)}}}})]),selectOnFocus:!1}),h=t.label.map(D=>qp(D,s.providers)),b=(D,P)=>{_n(D,u4,{value:P})},x=(D,P)=>{T.getOpt(D).each($=>{P==="custom"?a.colorPicker(G=>{G.fold(()=>ao($,d4),Y=>{b($,Y),IB(t.storageKey,Y)})},"#ffffff"):P==="remove"?b($,""):b($,P)})},T=Jo(J9({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Pr,ya,Ca],onLtr:()=>[ya,Pr,Ca]},components:[],fetch:WB(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:x},s));return fs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:xt([no("form-field-events",[it(l4,(D,P)=>{T.getOpt(D).each($=>{lt($.element,"background-color",P.event.color)}),_n(D,Rl,{name:t.name})}),it(u4,(D,P)=>{fs.getField(D).each($=>{Xt.setValue($,P.event.value),Ro.getCurrent(D).each(Fn.focus)})}),it(d4,(D,P)=>{fs.getField(D).each($=>{Ro.getCurrent(D).each(Fn.focus)})})])])})},eV=Tl({schema:[rt("dom")],name:"label"}),Gp=t=>Tl({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:Fs([eg(Yl(),(d,h,b)=>c(d,b),[s]),eg(Er(),(d,h,b)=>c(d,b),[s]),eg(tp(),(d,h,b)=>{b.mouseIsDown.get()&&c(d,b)},[s])])}))}),tV=Gp("top-left"),nV=Gp("top"),oV=Gp("top-right"),f4=Gp("right"),sV=Gp("bottom-right"),rV=Gp("bottom"),CI=Gp("bottom-left"),aV=Gp("left"),iV=Ti({name:"thumb",defaults:ne({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Fs([tg(Yl(),t,"spectrum"),tg(No(),t,"spectrum"),tg(Ms(),t,"spectrum"),tg(Er(),t,"spectrum"),tg(tp(),t,"spectrum"),tg($f(),t,"spectrum")])})}),K_=t=>Fu(t.event),cV=Ti({schema:[Lo("mouseIsDown",()=>mn(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,h)=>a.getValueFromEvent(h).map(b=>a.setValueFrom(d,t,b));return{behaviours:xt([En.config({mode:"special",onLeft:(d,h)=>a.onLeft(d,t,K_(h)),onRight:(d,h)=>a.onRight(d,t,K_(h)),onUp:(d,h)=>a.onUp(d,t,K_(h)),onDown:(d,h)=>a.onDown(d,t,K_(h))}),Vs.config({}),Fn.config({})]),events:Fs([it(Yl(),c),it(No(),c),it(Er(),c),it(tp(),(d,h)=>{t.mouseIsDown.get()&&c(d,h)})])}}});var lV=[eV,aV,f4,nV,rV,tV,oV,CI,sV,iV,cV];const D2=ne("slider.change.value"),SI=t=>t.type.indexOf("touch")!==-1,Y_=t=>{const s=t.event.raw;if(SI(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?M.some(a.touches[0]).map(c=>Js(c.clientX,c.clientY)):M.none()}else{const a=s;return a.clientX!==void 0?M.some(a).map(c=>Js(c.clientX,c.clientY)):M.none()}},uV="top",dV="right",fV="bottom",mV="left",Ab=t=>t.model.minX,Ob=t=>t.model.minY,R2=t=>t.model.minX-1,M2=t=>t.model.minY-1,Kp=t=>t.model.maxX,Ig=t=>t.model.maxY,X_=t=>t.model.maxX+1,N2=t=>t.model.maxY+1,xI=(t,s,a)=>s(t)-a(t),m4=t=>xI(t,Kp,Ab),h4=t=>xI(t,Ig,Ob),EI=t=>m4(t)/2,J_=t=>h4(t)/2,Uu=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,_I=t=>t.snapToGrid,ry=t=>t.snapStart,TI=t=>t.rounded,ay=(t,s)=>t[s+"-edge"]!==void 0,kI=t=>ay(t,mV),AI=t=>ay(t,dV),OI=t=>ay(t,uV),g4=t=>ay(t,fV),Lg=t=>t.model.value.get(),hh=(t,s)=>({x:t,y:s}),Wu=(t,s)=>{_n(t,D2(),{value:s})},p4=(t,s)=>{Wu(t,hh(R2(s),M2(s)))},hV=(t,s)=>{Wu(t,M2(s))},Zu=(t,s)=>{Wu(t,hh(EI(s),M2(s)))},gV=(t,s)=>{Wu(t,hh(X_(s),M2(s)))},pV=(t,s)=>{Wu(t,X_(s))},DI=(t,s)=>{Wu(t,hh(X_(s),J_(s)))},RI=(t,s)=>{Wu(t,hh(X_(s),N2(s)))},bV=(t,s)=>{Wu(t,N2(s))},vV=(t,s)=>{Wu(t,hh(EI(s),N2(s)))},yV=(t,s)=>{Wu(t,hh(R2(s),N2(s)))},wV=(t,s)=>{Wu(t,R2(s))},CV=(t,s)=>{Wu(t,hh(R2(s),J_(s)))},b4=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),v4=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),y4=(t,s,a)=>Math.max(s,Math.min(a,t)),SV=(t,s,a,c,d)=>d.fold(()=>{const h=t-s,b=Math.round(h/c)*c;return y4(s+b,s-1,a+1)},h=>{const b=(t-h)%c,x=Math.round(b/c),T=Math.floor((t-h)/c),D=Math.floor((a-h)/c),P=Math.min(D,T+x),$=h+P*c;return Math.max(h,$)}),xV=(t,s,a)=>Math.min(a,Math.max(t,s))-s,MI=t=>{const{min:s,max:a,range:c,value:d,step:h,snap:b,snapStart:x,rounded:T,hasMinEdge:D,hasMaxEdge:P,minBound:$,maxBound:G,screenRange:Y}=t,se=D?s-1:s,ie=P?a+1:a;if(d<$)return se;if(d>G)return ie;{const Ne=xV(d,$,G),he=y4(Ne/Y*c+s,se,ie);return b&&he>=s&&he<=a?SV(he,s,a,h,x):T?Math.round(he):he}},w4=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:h,hasMaxEdge:b,maxBound:x,maxOffset:T,centerMinEdge:D,centerMaxEdge:P}=t;return d<s?h?0:D:d>a?b?x:P:(d-s)/c*T},P2="top",C4="right",S4="bottom",Q_="left",NI="width",x4="height",gh=t=>t.element.dom.getBoundingClientRect(),ju=(t,s)=>t[s],Fg=t=>{const s=gh(t);return ju(s,Q_)},E4=t=>{const s=gh(t);return ju(s,C4)},B2=t=>{const s=gh(t);return ju(s,P2)},_4=t=>{const s=gh(t);return ju(s,S4)},PI=t=>{const s=gh(t);return ju(s,NI)},BI=t=>{const s=gh(t);return ju(s,x4)},I2=(t,s,a)=>(t+s)/2-a,II=(t,s)=>{const a=gh(t),c=gh(s),d=ju(a,Q_),h=ju(a,C4),b=ju(c,Q_);return I2(d,h,b)},LI=(t,s)=>{const a=gh(t),c=gh(s),d=ju(a,P2),h=ju(a,S4),b=ju(c,P2);return I2(d,h,b)},L2=(t,s)=>{_n(t,D2(),{value:s})},eT=(t,s,a)=>{const c={min:Ab(s),max:Kp(s),range:m4(s),value:a,step:Uu(s),snap:_I(s),snapStart:ry(s),rounded:TI(s),hasMinEdge:kI(s),hasMaxEdge:AI(s),minBound:Fg(t),maxBound:E4(t),screenRange:PI(t)};return MI(c)},T4=(t,s,a)=>{const c=eT(t,s,a);return L2(t,c),c},FI=(t,s)=>{const a=Ab(s);L2(t,a)},ll=(t,s)=>{const a=Kp(s);L2(t,a)},$I=(t,s,a,c)=>{const h=(t>0?v4:b4)(Lg(a),Ab(a),Kp(a),Uu(a,c));return L2(s,h),M.some(h)},HI=t=>(s,a,c)=>$I(t,s,a,c).map(Pe),EV=t=>Y_(t).map(a=>a.left),VI=(t,s,a,c,d)=>{const b=PI(t),x=c.bind(P=>M.some(II(P,t))).getOr(0),T=d.bind(P=>M.some(II(P,t))).getOr(b),D={min:Ab(s),max:Kp(s),range:m4(s),value:a,hasMinEdge:kI(s),hasMaxEdge:AI(s),minBound:Fg(t),minOffset:0,maxBound:E4(t),maxOffset:b,centerMinEdge:x,centerMaxEdge:T};return w4(D)},k4=(t,s,a,c,d,h)=>{const b=VI(s,h,a,c,d);return Fg(s)-Fg(t)+b},_V=(t,s,a,c)=>{const d=Lg(a),h=k4(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),b=La(s.element)/2;lt(s.element,"left",h-b+"px")},TV=HI(-1),zI=HI(1),ph=M.none,A4=M.none,UI={"top-left":M.none(),top:M.none(),"top-right":M.none(),right:M.some(pV),"bottom-right":M.none(),bottom:M.none(),"bottom-left":M.none(),left:M.some(wV)};var tT=Object.freeze({__proto__:null,setValueFrom:T4,setToMin:FI,setToMax:ll,findValueOfOffset:eT,getValueFromEvent:EV,findPositionOfValue:k4,setPositionFromValue:_V,onLeft:TV,onRight:zI,onUp:ph,onDown:A4,edgeActions:UI});const iy=(t,s)=>{_n(t,D2(),{value:s})},O4=(t,s,a)=>{const c={min:Ob(s),max:Ig(s),range:h4(s),value:a,step:Uu(s),snap:_I(s),snapStart:ry(s),rounded:TI(s),hasMinEdge:OI(s),hasMaxEdge:g4(s),minBound:B2(t),maxBound:_4(t),screenRange:BI(t)};return MI(c)},kV=(t,s,a)=>{const c=O4(t,s,a);return iy(t,c),c},AV=(t,s)=>{const a=Ob(s);iy(t,a)},OV=(t,s)=>{const a=Ig(s);iy(t,a)},DV=(t,s,a,c)=>{const h=(t>0?v4:b4)(Lg(a),Ob(a),Ig(a),Uu(a,c));return iy(s,h),M.some(h)},WI=t=>(s,a,c)=>DV(t,s,a,c).map(Pe),RV=t=>Y_(t).map(a=>a.top),ZI=(t,s,a,c,d)=>{const b=BI(t),x=c.bind(P=>M.some(LI(P,t))).getOr(0),T=d.bind(P=>M.some(LI(P,t))).getOr(b),D={min:Ob(s),max:Ig(s),range:h4(s),value:a,hasMinEdge:OI(s),hasMaxEdge:g4(s),minBound:B2(t),minOffset:0,maxBound:_4(t),maxOffset:b,centerMinEdge:x,centerMaxEdge:T};return w4(D)},D4=(t,s,a,c,d,h)=>{const b=ZI(s,h,a,c,d);return B2(s)-B2(t)+b},bh=(t,s,a,c)=>{const d=Lg(a),h=D4(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),b=xs(s.element)/2;lt(s.element,"top",h-b+"px")},nT=M.none,MV=M.none,NV=WI(-1),jI=WI(1),qI={"top-left":M.none(),top:M.some(hV),"top-right":M.none(),right:M.none(),"bottom-right":M.none(),bottom:M.some(bV),"bottom-left":M.none(),left:M.none()};var R4=Object.freeze({__proto__:null,setValueFrom:kV,setToMin:AV,setToMax:OV,findValueOfOffset:O4,getValueFromEvent:RV,findPositionOfValue:D4,setPositionFromValue:bh,onLeft:nT,onRight:MV,onUp:NV,onDown:jI,edgeActions:qI});const Db=(t,s)=>{_n(t,D2(),{value:s})},Yp=(t,s)=>({x:t,y:s}),F2=(t,s,a)=>{const c=eT(t,s,a.left),d=O4(t,s,a.top),h=Yp(c,d);return Db(t,h),h},GI=(t,s,a,c,d)=>{const h=t>0?v4:b4,b=s?Lg(c).x:h(Lg(c).x,Ab(c),Kp(c),Uu(c,d)),x=s?h(Lg(c).y,Ob(c),Ig(c),Uu(c,d)):Lg(c).y;return Db(a,Yp(b,x)),M.some(b)},$2=(t,s)=>(a,c,d)=>GI(t,s,a,c,d).map(Pe),KI=(t,s)=>{const a=Ab(s),c=Ob(s);Db(t,Yp(a,c))},YI=(t,s)=>{const a=Kp(s),c=Ig(s);Db(t,Yp(a,c))},PV=t=>Y_(t),BV=(t,s,a,c)=>{const d=Lg(a),h=k4(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),b=D4(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),x=La(s.element)/2,T=xs(s.element)/2;lt(s.element,"left",h-x+"px"),lt(s.element,"top",b-T+"px")},IV=$2(-1,!1),LV=$2(1,!1),FV=$2(-1,!0),XI=$2(1,!0),JI={"top-left":M.some(p4),top:M.some(Zu),"top-right":M.some(gV),right:M.some(DI),"bottom-right":M.some(RI),bottom:M.some(vV),"bottom-left":M.some(yV),left:M.some(CV)};var $V=Object.freeze({__proto__:null,setValueFrom:F2,setToMin:KI,setToMax:YI,getValueFromEvent:PV,setPositionFromValue:BV,onLeft:IV,onRight:LV,onUp:FV,onDown:XI,edgeActions:JI});const QI=[Be("stepSize",1),Be("speedMultiplier",10),Be("onChange",ce),Be("onChoose",ce),Be("onInit",ce),Be("onDragStart",ce),Be("onDragEnd",ce),Be("snapToGrid",!1),Be("rounded",!0),Bo("snapStart"),Fo("model",ba("mode",{x:[Be("minX",0),Be("maxX",100),Lo("value",t=>mn(t.mode.minX)),rt("getInitialValue"),ys("manager",tT)],y:[Be("minY",0),Be("maxY",100),Lo("value",t=>mn(t.mode.minY)),rt("getInitialValue"),ys("manager",R4)],xy:[Be("minX",0),Be("maxX",100),Be("minY",0),Be("maxY",100),Lo("value",t=>mn({x:t.mode.minX,y:t.mode.minY})),rt("getInitialValue"),ys("manager",$V)]})),Za("sliderBehaviours",[En,Xt]),Lo("mouseIsDown",()=>mn(!1))],Ad=Ki({name:"Slider",configFields:QI,partFields:lV,factory:(t,s,a,c)=>{const d=Ke=>kl(Ke,t,"thumb"),h=Ke=>kl(Ke,t,"spectrum"),b=Ke=>bt(Ke,t,"left-edge"),x=Ke=>bt(Ke,t,"right-edge"),T=Ke=>bt(Ke,t,"top-edge"),D=Ke=>bt(Ke,t,"bottom-edge"),P=t.model,$=P.manager,G=(Ke,Ft)=>{$.setPositionFromValue(Ke,Ft,t,{getLeftEdge:b,getRightEdge:x,getTopEdge:T,getBottomEdge:D,getSpectrum:h})},Y=(Ke,Ft)=>{P.value.set(Ft);const Jt=d(Ke);G(Ke,Jt)},se=(Ke,Ft)=>{Y(Ke,Ft);const Jt=d(Ke);return t.onChange(Ke,Jt,Ft),M.some(!0)},ie=Ke=>{$.setToMin(Ke,t)},Ne=Ke=>{$.setToMax(Ke,t)},he=Ke=>{const Ft=()=>{bt(Ke,t,"thumb").each(Qe=>{const ln=P.value.get();t.onChoose(Ke,Qe,ln)})},Jt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Jt&&Ft()},ke=(Ke,Ft)=>{Ft.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ke,d(Ke))},Ae=(Ke,Ft)=>{Ft.stop(),t.onDragEnd(Ke,d(Ke)),he(Ke)},st=Ke=>{bt(Ke,t,"spectrum").map(En.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.sliderBehaviours,[En.config({mode:"special",focusIn:st}),Xt.config({store:{mode:"manual",getValue:Ke=>P.value.get(),setValue:Y}}),Nc.config({channels:{[h0()]:{onReceive:he}}})]),events:Fs([it(D2(),(Ke,Ft)=>{se(Ke,Ft.event.value)}),Gs((Ke,Ft)=>{const Jt=P.getInitialValue();P.value.set(Jt);const Qe=d(Ke);G(Ke,Qe);const ln=h(Ke);t.onInit(Ke,Qe,ln,P.value.get())}),it(Yl(),ke),it(Ms(),Ae),it(Er(),(Ke,Ft)=>{st(Ke),ke(Ke,Ft)}),it($f(),Ae)]),apis:{resetToMin:ie,resetToMax:Ne,setValue:Y,refresh:G},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),Rb=tn("rgb-hex-update"),eL=tn("slider-update"),M4=tn("palette-update"),HV=(t,s)=>{const a=Ad.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Ad.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ad.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ne(0)},components:[a,c],sliderBehaviours:xt([Fn.config({})]),onChange:(d,h,b)=>{qt(d.element,"aria-valuenow",Math.floor(360-b*3.6)),_n(d,eL,{value:b})}})},tL="form",VV=[Za("formBehaviours",[Xt])],nL=t=>"<alloy.field."+t+">",oL=t=>{const s=(()=>{const h=[];return{field:(x,T)=>(h.push(x),RE(tL,nL(x),T)),record:ne(h)}})(),a=t(s),c=s.record(),d=tt(c,h=>Ti({name:h,pname:nL(h)}));return uh(tL,VV,d,sL,a)},zV=(t,s)=>t.fold(()=>Yn.error(s),Yn.value),sL=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.formBehaviours,[Xt.config({store:{mode:"manual",getValue:a=>{const c=TC(a,t);return Vo(c,(d,h)=>d().bind(b=>{const x=Ro.getCurrent(b);return zV(x,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+Vm(b.element)))}).map(Xt.getValue))},setValue:(a,c)=>{Cs(c,(d,h)=>{bt(a,t,h).each(b=>{Ro.getCurrent(b).each(x=>{Xt.setValue(x,d)})})})}}})]),apis:{getField:(a,c)=>bt(a,t,c).bind(Ro.getCurrent)}}),Xp={getField:vv((t,s,a)=>t.getField(s,a)),sketch:oL},vh=tn("valid-input"),oT=tn("invalid-input"),N4=tn("validating-input"),sT="colorcustom.rgb.",P4={isEnabled:Pe,setEnabled:ce,immediatelyShow:ce,immediatelyHide:ce},rL=(t,s,a,c,d,h)=>{const b=(ie,Ne)=>{const he=Ne.get();ie!==he.isEnabled()&&(he.setEnabled(ie),ie?he.immediatelyShow():he.immediatelyHide())},x=(ie,Ne,he)=>im.config({invalidClass:s("invalid"),notify:{onValidate:ke=>{_n(ke,N4,{type:ie})},onValid:ke=>{b(!1,he),_n(ke,vh,{type:ie,value:Xt.getValue(ke)})},onInvalid:ke=>{b(!0,he),_n(ke,oT,{type:ie,value:Xt.getValue(ke)})}},validator:{validate:ke=>{const Ae=Xt.getValue(ke),st=Ne(Ae)?Yn.value(!0):Yn.error(t("aria.input.invalid"));return zi.pure(st)},validateOnLoad:!1}}),T=(ie,Ne,he,ke,Ae)=>{const st=mn(P4),Ke=t(sT+"range"),Ft=fs.parts.label({dom:{tag:"label",attributes:{"aria-label":ke}},components:[hr(he)]}),Jt=fs.parts.field({data:Ae,factory:yb,inputAttributes:{type:"text",...Ne==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:xt([x(Ne,ie,st),Vs.config({}),Ir.config({...d({tooltipText:"",onSetup:jo=>{st.set({isEnabled:()=>Ir.isEnabled(jo),setEnabled:dn=>Ir.setEnabled(jo,dn),immediatelyShow:()=>Ir.immediateOpenClose(jo,!0),immediatelyHide:()=>Ir.immediateOpenClose(jo,!1)}),Ir.setEnabled(jo,!1)},onShow:(jo,dn)=>{Ir.setComponents(jo,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[hr(t(Ne==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:jo=>{im.isInvalid(jo)&&im.run(jo).get(ce)}}),Qe=tn("aria-invalid"),ln=Jo(h("invalid",M.some(Qe),"warning")),It=Jo({dom:{tag:"div",classes:[s("invalid-icon")]},components:[ln.asSpec()]}),fn=[Ft,Jt,It.asSpec()],bo=Ne!=="hex"?[fs.parts["aria-descriptor"]({text:Ke})]:[],Us=fn.concat(bo);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Us}},D=(ie,Ne)=>{const he=g2(Ne);return Xp.getField(ie,"hex").each(ke=>{Fn.isFocused(ke)||Xt.setValue(ie,{hex:he.value})}),he},P=(ie,Ne)=>{const he=Ne.red,ke=Ne.green,Ae=Ne.blue;Xt.setValue(ie,{red:he,green:ke,blue:Ae})},$=Jo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),G=(ie,Ne)=>{$.getOpt(ie).each(he=>{lt(he.element,"background-color","#"+Ne.value)})};return il({factory:()=>{const ie={red:mn(M.some(255)),green:mn(M.some(255)),blue:mn(M.some(255)),hex:mn(M.some("ffffff"))},Ne=(dn,gt)=>{const $t=p2(gt);P(dn,$t),st($t)},he=dn=>ie[dn].get(),ke=(dn,gt)=>{ie[dn].set(gt)},Ae=()=>he("red").bind(dn=>he("green").bind(gt=>he("blue").map($t=>_b(dn,gt,$t,1)))),st=dn=>{const gt=dn.red,$t=dn.green,$n=dn.blue;ke("red",M.some(gt)),ke("green",M.some($t)),ke("blue",M.some($n))},Ke=(dn,gt)=>{const $t=gt.event;$t.type!=="hex"?ke($t.type,M.none()):c(dn)},Ft=(dn,gt)=>{a(dn);const $t=vB(gt);ke("hex",M.some($t.value));const $n=p2($t);P(dn,$n),st($n),_n(dn,Rb,{hex:$t}),G(dn,$t)},Jt=(dn,gt,$t)=>{const $n=parseInt($t,10);ke(gt,M.some($n)),Ae().each(Mn=>{const xn=D(dn,Mn);_n(dn,Rb,{hex:xn}),G(dn,xn)})},Qe=dn=>dn.type==="hex",ln=(dn,gt)=>{const $t=gt.event;Qe($t)?Ft(dn,$t.value):Jt(dn,$t.type,$t.value)},It=dn=>({label:t(sT+dn+".label"),description:t(sT+dn+".description")}),fn=It("red"),bo=It("green"),Us=It("blue"),jo=It("hex");return Ds(Xp.sketch(dn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[dn.field("red",fs.sketch(T(BD,"red",fn.label,fn.description,255))),dn.field("green",fs.sketch(T(BD,"green",bo.label,bo.description,255))),dn.field("blue",fs.sketch(T(BD,"blue",Us.label,Us.description,255))),dn.field("hex",fs.sketch(T(wB,"hex",jo.label,jo.description,"ffffff"))),$.asSpec()],formBehaviours:xt([im.config({invalidClass:s("form-invalid")}),no("rgb-form-events",[it(vh,ln),it(oT,Ke),it(N4,Ke)])])})),{apis:{updateHex:(dn,gt)=>{Xt.setValue(dn,{hex:gt.value}),Ne(dn,gt),G(dn,gt)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ie,Ne,he)=>{ie.updateHex(Ne,he)}},extraApis:{}})},rT=(t,s)=>{const a=Ad.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=Ad.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(D,P)=>{const{width:$,height:G}=D,Y=D.getContext("2d");if(Y===null)return;Y.fillStyle=P,Y.fillRect(0,0,$,G);const se=Y.createLinearGradient(0,0,$,0);se.addColorStop(0,"rgba(255,255,255,1)"),se.addColorStop(1,"rgba(255,255,255,0)"),Y.fillStyle=se,Y.fillRect(0,0,$,G);const ie=Y.createLinearGradient(0,0,0,G);ie.addColorStop(0,"rgba(0,0,0,0)"),ie.addColorStop(1,"rgba(0,0,0,1)"),Y.fillStyle=ie,Y.fillRect(0,0,$,G)},h=(D,P)=>{const $=D.components()[0].element.dom,G=v2(P,100,100),Y=kB(G);d($,AB(Y))},b=(D,P)=>{const $=y2(p2(P));Ad.setValue(D,{x:$.saturation,y:100-$.value}),qt(D.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",$.saturation,$.value]))};return il({factory:D=>{const P=ne({x:0,y:0}),$=(se,ie,Ne)=>{on(Ne)||qt(se.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ne.x),Math.floor(100-Ne.y)])),_n(se,M4,{value:Ne})},G=(se,ie,Ne,he)=>{d(Ne.element.dom,AB(OB))},Y=xt([Ro.config({find:M.some}),Fn.config({})]);return Ad.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:P},rounded:!1,components:[a,c],onChange:$,onInit:G,sliderBehaviours:Y})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(D,P,$)=>{h(P,$)},setThumb:(D,P,$)=>{b(P,$)}},extraApis:{}})},aL=(t,s,a,c)=>{const d=b=>{const x=rL(t,s,b.onValidHex,b.onInvalidHex,a,c),T=rT(t,s),D=Qe=>(100-Qe)/100*360,P=Qe=>100-Qe/360*100,$={paletteRgba:mn(OB),paletteHue:mn(0)},G=Jo(HV(t,s)),Y=Jo(T.sketch({})),se=Jo(x.sketch({})),ie=(Qe,ln,It)=>{Y.getOpt(Qe).each(fn=>{T.setHue(fn,It)})},Ne=(Qe,ln)=>{se.getOpt(Qe).each(It=>{x.updateHex(It,ln)})},he=(Qe,ln,It)=>{G.getOpt(Qe).each(fn=>{Ad.setValue(fn,P(It))})},ke=(Qe,ln)=>{Y.getOpt(Qe).each(It=>{T.setThumb(It,ln)})},Ae=(Qe,ln)=>{const It=p2(Qe);$.paletteRgba.set(It),$.paletteHue.set(ln)},st=(Qe,ln,It,fn)=>{Ae(ln,It),wt(fn,bo=>{bo(Qe,ln,It)})},Ke=()=>{const Qe=[Ne];return(ln,It)=>{const fn=It.event.value,bo=$.paletteHue.get(),Us=v2(bo,fn.x,100-fn.y),jo=w2(Us);st(ln,jo,bo,Qe)}},Ft=()=>{const Qe=[ie,Ne];return(ln,It)=>{const fn=D(It.event.value),bo=$.paletteRgba.get(),Us=y2(bo),jo=v2(fn,Us.saturation,Us.value),dn=w2(jo);st(ln,dn,fn,Qe)}},Jt=()=>{const Qe=[ie,he,ke];return(ln,It)=>{const fn=It.event.hex,bo=HD(fn);st(ln,fn,bo.hue,Qe)}};return{uid:b.uid,dom:b.dom,components:[Y.asSpec(),G.asSpec(),se.asSpec()],behaviours:xt([no("colour-picker-events",[it(Rb,Jt()),it(M4,Ke()),it(eL,Ft())]),Ro.config({find:Qe=>se.getOpt(Qe)}),En.config({mode:"acyclic"})])}};return il({name:"ColourPicker",configFields:[rt("dom"),Be("onValidHex",ce),Be("onInvalidHex",ce)],factory:d})},hf={self:()=>Ro.config({find:M.some}),memento:t=>Ro.config({find:t.getOpt}),childAt:t=>Ro.config({find:s=>Or(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},WV=Dn([Be("preprocess",Kt),Be("postprocess",Kt)]),ZV=(t,s)=>{const a=yi("RepresentingConfigs.memento processors",WV,s);return Xt.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),h=Xt.getValue(d);return a.postprocess(h)},setValue:(c,d)=>{const h=a.preprocess(d),b=t.get(c);Xt.setValue(b,h)}}})},Jp=(t,s,a)=>Xt.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),B4=(t,s,a)=>Jp(t,c=>s(c.element),(c,d)=>a(c.element,d)),jV=t=>B4(t,Mu,Hm),aT=t=>Xt.config({store:{mode:"memory",initialValue:t}}),qV={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},iT=t=>s=>j(s)?t.translate(qV[s]):t.translate(s),GV=(t,s,a)=>{const c=D=>"tox-"+D,d=(D,P,$=D,G=D)=>Vu($,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+D],attributes:{title:s.translate(G),"aria-live":"polite",...P.fold(()=>({}),Y=>({id:Y}))}},s.icons),h=aL(iT(s),c,s.tooltips.getConfig,d),b=D=>{_n(D,mh,{name:"hex-valid",value:!0})},x=D=>{_n(D,mh,{name:"hex-valid",value:!1})},T=Jo(h.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:b,onInvalidHex:x}));return{dom:{tag:"div"},components:[T.asSpec()],behaviours:xt([Jp(a,D=>{const P=T.get(D);return Ro.getCurrent(P).bind(Y=>Xt.getValue(Y).hex).map(Y=>"#"+dl(Y,"#")).getOr("")},(D,P)=>{const $=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,G=M.from($.exec(P)).bind(ie=>Po(ie,1)),Y=T.get(D);Ro.getCurrent(Y).fold(()=>{console.log("Can not find form")},ie=>{Xt.setValue(ie,{hex:G.getOr("")}),Xp.getField(ie,"hex").each(Ne=>{ao(Ne,Gd())})})}),hf.self()])}};var KV=tinymce.util.Tools.resolve("tinymce.Resource");const I4=t=>po(t,"init"),iL=t=>{const s=ts(),a=Jo({dom:{tag:t.tag}}),c=ts(),d=!I4(t)&&t.onFocus.isSome()?[Fn.config({onFocus:h=>{t.onFocus.each(b=>{b(h.element.dom)})}}),Vs.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:xt([no("custom-editor-events",[Gs(h=>{a.getOpt(h).each(b=>{(I4(t)?t.init(b.element.dom):KV.load(t.scriptId,t.scriptUrl).then(x=>x(b.element.dom,t.settings))).then(x=>{c.on(T=>{x.setValue(T)}),c.clear(),s.set(x)})})})]),Jp(M.none(),()=>s.get().fold(()=>c.get().getOr(""),h=>h.getValue()),(h,b)=>{s.get().fold(()=>c.set(b),x=>x.setValue(b))}),hf.self()].concat(d)),components:[a.asSpec()]}};var $g=tinymce.util.Tools.resolve("tinymce.util.Tools");const YV=(t,s)=>{const a=$g.explode(s.getOption("images_file_types")),c=d=>ms(a,h=>Ta(d.name.toLowerCase(),`.${h.toLowerCase()}`));return uo(ws(t),c)},L4=(t,s,a)=>{const c=(G,Y)=>{Y.stop()},d=G=>(Y,se)=>{wt(G,ie=>{ie(Y,se)})},h=(G,Y)=>{var se;if(!l.isDisabled(G)){const ie=Y.event.raw;x(G,(se=ie.dataTransfer)===null||se===void 0?void 0:se.files)}},b=(G,Y)=>{const se=Y.event.raw.target;x(G,se.files)},x=(G,Y)=>{Y&&(Xt.setValue(G,YV(Y,s)),_n(G,Rl,{name:t.name}))},T=Jo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:xt([no("input-file-events",[hd(Yh()),hd(fd())])])}),D=G=>({uid:G.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:xt([aT(a.getOr([])),hf.self(),l.config({}),lo.config({toggleClass:"dragenter",toggleOnExecute:!1}),no("dropzone-events",[it("dragenter",d([c,lo.toggle])),it("dragleave",d([c,lo.toggle])),it("dragover",c),it("drop",d([c,h])),it(np(),b)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[hr(s.translate("Drop an image here"))]},Vi.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[hr(s.translate("Browse for an image")),T.asSpec()],action:Y=>{T.get(Y).element.dom.click()},buttonBehaviours:xt([Vs.config({}),mf.button(s.isDisabled),Ga()])})]}]}),P=t.label.map(G=>qp(G,s)),$=fs.parts.field({factory:{sketch:D}});return T2(P,$,["tox-form__group--stretched"],[])},XV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:tt(t.items,s.interpreter)}),cL=(t,s)=>{let a=null,c=null;return{cancel:()=>{Ge(a)||(clearTimeout(a),a=null,c=null)},throttle:(...b)=>{c=b,Ge(a)&&(a=setTimeout(()=>{const x=c;a=null,c=null,t.apply(null,x)},s))}}},JV=(t,s)=>{let a=null;return{cancel:()=>{Ge(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{Ge(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},F4=(t,s)=>{let a=null;const c=()=>{Ge(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...h)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},$4=tn("alloy-fake-before-tabstop"),cT=tn("alloy-fake-after-tabstop"),H4=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:xt([Fn.config({ignore:!0}),Vs.config({})])}),lL=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[H4([$4]),s,H4([cT])],behaviours:xt([hf.childAt(1)])}),uL=(t,s)=>{_n(t,Du(),{raw:{which:9,shiftKey:s}})},QV=(t,s)=>{const a=s.element;Jc(a,$4)?uL(t,!0):Jc(a,cT)&&uL(t,!1)},H2=t=>C2(t,["."+$4,"."+cT].join(","),Me),V2=tn("update-dialog"),dL=tn("update-title"),V4=tn("update-body"),fL=tn("update-footer"),mL=tn("body-send-message"),lT=tn("dialog-focus-shifted"),z4=ro().browser,z2=z4.isSafari(),ez=z4.isFirefox(),hL=z2||ez,tz=z4.isChromium(),nz=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,uT=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),oz=(t,s)=>{const a=t.body;return M.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!tz&&!z2||vt(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},gL=(t,s,a)=>{const c=t.dom;M.from(c.contentDocument).fold(a,d=>{let h=0;const b=oz(d,s).map(T=>(h=T.scrollTop,T)).forall(nz),x=()=>{const T=c.contentWindow;vt(T)&&(b?uT(T,"bottom"):!b&&hL&&h!==0&&uT(T,h))};z2&&c.addEventListener("load",x,{once:!0}),d.open(),d.write(s),d.close(),z2||x()})},U2=Sn(hL,z2?500:200).map(t=>cL(gL,t)),U4=(t,s)=>{const a=mn(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const h=c.element,b=()=>qt(h,"srcdoc",d);s?U2.fold(ne(gL),x=>x.throttle)(h,d,b):b()}a.set(d)}}},sz=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],h=t.border?["tox-navobj-bordered"]:[],b={...t.label.map($=>({title:$})).getOr({}),...a.map($=>({srcdoc:$})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},x=U4(a,t.streamContent),T=t.label.map($=>qp($,s)),D=$=>lL(M.from(h),{uid:$.uid,dom:{tag:"iframe",attributes:b,classes:[c,...d]},behaviours:xt([Vs.config({}),Fn.config({}),Jp(a,x.getValue,x.setValue),Nc.config({channels:{[lT]:{onReceive:(G,Y)=>{Y.newFocus.each(se=>{Mi(G.element).each(ie=>{(Uo(G.element,se)?$s:mr)(ie,"tox-navobj-bordered-focus")})})}}}})])}),P=fs.parts.field({factory:{sketch:D}});return T2(T,P,["tox-form__group--stretched"],[])},rz=t=>new Promise((s,a)=>{const c=()=>{h(),s(t)},d=[dc(t,"load",c),dc(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>wt(d,b=>b.unbind());t.dom.complete&&c()}),W4=(t,s,a,c,d)=>{const h=a*d,b=c*d,x=Math.max(0,t/2-h/2),T=Math.max(0,s/2-b/2);return{left:x.toString()+"px",top:T.toString()+"px",width:h.toString()+"px",height:b.toString()+"px"}},az=(t,s,a)=>{const c=La(t),d=xs(t);return Math.min(c/s,d/a,1)},Z4=(t,s)=>{const a=mn(s.getOr({url:""})),c=Jo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=Jo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),h=(T,D)=>{const P={url:D.url};D.zoom.each(G=>P.zoom=G),D.cachedWidth.each(G=>P.cachedWidth=G),D.cachedHeight.each(G=>P.cachedHeight=G),a.set(P);const $=()=>{const{cachedWidth:G,cachedHeight:Y,zoom:se}=P;if(!Ut(G)&&!Ut(Y)){if(Ut(se)){const Ne=az(T.element,G,Y);P.zoom=Ne}const ie=W4(La(T.element),xs(T.element),G,Y,P.zoom);d.getOpt(T).each(Ne=>{Gn(Ne.element,ie)})}};c.getOpt(T).each(G=>{const Y=G.element;D.url!==pn(Y,"src")&&(qt(Y,"src",D.url),mr(T.element,"tox-imagepreview__loaded")),$(),rz(Y).then(se=>{T.getSystem().isConnected()&&($s(T.element,"tox-imagepreview__loaded"),P.cachedWidth=se.dom.naturalWidth,P.cachedHeight=se.dom.naturalHeight,$())})})},b={};t.height.each(T=>b.height=T);const x=s.map(T=>({url:T.url,zoom:M.from(T.zoom),cachedWidth:M.from(T.cachedWidth),cachedHeight:M.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:b,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:xt([hf.self(),Jp(x,()=>a.get(),h)])}},pL=(t,s,a)=>{const c="tox-label",d=t.align==="center"?[`${c}--center`]:[],h=t.align==="end"?[`${c}--end`]:[],b=Jo({dom:{tag:"label",classes:[c,...d,...h]},components:[hr(s.providers.translate(t.label))]}),x=tt(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[b.asSpec(),...x],behaviours:xt([hf.self(),zn.config({}),jV(M.none()),En.config({mode:"acyclic"}),no("label",[Gs(T=>{t.for.each(D=>{a(D).each(P=>{b.getOpt(T).each($=>{var G;const Y=(G=pn(P.element,"id"))!==null&&G!==void 0?G:tn("form-field");qt(P.element,"id",Y),qt($.element,"for",Y)})})})})])])}},bL=tn("toolbar.button.execute"),iz=t=>Ru((s,a)=>{m2(t,s)(c=>{_n(s,bL,{buttonApi:c}),t.onAction(c)})}),Qp=tn("common-button-display-events"),j4={[Jl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[sc()]:["toolbar-button-events",Qp],[Ql()]:["toolbar-button-events","dropdown-events","tooltipping"],[Er()]:["focusing","alloy.base.behaviour",Qp]},q4=t=>lt(t.element,"width",rs(t.element,"width")),G4=(t,s,a)=>Vu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),dT=(t,s)=>G4(t,s,[]),e1=(t,s)=>G4(t,s,[zn.config({})]),K4=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[hr(a.translate(t))],behaviours:xt([zn.config({})])}),qu=tn("update-menu-text"),t1=tn("update-menu-icon"),Y4=(t,s,a,c)=>{const d=mn(ce),h=t.text.map(ie=>Jo(K4(ie,s,a.providers))),b=t.icon.map(ie=>Jo(e1(ie,a.providers.icons))),x=(ie,Ne)=>{const he=Xt.getValue(ie);return Fn.focus(he),_n(he,"keydown",{raw:Ne.event.raw}),kd.close(he),M.some(!0)},T=t.role.fold(()=>({}),ie=>({role:ie})),D=M.from(t.listRole).map(ie=>({listRole:ie})).getOr({}),P=t.ariaLabel.fold(()=>({}),ie=>({"aria-label":a.providers.translate(ie)})),$=Vu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),G=tn("common-button-display-events"),Y="dropdown-events";return Jo(kd.sketch({...t.uid?{uid:t.uid}:{},...T,...D,dom:{tag:"button",classes:[s,`${s}--select`].concat(tt(t.classes,ie=>`${s}--${ie}`)),attributes:{...P,...vt(c)?{"data-mce-name":c}:{}}},components:xb([b.map(ie=>ie.asSpec()),h.map(ie=>ie.asSpec()),M.some($)]),matchWidth:!0,useMinWidth:!0,onOpen:(ie,Ne,he)=>{t.searchable&&_9(he)},dropdownBehaviours:xt([...t.dropdownBehaviours,mf.button(()=>t.disabled||a.providers.isDisabled()),Ga(),sy.config({}),zn.config({}),...t.tooltip.map(ie=>Ir.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(ie)}))).toArray(),no(Y,[hc(t,d),Zp(t,d)]),no(G,[Gs((ie,Ne)=>t.listRole==="listbox"?ce:q4(ie))]),no("menubutton-update-display-text",[it(qu,(ie,Ne)=>{h.bind(he=>he.getOpt(ie)).each(he=>{zn.set(he,[hr(a.providers.translate(Ne.event.text))])})}),it(t1,(ie,Ne)=>{b.bind(he=>he.getOpt(ie)).each(he=>{zn.set(he,[e1(Ne.event.icon,a.providers.icons)])})})])]),eventOrder:Ds(j4,{[Er()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[sc()]:["toolbar-button-events",Ir.name(),Y,G]}),sandboxBehaviours:xt([En.config({mode:"special",onLeft:x,onRight:x}),no("dropdown-sandbox-events",[it($P,(ie,Ne)=>{S9(ie),Ne.stop()}),it(lD,(ie,Ne)=>{Z_(ie,Ne),Ne.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...a2(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:iI,onCollapseMenu:(ie,Ne,he)=>{bn.getHighlighted(he).each(ke=>{iI(ie,he,ke)})},onDehighlightItem:E9}}},getAnchorOverrides:()=>({maxHeightFunction:(ie,Ne)=>{qx()(ie,Ne-10)}}),fetch:ie=>zi.nu(Qt(t.fetch,ie))})).asSpec()},cz=t=>j(t),vL=t=>t.type==="separator",yL=t=>po(t,"getSubmenuItems"),lz={type:"separator"},wL=(t,s)=>{const a=Ho(t,(c,d)=>cz(d)?d===""?c:d==="|"?c.length>0&&!vL(c[c.length-1])?c.concat([lz]):c:po(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&vL(a[a.length-1])&&a.pop(),a},uz=(t,s)=>{const a=t.getSubmenuItems(),c=fT(a,s),d=Ds(c.menus,{[t.value]:c.items}),h=Ds(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},dz=t=>{const s=At(t,"value").getOrThunk(()=>tn("generated-menu-item"));return Ds({value:s},t)},fT=(t,s)=>{const a=wL(j(t)?t.split(" "):t,s);return qo(a,(c,d)=>{if(yL(d)){const h=dz(d),b=uz(h,s);return{menus:Ds(c.menus,b.menus),items:[b.item,...c.items],expansions:Ds(c.expansions,b.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},fz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),mz=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),cy=(t,s,a,c)=>{const d=tn("primary-menu"),h=fT(t,a.shared.providers.menuItems());if(h.items.length===0)return M.none();const b=fz(c),x=s4(d,h.items,s,a,c.isHorizontalMenu,b),T=mz(c),D=Vo(h.menus,($,G)=>s4(G,$,s,a,!1,T)),P=Ds(D,oo(d,x));return M.from(Fp.tieredData(d,P,h.expansions))},ly=t=>!po(t,"items"),CL="data-value",X4=(t,s,a,c,d)=>tt(a,h=>ly(h)?{type:"togglemenuitem",...d?{}:{role:"option"},text:h.text,value:h.value,active:h.value===c,onAction:()=>{Xt.setValue(t,h.value),_n(t,Rl,{name:s}),Fn.focus(t)}}:{type:"nestedmenuitem",text:h.text,getSubmenuItems:()=>X4(t,s,h.items,c,d)}),J4=(t,s)=>bs(t,a=>ly(a)?Sn(a.value===s,a):J4(a.items,s)),SL=(t,s,a)=>{const c=ms(t.items,D=>!ly(D)),d=s.shared.providers,h=a.bind(D=>J4(t.items,D)).orThunk(()=>Is(t.items).filter(ly)),b=t.label.map(D=>qp(D,d)),x=fs.parts.field({dom:{},factory:{sketch:D=>Y4({uid:D.uid,text:h.map(P=>P.text),icon:M.none(),tooltip:M.none(),role:Sn(!c,"combobox"),...c?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(P,$)=>{const G=X4(P,t.name,t.items,Xt.getValue(P),c);$(cy(G,df.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:M.none()}))},onSetup:ne(ce),getApi:ne({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Vs.config({}),Jp(h.map(P=>P.value),P=>pn(P.element,CL),(P,$)=>{J4(t.items,$).each(G=>{qt(P.element,CL,G.value),_n(P,qu,{text:G.text})})})]},"tox-listbox",s.shared)}}),T={dom:{tag:"div",classes:["tox-listboxfield"]},components:[x]};return fs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([b.toArray(),[T]]),fieldBehaviours:xt([l.config({disabled:ne(!t.enabled),onDisabled:D=>{fs.getField(D).each(l.disable)},onEnabled:D=>{fs.getField(D).each(l.enable)}})])})},hz=(t,s)=>({dom:{tag:"div",classes:t.classes},components:tt(t.items,s.shared.interpreter)}),gz=(t,s)=>{const a=tt(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>oo("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:ja(t.selectBehaviours,[Fn.config({}),Xt.config({store:{mode:"manual",getValue:d=>jf(d.element),setValue:(d,h)=>{const b=Is(t.options);et(t.options,T=>T.value===h).isSome()?Gm(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&b.each(T=>Gm(d.element,T.value))},...c}})])}},pz=il({name:"HtmlSelect",configFields:[rt("options"),Za("selectBehaviours",[Fn,Xt]),Be("selectClasses",[]),Be("selectAttributes",{}),Bo("data")],factory:gz}),bz=(t,s,a)=>{const c=tt(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>qp(T,s)),h=fs.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:pz,selectBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Vs.config({}),no("selectbox-change",[it(np(),(T,D)=>{_n(T,Rl,{name:t.name})})])])}),b=t.size>1?M.none():M.some(Vu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),x={dom:{tag:"div",classes:["tox-selectfield"]},components:dt([[h],b.toArray()])};return fs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dt([d.toArray(),[x]]),fieldBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{fs.getField(T).each(l.disable)},onEnabled:T=>{fs.getField(T).each(l.enable)}}),Ga()])})},vz=ne([Be("field1Name","field1"),Be("field2Name","field2"),Qd("onLockedChange"),cg(["lockClass"]),Be("locked",!1),su.field("coupledFieldBehaviours",[Ro,Xt])]),xL=(t,s,a)=>bt(t,s,a).bind(Ro.getCurrent),EL=(t,s)=>Ti({factory:fs,name:t,overrides:a=>({fieldBehaviours:xt([no("coupled-input-behaviour",[it(Gd(),c=>{xL(c,a,s).each(d=>{bt(c,a,"lock").each(h=>{lo.isOn(h)&&a.onLockedChange(c,d,h)})})})])])})}),yz=ne([EL("field1","field2"),EL("field2","field1"),Ti({factory:Vi,schema:[rt("dom")],name:"lock",overrides:t=>({buttonBehaviours:xt([lo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),_L=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:su.augment(t.coupledFieldBehaviours,[Ro.config({find:M.some}),Xt.config({store:{mode:"manual",getValue:d=>{const h=Eg(d,t,["field1","field2"]);return{[t.field1Name]:Xt.getValue(h.field1()),[t.field2Name]:Xt.getValue(h.field2())}},setValue:(d,h)=>{const b=Eg(d,t,["field1","field2"]);Hr(h,t.field1Name)&&Xt.setValue(b.field1(),h[t.field1Name]),Hr(h,t.field2Name)&&Xt.setValue(b.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>bt(d,t,"field1"),getField2:d=>bt(d,t,"field2"),getLock:d=>bt(d,t,"lock")}}),Gu=Ki({name:"FormCoupledInputs",configFields:vz(),partFields:yz(),factory:_L,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),wz=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},Q4=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return Yn.value({value:c,unit:d})}else return Yn.error(t)},e3=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>po(a,d);return t.unit===s?M.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?M.some(t.value):M.some(t.value/a[t.unit]*a[s]):M.none()},t3=t=>M.none(),Cz=(t,s)=>a=>e3(a,s).map(c=>({value:c*t,unit:s})),Sz=(t,s)=>{const a=Q4(t).toOptional(),c=Q4(s).toOptional();return hi(a,c,(d,h)=>e3(d,h.unit).map(b=>h.value/b).map(b=>Cz(b,h.unit)).getOr(t3)).getOr(t3)},TL=(t,s)=>{let a=t3;const c=tn("ratio-event"),d=Y=>Vu(Y,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Y]},s.icons),h=t.label.getOr("Constrain proportions"),b=s.translate(h),x=Gu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":b,"data-mce-name":h}},components:[d("lock"),d("unlock")],buttonBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ga(),Vs.config({}),Ir.config(s.tooltips.getConfig({tooltipText:b}))])}),T=Y=>({dom:{tag:"div",classes:["tox-form__group"]},components:Y}),D=Y=>fs.parts.field({factory:yb,inputClasses:["tox-textfield"],inputBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ga(),Vs.config({}),no("size-input-events",[it(ld(),(se,ie)=>{_n(se,c,{isField1:Y})}),it(np(),(se,ie)=>{_n(se,Rl,{name:t.name})})])]),selectOnFocus:!1}),P=Y=>({dom:{tag:"label",classes:["tox-label"]},components:[hr(s.translate(Y))]}),$=Gu.parts.field1(T([fs.parts.label(P("Width")),D(!0)])),G=Gu.parts.field2(T([fs.parts.label(P("Height")),D(!1)]));return Gu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[$,G,T([P(fg),x])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Y,se,ie)=>{Q4(Xt.getValue(Y)).each(Ne=>{a(Ne).each(he=>{Xt.setValue(se,wz(he))})})},coupledFieldBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:Y=>{Gu.getField1(Y).bind(fs.getField).each(l.disable),Gu.getField2(Y).bind(fs.getField).each(l.disable),Gu.getLock(Y).each(l.disable)},onEnabled:Y=>{Gu.getField1(Y).bind(fs.getField).each(l.enable),Gu.getField2(Y).bind(fs.getField).each(l.enable),Gu.getLock(Y).each(l.enable)}}),Ga(),no("size-input-events2",[it(c,(Y,se)=>{const ie=se.event.isField1,Ne=ie?Gu.getField1(Y):Gu.getField2(Y),he=ie?Gu.getField2(Y):Gu.getField1(Y),ke=Ne.map(Xt.getValue).getOr(""),Ae=he.map(Xt.getValue).getOr("");a=Sz(ke,Ae)})])])})},kL=(t,s,a)=>{const c=Ad.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[hr(s.translate(t.label))]}),d=Ad.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=Ad.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ad.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ne(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,h],sliderBehaviours:xt([hf.self(),Fn.config({})]),onChoose:(b,x,T)=>{_n(b,Rl,{name:t.name,value:T})},onChange:(b,x,T)=>{_n(b,Rl,{name:t.name,value:T})}})},AL=(t,s)=>{const a=x=>({dom:{tag:"th",innerHtml:s.translate(x)}}),c=x=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:tt(x,a)}]}),d=x=>({dom:{tag:"td",innerHtml:s.translate(x)}}),h=x=>({dom:{tag:"tr"},components:tt(x,d)}),b=x=>({dom:{tag:"tbody"},components:tt(x,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),b(t.cells)],behaviours:xt([Vs.config({}),Fn.config({})])}},W2=(t,s)=>{const a=t.label.map(Y=>qp(Y,s)),c=[l.config({disabled:()=>t.disabled||s.isDisabled()}),Ga(),En.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:Y=>(ao(Y,k2),M.some(!0))}),no("textfield-change",[it(Gd(),(Y,se)=>{_n(Y,Rl,{name:t.name})}),it(Hf(),(Y,se)=>{_n(Y,Rl,{name:t.name})})]),Vs.config({})],d=t.validation.map(Y=>im.config({getRoot:se=>Mi(se.element),invalidClass:"tox-invalid",validator:{validate:se=>{const ie=Xt.getValue(se),Ne=Y.validator(ie);return zi.pure(Ne===!0?Yn.value(ie):Yn.error(Ne))},validateOnLoad:Y.validateOnLoad}})).toArray(),h=t.placeholder.fold(ne({}),Y=>({placeholder:s.translate(Y)})),b=t.inputMode.fold(ne({}),Y=>({inputmode:Y})),x={...h,...b,"data-mce-name":t.name},T=fs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(Y=>({data:Y})).getOr({}),inputAttributes:x,inputClasses:[t.classname],inputBehaviours:xt(dt([c,d])),selectOnFocus:!1,factory:yb}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,$=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),G=[l.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:Y=>{fs.getField(Y).each(l.disable)},onEnabled:Y=>{fs.getField(Y).each(l.enable)}}),Ga()];return T2(a,D,$,G)},xz=(t,s,a)=>W2({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:M.none(),maximized:t.maximized,data:a},s),Ez=(t,s,a)=>W2({name:t.name,multiline:!0,label:t.label,inputMode:M.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:M.none(),maximized:t.maximized,data:a},s),Z2=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Hg=t=>t.dimension.property,n1=(t,s)=>t.dimension.getDimension(s),mT=(t,s)=>{const a=Z2(t,s);Qc(a,[s.shrinkingClass,s.growingClass])},n3=(t,s)=>{mr(t.element,s.openClass),$s(t.element,s.closedClass),lt(t.element,Hg(s),"0px"),oi(t.element)},o3=(t,s)=>{mr(t.element,s.closedClass),$s(t.element,s.openClass),Xn(t.element,Hg(s))},s3=(t,s,a,c)=>{a.setCollapsed(),lt(t.element,Hg(s),n1(s,t.element)),mT(t,s),n3(t,s),s.onStartShrink(t),s.onShrunk(t)},OL=(t,s,a,c)=>{const d=c.getOrThunk(()=>n1(s,t.element));a.setCollapsed(),lt(t.element,Hg(s),d),oi(t.element);const h=Z2(t,s);mr(h,s.growingClass),$s(h,s.shrinkingClass),n3(t,s),s.onStartShrink(t)},DL=(t,s,a)=>{const c=n1(s,t.element);(c==="0px"?s3:OL)(t,s,a,M.some(c))},RL=(t,s,a)=>{const c=Z2(t,s),d=Jc(c,s.shrinkingClass),h=n1(s,t.element);o3(t,s);const b=n1(s,t.element);(d?()=>{lt(t.element,Hg(s),h),oi(t.element)}:()=>{n3(t,s)})(),mr(c,s.shrinkingClass),$s(c,s.growingClass),o3(t,s),lt(t.element,Hg(s),b),a.setExpanded(),s.onStartGrow(t)},ML=(t,s,a)=>{if(a.isExpanded()){Xn(t.element,Hg(s));const c=n1(s,t.element);lt(t.element,Hg(s),c)}},_z=(t,s,a)=>{a.isExpanded()||RL(t,s,a)},Tz=(t,s,a)=>{a.isExpanded()&&DL(t,s,a)},Un=(t,s,a)=>{a.isExpanded()&&s3(t,s,a)},j2=(t,s,a)=>a.isExpanded(),NL=(t,s,a)=>a.isCollapsed(),r3=(t,s,a)=>{const c=Z2(t,s);return Jc(c,s.growingClass)===!0},a3=(t,s,a)=>{const c=Z2(t,s);return Jc(c,s.shrinkingClass)===!0};var q2=Object.freeze({__proto__:null,refresh:ML,grow:_z,shrink:Tz,immediateShrink:Un,hasGrown:j2,hasShrunk:NL,isGrowing:r3,isShrinking:a3,isTransitioning:(t,s,a)=>r3(t,s)||a3(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?DL:RL)(t,s,a)},disableTransitions:mT,immediateGrow:(t,s,a)=>{a.isExpanded()||(o3(t,s),lt(t.element,Hg(s),n1(s,t.element)),mT(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),Dz=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Yc(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:oo(s.dimension.property,"0px")})},events:(t,s)=>Fs([op(ud(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(mT(a,t),s.isExpanded()&&Xn(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),Rz=[rt("closedClass"),rt("openClass"),rt("shrinkingClass"),rt("growingClass"),Bo("getAnimationRoot"),ko("onShrunk"),ko("onStartShrink"),ko("onGrown"),ko("onStartGrow"),Be("expanded",!1),Fo("dimension",ba("property",{width:[ys("property","width"),ys("getDimension",t=>La(t)+"px")],height:[ys("property","height"),ys("getDimension",t=>xs(t)+"px")]}))],PL=Object.freeze({__proto__:null,init:t=>{const s=mn(t.expanded),a=()=>"expanded: "+s.get();return Xc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Qt(s.set,!1),setExpanded:Qt(s.set,!0),readState:a})}});const Lc=li({fields:Rz,name:"sliding",active:Dz,apis:q2,state:PL}),i3=t=>({isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setActive:s=>{const a=t.element;s?($s(a,"tox-tbtn--enabled"),qt(a,"aria-pressed",!0)):(mr(a,"tox-tbtn--enabled"),H(a,"aria-pressed"))},isActive:()=>Jc(t.element,"tox-tbtn--enabled"),setText:s=>{_n(t,qu,{text:s})},setIcon:s=>_n(t,t1,{icon:s})}),G2=(t,s,a,c,d=!0,h)=>Y4({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(b,x)=>{const T={pattern:t.search.isSome()?T9(b):""};t.fetch(D=>{x(cy(D,df.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},T,i3(b))},onSetup:t.onSetup,getApi:i3,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Vs.config({})]:[]]},s,a.shared,h),Mz=(t,s,a)=>{const c=h=>b=>{const x=!b.isActive();b.setActive(x),h.storage.set(x),a.shared.getSink().each(T=>{s().getOpt(T).each(D=>{Sl(D.element),_n(D,mh,{name:h.name,value:h.storage.get()})})})},d=h=>b=>{b.setActive(h.storage.get())};return h=>{h(tt(t,b=>{const x=b.text.fold(()=>({}),T=>({text:T}));return{type:b.type,active:!1,...x,onAction:c(b),onSetup:d(b)}}))}},BL=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[hr(t)]}),IL=tn("leaf-label-event-id"),c3=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:h})=>{const b=t.menu.map(T=>G2(T,"tox-mbtn",h,M.none(),a)),x=[BL(t.title)];return b.each(T=>x.push(T)),Vi.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:x,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[Du()]:[IL,"keying"]},buttonBehaviours:xt([...a?[Vs.config({})]:[],lo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Nc.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,D)=>{(D.value===t.id?lo.on:lo.off)(T)}}}}),no(IL,[Gs((T,D)=>{d.each(P=>{(P===t.id?lo.on:lo.off)(T)})}),it(Du(),(T,D)=>{const P=D.event.raw.code==="ArrowLeft",$=D.event.raw.code==="ArrowRight";P?(Km(T.element,".tox-tree--directory").each(G=>{T.getSystem().getByDom(G).each(Y=>{Bw(G,".tox-tree--directory__label").each(se=>{Y.getSystem().getByDom(se).each(Fn.focus)})})}),D.stop()):$&&D.stop()})])])})},Nz=(t,s,a)=>Vu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),Pz=(t,s)=>Nz(t,s,[]),LL=tn("directory-label-event-id"),Bz=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(x=>G2(x,"tox-mbtn",c,M.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[Pz("chevron-right",c.shared.providers.icons)]},BL(t.title)];d.each(x=>{h.push(x)});const b=x=>{Km(x.element,".tox-tree--directory").each(T=>{x.getSystem().getByDom(T).each(D=>{const P=!lo.isOn(D);lo.toggle(D),_n(x,"expand-tree-node",{expanded:P,node:t.id})})})};return Vi.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:b,eventOrder:{[Du()]:[LL,"keying"]},buttonBehaviours:xt([...s?[Vs.config({})]:[],no(LL,[it(Du(),(x,T)=>{const D=T.event.raw.code==="ArrowRight",P=T.event.raw.code==="ArrowLeft";D&&a&&T.stop(),(D||P)&&Km(x.element,".tox-tree--directory").each($=>{x.getSystem().getByDom($).each(G=>{!lo.isOn(G)&&D||lo.isOn(G)&&P?(b(x),T.stop()):P&&!lo.isOn(G)&&(Km(G.element,".tox-tree--directory").each(Y=>{Bw(Y,".tox-tree--directory__label").each(se=>{G.getSystem().getByDom(se).each(Fn.focus)})}),T.stop())})})})])])})},Iz=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:h,backstage:b})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(x=>x.type==="leaf"?c3({leaf:x,selectedId:h,onLeafAction:s,visible:a,treeId:c,backstage:b}):l3({directory:x,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:b})),behaviours:xt([Lc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),zn.config({})])}),FL=tn("directory-event-id"),l3=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:h,selectedId:b})=>{const{children:x}=t,T=mn(h),D=$=>x.map(G=>G.type==="leaf"?c3({leaf:G,selectedId:b,onLeafAction:s,visible:$,treeId:c,backstage:d}):l3({directory:G,expandedIds:T.get(),selectedId:b,onLeafAction:s,labelTabstopping:$,treeId:c,backstage:d})),P=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Bz({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),Iz({children:x,expandedIds:h,selectedId:b,onLeafAction:s,visible:P,treeId:c,backstage:d})],behaviours:xt([no(FL,[Gs(($,G)=>{lo.set($,P)}),it("expand-tree-node",($,G)=>{const{expanded:Y,node:se}=G.event;T.set(Y?[...T.get(),se]:T.get().filter(ie=>ie!==se))})]),lo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:($,G)=>{const Y=$.components()[1],se=D(G);G?Lc.grow(Y):Lc.shrink(Y),zn.set(Y,se)}})])}},Lz=tn("tree-event-id"),Fz=(t,s)=>{const a=t.onLeafAction.getOr(ce),c=t.onToggleExpand.getOr(ce),d=t.defaultExpandedIds,h=mn(d),b=mn(t.defaultSelectedId),x=tn("tree-id"),T=(D,P)=>t.items.map($=>$.type==="leaf"?c3({leaf:$,selectedId:D,onLeafAction:a,visible:!0,treeId:x,backstage:s}):l3({directory:$,selectedId:D,onLeafAction:a,expandedIds:P,labelTabstopping:!0,treeId:x,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(b.get(),h.get()),behaviours:xt([En.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),no(Lz,[it("expand-tree-node",(D,P)=>{const{expanded:$,node:G}=P.event;h.set($?[...h.get(),G]:h.get().filter(Y=>Y!==G)),c(h.get(),{expanded:$,node:G})})]),Nc.config({channels:{[`update-active-item-${x}`]:{onReceive:(D,P)=>{b.set(M.some(P.value)),zn.set(D,T(M.some(P.value),h.get()))}}}}),zn.config({})])}};var $z=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return Fs([it(t.event,c),Yd(()=>s.cancel())].concat(t.cancelEvent.map(d=>[it(d,()=>s.cancel())]).getOr([])))}});const $L=t=>{const s=mn(null);return Xc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var Hz=Object.freeze({__proto__:null,throttle:$L,init:t=>t.stream.streams.state(t)});const Vz=(t,s)=>{const a=t.stream,c=F4(t.onStream,a.delay);return s.setTimer(c),(d,h)=>{c.throttle(d,h),a.stopEvent&&h.stop()}};var zz=[Fo("stream",ba("mode",{throttle:[rt("delay"),Be("stopEvent",!0),ys("streams",{setup:Vz,state:$L})]})),Be("event","input"),Bo("cancelEvent"),Qd("onStream")];const u3=li({fields:zz,name:"streaming",active:$z,state:Hz}),K2=(t,s,a)=>{const c=Xt.getValue(a);Xt.setValue(s,c),VL(s)},HL=(t,s)=>{const a=t.element,c=jf(a),d=a.dom;pn(a,"type")!=="number"&&s(d,c)},VL=t=>{HL(t,(s,a)=>s.setSelectionRange(a.length,a.length))},Uz=(t,s)=>{HL(t,(a,c)=>a.setSelectionRange(s,c.length))},Wz=(t,s,a)=>{if(t.selectsOver){const c=Xt.getValue(s),d=t.getDisplayText(c),h=Xt.getValue(a);return t.getDisplayText(h).indexOf(d)===0?M.some(()=>{K2(t,s,a),Uz(s,d.length)}):M.none()}else return M.none()},d3=ne("alloy.typeahead.itemexecute"),Zz=(t,s,a,c)=>{const d=($,G,Y)=>{t.previewing.set(!1);const se=jr.getCoupled($,"sandbox");if(Do.isOpen(se))Ro.getCurrent(se).each(ie=>{bn.getHighlighted(ie).fold(()=>{Y(ie)},()=>{Kd(se,ie.element,"keydown",G)})});else{const ie=Ne=>{Ro.getCurrent(Ne).each(Y)};J0(t,b($),$,se,c,ie,Zr.HighlightMenuAndItem).get(ce)}},h=IP(t),b=$=>G=>G.map(Y=>{const se=Vc(Y.menus),ie=xe(se,he=>uo(he.items,ke=>ke.type==="item"));return Xt.getState($).update(tt(ie,he=>he.data)),Y}),x=$=>Ro.getCurrent($),T="typeaheadevents",D=[Fn.config({}),Xt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:$=>jf($.element),getFallbackEntry:$=>({value:$,meta:{}}),setValue:($,G)=>{Gm($.element,t.model.getDisplayText(G))},...t.initialData.map($=>oo("initialValue",$)).getOr({})}}),u3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:($,G)=>{const Y=jr.getCoupled($,"sandbox");if(Fn.isFocused($)&&jf($.element).length>=t.minChars){const ie=x(Y).bind(he=>bn.getHighlighted(he).map(Xt.getValue));t.previewing.set(!0);const Ne=he=>{x(Y).each(ke=>{ie.fold(()=>{t.model.selectsOver&&bn.highlightFirst(ke)},Ae=>{bn.highlightBy(ke,st=>Xt.getValue(st).value===Ae.value),bn.getHighlighted(ke).orThunk(()=>(bn.highlightFirst(ke),M.none()))})})};J0(t,b($),$,Y,c,Ne,Zr.HighlightJustMenu).get(ce)}},cancelEvent:Wy()}),En.config({mode:"special",onDown:($,G)=>(d($,G,bn.highlightFirst),M.some(!0)),onEscape:$=>{const G=jr.getCoupled($,"sandbox");return Do.isOpen(G)?(Do.close(G),M.some(!0)):M.none()},onUp:($,G)=>(d($,G,bn.highlightLast),M.some(!0)),onEnter:$=>{const G=jr.getCoupled($,"sandbox"),Y=Do.isOpen(G);if(Y&&!t.previewing.get())return x(G).bind(se=>bn.getHighlighted(se)).map(se=>(_n($,d3(),{item:se}),!0));{const se=Xt.getValue($);return ao($,Wy()),t.onExecute(G,$,se),Y&&Do.close(G),M.some(!0)}}}),lo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),jr.config({others:{sandbox:$=>n4(t,$,{onOpen:()=>lo.on($),onClose:()=>{t.lazyTypeaheadComp.get().each(G=>H(G.element,"aria-activedescendant")),lo.off($)}})}}),no(T,[Gs($=>{t.lazyTypeaheadComp.set(M.some($))}),Yd($=>{t.lazyTypeaheadComp.set(M.none())}),Ru($=>{const G=ce;QD(t,b($),$,c,G,Zr.HighlightMenuAndItem).get(ce)}),it(d3(),($,G)=>{const Y=jr.getCoupled($,"sandbox");K2(t.model,$,G.event.item),ao($,Wy()),t.onItemExecute($,Y,G.event.item,Xt.getValue($)),Do.close(Y),VL($)})].concat(t.dismissOnBlur?[it(Dm(),$=>{const G=jr.getCoupled($,"sandbox");uc(G.element).isNone()&&Do.close(G)})]:[]))],P={[Ql()]:[Xt.name(),u3.name(),T],...t.eventOrder};return{uid:t.uid,dom:FP(Ds(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...ja(t.typeaheadBehaviours,D)},eventOrder:P}},zL=ne([Bo("lazySink"),rt("fetch"),Be("minChars",5),Be("responseTime",1e3),ko("onOpen"),Be("getHotspot",M.some),Be("getAnchorOverrides",ne({})),Be("layouts",M.none()),Be("eventOrder",{}),R("model",{},[Be("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Be("selectsOver",!0),Be("populateFromBrowse",!0)]),ko("onSetValue"),Mc("onExecute"),ko("onItemExecute"),Be("inputClasses",[]),Be("inputAttributes",{}),Be("inputStyles",{}),Be("matchWidth",!0),Be("useMinWidth",!1),Be("dismissOnBlur",!0),cg(["openClass"]),Bo("initialData"),Bo("listRole"),Za("typeaheadBehaviours",[Fn,Xt,u3,En,lo,jr]),Lo("lazyTypeaheadComp",()=>mn(M.none)),Lo("previewing",()=>mn(!0))].concat(cD()).concat(W_())),jz=ne([ru({schema:[dp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{Wz(t.model,d,c).fold(()=>{t.model.selectsOver?(bn.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&K2(t.model,d,c),Dr(c.element,"id").each(h=>qt(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(_n(c,d3(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&K2(t.model,c,a)})}})})]),UL=Ki({name:"Typeahead",configFields:zL(),partFields:jz(),factory:Zz}),gf=t=>({...t,toCached:()=>gf(t.toCached()),bindFuture:T=>gf(t.bind(D=>D.fold(P=>zi.pure(Yn.error(P)),P=>T(P)))),bindResult:T=>gf(t.map(D=>D.bind(T))),mapResult:T=>gf(t.map(D=>D.map(T))),mapError:T=>gf(t.map(D=>D.mapError(T))),foldResult:(T,D)=>t.map(P=>P.fold(T,D)),withTimeout:(T,D)=>gf(zi.nu(P=>{let $=!1;const G=setTimeout(()=>{$=!0,P(Yn.error(D()))},T);t.get(Y=>{$||(clearTimeout(G),P(Y))})}))}),f3=t=>gf(zi.nu(t)),m3=t=>gf(zi.pure(Yn.value(t))),Kz={nu:f3,wrap:gf,pure:m3,value:m3,error:t=>gf(zi.pure(Yn.error(t))),fromResult:t=>gf(zi.pure(t)),fromFuture:t=>gf(t.map(Yn.value)),fromPromise:t=>f3(s=>{t.then(a=>{s(Yn.value(a))},a=>{s(Yn.error(a))})})},Y2=(t,s,a=[],c,d,h,b)=>{const x=s.fold(()=>({}),P=>({action:P})),T={buttonBehaviours:xt([mf.button(()=>!t.enabled||b.isDisabled()),Ga(),Vs.config({}),...h.map(P=>Ir.config(b.tooltips.getConfig({tooltipText:b.translate(P)}))).toArray(),no("button press",[Yy("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...x},D=Ds(T,{dom:c});return Ds(D,{components:d})},Yz=(t,s,a,c=[],d)=>{const h=t.tooltip.map(D=>({"aria-label":a.translate(D)})).getOr({}),b={tag:"button",classes:["tox-tbtn"],attributes:{...h,"data-mce-name":d}},x=t.icon.map(D=>dT(D,a.icons)),T=xb([x]);return Y2(t,s,c,b,T,t.tooltip,a)},h3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},pf=(t,s,a,c=[],d=[])=>{const h=a.translate(t.text),b=t.icon.map(Y=>dT(Y,a.icons)),x=[b.getOrThunk(()=>hr(h))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),$={tag:"button",classes:[...h3(T),...b.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":h,"data-mce-name":t.text}},G=t.icon.map(ne(h));return Y2(t,s,c,$,x,G,a)},X2=(t,s,a,c=[],d=[])=>{const h=pf(t,M.some(s),a,c,d);return Vi.sketch(h)},J2=(t,s)=>a=>{s==="custom"?_n(a,mh,{name:t,value:{}}):s==="submit"?ao(a,k2):s==="cancel"?ao(a,Bg):console.error("Unknown button type: ",s)},Xz=(t,s)=>s==="menu",g3=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Jz=(t,s)=>s==="togglebutton",p3=(t,s,a)=>{var c,d;const h=t.icon.map(Ae=>e1(Ae,s.icons)).map(Jo),b=Ae=>{_n(Ae,mh,{name:t.name,value:{setIcon:st=>{h.map(Ke=>Ke.getOpt(Ae).each(Ft=>{zn.set(Ft,[e1(st,s.icons)])}))}}})},x=t.buttonType.getOr(t.primary?"primary":"secondary"),T={...t,name:(c=t.name)!==null&&c!==void 0?c:"",primary:x==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},D=T.tooltip.or(t.text).map(Ae=>({"aria-label":s.translate(Ae)})).getOr({}),P=h3(x??"secondary"),$=t.icon.isSome()&&t.text.isSome(),G={tag:"button",classes:[...P.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...$?["tox-button--icon-and-text"]:[]],attributes:{...D,...vt(a)?{"data-mce-name":a}:{}}},Y=[],se=s.translate(t.text.getOr("")),ie=hr(se),he=[...xb([h.map(Ae=>Ae.asSpec())]),...t.text.isSome()?[ie]:[]],ke=Y2(T,M.some(b),Y,G,he,t.tooltip,s);return Vi.sketch(ke)},Q2=(t,s,a)=>{if(Xz(t,s)){const c=()=>b,d=t,h={...t,type:"menubutton",search:M.none(),onSetup:x=>(x.setEnabled(t.enabled),ce),fetch:Mz(d.items,c,a)},b=Jo(G2(h,"tox-tbtn",a,M.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return b.asSpec()}else if(g3(t,s)){const c=J2(t.name,s),d={...t,borderless:!1};return X2(d,c,a.shared.providers,[])}else{if(Jz(t,s))return p3(t,a.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},b3=(t,s)=>{const a=J2(t.name,"custom");return pI(M.none(),fs.parts.field({factory:Vi,...pf(t,M.some(a),s,[aT(""),hf.self()])}))},Qz={type:"separator"},eU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ce}),hT=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ce}),tU=t=>tt(t,eU),nU=(t,s)=>uo(s,a=>a.type===t),gT=(t,s)=>tU(nU(t,s)),oU=t=>gT("header",t.targets),sU=t=>gT("anchor",t.targets),ZL=t=>M.from(t.anchorTop).map(s=>hT("<top>",s)).toArray(),jL=t=>M.from(t.anchorBottom).map(s=>hT("<bottom>",s)).toArray(),rU=t=>tt(t,s=>hT(s,s)),aU=t=>Ho(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(Qz,a),[]),v3=(t,s)=>{const a=t.toLowerCase();return uo(s,c=>{var d;const h=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,b=(d=c.value)!==null&&d!==void 0?d:"";return pr(h.toLowerCase(),a)||pr(b.toLowerCase(),a)})},iU=(t,s,a)=>{var c,d;const h=Xt.getValue(s),b=(d=(c=h==null?void 0:h.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],T=>{const D=v3(b,rU(a.getHistory(t)));return t==="file"?aU([D,v3(b,oU(T)),v3(b,dt([ZL(T),sU(T),jL(T)]))]):D})},y3=tn("aria-invalid"),cm=(t,s,a,c)=>{const d=s.shared.providers,h=ke=>{const Ae=Xt.getValue(ke);a.addToHistory(Ae.value,t.filetype)},b={...c.map(ke=>({initialData:ke})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":y3,type:"url"},minChars:0,responseTime:0,fetch:ke=>{const Ae=iU(t.filetype,ke,a),st=cy(Ae,df.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:M.none()});return zi.pure(st)},getHotspot:ke=>se.getOpt(ke),onSetValue:(ke,Ae)=>{ke.hasConfigured(im)&&im.run(ke).get(ce)},typeaheadBehaviours:xt([...a.getValidationHandler().map(ke=>im.config({getRoot:Ae=>Mi(Ae.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ae,st)=>{P.getOpt(Ae).each(Ke=>{qt(Ke.element,"title",d.translate(st))})}},validator:{validate:Ae=>{const st=Xt.getValue(Ae);return Kz.nu(Ke=>{ke({type:t.filetype,url:st.value},Ft=>{if(Ft.status==="invalid"){const Jt=Yn.error(Ft.message);Ke(Jt)}else{const Jt=Yn.value(Ft.message);Ke(Jt)}})})},validateOnLoad:!1}})).toArray(),l.config({disabled:()=>!t.enabled||d.isDisabled()}),Vs.config({}),no("urlinput-events",[it(Gd(),ke=>{const Ae=jf(ke.element),st=Ae.trim();st!==Ae&&Gm(ke.element,st),t.filetype==="file"&&_n(ke,Rl,{name:t.name})}),it(np(),ke=>{_n(ke,Rl,{name:t.name}),h(ke)}),it(Hf(),ke=>{_n(ke,Rl,{name:t.name}),h(ke)})])]),eventOrder:{[Gd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ke=>ke.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:a2(!1,1,"normal")},onExecute:(ke,Ae,st)=>{_n(Ae,k2,{})},onItemExecute:(ke,Ae,st,Ke)=>{h(ke),_n(ke,Rl,{name:t.name})}},x=fs.parts.field({...b,factory:UL}),T=t.label.map(ke=>qp(ke,d)),P=Jo(((ke,Ae,st=ke,Ke=ke)=>Vu(st,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ke],attributes:{title:d.translate(Ke),"aria-live":"polite",...Ae.fold(()=>({}),Ft=>({id:Ft}))}},d.icons))("invalid",M.some(y3),"warning")),$=Jo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[P.asSpec()]}),G=a.getUrlPicker(t.filetype),Y=tn("browser.url.event"),se=Jo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[x,$.asSpec()],behaviours:xt([l.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ie=Jo(X2({name:t.name,icon:M.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:M.none(),borderless:!0},ke=>ao(ke,Y),d,[],["tox-browse-url"])),Ne=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:dt([[se.asSpec()],G.map(()=>ie.asSpec()).toArray()])}),he=ke=>{Ro.getCurrent(ke).each(Ae=>{const st=Xt.getValue(Ae),Ke={fieldname:t.name,...st};G.each(Ft=>{Ft(Ke).get(Jt=>{Xt.setValue(Ae,Jt),_n(ke,Rl,{name:t.name})})})})};return fs.sketch({dom:W9(),components:T.toArray().concat([Ne()]),fieldBehaviours:xt([l.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ke=>{fs.getField(ke).each(l.disable),ie.getOpt(ke).each(l.disable)},onEnabled:ke=>{fs.getField(ke).each(l.enable),ie.getOpt(ke).each(l.enable)}}),Ga(),no("url-input-events",[it(Y,he)])])})},w3=(t,s)=>{const a=QO(t.icon,s.icons);return am.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Vi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>_n(c,mh,{name:"alert-banner",value:t.url}),buttonBehaviours:xt([p_()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},cU=(t,s)=>{t.dom.checked=s},lU=t=>t.dom.checked,uU=(t,s,a)=>{const c=T=>(T.element.dom.click(),M.some(!0)),d=fs.parts.field({factory:{sketch:Kt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:xt([hf.self(),l.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Mi(T.element).each(D=>$s(D,"tox-checkbox--disabled"))},onEnabled:T=>{Mi(T.element).each(D=>mr(D,"tox-checkbox--disabled"))}}),Vs.config({}),Fn.config({}),B4(a,lU,cU),En.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),no("checkbox-events",[it(np(),(T,D)=>{_n(T,Rl,{name:t.name})})])])}),h=fs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[hr(s.translate(t.label))],behaviours:xt([sy.config({})])}),b=T=>Vu(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),x=Jo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[b("checked"),b("unchecked")]});return fs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,x.asSpec(),h],fieldBehaviours:xt([l.config({disabled:()=>!t.enabled||s.isDisabled()}),Ga()])})},dU=(t,s)=>{const a=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],c=no("htmlpanel",[Gs(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?am.sketch({dom:{tag:"div",classes:a,innerHtml:t.html},containerBehaviours:xt([Ir.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{tr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>uc(d.element)).each(h=>{Dr(h,"data-mce-tooltip").each(b=>{Ir.setComponents(d,s.tooltips.getComponents({tooltipText:b}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:tr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>uc(d.element).filter(h=>Dr(h,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ne([Ca,wa,ya,us,Pr,xi]),onRtl:ne([Ca,wa,ya,us,Pr,xi])},bubble:Pu(0,-2,{})})}),c])}):am.sketch({dom:{tag:"div",classes:a,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:xt([Vs.config({}),Fn.config({}),c])})},Ka=t=>(s,a,c,d,h)=>At(a,"name").fold(()=>t(a,d,M.none(),h),b=>s.field(b,t(a,d,At(c,b),h))),qL=t=>(s,a,c,d,h)=>{const b=Ds(a,{source:"dynamic"});return Ka(t)(s,b,c,d,h)},GL={bar:Ka((t,s)=>$9(t,s.shared)),collection:Ka((t,s,a)=>oy(t,s.shared.providers,a)),alertbanner:Ka((t,s)=>w3(t,s.shared.providers)),input:Ka((t,s,a)=>xz(t,s.shared.providers,a)),textarea:Ka((t,s,a)=>Ez(t,s.shared.providers,a)),label:Ka((t,s,a,c)=>pL(t,s.shared,c)),iframe:qL((t,s,a)=>sz(t,s.shared.providers,a)),button:Ka((t,s)=>b3(t,s.shared.providers)),checkbox:Ka((t,s,a)=>uU(t,s.shared.providers,a)),colorinput:Ka((t,s,a)=>Q9(t,s.shared,s.colorinput,a)),colorpicker:Ka((t,s,a)=>GV(t,s.shared.providers,a)),dropzone:Ka((t,s,a)=>L4(t,s.shared.providers,a)),grid:Ka((t,s)=>XV(t,s.shared)),listbox:Ka((t,s,a)=>SL(t,s,a)),selectbox:Ka((t,s,a)=>bz(t,s.shared.providers,a)),sizeinput:Ka((t,s)=>TL(t,s.shared.providers)),slider:Ka((t,s,a)=>kL(t,s.shared.providers,a)),urlinput:Ka((t,s,a)=>cm(t,s,s.urlinput,a)),customeditor:Ka(iL),htmlpanel:Ka((t,s)=>dU(t,s.shared.providers)),imagepreview:Ka((t,s,a)=>Z4(t,a)),table:Ka((t,s)=>AL(t,s.shared.providers)),tree:Ka((t,s)=>Fz(t,s)),panel:Ka((t,s)=>hz(t,s))},gY={field:(t,s)=>s,record:ne([])},fU=(t,s,a,c,d)=>{const h=Ds(c,{shared:{interpreter:b=>Ai(t,b,a,h,d)}});return Ai(t,s,a,h,d)},Ai=(t,s,a,c,d)=>At(GL,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),h=>h(t,s,a,c,d)),pT=(t,s,a,c)=>Ai(gY,t,s,a,c),o1="layout-inset",uy=t=>t.x,KL=(t,s)=>t.x+t.width/2-s.width/2,C3=(t,s)=>t.x+t.width-s.width,S3=t=>t.y,x3=(t,s)=>t.y+t.height-s.height,YL=(t,s)=>t.y+t.height/2-s.height/2,bT=(t,s,a)=>Ua(C3(t,s),x3(t,s),a.insetSouthwest(),nn(),"southwest",ui(t,{right:0,bottom:3}),o1),vT=(t,s,a)=>Ua(uy(t),x3(t,s),a.insetSoutheast(),Dv(),"southeast",ui(t,{left:1,bottom:3}),o1),eS=(t,s,a)=>Ua(C3(t,s),S3(t),a.insetNorthwest(),Fw(),"northwest",ui(t,{right:0,top:2}),o1),dy=(t,s,a)=>Ua(uy(t),S3(t),a.insetNortheast(),Ov(),"northeast",ui(t,{left:1,top:2}),o1),cu=(t,s,a)=>Ua(KL(t,s),S3(t),a.insetNorth(),B1(),"north",ui(t,{top:2}),o1),fy=(t,s,a)=>Ua(KL(t,s),x3(t,s),a.insetSouth(),$w(),"south",ui(t,{bottom:3}),o1),E3=(t,s,a)=>Ua(C3(t,s),YL(t,s),a.insetEast(),kx(),"east",ui(t,{right:0}),o1),XL=(t,s,a)=>Ua(uy(t),YL(t,s),a.insetWest(),Tx(),"west",ui(t,{left:1}),o1),JL=t=>{switch(t){case"north":return cu;case"northeast":return dy;case"northwest":return eS;case"south":return fy;case"southeast":return vT;case"southwest":return bT;case"east":return E3;case"west":return XL}},QL=(t,s,a,c,d)=>Lx(c).map(JL).getOr(cu)(t,s,a,c,d),mU=t=>{switch(t){case"north":return fy;case"northeast":return vT;case"northwest":return bT;case"south":return cu;case"southeast":return dy;case"southwest":return eS;case"east":return XL;case"west":return E3}},e5=(t,s,a,c,d)=>Lx(c).map(mU).getOr(cu)(t,s,a,c,d),yT={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},pY=(t,s,a)=>{const d={maxHeightFunction:bp()},h=()=>({type:"node",root:gi(vr(t())),node:M.from(t()),bubble:Pu(12,12,yT),layouts:{onRtl:()=>[dy],onLtr:()=>[eS]},overrides:d}),b=()=>({type:"hotspot",hotspot:s(),bubble:Pu(-12,12,yT),layouts:{onRtl:()=>[ya,Pr,Ca],onLtr:()=>[Pr,ya,Ca]},overrides:d});return()=>a()?h():b()},hU=(t,s,a,c)=>{const h={maxHeightFunction:bp()},b=()=>({type:"node",root:gi(vr(s())),node:M.from(s()),bubble:Pu(12,12,yT),layouts:{onRtl:()=>[cu],onLtr:()=>[cu]},overrides:h}),x=()=>t?{type:"node",root:gi(vr(s())),node:M.from(s()),bubble:Pu(0,-ml(s()),yT),layouts:{onRtl:()=>[wa],onLtr:()=>[wa]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:Pu(0,0,yT),layouts:{onRtl:()=>[wa],onLtr:()=>[wa]},overrides:h};return()=>c()?b():x()},gU=(t,s,a)=>{const c=()=>({type:"node",root:gi(vr(t())),node:M.from(t()),layouts:{onRtl:()=>[cu],onLtr:()=>[cu]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ca],onLtr:()=>[Ca]}});return()=>a()?c():d()},pU=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],h=c[c.length-1],b={firstCell:_e.fromDom(d),lastCell:_e.fromDom(h)};return M.some(b)}return M.some(oh.range(_e.fromDom(a.startContainer),a.startOffset,_e.fromDom(a.endContainer),a.endOffset))}}),t5=t=>s=>({type:"node",root:t(),node:s}),_3=(t,s,a,c)=>{const d=H0(t),h=()=>_e.fromDom(t.getBody()),b=()=>_e.fromDom(t.getContentAreaContainer()),x=()=>d||!c();return{inlineDialog:pY(b,s,x),inlineBottomDialog:hU(t.inline,b,a,x),banner:gU(b,s,x),cursor:pU(t,h),node:t5(h)}},bU=t=>(s,a)=>{KB(t)(s,a)},vU=t=>()=>HB(t),n5=t=>s=>z_(t,s),yU=t=>s=>$B(t,s),wU=t=>({colorPicker:bU(t),hasCustomColors:vU(t),getColors:n5(t),getColorCols:yU(t)}),CU=t=>()=>dP(t),SU=t=>({isDraggableModal:CU(t)}),T3=t=>{const s=mn(YC(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},k3=t=>Hr(t,"items"),o5=t=>Hr(t,"format"),s5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],xU=t=>po(t,"items"),EU=t=>po(t,"block"),r5=t=>po(t,"inline"),_U=t=>po(t,"selector"),tS=t=>Ho(t,(s,a)=>{if(xU(a)){const c=tS(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(r5(a)||EU(a)||_U(a)){const d=`custom-${j(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),TU=(t,s)=>{const a=tS(s),c=d=>{wt(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},nS=t=>eP(t).map(s=>{const a=TU(t,s);return tP(t)?s5.concat(a):a}).getOr(s5),kU=t=>{const s=vs(t);return s.length===1&&eo(s,"title")},wT=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),my=(t,s,a,c)=>{const d=T=>wT(T,a,c),h=T=>{const D=x(T.items);return{...T,type:"submenu",getStyleItems:ne(D)}},b=T=>{const D=j(T.name)?T.name:tn(T.title),P=`custom-${D}`,$={...T,type:"formatter",format:P,isSelected:a(P),getStylePreview:c(P)};return t.formatter.register(D,$),$},x=T=>tt(T,D=>k3(D)?h(D):o5(D)?d(D):kU(D)?{...D,type:"separator"}:b(D));return x(s)},a5=t=>{const s=x=>()=>t.formatter.match(x),a=x=>()=>{const T=t.formatter.get(x);return T!==void 0?M.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(x))}):M.none()},c=mn([]),d=mn([]),h=mn(!1);return t.on("PreInit",x=>{const T=nS(t),D=my(t,T,s,a);c.set(D)}),t.on("addStyleModifications",x=>{const T=my(t,x.items,s,a);d.set(T),h.set(x.replace)}),{getData:()=>{const x=h.get()?[]:c.get(),T=d.get();return x.concat(T)}}},AU=t=>{let c=0;const d=()=>c>0,h=x=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[hr(x.tooltipText)]}];return{getConfig:x=>({delayForShow:()=>d()?60:300,delayForHide:ne(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:h(x),onShow:(T,D)=>{c++,x.onShow&&x.onShow(T,D)},onHide:(T,D)=>{c--,x.onHide&&x.onHide(T,D)},onSetup:x.onSetup}),getComponents:h}},i5=t=>vt(t)&&t.nodeType===1,c5=$g.trim,A3=t=>s=>!!(i5(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),OU=A3("true"),O3=A3("false"),oS=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),DU=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return OU(s)}return!1},RU=(t,s)=>tt(di(_e.fromDom(s),t),a=>a.dom),Mb=t=>t.innerText||t.textContent,l5=t=>t.id?t.id:tn("h"),MU=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,u5=t=>MU(t)&&ST(t),CT=t=>t&&/^(H[1-6])$/.test(t.nodeName),ST=t=>DU(t)&&!O3(t),NU=t=>CT(t)&&ST(t),PU=t=>CT(t)?parseInt(t.nodeName.substr(1),10):0,BU=t=>{var s;const a=l5(t),c=()=>{t.id=a};return oS("header",(s=Mb(t))!==null&&s!==void 0?s:"","#"+a,PU(t),c)},D3=t=>{const s=t.id||t.name,a=Mb(t);return oS("anchor",a||"#"+s,"#"+s,0,ce)},IU=t=>tt(uo(t,NU),BU),LU=t=>tt(uo(t,u5),D3),FU=t=>RU("h1,h2,h3,h4,h5,h6,a:not([href])",t),$U=t=>c5(t.title).length>0,HU={find:t=>{const s=FU(t);return uo(IU(s).concat(LU(s)),$U)}},xT="tinymce-url-history",R3=5,d5=t=>j(t)&&/^https?/.test(t),sS=t=>be(t)&&t.length<=R3&&_o(t,d5),f5=t=>ue(t)&&Go(t,s=>!sS(s)).isNone(),m5=()=>{const t=kb.getItem(xT);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+xT+" was not valid JSON",a),{};throw a}return f5(s)?s:(console.log("Local storage "+xT+" was not valid format",s),{})},M3=t=>{if(!f5(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));kb.setItem(xT,JSON.stringify(t))},h5=t=>{const s=m5();return At(s,t).getOr([])},VU=(t,s)=>{if(!d5(t))return;const a=m5(),c=At(a,s).getOr([]),d=uo(c,h=>h!==t);a[s]=[t].concat(d).slice(0,R3),M3(a)},g5=t=>!!t,zU=t=>Vo($g.makeMap(t,/[, ]/),g5),N3=t=>M.from(cP(t)),UU=t=>{const s=M.from(_O(t)).filter(g5).map(zU);return N3(t).fold(Me,a=>s.fold(Pe,c=>vs(c).length>0?c:!1))},WU=(t,s)=>{const a=UU(t);return Ht(a)?a?N3(t):M.none():a[s]?N3(t):M.none()},ZU=(t,s)=>WU(t,s).map(a=>c=>zi.nu(d=>{const h=(x,T)=>{if(!j(x))throw new Error("Expected value to be string");if(T!==void 0&&!ue(T))throw new Error("Expected meta to be a object");d({value:x,meta:T})},b={filetype:s,fieldname:c.fieldname,...M.from(c.meta).getOr({})};a.call(t,h,c.value,b)})),p5=t=>M.from(t).filter(j).getOrUndefined(),jU=t=>TO(t)?M.some({targets:HU.find(t.getBody()),anchorTop:p5(uP(t)),anchorBottom:p5(s_(t))}):M.none(),vY=t=>M.from(lP(t)),qU=t=>({getHistory:h5,addToHistory:VU,getLinkInformation:()=>jU(t),getValidationHandler:()=>vY(t),getUrlPicker:s=>ZU(t,s)}),b5=(t,s,a,c)=>{const d=mn(!1),h=T3(s),b={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Hu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get,tooltips:AU(t.dialog)},x=qU(s),T=a5(s),D=wU(s),P=SU(s),$=()=>d.get(),G=he=>d.set(he),Y={shared:{providers:b,anchors:_3(s,a,c,h.isPositionedAtTop),header:h},urlinput:x,styles:T,colorinput:D,dialog:P,isContextMenuOpen:$,setContextMenuState:G},se=he=>M.none(),ie={...Y,shared:{...Y.shared,interpreter:he=>pT(he,{},ie,se),getSink:t.popup}},Ne={...Y,shared:{...Y.shared,interpreter:he=>pT(he,{},Ne,se),getSink:t.dialog}};return{popup:ie,dialog:Ne}},v5=(t,s,a)=>{const c=(Qe,ln)=>{wt([s,...a],It=>{It.broadcastEvent(Qe,ln)})},d=(Qe,ln)=>{wt([s,...a],It=>{It.broadcastOn([Qe],ln)})},h=Qe=>d(of(),{target:Qe.target}),b=jc(),x=dc(b,"touchstart",h),T=dc(b,"touchmove",Qe=>c(C1(),Qe)),D=dc(b,"touchend",Qe=>c(Zy(),Qe)),P=dc(b,"mousedown",h),$=dc(b,"mouseup",Qe=>{Qe.raw.button===0&&d(h0(),{target:Qe.target})}),G=Qe=>d(of(),{target:_e.fromDom(Qe.target)}),Y=Qe=>{Qe.button===0&&d(h0(),{target:_e.fromDom(Qe.target)})},se=()=>{wt(t.editorManager.get(),Qe=>{t!==Qe&&Qe.dispatch("DismissPopups",{relatedTarget:t})})},ie=Qe=>c(Xh(),Zw(Qe)),Ne=Qe=>{d(yg(),{}),c(md(),Zw(Qe))},he=vr(_e.fromDom(t.getElement())),ke=Ww(he,"scroll",Qe=>{requestAnimationFrame(()=>{const ln=t.getContainer();if(ln!=null){const fn=Rg(t,s.element).map(bo=>[bo.element,...bo.others]).getOr([]);ms(fn,bo=>Uo(bo,Qe.target))&&(t.dispatch("ElementScroll",{target:Qe.target.dom}),c(WS(),Qe))}})}),Ae=()=>d(yg(),{}),st=Qe=>{Qe.state&&d(of(),{target:_e.fromDom(t.getContainer())})},Ke=Qe=>{d(of(),{target:_e.fromDom(Qe.relatedTarget.getContainer())})},Ft=Qe=>t.dispatch("focusin",Qe),Jt=Qe=>t.dispatch("focusout",Qe);t.on("PostRender",()=>{t.on("click",G),t.on("tap",G),t.on("mouseup",Y),t.on("mousedown",se),t.on("ScrollWindow",ie),t.on("ResizeWindow",Ne),t.on("ResizeEditor",Ae),t.on("AfterProgressState",st),t.on("DismissPopups",Ke),wt([s,...a],Qe=>{Qe.element.dom.addEventListener("focusin",Ft),Qe.element.dom.addEventListener("focusout",Jt)})}),t.on("remove",()=>{t.off("click",G),t.off("tap",G),t.off("mouseup",Y),t.off("mousedown",se),t.off("ScrollWindow",ie),t.off("ResizeWindow",Ne),t.off("ResizeEditor",Ae),t.off("AfterProgressState",st),t.off("DismissPopups",Ke),wt([s,...a],Qe=>{Qe.element.dom.removeEventListener("focusin",Ft),Qe.element.dom.removeEventListener("focusout",Jt)}),P.unbind(),x.unbind(),T.unbind(),D.unbind(),$.unbind(),ke.unbind()}),t.on("detach",()=>{wt([s,...a],dC),wt([s,...a],Qe=>Qe.destroy())})},xa=BE,lm=NM,GU=ne([Be("shell",!1),rt("makeItem"),Be("setupItem",ce),su.field("listBehaviours",[zn])]),KU=Tl({name:"items",overrides:()=>({behaviours:xt([zn.config({})])})}),YU=ne([KU]),XU=ne("CustomList"),JU=(t,s,a,c)=>{const d=(x,T)=>{b(x).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},D=>{const P=zn.contents(D),$=T.length,G=$-P.length,Y=G>0?to(G,()=>t.makeItem()):[],se=P.slice($);wt(se,Ne=>zn.remove(D,Ne)),wt(Y,Ne=>zn.append(D,Ne));const ie=zn.contents(D);wt(ie,(Ne,he)=>{t.setupItem(x,Ne,T[he],he)})})},h=t.shell?{behaviours:[zn.config({})],components:[]}:{behaviours:[],components:s},b=x=>t.shell?M.some(x):bt(x,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:ja(t.listBehaviours,h.behaviours),apis:{setItems:d}}},y5=Ki({name:XU(),configFields:GU(),partFields:YU(),factory:JU,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Nb=ne([rt("dom"),Be("shell",!0),Za("toolbarBehaviours",[zn])]),eW=ne([Tl({name:"groups",overrides:()=>({behaviours:xt([zn.config({})])})})]),w5=(t,s,a,c)=>{const d=(x,T)=>{h(x).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},D=>{zn.set(D,T)})},h=x=>t.shell?M.some(x):bt(x,t,"groups"),b=t.shell?{behaviours:[zn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:b.components,behaviours:ja(t.toolbarBehaviours,b.behaviours),apis:{setGroups:d,refresh:ce},domModification:{attributes:{role:"group"}}}},um=Ki({name:"Toolbar",configFields:Nb(),partFields:eW(),factory:w5,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),tW=ce,nW=Me,s1=ne([]);var C5=Object.freeze({__proto__:null,setup:tW,isDocked:nW,getBehaviours:s1});const Pb=ne(tn("toolbar-height-change")),Od={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},P3="tox-tinymce--toolbar-sticky-on",B3="tox-tinymce--toolbar-sticky-off",S5=(t,s)=>{const a=ma(s),d=Da(s).dom.innerHeight,h=ai(a),b=_e.fromDom(t.elm),x=tc(b),T=xs(b),D=x.y,P=D+T,$=ga(s),G=xs(s),Y=$.top,se=Y+G,ie=Math.abs(Y-h.top)<2,Ne=Math.abs(se-(h.top+d))<2;if(ie&&D<se)td(h.left,D-G,a);else if(Ne&&P>Y){const he=D-d+T+G;td(h.left,he,a)}},I3=(t,s)=>eo(Hs.getModes(t),s),L3=t=>{const s=c=>ml(c)+(parseInt(rs(c,"margin-top"),10)||0)+(parseInt(rs(c,"margin-bottom"),10)||0),a=t.element;Mi(a).each(c=>{const d="padding-"+Hs.getModes(t)[0];if(Hs.isDocked(t)){const h=La(c);lt(a,"width",h+"px"),lt(c,d,s(a)+"px")}else Xn(a,"width"),Xn(c,d)})},x5=(t,s)=>{s?(mr(t,Od.fadeOutClass),ap(t,[Od.transitionClass,Od.fadeInClass])):(mr(t,Od.fadeInClass),ap(t,[Od.fadeOutClass,Od.transitionClass]))},E5=(t,s)=>{const a=_e.fromDom(t.getContainer());s?($s(a,P3),mr(a,B3)):($s(a,B3),mr(a,P3))},oW=(t,s)=>{const a=ma(s);vd(a).filter(c=>!Uo(s,c)).filter(c=>Uo(c,_e.fromDom(a.dom.body))||Oa(t,c)).each(()=>Sl(s))},sW=(t,s)=>uc(t).orThunk(()=>s().toOptional().bind(a=>uc(a.element))),hy=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Hs.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(L3)}),t.on("SkinLoaded",()=>{a().each(c=>{Hs.isDocked(c)?Hs.reset(c):Hs.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(Hs.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{Hs.refresh(d);const h=d.element;WM(h)&&S5(c,h)})}),t.on("PostRender",()=>{E5(t,!1)})},rS=t=>t().map(Hs.isDocked).getOr(!1),F3=()=>[Nc.config({channels:{[Pb()]:{onReceive:L3}}})],_5=(t,s)=>{const a=ts(),c=s.getSink,d=x=>{c().each(T=>x(T.element))},h=x=>{t.inline||L3(x),E5(t,Hs.isDocked(x)),x.getSystem().broadcastOn([yg()],{}),c().each(T=>T.getSystem().broadcastOn([yg()],{}))},b=t.inline?[]:F3();return[Fn.config({}),Hs.config({contextual:{lazyContext:x=>{const T=ml(x.element),D=t.inline?t.getContentAreaContainer():t.getContainer();return M.from(D).map(P=>{const $=Qs(_e.fromDom(P));return Rg(t,x.element).fold(()=>{const Y=$.height-T,se=$.y+(I3(x,"top")?0:T);return qs($.x,se,$.width,Y)},Y=>{const se=od($,pb(Y)),ie=I3(x,"top")?se.y:se.y+T;return qs(se.x,ie,se.width,se.height-T)})})},onShow:()=>{d(x=>x5(x,!0))},onShown:x=>{d(T=>Qc(T,[Od.transitionClass,Od.fadeInClass])),a.get().each(T=>{oW(x.element,T),a.clear()})},onHide:x=>{sW(x.element,c).fold(a.clear,a.set),d(T=>x5(T,!1))},onHidden:()=>{d(x=>Qc(x,[Od.transitionClass]))},...Od},lazyViewport:x=>Rg(t,x.element).fold(()=>{const D=Ur(),P=aP(t),$=D.y+(I3(x,"top")?P:0),G=D.height-(I3(x,"bottom")?P:0);return{bounds:qs(D.x,$,D.width,G),optScrollEnv:M.none()}},D=>({bounds:pb(D),optScrollEnv:M.some({currentScrollTop:D.element.dom.scrollTop,scrollElmTop:ga(D.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...b]};var rW=Object.freeze({__proto__:null,setup:hy,isDocked:rS,getBehaviours:_5});const $3=t=>{const s=t.editor,a=t.sticky?_5:s1;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:xt(a(s,t.sharedBackstage))}},aW=Dn([Qr,Fo("items",_m([p1([k_,Ac("items",Wt)]),Wt]))].concat(mc)),aS=t=>ar("GroupToolbarButton",aW,t),T5=[ca("text"),ca("tooltip"),ca("icon"),Oc("search",!1,_m([qc,Dn([ca("placeholder")])],t=>Ht(t)?t?M.some({placeholder:M.none()}):M.none():M.some(t))),kc("fetch"),fr("onSetup",()=>ce)],k5=Dn([Qr,...T5]),A5=t=>ar("menubutton",k5,t),iW=Dn([Qr,W0,Ed,Pg,tH,X8,Cb,Dc("presets","normal",["normal","color","listpreview"]),YP(1),Up,KP]),cW=t=>ar("SplitButton",iW,t);var H3=il({factory:(t,s)=>{const a=(d,h)=>{const b=tt(h,x=>{const T={type:"menubutton",text:x.text,fetch:P=>{P(x.getItems())}},D=A5(T).mapError(P=>Gl(P)).getOrDie();return G2(D,"tox-mbtn",s.backstage,M.some("menuitem"))});zn.set(d,b)},c={focus:En.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:xt([zn.config({}),no("menubar-events",[Gs(d=>{t.onSetup(d)}),it(Kc(),(d,h)=>{tr(d.element,".tox-mbtn--active").each(b=>{Nu(h.event.target,".tox-mbtn").each(x=>{Uo(b,x)||d.getSystem().getByDom(b).each(T=>{d.getSystem().getByDom(x).each(D=>{kd.expand(D),kd.close(T),Fn.focus(D)})})})})}),it(Jh(),(d,h)=>{h.event.prevFocus.bind(b=>d.getSystem().getByDom(b).toOptional()).each(b=>{h.event.newFocus.bind(x=>d.getSystem().getByDom(x).toOptional()).each(x=>{kd.isOpen(b)&&(kd.expand(x),kd.close(b))})})})]),En.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),M.some(!0))}),Vs.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[rt("dom"),rt("uid"),rt("onEscape"),rt("backstage"),Be("onSetup",ce)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const O5="⚡️Upgrade",D5="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",V3=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:D5,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:O5}}]}),R5="container",ET=[Za("slotBehaviours",[])],iS=t=>"<alloy.field."+t+">",M5=t=>{const s=(()=>{const h=[];return{slot:(x,T)=>(h.push(x),RE(R5,iS(x),T)),record:ne(h)}})(),a=t(s),c=s.record(),d=tt(c,h=>Ti({name:h,pname:iS(h)}));return uh(R5,ET,d,lW,a)},lW=(t,s)=>{const a=ie=>sb(t),c=(ie,Ne)=>bt(ie,t,Ne),d=(ie,Ne)=>(he,ke)=>bt(he,t,ke).map(Ae=>ie(Ae,ke)).getOr(Ne),h=ie=>(Ne,he)=>{wt(he,ke=>ie(Ne,ke))},b=(ie,Ne)=>pn(ie.element,"aria-hidden")!=="true",x=(ie,Ne)=>{if(!b(ie)){const he=ie.element;Xn(he,"display"),H(he,"aria-hidden"),_n(ie,qy(),{name:Ne,visible:!0})}},T=(ie,Ne)=>{if(b(ie)){const he=ie.element;lt(he,"display","none"),qt(he,"aria-hidden","true"),_n(ie,qy(),{name:Ne,visible:!1})}},D=d(b,!1),P=d(T),$=h(P),G=ie=>$(ie,a()),Y=d(x),se={getSlotNames:a,getSlot:c,isShowing:D,hideSlot:P,hideAllSlots:G,showSlot:Y};return{uid:t.uid,dom:t.dom,components:s,behaviours:Q1(t.slotBehaviours),apis:se}},gc={...Vo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>vv(t)),sketch:M5},uW=Dn([Ed,W0,fr("onShow",ce),fr("onHide",ce),Cb]),z3=t=>ar("sidebar",uW,t),U3=t=>{const{sidebars:s}=t.ui.registry.getAll();wt(vs(s),a=>{const c=s[a],d=()=>Vr(M.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const b=()=>h.setActive(d());return t.on("ToggleSidebar",b),()=>{t.off("ToggleSidebar",b)}}})})},dW=t=>({element:()=>t.element.dom}),W3=(t,s)=>{const a=tt(vs(s),c=>{const d=s[c],h=pt(z3(d));return{name:c,getApi:dW,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return tt(a,c=>{const d=mn(ce);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:q0.unnamedEvents([hc(c,d),Zp(c,d),it(qy(),(h,b)=>{const x=b.event;et(a,D=>D.name===x.name).each(D=>{(x.visible?D.onShow:D.onHide)(D.getApi(h))})})])})})},fW=t=>gc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:W3(s,t),slotBehaviours:q0.unnamedEvents([Gs(a=>gc.hideAllSlots(a))])})),mW=(t,s,a)=>{Ro.getCurrent(t).each(d=>{zn.set(d,[fW(s)]);const h=a==null?void 0:a.toLowerCase();j(h)&&po(s,h)&&Ro.getCurrent(d).each(b=>{gc.showSlot(b,h),Lc.immediateGrow(d),Xn(d.element,"width"),_T(t.element,"region")})})},_T=(t,s)=>{qt(t,"role",s)},hW=(t,s)=>{Ro.getCurrent(t).each(c=>{Ro.getCurrent(c).each(h=>{Lc.hasGrown(c)?gc.isShowing(h,s)?(Lc.shrink(c),_T(t.element,"presentation")):(gc.hideAllSlots(h),gc.showSlot(h,s),_T(t.element,"region")):(gc.hideAllSlots(h),gc.showSlot(h,s),Lc.grow(c),_T(t.element,"region"))})})},gW=t=>Ro.getCurrent(t).bind(a=>Lc.isGrowing(a)||Lc.hasGrown(a)?Ro.getCurrent(a).bind(h=>et(gc.getSlotNames(h),b=>gc.isShowing(h,b))):M.none()),N5=tn("FixSizeEvent"),P5=tn("AutoSizeEvent"),B5=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:xt([Vs.config({}),Fn.config({}),Lc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Ro.getCurrent(s).each(gc.hideAllSlots),ao(s,P5)},onGrown:s=>{ao(s,P5)},onStartGrow:s=>{_n(s,N5,{width:Os(s.element,"width").getOr("")})},onStartShrink:s=>{_n(s,N5,{width:La(s.element)+"px"})}}),zn.config({}),Ro.config({find:s=>{const a=zn.contents(s);return Is(a)}})])}],behaviours:xt([hf.childAt(0),no("sidebar-sliding-events",[it(N5,(s,a)=>{lt(s.element,"width",a.event.width)}),it(P5,(s,a)=>{Xn(s.element,"width")})])])});var bW=Object.freeze({__proto__:null,block:(t,s,a,c)=>{qt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=xt([En.config({mode:"special",onTab:()=>M.some(!0),onShiftTab:()=>M.some(!0)}),Fn.config({})]),b=c(d,h),x=d.getSystem().build(b);zn.append(d,Cl(x)),x.hasConfigured(En)&&s.focus&&En.focusIn(x),a.isBlocked()||s.onBlock(t),a.blockWith(()=>zn.remove(d,x))},unblock:(t,s,a)=>{H(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),vW=[fr("getRoot",M.none),Mr("focus",!0),ko("onBlock"),ko("onUnblock")],yW=Object.freeze({__proto__:null,init:()=>{const t=Sm(),s=a=>{t.set({destroy:a})};return Xc({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const bf=li({fields:vW,name:"blocking",apis:bW,state:yW}),wW=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:nm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),I5=t=>Ro.getCurrent(t).each(s=>Sl(s.element,!0)),CW=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;M.from(t.iframeElement).map(_e.fromDom).each(d=>{s?(Dr(d,a).each(h=>qt(d,c,h)),qt(d,a,-1)):(H(d,a),Dr(d,c).each(h=>{qt(d,a,h),H(d,c)}))})},_Y=(t,s,a,c)=>{const d=s.element;if(CW(t,a),a)bf.block(s,wW(c)),Xn(d,"display"),H(d,"aria-hidden"),t.hasFocus()&&I5(s);else{const h=Ro.getCurrent(s).exists(b=>I1(b.element));bf.unblock(s),lt(d,"display","none"),qt(d,"aria-hidden","true"),h&&t.focus()}},TY=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:xt([zn.config({}),bf.config({focus:!1}),Ro.config({find:s=>Is(s.components())})]),components:[]}),L5=t=>t.type==="focusin",F5=t=>L5(t)?(t.composed?Is(t.composedPath()):M.from(t.target)).map(_e.fromDom).filter(xo).exists(a=>Jc(a,"mce-pastebin")):!1,SW=(t,s,a)=>{const c=mn(!1),d=ts(),h=x=>{c.get()&&!F5(x)&&(x.preventDefault(),I5(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",x=>{x.command.toLowerCase()==="mcefocus"&&x.value!==!0&&h(x)})});const b=x=>{x!==c.get()&&(c.set(x),_Y(t,s(),x,a.providers),OH(t,x))};t.on("ProgressState",x=>{if(d.on(clearTimeout),on(x.time)){const T=F0.setEditorTimeout(t,()=>b(x.state),x.time);d.set(T)}else b(x.state),d.clear()})},xW=(t,s)=>Ho(t,(d,h)=>s(h,d.len).fold(ne(d),x=>({len:x.finish,list:d.list.concat([x])})),{len:0,list:[]}).list,Ml=(t,s,a)=>({within:t,extra:s,withinWidth:a}),$5=(t,s,a)=>{const c=xW(t,(x,T)=>{const D=a(x);return M.some({element:x,start:T,finish:T+D,width:D})}),d=uo(c,x=>x.finish<=s),h=qo(d,(x,T)=>x+T.width,0),b=c.slice(d.length);return{within:d,extra:b,withinWidth:h}},cS=t=>tt(t,s=>s.element),H5=(t,s,a)=>{const c=cS(t.concat(s));return Ml(c,[],a)},EW=(t,s,a,c)=>{const d=cS(t).concat([a]);return Ml(d,cS(s),c)},lS=(t,s,a)=>Ml(cS(t),[],a),_W=(t,s,a)=>{const c=$5(s,t,a);return c.extra.length===0?M.some(c):M.none()},TT=(t,s,a,c)=>{const d=_W(t,s,a).getOrThunk(()=>$5(s,t-a(c),a)),h=d.within,b=d.extra,x=d.withinWidth;return b.length===1&&b[0].width<=a(c)?H5(h,b,x):b.length>=1?EW(h,b,c,x):lS(h,b,x)},V5=(t,s)=>{const a=tt(s,c=>Cl(c));um.setGroups(t,a)},kT=t=>bs(t,s=>uc(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),z5=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=kl(t,s,"primary"),h=jr.getCoupled(t,"overflowGroup");lt(d.element,"visibility","hidden");const b=c.concat([h]),x=kT(b);a([]),V5(d,b);const T=La(d.element),D=TT(T,s.builtGroups.get(),P=>Math.ceil(P.element.dom.getBoundingClientRect().width),h);D.extra.length===0?(zn.remove(d,h),a([])):(V5(d,D.within),a(D.extra)),Xn(d.element,"visibility"),oi(d.element),x.each(Fn.focus)},U5=ne([Za("splitToolbarBehaviours",[jr]),Lo("builtGroups",()=>mn([]))]),Dd=ne([cg(["overflowToggledClass"]),ku("getOverflowBounds"),rt("lazySink"),Lo("overflowGroups",()=>mn([])),ko("onOpened"),ko("onClosed")].concat(U5())),TW=ne([Ti({factory:um,schema:Nb(),name:"primary"}),ru({schema:Nb(),name:"overflow"}),ru({name:"overflow-button"}),ru({name:"overflow-group"})]),gy=ne((t,s)=>{hl(t,Math.floor(s))}),W5=ne([cg(["toggledClass"]),rt("lazySink"),kc("fetch"),ku("getBounds"),Bs("fireDismissalEventInstead",[Be("event",Rm())]),th(),ko("onToggled")]),Z5=ne([ru({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:xt([lo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),ru({factory:um,schema:Nb(),name:"toolbar",overrides:t=>({toolbarBehaviours:xt([En.config({mode:"cyclic",onEscape:s=>(bt(s,t,"button").each(Fn.focus),M.none())})])})})]),AT=ts(),j5=(t,s)=>{AT.set(!0),Z3(t,s),AT.clear()},Z3=(t,s)=>{const a=jr.getCoupled(t,"toolbarSandbox");Do.isOpen(a)?Do.close(a):Do.open(a,s.toolbar())},j3=(t,s,a,c)=>{const d=a.getBounds.map(b=>b()),h=a.lazySink(t).getOrDie();Hi.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:gy()}}},d)},q5=(t,s,a,c,d)=>{um.setGroups(s,d),j3(t,s,a,c),lo.on(t)},kW=(t,s,a)=>{const c=Iw(),d=(b,x)=>{const T=AT.get().getOr(!1);a.fetch().get(D=>{q5(t,x,a,s.layouts,D),c.link(t.element),T||En.focusIn(x)})},h=()=>{lo.off(t),AT.get().getOr(!1)||Fn.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:xt([En.config({mode:"special",onEscape:b=>(Do.close(b),M.some(!0))}),Do.config({onOpen:d,onClose:h,isPartOf:(b,x,T)=>dg(x,T)||dg(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Nc.config({channels:{...lh({isExtraPart:Me,...a.fireDismissalEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({})}),...pC({doReposition:()=>{Do.getState(jr.getCoupled(t,"toolbarSandbox")).each(b=>{j3(t,b,a,s.layouts)})}})}})])}},r1=Ki({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Vi.sketch({...c.button(),action:d=>{Z3(d,c)},buttonBehaviours:su.augment({dump:c.button().buttonBehaviours},[jr.config({others:{toolbarSandbox:d=>kW(d,a,t)}})])}),apis:{setGroups:(d,h)=>{Do.getState(jr.getCoupled(d,"toolbarSandbox")).each(b=>{q5(d,b,t,a.layouts,h)})},reposition:d=>{Do.getState(jr.getCoupled(d,"toolbarSandbox")).each(h=>{j3(d,h,t,a.layouts)})},toggle:d=>{Z3(d,c)},toggleWithoutFocusing:d=>{j5(d,c)},getToolbar:d=>Do.getState(jr.getCoupled(d,"toolbarSandbox")),isOpen:d=>Do.isOpen(jr.getCoupled(d,"toolbarSandbox"))}}),configFields:W5(),partFields:Z5(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),AW=ne([rt("items"),cg(["itemSelector"]),Za("tgroupBehaviours",[En])]),G5=ne([k0({name:"items",unit:"item"})]),K5=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.tgroupBehaviours,[En.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),uS=Ki({name:"ToolbarGroup",configFields:AW(),partFields:G5(),factory:K5}),Y5=t=>tt(t,s=>Cl(s)),X5=(t,s,a)=>{z5(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{r1.setGroups(d,Y5(c))})})},J5=(t,s,a,c)=>{const d=Jo(r1.sketch({fetch:()=>zi.nu(h=>{h(Y5(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Pr,ya],onRtl:()=>[ya,Pr],onBottomLtr:()=>[xi,us],onBottomRtl:()=>[us,xi]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(h,b)=>t[b?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.splitToolbarBehaviours,[jr.config({others:{overflowGroup:()=>uS.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,b)=>{t.builtGroups.set(tt(b,h.getSystem().build)),X5(h,d,t)},refresh:h=>X5(h,d,t),toggle:h=>{d.getOpt(h).each(b=>{r1.toggle(b)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(r1.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(r1.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(b=>{r1.reposition(b)})},getOverflow:h=>d.getOpt(h).bind(r1.getToolbar)},domModification:{attributes:{role:"group"}}}},q3=Ki({name:"SplitFloatingToolbar",configFields:Dd(),partFields:TW(),factory:J5,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),Q5=ne([cg(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ko("onOpened"),ko("onClosed")].concat(U5())),OW=ne([Ti({factory:um,schema:Nb(),name:"primary"}),Ti({factory:um,schema:Nb(),name:"overflow",overrides:t=>({toolbarBehaviours:xt([Lc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{bt(s,t,"overflow-button").each(a=>{lo.off(a)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{bt(s,t,"overflow-button").each(lo.on)}}),En.config({mode:"acyclic",onEscape:s=>(bt(s,t,"overflow-button").each(Fn.focus),M.some(!0))})])})}),ru({name:"overflow-button",overrides:t=>({buttonBehaviours:xt([lo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ru({name:"overflow-group"})]),DW=(t,s)=>bt(t,s,"overflow").map(Lc.hasGrown).getOr(!1),G3=(t,s,a)=>{bt(t,s,"overflow-button").each(c=>{bt(t,s,"overflow").each(d=>{if(OT(t,s),Lc.hasShrunk(d)){const h=s.onOpened;s.onOpened=b=>{a||En.focusIn(d),h(b),s.onOpened=h}}else{const h=s.onClosed;s.onClosed=b=>{a||Fn.focus(c),h(b),s.onClosed=h}}Lc.toggleGrow(d)})})},OT=(t,s)=>{bt(t,s,"overflow").each(a=>{z5(t,s,c=>{const d=tt(c,h=>Cl(h));um.setGroups(a,d)}),bt(t,s,"overflow-button").each(c=>{Lc.hasGrown(a)&&lo.on(c)}),Lc.refresh(a)})},RW=(t,s,a,c)=>{const d="alloy.toolbar.toggle",h=(b,x)=>{const T=tt(x,b.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ja(t.splitToolbarBehaviours,[jr.config({others:{overflowGroup:b=>uS.sketch({...c["overflow-group"](),items:[Vi.sketch({...c["overflow-button"](),action:x=>{ao(b,d)}})]})}}),no("toolbar-toggle-events",[it(d,b=>{G3(b,t,!1)})])]),apis:{setGroups:(b,x)=>{h(b,x),OT(b,t)},refresh:b=>OT(b,t),toggle:b=>{G3(b,t,!1)},toggleWithoutFocusing:b=>{G3(b,t,!0)},isOpen:b=>DW(b,t)},domModification:{attributes:{role:"group"}}}},K3=Ki({name:"SplitSlidingToolbar",configFields:Q5(),partFields:OW(),factory:RW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),eF=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[uS.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:xt([Vs.config({}),Fn.config({})])}},DT=t=>uS.sketch(eF(t)),tF=(t,s)=>{const a=Gs(c=>{const d=tt(t.initGroups,DT);um.setGroups(c,d)});return xt([mf.toolbarButton(t.providers.isDisabled),Ga(),En.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),no("toolbar-events",[a])])},nF=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":eF({title:M.none(),items:[]}),"overflow-button":Yz({name:"more",icon:M.some("more-drawer"),enabled:!0,tooltip:M.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:M.none(),borderless:!1},M.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:tF(t,s)}},MW=t=>{const s=nF(t),a=4,c=q3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return q3.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=tc(d),b=$l(d),x=tc(b),T=Math.max(b.dom.scrollHeight,x.height);return qs(h.x+a,x.y,h.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},NW=t=>{const s=K3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=K3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=nF(t);return K3.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Pb()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Pb()],{type:"closed"}),t.onToggled(d,!1)}})},RT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return um.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Cd.scrolling?["tox-toolbar--scrolling"]:[])},components:[um.parts.groups({})],toolbarBehaviours:tF(t,s)})},oF=[Pg,Ed,ca("tooltip"),Dc("buttonType","secondary",["primary","secondary"]),Mr("borderless",!1),kc("onAction")],sF=[...oF,Ng,wi("type",["button"])],PW=[...oF,Mr("active",!1),wi("type",["togglebutton"])],rF={button:sF,togglebutton:PW},Y3=[wi("type",["group"]),_("buttons",[],ba("type",rF))],BW=ba("type",{...rF,group:Y3}),MT=Dn([_("buttons",[],BW),kc("onShow"),kc("onHide")]),IW=t=>ar("view",MT,t),aF=(t,s)=>{var a,c;const d=t.type==="togglebutton",h=t.icon.map(Ae=>e1(Ae,s.icons)).map(Jo),x=Ae=>{const st=Jt=>{h.map(Qe=>Qe.getOpt(Ae).each(ln=>{zn.set(ln,[e1(Jt,s.icons)])}))},Ke=Jt=>{const Qe=Ae.element;Jt?($s(Qe,"tox-button--enabled"),qt(Qe,"aria-pressed",!0)):(mr(Qe,"tox-button--enabled"),H(Qe,"aria-pressed"))},Ft=()=>Jc(Ae.element,"tox-button--enabled");if(d)return t.onAction({setIcon:st,setActive:Ke,isActive:Ft});if(t.type==="button")return t.onAction({setIcon:st})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:M.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},D=h3((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),P=d?t.text.map(s.translate):M.some(s.translate(t.text)),$=P.map(hr),G=T.tooltip.or(P).map(Ae=>({"aria-label":s.translate(Ae)})).getOr({}),Y=h.map(Ae=>Ae.asSpec()),se=xb([Y,$]),ie=t.icon.isSome()&&$.isSome(),Ne={tag:"button",classes:D.concat(...t.icon.isSome()&&!ie?["tox-button--icon"]:[]).concat(...ie?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:G},he=[],ke=Y2(T,M.some(x),he,Ne,se,t.tooltip,s);return Vi.sketch(ke)},iF=(t,s)=>aF(t,s),LW=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:tt(t.buttons,a=>iF(a,s))}),FW=ro().deviceType,$W=FW.isPhone(),HW=FW.isTablet(),X3=t=>{let s=!1;const a=tt(t.buttons,c=>c.type==="group"?(s=!0,LW(c,t.providers)):iF(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...$W||HW?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:xt([Fn.config({}),En.config({mode:"flow",selector:"button, .tox-button",focusInside:tm.OnEnterOrSpaceMode})]),components:s?a:[am.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),am.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},VW=t=>({uid:t.uid,behaviours:xt([Fn.config({}),Vs.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),NT=(t,s,a,c)=>{const d={getPane:h=>xa.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:xt([Fn.config({}),En.config({mode:"cyclic",focusInside:tm.OnEnterOrSpaceMode})]),apis:d}};var Bb=Ki({name:"silver.View",configFields:[rt("viewConfig")],partFields:[Tl({factory:{sketch:X3},schema:[rt("buttons"),rt("providers")],name:"header"}),Tl({factory:{sketch:VW},schema:[],name:"pane"})],factory:NT,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const cF=(t,s,a)=>Zi(s,(c,d)=>{const h=pt(IW(c));return t.slot(d,Bb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[Bb.parts.header({buttons:h.buttons,providers:a})]:[],Bb.parts.pane({})]}))}),J3=(t,s)=>gc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:cF(a,t,s),slotBehaviours:q0.unnamedEvents([Gs(c=>gc.hideAllSlots(c))])})),lF=t=>et(gc.getSlotNames(t),s=>gc.isShowing(t,s)),uF=t=>{const s=t.element;lt(s,"display","none"),qt(s,"aria-hidden","true")},py=t=>{const s=t.element;Xn(s,"display"),H(s,"aria-hidden")},dF=t=>({getContainer:ne(t)}),fF=(t,s,a)=>{gc.getSlot(t,s).each(c=>{Bb.getPane(c).each(d=>{a(c)(dF(d.element.dom))})})},zW=(t,s)=>fF(t,s,Bb.getOnShow),UW=(t,s)=>fF(t,s,Bb.getOnHide);var PT=il({factory:(t,s)=>{const h={setViews:(b,x)=>{zn.set(b,[J3(x,s.backstage.shared.providers)])},whichView:b=>Ro.getCurrent(b).bind(lF),toggleView:(b,x,T,D)=>Ro.getCurrent(b).exists(P=>{const $=lF(P),G=$.exists(se=>D===se),Y=gc.getSlot(P,D).isSome();return Y&&(gc.hideAllSlots(P),G?(uF(b),x()):(T(),py(b),gc.showSlot(P,D),zW(P,D)),$.each(se=>UW(P,se))),Y})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:xt([zn.config({}),Ro.config({find:b=>{const x=zn.contents(b);return Is(x)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[rt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const WW=(t,s,a)=>{let c=!1;const d=b=>{bd(b,".tox-statusbar").each(x=>{rs(x,"display")==="none"&&pn(x,"aria-hidden")==="true"?(Xn(x,"display"),H(x,"aria-hidden")):(lt(x,"display","none"),qt(x,"aria-hidden","true"))})},h={getSocket:b=>xa.getPart(b,t,"socket"),setSidebar:(b,x,T)=>{xa.getPart(b,t,"sidebar").each(D=>mW(D,x,T))},toggleSidebar:(b,x)=>{xa.getPart(b,t,"sidebar").each(T=>hW(T,x))},whichSidebar:b=>xa.getPart(b,t,"sidebar").bind(gW).getOrNull(),getHeader:b=>xa.getPart(b,t,"header"),getToolbar:b=>xa.getPart(b,t,"toolbar"),setToolbar:(b,x)=>{xa.getPart(b,t,"toolbar").each(T=>{const D=tt(x,DT);T.getApis().setGroups(T,D)})},setToolbars:(b,x)=>{xa.getPart(b,t,"multiple-toolbar").each(T=>{const D=tt(x,P=>tt(P,DT));y5.setItems(T,D)})},refreshToolbar:b=>{xa.getPart(b,t,"toolbar").each(T=>T.getApis().refresh(T))},toggleToolbarDrawer:b=>{xa.getPart(b,t,"toolbar").each(x=>{zo(x.getApis().toggle,T=>T(x))})},toggleToolbarDrawerWithoutFocusing:b=>{xa.getPart(b,t,"toolbar").each(x=>{zo(x.getApis().toggleWithoutFocusing,T=>T(x))})},isToolbarDrawerToggled:b=>xa.getPart(b,t,"toolbar").bind(x=>M.from(x.getApis().isOpen).map(T=>T(x))).getOr(!1),getThrobber:b=>xa.getPart(b,t,"throbber"),focusToolbar:b=>{xa.getPart(b,t,"toolbar").orThunk(()=>xa.getPart(b,t,"multiple-toolbar")).each(T=>{En.focusIn(T)})},setMenubar:(b,x)=>{xa.getPart(b,t,"menubar").each(T=>{H3.setMenus(T,x)})},focusMenubar:b=>{xa.getPart(b,t,"menubar").each(x=>{H3.focus(x)})},setViews:(b,x)=>{xa.getPart(b,t,"viewWrapper").each(T=>{PT.setViews(T,x)})},toggleView:(b,x)=>xa.getPart(b,t,"viewWrapper").exists(T=>PT.toggleView(T,()=>h.showMainView(b),()=>h.hideMainView(b),x)),whichView:b=>xa.getPart(b,t,"viewWrapper").bind(PT.whichView).getOrNull(),hideMainView:b=>{c=h.isToolbarDrawerToggled(b),c&&h.toggleToolbarDrawer(b),xa.getPart(b,t,"editorContainer").each(x=>{const T=x.element;d(T),lt(T,"display","none"),qt(T,"aria-hidden","true")})},showMainView:b=>{c&&h.toggleToolbarDrawer(b),xa.getPart(b,t,"editorContainer").each(x=>{const T=x.element;d(T),Xn(T,"display"),H(T,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:h,behaviours:t.behaviours}},hF=lm.optional({factory:H3,name:"menubar",schema:[rt("backstage")]}),gF=t=>t.type===Cd.sliding?NW:t.type===Cd.floating?MW:RT,BT=lm.optional({factory:{sketch:t=>y5.sketch({uid:t.uid,dom:t.dom,listBehaviours:xt([En.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>RT({type:t.type,uid:tn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),M.some(!0))}),setupItem:(s,a,c,d)=>{um.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[rt("dom"),rt("onEscape")]}),Q3=lm.optional({factory:{sketch:t=>{const s=gF(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),M.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[rt("dom"),rt("onEscape"),rt("getSink")]}),ZW=lm.optional({factory:{sketch:$3},name:"header",schema:[rt("dom")]}),jW=lm.optional({factory:{sketch:V3},name:"promotion",schema:[rt("dom")]}),pF=lm.optional({name:"socket",schema:[rt("dom")]}),qW=lm.optional({factory:{sketch:B5},name:"sidebar",schema:[rt("dom")]}),GW=lm.optional({factory:{sketch:TY},name:"throbber",schema:[rt("dom")]}),KW=lm.optional({factory:PT,name:"viewWrapper",schema:[rt("backstage")]}),bF=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),YW=lm.optional({factory:{sketch:bF},name:"editorContainer",schema:[]});var zs=Ki({name:"OuterContainer",factory:WW,configFields:[rt("dom"),rt("behaviours")],partFields:[ZW,hF,Q3,BT,pF,qW,jW,GW,KW,YW],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const eR="file edit view insert format tools table help",vF={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},XW=(t,s,a)=>{const c=n_(a).split(/[ ,]/);return{text:t.title,getItems:()=>xe(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:ms(c,b=>b===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},IT=t=>t.split(" "),yF=(t,s)=>{const a={...vF,...s.menus},c=vs(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?IT(eR):IT(s.menubar===!1?"":s.menubar),h=uo(d,x=>{const T=po(vF,x);return c?T||At(s.menus,x).exists(D=>po(D,"items")):T}),b=tt(h,x=>{const T=a[x];return XW({title:T.title,items:IT(T.items)},s,t)});return uo(b,x=>{const T=D=>j(D)||D.type!=="separator";return x.getItems().length>0&&ms(x.getItems(),T)})},wF=t=>{const s=()=>{t._skinLoaded=!0,TH(t)};return()=>{t.initialized?s():t.on("init",s)}},JW=(t,s)=>()=>kH(t,{message:s}),tR=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),nR=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),QW=async(t,s)=>{const c="ui/"+i_(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(c);if(j(d))nR(t,c,d,t.ui.styleSheetLoader);else{const h=t.editorManager.suffix,b=s+`/skin${h}.css`;return tR(t,b,t.ui.styleSheetLoader)}},eZ=async(t,s)=>{if(X(_e.fromDom(t.getElement()))){const d="ui/"+i_(t).getOr("default")+"/skin.shadowdom.css",h=tinymce.Resource.get(d);if(j(h))nR(t,d,h,ub.DOM.styleSheetLoader);else{const b=t.editorManager.suffix,x=s+`/skin.shadowdom${b}.css`;return tR(t,x,ub.DOM.styleSheetLoader)}}},CF=async(t,s)=>{const a=()=>{const d=DO(s),h=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${h}.css`)};i_(s).fold(a,d=>{const h="ui/"+d+(t?"/content.inline":"/content")+".css",b=tinymce.Resource.get(h);j(b)?nR(s,h,b,s.ui.styleSheetLoader):a()});const c=DO(s);if(!OO(s)&&j(c))return Promise.all([QW(s,c),eZ(s,c)]).then()},SF=(t,s)=>CF(t,s).then(wF(s),JW(s,"Skin could not be loaded")),tZ=Qt(SF,!1),nZ=Qt(SF,!0),a1=(t,s,a)=>de(a)?t.translate(s):t.translate([s,t.translate(a)]),oR=(t,s)=>{const a=(b,x,T,D)=>{const P=t.shared.providers.translate(b.title);if(b.type==="separator")return M.some({type:"separator",text:P});if(b.type==="submenu"){const $=xe(b.getStyleItems(),G=>c(G,x,D));return x===0&&$.length<=0?M.none():M.some({type:"nestedmenuitem",text:P,enabled:$.length>0,getSubmenuItems:()=>xe(b.getStyleItems(),G=>c(G,x,D))})}else return M.some({type:"togglemenuitem",text:P,icon:b.icon,active:b.isSelected(D),enabled:!T,onAction:s.onAction(b),...b.getStylePreview().fold(()=>({}),$=>({meta:{style:$}}))})},c=(b,x,T)=>{const D=b.type==="formatter"&&s.isInvalid(b);return x===0?D?[]:a(b,x,!1,T).toArray():a(b,x,D,T).toArray()},d=b=>{const x=s.getCurrentValue(),T=s.shouldHide?0:1;return xe(b,D=>c(D,T,x))};return{validateItems:d,getFetch:(b,x)=>(T,D)=>{const P=x(),$=d(P),G=cy($,df.CLOSE_ON_EXECUTE,b,{isHorizontalMenu:!1,search:M.none()});D(G)}}},by=(t,s)=>{const a=s.dataset,c=a.type==="basic"?()=>tt(a.data,d=>wT(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:oR(t,s),getStyleItems:c}},dS=(t,s,a,c,d,h)=>{const{items:b,getStyleItems:x}=by(s,a),T=mn(a.tooltip),D=$=>({getComponent:ne($),setTooltip:G=>{const Y=s.shared.providers.translate(G);qt($.element,"aria-label",Y),T.set(G)}}),P=$=>{const G=Y=>$.setTooltip(a1(t,c(Y.value),Y.value));return t.on(d,G),$_(Tb(t,"NodeChange",Y=>{const se=Y.getComponent();a.updateText(se),l.set(Y.getComponent(),!t.selection.isEditable())})($),()=>t.off(d,G))};return Y4({text:a.icon.isSome()?M.none():a.text,icon:a.icon,ariaLabel:M.some(a.tooltip),tooltip:M.none(),role:M.none(),fetch:b.getFetch(s,x),onSetup:P,getApi:D,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Ir.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:$=>{if(a.tooltip!==T.get()){const G=s.shared.providers.translate(T.get());Ir.setComponents($,s.shared.providers.tooltips.getComponents({tooltipText:G}))}}})})]},"tox-tbtn",s.shared,h)},oZ=t=>tt(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),sZ=t=>({type:"basic",data:t});var vy;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(vy||(vy={}));const rZ=(t,s)=>s===vy.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),sR=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:oZ(rZ(c,a))}},aZ="Align",xF=ne("Alignment {0}"),rR="left",yy=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],LT=t=>{const s=()=>et(yy,x=>t.formatter.match(x.format)),a=x=>()=>t.formatter.match(x),c=x=>M.none,d=x=>{const D=s().fold(ne(rR),P=>P.title.toLowerCase());_n(x,t1,{icon:`align-${D}`}),FD(t,{value:D})},h=sZ(yy),b=x=>()=>et(yy,T=>T.format===x.format).each(T=>t.execCommand(T.command));return{tooltip:a1(t,xF(),rR),text:M.none(),icon:M.some("align-left"),isSelectedFor:a,getCurrentValue:M.none,getPreviewFor:c,onAction:b,updateText:d,dataset:h,shouldHide:!1,isInvalid:x=>!t.formatter.canApply(x.format)}},EF=(t,s)=>dS(t,s,LT(t),xF,"AlignTextUpdate","align"),i1=(t,s)=>{const a=by(s,LT(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(aZ),onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},aR=(t,s)=>{const a=s(),c=tt(a,d=>d.format);return M.from(t.formatter.closest(c)).bind(d=>et(a,h=>h.format===d))},iZ="Blocks",_F=ne("Block {0}"),iR="Paragraph",TF=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const b=t.formatter.get(h);return b?M.some({tag:b.length>0&&(b[0].inline||b[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):M.none()},c=h=>{const x=aR(t,()=>d.data).fold(ne(iR),T=>T.title);_n(h,qu,{text:x}),NH(t,{value:x})},d=sR(t,"block_formats",vy.SemiColon);return{tooltip:a1(t,_F(),iR),text:M.some(iR),icon:M.none(),isSelectedFor:s,getCurrentValue:M.none,getPreviewFor:a,onAction:PB(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},cZ=(t,s)=>dS(t,s,TF(t),_F,"BlocksTextUpdate","blocks"),lZ=(t,s)=>{const a=by(s,TF(t));t.ui.registry.addNestedMenuItem("blocks",{text:iZ,onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},uZ="Fonts",cR=ne("Font {0}"),lR="System Font",dZ=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],FT=t=>{const s=t.split(/\s*,\s*/);return tt(s,a=>a.replace(/^['"]+|['"]+$/g,""))},kF=(t,s)=>s.length>0&&_o(s,a=>t.indexOf(a.toLowerCase())>-1),fZ=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=FT(t.toLowerCase());return kF(a,dZ)||kF(a,s)}else return!1},AF=t=>{const s=()=>{const T=se=>se?FT(se)[0]:"",D=t.queryCommandValue("FontName"),P=x.data,$=D?D.toLowerCase():"",G=pP(t);return{matchOpt:et(P,se=>{const ie=se.format;return ie.toLowerCase()===$||T(ie).toLowerCase()===T($).toLowerCase()}).orThunk(()=>Sn(fZ($,G),{title:lR,format:$})),font:D}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>M.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},b=T=>{const{matchOpt:D,font:P}=s(),$=D.fold(ne(P),G=>G.title);_n(T,qu,{text:$}),NB(t,{value:$})},x=sR(t,"font_family_formats",vy.SemiColon);return{tooltip:a1(t,cR(),lR),text:M.some(lR),icon:M.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:h,updateText:b,dataset:x,shouldHide:!1,isInvalid:Me}},mZ=(t,s)=>dS(t,s,AF(t),cR,"FontFamilyTextUpdate","fontfamily"),hZ=(t,s)=>{const a=by(s,AF(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(uZ),onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},gZ={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},OF=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=x=>`(?:${x})?`,b=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${b})(.*)$`)})(),DF=(t,s)=>ms(s,a=>ms(gZ[a],c=>t===c)),fS=(t,s)=>M.from(OF.exec(t)).bind(c=>{const d=Number(c[1]),h=c[2];return DF(h,s)?M.some({value:d,unit:h}):M.none()}),pZ=(t,s)=>fS(t,s).map(({value:a,unit:c})=>a+c),uR={tab:ne(9),escape:ne(27),enter:ne(13),backspace:ne(8),delete:ne(46),left:ne(37),up:ne(38),right:ne(39),down:ne(40),space:ne(32),home:ne(36),end:ne(35),pageUp:ne(33),pageDown:ne(34)},bZ=(t,s,a,c)=>{let d=M.none();const h=Ae=>Ae.map(st=>Xt.getValue(st)).getOr(""),b=Tb(t,"NodeChange SwitchMode",Ae=>{const st=Ae.getComponent();d=M.some(st),a.updateInputValue(st),l.set(st,!t.selection.isEditable())}),x=Ae=>({getComponent:ne(Ae)}),T=mn(ce),D=tn("custom-number-input-events"),P=(Ae,st,Ke)=>{const Ft=h(d),Jt=a.getNewValue(Ft,Ae),Qe=Ft.length-`${Jt}`.length,ln=d.map(fn=>fn.element.dom.selectionStart-Qe),It=d.map(fn=>fn.element.dom.selectionEnd-Qe);a.onAction(Jt,Ke),d.each(fn=>{Xt.setValue(fn,Jt),st&&(ln.each(bo=>fn.element.dom.selectionStart=bo),It.each(bo=>fn.element.dom.selectionEnd=bo))})},$=(Ae,st)=>P((Ke,Ft)=>Ke-Ft,Ae,st),G=(Ae,st)=>P((Ke,Ft)=>Ke+Ft,Ae,st),Y=Ae=>Mi(Ae.element).fold(M.none,st=>(Sl(st),M.some(!0))),se=Ae=>I1(Ae.element)?(du(Ae.element).each(st=>Sl(st)),M.some(!0)):M.none(),ie=(Ae,st,Ke,Ft)=>{const Jt=mn(ce),Qe=s.shared.providers.translate(Ke),ln=tn("altExecuting"),It=Tb(t,"NodeChange SwitchMode",bo=>{l.set(bo.getComponent(),!t.selection.isEditable())}),fn=bo=>{l.isDisabled(bo)||Ae(!0)};return Vi.sketch({dom:{tag:"button",attributes:{"aria-label":Qe,"data-mce-name":st},classes:Ft.concat(st)},components:[dT(st,s.shared.providers.icons)],buttonBehaviours:xt([l.config({}),Ir.config(s.shared.providers.tooltips.getConfig({tooltipText:Qe})),no(ln,[hc({onSetup:It,getApi:x},Jt),Zp({getApi:x},Jt),it(Du(),(bo,Us)=>{(Us.event.raw.keyCode===uR.space()||Us.event.raw.keyCode===uR.enter())&&(l.isDisabled(bo)||Ae(!1))}),it(Yh(),fn),it(Ms(),fn)])]),eventOrder:{[Du()]:[ln,"keying"],[Yh()]:[ln,"alloy.base.behaviour"],[Ms()]:[ln,"alloy.base.behaviour"],[sc()]:["alloy.base.behaviour",ln,"tooltipping"],[Ql()]:[ln,"tooltipping"]}})},Ne=Jo(ie(Ae=>$(!1,Ae),"minus","Decrease font size",[])),he=Jo(ie(Ae=>G(!1,Ae),"plus","Increase font size",[])),ke=Jo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[yb.sketch({inputBehaviours:xt([l.config({}),no(D,[hc({onSetup:b,getApi:x},T),Zp({getApi:x},T)]),no("input-update-display-text",[it(qu,(Ae,st)=>{Xt.setValue(Ae,st.event.text)}),it(qd(),Ae=>{a.onAction(Xt.getValue(Ae))}),it(np(),Ae=>{a.onAction(Xt.getValue(Ae))})]),En.config({mode:"special",onEnter:Ae=>(P(Kt,!0,!0),M.some(!0)),onEscape:Y,onUp:Ae=>(G(!0,!1),M.some(!0)),onDown:Ae=>($(!0,!1),M.some(!0)),onLeft:(Ae,st)=>(st.cut(),M.none()),onRight:(Ae,st)=>(st.cut(),M.none())})])})],behaviours:xt([Fn.config({}),En.config({mode:"special",onEnter:se,onSpace:se,onEscape:Y}),no("input-wrapper-events",[it(Kc(),Ae=>{wt([Ne,he],st=>{const Ke=_e.fromDom(st.get(Ae).element.dom);I1(Ke)&&Bv(Ke)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...vt(c)?{"data-mce-name":c}:{}}},components:[Ne.asSpec(),ke.asSpec(),he.asSpec()],behaviours:xt([Fn.config({}),En.config({mode:"flow",focusInside:tm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ae=>I1(Ae.element)?M.none():(Sl(Ae.element),M.some(!0))})])}},vZ="Font sizes",RF=ne("Font size {0}"),dR="12pt",yZ={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},MF={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},wZ=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},CZ=(t,s)=>/[0-9.]+px$/.test(t)?wZ(parseInt(t,10)*72/96,s||0)+"pt":At(MF,t).getOr(t),SZ=t=>At(yZ,t).getOr(""),NF=t=>{const s=()=>{let T=M.none();const D=x.data,P=t.queryCommandValue("FontSize");if(P)for(let $=3;T.isNone()&&$>=0;$--){const G=CZ(P,$),Y=SZ(G);T=et(D,se=>se.format===P||se.format===G||se.format===Y)}return{matchOpt:T,size:P}},a=T=>D=>D.exists(P=>P.format===T),c=()=>{const{matchOpt:T}=s();return T},d=ne(M.none),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},b=T=>{const{matchOpt:D,size:P}=s(),$=D.fold(ne(P),G=>G.title);_n(T,qu,{text:$}),RB(t,{value:$})},x=sR(t,"font_size_formats",vy.Space);return{tooltip:a1(t,RF(),dR),text:M.some(dR),icon:M.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:h,updateText:b,dataset:x,shouldHide:!1,isInvalid:Me}},xZ=(t,s)=>dS(t,s,NF(t),RF,"FontSizeTextUpdate","fontsize"),EZ=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},_Z=16,PF=t=>t>=0,TZ=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>_n(c,qu,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{fS(c,["unsupportedLength","empty"]);const h=s(),b=fS(c,["unsupportedLength","empty"]).or(fS(h,["unsupportedLength","empty"])),x=b.map(G=>G.value).getOr(_Z),T=o_(t),D=b.map(G=>G.unit).filter(G=>G!=="").getOr(T),P=d(x,EZ(D).step),$=`${PF(P)?P:x}${D}`;return $!==h&&MB(t,{value:$}),$}}},kZ=(t,s)=>bZ(t,s,TZ(t),"fontsizeinput"),AZ=(t,s)=>{const a=by(s,NF(t));t.ui.registry.addNestedMenuItem("fontsize",{text:vZ,onSetup:Ic(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},OZ="Formats",BF=t=>de(t)?"Formats":"Format {0}",IF=(t,s)=>{const a="Formats",c=b=>()=>t.formatter.match(b),d=b=>()=>{const x=t.formatter.get(b);return x!==void 0?M.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(b))}):M.none()},h=b=>{const x=$=>k3($)?xe($.items,x):o5($)?[{title:$.title,format:$.format}]:[],T=xe(nS(t),x),P=aR(t,ne(T)).fold(ne({title:a,tooltipLabel:""}),$=>({title:$.title,tooltipLabel:$.title}));_n(b,qu,{text:P.title}),MH(t,{value:P.tooltipLabel})};return{tooltip:a1(t,BF(""),""),text:M.some(a),icon:M.none(),isSelectedFor:c,getCurrentValue:M.none,getPreviewFor:d,onAction:PB(t),updateText:h,shouldHide:nP(t),isInvalid:b=>!t.formatter.canApply(b.format),dataset:s}},DZ=(t,s)=>{const a={type:"advanced",...s.styles};return dS(t,s,IF(t,a),BF,"StylesTextUpdate","styles")},LF=(t,s)=>{const a={type:"advanced",...s.styles},c=by(s,IF(t,a));t.ui.registry.addNestedMenuItem("styles",{text:OZ,onSetup:Ic(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},RZ=ne([rt("toggleClass"),rt("fetch"),Qd("onExecute"),Be("getHotspot",M.some),Be("getAnchorOverrides",ne({})),th(),Qd("onItemExecute"),Bo("lazySink"),rt("dom"),ko("onOpen"),Za("splitDropdownBehaviours",[jr,En,Fn]),Be("matchWidth",!1),Be("useMinWidth",!1),Be("eventOrder",{}),Bo("role"),Bo("listRole")].concat(W_())),MZ=Ti({factory:Vi,schema:[rt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:xt([Fn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Nm)},buttonBehaviours:xt([lo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),FF=Ti({factory:Vi,schema:[rt("dom")],name:"button",defaults:()=>({buttonBehaviours:xt([Fn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),NZ=ne([MZ,FF,Tl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[rt("text")],name:"aria-descriptor"}),ru({schema:[dp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),sI()]),$F=(t,s,a,c)=>{const d=P=>{Ro.getCurrent(P).each($=>{bn.highlightFirst($),En.focusIn($)})},h=P=>{QD(t,Kt,P,c,d,Zr.HighlightMenuAndItem).get(ce)},b=P=>(h(P),M.some(!0)),x=P=>{const $=kl(P,t,"button");return Nm($),M.some(!0)},T={...Fs([Gs((P,$)=>{bt(P,t,"aria-descriptor").each(Y=>{const se=tn("aria");qt(Y.element,"id",se),qt(P.element,"aria-describedby",se)})})]),...XE(M.some(h))},D={repositionMenus:P=>{lo.isOn(P)&&aI(P)}};return{uid:t.uid,dom:t.dom,components:s,apis:D,eventOrder:{...t.eventOrder,[Jl()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:ja(t.splitDropdownBehaviours,[jr.config({others:{sandbox:P=>{const $=kl(P,t,"arrow");return n4(t,P,{onOpen:()=>{lo.on($),lo.on(P)},onClose:()=>{lo.off($),lo.off(P)}})}}}),En.config({mode:"special",onSpace:x,onEnter:x,onDown:b}),Fn.config({}),lo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},mS=Ki({name:"SplitDropdown",configFields:RZ(),partFields:NZ(),factory:$F,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),HF=t=>({isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setText:s=>_n(t,qu,{text:s}),setIcon:s=>_n(t,t1,{icon:s})}),PZ=t=>({setActive:s=>{lo.set(t,s)},isActive:()=>lo.isOn(t),isEnabled:()=>!l.isDisabled(t),setEnabled:s=>l.set(t,!s),setText:s=>_n(t,qu,{text:s}),setIcon:s=>_n(t,t1,{icon:s})}),VF=(t,s)=>t.map(a=>({"aria-label":s.translate(a)})).getOr({}),Ib=tn("focus-button"),fR=(t,s,a,c,d,h)=>{const b=s.map(T=>Jo(K4(T,"tox-tbtn",d))),x=t.map(T=>Jo(e1(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...VF(a,d),...vt(h)?{"data-mce-name":h}:{}}},components:xb([x.map(T=>T.asSpec()),b.map(T=>T.asSpec())]),eventOrder:{[Er()]:["focusing","alloy.base.behaviour",Qp],[sc()]:[Qp,"toolbar-group-button-events"]},buttonBehaviours:xt([mf.toolbarButton(d.isDisabled),Ga(),no(Qp,[Gs((T,D)=>q4(T)),it(qu,(T,D)=>{b.bind(P=>P.getOpt(T)).each(P=>{zn.set(P,[hr(d.translate(D.event.text))])})}),it(t1,(T,D)=>{x.bind(P=>P.getOpt(T)).each(P=>{zn.set(P,[e1(D.event.icon,d.icons)])})}),it(Er(),(T,D)=>{D.event.prevent(),ao(T,Ib)})])].concat(c.getOr([])))}},BZ=(t,s,a,c,d)=>{const h=s.shared,b=mn(ce),x={toolbarButtonBehaviours:[],getApi:HF,onSetup:t.onSetup},T=[no("toolbar-group-button-events",[hc(x,b),Zp(x,b)])];return r1.sketch({lazySink:h.getSink,fetch:()=>zi.nu(D=>{D(tt(a(t.items),DT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:fR(t.icon,t.text,t.tooltip,M.some(T),h.providers,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},zF=(t,s,a,c)=>{var d;const h=mn(ce),b=fR(t.icon,t.text,t.tooltip,M.none(),a,c);return Vi.sketch({dom:b.dom,components:b.components,eventOrder:j4,buttonBehaviours:{...xt([no("toolbar-button-events",[iz({onAction:t.onAction,getApi:s.getApi}),hc(s,h),Zp(s,h)]),...t.tooltip.map(x=>Ir.config(a.tooltips.getConfig({tooltipText:a.translate(x)+t.shortcut.map(T=>` (${N_(T)})`).getOr("")}))).toArray(),mf.toolbarButton(()=>!t.enabled||a.isDisabled()),Ga()].concat(s.toolbarButtonBehaviours)),[Qp]:(d=b.buttonBehaviours)===null||d===void 0?void 0:d[Qp]}})},IZ=(t,s,a)=>UF(t,s,[],a),UF=(t,s,a,c)=>zF(t,{toolbarButtonBehaviours:a.length>0?[no("toolbarButtonWith",a)]:[],getApi:HF,onSetup:t.onSetup},s,c),LZ=(t,s,a)=>WF(t,s,[],a),WF=(t,s,a,c)=>zF(t,{toolbarButtonBehaviours:[zn.config({}),lo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[no("toolbarToggleButtonWith",a)]:[]),getApi:PZ,onSetup:t.onSetup},s,c),FZ=(t,s,a)=>c=>zi.nu(d=>s.fetch(d)).map(d=>M.from(G_(Ds(YD(tn("menu-value"),d,h=>{s.onItemAction(t(c),h)},s.columns,s.presets,df.CLOSE_ON_EXECUTE,s.select.getOr(Me),a),{movement:U_(s.columns,s.presets),menuBehaviours:q0.unnamedEvents(s.columns!=="auto"?[]:[Gs((h,b)=>{_D(h,4,aD(s.presets)).each(({numRows:x,numColumns:T})=>{En.setGridSize(h,x,T)})})])})))),mR=(t,s,a)=>{const c=mn(t.tooltip.getOr("")),d=x=>({isEnabled:()=>!l.isDisabled(x),setEnabled:T=>l.set(x,!T),setIconFill:(T,D)=>{tr(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each(P=>{qt(P,"fill",D)})},setActive:T=>{qt(x.element,"aria-pressed",T),tr(x.element,"span").each(D=>{x.getSystem().getByDom(D).each(P=>lo.set(P,T))})},isActive:()=>tr(x.element,"span").exists(T=>x.getSystem().getByDom(T).exists(lo.isOn)),setText:T=>tr(x.element,"span").each(D=>x.getSystem().getByDom(D).each(P=>_n(P,qu,{text:T}))),setIcon:T=>tr(x.element,"span").each(D=>x.getSystem().getByDom(D).each(P=>_n(P,t1,{icon:T}))),setTooltip:T=>{const D=s.providers.translate(T);qt(x.element,"aria-label",D),c.set(T)}}),h=mn(ce),b={getApi:d,onSetup:t.onSetup};return mS.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...VF(t.tooltip,s.providers),...vt(a)?{"data-mce-name":a}:{}}},onExecute:x=>{const T=d(x);T.isEnabled()&&t.onAction(T)},onItemExecute:(x,T,D)=>{},splitDropdownBehaviours:xt([mf.splitButton(s.providers.isDisabled),Ga(),no("split-dropdown-events",[Gs((x,T)=>q4(x)),it(Ib,Fn.focus),hc(b,h),Zp(b,h)]),sy.config({}),...t.tooltip.map(x=>Ir.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(x),onShow:T=>{if(c.get()!==x){const D=s.providers.translate(c.get());Ir.setComponents(T,s.providers.tooltips.getComponents({tooltipText:D}))}}})})).toArray()]),eventOrder:{[sc()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Ql()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:FZ(d,t,s.providers),parts:{menu:a2(!1,t.columns,t.presets)},components:[mS.parts.button(fR(t.icon,t.text,M.none(),M.some([lo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),mS.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:QO("chevron-down",s.providers.icons)},buttonBehaviours:xt([mf.splitButton(s.providers.isDisabled),Ga(),p_()])}),mS.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},$Z=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],hS=(t,s)=>(a,c,d,h)=>{const b=t(a).mapError(x=>Gl(x)).getOrDie();return s(b,c,d,h)},ZF={button:hS(JP,(t,s,a,c)=>IZ(t,s.shared.providers,c)),togglebutton:hS(QP,(t,s,a,c)=>LZ(t,s.shared.providers,c)),menubutton:hS(A5,(t,s,a,c)=>G2(t,"tox-tbtn",s,M.none(),!1,c)),splitbutton:hS(cW,(t,s,a,c)=>mR(t,s.shared,c)),grouptoolbarbutton:hS(aS,(t,s,a,c)=>{const d=a.ui.registry.getAll().buttons,h=x=>gS(a,{buttons:d,toolbar:x,allowToolbarGroups:!1},s,M.none()),b={[Yw]:s.shared.header.isPositionedAtTop()?xl.TopToBottom:xl.BottomToTop};switch(hb(a)){case Cd.floating:return BZ(t,s,h,b,c);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},jF=(t,s,a,c)=>At(ZF,t.type).fold(()=>(console.error("skipping button defined by",t),M.none()),d=>M.some(d(t,s,a,c))),qF={styles:DZ,fontsize:xZ,fontsizeinput:kZ,fontfamily:mZ,blocks:cZ,align:EF},HZ=t=>{const s=tt($Z,a=>{const c=uo(a.items,d=>po(t,d)||po(qF,d));return{name:a.name,items:c}});return uo(s,a=>a.items.length>0)},VZ=t=>{const s=t.split("|");return tt(s,a=>({items:a.trim().split(" ")}))},zZ=t=>Et(t,s=>po(s,"name")&&po(s,"items")),UZ=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?HZ(a):j(s)?VZ(s):zZ(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},WZ=(t,s,a,c,d,h)=>At(s,a.toLowerCase()).orThunk(()=>h.bind(b=>bs(b,x=>At(s,x+a.toLowerCase())))).fold(()=>At(qF,a.toLowerCase()).map(b=>b(t,d)),b=>b.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),M.none()):jF(b,d,t,a.toLowerCase())),gS=(t,s,a,c)=>{const d=UZ(s),h=tt(d,b=>{const x=xe(b.items,T=>T.trim().length===0?[]:WZ(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:M.from(t.translate(b.name)),items:x}});return uo(h,b=>b.items.length>0)},GF=(t,s,a,c)=>{const d=s.mainUi.outerContainer,h=a.toolbar,b=a.buttons;if(Et(h,j)){const x=h.map(T=>{const D={toolbar:T,buttons:b,allowToolbarGroups:a.allowToolbarGroups};return gS(t,D,c,M.none())});zs.setToolbars(d,x)}else zs.setToolbar(d,gS(t,a,c,M.none()))},KF=ro(),ZZ=KF.os.isiOS()&&KF.os.version.major<=12,jZ=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,b=mn(Js(d.innerWidth,d.innerHeight)),x=mn(Js(h.offsetWidth,h.offsetHeight)),T=()=>{const G=b.get();(G.left!==d.innerWidth||G.top!==d.innerHeight)&&(b.set(Js(d.innerWidth,d.innerHeight)),F_(t))},D=()=>{const G=t.getDoc().documentElement,Y=x.get();(Y.left!==G.offsetWidth||Y.top!==G.offsetHeight)&&(x.set(Js(G.offsetWidth,G.offsetHeight)),F_(t))},P=G=>{AH(t,G)};c.bind(d,"resize",T),c.bind(d,"scroll",P);const $=Ww(_e.fromDom(t.getBody()),"load",D);t.on("hide",()=>{wt(a,G=>{lt(G.element,"display","none")})}),t.on("show",()=>{wt(a,G=>{Xn(G.element,"display")})}),t.on("NodeChange",D),t.on("remove",()=>{$.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",P),d=null})},$T=(t,s,a)=>{Hp(t)&&bg(a.mainUi.mothership.element,a.popupUi.mothership),Y1(s,a.dialogUi.mothership)};var HT=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=s,x=mn(0),T=h.outerContainer;tZ(t);const D=_e.fromDom(d.targetNode),P=gi(vr(D));bg(D,h.mothership),$T(t,P,s),t.on("SkinLoaded",()=>{zs.setSidebar(T,a.sidebar,r_(t)),GF(t,s,a,c),x.set(t.getWin().innerWidth),zs.setMenubar(T,yF(t,a)),zs.setViews(T,a.views),jZ(t,s)});const $=zs.getSocket(T).getOrDie("Could not find expected socket element");if(ZZ){Gn($.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ie=JV(()=>{t.dispatch("ScrollContent")},20),Ne=dc($.element,"scroll",ie.throttle);t.on("remove",Ne.unbind)}TD(t,s),t.addCommand("ToggleSidebar",(ie,Ne)=>{zs.toggleSidebar(T,Ne),PH(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var ie;return(ie=zs.whichSidebar(T))!==null&&ie!==void 0?ie:""}),t.addCommand("ToggleView",(ie,Ne)=>{if(zs.toggleView(T,Ne)){const he=T.element;h.mothership.broadcastOn([of()],{target:he}),wt(b,ke=>{ke.broadcastOn([of()],{target:he})}),Ge(zs.whichView(T))&&(t.focus(),t.nodeChanged(),zs.refreshToolbar(T)),BH(t)}}),t.addQueryValueHandler("ToggleView",()=>{var ie;return(ie=zs.whichView(T))!==null&&ie!==void 0?ie:""});const G=hb(t),Y=()=>{zs.refreshToolbar(s.mainUi.outerContainer)};(G===Cd.sliding||G===Cd.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ie=t.getWin().innerWidth;ie!==x.get()&&(Y(),x.set(ie))});const se={setEnabled:ie=>{G0(s,!ie)},isEnabled:()=>!l.isDisabled(T)};return{iframeContainer:$.element.dom,editorContainer:T.element.dom,api:se}}});const pS=t=>/^[0-9\.]+(|px)$/i.test(""+t)?M.some(parseInt(""+t,10)):M.none(),VT=t=>on(t)?t+"px":t,zT=(t,s,a)=>{const c=s.filter(h=>t<h),d=a.filter(h=>t>h);return c.or(d).getOr(t)},qZ=t=>{const s=UC(t),a=$0(t),c=t_(t);return pS(s).map(d=>zT(d,a,c))},GZ=t=>qZ(t).getOr(UC(t)),YF=t=>{const s=xO(t),a=mb(t),c=WC(t);return pS(s).map(d=>zT(d,a,c))},KZ=t=>YF(t).getOr(xO(t)),{ToolbarLocation:wy,ToolbarMode:hR}=yP,XF=40,JF=(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:b}=a,x=ub.DOM,T=H0(t),D=gb(t),P=WC(t).or(YF(t)),$=c.shared.header,G=$.isPositionedAtTop,Y=150,se=hb(t),ie=se===hR.sliding||se===hR.floating,Ne=mn(!1),he=()=>Ne.get()&&!t.removed,ke=dn=>ie?dn.fold(ne(0),gt=>gt.components().length>1?xs(gt.components()[1].element):0):0,Ae=dn=>{switch(ZC(t)){case wy.auto:const gt=zs.getToolbar(h.outerContainer),$t=ke(gt),$n=xs(dn.element)-$t,Mn=Qs(s);if(Mn.y>$n)return"top";{const Kn=$l(s),ks=Math.max(Kn.dom.scrollHeight,xs(Kn));return Mn.bottom<ks-$n||Ur().bottom<Mn.bottom-$n?"bottom":"top"}case wy.bottom:return"bottom";case wy.top:default:return"top"}},st=dn=>{d.on(gt=>{Hs.setModes(gt,[dn]),$.setDockingMode(dn);const $t=G()?xl.TopToBottom:xl.BottomToTop;qt(gt.element,Yw,$t)})},Ke=()=>{d.on(dn=>{const gt=P.getOrThunk(()=>Vd().width-Wc(s).left-10);lt(dn.element,"max-width",gt+"px")})},Ft=(dn,gt)=>{d.on($t=>{const $n=zs.getToolbar(h.outerContainer),Mn=ke($n),xn=Qs(s),Kn=Jt(t,h.outerContainer.element),ks=()=>Kn.fold(()=>xn.x,Xi=>{const Qu=Qs(Xi);return Uo(Xi,io())?xn.x:xn.x-Qu.x}),Qo=()=>Kn.fold(()=>G()?Math.max(xn.y-xs($t.element)+Mn,0):xn.bottom,Xi=>{var Qu;const Id=Qs(Xi),Il=(Qu=Xi.dom.scrollTop)!==null&&Qu!==void 0?Qu:0,Zb=Uo(Xi,io())?Math.max(xn.y-xs($t.element)+Mn,0):xn.y-Id.y+Il-xs($t.element)+Mn;return G()?Zb:xn.bottom}),bc=ks(),Ju=Sn(dn,Math.ceil(h.outerContainer.element.dom.getBoundingClientRect().width)).filter(Xi=>Xi>Y).map(Xi=>{const Qu=gt.getOr(ai()),Id=window.innerWidth-(bc-Qu.left),Il=Math.max(Math.min(Xi,Id),Y);return Id<Xi&&lt(h.outerContainer.element,"width",Il+"px"),{width:Il+"px"}}).getOr({width:"max-content"}),mm={position:"absolute",left:Math.round(bc)+"px",top:Qo()+"px"};Gn(h.outerContainer.element,{...mm,...Ju})})},Jt=(dn,gt)=>Hp(dn)?Im(gt):M.none(),Qe=()=>{wt(b,dn=>{dn.broadcastOn([yg()],{})})},ln=()=>!T&&(ga(h.outerContainer.element).left+yo(h.outerContainer.element)>=window.innerWidth-XF||Os(h.outerContainer.element,"width").isSome())?(lt(h.outerContainer.element,"position","absolute"),lt(h.outerContainer.element,"left","0px"),Xn(h.outerContainer.element,"width"),!0):!1,It=dn=>{if(!he())return;T||Ke();const gt=ai(),$t=T?!1:ln();if(ie&&zs.refreshToolbar(h.outerContainer),!T){const $n=ai(),Mn=Sn(gt.left!==$n.left,gt);Ft($t,Mn),Mn.each(xn=>{td(xn.left,$n.top)})}D&&d.on(dn),Qe()},fn=()=>T||!D||!he()?!1:d.get().exists(dn=>{const gt=$.getDockingMode(),$t=Ae(dn);return $t!==gt?(st($t),!0):!1});return{isVisible:he,isPositionedAtTop:G,show:()=>{Ne.set(!0),lt(h.outerContainer.element,"display","flex"),x.addClass(t.getBody(),"mce-edit-focus"),wt(b,dn=>{Xn(dn.element,"display")}),fn(),Hp(t)?It(dn=>Hs.isDocked(dn)?Hs.reset(dn):Hs.refresh(dn)):It(Hs.refresh)},hide:()=>{Ne.set(!1),lt(h.outerContainer.element,"display","none"),x.removeClass(t.getBody(),"mce-edit-focus"),wt(b,dn=>{lt(dn.element,"display","none")})},update:It,updateMode:()=>{fn()&&It(Hs.reset)},repositionPopups:Qe}},gR=(t,s)=>{const a=Qs(t);return{pos:s?a.y:a.bottom,bounds:a}},YZ=(t,s,a,c)=>{const d=mn(gR(s,a.isPositionedAtTop())),h=D=>{const{pos:P,bounds:$}=gR(s,a.isPositionedAtTop()),{pos:G,bounds:Y}=d.get(),se=$.height!==Y.height||$.width!==Y.width;d.set({pos:P,bounds:$}),se&&F_(t,D),a.isVisible()&&(G!==P?a.update(Hs.reset):se&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Hs.reset)),t.on("NodeChange keydown",D=>{requestAnimationFrame(()=>h(D))});let b=0;const x=F4(()=>a.update(Hs.refresh),33);t.on("ScrollWindow",()=>{const D=ai().left;D!==b&&(b=D,x.throttle()),a.updateMode()}),Hp(t)&&t.on("ElementScroll",D=>{a.update(Hs.refresh)});const T=pa();T.set(Ww(_e.fromDom(t.getBody()),"load",D=>h(D.raw))),t.on("remove",()=>{T.clear()})};var JZ=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h}=s,b=ts(),x=_e.fromDom(d.targetNode),T=JF(t,x,s,c,b),D=rP(t);nZ(t);const P=()=>{if(b.isSet()){T.show();return}b.set(zs.getHeader(h.outerContainer).getOrDie());const G=MO(t);Hp(t)?(bg(x,h.mothership),bg(x,s.popupUi.mothership)):Y1(G,h.mothership),Y1(G,s.dialogUi.mothership);const Y=()=>{GF(t,s,a,c),zs.setMenubar(h.outerContainer,yF(t,a)),T.show(),YZ(t,x,T,D),t.nodeChanged()};D?t.once("SkinLoaded",Y):Y()};t.on("show",P),t.on("hide",T.hide),D||(t.on("focus",P),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||D)&&P()}),TD(t,s);const $={show:P,hide:T.hide,setEnabled:G=>{G0(s,!G)},isEnabled:()=>!l.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:$}}});const QZ=()=>{const t=ts(),s=ts(),a=ts();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(x=>x.mothership),b=s.get().map(x=>x.mothership);return h.fold(()=>b.toArray(),x=>b.fold(()=>[x],T=>Uo(x.element,T.element)?[x]:[x,T]))},lazyGetInOuterOrDie:(h,b)=>()=>a.get().bind(x=>b(x.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},ej="contexttoolbar-show",QF="contexttoolbar-hide",tj=t=>({hide:()=>ao(t,y1()),getValue:()=>Xt.getValue(t)}),Cy=(t,s)=>it(bL,(a,c)=>{const d=t.get(a),h=tj(d);s.onAction(h,c.event.buttonApi)}),nj=(t,s,a)=>{const{primary:c,...d}=s.original,h=pt(JP({...d,type:"button",onAction:ce}));return UF(h,a,[Cy(t,s)])},oj=(t,s,a)=>{const{primary:c,...d}=s.original,h=pt(QP({...d,type:"togglebutton",onAction:ce}));return WF(h,a,[Cy(t,s)])},sj=t=>t.type==="contextformtogglebutton",e$=(t,s,a)=>sj(s)?oj(t,s,a):nj(t,s,a),rj=(t,s,a)=>{const c=tt(s,b=>Jo(e$(t,b,a)));return{asSpecs:()=>tt(c,b=>b.asSpec()),findPrimary:b=>bs(s,(x,T)=>x.primary?M.from(c[T]).bind(D=>D.getOpt(b)).filter($e(l.isDisabled)):M.none())}},pR=(t,s)=>{const a=t.label.fold(()=>({}),h=>({"aria-label":h})),c=Jo(yb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:xt([En.config({mode:"special",onEnter:h=>d.findPrimary(h).map(b=>(Nm(b),!0)),onLeft:(h,b)=>(b.cut(),M.none()),onRight:(h,b)=>(b.cut(),M.none())})])})),d=rj(c,t.commands,s);return[{title:M.none(),items:[c.asSpec()]},{title:M.none(),items:d.asSpecs()}]},aj={renderContextForm:(t,s,a)=>RT({type:t,uid:tn("context-toolbar"),initGroups:pR(s,a),onEscape:M.none,cyclicKeying:!0,providers:a}),buildInitGroups:pR},t$=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,ij=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=mu(_e.fromDom(t.startContainer),t.startOffset).element;return(sa(a)?Ia(a):M.some(a)).filter(xo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},bR=t=>{const s=t.selection.getRng(),a=ij(s);if(t.inline){const c=ai();return qs(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=tc(_e.fromDom(t.getBody()));return qs(c.x+a.left,c.y+a.top,a.width,a.height)}},bS=(t,s)=>s.filter(a=>en(a)&&Ri(a)).map(tc).getOrThunk(()=>bR(t)),n$=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},cj=(t,s,a,c,d,h)=>{const b=_e.fromDom(t.getContainer()),x=tr(b,".tox-editor-header").getOr(b),T=Qs(x),D=T.y>=s.bottom,P=c&&!D;if(t.inline&&P)return{y:Math.max(T.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!P)return{y:a.y,bottom:Math.min(T.y-h,a.bottom)};const $=d==="line"?Qs(b):s;return P?{y:Math.max(T.bottom+h,a.y),bottom:Math.min($.bottom-h,a.bottom)}:{y:Math.max($.y+h,a.y),bottom:Math.min(T.y-h,a.bottom)}},o$=(t,s,a,c=0)=>{const d=Vd(window),h=Qs(_e.fromDom(t.getContentAreaContainer())),b=a_(t)||GC(t)||KC(t),{x,width:T}=n$(h,d,c);if(t.inline&&!b)return qs(x,d.y,T,d.height);{const D=s.header.isPositionedAtTop(),{y:P,bottom:$}=cj(t,h,d,D,a,c);return qs(x,P,T,$-P)}},vS=12,UT={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},vR={maxHeightFunction:bp(),maxWidthFunction:gy()},s$=(t,s)=>{const a=t.selection.getRng(),c=mu(_e.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Uo(c.element,s)},lj=(t,s,a)=>{const c=Os(t,"position");lt(t,"position",s);const d=a(t);return c.each(h=>lt(t,"position",h)),d},Lb=t=>t==="node",WT=(t,s,a,c,d)=>{const h=bR(t),b=c.lastElement().exists(x=>Uo(a,x));if(s$(t,a))return b?QL:cu;if(b)return lj(s,c.getMode(),()=>t$(h,Qs(s),-20)&&!c.isReposition()?e5:QL);{const x=c.getMode()==="fixed"?d.y+ai().top:d.y,T=xs(s)+vS;return x+T<=h.y?cu:fy}},ZT=(t,s,a,c)=>{const d=T=>(D,P,$,G,Y)=>{const se=WT(t,G,T,a,Y),ie={...D,y:Y.y,height:Y.height};return{...se(ie,P,$,G,Y),alwaysFit:!0}},h=T=>Lb(c)?[d(T)]:[];return s?{onLtr:T=>[Ca,ya,Pr,us,xi,wa].concat(h(T)),onRtl:T=>[Ca,Pr,ya,xi,us,wa].concat(h(T))}:{onLtr:T=>[wa,Ca,us,ya,xi,Pr].concat(h(T)),onRtl:T=>[wa,Ca,xi,Pr,us,ya].concat(h(T))}},yR=(t,s,a,c)=>s==="line"?{bubble:Pu(vS,0,UT),layouts:{onLtr:()=>[Rv],onRtl:()=>[Mv]},overrides:vR}:{bubble:Pu(0,vS,UT,1/vS),layouts:ZT(t,a,c,s),overrides:vR},yS=(t,s)=>{const a=uo(s,h=>h.predicate(t.dom)),{pass:c,fail:d}=ta(a,h=>h.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},r$=t=>{if(t.length<=1)return t;{const s=h=>ms(t,b=>b.position===h),a=h=>uo(t,b=>b.position===h),c=s("selection"),d=s("node");if(c||d)if(d&&c){const h=a("node"),b=tt(a("selection"),x=>({...x,position:"node"}));return h.concat(b)}else return a(c?"selection":"node");else return a("line")}},jT=t=>{if(t.length<=1)return t;{const s=c=>et(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>uo(t,d=>d.position===c))}},a$=(t,s,a)=>{const c=yS(t,s);if(c.contextForms.length>0)return M.some({elem:t,toolbars:[c.contextForms[0]]});{const d=yS(t,a);if(d.contextForms.length>0)return M.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const h=r$(c.contextToolbars.concat(d.contextToolbars));return M.some({elem:t,toolbars:h})}else return M.none()}},i$=(t,s,a)=>t(s)?M.none():Kl(s,c=>{if(xo(c)){const{contextToolbars:d,contextForms:h}=yS(c,a.inNodeScope),b=h.length>0?h:jT(d);return b.length>0?M.some({elem:c,toolbars:b}):M.none()}else return M.none()},t),wR=(t,s)=>{const a=_e.fromDom(s.getBody()),c=b=>Uo(b,a),d=b=>!c(b)&&!Oa(a,b),h=_e.fromDom(s.selection.getNode());return d(h)?M.none():a$(h,t.inNodeScope,t.inEditorScope).orThunk(()=>i$(c,h,t))},uj=(t,s)=>{const a={},c=[],d=[],h={},b={},x=(P,$)=>{const G=pt(lH($));a[P]=G,G.launch.map(Y=>{h["form:"+P]={...$.launch,type:Y.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(G)}}}),G.scope==="editor"?d.push(G):c.push(G),b[P]=G},T=(P,$)=>{d2($).each(G=>{$.scope==="editor"?d.push(G):c.push(G),b[P]=G})},D=vs(t);return wt(D,P=>{const $=t[P];$.type==="contextform"?x(P,$):$.type==="contexttoolbar"&&T(P,$)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:b,formNavigators:h}},CR=tn("forward-slide"),c$=tn("backward-slide"),SR=tn("change-slide-event"),Sy="tox-pop--resizing",l$=t=>{const s=mn([]);return nr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),nr.getContent(a).each(c=>{Xn(c.element,"visibility")}),mr(a.element,Sy),Xn(a.element,"width")},inlineBehaviours:xt([no("context-toolbar-events",[op(ud(),(a,c)=>{c.event.raw.propertyName==="width"&&(mr(a.element,Sy),Xn(a.element,"width"))}),it(SR,(a,c)=>{const d=a.element;Xn(d,"width");const h=La(d);nr.setContent(a,c.event.contents),$s(d,Sy);const b=La(d);lt(d,"width",h+"px"),nr.getContent(a).each(x=>{c.event.focus.bind(T=>(Sl(T),uc(d))).orThunk(()=>(En.focusIn(x),vd(vr(d))))}),setTimeout(()=>{lt(a.element,"width",b+"px")},0)}),it(CR,(a,c)=>{nr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:vd(vr(a.element))}]))}),_n(a,SR,{contents:c.event.forwardContents,focus:M.none()})}),it(c$,(a,c)=>{Xa(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),_n(a,SR,{contents:Cl(d.bar),focus:d.focus})})})]),En.config({mode:"special",onEscape:a=>Xa(s.get()).fold(()=>t.onEscape(),c=>(ao(a,c$),M.some(!0)))})]),lazySink:()=>Yn.value(t.sink)})},xR="tox-pop--transition",dj=(t,s,a,c)=>{const d=c.backstage,h=d.shared,b=ro().deviceType.isTouch,x=ts(),T=ts(),D=ts(),P=$i(l$({sink:a,onEscape:()=>(t.focus(),M.some(!0))})),$=()=>{const It=D.get().getOr("node"),fn=Lb(It)?1:0;return o$(t,h,It,fn)},G=()=>!t.removed&&!(b()&&d.isContextMenuOpen()),Y=It=>Vr(hi(It,x.get(),Uo),!0),se=()=>{if(G()){const It=$(),fn=Vr(D.get(),"node")?bS(t,x.get()):bR(t);return It.height<=0||!t$(fn,It,.01)}else return!0},ie=()=>{x.clear(),T.clear(),D.clear(),nr.hide(P)},Ne=()=>{if(nr.isOpen(P)){const It=P.element;Xn(It,"display"),se()?lt(It,"display","none"):(T.set(0),nr.reposition(P))}},he=It=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[It],behaviours:xt([En.config({mode:"acyclic"}),no("pop-dialog-wrap-events",[Gs(fn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>En.focusIn(fn))}),Yd(fn=>{t.shortcuts.remove("ctrl+F9")})])])}),ke=Sc(()=>uj(s,It=>{const fn=Ke([It]);_n(P,CR,{forwardContents:he(fn)})})),Ae=(It,fn)=>gS(t,{buttons:It,toolbar:fn.items,allowToolbarGroups:!1},c.backstage,M.some(["form:"])),st=(It,fn)=>aj.buildInitGroups(It,fn),Ke=It=>{const{buttons:fn}=t.ui.registry.getAll(),bo=ke(),Us={...fn,...bo.formNavigators},jo=hb(t)===Cd.scrolling?Cd.scrolling:Cd.default,dn=dt(tt(It,gt=>gt.type==="contexttoolbar"?Ae(Us,gt):st(gt,h.providers)));return RT({type:jo,uid:tn("context-toolbar"),initGroups:dn,onEscape:M.none,cyclicKeying:!0,providers:h.providers})},Ft=(It,fn)=>{const bo=It==="node"?h.anchors.node(fn):h.anchors.cursor(),Us=yR(t,It,b(),{lastElement:x.get,isReposition:()=>Vr(T.get(),0),getMode:()=>Hi.getMode(a)});return Ds(bo,Us)},Jt=(It,fn)=>{if(ln.cancel(),!G())return;const bo=Ke(It),Us=It[0].position,jo=Ft(Us,fn);D.set(Us),T.set(1);const dn=P.element;Xn(dn,"display"),Y(fn)||(mr(dn,xR),Hi.reset(a,P)),nr.showWithinBounds(P,he(bo),{anchor:jo,transition:{classes:[xR],mode:"placement"}},()=>M.some($())),fn.fold(x.clear,x.set),se()&&lt(dn,"display","none")};let Qe=!1;const ln=F4(()=>{if(!(!t.hasFocus()||t.removed||Qe))if(Jc(P.element,xR))ln.throttle();else{const It=ke();wR(It,t).fold(ie,fn=>{Jt(fn.toolbars,M.some(fn.elem))})}},17);t.on("init",()=>{t.on("remove",ie),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ne),t.on("click keyup focus SetContent",ln.throttle),t.on(QF,ie),t.on(ej,It=>{const fn=ke();At(fn.lookupTable,It.toolbarKey).each(bo=>{Jt([bo],Sn(It.target!==t,It.target)),nr.getContent(P).each(En.focusIn)})}),t.on("focusout",It=>{F0.setEditorTimeout(t,()=>{uc(a.element).isNone()&&uc(P.element).isNone()&&ie()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ie()}),t.on("ExecCommand",({command:It})=>{It.toLowerCase()==="toggleview"&&ie()}),t.on("AfterProgressState",It=>{It.state?ie():t.hasFocus()&&ln.throttle()}),t.on("dragstart",()=>{Qe=!0}),t.on("dragend drop",()=>{Qe=!1}),t.on("NodeChange",It=>{uc(P.element).fold(ln.throttle,ce)})})},fj=t=>{wt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:iu(t,a.cmd),onSetup:H_(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ic(t),onAction:iu(t,"JustifyNone")})},u$=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=ts();return tt(c,b=>({type:"togglemenuitem",text:s.display(b),onSetup:x=>{const T=P=>{P&&(h.on($=>$.setActive(!1)),h.set(x)),x.setActive(P)};T(Vr(d,s.hash(b)));const D=s.watcher(t,b,T);return()=>{h.clear(),D()}},onAction:()=>s.setCurrent(t,b)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},mj=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:bP,hash:s=>pZ(s,["fixed","relative","empty"]).getOr(s),display:Kt,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>M.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ic(t),onMenuSetup:Ic(t)}),d$=t=>M.from(oP(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ne(a),hash:c=>Ut(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,h)=>{var b;return c.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(b=d.customCode)!==null&&b!==void 0?b:null}).unbind},getCurrent:c=>{const d=_e.fromDom(c.selection.getNode());return yl(d,h=>M.some(h).filter(xo).bind(b=>Dr(b,"lang").map(T=>{const D=Dr(b,"data-mce-lang").getOrUndefined();return{code:T,customCode:D,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=pa();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),$_(d.clear,Ic(t)(c))},onMenuSetup:Ic(t)})),f$=t=>{u$(t,mj(t)),d$(t).each(s=>u$(t,s))},m$=(t,s)=>{i1(t,s),hZ(t,s),LF(t,s),lZ(t,s),AZ(t,s)},h$=t=>Tb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),hj=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:h$(t),onAction:iu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ic(t),onAction:iu(t,"indent")})},g$=t=>{hj(t)},ER=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),$_(()=>t.off("PastePlainTextToggle",c),Ic(t)(a))},gj=t=>{const s=mn(AO(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:ER(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:ER(t,s)})},p$=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},pj=t=>{$g.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:H_(t,s.name),onAction:p$(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,c=`Access+${s}`;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:H_(t,a),onAction:p$(t,a),shortcut:c})}},bj=t=>{$g.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:iu(t,s.action),shortcut:s.shortcut})}),$g.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ic(t),onAction:iu(t,s.action)})})},vj=t=>{$g.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:iu(t,s.action),onSetup:H_(t,s.name)})})},yj=t=>{pj(t),bj(t),vj(t)},wj=t=>{$g.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:iu(t,s.action)})}),$g.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ic(t),onAction:iu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ic(t),onAction:p$(t,"code")})},Cj=t=>{yj(t),wj(t)},qT=(t,s)=>Tb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),Sj=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:qT(t,"hasUndo"),onAction:iu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:qT(t,"hasRedo"),onAction:iu(t,"redo")})},xj=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:qT(t,"hasUndo"),onAction:iu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:qT(t,"hasRedo"),onAction:iu(t,"redo"),shortcut:"Meta+Y"})},Ej=t=>{Sj(t),xj(t)},_j=t=>Tb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),Tj=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:_j(t),onAction:iu(t,"mceToggleVisualAid")})},kj=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:iu(t,"mceToggleVisualAid")})},b$=t=>{kj(t),Tj(t)},Aj=(t,s)=>{fj(t),Cj(t),m$(t,s),Ej(t),WH(t),b$(t),g$(t),f$(t),gj(t)},Oj=t=>j(t)?t.split(/[ ,]/):t,v$=t=>s=>s.options.get(t),Dj=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:j(a)||Et(a,j)?{value:Oj(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},y$=v$("contextmenu_never_use_native"),Rj=v$("contextmenu_avoid_overlap"),Mj=t=>w$(t).length===0,w$=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:uo(a,c=>po(s,c))},wS=(t,s)=>({type:"makeshift",x:t,y:s}),_R=(t,s,a)=>wS(t.x+s,t.y+a),C$=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Nj=t=>{if(C$(t)){const s=t.touches[0];return wS(s.pageX,s.pageY)}else return wS(t.pageX,t.pageY)},TR=t=>{if(C$(t)){const s=t.touches[0];return wS(s.clientX,s.clientY)}else return wS(t.clientX,t.clientY)},S$=(t,s)=>{const a=ub.DOM.getPos(t);return _R(s,a.x,a.y)},x$=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Nj(s):S$(t.getContentAreaContainer(),TR(s)):E$(t),E$=t=>({type:"selection",root:_e.fromDom(t.selection.getNode())}),Pj=t=>({type:"node",node:M.some(_e.fromDom(t.selection.getNode())),root:_e.fromDom(t.getBody())}),_$=(t,s,a)=>{switch(a){case"node":return Pj(t);case"point":return x$(t,s);case"selection":return E$(t)}},Bj=(t,s,a,c,d,h)=>{const b=a(),x=_$(t,s,h);cy(b,df.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:M.none()}).map(T=>{s.preventDefault(),nr.showMenuAt(d,{anchor:x},{menu:{markers:vb("normal")},data:T})})},Ij={onLtr:()=>[Ca,ya,Pr,us,xi,wa,cu,fy,dy,vT,eS,bT],onRtl:()=>[Ca,Pr,ya,xi,us,wa,cu,fy,eS,bT,dy,vT]},kR=12,Lj={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},T$=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return la(t.getWin(),oh.domRange(d)).exists(b=>b.left<=c.clientX&&b.right>=c.clientX&&b.top<=c.clientY&&b.bottom>=c.clientY)}},Fj=t=>{const s=t.selection.getRng(),a=()=>{F0.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const c=b=>{b.preventDefault(),b.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},$j=(t,s,a)=>{const c=_$(t,s,a);return{bubble:Pu(0,a==="point"?kR:0,Lj),layouts:Ij,overrides:{maxWidthFunction:gy(),maxHeightFunction:bp()},...c}},AR=(t,s,a,c,d,h,b)=>{const x=$j(t,s,h);cy(a,df.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:M.none()}).map(T=>{s.preventDefault();const D=b?Zr.HighlightMenuAndItem:Zr.HighlightNone;nr.showMenuWithinBounds(d,{anchor:x},{menu:{markers:vb("normal"),highlightOnOpen:D},data:T,type:"horizontal"},()=>M.some(o$(t,c.shared,h==="node"?"node":"selection"))),t.dispatch(QF)})},Hj=(t,s,a,c,d,h)=>{const b=ro(),x=b.os.isiOS(),T=b.os.isMacOS(),D=b.os.isAndroid(),P=b.deviceType.isTouch(),$=()=>!(D||x||T&&P),G=()=>{const Y=a();AR(t,s,Y,c,d,h,$())};if((T||x)&&h!=="node"){const Y=()=>{Fj(t),G()};T$(t,s)?Y():(t.once("selectionchange",Y),t.once("touchend",()=>t.off("selectionchange",Y)))}else G()},OR=t=>j(t)?t==="|":t.type==="separator",DR={type:"separator"},k$=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(j(t))return t;switch(t.type){case"separator":return DR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return j(c)?c:tt(c,k$)}};default:const a=t;return{type:"menuitem",...s(a),onAction:qe(a.onAction)}}},GT=(t,s)=>{if(s.length===0)return t;const c=Xa(t).filter(d=>!OR(d)).fold(()=>[],d=>[DR]);return t.concat(c).concat(s).concat([DR])},Vj=(t,s,a)=>{const c=Ho(s,(d,h)=>At(t,h.toLowerCase()).map(b=>{const x=b.update(a);if(j(x)&&ge(Tr(x)))return GT(d,x.split(" "));if(be(x)&&x.length>0){const T=tt(x,k$);return GT(d,T)}else return d}).getOrThunk(()=>d.concat([h])),[]);return c.length>0&&OR(c[c.length-1])&&c.pop(),c},zj=(t,s)=>s.ctrlKey&&!y$(t),Uj=t=>t.type==="longpress"||po(t,"touches"),A$=(t,s)=>!Uj(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),O$=(t,s)=>A$(t,s)?t.selection.getStart(!0):s.target,D$=(t,s)=>{const a=Rj(t),c=A$(t,s)?"selection":"point";if(ge(a)){const d=O$(t,s);return C2(_e.fromDom(d),a)?"node":c}else return c},Wj=(t,s,a)=>{const d=ro().deviceType.isTouch,h=$i(nr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:xt([no("dismissContextMenu",[it(Rm(),(T,D)=>{Do.close(T),t.focus()})])])})),b=()=>nr.hide(h),x=T=>{if(y$(t)&&T.preventDefault(),zj(t,T)||Mj(t))return;const D=D$(t,T),P=()=>{const G=O$(t,T),Y=t.ui.registry.getAll(),se=w$(t);return Vj(Y.contextMenus,se,G)};(d()?Hj:Bj)(t,T,P,a,h,D)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,b),t.on("longpress contextmenu",x)})},RR=te.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),KT=t=>s=>s.translate(-t.left,-t.top),YT=t=>s=>s.translate(t.left,t.top),Vg=t=>(s,a)=>Ho(t,(c,d)=>d(c),Js(s,a)),XT=(t,s,a)=>t.fold(Vg([YT(a),KT(s)]),Vg([KT(s)]),Vg([])),xy=(t,s,a)=>t.fold(Vg([YT(a)]),Vg([]),Vg([YT(s)])),R$=(t,s,a)=>t.fold(Vg([]),Vg([KT(a)]),Vg([YT(s),KT(a)])),M$=(t,s,a,c,d,h)=>{const b=xy(t,d,h),x=xy(s,d,h);return Math.abs(b.left-x.left)<=a&&Math.abs(b.top-x.top)<=c},Zj=(t,s,a,c,d,h)=>{const b=xy(t,d,h),x=xy(s,d,h),T=Math.abs(b.left-x.left),D=Math.abs(b.top-x.top);return Js(T,D)},MR=(t,s,a)=>{const c=t.fold((d,h)=>({position:M.some("absolute"),left:M.some(d+"px"),top:M.some(h+"px")}),(d,h)=>({position:M.some("absolute"),left:M.some(d-a.left+"px"),top:M.some(h-a.top+"px")}),(d,h)=>({position:M.some("fixed"),left:M.some(d+"px"),top:M.some(h+"px")}));return{right:M.none(),bottom:M.none(),...c}},jj=(t,s,a)=>t.fold((c,d)=>JT(c+s,d+a),(c,d)=>Ku(c+s,d+a),(c,d)=>c1(c+s,d+a)),NR=(t,s,a,c)=>{const d=(h,b)=>(x,T)=>{const D=h(s,a,c);return b(x.getOr(D.left),T.getOr(D.top))};return t.fold(d(R$,JT),d(xy,Ku),d(XT,c1))},JT=RR.offset,Ku=RR.absolute,c1=RR.fixed,N$=(t,s)=>{const a=pn(t,s);return Ut(a)?NaN:parseInt(a,10)},qj=(t,s)=>{const a=t.element,c=N$(a,s.leftAttr),d=N$(a,s.topAttr);return isNaN(c)||isNaN(d)?M.none():M.some(Js(c,d))},Gj=(t,s,a)=>{const c=t.element;qt(c,s.leftAttr,a.left+"px"),qt(c,s.topAttr,a.top+"px")},Kj=(t,s)=>{const a=t.element;H(a,s.leftAttr),H(a,s.topAttr)},P$=(t,s,a,c)=>qj(t,s).fold(()=>a,d=>c1(d.left+c.left,d.top+c.top)),Yj=(t,s,a,c,d,h)=>{const b=P$(t,s,a,c),x=s.mustSnap?Jj(t,s,b,d,h):Qj(t,s,b,d,h),T=XT(b,d,h);return Gj(t,s,T),x.fold(()=>({coord:c1(T.left,T.top),extra:M.none()}),D=>({coord:D.output,extra:D.extra}))},Xj=(t,s)=>{Kj(t,s)},B$=(t,s,a,c)=>bs(t,d=>{const h=d.sensor;return M$(s,h,d.range.left,d.range.top,a,c)?M.some({output:NR(d.output,s,a,c),extra:d.extra}):M.none()}),Jj=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return B$(h,a,c,d).orThunk(()=>Ho(h,(T,D)=>{const P=D.sensor,$=Zj(a,P,D.range.left,D.range.top,c,d);return T.deltas.fold(()=>({deltas:M.some($),snap:M.some(D)}),G=>{const Y=($.left+$.top)/2,se=(G.left+G.top)/2;return Y<=se?{deltas:M.some($),snap:M.some(D)}:T})},{deltas:M.none(),snap:M.none()}).snap.map(T=>({output:NR(T.output,a,c,d),extra:T.extra})))},Qj=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return B$(h,a,c,d)},eq=(t,s,a)=>({coord:NR(t.output,t.output,s,a),extra:t.extra});var tq=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=ma(t.element),b=ai(h),x=rw(d),T=eq(c,b,x),D=MR(T.coord,b,x);Ss(d,D)}}});const PR="data-initial-z-index",nq=t=>{Ia(t.element).filter(xo).each(s=>{Dr(s,PR).fold(()=>Xn(s,"z-index"),a=>lt(s,"z-index",a)),H(s,PR)})},I$=t=>{Ia(t.element).filter(xo).each(s=>{Os(s,"z-index").each(a=>{qt(s,PR,a)}),lt(s,"z-index",rs(t.element,"z-index"))})},BR=(t,s)=>{t.getSystem().addToGui(s),I$(s)},oq=t=>{nq(t),t.getSystem().removeFromGui(t)},Ey=(t,s,a)=>t.getSystem().build(am.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var sq=Bs("snaps",[rt("getSnapPoints"),ko("onSensor"),rt("leftAttr"),rt("topAttr"),Be("lazyViewport",Ur),Be("mustSnap",!1)]);const IR=[Be("useFixed",Me),rt("blockerClass"),Be("getTarget",Kt),Be("onDrag",ce),Be("repositionTarget",!0),Be("onDrop",ce),fr("getBounds",Ur),sq],LR=t=>Di(Os(t,"left"),Os(t,"top"),Os(t,"position"),(s,a,c)=>(c==="fixed"?c1:JT)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ga(t);return Ku(s.left,s.top)}),rq=(t,s,a,c,d)=>{const h=d.bounds,b=xy(s,a,c),x=nl(b.left,h.x,h.x+h.width-d.width),T=nl(b.top,h.y,h.y+h.height-d.height),D=Ku(x,T);return s.fold(()=>{const P=R$(D,a,c);return JT(P.left,P.top)},ne(D),()=>{const P=XT(D,a,c);return c1(P.left,P.top)})},aq=(t,s,a,c,d,h,b)=>{const x=s.fold(()=>{const T=jj(a,h.left,h.top),D=XT(T,c,d);return c1(D.left,D.top)},T=>{const D=Yj(t,T,a,h,c,d);return D.extra.each(P=>{T.onSensor(t,P)}),D.coord});return rq(t,x,c,d,b)},iq=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=ma(t.element),b=ai(h),x=rw(d),T=LR(d),D=aq(t,s.snaps,T,b,x,c,a),P=MR(D,b,x);Ss(d,P)}s.onDrag(t,d,c)},L$=(t,s)=>({bounds:t.getBounds(),height:ml(s.element),width:yo(s.element)}),FR=(t,s,a,c,d)=>{const h=a.update(c,d),b=a.getStartData().getOrThunk(()=>L$(s,t));h.each(x=>{iq(t,s,b,x)})},F$=(t,s,a,c)=>{s.each(oq),a.snaps.each(h=>{Xj(t,h)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},$R=t=>(s,a)=>{const c=d=>{a.setStartData(L$(s,d))};return Fs([it(Xh(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},cq=t=>Fs([it(Er(),t.forceDrop),it($f(),t.drop),it(tp(),(s,a)=>{t.move(a.event)}),it(Ff(),t.delayDrop)]);var lq=Object.freeze({__proto__:null,getData:t=>M.from(Js(t.x,t.y)),getDelta:(t,s)=>Js(s.left-t.left,s.top-t.top)});const $$=(t,s,a)=>[it(Er(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const b=()=>F$(c,M.some(D),t,s),x=cI(b,200),T={drop:b,delayDrop:x.schedule,forceDrop:b,move:$=>{x.cancel(),FR(c,t,s,lq,$)}},D=Ey(c,t.blockerClass,cq(T));(()=>{a(c),BR(c,D)})()})],uq=[...IR,ys("dragger",{handlers:$R($$)})],dq=t=>Fs([it(Yl(),t.forceDrop),it(Ms(),t.drop),it(Ii(),t.drop),it(No(),(s,a)=>{t.move(a.event)})]),fq=t=>{const s=t[0];return M.some(Js(s.clientX,s.clientY))};var CS=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?fq(a):M.none()},getDelta:(t,s)=>Js(s.left-t.left,s.top-t.top)});const H$=(t,s,a)=>{const c=ts(),d=h=>{F$(h,c.get(),t,s),c.clear()};return[it(Yl(),(h,b)=>{b.stop();const x=()=>d(h),T={drop:x,delayDrop:ce,forceDrop:x,move:$=>{FR(h,t,s,CS,$)}},D=Ey(h,t.blockerClass,dq(T));c.set(D),(()=>{a(h),BR(h,D)})()}),it(No(),(h,b)=>{b.stop(),FR(h,t,s,CS,b.event)}),it(Ms(),(h,b)=>{b.stop(),d(h)}),it(Ii(),d)]},mq=[...IR,ys("dragger",{handlers:$R(H$)})],hq=(t,s,a)=>[...$$(t,s,a),...H$(t,s,a)],gq=[...IR,ys("dragger",{handlers:$R(hq)})];var bq=Object.freeze({__proto__:null,mouse:uq,touch:mq,mouseOrTouch:gq}),vq=Object.freeze({__proto__:null,init:()=>{let t=M.none(),s=M.none();const a=()=>{t=M.none(),s=M.none()},c=(T,D)=>{const P=t.map($=>T.getDelta($,D));return t=M.some(D),P},d=(T,D)=>T.getData(D).bind(P=>c(T,P)),h=T=>{s=M.some(T)},b=()=>s,x=ne({});return Xc({readState:x,reset:a,update:d,getStartData:b,setStartData:h})}});const Fb=XS({branchKey:"mode",branches:bq,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:M.from(t.extra)})},state:vq,apis:tq}),HR=40,_y=HR/2,VR=(t,s,a,c,d,h)=>t.fold(()=>Fb.snap({sensor:Ku(a-_y,c-_y),range:Js(d,h),output:Ku(M.some(a),M.some(c)),extra:{td:s}}),b=>{const x=a-_y,T=c-_y,D=HR,P=HR,$=b.element.dom.getBoundingClientRect();return Fb.snap({sensor:Ku(x,T),range:Js(D,P),output:Ku(M.some(a-$.width/2),M.some(c-$.height/2)),extra:{td:s}})}),V$=(t,s,a)=>{const c=(d,h)=>d.exists(b=>Uo(b,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const b=h.td;c(s.get(),b)||(s.set(b),a(b))},mustSnap:!0}},z$=t=>Jo(Vi.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:xt([Fb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),sy.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),yq=(t,s)=>{const a=mn([]),c=mn([]),d=mn(!1),h=ts(),b=ts(),x=Jt=>{const Qe=tc(Jt);return VR(Y.getOpt(s),Jt,Qe.x,Qe.y,Qe.width,Qe.height)},T=()=>tt(a.get(),Jt=>x(Jt)),D=Jt=>{const Qe=tc(Jt);return VR(se.getOpt(s),Jt,Qe.right,Qe.bottom,Qe.width,Qe.height)},P=()=>tt(c.get(),Jt=>D(Jt)),$=V$(T,h,Jt=>{b.get().each(Qe=>{t.dispatch("TableSelectorChange",{start:Jt,finish:Qe})})}),G=V$(P,b,Jt=>{h.get().each(Qe=>{t.dispatch("TableSelectorChange",{start:Qe,finish:Jt})})}),Y=z$($),se=z$(G),ie=$i(Y.asSpec()),Ne=$i(se.asSpec()),he=(Jt,Qe,ln,It)=>{const fn=Qe.dom.getBoundingClientRect();Xn(Jt.element,"display");const bo=Da(_e.fromDom(t.getBody())).dom.innerHeight,Us=ln(fn),jo=It(fn,bo);(Us||jo)&&lt(Jt.element,"display","none")},ke=(Jt,Qe,ln,It)=>{const fn=ln(Qe);Fb.snapTo(Jt,fn),he(Jt,Qe,jo=>jo[It]<0,(jo,dn)=>jo[It]>dn)},Ae=Jt=>ke(ie,Jt,x,"top"),st=()=>h.get().each(Ae),Ke=Jt=>ke(Ne,Jt,D,"bottom"),Ft=()=>b.get().each(Ke);if(ro().deviceType.isTouch()){const Jt=Qe=>tt(Qe,_e.fromDom);t.on("TableSelectionChange",Qe=>{d.get()||(Bu(s,ie),Bu(s,Ne),d.set(!0));const ln=_e.fromDom(Qe.start),It=_e.fromDom(Qe.finish);h.set(ln),b.set(It),M.from(Qe.otherCells).each(fn=>{a.set(Jt(fn.upOrLeftCells)),c.set(Jt(fn.downOrRightCells)),Ae(ln),Ke(It)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{st(),Ft()}),t.on("TableSelectionClear",()=>{d.get()&&(Xf(ie),Xf(Ne),d.set(!1)),h.clear(),b.clear()})}};var wq=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const Cq=(t,s)=>{const a=M.from(pn(t,"id")).getOrThunk(()=>{const c=tn("aria");return qt(s,"id",c),c});qt(t,"aria-describedby",a)},Sq=t=>{H(t,"aria-describedby")},xq=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",Eq=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"›",h=(D,P,$)=>Vi.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":$}},components:[hr(D)],action:G=>{t.focus(),t.selection.select(P),t.nodeChanged()},buttonBehaviours:xt([Ir.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",P.nodeName.toLowerCase()]),onShow:(G,Y)=>{Cq(G.element,Y.element)},onHide:G=>{Sq(G.element)}})}),mf.button(a.isDisabled),Ga()])}),b=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[hr(` ${d} `)]}),x=D=>Ho(D,(P,$,G)=>{const Y=h($.name,$.element,G);return G===0?P.concat([Y]):P.concat([b(),Y])},[]),T=D=>{const P=[];let $=D.length;for(;$-- >0;){const G=D[$];if(G.nodeType===1&&!xq(G)){const Y=DH(t,G);if(Y.isDefaultPrevented()||P.push({name:Y.name,element:G}),Y.isPropagationStopped())break}}return P};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:xt([En.config({mode:"flow",selector:"div[role=button]"}),l.config({disabled:a.isDisabled}),Ga(),Vs.config({}),zn.config({}),no("elementPathEvents",[Gs((D,P)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>En.focusIn(D)),t.on("NodeChange",$=>{const G=T($.parents),Y=G.length>0?x(G):[];zn.set(D,Y)})})])]),components:[]}};var l1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(l1||(l1={}));const _q=(t,s,a,c,d)=>{const h={height:zT(c+s.top,$0(t),t_(t))};return a===l1.Both&&(h.width=zT(d+s.left,mb(t),WC(t))),h},U$=(t,s,a)=>{const c=_e.fromDom(t.getContainer()),d=_q(t,s,a,xs(c),La(c));Cs(d,(h,b)=>{on(h)&&lt(c,b,VT(h))}),L_(t)},Tq=t=>{const s=hP(t);return s===!1?l1.None:s==="both"?l1.Both:l1.Vertical},QT=(t,s,a,c)=>{const h=Js(a*20,c*20);return U$(t,h,s),M.some(!0)},kq=(t,s)=>{const a=Tq(t);if(a===l1.None)return M.none();const c=a===l1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return M.some(Vu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(c),"data-mce-name":"resize-handle"},behaviours:[Fb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,b)=>U$(t,b,a),blockerClass:"tox-blocker"}),En.config({mode:"special",onLeft:()=>QT(t,a,-1,0),onRight:()=>QT(t,a,1,0),onUp:()=>QT(t,a,0,-1),onDown:()=>QT(t,a,0,1)}),Vs.config({}),Fn.config({}),Ir.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},W$=(t,s)=>{const a=(c,d,h)=>zn.set(c,[hr(s.translate(["{0} "+h,d[h]]))]);return Vi.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:xt([mf.button(s.isDisabled),Ga(),Vs.config({}),zn.config({}),Xt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),no("wordcount-events",[Ru(c=>{const d=Xt.getValue(c),h=d.mode==="words"?"characters":"words";Xt.setValue(c,{mode:h,count:d.count}),a(c,d.count,h)}),Gs(c=>{t.on("wordCountUpdate",d=>{const{mode:h}=Xt.getValue(c);Xt.setValue(c,{mode:h,count:d.wordCount}),a(c,d.wordCount,h)})})])]),eventOrder:{[Jl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Aq=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",wq.trim()])},behaviours:xt([Fn.config({})])}]}),c=()=>{const x=N_("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[hr(Hu.translate(["Press {0} for help",x]))]}},d=()=>{const x=[];return t.hasPlugin("wordcount")&&x.push(W$(t,s)),kO(t)&&x.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:x}},h=()=>{const x=[],T=qC(t),D=mP(t),P=kO(t)||t.hasPlugin("wordcount"),$=()=>{const G="tox-statusbar__text-container--flex-start",Y="tox-statusbar__text-container--flex-end",se="tox-statusbar__text-container--space-around";if(T){const ie="tox-statusbar__text-container-3-cols";return!P&&!D?[ie,se]:P&&!D?[ie,Y]:[ie,G]}return[P&&!D?Y:G]};return D&&x.push(Eq(t,{},s)),T&&x.push(c()),P&&x.push(d()),x.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...$()]},components:x}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const x=h(),T=kq(t,s);return x.concat(T.toArray())})()}},Z$=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),Oq=(t,s)=>{const a=t.inline,c=a?JZ:HT,d=gb(t)?rW:C5,h=QZ(),b=ts(),x=ts(),T=ts(),G=ro().deviceType.isTouch()?["tox-platform-touch"]:[],Y=YC(t),se=hb(t),ie=Jo({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ne=Jo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),he=()=>h.mainUi.get().map(xn=>xn.outerContainer).bind(zs.getHeader),ke=()=>Yn.fromOption(h.dialogUi.get().map(xn=>xn.sink),"UI has not been rendered"),Ae=()=>Yn.fromOption(h.popupUi.get().map(xn=>xn.sink),"(popup) UI has not been rendered"),st=h.lazyGetInOuterOrDie("anchor bar",ie.getOpt),Ke=h.lazyGetInOuterOrDie("bottom anchor bar",Ne.getOpt),Ft=h.lazyGetInOuterOrDie("toolbar",zs.getToolbar),Jt=h.lazyGetInOuterOrDie("throbber",zs.getThrobber),Qe=b5({popup:Ae,dialog:ke},t,st,Ke),ln=()=>{const xn={attributes:{[Yw]:Y?xl.BottomToTop:xl.TopToBottom}},Kn=zs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Qe.popup,onEscape:()=>{t.focus()}}),ks=zs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Qe.popup.shared.getSink,providers:Qe.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Zb=>{RH(t,Zb)},type:se,lazyToolbar:Ft,lazyHeader:()=>he().getOrDie("Could not find header element"),...xn}),Qo=zs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Qe.popup.shared.providers,onEscape:()=>{t.focus()},type:se}),bc=KC(t),Ju=GC(t),mm=a_(t),Xi=gP(t),Qu=It(),Id=bc||Ju||mm,Il=()=>bc?[Qo]:Ju?[ks]:[],xh=Xi?[Qu,Kn]:[Kn];return zs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Id?[]:["tox-editor-header--empty"]),...xn},components:dt([mm?xh:[],Il(),H0(t)?[]:[ie.asSpec()]]),sticky:gb(t),editor:t,sharedBackstage:Qe.popup.shared})},It=()=>zs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),fn=()=>{const xn=zs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Kn=zs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[xn,Kn]}},bo=()=>{const xn=MO(t),Kn=Uo(io(),xn)&&rs(xn,"display")==="grid",ks={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(G),attributes:{...Hu.isRtl()?{dir:"rtl"}:{}}},behaviours:xt([Hi.config({useFixed:()=>d.isDocked(he)})])},Qo={dom:{styles:{width:document.body.clientWidth+"px"}},events:Fs([it(md(),mm=>{lt(mm.element,"width",document.body.clientWidth+"px")})])},bc=$i(Ds(ks,Kn?Qo:{})),Ju=_2(bc);return x.set(Ju),{sink:bc,mothership:Ju}},Us=()=>{const xn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(G),attributes:{...Hu.isRtl()?{dir:"rtl"}:{}}},behaviours:xt([Hi.config({useFixed:()=>d.isDocked(he),getBounds:()=>s.getPopupSinkBounds()})])},Kn=$i(xn),ks=_2(Kn);return T.set(ks),{sink:Kn,mothership:ks}},jo=()=>{const xn=ln(),Kn=fn(),ks=zs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Qe.popup}),Qo=zs.parts.viewWrapper({backstage:Qe.popup}),bc=fP(t)&&!a?M.some(Aq(t,Qe.popup.shared.providers)):M.none(),Ju=dt([Y?[]:[xn],a?[]:[Kn],Y?[xn]:[]]),mm=zs.parts.editorContainer({components:dt([Ju,a?[]:[Ne.asSpec()]])}),Xi=XC(t),Qu={role:"application",...Hu.isRtl()?{dir:"rtl"}:{},...Xi?{"aria-hidden":"true"}:{}},Id=$i(zs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(Y?["tox-tinymce--toolbar-bottom"]:[]).concat(G),styles:{visibility:"hidden",...Xi?{opacity:"0",border:"0"}:{}},attributes:Qu},components:[mm,...a?[]:[Qo,...bc.toArray()],ks],behaviours:xt([Ga(),l.config({disableClass:"tox-tinymce--disabled"}),En.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Il=_2(Id);return b.set(Il),{mothership:Il,outerContainer:Id}},dn=xn=>{const Kn=VT(GZ(t)),ks=VT(KZ(t));return t.inline||(ni("div","width",ks)&&lt(xn.element,"width",ks),ni("div","height",Kn)?lt(xn.element,"height",Kn):lt(xn.element,"height","400px")),Kn},gt=xn=>{t.addShortcut("alt+F9","focus menubar",()=>{zs.focusMenubar(xn)}),t.addShortcut("alt+F10","focus toolbar",()=>{zs.focusToolbar(xn)}),t.addCommand("ToggleToolbarDrawer",(Kn,ks)=>{ks!=null&&ks.skipFocus?zs.toggleToolbarDrawerWithoutFocusing(xn):zs.toggleToolbarDrawer(xn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>zs.isToolbarDrawerToggled(xn))},$t=xn=>{const{mainUi:Kn,popupUi:ks,uiMotherships:Qo}=xn;Vo(EO(t),(My,ik)=>{t.ui.registry.addGroupToolbarButton(ik,My)});const{buttons:bc,menuItems:Ju,contextToolbars:mm,sidebars:Xi,views:Qu}=t.ui.registry.getAll(),Id=RO(t),Il={menuItems:Ju,menus:vP(t),menubar:iP(t),toolbar:Id.getOrThunk(()=>jC(t)),allowToolbarGroups:se===Cd.floating,buttons:bc,sidebar:Xi,views:Qu};gt(Kn.outerContainer),v5(t,Kn.mothership,Qo),d.setup(t,Qe.popup.shared,he),Aj(t,Qe.popup),Wj(t,Qe.popup.shared.getSink,Qe.popup),U3(t),SW(t,Jt,Qe.popup.shared),dj(t,mm,ks.sink,{backstage:Qe.popup}),yq(t,ks.sink);const xh=t.getElement(),Zb=dn(Kn.outerContainer),oM={targetNode:xh,height:Zb};return c.render(t,xn,Il,Qe.popup,oM)},$n=xn=>(T.set(xn.mothership),xn),Mn=()=>{const xn=jo(),Kn=bo(),ks=Hp(t)?Us():$n(Kn);h.dialogUi.set(Kn),h.popupUi.set(ks),h.mainUi.set(xn);const Qo={popupUi:ks,dialogUi:Kn,mainUi:xn,uiMotherships:h.getUiMotherships()};return $t(Qo)};return{popups:{backstage:Qe.popup,getMothership:()=>Z$("popups",T)},dialogs:{backstage:Qe.dialog,getMothership:()=>Z$("dialogs",x)},renderUI:Mn}},Dq=t=>t.dom.textContent,Rq=(t,s)=>{const a=Dr(t,"id").fold(()=>{const c=tn("dialog-label");return qt(s,"id",c),c},Kt);qt(t,"aria-labelledby",a)},Mq=ne([rt("lazySink"),Bo("dragBlockClass"),fr("getBounds",Ur),Be("useTabstopAt",Pe),Be("firstTabstop",0),Be("eventOrder",{}),Za("modalBehaviours",[En]),Mc("onExecute"),gv("onEscape")]),zR={sketch:Kt},Nq=ne([Tl({name:"draghandle",overrides:(t,s)=>({behaviours:xt([Fb.config({mode:"mouse",getTarget:a=>Km(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Ti({schema:[rt("dom")],name:"title"}),Ti({factory:zR,schema:[rt("dom")],name:"close"}),Ti({factory:zR,schema:[rt("dom")],name:"body"}),Tl({factory:zR,schema:[rt("dom")],name:"footer"}),ru({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Be("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Be("components",[])],name:"blocker"})]),j$=(t,s,a,c)=>{const d=ts(),h=se=>{d.set(se);const ie=t.lazySink(se).getOrDie(),Ne=c.blocker(),he=ie.getSystem().build({...Ne,components:Ne.components.concat([Cl(se)]),behaviours:xt([Fn.config({}),no("dialog-blocker-events",[op(ld(),()=>{bf.isBlocked(se)?ce():En.focusIn(se)})])])});Bu(ie,he),En.focusIn(se)},b=se=>{d.clear(),Ia(se.element).each(ie=>{se.getSystem().getByDom(ie).each(Ne=>{Xf(Ne)})})},x=se=>kl(se,t,"body"),T=se=>bt(se,t,"footer"),D=(se,ie)=>{bf.block(se,ie)},P=se=>{bf.unblock(se)},$=tn("modal-events"),G={...t.eventOrder,[sc()]:[$].concat(t.eventOrder["alloy.system.attached"]||[])},Y=ro();return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:b,getBody:x,getFooter:T,setIdle:P,setBusy:D},eventOrder:G,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ja(t.modalBehaviours,[zn.config({}),En.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),bf.config({getRoot:d.get}),no($,[Gs(se=>{const ie=kl(se,t,"title").element,Ne=Dq(ie);Y.os.isMacOS()&&vt(Ne)?qt(se.element,"aria-label",Ne):Rq(se.element,ie)})])])}},Na=Ki({name:"ModalDialog",configFields:Mq(),partFields:Nq(),factory:j$,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),$b=Dn([Qr,k_].concat(Wp)),Pq=qc,SS=[bD("button"),Ed,Dc("align","end",["start","end"]),Z0,_d,Jg("buttonType",["primary","secondary"])],xS=[...SS,Ng],UR=[wi("type",["submit","cancel","custom"]),...xS],Bq=[wi("type",["menu"]),Pg,W0,Ed,Ac("items",$b),...SS],Iq=[...SS,wi("type",["togglebutton"]),W0,Ed,Pg,Mr("active",!1)],Lq=ba("type",{submit:UR,cancel:UR,custom:UR,menu:Bq,togglebutton:Iq}),Fq=[Qr,Ng,wi("level",["info","warn","error","success"]),GP,Be("url","")],Hb=Dn(Fq),q$=t=>[Qr,t],$q=[Qr,Ng,_d,bD("button"),Ed,nH,Jg("buttonType",["primary","secondary","toolbar"]),Z0],Hq=Dn($q),Ty=[Qr,k_],dm=Ty.concat([A_]),Vq=Ty.concat([hD,_d]),zq=Dn(Vq),Uq=qc,Wq=dm.concat([YP("auto")]),WR=Dn(Wq),ES=p1([c2,Ng,GP]),ZR=dm.concat([Ci("storageKey","default")]),ek=Dn(ZR),Vb=Wt,Zq=Dn(dm),G$=Wt,K$=Ty.concat([Ci("tag","textarea"),Jr("scriptId"),Jr("scriptUrl"),ku("onFocus"),zy("settings",void 0)]),Y$=Ty.concat([Ci("tag","textarea"),kc("init")]),jq=qh(t=>ar("customeditor.old",Bi(Y$),t).orThunk(()=>ar("customeditor.new",Bi(K$),t))),qq=Wt,X$=Dn(dm),J$=Bf(),qR=t=>[Qr,Gh("columns"),t],Gq=[Qr,Jr("html"),Dc("presets","presentation",["presentation","document"]),fr("onInit",ce),Mr("stretched",!1)],Kq=Dn(Gq),Yq=dm.concat([Mr("border",!1),Mr("sandboxed",!0),Mr("streamContent",!1),Mr("transparent",!0)]),Q$=Dn(Yq),Xq=Wt,Jq=Dn(Ty.concat([ca("height")])),Qq=Dn([Jr("url"),If("zoom"),If("cachedWidth"),If("cachedHeight")]),GR=dm.concat([ca("inputMode"),ca("placeholder"),Mr("maximized",!1),_d]),KR=Dn(GR),eG=Wt,e6=t=>[Qr,hD,t,Dc("align","start",["start","center","end"]),ca("for")],tG=[Ng,c2],nG=[Ng,Ac("items",Tm("items",()=>YR))],YR=_m([Dn(tG),Dn(nG)]),oG=dm.concat([Ac("items",YR),_d]),sG=Dn(oG),zb=Wt,t6=dm.concat([nv("items",[Ng,c2]),Am("size",1),_d]),rG=Dn(t6),tk=Wt,ky=dm.concat([Mr("constrain",!0),_d]),nk=Dn(ky),XR=Dn([Jr("width"),Jr("height")]),ok=Ty.concat([hD,Am("min",0),Am("max",0)]),Nl=Dn(ok),sk=Zd,n6=[Qr,Ac("header",Wt),Ac("cells",Tc(Wt))],o6=Dn(n6),aG=dm.concat([ca("placeholder"),Mr("maximized",!1),_d]),iG=Dn(aG),u1=Wt,cG=[wi("type",["directory","leaf"]),qP,Jr("id"),Tu("menu",k5)],JR=Dn(cG),Ay=cG.concat([Ac("children",Tm("children",()=>jd("type",{directory:_S,leaf:JR})))]),_S=Dn(Ay),s6=jd("type",{directory:_S,leaf:JR}),lG=[Qr,Ac("items",s6),ku("onLeafAction"),ku("onToggleExpand"),_("defaultExpandedIds",[],Wt),ca("defaultSelectedId")],uG=Dn(lG),dG=dm.concat([Dc("filetype","file",["image","media","file"]),_d,ca("picker_text")]),fG=Dn(dG),Oy=Dn([c2,gD]),r6=t=>ia("items","items",Pi(),Tc(qh(s=>ar(`Checking item of ${t}`,QR,s).fold(a=>Yn.error(Gl(a)),a=>Yn.value(a))))),QR=Xr(()=>jd("type",{alertbanner:Hb,bar:Dn(q$(r6("bar"))),button:Hq,checkbox:zq,colorinput:ek,colorpicker:Zq,dropzone:X$,grid:Dn(qR(r6("grid"))),iframe:Q$,input:KR,listbox:sG,selectbox:rG,sizeinput:nk,slider:Nl,textarea:iG,urlinput:fG,customeditor:jq,htmlpanel:Kq,imagepreview:Jq,collection:WR,label:Dn(e6(r6("label"))),table:o6,tree:uG,panel:hG})),mG=[Qr,Be("classes",[]),Ac("items",QR)],hG=Dn(mG),gG=[bD("tab"),qP,Ac("items",QR)],pG=[Qr,nv("tabs",gG)],TS=Dn(pG),bG=xS,vG=Lq,a6=Dn([Jr("title"),Fo("body",jd("type",{panel:hG,tabpanel:TS})),Ci("size","normal"),_("buttons",[],vG),Be("initialData",{}),fr("onAction",ce),fr("onChange",ce),fr("onSubmit",ce),fr("onClose",ce),fr("onCancel",ce),fr("onTabChange",ce)]),yG=t=>ar("dialog",a6,t),HY=Dn([wi("type",["cancel","custom"]),...bG]),e=Dn([Jr("title"),Jr("url"),If("height"),If("width"),Au("buttons",HY),fr("onAction",ce),fr("onCancel",ce),fr("onClose",ce),fr("onMessage",ce)]),n=t=>ar("dialog",e,t),o=t=>ue(t)?[t].concat(xe(Vc(t),o)):be(t)?xe(t,o):[],r=t=>j(t.type)&&j(t.name),i={checkbox:Uq,colorinput:Vb,colorpicker:G$,dropzone:J$,input:eG,iframe:Xq,imagepreview:Qq,selectbox:tk,sizeinput:XR,slider:sk,listbox:zb,size:XR,textarea:u1,urlinput:Oy,customeditor:qq,collection:ES,togglemenuitem:Pq},u=t=>M.from(i[t.type]),m=t=>uo(o(t),r),y=t=>{const s=m(t),a=xe(s,c=>u(c).fold(()=>[],d=>[Fo(c.name,d)]));return Dn(a)},S=t=>{var s;const a=pt(yG(t)),c=y(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},O={open:(t,s)=>{const a=S(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=pt(n(s));return t(a)},redial:t=>S(t)};var F=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(h=>{const b=h(c,d);s.set(b)}),t.renderComponents.each(h=>{const b=h(d,s.get());(t.reuseDom?B0:P0)(c,b)})};return Fs([it(Xl(),(c,d)=>{const h=d;if(!h.universal){const b=t.channel;eo(h.channels,b)&&a(c,h.data)}}),Gs((c,d)=>{t.initialData.each(h=>{a(c,h)})})])}}),Q=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),re=[rt("channel"),Bo("renderComponents"),Bo("updateState"),Bo("initialData"),Mr("reuseDom",!0)],le=Object.freeze({__proto__:null,init:()=>{const t=mn(M.none()),s=()=>t.set(M.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const we=li({fields:re,name:"reflecting",active:F,apis:Q,state:le}),De=t=>{const s=[],a={};return Cs(t,(c,d)=>{c.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?Yn.error(s):Yn.value(a)},Oe=(t,s,a,c)=>{const d=Jo(Xp.sketch(h=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:tt(t.items,b=>fU(h,b,s,a,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:xt([En.config({mode:"acyclic",useTabstopAt:$e(H2)}),hf.memento(d),ZV(d,{postprocess:h=>De(h).fold(b=>(console.error(b),{}),Kt)}),no("dialog-body-panel",[it(ld(),(h,b)=>{h.getSystem().broadcastOn([lT],{newFocus:M.some(b.event.target)})})])])}},He=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:XE(t.action),behaviours:ja(t.tabButtonBehaviours,[Fn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0}),Xt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),ft=il({name:"TabButton",configFields:[Be("uid",void 0),rt("value"),ia("dom","dom",Em(()=>({attributes:{role:"tab",id:tn("aria"),"aria-selected":"false"}})),bl()),Bo("action"),Be("domModification",{}),Za("tabButtonBehaviours",[Fn,En,Xt]),rt("view")],factory:He}),Rt=ne([rt("tabs"),rt("dom"),Be("clickToDismiss",!1),Za("tabbarBehaviours",[bn,En]),cg(["tabClass","selectedClass"])]),Yt=k0({factory:ft,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{bn.dehighlight(c,d),_n(c,jS(),{tabbar:c,button:d})},a=(c,d)=>{bn.highlight(c,d),_n(c,ZS(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),h=bn.isHighlighted(d,c);(h&&t.clickToDismiss?s:h?ce:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),Je=ne([Yt]),Ue=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ja(t.tabbarBehaviours,[bn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{qt(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{qt(h.element,"aria-selected","false")}}),En.config({mode:"flow",getInitial:d=>bn.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),ut=Ki({name:"Tabbar",configFields:Rt(),partFields:Je(),factory:Ue}),an=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:ja(t.tabviewBehaviours,[zn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),wn=il({name:"Tabview",configFields:[Za("tabviewBehaviours",[zn])],factory:an}),go=ne([Be("selectFirst",!0),ko("onChangeTab"),ko("onDismissTab"),Be("tabs",[]),Za("tabSectionBehaviours",[])]),wo=Ti({factory:ut,schema:[rt("dom"),cd("markers",[rt("tabClass"),rt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),ns=Ti({factory:wn,name:"tabview"}),ps=ne([wo,ns]),Lr=(t,s,a,c)=>{const d=b=>{const x=Xt.getValue(b);bt(b,t,"tabview").each(T=>{et(t.tabs,P=>P.value===x).each(P=>{const $=P.view();Dr(b.element,"id").each(G=>{qt(T.element,"aria-labelledby",G)}),zn.set(T,$),t.onChangeTab(T,b,$)})})},h=(b,x)=>{bt(b,t,"tabbar").each(T=>{x(T).each(Nm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Q1(t.tabSectionBehaviours),events:Fs(dt([t.selectFirst?[Gs((b,x)=>{h(b,bn.getFirst)})]:[],[it(ZS(),(b,x)=>{const T=x.event.button;d(T)}),it(jS(),(b,x)=>{const T=x.event.button;t.onDismissTab(b,T)})]])),apis:{getViewItems:b=>bt(b,t,"tabview").map(x=>zn.contents(x)).getOr([]),showTab:(b,x)=>{h(b,D=>{const P=bn.getCandidates(D);return et(P,G=>Xt.getValue(G)===x).filter(G=>!bn.isHighlighted(D,G))})}}}},Ea=Ki({name:"TabSection",configFields:go(),partFields:ps(),factory:Lr,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Ts=(t,s,a)=>tt(t,(c,d)=>{zn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return zn.set(a,[]),h.height}),Bt=t=>Is($r(t,(s,a)=>s>a?-1:s<a?1:0)),vn=(t,s,a)=>{const c=$l(t).dom,d=Km(t,".tox-dialog-wrap").getOr(t),h=rs(d,"position")==="fixed";let b;h?b=Math.max(c.clientHeight,window.innerHeight):b=Math.max(c.offsetHeight,c.scrollHeight);const x=xs(s),D=s.dom.offsetLeft>=a.dom.offsetLeft+La(a)?Math.max(xs(a),x):x,P=parseInt(rs(t,"margin-top"),10)||0,$=parseInt(rs(t,"margin-bottom"),10)||0,Y=xs(t)+P+$-D;return b-Y},$o=(t,s)=>{Is(t).each(a=>Ea.showTab(s,a.value))},zt=(t,s)=>{lt(t,"height",s+"px"),lt(t,"flex-basis",s+"px")},Tn=(t,s,a)=>{Km(t,'[role="dialog"]').each(c=>{tr(c,'[role="tablist"]').each(d=>{a.get().map(h=>(lt(s,"height","0"),lt(s,"flex-basis","0"),Math.min(h,vn(c,s,d)))).each(h=>{zt(s,h)})})})},mo=t=>tr(t,'[role="tabpanel"]'),Gt=t=>{const s=ts();return{extraEvents:[Gs(d=>{const h=d.element;mo(h).each(b=>{lt(b,"visibility","hidden"),d.getSystem().getByDom(b).toOptional().each(x=>{const T=Ts(t,b,x);Bt(T).fold(s.clear,s.set)}),Tn(h,b,s),Xn(b,"visibility"),$o(t,d),requestAnimationFrame(()=>{Tn(h,b,s)})})}),it(md(),d=>{const h=d.element;mo(h).each(b=>{Tn(h,b,s)})}),it(c4,(d,h)=>{const b=d.element;mo(b).each(x=>{const T=vd(vr(x));lt(x,"visibility","hidden");const D=Os(x,"height").map(G=>parseInt(G,10));Xn(x,"height"),Xn(x,"flex-basis");const P=x.dom.getBoundingClientRect().height;D.forall(G=>P>G)?(s.set(P),Tn(b,x,s)):D.each(G=>{zt(x,G)}),Xn(x,"visibility"),T.each(Sl)})})],selectFirst:!1}},ho="send-data-to-section",Co="send-data-to-view",Ya=(t,s,a,c)=>{const d=mn({}),h=P=>{const $=Xt.getValue(P),G=De($).getOr({}),Y=d.get(),se=Ds(Y,G);d.set(se)},b=P=>{const $=d.get();Xt.setValue(P,$)},x=mn(null),T=tt(t.tabs,P=>({value:P.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[hr(a.shared.providers.translate(P.title))],view:()=>[Xp.sketch($=>({dom:{tag:"div",classes:["tox-form"]},components:tt(P.items,G=>fU($,G,s,a,c)),formBehaviours:xt([En.config({mode:"acyclic",useTabstopAt:$e(H2)}),no("TabView.form.events",[Gs(b),Yd(h)]),Nc.config({channels:Yo([{key:ho,value:{onReceive:h}},{key:Co,value:{onReceive:b}}])})])}))]})),D=Gt(T);return Ea.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(P,$,G)=>{const Y=Xt.getValue($);_n(P,vI,{name:Y,oldName:x.get()}),x.set(Y)},tabs:T,components:[Ea.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[ut.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:xt([Vs.config({})])}),Ea.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:D.selectFirst,tabSectionBehaviours:xt([no("tabpanel",D.extraEvents),En.config({mode:"acyclic"}),Ro.config({find:P=>Is(Ea.getViewItems(P))}),Jp(M.none(),P=>(P.getSystem().broadcastOn([ho],{}),d.get()),(P,$)=>{d.set($),P.getSystem().broadcastOn([Co],{})})])})},is=(t,s,a,c,d,h)=>{const b=D=>{const P=D.body;switch(P.type){case"tabpanel":return[Ya(P,D.initialData,c,h)];default:return[Oe(P,D.initialData,c,h)]}},x=(D,P)=>M.some({isTabPanel:()=>P.body.type==="tabpanel"}),T={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(D=>({id:D})).getOr({}),...d?T:{}}},components:[],behaviours:xt([hf.childAt(0),we.config({channel:`${V4}-${s}`,updateState:x,renderComponents:b,initialData:t})])}},Pa=(t,s,a,c,d,h)=>is(t,s,M.some(a),c,d,h),Rd=(t,s,a,c)=>{const d=is(t,s,M.none(),a,!1,c);return Na.parts.body(d)},fm=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[lL(M.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:xt([Vs.config({}),Fn.config({})])})]}],behaviours:xt([En.config({mode:"acyclic",useTabstopAt:$e(H2)})])};return Na.parts.body(s)},Fc=db.deviceType.isTouch(),Pl=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Yu=(t,s)=>Na.parts.close(Vi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:xt([Vs.config({})])})),Bl=()=>Na.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Xu=(t,s)=>Na.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:nm(`<p>${YO(s.translate(t))}</p>`)}]}]}),Cn=t=>Na.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Oo=(t,s)=>[am.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),am.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],cr=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return Na.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),M.some(!0)),useTabstopAt:h=>!H2(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:nm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Fc?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:xt([Fn.config({}),no("dialog-events",t.dialogEvents.concat([op(ld(),(h,b)=>{bf.isBlocked(h)?ce():En.focusIn(h)}),it(Jh(),(h,b)=>{h.getSystem().broadcastOn([lT],{newFocus:b.event.newFocus})})])),no("scroll-lock",[Gs(()=>{$s(io(),d)}),Yd(()=>{mr(io(),d)})]),...t.extraBehaviours]),eventOrder:{[Jl()]:["dialog-events"],[sc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Ql()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Fr=t=>Vi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:xt([Vs.config({}),Ir.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Vu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{ao(s,Bg)}}),ua=(t,s,a,c)=>{const d=h=>[hr(c.translate(h.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:xt([we.config({channel:`${dL}-${s}`,initialData:t,renderComponents:d})])}},mi=()=>({dom:nm('<div class="tox-dialog__draghandle"></div>')}),da=(t,s,a,c)=>am.sketch({dom:nm('<div class="tox-dialog__header"></div>'),components:[ua(t,s,M.some(a),c),mi(),Fr(c)],containerBehaviours:xt([Fb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Nu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),fa=(t,s,a)=>{const c=Na.parts.title(ua(t,s,M.none(),a)),d=Na.parts.draghandle(mi()),h=Na.parts.close(Fr(a)),b=[c].concat(t.draggable?[d]:[]).concat([h]);return am.sketch({dom:nm('<div class="tox-dialog__header"></div>'),components:b})},pc=(t,s,a)=>fa({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),Md=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:nm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Nd=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=tr(t().element,".tox-dialog__header").map(h=>xs(h));Na.setBusy(t(),(h,b)=>Md(c.message,b,s,d))},onUnblock:()=>{Na.setIdle(t())}}),Pd="tox-dialog--fullscreen",lu="tox-dialog--width-lg",yh="tox-dialog--width-md",zg=t=>{switch(t){case"large":return M.some(lu);case"medium":return M.some(yh);default:return M.none()}},Ub=(t,s)=>{const a=_e.fromDom(s.element.dom);Jc(a,Pd)||(Qc(a,[lu,yh]),zg(t).each(c=>$s(a,c)))},rk=(t,s)=>{const a=_e.fromDom(t.element.dom),c=Ak(a),d=et(c,h=>h===lu||h===yh).or(zg(s));_k(a,[Pd,...d.toArray()])},wh=(t,s,a)=>$i(cr({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[aT({}),...t.extraBehaviours],onEscape:c=>{ao(c,Bg)},dialogEvents:s,eventOrder:{[Xl()]:[we.name(),Nc.name()],[sc()]:["scroll-lock",we.name(),"messages","dialog-events","alloy.base.behaviour"],[Ql()]:["alloy.base.behaviour","dialog-events","messages",we.name(),"scroll-lock"]}})),Dy=(t,s={})=>{const a=c=>{const d=tt(c.items,h=>{const b=At(s,h.name).getOr(mn(!1));return{...h,storage:b}});return{...c,items:d}};return tt(t,c=>c.type==="menu"?a(c):c)},eM=t=>Ho(t,(s,a)=>a.type==="menu"?Ho(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),Yi=(t,s)=>[Xy(ld(),QV),t(ny,(a,c,d,h)=>{vd(vr(h.element)).fold(ce,Bv),s.onClose(),c.onClose()}),t(Bg,(a,c,d,h)=>{c.onCancel(a),ao(h,ny)}),it(i4,(a,c)=>s.onUnblock()),it(a4,(a,c)=>s.onBlock(c.event))],Wb=(t,s)=>{const a=(d,h)=>it(d,(b,x)=>{c(b,(T,D)=>{h(t(),T,x.event,b)})}),c=(d,h)=>{we.getState(d).get().each(b=>{h(b,d)})};return[...Yi(a,s),a(mh,(d,h,b)=>{h.onAction(d,{name:b.name})})]},tM=(t,s,a)=>{const c=(h,b)=>it(h,(x,T)=>{d(x,(D,P)=>{b(t(),D,T.event,x)})}),d=(h,b)=>{we.getState(h).get().each(x=>{b(x.internalDialog,h)})};return[...Yi(c,s),c(k2,(h,b)=>b.onSubmit(h)),c(Rl,(h,b,x)=>{b.onChange(h,{name:x.name})}),c(mh,(h,b,x,T)=>{const D=()=>T.getSystem().isConnected()?En.focusIn(T):void 0,P=Y=>wc(Y,"disabled")||Dr(Y,"aria-disabled").exists(se=>se==="true"),$=vr(T.element),G=vd($);b.onAction(h,{name:x.name,value:x.value}),vd($).fold(D,Y=>{P(Y)||G.exists(se=>Oa(Y,se)&&P(se))?D():a().toOptional().filter(se=>!Oa(se.element,Y)).each(D)})}),c(vI,(h,b,x)=>{b.onTabChange(h,{newTabName:x.name,oldTabName:x.oldName})}),Yd(h=>{const b=t();Xt.setValue(h,b.getData())})]},nM=(t,s)=>Q2(t,t.type,s),Ch=(t,s,a)=>et(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),kS=(t,s)=>{const a=s.map(x=>x.footerButtons).getOr([]),c=ta(a,x=>x.align==="start"),d=(x,T)=>am.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${x}`]},components:tt(T,D=>D.memento.asSpec())}),h=d("start",c.pass),b=d("end",c.fail);return[h,b]},ze=(t,s,a)=>{const c=(d,h)=>{const b=tt(h.buttons,T=>{const D=Jo(nM(T,a));return{name:T.name,align:T.align,memento:D}}),x=T=>Ch(d,b,T);return M.some({lookupByName:x,footerButtons:b})};return{dom:nm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:xt([we.config({channel:`${fL}-${s}`,initialData:t,updateState:c,renderComponents:kS})])}},We=(t,s,a)=>ze(t,s,a),Pt=(t,s,a)=>Na.parts.footer(ze(t,s,a)),_t=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Ro.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Xp.getField(c,s).orThunk(()=>t.getFooter().bind(b=>we.getState(b).get()).bind(b=>b.lookupByName(s)))}else return M.none()},In=(t,s)=>{const a=t.getRoot();return we.getState(a).get().map(c=>pt(ar("data",c.dataValidator,s))).getOr(s)},Eo=(t,s,a)=>{const c=se=>{const ie=t.getRoot();ie.getSystem().isConnected()&&se(ie)},Y={getData:()=>{const se=t.getRoot(),ie=se.getSystem().isConnected()?t.getFormWrapper():se,Ne=Xt.getValue(ie),he=Vo(a,ke=>ke.get());return{...Ne,...he}},setData:se=>{c(ie=>{const Ne=Y.getData(),he=Ds(Ne,se),ke=In(t,he),Ae=t.getFormWrapper();Xt.setValue(Ae,ke),Cs(a,(st,Ke)=>{po(he,Ke)&&st.set(he[Ke])})})},setEnabled:(se,ie)=>{_t(t,se).each(ie?l.enable:l.disable)},focus:se=>{_t(t,se).each(Fn.focus)},block:se=>{if(!j(se))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(ie=>{_n(ie,a4,{message:se})})},unblock:()=>{c(se=>{ao(se,i4)})},showTab:se=>{c(ie=>{const Ne=t.getBody();we.getState(Ne).get().exists(ke=>ke.isTabPanel())&&Ro.getCurrent(Ne).each(ke=>{Ea.showTab(ke,se)})})},redial:se=>{c(ie=>{const Ne=t.getId(),he=s(se),ke=Dy(he.internalDialog.buttons,a);ie.getSystem().broadcastOn([`${V2}-${Ne}`],he),ie.getSystem().broadcastOn([`${dL}-${Ne}`],he.internalDialog),ie.getSystem().broadcastOn([`${V4}-${Ne}`],he.internalDialog),ie.getSystem().broadcastOn([`${fL}-${Ne}`],{...he.internalDialog,buttons:ke}),Y.setData(he.initialData)})},close:()=>{c(se=>{ao(se,ny)})},toggleFullscreen:t.toggleFullscreen};return Y},gr=(t,s,a)=>{const c=tn("dialog"),d=t.internalDialog,h=pc(d.title,c,a),b=mn(d.size),x=Ae=>_t(he,Ae),T=zg(b.get()).toArray(),D=(Ae,st)=>(b.set(st.internalDialog.size),Ub(st.internalDialog.size,Ae),M.some(st)),P=Rd({body:d.body,initialData:d.initialData},c,a,x),$=Dy(d.buttons),G=eM($),Y=Sn($.length!==0,Pt({buttons:$},c,a)),se=tM(()=>ke,Nd(()=>Ne,a.shared.providers,s),a.shared.getSink),ie={id:c,header:h,body:P,footer:Y,extraClasses:T,extraBehaviours:[we.config({channel:`${V2}-${c}`,updateState:D,initialData:t})],extraStyles:{}},Ne=wh(ie,se,a),he=(()=>{const Ae=()=>{const Ke=Na.getBody(Ne);return Ro.getCurrent(Ke).getOr(Ke)},st=()=>{rk(Ne,b.get())};return{getId:ne(c),getRoot:ne(Ne),getBody:()=>Na.getBody(Ne),getFooter:()=>Na.getFooter(Ne),getFormWrapper:Ae,toggleFullscreen:st}})(),ke=Eo(he,s.redial,G);return{dialog:Ne,instanceApi:ke}},Bd=(t,s,a,c=!1,d)=>{const h=tn("dialog"),b=tn("dialog-label"),x=tn("dialog-content"),T=t.internalDialog,D=ln=>_t(Jt,ln),P=mn(T.size),$=zg(P.get()).toArray(),G=(ln,It)=>(P.set(It.internalDialog.size),Ub(It.internalDialog.size,ln),d(),M.some(It)),Y=Jo(da({title:T.title,draggable:!0},h,b,a.shared.providers)),se=Jo(Pa({body:T.body,initialData:T.initialData},h,x,a,c,D)),ie=Dy(T.buttons),Ne=eM(ie),he=Sn(ie.length!==0,Jo(We({buttons:ie},h,a))),ke=tM(()=>Qe,{onBlock:ln=>{bf.block(Ke,(It,fn)=>{const bo=Y.getOpt(Ke).map(Us=>xs(Us.element));return Md(ln.message,fn,a.shared.providers,bo)})},onUnblock:()=>{bf.unblock(Ke)},onClose:()=>s.closeWindow()},a.shared.getSink),Ae="tox-dialog-inline",st=ro().os,Ke=$i({dom:{tag:"div",classes:["tox-dialog",Ae,...$],attributes:{role:"dialog",...st.isMacOS()?{"aria-label":T.title}:{"aria-labelledby":b}}},eventOrder:{[Xl()]:[we.name(),Nc.name()],[Jl()]:["execute-on-form"],[sc()]:["reflecting","execute-on-form"]},behaviours:xt([En.config({mode:"cyclic",onEscape:ln=>(ao(ln,ny),M.some(!0)),useTabstopAt:ln=>!H2(ln)&&(oa(ln)!=="button"||pn(ln,"disabled")!=="disabled"),firstTabstop:1}),we.config({channel:`${V2}-${h}`,updateState:G,initialData:t}),Fn.config({}),no("execute-on-form",ke.concat([op(ld(),(ln,It)=>{En.focusIn(ln)}),it(Jh(),(ln,It)=>{ln.getSystem().broadcastOn([lT],{newFocus:It.event.newFocus})})])),bf.config({getRoot:()=>M.some(Ke)}),zn.config({}),aT({})]),components:[Y.asSpec(),se.asSpec(),...he.map(ln=>ln.asSpec()).toArray()]}),Ft=()=>{rk(Ke,P.get())},Jt={getId:ne(h),getRoot:ne(Ke),getFooter:()=>he.map(ln=>ln.get(Ke)),getBody:()=>se.get(Ke),getFormWrapper:()=>{const ln=se.get(Ke);return Ro.getCurrent(ln).getOr(ln)},toggleFullscreen:Ft},Qe=Eo(Jt,s.redial,Ne);return{dialog:Ke,instanceApi:Qe}};var Ry=tinymce.util.Tools.resolve("tinymce.util.URI");const wG=t=>{const s=b=>{t.getSystem().isConnected()&&b(t)};return{block:b=>{if(!j(b))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(x=>{_n(x,a4,{message:b})})},unblock:()=>{s(b=>{ao(b,i4)})},close:()=>{s(b=>{ao(b,ny)})},sendMessage:b=>{s(x=>{x.getSystem().broadcastOn([mL],b)})}}},ak=["insertContent","setContent","execCommand","close","block","unblock"],Sh=t=>ue(t)&&ak.indexOf(t.mceAction)!==-1,i6=t=>!Sh(t)&&ue(t)&&po(t,"mceAction"),c6=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=Ht(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},l6=(t,s,a,c)=>{const d=tn("dialog"),h=pc(t.title,d,c),b=fm(t),x=t.buttons.bind(Ae=>Ae.length===0?M.none():M.some(Pt({buttons:Ae},d,c))),T=Wb(()=>ke,Nd(()=>he,c.shared.providers,s)),D={...t.height.fold(()=>({}),Ae=>({height:Ae+"px","max-height":Ae+"px"})),...t.width.fold(()=>({}),Ae=>({width:Ae+"px","max-width":Ae+"px"}))},P=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],$=new Ry(t.url,{base_uri:new Ry(window.location.href)}),G=`${$.protocol}://${$.host}${$.port?":"+$.port:""}`,Y=pa(),se=(Ae,st)=>M.some(st),ie=[we.config({channel:`${V2}-${d}`,updateState:se,initialData:t}),no("messages",[Gs(()=>{const Ae=dc(_e.fromDom(window),"message",st=>{if($.isSameOrigin(new Ry(st.raw.origin))){const Ke=st.raw.data;Sh(Ke)?c6(a,ke,Ke):i6(Ke)&&t.onMessage(ke,Ke)}});Y.set(Ae)}),Yd(Y.clear)]),Nc.config({channels:{[mL]:{onReceive:(Ae,st)=>{tr(Ae.element,"iframe").each(Ke=>{const Ft=Ke.dom.contentWindow;vt(Ft)&&Ft.postMessage(st,G)})}}}})],he=wh({id:d,header:h,body:b,footer:x,extraClasses:P,extraBehaviours:ie,extraStyles:D},T,c),ke=wG(he);return{dialog:he,instanceApi:ke}},u6=t=>{const s=t.shared;return{open:(c,d)=>{const h=()=>{Na.hide(D),d()},b=Jo(Q2({name:"close-alert",text:"OK",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"cancel",t)),x=Bl(),T=Yu(h,s.providers),D=$i(cr({lazySink:()=>s.getSink(),header:Pl(x,T),body:Xu(c,s.providers),footer:M.some(Cn(Oo([],[b.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[it(Bg,h)],eventOrder:{}}));Na.show(D);const P=b.get(D);Fn.focus(P)}}},CG=t=>{const s=t.shared;return{open:(c,d)=>{const h=G=>{Na.hide(P),d(G)},b=Jo(Q2({name:"yes",text:"Yes",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"submit",t)),x=Q2({name:"no",text:"No",primary:!1,buttonType:M.some("secondary"),align:"end",enabled:!0,icon:M.none()},"cancel",t),T=Bl(),D=Yu(()=>h(!1),s.providers),P=$i(cr({lazySink:()=>s.getSink(),header:Pl(T,D),body:Xu(c,s.providers),footer:M.some(Cn(Oo([],[x,b.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[it(Bg,()=>h(!1)),it(k2,()=>h(!0))],eventOrder:{}}));Na.show(P);const $=b.get(P);Fn.focus($)}}},So=(t,s)=>pt(ar("data",s,t)),Ze=t=>C2(t,".tox-alert-dialog")||C2(t,".tox-confirm-dialog"),hn=(t,s,a)=>s&&a?[]:[Hs.config({contextual:{lazyContext:()=>M.some(Qs(_e.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>Rg(t,c.element).map(h=>({bounds:pb(h),optScrollEnv:M.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:ga(h.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:M.none()}))})],Vn=t=>{const s=t.editor,a=gb(s),c=u6(t.backstages.dialog),d=CG(t.backstages.dialog),h=(se,ie,Ne)=>{if(!Ut(ie)){if(ie.inline==="toolbar")return D(se,t.backstages.popup.shared.anchors.inlineDialog(),Ne,ie);if(ie.inline==="bottom")return P(se,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ne,ie);if(ie.inline==="cursor")return D(se,t.backstages.popup.shared.anchors.cursor(),Ne,ie)}return T(se,Ne)},b=(se,ie)=>x(se,ie),x=(se,ie)=>{const Ne=he=>{const ke=l6(he,{closeWindow:()=>{Na.hide(ke.dialog),ie(ke.instanceApi)}},s,t.backstages.dialog);return Na.show(ke.dialog),ke.instanceApi};return O.openUrl(Ne,se)},T=(se,ie)=>{const Ne=(he,ke,Ae)=>{const st=ke,Ft=gr({dataValidator:Ae,initialData:st,internalDialog:he},{redial:O.redial,closeWindow:()=>{Na.hide(Ft.dialog),ie(Ft.instanceApi)}},t.backstages.dialog);return Na.show(Ft.dialog),Ft.instanceApi.setData(st),Ft.instanceApi};return O.open(Ne,se)},D=(se,ie,Ne,he)=>{const ke=(Ae,st,Ke)=>{const Ft=So(st,Ke),Jt=ts(),Qe=t.backstages.popup.shared.header.isPositionedAtTop(),ln={dataValidator:Ke,initialData:Ft,internalDialog:Ae},It=()=>Jt.on(jo=>{nr.reposition(jo),(!a||!Qe)&&Hs.refresh(jo)}),fn=Bd(ln,{redial:O.redial,closeWindow:()=>{Jt.on(nr.hide),s.off("ResizeEditor",It),Jt.clear(),Ne(fn.instanceApi)}},t.backstages.popup,he.ariaAttrs,It),bo=$i(nr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:he.persistent?{event:"doNotDismissYet"}:{},...Qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([no("window-manager-inline-events",[it(Rm(),(jo,dn)=>{ao(fn.dialog,Bg)})]),...hn(s,a,Qe)]),isExtraPart:(jo,dn)=>Ze(dn)}));Jt.set(bo);const Us=()=>{const jo=s.inline?io():_e.fromDom(s.getContainer()),dn=Qs(jo);return M.some(dn)};return nr.showWithinBounds(bo,Cl(fn.dialog),{anchor:ie},Us),(!a||!Qe)&&(Hs.refresh(bo),s.on("ResizeEditor",It)),fn.instanceApi.setData(Ft),En.focusIn(fn.dialog),fn.instanceApi};return O.open(ke,se)},P=(se,ie,Ne,he)=>{const ke=(Ae,st,Ke)=>{const Ft=So(st,Ke),Jt=ts(),Qe=t.backstages.popup.shared.header.isPositionedAtTop(),ln={dataValidator:Ke,initialData:Ft,internalDialog:Ae},It=()=>Jt.on(jo=>{nr.reposition(jo),Hs.refresh(jo)}),fn=Bd(ln,{redial:O.redial,closeWindow:()=>{Jt.on(nr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",It),Jt.clear(),Ne(fn.instanceApi)}},t.backstages.popup,he.ariaAttrs,It),bo=$i(nr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:he.persistent?{event:"doNotDismissYet"}:{},...Qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:xt([no("window-manager-inline-events",[it(Rm(),(jo,dn)=>{ao(fn.dialog,Bg)})]),Hs.config({contextual:{lazyContext:()=>M.some(Qs(_e.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:jo=>Rg(s,jo.element).map(gt=>({bounds:pb(gt),optScrollEnv:M.some({currentScrollTop:gt.element.dom.scrollTop,scrollElmTop:ga(gt.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:M.none()}))})]),isExtraPart:(jo,dn)=>Ze(dn)}));Jt.set(bo);const Us=()=>t.backstages.popup.shared.getSink().toOptional().bind(jo=>{const dn=Rg(s,jo.element),gt=15,$t=dn.map(xn=>pb(xn)).getOr(Ur()),$n=Qs(_e.fromDom(s.getContentAreaContainer())),Mn=od($n,$t);return M.some(qs(Mn.x,Mn.y,Mn.width,Mn.height-gt))});return nr.showWithinBounds(bo,Cl(fn.dialog),{anchor:ie},Us),Hs.refresh(bo),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",It),fn.instanceApi.setData(Ft),En.focusIn(fn.dialog),fn.instanceApi};return O.open(ke,se)};return{open:h,openUrl:b,alert:(se,ie)=>{c.open(se,ie)},close:se=>{se.close()},confirm:(se,ie)=>{d.open(se,ie)}}},ea=t=>{JN(t),$H(t),Dj(t)};var $c=()=>{Su.add("silver",t=>{ea(t);let s=()=>Ur();const{dialogs:a,popups:c,renderUI:d}=Oq(t,{getPopupSinkBounds:()=>s()}),h=()=>{const D=d();return Rg(t,c.getMothership().element).each($=>{s=()=>pb($)}),D};O9.register(t,c.backstage.shared);const b=Vn({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),x=ts(),T=()=>H8(t,{backstage:c.backstage},c.getMothership(),x);return{renderUI:h,getWindowManagerImpl:ne(b),getNotificationManagerImpl:T}})};$c()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.ModelManager");const g=(l,f,v)=>{var C;return v(l,f.prototype)?!0:((C=l.constructor)===null||C===void 0?void 0:C.name)===f.name},w=l=>{const f=typeof l;return l===null?"null":f==="object"&&Array.isArray(l)?"array":f==="object"&&g(l,String,(v,C)=>C.isPrototypeOf(v))?"string":f},E=l=>f=>w(f)===l,N=l=>f=>typeof f===l,z=l=>f=>l===f,K=E("string"),j=E("object"),ue=E("array"),Se=z(null),be=N("boolean"),Ge=z(void 0),Ht=l=>l==null,Ut=l=>!Ht(l),Nt=N("function"),vt=N("number"),Ie=()=>{},on=(l,f)=>(...v)=>l(f.apply(null,v)),Et=(l,f)=>v=>l(f(v)),ce=l=>()=>l,qe=l=>l,On=(l,f)=>l===f;function jt(l,...f){return(...v)=>{const C=f.concat(v);return l.apply(null,C)}}const ne=l=>f=>!l(f),Kt=l=>()=>{throw new Error(l)},Pn=l=>l(),Qt=ce(!1),$e=ce(!0);class ve{constructor(f,v){this.tag=f,this.value=v}static some(f){return new ve(!0,f)}static none(){return ve.singletonNone}fold(f,v){return this.tag?v(this.value):f()}isSome(){return this.tag}isNone(){return!this.tag}map(f){return this.tag?ve.some(f(this.value)):ve.none()}bind(f){return this.tag?f(this.value):ve.none()}exists(f){return this.tag&&f(this.value)}forall(f){return!this.tag||f(this.value)}filter(f){return!this.tag||f(this.value)?this:ve.none()}getOr(f){return this.tag?this.value:f}or(f){return this.tag?this:f}getOrThunk(f){return this.tag?this.value:f()}orThunk(f){return this.tag?this:f()}getOrDie(f){if(this.tag)return this.value;throw new Error(f??"Called getOrDie on None")}static from(f){return Ut(f)?ve.some(f):ve.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(f){this.tag&&f(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ve.singletonNone=new ve(!1);const so=Array.prototype.slice,Me=Array.prototype.indexOf,Pe=Array.prototype.push,M=(l,f)=>Me.call(l,f),cn=(l,f)=>M(l,f)>-1,ct=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const A=l[v];if(f(A,v))return!0}return!1},Hn=(l,f)=>{const v=[];for(let C=0;C<l;C++)v.push(f(C));return v},rn=(l,f)=>{const v=l.length,C=new Array(v);for(let A=0;A<v;A++){const B=l[A];C[A]=f(B,A)}return C},nt=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const A=l[v];f(A,v)}},eo=(l,f)=>{for(let v=l.length-1;v>=0;v--){const C=l[v];f(C,v)}},ms=(l,f)=>{const v=[],C=[];for(let A=0,B=l.length;A<B;A++){const U=l[A];(f(U,A)?v:C).push(U)}return{pass:v,fail:C}},to=(l,f)=>{const v=[];for(let C=0,A=l.length;C<A;C++){const B=l[C];f(B,C)&&v.push(B)}return v},os=(l,f,v)=>(eo(l,(C,A)=>{v=f(v,C,A)}),v),tt=(l,f,v)=>(nt(l,(C,A)=>{v=f(v,C,A)}),v),wt=(l,f,v)=>{for(let C=0,A=l.length;C<A;C++){const B=l[C];if(f(B,C))return ve.some(B);if(v(B,C))break}return ve.none()},W=(l,f)=>wt(l,f,Qt),ta=(l,f)=>{for(let v=0,C=l.length;v<C;v++){const A=l[v];if(f(A,v))return ve.some(v)}return ve.none()},uo=l=>{const f=[];for(let v=0,C=l.length;v<C;++v){if(!ue(l[v]))throw new Error("Arr.flatten item "+v+" was not an array, input: "+l);Pe.apply(f,l[v])}return f},qo=(l,f)=>uo(rn(l,f)),Ho=(l,f)=>{for(let v=0,C=l.length;v<C;++v){const A=l[v];if(f(A,v)!==!0)return!1}return!0},Wi=l=>{const f=so.call(l,0);return f.reverse(),f},et=(l,f)=>{const v={};for(let C=0,A=l.length;C<A;C++){const B=l[C];v[String(B)]=f(B,C)}return v},kt=(l,f)=>{const v=so.call(l,0);return v.sort(f),v},dt=(l,f)=>f>=0&&f<l.length?ve.some(l[f]):ve.none(),xe=l=>dt(l,0),_o=l=>dt(l,l.length-1),To=(l,f)=>{for(let v=0;v<l.length;v++){const C=f(l[v],v);if(C.isSome())return C}return ve.none()},Zt=Object.keys,ss=Object.hasOwnProperty,Mo=(l,f)=>{const v=Zt(l);for(let C=0,A=v.length;C<A;C++){const B=v[C],U=l[B];f(U,B)}},$r=(l,f)=>Po(l,(v,C)=>({k:C,v:f(v,C)})),Po=(l,f)=>{const v={};return Mo(l,(C,A)=>{const B=f(C,A);v[B.k]=B.v}),v},Is=l=>(f,v)=>{l[v]=f},Xa=(l,f,v,C)=>{Mo(l,(A,B)=>{(f(A,B)?v:C)(A,B)})},ws=(l,f)=>{const v={};return Xa(l,f,Is(v),Ie),v},bs=(l,f)=>{const v=[];return Mo(l,(C,A)=>{v.push(f(C,A))}),v},vs=l=>bs(l,qe),qr=(l,f)=>Cs(l,f)?ve.from(l[f]):ve.none(),Cs=(l,f)=>ss.call(l,f),Vo=(l,f)=>Cs(l,f)&&l[f]!==void 0&&l[f]!==null,vc=l=>{for(const f in l)if(ss.call(l,f))return!1;return!0},fo=typeof window<"u"?window:Function("return this;")(),cs=(l,f)=>{let v=f??fo;for(let C=0;C<l.length&&v!==void 0&&v!==null;++C)v=v[l[C]];return v},_r=(l,f)=>{const v=l.split(".");return cs(v,f)},Oi=(l,f)=>_r(l,f),Zi=(l,f)=>{const v=Oi(l,f);if(v==null)throw new Error(l+" not available on this browser");return v},Go=Object.getPrototypeOf,Vc=l=>Zi("HTMLElement",l),At=l=>{const f=_r("ownerDocument.defaultView",l);return j(l)&&(Vc(f).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Go(l).constructor.name))},po=8,Hr=9,Vr=11,Ba=1,Ja=3,Wo=l=>l.dom.nodeName.toLowerCase(),hi=l=>l.dom.nodeType,Di=l=>f=>hi(f)===l,zo=l=>hi(l)===po||Wo(l)==="#comment",Sn=l=>Ys(l)&&At(l.dom),Ys=Di(Ba),Qa=Di(Ja),ul=Di(Hr),dl=Di(Vr),hs=l=>f=>Ys(f)&&Wo(f)===l,pr=(l,f,v)=>{if(K(v)||be(v)||vt(v))l.setAttribute(f,v+"");else throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",v,":: Element ",l),new Error("Attribute value was not simple")},Zs=(l,f,v)=>{pr(l.dom,f,v)},Ta=(l,f)=>{const v=l.dom;Mo(f,(C,A)=>{pr(v,A,C)})},yc=(l,f)=>{Mo(f,(v,C)=>{v.fold(()=>{de(l,C)},A=>{pr(l.dom,C,A)})})},Tr=(l,f)=>{const v=l.dom.getAttribute(f);return v===null?void 0:v},ge=(l,f)=>ve.from(Tr(l,f)),de=(l,f)=>{l.dom.removeAttribute(f)},Ve=l=>tt(l.dom.attributes,(f,v)=>(f[v.name]=v.value,f),{}),Ye=(l,f)=>{const C=(f||document).createElement("div");if(C.innerHTML=l,!C.hasChildNodes()||C.childNodes.length>1){const A="HTML does not have a single root node";throw console.error(A,l),new Error(A)}return Wn(C.childNodes[0])},gn=(l,f)=>{const C=(f||document).createElement(l);return Wn(C)},Bn=(l,f)=>{const C=(f||document).createTextNode(l);return Wn(C)},Wn=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},_e={fromHtml:Ye,fromTag:gn,fromText:Bn,fromDom:Wn,fromPoint:(l,f,v)=>ve.from(l.dom.elementFromPoint(f,v)).map(Wn)},Zn=(l,f)=>{const v=l.dom;if(v.nodeType!==Ba)return!1;{const C=v;if(C.matches!==void 0)return C.matches(f);if(C.msMatchesSelector!==void 0)return C.msMatchesSelector(f);if(C.webkitMatchesSelector!==void 0)return C.webkitMatchesSelector(f);if(C.mozMatchesSelector!==void 0)return C.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}},Xs=l=>l.nodeType!==Ba&&l.nodeType!==Hr&&l.nodeType!==Vr||l.childElementCount===0,ur=(l,f)=>{const v=f===void 0?document:f.dom;return Xs(v)?[]:rn(v.querySelectorAll(l),_e.fromDom)},ka=(l,f)=>{const v=f===void 0?document:f.dom;return Xs(v)?ve.none():ve.from(v.querySelector(l)).map(_e.fromDom)},Zo=(l,f)=>l.dom===f.dom,zc=(l,f)=>{const v=l.dom,C=f.dom;return v===C?!1:v.contains(C)},Gr=Zn,Aa=l=>_e.fromDom(l.dom.ownerDocument),Ps=l=>ul(l)?l:Aa(l),Ko=l=>_e.fromDom(Ps(l).dom.documentElement),es=l=>_e.fromDom(Ps(l).dom.defaultView),na=l=>ve.from(l.dom.parentNode).map(_e.fromDom),oa=l=>ve.from(l.dom.parentElement).map(_e.fromDom),kr=(l,f)=>{const v=Nt(f)?f:Qt;let C=l.dom;const A=[];for(;C.parentNode!==null&&C.parentNode!==void 0;){const B=C.parentNode,U=_e.fromDom(B);if(A.push(U),v(U)===!0)break;C=B}return A},Ji=l=>ve.from(l.dom.previousSibling).map(_e.fromDom),Ri=l=>ve.from(l.dom.nextSibling).map(_e.fromDom),xo=l=>rn(l.dom.childNodes,_e.fromDom),sa=(l,f)=>{const v=l.dom.childNodes;return ve.from(v[f]).map(_e.fromDom)},zr=l=>sa(l,0),Qi=(l,f)=>{na(l).each(C=>{C.dom.insertBefore(f.dom,l.dom)})},ei=(l,f)=>{Ri(l).fold(()=>{na(l).each(A=>{Ls(A,f)})},C=>{Qi(C,f)})},Ar=(l,f)=>{zr(l).fold(()=>{Ls(l,f)},C=>{l.dom.insertBefore(f.dom,C.dom)})},Ls=(l,f)=>{l.dom.appendChild(f.dom)},Sf=(l,f,v)=>{sa(l,v).fold(()=>{Ls(l,f)},C=>{Qi(C,f)})},ji=(l,f)=>{Qi(l,f),Ls(f,l)},Uo=(l,f)=>{nt(f,(v,C)=>{const A=C===0?l:f[C-1];ei(A,v)})},Oa=(l,f)=>{nt(f,v=>{Ls(l,v)})},ma=l=>{l.dom.textContent="",nt(xo(l),f=>{br(f)})},br=l=>{const f=l.dom;f.parentNode!==null&&f.parentNode.removeChild(f)},$l=l=>{const f=xo(l);f.length>0&&Uo(l,f),br(l)},Da=(l,f)=>_e.fromDom(l.dom.cloneNode(f)),Ia=l=>Da(l,!1),ec=l=>Da(l,!0),Mi=(l,f)=>{const v=_e.fromTag(f),C=Ve(l);return Ta(v,C),v},uu=(l,f)=>{const v=Mi(l,f),C=xo(ec(l));return Oa(v,C),v},fl=(l,f)=>{const v=Mi(l,f);ei(l,v);const C=xo(l);return Oa(v,C),br(l),v},Uc=["tfoot","thead","tbody","colgroup"],ti=l=>cn(Uc,l),Or=(l,f)=>({rows:l,columns:f}),du=(l,f)=>({row:l,column:f}),fu=(l,f,v)=>({element:l,rowspan:f,colspan:v}),mu=(l,f,v,C)=>({element:l,rowspan:f,colspan:v,isNew:C}),hu=(l,f,v,C,A,B)=>({element:l,rowspan:f,colspan:v,row:C,column:A,isLocked:B}),vr=(l,f,v)=>({element:l,cells:f,section:v}),gi=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),X=(l,f,v)=>({element:l,isNew:f,isLocked:v}),me=(l,f,v,C)=>({element:l,cells:f,section:v,isNew:C}),Re=(l,f,v,C)=>({startRow:l,startCol:f,finishRow:v,finishCol:C}),at=(l,f,v)=>({element:l,colspan:f,column:v}),St=(l,f)=>({element:l,columns:f}),en=l=>dl(l)&&Ut(l.dom.host),io=l=>_e.fromDom(l.dom.getRootNode()),ls=l=>{const f=io(l);return en(f)?ve.some(f):ve.none()},vo=l=>_e.fromDom(l.dom.host),qt=l=>{if(Ut(l.target)){const f=_e.fromDom(l.target);if(Ys(f)&&sr(f)&&l.composed&&l.composedPath){const v=l.composedPath();if(v)return xe(v)}}return ve.from(l.target)},sr=l=>Ut(l.dom.shadowRoot),pn=l=>{const f=Qa(l)?l.dom.parentNode:l.dom;if(f==null||f.ownerDocument===null)return!1;const v=f.ownerDocument;return ls(_e.fromDom(f)).fold(()=>v.body.contains(f),Et(pn,vo))},Dr=()=>wc(_e.fromDom(document)),wc=l=>{const f=l.dom.body;if(f==null)throw new Error("Body is not available yet");return _e.fromDom(f)},H=(l,f,v)=>to(kr(l,v),f),oe=(l,f)=>to(xo(l),f),ye=(l,f)=>{let v=[];return nt(xo(l),C=>{f(C)&&(v=v.concat([C])),v=v.concat(ye(C,f))}),v},Le=(l,f,v)=>H(l,C=>Zn(C,f),v),lt=(l,f)=>oe(l,v=>Zn(v,f)),Gn=(l,f)=>ur(f,l);var Ss=(l,f,v,C,A)=>l(v,C)?ve.some(v):Nt(A)&&A(v)?ve.none():f(v,C,A);const rs=(l,f,v)=>{let C=l.dom;const A=Nt(v)?v:Qt;for(;C.parentNode;){C=C.parentNode;const B=_e.fromDom(C);if(f(B))return ve.some(B);if(A(B))break}return ve.none()},yt=(l,f,v)=>Ss((A,B)=>B(A),rs,l,f,v),Os=(l,f)=>{const v=A=>f(_e.fromDom(A));return W(l.dom.childNodes,v).map(_e.fromDom)},ha=(l,f)=>{const v=C=>{for(let A=0;A<C.childNodes.length;A++){const B=_e.fromDom(C.childNodes[A]);if(f(B))return ve.some(B);const U=v(C.childNodes[A]);if(U.isSome())return U}return ve.none()};return v(l.dom)},ni=(l,f,v)=>rs(l,C=>Zn(C,f),v),Xn=(l,f)=>Os(l,v=>Zn(v,f)),oi=(l,f)=>ka(f,l),lr=(l,f,v)=>Ss((A,B)=>Zn(A,B),ni,l,f,v),ed=(l,f,v=On)=>l.exists(C=>v(C,f)),xs=l=>{const f=[],v=C=>{f.push(C)};for(let C=0;C<l.length;C++)l[C].each(v);return f},ml=(l,f)=>l!=null?f(l):ve.none(),bm=(l,f)=>l?ve.some(f):ve.none(),m1=(l,f)=>l.substring(f),Js=(l,f,v)=>f===""||l.length>=f.length&&l.substr(v,v+f.length)===f,vm=(l,f)=>ga(l,f)?m1(l,f.length):l,yr=(l,f,v=0,C)=>{const A=l.indexOf(f,v);return A!==-1?Ge(C)?!0:A+f.length<=C:!1},ga=(l,f)=>Js(l,f,0),Wc=(l,f)=>Js(l,f,l.length-f.length),Ld=(l=>f=>f.replace(l,""))(/^\s+|\s+$/g),La=l=>l.length>0,yo=l=>{const f=parseFloat(l);return isNaN(f)?ve.none():ve.some(f)},hl=l=>l.style!==void 0&&Nt(l.style.getPropertyValue),Sc=(l,f,v)=>{if(!K(v))throw console.error("Invalid call to CSS.set. Property ",f,":: Value ",v,":: Element ",l),new Error("CSS value must be a string: "+v);hl(l)&&l.style.setProperty(f,v)},h1=(l,f)=>{hl(l)&&l.style.removeProperty(f)},Kr=(l,f,v)=>{const C=l.dom;Sc(C,f,v)},Fa=(l,f)=>{const v=l.dom;Mo(f,(C,A)=>{Sc(v,A,C)})},Yr=(l,f)=>{const v=l.dom,A=window.getComputedStyle(v).getPropertyValue(f);return A===""&&!pn(l)?Dh(v,f):A},Dh=(l,f)=>hl(l)?l.style.getPropertyValue(f):"",xf=(l,f)=>{const v=l.dom,C=Dh(v,f);return ve.from(C).filter(A=>A.length>0)},si=(l,f)=>{const v=l.dom;h1(v,f),ed(ge(l,"style").map(Ld),"")&&de(l,"style")},Rh=(l,f)=>{const v=l.dom,C=f.dom;hl(v)&&hl(C)&&(C.style.cssText=v.style.cssText)},js=(l,f,v=0)=>ge(l,f).map(C=>parseInt(C,10)).getOr(v),Zc=(l,f)=>js(l,f,1),ri=l=>hs("col")(l)?js(l,"span",1)>1:Zc(l,"colspan")>1,wr=l=>Zc(l,"rowspan")>1,pi=(l,f)=>parseInt(Yr(l,f),10),Cr=ce(10),Mh=ce(10),gu=(l,f)=>pu(l,f,$e),pu=(l,f,v)=>qo(xo(l),C=>Zn(C,f)?v(C)?[C]:[]:pu(C,f,v)),Ef=(l,f,v=Qt)=>{if(v(f))return ve.none();if(cn(l,Wo(f)))return ve.some(f);const C=A=>Zn(A,"table")||v(A);return ni(f,l.join(","),C)},bu=(l,f)=>Ef(["td","th"],l,f),xc=l=>gu(l,"th,td"),_f=l=>Zn(l,"colgroup")?lt(l,"col"):qo(Nh(l),f=>lt(f,"col")),Sr=(l,f)=>lr(l,"table",f),Tf=l=>gu(l,"tr"),Nh=l=>Sr(l).fold(ce([]),f=>lt(f,"colgroup")),gl=(l,f)=>rn(l,v=>{if(Wo(v)==="colgroup"){const C=rn(_f(v),A=>{const B=js(A,"span",1);return fu(A,1,B)});return vr(v,C,"colgroup")}else{const C=rn(xc(v),A=>{const B=js(A,"rowspan",1),U=js(A,"colspan",1);return fu(A,B,U)});return vr(v,C,f(v))}}),Ph=l=>na(l).map(f=>{const v=Wo(f);return ti(v)?v:"tbody"}).getOr("tbody"),vu=l=>{const f=Tf(l),C=[...Nh(l),...f];return gl(C,Ph)},Bh=(l,f)=>gl(l,()=>f),Hl=l=>{let f=!1,v;return(...C)=>(f||(f=!0,v=l.apply(null,C)),v)},Ih=(l,f,v,C)=>{const A=l.isiOS()&&/ipad/i.test(v)===!0,B=l.isiOS()&&!A,U=l.isiOS()||l.isAndroid(),J=U||C("(pointer:coarse)"),ae=A||!B&&U&&C("(min-device-width:768px)"),Ce=B||U&&!ae,Fe=f.isSafari()&&l.isiOS()&&/safari/i.test(v)===!1,Ct=!Ce&&!ae&&!Fe;return{isiPad:ce(A),isiPhone:ce(B),isTablet:ce(ae),isPhone:ce(Ce),isTouch:ce(J),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ce(Fe),isDesktop:ce(Ct)}},kf=(l,f)=>{for(let v=0;v<l.length;v++){const C=l[v];if(C.test(f))return C}},ym=(l,f)=>{const v=kf(l,f);if(!v)return{major:0,minor:0};const C=A=>Number(f.replace(v,"$"+A));return pe(C(1),C(2))},yu=(l,f)=>{const v=String(f).toLowerCase();return l.length===0?wm():ym(l,v)},wm=()=>pe(0,0),pe=(l,f)=>({major:l,minor:f}),Vl={nu:pe,detect:yu,unknown:wm},pl=(l,f)=>To(f.brands,v=>{const C=v.brand.toLowerCase();return W(l,A=>{var B;return C===((B=A.brand)===null||B===void 0?void 0:B.toLowerCase())}).map(A=>({current:A.name,version:Vl.nu(parseInt(v.version,10),0)}))}),Lh=(l,f)=>{const v=String(f).toLowerCase();return W(l,C=>C.search(v))},g1=(l,f)=>Lh(l,f).map(v=>{const C=Vl.detect(v.versionRegexes,f);return{current:v.name,version:C}}),wu=(l,f)=>Lh(l,f).map(v=>{const C=Vl.detect(v.versionRegexes,f);return{current:v.name,version:C}}),ro=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rr=l=>f=>yr(f,l),Ec=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>yr(l,"edge/")&&yr(l,"chrome")&&yr(l,"safari")&&yr(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ro],search:l=>yr(l,"chrome")&&!yr(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>yr(l,"msie")||yr(l,"trident")},{name:"Opera",versionRegexes:[ro,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rr("firefox")},{name:"Safari",versionRegexes:[ro,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(yr(l,"safari")||yr(l,"mobile/"))&&yr(l,"applewebkit")}],Cu=[{name:"Windows",search:Rr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>yr(l,"iphone")||yr(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rr("linux"),versionRegexes:[]},{name:"Solaris",search:Rr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Af={browsers:ce(Ec),oses:ce(Cu)},Fd="Edge",$a="Chromium",Of="IE",zl="Opera",Df="Firefox",Ul="Safari",bi=()=>Fh({current:void 0,version:Vl.unknown()}),Fh=l=>{const f=l.current,v=l.version,C=A=>()=>f===A;return{current:f,version:v,isEdge:C(Fd),isChromium:C($a),isIE:C(Of),isOpera:C(zl),isFirefox:C(Df),isSafari:C(Ul)}},$d={unknown:bi,nu:Fh,edge:ce(Fd),chromium:ce($a),ie:ce(Of),opera:ce(zl),firefox:ce(Df),safari:ce(Ul)},ra="Windows",Ni="iOS",ai="Android",td="Linux",Hd="macOS",$h="Solaris",Vd="FreeBSD",jc="ChromeOS",Rf=()=>Wg({current:void 0,version:Vl.unknown()}),Wg=l=>{const f=l.current,v=l.version,C=A=>()=>f===A;return{current:f,version:v,isWindows:C(ra),isiOS:C(Ni),isAndroid:C(ai),isMacOS:C(Hd),isLinux:C(td),isSolaris:C($h),isFreeBSD:C(Vd),isChromeOS:C(jc)}},Hh={unknown:Rf,nu:Wg,windows:ce(ra),ios:ce(Ni),android:ce(ai),linux:ce(td),macos:ce(Hd),solaris:ce($h),freebsd:ce(Vd),chromeos:ce(jc)},Cm={detect:(l,f,v)=>{const C=Af.browsers(),A=Af.oses(),B=f.bind(ae=>pl(C,ae)).orThunk(()=>g1(C,l)).fold($d.unknown,$d.nu),U=wu(A,l).fold(Hh.unknown,Hh.nu),J=Ih(U,B,l,v);return{browser:B,os:U,deviceType:J}}},zd=l=>window.matchMedia(l).matches;let nd=Hl(()=>Cm.detect(window.navigator.userAgent,ve.from(window.navigator.userAgentData),zd));const Ud=()=>nd(),qs=(l,f)=>{const v=(J,ae)=>{if(!vt(ae)&&!ae.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ae);const Ce=J.dom;hl(Ce)&&(Ce.style[l]=ae+"px")},C=J=>{const ae=f(J);if(ae<=0||ae===null){const Ce=Yr(J,l);return parseFloat(Ce)||0}return ae},A=C,B=(J,ae)=>tt(ae,(Ce,Fe)=>{const Ct=Yr(J,Fe),Vt=Ct===void 0?0:parseInt(Ct,10);return isNaN(Vt)?Ce:Ce+Vt},0);return{set:v,get:C,getOuter:A,aggregate:B,max:(J,ae,Ce)=>{const Fe=B(J,Ce);return ae>Fe?ae-Fe:0}}},Qs=(l,f)=>yo(l).getOr(f),tc=(l,f,v)=>Qs(Yr(l,f),v),od=(l,f,v,C)=>{const A=tc(l,`padding-${v}`,0),B=tc(l,`padding-${C}`,0),U=tc(l,`border-${v}-width`,0),J=tc(l,`border-${C}-width`,0);return f-A-B-U-J},Vh=(l,f)=>{const v=l.dom,C=v.getBoundingClientRect().width||v.offsetWidth;return f==="border-box"?C:od(l,C,"left","right")},Ur=l=>tc(l,"height",l.dom.offsetHeight),mn=l=>tc(l,"width",l.dom.offsetWidth),Wl=l=>Vh(l,"content-box"),Sm=qs("width",l=>l.dom.offsetWidth),pa=l=>Sm.get(l),ts=l=>Sm.getOuter(l),Su=Wl,zh=mn,Wd=(l,f,v)=>{const C=l.cells,A=C.slice(0,f),B=C.slice(f),U=A.concat(v).concat(B);return Wr(l,U)},Zg=(l,f,v)=>Wd(l,f,[v]),Yn=(l,f,v)=>{const C=l.cells;C[f]=v},Wr=(l,f)=>me(l.element,f,l.section,l.isNew),sd=(l,f)=>{const v=l.cells,C=rn(v,f);return me(l.element,C,l.section,l.isNew)},Ra=(l,f)=>l.cells[f],vi=(l,f)=>Ra(l,f).element,nc=l=>l.cells.length,aa=l=>{const f=ms(l,v=>v.section==="colgroup");return{rows:f.fail,cols:f.pass}},ii=(l,f,v)=>{const C=rn(l.cells,v);return me(f(l.element),C,l.section,!0)},qi="data-snooker-locked-cols",xm=l=>ge(l,qi).bind(f=>ve.from(f.match(/\d+/g))).map(f=>et(f,$e)),rr=l=>{const f=tt(aa(l).rows,(C,A)=>(nt(A.cells,(B,U)=>{B.isLocked&&(C[U]=!0)}),C),{}),v=bs(f,(C,A)=>parseInt(A,10));return kt(v)},rd=(l,f)=>l+","+f,dr=(l,f,v)=>ve.from(l.access[rd(f,v)]),xu=(l,f,v)=>{const C=ad(l,A=>v(f,A.element));return C.length>0?ve.some(C[0]):ve.none()},ad=(l,f)=>{const v=qo(l.all,C=>C.cells);return to(v,f)},gs=l=>{const f={};let v=0;return nt(l.cells,C=>{const A=C.colspan;Hn(A,B=>{const U=v+B;f[U]=at(C.element,A,U)}),v+=A}),f},_c=l=>{const f={},v=[],A=xe(l).map(Lt=>Lt.element).bind(Sr).bind(xm).getOr({});let B=0,U=0,J=0;const{pass:ae,fail:Ce}=ms(l,Lt=>Lt.section==="colgroup");nt(Ce,Lt=>{const Mt=[];nt(Lt.cells,un=>{let ht=0;for(;f[rd(J,ht)]!==void 0;)ht++;const Tt=Vo(A,ht.toString()),Nn=hu(un.element,un.rowspan,un.colspan,J,ht,Tt);for(let Ln=0;Ln<un.colspan;Ln++)for(let bn=0;bn<un.rowspan;bn++){const ir=J+bn,ds=ht+Ln,Br=rd(ir,ds);f[Br]=Nn,U=Math.max(U,ds+1)}Mt.push(Nn)}),B++,v.push(vr(Lt.element,Mt,Lt.section)),J++});const{columns:Fe,colgroups:Ct}=_o(ae).map(Lt=>{const Mt=gs(Lt);return{colgroups:[St(Lt.element,vs(Mt))],columns:Mt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Or(B,U),access:f,all:v,columns:Fe,colgroups:Ct}},co={fromTable:l=>{const f=vu(l);return _c(f)},generate:_c,getAt:dr,findItem:xu,filterItems:ad,justCells:l=>qo(l.all,f=>f.cells),justColumns:l=>vs(l.columns),hasColumns:l=>Zt(l.columns).length>0,getColumnAt:(l,f)=>ve.from(l.columns[f])},id=(l,f=$e)=>{const v=l.grid,C=Hn(v.columns,qe),A=Hn(v.rows,qe);return rn(C,B=>Mf(()=>qo(A,Ce=>co.getAt(l,Ce,B).filter(Fe=>Fe.column===B).toArray()),Ce=>Ce.colspan===1&&f(Ce.element),()=>co.getAt(l,0,B)))},Mf=(l,f,v)=>{const C=l();return W(C,f).orThunk(()=>ve.from(C[0]).orThunk(v)).map(U=>U.element)},Em=l=>{const f=l.grid,v=Hn(f.rows,qe),C=Hn(f.columns,qe);return rn(v,A=>Mf(()=>qo(C,ae=>co.getAt(l,A,ae).filter(Ce=>Ce.row===A).fold(ce([]),Ce=>[Ce])),ae=>ae.rowspan===1,()=>co.getAt(l,A,0)))},k=(l,f)=>{if(f<0||f>=l.length-1)return ve.none();const v=l[f].fold(()=>{const A=Wi(l.slice(0,f));return To(A,(B,U)=>B.map(J=>({value:J,delta:U+1})))},A=>ve.some({value:A,delta:0})),C=l[f+1].fold(()=>{const A=l.slice(f+1);return To(A,(B,U)=>B.map(J=>({value:J,delta:U+1})))},A=>ve.some({value:A,delta:1}));return v.bind(A=>C.map(B=>{const U=B.delta+A.delta;return Math.abs(B.value-A.value)/U}))},I=(l,f)=>v=>q(v)==="rtl"?f:l,q=l=>Yr(l,"direction")==="rtl"?"rtl":"ltr",fe=qs("height",l=>{const f=l.dom;return pn(l)?f.getBoundingClientRect().height:f.offsetHeight}),Ee=l=>fe.get(l),mt=l=>fe.getOuter(l),kn=Ur,Jn=(l,f)=>({left:l,top:f,translate:(C,A)=>Jn(l+C,f+A)}),Rn=Jn,An=l=>{const f=l.getBoundingClientRect();return Rn(f.left,f.top)},Rs=(l,f)=>l!==void 0?l:f!==void 0?f:0,xr=l=>{const f=l.dom.ownerDocument,v=f.body,C=f.defaultView,A=f.documentElement;if(v===l.dom)return Rn(v.offsetLeft,v.offsetTop);const B=Rs(C==null?void 0:C.pageYOffset,A.scrollTop),U=Rs(C==null?void 0:C.pageXOffset,A.scrollLeft),J=Rs(A.clientTop,v.clientTop),ae=Rs(A.clientLeft,v.clientLeft);return oc(l).translate(U-ae,B-J)},oc=l=>{const f=l.dom,C=f.ownerDocument.body;return C===f?Rn(C.offsetLeft,C.offsetTop):pn(l)?An(f):Rn(0,0)},jl=(l,f)=>({row:l,y:f}),Nf=(l,f)=>({col:l,x:f}),Uh=l=>xr(l).left+ts(l),ci=l=>xr(l).left,Wh=(l,f)=>Nf(l,ci(f)),Jb=(l,f)=>Nf(l,Uh(f)),qg=l=>xr(l).top,Ha=(l,f)=>jl(l,qg(f)),Gg=(l,f)=>jl(l,qg(f)+mt(f)),Xr=(l,f,v)=>{if(v.length===0)return[];const C=rn(v.slice(1),(B,U)=>B.map(J=>l(U,J))),A=v[v.length-1].map(B=>f(v.length-1,B));return C.concat([A])},Qb=l=>-l,Bi={delta:qe,positions:l=>Xr(Ha,Gg,l),edge:qg},_m=I({delta:qe,edge:ci,positions:l=>Xr(Wh,Jb,l)},{delta:Qb,edge:Uh,positions:l=>Xr(Jb,Wh,l)}),Zh={delta:(l,f)=>_m(f).delta(l,f),positions:(l,f)=>_m(f).positions(l,f),edge:l=>_m(l).edge(l)},Kg={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},p1=(()=>{const l="[0-9]+",v="[eE]"+("[+-]?"+l),C="\\.",A=J=>`(?:${J})?`,U=`[+-]?(?:${["Infinity",l+C+A(l)+A(v),C+l+A(v),l+A(v)].join("|")})`;return new RegExp(`^(${U})(.*)$`)})(),bl=(l,f)=>ct(f,v=>ct(Kg[v],C=>l===C)),_u=(l,f)=>ve.from(p1.exec(l)).bind(C=>{const A=Number(C[1]),B=C[2];return bl(B,f)?ve.some({value:A,unit:B}):ve.none()}),Zd=/(\d+(\.\d+)?)%/,Wt=/(\d+(\.\d+)?)px|em/,qc=hs("col"),Yg=hs("tr"),Pf=(l,f,v)=>{const C=oa(l).getOrThunk(()=>wc(Aa(l)));return f(l)/v(C)*100},vl=(l,f)=>{Kr(l,"width",f+"px")},jh=(l,f)=>{Kr(l,"width",f+"%")},jd=(l,f)=>{Kr(l,"height",f+"px")},Bf=l=>{si(l,"height")},qh=l=>kn(l)+"px",ql=(l,f,v,C)=>{const A=Sr(l).map(B=>{const U=v(B);return Math.floor(f/100*U)}).getOr(f);return C(l,A),A},ev=(l,f,v,C)=>{const A=parseFloat(l);return Wc(l,"%")&&Wo(f)!=="table"?ql(f,A,v,C):A},ar=l=>{const f=qh(l);return f?ev(f,l,Ee,jd):Ee(l)},pt=(l,f,v)=>{const C=v(l),A=Zc(l,f);return C/A},yi=(l,f)=>xf(l,f).orThunk(()=>ge(l,f).map(v=>v+"px")),Gl=l=>yi(l,"width"),ba=l=>yi(l,"height"),Tm=l=>Pf(l,pa,Su),ia=l=>qc(l)?pa(l):zh(l),Lo=l=>Yg(l)?Ee(l):pt(l,"rowspan",ar),Xg=l=>Gl(l).bind(v=>_u(v,["fixed","relative","empty"])),rt=(l,f,v)=>{Kr(l,"width",f+v)},Fo=l=>pa(l)+"px",Gh=l=>Ee(l)+"px",Jr=l=>Pf(l,pa,Su)+"%",wi=l=>Gl(l).exists(f=>Zd.test(f)),tv=l=>Gl(l).exists(f=>Wt.test(f)),kc=l=>Gl(l).isNone(),Vy=ce(Zd),cd=hs("col"),nv=l=>Gl(l).getOrThunk(()=>ia(l)+"px"),Ac=l=>ba(l).getOrThunk(()=>Lo(l)+"px"),Bo=l=>rn(co.justColumns(l),f=>ve.from(f.element)),Tu=l=>{const f=Ud().browser,v=f.isChromium()||f.isFirefox();return cd(l)?v:!0},If=(l,f,v,C,A,B)=>l.filter(C).fold(()=>B(k(v,f)),U=>A(U)),ca=(l,f,v,C)=>{const A=id(l),B=co.hasColumns(l)?Bo(l):A,U=[ve.some(Zh.edge(f))].concat(rn(Zh.positions(A,f),ae=>ae.map(Ce=>Ce.x))),J=ne(ri);return rn(B,(ae,Ce)=>If(ae,Ce,U,J,Fe=>{if(Tu(Fe))return v(Fe);{const Ct=ml(A[Ce],qe);return If(Ct,Ce,U,J,Vt=>C(ve.some(pa(Vt))),C)}},C))},Jg=l=>l.map(f=>f+"px").getOr(""),ku=(l,f)=>ca(l,f,nv,Jg),Au=(l,f,v)=>ca(l,f,Tm,C=>C.fold(()=>v.minCellWidth(),A=>A/v.pixelWidth()*100)),Bs=(l,f,v)=>ca(l,f,ia,C=>C.getOrThunk(v.minCellWidth)),km=(l,f,v,C)=>{const A=Em(l),B=rn(l.all,J=>ve.some(J.element)),U=[ve.some(Bi.edge(f))].concat(rn(Bi.positions(A,f),J=>J.map(ae=>ae.y)));return rn(B,(J,ae)=>If(J,ae,U,$e,v,C))},Be=(l,f)=>km(l,f,Lo,v=>v.getOrThunk(Mh)),Oc=(l,f)=>km(l,f,Ac,Jg),Am=(l,f)=>()=>pn(l)?f(l):parseFloat(xf(l,"width").getOr("0")),Ci=l=>{const f=Am(l,pa),v=ce(0);return{width:f,pixelWidth:f,getWidths:(A,B)=>Bs(A,l,B),getCellDelta:v,singleColumnWidth:ce([0]),minCellWidth:v,setElementWidth:Ie,adjustTableWidth:Ie,isRelative:!0,label:"none"}},Dc=l=>{const f=Am(l,ae=>parseFloat(Jr(ae))),v=Am(l,pa);return{width:f,pixelWidth:v,getWidths:(ae,Ce)=>Au(ae,l,Ce),getCellDelta:ae=>ae/v()*100,singleColumnWidth:(ae,Ce)=>[100-ae],minCellWidth:()=>Cr()/v()*100,setElementWidth:jh,adjustTableWidth:ae=>{const Ce=f(),Fe=ae/100*Ce,Ct=Ce+Fe;jh(l,Ct)},isRelative:!0,label:"percent"}},Mr=l=>{const f=Am(l,pa);return{width:f,pixelWidth:f,getWidths:(U,J)=>Bs(U,l,J),getCellDelta:qe,singleColumnWidth:(U,J)=>[Math.max(Cr(),U+J)-U],minCellWidth:Cr,setElementWidth:vl,adjustTableWidth:U=>{const J=f()+U;vl(l,J)},isRelative:!1,label:"pixel"}},fr=(l,f)=>Vy().exec(f)!==null?Dc(l):Mr(l),_={getTableSize:l=>Gl(l).fold(()=>Ci(l),v=>fr(l,v)),pixelSize:Mr,percentageSize:Dc,noneSize:Ci},R=(l,f,v,C,A,B)=>({minRow:l,minCol:f,maxRow:v,maxCol:C,allCells:A,selectedCells:B}),Z=(l,f)=>{const v=l.grid.columns;let A=l.grid.rows,B=v,U=0,J=0;const ae=[],Ce=[];return Mo(l.access,Fe=>{if(ae.push(Fe),f(Fe)){Ce.push(Fe);const Ct=Fe.row,Vt=Ct+Fe.rowspan-1,Lt=Fe.column,Mt=Lt+Fe.colspan-1;Ct<A?A=Ct:Vt>U&&(U=Vt),Lt<B?B=Lt:Mt>J&&(J=Mt)}}),R(A,B,U,J,ae,Ce)},te=(l,f,v)=>{const C=l[v].element,A=_e.fromTag("td");Ls(A,_e.fromTag("br")),(f?Ls:Ar)(C,A)},Te=(l,f,v,C)=>{const A=to(l,J=>J.section!=="colgroup"),B=f.grid.columns,U=f.grid.rows;for(let J=0;J<U;J++){let ae=!1;for(let Ce=0;Ce<B;Ce++)J<v.minRow||J>v.maxRow||Ce<v.minCol||Ce>v.maxCol||(co.getAt(f,J,Ce).filter(C).isNone()?te(A,ae,J):ae=!0)}},ot=(l,f,v,C)=>{Mo(v.columns,U=>{(U.column<f.minCol||U.column>f.maxCol)&&br(U.element)});const A=to(gu(l,"tr"),U=>U.dom.childElementCount===0);nt(A,br),(f.minCol===f.maxCol||f.minRow===f.maxRow)&&nt(gu(l,"th,td"),U=>{de(U,"rowspan"),de(U,"colspan")}),de(l,qi),de(l,"data-snooker-col-series"),_.getTableSize(l).adjustTableWidth(C)},Ot=(l,f,v,C)=>{if(C.minCol===0&&f.grid.columns===C.maxCol+1)return 0;const A=Bs(f,l,v),B=tt(A,(Ce,Fe)=>Ce+Fe,0),ae=tt(A.slice(C.minCol,C.maxCol+1),(Ce,Fe)=>Ce+Fe,0)/B*v.pixelWidth()-v.pixelWidth();return v.getCellDelta(ae)},sn=(l,f)=>{const v=Vt=>Zn(Vt.element,f),C=ec(l),A=vu(C),B=_.getTableSize(l),U=co.generate(A),J=Z(U,v),ae="th:not("+f+"),td:not("+f+")",Ce=pu(C,"th,td",Vt=>Zn(Vt,ae));nt(Ce,br),Te(A,U,J,v);const Fe=co.fromTable(l),Ct=Ot(l,Fe,B,J);return ot(C,J,U,Ct),C},jn=" ",Yo=((l,f)=>{const v=B=>{if(!l(B))throw new Error("Can only get "+f+" value of a "+f+" node");return C(B).getOr("")},C=B=>l(B)?ve.from(B.dom.nodeValue):ve.none();return{get:v,getOption:C,set:(B,U)=>{if(!l(B))throw new Error("Can only set raw "+f+" value of a "+f+" node");B.dom.nodeValue=U}}})(Qa,"text"),Xo=l=>Yo.get(l),er=l=>Yo.getOption(l),Rc=(l,f)=>Yo.set(l,f),Va=l=>Wo(l)==="img"?1:er(l).fold(()=>xo(l).length,f=>f.length),Kl=l=>er(l).filter(f=>f.trim().length!==0||f.indexOf(jn)>-1).isSome(),yl=l=>Sn(l)&&Tr(l,"contenteditable")==="false",Ou=["img","br"],Kh=l=>Kl(l)||cn(Ou,Wo(l))||yl(l),Gc=l=>ha(l,Kh),Om=l=>Qg(l,Kh),Qg=(l,f)=>{const v=C=>{const A=xo(C);for(let B=A.length-1;B>=0;B--){const U=A[B];if(f(U))return ve.some(U);const J=v(U);if(J.isSome())return J}return ve.none()};return v(l)},ep={scope:["row","col"]},Lf=l=>()=>{const f=_e.fromTag("td",l.dom);return Ls(f,_e.fromTag("br",l.dom)),f},va=l=>()=>_e.fromTag("col",l.dom),Yl=l=>()=>_e.fromTag("colgroup",l.dom),No=l=>()=>_e.fromTag("tr",l.dom),Ms=(l,f,v)=>{const C=uu(l,f);return Mo(v,(A,B)=>{A===null?de(C,B):Zs(C,B,A)}),C},Ii=l=>l,Er=(l,f,v)=>Gc(l).map(A=>{const B=v.join(","),U=Le(A,B,J=>Zo(J,l));return os(U,(J,ae)=>{const Ce=Ia(ae);return Ls(J,Ce),Ce},f)}).getOr(f),tp=(l,f)=>{Mo(ep,(v,C)=>ge(l,C).filter(A=>cn(v,A)).each(A=>Zs(f,C,A)))},Ff=(l,f,v)=>{const C=(U,J)=>{Rh(U.element,J),si(J,"height"),U.colspan!==1&&si(J,"width")},A=U=>{const J=_e.fromTag(Wo(U.element),f.dom),ae=v.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Ce=ae.length>0?Er(U.element,J,ae):J;return Ls(Ce,_e.fromTag("br")),C(U,J),tp(U.element,J),l(U.element,J),J};return{col:U=>{const J=_e.fromTag(Wo(U.element),f.dom);return C(U,J),l(U.element,J),J},colgroup:Yl(f),row:No(f),cell:A,replace:Ms,colGap:va(f),gap:Lf(f)}},$f=l=>({col:va(l),colgroup:Yl(l),row:No(l),cell:Lf(l),replace:Ii,colGap:va(l),gap:Lf(l)}),Kc=(l,f)=>{const C=document.createElement("div");return C.innerHTML=l,xo(_e.fromDom(C))},ld=l=>rn(l,_e.fromDom),qd=l=>f=>f.options.get(l),Du="100%",b1=l=>{var f;const v=l.dom,C=(f=v.getParent(l.selection.getStart(),v.isBlock))!==null&&f!==void 0?f:l.getBody();return Su(_e.fromDom(C))+"px"},Gd=(l,f)=>Xl(l)||!v1(l)?f:Hf(l)?{...f,width:b1(l)}:{...f,width:Du},np=(l,f)=>Xl(l)||v1(l)?f:Hf(l)?{...f,width:b1(l)}:{...f,width:Du},Yh=l=>{const f=l.options.register;f("table_clone_elements",{processor:"string[]"}),f("table_use_colgroups",{processor:"boolean",default:!0}),f("table_header_type",{processor:v=>{const C=cn(["section","cells","sectionCells","auto"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),f("table_sizing_mode",{processor:"string",default:"auto"}),f("table_default_attributes",{processor:"object",default:{border:"1"}}),f("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),f("table_column_resizing",{processor:v=>{const C=cn(["preservetable","resizetable"],v);return C?{value:v,valid:C}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),f("table_resize_bars",{processor:"boolean",default:!0}),f("table_style_by_css",{processor:"boolean",default:!0}),f("table_merge_content_on_paste",{processor:"boolean",default:!0})},zS=l=>ve.from(l.options.get("table_clone_elements")),ud=l=>{const f=l.options.get("object_resizing");return cn(f.split(","),"table")},US=qd("table_header_type"),Uy=qd("table_column_resizing"),Nr=l=>Uy(l)==="preservetable",ov=l=>Uy(l)==="resizetable",dd=qd("table_sizing_mode"),Dm=l=>dd(l)==="relative",Hf=l=>dd(l)==="fixed",Xl=l=>dd(l)==="responsive",Jl=qd("table_resize_bars"),v1=qd("table_style_by_css"),fd=qd("table_merge_content_on_paste"),Li=l=>{const f=l.options,v=f.get("table_default_attributes");return f.isSet("table_default_attributes")?v:np(l,v)},y1=l=>{const f=l.options,v=f.get("table_default_styles");return f.isSet("table_default_styles")?v:Gd(l,v)},Wy=qd("table_use_colgroups"),w1=l=>lr(l,"[contenteditable]"),C1=(l,f=!1)=>pn(l)?l.dom.isContentEditable:w1(l).fold(ce(f),v=>Zy(v)==="true"),Zy=l=>l.dom.contentEditable,Xh=l=>_e.fromDom(l.getBody()),md=l=>f=>Zo(f,Xh(l)),sc=l=>{de(l,"data-mce-style");const f=v=>de(v,"data-mce-style");nt(xc(l),f),nt(_f(l),f),nt(Tf(l),f)},Ql=l=>_e.fromDom(l.selection.getStart()),Rm=l=>l.getBoundingClientRect().width,jy=l=>l.getBoundingClientRect().height,Jh=l=>(f,v)=>{const C=f.dom.getStyle(v,l)||f.dom.getAttrib(v,l);return ve.from(C).filter(La)},qy=Jh("width"),WS=Jh("height"),ZS=l=>/^(\d+(\.\d+)?)%$/.test(l),jS=l=>/^(\d+(\.\d+)?)px$/.test(l),Mm=l=>yt(l,hs("table")).exists(C1),Qh=(l,f)=>{const v=f.column,C=f.column+f.colspan-1,A=f.row,B=f.row+f.rowspan-1;return v<=l.finishCol&&C>=l.startCol&&A<=l.finishRow&&B>=l.startRow},ao=(l,f)=>f.column>=l.startCol&&f.column+f.colspan-1<=l.finishCol&&f.row>=l.startRow&&f.row+f.rowspan-1<=l.finishRow,_n=(l,f)=>{let v=!0;const C=jt(ao,f);for(let A=f.startRow;A<=f.finishRow;A++)for(let B=f.startCol;B<=f.finishCol;B++)v=v&&co.getAt(l,A,B).exists(C);return v?ve.some(f):ve.none()},Nm=(l,f)=>Re(Math.min(l.row,f.row),Math.min(l.column,f.column),Math.max(l.row+l.rowspan-1,f.row+f.rowspan-1),Math.max(l.column+l.colspan-1,f.column+f.colspan-1)),S1=(l,f,v)=>{const C=co.findItem(l,f,Zo),A=co.findItem(l,v,Zo);return C.bind(B=>A.map(U=>Nm(B,U)))},sv=(l,f,v)=>S1(l,f,v).bind(C=>_n(l,C)),Gy=(l,f,v,C)=>co.findItem(l,f,Zo).bind(A=>{const B=v>0?A.row+A.rowspan-1:A.row,U=C>0?A.column+A.colspan-1:A.column;return co.getAt(l,B+v,U+C).map(ae=>ae.element)}),Kd=(l,f,v)=>S1(l,f,v).map(C=>{const A=co.filterItems(l,jt(Qh,C));return rn(A,B=>B.element)}),Fs=(l,f)=>{const v=(C,A)=>zc(A,C);return co.findItem(l,f,v).map(C=>C.element)},qS=(l,f,v)=>Sr(l).bind(C=>{const A=eg(C);return Gy(A,l,f,v)}),Ky=(l,f,v)=>{const C=eg(l);return Kd(C,f,v)},Yy=(l,f,v,C,A)=>{const B=eg(l),U=Zo(l,v)?ve.some(f):Fs(B,f),J=Zo(l,A)?ve.some(C):Fs(B,C);return U.bind(ae=>J.bind(Ce=>Kd(B,ae,Ce)))},it=(l,f,v)=>{const C=eg(l);return sv(C,f,v)},eg=co.fromTable;var Sk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Pm=()=>{const l=Ce=>_e.fromDom(Ce.dom.cloneNode(!1)),f=Ce=>Ps(Ce).dom,v=Ce=>Ys(Ce)?Wo(Ce)==="body"?!0:cn(Sk,Wo(Ce)):!1,C=Ce=>Ys(Ce)?cn(["br","img","hr","input"],Wo(Ce)):!1,A=Ce=>Ys(Ce)&&Tr(Ce,"contenteditable")==="false",B=(Ce,Fe)=>Ce.dom.compareDocumentPosition(Fe.dom),U=(Ce,Fe)=>{const Ct=Ve(Ce);Ta(Fe,Ct)},J=Ce=>{const Fe=Wo(Ce);return cn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Fe)},ae=Ce=>Ys(Ce)?ge(Ce,"lang"):ve.none();return{up:ce({selector:ni,closest:lr,predicate:rs,all:kr}),down:ce({selector:Gn,predicate:ye}),styles:ce({get:Yr,getRaw:xf,set:Kr,remove:si}),attrs:ce({get:Tr,set:Zs,remove:de,copyTo:U}),insert:ce({before:Qi,after:ei,afterAll:Uo,append:Ls,appendAll:Oa,prepend:Ar,wrap:ji}),remove:ce({unwrap:$l,remove:br}),create:ce({nu:_e.fromTag,clone:l,text:_e.fromText}),query:ce({comparePosition:B,prevSibling:Ji,nextSibling:Ri}),property:ce({children:xo,name:Wo,parent:na,document:f,isText:Qa,isComment:zo,isElement:Ys,isSpecial:J,getLanguage:ae,getText:Xo,setText:Rc,isBoundary:v,isEmptyTag:C,isNonEditable:A}),eq:Zo,is:Gr}};const xk=(l,f,v,C)=>{const A=v[0],B=v.slice(1);return C(l,f,A,B)},tg=(l,f,v)=>v.length>0?xk(l,f,v,Xy):ve.none(),Xy=(l,f,v,C)=>{const A=f(l,v);return os(C,(B,U)=>{const J=f(l,U);return hd(l,B,J)},A)},hd=(l,f,v)=>f.bind(C=>v.filter(jt(l.eq,C))),Jy=(l,f)=>jt(l.eq,f),op=(l,f,v,C=Qt)=>{const A=[f].concat(l.up().all(f)),B=[v].concat(l.up().all(v)),U=Fe=>ta(Fe,C).fold(()=>Fe,Vt=>Fe.slice(0,Vt+1)),J=U(A),ae=U(B),Ce=W(J,Fe=>ct(ae,Jy(l,Fe)));return{firstpath:J,secondpath:ae,shared:Ce}},Gs=tg,Yd=op,Qy=Pm(),Ru=(l,f)=>Gs(Qy,(v,C)=>l(C),f),ew=(l,f,v)=>Yd(Qy,l,f,v),x1=l=>ni(l,"table"),sp=(l,f,v)=>{const C=A=>B=>v!==void 0&&v(B)||Zo(B,A);return Zo(l,f)?ve.some({boxes:ve.some([l]),start:l,finish:f}):x1(l).bind(A=>x1(f).bind(B=>{if(Zo(A,B))return ve.some({boxes:Ky(A,l,f),start:l,finish:f});if(zc(A,B)){const U=Le(f,"td,th",C(A)),J=U.length>0?U[U.length-1]:f;return ve.some({boxes:Yy(A,l,A,f,B),start:l,finish:J})}else if(zc(B,A)){const U=Le(l,"td,th",C(B)),J=U.length>0?U[U.length-1]:l;return ve.some({boxes:Yy(B,l,A,f,B),start:l,finish:J})}else return ew(l,f).shared.bind(U=>lr(U,"table",v).bind(J=>{const ae=Le(f,"td,th",C(J)),Ce=ae.length>0?ae[ae.length-1]:f,Fe=Le(l,"td,th",C(J)),Ct=Fe.length>0?Fe[Fe.length-1]:l;return ve.some({boxes:Yy(J,l,A,f,B),start:Ct,finish:Ce})}))}))},E1=(l,f)=>{const v=Gn(l,f);return v.length>0?ve.some(v):ve.none()},Yc=(l,f)=>W(l,v=>Zn(v,f)),GS=(l,f,v)=>oi(l,f).bind(C=>oi(l,v).bind(A=>Ru(x1,[C,A]).map(B=>({first:C,last:A,table:B})))),_1=(l,f)=>ni(l,"table").bind(v=>oi(v,f).bind(C=>sp(C,l).bind(A=>A.boxes.map(B=>({boxes:B,start:A.start,finish:A.finish}))))),tw=(l,f,v,C,A)=>Yc(l,A).bind(B=>qS(B,f,v).bind(U=>_1(U,C))),Bm=(l,f)=>E1(l,f),nw=(l,f,v)=>GS(l,f,v).bind(C=>{const A=ae=>Zo(l,ae),B="thead,tfoot,tbody,table",U=ni(C.first,B,A),J=ni(C.last,B,A);return U.bind(ae=>J.bind(Ce=>Zo(ae,Ce)?it(C.table,C.first,C.last):ve.none()))}),KS=qe,ow=l=>{const f=(C,A)=>ge(C,A).exists(B=>parseInt(B,10)>1),v=C=>f(C,"rowspan")||f(C,"colspan");return l.length>0&&Ho(l,v)?ve.some(l):ve.none()},YS=(l,f,v)=>f.length<=1?ve.none():nw(l,v.firstSelectedSelector,v.lastSelectedSelector).map(C=>({bounds:C,cells:f})),Gi="data-mce-selected",Xc="td["+Gi+"],th["+Gi+"]",xt="["+Gi+"]",rv="data-mce-first-selected",li="td["+rv+"],th["+rv+"]",av="data-mce-last-selected",XS="td["+av+"],th["+av+"]",Ks=xt,Vf={selected:Gi,selectedSelector:Xc,firstSelected:rv,firstSelectedSelector:li,lastSelected:av,lastSelectedSelector:XS},iv=(l,f,v)=>({element:v,mergable:YS(f,l,Vf),unmergable:ow(l),selection:KS(l)}),Ek=(l,f,v)=>({element:l,clipboard:f,generators:v}),zf=(l,f,v,C)=>({selection:KS(l),clipboard:v,generators:C}),cv=l=>Sr(l).bind(f=>Bm(f,Vf.firstSelectedSelector)).fold(ce(l),f=>f[0]),gd=l=>(f,v)=>{const C=Wo(f),A=C==="col"||C==="colgroup"?cv(f):f;return lr(A,l,v)},JS=gd("th,td,caption"),sw=gd("th,td"),$s=l=>ld(l.model.table.getSelectedCells()),rp=l=>to($s(l),f=>Zn(f,Vf.selectedSelector)),mr=l=>Sr(l[0]).map(f=>{const v=sn(f,Ks);return sc(v),[v]}),QS=(l,f)=>rn(f,v=>l.selection.serializer.serialize(v.dom,{})).join(""),Jc=l=>rn(l,f=>f.dom.innerText).join(""),ap=(l,f)=>{l.on("BeforeGetContent",v=>{const C=A=>{v.preventDefault(),mr(A).each(B=>{v.content=v.format==="text"?Jc(B):QS(l,B)})};if(v.selection===!0){const A=rp(l);A.length>=1&&C(A)}}),l.on("BeforeSetContent",v=>{if(v.selection===!0&&v.paste===!0){const C=$s(l);xe(C).each(A=>{Sr(A).each(B=>{const U=to(Kc(v.content),ae=>Wo(ae)!=="meta"),J=hs("table");if(fd(l)&&U.length===1&&J(U[0])){v.preventDefault();const ae=_e.fromDom(l.getDoc()),Ce=$f(ae),Fe=Ek(A,U[0],Ce);f.pasteCells(B,Fe).each(()=>{l.focus()})}})})}})},Qc=(l,f)=>({element:l,offset:f}),_k=(l,f,v)=>l.property().isText(f)&&l.property().getText(f).trim().length===0||l.property().isComment(f)?v(f).bind(C=>_k(l,C,v).orThunk(()=>ve.some(C))):ve.none(),Tk=(l,f)=>l.property().isText(f)?l.property().getText(f).length:l.property().children(f).length,kk=(l,f)=>{const v=_k(l,f,l.query().prevSibling).getOr(f);if(l.property().isText(v))return Qc(v,Tk(l,v));const C=l.property().children(v);return C.length>0?kk(l,C[C.length-1]):Qc(v,Tk(l,v))},Ak=kk,za=Pm(),rc=l=>Ak(za,l),T1=(l,f)=>{ri(l)||Xg(l).each(C=>{const A=C.value/2;rt(l,A,C.unit),rt(f,A,C.unit)})},Im=l=>rn(l,ce(0)),rw=(l,f,v,C,A)=>A(l.slice(0,f)).concat(C).concat(A(l.slice(v))),ip=l=>(f,v,C,A)=>{if(l(C)){const B=Math.max(A,f[v]-Math.abs(C)),U=Math.abs(B-f[v]);return C>=0?U:-U}else return C},Xd=ip(l=>l<0),cp=ip($e),ng=()=>{const l=(J,ae,Ce,Fe,Ct)=>{const Vt=Xd(J,ae,Fe,Ct);return rw(J,ae,Ce+1,[Vt,0],Im)},f=(J,ae,Ce,Fe)=>{const Ct=(100+Ce)/100,Vt=Math.max(Fe,(J[ae]+Ce)/Ct);return rn(J,(Lt,Mt)=>(Mt===ae?Vt:Lt/Ct)-Lt)},v=(J,ae,Ce,Fe,Ct,Vt)=>Vt?f(J,ae,Fe,Ct):l(J,ae,Ce,Fe,Ct);return{resizeTable:(J,ae)=>J(ae),clampTableDelta:Xd,calcLeftEdgeDeltas:v,calcMiddleDeltas:(J,ae,Ce,Fe,Ct,Vt,Lt)=>v(J,Ce,Fe,Ct,Vt,Lt),calcRightEdgeDeltas:(J,ae,Ce,Fe,Ct,Vt)=>{if(Vt)return f(J,Ce,Fe,Ct);{const Lt=Xd(J,Ce,Fe,Ct);return Im(J.slice(0,Ce)).concat([Lt])}},calcRedestributedWidths:(J,ae,Ce,Fe)=>{if(Fe){const Vt=(ae+Ce)/ae,Lt=rn(J,Mt=>Mt/Vt);return{delta:Vt*100-100,newSizes:Lt}}else return{delta:Ce,newSizes:J}}}},Lm=()=>{const l=(U,J,ae,Ce,Fe)=>{const Ct=Ce>=0?ae:J,Vt=cp(U,Ct,Ce,Fe);return rw(U,J,ae+1,[Vt,-Vt],Im)};return{resizeTable:(U,J,ae)=>{ae&&U(J)},clampTableDelta:(U,J,ae,Ce,Fe)=>{if(Fe){if(ae>=0)return ae;{const Ct=tt(U,(Vt,Lt)=>Vt+Lt-Ce,0);return Math.max(-Ct,ae)}}else return Xd(U,J,ae,Ce)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(U,J,ae,Ce,Fe,Ct)=>l(U,ae,Ce,Fe,Ct),calcRightEdgeDeltas:(U,J,ae,Ce,Fe,Ct)=>{if(Ct)return Im(U);{const Vt=Ce/U.length;return rn(U,ce(Vt))}},calcRedestributedWidths:(U,J,ae,Ce)=>({delta:0,newSizes:U})}},Jd=l=>co.fromTable(l).grid,og=hs("th"),sg=l=>Ho(l,f=>og(f.element)),Ok=(l,f)=>l&&f?"sectionCells":l?"section":"cells",aw=l=>{const f=l.section==="thead",v=ed(lv(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:f||v?{type:"header",subType:Ok(f,v)}:{type:"body"}},lv=l=>{const f=to(l,v=>og(v.element));return f.length===0?ve.some("td"):f.length===l.length?ve.some("th"):ve.none()},ex=l=>{const f=rn(l,A=>aw(A).type),v=cn(f,"header"),C=cn(f,"footer");if(!v&&!C)return ve.some("body");{const A=cn(f,"body");return v&&!A&&!C?ve.some("header"):!v&&!A&&C?ve.some("footer"):ve.none()}},iw=l=>To(l.all,f=>{const v=aw(f);return v.type==="header"?ve.from(v.subType):ve.none()}),uv=(l,f,v)=>X(v(l.element,f),!0,l.isLocked),cw=(l,f)=>l.section!==f?me(l.element,l.cells,f,l.isNew):l,lw=()=>({transformRow:cw,transformCell:(l,f,v)=>{const C=v(l.element,f),A=Wo(C)!=="td"?fl(C,"td"):C;return X(A,l.isNew,l.isLocked)}}),uw=()=>({transformRow:cw,transformCell:uv}),k1=()=>({transformRow:(l,f)=>cw(l,f==="thead"?"tbody":f),transformCell:uv}),A1={getTableSectionType:(l,f)=>{const v=co.fromTable(l);switch(iw(v).getOr(f)){case"section":return lw();case"sectionCells":return uw();case"cells":return k1()}},section:lw,sectionCells:uw,cells:k1,fallback:()=>({transformRow:qe,transformCell:uv})},lp=(l,f,v,C)=>{v===C?de(l,f):Zs(l,f,v)},Fm=(l,f,v)=>{_o(lt(l,f)).fold(()=>Ar(l,v),C=>ei(C,v))},dw=(l,f)=>{const v=Xn(l,f).getOrThunk(()=>{const C=_e.fromTag(f,Aa(l).dom);return f==="thead"?Fm(l,"caption,colgroup",C):f==="colgroup"?Fm(l,"caption",C):Ls(l,C),C});return ma(v),v},fw=(l,f)=>{const v=[],C=[],A=Lt=>rn(Lt,Mt=>{Mt.isNew&&v.push(Mt.element);const un=Mt.element;return ma(un),nt(Mt.cells,ht=>{ht.isNew&&C.push(ht.element),lp(ht.element,"colspan",ht.colspan,1),lp(ht.element,"rowspan",ht.rowspan,1),Ls(un,ht.element)}),un}),B=Lt=>qo(Lt,Mt=>rn(Mt.cells,un=>(lp(un.element,"span",un.colspan,1),un.element))),U=(Lt,Mt)=>{const un=dw(l,Mt),Tt=(Mt==="colgroup"?B:A)(Lt);Oa(un,Tt)},J=Lt=>{Xn(l,Lt).each(br)},ae=(Lt,Mt)=>{Lt.length>0?U(Lt,Mt):J(Mt)},Ce=[],Fe=[],Ct=[],Vt=[];return nt(f,Lt=>{switch(Lt.section){case"thead":Ce.push(Lt);break;case"tbody":Fe.push(Lt);break;case"tfoot":Ct.push(Lt);break;case"colgroup":Vt.push(Lt);break}}),ae(Vt,"colgroup"),ae(Ce,"thead"),ae(Fe,"tbody"),ae(Ct,"tfoot"),{newRows:v,newCells:C}},tx=l=>rn(l,f=>{const v=Ia(f.element);return nt(f.cells,C=>{const A=ec(C.element);lp(A,"colspan",C.colspan,1),lp(A,"rowspan",C.rowspan,1),Ls(v,A)}),v}),mw=(l,f)=>rn(l,v=>Ra(v,f)),rg=(l,f)=>l[f],Dk=(l,f)=>{if(l.length===0)return 0;const v=l[0];return ta(l,A=>!f(v.element,A.element)).getOr(l.length)},hw=(l,f,v,C)=>{const A=rg(l,f),B=A.section==="colgroup",U=Dk(A.cells.slice(v),C),J=B?1:Dk(mw(l.slice(f),v),C);return{colspan:U,rowspan:J}},$m=(l,f)=>{const v=rn(l,A=>rn(A.cells,Qt)),C=(A,B,U,J)=>{for(let ae=A;ae<A+U;ae++)for(let Ce=B;Ce<B+J;Ce++)v[ae][Ce]=!0};return rn(l,(A,B)=>{const U=qo(A.cells,(J,ae)=>{if(v[B][ae]===!1){const Ce=hw(l,B,ae,f);return C(B,ae,Ce.rowspan,Ce.colspan),[mu(J.element,Ce.rowspan,Ce.colspan,J.isNew)]}else return[]});return gi(A.element,U,A.section,A.isNew)})},up=(l,f,v)=>{const C=[];nt(l.colgroups,A=>{const B=[];for(let U=0;U<l.grid.columns;U++){const J=co.getColumnAt(l,U).map(ae=>X(ae.element,v,!1)).getOrThunk(()=>X(f.colGap(),!0,!1));B.push(J)}C.push(me(A.element,B,"colgroup",v))});for(let A=0;A<l.grid.rows;A++){const B=[];for(let ae=0;ae<l.grid.columns;ae++){const Ce=co.getAt(l,A,ae).map(Fe=>X(Fe.element,v,Fe.isLocked)).getOrThunk(()=>X(f.gap(),!0,!1));B.push(Ce)}const U=l.all[A],J=me(U.element,B,U.section,v);C.push(J)}return C},gw=(l,f)=>up(l,f,!1),fv=l=>$m(l,Zo),pw=(l,f)=>To(l.all,v=>W(v.cells,C=>Zo(f,C.element))),nx=(l,f,v)=>{const C=rn(f.selection,B=>bu(B).bind(U=>pw(l,U)).filter(v)),A=xs(C);return bm(A.length>0,A)},Fi=(l,f,v,C,A)=>(B,U,J,ae)=>{const Ce=co.fromTable(B),Fe=ve.from(ae==null?void 0:ae.section).getOrThunk(A1.fallback);return f(Ce,U).map(Vt=>{const Lt=gw(Ce,J),Mt=l(Lt,Vt,Zo,A(J),Fe),un=rr(Mt.grid),ht=fv(Mt.grid);return{info:Vt,grid:ht,cursor:Mt.cursor,lockedColumns:un}}).bind(Vt=>{const Lt=fw(B,Vt.grid),Mt=ve.from(ae==null?void 0:ae.sizing).getOrThunk(()=>_.getTableSize(B)),un=ve.from(ae==null?void 0:ae.resize).getOrThunk(Lm);return v(B,Vt.grid,Vt.info,{sizing:Mt,resize:un,section:Fe}),C(B),de(B,qi),Vt.lockedColumns.length>0&&Zs(B,qi,Vt.lockedColumns.join(",")),ve.some({cursor:Vt.cursor,newRows:Lt.newRows,newCells:Lt.newCells})})},AM=(l,f)=>bu(f.element).bind(v=>pw(l,v).map(C=>({...C,generators:f.generators,clipboard:f.clipboard}))),bw=(l,f)=>nx(l,f,$e).map(v=>({cells:v,generators:f.generators,clipboard:f.clipboard})),O1=(l,f)=>f.mergable,Rk=(l,f)=>f.unmergable,el=(l,f)=>nx(l,f,$e),Mu=(l,f)=>nx(l,f,v=>!v.isLocked),Hm=(l,f)=>pw(l,f).exists(v=>!v.isLocked),ag=(l,f)=>Ho(f,v=>Hm(l,v)),ox=(l,f)=>O1(l,f).filter(v=>ag(l,v.cells)),D1=(l,f)=>Rk(l,f).filter(v=>ag(l,v)),mv=(l,f,v,C)=>{const A=aa(l).rows;if(A.length===0)return l;for(let B=f.startRow;B<=f.finishRow;B++)for(let U=f.startCol;U<=f.finishCol;U++){const J=A[B],ae=Ra(J,U).isLocked;Yn(J,U,X(C(),!1,ae))}return l},sx=(l,f,v,C)=>{const A=aa(l).rows;let B=!0;for(let U=0;U<A.length;U++)for(let J=0;J<nc(A[0]);J++){const ae=A[U],Ce=Ra(ae,J),Fe=Ce.element,Ct=v(Fe,f);Ct&&!B?Yn(ae,J,X(C(),!0,Ce.isLocked)):Ct&&(B=!1)}return l},Vm=(l,f)=>tt(l,(v,C)=>ct(v,A=>f(A.element,C.element))?v:v.concat([C]),[]),ig=(l,f,v,C)=>(f>0&&f<l[0].cells.length&&nt(l,A=>{const B=A.cells[f-1];let U=0;const J=C();for(;A.cells.length>f+U&&v(B.element,A.cells[f+U].element);)Yn(A,f+U,X(J,!0,A.cells[f+U].isLocked)),U++}),l),eu=(l,f,v,C)=>{const A=aa(l).rows;if(f>0&&f<A.length){const B=A[f-1].cells,U=Vm(B,v);nt(U,J=>{let ae=ve.none();for(let Ce=f;Ce<A.length;Ce++)for(let Fe=0;Fe<nc(A[0]);Fe++){const Ct=A[Ce],Vt=Ra(Ct,Fe);v(Vt.element,J.element)&&(ae.isNone()&&(ae=ve.some(C())),ae.each(Mt=>{Yn(Ct,Fe,X(Mt,!0,Vt.isLocked))}))}})}return l},hv=l=>{const f=B=>B(l),v=ce(l),C=()=>A,A={tag:!0,inner:l,fold:(B,U)=>U(l),isValue:$e,isError:Qt,map:B=>ac.value(B(l)),mapError:C,bind:f,exists:f,forall:f,getOr:v,or:C,getOrThunk:v,orThunk:C,getOrDie:v,each:B=>{B(l)},toOptional:()=>ve.some(l)};return A},Ma=l=>{const f=()=>v,v={tag:!1,inner:l,fold:(C,A)=>C(l),isValue:Qt,isError:$e,map:f,mapError:C=>ac.error(C(l)),bind:f,exists:Qt,forall:$e,getOr:qe,or:qe,getOrThunk:Pn,orThunk:Pn,getOrDie:Kt(String(l)),each:Ie,toOptional:ve.none};return v},ac={value:hv,error:Ma,fromOption:(l,f)=>l.fold(()=>Ma(f),hv)},Mk=(l,f,v)=>{if(l.row>=f.length||l.column>nc(f[0]))return ac.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const C=f.slice(l.row),A=C[0].cells.slice(l.column),B=nc(v[0]),U=v.length;return ac.value({rowDelta:C.length-U,colDelta:A.length-B})},rx=(l,f)=>{const v=nc(l[0]),C=nc(f[0]);return{rowDelta:0,colDelta:v-C}},Uf=(l,f)=>{const v=l.length,C=f.length;return{rowDelta:v-C,colDelta:0}},zm=(l,f,v,C)=>{const A=f.section==="colgroup"?v.col:v.cell;return Hn(l,B=>X(A(),!0,C(B)))},Wf=(l,f,v,C)=>{const A=l[l.length-1];return l.concat(Hn(f,()=>{const B=A.section==="colgroup"?v.colgroup:v.row,U=ii(A,B,qe),J=zm(U.cells.length,U,v,ae=>Cs(C,ae.toString()));return Wr(U,J)}))},tl=(l,f,v,C)=>rn(l,A=>{const B=zm(f,A,v,Qt);return Wd(A,C,B)}),ax=(l,f,v)=>rn(l,C=>tt(v,(A,B)=>{const U=zm(1,C,f,$e)[0];return Zg(A,B,U)},C)),R1=(l,f,v)=>{const C=f.colDelta<0?tl:qe,A=f.rowDelta<0?Wf:qe,B=rr(l),U=nc(l[0]),J=ct(B,Fe=>Fe===U-1),ae=C(l,Math.abs(f.colDelta),v,J?U-1:U),Ce=rr(ae);return A(ae,Math.abs(f.rowDelta),v,et(Ce,$e))},yw=(l,f,v,C)=>{const A=Ra(l[f],v),B=jt(C,A.element),U=l[f];return l.length>1&&nc(U)>1&&(v>0&&B(vi(U,v-1))||v<U.cells.length-1&&B(vi(U,v+1))||f>0&&B(vi(l[f-1],v))||f<l.length-1&&B(vi(l[f+1],v)))},dp=(l,f,v,C,A,B)=>{const U=l.row,J=l.column,ae=v.length,Ce=nc(v[0]),Fe=U+ae,Ct=J+Ce+B.length,Vt=et(B,$e);for(let Lt=U;Lt<Fe;Lt++){let Mt=0;for(let un=J;un<Ct;un++){if(Vt[un]){Mt++;continue}yw(f,Lt,un,A)&&sx(f,vi(f[Lt],un),A,C.cell);const ht=un-J-Mt,Tt=Ra(v[Lt-U],ht),Nn=Tt.element,Ln=C.replace(Nn);Yn(f[Lt],un,X(Ln,!0,Tt.isLocked))}}return f},cg=(l,f,v)=>{const C=nc(f[0]),A=aa(f).cols.length+l.row,B=Hn(C-l.column,J=>J+l.column),U=W(B,J=>Ho(v,ae=>ae!==J)).getOr(C-1);return{row:A,column:U}},Um=(l,f,v)=>to(v,C=>C>=l.column&&C<=nc(f[0])+l.column),ko=(l,f,v,C,A)=>{const B=rr(f),U=cg(l,f,B),J=aa(v).rows,ae=Um(U,J,B);return Mk(U,f,J).map(Fe=>{const Ct={...Fe,colDelta:Fe.colDelta-ae.length},Vt=R1(f,Ct,C),Lt=rr(Vt),Mt=Um(U,J,Lt);return dp(U,Vt,J,C,A,Mt)})},Mc=(l,f,v,C,A)=>{ig(f,l,A,C.cell);const B=Uf(v,f),U=R1(v,B,C),J=Uf(f,U),ae=R1(f,J,C);return rn(ae,(Ce,Fe)=>Wd(Ce,l,U[Fe].cells))},Qd=(l,f,v,C,A)=>{eu(f,l,A,C.cell);const B=rr(f),U=rx(f,v),J={...U,colDelta:U.colDelta-B.length},ae=R1(f,J,C),{cols:Ce,rows:Fe}=aa(ae),Ct=rr(ae),Vt=rx(v,f),Lt={...Vt,colDelta:Vt.colDelta+Ct.length},Mt=ax(v,C,Ct),un=R1(Mt,Lt,C);return[...Ce,...Fe.slice(0,l),...un,...Fe.slice(l,Fe.length)]},gv=(l,f,v,C)=>ii(l,A=>C(A,v),f),ys=(l,f,v,C,A)=>{const{rows:B,cols:U}=aa(l),J=B.slice(0,f),ae=B.slice(f),Ce=gv(B[v],(Fe,Ct)=>f>0&&f<B.length&&C(vi(B[f-1],Ct),vi(B[f],Ct))?Ra(B[f],Ct):X(A(Fe.element,C),!0,Fe.isLocked),C,A);return[...U,...J,Ce,...ae]},Wm=(l,f,v,C,A,B,U)=>{if(v==="colgroup"||!C){const J=Ra(l,A);return X(U(J.element,B),!0,!1)}else return Ra(l,f)},pv=(l,f,v,C,A)=>rn(l,B=>{const U=f>0&&f<nc(B)&&C(vi(B,f-1),vi(B,f)),J=Wm(B,f,B.section,U,v,C,A);return Zg(B,f,J)}),Nk=(l,f)=>qo(l,v=>{const C=v.cells,A=os(f,(B,U)=>U>=0&&U<B.length?B.slice(0,U).concat(B.slice(U+1)):B,C);return A.length>0?[me(v.element,A,v.section,v.isNew)]:[]}),Pk=(l,f,v)=>{const{rows:C,cols:A}=aa(l);return[...A,...C.slice(0,f),...C.slice(v+1)]},M1=(l,f,v,C)=>vi(l[f],v)!==void 0&&f>0&&C(vi(l[f-1],v),vi(l[f],v)),Hs=(l,f,v)=>f>0&&v(vi(l,f-1),vi(l,f)),ix=(l,f,v,C)=>M1(l,f,v,C)||Hs(l[f],v,C),Bk=(l,f)=>Ho(f,qe)&&sg(l.cells)?$e:(C,A,B)=>!(Wo(C.element)==="th"&&f[B]),cx=(l,f)=>Ho(f,qe)&&sg(l)?$e:(C,A,B)=>!(Wo(C.element)==="th"&&f[A]),lg=(l,f,v,C)=>{const A=U=>U==="row"?wr(f):ri(f),B=U=>A(U)?`${U}group`:U;return l?og(f)?B(v):null:C&&og(f)?B(v==="row"?"col":"row"):null},nl=(l,f)=>(v,C,A)=>ve.some(lg(l,v.element,"col",f[A])),Zm=(l,f)=>(v,C)=>ve.some(lg(l,v.element,"row",f[C])),ww=(l,f,v)=>X(v(l.element,f),!0,l.isLocked),tn=(l,f,v,C,A,B,U)=>{const J=ae=>ct(f,Ce=>v(ae.element,Ce.element));return rn(l,(ae,Ce)=>sd(ae,(Fe,Ct)=>{if(J(Fe)){const Vt=U(Fe,Ce,Ct)?A(Fe,v,C):Fe;return B(Vt,Ce,Ct).each(Lt=>{yc(Vt.element,{scope:ve.from(Lt)})}),Vt}else return Fe}))},Cw=(l,f,v)=>qo(l,(C,A)=>ix(l,A,f,v)?[]:[Ra(C,f)]),Ik=(l,f,v)=>{const C=l[f];return qo(C.cells,(A,B)=>ix(l,f,B,v)?[]:[A])},lx=(l,f,v,C,A)=>{const B=aa(l).rows,U=qo(f,Fe=>Cw(B,Fe,C)),J=rn(B,Fe=>sg(Fe.cells)),ae=cx(U,J),Ce=Zm(v,J);return tn(l,U,C,A,ww,Ce,ae)},Sw=(l,f,v,C,A,B,U)=>{const{cols:J,rows:ae}=aa(l),Ce=ae[f[0]],Fe=qo(f,ht=>Ik(ae,ht,A)),Ct=rn(Ce.cells,(ht,Tt)=>sg(Cw(ae,Tt,A))),Vt=[...ae];nt(f,ht=>{Vt[ht]=U.transformRow(ae[ht],v)});const Lt=[...J,...Vt],Mt=Bk(Ce,Ct),un=nl(C,Ct);return tn(Lt,Fe,A,B,U.transformCell,un,Mt)},ux=(l,f,v,C)=>{const A=aa(l).rows,B=rn(f,U=>Ra(A[U.row],U.column));return tn(l,B,v,C,ww,ve.none,$e)},pd={generate:l=>{if(!ue(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const f=[],v={};return nt(l,(C,A)=>{const B=Zt(C);if(B.length!==1)throw new Error("one and only one name per case");const U=B[0],J=C[U];if(v[U]!==void 0)throw new Error("duplicate key detected:"+U);if(U==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ue(J))throw new Error("case arguments must be an array");f.push(U),v[U]=(...ae)=>{const Ce=ae.length;if(Ce!==J.length)throw new Error("Wrong number of arguments to case "+U+". Expected "+J.length+" ("+J+"), got "+Ce);return{fold:(...Ct)=>{if(Ct.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Ct.length);return Ct[A].apply(null,ae)},match:Ct=>{const Vt=Zt(Ct);if(f.length!==Vt.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+`
Actual: `+Vt.join(","));if(!Ho(f,Mt=>cn(Vt,Mt)))throw new Error("Not all branches were specified when using match. Specified: "+Vt.join(", ")+`
Required: `+f.join(", "));return Ct[U].apply(null,ae)},log:Ct=>{console.log(Ct,{constructors:f,constructor:U,params:ae})}}}}),v}},ug={...pd.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},bv=(l,f)=>l.length===0?ug.none():l.length===1?ug.only(0):f===0?ug.left(0,1):f===l.length-1?ug.right(f-1,f):f>0&&f<l.length-1?ug.middle(f-1,f,f+1):ug.none(),Lk=(l,f,v,C,A)=>{const B=l.slice(0),U=bv(l,f),J=ce(rn(B,ce(0))),ae=Vt=>C.singleColumnWidth(B[Vt],v),Ce=(Vt,Lt)=>A.calcLeftEdgeDeltas(B,Vt,Lt,v,C.minCellWidth(),C.isRelative),Fe=(Vt,Lt,Mt)=>A.calcMiddleDeltas(B,Vt,Lt,Mt,v,C.minCellWidth(),C.isRelative),Ct=(Vt,Lt)=>A.calcRightEdgeDeltas(B,Vt,Lt,v,C.minCellWidth(),C.isRelative);return U.fold(J,ae,Ce,Fe,Ct)},wl=(l,f,v)=>{let C=0;for(let A=l;A<f;A++)C+=v[A]!==void 0?v[A]:0;return C},fx=(l,f)=>{const v=co.justCells(l);return rn(v,C=>{const A=wl(C.column,C.column+C.colspan,f);return{element:C.element,width:A,colspan:C.colspan}})},xw=(l,f)=>{const v=co.justColumns(l);return rn(v,(C,A)=>({element:C.element,width:f[A],colspan:C.colspan}))},mx=(l,f)=>rn(l.all,(v,C)=>({element:v.element,height:f[C]})),vv=l=>os(l,(f,v)=>f+v,0),Fk=(l,f)=>co.hasColumns(l)?xw(l,f):fx(l,f),yv=(l,f,v)=>{const C=Fk(l,f);nt(C,A=>{v.setElementWidth(A.element,A.width)})},Ew=(l,f,v,C,A)=>{const B=co.fromTable(l),U=A.getCellDelta(f),J=A.getWidths(B,A),ae=v===B.grid.columns-1,Ce=C.clampTableDelta(J,v,U,A.minCellWidth(),ae),Fe=Lk(J,v,Ce,A,C),Ct=rn(Fe,(Vt,Lt)=>Vt+J[Lt]);yv(B,Ct,A),C.resizeTable(A.adjustTableWidth,Ce,ae)},_w=(l,f,v)=>{const C=co.fromTable(l),A=Be(C,l),B=rn(A,(ae,Ce)=>v===Ce?Math.max(f+ae,Mh()):ae),U=mx(C,B);nt(U,ae=>{jd(ae.element,ae.height)}),nt(co.justCells(C),ae=>{Bf(ae.element)});const J=vv(B);jd(l,J)},hx=(l,f,v,C,A)=>{const B=co.generate(f),U=C.getWidths(B,C),J=C.pixelWidth(),{newSizes:ae,delta:Ce}=A.calcRedestributedWidths(U,J,v.pixelDelta,C.isRelative);yv(B,ae,C),C.adjustTableWidth(Ce)},$k=(l,f,v,C)=>{const A=co.generate(f),B=C.getWidths(A,C);yv(A,B,C)},ef=l=>tt(l,(v,C)=>ct(v,B=>B.column===C.column)?v:v.concat([C]),[]).sort((v,C)=>v.column-C.column),gx=hs("col"),fp=hs("colgroup"),mp=l=>Wo(l)==="tr"||fp(l),px=l=>{const f=js(l,"colspan",1),v=js(l,"rowspan",1);return{element:l,colspan:f,rowspan:v}},wv=(l,f=px)=>{const v=J=>gx(J.element)?l.col(J):l.cell(J),C=J=>fp(J.element)?l.colgroup(J):l.row(J),A=J=>{if(mp(J))return C({element:J});{const ae=J,Ce=v(f(ae));return B=ve.some({item:ae,replacement:Ce}),Ce}};let B=ve.none();return{getOrInit:(J,ae)=>B.fold(()=>A(J),Ce=>ae(J,Ce.item)?Ce.replacement:A(J))}},Tw=l=>f=>{const v=[],C=(U,J)=>W(v,ae=>J(ae.item,U)),A=U=>{const J=l==="td"?{scope:null}:{},ae=f.replace(U,l,J);return v.push({item:U,sub:ae}),ae};return{replaceOrInit:(U,J)=>{if(mp(U)||gx(U))return U;{const ae=U;return C(ae,J).fold(()=>A(ae),Ce=>J(U,Ce.item)?Ce.sub:A(ae))}}}},Cv=l=>ge(l,"scope").map(f=>f.substr(0,3)),ic={modification:wv,transform:Tw,merging:l=>({unmerge:C=>{const A=Cv(C);return A.each(B=>Zs(C,"scope",B)),()=>{const B=l.cell({element:C,colspan:1,rowspan:1});return si(B,"width"),si(C,"width"),A.each(U=>Zs(B,"scope",U)),B}},merge:C=>{const A=()=>{const B=xs(rn(C,Cv));if(B.length===0)return ve.none();{const U=B[0],J=["row","col"];return ct(B,Ce=>Ce!==U&&cn(J,Ce))?ve.none():ve.from(U)}};return si(C[0],"width"),A().fold(()=>de(C[0],"scope"),B=>Zs(C[0],"scope",B+"group")),ce(C[0])}})},Vk=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zk=(l,f)=>{const v=l.property().name(f);return cn(["ol","ul"],v)},jm=(l,f)=>{const v=l.property().name(f);return cn(Vk,v)},qm=(l,f)=>cn(["br","img","hr","input"],l.property().name(f)),Zf=Pm(),kw=l=>jm(Zf,l),Xe=l=>zk(Zf,l),Sv=l=>qm(Zf,l),jf=l=>{const f=hs("br"),v=ae=>Ho(ae,Ce=>f(Ce)||Qa(Ce)&&Xo(Ce).trim().length===0),C=ae=>Wo(ae)==="li"||rs(ae,Xe).isSome(),A=ae=>Ri(ae).map(Ce=>kw(Ce)?!0:Sv(Ce)?Wo(Ce)!=="img":!1).getOr(!1),B=ae=>Om(ae).bind(Ce=>{const Fe=A(Ce);return na(Ce).map(Ct=>Fe===!0||C(Ct)||f(Ce)||kw(Ct)&&!Zo(ae,Ct)?[]:[_e.fromTag("br")])}).getOr([]),J=(()=>{const ae=qo(l,Ce=>{const Fe=xo(Ce);return v(Fe)?[]:Fe.concat(B(Ce))});return ae.length===0?[_e.fromTag("br")]:ae})();ma(l[0]),Oa(l[0],J)},Gm=l=>C1(l,!0),xv=l=>{xc(l).length===0&&br(l)},ol=(l,f)=>({grid:l,cursor:f}),Aw=l=>To(l,f=>To(f.cells,v=>{const C=v.element;return bm(Gm(C),C)})),Ow=(l,f,v)=>{var C,A;const B=aa(l).rows;return ve.from((A=(C=B[f])===null||C===void 0?void 0:C.cells[v])===null||A===void 0?void 0:A.element).filter(Gm).orThunk(()=>Aw(B))},cc=(l,f,v)=>{const C=Ow(l,f,v);return ol(l,C)},hp=l=>tt(l,(v,C)=>ct(v,B=>B.row===C.row)?v:v.concat([C]),[]).sort((v,C)=>v.row-C.row),bx=(l,f,v,C)=>{const A=f[0].row,B=hp(f),U=os(B,(J,ae)=>({grid:ys(J.grid,A,ae.row+J.delta,v,C.getOrInit),delta:J.delta+1}),{grid:l,delta:0}).grid;return cc(U,A,f[0].column)},vx=(l,f,v,C)=>{const A=hp(f),B=A[A.length-1],U=B.row+B.rowspan,J=os(A,(ae,Ce)=>ys(ae,U,Ce.row,v,C.getOrInit),l);return cc(J,U,f[0].column)},Uk=(l,f,v,C)=>{const A=f.details,B=ef(A),U=B[0].column,J=os(B,(ae,Ce)=>({grid:pv(ae.grid,U,Ce.column+ae.delta,v,C.getOrInit),delta:ae.delta+1}),{grid:l,delta:0}).grid;return cc(J,A[0].row,U)},yx=(l,f,v,C)=>{const A=f.details,B=A[A.length-1],U=B.column+B.colspan,J=ef(A),ae=os(J,(Ce,Fe)=>pv(Ce,U,Fe.column,v,C.getOrInit),l);return cc(ae,A[0].row,U)},Wk=(l,f,v,C)=>{const A=ef(f),B=rn(A,J=>J.column),U=lx(l,B,!0,v,C.replaceOrInit);return cc(U,f[0].row,f[0].column)},wx=(l,f,v,C)=>{const A=ux(l,f,v,C.replaceOrInit);return cc(A,f[0].row,f[0].column)},Zk=(l,f,v,C)=>{const A=ef(f),B=rn(A,J=>J.column),U=lx(l,B,!1,v,C.replaceOrInit);return cc(U,f[0].row,f[0].column)},jk=(l,f,v,C)=>{const A=ux(l,f,v,C.replaceOrInit);return cc(A,f[0].row,f[0].column)},Ev=(l,f)=>(v,C,A,B,U)=>{const J=hp(C),ae=rn(J,Fe=>Fe.row),Ce=Sw(v,ae,l,f,A,B.replaceOrInit,U);return cc(Ce,C[0].row,C[0].column)},_v=Ev("thead",!0),qk=Ev("tbody",!1),Cx=Ev("tfoot",!1),Gk=(l,f,v,C)=>{const A=ef(f.details),B=Nk(l,rn(A,J=>J.column)),U=B.length>0?B[0].cells.length-1:0;return cc(B,A[0].row,Math.min(A[0].column,U))},Dw=(l,f,v,C)=>{const A=hp(f),B=Pk(l,A[0].row,A[A.length-1].row),U=Math.max(aa(B).rows.length-1,0);return cc(B,Math.min(f[0].row,U),f[0].column)},hr=(l,f,v,C)=>{const A=f.cells;jf(A);const B=mv(l,f.bounds,v,C.merge(A));return ol(B,ve.from(A[0]))},Rw=(l,f,v,C)=>{const B=os(f,(U,J)=>sx(U,J,v,C.unmerge(J)),l);return ol(B,ve.from(f[0]))},Sx=(l,f,v,C)=>{const B=((ae,Ce)=>{const Fe=co.fromTable(ae);return up(Fe,Ce,!0)})(f.clipboard,f.generators),U=du(f.row,f.column);return ko(U,l,B,f.generators,v).fold(()=>ol(l,ve.some(f.element)),ae=>cc(ae,f.row,f.column))},Tv=(l,f,v)=>{const C=Bh(l,v.section),A=co.generate(C);return up(A,f,!0)},kv=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[0].column,U=A[f.cells[0].row],J=Tv(f.clipboard,f.generators,U),ae=Mc(B,l,J,f.generators,v);return cc(ae,f.cells[0].row,f.cells[0].column)},$i=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[f.cells.length-1].column+f.cells[f.cells.length-1].colspan,U=A[f.cells[0].row],J=Tv(f.clipboard,f.generators,U),ae=Mc(B,l,J,f.generators,v);return cc(ae,f.cells[0].row,B)},Cl=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[0].row,U=A[B],J=Tv(f.clipboard,f.generators,U),ae=Qd(B,l,J,f.generators,v);return cc(ae,f.cells[0].row,f.cells[0].column)},Mw=(l,f,v,C)=>{const A=aa(l).rows,B=f.cells[f.cells.length-1].row+f.cells[f.cells.length-1].rowspan,U=A[f.cells[0].row],J=Tv(f.clipboard,f.generators,U),ae=Qd(B,l,J,f.generators,v);return cc(ae,B,f.cells[0].column)},Nw=(l,f)=>{const v=co.fromTable(l);return el(v,f).bind(A=>{const B=A[A.length-1],U=A[0].column,J=B.column+B.colspan,ae=uo(rn(v.all,Ce=>to(Ce.cells,Fe=>Fe.column>=U&&Fe.column<J)));return lv(ae)}).getOr("")},xx=(l,f)=>{const v=co.fromTable(l);return el(v,f).bind(lv).getOr("")},Pw=(l,f)=>{const v=co.fromTable(l);return el(v,f).bind(A=>{const B=A[A.length-1],U=A[0].row,J=B.row+B.rowspan,ae=v.all.slice(U,J);return ex(ae)}).getOr("")},P1=(l,f,v,C)=>$k(l,f,v,C.sizing),Av=(l,f,v,C)=>hx(l,f,v,C.sizing,C.resize),Ex=(l,f)=>ct(f,v=>v.column===0&&v.isLocked),lc=(l,f)=>ct(f,v=>v.column+v.colspan>=l.grid.columns&&v.isLocked),Km=(l,f)=>{const v=id(l),C=ef(f);return tt(C,(A,B)=>{const J=v[B.column].map(ts).getOr(0);return A+J},0)},bd=l=>(f,v)=>el(f,v).filter(C=>!(l?Ex:lc)(f,C)).map(C=>({details:C,pixelDelta:Km(f,C)})),Bw=(l,f)=>Mu(l,f).map(v=>({details:v,pixelDelta:-Km(l,v)})),tr=l=>(f,v)=>bw(f,v).filter(C=>!(l?Ex:lc)(f,C.cells)),Nu=ic.transform("th"),Ym=ic.transform("td"),Kk=Fi(bx,el,Ie,Ie,ic.modification),Iw=Fi(vx,el,Ie,Ie,ic.modification),_x=Fi(Uk,bd(!0),Av,Ie,ic.modification),dg=Fi(yx,bd(!1),Av,Ie,ic.modification),Ua=Fi(Gk,Bw,Av,xv,ic.modification),qf=Fi(Dw,el,Ie,xv,ic.modification),Yk=Fi(Wk,Mu,Ie,Ie,Nu),Lw=Fi(Zk,Mu,Ie,Ie,Ym),Xk=Fi(_v,Mu,Ie,Ie,Nu),Ov=Fi(qk,Mu,Ie,Ie,Ym),Fw=Fi(Cx,Mu,Ie,Ie,Ym),Dv=Fi(wx,Mu,Ie,Ie,Nu),nn=Fi(jk,Mu,Ie,Ie,Ym),B1=Fi(hr,ox,P1,Ie,ic.merging),$w=Fi(Rw,D1,P1,Ie,ic.merging),Tx=Fi(Sx,AM,P1,Ie,ic.modification),kx=Fi(kv,tr(!0),Ie,Ie,ic.modification),Jk=Fi($i,tr(!1),Ie,Ie,ic.modification),ui=Fi(Cl,bw,Ie,Ie,ic.modification),Qk=Fi(Mw,bw,Ie,Ie,ic.modification),Xm=Nw,Hw=xx,Ax=Pw,Si=(l,f)=>l.dispatch("NewRow",{node:f}),Jm=(l,f)=>l.dispatch("NewCell",{node:f}),Gf=(l,f,v)=>{l.dispatch("TableModified",{...v,table:f})},Ox=(l,f,v,C,A)=>{l.dispatch("TableSelectionChange",{cells:f,start:v,finish:C,otherCells:A})},eA=l=>{l.dispatch("TableSelectionClear")},tA=(l,f,v,C,A)=>{l.dispatch("ObjectResizeStart",{target:f,width:v,height:C,origin:A})},ya=(l,f,v,C,A)=>{l.dispatch("ObjectResized",{target:f,width:v,height:C,origin:A})},Pr={structure:!1,style:!0},us={structure:!0,style:!1},xi={structure:!0,style:!0},wa=(l,f)=>Dm(l)?_.percentageSize(f):Hf(l)?_.pixelSize(f):_.getTableSize(f),Ca=(l,f,v)=>{const C=Qn=>Wo(Xh(Qn))==="table",A=Qn=>!C(l)||Jd(Qn).rows>1,B=Qn=>!C(l)||Jd(Qn).columns>1,U=zS(l),J=ov(l)?Ie:T1,ae=Qn=>{switch(US(l)){case"section":return A1.section();case"sectionCells":return A1.sectionCells();case"cells":return A1.cells();default:return A1.getTableSectionType(Qn,"section")}},Ce=(Qn,Dl)=>Dl.cursor.fold(()=>{const Fu=xc(Qn);return xe(Fu).filter(pn).map(af=>{v.clearSelectedCells(Qn.dom);const Sa=l.dom.createRng();return Sa.selectNode(af.dom),l.selection.setRng(Sa),Zs(af,"data-mce-selected","1"),Sa})},Fu=>{const af=rc(Fu),Sa=l.dom.createRng();return Sa.setStart(af.element.dom,af.offset),Sa.setEnd(af.element.dom,af.offset),l.selection.setRng(Sa),v.clearSelectedCells(Qn.dom),ve.some(Sa)}),Fe=(Qn,Dl,Fu,af)=>(Sa,Io,NC=!1)=>{sc(Sa);const PC=_e.fromDom(l.getDoc()),D0=Ff(Fu,PC,U),zE={sizing:wa(l,Sa),resize:ov(l)?ng():Lm(),section:ae(Sa)};return Dl(Sa)?Qn(Sa,Io,D0,zE).bind(tm=>{f.refresh(Sa.dom),nt(tm.newRows,Pp=>{Si(l,Pp.dom)}),nt(tm.newCells,Pp=>{Jm(l,Pp.dom)});const kg=Ce(Sa,tm);return pn(Sa)&&(sc(Sa),NC||Gf(l,Sa.dom,af)),kg.map(Pp=>({rng:Pp,effect:af}))}):ve.none()},Ct=Fe(qf,A,Ie,us),Vt=Fe(Ua,B,Ie,us),Lt=Fe(Kk,$e,Ie,us),Mt=Fe(Iw,$e,Ie,us),un=Fe(_x,$e,J,us),ht=Fe(dg,$e,J,us),Tt=Fe(B1,$e,Ie,us),Nn=Fe($w,$e,Ie,us),Ln=Fe(kx,$e,Ie,us),bn=Fe(Jk,$e,Ie,us),ir=Fe(ui,$e,Ie,us),ds=Fe(Qk,$e,Ie,us),Br=Fe(Tx,$e,Ie,xi),Al=Fe(Dv,$e,Ie,us),ki=Fe(nn,$e,Ie,us),_g=Fe(Yk,$e,Ie,us),Tg=Fe(Lw,$e,Ie,us),as=Fe(Xk,$e,Ie,us),qa=Fe(Ov,$e,Ie,us),fc=Fe(Fw,$e,Ie,us);return{deleteRow:Ct,deleteColumn:Vt,insertRowsBefore:Lt,insertRowsAfter:Mt,insertColumnsBefore:un,insertColumnsAfter:ht,mergeCells:Tt,unmergeCells:Nn,pasteColsBefore:Ln,pasteColsAfter:bn,pasteRowsBefore:ir,pasteRowsAfter:ds,pasteCells:Br,makeCellsHeader:Al,unmakeCellsHeader:ki,makeColumnsHeader:_g,unmakeColumnsHeader:Tg,makeRowsHeader:as,makeRowsBody:qa,makeRowsFooter:fc,getTableRowType:Ax,getTableCellType:Hw,getTableColType:Xm}},Rv=(l,f,v)=>{const C=js(l,f,1);v===1||C<=1?de(l,f):Zs(l,f,Math.min(v,C))},Mv=(l,f)=>v=>{const C=v.column+v.colspan-1,A=v.column;return C>=l&&A<f},Dx=(l,f,v)=>{if(co.hasColumns(l)){const C=to(co.justColumns(l),Mv(f,v)),A=rn(C,U=>{const J=ec(U.element);return Rv(J,"span",v-f),J}),B=_e.fromTag("colgroup");return Oa(B,A),[B]}else return[]},Rx=(l,f,v)=>rn(l.all,C=>{const A=to(C.cells,Mv(f,v)),B=rn(A,J=>{const ae=ec(J.element);return Rv(ae,"colspan",v-f),ae}),U=_e.fromTag("tr");return Oa(U,B),U}),Mx=(l,f)=>{const v=co.fromTable(l);return Mu(v,f).map(A=>{const B=A[A.length-1],U=A[0].column,J=B.column+B.colspan,ae=Dx(v,U,J),Ce=Rx(v,U,J);return[...ae,...Ce]})},Nv=(l,f,v)=>{const C=co.fromTable(l);return el(C,f).bind(B=>{const U=up(C,v,!1),ae=aa(U).rows.slice(B[0].row,B[B.length-1].row+B[B.length-1].rowspan),Ce=qo(ae,Ct=>{const Vt=to(Ct.cells,Lt=>!Lt.isLocked);return Vt.length>0?[{...Ct,cells:Vt}]:[]}),Fe=fv(Ce);return bm(Fe.length>0,Fe)}).map(B=>tx(B))},Qm=pd.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Pv=(l,f,v)=>{const C=v.substring(0,v.length-l.length),A=parseFloat(C);return C===A.toString()?f(A):Qm.invalid(v)},gp={...Qm,from:l=>Wc(l,"%")?Pv("%",Qm.percent,l):Wc(l,"px")?Pv("px",Qm.pixels,l):Qm.invalid(l)},oA=(l,f)=>rn(l,v=>gp.from(v).fold(()=>v,A=>A/f*100+"%",A=>A+"%")),sA=(l,f,v)=>{const C=v/f;return rn(l,A=>gp.from(A).fold(()=>A,U=>U*C+"px",U=>U/100*v+"px"))},Nc=(l,f)=>{const v=l.fold(()=>ce(""),C=>{const A=C/f;return ce(A+"px")},()=>{const C=100/f;return ce(C+"%")});return Hn(f,v)},OM=(l,f,v)=>l.fold(()=>f,C=>sA(f,v,C),C=>oA(f,v)),Nx=(l,f,v)=>{const C=gp.from(v),A=Ho(l,B=>B==="0px")?Nc(C,l.length):OM(C,l,f);return vd(A)},Sl=(l,f)=>l.length===0?f:os(l,(v,C)=>gp.from(C).fold(ce(0),qe,qe)+v,0),Bv=(l,f)=>{const v=Math.floor(l);return{value:v+f,remainder:l-v}},I1=(l,f)=>gp.from(l).fold(ce(l),v=>v+f+"px",v=>v+f+"%"),vd=l=>{if(l.length===0)return l;const f=os(l,(C,A)=>{const B=gp.from(A).fold(()=>({value:A,remainder:0}),U=>Bv(U,"px"),U=>({value:U+"%",remainder:0}));return{output:[B.value].concat(C.output),remainder:C.remainder+B.remainder}},{output:[],remainder:0}),v=f.output;return v.slice(0,v.length-1).concat([I1(v[v.length-1],Math.round(f.remainder))])},uc=gp.from,eh=(l,f,v)=>{nt(f,C=>{const A=l.slice(C.column,C.colspan+C.column),B=Sl(A,Cr());Kr(C.element,"width",B+v)})},Vw=(l,f,v)=>{nt(f,(C,A)=>{const B=Sl([l[A]],Cr());Kr(C.element,"width",B+v)})},Iv=(l,f,v)=>{nt(v,C=>{si(C.element,"height")}),nt(f,(C,A)=>{Kr(C.element,"height",l[A])})},Px=l=>uc(l).fold(ce("px"),ce("px"),ce("%")),Kf=(l,f,v)=>{const C=co.fromTable(l),A=C.all,B=co.justCells(C),U=co.justColumns(C);f.each(J=>{const ae=Px(J),Ce=pa(l),Fe=ku(C,l),Ct=Nx(Fe,Ce,J);co.hasColumns(C)?Vw(Ct,U,ae):eh(Ct,B,ae),Kr(l,"width",J)}),v.each(J=>{const ae=Ee(l),Ce=Oc(C,l),Fe=Nx(Ce,ae,J);Iv(Fe,A,B),Kr(l,"height",J)})},Bx=wi,zw=tv,Ix=kc,L1=l=>{de(l,"width"),de(l,"height")},F1=l=>{const f=Jr(l);Kf(l,ve.some(f),ve.none()),L1(l)},$1=l=>{const f=Fo(l);Kf(l,ve.some(f),ve.none()),L1(l)},rA=l=>{const f=Gh(l);Kf(l,ve.none(),ve.some(f)),L1(l)},Lv=l=>{si(l,"width");const f=_f(l),v=f.length>0?f:xc(l);nt(v,C=>{si(C,"width"),L1(C)}),L1(l)},aA={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Lx=()=>_e.fromTag("th"),iA=()=>_e.fromTag("td"),Fv=()=>_e.fromTag("col"),Fx=(l,f,v,C)=>{const A=_e.fromTag("tr");for(let B=0;B<l;B++){const U=C<f||B<v?Lx():iA();B<v&&Zs(U,"scope","row"),C<f&&Zs(U,"scope","col"),Ls(U,_e.fromTag("br")),Ls(A,U)}return A},cA=l=>{const f=_e.fromTag("colgroup");return Hn(l,()=>Ls(f,Fv())),f},Uw=(l,f,v,C)=>Hn(l,A=>Fx(f,v,C,A)),$v=(l,f,v,C,A,B=aA)=>{const U=_e.fromTag("table"),J=A!=="cells";Fa(U,B.styles),Ta(U,B.attributes),B.colGroups&&Ls(U,cA(f));const ae=Math.min(l,v);if(J&&v>0){const Lt=_e.fromTag("thead");Ls(U,Lt);const un=Uw(v,f,A==="sectionCells"?ae:0,C);Oa(Lt,un)}const Ce=_e.fromTag("tbody");Ls(U,Ce);const Fe=J?l-ae:l,Vt=Uw(Fe,f,J?0:v,C);return Oa(Ce,Vt),U},lA=l=>l.dom.innerHTML,$x=l=>{const f=_e.fromTag("div"),v=_e.fromDom(l.dom.cloneNode(!0));return Ls(f,v),lA(f)},dc=(l,f)=>{l.selection.select(f.dom,!0),l.selection.collapse(!0)},Ww=(l,f)=>{oi(f,"td,th").each(jt(dc,l))},Zw=(l,f)=>{nt(Gn(f,"tr"),v=>{Si(l,v.dom),nt(Gn(v,"th,td"),C=>{Jm(l,C.dom)})})},jw=l=>K(l)&&l.indexOf("%")!==-1,Hv=(l,f,v,C,A)=>{const B=y1(l),U={styles:B,attributes:Li(l),colGroups:Wy(l)};return l.undoManager.ignore(()=>{const J=$v(v,f,A,C,US(l),U);Zs(J,"data-mce-id","__mce");const ae=$x(J);l.insertContent(ae),l.addVisual()}),oi(Xh(l),'table[data-mce-id="__mce"]').map(J=>(Hf(l)?$1(J):Xl(l)?Lv(J):(Dm(l)||jw(B.width))&&F1(J),sc(J),de(J,"data-mce-id"),Zw(l,J),Ww(l,J),J.dom)).getOrNull()},uA=(l,f,v,C={})=>{const A=B=>vt(B)&&B>0;if(A(f)&&A(v)){const B=C.headerRows||0,U=C.headerColumns||0;return Hv(l,v,f,U,B)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Vv=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Hx="x-tinymce/dom-table-",qw=Hx+"rows",Gw=Hx+"columns",Vx=l=>{const f=Vv.FakeClipboardItem(l);Vv.write([f])},pp=l=>{var f;const v=(f=Vv.read())!==null&&f!==void 0?f:[];return To(v,C=>ve.from(C.getType(l)))},zx=l=>{pp(l).isSome()&&Vv.clear()},Ux=l=>{l.fold(dA,f=>Vx({[qw]:f}))},Wx=()=>pp(qw),dA=()=>zx(qw),Zx=l=>{l.fold(fA,f=>Vx({[Gw]:f}))},jx=()=>pp(Gw),fA=()=>zx(Gw),zv=l=>JS(Ql(l),md(l)).filter(Mm),qx=l=>sw(Ql(l),md(l)).filter(Mm),bp=(l,f)=>{const v=md(l),C=()=>zv(l).each(ht=>{Sr(ht,v).filter(ne(v)).each(Tt=>{const Nn=_e.fromText("");if(ei(Tt,Nn),br(Tt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Ln=l.dom.createRng();Ln.setStart(Nn.dom,0),Ln.setEnd(Nn.dom,0),l.selection.setRng(Ln),l.nodeChanged()}})}),A=ht=>zv(l).each(Tt=>{Xl(l)||Hf(l)||Dm(l)||Sr(Tt,v).each(Ln=>{ht==="relative"&&!Bx(Ln)?F1(Ln):ht==="fixed"&&!zw(Ln)?$1(Ln):ht==="responsive"&&!Ix(Ln)&&Lv(Ln),sc(Ln),Gf(l,Ln.dom,us)})}),B=ht=>Sr(ht,v),U=ht=>qx(l).bind(Tt=>B(Tt).map(Nn=>ht(Nn,Tt))),J=(ht,Tt)=>{U(Nn=>{l.formatter.toggle("tableclass",{value:Tt},Nn.dom),Gf(l,Nn.dom,Pr)})},ae=(ht,Tt)=>{U(Nn=>{const Ln=$s(l),ir=Ho(Ln,ds=>l.formatter.match("tablecellclass",{value:Tt},ds.dom))?l.formatter.remove:l.formatter.apply;nt(Ln,ds=>ir("tablecellclass",{value:Tt},ds.dom)),Gf(l,Nn.dom,Pr)})},Ce=()=>{zv(l).each(ht=>{Sr(ht,v).each(Tt=>{Xn(Tt,"caption").fold(()=>{const Nn=_e.fromTag("caption");Ls(Nn,_e.fromText("Caption")),Sf(Tt,Nn,0),l.selection.setCursorLocation(Nn.dom,0)},Nn=>{hs("caption")(ht)&&ka("td",Tt).each(Ln=>l.selection.setCursorLocation(Ln.dom,0)),br(Nn)}),Gf(l,Tt.dom,us)})})},Fe=ht=>{l.focus()},Ct=(ht,Tt=!1)=>U((Nn,Ln)=>{const bn=iv($s(l),Nn,Ln);ht(Nn,bn,Tt).each(Fe)}),Vt=()=>U((ht,Tt)=>{const Nn=iv($s(l),ht,Tt),Ln=Ff(Ie,_e.fromDom(l.getDoc()),ve.none());return Nv(ht,Nn,Ln)}),Lt=()=>U((ht,Tt)=>{const Nn=iv($s(l),ht,Tt);return Mx(ht,Nn)}),Mt=(ht,Tt)=>Tt().each(Nn=>{const Ln=rn(Nn,bn=>ec(bn));U((bn,ir)=>{const ds=$f(_e.fromDom(l.getDoc())),Br=zf($s(l),ir,Ln,ds);ht(bn,Br).each(Fe)})}),un=ht=>(Tt,Nn)=>qr(Nn,"type").each(Ln=>{Ct(ht(Ln),Nn.no_events)});Mo({mceTableSplitCells:()=>Ct(f.unmergeCells),mceTableMergeCells:()=>Ct(f.mergeCells),mceTableInsertRowBefore:()=>Ct(f.insertRowsBefore),mceTableInsertRowAfter:()=>Ct(f.insertRowsAfter),mceTableInsertColBefore:()=>Ct(f.insertColumnsBefore),mceTableInsertColAfter:()=>Ct(f.insertColumnsAfter),mceTableDeleteCol:()=>Ct(f.deleteColumn),mceTableDeleteRow:()=>Ct(f.deleteRow),mceTableCutCol:()=>Lt().each(ht=>{Zx(ht),Ct(f.deleteColumn)}),mceTableCutRow:()=>Vt().each(ht=>{Ux(ht),Ct(f.deleteRow)}),mceTableCopyCol:()=>Lt().each(ht=>Zx(ht)),mceTableCopyRow:()=>Vt().each(ht=>Ux(ht)),mceTablePasteColBefore:()=>Mt(f.pasteColsBefore,jx),mceTablePasteColAfter:()=>Mt(f.pasteColsAfter,jx),mceTablePasteRowBefore:()=>Mt(f.pasteRowsBefore,Wx),mceTablePasteRowAfter:()=>Mt(f.pasteRowsAfter,Wx),mceTableDelete:C,mceTableCellToggleClass:ae,mceTableToggleClass:J,mceTableToggleCaption:Ce,mceTableSizingMode:(ht,Tt)=>A(Tt),mceTableCellType:un(ht=>ht==="th"?f.makeCellsHeader:f.unmakeCellsHeader),mceTableColType:un(ht=>ht==="th"?f.makeColumnsHeader:f.unmakeColumnsHeader),mceTableRowType:un(ht=>{switch(ht){case"header":return f.makeRowsHeader;case"footer":return f.makeRowsFooter;default:return f.makeRowsBody}})},(ht,Tt)=>l.addCommand(Tt,ht)),l.addCommand("mceInsertTable",(ht,Tt)=>{uA(l,Tt.rows,Tt.columns,Tt.options)}),l.addCommand("mceTableApplyCellStyle",(ht,Tt)=>{const Nn=ir=>"tablecell"+ir.toLowerCase().replace("-","");if(!j(Tt))return;const Ln=to($s(l),Mm);if(Ln.length===0)return;const bn=ws(Tt,(ir,ds)=>l.formatter.has(Nn(ds))&&K(ir));vc(bn)||(Mo(bn,(ir,ds)=>{const Br=Nn(ds);nt(Ln,Al=>{ir===""?l.formatter.remove(Br,{value:null},Al.dom,!0):l.formatter.apply(Br,{value:ir},Al.dom)})}),B(Ln[0]).each(ir=>Gf(l,ir.dom,Pr)))})},Gx=(l,f)=>{const v=md(l),C=A=>sw(Ql(l)).bind(B=>Sr(B,v).map(U=>{const J=iv($s(l),U,B);return A(U,J)})).getOr("");Mo({mceTableRowType:()=>C(f.getTableRowType),mceTableCellType:()=>C(f.getTableCellType),mceTableColType:()=>C(f.getTableColType)},(A,B)=>l.addQueryValueHandler(B,A))},Kw=pd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Kx=(l,f,v,C)=>l.fold(f,v,C),mA=l=>l.fold(qe,qe,qe),Pu=Kw.before,Uv=Kw.on,Wv=Kw.after,Ei={before:Pu,on:Uv,after:Wv,cata:Kx,getStart:mA},xl={create:(l,f)=>({selection:l,kill:f})},Yw=(l,f)=>{const v=l.document.createRange();return v.selectNode(f.dom),v},hA=(l,f)=>{const v=l.document.createRange();return th(v,f),v},th=(l,f)=>l.selectNodeContents(f.dom),H1=(l,f)=>{f.fold(v=>{l.setStartBefore(v.dom)},(v,C)=>{l.setStart(v.dom,C)},v=>{l.setStartAfter(v.dom)})},gA=(l,f)=>{f.fold(v=>{l.setEndBefore(v.dom)},(v,C)=>{l.setEnd(v.dom,C)},v=>{l.setEndAfter(v.dom)})},Yx=(l,f,v)=>{const C=l.document.createRange();return H1(C,f),gA(C,v),C},Xw=(l,f,v,C,A)=>{const B=l.document.createRange();return B.setStart(f.dom,v),B.setEnd(C.dom,A),B},Xx=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Zv=l=>{const f=l.getClientRects(),v=f.length>0?f[0]:l.getBoundingClientRect();return v.width>0||v.height>0?ve.some(v).map(Xx):ve.none()},V1=pd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jx=(l,f,v)=>f(_e.fromDom(v.startContainer),v.startOffset,_e.fromDom(v.endContainer),v.endOffset),Qx=(l,f)=>f.match({domRange:v=>({ltr:ce(v),rtl:ve.none}),relative:(v,C)=>({ltr:Hl(()=>Yx(l,v,C)),rtl:Hl(()=>ve.some(Yx(l,C,v)))}),exact:(v,C,A,B)=>({ltr:Hl(()=>Xw(l,v,C,A,B)),rtl:Hl(()=>ve.some(Xw(l,A,B,v,C)))})}),pA=(l,f)=>{const v=f.ltr();return v.collapsed?f.rtl().filter(A=>A.collapsed===!1).map(A=>V1.rtl(_e.fromDom(A.endContainer),A.endOffset,_e.fromDom(A.startContainer),A.startOffset)).getOrThunk(()=>Jx(l,V1.ltr,v)):Jx(l,V1.ltr,v)},jv=(l,f)=>{const v=Qx(l,f);return pA(l,v)},qv=(l,f)=>jv(l,f).match({ltr:(C,A,B,U)=>{const J=l.document.createRange();return J.setStart(C.dom,A),J.setEnd(B.dom,U),J},rtl:(C,A,B,U)=>{const J=l.document.createRange();return J.setStart(B.dom,U),J.setEnd(C.dom,A),J}});V1.ltr,V1.rtl;const vp={create:(l,f,v,C)=>({start:l,soffset:f,finish:v,foffset:C})},Gv={create:(l,f,v,C)=>({start:Ei.on(l,f),finish:Ei.on(v,C)})},Jw=(l,f)=>{const v=qv(l,f);return vp.create(_e.fromDom(v.startContainer),v.startOffset,_e.fromDom(v.endContainer),v.endOffset)},Kv=Gv.create,vA=(l,f,v,C,A,B,U)=>Zo(v,A)&&C===B?ve.none():lr(v,"td,th",f).bind(J=>lr(A,"td,th",f).bind(ae=>tE(l,f,J,ae,U))),tE=(l,f,v,C,A)=>Zo(v,C)?ve.none():sp(v,C,f).bind(B=>{const U=B.boxes.getOr([]);return U.length>1?(A(l,U,B.start,B.finish),ve.some(xl.create(ve.some(Kv(v,0,v,Va(v))),!0))):ve.none()}),fg=(l,f,v,C,A)=>{const B=U=>(A.clearBeforeUpdate(v),A.selectRange(v,U.boxes,U.start,U.finish),U.boxes);return tw(C,l,f,A.firstSelectedSelector,A.lastSelectedSelector).map(B)},nE=(l,f)=>({item:l,mode:f}),z1=(l,f,v,C=nh)=>l.property().parent(f).map(A=>nE(A,C)),nh=(l,f,v,C=U1)=>v.sibling(l,f).map(A=>nE(A,C)),U1=(l,f,v,C=U1)=>{const A=l.property().children(f);return v.first(A).map(U=>nE(U,C))},oE=[{current:z1,next:nh,fallback:ve.none()},{current:nh,next:U1,fallback:ve.some(z1)},{current:U1,next:U1,fallback:ve.some(nh)}],sE=(l,f,v,C,A=oE)=>W(A,U=>U.current===v).bind(U=>U.current(l,f,C,U.next).orThunk(()=>U.fallback.bind(J=>sE(l,f,J,C)))),yp={left:()=>({sibling:(v,C)=>v.query().prevSibling(C),first:v=>v.length>0?ve.some(v[v.length-1]):ve.none()}),right:()=>({sibling:(v,C)=>v.query().nextSibling(C),first:v=>v.length>0?ve.some(v[0]):ve.none()})},tf=(l,f,v,C,A,B)=>sE(l,f,C,A).bind(J=>B(J.item)?ve.none():v(J.item)?ve.some(J.item):tf(l,J.item,v,J.mode,A,B)),wA=(l,f,v,C)=>tf(l,f,v,nh,yp.left(),C),Qw=(l,f,v,C)=>tf(l,f,v,nh,yp.right(),C),rE=l=>f=>l.property().children(f).length===0,aE=(l,f,v)=>eC(l,f,rE(l),v),iE=(l,f,v)=>cE(l,f,rE(l),v),eC=wA,cE=Qw,oh=Pm(),lE=(l,f)=>aE(oh,l,f),mg=(l,f)=>iE(oh,l,f),sh=(l,f,v)=>eC(oh,l,f,v),W1=(l,f,v)=>cE(oh,l,f,v),wp=(l,f,v)=>rs(l,f,v).isSome(),Yv=pd.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),rh=(l,f,v)=>{const C=l.getRect(f),A=l.getRect(v);return A.right>C.left&&A.left<C.right},El=l=>lr(l,"tr"),Cp={...Yv,verify:(l,f,v,C,A,B,U)=>lr(C,"td,th",U).bind(J=>lr(f,"td,th",U).map(ae=>Zo(J,ae)?Zo(C,J)&&Va(J)===A?B(ae):Yv.none("in same cell"):Ru(El,[J,ae]).fold(()=>rh(l,ae,J)?Yv.success():B(ae),Ce=>B(ae)))).getOr(Yv.none("default")),cata:(l,f,v,C,A)=>l.fold(f,v,C,A)},uE=(l,f,v,C)=>({parent:l,children:f,element:v,index:C}),Sp=l=>na(l).bind(f=>{const v=xo(f);return xp(v,l).map(C=>uE(f,v,l,C))}),xp=(l,f)=>ta(l,jt(Zo,f)),di=hs("br"),Xv=(l,f,v)=>f(l,v).bind(C=>Qa(C)&&Xo(C).trim().length===0?Xv(C,f,v):ve.some(C)),Z1=(l,f,v)=>v.traverse(f).orThunk(()=>Xv(f,v.gather,l)).map(v.relative),Jv=(l,f)=>sa(l,f).filter(di).orThunk(()=>sa(l,f-1).filter(di)),dE=(l,f,v,C)=>Jv(f,v).bind(A=>C.traverse(A).fold(()=>Xv(A,C.gather,l).map(C.relative),B=>Sp(B).map(U=>Ei.on(U.parent,U.index)))),nC=(l,f,v,C)=>(di(f)?Z1(l,f,C):dE(l,f,v,C)).map(B=>({start:B,finish:B})),Qv=l=>Cp.cata(l,f=>ve.none(),()=>ve.none(),f=>ve.some(Qc(f,0)),f=>ve.some(Qc(f,Va(f)))),la=(l,f)=>({left:l.left,top:l.top+f,right:l.right,bottom:l.bottom+f}),e0=(l,f)=>({left:l.left,top:l.top-f,right:l.right,bottom:l.bottom-f}),nf=(l,f,v)=>({left:l.left+f,top:l.top+v,right:l.right+f,bottom:l.bottom+v}),fE=l=>l.top,oC=l=>l.bottom,Yf=(l,f,v)=>v>=0&&v<Va(f)?l.getRangedRect(f,v,f,v+1):v>0?l.getRangedRect(f,v-1,f,v):ve.none(),j1=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Ep=(l,f)=>ve.some(l.getRect(f)),t0=(l,f,v)=>Ys(f)?Ep(l,f).map(j1):Qa(f)?Yf(l,f,v).map(j1):ve.none(),n0=(l,f)=>Ys(f)?Ep(l,f).map(j1):Qa(f)?l.getRangedRect(f,0,f,Va(f)).map(j1):ve.none(),ah=5,SA=100,sl=pd.generate([{none:[]},{retry:["caret"]}]),yd=(l,f)=>l.left<f.left||Math.abs(f.right-l.left)<1||l.left>f.right,sC=(l,f,v)=>yt(f,kw).fold(Qt,C=>n0(l,C).exists(A=>yd(v,A))),mE=(l,f,v,C,A)=>{const B=la(A,ah);return Math.abs(v.bottom-C.bottom)<1||v.top>A.bottom?sl.retry(B):v.top===A.bottom?sl.retry(la(A,1)):sC(l,f,A)?sl.retry(nf(B,ah,0)):sl.none()},rC={point:fE,adjuster:(l,f,v,C,A)=>{const B=e0(A,ah);return Math.abs(v.top-C.top)<1||v.bottom<A.top?sl.retry(B):v.bottom===A.top?sl.retry(e0(A,1)):sC(l,f,A)?sl.retry(nf(B,ah,0)):sl.none()},move:e0,gather:lE},aC={point:oC,adjuster:mE,move:la,gather:mg},gE=(l,f,v)=>l.elementFromPoint(f,v).filter(C=>Wo(C)==="table").isSome(),pE=(l,f,v,C,A)=>Pc(l,f,v,f.move(C,ah),A),Pc=(l,f,v,C,A)=>A===0?ve.some(C):gE(l,C.left,f.point(C))?pE(l,f,v,C,A-1):l.situsFromPoint(C.left,f.point(C)).bind(B=>B.start.fold(ve.none,U=>n0(l,U).bind(J=>f.adjuster(l,U,J,v,C).fold(ve.none,ae=>Pc(l,f,v,ae,A-1))).orThunk(()=>ve.some(C)),ve.none)),hg=(l,f,v)=>l.point(f)>v.getInnerHeight()?ve.some(l.point(f)-v.getInnerHeight()):l.point(f)<0?ve.some(-l.point(f)):ve.none(),iC=(l,f,v)=>{const C=l.move(v,ah),A=Pc(f,l,v,C,SA).getOr(C);return hg(l,A,f).fold(()=>f.situsFromPoint(A.left,l.point(A)),B=>(f.scrollBy(0,B),f.situsFromPoint(A.left,l.point(A)-B)))},ih={tryUp:jt(iC,rC),tryDown:jt(iC,aC),getJumpSize:ce(ah)},Bc=20,rl=(l,f,v)=>l.getSelection().bind(C=>nC(f,C.finish,C.foffset,v).fold(()=>ve.some(Qc(C.finish,C.foffset)),A=>{const B=l.fromSitus(A),U=Cp.verify(l,C.finish,C.foffset,B.finish,B.foffset,v.failure,f);return Qv(U)})),_i=(l,f,v,C,A,B)=>B===0?ve.none():nu(l,f,v,C,A).bind(U=>{const J=l.fromSitus(U),ae=Cp.verify(l,v,C,J.finish,J.foffset,A.failure,f);return Cp.cata(ae,()=>ve.none(),()=>ve.some(U),Ce=>Zo(v,Ce)&&C===0?tu(l,v,C,e0,A):_i(l,f,Ce,0,A,B-1),Ce=>Zo(v,Ce)&&C===Va(Ce)?tu(l,v,C,la,A):_i(l,f,Ce,Va(Ce),A,B-1))}),tu=(l,f,v,C,A)=>t0(l,f,v).bind(B=>o0(l,A,C(B,ih.getJumpSize()))),o0=(l,f,v)=>{const C=Ud().browser;return C.isChromium()||C.isSafari()||C.isFirefox()?f.retry(l,v):ve.none()},nu=(l,f,v,C,A)=>t0(l,v,C).bind(B=>o0(l,A,B)),gg=(l,f,v)=>rl(l,f,v).bind(C=>_i(l,f,C.element,C.offset,v,Bc).map(l.fromSitus)),xA=(l,f)=>wp(l,v=>na(v).exists(C=>Zo(C,f))),cC=(l,f,v,C,A)=>lr(C,"td,th",f).bind(B=>lr(B,"table",f).bind(U=>xA(A,U)?gg(l,f,v).bind(J=>lr(J.finish,"td,th",f).map(ae=>({start:B,finish:ae,range:J}))):ve.none())),EA=(l,f,v,C,A,B)=>B(C,f).orThunk(()=>cC(l,f,v,C,A).map(U=>{const J=U.range;return xl.create(ve.some(Kv(J.start,J.soffset,J.finish,J.foffset)),!0)})),_A=(l,f)=>lr(l,"tr",f).bind(v=>lr(v,"table",f).bind(C=>{const A=Gn(C,"tr");return Zo(v,A[0])?sh(C,B=>Om(B).isSome(),f).map(B=>{const U=Va(B);return xl.create(ve.some(Kv(B,U,B,U)),!0)}):ve.none()})),bE=(l,f)=>lr(l,"tr",f).bind(v=>lr(v,"table",f).bind(C=>{const A=Gn(C,"tr");return Zo(v,A[A.length-1])?W1(C,B=>Gc(B).isSome(),f).map(B=>xl.create(ve.some(Kv(B,0,B,0)),!0)):ve.none()})),s0=(l,f,v,C,A,B,U)=>cC(l,v,C,A,B).bind(J=>tE(f,v,J.start,J.finish,U)),r0=l=>{let f=l;return{get:()=>f,set:A=>{f=A}}},Hi=l=>{const f=r0(ve.none()),v=()=>f.get().each(l);return{clear:()=>{v(),f.set(ve.none())},isSet:()=>f.get().isSome(),get:()=>f.get(),set:J=>{v(),f.set(ve.some(J))}}},_p=()=>{const l=Hi(Ie);return{...l,on:v=>l.get().each(v)}},Tp=(l,f)=>lr(l,"td,th",f),q1=l=>oa(l).exists(C1),lC=(l,f,v,C)=>{const A=_p(),B=A.clear,U=Fe=>{A.on(Ct=>{C.clearBeforeUpdate(f),Tp(Fe.target,v).each(Vt=>{sp(Ct,Vt,v).each(Lt=>{const Mt=Lt.boxes.getOr([]);if(Mt.length===1){const un=Mt[0],ht=Zy(un)==="false",Tt=ed(w1(Fe.target),un,Zo);ht&&Tt&&C.selectRange(f,Mt,un,un)}else Mt.length>1&&(C.selectRange(f,Mt,Lt.start,Lt.finish),l.selectContents(Vt))})})})};return{clearstate:B,mousedown:Fe=>{C.clear(f),Tp(Fe.target,v).filter(q1).each(A.set)},mouseover:Fe=>{U(Fe)},mouseup:Fe=>{U(Fe),B()}}},G1={traverse:Ri,gather:mg,relative:Ei.before,retry:ih.tryDown,failure:Cp.failedDown},K1={traverse:Ji,gather:lE,relative:Ei.before,retry:ih.tryUp,failure:Cp.failedUp},pg=l=>f=>f===l,uC=pg(38),a0=pg(40),Bu=l=>l>=37&&l<=40,vE={isBackward:pg(37),isForward:pg(39)},yE={isBackward:pg(39),isForward:pg(37)},Xf=l=>{const f=l!==void 0?l.dom:document,v=f.body.scrollLeft||f.documentElement.scrollLeft,C=f.body.scrollTop||f.documentElement.scrollTop;return Rn(v,C)},_l=(l,f,v)=>{const A=(v!==void 0?v.dom:document).defaultView;A&&A.scrollBy(l,f)},Y1=pd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bg=l=>Y1.exact(l.start,l.soffset,l.finish,l.foffset),ch=l=>l.match({domRange:f=>_e.fromDom(f.startContainer),relative:(f,v)=>Ei.getStart(f),exact:(f,v,C,A)=>f}),dC=Y1.domRange,i0=Y1.relative,wE=Y1.exact,TA=l=>{const f=ch(l);return es(f)},kA=vp.create,vg={domRange:dC,relative:i0,exact:wE,exactFromRange:bg,getWin:TA,range:kA},fC=(l,f,v)=>{var C;return ve.from((C=l.caretPositionFromPoint)===null||C===void 0?void 0:C.call(l,f,v)).bind(A=>{if(A.offsetNode===null)return ve.none();const B=l.createRange();return B.setStart(A.offsetNode,A.offset),B.collapse(),ve.some(B)})},kp=(l,f,v)=>{var C;return ve.from((C=l.caretRangeFromPoint)===null||C===void 0?void 0:C.call(l,f,v))},X1=(l,f,v)=>l.caretPositionFromPoint?fC(l,f,v):l.caretRangeFromPoint?kp(l,f,v):ve.none(),AA=(l,f,v)=>{const C=l.document;return X1(C,f,v).map(A=>vp.create(_e.fromDom(A.startContainer),A.startOffset,_e.fromDom(A.endContainer),A.endOffset))},c0=(l,f)=>{const v=Wo(l);return v==="input"?Ei.after(l):cn(["br","img"],v)?f===0?Ei.before(l):Ei.after(l):Ei.on(l,f)},mC=(l,f)=>{const v=l.fold(Ei.before,c0,Ei.after),C=f.fold(Ei.before,c0,Ei.after);return vg.relative(v,C)},hC=(l,f,v,C)=>{const A=c0(l,f),B=c0(v,C);return vg.relative(A,B)},l0=(l,f,v,C)=>{const B=Aa(l).dom.createRange();return B.setStart(l.dom,f),B.setEnd(v.dom,C),B},gC=(l,f,v,C)=>{const A=l0(l,f,v,C),B=Zo(l,v)&&f===C;return A.collapsed&&!B},Ap=l=>ve.from(l.getSelection()),u0=(l,f)=>{Ap(l).each(v=>{v.removeAllRanges(),v.addRange(f)})},d0=(l,f,v,C,A)=>{const B=Xw(l,f,v,C,A);u0(l,B)},f0=(l,f,v,C,A,B)=>{f.collapse(v.dom,C),f.extend(A.dom,B)},m0=(l,f)=>jv(l,f).match({ltr:(v,C,A,B)=>{d0(l,v,C,A,B)},rtl:(v,C,A,B)=>{Ap(l).each(U=>{if(U.setBaseAndExtent)U.setBaseAndExtent(v.dom,C,A.dom,B);else if(U.extend)try{f0(l,U,v,C,A,B)}catch{d0(l,A,B,v,C)}else d0(l,A,B,v,C)})}}),Do=(l,f,v,C,A)=>{const B=hC(f,v,C,A);m0(l,B)},of=(l,f,v)=>{const C=mC(f,v);m0(l,C)},yg=l=>{if(l.rangeCount>0){const f=l.getRangeAt(0),v=l.getRangeAt(l.rangeCount-1);return ve.some(vp.create(_e.fromDom(f.startContainer),f.startOffset,_e.fromDom(v.endContainer),v.endOffset))}else return ve.none()},h0=l=>{if(l.anchorNode===null||l.focusNode===null)return yg(l);{const f=_e.fromDom(l.anchorNode),v=_e.fromDom(l.focusNode);return gC(f,l.anchorOffset,v,l.focusOffset)?ve.some(vp.create(f,l.anchorOffset,v,l.focusOffset)):yg(l)}},g0=(l,f,v=!0)=>{const A=(v?hA:Yw)(l,f);u0(l,A)},lh=l=>Ap(l).filter(f=>f.rangeCount>0).bind(h0),p0=l=>lh(l).map(f=>vg.exact(f.start,f.soffset,f.finish,f.foffset)),pC=(l,f)=>{const v=qv(l,f);return Zv(v)},bC=(l,f,v)=>AA(l,f,v),vC=l=>{Ap(l).each(f=>f.removeAllRanges())},Jf=l=>({elementFromPoint:(ht,Tt)=>_e.fromPoint(_e.fromDom(l.document),ht,Tt),getRect:ht=>ht.dom.getBoundingClientRect(),getRangedRect:(ht,Tt,Nn,Ln)=>{const bn=vg.exact(ht,Tt,Nn,Ln);return pC(l,bn)},getSelection:()=>p0(l).map(ht=>Jw(l,ht)),fromSitus:ht=>{const Tt=vg.relative(ht.start,ht.finish);return Jw(l,Tt)},situsFromPoint:(ht,Tt)=>bC(l,ht,Tt).map(Nn=>Gv.create(Nn.start,Nn.soffset,Nn.finish,Nn.foffset)),clearSelection:()=>{vC(l)},collapseSelection:(ht=!1)=>{p0(l).each(Tt=>Tt.fold(Nn=>Nn.collapse(ht),(Nn,Ln)=>{const bn=ht?Nn:Ln;of(l,bn,bn)},(Nn,Ln,bn,ir)=>{const ds=ht?Nn:bn,Br=ht?Ln:ir;Do(l,ds,Br,ds,Br)}))},setSelection:ht=>{Do(l,ht.start,ht.soffset,ht.finish,ht.foffset)},setRelativeSelection:(ht,Tt)=>{of(l,ht,Tt)},selectNode:ht=>{g0(l,ht,!1)},selectContents:ht=>{g0(l,ht)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Xf(_e.fromDom(l.document)).top,scrollBy:(ht,Tt)=>{_l(ht,Tt,_e.fromDom(l.document))}}),wg=(l,f)=>({rows:l,cols:f}),CE=(l,f,v,C)=>{const A=Jf(l),B=lC(A,f,v,C);return{clearstate:B.clearstate,mousedown:B.mousedown,mouseover:B.mouseover,mouseup:B.mouseup}},J1=l=>yt(l,Sn).exists(C1),yC=(l,f)=>J1(l)||J1(f),b0=(l,f,v,C)=>{const A=Jf(l),B=()=>(C.clear(f),ve.none());return{keydown:(ae,Ce,Fe,Ct,Vt,Lt)=>{const Mt=ae.raw,un=Mt.which,ht=Mt.shiftKey===!0;return E1(f,C.selectedSelector).fold(()=>(Bu(un)&&!ht&&C.clearBeforeUpdate(f),Bu(un)&&ht&&!yC(Ce,Ct)?ve.none:a0(un)&&ht?jt(s0,A,f,v,G1,Ct,Ce,C.selectRange):uC(un)&&ht?jt(s0,A,f,v,K1,Ct,Ce,C.selectRange):a0(un)?jt(EA,A,v,G1,Ct,Ce,bE):uC(un)?jt(EA,A,v,K1,Ct,Ce,_A):ve.none),Nn=>{const Ln=bn=>()=>To(bn,ds=>fg(ds.rows,ds.cols,f,Nn,C)).fold(()=>GS(f,C.firstSelectedSelector,C.lastSelectedSelector).map(ds=>{const Br=a0(un)||Lt.isForward(un)?Ei.after:Ei.before;return A.setRelativeSelection(Ei.on(ds.first,0),Br(ds.table)),C.clear(f),xl.create(ve.none(),!0)}),ds=>ve.some(xl.create(ve.none(),!0)));return Bu(un)&&ht&&!yC(Ce,Ct)?ve.none:a0(un)&&ht?Ln([wg(1,0)]):uC(un)&&ht?Ln([wg(-1,0)]):Lt.isBackward(un)&&ht?Ln([wg(0,-1),wg(-1,0)]):Lt.isForward(un)&&ht?Ln([wg(0,1),wg(1,0)]):Bu(un)&&!ht?B:ve.none})()},keyup:(ae,Ce,Fe,Ct,Vt)=>E1(f,C.selectedSelector).fold(()=>{const Lt=ae.raw,Mt=Lt.which;return Lt.shiftKey===!0&&Bu(Mt)&&yC(Ce,Ct)?vA(f,v,Ce,Fe,Ct,Vt,C.selectRange):ve.none()},ve.none)}},v0=(l,f,v,C)=>{const A=Jf(l);return(B,U)=>{C.clearBeforeUpdate(f),sp(B,U,v).each(J=>{const ae=J.boxes.getOr([]);C.selectRange(f,ae,J.start,J.finish),A.selectContents(U),A.collapseSelection()})}},wC=(l,f)=>{const v=Tr(l,f);return v===void 0||v===""?[]:v.split(" ")},SE=(l,f,v)=>{const A=wC(l,f).concat([v]);return Zs(l,f,A.join(" ")),!0},Qf=(l,f,v)=>{const C=to(wC(l,f),A=>A!==v);return C.length>0?Zs(l,f,C.join(" ")):de(l,f),!1},y0=l=>l.dom.classList!==void 0,xE=l=>wC(l,"class"),ou=(l,f)=>SE(l,"class",f),Wa=(l,f)=>Qf(l,"class",f),em=(l,f)=>{y0(l)?l.dom.classList.add(f):ou(l,f)},CC=l=>{(y0(l)?l.dom.classList:xE(l)).length===0&&de(l,"class")},OA=(l,f)=>{y0(l)?l.dom.classList.remove(f):Wa(l,f),CC(l)},w0=(l,f)=>y0(l)&&l.dom.classList.contains(f),SC=(l,f)=>{nt(f,v=>{OA(l,v)})},Op=l=>f=>{em(f,l)},EE=l=>f=>{SC(f,l)},RA={byClass:l=>{const f=Op(l.selected),v=EE([l.selected,l.lastSelected,l.firstSelected]),C=B=>{const U=Gn(B,l.selectedSelector);nt(U,v)};return{clearBeforeUpdate:C,clear:C,selectRange:(B,U,J,ae)=>{C(B),nt(U,f),em(J,l.firstSelected),em(ae,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,f,v)=>{const C=ae=>{de(ae,l.selected),de(ae,l.firstSelected),de(ae,l.lastSelected)},A=ae=>{Zs(ae,l.selected,"1")},B=ae=>{U(ae),v()},U=ae=>{const Ce=Gn(ae,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);nt(Ce,C)};return{clearBeforeUpdate:U,clear:B,selectRange:(ae,Ce,Fe,Ct)=>{B(ae),nt(Ce,A),Zs(Fe,l.firstSelected,"1"),Zs(Ct,l.lastSelected,"1"),f(Ce,Fe,Ct)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},_E=(l,f,v,C)=>{switch(l.tag){case"none":return f();case"single":return C(l.element);case"multiple":return v(l.elements)}},TE=()=>({tag:"none"}),Xt=l=>({tag:"multiple",elements:l}),Za=l=>({tag:"single",element:l}),Q1=(l,f,v)=>({get:()=>Bm(l(),v).fold(()=>f().fold(TE,Za),Xt)}),ja=(l,f)=>{const v=l.slice(0,f[f.length-1].row+1),C=fv(v);return qo(C,A=>{const B=A.cells.slice(0,f[f.length-1].column+1);return rn(B,U=>U.element)})},su=(l,f)=>{const v=l.slice(f[0].row+f[0].rowspan-1,l.length),C=fv(v);return qo(C,A=>{const B=A.cells.slice(f[0].column+f[0].colspan-1,A.cells.length);return rn(B,U=>U.element)})},xC=(l,f,v)=>{const C=co.fromTable(l);return el(C,f).map(B=>{const U=up(C,v,!1),{rows:J}=aa(U),ae=ja(J,B),Ce=su(J,B);return{upOrLeftCells:ae,downOrRightCells:Ce}})},Cg=(l,f,v,C,A,B,U)=>({target:l,x:f,y:v,stop:C,prevent:A,kill:B,raw:U}),eb=l=>{const f=_e.fromDom(qt(l).getOr(l.target)),v=()=>l.stopPropagation(),C=()=>l.preventDefault(),A=on(C,v);return Cg(f,l.clientX,l.clientY,v,C,A,l)},Sg=(l,f)=>v=>{l(v)&&f(eb(v))},tb=(l,f,v,C,A)=>{const B=Sg(v,C);return l.dom.addEventListener(f,B,A),{unbind:jt(MA,l,f,B,A)}},kE=(l,f,v,C)=>tb(l,f,v,C,!1),MA=(l,f,v,C)=>{l.dom.removeEventListener(f,v,C)},NA=$e,Dp=(l,f,v)=>kE(l,f,NA,v),xg=eb,EC=l=>!w0(_e.fromDom(l.target),"ephox-snooker-resizer-bar"),_C=(l,f)=>{const v=Q1(()=>_e.fromDom(l.getBody()),()=>sw(Ql(l),md(l)),Vf.selectedSelector),C=(ae,Ce,Fe)=>{Sr(Ce).each(Vt=>{const Lt=rn(ae,Nn=>Nn.dom),Mt=zS(l),un=Ff(Ie,_e.fromDom(l.getDoc()),Mt),ht=$s(l),Tt=xC(Vt,{selection:ht},un).map(Nn=>$r(Nn,Ln=>rn(Ln,bn=>bn.dom))).getOrUndefined();Ox(l,Lt,Ce.dom,Fe.dom,Tt)})},A=()=>eA(l),B=RA.byAttr(Vf,C,A);return l.on("init",ae=>{const Ce=l.getWin(),Fe=Xh(l),Ct=md(l),Vt=()=>{const as=l.selection,qa=_e.fromDom(as.getStart()),fc=_e.fromDom(as.getEnd());Ru(Sr,[qa,fc]).fold(()=>B.clear(Fe),Ie)},Lt=CE(Ce,Fe,Ct,B),Mt=b0(Ce,Fe,Ct,B),un=v0(Ce,Fe,Ct,B),ht=as=>as.raw.shiftKey===!0;l.on("TableSelectorChange",as=>un(as.start,as.finish));const Tt=(as,qa)=>{ht(as)&&(qa.kill&&as.kill(),qa.selection.each(fc=>{const Lu=vg.relative(fc.start,fc.finish),Ol=qv(Ce,Lu);l.selection.setRng(Ol)}))},Nn=as=>{const qa=xg(as);if(qa.raw.shiftKey&&Bu(qa.raw.which)){const fc=l.selection.getRng(),Lu=_e.fromDom(fc.startContainer),Ol=_e.fromDom(fc.endContainer);Mt.keyup(qa,Lu,fc.startOffset,Ol,fc.endOffset).each(Np=>{Tt(qa,Np)})}},Ln=as=>{const qa=xg(as);f.hide();const fc=l.selection.getRng(),Lu=_e.fromDom(fc.startContainer),Ol=_e.fromDom(fc.endContainer),Np=I(vE,yE)(_e.fromDom(l.selection.getStart()));Mt.keydown(qa,Lu,fc.startOffset,Ol,fc.endOffset,Np).each(Qn=>{Tt(qa,Qn)}),f.show()},bn=as=>as.button===0,ir=as=>as.buttons===void 0?!0:(as.buttons&1)!==0,ds=as=>{Lt.clearstate()},Br=as=>{bn(as)&&EC(as)&&Lt.mousedown(xg(as))},Al=as=>{ir(as)&&EC(as)&&Lt.mouseover(xg(as))},ki=as=>{bn(as)&&EC(as)&&Lt.mouseup(xg(as))},Tg=(()=>{const as=r0(_e.fromDom(Fe)),qa=r0(0);return{touchEnd:Lu=>{const Ol=_e.fromDom(Lu.target);if(hs("td")(Ol)||hs("th")(Ol)){const Np=as.get(),Qn=qa.get();Zo(Np,Ol)&&Lu.timeStamp-Qn<300&&(Lu.preventDefault(),un(Ol,Ol))}as.set(Ol),qa.set(Lu.timeStamp)}}})();l.on("dragstart",ds),l.on("mousedown",Br),l.on("mouseover",Al),l.on("mouseup",ki),l.on("touchend",Tg.touchEnd),l.on("keyup",Nn),l.on("keydown",Ln),l.on("NodeChange",Vt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Vf.firstSelected),l.serializer.addTempAttr(Vf.lastSelected)}),{getSelectedCells:()=>_E(v.get(),ce([]),ae=>rn(ae,Ce=>Ce.dom),ae=>[ae.dom]),clearSelectedCells:ae=>B.clear(_e.fromDom(ae))}},al=l=>{let f=[];return{bind:B=>{if(B===void 0)throw new Error("Event bind error: undefined handler");f.push(B)},unbind:B=>{f=to(f,U=>U!==B)},trigger:(...B)=>{const U={};nt(l,(J,ae)=>{U[J]=B[ae]}),nt(f,J=>{J(U)})}}},sf=l=>{const f=$r(l,C=>({bind:C.bind,unbind:C.unbind})),v=$r(l,C=>C.trigger);return{registry:f,trigger:v}},C0=(l,f)=>{let v=null;const C=()=>{Se(v)||(clearTimeout(v),v=null)};return{cancel:C,throttle:(...B)=>{C(),v=setTimeout(()=>{v=null,l.apply(null,B)},f)}}},Iu=l=>l.slice(0).sort(),S0=(l,f)=>{throw new Error("All required keys ("+Iu(l).join(", ")+") were not specified. Specified keys were: "+Iu(f).join(", ")+".")},PA=l=>{throw new Error("Unsupported keys for object: "+Iu(l).join(", "))},x0=(l,f)=>{if(!ue(f))throw new Error("The "+l+" fields must be an array. Was: "+f+".");nt(f,v=>{if(!K(v))throw new Error("The value "+v+" in the "+l+" fields was not a string.")})},E0=(l,f)=>{throw new Error("All values need to be of type: "+f+". Keys ("+Iu(l).join(", ")+") were not.")},BA=l=>{const f=Iu(l);W(f,(C,A)=>A<f.length-1&&C===f[A+1]).each(C=>{throw new Error("The field: "+C+" occurs more than once in the combined fields: ["+f.join(", ")+"].")})},IA=(l,f)=>LA(l,f,{validate:Nt,label:"function"}),LA=(l,f,v)=>{if(f.length===0)throw new Error("You must specify at least one required field.");return x0("required",f),BA(f),C=>{const A=Zt(C);Ho(f,J=>cn(A,J))||S0(f,A),l(f,A);const U=to(f,J=>!v.validate(C[J],J));return U.length>0&&E0(U,v.label),C}},FA=(l,f)=>{const v=to(f,C=>!cn(l,C));v.length>0&&PA(v)},_0=l=>IA(FA,l),AE=_0(["compare","extract","mutate","sink"]),$A=_0(["element","start","stop","destroy"]),T0=_0(["forceDrop","drop","move","delayDrop"]),Ti=()=>{let l=ve.none();const f=()=>{l=ve.none()},v=(B,U)=>{const J=l.map(ae=>B.compare(ae,U));return l=ve.some(U),J},C=(B,U)=>{U.extract(B).each(ae=>{v(U,ae).each(Fe=>{A.trigger.move(Fe)})})},A=sf({move:al(["info"])});return{onEvent:C,reset:f,events:A.registry}},ru=()=>{const l=sf({move:al(["info"])});return{onEvent:Ie,reset:Ie,events:l.registry}},Tl=()=>{const l=ru(),f=Ti();let v=l;return{on:()=>{v.reset(),v=f},off:()=>{v.reset(),v=l},isOn:()=>v===f,onEvent:(J,ae)=>{v.onEvent(J,ae)},events:f.events}},k0=(l,f,v)=>{let C=!1;const A=sf({start:al([]),stop:al([])}),B=Tl(),U=()=>{Mt.stop(),B.isOn()&&(B.off(),A.trigger.stop())},J=C0(U,200),ae=ht=>{Mt.start(ht),B.on(),A.trigger.start()},Ce=ht=>{J.cancel(),B.onEvent(ht,f)};B.events.move.bind(ht=>{f.mutate(l,ht.info)});const Fe=()=>{C=!0},Ct=()=>{C=!1},Vt=()=>C,Lt=ht=>(...Tt)=>{C&&ht.apply(null,Tt)},Mt=f.sink(T0({forceDrop:U,drop:Lt(U),move:Lt(Ce),delayDrop:Lt(J.throttle)}),v),un=()=>{Mt.destroy()};return{element:Mt.element,go:ae,on:Fe,off:Ct,isActive:Vt,destroy:un,events:A.registry}},nb=l=>{const f=l.replace(/\./g,"-");return{resolve:C=>f+"-"+C}},ob=nb("ephox-dragster").resolve,HA=l=>{const f={layerClass:ob("blocker"),...l},v=_e.fromTag("div");return Zs(v,"role","presentation"),Fa(v,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),em(v,ob("blocker")),em(v,f.layerClass),{element:ce(v),destroy:()=>{br(v)}}};var ME=AE({compare:(l,f)=>Rn(f.left-l.left,f.top-l.top),extract:l=>ve.some(Rn(l.x,l.y)),sink:(l,f)=>{const v=HA(f),C=Dp(v.element(),"mousedown",l.forceDrop),A=Dp(v.element(),"mouseup",l.drop),B=Dp(v.element(),"mousemove",l.move),U=Dp(v.element(),"mouseout",l.delayDrop),J=()=>{v.destroy(),A.unbind(),B.unbind(),U.unbind(),C.unbind()},ae=Fe=>{Ls(Fe,v.element())},Ce=()=>{br(v.element())};return $A({element:v.element,start:ae,stop:Ce,destroy:J})},mutate:(l,f)=>{l.mutate(f.left,f.top)}});const A0=(l,f={})=>{var v;const C=(v=f.mode)!==null&&v!==void 0?v:ME;return k0(l,C,f)},bt=nb("ephox-snooker").resolve,kl=()=>{const l=sf({drag:al(["xDelta","yDelta"])});return{mutate:(v,C)=>{l.trigger.drag(v,C)},events:l.registry}},PE=()=>{const l=sf({drag:al(["xDelta","yDelta","target"])});let f=ve.none();const v=kl();return v.events.drag.bind(B=>{f.each(U=>{l.trigger.drag(B.xDelta,B.yDelta,U)})}),{assign:B=>{f=ve.some(B)},get:()=>f,mutate:v.mutate,events:l.registry}},TC=(l,f,v,C,A)=>{const B=_e.fromTag("div");return Fa(B,{position:"absolute",left:f-C/2+"px",top:v+"px",height:A+"px",width:C+"px"}),Ta(B,{"data-column":l,role:"presentation"}),B},sb=(l,f,v,C,A)=>{const B=_e.fromTag("div");return Fa(B,{position:"absolute",left:f+"px",top:v-A/2+"px",height:A+"px",width:C+"px"}),Ta(B,{"data-row":l,role:"presentation"}),B},Eg=bt("resizer-bar"),kC=bt("resizer-rows"),rb=bt("resizer-cols"),BE=7,zA=(l,f)=>qo(l.all,(v,C)=>f(v.element)?[C]:[]),AC=(l,f)=>{const v=[];return Hn(l.grid.columns,C=>{co.getColumnAt(l,C).map(B=>B.element).forall(f)&&v.push(C)}),to(v,C=>{const A=co.filterItems(l,B=>B.column===C);return Ho(A,B=>f(B.element))})},ab=l=>{const f=Gn(l.parent(),"."+Eg);nt(f,br)},uh=(l,f,v)=>{const C=l.origin();nt(f,A=>{A.each(B=>{const U=v(C,B);em(U,Eg),Ls(l.parent(),U)})})},IE=(l,f,v,C)=>{uh(l,f,(A,B)=>{const U=TC(B.col,B.x-A.left,v.top-A.top,BE,C);return em(U,rb),U})},LE=(l,f,v,C)=>{uh(l,f,(A,B)=>{const U=sb(B.row,v.left-A.left,B.y-A.top,C,BE);return em(U,kC),U})},UA=(l,f,v,C,A)=>{const B=xr(v),U=f.isResizable,J=C.length>0?Bi.positions(C,v):[],ae=J.length>0?zA(l,U):[],Ce=to(J,(Lt,Mt)=>ct(ae,un=>Mt===un));LE(f,Ce,B,ts(v));const Fe=A.length>0?Zh.positions(A,v):[],Ct=Fe.length>0?AC(l,U):[],Vt=to(Fe,(Lt,Mt)=>ct(Ct,un=>Mt===un));IE(f,Vt,B,mt(v))},OC=(l,f)=>{if(ab(l),l.isResizable(f)){const v=co.fromTable(f),C=Em(v),A=id(v);UA(v,l,f,C,A)}},WA=(l,f)=>{const v=Gn(l.parent(),"."+Eg);nt(v,f)},il=l=>{WA(l,f=>{Kr(f,"display","none")})},Ki=l=>{WA(l,f=>{Kr(f,"display","block")})},Rp=l=>w0(l,kC),PM=l=>w0(l,rb),ZA=bt("resizer-bar-dragging"),DC=l=>{const f=PE(),v=A0(f,{});let C=ve.none();const A=(Mt,un)=>ve.from(Tr(Mt,un));f.events.drag.bind(Mt=>{A(Mt.target,"data-row").each(un=>{const ht=pi(Mt.target,"top");Kr(Mt.target,"top",ht+Mt.yDelta+"px")}),A(Mt.target,"data-column").each(un=>{const ht=pi(Mt.target,"left");Kr(Mt.target,"left",ht+Mt.xDelta+"px")})});const B=(Mt,un)=>{const ht=pi(Mt,un),Tt=js(Mt,"data-initial-"+un,0);return ht-Tt};v.events.stop.bind(()=>{f.get().each(Mt=>{C.each(un=>{A(Mt,"data-row").each(ht=>{const Tt=B(Mt,"top");de(Mt,"data-initial-top"),Lt.trigger.adjustHeight(un,Tt,parseInt(ht,10))}),A(Mt,"data-column").each(ht=>{const Tt=B(Mt,"left");de(Mt,"data-initial-left"),Lt.trigger.adjustWidth(un,Tt,parseInt(ht,10))}),OC(l,un)})})});const U=(Mt,un)=>{Lt.trigger.startAdjust(),f.assign(Mt),Zs(Mt,"data-initial-"+un,pi(Mt,un)),em(Mt,ZA),Kr(Mt,"opacity","0.2"),v.go(l.parent())},J=Dp(l.parent(),"mousedown",Mt=>{Rp(Mt.target)&&U(Mt.target,"top"),PM(Mt.target)&&U(Mt.target,"left")}),ae=Mt=>Zo(Mt,l.view()),Ce=Mt=>lr(Mt,"table",ae).filter(C1),Fe=Dp(l.view(),"mouseover",Mt=>{Ce(Mt.target).fold(()=>{pn(Mt.target)&&ab(l)},un=>{v.isActive()&&(C=ve.some(un),OC(l,un))})}),Ct=()=>{J.unbind(),Fe.unbind(),v.destroy(),ab(l)},Vt=Mt=>{OC(l,Mt)},Lt=sf({adjustHeight:al(["table","delta","row"]),adjustWidth:al(["table","delta","column"]),startAdjust:al([])});return{destroy:Ct,refresh:Vt,on:v.on,off:v.off,hideBars:jt(il,l),showBars:jt(Ki,l),events:Lt.registry}},jA={create:(l,f,v)=>{const C=Bi,A=Zh,B=DC(l),U=sf({beforeResize:al(["table","type"]),afterResize:al(["table","type"]),startDrag:al([])});return B.events.adjustHeight.bind(J=>{const ae=J.table;U.trigger.beforeResize(ae,"row");const Ce=C.delta(J.delta,ae);_w(ae,Ce,J.row),U.trigger.afterResize(ae,"row")}),B.events.startAdjust.bind(J=>{U.trigger.startDrag()}),B.events.adjustWidth.bind(J=>{const ae=J.table;U.trigger.beforeResize(ae,"col");const Ce=A.delta(J.delta,ae),Fe=v(ae);Ew(ae,Ce,J.column,f,Fe),U.trigger.afterResize(ae,"col")}),{on:B.on,off:B.off,refreshBars:B.refresh,hideBars:B.hideBars,showBars:B.showBars,destroy:B.destroy,events:U.registry}}},rf={only:(l,f)=>{const v=ul(l)?Ko(l):l;return{parent:ce(v),view:ce(l),origin:ce(Rn(0,0)),isResizable:f}},detached:(l,f,v)=>{const C=()=>xr(f);return{parent:ce(f),view:ce(l),origin:C,isResizable:v}},body:(l,f,v)=>({parent:ce(f),view:ce(l),origin:ce(Rn(0,0)),isResizable:v})},O0=()=>{const l=_e.fromTag("div");return Fa(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ls(Dr(),l),l},GA=(l,f)=>l.inline?rf.body(_e.fromDom(l.getBody()),O0(),f):rf.only(_e.fromDom(l.getDoc()),f),KA=(l,f)=>{l.inline&&br(f.parent())},$E=l=>Ut(l)&&l.nodeName==="TABLE",ib="bar-",RC=l=>Tr(l,"data-mce-resize")!=="false",HE=l=>{const f=co.fromTable(l);co.hasColumns(f)||nt(xc(l),v=>{const C=Yr(v,"width");Kr(v,"width",C),de(v,"width")})},IM=l=>ga(l,"corner-"),Mp=l=>vm(l,"corner-"),MC=l=>{const f=_p(),v=_p(),C=_p();let A,B,U,J;const ae=Tt=>wa(l,Tt),Ce=()=>Nr(l)?Lm():ng(),Fe=Tt=>Jd(Tt).columns,Ct=Tt=>Jd(Tt).rows,Vt=(Tt,Nn,Ln,bn)=>{const ir=Mp(Nn),ds=Wc(ir,"e"),Br=ga(ir,"n");if(B===""&&F1(Tt),J===""&&rA(Tt),Ln!==A&&B!==""){Kr(Tt,"width",B);const Al=Ce(),ki=ae(Tt),_g=Nr(l)||ds?Fe(Tt)-1:0;Ew(Tt,Ln-A,_g,Al,ki)}else if(ZS(B)){const Al=parseFloat(B.replace("%","")),ki=Ln*Al/A;Kr(Tt,"width",ki+"%")}if(jS(B)&&HE(Tt),bn!==U&&J!==""){Kr(Tt,"height",J);const Al=Br?0:Ct(Tt)-1;_w(Tt,bn-U,Al)}},Lt=()=>{v.on(Tt=>{Tt.destroy()}),C.on(Tt=>{KA(l,Tt)})};return l.on("init",()=>{const Tt=GA(l,RC);if(C.set(Tt),ud(l)&&Jl(l)){const Nn=Ce(),Ln=jA.create(Tt,Nn,ae);Ln.on(),Ln.events.startDrag.bind(bn=>{f.set(l.selection.getRng())}),Ln.events.beforeResize.bind(bn=>{const ir=bn.table.dom;tA(l,ir,Rm(ir),jy(ir),ib+bn.type)}),Ln.events.afterResize.bind(bn=>{const ir=bn.table,ds=ir.dom;sc(ir),f.on(Br=>{l.selection.setRng(Br),l.focus()}),ya(l,ds,Rm(ds),jy(ds),ib+bn.type),l.undoManager.add()}),v.set(Ln)}}),l.on("ObjectResizeStart",Tt=>{const Nn=Tt.target;if($E(Nn)){const Ln=_e.fromDom(Nn);nt(l.dom.select(".mce-clonedresizable"),bn=>{l.dom.addClass(bn,"mce-"+Uy(l)+"-columns")}),!zw(Ln)&&Hf(l)?$1(Ln):!Bx(Ln)&&Dm(l)&&F1(Ln),Ix(Ln)&&ga(Tt.origin,ib)&&F1(Ln),A=Tt.width,B=Xl(l)?"":qy(l,Nn).getOr(""),U=Tt.height,J=WS(l,Nn).getOr("")}}),l.on("ObjectResized",Tt=>{const Nn=Tt.target;if($E(Nn)){const Ln=_e.fromDom(Nn),bn=Tt.origin;IM(bn)&&Vt(Ln,bn,Tt.width,Tt.height),sc(Ln),Gf(l,Ln.dom,Pr)}}),l.on("SwitchMode",()=>{v.on(Tt=>{l.mode.isReadOnly()?Tt.hideBars():Tt.showBars()})}),l.on("dragstart dragend",Tt=>{v.on(Nn=>{Tt.type==="dragstart"?(Nn.hideBars(),Nn.off()):(Nn.on(),Nn.showBars())})}),l.on("remove",()=>{Lt()}),{refresh:Tt=>{v.on(Nn=>Nn.refreshBars(_e.fromDom(Tt)))},hide:()=>{v.on(Tt=>Tt.hideBars())},show:()=>{v.on(Tt=>Tt.showBars())}}},LM=l=>{Yh(l);const f=MC(l),v=_C(l,f),C=Ca(l,f,v);return bp(l,C),Gx(l,C),ap(l,C),{getSelectedCells:v.getSelectedCells,clearSelectedCells:v.clearSelectedCells}},VE=l=>({table:LM(l)});var YA=()=>{p.add("dom",VE)};YA()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(_,R,Z)=>{var te;return Z(_,R.prototype)?!0:((te=_.constructor)===null||te===void 0?void 0:te.name)===R.name},w=_=>{const R=typeof _;return _===null?"null":R==="object"&&Array.isArray(_)?"array":R==="object"&&g(_,String,(Z,te)=>te.isPrototypeOf(Z))?"string":R},E=_=>R=>w(R)===_,N=_=>R=>typeof R===_,z=_=>R=>_===R,K=E("string"),j=E("array"),ue=N("boolean"),Se=z(void 0),be=_=>_==null,Ge=_=>!be(_),Ht=N("function"),Ut=N("number"),Nt=()=>{},vt=(_,R)=>Z=>_(R(Z)),Ie=_=>()=>_,on=_=>_,Et=(_,R)=>_===R;function ce(_,...R){return(...Z)=>{const te=R.concat(Z);return _.apply(null,te)}}const qe=_=>{_()},On=Ie(!1),jt=Ie(!0);class ne{constructor(R,Z){this.tag=R,this.value=Z}static some(R){return new ne(!0,R)}static none(){return ne.singletonNone}fold(R,Z){return this.tag?Z(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?ne.some(R(this.value)):ne.none()}bind(R){return this.tag?R(this.value):ne.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:ne.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return Ge(R)?ne.some(R):ne.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ne.singletonNone=new ne(!1);const Kt=Object.keys,Pn=Object.hasOwnProperty,Qt=(_,R)=>{const Z=Kt(_);for(let te=0,Te=Z.length;te<Te;te++){const ot=Z[te],Ot=_[ot];R(Ot,ot)}},$e=_=>(R,Z)=>{_[Z]=R},ve=(_,R,Z,te)=>{Qt(_,(Te,ot)=>{(R(Te,ot)?Z:te)(Te,ot)})},so=(_,R)=>{const Z={};return ve(_,R,$e(Z),Nt),Z},Me=(_,R)=>{const Z=[];return Qt(_,(te,Te)=>{Z.push(R(te,Te))}),Z},Pe=_=>Me(_,on),M=_=>Kt(_).length,cn=(_,R)=>ct(_,R)?ne.from(_[R]):ne.none(),ct=(_,R)=>Pn.call(_,R),Hn=(_,R)=>ct(_,R)&&_[R]!==void 0&&_[R]!==null,rn=_=>{for(const R in _)if(Pn.call(_,R))return!1;return!0},nt=Array.prototype.indexOf,eo=Array.prototype.push,ms=(_,R)=>nt.call(_,R),to=(_,R)=>ms(_,R)>-1,os=(_,R)=>{for(let Z=0,te=_.length;Z<te;Z++){const Te=_[Z];if(R(Te,Z))return!0}return!1},tt=(_,R)=>{const Z=[];for(let te=0;te<_;te++)Z.push(R(te));return Z},wt=(_,R)=>{const Z=_.length,te=new Array(Z);for(let Te=0;Te<Z;Te++){const ot=_[Te];te[Te]=R(ot,Te)}return te},W=(_,R)=>{for(let Z=0,te=_.length;Z<te;Z++){const Te=_[Z];R(Te,Z)}},ta=(_,R)=>{for(let Z=_.length-1;Z>=0;Z--){const te=_[Z];R(te,Z)}},uo=(_,R)=>{const Z=[],te=[];for(let Te=0,ot=_.length;Te<ot;Te++){const Ot=_[Te];(R(Ot,Te)?Z:te).push(Ot)}return{pass:Z,fail:te}},qo=(_,R)=>{const Z=[];for(let te=0,Te=_.length;te<Te;te++){const ot=_[te];R(ot,te)&&Z.push(ot)}return Z},Ho=(_,R,Z)=>(ta(_,(te,Te)=>{Z=R(Z,te,Te)}),Z),Wi=(_,R,Z)=>(W(_,(te,Te)=>{Z=R(Z,te,Te)}),Z),et=(_,R,Z)=>{for(let te=0,Te=_.length;te<Te;te++){const ot=_[te];if(R(ot,te))return ne.some(ot);if(Z(ot,te))break}return ne.none()},kt=(_,R)=>et(_,R,On),dt=_=>{const R=[];for(let Z=0,te=_.length;Z<te;++Z){if(!j(_[Z]))throw new Error("Arr.flatten item "+Z+" was not an array, input: "+_);eo.apply(R,_[Z])}return R},xe=(_,R)=>dt(wt(_,R)),_o=(_,R)=>{for(let Z=0,te=_.length;Z<te;++Z){const Te=_[Z];if(R(Te,Z)!==!0)return!1}return!0},To=(_,R)=>{const Z={};for(let te=0,Te=_.length;te<Te;te++){const ot=_[te];Z[String(ot)]=R(ot,te)}return Z},Zt=(_,R)=>R>=0&&R<_.length?ne.some(_[R]):ne.none(),ss=_=>Zt(_,0),Mo=_=>Zt(_,_.length-1),$r=(_,R)=>{for(let Z=0;Z<_.length;Z++){const te=R(_[Z],Z);if(te.isSome())return te}return ne.none()},Po=8,Is=9,Xa=11,ws=1,bs=3,vs=(_,R)=>{const te=(R||document).createElement("div");if(te.innerHTML=_,!te.hasChildNodes()||te.childNodes.length>1){const Te="HTML does not have a single root node";throw console.error(Te,_),new Error(Te)}return Vo(te.childNodes[0])},qr=(_,R)=>{const te=(R||document).createElement(_);return Vo(te)},Cs=(_,R)=>{const te=(R||document).createTextNode(_);return Vo(te)},Vo=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},fo={fromHtml:vs,fromTag:qr,fromText:Cs,fromDom:Vo,fromPoint:(_,R,Z)=>ne.from(_.dom.elementFromPoint(R,Z)).map(Vo)},cs=(_,R)=>{const Z=_.dom;if(Z.nodeType!==ws)return!1;{const te=Z;if(te.matches!==void 0)return te.matches(R);if(te.msMatchesSelector!==void 0)return te.msMatchesSelector(R);if(te.webkitMatchesSelector!==void 0)return te.webkitMatchesSelector(R);if(te.mozMatchesSelector!==void 0)return te.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},_r=_=>_.nodeType!==ws&&_.nodeType!==Is&&_.nodeType!==Xa||_.childElementCount===0,Oi=(_,R)=>{const Z=R===void 0?document:R.dom;return _r(Z)?[]:wt(Z.querySelectorAll(_),fo.fromDom)},Zi=(_,R)=>{const Z=R===void 0?document:R.dom;return _r(Z)?ne.none():ne.from(Z.querySelector(_)).map(fo.fromDom)},Go=(_,R)=>_.dom===R.dom,Vc=cs;typeof window<"u"||Function("return this;")();const At=_=>_.dom.nodeName.toLowerCase(),po=_=>_.dom.nodeType,Hr=_=>R=>po(R)===_,Vr=_=>po(_)===Po||At(_)==="#comment",Ba=Hr(ws),Ja=Hr(bs),Wo=Hr(Is),hi=Hr(Xa),Di=_=>R=>Ba(R)&&At(R)===_,zo=_=>fo.fromDom(_.dom.ownerDocument),Sn=_=>Wo(_)?_:zo(_),Ys=_=>ne.from(_.dom.parentNode).map(fo.fromDom),Qa=(_,R)=>{const Z=Ht(R)?R:On;let te=_.dom;const Te=[];for(;te.parentNode!==null&&te.parentNode!==void 0;){const ot=te.parentNode,Ot=fo.fromDom(ot);if(Te.push(Ot),Z(Ot)===!0)break;te=ot}return Te},ul=_=>ne.from(_.dom.previousSibling).map(fo.fromDom),dl=_=>ne.from(_.dom.nextSibling).map(fo.fromDom),hs=_=>wt(_.dom.childNodes,fo.fromDom),pr=(_,R)=>{const Z=_.dom.childNodes;return ne.from(Z[R]).map(fo.fromDom)},Zs=_=>pr(_,0),Ta=_=>hi(_)&&Ge(_.dom.host),yc=_=>fo.fromDom(_.dom.getRootNode()),Tr=_=>{const R=yc(_);return Ta(R)?ne.some(R):ne.none()},ge=_=>fo.fromDom(_.dom.host),de=_=>{const R=Ja(_)?_.dom.parentNode:_.dom;if(R==null||R.ownerDocument===null)return!1;const Z=R.ownerDocument;return Tr(fo.fromDom(R)).fold(()=>Z.body.contains(R),vt(de,ge))};var Ve=(_,R,Z,te,Te)=>_(Z,te)?ne.some(Z):Ht(Te)&&Te(Z)?ne.none():R(Z,te,Te);const Ye=(_,R,Z)=>{let te=_.dom;const Te=Ht(Z)?Z:On;for(;te.parentNode;){te=te.parentNode;const ot=fo.fromDom(te);if(R(ot))return ne.some(ot);if(Te(ot))break}return ne.none()},gn=(_,R,Z)=>Ve((Te,ot)=>ot(Te),Ye,_,R,Z),Bn=(_,R)=>{const Z=Te=>R(fo.fromDom(Te));return kt(_.dom.childNodes,Z).map(fo.fromDom)},Wn=(_,R,Z)=>Ye(_,te=>cs(te,R),Z),or=(_,R)=>Bn(_,Z=>cs(Z,R)),_e=(_,R)=>Zi(R,_),Zn=(_,R,Z)=>Ve((Te,ot)=>cs(Te,ot),Wn,_,R,Z),Xs=_=>Zn(_,"[contenteditable]"),ur=(_,R=!1)=>de(_)?_.dom.isContentEditable:Xs(_).fold(Ie(R),Z=>ka(Z)==="true"),ka=_=>_.dom.contentEditable,Zo=_=>_.nodeName.toLowerCase(),zc=_=>fo.fromDom(_.getBody()),Gr=_=>R=>Go(R,zc(_)),Aa=_=>_?_.replace(/px$/,""):"",Ps=_=>/^\d+(\.\d+)?$/.test(_)?_+"px":_,Ko=_=>fo.fromDom(_.selection.getStart()),es=_=>fo.fromDom(_.selection.getEnd()),na=_=>gn(_,Di("table")).forall(ur),oa=(_,R)=>qo(hs(_),R),kr=(_,R)=>{let Z=[];return W(hs(_),te=>{R(te)&&(Z=Z.concat([te])),Z=Z.concat(kr(te,R))}),Z},Ji=(_,R)=>oa(_,Z=>cs(Z,R)),Ri=(_,R)=>Oi(R,_),xo=(_,R,Z)=>{if(K(Z)||ue(Z)||Ut(Z))_.setAttribute(R,Z+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",Z,":: Element ",_),new Error("Attribute value was not simple")},sa=(_,R,Z)=>{xo(_.dom,R,Z)},zr=(_,R)=>{const Z=_.dom;Qt(R,(te,Te)=>{xo(Z,Te,te)})},Qi=(_,R)=>{const Z=_.dom.getAttribute(R);return Z===null?void 0:Z},ei=(_,R)=>ne.from(Qi(_,R)),Ar=(_,R)=>{_.dom.removeAttribute(R)},Ls=_=>Wi(_.dom.attributes,(R,Z)=>(R[Z.name]=Z.value,R),{}),Sf=(_,R,Z=Et)=>_.exists(te=>Z(te,R)),ji=_=>{const R=[],Z=te=>{R.push(te)};for(let te=0;te<_.length;te++)_[te].each(Z);return R},Uo=(_,R,Z)=>_.isSome()&&R.isSome()?ne.some(Z(_.getOrDie(),R.getOrDie())):ne.none(),Oa=_=>_.bind(on),ma=(_,R)=>_?ne.some(R):ne.none(),br=(_,R)=>_.substring(R),$l=(_,R,Z)=>R===""||_.length>=R.length&&_.substr(Z,Z+R.length)===R,Da=(_,R)=>Ia(_,R)?br(_,R.length):_,Ia=(_,R)=>$l(_,R,0),Mi=(_=>R=>R.replace(_,""))(/^\s+|\s+$/g),uu=_=>_.length>0,fl=_=>!uu(_),Uc=(_,R=10)=>{const Z=parseInt(_,R);return isNaN(Z)?ne.none():ne.some(Z)},ti=_=>{const R=parseFloat(_);return isNaN(R)?ne.none():ne.some(R)},Or=_=>_.style!==void 0&&Ht(_.style.getPropertyValue),du=(_,R,Z)=>{if(!K(Z))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",Z,":: Element ",_),new Error("CSS value must be a string: "+Z);Or(_)&&_.style.setProperty(R,Z)},fu=(_,R)=>{Or(_)&&_.style.removeProperty(R)},mu=(_,R,Z)=>{const te=_.dom;du(te,R,Z)},hu=(_,R)=>{const Z=_.dom,Te=window.getComputedStyle(Z).getPropertyValue(R);return Te===""&&!de(_)?vr(Z,R):Te},vr=(_,R)=>Or(_)?_.style.getPropertyValue(R):"",gi=(_,R)=>{const Z=_.dom,te=vr(Z,R);return ne.from(te).filter(Te=>Te.length>0)},X=(_,R)=>{const Z=_.dom;fu(Z,R),Sf(ei(_,"style").map(Mi),"")&&Ar(_,"style")},me=(_,R,Z=0)=>ei(_,R).map(te=>parseInt(te,10)).getOr(Z),Re=(_,R)=>at(_,R,jt),at=(_,R,Z)=>xe(hs(_),te=>cs(te,R)?Z(te)?[te]:[]:at(te,R,Z)),St=["tfoot","thead","tbody","colgroup"],en=_=>to(St,_),io=(_,R)=>({rows:_,columns:R}),ls=(_,R,Z)=>({element:_,rowspan:R,colspan:Z}),vo=(_,R,Z,te,Te,ot)=>({element:_,rowspan:R,colspan:Z,row:te,column:Te,isLocked:ot}),qt=(_,R,Z)=>({element:_,cells:R,section:Z}),sr=(_,R,Z,te)=>({startRow:_,startCol:R,finishRow:Z,finishCol:te}),pn=(_,R,Z)=>({element:_,colspan:R,column:Z}),Dr=(_,R)=>({element:_,columns:R}),wc=(_,R,Z=On)=>{if(Z(R))return ne.none();if(to(_,At(R)))return ne.some(R);const te=Te=>cs(Te,"table")||Z(Te);return Wn(R,_.join(","),te)},H=(_,R)=>wc(["td","th"],_,R),oe=_=>Re(_,"th,td"),ye=_=>cs(_,"colgroup")?Ji(_,"col"):xe(Gn(_),R=>Ji(R,"col")),Le=(_,R)=>Zn(_,"table",R),lt=_=>Re(_,"tr"),Gn=_=>Le(_).fold(Ie([]),R=>Ji(R,"colgroup")),Ss=(_,R)=>wt(_,Z=>{if(At(Z)==="colgroup"){const te=wt(ye(Z),Te=>{const ot=me(Te,"span",1);return ls(Te,1,ot)});return qt(Z,te,"colgroup")}else{const te=wt(oe(Z),Te=>{const ot=me(Te,"rowspan",1),Ot=me(Te,"colspan",1);return ls(Te,ot,Ot)});return qt(Z,te,R(Z))}}),rs=_=>Ys(_).map(R=>{const Z=At(R);return en(Z)?Z:"tbody"}).getOr("tbody"),yt=_=>{const R=lt(_),te=[...Gn(_),...R];return Ss(te,rs)},Os="data-snooker-locked-cols",ha=_=>ei(_,Os).bind(R=>ne.from(R.match(/\d+/g))).map(R=>To(R,jt)),ni=(_,R)=>_+","+R,Xn=(_,R,Z)=>ne.from(_.access[ni(R,Z)]),oi=(_,R,Z)=>{const te=lr(_,Te=>Z(R,Te.element));return te.length>0?ne.some(te[0]):ne.none()},lr=(_,R)=>{const Z=xe(_.all,te=>te.cells);return qo(Z,R)},ed=_=>{const R={};let Z=0;return W(_.cells,te=>{const Te=te.colspan;tt(Te,ot=>{const Ot=Z+ot;R[Ot]=pn(te.element,Te,Ot)}),Z+=Te}),R},xs=_=>{const R={},Z=[],Te=ss(_).map(Rc=>Rc.element).bind(Le).bind(ha).getOr({});let ot=0,Ot=0,sn=0;const{pass:jn,fail:oo}=uo(_,Rc=>Rc.section==="colgroup");W(oo,Rc=>{const Va=[];W(Rc.cells,Kl=>{let yl=0;for(;R[ni(sn,yl)]!==void 0;)yl++;const Ou=Hn(Te,yl.toString()),Kh=vo(Kl.element,Kl.rowspan,Kl.colspan,sn,yl,Ou);for(let Gc=0;Gc<Kl.colspan;Gc++)for(let Om=0;Om<Kl.rowspan;Om++){const Qg=sn+Om,ep=yl+Gc,Lf=ni(Qg,ep);R[Lf]=Kh,Ot=Math.max(Ot,ep+1)}Va.push(Kh)}),ot++,Z.push(qt(Rc.element,Va,Rc.section)),sn++});const{columns:Yo,colgroups:Xo}=Mo(jn).map(Rc=>{const Va=ed(Rc);return{colgroups:[Dr(Rc.element,Pe(Va))],columns:Va}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:io(ot,Ot),access:R,all:Z,columns:Yo,colgroups:Xo}},yr={fromTable:_=>{const R=yt(_);return xs(R)},generate:xs,getAt:Xn,findItem:oi,filterItems:lr,justCells:_=>xe(_.all,R=>R.cells),justColumns:_=>Pe(_.columns),hasColumns:_=>Kt(_.columns).length>0,getColumnAt:(_,R)=>ne.from(_.columns[R])};var ga=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wc=(_,R,Z)=>{const te=_.select("td,th",R);let Te;for(let ot=0;ot<te.length;ot++){const Ot=_.getStyle(te[ot],Z);if(Se(Te)&&(Te=Ot),Te!==Ot)return""}return Te},Cc=(_,R,Z)=>{ga.each("left center right".split(" "),te=>{te!==Z&&_.formatter.remove("align"+te,{},R)}),Z&&_.formatter.apply("align"+Z,{},R)},Ld=(_,R,Z)=>{ga.each("top middle bottom".split(" "),te=>{te!==Z&&_.formatter.remove("valign"+te,{},R)}),Z&&_.formatter.apply("valign"+Z,{},R)},La=(_,R,Z)=>{_.dispatch("TableModified",{...Z,table:R})},yo=(_,R)=>ti(_).getOr(R),hl=(_,R,Z)=>yo(hu(_,R),Z),Sc=(_,R,Z,te)=>{const Te=hl(_,`padding-${Z}`,0),ot=hl(_,`padding-${te}`,0),Ot=hl(_,`border-${Z}-width`,0),sn=hl(_,`border-${te}-width`,0);return R-Te-ot-Ot-sn},h1=(_,R)=>{const Z=_.dom,te=Z.getBoundingClientRect().width||Z.offsetWidth;return R==="border-box"?te:Sc(_,te,"left","right")},Fa=_=>h1(_,"content-box");var Yr=tinymce.util.Tools.resolve("tinymce.Env");const Dh="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",xf=tt(5,_=>{const R=`${_+1}px`;return{title:R,value:R}}),si=wt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],_=>({title:_,value:_.toLowerCase()})),Rh="100%",js=_=>{var R;const Z=_.dom,te=(R=Z.getParent(_.selection.getStart(),Z.isBlock))!==null&&R!==void 0?R:_.getBody();return Fa(fo.fromDom(te))+"px"},Zc=(_,R)=>Ih(_)||!Sr(_)?R:Hl(_)?{...R,width:js(_)}:{...R,width:Rh},ri=(_,R)=>Ih(_)||Sr(_)?R:Hl(_)?{...R,width:js(_)}:{...R,width:Rh},wr=_=>R=>R.options.get(_),pi=_=>{const R=_.options.register;R("table_border_widths",{processor:"object[]",default:xf}),R("table_border_styles",{processor:"object[]",default:si}),R("table_cell_advtab",{processor:"boolean",default:!0}),R("table_row_advtab",{processor:"boolean",default:!0}),R("table_advtab",{processor:"boolean",default:!0}),R("table_appearance_options",{processor:"boolean",default:!0}),R("table_grid",{processor:"boolean",default:!Yr.deviceType.isTouch()}),R("table_cell_class_list",{processor:"object[]",default:[]}),R("table_row_class_list",{processor:"object[]",default:[]}),R("table_class_list",{processor:"object[]",default:[]}),R("table_toolbar",{processor:"string",default:Dh}),R("table_background_color_map",{processor:"object[]",default:[]}),R("table_border_color_map",{processor:"object[]",default:[]})},Cr=wr("table_sizing_mode"),Mh=wr("table_border_widths"),gu=wr("table_border_styles"),pu=wr("table_cell_advtab"),Ef=wr("table_row_advtab"),bu=wr("table_advtab"),xc=wr("table_appearance_options"),_f=wr("table_grid"),Sr=wr("table_style_by_css"),Tf=wr("table_cell_class_list"),Nh=wr("table_row_class_list"),gl=wr("table_class_list"),Ph=wr("table_toolbar"),vu=wr("table_background_color_map"),Bh=wr("table_border_color_map"),Hl=_=>Cr(_)==="fixed",Ih=_=>Cr(_)==="responsive",kf=_=>{const R=_.options,Z=R.get("table_default_styles");return R.isSet("table_default_styles")?Z:Zc(_,Z)},ym=_=>{const R=_.options,Z=R.get("table_default_attributes");return R.isSet("table_default_attributes")?Z:ri(_,Z)},yu=(_,R)=>R.column>=_.startCol&&R.column+R.colspan-1<=_.finishCol&&R.row>=_.startRow&&R.row+R.rowspan-1<=_.finishRow,wm=(_,R)=>{let Z=!0;const te=ce(yu,R);for(let Te=R.startRow;Te<=R.finishRow;Te++)for(let ot=R.startCol;ot<=R.finishCol;ot++)Z=Z&&yr.getAt(_,Te,ot).exists(te);return Z?ne.some(R):ne.none()},pe=(_,R)=>sr(Math.min(_.row,R.row),Math.min(_.column,R.column),Math.max(_.row+_.rowspan-1,R.row+R.rowspan-1),Math.max(_.column+_.colspan-1,R.column+R.colspan-1)),Vl=(_,R,Z)=>{const te=yr.findItem(_,R,Go),Te=yr.findItem(_,Z,Go);return te.bind(ot=>Te.map(Ot=>pe(ot,Ot)))},pl=(_,R,Z)=>Vl(_,R,Z).bind(te=>wm(_,te)),Lh=(_,R,Z)=>{const te=g1(_);return pl(te,R,Z)},g1=yr.fromTable,wu=(_,R)=>{Ys(_).each(te=>{te.dom.insertBefore(R.dom,_.dom)})},ro=(_,R)=>{dl(_).fold(()=>{Ys(_).each(Te=>{Ec(Te,R)})},te=>{wu(te,R)})},Rr=(_,R)=>{Zs(_).fold(()=>{Ec(_,R)},te=>{_.dom.insertBefore(R.dom,te.dom)})},Ec=(_,R)=>{_.dom.appendChild(R.dom)},Cu=(_,R)=>{wu(_,R),Ec(R,_)},Af=(_,R)=>{W(R,(Z,te)=>{const Te=te===0?_:R[te-1];ro(Te,Z)})},Fd=(_,R)=>{W(R,Z=>{Ec(_,Z)})},$a=_=>{const R=_.dom;R.parentNode!==null&&R.parentNode.removeChild(R)},Of=_=>{const R=hs(_);R.length>0&&Af(_,R),$a(_)},Df=((_,R)=>{const Z=ot=>{if(!_(ot))throw new Error("Can only get "+R+" value of a "+R+" node");return te(ot).getOr("")},te=ot=>_(ot)?ne.from(ot.dom.nodeValue):ne.none();return{get:Z,getOption:te,set:(ot,Ot)=>{if(!_(ot))throw new Error("Can only set raw "+R+" value of a "+R+" node");ot.dom.nodeValue=Ot}}})(Ja,"text"),Ul=_=>Df.get(_),bi=(_,R)=>Df.set(_,R);var Fh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],$d=()=>{const _=oo=>fo.fromDom(oo.dom.cloneNode(!1)),R=oo=>Sn(oo).dom,Z=oo=>Ba(oo)?At(oo)==="body"?!0:to(Fh,At(oo)):!1,te=oo=>Ba(oo)?to(["br","img","hr","input"],At(oo)):!1,Te=oo=>Ba(oo)&&Qi(oo,"contenteditable")==="false",ot=(oo,Yo)=>oo.dom.compareDocumentPosition(Yo.dom),Ot=(oo,Yo)=>{const Xo=Ls(oo);zr(Yo,Xo)},sn=oo=>{const Yo=At(oo);return to(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Yo)},jn=oo=>Ba(oo)?ei(oo,"lang"):ne.none();return{up:Ie({selector:Wn,closest:Zn,predicate:Ye,all:Qa}),down:Ie({selector:Ri,predicate:kr}),styles:Ie({get:hu,getRaw:gi,set:mu,remove:X}),attrs:Ie({get:Qi,set:sa,remove:Ar,copyTo:Ot}),insert:Ie({before:wu,after:ro,afterAll:Af,append:Ec,appendAll:Fd,prepend:Rr,wrap:Cu}),remove:Ie({unwrap:Of,remove:$a}),create:Ie({nu:fo.fromTag,clone:_,text:fo.fromText}),query:Ie({comparePosition:ot,prevSibling:ul,nextSibling:dl}),property:Ie({children:hs,name:At,parent:Ys,document:R,isText:Ja,isComment:Vr,isElement:Ba,isSpecial:sn,getLanguage:jn,getText:Ul,setText:bi,isBoundary:Z,isEmptyTag:te,isNonEditable:Te}),eq:Go,is:Vc}};const ra=(_,R,Z,te)=>{const Te=Z[0],ot=Z.slice(1);return te(_,R,Te,ot)},Ni=(_,R,Z)=>Z.length>0?ra(_,R,Z,ai):ne.none(),ai=(_,R,Z,te)=>{const Te=R(_,Z);return Ho(te,(ot,Ot)=>{const sn=R(_,Ot);return td(_,ot,sn)},Te)},td=(_,R,Z)=>R.bind(te=>Z.filter(ce(_.eq,te))),Hd=Ni,$h=$d(),Vd=(_,R)=>Hd($h,(Z,te)=>_(te),R),jc=_=>Wn(_,"table"),Rf=(_,R)=>{const Z=Ri(_,R);return Z.length>0?ne.some(Z):ne.none()},Wg=(_,R,Z)=>_e(_,R).bind(te=>_e(_,Z).bind(Te=>Vd(jc,[te,Te]).map(ot=>({first:te,last:Te,table:ot})))),Hh=(_,R)=>Rf(_,R),Xb=(_,R,Z)=>Wg(_,R,Z).bind(te=>{const Te=jn=>Go(_,jn),ot="thead,tfoot,tbody,table",Ot=Wn(te.first,ot,Te),sn=Wn(te.last,ot,Te);return Ot.bind(jn=>sn.bind(oo=>Go(jn,oo)?Lh(te.table,te.first,te.last):ne.none()))}),Cm=_=>wt(_,fo.fromDom),zd="data-mce-selected",nd="td["+zd+"],th["+zd+"]",Ud="data-mce-first-selected",qs="td["+Ud+"],th["+Ud+"]",Qs="data-mce-last-selected",tc="td["+Qs+"],th["+Qs+"]",od={selected:zd,selectedSelector:nd,firstSelected:Ud,firstSelectedSelector:qs,lastSelected:Qs,lastSelectedSelector:tc},Vh=_=>Le(_).bind(R=>Hh(R,od.firstSelectedSelector)).fold(Ie(_),R=>R[0]),Ur=_=>(R,Z)=>{const te=At(R),Te=te==="col"||te==="colgroup"?Vh(R):R;return Zn(Te,_,Z)},mn=Ur("th,td,caption"),Wl=Ur("th,td"),Sm=_=>Cm(_.model.table.getSelectedCells()),pa=(_,R)=>{const Z=Wl(_),te=Z.bind(Te=>Le(Te)).map(Te=>lt(Te));return Uo(Z,te,(Te,ot)=>qo(ot,Ot=>os(Cm(Ot.dom.cells),sn=>Qi(sn,R)==="1"||Go(sn,Te)))).getOr([])},ts=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Su=_=>({value:Yn(_)}),zh=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Wd=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Zg=_=>zh.test(_)||Wd.test(_),Yn=_=>Da(_,"#").toUpperCase(),Wr=_=>Zg(_)?ne.some({value:Yn(_)}):ne.none(),sd=_=>{const R=_.toString(16);return(R.length===1?"0"+R:R).toUpperCase()},Ra=_=>{const R=sd(_.red)+sd(_.green)+sd(_.blue);return Su(R)},vi=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,nc=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,aa=(_,R,Z,te)=>({red:_,green:R,blue:Z,alpha:te}),ii=(_,R,Z,te)=>{const Te=parseInt(_,10),ot=parseInt(R,10),Ot=parseInt(Z,10),sn=parseFloat(te);return aa(Te,ot,Ot,sn)},qi=_=>{const R=vi.exec(_);if(R!==null)return ne.some(ii(R[1],R[2],R[3],"1"));const Z=nc.exec(_);return Z!==null?ne.some(ii(Z[1],Z[2],Z[3],Z[4])):ne.none()},xm=_=>Wr(_).orThunk(()=>qi(_).map(Ra)).getOrThunk(()=>{const R=document.createElement("canvas");R.height=1,R.width=1;const Z=R.getContext("2d");Z.clearRect(0,0,R.width,R.height),Z.fillStyle="#FFFFFF",Z.fillStyle=_,Z.fillRect(0,0,1,1);const te=Z.getImageData(0,0,1,1).data,Te=te[0],ot=te[1],Ot=te[2],sn=te[3];return Ra(aa(Te,ot,Ot,sn))}),rr=_=>qi(_).map(Ra).map(R=>"#"+R.value).getOr(_),rd=_=>{let R=_;return{get:()=>R,set:Te=>{R=Te}}},dr=_=>{const R=rd(ne.none()),Z=()=>R.get().each(_);return{clear:()=>{Z(),R.set(ne.none())},isSet:()=>R.get().isSome(),get:()=>R.get(),set:sn=>{Z(),R.set(ne.some(sn))}}},xu=()=>dr(_=>_.unbind()),ad=(_,R,Z)=>te=>{const Te=xu(),ot=fl(Z),Ot=()=>{const sn=Sm(_),jn=oo=>_.formatter.match(R,{value:Z},oo.dom,ot);ot?(te.setActive(!os(sn,jn)),Te.set(_.formatter.formatChanged(R,oo=>te.setActive(!oo),!0))):(te.setActive(_o(sn,jn)),Te.set(_.formatter.formatChanged(R,te.setActive,!1,{value:Z})))};return _.initialized?Ot():_.on("init",Ot),Te.clear},gs=_=>Hn(_,"menu"),_c=_=>wt(_,R=>{const Z=R.text||R.title||"";return gs(R)?{text:Z,items:_c(R.menu)}:{text:Z,value:R.value}}),jg=_=>_.length?ne.some(_c([{text:"Select...",value:"mce-no-match"},..._])):ne.none(),Zl=(_,R,Z,te)=>wt(R,Te=>{const ot=Te.text||Te.title;return gs(Te)?{type:"nestedmenuitem",text:ot,getSubmenuItems:()=>Zl(_,Te.menu,Z,te)}:{text:ot,type:"togglemenuitem",onAction:()=>te(Te.value),onSetup:ad(_,Z,Te.value)}}),Ds=(_,R)=>Z=>{_.execCommand("mceTableApplyCellStyle",!1,{[R]:Z})},Eu=_=>xe(_,R=>gs(R)?[{...R,menu:Eu(R.menu)}]:uu(R.value)?[R]:[]),Pi=(_,R,Z,te)=>Te=>Te(Zl(_,R,Z,te)),co=(_,R,Z)=>{const te=wt(R,Te=>({text:Te.title,value:"#"+xm(Te.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:te.length>0?te:void 0,allowCustomColors:!1},onAction:Te=>{const ot=Te.value==="remove"?"":Te.value;_.execCommand("mceTableApplyCellStyle",!1,{[Z]:ot})}}]},id=_=>()=>{const Z=_.queryCommandValue("mceTableRowType")==="header"?"body":"header";_.execCommand("mceTableRowType",!1,{type:Z})},Mf=_=>()=>{const Z=_.queryCommandValue("mceTableColType")==="th"?"td":"th";_.execCommand("mceTableColType",!1,{type:Z})},Em=_=>jg(Tf(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),k=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ts}],I=_=>k.concat(Em(_).toArray()),q=(_,R)=>{const te=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(_c(gu(_)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:R==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(te):te}},Ee={normal:(_,R)=>{const Z=_.dom;return{setAttrib:(Ot,sn)=>{Z.setAttrib(R,Ot,sn)},setStyle:(Ot,sn)=>{Z.setStyle(R,Ot,sn)},setFormat:(Ot,sn)=>{sn===""?_.formatter.remove(Ot,{value:null},R,!0):_.formatter.apply(Ot,{value:sn},R)}}}},mt=Di("th"),kn=(_,R)=>_&&R?"sectionCells":_?"section":"cells",Jn=_=>{const R=_.section==="thead",Z=Sf(Rn(_.cells),"th");return _.section==="tfoot"?{type:"footer"}:R||Z?{type:"header",subType:kn(R,Z)}:{type:"body"}},Rn=_=>{const R=qo(_,Z=>mt(Z.element));return R.length===0?ne.some("td"):R.length===_.length?ne.some("th"):ne.none()},An=_=>{const R=wt(_,Te=>Jn(Te).type),Z=to(R,"header"),te=to(R,"footer");if(!Z&&!te)return ne.some("body");{const Te=to(R,"body");return Z&&!Te&&!te?ne.some("header"):!Z&&!Te&&te?ne.some("footer"):ne.none()}},Rs=_=>{let R=!1,Z;return(...te)=>(R||(R=!0,Z=_.apply(null,te)),Z)},xr=(_,R)=>$r(_.all,Z=>kt(Z.cells,te=>Go(R,te.element))),oc=(_,R,Z)=>{const te=wt(R.selection,ot=>H(ot).bind(Ot=>xr(_,Ot)).filter(Z)),Te=ji(te);return ma(Te.length>0,Te)},jl=(_,R)=>R.mergable,Nf=(_,R)=>R.unmergable,Uh=(_,R)=>oc(_,R,jt),ci=(_,R)=>xr(_,R).exists(Z=>!Z.isLocked),Wh=(_,R)=>_o(R,Z=>ci(_,Z)),Jb=(_,R)=>jl(_,R).filter(Z=>Wh(_,Z.cells)),qg=(_,R)=>Nf(_,R).filter(Z=>Wh(_,Z));({...{generate:_=>{if(!j(_))throw new Error("cases must be an array");if(_.length===0)throw new Error("there must be at least one case");const R=[],Z={};return W(_,(te,Te)=>{const ot=Kt(te);if(ot.length!==1)throw new Error("one and only one name per case");const Ot=ot[0],sn=te[Ot];if(Z[Ot]!==void 0)throw new Error("duplicate key detected:"+Ot);if(Ot==="cata")throw new Error("cannot have a case named cata (sorry)");if(!j(sn))throw new Error("case arguments must be an array");R.push(Ot),Z[Ot]=(...jn)=>{const oo=jn.length;if(oo!==sn.length)throw new Error("Wrong number of arguments to case "+Ot+". Expected "+sn.length+" ("+sn+"), got "+oo);return{fold:(...Xo)=>{if(Xo.length!==_.length)throw new Error("Wrong number of arguments to fold. Expected "+_.length+", got "+Xo.length);return Xo[Te].apply(null,jn)},match:Xo=>{const er=Kt(Xo);if(R.length!==er.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+`
Actual: `+er.join(","));if(!_o(R,Va=>to(er,Va)))throw new Error("Not all branches were specified when using match. Specified: "+er.join(", ")+`
Required: `+R.join(", "));return Xo[Ot].apply(null,jn)},log:Xo=>{console.log(Xo,{constructors:R,constructor:Ot,params:jn})}}}}),Z}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Bi=(_,R)=>{const Z=yr.fromTable(_);return Uh(Z,R).bind(Te=>{const ot=Te[Te.length-1],Ot=Te[0].row,sn=ot.row+ot.rowspan,jn=Z.all.slice(Ot,sn);return An(jn)}).getOr("")},Dn=_=>Ia(_,"rgb")?rr(_):_,Tc=_=>{const R=fo.fromDom(_);return{borderwidth:gi(R,"border-width").getOr(""),borderstyle:gi(R,"border-style").getOr(""),bordercolor:gi(R,"border-color").map(Dn).getOr(""),backgroundcolor:gi(R,"background-color").map(Dn).getOr("")}},_m=_=>{const R=_[0],Z=_.slice(1);return W(Z,te=>{W(Kt(R),Te=>{Qt(te,(ot,Ot)=>{const sn=R[Te];sn!==""&&Te===Ot&&sn!==ot&&(R[Te]=Te==="class"?"mce-no-match":"")})})}),R},Zh=(_,R,Z,te)=>kt(_,Te=>!Se(Z.formatter.matchNode(te,R+Te))).getOr(""),Kg=ce(Zh,["left","center","right"],"align"),p1=ce(Zh,["top","middle","bottom"],"valign"),bl=(_,R)=>{const Z=kf(_),te=ym(_),Te=()=>({borderstyle:cn(Z,"border-style").getOr(""),bordercolor:Dn(cn(Z,"border-color").getOr("")),backgroundcolor:Dn(cn(Z,"background-color").getOr(""))}),ot={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Ot=()=>{const Yo=Z["border-width"];return Sr(_)&&Yo?{border:Yo}:cn(te,"border").fold(()=>({}),Xo=>({border:Xo}))},sn=R?Te():{},jn=()=>{const Yo=cn(Z,"border-spacing").or(cn(te,"cellspacing")).fold(()=>({}),er=>({cellspacing:er})),Xo=cn(Z,"border-padding").or(cn(te,"cellpadding")).fold(()=>({}),er=>({cellpadding:er}));return{...Yo,...Xo}};return{...ot,...Z,...te,...sn,...Ot(),...jn()}},_u=_=>Le(fo.fromDom(_)).map(R=>{const Z={selection:Cm(_.cells)};return Bi(R,Z)}).getOr(""),Zd=(_,R,Z)=>{const te=(sn,jn)=>{const oo=gi(fo.fromDom(jn),"border-width");return Sr(_)&&oo.isSome()?oo.getOr(""):sn.getAttrib(jn,"border")||Wc(_.dom,jn,"border-width")||Wc(_.dom,jn,"border")||""},Te=_.dom,ot=Sr(_)?Te.getStyle(R,"border-spacing")||Te.getAttrib(R,"cellspacing"):Te.getAttrib(R,"cellspacing")||Te.getStyle(R,"border-spacing"),Ot=Sr(_)?Wc(Te,R,"padding")||Te.getAttrib(R,"cellpadding"):Te.getAttrib(R,"cellpadding")||Wc(Te,R,"padding");return{width:Te.getStyle(R,"width")||Te.getAttrib(R,"width"),height:Te.getStyle(R,"height")||Te.getAttrib(R,"height"),cellspacing:ot??"",cellpadding:Ot??"",border:te(Te,R),caption:!!Te.select("caption",R)[0],class:Te.getAttrib(R,"class",""),align:Kg(_,R),...Z?Tc(R):{}}},Wt=(_,R,Z)=>{const te=_.dom;return{height:te.getStyle(R,"height")||te.getAttrib(R,"height"),class:te.getAttrib(R,"class",""),type:_u(R),align:Kg(_,R),...Z?Tc(R):{}}},qc=(_,R,Z,te)=>{const Te=_.dom,ot=te.getOr(R);return{width:((sn,jn)=>Te.getStyle(sn,jn)||Te.getAttrib(sn,jn))(ot,"width"),scope:Te.getAttrib(R,"scope"),celltype:Zo(R),class:Te.getAttrib(R,"class",""),halign:Kg(_,R),valign:p1(_,R),...Z?Tc(R):{}}},Yg=(_,R)=>{const Z=yr.fromTable(_),te=yr.justCells(Z),Te=qo(te,ot=>os(R,Ot=>Go(ot.element,Ot)));return wt(Te,ot=>({element:ot.element.dom,column:yr.getColumnAt(Z,ot.column).map(Ot=>Ot.element.dom)}))},Pf=(_,R,Z,te)=>{te("scope")&&_.setAttrib("scope",Z.scope),te("class")&&Z.class!=="mce-no-match"&&_.setAttrib("class",Z.class),te("width")&&R.setStyle("width",Ps(Z.width))},vl=(_,R,Z)=>{Z("backgroundcolor")&&_.setFormat("tablecellbackgroundcolor",R.backgroundcolor),Z("bordercolor")&&_.setFormat("tablecellbordercolor",R.bordercolor),Z("borderstyle")&&_.setFormat("tablecellborderstyle",R.borderstyle),Z("borderwidth")&&_.setFormat("tablecellborderwidth",Ps(R.borderwidth))},jh=(_,R,Z,te)=>{const Te=R.length===1;W(R,ot=>{const Ot=ot.element,sn=Te?jt:te,jn=Ee.normal(_,Ot),oo=ot.column.map(Yo=>Ee.normal(_,Yo)).getOr(jn);Pf(jn,oo,Z,sn),pu(_)&&vl(jn,Z,sn),te("halign")&&Cc(_,Ot,Z.halign),te("valign")&&Ld(_,Ot,Z.valign)})},jd=(_,R)=>{_.execCommand("mceTableCellType",!1,{type:R.celltype,no_events:!0})},Bf=(_,R,Z,te)=>{const Te=so(te,(ot,Ot)=>Z[Ot]!==ot);M(Te)>0&&R.length>=1&&Le(R[0]).each(ot=>{const Ot=Yg(ot,R),sn=M(so(Te,(oo,Yo)=>Yo!=="scope"&&Yo!=="celltype"))>0,jn=ct(Te,"celltype");(sn||ct(Te,"scope"))&&jh(_,Ot,te,ce(ct,Te)),jn&&jd(_,te),La(_,ot.dom,{structure:jn,style:sn})})},qh=(_,R,Z,te)=>{const Te=te.getData();te.close(),_.undoManager.transact(()=>{Bf(_,R,Z,Te),_.focus()})},ql=(_,R)=>{const Z=Le(R[0]).map(te=>wt(Yg(te,R),Te=>qc(_,Te.element,pu(_),Te.column)));return _m(Z.getOrDie())},ev=_=>{const R=Sm(_);if(R.length===0)return;const Z=ql(_,R),te={type:"tabpanel",tabs:[{title:"General",name:"general",items:I(_)},q(_,"cell")]},Te={type:"panel",items:[{type:"grid",columns:2,items:I(_)}]};_.windowManager.open({title:"Cell Properties",size:"normal",body:pu(_)?te:Te,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Z,onSubmit:ce(qh,_,R,Z)})},ar=_=>jg(Nh(_)).map(R=>({name:"class",type:"listbox",label:"Class",items:R})),pt=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],yi=_=>pt.concat(ar(_).toArray()),Gl=(_,R,Z)=>{Z("class")&&R.class!=="mce-no-match"&&_.setAttrib("class",R.class),Z("height")&&_.setStyle("height",Ps(R.height))},ba=(_,R,Z)=>{Z("backgroundcolor")&&_.setStyle("background-color",R.backgroundcolor),Z("bordercolor")&&_.setStyle("border-color",R.bordercolor),Z("borderstyle")&&_.setStyle("border-style",R.borderstyle)},Tm=(_,R,Z,te)=>{const ot=R.length===1?jt:te;W(R,Ot=>{const sn=Ji(fo.fromDom(Ot),"td,th"),jn=Ee.normal(_,Ot);Gl(jn,Z,ot),Ef(_)&&ba(jn,Z,ot),te("height")&&W(sn,oo=>{_.dom.setStyle(oo.dom,"height",null)}),te("align")&&Cc(_,Ot,Z.align)})},ia=(_,R)=>{_.execCommand("mceTableRowType",!1,{type:R.type,no_events:!0})},Lo=(_,R,Z,te)=>{const Te=so(te,(ot,Ot)=>Z[Ot]!==ot);if(M(Te)>0){const ot=ct(Te,"type"),Ot=ot?M(Te)>1:!0;Ot&&Tm(_,R,te,ce(ct,Te)),ot&&ia(_,te),Le(fo.fromDom(R[0])).each(sn=>La(_,sn.dom,{structure:ot,style:Ot}))}},Xg=(_,R,Z,te)=>{const Te=te.getData();te.close(),_.undoManager.transact(()=>{Lo(_,R,Z,Te),_.focus()})},rt=_=>{const R=pa(Ko(_),od.selected);if(R.length===0)return;const Z=wt(R,Ot=>Wt(_,Ot.dom,Ef(_))),te=_m(Z),Te={type:"tabpanel",tabs:[{title:"General",name:"general",items:yi(_)},q(_,"row")]},ot={type:"panel",items:[{type:"grid",columns:2,items:yi(_)}]};_.windowManager.open({title:"Row Properties",size:"normal",body:Ef(_)?Te:ot,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:te,onSubmit:ce(Xg,_,wt(R,Ot=>Ot.dom),te)})},Fo=(_,R,Z)=>{const te=Z?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Te=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],ot=xc(_)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Ot=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],sn=R.length>0?[{name:"class",type:"listbox",label:"Class",items:R}]:[];return te.concat(Te).concat(ot).concat(Ot).concat(sn)},Gh=(_,R,Z,te)=>{if(R.tagName==="TD"||R.tagName==="TH")K(Z)&&Ge(te)?_.setStyle(R,Z,te):_.setStyles(R,Z);else if(R.children)for(let Te=0;Te<R.children.length;Te++)Gh(_,R.children[Te],Z,te)},Jr=(_,R,Z,te)=>{const Te=_.dom,ot={},Ot={},sn=Sr(_),jn=bu(_),oo=parseFloat(Z.border)===0;if(!Se(Z.class)&&Z.class!=="mce-no-match"&&(ot.class=Z.class),Ot.height=Ps(Z.height),sn?Ot.width=Ps(Z.width):Te.getAttrib(R,"width")&&(ot.width=Aa(Z.width)),sn?(oo?(ot.border=0,Ot["border-width"]=""):(Ot["border-width"]=Ps(Z.border),ot.border=1),Ot["border-spacing"]=Ps(Z.cellspacing)):(ot.border=oo?0:Z.border,ot.cellpadding=Z.cellpadding,ot.cellspacing=Z.cellspacing),sn&&R.children){const Yo={};if(oo?Yo["border-width"]="":te.border&&(Yo["border-width"]=Ps(Z.border)),te.cellpadding&&(Yo.padding=Ps(Z.cellpadding)),jn&&te.bordercolor&&(Yo["border-color"]=Z.bordercolor),!rn(Yo))for(let Xo=0;Xo<R.children.length;Xo++)Gh(Te,R.children[Xo],Yo)}if(jn){const Yo=Z;Ot["background-color"]=Yo.backgroundcolor,Ot["border-color"]=Yo.bordercolor,Ot["border-style"]=Yo.borderstyle}Te.setStyles(R,{...kf(_),...Ot}),Te.setAttribs(R,{...ym(_),...ot})},wi=(_,R,Z,te)=>{const Te=_.dom,ot=te.getData(),Ot=so(ot,(sn,jn)=>Z[jn]!==sn);te.close(),_.undoManager.transact(()=>{if(!R){const sn=Uc(ot.cols).getOr(1),jn=Uc(ot.rows).getOr(1);_.execCommand("mceInsertTable",!1,{rows:jn,columns:sn}),R=Wl(Ko(_),Gr(_)).bind(oo=>Le(oo,Gr(_))).map(oo=>oo.dom).getOrDie()}if(M(Ot)>0){const sn={border:ct(Ot,"border"),bordercolor:ct(Ot,"bordercolor"),cellpadding:ct(Ot,"cellpadding")};Jr(_,R,ot,sn);const jn=Te.select("caption",R)[0];(jn&&!ot.caption||!jn&&ot.caption)&&_.execCommand("mceTableToggleCaption"),Cc(_,R,ot.align)}if(_.focus(),_.addVisual(),M(Ot)>0){const sn=ct(Ot,"caption"),jn=sn?M(Ot)>1:!0;La(_,R,{structure:sn,style:jn})}})},tv=(_,R)=>{const Z=_.dom;let te,Te=bl(_,bu(_));R?(Te.cols="1",Te.rows="1",bu(_)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor="")):(te=Z.getParent(_.selection.getStart(),"table",_.getBody()),te?Te=Zd(_,te,bu(_)):bu(_)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor=""));const ot=jg(gl(_));ot.isSome()&&Te.class&&(Te.class=Te.class.replace(/\s*mce\-item\-table\s*/g,""));const Ot={type:"grid",columns:2,items:Fo(_,ot.getOr([]),R)},sn=()=>({type:"panel",items:[Ot]}),jn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Ot]},q(_,"table")]}),oo=bu(_)?jn():sn();_.windowManager.open({title:"Table Properties",size:"normal",body:oo,onSubmit:ce(wi,_,te,Te),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Te})},kc=_=>{const R=Z=>{na(Ko(_))&&Z()};Qt({mceTableProps:ce(tv,_,!1),mceTableRowProps:ce(rt,_),mceTableCellProps:ce(ev,_),mceInsertTableDialog:ce(tv,_,!0)},(Z,te)=>_.addCommand(te,()=>R(Z)))},Vy=(_,R)=>or(_,R).isSome(),cd=on,nv=_=>{const R=(te,Te)=>ei(te,Te).exists(ot=>parseInt(ot,10)>1),Z=te=>R(te,"rowspan")||R(te,"colspan");return _.length>0&&_o(_,Z)?ne.some(_):ne.none()},Ac=(_,R,Z)=>R.length<=1?ne.none():Xb(_,Z.firstSelectedSelector,Z.lastSelectedSelector).map(te=>({bounds:te,cells:R})),Bo=_=>({element:_,mergable:ne.none(),unmergable:ne.none(),selection:[_]}),Tu=(_,R,Z)=>({element:Z,mergable:Ac(R,_,od),unmergable:nv(_),selection:cd(_)}),If=_=>{const R=rd(ne.none()),Z=rd([]);let te=ne.none();const Te=Di("caption"),ot=No=>te.forall(Ms=>!Ms[No]),Ot=()=>mn(Ko(_),Gr(_)),sn=()=>mn(es(_),Gr(_)),jn=()=>Ot().bind(No=>Oa(Uo(Le(No),sn().bind(Le),(Ms,Ii)=>Go(Ms,Ii)?Te(No)?ne.some(Bo(No)):ne.some(Tu(Sm(_),Ms,No)):ne.none()))),oo=No=>Le(No.element).map(Ii=>{const Er=yr.fromTable(Ii),tp=Uh(Er,No).getOr([]),Ff=Wi(tp,($f,Kc)=>(Kc.isLocked&&($f.onAny=!0,Kc.column===0?$f.onFirst=!0:Kc.column+Kc.colspan>=Er.grid.columns&&($f.onLast=!0)),$f),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Jb(Er,No).isSome(),unmergeable:qg(Er,No).isSome(),locked:Ff}}),Yo=()=>{R.set(Rs(jn)()),te=R.get().bind(oo),W(Z.get(),qe)},Xo=No=>(No(),Z.set(Z.get().concat([No])),()=>{Z.set(qo(Z.get(),Ms=>Ms!==No))}),er=(No,Ms)=>Xo(()=>R.get().fold(()=>{No.setEnabled(!1)},Ii=>{No.setEnabled(!Ms(Ii)&&_.selection.isEditable())})),Rc=(No,Ms,Ii)=>Xo(()=>R.get().fold(()=>{No.setEnabled(!1),No.setActive(!1)},Er=>{No.setEnabled(!Ms(Er)&&_.selection.isEditable()),No.setActive(Ii(Er))})),Va=No=>te.exists(Ms=>Ms.locked[No]),Kl=No=>er(No,Ms=>!1),yl=No=>er(No,Ms=>Te(Ms.element)),Ou=No=>Ms=>er(Ms,Ii=>Te(Ii.element)||Va(No)),Kh=No=>Ms=>er(Ms,Ii=>Te(Ii.element)||No().isNone()),Gc=(No,Ms)=>Ii=>er(Ii,Er=>Te(Er.element)||No().isNone()||Va(Ms)),Om=No=>er(No,Ms=>ot("mergeable")),Qg=No=>er(No,Ms=>ot("unmergeable")),ep=No=>Rc(No,On,Ms=>Le(Ms.element,Gr(_)).exists(Er=>Vy(Er,"caption"))),Lf=(No,Ms)=>Ii=>Rc(Ii,Er=>Te(Er.element),()=>_.queryCommandValue(No)===Ms),va=Lf("mceTableRowType","header"),Yl=Lf("mceTableColType","th");return _.on("NodeChange ExecCommand TableSelectorChange",Yo),{onSetupTable:Kl,onSetupCellOrRow:yl,onSetupColumn:Ou,onSetupPasteable:Kh,onSetupPasteableColumn:Gc,onSetupMergeable:Om,onSetupUnmergeable:Qg,resetTargets:Yo,onSetupTableWithCaption:ep,onSetupTableRowHeaders:va,onSetupTableColumnHeaders:Yl,targets:R.get}};var ca=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Jg="x-tinymce/dom-table-",ku=Jg+"rows",Au=Jg+"columns",Bs=_=>{var R;const Z=(R=ca.read())!==null&&R!==void 0?R:[];return $r(Z,te=>ne.from(te.getType(_)))},km=()=>Bs(ku),Be=()=>Bs(Au),Oc=_=>R=>{const Z=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",Z),Z(),()=>{_.off("NodeChange",Z)}},Am=(_,R)=>{_.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Oc(_),fetch:sn=>sn("inserttable | cell row column | advtablesort | tableprops deletetable")});const Z=sn=>()=>_.execCommand(sn),te=(sn,jn)=>{_.queryCommandSupported(jn.command)&&_.ui.registry.addButton(sn,{...jn,onAction:Ht(jn.onAction)?jn.onAction:Z(jn.command)})},Te=(sn,jn)=>{_.queryCommandSupported(jn.command)&&_.ui.registry.addToggleButton(sn,{...jn,onAction:Ht(jn.onAction)?jn.onAction:Z(jn.command)})};te("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:R.onSetupTable}),te("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:R.onSetupTable}),te("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:R.onSetupCellOrRow}),te("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:R.onSetupMergeable}),te("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:R.onSetupUnmergeable}),te("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:R.onSetupCellOrRow}),te("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:R.onSetupCellOrRow}),te("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:R.onSetupCellOrRow}),te("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:R.onSetupCellOrRow}),te("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:R.onSetupColumn("onFirst")}),te("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:R.onSetupColumn("onLast")}),te("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:R.onSetupColumn("onAny")}),te("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:R.onSetupCellOrRow}),te("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:R.onSetupCellOrRow}),te("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:R.onSetupPasteable(km)}),te("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:R.onSetupPasteable(km)}),te("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:R.onSetupColumn("onAny")}),te("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:R.onSetupColumn("onAny")}),te("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:R.onSetupPasteableColumn(Be,"onFirst")}),te("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:R.onSetupPasteableColumn(Be,"onLast")}),te("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Oc(_)});const ot=Eu(gl(_));ot.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Pi(_,ot,"tableclass",sn=>_.execCommand("mceTableToggleClass",!1,sn)),onSetup:R.onSetupTable});const Ot=Eu(Tf(_));Ot.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Pi(_,Ot,"tablecellclass",sn=>_.execCommand("mceTableCellToggleClass",!1,sn)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Pi(_,ts,"tablecellverticalalign",Ds(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Pi(_,Mh(_),"tablecellborderwidth",Ds(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Pi(_,gu(_),"tablecellborderstyle",Ds(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:sn=>sn(co(_,vu(_),"background-color")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:sn=>sn(co(_,Bh(_),"border-color")),onSetup:R.onSetupCellOrRow})),Te("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),Te("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:id(_),onSetup:R.onSetupTableRowHeaders}),Te("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Mf(_),onSetup:R.onSetupTableColumnHeaders})},Ci=_=>{const R=te=>_.dom.is(te,"table")&&_.getBody().contains(te)&&_.dom.isEditable(te.parentNode),Z=Ph(_);Z.length>0&&_.ui.registry.addContextToolbar("table",{predicate:R,items:Z,scope:"node",position:"node"})},Dc=_=>R=>{const Z=()=>{R.setEnabled(_.selection.isEditable())};return _.on("NodeChange",Z),Z(),()=>{_.off("NodeChange",Z)}},Mr=(_,R)=>{const Z=Xo=>()=>_.execCommand(Xo),te=(Xo,er)=>_.queryCommandSupported(er.command)?(_.ui.registry.addMenuItem(Xo,{...er,onAction:Ht(er.onAction)?er.onAction:Z(er.command)}),!0):!1,Te=(Xo,er)=>{_.queryCommandSupported(er.command)&&_.ui.registry.addToggleMenuItem(Xo,{...er,onAction:Ht(er.onAction)?er.onAction:Z(er.command)})},ot=Xo=>{_.execCommand("mceInsertTable",!1,{rows:Xo.numRows,columns:Xo.numColumns})},Ot=[te("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:R.onSetupCellOrRow}),te("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:R.onSetupCellOrRow}),te("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:R.onSetupCellOrRow}),te("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:R.onSetupCellOrRow}),te("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:R.onSetupCellOrRow}),te("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:R.onSetupCellOrRow}),te("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:R.onSetupPasteable(km)}),te("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:R.onSetupPasteable(km)})],sn=[te("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:R.onSetupColumn("onFirst")}),te("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:R.onSetupColumn("onLast")}),te("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:R.onSetupColumn("onAny")}),te("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:R.onSetupColumn("onAny")}),te("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:R.onSetupColumn("onAny")}),te("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:R.onSetupPasteableColumn(Be,"onFirst")}),te("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:R.onSetupPasteableColumn(Be,"onLast")})],jn=[te("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:R.onSetupCellOrRow}),te("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:R.onSetupMergeable}),te("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:R.onSetupUnmergeable})];_f(_)?_.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:ot}],onSetup:Dc(_)}):_.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:Z("mceInsertTableDialog"),onSetup:Dc(_)}),_.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:Z("mceInsertTableDialog"),onSetup:Dc(_)}),te("tableprops",{text:"Table properties",onSetup:R.onSetupTable,command:"mceTableProps"}),te("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:R.onSetupTable,command:"mceTableDelete"}),to(Ot,!0)&&_.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ie("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),to(sn,!0)&&_.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ie("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),to(jn,!0)&&_.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ie("tablecellprops tablemergecells tablesplitcells")}),_.ui.registry.addContextMenu("table",{update:()=>(R.resetTargets(),R.targets().fold(Ie(""),Xo=>At(Xo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const oo=Eu(gl(_));oo.length!==0&&_.queryCommandSupported("mceTableToggleClass")&&_.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Zl(_,oo,"tableclass",Xo=>_.execCommand("mceTableToggleClass",!1,Xo)),onSetup:R.onSetupTable});const Yo=Eu(Tf(_));Yo.length!==0&&_.queryCommandSupported("mceTableCellToggleClass")&&_.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Zl(_,Yo,"tablecellclass",Xo=>_.execCommand("mceTableCellToggleClass",!1,Xo)),onSetup:R.onSetupCellOrRow}),_.queryCommandSupported("mceTableApplyCellStyle")&&(_.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Zl(_,ts,"tablecellverticalalign",Ds(_,"vertical-align")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Zl(_,Mh(_),"tablecellborderwidth",Ds(_,"border-width")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Zl(_,gu(_),"tablecellborderstyle",Ds(_,"border-style")),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>co(_,vu(_),"background-color"),onSetup:R.onSetupCellOrRow}),_.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>co(_,Bh(_),"border-color"),onSetup:R.onSetupCellOrRow})),Te("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:R.onSetupTableWithCaption}),Te("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:id(_),onSetup:R.onSetupTableRowHeaders}),Te("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Mf(_),onSetup:R.onSetupTableRowHeaders})},fr=_=>{const R=If(_);pi(_),kc(_),Mr(_,R),Am(_,R),Ci(_)};var zy=()=>{p.add("table",fr)};zy()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(X,me,Re)=>{var at;return Re(X,me.prototype)?!0:((at=X.constructor)===null||at===void 0?void 0:at.name)===me.name},w=X=>{const me=typeof X;return X===null?"null":me==="object"&&Array.isArray(X)?"array":me==="object"&&g(X,String,(Re,at)=>at.isPrototypeOf(Re))?"string":me},E=X=>me=>w(me)===X,N=X=>me=>typeof me===X,z=X=>me=>X===me,K=E("string"),j=E("object"),ue=E("array"),Se=z(null),be=N("boolean"),Ge=X=>X==null,Ht=X=>!Ge(X),Ut=N("function"),Nt=(X,me)=>{if(ue(X)){for(let Re=0,at=X.length;Re<at;++Re)if(!me(X[Re]))return!1;return!0}return!1},vt=()=>{},Ie=X=>()=>X,on=(X,me)=>X===me;class Et{constructor(me,Re){this.tag=me,this.value=Re}static some(me){return new Et(!0,me)}static none(){return Et.singletonNone}fold(me,Re){return this.tag?Re(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?Et.some(me(this.value)):Et.none()}bind(me){return this.tag?me(this.value):Et.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:Et.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me??"Called getOrDie on None")}static from(me){return Ht(me)?Et.some(me):Et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Et.singletonNone=new Et(!1);const ce=Array.prototype.indexOf,qe=Array.prototype.push,On=(X,me)=>ce.call(X,me),jt=(X,me)=>On(X,me)>-1,ne=(X,me)=>{const Re=X.length,at=new Array(Re);for(let St=0;St<Re;St++){const en=X[St];at[St]=me(en,St)}return at},Kt=(X,me)=>{for(let Re=0,at=X.length;Re<at;Re++){const St=X[Re];me(St,Re)}},Pn=(X,me,Re)=>(Kt(X,(at,St)=>{Re=me(Re,at,St)}),Re),Qt=X=>{const me=[];for(let Re=0,at=X.length;Re<at;++Re){if(!ue(X[Re]))throw new Error("Arr.flatten item "+Re+" was not an array, input: "+X);qe.apply(me,X[Re])}return me},$e=(X,me)=>Qt(ne(X,me)),ve=(X,me)=>{for(let Re=0;Re<X.length;Re++){const at=me(X[Re],Re);if(at.isSome())return at}return Et.none()},so=(X,me,Re=on)=>X.exists(at=>Re(at,me)),Me=X=>{const me=[],Re=at=>{me.push(at)};for(let at=0;at<X.length;at++)X[at].each(Re);return me},Pe=(X,me)=>X?Et.some(me):Et.none(),M=X=>me=>me.options.get(X),cn=X=>{const me=X.options.register;me("link_assume_external_targets",{processor:Re=>{const at=K(Re)||be(Re);return at?Re===!0?{value:1,valid:at}:Re==="http"||Re==="https"?{value:Re,valid:at}:{value:0,valid:at}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),me("link_context_toolbar",{processor:"boolean",default:!1}),me("link_list",{processor:Re=>K(Re)||Ut(Re)||Nt(Re,j)}),me("link_default_target",{processor:"string"}),me("link_default_protocol",{processor:"string",default:"https"}),me("link_target_list",{processor:Re=>be(Re)||Nt(Re,j),default:!0}),me("link_rel_list",{processor:"object[]",default:[]}),me("link_class_list",{processor:"object[]",default:[]}),me("link_title",{processor:"boolean",default:!0}),me("allow_unsafe_link_target",{processor:"boolean",default:!1}),me("link_quicklink",{processor:"boolean",default:!1})},ct=M("link_assume_external_targets"),Hn=M("link_context_toolbar"),rn=M("link_list"),nt=M("link_default_target"),eo=M("link_default_protocol"),ms=M("link_target_list"),to=M("link_rel_list"),os=M("link_class_list"),tt=M("link_title"),wt=M("allow_unsafe_link_target"),W=M("link_quicklink"),ta=Object.keys,uo=Object.hasOwnProperty,qo=(X,me)=>{const Re=ta(X);for(let at=0,St=Re.length;at<St;at++){const en=Re[at],io=X[en];me(io,en)}},Ho=X=>(me,Re)=>{X[Re]=me},Wi=(X,me,Re,at)=>{qo(X,(St,en)=>{(me(St,en)?Re:at)(St,en)})},et=(X,me)=>{const Re={};return Wi(X,me,Ho(Re),vt),Re},kt=(X,me)=>uo.call(X,me),dt=(X,me)=>kt(X,me)&&X[me]!==void 0&&X[me]!==null;var xe=tinymce.util.Tools.resolve("tinymce.util.URI"),_o=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),To=tinymce.util.Tools.resolve("tinymce.util.Tools");const Zt=X=>Ht(X)&&X.nodeName.toLowerCase()==="a",ss=X=>Zt(X)&&!!Po(X),Mo=(X,me)=>{if(X.collapsed)return[];{const Re=X.cloneContents(),at=Re.firstChild,St=new _o(at,Re),en=[];let io=at;do me(io)&&en.push(io);while(io=St.next());return en}},$r=X=>/^\w+:/i.test(X),Po=X=>{var me,Re;return(Re=(me=X.getAttribute("data-mce-href"))!==null&&me!==void 0?me:X.getAttribute("href"))!==null&&Re!==void 0?Re:""},Is=(X,me)=>{const Re=["noopener"],at=X?X.split(/\s+/):[],St=vo=>To.trim(vo.sort().join(" ")),en=vo=>(vo=io(vo),vo.length>0?vo.concat(Re):Re),io=vo=>vo.filter(qt=>To.inArray(Re,qt)===-1),ls=me?en(at):io(at);return ls.length>0?St(ls):""},Xa=X=>X.replace(/\uFEFF/g,""),ws=(X,me)=>(me=me||qr(X.selection.getRng())[0]||X.selection.getNode(),cs(me)?Et.from(X.dom.select("a[href]",me)[0]):Et.from(X.dom.getParent(me,"a[href]"))),bs=(X,me)=>ws(X,me).isSome(),vs=(X,me)=>{const Re=me.fold(()=>X.getContent({format:"text"}),at=>at.innerText||at.textContent||"");return Xa(Re)},qr=X=>Mo(X,ss),Cs=X=>To.grep(X,ss),Vo=X=>Cs(X).length>0,vc=X=>qr(X).length>0,fo=X=>{const me=X.schema.getTextInlineElements(),Re=en=>en.nodeType===1&&!Zt(en)&&!kt(me,en.nodeName.toLowerCase());if(ws(X).exists(en=>en.hasAttribute("data-mce-block")))return!1;const St=X.selection.getRng();return St.collapsed?!0:Mo(St,Re).length===0},cs=X=>Ht(X)&&X.nodeName==="FIGURE"&&/\bimage\b/i.test(X.className),_r=X=>Pn(["title","rel","class","target"],(Re,at)=>(X[at].each(St=>{Re[at]=St.length>0?St:null}),Re),{href:X.href}),Oi=(X,me)=>(me==="http"||me==="https")&&!$r(X)?me+"://"+X:X,Zi=(X,me)=>{const Re={...me};if(to(X).length===0&&!wt(X)){const at=Is(Re.rel,Re.target==="_blank");Re.rel=at||null}return Et.from(Re.target).isNone()&&ms(X)===!1&&(Re.target=nt(X)),Re.href=Oi(Re.href,ct(X)),Re},Go=(X,me,Re,at)=>{Re.each(St=>{kt(me,"innerText")?me.innerText=St:me.textContent=St}),X.dom.setAttribs(me,at),X.selection.select(me)},Vc=(X,me,Re,at)=>{const St=X.dom;cs(me)?Di(St,me,at):Re.fold(()=>{X.execCommand("mceInsertLink",!1,at)},en=>{X.insertContent(St.createHTML("a",at,St.encode(en)))})},At=(X,me,Re)=>{const at=X.selection.getNode(),St=ws(X,at),en=Zi(X,_r(Re));X.undoManager.transact(()=>{Re.href===me.href&&me.attach(),St.fold(()=>{Vc(X,at,Re.text,en)},io=>{X.focus(),Go(X,io,Re.text,en)})})},po=X=>{const me=X.dom,Re=X.selection,at=Re.getBookmark(),St=Re.getRng().cloneRange(),en=me.getParent(St.startContainer,"a[href]",X.getBody()),io=me.getParent(St.endContainer,"a[href]",X.getBody());en&&St.setStartBefore(en),io&&St.setEndAfter(io),Re.setRng(St),X.execCommand("unlink"),Re.moveToBookmark(at)},Hr=X=>{X.undoManager.transact(()=>{const me=X.selection.getNode();cs(me)?hi(X,me):po(X),X.focus()})},Vr=X=>{const{class:me,href:Re,rel:at,target:St,text:en,title:io}=X;return et({class:me.getOrNull(),href:Re,rel:at.getOrNull(),target:St.getOrNull(),text:en.getOrNull(),title:io.getOrNull()},(ls,vo)=>Se(ls)===!1)},Ba=(X,me)=>{const Re=X.options.get,at={allow_html_data_urls:Re("allow_html_data_urls"),allow_script_urls:Re("allow_script_urls"),allow_svg_data_urls:Re("allow_svg_data_urls")},St=me.href;return{...me,href:xe.isDomSafe(St,"a",at)?St:""}},Ja=(X,me,Re)=>{const at=Ba(X,Re);X.hasPlugin("rtc",!0)?X.execCommand("createlink",!1,Vr(at)):At(X,me,at)},Wo=X=>{X.hasPlugin("rtc",!0)?X.execCommand("unlink"):Hr(X)},hi=(X,me)=>{var Re;const at=X.dom.select("img",me)[0];if(at){const St=X.dom.getParents(at,"a[href]",me)[0];St&&((Re=St.parentNode)===null||Re===void 0||Re.insertBefore(at,St),X.dom.remove(St))}},Di=(X,me,Re)=>{var at;const St=X.select("img",me)[0];if(St){const en=X.create("a",Re);(at=St.parentNode)===null||at===void 0||at.insertBefore(en,St),en.appendChild(St)}},zo=X=>K(X.value)?X.value:"",Sn=X=>K(X.text)?X.text:K(X.title)?X.title:"",Ys=(X,me)=>{const Re=[];return To.each(X,at=>{const St=Sn(at);if(at.menu!==void 0){const en=Ys(at.menu,me);Re.push({text:St,items:en})}else{const en=me(at);Re.push({text:St,value:en})}}),Re},Qa=(X=zo)=>me=>Et.from(me).map(Re=>Ys(Re,X)),hs={sanitize:X=>Qa(zo)(X),sanitizeWith:Qa,createUi:(X,me)=>Re=>({name:X,type:"listbox",label:me,items:Re}),getValue:zo},pr=X=>dt(X,"items"),Zs=(X,me)=>ve(me,Re=>pr(Re)?Zs(X,Re.items):Pe(Re.value===X,Re)),Ta=(X,me,Re,at)=>{const St=at[me],en=X.length>0;return St!==void 0?Zs(St,Re).map(io=>({url:{value:io.value,meta:{text:en?X:io.text,attach:vt}},text:en?X:io.text})):Et.none()},yc=(X,me)=>me==="link"?X.link:me==="anchor"?X.anchor:Et.none(),ge={init:(X,me)=>{const Re={text:X.text,title:X.title},at=vo=>{var qt;return Pe(Re.title.length<=0,Et.from((qt=vo.meta)===null||qt===void 0?void 0:qt.title).getOr(""))},St=vo=>{var qt;return Pe(Re.text.length<=0,Et.from((qt=vo.meta)===null||qt===void 0?void 0:qt.text).getOr(vo.value))},en=vo=>{const qt=St(vo.url),sr=at(vo.url);return qt.isSome()||sr.isSome()?Et.some({...qt.map(pn=>({text:pn})).getOr({}),...sr.map(pn=>({title:pn})).getOr({})}):Et.none()},io=(vo,qt)=>{const sr=yc(me,qt).getOr([]);return Ta(Re.text,qt,sr,vo)};return{onChange:(vo,qt)=>{const sr=qt.name;return sr==="url"?en(vo()):jt(["anchor","link"],sr)?io(vo(),sr):((sr==="text"||sr==="title")&&(Re[sr]=vo()[sr]),Et.none())}}},getDelta:Ta};var de=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ve=(X,me,Re)=>{const at=X.selection.getRng();de.setEditorTimeout(X,()=>{X.windowManager.confirm(me,St=>{X.selection.setRng(at),Re(St)})})},Ye=X=>{const me=X.href;return me.indexOf("@")>0&&me.indexOf("/")===-1&&me.indexOf("mailto:")===-1?Et.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:at=>({...at,href:"mailto:"+me})}):Et.none()},gn=(X,me)=>Re=>{const at=Re.href;return X===1&&!$r(at)||X===0&&/^\s*www(\.|\d\.)/i.test(at)?Et.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${me}:// prefix?`,preprocess:en=>({...en,href:me+"://"+at})}):Et.none()},Wn={preprocess:(X,me)=>ve([Ye,gn(ct(X),eo(X))],Re=>Re(me)).fold(()=>Promise.resolve(me),Re=>new Promise(at=>{Ve(X,Re.message,St=>{at(St?Re.preprocess(me):me)})}))},_e={getAnchors:X=>{const me=X.dom.select("a:not([href])"),Re=$e(me,at=>{const St=at.name||at.id;return St?[{text:St,value:"#"+St}]:[]});return Re.length>0?Et.some([{text:"None",value:""}].concat(Re)):Et.none()}},Xs={getClasses:X=>{const me=os(X);return me.length>0?hs.sanitize(me):Et.none()}},ur=X=>{try{return Et.some(JSON.parse(X))}catch{return Et.none()}},Zo={getLinks:X=>{const me=at=>X.convertURL(at.value||at.url||"","href"),Re=rn(X);return new Promise(at=>{K(Re)?fetch(Re).then(St=>St.ok?St.text().then(ur):Promise.reject()).then(at,()=>at(Et.none())):Ut(Re)?Re(St=>at(Et.some(St))):at(Et.from(Re))}).then(at=>at.bind(hs.sanitizeWith(me)).map(St=>St.length>0?[{text:"None",value:""}].concat(St):St))}},Gr={getRels:(X,me)=>{const Re=to(X);if(Re.length>0){const at=so(me,"_blank"),St=wt(X)===!1,en=ls=>Is(hs.getValue(ls),at);return(St?hs.sanitizeWith(en):hs.sanitize)(Re)}return Et.none()}},Aa=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ko={getTargets:X=>{const me=ms(X);return ue(me)?hs.sanitize(me).orThunk(()=>Et.some(Aa)):me===!1?Et.none():Et.some(Aa)}},es=(X,me,Re)=>{const at=X.getAttrib(me,Re);return at!==null&&at.length>0?Et.some(at):Et.none()},na=(X,me)=>{const Re=X.dom,St=fo(X)?Et.some(vs(X.selection,me)):Et.none(),en=me.bind(sr=>Et.from(Re.getAttrib(sr,"href"))),io=me.bind(sr=>Et.from(Re.getAttrib(sr,"target"))),ls=me.bind(sr=>es(Re,sr,"rel")),vo=me.bind(sr=>es(Re,sr,"class")),qt=me.bind(sr=>es(Re,sr,"title"));return{url:en,text:St,title:qt,target:io,rel:ls,linkClass:vo}},kr={collect:(X,me)=>Zo.getLinks(X).then(Re=>{const at=na(X,me);return{anchor:at,catalogs:{targets:Ko.getTargets(X),rels:Gr.getRels(X,at.target),classes:Xs.getClasses(X),anchor:_e.getAnchors(X),link:Re},optNode:me,flags:{titleEnabled:tt(X)}}})},Ji=(X,me)=>Re=>{const at=Re.getData();if(!at.url.value){Wo(X),Re.close();return}const St=ls=>Et.from(at[ls]).filter(vo=>!so(me.anchor[ls],vo)),en={href:at.url.value,text:St("text"),target:St("target"),rel:St("rel"),class:St("linkClass"),title:St("title")},io={href:at.url.value,attach:at.url.meta!==void 0&&at.url.meta.attach?at.url.meta.attach:vt};Wn.preprocess(X,en).then(ls=>{Ja(X,io,ls)}),Re.close()},Ri=X=>{const me=ws(X);return kr.collect(X,me)},xo=(X,me)=>{const Re=X.anchor,at=Re.url.getOr("");return{url:{value:at,meta:{original:{value:at}}},text:Re.text.getOr(""),title:Re.title.getOr(""),anchor:at,link:at,rel:Re.rel.getOr(""),target:Re.target.or(me).getOr(""),linkClass:Re.linkClass.getOr("")}},sa=(X,me,Re)=>{const at=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],St=X.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),en=X.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],io=Et.from(nt(Re)),ls=xo(X,io),vo=X.catalogs,qt=ge.init(ls,vo);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Qt([at,St,en,Me([vo.anchor.map(hs.createUi("anchor","Anchors")),vo.rels.map(hs.createUi("rel","Rel")),vo.targets.map(hs.createUi("target","Open link in...")),vo.link.map(hs.createUi("link","Link list")),vo.classes.map(hs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ls,onChange:(pn,{name:Dr})=>{qt.onChange(pn.getData,{name:Dr}).each(wc=>{pn.setData(wc)})},onSubmit:me}},zr=X=>{Ri(X).then(Re=>{const at=Ji(X,Re);return sa(Re,at,X)}).then(Re=>{X.windowManager.open(Re)})},Qi=X=>{X.addCommand("mceLink",(me,Re)=>{(Re==null?void 0:Re.dialog)===!0||!W(X)?zr(X):X.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ei=X=>{X.addShortcut("Meta+K","",()=>{X.execCommand("mceLink")})},Ar=X=>{let me=X;return{get:()=>me,set:St=>{me=St}}},Ls=X=>{const me=Ar(Et.none()),Re=()=>me.get().each(X);return{clear:()=>{Re(),me.set(Et.none())},isSet:()=>me.get().isSome(),get:()=>me.get(),set:ls=>{Re(),me.set(Et.some(ls))}}},Sf=()=>{const X=Ls(vt);return{...X,on:Re=>X.get().each(Re)}};var ji=tinymce.util.Tools.resolve("tinymce.util.VK");const Uo=(X,me)=>{document.body.appendChild(X),X.dispatchEvent(me),document.body.removeChild(X)},Oa=X=>{const me=document.createElement("a");me.target="_blank",me.href=X,me.rel="noreferrer noopener";const Re=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(Re),Uo(me,Re)},ma=X=>X.altKey===!0&&X.shiftKey===!1&&X.ctrlKey===!1&&X.metaKey===!1,br=(X,me)=>{if(me){const Re=Po(me);if(/^#/.test(Re)){const at=X.dom.select(Re);at.length&&X.selection.scrollIntoView(at[0],!0)}else Oa(me.href)}},$l=X=>{const me=X.selection.getRng(),Re=me.startContainer;return ss(Re)&&me.startContainer===me.endContainer&&X.dom.select("img",Re).length===1},Da=(X,me)=>{const Re=Cs(X.dom.getParents(me));return Pe(Re.length===1,Re[0])},Ia=X=>{const me=qr(X.selection.getRng());return Pe(me.length>0,me[0]).or(Da(X,X.selection.getNode()))},ec=X=>X.selection.isCollapsed()||$l(X)?Da(X,X.selection.getStart()):Ia(X),Mi=X=>{const me=Sf(),Re=()=>me.get().or(ec(X)),at=()=>Re().each(St=>br(X,St));return X.on("contextmenu",St=>{Da(X,St.target).each(me.set)}),X.on("SelectionChange",()=>{me.isSet()||ec(X).each(me.set)}),X.on("click",St=>{me.clear();const en=Cs(X.dom.getParents(St.target));en.length===1&&ji.metaKeyPressed(St)&&(St.preventDefault(),br(X,en[0]))}),X.on("keydown",St=>{me.clear(),!St.isDefaultPrevented()&&St.keyCode===13&&ma(St)&&Re().each(en=>{St.preventDefault(),br(X,en)})}),{gotoSelectedLink:at}},uu=X=>()=>{X.execCommand("mceLink",!1,{dialog:!0})},fl=(X,me)=>(X.on("NodeChange",me),()=>X.off("NodeChange",me)),Uc=X=>me=>{const Re=()=>{me.setActive(!X.mode.isReadOnly()&&bs(X,X.selection.getNode())),me.setEnabled(X.selection.isEditable())};return Re(),fl(X,Re)},ti=X=>me=>{const Re=()=>{me.setEnabled(X.selection.isEditable())};return Re(),fl(X,Re)},Or=X=>me=>{const Re=en=>Vo(en)||vc(X.selection.getRng()),at=X.dom.getParents(X.selection.getStart()),St=en=>{me.setEnabled(Re(en)&&X.selection.isEditable())};return St(at),fl(X,en=>St(en.parents))},du=(X,me)=>{X.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:uu(X),onSetup:Uc(X)}),X.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:me.gotoSelectedLink,onSetup:Or(X)}),X.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Wo(X),onSetup:Or(X)})},fu=(X,me)=>{X.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:me.gotoSelectedLink,onSetup:Or(X)}),X.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:uu(X),onSetup:ti(X)}),X.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Wo(X),onSetup:Or(X)})},mu=X=>{const me="link unlink openlink",Re="link";X.ui.registry.addContextMenu("link",{update:at=>X.dom.isEditable(at)?Vo(X.dom.getParents(at,"a"))?me:Re:""})},hu=(X,me)=>{const Re=en=>{en.selection.collapse(!1)},at=en=>{const io=X.selection.getNode();return en.setEnabled(bs(X,io)),vt},St=en=>{const io=ws(X),ls=fo(X);if(io.isNone()&&ls){const vo=vs(X.selection,io);return Pe(vo.length===0,en)}else return Et.none()};X.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Uc(X)},label:"Link",predicate:en=>Hn(X)&&bs(X,en),initValue:()=>ws(X).fold(Ie(""),Po),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:en=>{const io=X.selection.getNode();return en.setActive(bs(X,io)),Uc(X)(en)},onAction:en=>{const io=en.getValue(),ls=St(io);Ja(X,{href:io,attach:vt},{href:io,text:ls,title:Et.none(),rel:Et.none(),target:Et.from(nt(X)),class:Et.none()}),Re(X),en.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:at,onAction:en=>{Wo(X),en.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:at,onAction:en=>{me.gotoSelectedLink(),en.hide()}}]})},vr=X=>{const me=Mi(X);du(X,me),fu(X,me),mu(X),hu(X,me)};var gi=()=>{p.add("link",X=>{cn(X),Qi(X),vr(X),ei(X)})};gi()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(k,I,q)=>{var fe;return q(k,I.prototype)?!0:((fe=k.constructor)===null||fe===void 0?void 0:fe.name)===I.name},w=k=>{const I=typeof k;return k===null?"null":I==="object"&&Array.isArray(k)?"array":I==="object"&&g(k,String,(q,fe)=>fe.isPrototypeOf(q))?"string":I},E=k=>I=>w(I)===k,N=k=>I=>typeof I===k,z=E("string"),K=E("object"),j=E("array"),ue=N("boolean"),Se=k=>k==null,be=k=>!Se(k),Ge=N("function"),Ht=N("number"),Ut=()=>{},Nt=(k,I)=>q=>k(I(q)),vt=k=>()=>k,Ie=(k,I)=>k===I;function on(k,...I){return(...q)=>{const fe=I.concat(q);return k.apply(null,fe)}}const Et=k=>I=>!k(I),ce=vt(!1);class qe{constructor(I,q){this.tag=I,this.value=q}static some(I){return new qe(!0,I)}static none(){return qe.singletonNone}fold(I,q){return this.tag?q(this.value):I()}isSome(){return this.tag}isNone(){return!this.tag}map(I){return this.tag?qe.some(I(this.value)):qe.none()}bind(I){return this.tag?I(this.value):qe.none()}exists(I){return this.tag&&I(this.value)}forall(I){return!this.tag||I(this.value)}filter(I){return!this.tag||I(this.value)?this:qe.none()}getOr(I){return this.tag?this.value:I}or(I){return this.tag?this:I}getOrThunk(I){return this.tag?this.value:I()}orThunk(I){return this.tag?this:I()}getOrDie(I){if(this.tag)return this.value;throw new Error(I??"Called getOrDie on None")}static from(I){return be(I)?qe.some(I):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(I){this.tag&&I(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const On=Array.prototype.slice,jt=Array.prototype.indexOf,ne=Array.prototype.push,Kt=(k,I)=>jt.call(k,I),Pn=(k,I)=>Kt(k,I)>-1,Qt=(k,I)=>{for(let q=0,fe=k.length;q<fe;q++){const Ee=k[q];if(I(Ee,q))return!0}return!1},$e=(k,I)=>{const q=k.length,fe=new Array(q);for(let Ee=0;Ee<q;Ee++){const mt=k[Ee];fe[Ee]=I(mt,Ee)}return fe},ve=(k,I)=>{for(let q=0,fe=k.length;q<fe;q++){const Ee=k[q];I(Ee,q)}},so=(k,I)=>{const q=[];for(let fe=0,Ee=k.length;fe<Ee;fe++){const mt=k[fe];I(mt,fe)&&q.push(mt)}return q},Me=(k,I)=>{if(k.length===0)return[];{let q=I(k[0]);const fe=[];let Ee=[];for(let mt=0,kn=k.length;mt<kn;mt++){const Jn=k[mt],Rn=I(Jn);Rn!==q&&(fe.push(Ee),Ee=[]),q=Rn,Ee.push(Jn)}return Ee.length!==0&&fe.push(Ee),fe}},Pe=(k,I,q)=>(ve(k,(fe,Ee)=>{q=I(q,fe,Ee)}),q),M=(k,I,q)=>{for(let fe=0,Ee=k.length;fe<Ee;fe++){const mt=k[fe];if(I(mt,fe))return qe.some(mt);if(q(mt,fe))break}return qe.none()},cn=(k,I)=>M(k,I,ce),ct=k=>{const I=[];for(let q=0,fe=k.length;q<fe;++q){if(!j(k[q]))throw new Error("Arr.flatten item "+q+" was not an array, input: "+k);ne.apply(I,k[q])}return I},Hn=(k,I)=>ct($e(k,I)),rn=k=>{const I=On.call(k,0);return I.reverse(),I},nt=(k,I)=>I>=0&&I<k.length?qe.some(k[I]):qe.none(),eo=k=>nt(k,0),ms=k=>nt(k,k.length-1),to=(k,I)=>{const q=[],fe=Ge(I)?Ee=>Qt(q,mt=>I(mt,Ee)):Ee=>Pn(q,Ee);for(let Ee=0,mt=k.length;Ee<mt;Ee++){const kn=k[Ee];fe(kn)||q.push(kn)}return q},os=(k,I,q=Ie)=>k.exists(fe=>q(fe,I)),tt=(k,I,q=Ie)=>wt(k,I,q).getOr(k.isNone()&&I.isNone()),wt=(k,I,q)=>k.isSome()&&I.isSome()?qe.some(q(k.getOrDie(),I.getOrDie())):qe.none(),W=8,ta=11,uo=1,qo=3,Ho=(k,I)=>{const fe=(I||document).createElement("div");if(fe.innerHTML=k,!fe.hasChildNodes()||fe.childNodes.length>1){const Ee="HTML does not have a single root node";throw console.error(Ee,k),new Error(Ee)}return kt(fe.childNodes[0])},Wi=(k,I)=>{const fe=(I||document).createElement(k);return kt(fe)},et=(k,I)=>{const fe=(I||document).createTextNode(k);return kt(fe)},kt=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},xe={fromHtml:Ho,fromTag:Wi,fromText:et,fromDom:kt,fromPoint:(k,I,q)=>qe.from(k.dom.elementFromPoint(I,q)).map(kt)},_o=(k,I)=>{const q=k.dom;if(q.nodeType!==uo)return!1;{const fe=q;if(fe.matches!==void 0)return fe.matches(I);if(fe.msMatchesSelector!==void 0)return fe.msMatchesSelector(I);if(fe.webkitMatchesSelector!==void 0)return fe.webkitMatchesSelector(I);if(fe.mozMatchesSelector!==void 0)return fe.mozMatchesSelector(I);throw new Error("Browser lacks native selectors")}},To=(k,I)=>k.dom===I.dom,Zt=(k,I)=>{const q=k.dom,fe=I.dom;return q===fe?!1:q.contains(fe)},ss=_o,Mo=typeof window<"u"?window:Function("return this;")(),$r=(k,I)=>{let q=I??Mo;for(let fe=0;fe<k.length&&q!==void 0&&q!==null;++fe)q=q[k[fe]];return q},Po=(k,I)=>{const q=k.split(".");return $r(q,I)},Is=(k,I)=>Po(k,I),Xa=(k,I)=>{const q=Is(k,I);if(q==null)throw new Error(k+" not available on this browser");return q},ws=Object.getPrototypeOf,bs=k=>Xa("HTMLElement",k),vs=k=>{const I=Po("ownerDocument.defaultView",k);return K(k)&&(bs(I).prototype.isPrototypeOf(k)||/^HTML\w*Element$/.test(ws(k).constructor.name))},qr=k=>k.dom.nodeName.toLowerCase(),Cs=k=>k.dom.nodeType,Vo=k=>I=>Cs(I)===k,vc=k=>Cs(k)===W||qr(k)==="#comment",fo=k=>cs(k)&&vs(k.dom),cs=Vo(uo),_r=Vo(qo),Oi=Vo(ta),Zi=k=>I=>cs(I)&&qr(I)===k,Go=k=>qe.from(k.dom.parentNode).map(xe.fromDom),Vc=k=>qe.from(k.dom.parentElement).map(xe.fromDom),At=k=>qe.from(k.dom.nextSibling).map(xe.fromDom),po=k=>$e(k.dom.childNodes,xe.fromDom),Hr=(k,I)=>{const q=k.dom.childNodes;return qe.from(q[I]).map(xe.fromDom)},Vr=k=>Hr(k,0),Ba=k=>Hr(k,k.dom.childNodes.length-1),Ja=k=>Oi(k)&&be(k.dom.host),Wo=k=>xe.fromDom(k.dom.getRootNode()),hi=k=>{const I=Wo(k);return Ja(I)?qe.some(I):qe.none()},Di=k=>xe.fromDom(k.dom.host),zo=k=>{const I=_r(k)?k.dom.parentNode:k.dom;if(I==null||I.ownerDocument===null)return!1;const q=I.ownerDocument;return hi(xe.fromDom(I)).fold(()=>q.body.contains(I),Nt(zo,Di))};var Sn=(k,I,q,fe,Ee)=>k(q,fe)?qe.some(q):Ge(Ee)&&Ee(q)?qe.none():I(q,fe,Ee);const Ys=(k,I,q)=>{let fe=k.dom;const Ee=Ge(q)?q:ce;for(;fe.parentNode;){fe=fe.parentNode;const mt=xe.fromDom(fe);if(I(mt))return qe.some(mt);if(Ee(mt))break}return qe.none()},Qa=(k,I,q)=>Sn((Ee,mt)=>mt(Ee),Ys,k,I,q),ul=(k,I,q)=>Ys(k,fe=>_o(fe,I),q),dl=(k,I,q)=>Sn((Ee,mt)=>_o(Ee,mt),ul,k,I,q),hs=k=>dl(k,"[contenteditable]"),pr=(k,I=!1)=>zo(k)?k.dom.isContentEditable:hs(k).fold(vt(I),q=>Zs(q)==="true"),Zs=k=>k.dom.contentEditable,Ta=(k,I)=>{Go(k).each(fe=>{fe.dom.insertBefore(I.dom,k.dom)})},yc=(k,I)=>{At(k).fold(()=>{Go(k).each(Ee=>{ge(Ee,I)})},fe=>{Ta(fe,I)})},Tr=(k,I)=>{Vr(k).fold(()=>{ge(k,I)},fe=>{k.dom.insertBefore(I.dom,fe.dom)})},ge=(k,I)=>{k.dom.appendChild(I.dom)},de=(k,I)=>{ve(I,q=>{Ta(k,q)})},Ve=(k,I)=>{ve(I,q=>{ge(k,q)})},Ye=k=>{k.dom.textContent="",ve(po(k),I=>{gn(I)})},gn=k=>{const I=k.dom;I.parentNode!==null&&I.parentNode.removeChild(I)};var Bn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Wn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),or=tinymce.util.Tools.resolve("tinymce.util.VK");const _e=k=>$e(k,xe.fromDom),Zn=Object.keys,Xs=(k,I)=>{const q=Zn(k);for(let fe=0,Ee=q.length;fe<Ee;fe++){const mt=q[fe],kn=k[mt];I(kn,mt)}},ur=k=>(I,q)=>{k[q]=I},ka=(k,I,q,fe)=>{Xs(k,(Ee,mt)=>{(I(Ee,mt)?q:fe)(Ee,mt)})},Zo=(k,I)=>{const q={};return ka(k,I,ur(q),Ut),q},zc=(k,I,q)=>{if(z(q)||ue(q)||Ht(q))k.setAttribute(I,q+"");else throw console.error("Invalid call to Attribute.set. Key ",I,":: Value ",q,":: Element ",k),new Error("Attribute value was not simple")},Gr=(k,I)=>{const q=k.dom;Xs(I,(fe,Ee)=>{zc(q,Ee,fe)})},Aa=k=>Pe(k.dom.attributes,(I,q)=>(I[q.name]=q.value,I),{}),Ps=(k,I)=>xe.fromDom(k.dom.cloneNode(I)),Ko=k=>Ps(k,!0),es=(k,I)=>{const q=xe.fromTag(I),fe=Aa(k);return Gr(q,fe),q},na=(k,I)=>{const q=es(k,I);yc(k,q);const fe=po(k);return Ve(q,fe),gn(k),q};var oa=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),kr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ji=k=>I=>be(I)&&I.nodeName.toLowerCase()===k,Ri=k=>I=>be(I)&&k.test(I.nodeName),xo=k=>be(k)&&k.nodeType===3,sa=k=>be(k)&&k.nodeType===1,zr=Ri(/^(OL|UL|DL)$/),Qi=Ri(/^(OL|UL)$/),ei=Ji("ol"),Ar=Ri(/^(LI|DT|DD)$/),Ls=Ri(/^(DT|DD)$/),Sf=Ri(/^(TH|TD)$/),ji=Ji("br"),Uo=k=>{var I;return((I=k.parentNode)===null||I===void 0?void 0:I.firstChild)===k},Oa=(k,I)=>be(I)&&I.nodeName in k.schema.getTextBlockElements(),ma=(k,I)=>be(k)&&k.nodeName in I,br=(k,I)=>be(I)&&I.nodeName in k.schema.getVoidElements(),$l=(k,I)=>ji(I)?k.isBlock(I.nextSibling)&&!ji(I.previousSibling):!1,Da=(k,I,q)=>{const fe=k.isEmpty(I);return q&&k.select("span[data-mce-type=bookmark]",I).length>0?!1:fe},Ia=(k,I)=>k.isChildOf(I,k.getRoot()),ec=k=>I=>I.options.get(k),Mi=k=>{const I=k.options.register;I("lists_indent_on_tab",{processor:"boolean",default:!0})},uu=ec("lists_indent_on_tab"),fl=ec("forced_root_block"),Uc=ec("forced_root_block_attrs"),ti=(k,I,q={})=>{const fe=k.dom,Ee=k.schema.getBlockElements(),mt=fe.createFragment(),kn=fl(k),Jn=Uc(k);let Rn,An,Rs=!1;for(An=fe.create(kn,{...Jn,...q.style?{style:q.style}:{}}),ma(I.firstChild,Ee)||mt.appendChild(An);Rn=I.firstChild;){const xr=Rn.nodeName;!Rs&&(xr!=="SPAN"||Rn.getAttribute("data-mce-type")!=="bookmark")&&(Rs=!0),ma(Rn,Ee)?(mt.appendChild(Rn),An=null):(An||(An=fe.create(kn,Jn),mt.appendChild(An)),An.appendChild(Rn))}return!Rs&&An&&An.appendChild(fe.create("br",{"data-mce-bogus":"1"})),mt},Or=oa.DOM,du=(k,I,q)=>{const fe=An=>{const Rs=An.parentNode;Rs&&kr.each(Ee,xr=>{Rs.insertBefore(xr,q.parentNode)}),Or.remove(An)},Ee=Or.select('span[data-mce-type="bookmark"]',I),mt=ti(k,q),kn=Or.createRng();kn.setStartAfter(q),kn.setEndAfter(I);const Jn=kn.extractContents();for(let An=Jn.firstChild;An;An=An.firstChild)if(An.nodeName==="LI"&&k.dom.isEmpty(An)){Or.remove(An);break}k.dom.isEmpty(Jn)||Or.insertAfter(Jn,I),Or.insertAfter(mt,I);const Rn=q.parentElement;Rn&&Da(k.dom,Rn)&&fe(Rn),Or.remove(q),Da(k.dom,I)&&Or.remove(I)},fu=Zi("dd"),mu=Zi("dt"),hu=(k,I)=>{fu(I)?na(I,"dt"):mu(I)&&Vc(I).each(q=>du(k,q.dom,I.dom))},vr=k=>{mu(k)&&na(k,"dd")},gi=(k,I,q)=>{I==="Indent"?ve(q,vr):ve(q,fe=>hu(k,fe))},X=(k,I)=>{if(xo(k))return{container:k,offset:I};const q=Bn.getNode(k,I);return xo(q)?{container:q,offset:I>=k.childNodes.length?q.data.length:0}:q.previousSibling&&xo(q.previousSibling)?{container:q.previousSibling,offset:q.previousSibling.data.length}:q.nextSibling&&xo(q.nextSibling)?{container:q.nextSibling,offset:0}:{container:k,offset:I}},me=k=>{const I=k.cloneRange(),q=X(k.startContainer,k.startOffset);I.setStart(q.container,q.offset);const fe=X(k.endContainer,k.endOffset);return I.setEnd(fe.container,fe.offset),I},Re=["OL","UL","DL"],at=Re.join(","),St=(k,I)=>{const q=I||k.selection.getStart(!0);return k.dom.getParent(q,at,wc(k,q))},en=(k,I)=>be(k)&&I.length===1&&I[0]===k,io=k=>so(k.querySelectorAll(at),zr),ls=k=>{const I=St(k),q=k.selection.getSelectedBlocks();return en(I,q)?io(I):so(q,fe=>zr(fe)&&I!==fe)},vo=(k,I)=>{const q=kr.map(I,fe=>{const Ee=k.dom.getParent(fe,"li,dd,dt",wc(k,fe));return Ee||fe});return to(q)},qt=k=>{const I=k.selection.getSelectedBlocks();return so(vo(k,I),Ar)},sr=k=>so(qt(k),Ls),pn=(k,I)=>{const q=k.dom.getParents(I,"TD,TH");return q.length>0?q[0]:k.getBody()},Dr=(k,I)=>!zr(I)&&!Ar(I)&&Qt(Re,q=>k.isValidChild(I.nodeName,q)),wc=(k,I)=>{const q=k.dom.getParents(I,k.dom.isBlock),fe=mt=>mt.nodeName.toLowerCase()!==fl(k);return cn(q,mt=>fe(mt)&&Dr(k.schema,mt)).getOr(k.getBody())},H=k=>Go(k).exists(I=>Ar(I.dom)&&Vr(I).exists(q=>!zr(q.dom))&&Ba(I).exists(q=>!zr(q.dom))),oe=(k,I)=>{const q=k.dom.getParents(I,"ol,ul",wc(k,I));return ms(q)},ye=k=>{const I=oe(k,k.selection.getStart()),q=so(k.selection.getSelectedBlocks(),Qi);return I.toArray().concat(q)},Le=k=>{const I=k.selection.getStart();return k.dom.getParents(I,"ol,ul",wc(k,I))},lt=k=>{const I=ye(k),q=Le(k);return cn(q,fe=>H(xe.fromDom(fe))).fold(()=>Gn(k,I),fe=>[fe])},Gn=(k,I)=>{const q=$e(I,fe=>oe(k,fe).getOr(fe));return to(q)},Ss=k=>/\btox\-/.test(k.className),rs=(k,I)=>M(k,zr,Sf).exists(q=>q.nodeName===I&&!Ss(q)),yt=(k,I)=>I!==null&&!k.dom.isEditable(I),Os=k=>{const I=St(k);return yt(k,I)},ha=(k,I)=>{const q=k.dom.getParent(I,"ol,ul,dl");return yt(k,q)},ni=(k,I)=>{const q=k.selection.getNode();return I({parents:k.dom.getParents(q),element:q}),k.on("NodeChange",I),()=>k.off("NodeChange",I)},Xn=(k,I)=>{const fe=document.createDocumentFragment();return ve(k,Ee=>{fe.appendChild(Ee.dom)}),xe.fromDom(fe)},oi=(k,I,q)=>k.dispatch("ListMutation",{action:I,element:q}),ed=(k=>I=>I.replace(k,""))(/^\s+|\s+$/g),xs=k=>k.length>0,ml=k=>!xs(k),bm=k=>k.style!==void 0&&Ge(k.style.getPropertyValue),m1=(k,I,q)=>{if(!z(q))throw console.error("Invalid call to CSS.set. Property ",I,":: Value ",q,":: Element ",k),new Error("CSS value must be a string: "+q);bm(k)&&k.style.setProperty(I,q)},Js=(k,I,q)=>{const fe=k.dom;m1(fe,I,q)},vm=k=>ss(k,"OL,UL"),yr=k=>ss(k,"LI"),ga=k=>Vr(k).exists(vm),Wc=k=>Ba(k).exists(vm),Cc=k=>"listAttributes"in k,Ld=k=>"isComment"in k,La=k=>"isFragment"in k,yo=k=>k.depth>0,hl=k=>k.isSelected,Sc=k=>{const I=po(k),q=Wc(k)?I.slice(0,-1):I;return $e(q,Ko)},h1=(k,I,q)=>Go(k).filter(cs).map(fe=>({depth:I,dirty:!1,isSelected:q,content:Sc(k),itemAttributes:Aa(k),listAttributes:Aa(fe),listType:qr(fe),isInPreviousLi:!1})),Kr=(k,I)=>{ge(k.item,I.list)},Fa=k=>{for(let I=1;I<k.length;I++)Kr(k[I-1],k[I])},Yr=(k,I)=>{wt(ms(k),eo(I),Kr)},Dh=(k,I)=>{const q={list:xe.fromTag(I,k),item:xe.fromTag("li",k)};return ge(q.list,q.item),q},xf=(k,I,q)=>{const fe=[];for(let Ee=0;Ee<q;Ee++)fe.push(Dh(k,Cc(I)?I.listType:I.parentListType));return fe},si=(k,I)=>{for(let q=0;q<k.length-1;q++)Js(k[q].item,"list-style-type","none");ms(k).each(q=>{Cc(I)&&(Gr(q.list,I.listAttributes),Gr(q.item,I.itemAttributes)),Ve(q.item,I.content)})},Rh=(k,I)=>{qr(k.list)!==I.listType&&(k.list=na(k.list,I.listType)),Gr(k.list,I.listAttributes)},js=(k,I,q)=>{const fe=xe.fromTag("li",k);return Gr(fe,I),Ve(fe,q),fe},Zc=(k,I)=>{ge(k.list,I),k.item=I},ri=(k,I,q)=>{const fe=I.slice(0,q.depth);return ms(fe).each(Ee=>{if(Cc(q)){const mt=js(k,q.itemAttributes,q.content);Zc(Ee,mt),Rh(Ee,q)}else if(La(q))Ve(Ee.item,q.content);else{const mt=xe.fromHtml(`<!--${q.content}-->`);ge(Ee.list,mt)}}),fe},wr=(k,I,q)=>{const fe=xf(k,q,q.depth-I.length);return Fa(fe),si(fe,q),Yr(I,fe),I.concat(fe)},pi=(k,I)=>{let q=qe.none();const fe=Pe(I,(Ee,mt,kn)=>Ld(mt)?kn===0?(q=qe.some(mt),Ee):ri(k,Ee,mt):mt.depth>Ee.length?wr(k,Ee,mt):ri(k,Ee,mt),[]);return q.each(Ee=>{const mt=xe.fromHtml(`<!--${Ee.content}-->`);eo(fe).each(kn=>{Tr(kn.list,mt)})}),eo(fe).map(Ee=>Ee.list)},Cr=(k,I)=>{switch(k){case"Indent":I.depth++;break;case"Outdent":I.depth--;break;case"Flatten":I.depth=0}I.dirty=!0},Mh=(k,I)=>{Cc(k)&&Cc(I)&&(k.listType=I.listType,k.listAttributes={...I.listAttributes})},gu=k=>{k.listAttributes=Zo(k.listAttributes,(I,q)=>q!=="start")},pu=(k,I)=>{const q=k[I].depth,fe=mt=>mt.depth===q&&!mt.dirty,Ee=mt=>mt.depth<q;return M(rn(k.slice(0,I)),fe,Ee).orThunk(()=>M(k.slice(I+1),fe,Ee))},Ef=k=>(ve(k,(I,q)=>{pu(k,q).fold(()=>{I.dirty&&Cc(I)&&gu(I)},fe=>Mh(I,fe))}),k),bu=k=>{let I=k;return{get:()=>I,set:Ee=>{I=Ee}}},xc=(k,I,q,fe)=>{var Ee;if(vc(fe))return[{depth:k+1,content:(Ee=fe.dom.nodeValue)!==null&&Ee!==void 0?Ee:"",dirty:!1,isSelected:!1,isComment:!0}];I.each(Jn=>{To(Jn.start,fe)&&q.set(!0)});const mt=h1(fe,k,q.get());I.each(Jn=>{To(Jn.end,fe)&&q.set(!1)});const kn=Ba(fe).filter(vm).map(Jn=>Sr(k,I,q,Jn)).getOr([]);return mt.toArray().concat(kn)},_f=(k,I,q,fe)=>Vr(fe).filter(vm).fold(()=>xc(k,I,q,fe),Ee=>{const mt=Pe(po(fe),(kn,Jn,Rn)=>{if(Rn===0)return kn;if(yr(Jn))return kn.concat(xc(k,I,q,Jn));{const An={isFragment:!0,depth:k,content:[Jn],isSelected:!1,dirty:!1,parentListType:qr(Ee)};return kn.concat(An)}},[]);return Sr(k,I,q,Ee).concat(mt)}),Sr=(k,I,q,fe)=>Hn(po(fe),Ee=>{const mt=vm(Ee)?Sr:_f,kn=k+1;return mt(kn,I,q,Ee)}),Tf=(k,I)=>{const q=bu(!1),fe=0;return $e(k,Ee=>({sourceList:Ee,entries:Sr(fe,I,q,Ee)}))},Nh=(k,I)=>{const q=Ef(I);return $e(q,fe=>{const Ee=Ld(fe)?Xn([xe.fromHtml(`<!--${fe.content}-->`)]):Xn(fe.content),mt=Cc(fe)?fe.itemAttributes:{};return xe.fromDom(ti(k,Ee.dom,mt))})},gl=(k,I)=>{const q=Ef(I);return pi(k.contentDocument,q).toArray()},Ph=(k,I)=>Hn(Me(I,yo),q=>eo(q).exists(yo)?gl(k,q):Nh(k,q)),vu=(k,I)=>{ve(so(k,hl),q=>Cr(I,q))},Bh=k=>{const I=$e(qt(k),xe.fromDom);return wt(cn(I,Et(ga)),cn(rn(I),Et(ga)),(q,fe)=>({start:q,end:fe}))},Hl=(k,I,q)=>{const fe=Tf(I,Bh(k));ve(fe,Ee=>{vu(Ee.entries,q);const mt=Ph(k,Ee.entries);ve(mt,kn=>{oi(k,q==="Indent"?"IndentList":"OutdentList",kn.dom)}),de(Ee.sourceList,mt),gn(Ee.sourceList)})},Ih=(k,I)=>{const q=_e(lt(k)),fe=_e(sr(k));let Ee=!1;if(q.length||fe.length){const mt=k.selection.getBookmark();Hl(k,q,I),gi(k,I,fe),k.selection.moveToBookmark(mt),k.selection.setRng(me(k.selection.getRng())),k.nodeChanged(),Ee=!0}return Ee},kf=(k,I)=>!Os(k)&&Ih(k,I),ym=k=>kf(k,"Indent"),yu=k=>kf(k,"Outdent"),wm=k=>kf(k,"Flatten"),pe="\uFEFF",Vl=k=>k===pe,pl=(k,I,q)=>Ys(k,I,q).isSome(),Lh=(k,I)=>pl(k,on(To,I));var g1=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const wu=oa.DOM,ro=k=>{const I={},q=fe=>{let Ee=k[fe?"startContainer":"endContainer"],mt=k[fe?"startOffset":"endOffset"];if(sa(Ee)){const kn=wu.create("span",{"data-mce-type":"bookmark"});Ee.hasChildNodes()?(mt=Math.min(mt,Ee.childNodes.length-1),fe?Ee.insertBefore(kn,Ee.childNodes[mt]):wu.insertAfter(kn,Ee.childNodes[mt])):Ee.appendChild(kn),Ee=kn,mt=0}I[fe?"startContainer":"endContainer"]=Ee,I[fe?"startOffset":"endOffset"]=mt};return q(!0),k.collapsed||q(),I},Rr=k=>{const I=fe=>{const Ee=Jn=>{var Rn;let An=(Rn=Jn.parentNode)===null||Rn===void 0?void 0:Rn.firstChild,Rs=0;for(;An;){if(An===Jn)return Rs;(!sa(An)||An.getAttribute("data-mce-type")!=="bookmark")&&Rs++,An=An.nextSibling}return-1};let mt=k[fe?"startContainer":"endContainer"],kn=k[fe?"startOffset":"endOffset"];if(mt){if(sa(mt)&&mt.parentNode){const Jn=mt;kn=Ee(mt),mt=mt.parentNode,wu.remove(Jn),!mt.hasChildNodes()&&wu.isBlock(mt)&&mt.appendChild(wu.create("br"))}k[fe?"startContainer":"endContainer"]=mt,k[fe?"startOffset":"endOffset"]=kn}};I(!0),I();const q=wu.createRng();return q.setStart(k.startContainer,k.startOffset),k.endContainer&&q.setEnd(k.endContainer,k.endOffset),me(q)},Ec=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Cu=(k,I,q)=>{const fe=q["list-style-type"]?q["list-style-type"]:null;k.setStyle(I,"list-style-type",fe)},Af=(k,I)=>{kr.each(I,(q,fe)=>{k.setAttribute(fe,q)})},Fd=(k,I,q)=>{Af(I,q["list-attributes"]),kr.each(k.select("li",I),fe=>{Af(fe,q["list-item-attributes"])})},$a=(k,I,q)=>{Cu(k,I,q),Fd(k,I,q)},Of=(k,I,q)=>{kr.each(q,fe=>k.setStyle(I,fe,""))},zl=(k,I)=>be(I)&&!ma(I,k.schema.getBlockElements()),Df=(k,I,q,fe)=>{let Ee=I[q?"startContainer":"endContainer"];const mt=I[q?"startOffset":"endOffset"];sa(Ee)&&(Ee=Ee.childNodes[Math.min(mt,Ee.childNodes.length-1)]||Ee),!q&&ji(Ee.nextSibling)&&(Ee=Ee.nextSibling);const kn=Rn=>{for(;!k.dom.isBlock(Rn)&&Rn.parentNode&&fe!==Rn;)Rn=Rn.parentNode;return Rn},Jn=(Rn,An)=>{var Rs;const xr=new Wn(Rn,kn(Rn)),oc=An?"next":"prev";let jl;for(;jl=xr[oc]();)if(!(br(k,jl)||Vl(jl.textContent)||((Rs=jl.textContent)===null||Rs===void 0?void 0:Rs.length)===0))return qe.some(jl);return qe.none()};if(q&&xo(Ee))if(Vl(Ee.textContent))Ee=Jn(Ee,!1).getOr(Ee);else for(Ee.parentNode!==null&&zl(k,Ee.parentNode)&&(Ee=Ee.parentNode);Ee.previousSibling!==null&&(zl(k,Ee.previousSibling)||xo(Ee.previousSibling));)Ee=Ee.previousSibling;if(!q&&xo(Ee))if(Vl(Ee.textContent))Ee=Jn(Ee,!0).getOr(Ee);else for(Ee.parentNode!==null&&zl(k,Ee.parentNode)&&(Ee=Ee.parentNode);Ee.nextSibling!==null&&(zl(k,Ee.nextSibling)||xo(Ee.nextSibling));)Ee=Ee.nextSibling;for(;Ee.parentNode!==fe;){const Rn=Ee.parentNode;if(Oa(k,Ee)||/^(TD|TH)$/.test(Rn.nodeName))return Ee;Ee=Rn}return Ee},Ul=(k,I,q)=>{const fe=[],Ee=k.dom,mt=Df(k,I,!0,q),kn=Df(k,I,!1,q);let Jn;const Rn=[];for(let An=mt;An&&(Rn.push(An),An!==kn);An=An.nextSibling);return kr.each(Rn,An=>{var Rs;if(Oa(k,An)){fe.push(An),Jn=null;return}if(Ee.isBlock(An)||ji(An)){ji(An)&&Ee.remove(An),Jn=null;return}const xr=An.nextSibling;if(g1.isBookmarkNode(An)&&(zr(xr)||Oa(k,xr)||!xr&&An.parentNode===q)){Jn=null;return}Jn||(Jn=Ee.create("p"),(Rs=An.parentNode)===null||Rs===void 0||Rs.insertBefore(Jn,An),fe.push(Jn)),Jn.appendChild(An)}),fe},bi=(k,I,q)=>{const fe=k.getStyle(I,"list-style-type");let Ee=q?q["list-style-type"]:"";return Ee=Ee===null?"":Ee,fe===Ee},Fh=(k,I)=>{const q=k.selection.getStart(!0),fe=Df(k,I,!0,k.getBody());return Lh(xe.fromDom(fe),xe.fromDom(I.commonAncestorContainer))?I.commonAncestorContainer:q},$d=(k,I,q)=>{const fe=k.selection.getRng();let Ee="LI";const mt=wc(k,Fh(k,fe)),kn=k.dom;if(kn.getContentEditable(k.selection.getNode())==="false")return;I=I.toUpperCase(),I==="DL"&&(Ee="DT");const Jn=ro(fe),Rn=so(Ul(k,fe,mt),k.dom.isEditable);kr.each(Rn,An=>{let Rs;const xr=An.previousSibling,oc=An.parentNode;Ar(oc)||(xr&&zr(xr)&&xr.nodeName===I&&bi(kn,xr,q)?(Rs=xr,An=kn.rename(An,Ee),xr.appendChild(An)):(Rs=kn.create(I),oc.insertBefore(Rs,An),Rs.appendChild(An),An=kn.rename(An,Ee)),Of(kn,An,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),$a(kn,Rs,q),Hd(k.dom,Rs))}),k.selection.setRng(Rr(Jn))},ra=(k,I)=>zr(k)&&k.nodeName===(I==null?void 0:I.nodeName),Ni=(k,I,q)=>{const fe=k.getStyle(I,"list-style-type",!0),Ee=k.getStyle(q,"list-style-type",!0);return fe===Ee},ai=(k,I)=>k.className===I.className,td=(k,I,q)=>ra(I,q)&&Ni(k,I,q)&&ai(I,q),Hd=(k,I)=>{let q,fe=I.nextSibling;if(td(k,I,fe)){const Ee=fe;for(;q=Ee.firstChild;)I.appendChild(q);k.remove(Ee)}if(fe=I.previousSibling,td(k,I,fe)){const Ee=fe;for(;q=Ee.lastChild;)I.insertBefore(q,I.firstChild);k.remove(Ee)}},$h=(k,I,q,fe)=>{if(I.nodeName!==q){const Ee=k.dom.rename(I,q);$a(k.dom,Ee,fe),oi(k,Ec(q),Ee)}else $a(k.dom,I,fe),oi(k,Ec(q),I)},Vd=(k,I,q,fe)=>{if(I.classList.forEach((Ee,mt,kn)=>{Ee.startsWith("tox-")&&(kn.remove(Ee),kn.length===0&&I.removeAttribute("class"))}),I.nodeName!==q){const Ee=k.dom.rename(I,q);$a(k.dom,Ee,fe),oi(k,Ec(q),Ee)}else $a(k.dom,I,fe),oi(k,Ec(q),I)},jc=(k,I,q,fe,Ee)=>{const mt=zr(I);if(mt&&I.nodeName===fe&&!Rf(Ee)&&!Ss(I))wm(k);else{$d(k,fe,Ee);const kn=ro(k.selection.getRng()),Jn=mt?[I,...q]:q,Rn=mt&&Ss(I)?Vd:$h;kr.each(Jn,An=>{Rn(k,An,fe,Ee)}),k.selection.setRng(Rr(kn))}},Rf=k=>"list-style-type"in k,Wg=(k,I,q,fe)=>{if(I!==k.getBody())if(I)if(I.nodeName===q&&!Rf(fe)&&!Ss(I))wm(k);else{const Ee=ro(k.selection.getRng());Ss(I)&&I.classList.forEach((kn,Jn,Rn)=>{kn.startsWith("tox-")&&(Rn.remove(kn),Rn.length===0&&I.removeAttribute("class"))}),$a(k.dom,I,fe);const mt=k.dom.rename(I,q);Hd(k.dom,mt),k.selection.setRng(Rr(Ee)),$d(k,q,fe),oi(k,Ec(q),mt)}else $d(k,q,fe),oi(k,Ec(q),I)},Hh=(k,I,q)=>{const fe=St(k);if(ha(k,fe))return;const Ee=ls(k),mt=K(q)?q:{};Ee.length>0?jc(k,fe,Ee,I,mt):Wg(k,fe,I,mt)},Xb=oa.DOM,Cm=(k,I)=>{const q=I.parentElement;if(q&&q.nodeName==="LI"&&q.firstChild===I){const fe=q.previousSibling;fe&&fe.nodeName==="LI"?(fe.appendChild(I),Da(k,q)&&Xb.remove(q)):Xb.setStyle(q,"listStyleType","none")}if(zr(q)){const fe=q.previousSibling;fe&&fe.nodeName==="LI"&&fe.appendChild(I)}},zd=(k,I)=>{const q=kr.grep(k.select("ol,ul",I));kr.each(q,fe=>{Cm(k,fe)})},nd=(k,I,q,fe)=>{let Ee=I.startContainer;const mt=I.startOffset;if(xo(Ee)&&(q?mt<Ee.data.length:mt>0))return Ee;const kn=k.schema.getNonEmptyElements();sa(Ee)&&(Ee=Bn.getNode(Ee,mt));const Jn=new Wn(Ee,fe);q&&$l(k.dom,Ee)&&Jn.next();const Rn=q?Jn.next.bind(Jn):Jn.prev2.bind(Jn);for(;Ee=Rn();)if(Ee.nodeName==="LI"&&!Ee.hasChildNodes()||kn[Ee.nodeName]||xo(Ee)&&Ee.data.length>0)return Ee;return null},Ud=(k,I)=>{const q=I.childNodes;return q.length===1&&!zr(q[0])&&k.isBlock(q[0])},qs=k=>qe.from(k).map(xe.fromDom).filter(fo).exists(I=>pr(I)&&!Pn(["details"],qr(I))),Qs=(k,I)=>{Ud(k,I)&&qs(I.firstChild)&&k.remove(I.firstChild,!0)},tc=(k,I,q)=>{let fe;const Ee=Ud(k,q)?q.firstChild:q;if(Qs(k,I),!Da(k,I,!0))for(;fe=I.firstChild;)Ee.appendChild(fe)},od=(k,I,q)=>{let fe;const Ee=I.parentNode;if(!Ia(k,I)||!Ia(k,q))return;zr(q.lastChild)&&(fe=q.lastChild),Ee===q.lastChild&&ji(Ee.previousSibling)&&k.remove(Ee.previousSibling);const mt=q.lastChild;mt&&ji(mt)&&I.hasChildNodes()&&k.remove(mt),Da(k,q,!0)&&Ye(xe.fromDom(q)),tc(k,I,q),fe&&q.appendChild(fe);const Jn=Zt(xe.fromDom(q),xe.fromDom(I))?k.getParents(I,zr,q):[];k.remove(I),ve(Jn,Rn=>{Da(k,Rn)&&Rn!==k.getRoot()&&k.remove(Rn)})},Vh=(k,I,q)=>{Ye(xe.fromDom(q)),od(k.dom,I,q),k.selection.setCursorLocation(q,0)},Ur=(k,I,q,fe)=>{const Ee=k.dom;if(Ee.isEmpty(fe))Vh(k,q,fe);else{const mt=ro(I);od(Ee,q,fe),k.selection.setRng(Rr(mt))}},mn=(k,I,q,fe)=>{const Ee=ro(I);od(k.dom,q,fe);const mt=Rr(Ee);k.selection.setRng(mt)},Wl=(k,I)=>{const q=k.dom,fe=k.selection,Ee=fe.getStart(),mt=pn(k,Ee),kn=q.getParent(fe.getStart(),"LI",mt);if(kn){const Jn=kn.parentElement;if(Jn===k.getBody()&&Da(q,Jn))return!0;const Rn=me(fe.getRng()),An=q.getParent(nd(k,Rn,I,mt),"LI",mt),Rs=An&&(I?q.isChildOf(kn,An):q.isChildOf(An,kn));if(An&&An!==kn&&!Rs)return k.undoManager.transact(()=>{I?Ur(k,Rn,An,kn):Uo(kn)?yu(k):mn(k,Rn,kn,An)}),!0;if(Rs&&!I&&An!==kn)return k.undoManager.transact(()=>{if(Rn.commonAncestorContainer.parentElement){const xr=ro(Rn),oc=Rn.commonAncestorContainer.parentElement;tc(q,Rn.commonAncestorContainer.parentElement,An),oc.remove();const jl=Rr(xr);k.selection.setRng(jl)}}),!0;if(!An&&!I&&Rn.startOffset===0&&Rn.endOffset===0)return k.undoManager.transact(()=>{wm(k)}),!0}return!1},Sm=(k,I,q)=>{const fe=k.getParent(I.parentNode,k.isBlock,q);k.remove(I),fe&&k.isEmpty(fe)&&k.remove(fe)},pa=(k,I)=>{const q=k.dom,fe=k.selection.getStart(),Ee=pn(k,fe),mt=q.getParent(fe,q.isBlock,Ee);if(mt&&q.isEmpty(mt,void 0,{checkRootAsContent:!0})){const kn=me(k.selection.getRng()),Jn=q.getParent(nd(k,kn,I,Ee),"LI",Ee);if(Jn){const Rn=oc=>Pn(["td","th","caption"],qr(oc)),An=oc=>oc.dom===Ee,Rs=Qa(xe.fromDom(Jn),Rn,An),xr=Qa(xe.fromDom(kn.startContainer),Rn,An);return tt(Rs,xr,To)?(k.undoManager.transact(()=>{const oc=Jn.parentNode;Sm(q,mt,Ee),Hd(q,oc),k.selection.select(Jn,!0),k.selection.collapse(I)}),!0):!1}}return!1},ts=(k,I)=>Wl(k,I)||pa(k,I),Su=k=>{const I=k.selection.getStart(),q=pn(k,I);return k.dom.getParent(I,"LI,DT,DD",q)||qt(k).length>0},zh=k=>Su(k)?(k.undoManager.transact(()=>{k.execCommand("Delete"),zd(k.dom,k.getBody())}),!0):!1,Wd=(k,I)=>{const q=k.selection;return!ha(k,q.getNode())&&(q.isCollapsed()?ts(k,I):zh(k))},Zg=k=>{k.on("ExecCommand",I=>{const q=I.command.toLowerCase();(q==="delete"||q==="forwarddelete")&&Su(k)&&zd(k.dom,k.getBody())}),k.on("keydown",I=>{I.keyCode===or.BACKSPACE?Wd(k,!1)&&I.preventDefault():I.keyCode===or.DELETE&&Wd(k,!0)&&I.preventDefault()})},Yn=k=>({backspaceDelete:I=>{Wd(k,I)}}),Wr=(k,I)=>{const q=St(k);q===null||ha(k,q)||k.undoManager.transact(()=>{K(I.styles)&&k.dom.setStyles(q,I.styles),K(I.attrs)&&Xs(I.attrs,(fe,Ee)=>k.dom.setAttrib(q,Ee,fe))})},sd=k=>{const I=rn(ed(k).split("")),q=$e(I,(fe,Ee)=>{const mt=fe.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Ee)*mt});return Pe(q,(fe,Ee)=>fe+Ee,0)},Ra=k=>{if(k--,k<0)return"";{const I=k%26,q=Math.floor(k/26),fe=Ra(q),Ee=String.fromCharCode(65+I);return fe+Ee}},vi=k=>/^[A-Z]+$/.test(k),nc=k=>/^[a-z]+$/.test(k),aa=k=>/^[0-9]+$/.test(k),ii=k=>aa(k)?2:vi(k)?0:nc(k)?1:ml(k)?3:4,qi=k=>{switch(ii(k)){case 2:return qe.some({listStyleType:qe.none(),start:k});case 0:return qe.some({listStyleType:qe.some("upper-alpha"),start:sd(k).toString()});case 1:return qe.some({listStyleType:qe.some("lower-alpha"),start:sd(k).toString()});case 3:return qe.some({listStyleType:qe.none(),start:""});case 4:return qe.none()}},xm=k=>{const I=parseInt(k.start,10);return os(k.listStyleType,"upper-alpha")?Ra(I):os(k.listStyleType,"lower-alpha")?Ra(I).toLowerCase():k.start},rr=k=>{const I=St(k);!ei(I)||ha(k,I)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:xm({start:k.dom.getAttrib(I,"start","1"),listStyleType:qe.from(k.dom.getStyle(I,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:q=>{const fe=q.getData();qi(fe.start).each(Ee=>{k.execCommand("mceListUpdate",!1,{attrs:{start:Ee.start==="1"?"":Ee.start},styles:{"list-style-type":Ee.listStyleType.getOr("")}})}),q.close()}})},rd=(k,I)=>()=>{const q=St(k);return be(q)&&q.nodeName===I},dr=k=>{k.addCommand("mceListProps",()=>{rr(k)})},xu=k=>{k.on("BeforeExecCommand",I=>{const q=I.command.toLowerCase();q==="indent"?ym(k):q==="outdent"&&yu(k)}),k.addCommand("InsertUnorderedList",(I,q)=>{Hh(k,"UL",q)}),k.addCommand("InsertOrderedList",(I,q)=>{Hh(k,"OL",q)}),k.addCommand("InsertDefinitionList",(I,q)=>{Hh(k,"DL",q)}),k.addCommand("RemoveList",()=>{wm(k)}),dr(k),k.addCommand("mceListUpdate",(I,q)=>{K(q)&&Wr(k,q)}),k.addQueryStateHandler("InsertUnorderedList",rd(k,"UL")),k.addQueryStateHandler("InsertOrderedList",rd(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",rd(k,"DL"))};var ad=tinymce.util.Tools.resolve("tinymce.html.Node");const gs=k=>k.type===3,_c=k=>k.length===0,jg=k=>{const I=(Ee,mt)=>{const kn=ad.create("li");ve(Ee,Jn=>kn.append(Jn)),mt?k.insert(kn,mt,!0):k.append(kn)},q=(Ee,mt)=>gs(mt)?[...Ee,mt]:!_c(Ee)&&!gs(mt)?(I(Ee,mt),[]):Ee,fe=Pe(k.children(),q,[]);_c(fe)||I(fe)},Zl=k=>{k.on("PreInit",()=>{const{parser:I}=k;I.addNodeFilter("ul,ol",q=>ve(q,jg))})},Ds=k=>{k.on("keydown",I=>{I.keyCode!==or.TAB||or.metaKeyPressed(I)||k.undoManager.transact(()=>{(I.shiftKey?yu(k):ym(k))&&I.preventDefault()})})},Eu=k=>{uu(k)&&Ds(k),Zg(k)},Pi=(k,I)=>q=>{const fe=Ee=>{q.setActive(rs(Ee.parents,I)),q.setEnabled(!ha(k,Ee.element)&&k.selection.isEditable())};return q.setEnabled(k.selection.isEditable()),ni(k,fe)},co=k=>{const I=q=>()=>k.execCommand(q);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:I("InsertOrderedList"),onSetup:Pi(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:I("InsertUnorderedList"),onSetup:Pi(k,"UL")}))},id=(k,I)=>q=>ni(k,Ee=>q.setEnabled(rs(Ee.parents,I)&&!ha(k,Ee.element))),Mf=k=>{const I={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:id(k,"OL")};k.ui.registry.addMenuItem("listprops",I),k.ui.registry.addContextMenu("lists",{update:q=>{const fe=St(k,q);return ei(fe)?["listprops"]:[]}})};var Em=()=>{p.add("lists",k=>(Mi(k),Zl(k),k.hasPlugin("rtc",!0)?dr(k):(Eu(k),xu(k)),co(k),Mf(k),Yn(k)))};Em()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=Object.getPrototypeOf,w=(H,oe,ye)=>{var Le;return ye(H,oe.prototype)?!0:((Le=H.constructor)===null||Le===void 0?void 0:Le.name)===oe.name},E=H=>{const oe=typeof H;return H===null?"null":oe==="object"&&Array.isArray(H)?"array":oe==="object"&&w(H,String,(ye,Le)=>Le.isPrototypeOf(ye))?"string":oe},N=H=>oe=>E(oe)===H,z=H=>oe=>typeof oe===H,K=H=>oe=>H===oe,j=(H,oe)=>Se(H)&&w(H,oe,(ye,Le)=>g(ye)===Le),ue=N("string"),Se=N("object"),be=H=>j(H,Object),Ge=N("array"),Ht=K(null),Ut=z("boolean"),Nt=H=>H==null,vt=H=>!Nt(H),Ie=z("function"),on=z("number"),Et=(H,oe)=>{if(Ge(H)){for(let ye=0,Le=H.length;ye<Le;++ye)if(!oe(H[ye]))return!1;return!0}return!1},ce=()=>{};class qe{constructor(oe,ye){this.tag=oe,this.value=ye}static some(oe){return new qe(!0,oe)}static none(){return qe.singletonNone}fold(oe,ye){return this.tag?ye(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?qe.some(oe(this.value)):qe.none()}bind(oe){return this.tag?oe(this.value):qe.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:qe.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return vt(oe)?qe.some(oe):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const On=Object.keys,jt=Object.hasOwnProperty,ne=(H,oe)=>{const ye=On(H);for(let Le=0,lt=ye.length;Le<lt;Le++){const Gn=ye[Le],Ss=H[Gn];oe(Ss,Gn)}},Kt=H=>(oe,ye)=>{H[ye]=oe},Pn=(H,oe,ye,Le)=>{ne(H,(lt,Gn)=>{(oe(lt,Gn)?ye:Le)(lt,Gn)})},Qt=(H,oe)=>{const ye={};return Pn(H,oe,Kt(ye),ce),ye},$e=(H,oe)=>jt.call(H,oe),ve=(H,oe)=>$e(H,oe)&&H[oe]!==void 0&&H[oe]!==null,so=Array.prototype.push,Me=H=>{const oe=[];for(let ye=0,Le=H.length;ye<Le;++ye){if(!Ge(H[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+H);so.apply(oe,H[ye])}return oe},Pe=(H,oe)=>oe>=0&&oe<H.length?qe.some(H[oe]):qe.none(),M=H=>Pe(H,0),cn=(H,oe)=>{for(let ye=0;ye<H.length;ye++){const Le=oe(H[ye],ye);if(Le.isSome())return Le}return qe.none()};typeof window<"u"||Function("return this;")();const ct=(H,oe,ye)=>{if(ue(ye)||Ut(ye)||on(ye))H.setAttribute(oe,ye+"");else throw console.error("Invalid call to Attribute.set. Key ",oe,":: Value ",ye,":: Element ",H),new Error("Attribute value was not simple")},Hn=(H,oe,ye)=>{ct(H.dom,oe,ye)},rn=(H,oe)=>{H.dom.removeAttribute(oe)},nt=(H,oe)=>{const Le=(oe||document).createElement("div");if(Le.innerHTML=H,!Le.hasChildNodes()||Le.childNodes.length>1){const lt="HTML does not have a single root node";throw console.error(lt,H),new Error(lt)}return to(Le.childNodes[0])},eo=(H,oe)=>{const Le=(oe||document).createElement(H);return to(Le)},ms=(H,oe)=>{const Le=(oe||document).createTextNode(H);return to(Le)},to=H=>{if(H==null)throw new Error("Node cannot be null or undefined");return{dom:H}},tt={fromHtml:nt,fromTag:eo,fromText:ms,fromDom:to,fromPoint:(H,oe,ye)=>qe.from(H.dom.elementFromPoint(oe,ye)).map(to)};var wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),W=tinymce.util.Tools.resolve("tinymce.util.URI");const ta=H=>H.length>0,uo=H=>oe=>oe.options.get(H),qo=H=>{const oe=H.options.register;oe("image_dimensions",{processor:"boolean",default:!0}),oe("image_advtab",{processor:"boolean",default:!1}),oe("image_uploadtab",{processor:"boolean",default:!0}),oe("image_prepend_url",{processor:"string",default:""}),oe("image_class_list",{processor:"object[]"}),oe("image_description",{processor:"boolean",default:!0}),oe("image_title",{processor:"boolean",default:!1}),oe("image_caption",{processor:"boolean",default:!1}),oe("image_list",{processor:ye=>{const Le=ye===!1||ue(ye)||Et(ye,Se)||Ie(ye);return Le?{value:ye,valid:Le}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Ho=uo("image_dimensions"),Wi=uo("image_advtab"),et=uo("image_uploadtab"),kt=uo("image_prepend_url"),dt=uo("image_class_list"),xe=uo("image_description"),_o=uo("image_title"),To=uo("image_caption"),Zt=uo("image_list"),ss=uo("a11y_advanced_options"),Mo=uo("automatic_uploads"),$r=H=>ta(H.options.get("images_upload_url")),Po=H=>vt(H.options.get("images_upload_handler")),Is=(H,oe)=>Math.max(parseInt(H,10),parseInt(oe,10)),Xa=H=>new Promise(oe=>{const ye=document.createElement("img"),Le=Gn=>{ye.onload=ye.onerror=null,ye.parentNode&&ye.parentNode.removeChild(ye),oe(Gn)};ye.onload=()=>{const Gn=Is(ye.width,ye.clientWidth),Ss=Is(ye.height,ye.clientHeight),rs={width:Gn,height:Ss};Le(Promise.resolve(rs))},ye.onerror=()=>{Le(Promise.reject(`Failed to get image dimensions for: ${H}`))};const lt=ye.style;lt.visibility="hidden",lt.position="fixed",lt.bottom=lt.left="0px",lt.width=lt.height="auto",document.body.appendChild(ye),ye.src=H}),ws=H=>(H&&(H=H.replace(/px$/,"")),H),bs=H=>(H.length>0&&/^[0-9]+$/.test(H)&&(H+="px"),H),vs=H=>{if(H.margin){const oe=String(H.margin).split(" ");switch(oe.length){case 1:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[0],H["margin-bottom"]=H["margin-bottom"]||oe[0],H["margin-left"]=H["margin-left"]||oe[0];break;case 2:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[1],H["margin-bottom"]=H["margin-bottom"]||oe[0],H["margin-left"]=H["margin-left"]||oe[1];break;case 3:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[1],H["margin-bottom"]=H["margin-bottom"]||oe[2],H["margin-left"]=H["margin-left"]||oe[1];break;case 4:H["margin-top"]=H["margin-top"]||oe[0],H["margin-right"]=H["margin-right"]||oe[1],H["margin-bottom"]=H["margin-bottom"]||oe[2],H["margin-left"]=H["margin-left"]||oe[3]}delete H.margin}return H},qr=(H,oe)=>{const ye=Zt(H);ue(ye)?fetch(ye).then(Le=>{Le.ok&&Le.json().then(oe)}):Ie(ye)?ye(oe):oe(ye)},Cs=(H,oe,ye)=>{const Le=()=>{ye.onload=ye.onerror=null,H.selection&&(H.selection.select(ye),H.nodeChanged())};ye.onload=()=>{!oe.width&&!oe.height&&Ho(H)&&H.dom.setAttribs(ye,{width:String(ye.clientWidth),height:String(ye.clientHeight)}),Le()},ye.onerror=Le},Vo=H=>new Promise((oe,ye)=>{const Le=new FileReader;Le.onload=()=>{oe(Le.result)},Le.onerror=()=>{var lt;ye((lt=Le.error)===null||lt===void 0?void 0:lt.message)},Le.readAsDataURL(H)}),vc=H=>H.nodeName==="IMG"&&(H.hasAttribute("data-mce-object")||H.hasAttribute("data-mce-placeholder")),fo=(H,oe)=>{const ye=H.options.get;return W.isDomSafe(oe,"img",{allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")})},cs=wt.DOM,_r=H=>H.style.marginLeft&&H.style.marginRight&&H.style.marginLeft===H.style.marginRight?ws(H.style.marginLeft):"",Oi=H=>H.style.marginTop&&H.style.marginBottom&&H.style.marginTop===H.style.marginBottom?ws(H.style.marginTop):"",Zi=H=>H.style.borderWidth?ws(H.style.borderWidth):"",Go=(H,oe)=>{var ye;return H.hasAttribute(oe)&&(ye=H.getAttribute(oe))!==null&&ye!==void 0?ye:""},Vc=H=>H.parentNode!==null&&H.parentNode.nodeName==="FIGURE",At=(H,oe,ye)=>{ye===""||ye===null?H.removeAttribute(oe):H.setAttribute(oe,ye)},po=H=>{const oe=cs.create("figure",{class:"image"});cs.insertAfter(oe,H),oe.appendChild(H),oe.appendChild(cs.create("figcaption",{contentEditable:"true"},"Caption")),oe.contentEditable="false"},Hr=H=>{const oe=H.parentNode;vt(oe)&&(cs.insertAfter(H,oe),cs.remove(oe))},Vr=H=>{Vc(H)?Hr(H):po(H)},Ba=(H,oe)=>{const ye=H.getAttribute("style"),Le=oe(ye!==null?ye:"");Le.length>0?(H.setAttribute("style",Le),H.setAttribute("data-mce-style",Le)):H.removeAttribute("style")},Ja=(H,oe)=>(ye,Le,lt)=>{const Gn=ye.style;Gn[Le]?(Gn[Le]=bs(lt),Ba(ye,oe)):At(ye,Le,lt)},Wo=(H,oe)=>H.style[oe]?ws(H.style[oe]):Go(H,oe),hi=(H,oe)=>{const ye=bs(oe);H.style.marginLeft=ye,H.style.marginRight=ye},Di=(H,oe)=>{const ye=bs(oe);H.style.marginTop=ye,H.style.marginBottom=ye},zo=(H,oe)=>{const ye=bs(oe);H.style.borderWidth=ye},Sn=(H,oe)=>{H.style.borderStyle=oe},Ys=H=>{var oe;return(oe=H.style.borderStyle)!==null&&oe!==void 0?oe:""},Qa=H=>vt(H)&&H.nodeName==="FIGURE",ul=H=>H.nodeName==="IMG",dl=H=>cs.getAttrib(H,"alt").length===0&&cs.getAttrib(H,"role")==="presentation",hs=H=>dl(H)?"":Go(H,"alt"),pr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Zs=(H,oe)=>{var ye;const Le=document.createElement("img");return At(Le,"style",oe.style),(_r(Le)||oe.hspace!=="")&&hi(Le,oe.hspace),(Oi(Le)||oe.vspace!=="")&&Di(Le,oe.vspace),(Zi(Le)||oe.border!=="")&&zo(Le,oe.border),(Ys(Le)||oe.borderStyle!=="")&&Sn(Le,oe.borderStyle),H((ye=Le.getAttribute("style"))!==null&&ye!==void 0?ye:"")},Ta=(H,oe)=>{const ye=document.createElement("img");if(Ye(H,{...oe,caption:!1},ye),ge(ye,oe.alt,oe.isDecorative),oe.caption){const Le=cs.create("figure",{class:"image"});return Le.appendChild(ye),Le.appendChild(cs.create("figcaption",{contentEditable:"true"},"Caption")),Le.contentEditable="false",Le}else return ye},yc=(H,oe)=>({src:Go(oe,"src"),alt:hs(oe),title:Go(oe,"title"),width:Wo(oe,"width"),height:Wo(oe,"height"),class:Go(oe,"class"),style:H(Go(oe,"style")),caption:Vc(oe),hspace:_r(oe),vspace:Oi(oe),border:Zi(oe),borderStyle:Ys(oe),isDecorative:dl(oe)}),Tr=(H,oe,ye,Le,lt)=>{ye[Le]!==oe[Le]&&lt(H,Le,String(ye[Le]))},ge=(H,oe,ye)=>{if(ye){cs.setAttrib(H,"role","presentation");const Le=tt.fromDom(H);Hn(Le,"alt","")}else{if(Ht(oe)){const Le=tt.fromDom(H);rn(Le,"alt")}else{const Le=tt.fromDom(H);Hn(Le,"alt",oe)}cs.getAttrib(H,"role")==="presentation"&&cs.setAttrib(H,"role","")}},de=(H,oe,ye)=>{(ye.alt!==oe.alt||ye.isDecorative!==oe.isDecorative)&&ge(H,ye.alt,ye.isDecorative)},Ve=(H,oe)=>(ye,Le,lt)=>{H(ye,lt),Ba(ye,oe)},Ye=(H,oe,ye)=>{const Le=yc(H,ye);Tr(ye,Le,oe,"caption",(lt,Gn,Ss)=>Vr(lt)),Tr(ye,Le,oe,"src",At),Tr(ye,Le,oe,"title",At),Tr(ye,Le,oe,"width",Ja("width",H)),Tr(ye,Le,oe,"height",Ja("height",H)),Tr(ye,Le,oe,"class",At),Tr(ye,Le,oe,"style",Ve((lt,Gn)=>At(lt,"style",Gn),H)),Tr(ye,Le,oe,"hspace",Ve(hi,H)),Tr(ye,Le,oe,"vspace",Ve(Di,H)),Tr(ye,Le,oe,"border",Ve(zo,H)),Tr(ye,Le,oe,"borderStyle",Ve(Sn,H)),de(ye,Le,oe)},gn=(H,oe)=>{const ye=H.dom.styles.parse(oe),Le=vs(ye),lt=H.dom.styles.parse(H.dom.styles.serialize(Le));return H.dom.styles.serialize(lt)},Bn=H=>{const oe=H.selection.getNode(),ye=H.dom.getParent(oe,"figure.image");return ye?H.dom.select("img",ye)[0]:oe&&(oe.nodeName!=="IMG"||vc(oe))?null:oe},Wn=(H,oe)=>{var ye;const Le=H.dom,lt=Qt(H.schema.getTextBlockElements(),(Ss,rs)=>!H.schema.isValidChild(rs,"figure")),Gn=Le.getParent(oe.parentNode,Ss=>ve(lt,Ss.nodeName),H.getBody());return Gn&&(ye=Le.split(Gn,oe))!==null&&ye!==void 0?ye:oe},or=H=>{const oe=Bn(H);return oe?yc(ye=>gn(H,ye),oe):pr()},_e=(H,oe)=>{const ye=Ta(lt=>gn(H,lt),oe);H.dom.setAttrib(ye,"data-mce-id","__mcenew"),H.focus(),H.selection.setContent(ye.outerHTML);const Le=H.dom.select('*[data-mce-id="__mcenew"]')[0];if(H.dom.setAttrib(Le,"data-mce-id",null),Qa(Le)){const lt=Wn(H,Le);H.selection.select(lt)}else H.selection.select(Le)},Zn=(H,oe)=>{H.dom.setAttrib(oe,"src",oe.getAttribute("src"))},Xs=(H,oe)=>{if(oe){const ye=H.dom.is(oe.parentNode,"figure.image")?oe.parentNode:oe;H.dom.remove(ye),H.focus(),H.nodeChanged(),H.dom.isEmpty(H.getBody())&&(H.setContent(""),H.selection.setCursorLocation())}},ur=(H,oe)=>{const ye=Bn(H);if(ye)if(Ye(Le=>gn(H,Le),oe,ye),Zn(H,ye),Qa(ye.parentNode)){const Le=ye.parentNode;Wn(H,Le),H.selection.select(ye.parentNode)}else H.selection.select(ye),Cs(H,oe,ye)},ka=(H,oe)=>{const ye=oe.src;return{...oe,src:fo(H,ye)?ye:""}},Zo=(H,oe)=>{const ye=Bn(H);if(ye){const lt={...yc(Ss=>gn(H,Ss),ye),...oe},Gn=ka(H,lt);lt.src?ur(H,Gn):Xs(H,ye)}else oe.src&&_e(H,{...pr(),...oe})},Aa=(H=>(...oe)=>{if(oe.length===0)throw new Error("Can't merge zero objects");const ye={};for(let Le=0;Le<oe.length;Le++){const lt=oe[Le];for(const Gn in lt)$e(lt,Gn)&&(ye[Gn]=H(ye[Gn],lt[Gn]))}return ye})((H,oe)=>be(H)&&be(oe)?Aa(H,oe):oe);var Ps=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ko=tinymce.util.Tools.resolve("tinymce.util.Tools");const es=H=>ue(H.value)?H.value:"",na=H=>ue(H.text)?H.text:ue(H.title)?H.title:"",oa=(H,oe)=>{const ye=[];return Ko.each(H,Le=>{const lt=na(Le);if(Le.menu!==void 0){const Gn=oa(Le.menu,oe);ye.push({text:lt,items:Gn})}else{const Gn=oe(Le);ye.push({text:lt,value:Gn})}}),ye},kr=(H=es)=>oe=>oe?qe.from(oe).map(ye=>oa(ye,H)):qe.none(),Ji=H=>kr(es)(H),Ri=H=>$e(H,"items"),xo=(H,oe)=>cn(H,ye=>Ri(ye)?xo(ye.items,oe):ye.value===oe?qe.some(ye):qe.none()),zr={sanitizer:kr,sanitize:Ji,findEntry:(H,oe)=>H.bind(ye=>xo(ye,oe))},ei={makeTab:H=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Ar=H=>{const oe=zr.sanitizer(xs=>H.convertURL(xs.value||xs.url||"","src")),ye=new Promise(xs=>{qr(H,ml=>{xs(oe(ml).map(bm=>Me([[{text:"None",value:""}],bm])))})}),Le=zr.sanitize(dt(H)),lt=Wi(H),Gn=et(H),Ss=$r(H),rs=Po(H),yt=or(H),Os=xe(H),ha=_o(H),ni=Ho(H),Xn=To(H),oi=ss(H),lr=Mo(H),ed=qe.some(kt(H)).filter(xs=>ue(xs)&&xs.length>0);return ye.then(xs=>({image:yt,imageList:xs,classList:Le,hasAdvTab:lt,hasUploadTab:Gn,hasUploadUrl:Ss,hasUploadHandler:rs,hasDescription:Os,hasImageTitle:ha,hasDimensions:ni,hasImageCaption:Xn,prependURL:ed,hasAccessibilityOptions:oi,automaticUploads:lr}))},Ls=H=>{const oe={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ye=H.imageList.map(ha=>({name:"images",type:"listbox",label:"Image list",items:ha})),Le={name:"alt",type:"input",label:"Alternative description",enabled:!(H.hasAccessibilityOptions&&H.image.isDecorative)},lt={name:"title",type:"input",label:"Image title"},Gn={name:"dimensions",type:"sizeinput"},Ss={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},rs=H.classList.map(ha=>({name:"classes",type:"listbox",label:"Class",items:ha})),yt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Os=ha=>ha?{type:"grid",columns:2}:{type:"panel"};return Me([[oe],ye.toArray(),H.hasAccessibilityOptions&&H.hasDescription?[Ss]:[],H.hasDescription?[Le]:[],H.hasImageTitle?[lt]:[],H.hasDimensions?[Gn]:[],[{...Os(H.classList.isSome()&&H.hasImageCaption),items:Me([rs.toArray(),H.hasImageCaption?[yt]:[]])}]])},ji={makeTab:H=>({title:"General",name:"general",items:Ls(H)}),makeItems:Ls},Oa={makeTab:H=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ma=H=>({prevImage:zr.findEntry(H.imageList,H.image.src),prevAlt:H.image.alt,open:!0}),br=H=>({src:{value:H.src,meta:{}},images:H.src,alt:H.alt,title:H.title,dimensions:{width:H.width,height:H.height},classes:H.class,caption:H.caption,style:H.style,vspace:H.vspace,border:H.border,hspace:H.hspace,borderstyle:H.borderStyle,fileinput:[],isDecorative:H.isDecorative}),$l=(H,oe)=>({src:H.src.value,alt:(H.alt===null||H.alt.length===0)&&oe?null:H.alt,title:H.title,width:H.dimensions.width,height:H.dimensions.height,class:H.classes,style:H.style,caption:H.caption,hspace:H.hspace,vspace:H.vspace,border:H.border,borderStyle:H.borderstyle,isDecorative:H.isDecorative}),Da=(H,oe)=>/^(?:[a-zA-Z]+:)?\/\//.test(oe)?qe.none():H.prependURL.bind(ye=>oe.substring(0,ye.length)!==ye?qe.some(ye+oe):qe.none()),Ia=(H,oe)=>{const ye=oe.getData();Da(H,ye.src.value).each(Le=>{oe.setData({src:{value:Le,meta:ye.src.meta}})})},ec=(H,oe,ye)=>{H.hasDescription&&ue(ye.alt)&&(oe.alt=ye.alt),H.hasAccessibilityOptions&&(oe.isDecorative=ye.isDecorative||oe.isDecorative||!1),H.hasImageTitle&&ue(ye.title)&&(oe.title=ye.title),H.hasDimensions&&(ue(ye.width)&&(oe.dimensions.width=ye.width),ue(ye.height)&&(oe.dimensions.height=ye.height)),ue(ye.class)&&zr.findEntry(H.classList,ye.class).each(Le=>{oe.classes=Le.value}),H.hasImageCaption&&Ut(ye.caption)&&(oe.caption=ye.caption),H.hasAdvTab&&(ue(ye.style)&&(oe.style=ye.style),ue(ye.vspace)&&(oe.vspace=ye.vspace),ue(ye.border)&&(oe.border=ye.border),ue(ye.hspace)&&(oe.hspace=ye.hspace),ue(ye.borderstyle)&&(oe.borderstyle=ye.borderstyle))},Mi=(H,oe)=>{const ye=oe.getData(),Le=ye.src.meta;if(Le!==void 0){const lt=Aa({},ye);ec(H,lt,Le),oe.setData(lt)}},uu=(H,oe,ye,Le)=>{const lt=Le.getData(),Gn=lt.src.value,Ss=lt.src.meta||{};!Ss.width&&!Ss.height&&oe.hasDimensions&&(ta(Gn)?H.imageSize(Gn).then(rs=>{ye.open&&Le.setData({dimensions:rs})}).catch(rs=>console.error(rs)):Le.setData({dimensions:{width:"",height:""}}))},fl=(H,oe,ye)=>{const Le=ye.getData(),lt=zr.findEntry(H.imageList,Le.src.value);oe.prevImage=lt,ye.setData({images:lt.map(Gn=>Gn.value).getOr("")})},Uc=(H,oe,ye,Le)=>{Ia(oe,Le),Mi(oe,Le),uu(H,oe,ye,Le),fl(oe,ye,Le)},ti=(H,oe,ye,Le)=>{const lt=Le.getData(),Gn=zr.findEntry(oe.imageList,lt.images);Gn.each(Ss=>{lt.alt===""||ye.prevImage.map(yt=>yt.text===lt.alt).getOr(!1)?Ss.value===""?Le.setData({src:Ss,alt:ye.prevAlt}):Le.setData({src:Ss,alt:Ss.text}):Le.setData({src:Ss})}),ye.prevImage=Gn,Uc(H,oe,ye,Le)},Or=(H,oe,ye,Le)=>{const lt=Le.getData();Le.block("Uploading image"),M(lt.fileinput).fold(()=>{Le.unblock()},Gn=>{const Ss=URL.createObjectURL(Gn),rs=()=>{Le.unblock(),URL.revokeObjectURL(Ss)},yt=Os=>{Le.setData({src:{value:Os,meta:{}}}),Le.showTab("general"),Uc(H,oe,ye,Le),Le.focus("src")};Vo(Gn).then(Os=>{const ha=H.createBlobCache(Gn,Ss,Os);oe.automaticUploads?H.uploadImage(ha).then(ni=>{yt(ni.url),rs()}).catch(ni=>{rs(),H.alertErr(ni)}):(H.addToBlobCache(ha),yt(ha.blobUri()),Le.unblock())})})},du=(H,oe,ye)=>(Le,lt)=>{lt.name==="src"?Uc(H,oe,ye,Le):lt.name==="images"?ti(H,oe,ye,Le):lt.name==="alt"?ye.prevAlt=Le.getData().alt:lt.name==="fileinput"?Or(H,oe,ye,Le):lt.name==="isDecorative"&&Le.setEnabled("alt",!Le.getData().isDecorative)},fu=H=>()=>{H.open=!1},mu=H=>H.hasAdvTab||H.hasUploadUrl||H.hasUploadHandler?{type:"tabpanel",tabs:Me([[ji.makeTab(H)],H.hasAdvTab?[ei.makeTab(H)]:[],H.hasUploadTab&&(H.hasUploadUrl||H.hasUploadHandler)?[Oa.makeTab(H)]:[]])}:{type:"panel",items:ji.makeItems(H)},hu=(H,oe,ye)=>Le=>{const lt=Aa(br(oe.image),Le.getData()),Gn={...lt,style:Zs(ye.normalizeCss,$l(lt,!1))};H.execCommand("mceUpdateImage",!1,$l(Gn,oe.hasAccessibilityOptions)),H.editorUpload.uploadImagesAuto(),Le.close()},vr=H=>oe=>fo(H,oe)?Xa(H.documentBaseURI.toAbsolute(oe)).then(ye=>({width:String(ye.width),height:String(ye.height)})):Promise.resolve({width:"",height:""}),gi=H=>(oe,ye,Le)=>{var lt;return H.editorUpload.blobCache.create({blob:oe,blobUri:ye,name:(lt=oe.name)===null||lt===void 0?void 0:lt.replace(/\.[^\.]+$/,""),filename:oe.name,base64:Le.split(",")[1]})},X=H=>oe=>{H.editorUpload.blobCache.add(oe)},me=H=>oe=>{H.windowManager.alert(oe)},Re=H=>oe=>gn(H,oe),at=H=>oe=>H.dom.parseStyle(oe),St=H=>(oe,ye)=>H.dom.serializeStyle(oe,ye),en=H=>oe=>Ps(H).upload([oe],!1).then(ye=>{var Le;return ye.length===0?Promise.reject("Failed to upload image"):ye[0].status===!1?Promise.reject((Le=ye[0].error)===null||Le===void 0?void 0:Le.message):ye[0]}),io=H=>{const oe={imageSize:vr(H),addToBlobCache:X(H),createBlobCache:gi(H),alertErr:me(H),normalizeCss:Re(H),parseStyle:at(H),serializeStyle:St(H),uploadImage:en(H)};return{open:()=>{Ar(H).then(Le=>{const lt=ma(Le);return{title:"Insert/Edit Image",size:"normal",body:mu(Le),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:br(Le.image),onSubmit:hu(H,Le,oe),onChange:du(oe,Le,lt),onClose:fu(lt)}}).then(H.windowManager.open)}}},ls=H=>{H.addCommand("mceImage",io(H).open),H.addCommand("mceUpdateImage",(oe,ye)=>{H.undoManager.transact(()=>Zo(H,ye))})},vo=H=>{const oe=H.attr("class");return vt(oe)&&/\bimage\b/.test(oe)},qt=H=>oe=>{let ye=oe.length;const Le=lt=>{lt.attr("contenteditable",H?"true":null)};for(;ye--;){const lt=oe[ye];vo(lt)&&(lt.attr("contenteditable",H?"false":null),Ko.each(lt.getAll("figcaption"),Le))}},sr=H=>{H.on("PreInit",()=>{H.parser.addNodeFilter("figure",qt(!0)),H.serializer.addNodeFilter("figure",qt(!1))})},pn=H=>oe=>{const ye=()=>{oe.setEnabled(H.selection.isEditable())};return H.on("NodeChange",ye),ye(),()=>{H.off("NodeChange",ye)}},Dr=H=>{H.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:io(H).open,onSetup:oe=>{oe.setActive(vt(Bn(H)));const ye=H.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",oe.setActive).unbind,Le=pn(H)(oe);return()=>{ye(),Le()}}}),H.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:io(H).open,onSetup:pn(H)}),H.ui.registry.addContextMenu("image",{update:oe=>H.selection.isEditable()&&(Qa(oe)||ul(oe)&&!vc(oe))?["image"]:[]})};var wc=()=>{p.add("image",H=>{qo(H),sr(H),Dr(H),ls(H)})};wc()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),g=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),w=tinymce.util.Tools.resolve("tinymce.util.Tools");const E=Me=>Pe=>Pe.options.get(Me),N=Me=>{const Pe=Me.options.register;Pe("allow_html_in_named_anchor",{processor:"boolean",default:!1})},z=E("allow_html_in_named_anchor"),K="a:not([href])",j=Me=>!Me,ue=Me=>Me.getAttribute("id")||Me.getAttribute("name")||"",Se=Me=>Me.nodeName.toLowerCase()==="a",be=Me=>Se(Me)&&!Me.getAttribute("href")&&ue(Me)!=="",Ge=Me=>be(Me)&&!Me.firstChild,Ht=Me=>{const Pe=Me.dom;g(Pe).walk(Me.selection.getRng(),M=>{w.each(M,cn=>{Ge(cn)&&Pe.remove(cn,!1)})})},Ut=Me=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(Me),Nt=Me=>Me.dom.getParent(Me.selection.getStart(),K),vt=Me=>{const Pe=Nt(Me);return Pe?ue(Pe):""},Ie=(Me,Pe)=>{Me.undoManager.transact(()=>{z(Me)||Me.selection.collapse(!0),Me.selection.isCollapsed()?Me.insertContent(Me.dom.createHTML("a",{id:Pe})):(Ht(Me),Me.formatter.remove("namedAnchor",void 0,void 0,!0),Me.formatter.apply("namedAnchor",{value:Pe}),Me.addVisual())})},on=(Me,Pe,M)=>{M.removeAttribute("name"),M.id=Pe,Me.addVisual(),Me.undoManager.add()},Et=(Me,Pe)=>{const M=Nt(Me);M?on(Me,Pe,M):Ie(Me,Pe),Me.focus()},ce=(Me,Pe)=>Ut(Pe)?(Et(Me,Pe),!0):(Me.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),qe=Me=>{const Pe=vt(Me);Me.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Pe},onSubmit:M=>{ce(Me,M.getData().id)&&M.close()}})},On=Me=>{Me.addCommand("mceAnchor",()=>{qe(Me)})},jt=Me=>j(Me.attr("href"))&&!j(Me.attr("id")||Me.attr("name")),ne=Me=>jt(Me)&&!Me.firstChild,Kt=Me=>Pe=>{for(let M=0;M<Pe.length;M++){const cn=Pe[M];ne(cn)&&cn.attr("contenteditable",Me)}},Pn=Me=>{Me.on("PreInit",()=>{Me.parser.addNodeFilter("a",Kt("false")),Me.serializer.addNodeFilter("a",Kt(null))})},Qt=Me=>{Me.formatter.register("namedAnchor",{inline:"a",selector:K,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Pe,M,cn)=>be(Pe)})},$e=Me=>Pe=>{const M=()=>{Pe.setEnabled(Me.selection.isEditable())};return Me.on("NodeChange",M),M(),()=>{Me.off("NodeChange",M)}},ve=Me=>{const Pe=()=>Me.execCommand("mceAnchor");Me.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Pe,onSetup:M=>{const cn=Me.selection.selectorChangedWithUnbind("a:not([href])",M.setActive).unbind,ct=$e(Me)(M);return()=>{cn(),ct()}}}),Me.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Pe,onSetup:$e(Me)})};var so=()=>{p.add("anchor",Me=>{N(Me),Pn(Me),On(Me),ve(Me),Me.on("PreInit",()=>{Qt(Me)})})};so()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const w=(et=>kt=>et===kt)(null),E=et=>et,N=(et,kt)=>{const dt=et.length,xe=new Array(dt);for(let _o=0;_o<dt;_o++){const To=et[_o];xe[_o]=kt(To,_o)}return xe},K={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},j={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},ue=[new RegExp(K.aletter),new RegExp(K.midnumlet),new RegExp(K.midletter),new RegExp(K.midnum),new RegExp(K.numeric),new RegExp(K.cr),new RegExp(K.lf),new RegExp(K.newline),new RegExp(K.extend),new RegExp(K.format),new RegExp(K.katakana),new RegExp(K.extendnumlet),new RegExp("@")],Se="",be=new RegExp("^"+K.punctuation+"$"),Ge=/^\s+$/,Ht=ue,Ut=j.OTHER,Nt=et=>{let kt=Ut;const dt=Ht.length;for(let xe=0;xe<dt;++xe){const _o=Ht[xe];if(_o&&_o.test(et)){kt=xe;break}}return kt},vt=et=>{const kt={};return dt=>{if(kt[dt])return kt[dt];{const xe=et(dt);return kt[dt]=xe,xe}}},Ie=et=>{const kt=vt(Nt);return N(et,kt)},on=(et,kt)=>{const dt=et[kt],xe=et[kt+1];if(kt<0||kt>et.length-1&&kt!==0||dt===j.ALETTER&&xe===j.ALETTER)return!1;const _o=et[kt+2];if(dt===j.ALETTER&&(xe===j.MIDLETTER||xe===j.MIDNUMLET||xe===j.AT)&&_o===j.ALETTER)return!1;const To=et[kt-1];return(dt===j.MIDLETTER||dt===j.MIDNUMLET||xe===j.AT)&&xe===j.ALETTER&&To===j.ALETTER||(dt===j.NUMERIC||dt===j.ALETTER)&&(xe===j.NUMERIC||xe===j.ALETTER)||(dt===j.MIDNUM||dt===j.MIDNUMLET)&&xe===j.NUMERIC&&To===j.NUMERIC||dt===j.NUMERIC&&(xe===j.MIDNUM||xe===j.MIDNUMLET)&&_o===j.NUMERIC||(dt===j.EXTEND||dt===j.FORMAT)&&(xe===j.ALETTER||xe===j.NUMERIC||xe===j.KATAKANA||xe===j.EXTEND||xe===j.FORMAT)||(xe===j.EXTEND||xe===j.FORMAT&&(_o===j.ALETTER||_o===j.NUMERIC||_o===j.KATAKANA||_o===j.EXTEND||_o===j.FORMAT))&&(dt===j.ALETTER||dt===j.NUMERIC||dt===j.KATAKANA||dt===j.EXTEND||dt===j.FORMAT)||dt===j.CR&&xe===j.LF?!1:dt===j.NEWLINE||dt===j.CR||dt===j.LF||xe===j.NEWLINE||xe===j.CR||xe===j.LF?!0:!(dt===j.KATAKANA&&xe===j.KATAKANA||xe===j.EXTENDNUMLET&&(dt===j.ALETTER||dt===j.NUMERIC||dt===j.KATAKANA||dt===j.EXTENDNUMLET)||dt===j.EXTENDNUMLET&&(xe===j.ALETTER||xe===j.NUMERIC||xe===j.KATAKANA)||dt===j.AT)},Et=Se,ce=Ge,qe=be,On=et=>et==="http"||et==="https",jt=(et,kt)=>{let dt;for(dt=kt;dt<et.length&&!ce.test(et[dt]);dt++);return dt},ne=(et,kt)=>{const dt=jt(et,kt+1);return et.slice(kt+1,dt).join(Et).substr(0,3)==="://"?dt:kt},Kt=(et,kt,dt,xe)=>{const _o=[],To=[];let Zt=[];for(let ss=0;ss<dt.length;++ss)if(Zt.push(et[ss]),on(dt,ss)){const Mo=kt[ss];if((xe.includeWhitespace||!ce.test(Mo))&&(xe.includePunctuation||!qe.test(Mo))){const $r=ss-Zt.length+1,Po=ss+1,Is=kt.slice($r,Po).join(Et);if(On(Is)){const Xa=ne(kt,ss),ws=et.slice(Po,Xa);Array.prototype.push.apply(Zt,ws),ss=Xa}kt[ss+1]==="."&&/^([a-zA-Z]\.)+$/.test(Is+".")?(Zt.push(et[ss+1]),To.push({start:$r,end:Po+1})):To.push({start:$r,end:Po}),_o.push(Zt)}Zt=[]}return{words:_o,indices:To}},Pn=()=>({includeWhitespace:!1,includePunctuation:!1}),Qt=(et,kt,dt)=>{dt={...Pn(),...dt};const xe=N(et,kt),_o=Ie(xe);return Kt(et,xe,_o,dt)},ve=(et,kt,dt)=>Qt(et,kt,dt).words,so=et=>et.replace(/\uFEFF/g,"");var Me=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Pe=(et,kt)=>{const dt=kt.getBlockElements(),xe=kt.getVoidElements(),_o=$r=>dt[$r.nodeName]||xe[$r.nodeName],To=[];let Zt="";const ss=new Me(et,et);let Mo;for(;Mo=ss.next();)Mo.nodeType===3?Zt+=so(Mo.data):_o(Mo)&&Zt.length&&(To.push(Zt),Zt="");return Zt.length&&To.push(Zt),To},M=et=>et.replace(/\u200B/g,""),cn=et=>et.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ct=(et,kt)=>{const dt=M(Pe(et,kt).join(`
`));return ve(dt.split(""),E).length},Hn=(et,kt)=>{const dt=Pe(et,kt).join("");return cn(dt)},rn=(et,kt)=>{const dt=Pe(et,kt).join("").replace(/\s/g,"");return cn(dt)},nt=(et,kt)=>()=>kt(et.getBody(),et.schema),eo=(et,kt)=>()=>kt(et.selection.getRng().cloneContents(),et.schema),ms=et=>nt(et,ct),to=et=>({body:{getWordCount:ms(et),getCharacterCount:nt(et,Hn),getCharacterCountWithoutSpaces:nt(et,rn)},selection:{getWordCount:eo(et,ct),getCharacterCount:eo(et,Hn),getCharacterCountWithoutSpaces:eo(et,rn)},getCount:ms(et)}),os=(et,kt)=>{et.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(kt.body.getWordCount()),String(kt.selection.getWordCount())],["Characters (no spaces)",String(kt.body.getCharacterCountWithoutSpaces()),String(kt.selection.getCharacterCountWithoutSpaces())],["Characters",String(kt.body.getCharacterCount()),String(kt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},tt=(et,kt)=>{et.addCommand("mceWordCount",()=>os(et,kt))},wt=(et,kt)=>{let dt=null;return{cancel:()=>{w(dt)||(clearTimeout(dt),dt=null)},throttle:(...To)=>{w(dt)&&(dt=setTimeout(()=>{dt=null,et.apply(null,To)},kt))}}};var W=tinymce.util.Tools.resolve("tinymce.util.Delay");const ta=(et,kt)=>{et.dispatch("wordCountUpdate",{wordCount:{words:kt.body.getWordCount(),characters:kt.body.getCharacterCount(),charactersWithoutSpaces:kt.body.getCharacterCountWithoutSpaces()}})},uo=(et,kt)=>{ta(et,kt)},qo=(et,kt,dt)=>{const xe=wt(()=>uo(et,kt),dt);et.on("init",()=>{uo(et,kt),W.setEditorTimeout(et,()=>{et.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",xe.throttle)},0),et.on("remove",xe.cancel)})},Ho=et=>{const kt=()=>et.execCommand("mceWordCount");et.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:kt}),et.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:kt})};var Wi=(et=300)=>{p.add("wordcount",kt=>{const dt=to(kt);return tt(kt,dt),Ho(kt),qo(kt,dt,et),dt})};Wi()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(ge,de,Ve)=>{var Ye;return Ve(ge,de.prototype)?!0:((Ye=ge.constructor)===null||Ye===void 0?void 0:Ye.name)===de.name},w=ge=>{const de=typeof ge;return ge===null?"null":de==="object"&&Array.isArray(ge)?"array":de==="object"&&g(ge,String,(Ve,Ye)=>Ye.isPrototypeOf(Ve))?"string":de},E=ge=>de=>w(de)===ge,N=E("string"),z=E("object"),K=E("array"),j=ge=>ge==null,ue=ge=>!j(ge);class Se{constructor(de,Ve){this.tag=de,this.value=Ve}static some(de){return new Se(!0,de)}static none(){return Se.singletonNone}fold(de,Ve){return this.tag?Ve(this.value):de()}isSome(){return this.tag}isNone(){return!this.tag}map(de){return this.tag?Se.some(de(this.value)):Se.none()}bind(de){return this.tag?de(this.value):Se.none()}exists(de){return this.tag&&de(this.value)}forall(de){return!this.tag||de(this.value)}filter(de){return!this.tag||de(this.value)?this:Se.none()}getOr(de){return this.tag?this.value:de}or(de){return this.tag?this:de}getOrThunk(de){return this.tag?this.value:de()}orThunk(de){return this.tag?this:de()}getOrDie(de){if(this.tag)return this.value;throw new Error(de??"Called getOrDie on None")}static from(de){return ue(de)?Se.some(de):Se.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(de){this.tag&&de(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Se.singletonNone=new Se(!1);const be=Array.prototype.push,Ge=(ge,de)=>{for(let Ve=0,Ye=ge.length;Ve<Ye;Ve++){const gn=ge[Ve];de(gn,Ve)}},Ht=ge=>{const de=[];for(let Ve=0,Ye=ge.length;Ve<Ye;++Ve){if(!K(ge[Ve]))throw new Error("Arr.flatten item "+Ve+" was not an array, input: "+ge);be.apply(de,ge[Ve])}return de},Ut=ge=>{let de=ge;return{get:()=>de,set:gn=>{de=gn}}},Nt=Object.keys,vt=Object.hasOwnProperty,Ie=(ge,de)=>{const Ve=Nt(ge);for(let Ye=0,gn=Ve.length;Ye<gn;Ye++){const Bn=Ve[Ye],Wn=ge[Bn];de(Wn,Bn)}},on=(ge,de)=>Et(ge,de)?Se.from(ge[de]):Se.none(),Et=(ge,de)=>vt.call(ge,de),ce=ge=>de=>de.options.get(ge),qe=ge=>{const de=ge.options.register;de("audio_template_callback",{processor:"function"}),de("video_template_callback",{processor:"function"}),de("iframe_template_callback",{processor:"function"}),de("media_live_embeds",{processor:"boolean",default:!0}),de("media_filter_html",{processor:"boolean",default:!0}),de("media_url_resolver",{processor:"function"}),de("media_alt_source",{processor:"boolean",default:!0}),de("media_poster",{processor:"boolean",default:!0}),de("media_dimensions",{processor:"boolean",default:!0})},On=ce("audio_template_callback"),jt=ce("video_template_callback"),ne=ce("iframe_template_callback"),Kt=ce("media_live_embeds"),Pn=ce("media_filter_html"),Qt=ce("media_url_resolver"),$e=ce("media_alt_source"),ve=ce("media_poster"),so=ce("media_dimensions");var Me=tinymce.util.Tools.resolve("tinymce.util.Tools"),Pe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.html.DomParser");const cn=Pe.DOM,ct=ge=>ge.replace(/px$/,""),Hn=ge=>{const de=ge.attr("style"),Ve=de?cn.parseStyle(de):{};return{type:"ephox-embed-iri",source:ge.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:on(Ve,"max-width").map(ct).getOr(""),height:on(Ve,"max-height").map(ct).getOr("")}},rn=(ge,de)=>{let Ve={};const gn=M({validate:!1,forced_root_block:!1},de).parse(ge);for(let Bn=gn;Bn;Bn=Bn.walk())if(Bn.type===1){const Wn=Bn.name;if(Bn.attr("data-ephox-embed-iri")){Ve=Hn(Bn);break}else!Ve.source&&Wn==="param"&&(Ve.source=Bn.attr("movie")),(Wn==="iframe"||Wn==="object"||Wn==="embed"||Wn==="video"||Wn==="audio")&&(Ve.type||(Ve.type=Wn),Ve=Me.extend(Bn.attributes.map,Ve)),Wn==="source"&&(Ve.source?Ve.altsource||(Ve.altsource=Bn.attr("src")):Ve.source=Bn.attr("src")),Wn==="img"&&!Ve.poster&&(Ve.poster=Bn.attr("src"))}return Ve.source=Ve.source||Ve.src||"",Ve.altsource=Ve.altsource||"",Ve.poster=Ve.poster||"",Ve},nt=ge=>{var de;const Ve={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ye=(de=ge.toLowerCase().split(".").pop())!==null&&de!==void 0?de:"";return on(Ve,Ye).getOr("")};var eo=tinymce.util.Tools.resolve("tinymce.html.Node"),ms=tinymce.util.Tools.resolve("tinymce.html.Serializer");const to=(ge,de={})=>M({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...de},ge),os=Pe.DOM,tt=ge=>/^[0-9.]+$/.test(ge)?ge+"px":ge,wt=(ge,de)=>{const Ve=de.attr("style"),Ye=Ve?os.parseStyle(Ve):{};ue(ge.width)&&(Ye["max-width"]=tt(ge.width)),ue(ge.height)&&(Ye["max-height"]=tt(ge.height)),de.attr("style",os.serializeStyle(Ye))},W=["source","altsource"],ta=(ge,de,Ve,Ye)=>{let gn=0,Bn=0;const Wn=to(Ye);Wn.addNodeFilter("source",_e=>gn=_e.length);const or=Wn.parse(ge);for(let _e=or;_e;_e=_e.walk())if(_e.type===1){const Zn=_e.name;if(_e.attr("data-ephox-embed-iri")){wt(de,_e);break}else{switch(Zn){case"video":case"object":case"embed":case"img":case"iframe":de.height!==void 0&&de.width!==void 0&&(_e.attr("width",de.width),_e.attr("height",de.height));break}if(Ve)switch(Zn){case"video":_e.attr("poster",de.poster),_e.attr("src",null);for(let ur=gn;ur<2;ur++)if(de[W[ur]]){const ka=new eo("source",1);ka.attr("src",de[W[ur]]),ka.attr("type",de[W[ur]+"mime"]||null),_e.append(ka)}break;case"iframe":_e.attr("src",de.source);break;case"object":const Xs=_e.getAll("img").length>0;if(de.poster&&!Xs){_e.attr("src",de.poster);const ur=new eo("img",1);ur.attr("src",de.poster),ur.attr("width",de.width),ur.attr("height",de.height),_e.append(ur)}break;case"source":if(Bn<2&&(_e.attr("src",de[W[Bn]]),_e.attr("type",de[W[Bn]+"mime"]||null),!de[W[Bn]])){_e.remove();continue}Bn++;break;case"img":de.poster||_e.remove();break}}}return ms({},Ye).serialize(or)},uo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],qo=ge=>{const de=ge.match(/^(https?:\/\/|www\.)(.+)$/i);return de&&de.length>1?de[1]==="www."?"https://":de[1]:"https://"},Ho=(ge,de)=>{const Ve=qo(de),Ye=ge.regex.exec(de);let gn=Ve+ge.url;if(ue(Ye))for(let Bn=0;Bn<Ye.length;Bn++)gn=gn.replace("$"+Bn,()=>Ye[Bn]?Ye[Bn]:"");return gn.replace(/\?$/,"")},Wi=ge=>{const de=uo.filter(Ve=>Ve.regex.test(ge));return de.length>0?Me.extend({},de[0],{url:Ho(de[0],ge)}):null},et=(ge,de)=>{if(de)return de(ge);{const Ve=ge.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ge.source+'" width="'+ge.width+'" height="'+ge.height+'"'+Ve+"></iframe>"}},kt=ge=>{let de='<object data="'+ge.source+'" width="'+ge.width+'" height="'+ge.height+'" type="application/x-shockwave-flash">';return ge.poster&&(de+='<img src="'+ge.poster+'" width="'+ge.width+'" height="'+ge.height+'" />'),de+="</object>",de},dt=(ge,de)=>de?de(ge):'<audio controls="controls" src="'+ge.source+'">'+(ge.altsource?`
<source src="`+ge.altsource+'"'+(ge.altsourcemime?' type="'+ge.altsourcemime+'"':"")+` />
`:"")+"</audio>",xe=(ge,de)=>de?de(ge):'<video width="'+ge.width+'" height="'+ge.height+'"'+(ge.poster?' poster="'+ge.poster+'"':"")+` controls="controls">
<source src="`+ge.source+'"'+(ge.sourcemime?' type="'+ge.sourcemime+'"':"")+` />
`+(ge.altsource?'<source src="'+ge.altsource+'"'+(ge.altsourcemime?' type="'+ge.altsourcemime+'"':"")+` />
`:"")+"</video>",_o=(ge,de)=>{var Ve;const Ye=Me.extend({},de);if(!Ye.source&&(Me.extend(Ye,rn((Ve=Ye.embed)!==null&&Ve!==void 0?Ve:"",ge.schema)),!Ye.source))return"";Ye.altsource||(Ye.altsource=""),Ye.poster||(Ye.poster=""),Ye.source=ge.convertURL(Ye.source,"source"),Ye.altsource=ge.convertURL(Ye.altsource,"source"),Ye.sourcemime=nt(Ye.source),Ye.altsourcemime=nt(Ye.altsource),Ye.poster=ge.convertURL(Ye.poster,"poster");const gn=Wi(Ye.source);if(gn&&(Ye.source=gn.url,Ye.type=gn.type,Ye.allowfullscreen=gn.allowFullscreen,Ye.width=Ye.width||String(gn.w),Ye.height=Ye.height||String(gn.h)),Ye.embed)return ta(Ye.embed,Ye,!0,ge.schema);{const Bn=On(ge),Wn=jt(ge),or=ne(ge);return Ye.width=Ye.width||"300",Ye.height=Ye.height||"150",Me.each(Ye,(_e,Zn)=>{Ye[Zn]=ge.dom.encode(""+_e)}),Ye.type==="iframe"?et(Ye,or):Ye.sourcemime==="application/x-shockwave-flash"?kt(Ye):Ye.sourcemime.indexOf("audio")!==-1?dt(Ye,Bn):xe(Ye,Wn)}},To=ge=>ge.hasAttribute("data-mce-object")||ge.hasAttribute("data-ephox-embed-iri"),Zt=ge=>{ge.on("mousedown",de=>{const Ve=ge.dom.getParent(de.target,".mce-preview-object");Ve&&ge.dom.getAttrib(Ve,"data-mce-selected")==="2"&&de.stopImmediatePropagation()}),ge.on("click keyup touchend",()=>{const de=ge.selection.getNode();de&&ge.dom.hasClass(de,"mce-preview-object")&&ge.dom.getAttrib(de,"data-mce-selected")&&de.setAttribute("data-mce-selected","2")}),ge.on("ObjectResized",de=>{const Ve=de.target;if(Ve.getAttribute("data-mce-object")){let Ye=Ve.getAttribute("data-mce-html");Ye&&(Ye=unescape(Ye),Ve.setAttribute("data-mce-html",escape(ta(Ye,{width:String(de.width),height:String(de.height)},!1,ge.schema))))}})},ss={},Mo=(ge,de,Ve)=>new Promise((Ye,gn)=>{const Bn=Wn=>(Wn.html&&(ss[ge.source]=Wn),Ye({url:ge.source,html:Wn.html?Wn.html:de(ge)}));ss[ge.source]?Bn(ss[ge.source]):Ve({url:ge.source}).then(Bn).catch(gn)}),$r=(ge,de)=>Promise.resolve({html:de(ge),url:ge.source}),Po=ge=>de=>_o(ge,de),Is=(ge,de)=>{const Ve=Qt(ge);return Ve?Mo(de,Po(ge),Ve):$r(de,Po(ge))},Xa=ge=>Et(ss,ge),ws=(ge,de)=>on(de,ge).bind(Ve=>on(Ve,"meta")),bs=(ge,de,Ve)=>Ye=>{const gn=()=>on(ge,Ye),Bn=()=>on(de,Ye),Wn=Zn=>on(Zn,"value").bind(Xs=>Xs.length>0?Se.some(Xs):Se.none()),or=()=>gn().bind(Zn=>z(Zn)?Wn(Zn).orThunk(Bn):Bn().orThunk(()=>Se.from(Zn))),_e=()=>Bn().orThunk(()=>gn().bind(Zn=>z(Zn)?Wn(Zn):Se.from(Zn)));return{[Ye]:(Ye===Ve?or():_e()).getOr("")}},vs=(ge,de)=>{const Ve={};return on(ge,"dimensions").each(Ye=>{Ge(["width","height"],gn=>{on(de,gn).orThunk(()=>on(Ye,gn)).each(Bn=>Ve[gn]=Bn)})}),Ve},qr=(ge,de)=>{const Ve=de&&de!=="dimensions"?ws(de,ge).getOr({}):{},Ye=bs(ge,Ve,de);return{...Ye("source"),...Ye("altsource"),...Ye("poster"),...Ye("embed"),...vs(ge,Ve)}},Cs=ge=>{const de={...ge,source:{value:on(ge,"source").getOr("")},altsource:{value:on(ge,"altsource").getOr("")},poster:{value:on(ge,"poster").getOr("")}};return Ge(["width","height"],Ve=>{on(ge,Ve).each(Ye=>{const gn=de.dimensions||{};gn[Ve]=Ye,de.dimensions=gn})}),de},Vo=ge=>de=>{const Ve=de&&de.msg?"Media embed handler error: "+de.msg:"Media embed handler threw unknown error.";ge.notificationManager.open({type:"error",text:Ve})},vc=ge=>{const de=ge.selection.getNode(),Ve=To(de)?ge.serializer.serialize(de,{selection:!0}):"",Ye=rn(Ve,ge.schema),Bn=(()=>{if(Oi(Ye.source,Ye.type)){const Wn=ge.dom.getRect(de);return{width:Wn.w.toString().replace(/px$/,""),height:Wn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Ve,...Ye,...Bn}},fo=(ge,de)=>Ve=>{if(N(Ve.url)&&Ve.url.trim().length>0){const Ye=Ve.html,Bn={...rn(Ye,de.schema),source:Ve.url,embed:Ye};ge.setData(Cs(Bn))}},cs=(ge,de)=>{const Ve=ge.dom.select("*[data-mce-object]");for(let Ye=0;Ye<de.length;Ye++)for(let gn=Ve.length-1;gn>=0;gn--)de[Ye]===Ve[gn]&&Ve.splice(gn,1);ge.selection.select(Ve[0])},_r=(ge,de)=>{const Ve=ge.dom.select("*[data-mce-object]");ge.insertContent(de),cs(ge,Ve),ge.nodeChanged()},Oi=(ge,de)=>ue(de)&&de==="ephox-embed-iri"&&ue(Wi(ge)),Zi=(ge,de)=>((Ye,gn)=>Ye.width!==gn.width||Ye.height!==gn.height)(ge,de)&&Oi(de.source,ge.type),Go=(ge,de,Ve)=>{var Ye;de.embed=Zi(ge,de)&&so(Ve)?_o(Ve,{...de,embed:""}):ta((Ye=de.embed)!==null&&Ye!==void 0?Ye:"",de,!1,Ve.schema),de.embed&&(ge.source===de.source||Xa(de.source))?_r(Ve,de.embed):Is(Ve,de).then(gn=>{_r(Ve,gn.html)}).catch(Vo(Ve))},Vc=ge=>{const de=vc(ge),Ve=Ut(de),Ye=Cs(de),gn=(Ps,Ko)=>{const es=qr(Ko.getData(),"source");Ps.source!==es.source&&(fo(Aa,ge)({url:es.source,html:""}),Is(ge,es).then(fo(Aa,ge)).catch(Vo(ge)))},Bn=Ps=>{var Ko;const es=qr(Ps.getData()),na=rn((Ko=es.embed)!==null&&Ko!==void 0?Ko:"",ge.schema);Ps.setData(Cs(na))},Wn=(Ps,Ko,es)=>{const na=qr(Ps.getData(),Ko),oa=Zi(es,na)&&so(ge)?{...na,embed:""}:na,kr=_o(ge,oa);Ps.setData(Cs({...oa,embed:kr}))},or=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],_e=so(ge)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Zn={title:"General",name:"general",items:Ht([or,_e])},ur={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},ka=[];$e(ge)&&ka.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ve(ge)&&ka.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const Zo={title:"Advanced",name:"advanced",items:ka},zc=[Zn,ur];ka.length>0&&zc.push(Zo);const Gr={type:"tabpanel",tabs:zc},Aa=ge.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Gr,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Ps=>{const Ko=qr(Ps.getData());Go(Ve.get(),Ko,ge),Ps.close()},onChange:(Ps,Ko)=>{switch(Ko.name){case"source":gn(Ve.get(),Ps);break;case"embed":Bn(Ps);break;case"dimensions":case"altsource":case"poster":Wn(Ps,Ko.name,Ve.get());break}Ve.set(qr(Ps.getData()))},initialData:Ye})},At=ge=>({showDialog:()=>{Vc(ge)}}),po=ge=>{const de=()=>{Vc(ge)};ge.addCommand("mceMedia",de)},Hr=(ge,de,Ve)=>ge.length>=de.length&&ge.substr(Ve,Ve+de.length)===de,Vr=(ge,de)=>Hr(ge,de,0);var Ba=tinymce.util.Tools.resolve("tinymce.Env");const Ja=ge=>{const de=ge.name;return de==="iframe"||de==="video"||de==="audio"},Wo=(ge,de,Ve,Ye=null)=>{const gn=ge.attr(Ve);return ue(gn)?gn:Et(de,Ve)?null:Ye},hi=(ge,de,Ve)=>{const Ye=de.name==="img"||ge.name==="video",gn=Ye?"300":null,Bn=ge.name==="audio"?"30":"150",Wn=Ye?Bn:null;de.attr({width:Wo(ge,Ve,"width",gn),height:Wo(ge,Ve,"height",Wn)})},Di=(ge,de,Ve,Ye)=>{const gn=to(ge.schema).parse(Ye,{context:de});for(;gn.firstChild;)Ve.append(gn.firstChild)},zo=(ge,de)=>{const Ve=de.name,Ye=new eo("img",1);return Ys(ge,de,Ye),hi(de,Ye,{}),Ye.attr({style:de.attr("style"),src:Ba.transparentSrc,"data-mce-object":Ve,class:"mce-object mce-object-"+Ve}),Ye},Sn=(ge,de)=>{var Ve;const Ye=de.name,gn=new eo("span",1);gn.attr({contentEditable:"false",style:de.attr("style"),"data-mce-object":Ye,class:"mce-preview-object mce-object-"+Ye}),Ys(ge,de,gn);const Bn=ge.dom.parseStyle((Ve=de.attr("style"))!==null&&Ve!==void 0?Ve:""),Wn=new eo(Ye,1);if(hi(de,Wn,Bn),Wn.attr({src:de.attr("src"),style:de.attr("style"),class:de.attr("class")}),Ye==="iframe")Wn.attr({allowfullscreen:de.attr("allowfullscreen"),frameborder:"0",sandbox:de.attr("sandbox"),referrerpolicy:de.attr("referrerpolicy")});else{Ge(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Xs=>{Wn.attr(Xs,de.attr(Xs))});const Zn=gn.attr("data-mce-html");ue(Zn)&&Di(ge,Ye,Wn,unescape(Zn))}const or=new eo("span",1);return or.attr("class","mce-shim"),gn.append(Wn),gn.append(or),gn},Ys=(ge,de,Ve)=>{var Ye;const gn=(Ye=de.attributes)!==null&&Ye!==void 0?Ye:[];let Bn=gn.length;for(;Bn--;){const Zn=gn[Bn].name;let Xs=gn[Bn].value;Zn!=="width"&&Zn!=="height"&&Zn!=="style"&&!Vr(Zn,"data-mce-")&&((Zn==="data"||Zn==="src")&&(Xs=ge.convertURL(Xs,Zn)),Ve.attr("data-mce-p-"+Zn,Xs))}const Wn=ms({inner:!0},ge.schema),or=new eo("div",1);Ge(de.children(),Zn=>or.append(Zn));const _e=Wn.serialize(or);_e&&(Ve.attr("data-mce-html",escape(_e)),Ve.empty())},Qa=ge=>{const de=ge.attr("class");return N(de)&&/\btiny-pageembed\b/.test(de)},ul=ge=>{let de=ge;for(;de=de.parent;)if(de.attr("data-ephox-embed-iri")||Qa(de))return!0;return!1},dl=ge=>de=>{let Ve=de.length,Ye;for(;Ve--;)Ye=de[Ve],Ye.parent&&(Ye.parent.attr("data-mce-object")||(Ja(Ye)&&Kt(ge)?ul(Ye)||Ye.replace(Sn(ge,Ye)):ul(Ye)||Ye.replace(zo(ge,Ye))))},hs=(ge,de,Ve)=>{const Ye=ge.options.get,gn=Ye("xss_sanitization"),Bn=Pn(ge);return to(ge.schema,{sanitize:gn,validate:Bn}).parse(Ve,{context:de})},pr=ge=>{ge.on("PreInit",()=>{const{schema:de,serializer:Ve,parser:Ye}=ge,gn=de.getBoolAttrs();Ge("webkitallowfullscreen mozallowfullscreen".split(" "),Bn=>{gn[Bn]={}}),Ie({embed:["wmode"]},(Bn,Wn)=>{const or=de.getElementRule(Wn);or&&Ge(Bn,_e=>{or.attributes[_e]={},or.attributesOrder.push(_e)})}),Ye.addNodeFilter("iframe,video,audio,object,embed",dl(ge)),Ve.addAttributeFilter("data-mce-object",(Bn,Wn)=>{var or;let _e=Bn.length;for(;_e--;){const Zn=Bn[_e];if(!Zn.parent)continue;const Xs=Zn.attr(Wn),ur=new eo(Xs,1);if(Xs!=="audio"){const Gr=Zn.attr("class");Gr&&Gr.indexOf("mce-preview-object")!==-1&&Zn.firstChild?ur.attr({width:Zn.firstChild.attr("width"),height:Zn.firstChild.attr("height")}):ur.attr({width:Zn.attr("width"),height:Zn.attr("height")})}ur.attr({style:Zn.attr("style")});const ka=(or=Zn.attributes)!==null&&or!==void 0?or:[];let Zo=ka.length;for(;Zo--;){const Gr=ka[Zo].name;Gr.indexOf("data-mce-p-")===0&&ur.attr(Gr.substr(11),ka[Zo].value)}const zc=Zn.attr("data-mce-html");if(zc){const Gr=hs(ge,Xs,unescape(zc));Ge(Gr.children(),Aa=>ur.append(Aa))}Zn.replace(ur)}})}),ge.on("SetContent",()=>{const de=ge.dom;Ge(de.select("span.mce-preview-object"),Ve=>{de.select("span.mce-shim",Ve).length===0&&de.add(Ve,"span",{class:"mce-shim"})})})},Zs=ge=>{ge.on("ResolveName",de=>{let Ve;de.target.nodeType===1&&(Ve=de.target.getAttribute("data-mce-object"))&&(de.name=Ve)})},Ta=ge=>de=>{const Ve=()=>{de.setEnabled(ge.selection.isEditable())};return ge.on("NodeChange",Ve),Ve(),()=>{ge.off("NodeChange",Ve)}},yc=ge=>{const de=()=>ge.execCommand("mceMedia");ge.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:de,onSetup:Ve=>{const Ye=ge.selection;Ve.setActive(To(Ye.getNode()));const gn=Ye.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ve.setActive).unbind,Bn=Ta(ge)(Ve);return()=>{gn(),Bn()}}}),ge.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:de,onSetup:Ta(ge)})};var Tr=()=>{p.add("media",ge=>(qe(ge),po(ge),yc(ge),Zs(ge),pr(ge),Zt(ge),At(ge)))};Tr()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(j,ue)=>{j.focus(),j.undoManager.transact(()=>{j.setContent(ue)}),j.selection.setCursorLocation(),j.nodeChanged()},w=j=>j.getContent({source_view:!0}),E=j=>{const ue=w(j);j.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:ue},onSubmit:Se=>{g(j,Se.getData().code),Se.close()}})},N=j=>{j.addCommand("mceCodeEditor",()=>{E(j)})},z=j=>{const ue=()=>j.execCommand("mceCodeEditor");j.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:ue}),j.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:ue})};var K=()=>{p.add("code",j=>(N(j),z(j),{}))};K()})();(function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager");const g=(Me,Pe,M)=>{const cn=Pe==="UL"?"InsertUnorderedList":"InsertOrderedList";Me.execCommand(cn,!1,M===!1?null:{"list-style-type":M})},w=Me=>{Me.addCommand("ApplyUnorderedListStyle",(Pe,M)=>{g(Me,"UL",M["list-style-type"])}),Me.addCommand("ApplyOrderedListStyle",(Pe,M)=>{g(Me,"OL",M["list-style-type"])})},E=Me=>Pe=>Pe.options.get(Me),N=Me=>{const Pe=Me.options.register;Pe("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Pe("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},z=E("advlist_number_styles"),K=E("advlist_bullet_styles"),j=Me=>Me==null,ue=Me=>!j(Me);var Se=tinymce.util.Tools.resolve("tinymce.util.Tools");class be{constructor(Pe,M){this.tag=Pe,this.value=M}static some(Pe){return new be(!0,Pe)}static none(){return be.singletonNone}fold(Pe,M){return this.tag?M(this.value):Pe()}isSome(){return this.tag}isNone(){return!this.tag}map(Pe){return this.tag?be.some(Pe(this.value)):be.none()}bind(Pe){return this.tag?Pe(this.value):be.none()}exists(Pe){return this.tag&&Pe(this.value)}forall(Pe){return!this.tag||Pe(this.value)}filter(Pe){return!this.tag||Pe(this.value)?this:be.none()}getOr(Pe){return this.tag?this.value:Pe}or(Pe){return this.tag?this:Pe}getOrThunk(Pe){return this.tag?this.value:Pe()}orThunk(Pe){return this.tag?this:Pe()}getOrDie(Pe){if(this.tag)return this.value;throw new Error(Pe??"Called getOrDie on None")}static from(Pe){return ue(Pe)?be.some(Pe):be.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Pe){this.tag&&Pe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}be.singletonNone=new be(!1);const Ge=(Me,Pe,M)=>{for(let cn=0,ct=Me.length;cn<ct;cn++){const Hn=Me[cn];if(Pe(Hn,cn))return be.some(Hn);if(M(Hn,cn))break}return be.none()},Ht=Me=>/\btox\-/.test(Me.className),Ut=(Me,Pe)=>Me.dom.isChildOf(Pe,Me.getBody()),Nt=Me=>Pe=>ue(Pe)&&Me.test(Pe.nodeName),vt=Nt(/^(OL|UL|DL)$/),Ie=Nt(/^(TH|TD)$/),on=(Me,Pe,M)=>Ge(Pe,cn=>vt(cn)&&!Ht(cn),Ie).exists(cn=>cn.nodeName===M&&Ut(Me,cn)),Et=Me=>{const Pe=Me.dom.getParent(Me.selection.getNode(),"ol,ul"),M=Me.dom.getStyle(Pe,"listStyleType");return be.from(M)},ce=(Me,Pe)=>Pe!==null&&!Me.dom.isEditable(Pe),qe=(Me,Pe)=>{const M=Me.dom.getParent(Pe,"ol,ul,dl");return ce(Me,M)&&Me.selection.isEditable()},On=(Me,Pe)=>{const M=Me.selection.getNode();return Pe({parents:Me.dom.getParents(M),element:M}),Me.on("NodeChange",Pe),()=>Me.off("NodeChange",Pe)},jt=Me=>Me.replace(/\-/g," ").replace(/\b\w/g,Pe=>Pe.toUpperCase()),ne=Me=>j(Me)||Me==="default"?"":Me,Kt=(Me,Pe)=>M=>{const cn=(Hn,rn)=>{const nt=Hn.selection.getStart(!0);M.setActive(on(Hn,rn,Pe)),M.setEnabled(!qe(Hn,nt)&&Hn.selection.isEditable())};return On(Me,Hn=>cn(Me,Hn.parents))},Pn=(Me,Pe,M,cn,ct,Hn)=>{Me.ui.registry.addSplitButton(Pe,{tooltip:M,icon:ct==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:rn=>{const nt=Se.map(Hn,eo=>{const ms=ct==="OL"?"num":"bull",to=eo==="disc"||eo==="decimal"?"default":eo,os=ne(eo),tt=jt(eo);return{type:"choiceitem",value:os,icon:"list-"+ms+"-"+to,text:tt}});rn(nt)},onAction:()=>Me.execCommand(cn),onItemAction:(rn,nt)=>{g(Me,ct,nt)},select:rn=>Et(Me).map(eo=>rn===eo).getOr(!1),onSetup:Kt(Me,ct)})},Qt=(Me,Pe,M,cn,ct,Hn)=>{Me.ui.registry.addToggleButton(Pe,{active:!1,tooltip:M,icon:ct==="OL"?"ordered-list":"unordered-list",onSetup:Kt(Me,ct),onAction:()=>Me.queryCommandState(cn)||Hn===""?Me.execCommand(cn):g(Me,ct,Hn)})},$e=(Me,Pe,M,cn,ct,Hn)=>{Hn.length>1?Pn(Me,Pe,M,cn,ct,Hn):Qt(Me,Pe,M,cn,ct,ne(Hn[0]))},ve=Me=>{$e(Me,"numlist","Numbered list","InsertOrderedList","OL",z(Me)),$e(Me,"bullist","Bullet list","InsertUnorderedList","UL",K(Me))};var so=()=>{p.add("advlist",Me=>{Me.hasPlugin("lists")?(N(Me),ve(Me),w(Me)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};so()})();
